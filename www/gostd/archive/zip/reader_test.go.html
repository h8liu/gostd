<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6998663">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6998718">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6998772">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6998823">package</span>&nbsp;<span class="ident" id="6998831">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6998836">import</span>&nbsp;<span class="op" id="6998843">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998846">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998855">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998874">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998890">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998896">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998909">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998915">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998932">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998942">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998953">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6998964">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6998971">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6998974">type</span>&nbsp;<span class="ident" id="6998979">ZipTest</span>&nbsp;<span class="keyword" id="6998987">struct</span>&nbsp;<span class="op" id="6998994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6998997">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6999005">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999013">Source</span>&nbsp;&nbsp;<span class="keyword" id="6999021">func</span><span class="op" id="6999025">(</span><span class="op" id="6999026">)</span>&nbsp;<span class="op" id="6999028">(</span><span class="ident" id="6999029">r</span>&nbsp;<span class="ident" id="6999031">io</span><span class="op" id="6999033">.</span><span class="ident" id="6999034">ReaderAt</span><span class="op" id="6999042">,</span>&nbsp;<span class="ident" id="6999044">size</span>&nbsp;<span class="ident" id="6999049">int64</span><span class="op" id="6999054">)</span>&nbsp;<span class="comment" id="6999056">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999109">Comment</span>&nbsp;<span class="builtintype" id="6999117">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999125">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999133">[</span><span class="op" id="6999134">]</span><span class="ident" id="6999135">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999148">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6999156">error</span>&nbsp;<span class="comment" id="6999162">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="6999212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6999215">type</span>&nbsp;<span class="ident" id="6999220">ZipTestFile</span>&nbsp;<span class="keyword" id="6999232">struct</span>&nbsp;<span class="op" id="6999239">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999242">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6999253">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999261">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6999272">[</span><span class="op" id="6999273">]</span><span class="builtintype" id="6999274">byte</span>&nbsp;<span class="comment" id="6999279">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999330">ContentErr</span>&nbsp;<span class="builtintype" id="6999341">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999348">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6999359">string</span>&nbsp;<span class="comment" id="6999366">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999421">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6999432">string</span>&nbsp;<span class="comment" id="6999439">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6999487">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6999498">os</span><span class="op" id="6999500">.</span><span class="ident" id="6999501">FileMode</span><br>
<span class="lineno"></span><span class="op" id="6999510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6999513">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6999588">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="6999663">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="6999737">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="6999811">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="6999887">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="6999961">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7000041">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7000120">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7000168">var</span>&nbsp;<span class="ident" id="7000172">tests</span>&nbsp;<span class="op" id="7000178">=</span>&nbsp;<span class="op" id="7000180">[</span><span class="op" id="7000181">]</span><span class="ident" id="7000182">ZipTest</span><span class="op" id="7000189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000192">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000196">Name</span><span class="op" id="7000200">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7000205">&#34;test.zip&#34;</span><span class="op" id="7000215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000219">Comment</span><span class="op" id="7000226">:</span>&nbsp;<span class="string" id="7000228">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7000256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000260">File</span><span class="op" id="7000264">:</span>&nbsp;<span class="op" id="7000266">[</span><span class="op" id="7000267">]</span><span class="ident" id="7000268">ZipTestFile</span><span class="op" id="7000279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000290">Name</span><span class="op" id="7000294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7000299">&#34;test.txt&#34;</span><span class="op" id="7000309">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000315">Content</span><span class="op" id="7000322">:</span>&nbsp;<span class="op" id="7000324">[</span><span class="op" id="7000325">]</span><span class="builtintype" id="7000326">byte</span><span class="op" id="7000330">(</span><span class="string" id="7000331">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7000360">)</span><span class="op" id="7000361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000367">Mtime</span><span class="op" id="7000372">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7000376">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7000395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000401">Mode</span><span class="op" id="7000405">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7000410">0644</span><span class="op" id="7000414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000419">}</span><span class="op" id="7000420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000425">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000431">Name</span><span class="op" id="7000435">:</span>&nbsp;&nbsp;<span class="string" id="7000438">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7000460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000466">File</span><span class="op" id="7000470">:</span>&nbsp;&nbsp;<span class="string" id="7000473">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7000495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000501">Mtime</span><span class="op" id="7000506">:</span>&nbsp;<span class="string" id="7000508">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7000527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000533">Mode</span><span class="op" id="7000537">:</span>&nbsp;&nbsp;<span class="num" id="7000540">0644</span><span class="op" id="7000544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000549">}</span><span class="op" id="7000550">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000554">}</span><span class="op" id="7000555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000558">}</span><span class="op" id="7000559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000566">Name</span><span class="op" id="7000570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7000575">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7000599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000603">Comment</span><span class="op" id="7000610">:</span>&nbsp;<span class="string" id="7000612">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7000640">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000644">File</span><span class="op" id="7000648">:</span>&nbsp;<span class="op" id="7000650">[</span><span class="op" id="7000651">]</span><span class="ident" id="7000652">ZipTestFile</span><span class="op" id="7000663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000674">Name</span><span class="op" id="7000678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7000683">&#34;test.txt&#34;</span><span class="op" id="7000693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000699">Content</span><span class="op" id="7000706">:</span>&nbsp;<span class="op" id="7000708">[</span><span class="op" id="7000709">]</span><span class="builtintype" id="7000710">byte</span><span class="op" id="7000714">(</span><span class="string" id="7000715">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7000744">)</span><span class="op" id="7000745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000751">Mtime</span><span class="op" id="7000756">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7000760">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7000779">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000785">Mode</span><span class="op" id="7000789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7000794">0644</span><span class="op" id="7000798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000803">}</span><span class="op" id="7000804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000815">Name</span><span class="op" id="7000819">:</span>&nbsp;&nbsp;<span class="string" id="7000822">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7000844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000850">File</span><span class="op" id="7000854">:</span>&nbsp;&nbsp;<span class="string" id="7000857">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7000879">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000885">Mtime</span><span class="op" id="7000890">:</span>&nbsp;<span class="string" id="7000892">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7000911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000917">Mode</span><span class="op" id="7000921">:</span>&nbsp;&nbsp;<span class="num" id="7000924">0644</span><span class="op" id="7000928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000933">}</span><span class="op" id="7000934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000938">}</span><span class="op" id="7000939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000942">}</span><span class="op" id="7000943">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7000946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000950">Name</span><span class="op" id="7000954">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7000958">&#34;r.zip&#34;</span><span class="op" id="7000965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000969">Source</span><span class="op" id="7000975">:</span>&nbsp;<span class="ident" id="7000977">returnRecursiveZip</span><span class="op" id="7000995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7000999">File</span><span class="op" id="7001003">:</span>&nbsp;<span class="op" id="7001005">[</span><span class="op" id="7001006">]</span><span class="ident" id="7001007">ZipTestFile</span><span class="op" id="7001018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001023">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001029">Name</span><span class="op" id="7001033">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7001038">&#34;r/r.zip&#34;</span><span class="op" id="7001047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001053">Content</span><span class="op" id="7001060">:</span>&nbsp;<span class="ident" id="7001062">rZipBytes</span><span class="op" id="7001071">(</span><span class="op" id="7001072">)</span><span class="op" id="7001073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001079">Mtime</span><span class="op" id="7001084">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7001088">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7001107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001113">Mode</span><span class="op" id="7001117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001122">0666</span><span class="op" id="7001126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001131">}</span><span class="op" id="7001132">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001136">}</span><span class="op" id="7001137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001140">}</span><span class="op" id="7001141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001148">Name</span><span class="op" id="7001152">:</span>&nbsp;<span class="string" id="7001154">&#34;symlink.zip&#34;</span><span class="op" id="7001167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001171">File</span><span class="op" id="7001175">:</span>&nbsp;<span class="op" id="7001177">[</span><span class="op" id="7001178">]</span><span class="ident" id="7001179">ZipTestFile</span><span class="op" id="7001190">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001201">Name</span><span class="op" id="7001205">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7001210">&#34;symlink&#34;</span><span class="op" id="7001219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001225">Content</span><span class="op" id="7001232">:</span>&nbsp;<span class="op" id="7001234">[</span><span class="op" id="7001235">]</span><span class="builtintype" id="7001236">byte</span><span class="op" id="7001240">(</span><span class="string" id="7001241">&#34;../target&#34;</span><span class="op" id="7001252">)</span><span class="op" id="7001253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001259">Mode</span><span class="op" id="7001263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001268">0777</span>&nbsp;<span class="op" id="7001273">|</span>&nbsp;<span class="ident" id="7001275">os</span><span class="op" id="7001277">.</span><span class="ident" id="7001278">ModeSymlink</span><span class="op" id="7001289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001294">}</span><span class="op" id="7001295">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001299">}</span><span class="op" id="7001300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001303">}</span><span class="op" id="7001304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001311">Name</span><span class="op" id="7001315">:</span>&nbsp;<span class="string" id="7001317">&#34;readme.zip&#34;</span><span class="op" id="7001329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001332">}</span><span class="op" id="7001333">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001340">Name</span><span class="op" id="7001344">:</span>&nbsp;&nbsp;<span class="string" id="7001347">&#34;readme.notzip&#34;</span><span class="op" id="7001362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001366">Error</span><span class="op" id="7001371">:</span>&nbsp;<span class="ident" id="7001373">ErrFormat</span><span class="op" id="7001382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001385">}</span><span class="op" id="7001386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001389">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001393">Name</span><span class="op" id="7001397">:</span>&nbsp;<span class="string" id="7001399">&#34;dd.zip&#34;</span><span class="op" id="7001407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001411">File</span><span class="op" id="7001415">:</span>&nbsp;<span class="op" id="7001417">[</span><span class="op" id="7001418">]</span><span class="ident" id="7001419">ZipTestFile</span><span class="op" id="7001430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001441">Name</span><span class="op" id="7001445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7001450">&#34;filename&#34;</span><span class="op" id="7001460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001466">Content</span><span class="op" id="7001473">:</span>&nbsp;<span class="op" id="7001475">[</span><span class="op" id="7001476">]</span><span class="builtintype" id="7001477">byte</span><span class="op" id="7001481">(</span><span class="string" id="7001482">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7001510">)</span><span class="op" id="7001511">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001517">Mtime</span><span class="op" id="7001522">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7001526">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7001545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001551">Mode</span><span class="op" id="7001555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7001560">0666</span><span class="op" id="7001564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001569">}</span><span class="op" id="7001570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001574">}</span><span class="op" id="7001575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001578">}</span><span class="op" id="7001579">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7001586">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001627">Name</span><span class="op" id="7001631">:</span>&nbsp;<span class="string" id="7001633">&#34;winxp.zip&#34;</span><span class="op" id="7001644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001648">File</span><span class="op" id="7001652">:</span>&nbsp;<span class="ident" id="7001654">crossPlatform</span><span class="op" id="7001667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001670">}</span><span class="op" id="7001671">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7001678">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001714">Name</span><span class="op" id="7001718">:</span>&nbsp;<span class="string" id="7001720">&#34;unix.zip&#34;</span><span class="op" id="7001730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001734">File</span><span class="op" id="7001738">:</span>&nbsp;<span class="ident" id="7001740">crossPlatform</span><span class="op" id="7001753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001756">}</span><span class="op" id="7001757">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7001764">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7001820">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001876">Name</span><span class="op" id="7001880">:</span>&nbsp;<span class="string" id="7001882">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7001906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001910">File</span><span class="op" id="7001914">:</span>&nbsp;<span class="op" id="7001916">[</span><span class="op" id="7001917">]</span><span class="ident" id="7001918">ZipTestFile</span><span class="op" id="7001929">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7001934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001940">Name</span><span class="op" id="7001944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7001949">&#34;foo.txt&#34;</span><span class="op" id="7001958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001964">Content</span><span class="op" id="7001971">:</span>&nbsp;<span class="op" id="7001973">[</span><span class="op" id="7001974">]</span><span class="builtintype" id="7001975">byte</span><span class="op" id="7001979">(</span><span class="string" id="7001980">&#34;foo\n&#34;</span><span class="op" id="7001987">)</span><span class="op" id="7001988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7001994">Mtime</span><span class="op" id="7001999">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7002003">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7002022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002028">Mode</span><span class="op" id="7002032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002037">0644</span><span class="op" id="7002041">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002046">}</span><span class="op" id="7002047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002058">Name</span><span class="op" id="7002062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7002067">&#34;bar.txt&#34;</span><span class="op" id="7002076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002082">Content</span><span class="op" id="7002089">:</span>&nbsp;<span class="op" id="7002091">[</span><span class="op" id="7002092">]</span><span class="builtintype" id="7002093">byte</span><span class="op" id="7002097">(</span><span class="string" id="7002098">&#34;bar\n&#34;</span><span class="op" id="7002105">)</span><span class="op" id="7002106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002112">Mtime</span><span class="op" id="7002117">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7002121">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7002140">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002146">Mode</span><span class="op" id="7002150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002155">0644</span><span class="op" id="7002159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002164">}</span><span class="op" id="7002165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002169">}</span><span class="op" id="7002170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002173">}</span><span class="op" id="7002174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002177">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7002181">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7002236">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002292">Name</span><span class="op" id="7002296">:</span>&nbsp;<span class="string" id="7002298">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7002324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002328">File</span><span class="op" id="7002332">:</span>&nbsp;<span class="op" id="7002334">[</span><span class="op" id="7002335">]</span><span class="ident" id="7002336">ZipTestFile</span><span class="op" id="7002347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002352">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002358">Name</span><span class="op" id="7002362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7002367">&#34;foo.txt&#34;</span><span class="op" id="7002376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002382">Content</span><span class="op" id="7002389">:</span>&nbsp;<span class="op" id="7002391">[</span><span class="op" id="7002392">]</span><span class="builtintype" id="7002393">byte</span><span class="op" id="7002397">(</span><span class="string" id="7002398">&#34;foo\n&#34;</span><span class="op" id="7002405">)</span><span class="op" id="7002406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002412">Mode</span><span class="op" id="7002416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002421">0666</span><span class="op" id="7002425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002430">}</span><span class="op" id="7002431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002436">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002442">Name</span><span class="op" id="7002446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7002451">&#34;bar.txt&#34;</span><span class="op" id="7002460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002466">Content</span><span class="op" id="7002473">:</span>&nbsp;<span class="op" id="7002475">[</span><span class="op" id="7002476">]</span><span class="builtintype" id="7002477">byte</span><span class="op" id="7002481">(</span><span class="string" id="7002482">&#34;bar\n&#34;</span><span class="op" id="7002489">)</span><span class="op" id="7002490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002496">Mode</span><span class="op" id="7002500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002505">0666</span><span class="op" id="7002509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002514">}</span><span class="op" id="7002515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002519">}</span><span class="op" id="7002520">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002523">}</span><span class="op" id="7002524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002531">Name</span><span class="op" id="7002535">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7002539">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7002569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002573">Source</span><span class="op" id="7002579">:</span>&nbsp;<span class="ident" id="7002581">returnCorruptCRC32Zip</span><span class="op" id="7002602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002606">File</span><span class="op" id="7002610">:</span>&nbsp;<span class="op" id="7002612">[</span><span class="op" id="7002613">]</span><span class="ident" id="7002614">ZipTestFile</span><span class="op" id="7002625">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002636">Name</span><span class="op" id="7002640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7002648">&#34;foo.txt&#34;</span><span class="op" id="7002657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002663">Content</span><span class="op" id="7002670">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7002675">[</span><span class="op" id="7002676">]</span><span class="builtintype" id="7002677">byte</span><span class="op" id="7002681">(</span><span class="string" id="7002682">&#34;foo\n&#34;</span><span class="op" id="7002689">)</span><span class="op" id="7002690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002696">Mode</span><span class="op" id="7002700">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002708">0666</span><span class="op" id="7002712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002718">ContentErr</span><span class="op" id="7002728">:</span>&nbsp;<span class="ident" id="7002730">ErrChecksum</span><span class="op" id="7002741">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002746">}</span><span class="op" id="7002747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002758">Name</span><span class="op" id="7002762">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7002767">&#34;bar.txt&#34;</span><span class="op" id="7002776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002782">Content</span><span class="op" id="7002789">:</span>&nbsp;<span class="op" id="7002791">[</span><span class="op" id="7002792">]</span><span class="builtintype" id="7002793">byte</span><span class="op" id="7002797">(</span><span class="string" id="7002798">&#34;bar\n&#34;</span><span class="op" id="7002805">)</span><span class="op" id="7002806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002812">Mode</span><span class="op" id="7002816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7002821">0666</span><span class="op" id="7002825">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002830">}</span><span class="op" id="7002831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002835">}</span><span class="op" id="7002836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002839">}</span><span class="op" id="7002840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7002843">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7002903">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7002966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7002970">Name</span><span class="op" id="7002974">:</span>&nbsp;<span class="string" id="7002976">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7003000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003004">File</span><span class="op" id="7003008">:</span>&nbsp;<span class="op" id="7003010">[</span><span class="op" id="7003011">]</span><span class="ident" id="7003012">ZipTestFile</span><span class="op" id="7003023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003034">Name</span><span class="op" id="7003038">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003043">&#34;foo.txt&#34;</span><span class="op" id="7003052">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003058">Content</span><span class="op" id="7003065">:</span>&nbsp;<span class="op" id="7003067">[</span><span class="op" id="7003068">]</span><span class="builtintype" id="7003069">byte</span><span class="op" id="7003073">(</span><span class="string" id="7003074">&#34;foo\n&#34;</span><span class="op" id="7003081">)</span><span class="op" id="7003082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003088">Mtime</span><span class="op" id="7003093">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7003097">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7003116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003122">Mode</span><span class="op" id="7003126">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7003131">0644</span><span class="op" id="7003135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003140">}</span><span class="op" id="7003141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003146">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003152">Name</span><span class="op" id="7003156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003161">&#34;bar.txt&#34;</span><span class="op" id="7003170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003176">Content</span><span class="op" id="7003183">:</span>&nbsp;<span class="op" id="7003185">[</span><span class="op" id="7003186">]</span><span class="builtintype" id="7003187">byte</span><span class="op" id="7003191">(</span><span class="string" id="7003192">&#34;bar\n&#34;</span><span class="op" id="7003199">)</span><span class="op" id="7003200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003206">Mtime</span><span class="op" id="7003211">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7003215">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7003234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003240">Mode</span><span class="op" id="7003244">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7003249">0644</span><span class="op" id="7003253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003258">}</span><span class="op" id="7003259">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003263">}</span><span class="op" id="7003264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003267">}</span><span class="op" id="7003268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7003271">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7003333">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003396">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003400">Name</span><span class="op" id="7003404">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7003408">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7003432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003436">Source</span><span class="op" id="7003442">:</span>&nbsp;<span class="ident" id="7003444">returnCorruptNotStreamedZip</span><span class="op" id="7003471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003475">File</span><span class="op" id="7003479">:</span>&nbsp;<span class="op" id="7003481">[</span><span class="op" id="7003482">]</span><span class="ident" id="7003483">ZipTestFile</span><span class="op" id="7003494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003505">Name</span><span class="op" id="7003509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003517">&#34;foo.txt&#34;</span><span class="op" id="7003526">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003532">Content</span><span class="op" id="7003539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7003544">[</span><span class="op" id="7003545">]</span><span class="builtintype" id="7003546">byte</span><span class="op" id="7003550">(</span><span class="string" id="7003551">&#34;foo\n&#34;</span><span class="op" id="7003558">)</span><span class="op" id="7003559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003565">Mtime</span><span class="op" id="7003570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003577">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7003596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003602">Mode</span><span class="op" id="7003606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7003614">0644</span><span class="op" id="7003618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003624">ContentErr</span><span class="op" id="7003634">:</span>&nbsp;<span class="ident" id="7003636">ErrChecksum</span><span class="op" id="7003647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003652">}</span><span class="op" id="7003653">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003664">Name</span><span class="op" id="7003668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003673">&#34;bar.txt&#34;</span><span class="op" id="7003682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003688">Content</span><span class="op" id="7003695">:</span>&nbsp;<span class="op" id="7003697">[</span><span class="op" id="7003698">]</span><span class="builtintype" id="7003699">byte</span><span class="op" id="7003703">(</span><span class="string" id="7003704">&#34;bar\n&#34;</span><span class="op" id="7003711">)</span><span class="op" id="7003712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003718">Mtime</span><span class="op" id="7003723">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7003727">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7003746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003752">Mode</span><span class="op" id="7003756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7003761">0644</span><span class="op" id="7003765">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003770">}</span><span class="op" id="7003771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003775">}</span><span class="op" id="7003776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003779">}</span><span class="op" id="7003780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003787">Name</span><span class="op" id="7003791">:</span>&nbsp;<span class="string" id="7003793">&#34;zip64.zip&#34;</span><span class="op" id="7003804">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003808">File</span><span class="op" id="7003812">:</span>&nbsp;<span class="op" id="7003814">[</span><span class="op" id="7003815">]</span><span class="ident" id="7003816">ZipTestFile</span><span class="op" id="7003827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003838">Name</span><span class="op" id="7003842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7003847">&#34;README&#34;</span><span class="op" id="7003855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003861">Content</span><span class="op" id="7003868">:</span>&nbsp;<span class="op" id="7003870">[</span><span class="op" id="7003871">]</span><span class="builtintype" id="7003872">byte</span><span class="op" id="7003876">(</span><span class="string" id="7003877">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7003916">)</span><span class="op" id="7003917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003923">Mtime</span><span class="op" id="7003928">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7003932">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7003951">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7003957">Mode</span><span class="op" id="7003961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7003966">0644</span><span class="op" id="7003970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003975">}</span><span class="op" id="7003976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003980">}</span><span class="op" id="7003981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7003984">}</span><span class="op" id="7003985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7003988">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004069">Name</span><span class="op" id="7004073">:</span>&nbsp;<span class="string" id="7004075">&#34;zip64-2.zip&#34;</span><span class="op" id="7004088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004092">File</span><span class="op" id="7004096">:</span>&nbsp;<span class="op" id="7004098">[</span><span class="op" id="7004099">]</span><span class="ident" id="7004100">ZipTestFile</span><span class="op" id="7004111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004122">Name</span><span class="op" id="7004126">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7004131">&#34;README&#34;</span><span class="op" id="7004139">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004145">Content</span><span class="op" id="7004152">:</span>&nbsp;<span class="op" id="7004154">[</span><span class="op" id="7004155">]</span><span class="builtintype" id="7004156">byte</span><span class="op" id="7004160">(</span><span class="string" id="7004161">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7004200">)</span><span class="op" id="7004201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004207">Mtime</span><span class="op" id="7004212">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7004216">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7004235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004241">Mode</span><span class="op" id="7004245">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7004250">0644</span><span class="op" id="7004254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004259">}</span><span class="op" id="7004260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004264">}</span><span class="op" id="7004265">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004268">}</span><span class="op" id="7004269">,</span><br>
<span class="lineno"></span><span class="op" id="7004271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7004274">var</span>&nbsp;<span class="ident" id="7004278">crossPlatform</span>&nbsp;<span class="op" id="7004292">=</span>&nbsp;<span class="op" id="7004294">[</span><span class="op" id="7004295">]</span><span class="ident" id="7004296">ZipTestFile</span><span class="op" id="7004307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004310">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004314">Name</span><span class="op" id="7004318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7004323">&#34;hello&#34;</span><span class="op" id="7004330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004334">Content</span><span class="op" id="7004341">:</span>&nbsp;<span class="op" id="7004343">[</span><span class="op" id="7004344">]</span><span class="builtintype" id="7004345">byte</span><span class="op" id="7004349">(</span><span class="string" id="7004350">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7004362">)</span><span class="op" id="7004363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004367">Mode</span><span class="op" id="7004371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7004376">0666</span><span class="op" id="7004380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004383">}</span><span class="op" id="7004384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004387">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004391">Name</span><span class="op" id="7004395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7004400">&#34;dir/bar&#34;</span><span class="op" id="7004409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004413">Content</span><span class="op" id="7004420">:</span>&nbsp;<span class="op" id="7004422">[</span><span class="op" id="7004423">]</span><span class="builtintype" id="7004424">byte</span><span class="op" id="7004428">(</span><span class="string" id="7004429">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7004439">)</span><span class="op" id="7004440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004444">Mode</span><span class="op" id="7004448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7004453">0666</span><span class="op" id="7004457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004460">}</span><span class="op" id="7004461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004464">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004468">Name</span><span class="op" id="7004472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7004477">&#34;dir/empty/&#34;</span><span class="op" id="7004489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004493">Content</span><span class="op" id="7004500">:</span>&nbsp;<span class="op" id="7004502">[</span><span class="op" id="7004503">]</span><span class="builtintype" id="7004504">byte</span><span class="op" id="7004508">{</span><span class="op" id="7004509">}</span><span class="op" id="7004510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004514">Mode</span><span class="op" id="7004518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7004523">os</span><span class="op" id="7004525">.</span><span class="ident" id="7004526">ModeDir</span>&nbsp;<span class="op" id="7004534">|</span>&nbsp;<span class="num" id="7004536">0777</span><span class="op" id="7004540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004543">}</span><span class="op" id="7004544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004547">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004551">Name</span><span class="op" id="7004555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7004560">&#34;readonly&#34;</span><span class="op" id="7004570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004574">Content</span><span class="op" id="7004581">:</span>&nbsp;<span class="op" id="7004583">[</span><span class="op" id="7004584">]</span><span class="builtintype" id="7004585">byte</span><span class="op" id="7004589">(</span><span class="string" id="7004590">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7004606">)</span><span class="op" id="7004607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004611">Mode</span><span class="op" id="7004615">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7004620">0444</span><span class="op" id="7004624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004627">}</span><span class="op" id="7004628">,</span><br>
<span class="lineno"></span><span class="op" id="7004630">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7004633">func</span>&nbsp;<span class="ident" id="7004638">TestReader</span><span class="op" id="7004648">(</span><span class="ident" id="7004649">t</span>&nbsp;<span class="op" id="7004651">*</span><span class="ident" id="7004652">testing</span><span class="op" id="7004659">.</span><span class="ident" id="7004660">T</span><span class="op" id="7004661">)</span>&nbsp;<span class="op" id="7004663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004666">for</span>&nbsp;<span class="ident" id="7004670">_</span><span class="op" id="7004671">,</span>&nbsp;<span class="ident" id="7004673">zt</span>&nbsp;<span class="op" id="7004676">:=</span>&nbsp;<span class="keyword" id="7004679">range</span>&nbsp;<span class="ident" id="7004685">tests</span>&nbsp;<span class="op" id="7004691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004695">readTestZip</span><span class="op" id="7004706">(</span><span class="ident" id="7004707">t</span><span class="op" id="7004708">,</span>&nbsp;<span class="ident" id="7004710">zt</span><span class="op" id="7004712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004715">}</span><br>
<span class="lineno">280</span><span class="op" id="7004717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7004720">func</span>&nbsp;<span class="ident" id="7004725">readTestZip</span><span class="op" id="7004736">(</span><span class="ident" id="7004737">t</span>&nbsp;<span class="op" id="7004739">*</span><span class="ident" id="7004740">testing</span><span class="op" id="7004747">.</span><span class="ident" id="7004748">T</span><span class="op" id="7004749">,</span>&nbsp;<span class="ident" id="7004751">zt</span>&nbsp;<span class="ident" id="7004754">ZipTest</span><span class="op" id="7004761">)</span>&nbsp;<span class="op" id="7004763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004766">var</span>&nbsp;<span class="ident" id="7004770">z</span>&nbsp;<span class="op" id="7004772">*</span><span class="ident" id="7004773">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004781">var</span>&nbsp;<span class="ident" id="7004785">err</span>&nbsp;<span class="builtintype" id="7004789">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004796">if</span>&nbsp;<span class="ident" id="7004799">zt</span><span class="op" id="7004801">.</span><span class="ident" id="7004802">Source</span>&nbsp;<span class="op" id="7004809">!=</span>&nbsp;<span class="ident" id="7004812">nil</span>&nbsp;<span class="op" id="7004816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004820">rat</span><span class="op" id="7004823">,</span>&nbsp;<span class="ident" id="7004825">size</span>&nbsp;<span class="op" id="7004830">:=</span>&nbsp;<span class="ident" id="7004833">zt</span><span class="op" id="7004835">.</span><span class="ident" id="7004836">Source</span><span class="op" id="7004842">(</span><span class="op" id="7004843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004847">z</span><span class="op" id="7004848">,</span>&nbsp;<span class="ident" id="7004850">err</span>&nbsp;<span class="op" id="7004854">=</span>&nbsp;<span class="ident" id="7004856">NewReader</span><span class="op" id="7004865">(</span><span class="ident" id="7004866">rat</span><span class="op" id="7004869">,</span>&nbsp;<span class="ident" id="7004871">size</span><span class="op" id="7004875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7004878">}</span>&nbsp;<span class="keyword" id="7004880">else</span>&nbsp;<span class="op" id="7004885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004889">var</span>&nbsp;<span class="ident" id="7004893">rc</span>&nbsp;<span class="op" id="7004896">*</span><span class="ident" id="7004897">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7004910">rc</span><span class="op" id="7004912">,</span>&nbsp;<span class="ident" id="7004914">err</span>&nbsp;<span class="op" id="7004918">=</span>&nbsp;<span class="ident" id="7004920">OpenReader</span><span class="op" id="7004930">(</span><span class="ident" id="7004931">filepath</span><span class="op" id="7004939">.</span><span class="ident" id="7004940">Join</span><span class="op" id="7004944">(</span><span class="string" id="7004945">&#34;testdata&#34;</span><span class="op" id="7004955">,</span>&nbsp;<span class="ident" id="7004957">zt</span><span class="op" id="7004959">.</span><span class="ident" id="7004960">Name</span><span class="op" id="7004964">)</span><span class="op" id="7004965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004969">if</span>&nbsp;<span class="ident" id="7004972">err</span>&nbsp;<span class="op" id="7004976">==</span>&nbsp;<span class="ident" id="7004979">nil</span>&nbsp;<span class="op" id="7004983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7004988">defer</span>&nbsp;<span class="ident" id="7004994">rc</span><span class="op" id="7004996">.</span><span class="ident" id="7004997">Close</span><span class="op" id="7005002">(</span><span class="op" id="7005003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005008">z</span>&nbsp;<span class="op" id="7005010">=</span>&nbsp;<span class="op" id="7005012">&amp;</span><span class="ident" id="7005013">rc</span><span class="op" id="7005015">.</span><span class="ident" id="7005016">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005025">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005031">if</span>&nbsp;<span class="ident" id="7005034">err</span>&nbsp;<span class="op" id="7005038">!=</span>&nbsp;<span class="ident" id="7005041">zt</span><span class="op" id="7005043">.</span><span class="ident" id="7005044">Error</span>&nbsp;<span class="op" id="7005050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005054">t</span><span class="op" id="7005055">.</span><span class="ident" id="7005056">Errorf</span><span class="op" id="7005062">(</span><span class="string" id="7005063">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7005086">,</span>&nbsp;<span class="ident" id="7005088">zt</span><span class="op" id="7005090">.</span><span class="ident" id="7005091">Name</span><span class="op" id="7005095">,</span>&nbsp;<span class="ident" id="7005097">err</span><span class="op" id="7005100">,</span>&nbsp;<span class="ident" id="7005102">zt</span><span class="op" id="7005104">.</span><span class="ident" id="7005105">Error</span><span class="op" id="7005110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005114">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005122">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7005126">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005154">if</span>&nbsp;<span class="ident" id="7005157">err</span>&nbsp;<span class="op" id="7005161">==</span>&nbsp;<span class="ident" id="7005164">ErrFormat</span>&nbsp;<span class="op" id="7005174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005178">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005186">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7005190">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7005238">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005302">if</span>&nbsp;<span class="ident" id="7005305">zt</span><span class="op" id="7005307">.</span><span class="ident" id="7005308">File</span>&nbsp;<span class="op" id="7005313">==</span>&nbsp;<span class="ident" id="7005316">nil</span>&nbsp;<span class="op" id="7005320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005324">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005336">if</span>&nbsp;<span class="ident" id="7005339">z</span><span class="op" id="7005340">.</span><span class="ident" id="7005341">Comment</span>&nbsp;<span class="op" id="7005349">!=</span>&nbsp;<span class="ident" id="7005352">zt</span><span class="op" id="7005354">.</span><span class="ident" id="7005355">Comment</span>&nbsp;<span class="op" id="7005363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005367">t</span><span class="op" id="7005368">.</span><span class="ident" id="7005369">Errorf</span><span class="op" id="7005375">(</span><span class="string" id="7005376">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7005401">,</span>&nbsp;<span class="ident" id="7005403">zt</span><span class="op" id="7005405">.</span><span class="ident" id="7005406">Name</span><span class="op" id="7005410">,</span>&nbsp;<span class="ident" id="7005412">z</span><span class="op" id="7005413">.</span><span class="ident" id="7005414">Comment</span><span class="op" id="7005421">,</span>&nbsp;<span class="ident" id="7005423">zt</span><span class="op" id="7005425">.</span><span class="ident" id="7005426">Comment</span><span class="op" id="7005433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005436">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005439">if</span>&nbsp;<span class="builtinfunc" id="7005442">len</span><span class="op" id="7005445">(</span><span class="ident" id="7005446">z</span><span class="op" id="7005447">.</span><span class="ident" id="7005448">File</span><span class="op" id="7005452">)</span>&nbsp;<span class="op" id="7005454">!=</span>&nbsp;<span class="builtinfunc" id="7005457">len</span><span class="op" id="7005460">(</span><span class="ident" id="7005461">zt</span><span class="op" id="7005463">.</span><span class="ident" id="7005464">File</span><span class="op" id="7005468">)</span>&nbsp;<span class="op" id="7005470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005474">t</span><span class="op" id="7005475">.</span><span class="ident" id="7005476">Fatalf</span><span class="op" id="7005482">(</span><span class="string" id="7005483">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7005511">,</span>&nbsp;<span class="ident" id="7005513">zt</span><span class="op" id="7005515">.</span><span class="ident" id="7005516">Name</span><span class="op" id="7005520">,</span>&nbsp;<span class="builtinfunc" id="7005522">len</span><span class="op" id="7005525">(</span><span class="ident" id="7005526">z</span><span class="op" id="7005527">.</span><span class="ident" id="7005528">File</span><span class="op" id="7005532">)</span><span class="op" id="7005533">,</span>&nbsp;<span class="builtinfunc" id="7005535">len</span><span class="op" id="7005538">(</span><span class="ident" id="7005539">zt</span><span class="op" id="7005541">.</span><span class="ident" id="7005542">File</span><span class="op" id="7005546">)</span><span class="op" id="7005547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7005554">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005581">for</span>&nbsp;<span class="ident" id="7005585">i</span><span class="op" id="7005586">,</span>&nbsp;<span class="ident" id="7005588">ft</span>&nbsp;<span class="op" id="7005591">:=</span>&nbsp;<span class="keyword" id="7005594">range</span>&nbsp;<span class="ident" id="7005600">zt</span><span class="op" id="7005602">.</span><span class="ident" id="7005603">File</span>&nbsp;<span class="op" id="7005608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005612">readTestFile</span><span class="op" id="7005624">(</span><span class="ident" id="7005625">t</span><span class="op" id="7005626">,</span>&nbsp;<span class="ident" id="7005628">zt</span><span class="op" id="7005630">,</span>&nbsp;<span class="ident" id="7005632">ft</span><span class="op" id="7005634">,</span>&nbsp;<span class="ident" id="7005636">z</span><span class="op" id="7005637">.</span><span class="ident" id="7005638">File</span><span class="op" id="7005642">[</span><span class="ident" id="7005643">i</span><span class="op" id="7005644">]</span><span class="op" id="7005645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7005652">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005680">n</span>&nbsp;<span class="op" id="7005682">:=</span>&nbsp;<span class="num" id="7005685">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005688">done</span>&nbsp;<span class="op" id="7005693">:=</span>&nbsp;<span class="builtinfunc" id="7005696">make</span><span class="op" id="7005700">(</span><span class="keyword" id="7005701">chan</span>&nbsp;<span class="builtintype" id="7005706">bool</span><span class="op" id="7005710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005713">for</span>&nbsp;<span class="ident" id="7005717">i</span>&nbsp;<span class="op" id="7005719">:=</span>&nbsp;<span class="num" id="7005722">0</span><span class="op" id="7005723">;</span>&nbsp;<span class="ident" id="7005725">i</span>&nbsp;<span class="op" id="7005727">&lt;</span>&nbsp;<span class="num" id="7005729">5</span><span class="op" id="7005730">;</span>&nbsp;<span class="ident" id="7005732">i</span><span class="op" id="7005733">++</span>&nbsp;<span class="op" id="7005736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005740">for</span>&nbsp;<span class="ident" id="7005744">j</span><span class="op" id="7005745">,</span>&nbsp;<span class="ident" id="7005747">ft</span>&nbsp;<span class="op" id="7005750">:=</span>&nbsp;<span class="keyword" id="7005753">range</span>&nbsp;<span class="ident" id="7005759">zt</span><span class="op" id="7005761">.</span><span class="ident" id="7005762">File</span>&nbsp;<span class="op" id="7005767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005772">go</span>&nbsp;<span class="keyword" id="7005775">func</span><span class="op" id="7005779">(</span><span class="ident" id="7005780">j</span>&nbsp;<span class="builtintype" id="7005782">int</span><span class="op" id="7005785">,</span>&nbsp;<span class="ident" id="7005787">ft</span>&nbsp;<span class="ident" id="7005790">ZipTestFile</span><span class="op" id="7005801">)</span>&nbsp;<span class="op" id="7005803">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005809">readTestFile</span><span class="op" id="7005821">(</span><span class="ident" id="7005822">t</span><span class="op" id="7005823">,</span>&nbsp;<span class="ident" id="7005825">zt</span><span class="op" id="7005827">,</span>&nbsp;<span class="ident" id="7005829">ft</span><span class="op" id="7005831">,</span>&nbsp;<span class="ident" id="7005833">z</span><span class="op" id="7005834">.</span><span class="ident" id="7005835">File</span><span class="op" id="7005839">[</span><span class="ident" id="7005840">j</span><span class="op" id="7005841">]</span><span class="op" id="7005842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005848">done</span>&nbsp;<span class="op" id="7005853">&lt;-</span>&nbsp;<span class="builtintype" id="7005856">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005864">}</span><span class="op" id="7005865">(</span><span class="ident" id="7005866">j</span><span class="op" id="7005867">,</span>&nbsp;<span class="ident" id="7005869">ft</span><span class="op" id="7005871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005876">n</span><span class="op" id="7005877">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005882">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005888">for</span>&nbsp;<span class="op" id="7005892">;</span>&nbsp;<span class="ident" id="7005894">n</span>&nbsp;<span class="op" id="7005896">&gt;</span>&nbsp;<span class="num" id="7005898">0</span><span class="op" id="7005899">;</span>&nbsp;<span class="ident" id="7005901">n</span><span class="op" id="7005902">--</span>&nbsp;<span class="op" id="7005905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005909">&lt;-</span><span class="ident" id="7005911">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7005917">}</span><br>
<span class="lineno"></span><span class="op" id="7005919">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7005922">func</span>&nbsp;<span class="ident" id="7005927">readTestFile</span><span class="op" id="7005939">(</span><span class="ident" id="7005940">t</span>&nbsp;<span class="op" id="7005942">*</span><span class="ident" id="7005943">testing</span><span class="op" id="7005950">.</span><span class="ident" id="7005951">T</span><span class="op" id="7005952">,</span>&nbsp;<span class="ident" id="7005954">zt</span>&nbsp;<span class="ident" id="7005957">ZipTest</span><span class="op" id="7005964">,</span>&nbsp;<span class="ident" id="7005966">ft</span>&nbsp;<span class="ident" id="7005969">ZipTestFile</span><span class="op" id="7005980">,</span>&nbsp;<span class="ident" id="7005982">f</span>&nbsp;<span class="op" id="7005984">*</span><span class="ident" id="7005985">File</span><span class="op" id="7005989">)</span>&nbsp;<span class="op" id="7005991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7005994">if</span>&nbsp;<span class="ident" id="7005997">f</span><span class="op" id="7005998">.</span><span class="ident" id="7005999">Name</span>&nbsp;<span class="op" id="7006004">!=</span>&nbsp;<span class="ident" id="7006007">ft</span><span class="op" id="7006009">.</span><span class="ident" id="7006010">Name</span>&nbsp;<span class="op" id="7006015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006019">t</span><span class="op" id="7006020">.</span><span class="ident" id="7006021">Errorf</span><span class="op" id="7006027">(</span><span class="string" id="7006028">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7006050">,</span>&nbsp;<span class="ident" id="7006052">zt</span><span class="op" id="7006054">.</span><span class="ident" id="7006055">Name</span><span class="op" id="7006059">,</span>&nbsp;<span class="ident" id="7006061">f</span><span class="op" id="7006062">.</span><span class="ident" id="7006063">Name</span><span class="op" id="7006067">,</span>&nbsp;<span class="ident" id="7006069">ft</span><span class="op" id="7006071">.</span><span class="ident" id="7006072">Name</span><span class="op" id="7006076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006079">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006083">if</span>&nbsp;<span class="ident" id="7006086">ft</span><span class="op" id="7006088">.</span><span class="ident" id="7006089">Mtime</span>&nbsp;<span class="op" id="7006095">!=</span>&nbsp;<span class="string" id="7006098">&#34;&#34;</span>&nbsp;<span class="op" id="7006101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006105">mtime</span><span class="op" id="7006110">,</span>&nbsp;<span class="ident" id="7006112">err</span>&nbsp;<span class="op" id="7006116">:=</span>&nbsp;<span class="ident" id="7006119">time</span><span class="op" id="7006123">.</span><span class="ident" id="7006124">Parse</span><span class="op" id="7006129">(</span><span class="string" id="7006130">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7006149">,</span>&nbsp;<span class="ident" id="7006151">ft</span><span class="op" id="7006153">.</span><span class="ident" id="7006154">Mtime</span><span class="op" id="7006159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006163">if</span>&nbsp;<span class="ident" id="7006166">err</span>&nbsp;<span class="op" id="7006170">!=</span>&nbsp;<span class="ident" id="7006173">nil</span>&nbsp;<span class="op" id="7006177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006182">t</span><span class="op" id="7006183">.</span><span class="ident" id="7006184">Error</span><span class="op" id="7006189">(</span><span class="ident" id="7006190">err</span><span class="op" id="7006193">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006198">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006211">if</span>&nbsp;<span class="ident" id="7006214">ft</span>&nbsp;<span class="op" id="7006217">:=</span>&nbsp;<span class="ident" id="7006220">f</span><span class="op" id="7006221">.</span><span class="ident" id="7006222">ModTime</span><span class="op" id="7006229">(</span><span class="op" id="7006230">)</span><span class="op" id="7006231">;</span>&nbsp;<span class="op" id="7006233">!</span><span class="ident" id="7006234">ft</span><span class="op" id="7006236">.</span><span class="ident" id="7006237">Equal</span><span class="op" id="7006242">(</span><span class="ident" id="7006243">mtime</span><span class="op" id="7006248">)</span>&nbsp;<span class="op" id="7006250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006255">t</span><span class="op" id="7006256">.</span><span class="ident" id="7006257">Errorf</span><span class="op" id="7006263">(</span><span class="string" id="7006264">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7006291">,</span>&nbsp;<span class="ident" id="7006293">zt</span><span class="op" id="7006295">.</span><span class="ident" id="7006296">Name</span><span class="op" id="7006300">,</span>&nbsp;<span class="ident" id="7006302">f</span><span class="op" id="7006303">.</span><span class="ident" id="7006304">Name</span><span class="op" id="7006308">,</span>&nbsp;<span class="ident" id="7006310">ft</span><span class="op" id="7006312">,</span>&nbsp;<span class="ident" id="7006314">mtime</span><span class="op" id="7006319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006323">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006330">testFileMode</span><span class="op" id="7006342">(</span><span class="ident" id="7006343">t</span><span class="op" id="7006344">,</span>&nbsp;<span class="ident" id="7006346">zt</span><span class="op" id="7006348">.</span><span class="ident" id="7006349">Name</span><span class="op" id="7006353">,</span>&nbsp;<span class="ident" id="7006355">f</span><span class="op" id="7006356">,</span>&nbsp;<span class="ident" id="7006358">ft</span><span class="op" id="7006360">.</span><span class="ident" id="7006361">Mode</span><span class="op" id="7006365">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006369">var</span>&nbsp;<span class="ident" id="7006373">b</span>&nbsp;<span class="ident" id="7006375">bytes</span><span class="op" id="7006380">.</span><span class="ident" id="7006381">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006389">r</span><span class="op" id="7006390">,</span>&nbsp;<span class="ident" id="7006392">err</span>&nbsp;<span class="op" id="7006396">:=</span>&nbsp;<span class="ident" id="7006399">f</span><span class="op" id="7006400">.</span><span class="ident" id="7006401">Open</span><span class="op" id="7006405">(</span><span class="op" id="7006406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006409">if</span>&nbsp;<span class="ident" id="7006412">err</span>&nbsp;<span class="op" id="7006416">!=</span>&nbsp;<span class="ident" id="7006419">nil</span>&nbsp;<span class="op" id="7006423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006427">t</span><span class="op" id="7006428">.</span><span class="ident" id="7006429">Errorf</span><span class="op" id="7006435">(</span><span class="string" id="7006436">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7006444">,</span>&nbsp;<span class="ident" id="7006446">zt</span><span class="op" id="7006448">.</span><span class="ident" id="7006449">Name</span><span class="op" id="7006453">,</span>&nbsp;<span class="ident" id="7006455">err</span><span class="op" id="7006458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006462">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006470">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006474">_</span><span class="op" id="7006475">,</span>&nbsp;<span class="ident" id="7006477">err</span>&nbsp;<span class="op" id="7006481">=</span>&nbsp;<span class="ident" id="7006483">io</span><span class="op" id="7006485">.</span><span class="ident" id="7006486">Copy</span><span class="op" id="7006490">(</span><span class="op" id="7006491">&amp;</span><span class="ident" id="7006492">b</span><span class="op" id="7006493">,</span>&nbsp;<span class="ident" id="7006495">r</span><span class="op" id="7006496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006499">if</span>&nbsp;<span class="ident" id="7006502">err</span>&nbsp;<span class="op" id="7006506">!=</span>&nbsp;<span class="ident" id="7006509">ft</span><span class="op" id="7006511">.</span><span class="ident" id="7006512">ContentErr</span>&nbsp;<span class="op" id="7006523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006527">t</span><span class="op" id="7006528">.</span><span class="ident" id="7006529">Errorf</span><span class="op" id="7006535">(</span><span class="string" id="7006536">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7006572">,</span>&nbsp;<span class="ident" id="7006574">zt</span><span class="op" id="7006576">.</span><span class="ident" id="7006577">Name</span><span class="op" id="7006581">,</span>&nbsp;<span class="ident" id="7006583">err</span><span class="op" id="7006586">,</span>&nbsp;<span class="ident" id="7006588">ft</span><span class="op" id="7006590">.</span><span class="ident" id="7006591">ContentErr</span><span class="op" id="7006601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006604">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006607">if</span>&nbsp;<span class="ident" id="7006610">err</span>&nbsp;<span class="op" id="7006614">!=</span>&nbsp;<span class="ident" id="7006617">nil</span>&nbsp;<span class="op" id="7006621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006625">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006636">r</span><span class="op" id="7006637">.</span><span class="ident" id="7006638">Close</span><span class="op" id="7006643">(</span><span class="op" id="7006644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006648">size</span>&nbsp;<span class="op" id="7006653">:=</span>&nbsp;<span class="ident" id="7006656">uint64</span><span class="op" id="7006662">(</span><span class="ident" id="7006663">f</span><span class="op" id="7006664">.</span><span class="ident" id="7006665">UncompressedSize</span><span class="op" id="7006681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006684">if</span>&nbsp;<span class="ident" id="7006687">size</span>&nbsp;<span class="op" id="7006692">==</span>&nbsp;<span class="ident" id="7006695">uint32max</span>&nbsp;<span class="op" id="7006705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006709">size</span>&nbsp;<span class="op" id="7006714">=</span>&nbsp;<span class="ident" id="7006716">f</span><span class="op" id="7006717">.</span><span class="ident" id="7006718">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006741">if</span>&nbsp;<span class="ident" id="7006744">g</span>&nbsp;<span class="op" id="7006746">:=</span>&nbsp;<span class="ident" id="7006749">uint64</span><span class="op" id="7006755">(</span><span class="ident" id="7006756">b</span><span class="op" id="7006757">.</span><span class="ident" id="7006758">Len</span><span class="op" id="7006761">(</span><span class="op" id="7006762">)</span><span class="op" id="7006763">)</span><span class="op" id="7006764">;</span>&nbsp;<span class="ident" id="7006766">g</span>&nbsp;<span class="op" id="7006768">!=</span>&nbsp;<span class="ident" id="7006771">size</span>&nbsp;<span class="op" id="7006776">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006780">t</span><span class="op" id="7006781">.</span><span class="ident" id="7006782">Errorf</span><span class="op" id="7006788">(</span><span class="string" id="7006789">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7006837">,</span>&nbsp;<span class="ident" id="7006839">f</span><span class="op" id="7006840">.</span><span class="ident" id="7006841">Name</span><span class="op" id="7006845">,</span>&nbsp;<span class="ident" id="7006847">g</span><span class="op" id="7006848">,</span>&nbsp;<span class="ident" id="7006850">size</span><span class="op" id="7006854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006861">var</span>&nbsp;<span class="ident" id="7006865">c</span>&nbsp;<span class="op" id="7006867">[</span><span class="op" id="7006868">]</span><span class="builtintype" id="7006869">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7006875">if</span>&nbsp;<span class="ident" id="7006878">ft</span><span class="op" id="7006880">.</span><span class="ident" id="7006881">Content</span>&nbsp;<span class="op" id="7006889">!=</span>&nbsp;<span class="ident" id="7006892">nil</span>&nbsp;<span class="op" id="7006896">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006900">c</span>&nbsp;<span class="op" id="7006902">=</span>&nbsp;<span class="ident" id="7006904">ft</span><span class="op" id="7006906">.</span><span class="ident" id="7006907">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7006916">}</span>&nbsp;<span class="keyword" id="7006918">else</span>&nbsp;<span class="keyword" id="7006923">if</span>&nbsp;<span class="ident" id="7006926">c</span><span class="op" id="7006927">,</span>&nbsp;<span class="ident" id="7006929">err</span>&nbsp;<span class="op" id="7006933">=</span>&nbsp;<span class="ident" id="7006935">ioutil</span><span class="op" id="7006941">.</span><span class="ident" id="7006942">ReadFile</span><span class="op" id="7006950">(</span><span class="string" id="7006951">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7006963">+</span>&nbsp;<span class="ident" id="7006965">ft</span><span class="op" id="7006967">.</span><span class="ident" id="7006968">File</span><span class="op" id="7006972">)</span><span class="op" id="7006973">;</span>&nbsp;<span class="ident" id="7006975">err</span>&nbsp;<span class="op" id="7006979">!=</span>&nbsp;<span class="ident" id="7006982">nil</span>&nbsp;<span class="op" id="7006986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7006990">t</span><span class="op" id="7006991">.</span><span class="ident" id="7006992">Error</span><span class="op" id="7006997">(</span><span class="ident" id="7006998">err</span><span class="op" id="7007001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007005">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007013">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007017">if</span>&nbsp;<span class="ident" id="7007020">b</span><span class="op" id="7007021">.</span><span class="ident" id="7007022">Len</span><span class="op" id="7007025">(</span><span class="op" id="7007026">)</span>&nbsp;<span class="op" id="7007028">!=</span>&nbsp;<span class="builtinfunc" id="7007031">len</span><span class="op" id="7007034">(</span><span class="ident" id="7007035">c</span><span class="op" id="7007036">)</span>&nbsp;<span class="op" id="7007038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007042">t</span><span class="op" id="7007043">.</span><span class="ident" id="7007044">Errorf</span><span class="op" id="7007050">(</span><span class="string" id="7007051">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7007072">,</span>&nbsp;<span class="ident" id="7007074">f</span><span class="op" id="7007075">.</span><span class="ident" id="7007076">Name</span><span class="op" id="7007080">,</span>&nbsp;<span class="ident" id="7007082">b</span><span class="op" id="7007083">.</span><span class="ident" id="7007084">Len</span><span class="op" id="7007087">(</span><span class="op" id="7007088">)</span><span class="op" id="7007089">,</span>&nbsp;<span class="builtinfunc" id="7007091">len</span><span class="op" id="7007094">(</span><span class="ident" id="7007095">c</span><span class="op" id="7007096">)</span><span class="op" id="7007097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007101">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007109">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007113">for</span>&nbsp;<span class="ident" id="7007117">i</span><span class="op" id="7007118">,</span>&nbsp;<span class="ident" id="7007120">b</span>&nbsp;<span class="op" id="7007122">:=</span>&nbsp;<span class="keyword" id="7007125">range</span>&nbsp;<span class="ident" id="7007131">b</span><span class="op" id="7007132">.</span><span class="ident" id="7007133">Bytes</span><span class="op" id="7007138">(</span><span class="op" id="7007139">)</span>&nbsp;<span class="op" id="7007141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007145">if</span>&nbsp;<span class="ident" id="7007148">b</span>&nbsp;<span class="op" id="7007150">!=</span>&nbsp;<span class="ident" id="7007153">c</span><span class="op" id="7007154">[</span><span class="ident" id="7007155">i</span><span class="op" id="7007156">]</span>&nbsp;<span class="op" id="7007158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007163">t</span><span class="op" id="7007164">.</span><span class="ident" id="7007165">Errorf</span><span class="op" id="7007171">(</span><span class="string" id="7007172">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7007200">,</span>&nbsp;<span class="ident" id="7007202">f</span><span class="op" id="7007203">.</span><span class="ident" id="7007204">Name</span><span class="op" id="7007208">,</span>&nbsp;<span class="ident" id="7007210">i</span><span class="op" id="7007211">,</span>&nbsp;<span class="ident" id="7007213">b</span><span class="op" id="7007214">,</span>&nbsp;<span class="ident" id="7007216">c</span><span class="op" id="7007217">[</span><span class="ident" id="7007218">i</span><span class="op" id="7007219">]</span><span class="op" id="7007220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007225">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007237">}</span><br>
<span class="lineno"></span><span class="op" id="7007239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007242">func</span>&nbsp;<span class="ident" id="7007247">testFileMode</span><span class="op" id="7007259">(</span><span class="ident" id="7007260">t</span>&nbsp;<span class="op" id="7007262">*</span><span class="ident" id="7007263">testing</span><span class="op" id="7007270">.</span><span class="ident" id="7007271">T</span><span class="op" id="7007272">,</span>&nbsp;<span class="ident" id="7007274">zipName</span>&nbsp;<span class="builtintype" id="7007282">string</span><span class="op" id="7007288">,</span>&nbsp;<span class="ident" id="7007290">f</span>&nbsp;<span class="op" id="7007292">*</span><span class="ident" id="7007293">File</span><span class="op" id="7007297">,</span>&nbsp;<span class="ident" id="7007299">want</span>&nbsp;<span class="ident" id="7007304">os</span><span class="op" id="7007306">.</span><span class="ident" id="7007307">FileMode</span><span class="op" id="7007315">)</span>&nbsp;<span class="op" id="7007317">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007320">mode</span>&nbsp;<span class="op" id="7007325">:=</span>&nbsp;<span class="ident" id="7007328">f</span><span class="op" id="7007329">.</span><span class="ident" id="7007330">Mode</span><span class="op" id="7007334">(</span><span class="op" id="7007335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007338">if</span>&nbsp;<span class="ident" id="7007341">want</span>&nbsp;<span class="op" id="7007346">==</span>&nbsp;<span class="num" id="7007349">0</span>&nbsp;<span class="op" id="7007351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007355">t</span><span class="op" id="7007356">.</span><span class="ident" id="7007357">Errorf</span><span class="op" id="7007363">(</span><span class="string" id="7007364">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7007396">,</span>&nbsp;<span class="ident" id="7007398">zipName</span><span class="op" id="7007405">,</span>&nbsp;<span class="ident" id="7007407">f</span><span class="op" id="7007408">.</span><span class="ident" id="7007409">Name</span><span class="op" id="7007413">,</span>&nbsp;<span class="ident" id="7007415">mode</span><span class="op" id="7007419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007422">}</span>&nbsp;<span class="keyword" id="7007424">else</span>&nbsp;<span class="keyword" id="7007429">if</span>&nbsp;<span class="ident" id="7007432">mode</span>&nbsp;<span class="op" id="7007437">!=</span>&nbsp;<span class="ident" id="7007440">want</span>&nbsp;<span class="op" id="7007445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007449">t</span><span class="op" id="7007450">.</span><span class="ident" id="7007451">Errorf</span><span class="op" id="7007457">(</span><span class="string" id="7007458">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7007488">,</span>&nbsp;<span class="ident" id="7007490">zipName</span><span class="op" id="7007497">,</span>&nbsp;<span class="ident" id="7007499">f</span><span class="op" id="7007500">.</span><span class="ident" id="7007501">Name</span><span class="op" id="7007505">,</span>&nbsp;<span class="ident" id="7007507">want</span><span class="op" id="7007511">,</span>&nbsp;<span class="ident" id="7007513">mode</span><span class="op" id="7007517">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007520">}</span><br>
<span class="lineno"></span><span class="op" id="7007522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7007525">func</span>&nbsp;<span class="ident" id="7007530">TestInvalidFiles</span><span class="op" id="7007546">(</span><span class="ident" id="7007547">t</span>&nbsp;<span class="op" id="7007549">*</span><span class="ident" id="7007550">testing</span><span class="op" id="7007557">.</span><span class="ident" id="7007558">T</span><span class="op" id="7007559">)</span>&nbsp;<span class="op" id="7007561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007564">const</span>&nbsp;<span class="ident" id="7007570">size</span>&nbsp;<span class="op" id="7007575">=</span>&nbsp;<span class="num" id="7007577">1024</span>&nbsp;<span class="op" id="7007582">*</span>&nbsp;<span class="num" id="7007584">70</span>&nbsp;<span class="comment" id="7007587">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007596">b</span>&nbsp;<span class="op" id="7007598">:=</span>&nbsp;<span class="builtinfunc" id="7007601">make</span><span class="op" id="7007605">(</span><span class="op" id="7007606">[</span><span class="op" id="7007607">]</span><span class="builtintype" id="7007608">byte</span><span class="op" id="7007612">,</span>&nbsp;<span class="ident" id="7007614">size</span><span class="op" id="7007618">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7007622">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007633">_</span><span class="op" id="7007634">,</span>&nbsp;<span class="ident" id="7007636">err</span>&nbsp;<span class="op" id="7007640">:=</span>&nbsp;<span class="ident" id="7007643">NewReader</span><span class="op" id="7007652">(</span><span class="ident" id="7007653">bytes</span><span class="op" id="7007658">.</span><span class="ident" id="7007659">NewReader</span><span class="op" id="7007668">(</span><span class="ident" id="7007669">b</span><span class="op" id="7007670">)</span><span class="op" id="7007671">,</span>&nbsp;<span class="ident" id="7007673">size</span><span class="op" id="7007677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007680">if</span>&nbsp;<span class="ident" id="7007683">err</span>&nbsp;<span class="op" id="7007687">!=</span>&nbsp;<span class="ident" id="7007690">ErrFormat</span>&nbsp;<span class="op" id="7007700">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007704">t</span><span class="op" id="7007705">.</span><span class="ident" id="7007706">Errorf</span><span class="op" id="7007712">(</span><span class="string" id="7007713">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7007740">,</span>&nbsp;<span class="ident" id="7007742">err</span><span class="op" id="7007745">,</span>&nbsp;<span class="ident" id="7007747">ErrFormat</span><span class="op" id="7007756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7007763">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007799">sig</span>&nbsp;<span class="op" id="7007803">:=</span>&nbsp;<span class="builtinfunc" id="7007806">make</span><span class="op" id="7007810">(</span><span class="op" id="7007811">[</span><span class="op" id="7007812">]</span><span class="builtintype" id="7007813">byte</span><span class="op" id="7007817">,</span>&nbsp;<span class="num" id="7007819">4</span><span class="op" id="7007820">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007823">binary</span><span class="op" id="7007829">.</span><span class="ident" id="7007830">LittleEndian</span><span class="op" id="7007842">.</span><span class="ident" id="7007843">PutUint32</span><span class="op" id="7007852">(</span><span class="ident" id="7007853">sig</span><span class="op" id="7007856">,</span>&nbsp;<span class="ident" id="7007858">directoryEndSignature</span><span class="op" id="7007879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007882">for</span>&nbsp;<span class="ident" id="7007886">i</span>&nbsp;<span class="op" id="7007888">:=</span>&nbsp;<span class="num" id="7007891">0</span><span class="op" id="7007892">;</span>&nbsp;<span class="ident" id="7007894">i</span>&nbsp;<span class="op" id="7007896">&lt;</span>&nbsp;<span class="ident" id="7007898">size</span><span class="op" id="7007902">-</span><span class="num" id="7007903">4</span><span class="op" id="7007904">;</span>&nbsp;<span class="ident" id="7007906">i</span>&nbsp;<span class="op" id="7007908">+=</span>&nbsp;<span class="num" id="7007911">4</span>&nbsp;<span class="op" id="7007913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7007917">copy</span><span class="op" id="7007921">(</span><span class="ident" id="7007922">b</span><span class="op" id="7007923">[</span><span class="ident" id="7007924">i</span><span class="op" id="7007925">:</span><span class="ident" id="7007926">i</span><span class="op" id="7007927">+</span><span class="num" id="7007928">4</span><span class="op" id="7007929">]</span><span class="op" id="7007930">,</span>&nbsp;<span class="ident" id="7007932">sig</span><span class="op" id="7007935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7007938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7007941">_</span><span class="op" id="7007942">,</span>&nbsp;<span class="ident" id="7007944">err</span>&nbsp;<span class="op" id="7007948">=</span>&nbsp;<span class="ident" id="7007950">NewReader</span><span class="op" id="7007959">(</span><span class="ident" id="7007960">bytes</span><span class="op" id="7007965">.</span><span class="ident" id="7007966">NewReader</span><span class="op" id="7007975">(</span><span class="ident" id="7007976">b</span><span class="op" id="7007977">)</span><span class="op" id="7007978">,</span>&nbsp;<span class="ident" id="7007980">size</span><span class="op" id="7007984">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7007987">if</span>&nbsp;<span class="ident" id="7007990">err</span>&nbsp;<span class="op" id="7007994">!=</span>&nbsp;<span class="ident" id="7007997">ErrFormat</span>&nbsp;<span class="op" id="7008007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008011">t</span><span class="op" id="7008012">.</span><span class="ident" id="7008013">Errorf</span><span class="op" id="7008019">(</span><span class="string" id="7008020">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7008045">,</span>&nbsp;<span class="ident" id="7008047">err</span><span class="op" id="7008050">,</span>&nbsp;<span class="ident" id="7008052">ErrFormat</span><span class="op" id="7008061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008064">}</span><br>
<span class="lineno"></span><span class="op" id="7008066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7008069">func</span>&nbsp;<span class="ident" id="7008074">messWith</span><span class="op" id="7008082">(</span><span class="ident" id="7008083">fileName</span>&nbsp;<span class="builtintype" id="7008092">string</span><span class="op" id="7008098">,</span>&nbsp;<span class="ident" id="7008100">corrupter</span>&nbsp;<span class="keyword" id="7008110">func</span><span class="op" id="7008114">(</span><span class="ident" id="7008115">b</span>&nbsp;<span class="op" id="7008117">[</span><span class="op" id="7008118">]</span><span class="builtintype" id="7008119">byte</span><span class="op" id="7008123">)</span><span class="op" id="7008124">)</span>&nbsp;<span class="op" id="7008126">(</span><span class="ident" id="7008127">r</span>&nbsp;<span class="ident" id="7008129">io</span><span class="op" id="7008131">.</span><span class="ident" id="7008132">ReaderAt</span><span class="op" id="7008140">,</span>&nbsp;<span class="ident" id="7008142">size</span>&nbsp;<span class="ident" id="7008147">int64</span><span class="op" id="7008152">)</span>&nbsp;<span class="op" id="7008154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008157">data</span><span class="op" id="7008161">,</span>&nbsp;<span class="ident" id="7008163">err</span>&nbsp;<span class="op" id="7008167">:=</span>&nbsp;<span class="ident" id="7008170">ioutil</span><span class="op" id="7008176">.</span><span class="ident" id="7008177">ReadFile</span><span class="op" id="7008185">(</span><span class="ident" id="7008186">filepath</span><span class="op" id="7008194">.</span><span class="ident" id="7008195">Join</span><span class="op" id="7008199">(</span><span class="string" id="7008200">&#34;testdata&#34;</span><span class="op" id="7008210">,</span>&nbsp;<span class="ident" id="7008212">fileName</span><span class="op" id="7008220">)</span><span class="op" id="7008221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008224">if</span>&nbsp;<span class="ident" id="7008227">err</span>&nbsp;<span class="op" id="7008231">!=</span>&nbsp;<span class="ident" id="7008234">nil</span>&nbsp;<span class="op" id="7008238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7008242">panic</span><span class="op" id="7008247">(</span><span class="string" id="7008248">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7008265">+</span>&nbsp;<span class="ident" id="7008267">fileName</span>&nbsp;<span class="op" id="7008276">+</span>&nbsp;<span class="string" id="7008278">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7008283">+</span>&nbsp;<span class="ident" id="7008285">err</span><span class="op" id="7008288">.</span><span class="ident" id="7008289">Error</span><span class="op" id="7008294">(</span><span class="op" id="7008295">)</span><span class="op" id="7008296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008299">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008302">corrupter</span><span class="op" id="7008311">(</span><span class="ident" id="7008312">data</span><span class="op" id="7008316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008319">return</span>&nbsp;<span class="ident" id="7008326">bytes</span><span class="op" id="7008331">.</span><span class="ident" id="7008332">NewReader</span><span class="op" id="7008341">(</span><span class="ident" id="7008342">data</span><span class="op" id="7008346">)</span><span class="op" id="7008347">,</span>&nbsp;<span class="ident" id="7008349">int64</span><span class="op" id="7008354">(</span><span class="builtinfunc" id="7008355">len</span><span class="op" id="7008358">(</span><span class="ident" id="7008359">data</span><span class="op" id="7008363">)</span><span class="op" id="7008364">)</span><br>
<span class="lineno"></span><span class="op" id="7008366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7008369">func</span>&nbsp;<span class="ident" id="7008374">returnCorruptCRC32Zip</span><span class="op" id="7008395">(</span><span class="op" id="7008396">)</span>&nbsp;<span class="op" id="7008398">(</span><span class="ident" id="7008399">r</span>&nbsp;<span class="ident" id="7008401">io</span><span class="op" id="7008403">.</span><span class="ident" id="7008404">ReaderAt</span><span class="op" id="7008412">,</span>&nbsp;<span class="ident" id="7008414">size</span>&nbsp;<span class="ident" id="7008419">int64</span><span class="op" id="7008424">)</span>&nbsp;<span class="op" id="7008426">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008429">return</span>&nbsp;<span class="ident" id="7008436">messWith</span><span class="op" id="7008444">(</span><span class="string" id="7008445">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7008471">,</span>&nbsp;<span class="keyword" id="7008473">func</span><span class="op" id="7008477">(</span><span class="ident" id="7008478">b</span>&nbsp;<span class="op" id="7008480">[</span><span class="op" id="7008481">]</span><span class="builtintype" id="7008482">byte</span><span class="op" id="7008486">)</span>&nbsp;<span class="op" id="7008488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008492">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008547">b</span><span class="op" id="7008548">[</span><span class="num" id="7008549">0x2d</span><span class="op" id="7008553">]</span><span class="op" id="7008554">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7008558">}</span><span class="op" id="7008559">)</span><br>
<span class="lineno"></span><span class="op" id="7008561">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7008564">func</span>&nbsp;<span class="ident" id="7008569">returnCorruptNotStreamedZip</span><span class="op" id="7008596">(</span><span class="op" id="7008597">)</span>&nbsp;<span class="op" id="7008599">(</span><span class="ident" id="7008600">r</span>&nbsp;<span class="ident" id="7008602">io</span><span class="op" id="7008604">.</span><span class="ident" id="7008605">ReaderAt</span><span class="op" id="7008613">,</span>&nbsp;<span class="ident" id="7008615">size</span>&nbsp;<span class="ident" id="7008620">int64</span><span class="op" id="7008625">)</span>&nbsp;<span class="op" id="7008627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7008630">return</span>&nbsp;<span class="ident" id="7008637">messWith</span><span class="op" id="7008645">(</span><span class="string" id="7008646">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7008670">,</span>&nbsp;<span class="keyword" id="7008672">func</span><span class="op" id="7008676">(</span><span class="ident" id="7008677">b</span>&nbsp;<span class="op" id="7008679">[</span><span class="op" id="7008680">]</span><span class="builtintype" id="7008681">byte</span><span class="op" id="7008685">)</span>&nbsp;<span class="op" id="7008687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008691">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008740">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008785">b</span><span class="op" id="7008786">[</span><span class="num" id="7008787">0x11</span><span class="op" id="7008791">]</span><span class="op" id="7008792">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7008797">b</span><span class="op" id="7008798">[</span><span class="num" id="7008799">0x9d</span><span class="op" id="7008803">]</span><span class="op" id="7008804">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008810">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008865">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008922">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7008980">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7009034">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7009089">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7009110">}</span><span class="op" id="7009111">)</span><br>
<span class="lineno">465</span><span class="op" id="7009113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7009116">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7009180">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7009241">func</span>&nbsp;<span class="ident" id="7009246">rZipBytes</span><span class="op" id="7009255">(</span><span class="op" id="7009256">)</span>&nbsp;<span class="op" id="7009258">[</span><span class="op" id="7009259">]</span><span class="builtintype" id="7009260">byte</span>&nbsp;<span class="op" id="7009265">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7009268">s</span>&nbsp;<span class="op" id="7009270">:=</span>&nbsp;<span class="string" id="7009273">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010821">s</span>&nbsp;<span class="op" id="7010823">=</span>&nbsp;<span class="ident" id="7010825">regexp</span><span class="op" id="7010831">.</span><span class="ident" id="7010832">MustCompile</span><span class="op" id="7010843">(</span><span class="string" id="7010844">`[0-9a-f]{7}`</span><span class="op" id="7010857">)</span><span class="op" id="7010858">.</span><span class="ident" id="7010859">ReplaceAllString</span><span class="op" id="7010875">(</span><span class="ident" id="7010876">s</span><span class="op" id="7010877">,</span>&nbsp;<span class="string" id="7010879">&#34;&#34;</span><span class="op" id="7010881">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010884">s</span>&nbsp;<span class="op" id="7010886">=</span>&nbsp;<span class="ident" id="7010888">regexp</span><span class="op" id="7010894">.</span><span class="ident" id="7010895">MustCompile</span><span class="op" id="7010906">(</span><span class="string" id="7010907">`\s+`</span><span class="op" id="7010912">)</span><span class="op" id="7010913">.</span><span class="ident" id="7010914">ReplaceAllString</span><span class="op" id="7010930">(</span><span class="ident" id="7010931">s</span><span class="op" id="7010932">,</span>&nbsp;<span class="string" id="7010934">&#34;&#34;</span><span class="op" id="7010936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7010939">b</span><span class="op" id="7010940">,</span>&nbsp;<span class="ident" id="7010942">err</span>&nbsp;<span class="op" id="7010946">:=</span>&nbsp;<span class="ident" id="7010949">hex</span><span class="op" id="7010952">.</span><span class="ident" id="7010953">DecodeString</span><span class="op" id="7010965">(</span><span class="ident" id="7010966">s</span><span class="op" id="7010967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7010970">if</span>&nbsp;<span class="ident" id="7010973">err</span>&nbsp;<span class="op" id="7010977">!=</span>&nbsp;<span class="ident" id="7010980">nil</span>&nbsp;<span class="op" id="7010984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7010988">panic</span><span class="op" id="7010993">(</span><span class="ident" id="7010994">err</span><span class="op" id="7010997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7011000">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011003">return</span>&nbsp;<span class="ident" id="7011010">b</span><br>
<span class="lineno"></span><span class="op" id="7011012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011015">func</span>&nbsp;<span class="ident" id="7011020">returnRecursiveZip</span><span class="op" id="7011038">(</span><span class="op" id="7011039">)</span>&nbsp;<span class="op" id="7011041">(</span><span class="ident" id="7011042">r</span>&nbsp;<span class="ident" id="7011044">io</span><span class="op" id="7011046">.</span><span class="ident" id="7011047">ReaderAt</span><span class="op" id="7011055">,</span>&nbsp;<span class="ident" id="7011057">size</span>&nbsp;<span class="ident" id="7011062">int64</span><span class="op" id="7011067">)</span>&nbsp;<span class="op" id="7011069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011072">b</span>&nbsp;<span class="op" id="7011074">:=</span>&nbsp;<span class="ident" id="7011077">rZipBytes</span><span class="op" id="7011086">(</span><span class="op" id="7011087">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7011090">return</span>&nbsp;<span class="ident" id="7011097">bytes</span><span class="op" id="7011102">.</span><span class="ident" id="7011103">NewReader</span><span class="op" id="7011112">(</span><span class="ident" id="7011113">b</span><span class="op" id="7011114">)</span><span class="op" id="7011115">,</span>&nbsp;<span class="ident" id="7011117">int64</span><span class="op" id="7011122">(</span><span class="builtinfunc" id="7011123">len</span><span class="op" id="7011126">(</span><span class="ident" id="7011127">b</span><span class="op" id="7011128">)</span><span class="op" id="7011129">)</span><br>
<span class="lineno"></span><span class="op" id="7011131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7011134">func</span>&nbsp;<span class="ident" id="7011139">TestIssue8186</span><span class="op" id="7011152">(</span><span class="ident" id="7011153">t</span>&nbsp;<span class="op" id="7011155">*</span><span class="ident" id="7011156">testing</span><span class="op" id="7011163">.</span><span class="ident" id="7011164">T</span><span class="op" id="7011165">)</span>&nbsp;<span class="op" id="7011167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7011170">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7011231">dirEnts</span>&nbsp;<span class="op" id="7011239">:=</span>&nbsp;<span class="op" id="7011242">[</span><span class="op" id="7011243">]</span><span class="builtintype" id="7011244">string</span><span class="op" id="7011250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7011254">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7011481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7011485">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7011663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7011667">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7011838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7011842">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7012010">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7012014">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7012197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7012201">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7012383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7012387">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7012557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7012561">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98o\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7012730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7012734">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7012907">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7012910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012913">for</span>&nbsp;<span class="ident" id="7012917">i</span><span class="op" id="7012918">,</span>&nbsp;<span class="ident" id="7012920">s</span>&nbsp;<span class="op" id="7012922">:=</span>&nbsp;<span class="keyword" id="7012925">range</span>&nbsp;<span class="ident" id="7012931">dirEnts</span>&nbsp;<span class="op" id="7012939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7012943">var</span>&nbsp;<span class="ident" id="7012947">f</span>&nbsp;<span class="ident" id="7012949">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7012956">err</span>&nbsp;<span class="op" id="7012960">:=</span>&nbsp;<span class="ident" id="7012963">readDirectoryHeader</span><span class="op" id="7012982">(</span><span class="op" id="7012983">&amp;</span><span class="ident" id="7012984">f</span><span class="op" id="7012985">,</span>&nbsp;<span class="ident" id="7012987">strings</span><span class="op" id="7012994">.</span><span class="ident" id="7012995">NewReader</span><span class="op" id="7013004">(</span><span class="ident" id="7013005">s</span><span class="op" id="7013006">)</span><span class="op" id="7013007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7013011">if</span>&nbsp;<span class="ident" id="7013014">err</span>&nbsp;<span class="op" id="7013018">!=</span>&nbsp;<span class="ident" id="7013021">nil</span>&nbsp;<span class="op" id="7013025">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7013030">t</span><span class="op" id="7013031">.</span><span class="ident" id="7013032">Errorf</span><span class="op" id="7013038">(</span><span class="string" id="7013039">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7013062">,</span>&nbsp;<span class="ident" id="7013064">i</span><span class="op" id="7013065">,</span>&nbsp;<span class="ident" id="7013067">err</span><span class="op" id="7013070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7013077">}</span><br>
<span class="lineno"></span><span class="op" id="7013079">}</span>
</div>
</body>
</html>
