<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3572869">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3572924">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3572978">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3573029">//&nbsp;Package&nbsp;url&nbsp;parses&nbsp;URLs&nbsp;and&nbsp;implements&nbsp;query&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="3573087">//&nbsp;See&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3573104">package</span>&nbsp;<span class="ident" id="3573112">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573117">import</span>&nbsp;<span class="op" id="3573124">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3573127">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3573136">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3573146">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3573154">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3573165">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3573175">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3573178">//&nbsp;Error&nbsp;reports&nbsp;an&nbsp;error&nbsp;and&nbsp;the&nbsp;operation&nbsp;and&nbsp;URL&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3573246">type</span>&nbsp;<span class="ident" id="3573251">Error</span>&nbsp;<span class="keyword" id="3573257">struct</span>&nbsp;<span class="op" id="3573264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573267">Op</span>&nbsp;&nbsp;<span class="builtintype" id="3573271">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573279">URL</span>&nbsp;<span class="builtintype" id="3573283">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573291">Err</span>&nbsp;<span class="builtintype" id="3573295">error</span><br>
<span class="lineno"></span><span class="op" id="3573301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573304">func</span>&nbsp;<span class="op" id="3573309">(</span><span class="ident" id="3573310">e</span>&nbsp;<span class="op" id="3573312">*</span><span class="ident" id="3573313"><a href="/net/url/url.go.html#3573251">Error</a></span><span class="op" id="3573318">)</span>&nbsp;<span class="ident" id="3573320">Error</span><span class="op" id="3573325">(</span><span class="op" id="3573326">)</span>&nbsp;<span class="builtintype" id="3573328">string</span>&nbsp;<span class="op" id="3573335">{</span>&nbsp;<span class="keyword" id="3573337">return</span>&nbsp;<span class="ident" id="3573344"><a href="/net/url/url.go.html#3573310">e</a></span><span class="op" id="3573345">.</span><span class="ident" id="3573346">Op</span>&nbsp;<span class="op" id="3573349">+</span>&nbsp;<span class="string" id="3573351">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3573355">+</span>&nbsp;<span class="ident" id="3573357"><a href="/net/url/url.go.html#3573310">e</a></span><span class="op" id="3573358">.</span><span class="ident" id="3573359">URL</span>&nbsp;<span class="op" id="3573363">+</span>&nbsp;<span class="string" id="3573365">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3573370">+</span>&nbsp;<span class="ident" id="3573372"><a href="/net/url/url.go.html#3573310">e</a></span><span class="op" id="3573373">.</span><span class="ident" id="3573374">Err</span><span class="op" id="3573377">.</span><span class="ident" id="3573378">Error</span><span class="op" id="3573383">(</span><span class="op" id="3573384">)</span>&nbsp;<span class="op" id="3573386">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3573389">func</span>&nbsp;<span class="ident" id="3573394">ishex</span><span class="op" id="3573399">(</span><span class="ident" id="3573400">c</span>&nbsp;<span class="builtintype" id="3573402">byte</span><span class="op" id="3573406">)</span>&nbsp;<span class="builtintype" id="3573408">bool</span>&nbsp;<span class="op" id="3573413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573416">switch</span>&nbsp;<span class="op" id="3573423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573426">case</span>&nbsp;<span class="string" id="3573431">&#39;0&#39;</span>&nbsp;<span class="op" id="3573435">&lt;=</span>&nbsp;<span class="ident" id="3573438"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573440">&amp;&amp;</span>&nbsp;<span class="ident" id="3573443"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573445">&lt;=</span>&nbsp;<span class="string" id="3573448">&#39;9&#39;</span><span class="op" id="3573451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573455">return</span>&nbsp;<span class="builtintype" id="3573462">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573468">case</span>&nbsp;<span class="string" id="3573473">&#39;a&#39;</span>&nbsp;<span class="op" id="3573477">&lt;=</span>&nbsp;<span class="ident" id="3573480"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573482">&amp;&amp;</span>&nbsp;<span class="ident" id="3573485"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573487">&lt;=</span>&nbsp;<span class="string" id="3573490">&#39;f&#39;</span><span class="op" id="3573493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573497">return</span>&nbsp;<span class="builtintype" id="3573504">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573510">case</span>&nbsp;<span class="string" id="3573515">&#39;A&#39;</span>&nbsp;<span class="op" id="3573519">&lt;=</span>&nbsp;<span class="ident" id="3573522"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573524">&amp;&amp;</span>&nbsp;<span class="ident" id="3573527"><a href="/net/url/url.go.html#3573400">c</a></span>&nbsp;<span class="op" id="3573529">&lt;=</span>&nbsp;<span class="string" id="3573532">&#39;F&#39;</span><span class="op" id="3573535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573539">return</span>&nbsp;<span class="builtintype" id="3573546">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3573552">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573555">return</span>&nbsp;<span class="builtintype" id="3573562">false</span><br>
<span class="lineno"></span><span class="op" id="3573568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573571">func</span>&nbsp;<span class="ident" id="3573576">unhex</span><span class="op" id="3573581">(</span><span class="ident" id="3573582">c</span>&nbsp;<span class="builtintype" id="3573584">byte</span><span class="op" id="3573588">)</span>&nbsp;<span class="builtintype" id="3573590">byte</span>&nbsp;<span class="op" id="3573595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573598">switch</span>&nbsp;<span class="op" id="3573605">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573608">case</span>&nbsp;<span class="string" id="3573613">&#39;0&#39;</span>&nbsp;<span class="op" id="3573617">&lt;=</span>&nbsp;<span class="ident" id="3573620"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573622">&amp;&amp;</span>&nbsp;<span class="ident" id="3573625"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573627">&lt;=</span>&nbsp;<span class="string" id="3573630">&#39;9&#39;</span><span class="op" id="3573633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573637">return</span>&nbsp;<span class="ident" id="3573644"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573646">-</span>&nbsp;<span class="string" id="3573648">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573653">case</span>&nbsp;<span class="string" id="3573658">&#39;a&#39;</span>&nbsp;<span class="op" id="3573662">&lt;=</span>&nbsp;<span class="ident" id="3573665"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573667">&amp;&amp;</span>&nbsp;<span class="ident" id="3573670"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573672">&lt;=</span>&nbsp;<span class="string" id="3573675">&#39;f&#39;</span><span class="op" id="3573678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573682">return</span>&nbsp;<span class="ident" id="3573689"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573691">-</span>&nbsp;<span class="string" id="3573693">&#39;a&#39;</span>&nbsp;<span class="op" id="3573697">+</span>&nbsp;<span class="num" id="3573699">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573703">case</span>&nbsp;<span class="string" id="3573708">&#39;A&#39;</span>&nbsp;<span class="op" id="3573712">&lt;=</span>&nbsp;<span class="ident" id="3573715"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573717">&amp;&amp;</span>&nbsp;<span class="ident" id="3573720"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573722">&lt;=</span>&nbsp;<span class="string" id="3573725">&#39;F&#39;</span><span class="op" id="3573728">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573732">return</span>&nbsp;<span class="ident" id="3573739"><a href="/net/url/url.go.html#3573582">c</a></span>&nbsp;<span class="op" id="3573741">-</span>&nbsp;<span class="string" id="3573743">&#39;A&#39;</span>&nbsp;<span class="op" id="3573747">+</span>&nbsp;<span class="num" id="3573749">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3573753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573756">return</span>&nbsp;<span class="num" id="3573763">0</span><br>
<span class="lineno"></span><span class="op" id="3573765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="3573768">type</span>&nbsp;<span class="ident" id="3573773">encoding</span>&nbsp;<span class="builtintype" id="3573782">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573787">const</span>&nbsp;<span class="op" id="3573793">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573796">encodePath</span>&nbsp;<span class="ident" id="3573807"><a href="/net/url/url.go.html#3573773">encoding</a></span>&nbsp;<span class="op" id="3573816">=</span>&nbsp;<span class="num" id="3573818">1</span>&nbsp;<span class="op" id="3573820">+</span>&nbsp;<span class="ident" id="3573822">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573828">encodeUserPassword</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573848">encodeQueryComponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3573870">encodeFragment</span><br>
<span class="lineno"></span><span class="op" id="3573885">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573888">type</span>&nbsp;<span class="ident" id="3573893">EscapeError</span>&nbsp;<span class="builtintype" id="3573905">string</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3573913">func</span>&nbsp;<span class="op" id="3573918">(</span><span class="ident" id="3573919">e</span>&nbsp;<span class="ident" id="3573921"><a href="/net/url/url.go.html#3573893">EscapeError</a></span><span class="op" id="3573932">)</span>&nbsp;<span class="ident" id="3573934">Error</span><span class="op" id="3573939">(</span><span class="op" id="3573940">)</span>&nbsp;<span class="builtintype" id="3573942">string</span>&nbsp;<span class="op" id="3573949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3573952">return</span>&nbsp;<span class="string" id="3573959">&#34;invalid&nbsp;URL&nbsp;escape&nbsp;&#34;</span>&nbsp;<span class="op" id="3573981">+</span>&nbsp;<span class="ident" id="3573983"><a href="/net/url/url.go.html#3573154">strconv</a></span><span class="op" id="3573990">.</span><span class="ident" id="3573991">Quote</span><span class="op" id="3573996">(</span><span class="builtintype" id="3573997">string</span><span class="op" id="3574003">(</span><span class="ident" id="3574004"><a href="/net/url/url.go.html#3573919">e</a></span><span class="op" id="3574005">)</span><span class="op" id="3574006">)</span><br>
<span class="lineno"></span><span class="op" id="3574008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3574011">//&nbsp;Return&nbsp;true&nbsp;if&nbsp;the&nbsp;specified&nbsp;character&nbsp;should&nbsp;be&nbsp;escaped&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3574076">//&nbsp;appearing&nbsp;in&nbsp;a&nbsp;URL&nbsp;string,&nbsp;according&nbsp;to&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3574129">func</span>&nbsp;<span class="ident" id="3574134">shouldEscape</span><span class="op" id="3574146">(</span><span class="ident" id="3574147">c</span>&nbsp;<span class="builtintype" id="3574149">byte</span><span class="op" id="3574153">,</span>&nbsp;<span class="ident" id="3574155">mode</span>&nbsp;<span class="ident" id="3574160"><a href="/net/url/url.go.html#3573773">encoding</a></span><span class="op" id="3574168">)</span>&nbsp;<span class="builtintype" id="3574170">bool</span>&nbsp;<span class="op" id="3574175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574178">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(alphanum)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574221">if</span>&nbsp;<span class="string" id="3574224">&#39;A&#39;</span>&nbsp;<span class="op" id="3574228">&lt;=</span>&nbsp;<span class="ident" id="3574231"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574233">&amp;&amp;</span>&nbsp;<span class="ident" id="3574236"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574238">&lt;=</span>&nbsp;<span class="string" id="3574241">&#39;Z&#39;</span>&nbsp;<span class="op" id="3574245">||</span>&nbsp;<span class="string" id="3574248">&#39;a&#39;</span>&nbsp;<span class="op" id="3574252">&lt;=</span>&nbsp;<span class="ident" id="3574255"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574257">&amp;&amp;</span>&nbsp;<span class="ident" id="3574260"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574262">&lt;=</span>&nbsp;<span class="string" id="3574265">&#39;z&#39;</span>&nbsp;<span class="op" id="3574269">||</span>&nbsp;<span class="string" id="3574272">&#39;0&#39;</span>&nbsp;<span class="op" id="3574276">&lt;=</span>&nbsp;<span class="ident" id="3574279"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574281">&amp;&amp;</span>&nbsp;<span class="ident" id="3574284"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574286">&lt;=</span>&nbsp;<span class="string" id="3574289">&#39;9&#39;</span>&nbsp;<span class="op" id="3574293">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574297">return</span>&nbsp;<span class="builtintype" id="3574304">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3574311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574315">switch</span>&nbsp;<span class="ident" id="3574322"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574327">case</span>&nbsp;<span class="string" id="3574332">&#39;-&#39;</span><span class="op" id="3574335">,</span>&nbsp;<span class="string" id="3574337">&#39;_&#39;</span><span class="op" id="3574340">,</span>&nbsp;<span class="string" id="3574342">&#39;.&#39;</span><span class="op" id="3574345">,</span>&nbsp;<span class="string" id="3574347">&#39;~&#39;</span><span class="op" id="3574350">:</span>&nbsp;<span class="comment" id="3574352">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(mark)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574392">return</span>&nbsp;<span class="builtintype" id="3574399">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574407">case</span>&nbsp;<span class="string" id="3574412">&#39;$&#39;</span><span class="op" id="3574415">,</span>&nbsp;<span class="string" id="3574417">&#39;&amp;&#39;</span><span class="op" id="3574420">,</span>&nbsp;<span class="string" id="3574422">&#39;+&#39;</span><span class="op" id="3574425">,</span>&nbsp;<span class="string" id="3574427">&#39;,&#39;</span><span class="op" id="3574430">,</span>&nbsp;<span class="string" id="3574432">&#39;/&#39;</span><span class="op" id="3574435">,</span>&nbsp;<span class="string" id="3574437">&#39;:&#39;</span><span class="op" id="3574440">,</span>&nbsp;<span class="string" id="3574442">&#39;;&#39;</span><span class="op" id="3574445">,</span>&nbsp;<span class="string" id="3574447">&#39;=&#39;</span><span class="op" id="3574450">,</span>&nbsp;<span class="string" id="3574452">&#39;?&#39;</span><span class="op" id="3574455">,</span>&nbsp;<span class="string" id="3574457">&#39;@&#39;</span><span class="op" id="3574460">:</span>&nbsp;<span class="comment" id="3574462">//&nbsp;§2.2&nbsp;Reserved&nbsp;characters&nbsp;(reserved)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574504">//&nbsp;Different&nbsp;sections&nbsp;of&nbsp;the&nbsp;URL&nbsp;allow&nbsp;a&nbsp;few&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574554">//&nbsp;the&nbsp;reserved&nbsp;characters&nbsp;to&nbsp;appear&nbsp;unescaped.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574604">switch</span>&nbsp;<span class="ident" id="3574611"><a href="/net/url/url.go.html#3574155">mode</a></span>&nbsp;<span class="op" id="3574616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574620">case</span>&nbsp;<span class="ident" id="3574625"><a href="/net/url/url.go.html#3573796">encodePath</a></span><span class="op" id="3574635">:</span>&nbsp;<span class="comment" id="3574637">//&nbsp;§3.3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574649">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;:&nbsp;@&nbsp;&amp;&nbsp;=&nbsp;+&nbsp;$&nbsp;but&nbsp;saves&nbsp;/&nbsp;;&nbsp;,&nbsp;for&nbsp;assigning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574712">//&nbsp;meaning&nbsp;to&nbsp;individual&nbsp;path&nbsp;segments.&nbsp;This&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574768">//&nbsp;only&nbsp;manipulates&nbsp;the&nbsp;path&nbsp;as&nbsp;a&nbsp;whole,&nbsp;so&nbsp;we&nbsp;allow&nbsp;those</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574830">//&nbsp;last&nbsp;two&nbsp;as&nbsp;well.&nbsp;That&nbsp;leaves&nbsp;only&nbsp;?&nbsp;to&nbsp;escape.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574884">return</span>&nbsp;<span class="ident" id="3574891"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3574893">==</span>&nbsp;<span class="string" id="3574896">&#39;?&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3574903">case</span>&nbsp;<span class="ident" id="3574908"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3574926">:</span>&nbsp;<span class="comment" id="3574928">//&nbsp;§3.2.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3574942">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;&#39;;&#39;,&nbsp;&#39;:&#39;,&nbsp;&#39;&amp;&#39;,&nbsp;&#39;=&#39;,&nbsp;&#39;+&#39;,&nbsp;&#39;$&#39;,&nbsp;and&nbsp;&#39;,&#39;&nbsp;in</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575004">//&nbsp;userinfo,&nbsp;so&nbsp;we&nbsp;must&nbsp;escape&nbsp;only&nbsp;&#39;@&#39;,&nbsp;&#39;/&#39;,&nbsp;and&nbsp;&#39;?&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575062">//&nbsp;The&nbsp;parsing&nbsp;of&nbsp;userinfo&nbsp;treats&nbsp;&#39;:&#39;&nbsp;as&nbsp;special&nbsp;so&nbsp;we&nbsp;must&nbsp;escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575132">//&nbsp;that&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575148">return</span>&nbsp;<span class="ident" id="3575155"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3575157">==</span>&nbsp;<span class="string" id="3575160">&#39;@&#39;</span>&nbsp;<span class="op" id="3575164">||</span>&nbsp;<span class="ident" id="3575167"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3575169">==</span>&nbsp;<span class="string" id="3575172">&#39;/&#39;</span>&nbsp;<span class="op" id="3575176">||</span>&nbsp;<span class="ident" id="3575179"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3575181">==</span>&nbsp;<span class="string" id="3575184">&#39;?&#39;</span>&nbsp;<span class="op" id="3575188">||</span>&nbsp;<span class="ident" id="3575191"><a href="/net/url/url.go.html#3574147">c</a></span>&nbsp;<span class="op" id="3575193">==</span>&nbsp;<span class="string" id="3575196">&#39;:&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575203">case</span>&nbsp;<span class="ident" id="3575208"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span><span class="op" id="3575228">:</span>&nbsp;<span class="comment" id="3575230">//&nbsp;§3.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575242">//&nbsp;The&nbsp;RFC&nbsp;reserves&nbsp;(so&nbsp;we&nbsp;must&nbsp;escape)&nbsp;everything.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575297">return</span>&nbsp;<span class="builtintype" id="3575304">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575312">case</span>&nbsp;<span class="ident" id="3575317"><a href="/net/url/url.go.html#3573870">encodeFragment</a></span><span class="op" id="3575331">:</span>&nbsp;<span class="comment" id="3575333">//&nbsp;§4.1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575345">//&nbsp;The&nbsp;RFC&nbsp;text&nbsp;is&nbsp;silent&nbsp;but&nbsp;the&nbsp;grammar&nbsp;allows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575397">//&nbsp;everything,&nbsp;so&nbsp;escape&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575434">return</span>&nbsp;<span class="builtintype" id="3575441">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3575449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3575452">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575456">//&nbsp;Everything&nbsp;else&nbsp;must&nbsp;be&nbsp;escaped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575493">return</span>&nbsp;<span class="builtintype" id="3575500">true</span><br>
<span class="lineno"></span><span class="op" id="3575505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3575508">//&nbsp;QueryUnescape&nbsp;does&nbsp;the&nbsp;inverse&nbsp;transformation&nbsp;of&nbsp;QueryEscape,&nbsp;converting</span><br>
<span class="lineno"></span><span class="comment" id="3575584">//&nbsp;%AB&nbsp;into&nbsp;the&nbsp;byte&nbsp;0xAB&nbsp;and&nbsp;&#39;+&#39;&nbsp;into&nbsp;&#39;&nbsp;&#39;&nbsp;(space).&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3575659">//&nbsp;any&nbsp;%&nbsp;is&nbsp;not&nbsp;followed&nbsp;by&nbsp;two&nbsp;hexadecimal&nbsp;digits.</span><br>
<span class="lineno"></span><span class="keyword" id="3575711">func</span>&nbsp;<span class="ident" id="3575716">QueryUnescape</span><span class="op" id="3575729">(</span><span class="ident" id="3575730">s</span>&nbsp;<span class="builtintype" id="3575732">string</span><span class="op" id="3575738">)</span>&nbsp;<span class="op" id="3575740">(</span><span class="builtintype" id="3575741">string</span><span class="op" id="3575747">,</span>&nbsp;<span class="builtintype" id="3575749">error</span><span class="op" id="3575754">)</span>&nbsp;<span class="op" id="3575756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3575759">return</span>&nbsp;<span class="ident" id="3575766"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3575774">(</span><span class="ident" id="3575775"><a href="/net/url/url.go.html#3575730">s</a></span><span class="op" id="3575776">,</span>&nbsp;<span class="ident" id="3575778"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span><span class="op" id="3575798">)</span><br>
<span class="lineno">115</span><span class="op" id="3575800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3575803">//&nbsp;unescape&nbsp;unescapes&nbsp;a&nbsp;string;&nbsp;the&nbsp;mode&nbsp;specifies</span><br>
<span class="lineno"></span><span class="comment" id="3575854">//&nbsp;which&nbsp;section&nbsp;of&nbsp;the&nbsp;URL&nbsp;string&nbsp;is&nbsp;being&nbsp;unescaped.</span><br>
<span class="lineno"></span><span class="keyword" id="3575909">func</span>&nbsp;<span class="ident" id="3575914">unescape</span><span class="op" id="3575922">(</span><span class="ident" id="3575923">s</span>&nbsp;<span class="builtintype" id="3575925">string</span><span class="op" id="3575931">,</span>&nbsp;<span class="ident" id="3575933">mode</span>&nbsp;<span class="ident" id="3575938"><a href="/net/url/url.go.html#3573773">encoding</a></span><span class="op" id="3575946">)</span>&nbsp;<span class="op" id="3575948">(</span><span class="builtintype" id="3575949">string</span><span class="op" id="3575955">,</span>&nbsp;<span class="builtintype" id="3575957">error</span><span class="op" id="3575962">)</span>&nbsp;<span class="op" id="3575964">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3575967">//&nbsp;Count&nbsp;%,&nbsp;check&nbsp;that&nbsp;they&#39;re&nbsp;well-formed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576012">n</span>&nbsp;<span class="op" id="3576014">:=</span>&nbsp;<span class="num" id="3576017">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576020">hasPlus</span>&nbsp;<span class="op" id="3576028">:=</span>&nbsp;<span class="builtintype" id="3576031">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576038">for</span>&nbsp;<span class="ident" id="3576042">i</span>&nbsp;<span class="op" id="3576044">:=</span>&nbsp;<span class="num" id="3576047">0</span><span class="op" id="3576048">;</span>&nbsp;<span class="ident" id="3576050"><a href="/net/url/url.go.html#3576042">i</a></span>&nbsp;<span class="op" id="3576052">&lt;</span>&nbsp;<span class="builtinfunc" id="3576054">len</span><span class="op" id="3576057">(</span><span class="ident" id="3576058"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576059">)</span><span class="op" id="3576060">;</span>&nbsp;<span class="op" id="3576062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576066">switch</span>&nbsp;<span class="ident" id="3576073"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576074">[</span><span class="ident" id="3576075"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576076">]</span>&nbsp;<span class="op" id="3576078">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576082">case</span>&nbsp;<span class="string" id="3576087">&#39;%&#39;</span><span class="op" id="3576090">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576095"><a href="/net/url/url.go.html#3576012">n</a></span><span class="op" id="3576096">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576102">if</span>&nbsp;<span class="ident" id="3576105"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576106">+</span><span class="num" id="3576107">2</span>&nbsp;<span class="op" id="3576109">&gt;=</span>&nbsp;<span class="builtinfunc" id="3576112">len</span><span class="op" id="3576115">(</span><span class="ident" id="3576116"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576117">)</span>&nbsp;<span class="op" id="3576119">||</span>&nbsp;<span class="op" id="3576122">!</span><span class="ident" id="3576123"><a href="/net/url/url.go.html#3573394">ishex</a></span><span class="op" id="3576128">(</span><span class="ident" id="3576129"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576130">[</span><span class="ident" id="3576131"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576132">+</span><span class="num" id="3576133">1</span><span class="op" id="3576134">]</span><span class="op" id="3576135">)</span>&nbsp;<span class="op" id="3576137">||</span>&nbsp;<span class="op" id="3576140">!</span><span class="ident" id="3576141"><a href="/net/url/url.go.html#3573394">ishex</a></span><span class="op" id="3576146">(</span><span class="ident" id="3576147"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576148">[</span><span class="ident" id="3576149"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576150">+</span><span class="num" id="3576151">2</span><span class="op" id="3576152">]</span><span class="op" id="3576153">)</span>&nbsp;<span class="op" id="3576155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576161"><a href="/net/url/url.go.html#3575923">s</a></span>&nbsp;<span class="op" id="3576163">=</span>&nbsp;<span class="ident" id="3576165"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576166">[</span><span class="ident" id="3576167"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576168">:</span><span class="op" id="3576169">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576175">if</span>&nbsp;<span class="builtinfunc" id="3576178">len</span><span class="op" id="3576181">(</span><span class="ident" id="3576182"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576183">)</span>&nbsp;<span class="op" id="3576185">&gt;</span>&nbsp;<span class="num" id="3576187">3</span>&nbsp;<span class="op" id="3576189">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576196"><a href="/net/url/url.go.html#3575923">s</a></span>&nbsp;<span class="op" id="3576198">=</span>&nbsp;<span class="ident" id="3576200"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576201">[</span><span class="num" id="3576202">0</span><span class="op" id="3576203">:</span><span class="num" id="3576204">3</span><span class="op" id="3576205">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576217">return</span>&nbsp;<span class="string" id="3576224">&#34;&#34;</span><span class="op" id="3576226">,</span>&nbsp;<span class="ident" id="3576228"><a href="/net/url/url.go.html#3573893">EscapeError</a></span><span class="op" id="3576239">(</span><span class="ident" id="3576240"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576251"><a href="/net/url/url.go.html#3576042">i</a></span>&nbsp;<span class="op" id="3576253">+=</span>&nbsp;<span class="num" id="3576256">3</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576260">case</span>&nbsp;<span class="string" id="3576265">&#39;+&#39;</span><span class="op" id="3576268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576273"><a href="/net/url/url.go.html#3576020">hasPlus</a></span>&nbsp;<span class="op" id="3576281">=</span>&nbsp;<span class="ident" id="3576283"><a href="/net/url/url.go.html#3575933">mode</a></span>&nbsp;<span class="op" id="3576288">==</span>&nbsp;<span class="ident" id="3576291"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576315"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576316">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576321">default</span><span class="op" id="3576328">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576333"><a href="/net/url/url.go.html#3576042">i</a></span><span class="op" id="3576334">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576346">if</span>&nbsp;<span class="ident" id="3576349"><a href="/net/url/url.go.html#3576012">n</a></span>&nbsp;<span class="op" id="3576351">==</span>&nbsp;<span class="num" id="3576354">0</span>&nbsp;<span class="op" id="3576356">&amp;&amp;</span>&nbsp;<span class="op" id="3576359">!</span><span class="ident" id="3576360"><a href="/net/url/url.go.html#3576020">hasPlus</a></span>&nbsp;<span class="op" id="3576368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576372">return</span>&nbsp;<span class="ident" id="3576379"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576380">,</span>&nbsp;<span class="ident" id="3576382">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576391">t</span>&nbsp;<span class="op" id="3576393">:=</span>&nbsp;<span class="builtinfunc" id="3576396">make</span><span class="op" id="3576400">(</span><span class="op" id="3576401">[</span><span class="op" id="3576402">]</span><span class="builtintype" id="3576403">byte</span><span class="op" id="3576407">,</span>&nbsp;<span class="builtinfunc" id="3576409">len</span><span class="op" id="3576412">(</span><span class="ident" id="3576413"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576414">)</span><span class="op" id="3576415">-</span><span class="num" id="3576416">2</span><span class="op" id="3576417">*</span><span class="ident" id="3576418"><a href="/net/url/url.go.html#3576012">n</a></span><span class="op" id="3576419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576422">j</span>&nbsp;<span class="op" id="3576424">:=</span>&nbsp;<span class="num" id="3576427">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576430">for</span>&nbsp;<span class="ident" id="3576434">i</span>&nbsp;<span class="op" id="3576436">:=</span>&nbsp;<span class="num" id="3576439">0</span><span class="op" id="3576440">;</span>&nbsp;<span class="ident" id="3576442"><a href="/net/url/url.go.html#3576434">i</a></span>&nbsp;<span class="op" id="3576444">&lt;</span>&nbsp;<span class="builtinfunc" id="3576446">len</span><span class="op" id="3576449">(</span><span class="ident" id="3576450"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576451">)</span><span class="op" id="3576452">;</span>&nbsp;<span class="op" id="3576454">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576458">switch</span>&nbsp;<span class="ident" id="3576465"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576466">[</span><span class="ident" id="3576467"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576468">]</span>&nbsp;<span class="op" id="3576470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576474">case</span>&nbsp;<span class="string" id="3576479">&#39;%&#39;</span><span class="op" id="3576482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576487"><a href="/net/url/url.go.html#3576391">t</a></span><span class="op" id="3576488">[</span><span class="ident" id="3576489"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576490">]</span>&nbsp;<span class="op" id="3576492">=</span>&nbsp;<span class="ident" id="3576494"><a href="/net/url/url.go.html#3573576">unhex</a></span><span class="op" id="3576499">(</span><span class="ident" id="3576500"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576501">[</span><span class="ident" id="3576502"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576503">+</span><span class="num" id="3576504">1</span><span class="op" id="3576505">]</span><span class="op" id="3576506">)</span><span class="op" id="3576507">&lt;&lt;</span><span class="num" id="3576509">4</span>&nbsp;<span class="op" id="3576511">|</span>&nbsp;<span class="ident" id="3576513"><a href="/net/url/url.go.html#3573576">unhex</a></span><span class="op" id="3576518">(</span><span class="ident" id="3576519"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576520">[</span><span class="ident" id="3576521"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576522">+</span><span class="num" id="3576523">2</span><span class="op" id="3576524">]</span><span class="op" id="3576525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576530"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576531">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576537"><a href="/net/url/url.go.html#3576434">i</a></span>&nbsp;<span class="op" id="3576539">+=</span>&nbsp;<span class="num" id="3576542">3</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576546">case</span>&nbsp;<span class="string" id="3576551">&#39;+&#39;</span><span class="op" id="3576554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576559">if</span>&nbsp;<span class="ident" id="3576562"><a href="/net/url/url.go.html#3575933">mode</a></span>&nbsp;<span class="op" id="3576567">==</span>&nbsp;<span class="ident" id="3576570"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3576591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576597"><a href="/net/url/url.go.html#3576391">t</a></span><span class="op" id="3576598">[</span><span class="ident" id="3576599"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576600">]</span>&nbsp;<span class="op" id="3576602">=</span>&nbsp;<span class="string" id="3576604">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576611">}</span>&nbsp;<span class="keyword" id="3576613">else</span>&nbsp;<span class="op" id="3576618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576624"><a href="/net/url/url.go.html#3576391">t</a></span><span class="op" id="3576625">[</span><span class="ident" id="3576626"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576627">]</span>&nbsp;<span class="op" id="3576629">=</span>&nbsp;<span class="string" id="3576631">&#39;+&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576643"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576644">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576650"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576651">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576656">default</span><span class="op" id="3576663">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576668"><a href="/net/url/url.go.html#3576391">t</a></span><span class="op" id="3576669">[</span><span class="ident" id="3576670"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576671">]</span>&nbsp;<span class="op" id="3576673">=</span>&nbsp;<span class="ident" id="3576675"><a href="/net/url/url.go.html#3575923">s</a></span><span class="op" id="3576676">[</span><span class="ident" id="3576677"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576678">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576683"><a href="/net/url/url.go.html#3576422">j</a></span><span class="op" id="3576684">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576690"><a href="/net/url/url.go.html#3576434">i</a></span><span class="op" id="3576691">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3576699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576702">return</span>&nbsp;<span class="builtintype" id="3576709">string</span><span class="op" id="3576715">(</span><span class="ident" id="3576716"><a href="/net/url/url.go.html#3576391">t</a></span><span class="op" id="3576717">)</span><span class="op" id="3576718">,</span>&nbsp;<span class="ident" id="3576720">nil</span><br>
<span class="lineno">170</span><span class="op" id="3576724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576727">//&nbsp;QueryEscape&nbsp;escapes&nbsp;the&nbsp;string&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;safely&nbsp;placed</span><br>
<span class="lineno"></span><span class="comment" id="3576788">//&nbsp;inside&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="3576811">func</span>&nbsp;<span class="ident" id="3576816">QueryEscape</span><span class="op" id="3576827">(</span><span class="ident" id="3576828">s</span>&nbsp;<span class="builtintype" id="3576830">string</span><span class="op" id="3576836">)</span>&nbsp;<span class="builtintype" id="3576838">string</span>&nbsp;<span class="op" id="3576845">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576848">return</span>&nbsp;<span class="ident" id="3576855"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3576861">(</span><span class="ident" id="3576862"><a href="/net/url/url.go.html#3576828">s</a></span><span class="op" id="3576863">,</span>&nbsp;<span class="ident" id="3576865"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span><span class="op" id="3576885">)</span><br>
<span class="lineno"></span><span class="op" id="3576887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3576890">func</span>&nbsp;<span class="ident" id="3576895">escape</span><span class="op" id="3576901">(</span><span class="ident" id="3576902">s</span>&nbsp;<span class="builtintype" id="3576904">string</span><span class="op" id="3576910">,</span>&nbsp;<span class="ident" id="3576912">mode</span>&nbsp;<span class="ident" id="3576917"><a href="/net/url/url.go.html#3573773">encoding</a></span><span class="op" id="3576925">)</span>&nbsp;<span class="builtintype" id="3576927">string</span>&nbsp;<span class="op" id="3576934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576937">spaceCount</span><span class="op" id="3576947">,</span>&nbsp;<span class="ident" id="3576949">hexCount</span>&nbsp;<span class="op" id="3576958">:=</span>&nbsp;<span class="num" id="3576961">0</span><span class="op" id="3576962">,</span>&nbsp;<span class="num" id="3576964">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3576967">for</span>&nbsp;<span class="ident" id="3576971">i</span>&nbsp;<span class="op" id="3576973">:=</span>&nbsp;<span class="num" id="3576976">0</span><span class="op" id="3576977">;</span>&nbsp;<span class="ident" id="3576979"><a href="/net/url/url.go.html#3576971">i</a></span>&nbsp;<span class="op" id="3576981">&lt;</span>&nbsp;<span class="builtinfunc" id="3576983">len</span><span class="op" id="3576986">(</span><span class="ident" id="3576987"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3576988">)</span><span class="op" id="3576989">;</span>&nbsp;<span class="ident" id="3576991"><a href="/net/url/url.go.html#3576971">i</a></span><span class="op" id="3576992">++</span>&nbsp;<span class="op" id="3576995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3576999">c</span>&nbsp;<span class="op" id="3577001">:=</span>&nbsp;<span class="ident" id="3577004"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3577005">[</span><span class="ident" id="3577006"><a href="/net/url/url.go.html#3576971">i</a></span><span class="op" id="3577007">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577011">if</span>&nbsp;<span class="ident" id="3577014"><a href="/net/url/url.go.html#3574134">shouldEscape</a></span><span class="op" id="3577026">(</span><span class="ident" id="3577027"><a href="/net/url/url.go.html#3576999">c</a></span><span class="op" id="3577028">,</span>&nbsp;<span class="ident" id="3577030"><a href="/net/url/url.go.html#3576912">mode</a></span><span class="op" id="3577034">)</span>&nbsp;<span class="op" id="3577036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577041">if</span>&nbsp;<span class="ident" id="3577044"><a href="/net/url/url.go.html#3576999">c</a></span>&nbsp;<span class="op" id="3577046">==</span>&nbsp;<span class="string" id="3577049">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3577053">&amp;&amp;</span>&nbsp;<span class="ident" id="3577056"><a href="/net/url/url.go.html#3576912">mode</a></span>&nbsp;<span class="op" id="3577061">==</span>&nbsp;<span class="ident" id="3577064"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3577085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577091"><a href="/net/url/url.go.html#3576937">spaceCount</a></span><span class="op" id="3577101">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577107">}</span>&nbsp;<span class="keyword" id="3577109">else</span>&nbsp;<span class="op" id="3577114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577120"><a href="/net/url/url.go.html#3576949">hexCount</a></span><span class="op" id="3577128">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577141">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577145">if</span>&nbsp;<span class="ident" id="3577148"><a href="/net/url/url.go.html#3576937">spaceCount</a></span>&nbsp;<span class="op" id="3577159">==</span>&nbsp;<span class="num" id="3577162">0</span>&nbsp;<span class="op" id="3577164">&amp;&amp;</span>&nbsp;<span class="ident" id="3577167"><a href="/net/url/url.go.html#3576949">hexCount</a></span>&nbsp;<span class="op" id="3577176">==</span>&nbsp;<span class="num" id="3577179">0</span>&nbsp;<span class="op" id="3577181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577185">return</span>&nbsp;<span class="ident" id="3577192"><a href="/net/url/url.go.html#3576902">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577199">t</span>&nbsp;<span class="op" id="3577201">:=</span>&nbsp;<span class="builtinfunc" id="3577204">make</span><span class="op" id="3577208">(</span><span class="op" id="3577209">[</span><span class="op" id="3577210">]</span><span class="builtintype" id="3577211">byte</span><span class="op" id="3577215">,</span>&nbsp;<span class="builtinfunc" id="3577217">len</span><span class="op" id="3577220">(</span><span class="ident" id="3577221"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3577222">)</span><span class="op" id="3577223">+</span><span class="num" id="3577224">2</span><span class="op" id="3577225">*</span><span class="ident" id="3577226"><a href="/net/url/url.go.html#3576949">hexCount</a></span><span class="op" id="3577234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577237">j</span>&nbsp;<span class="op" id="3577239">:=</span>&nbsp;<span class="num" id="3577242">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577245">for</span>&nbsp;<span class="ident" id="3577249">i</span>&nbsp;<span class="op" id="3577251">:=</span>&nbsp;<span class="num" id="3577254">0</span><span class="op" id="3577255">;</span>&nbsp;<span class="ident" id="3577257"><a href="/net/url/url.go.html#3577249">i</a></span>&nbsp;<span class="op" id="3577259">&lt;</span>&nbsp;<span class="builtinfunc" id="3577261">len</span><span class="op" id="3577264">(</span><span class="ident" id="3577265"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3577266">)</span><span class="op" id="3577267">;</span>&nbsp;<span class="ident" id="3577269"><a href="/net/url/url.go.html#3577249">i</a></span><span class="op" id="3577270">++</span>&nbsp;<span class="op" id="3577273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577277">switch</span>&nbsp;<span class="ident" id="3577284">c</span>&nbsp;<span class="op" id="3577286">:=</span>&nbsp;<span class="ident" id="3577289"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3577290">[</span><span class="ident" id="3577291"><a href="/net/url/url.go.html#3577249">i</a></span><span class="op" id="3577292">]</span><span class="op" id="3577293">;</span>&nbsp;<span class="op" id="3577295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577299">case</span>&nbsp;<span class="ident" id="3577304"><a href="/net/url/url.go.html#3577284">c</a></span>&nbsp;<span class="op" id="3577306">==</span>&nbsp;<span class="string" id="3577309">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3577313">&amp;&amp;</span>&nbsp;<span class="ident" id="3577316"><a href="/net/url/url.go.html#3576912">mode</a></span>&nbsp;<span class="op" id="3577321">==</span>&nbsp;<span class="ident" id="3577324"><a href="/net/url/url.go.html#3573848">encodeQueryComponent</a></span><span class="op" id="3577344">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577349"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577350">[</span><span class="ident" id="3577351"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577352">]</span>&nbsp;<span class="op" id="3577354">=</span>&nbsp;<span class="string" id="3577356">&#39;+&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577363"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577364">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577369">case</span>&nbsp;<span class="ident" id="3577374"><a href="/net/url/url.go.html#3574134">shouldEscape</a></span><span class="op" id="3577386">(</span><span class="ident" id="3577387"><a href="/net/url/url.go.html#3577284">c</a></span><span class="op" id="3577388">,</span>&nbsp;<span class="ident" id="3577390"><a href="/net/url/url.go.html#3576912">mode</a></span><span class="op" id="3577394">)</span><span class="op" id="3577395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577400"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577401">[</span><span class="ident" id="3577402"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577403">]</span>&nbsp;<span class="op" id="3577405">=</span>&nbsp;<span class="string" id="3577407">&#39;%&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577414"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577415">[</span><span class="ident" id="3577416"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577417">+</span><span class="num" id="3577418">1</span><span class="op" id="3577419">]</span>&nbsp;<span class="op" id="3577421">=</span>&nbsp;<span class="string" id="3577423">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3577441">[</span><span class="ident" id="3577442"><a href="/net/url/url.go.html#3577284">c</a></span><span class="op" id="3577443">&gt;&gt;</span><span class="num" id="3577445">4</span><span class="op" id="3577446">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577451"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577452">[</span><span class="ident" id="3577453"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577454">+</span><span class="num" id="3577455">2</span><span class="op" id="3577456">]</span>&nbsp;<span class="op" id="3577458">=</span>&nbsp;<span class="string" id="3577460">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3577478">[</span><span class="ident" id="3577479"><a href="/net/url/url.go.html#3577284">c</a></span><span class="op" id="3577480">&amp;</span><span class="num" id="3577481">15</span><span class="op" id="3577483">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577488"><a href="/net/url/url.go.html#3577237">j</a></span>&nbsp;<span class="op" id="3577490">+=</span>&nbsp;<span class="num" id="3577493">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577497">default</span><span class="op" id="3577504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577509"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577510">[</span><span class="ident" id="3577511"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577512">]</span>&nbsp;<span class="op" id="3577514">=</span>&nbsp;<span class="ident" id="3577516"><a href="/net/url/url.go.html#3576902">s</a></span><span class="op" id="3577517">[</span><span class="ident" id="3577518"><a href="/net/url/url.go.html#3577249">i</a></span><span class="op" id="3577519">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3577524"><a href="/net/url/url.go.html#3577237">j</a></span><span class="op" id="3577525">++</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3577533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3577536">return</span>&nbsp;<span class="builtintype" id="3577543">string</span><span class="op" id="3577549">(</span><span class="ident" id="3577550"><a href="/net/url/url.go.html#3577199">t</a></span><span class="op" id="3577551">)</span><br>
<span class="lineno"></span><span class="op" id="3577553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="3577556">//&nbsp;A&nbsp;URL&nbsp;represents&nbsp;a&nbsp;parsed&nbsp;URL&nbsp;(technically,&nbsp;a&nbsp;URI&nbsp;reference).</span><br>
<span class="lineno"></span><span class="comment" id="3577621">//&nbsp;The&nbsp;general&nbsp;form&nbsp;represented&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3577657">//</span><br>
<span class="lineno"></span><span class="comment" id="3577660">//&nbsp;&nbsp;&nbsp;&nbspscheme://[userinfo@]host/path[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3577712">//</span><br>
<span class="lineno">220</span><span class="comment" id="3577715">//&nbsp;URLs&nbsp;that&nbsp;do&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;slash&nbsp;after&nbsp;the&nbsp;scheme&nbsp;are&nbsp;interpreted&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="3577791">//</span><br>
<span class="lineno"></span><span class="comment" id="3577794">//&nbsp;&nbsp;&nbsp;&nbspscheme:opaque[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3577830">//</span><br>
<span class="lineno"></span><span class="comment" id="3577833">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Path&nbsp;field&nbsp;is&nbsp;stored&nbsp;in&nbsp;decoded&nbsp;form:&nbsp;/%47%6f%2f&nbsp;becomes&nbsp;/Go/.</span><br>
<span class="lineno">225</span><span class="comment" id="3577913">//&nbsp;A&nbsp;consequence&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;tell&nbsp;which&nbsp;slashes&nbsp;in&nbsp;the&nbsp;Path&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="3577994">//&nbsp;slashes&nbsp;in&nbsp;the&nbsp;raw&nbsp;URL&nbsp;and&nbsp;which&nbsp;were&nbsp;%2f.&nbsp;This&nbsp;distinction&nbsp;is&nbsp;rarely&nbsp;important,</span><br>
<span class="lineno"></span><span class="comment" id="3578078">//&nbsp;but&nbsp;when&nbsp;it&nbsp;is&nbsp;a&nbsp;client&nbsp;must&nbsp;use&nbsp;other&nbsp;routines&nbsp;to&nbsp;parse&nbsp;the&nbsp;raw&nbsp;URL&nbsp;or&nbsp;construct</span><br>
<span class="lineno"></span><span class="comment" id="3578163">//&nbsp;the&nbsp;parsed&nbsp;URL.&nbsp;For&nbsp;example,&nbsp;an&nbsp;HTTP&nbsp;server&nbsp;can&nbsp;consult&nbsp;req.RequestURI,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3578242">//&nbsp;an&nbsp;HTTP&nbsp;client&nbsp;can&nbsp;use&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Opaque:&nbsp;&#34;//example.com/Go%2f&#34;}</span><br>
<span class="lineno">230</span><span class="comment" id="3578324">//&nbsp;instead&nbsp;of&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Path:&nbsp;&#34;/Go/&#34;}.</span><br>
<span class="lineno"></span><span class="keyword" id="3578378">type</span>&nbsp;<span class="ident" id="3578383">URL</span>&nbsp;<span class="keyword" id="3578387">struct</span>&nbsp;<span class="op" id="3578394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578397">Scheme</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3578406">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578414">Opaque</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3578423">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3578433">//&nbsp;encoded&nbsp;opaque&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578457">User</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578466">*</span><span class="ident" id="3578467"><a href="/net/url/url.go.html#3579592">Userinfo</a></span>&nbsp;<span class="comment" id="3578476">//&nbsp;username&nbsp;and&nbsp;password&nbsp;information</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578514">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3578523">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3578533">//&nbsp;host&nbsp;or&nbsp;host:port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578555">Path</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3578564">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578572">RawQuery</span>&nbsp;<span class="builtintype" id="3578581">string</span>&nbsp;<span class="comment" id="3578588">//&nbsp;encoded&nbsp;query&nbsp;values,&nbsp;without&nbsp;&#39;?&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3578626">Fragment</span>&nbsp;<span class="builtintype" id="3578635">string</span>&nbsp;<span class="comment" id="3578642">//&nbsp;fragment&nbsp;for&nbsp;references,&nbsp;without&nbsp;&#39;#&#39;</span><br>
<span class="lineno"></span><span class="op" id="3578682">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="comment" id="3578685">//&nbsp;User&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3578745">//&nbsp;and&nbsp;no&nbsp;password&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3578769">func</span>&nbsp;<span class="ident" id="3578774">User</span><span class="op" id="3578778">(</span><span class="ident" id="3578779">username</span>&nbsp;<span class="builtintype" id="3578788">string</span><span class="op" id="3578794">)</span>&nbsp;<span class="op" id="3578796">*</span><span class="ident" id="3578797"><a href="/net/url/url.go.html#3579592">Userinfo</a></span>&nbsp;<span class="op" id="3578806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3578809">return</span>&nbsp;<span class="op" id="3578816">&amp;</span><span class="ident" id="3578817"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3578825">{</span><span class="ident" id="3578826"><a href="/net/url/url.go.html#3578779">username</a></span><span class="op" id="3578834">,</span>&nbsp;<span class="string" id="3578836">&#34;&#34;</span><span class="op" id="3578838">,</span>&nbsp;<span class="builtintype" id="3578840">false</span><span class="op" id="3578845">}</span><br>
<span class="lineno">245</span><span class="op" id="3578847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3578850">//&nbsp;UserPassword&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3578918">//&nbsp;and&nbsp;password.</span><br>
<span class="lineno"></span><span class="comment" id="3578935">//&nbsp;This&nbsp;functionality&nbsp;should&nbsp;only&nbsp;be&nbsp;used&nbsp;with&nbsp;legacy&nbsp;web&nbsp;sites.</span><br>
<span class="lineno">250</span><span class="comment" id="3579000">//&nbsp;RFC&nbsp;2396&nbsp;warns&nbsp;that&nbsp;interpreting&nbsp;Userinfo&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="3579054">//&nbsp;``is&nbsp;NOT&nbsp;RECOMMENDED,&nbsp;because&nbsp;the&nbsp;passing&nbsp;of&nbsp;authentication</span><br>
<span class="lineno"></span><span class="comment" id="3579117">//&nbsp;information&nbsp;in&nbsp;clear&nbsp;text&nbsp;(such&nbsp;as&nbsp;URI)&nbsp;has&nbsp;proven&nbsp;to&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3579179">//&nbsp;security&nbsp;risk&nbsp;in&nbsp;almost&nbsp;every&nbsp;case&nbsp;where&nbsp;it&nbsp;has&nbsp;been&nbsp;used.&#39;&#39;</span><br>
<span class="lineno"></span><span class="keyword" id="3579243">func</span>&nbsp;<span class="ident" id="3579248">UserPassword</span><span class="op" id="3579260">(</span><span class="ident" id="3579261">username</span><span class="op" id="3579269">,</span>&nbsp;<span class="ident" id="3579271">password</span>&nbsp;<span class="builtintype" id="3579280">string</span><span class="op" id="3579286">)</span>&nbsp;<span class="op" id="3579288">*</span><span class="ident" id="3579289"><a href="/net/url/url.go.html#3579592">Userinfo</a></span>&nbsp;<span class="op" id="3579298">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3579301">return</span>&nbsp;<span class="op" id="3579308">&amp;</span><span class="ident" id="3579309"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3579317">{</span><span class="ident" id="3579318"><a href="/net/url/url.go.html#3579261">username</a></span><span class="op" id="3579326">,</span>&nbsp;<span class="ident" id="3579328"><a href="/net/url/url.go.html#3579271">password</a></span><span class="op" id="3579336">,</span>&nbsp;<span class="builtintype" id="3579338">true</span><span class="op" id="3579342">}</span><br>
<span class="lineno"></span><span class="op" id="3579344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579347">//&nbsp;The&nbsp;Userinfo&nbsp;type&nbsp;is&nbsp;an&nbsp;immutable&nbsp;encapsulation&nbsp;of&nbsp;username&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3579414">//&nbsp;password&nbsp;details&nbsp;for&nbsp;a&nbsp;URL.&nbsp;An&nbsp;existing&nbsp;Userinfo&nbsp;value&nbsp;is&nbsp;guaranteed</span><br>
<span class="lineno">260</span><span class="comment" id="3579486">//&nbsp;to&nbsp;have&nbsp;a&nbsp;username&nbsp;set&nbsp;(potentially&nbsp;empty,&nbsp;as&nbsp;allowed&nbsp;by&nbsp;RFC&nbsp;2396),</span><br>
<span class="lineno"></span><span class="comment" id="3579557">//&nbsp;and&nbsp;optionally&nbsp;a&nbsp;password.</span><br>
<span class="lineno"></span><span class="keyword" id="3579587">type</span>&nbsp;<span class="ident" id="3579592">Userinfo</span>&nbsp;<span class="keyword" id="3579601">struct</span>&nbsp;<span class="op" id="3579608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3579611">username</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3579623">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3579631">password</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3579643">string</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3579651">passwordSet</span>&nbsp;<span class="builtintype" id="3579663">bool</span><br>
<span class="lineno"></span><span class="op" id="3579668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579671">//&nbsp;Username&nbsp;returns&nbsp;the&nbsp;username.</span><br>
<span class="lineno"></span><span class="keyword" id="3579705">func</span>&nbsp;<span class="op" id="3579710">(</span><span class="ident" id="3579711">u</span>&nbsp;<span class="op" id="3579713">*</span><span class="ident" id="3579714"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3579722">)</span>&nbsp;<span class="ident" id="3579724">Username</span><span class="op" id="3579732">(</span><span class="op" id="3579733">)</span>&nbsp;<span class="builtintype" id="3579735">string</span>&nbsp;<span class="op" id="3579742">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3579745">return</span>&nbsp;<span class="ident" id="3579752"><a href="/net/url/url.go.html#3579711">u</a></span><span class="op" id="3579753">.</span><span class="ident" id="3579754">username</span><br>
<span class="lineno"></span><span class="op" id="3579763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579766">//&nbsp;Password&nbsp;returns&nbsp;the&nbsp;password&nbsp;in&nbsp;case&nbsp;it&nbsp;is&nbsp;set,&nbsp;and&nbsp;whether&nbsp;it&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3579841">func</span>&nbsp;<span class="op" id="3579846">(</span><span class="ident" id="3579847">u</span>&nbsp;<span class="op" id="3579849">*</span><span class="ident" id="3579850"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3579858">)</span>&nbsp;<span class="ident" id="3579860">Password</span><span class="op" id="3579868">(</span><span class="op" id="3579869">)</span>&nbsp;<span class="op" id="3579871">(</span><span class="builtintype" id="3579872">string</span><span class="op" id="3579878">,</span>&nbsp;<span class="builtintype" id="3579880">bool</span><span class="op" id="3579884">)</span>&nbsp;<span class="op" id="3579886">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3579889">if</span>&nbsp;<span class="ident" id="3579892"><a href="/net/url/url.go.html#3579847">u</a></span><span class="op" id="3579893">.</span><span class="ident" id="3579894">passwordSet</span>&nbsp;<span class="op" id="3579906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3579910">return</span>&nbsp;<span class="ident" id="3579917"><a href="/net/url/url.go.html#3579847">u</a></span><span class="op" id="3579918">.</span><span class="ident" id="3579919">password</span><span class="op" id="3579927">,</span>&nbsp;<span class="builtintype" id="3579929">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3579935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3579938">return</span>&nbsp;<span class="string" id="3579945">&#34;&#34;</span><span class="op" id="3579947">,</span>&nbsp;<span class="builtintype" id="3579949">false</span><br>
<span class="lineno"></span><span class="op" id="3579955">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="3579958">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;userinfo&nbsp;information&nbsp;in&nbsp;the&nbsp;standard&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3580030">//&nbsp;of&nbsp;&#34;username[:password]&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3580059">func</span>&nbsp;<span class="op" id="3580064">(</span><span class="ident" id="3580065">u</span>&nbsp;<span class="op" id="3580067">*</span><span class="ident" id="3580068"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3580076">)</span>&nbsp;<span class="ident" id="3580078">String</span><span class="op" id="3580084">(</span><span class="op" id="3580085">)</span>&nbsp;<span class="builtintype" id="3580087">string</span>&nbsp;<span class="op" id="3580094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3580097">s</span>&nbsp;<span class="op" id="3580099">:=</span>&nbsp;<span class="ident" id="3580102"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3580108">(</span><span class="ident" id="3580109"><a href="/net/url/url.go.html#3580065">u</a></span><span class="op" id="3580110">.</span><span class="ident" id="3580111">username</span><span class="op" id="3580119">,</span>&nbsp;<span class="ident" id="3580121"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3580139">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580142">if</span>&nbsp;<span class="ident" id="3580145"><a href="/net/url/url.go.html#3580065">u</a></span><span class="op" id="3580146">.</span><span class="ident" id="3580147">passwordSet</span>&nbsp;<span class="op" id="3580159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3580163"><a href="/net/url/url.go.html#3580097">s</a></span>&nbsp;<span class="op" id="3580165">+=</span>&nbsp;<span class="string" id="3580168">&#34;:&#34;</span>&nbsp;<span class="op" id="3580172">+</span>&nbsp;<span class="ident" id="3580174"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3580180">(</span><span class="ident" id="3580181"><a href="/net/url/url.go.html#3580065">u</a></span><span class="op" id="3580182">.</span><span class="ident" id="3580183">password</span><span class="op" id="3580191">,</span>&nbsp;<span class="ident" id="3580193"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3580211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3580214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580217">return</span>&nbsp;<span class="ident" id="3580224"><a href="/net/url/url.go.html#3580097">s</a></span><br>
<span class="lineno"></span><span class="op" id="3580226">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3580229">//&nbsp;Maybe&nbsp;rawurl&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;scheme:path.</span><br>
<span class="lineno"></span><span class="comment" id="3580273">//&nbsp;(Scheme&nbsp;must&nbsp;be&nbsp;[a-zA-Z][a-zA-Z0-9+-.]*)</span><br>
<span class="lineno"></span><span class="comment" id="3580317">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;scheme,&nbsp;path;&nbsp;else&nbsp;return&nbsp;&#34;&#34;,&nbsp;rawurl.</span><br>
<span class="lineno"></span><span class="keyword" id="3580372">func</span>&nbsp;<span class="ident" id="3580377">getscheme</span><span class="op" id="3580386">(</span><span class="ident" id="3580387">rawurl</span>&nbsp;<span class="builtintype" id="3580394">string</span><span class="op" id="3580400">)</span>&nbsp;<span class="op" id="3580402">(</span><span class="ident" id="3580403">scheme</span><span class="op" id="3580409">,</span>&nbsp;<span class="ident" id="3580411">path</span>&nbsp;<span class="builtintype" id="3580416">string</span><span class="op" id="3580422">,</span>&nbsp;<span class="ident" id="3580424">err</span>&nbsp;<span class="builtintype" id="3580428">error</span><span class="op" id="3580433">)</span>&nbsp;<span class="op" id="3580435">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580438">for</span>&nbsp;<span class="ident" id="3580442">i</span>&nbsp;<span class="op" id="3580444">:=</span>&nbsp;<span class="num" id="3580447">0</span><span class="op" id="3580448">;</span>&nbsp;<span class="ident" id="3580450"><a href="/net/url/url.go.html#3580442">i</a></span>&nbsp;<span class="op" id="3580452">&lt;</span>&nbsp;<span class="builtinfunc" id="3580454">len</span><span class="op" id="3580457">(</span><span class="ident" id="3580458"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580464">)</span><span class="op" id="3580465">;</span>&nbsp;<span class="ident" id="3580467"><a href="/net/url/url.go.html#3580442">i</a></span><span class="op" id="3580468">++</span>&nbsp;<span class="op" id="3580471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3580475">c</span>&nbsp;<span class="op" id="3580477">:=</span>&nbsp;<span class="ident" id="3580480"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580486">[</span><span class="ident" id="3580487"><a href="/net/url/url.go.html#3580442">i</a></span><span class="op" id="3580488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580492">switch</span>&nbsp;<span class="op" id="3580499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580503">case</span>&nbsp;<span class="string" id="3580508">&#39;a&#39;</span>&nbsp;<span class="op" id="3580512">&lt;=</span>&nbsp;<span class="ident" id="3580515"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580517">&amp;&amp;</span>&nbsp;<span class="ident" id="3580520"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580522">&lt;=</span>&nbsp;<span class="string" id="3580525">&#39;z&#39;</span>&nbsp;<span class="op" id="3580529">||</span>&nbsp;<span class="string" id="3580532">&#39;A&#39;</span>&nbsp;<span class="op" id="3580536">&lt;=</span>&nbsp;<span class="ident" id="3580539"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580541">&amp;&amp;</span>&nbsp;<span class="ident" id="3580544"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580546">&lt;=</span>&nbsp;<span class="string" id="3580549">&#39;Z&#39;</span><span class="op" id="3580552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3580556">//&nbsp;do&nbsp;nothing</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580572">case</span>&nbsp;<span class="string" id="3580577">&#39;0&#39;</span>&nbsp;<span class="op" id="3580581">&lt;=</span>&nbsp;<span class="ident" id="3580584"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580586">&amp;&amp;</span>&nbsp;<span class="ident" id="3580589"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580591">&lt;=</span>&nbsp;<span class="string" id="3580594">&#39;9&#39;</span>&nbsp;<span class="op" id="3580598">||</span>&nbsp;<span class="ident" id="3580601"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580603">==</span>&nbsp;<span class="string" id="3580606">&#39;+&#39;</span>&nbsp;<span class="op" id="3580610">||</span>&nbsp;<span class="ident" id="3580613"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580615">==</span>&nbsp;<span class="string" id="3580618">&#39;-&#39;</span>&nbsp;<span class="op" id="3580622">||</span>&nbsp;<span class="ident" id="3580625"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580627">==</span>&nbsp;<span class="string" id="3580630">&#39;.&#39;</span><span class="op" id="3580633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580638">if</span>&nbsp;<span class="ident" id="3580641"><a href="/net/url/url.go.html#3580442">i</a></span>&nbsp;<span class="op" id="3580643">==</span>&nbsp;<span class="num" id="3580646">0</span>&nbsp;<span class="op" id="3580648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580654">return</span>&nbsp;<span class="string" id="3580661">&#34;&#34;</span><span class="op" id="3580663">,</span>&nbsp;<span class="ident" id="3580665"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580671">,</span>&nbsp;<span class="ident" id="3580673">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3580680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580684">case</span>&nbsp;<span class="ident" id="3580689"><a href="/net/url/url.go.html#3580475">c</a></span>&nbsp;<span class="op" id="3580691">==</span>&nbsp;<span class="string" id="3580694">&#39;:&#39;</span><span class="op" id="3580697">:</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580702">if</span>&nbsp;<span class="ident" id="3580705"><a href="/net/url/url.go.html#3580442">i</a></span>&nbsp;<span class="op" id="3580707">==</span>&nbsp;<span class="num" id="3580710">0</span>&nbsp;<span class="op" id="3580712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580718">return</span>&nbsp;<span class="string" id="3580725">&#34;&#34;</span><span class="op" id="3580727">,</span>&nbsp;<span class="string" id="3580729">&#34;&#34;</span><span class="op" id="3580731">,</span>&nbsp;<span class="ident" id="3580733"><a href="/net/url/url.go.html#3573136">errors</a></span><span class="op" id="3580739">.</span><span class="ident" id="3580740">New</span><span class="op" id="3580743">(</span><span class="string" id="3580744">&#34;missing&nbsp;protocol&nbsp;scheme&#34;</span><span class="op" id="3580769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3580774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580779">return</span>&nbsp;<span class="ident" id="3580786"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580792">[</span><span class="num" id="3580793">0</span><span class="op" id="3580794">:</span><span class="ident" id="3580795"><a href="/net/url/url.go.html#3580442">i</a></span><span class="op" id="3580796">]</span><span class="op" id="3580797">,</span>&nbsp;<span class="ident" id="3580799"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580805">[</span><span class="ident" id="3580806"><a href="/net/url/url.go.html#3580442">i</a></span><span class="op" id="3580807">+</span><span class="num" id="3580808">1</span><span class="op" id="3580809">:</span><span class="op" id="3580810">]</span><span class="op" id="3580811">,</span>&nbsp;<span class="ident" id="3580813">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580819">default</span><span class="op" id="3580826">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3580831">//&nbsp;we&nbsp;have&nbsp;encountered&nbsp;an&nbsp;invalid&nbsp;character,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3580879">//&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;valid&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580913">return</span>&nbsp;<span class="string" id="3580920">&#34;&#34;</span><span class="op" id="3580922">,</span>&nbsp;<span class="ident" id="3580924"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580930">,</span>&nbsp;<span class="ident" id="3580932">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3580938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3580941">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3580944">return</span>&nbsp;<span class="string" id="3580951">&#34;&#34;</span><span class="op" id="3580953">,</span>&nbsp;<span class="ident" id="3580955"><a href="/net/url/url.go.html#3580387">rawurl</a></span><span class="op" id="3580961">,</span>&nbsp;<span class="ident" id="3580963">nil</span><br>
<span class="lineno"></span><span class="op" id="3580967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3580970">//&nbsp;Maybe&nbsp;s&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;t&nbsp;c&nbsp;u.</span><br>
<span class="lineno"></span><span class="comment" id="3581003">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;t,&nbsp;c&nbsp;u&nbsp;(or&nbsp;t,&nbsp;u&nbsp;if&nbsp;cutc&nbsp;==&nbsp;true).</span><br>
<span class="lineno">320</span><span class="comment" id="3581054">//&nbsp;If&nbsp;not,&nbsp;return&nbsp;s,&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3581079">func</span>&nbsp;<span class="ident" id="3581084">split</span><span class="op" id="3581089">(</span><span class="ident" id="3581090">s</span>&nbsp;<span class="builtintype" id="3581092">string</span><span class="op" id="3581098">,</span>&nbsp;<span class="ident" id="3581100">c</span>&nbsp;<span class="builtintype" id="3581102">string</span><span class="op" id="3581108">,</span>&nbsp;<span class="ident" id="3581110">cutc</span>&nbsp;<span class="builtintype" id="3581115">bool</span><span class="op" id="3581119">)</span>&nbsp;<span class="op" id="3581121">(</span><span class="builtintype" id="3581122">string</span><span class="op" id="3581128">,</span>&nbsp;<span class="builtintype" id="3581130">string</span><span class="op" id="3581136">)</span>&nbsp;<span class="op" id="3581138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3581141">i</span>&nbsp;<span class="op" id="3581143">:=</span>&nbsp;<span class="ident" id="3581146"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3581153">.</span><span class="ident" id="3581154">Index</span><span class="op" id="3581159">(</span><span class="ident" id="3581160"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581161">,</span>&nbsp;<span class="ident" id="3581163"><a href="/net/url/url.go.html#3581100">c</a></span><span class="op" id="3581164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581167">if</span>&nbsp;<span class="ident" id="3581170"><a href="/net/url/url.go.html#3581141">i</a></span>&nbsp;<span class="op" id="3581172">&lt;</span>&nbsp;<span class="num" id="3581174">0</span>&nbsp;<span class="op" id="3581176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581180">return</span>&nbsp;<span class="ident" id="3581187"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581188">,</span>&nbsp;<span class="string" id="3581190">&#34;&#34;</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3581194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581197">if</span>&nbsp;<span class="ident" id="3581200"><a href="/net/url/url.go.html#3581110">cutc</a></span>&nbsp;<span class="op" id="3581205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581209">return</span>&nbsp;<span class="ident" id="3581216"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581217">[</span><span class="num" id="3581218">0</span><span class="op" id="3581219">:</span><span class="ident" id="3581220"><a href="/net/url/url.go.html#3581141">i</a></span><span class="op" id="3581221">]</span><span class="op" id="3581222">,</span>&nbsp;<span class="ident" id="3581224"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581225">[</span><span class="ident" id="3581226"><a href="/net/url/url.go.html#3581141">i</a></span><span class="op" id="3581227">+</span><span class="builtinfunc" id="3581228">len</span><span class="op" id="3581231">(</span><span class="ident" id="3581232"><a href="/net/url/url.go.html#3581100">c</a></span><span class="op" id="3581233">)</span><span class="op" id="3581234">:</span><span class="op" id="3581235">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3581238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581241">return</span>&nbsp;<span class="ident" id="3581248"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581249">[</span><span class="num" id="3581250">0</span><span class="op" id="3581251">:</span><span class="ident" id="3581252"><a href="/net/url/url.go.html#3581141">i</a></span><span class="op" id="3581253">]</span><span class="op" id="3581254">,</span>&nbsp;<span class="ident" id="3581256"><a href="/net/url/url.go.html#3581090">s</a></span><span class="op" id="3581257">[</span><span class="ident" id="3581258"><a href="/net/url/url.go.html#3581141">i</a></span><span class="op" id="3581259">:</span><span class="op" id="3581260">]</span><br>
<span class="lineno">330</span><span class="op" id="3581262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581265">//&nbsp;Parse&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="3581310">//&nbsp;The&nbsp;rawurl&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3581353">func</span>&nbsp;<span class="ident" id="3581358">Parse</span><span class="op" id="3581363">(</span><span class="ident" id="3581364">rawurl</span>&nbsp;<span class="builtintype" id="3581371">string</span><span class="op" id="3581377">)</span>&nbsp;<span class="op" id="3581379">(</span><span class="ident" id="3581380">url</span>&nbsp;<span class="op" id="3581384">*</span><span class="ident" id="3581385"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3581388">,</span>&nbsp;<span class="ident" id="3581390">err</span>&nbsp;<span class="builtintype" id="3581394">error</span><span class="op" id="3581399">)</span>&nbsp;<span class="op" id="3581401">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3581404">//&nbsp;Cut&nbsp;off&nbsp;#frag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3581422">u</span><span class="op" id="3581423">,</span>&nbsp;<span class="ident" id="3581425">frag</span>&nbsp;<span class="op" id="3581430">:=</span>&nbsp;<span class="ident" id="3581433"><a href="/net/url/url.go.html#3581084">split</a></span><span class="op" id="3581438">(</span><span class="ident" id="3581439"><a href="/net/url/url.go.html#3581364">rawurl</a></span><span class="op" id="3581445">,</span>&nbsp;<span class="string" id="3581447">&#34;#&#34;</span><span class="op" id="3581450">,</span>&nbsp;<span class="builtintype" id="3581452">true</span><span class="op" id="3581456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581459">if</span>&nbsp;<span class="ident" id="3581462"><a href="/net/url/url.go.html#3581380">url</a></span><span class="op" id="3581465">,</span>&nbsp;<span class="ident" id="3581467"><a href="/net/url/url.go.html#3581390">err</a></span>&nbsp;<span class="op" id="3581471">=</span>&nbsp;<span class="ident" id="3581473"><a href="/net/url/url.go.html#3582413">parse</a></span><span class="op" id="3581478">(</span><span class="ident" id="3581479"><a href="/net/url/url.go.html#3581422">u</a></span><span class="op" id="3581480">,</span>&nbsp;<span class="builtintype" id="3581482">false</span><span class="op" id="3581487">)</span><span class="op" id="3581488">;</span>&nbsp;<span class="ident" id="3581490"><a href="/net/url/url.go.html#3581390">err</a></span>&nbsp;<span class="op" id="3581494">!=</span>&nbsp;<span class="ident" id="3581497">nil</span>&nbsp;<span class="op" id="3581501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581505">return</span>&nbsp;<span class="ident" id="3581512">nil</span><span class="op" id="3581515">,</span>&nbsp;<span class="ident" id="3581517"><a href="/net/url/url.go.html#3581390">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3581522">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581525">if</span>&nbsp;<span class="ident" id="3581528"><a href="/net/url/url.go.html#3581425">frag</a></span>&nbsp;<span class="op" id="3581533">==</span>&nbsp;<span class="string" id="3581536">&#34;&#34;</span>&nbsp;<span class="op" id="3581539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581543">return</span>&nbsp;<span class="ident" id="3581550"><a href="/net/url/url.go.html#3581380">url</a></span><span class="op" id="3581553">,</span>&nbsp;<span class="ident" id="3581555">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3581560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581563">if</span>&nbsp;<span class="ident" id="3581566"><a href="/net/url/url.go.html#3581380">url</a></span><span class="op" id="3581569">.</span><span class="ident" id="3581570">Fragment</span><span class="op" id="3581578">,</span>&nbsp;<span class="ident" id="3581580"><a href="/net/url/url.go.html#3581390">err</a></span>&nbsp;<span class="op" id="3581584">=</span>&nbsp;<span class="ident" id="3581586"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3581594">(</span><span class="ident" id="3581595"><a href="/net/url/url.go.html#3581425">frag</a></span><span class="op" id="3581599">,</span>&nbsp;<span class="ident" id="3581601"><a href="/net/url/url.go.html#3573870">encodeFragment</a></span><span class="op" id="3581615">)</span><span class="op" id="3581616">;</span>&nbsp;<span class="ident" id="3581618"><a href="/net/url/url.go.html#3581390">err</a></span>&nbsp;<span class="op" id="3581622">!=</span>&nbsp;<span class="ident" id="3581625">nil</span>&nbsp;<span class="op" id="3581629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581633">return</span>&nbsp;<span class="ident" id="3581640">nil</span><span class="op" id="3581643">,</span>&nbsp;<span class="op" id="3581645">&amp;</span><span class="ident" id="3581646"><a href="/net/url/url.go.html#3573251">Error</a></span><span class="op" id="3581651">{</span><span class="string" id="3581652">&#34;parse&#34;</span><span class="op" id="3581659">,</span>&nbsp;<span class="ident" id="3581661"><a href="/net/url/url.go.html#3581364">rawurl</a></span><span class="op" id="3581667">,</span>&nbsp;<span class="ident" id="3581669"><a href="/net/url/url.go.html#3581390">err</a></span><span class="op" id="3581672">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3581675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3581678">return</span>&nbsp;<span class="ident" id="3581685"><a href="/net/url/url.go.html#3581380">url</a></span><span class="op" id="3581688">,</span>&nbsp;<span class="ident" id="3581690">nil</span><br>
<span class="lineno"></span><span class="op" id="3581694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581697">//&nbsp;ParseRequestURI&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.&nbsp;&nbsp;It&nbsp;assumes&nbsp;that</span><br>
<span class="lineno">350</span><span class="comment" id="3581769">//&nbsp;rawurl&nbsp;was&nbsp;received&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request,&nbsp;so&nbsp;the&nbsp;rawurl&nbsp;is&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="3581841">//&nbsp;only&nbsp;as&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;or&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3581889">//&nbsp;The&nbsp;string&nbsp;rawurl&nbsp;is&nbsp;assumed&nbsp;not&nbsp;to&nbsp;have&nbsp;a&nbsp;#fragment&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="comment" id="3581953">//&nbsp;(Web&nbsp;browsers&nbsp;strip&nbsp;#fragment&nbsp;before&nbsp;sending&nbsp;the&nbsp;URL&nbsp;to&nbsp;a&nbsp;web&nbsp;server.)</span><br>
<span class="lineno"></span><span class="keyword" id="3582027">func</span>&nbsp;<span class="ident" id="3582032">ParseRequestURI</span><span class="op" id="3582047">(</span><span class="ident" id="3582048">rawurl</span>&nbsp;<span class="builtintype" id="3582055">string</span><span class="op" id="3582061">)</span>&nbsp;<span class="op" id="3582063">(</span><span class="ident" id="3582064">url</span>&nbsp;<span class="op" id="3582068">*</span><span class="ident" id="3582069"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3582072">,</span>&nbsp;<span class="ident" id="3582074">err</span>&nbsp;<span class="builtintype" id="3582078">error</span><span class="op" id="3582083">)</span>&nbsp;<span class="op" id="3582085">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582088">return</span>&nbsp;<span class="ident" id="3582095"><a href="/net/url/url.go.html#3582413">parse</a></span><span class="op" id="3582100">(</span><span class="ident" id="3582101"><a href="/net/url/url.go.html#3582048">rawurl</a></span><span class="op" id="3582107">,</span>&nbsp;<span class="builtintype" id="3582109">true</span><span class="op" id="3582113">)</span><br>
<span class="lineno"></span><span class="op" id="3582115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3582118">//&nbsp;parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;from&nbsp;a&nbsp;string&nbsp;in&nbsp;one&nbsp;of&nbsp;two&nbsp;contexts.&nbsp;&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="3582182">//&nbsp;viaRequest&nbsp;is&nbsp;true,&nbsp;the&nbsp;URL&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;arrived&nbsp;via&nbsp;an&nbsp;HTTP&nbsp;request,</span><br>
<span class="lineno">360</span><span class="comment" id="3582261">//&nbsp;in&nbsp;which&nbsp;case&nbsp;only&nbsp;absolute&nbsp;URLs&nbsp;or&nbsp;path-absolute&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="comment" id="3582341">//&nbsp;If&nbsp;viaRequest&nbsp;is&nbsp;false,&nbsp;all&nbsp;forms&nbsp;of&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="keyword" id="3582408">func</span>&nbsp;<span class="ident" id="3582413">parse</span><span class="op" id="3582418">(</span><span class="ident" id="3582419">rawurl</span>&nbsp;<span class="builtintype" id="3582426">string</span><span class="op" id="3582432">,</span>&nbsp;<span class="ident" id="3582434">viaRequest</span>&nbsp;<span class="builtintype" id="3582445">bool</span><span class="op" id="3582449">)</span>&nbsp;<span class="op" id="3582451">(</span><span class="ident" id="3582452">url</span>&nbsp;<span class="op" id="3582456">*</span><span class="ident" id="3582457"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3582460">,</span>&nbsp;<span class="ident" id="3582462">err</span>&nbsp;<span class="builtintype" id="3582466">error</span><span class="op" id="3582471">)</span>&nbsp;<span class="op" id="3582473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582476">var</span>&nbsp;<span class="ident" id="3582480">rest</span>&nbsp;<span class="builtintype" id="3582485">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582494">if</span>&nbsp;<span class="ident" id="3582497"><a href="/net/url/url.go.html#3582419">rawurl</a></span>&nbsp;<span class="op" id="3582504">==</span>&nbsp;<span class="string" id="3582507">&#34;&#34;</span>&nbsp;<span class="op" id="3582510">&amp;&amp;</span>&nbsp;<span class="ident" id="3582513"><a href="/net/url/url.go.html#3582434">viaRequest</a></span>&nbsp;<span class="op" id="3582524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3582528"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3582532">=</span>&nbsp;<span class="ident" id="3582534"><a href="/net/url/url.go.html#3573136">errors</a></span><span class="op" id="3582540">.</span><span class="ident" id="3582541">New</span><span class="op" id="3582544">(</span><span class="string" id="3582545">&#34;empty&nbsp;url&#34;</span><span class="op" id="3582556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582560">goto</span>&nbsp;<span class="ident" id="3582565">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3582572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3582575"><a href="/net/url/url.go.html#3582452">url</a></span>&nbsp;<span class="op" id="3582579">=</span>&nbsp;<span class="builtinfunc" id="3582581">new</span><span class="op" id="3582584">(</span><span class="ident" id="3582585"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3582588">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582592">if</span>&nbsp;<span class="ident" id="3582595"><a href="/net/url/url.go.html#3582419">rawurl</a></span>&nbsp;<span class="op" id="3582602">==</span>&nbsp;<span class="string" id="3582605">&#34;*&#34;</span>&nbsp;<span class="op" id="3582609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3582613"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582616">.</span><span class="ident" id="3582617">Path</span>&nbsp;<span class="op" id="3582622">=</span>&nbsp;<span class="string" id="3582624">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3582638">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3582642">//&nbsp;Split&nbsp;off&nbsp;possible&nbsp;leading&nbsp;&#34;http:&#34;,&nbsp;&#34;mailto:&#34;,&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3582698">//&nbsp;Cannot&nbsp;contain&nbsp;escaped&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582737">if</span>&nbsp;<span class="ident" id="3582740"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582743">.</span><span class="ident" id="3582744">Scheme</span><span class="op" id="3582750">,</span>&nbsp;<span class="ident" id="3582752"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3582756">,</span>&nbsp;<span class="ident" id="3582758"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3582762">=</span>&nbsp;<span class="ident" id="3582764"><a href="/net/url/url.go.html#3580377">getscheme</a></span><span class="op" id="3582773">(</span><span class="ident" id="3582774"><a href="/net/url/url.go.html#3582419">rawurl</a></span><span class="op" id="3582780">)</span><span class="op" id="3582781">;</span>&nbsp;<span class="ident" id="3582783"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3582787">!=</span>&nbsp;<span class="ident" id="3582790">nil</span>&nbsp;<span class="op" id="3582794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582798">goto</span>&nbsp;<span class="ident" id="3582803">Error</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3582810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3582813"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582816">.</span><span class="ident" id="3582817">Scheme</span>&nbsp;<span class="op" id="3582824">=</span>&nbsp;<span class="ident" id="3582826"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3582833">.</span><span class="ident" id="3582834">ToLower</span><span class="op" id="3582841">(</span><span class="ident" id="3582842"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582845">.</span><span class="ident" id="3582846">Scheme</span><span class="op" id="3582852">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3582856"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3582860">,</span>&nbsp;<span class="ident" id="3582862"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582865">.</span><span class="ident" id="3582866">RawQuery</span>&nbsp;<span class="op" id="3582875">=</span>&nbsp;<span class="ident" id="3582877"><a href="/net/url/url.go.html#3581084">split</a></span><span class="op" id="3582882">(</span><span class="ident" id="3582883"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3582887">,</span>&nbsp;<span class="string" id="3582889">&#34;?&#34;</span><span class="op" id="3582892">,</span>&nbsp;<span class="builtintype" id="3582894">true</span><span class="op" id="3582898">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582902">if</span>&nbsp;<span class="op" id="3582905">!</span><span class="ident" id="3582906"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3582913">.</span><span class="ident" id="3582914">HasPrefix</span><span class="op" id="3582923">(</span><span class="ident" id="3582924"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3582928">,</span>&nbsp;<span class="string" id="3582930">&#34;/&#34;</span><span class="op" id="3582933">)</span>&nbsp;<span class="op" id="3582935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3582939">if</span>&nbsp;<span class="ident" id="3582942"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3582945">.</span><span class="ident" id="3582946">Scheme</span>&nbsp;<span class="op" id="3582953">!=</span>&nbsp;<span class="string" id="3582956">&#34;&#34;</span>&nbsp;<span class="op" id="3582959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3582964">//&nbsp;We&nbsp;consider&nbsp;rootless&nbsp;paths&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;as&nbsp;opaque.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583021"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583024">.</span><span class="ident" id="3583025">Opaque</span>&nbsp;<span class="op" id="3583032">=</span>&nbsp;<span class="ident" id="3583034"><a href="/net/url/url.go.html#3582480">rest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583042">return</span>&nbsp;<span class="ident" id="3583049"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583052">,</span>&nbsp;<span class="ident" id="3583054">nil</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583064">if</span>&nbsp;<span class="ident" id="3583067"><a href="/net/url/url.go.html#3582434">viaRequest</a></span>&nbsp;<span class="op" id="3583078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583083"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583087">=</span>&nbsp;<span class="ident" id="3583089"><a href="/net/url/url.go.html#3573136">errors</a></span><span class="op" id="3583095">.</span><span class="ident" id="3583096">New</span><span class="op" id="3583099">(</span><span class="string" id="3583100">&#34;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="3583125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583130">goto</span>&nbsp;<span class="ident" id="3583135">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583143">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583150">if</span>&nbsp;<span class="op" id="3583153">(</span><span class="ident" id="3583154"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583157">.</span><span class="ident" id="3583158">Scheme</span>&nbsp;<span class="op" id="3583165">!=</span>&nbsp;<span class="string" id="3583168">&#34;&#34;</span>&nbsp;<span class="op" id="3583171">||</span>&nbsp;<span class="op" id="3583174">!</span><span class="ident" id="3583175"><a href="/net/url/url.go.html#3582434">viaRequest</a></span>&nbsp;<span class="op" id="3583186">&amp;&amp;</span>&nbsp;<span class="op" id="3583189">!</span><span class="ident" id="3583190"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3583197">.</span><span class="ident" id="3583198">HasPrefix</span><span class="op" id="3583207">(</span><span class="ident" id="3583208"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3583212">,</span>&nbsp;<span class="string" id="3583214">&#34;///&#34;</span><span class="op" id="3583219">)</span><span class="op" id="3583220">)</span>&nbsp;<span class="op" id="3583222">&amp;&amp;</span>&nbsp;<span class="ident" id="3583225"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3583232">.</span><span class="ident" id="3583233">HasPrefix</span><span class="op" id="3583242">(</span><span class="ident" id="3583243"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3583247">,</span>&nbsp;<span class="string" id="3583249">&#34;//&#34;</span><span class="op" id="3583253">)</span>&nbsp;<span class="op" id="3583255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583259">var</span>&nbsp;<span class="ident" id="3583263">authority</span>&nbsp;<span class="builtintype" id="3583273">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583282"><a href="/net/url/url.go.html#3583263">authority</a></span><span class="op" id="3583291">,</span>&nbsp;<span class="ident" id="3583293"><a href="/net/url/url.go.html#3582480">rest</a></span>&nbsp;<span class="op" id="3583298">=</span>&nbsp;<span class="ident" id="3583300"><a href="/net/url/url.go.html#3581084">split</a></span><span class="op" id="3583305">(</span><span class="ident" id="3583306"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3583310">[</span><span class="num" id="3583311">2</span><span class="op" id="3583312">:</span><span class="op" id="3583313">]</span><span class="op" id="3583314">,</span>&nbsp;<span class="string" id="3583316">&#34;/&#34;</span><span class="op" id="3583319">,</span>&nbsp;<span class="builtintype" id="3583321">false</span><span class="op" id="3583326">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583330"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583333">.</span><span class="ident" id="3583334">User</span><span class="op" id="3583338">,</span>&nbsp;<span class="ident" id="3583340"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583343">.</span><span class="ident" id="3583344">Host</span><span class="op" id="3583348">,</span>&nbsp;<span class="ident" id="3583350"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583354">=</span>&nbsp;<span class="ident" id="3583356"><a href="/net/url/url.go.html#3583680">parseAuthority</a></span><span class="op" id="3583370">(</span><span class="ident" id="3583371"><a href="/net/url/url.go.html#3583263">authority</a></span><span class="op" id="3583380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583384">if</span>&nbsp;<span class="ident" id="3583387"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583391">!=</span>&nbsp;<span class="ident" id="3583394">nil</span>&nbsp;<span class="op" id="3583398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583403">goto</span>&nbsp;<span class="ident" id="3583408">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583420">if</span>&nbsp;<span class="ident" id="3583423"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3583430">.</span><span class="ident" id="3583431">Contains</span><span class="op" id="3583439">(</span><span class="ident" id="3583440"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583443">.</span><span class="ident" id="3583444">Host</span><span class="op" id="3583448">,</span>&nbsp;<span class="string" id="3583450">&#34;%&#34;</span><span class="op" id="3583453">)</span>&nbsp;<span class="op" id="3583455">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583460"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583464">=</span>&nbsp;<span class="ident" id="3583466"><a href="/net/url/url.go.html#3573136">errors</a></span><span class="op" id="3583472">.</span><span class="ident" id="3583473">New</span><span class="op" id="3583476">(</span><span class="string" id="3583477">&#34;hexadecimal&nbsp;escape&nbsp;in&nbsp;host&#34;</span><span class="op" id="3583505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583510">goto</span>&nbsp;<span class="ident" id="3583515">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583529">if</span>&nbsp;<span class="ident" id="3583532"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583535">.</span><span class="ident" id="3583536">Path</span><span class="op" id="3583540">,</span>&nbsp;<span class="ident" id="3583542"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583546">=</span>&nbsp;<span class="ident" id="3583548"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3583556">(</span><span class="ident" id="3583557"><a href="/net/url/url.go.html#3582480">rest</a></span><span class="op" id="3583561">,</span>&nbsp;<span class="ident" id="3583563"><a href="/net/url/url.go.html#3573796">encodePath</a></span><span class="op" id="3583573">)</span><span class="op" id="3583574">;</span>&nbsp;<span class="ident" id="3583576"><a href="/net/url/url.go.html#3582462">err</a></span>&nbsp;<span class="op" id="3583580">!=</span>&nbsp;<span class="ident" id="3583583">nil</span>&nbsp;<span class="op" id="3583587">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583591">goto</span>&nbsp;<span class="ident" id="3583596">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583606">return</span>&nbsp;<span class="ident" id="3583613"><a href="/net/url/url.go.html#3582452">url</a></span><span class="op" id="3583616">,</span>&nbsp;<span class="ident" id="3583618">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3583623">Error</span><span class="op" id="3583628">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583631">return</span>&nbsp;<span class="ident" id="3583638">nil</span><span class="op" id="3583641">,</span>&nbsp;<span class="op" id="3583643">&amp;</span><span class="ident" id="3583644"><a href="/net/url/url.go.html#3573251">Error</a></span><span class="op" id="3583649">{</span><span class="string" id="3583650">&#34;parse&#34;</span><span class="op" id="3583657">,</span>&nbsp;<span class="ident" id="3583659"><a href="/net/url/url.go.html#3582419">rawurl</a></span><span class="op" id="3583665">,</span>&nbsp;<span class="ident" id="3583667"><a href="/net/url/url.go.html#3582462">err</a></span><span class="op" id="3583670">}</span><br>
<span class="lineno"></span><span class="op" id="3583672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3583675">func</span>&nbsp;<span class="ident" id="3583680">parseAuthority</span><span class="op" id="3583694">(</span><span class="ident" id="3583695">authority</span>&nbsp;<span class="builtintype" id="3583705">string</span><span class="op" id="3583711">)</span>&nbsp;<span class="op" id="3583713">(</span><span class="ident" id="3583714">user</span>&nbsp;<span class="op" id="3583719">*</span><span class="ident" id="3583720"><a href="/net/url/url.go.html#3579592">Userinfo</a></span><span class="op" id="3583728">,</span>&nbsp;<span class="ident" id="3583730">host</span>&nbsp;<span class="builtintype" id="3583735">string</span><span class="op" id="3583741">,</span>&nbsp;<span class="ident" id="3583743">err</span>&nbsp;<span class="builtintype" id="3583747">error</span><span class="op" id="3583752">)</span>&nbsp;<span class="op" id="3583754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583757">i</span>&nbsp;<span class="op" id="3583759">:=</span>&nbsp;<span class="ident" id="3583762"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3583769">.</span><span class="ident" id="3583770">LastIndex</span><span class="op" id="3583779">(</span><span class="ident" id="3583780"><a href="/net/url/url.go.html#3583695">authority</a></span><span class="op" id="3583789">,</span>&nbsp;<span class="string" id="3583791">&#34;@&#34;</span><span class="op" id="3583794">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583797">if</span>&nbsp;<span class="ident" id="3583800"><a href="/net/url/url.go.html#3583757">i</a></span>&nbsp;<span class="op" id="3583802">&lt;</span>&nbsp;<span class="num" id="3583804">0</span>&nbsp;<span class="op" id="3583806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583810"><a href="/net/url/url.go.html#3583730">host</a></span>&nbsp;<span class="op" id="3583815">=</span>&nbsp;<span class="ident" id="3583817"><a href="/net/url/url.go.html#3583695">authority</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583829">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3583837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583840">userinfo</span><span class="op" id="3583848">,</span>&nbsp;<span class="ident" id="3583850"><a href="/net/url/url.go.html#3583730">host</a></span>&nbsp;<span class="op" id="3583855">:=</span>&nbsp;<span class="ident" id="3583858"><a href="/net/url/url.go.html#3583695">authority</a></span><span class="op" id="3583867">[</span><span class="op" id="3583868">:</span><span class="ident" id="3583869"><a href="/net/url/url.go.html#3583757">i</a></span><span class="op" id="3583870">]</span><span class="op" id="3583871">,</span>&nbsp;<span class="ident" id="3583873"><a href="/net/url/url.go.html#3583695">authority</a></span><span class="op" id="3583882">[</span><span class="ident" id="3583883"><a href="/net/url/url.go.html#3583757">i</a></span><span class="op" id="3583884">+</span><span class="num" id="3583885">1</span><span class="op" id="3583886">:</span><span class="op" id="3583887">]</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583890">if</span>&nbsp;<span class="ident" id="3583893"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3583900">.</span><span class="ident" id="3583901">Index</span><span class="op" id="3583906">(</span><span class="ident" id="3583907"><a href="/net/url/url.go.html#3583840">userinfo</a></span><span class="op" id="3583915">,</span>&nbsp;<span class="string" id="3583917">&#34;:&#34;</span><span class="op" id="3583920">)</span>&nbsp;<span class="op" id="3583922">&lt;</span>&nbsp;<span class="num" id="3583924">0</span>&nbsp;<span class="op" id="3583926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3583930">if</span>&nbsp;<span class="ident" id="3583933"><a href="/net/url/url.go.html#3583840">userinfo</a></span><span class="op" id="3583941">,</span>&nbsp;<span class="ident" id="3583943"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3583947">=</span>&nbsp;<span class="ident" id="3583949"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3583957">(</span><span class="ident" id="3583958"><a href="/net/url/url.go.html#3583840">userinfo</a></span><span class="op" id="3583966">,</span>&nbsp;<span class="ident" id="3583968"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3583986">)</span><span class="op" id="3583987">;</span>&nbsp;<span class="ident" id="3583989"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3583993">!=</span>&nbsp;<span class="ident" id="3583996">nil</span>&nbsp;<span class="op" id="3584000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584005">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3584014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3584018"><a href="/net/url/url.go.html#3583714">user</a></span>&nbsp;<span class="op" id="3584023">=</span>&nbsp;<span class="ident" id="3584025"><a href="/net/url/url.go.html#3578774">User</a></span><span class="op" id="3584029">(</span><span class="ident" id="3584030"><a href="/net/url/url.go.html#3583840">userinfo</a></span><span class="op" id="3584038">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3584041">}</span>&nbsp;<span class="keyword" id="3584043">else</span>&nbsp;<span class="op" id="3584048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3584052">username</span><span class="op" id="3584060">,</span>&nbsp;<span class="ident" id="3584062">password</span>&nbsp;<span class="op" id="3584071">:=</span>&nbsp;<span class="ident" id="3584074"><a href="/net/url/url.go.html#3581084">split</a></span><span class="op" id="3584079">(</span><span class="ident" id="3584080"><a href="/net/url/url.go.html#3583840">userinfo</a></span><span class="op" id="3584088">,</span>&nbsp;<span class="string" id="3584090">&#34;:&#34;</span><span class="op" id="3584093">,</span>&nbsp;<span class="builtintype" id="3584095">true</span><span class="op" id="3584099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584103">if</span>&nbsp;<span class="ident" id="3584106"><a href="/net/url/url.go.html#3584052">username</a></span><span class="op" id="3584114">,</span>&nbsp;<span class="ident" id="3584116"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3584120">=</span>&nbsp;<span class="ident" id="3584122"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3584130">(</span><span class="ident" id="3584131"><a href="/net/url/url.go.html#3584052">username</a></span><span class="op" id="3584139">,</span>&nbsp;<span class="ident" id="3584141"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3584159">)</span><span class="op" id="3584160">;</span>&nbsp;<span class="ident" id="3584162"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3584166">!=</span>&nbsp;<span class="ident" id="3584169">nil</span>&nbsp;<span class="op" id="3584173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584178">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3584187">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584191">if</span>&nbsp;<span class="ident" id="3584194"><a href="/net/url/url.go.html#3584062">password</a></span><span class="op" id="3584202">,</span>&nbsp;<span class="ident" id="3584204"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3584208">=</span>&nbsp;<span class="ident" id="3584210"><a href="/net/url/url.go.html#3575914">unescape</a></span><span class="op" id="3584218">(</span><span class="ident" id="3584219"><a href="/net/url/url.go.html#3584062">password</a></span><span class="op" id="3584227">,</span>&nbsp;<span class="ident" id="3584229"><a href="/net/url/url.go.html#3573828">encodeUserPassword</a></span><span class="op" id="3584247">)</span><span class="op" id="3584248">;</span>&nbsp;<span class="ident" id="3584250"><a href="/net/url/url.go.html#3583743">err</a></span>&nbsp;<span class="op" id="3584254">!=</span>&nbsp;<span class="ident" id="3584257">nil</span>&nbsp;<span class="op" id="3584261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584266">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3584275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3584279"><a href="/net/url/url.go.html#3583714">user</a></span>&nbsp;<span class="op" id="3584284">=</span>&nbsp;<span class="ident" id="3584286"><a href="/net/url/url.go.html#3579248">UserPassword</a></span><span class="op" id="3584298">(</span><span class="ident" id="3584299"><a href="/net/url/url.go.html#3584052">username</a></span><span class="op" id="3584307">,</span>&nbsp;<span class="ident" id="3584309"><a href="/net/url/url.go.html#3584062">password</a></span><span class="op" id="3584317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3584320">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3584323">return</span><br>
<span class="lineno"></span><span class="op" id="3584330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3584333">//&nbsp;String&nbsp;reassembles&nbsp;the&nbsp;URL&nbsp;into&nbsp;a&nbsp;valid&nbsp;URL&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3584388">//&nbsp;The&nbsp;general&nbsp;form&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno">445</span><span class="comment" id="3584433">//</span><br>
<span class="lineno"></span><span class="comment" id="3584436">//&nbsp;&nbsp;&nbsp;&nbspscheme:opaque</span><br>
<span class="lineno"></span><span class="comment" id="3584453">//&nbsp;&nbsp;&nbsp;&nbspscheme://userinfo@host/path?query#fragment</span><br>
<span class="lineno"></span><span class="comment" id="3584499">//</span><br>
<span class="lineno"></span><span class="comment" id="3584502">//&nbsp;If&nbsp;u.Opaque&nbsp;is&nbsp;non-empty,&nbsp;String&nbsp;uses&nbsp;the&nbsp;first&nbsp;form;</span><br>
<span class="lineno">450</span><span class="comment" id="3584559">//&nbsp;otherwise&nbsp;it&nbsp;uses&nbsp;the&nbsp;second&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3584597">//</span><br>
<span class="lineno"></span><span class="comment" id="3584600">//&nbsp;In&nbsp;the&nbsp;second&nbsp;form,&nbsp;the&nbsp;following&nbsp;rules&nbsp;apply:</span><br>
<span class="lineno"></span><span class="comment" id="3584650">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Scheme&nbsp;is&nbsp;empty,&nbsp;scheme:&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3584697">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.User&nbsp;is&nbsp;nil,&nbsp;userinfo@&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">455</span><span class="comment" id="3584742">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;empty,&nbsp;host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3584785">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Scheme&nbsp;and&nbsp;u.Host&nbsp;are&nbsp;empty&nbsp;and&nbsp;u.User&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span><span class="comment" id="3584842">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;the&nbsp;entire&nbsp;scheme://userinfo@host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3584895">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;non-empty&nbsp;and&nbsp;u.Path&nbsp;begins&nbsp;with&nbsp;a&nbsp;/,</span><br>
<span class="lineno"></span><span class="comment" id="3584951">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;the&nbsp;form&nbsp;host/path&nbsp;does&nbsp;not&nbsp;add&nbsp;its&nbsp;own&nbsp;/.</span><br>
<span class="lineno">460</span><span class="comment" id="3585000">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.RawQuery&nbsp;is&nbsp;empty,&nbsp;?query&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3585048">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;if&nbsp;u.Fragment&nbsp;is&nbsp;empty,&nbsp;#fragment&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="keyword" id="3585099">func</span>&nbsp;<span class="op" id="3585104">(</span><span class="ident" id="3585105">u</span>&nbsp;<span class="op" id="3585107">*</span><span class="ident" id="3585108"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3585111">)</span>&nbsp;<span class="ident" id="3585113">String</span><span class="op" id="3585119">(</span><span class="op" id="3585120">)</span>&nbsp;<span class="builtintype" id="3585122">string</span>&nbsp;<span class="op" id="3585129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585132">var</span>&nbsp;<span class="ident" id="3585136">buf</span>&nbsp;<span class="ident" id="3585140"><a href="/net/url/url.go.html#3573127">bytes</a></span><span class="op" id="3585145">.</span><span class="ident" id="3585146">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585154">if</span>&nbsp;<span class="ident" id="3585157"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585158">.</span><span class="ident" id="3585159">Scheme</span>&nbsp;<span class="op" id="3585166">!=</span>&nbsp;<span class="string" id="3585169">&#34;&#34;</span>&nbsp;<span class="op" id="3585172">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585176"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585179">.</span><span class="ident" id="3585180">WriteString</span><span class="op" id="3585191">(</span><span class="ident" id="3585192"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585193">.</span><span class="ident" id="3585194">Scheme</span><span class="op" id="3585200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585204"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585207">.</span><span class="ident" id="3585208">WriteByte</span><span class="op" id="3585217">(</span><span class="string" id="3585218">&#39;:&#39;</span><span class="op" id="3585221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585227">if</span>&nbsp;<span class="ident" id="3585230"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585231">.</span><span class="ident" id="3585232">Opaque</span>&nbsp;<span class="op" id="3585239">!=</span>&nbsp;<span class="string" id="3585242">&#34;&#34;</span>&nbsp;<span class="op" id="3585245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585249"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585252">.</span><span class="ident" id="3585253">WriteString</span><span class="op" id="3585264">(</span><span class="ident" id="3585265"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585266">.</span><span class="ident" id="3585267">Opaque</span><span class="op" id="3585273">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585276">}</span>&nbsp;<span class="keyword" id="3585278">else</span>&nbsp;<span class="op" id="3585283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585287">if</span>&nbsp;<span class="ident" id="3585290"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585291">.</span><span class="ident" id="3585292">Scheme</span>&nbsp;<span class="op" id="3585299">!=</span>&nbsp;<span class="string" id="3585302">&#34;&#34;</span>&nbsp;<span class="op" id="3585305">||</span>&nbsp;<span class="ident" id="3585308"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585309">.</span><span class="ident" id="3585310">Host</span>&nbsp;<span class="op" id="3585315">!=</span>&nbsp;<span class="string" id="3585318">&#34;&#34;</span>&nbsp;<span class="op" id="3585321">||</span>&nbsp;<span class="ident" id="3585324"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585325">.</span><span class="ident" id="3585326">User</span>&nbsp;<span class="op" id="3585331">!=</span>&nbsp;<span class="ident" id="3585334">nil</span>&nbsp;<span class="op" id="3585338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585343"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585346">.</span><span class="ident" id="3585347">WriteString</span><span class="op" id="3585358">(</span><span class="string" id="3585359">&#34;//&#34;</span><span class="op" id="3585363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585368">if</span>&nbsp;<span class="ident" id="3585371">ui</span>&nbsp;<span class="op" id="3585374">:=</span>&nbsp;<span class="ident" id="3585377"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585378">.</span><span class="ident" id="3585379">User</span><span class="op" id="3585383">;</span>&nbsp;<span class="ident" id="3585385"><a href="/net/url/url.go.html#3585371">ui</a></span>&nbsp;<span class="op" id="3585388">!=</span>&nbsp;<span class="ident" id="3585391">nil</span>&nbsp;<span class="op" id="3585395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585401"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585404">.</span><span class="ident" id="3585405">WriteString</span><span class="op" id="3585416">(</span><span class="ident" id="3585417"><a href="/net/url/url.go.html#3585371">ui</a></span><span class="op" id="3585419">.</span><span class="ident" id="3585420">String</span><span class="op" id="3585426">(</span><span class="op" id="3585427">)</span><span class="op" id="3585428">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585434"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585437">.</span><span class="ident" id="3585438">WriteByte</span><span class="op" id="3585447">(</span><span class="string" id="3585448">&#39;@&#39;</span><span class="op" id="3585451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585461">if</span>&nbsp;<span class="ident" id="3585464">h</span>&nbsp;<span class="op" id="3585466">:=</span>&nbsp;<span class="ident" id="3585469"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585470">.</span><span class="ident" id="3585471">Host</span><span class="op" id="3585475">;</span>&nbsp;<span class="ident" id="3585477"><a href="/net/url/url.go.html#3585464">h</a></span>&nbsp;<span class="op" id="3585479">!=</span>&nbsp;<span class="string" id="3585482">&#34;&#34;</span>&nbsp;<span class="op" id="3585485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585491"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585494">.</span><span class="ident" id="3585495">WriteString</span><span class="op" id="3585506">(</span><span class="ident" id="3585507"><a href="/net/url/url.go.html#3585464">h</a></span><span class="op" id="3585508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585513">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585521">if</span>&nbsp;<span class="ident" id="3585524"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585525">.</span><span class="ident" id="3585526">Path</span>&nbsp;<span class="op" id="3585531">!=</span>&nbsp;<span class="string" id="3585534">&#34;&#34;</span>&nbsp;<span class="op" id="3585537">&amp;&amp;</span>&nbsp;<span class="ident" id="3585540"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585541">.</span><span class="ident" id="3585542">Path</span><span class="op" id="3585546">[</span><span class="num" id="3585547">0</span><span class="op" id="3585548">]</span>&nbsp;<span class="op" id="3585550">!=</span>&nbsp;<span class="string" id="3585553">&#39;/&#39;</span>&nbsp;<span class="op" id="3585557">&amp;&amp;</span>&nbsp;<span class="ident" id="3585560"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585561">.</span><span class="ident" id="3585562">Host</span>&nbsp;<span class="op" id="3585567">!=</span>&nbsp;<span class="string" id="3585570">&#34;&#34;</span>&nbsp;<span class="op" id="3585573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585578"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585581">.</span><span class="ident" id="3585582">WriteByte</span><span class="op" id="3585591">(</span><span class="string" id="3585592">&#39;/&#39;</span><span class="op" id="3585595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585603"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585606">.</span><span class="ident" id="3585607">WriteString</span><span class="op" id="3585618">(</span><span class="ident" id="3585619"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3585625">(</span><span class="ident" id="3585626"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585627">.</span><span class="ident" id="3585628">Path</span><span class="op" id="3585632">,</span>&nbsp;<span class="ident" id="3585634"><a href="/net/url/url.go.html#3573796">encodePath</a></span><span class="op" id="3585644">)</span><span class="op" id="3585645">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585651">if</span>&nbsp;<span class="ident" id="3585654"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585655">.</span><span class="ident" id="3585656">RawQuery</span>&nbsp;<span class="op" id="3585665">!=</span>&nbsp;<span class="string" id="3585668">&#34;&#34;</span>&nbsp;<span class="op" id="3585671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585675"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585678">.</span><span class="ident" id="3585679">WriteByte</span><span class="op" id="3585688">(</span><span class="string" id="3585689">&#39;?&#39;</span><span class="op" id="3585692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585696"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585699">.</span><span class="ident" id="3585700">WriteString</span><span class="op" id="3585711">(</span><span class="ident" id="3585712"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585713">.</span><span class="ident" id="3585714">RawQuery</span><span class="op" id="3585722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585725">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585728">if</span>&nbsp;<span class="ident" id="3585731"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585732">.</span><span class="ident" id="3585733">Fragment</span>&nbsp;<span class="op" id="3585742">!=</span>&nbsp;<span class="string" id="3585745">&#34;&#34;</span>&nbsp;<span class="op" id="3585748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585752"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585755">.</span><span class="ident" id="3585756">WriteByte</span><span class="op" id="3585765">(</span><span class="string" id="3585766">&#39;#&#39;</span><span class="op" id="3585769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3585773"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585776">.</span><span class="ident" id="3585777">WriteString</span><span class="op" id="3585788">(</span><span class="ident" id="3585789"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3585795">(</span><span class="ident" id="3585796"><a href="/net/url/url.go.html#3585105">u</a></span><span class="op" id="3585797">.</span><span class="ident" id="3585798">Fragment</span><span class="op" id="3585806">,</span>&nbsp;<span class="ident" id="3585808"><a href="/net/url/url.go.html#3573870">encodeFragment</a></span><span class="op" id="3585822">)</span><span class="op" id="3585823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3585826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3585829">return</span>&nbsp;<span class="ident" id="3585836"><a href="/net/url/url.go.html#3585136">buf</a></span><span class="op" id="3585839">.</span><span class="ident" id="3585840">String</span><span class="op" id="3585846">(</span><span class="op" id="3585847">)</span><br>
<span class="lineno">495</span><span class="op" id="3585849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3585852">//&nbsp;Values&nbsp;maps&nbsp;a&nbsp;string&nbsp;key&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3585901">//&nbsp;It&nbsp;is&nbsp;typically&nbsp;used&nbsp;for&nbsp;query&nbsp;parameters&nbsp;and&nbsp;form&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3585963">//&nbsp;Unlike&nbsp;in&nbsp;the&nbsp;http.Header&nbsp;map,&nbsp;the&nbsp;keys&nbsp;in&nbsp;a&nbsp;Values&nbsp;map</span><br>
<span class="lineno">500</span><span class="comment" id="3586022">//&nbsp;are&nbsp;case-sensitive.</span><br>
<span class="lineno"></span><span class="keyword" id="3586045">type</span>&nbsp;<span class="ident" id="3586050">Values</span>&nbsp;<span class="keyword" id="3586057">map</span><span class="op" id="3586060">[</span><span class="builtintype" id="3586061">string</span><span class="op" id="3586067">]</span><span class="op" id="3586068">[</span><span class="op" id="3586069">]</span><span class="builtintype" id="3586070">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586078">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3586137">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns</span><br>
<span class="lineno">505</span><span class="comment" id="3586200">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values,&nbsp;use&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="3586260">//&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="3586273">func</span>&nbsp;<span class="op" id="3586278">(</span><span class="ident" id="3586279">v</span>&nbsp;<span class="ident" id="3586281"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3586287">)</span>&nbsp;<span class="ident" id="3586289">Get</span><span class="op" id="3586292">(</span><span class="ident" id="3586293">key</span>&nbsp;<span class="builtintype" id="3586297">string</span><span class="op" id="3586303">)</span>&nbsp;<span class="builtintype" id="3586305">string</span>&nbsp;<span class="op" id="3586312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3586315">if</span>&nbsp;<span class="ident" id="3586318"><a href="/net/url/url.go.html#3586279">v</a></span>&nbsp;<span class="op" id="3586320">==</span>&nbsp;<span class="ident" id="3586323">nil</span>&nbsp;<span class="op" id="3586327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3586331">return</span>&nbsp;<span class="string" id="3586338">&#34;&#34;</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3586342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586345">vs</span><span class="op" id="3586347">,</span>&nbsp;<span class="ident" id="3586349">ok</span>&nbsp;<span class="op" id="3586352">:=</span>&nbsp;<span class="ident" id="3586355"><a href="/net/url/url.go.html#3586279">v</a></span><span class="op" id="3586356">[</span><span class="ident" id="3586357"><a href="/net/url/url.go.html#3586293">key</a></span><span class="op" id="3586360">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3586363">if</span>&nbsp;<span class="op" id="3586366">!</span><span class="ident" id="3586367"><a href="/net/url/url.go.html#3586349">ok</a></span>&nbsp;<span class="op" id="3586370">||</span>&nbsp;<span class="builtinfunc" id="3586373">len</span><span class="op" id="3586376">(</span><span class="ident" id="3586377"><a href="/net/url/url.go.html#3586345">vs</a></span><span class="op" id="3586379">)</span>&nbsp;<span class="op" id="3586381">==</span>&nbsp;<span class="num" id="3586384">0</span>&nbsp;<span class="op" id="3586386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3586390">return</span>&nbsp;<span class="string" id="3586397">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3586401">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3586404">return</span>&nbsp;<span class="ident" id="3586411"><a href="/net/url/url.go.html#3586345">vs</a></span><span class="op" id="3586413">[</span><span class="num" id="3586414">0</span><span class="op" id="3586415">]</span><br>
<span class="lineno"></span><span class="op" id="3586417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586420">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;key&nbsp;to&nbsp;value.&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3586475">//&nbsp;values.</span><br>
<span class="lineno">520</span><span class="keyword" id="3586486">func</span>&nbsp;<span class="op" id="3586491">(</span><span class="ident" id="3586492">v</span>&nbsp;<span class="ident" id="3586494"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3586500">)</span>&nbsp;<span class="ident" id="3586502">Set</span><span class="op" id="3586505">(</span><span class="ident" id="3586506">key</span><span class="op" id="3586509">,</span>&nbsp;<span class="ident" id="3586511">value</span>&nbsp;<span class="builtintype" id="3586517">string</span><span class="op" id="3586523">)</span>&nbsp;<span class="op" id="3586525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586528"><a href="/net/url/url.go.html#3586492">v</a></span><span class="op" id="3586529">[</span><span class="ident" id="3586530"><a href="/net/url/url.go.html#3586506">key</a></span><span class="op" id="3586533">]</span>&nbsp;<span class="op" id="3586535">=</span>&nbsp;<span class="op" id="3586537">[</span><span class="op" id="3586538">]</span><span class="builtintype" id="3586539">string</span><span class="op" id="3586545">{</span><span class="ident" id="3586546"><a href="/net/url/url.go.html#3586511">value</a></span><span class="op" id="3586551">}</span><br>
<span class="lineno"></span><span class="op" id="3586553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586556">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;value&nbsp;to&nbsp;key.&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing</span><br>
<span class="lineno">525</span><span class="comment" id="3586613">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3586644">func</span>&nbsp;<span class="op" id="3586649">(</span><span class="ident" id="3586650">v</span>&nbsp;<span class="ident" id="3586652"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3586658">)</span>&nbsp;<span class="ident" id="3586660">Add</span><span class="op" id="3586663">(</span><span class="ident" id="3586664">key</span><span class="op" id="3586667">,</span>&nbsp;<span class="ident" id="3586669">value</span>&nbsp;<span class="builtintype" id="3586675">string</span><span class="op" id="3586681">)</span>&nbsp;<span class="op" id="3586683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3586686"><a href="/net/url/url.go.html#3586650">v</a></span><span class="op" id="3586687">[</span><span class="ident" id="3586688"><a href="/net/url/url.go.html#3586664">key</a></span><span class="op" id="3586691">]</span>&nbsp;<span class="op" id="3586693">=</span>&nbsp;<span class="builtinfunc" id="3586695">append</span><span class="op" id="3586701">(</span><span class="ident" id="3586702"><a href="/net/url/url.go.html#3586650">v</a></span><span class="op" id="3586703">[</span><span class="ident" id="3586704"><a href="/net/url/url.go.html#3586664">key</a></span><span class="op" id="3586707">]</span><span class="op" id="3586708">,</span>&nbsp;<span class="ident" id="3586710"><a href="/net/url/url.go.html#3586669">value</a></span><span class="op" id="3586715">)</span><br>
<span class="lineno"></span><span class="op" id="3586717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="comment" id="3586720">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3586767">func</span>&nbsp;<span class="op" id="3586772">(</span><span class="ident" id="3586773">v</span>&nbsp;<span class="ident" id="3586775"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3586781">)</span>&nbsp;<span class="ident" id="3586783">Del</span><span class="op" id="3586786">(</span><span class="ident" id="3586787">key</span>&nbsp;<span class="builtintype" id="3586791">string</span><span class="op" id="3586797">)</span>&nbsp;<span class="op" id="3586799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3586802">delete</span><span class="op" id="3586808">(</span><span class="ident" id="3586809"><a href="/net/url/url.go.html#3586773">v</a></span><span class="op" id="3586810">,</span>&nbsp;<span class="ident" id="3586812"><a href="/net/url/url.go.html#3586787">key</a></span><span class="op" id="3586815">)</span><br>
<span class="lineno"></span><span class="op" id="3586817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="3586820">//&nbsp;ParseQuery&nbsp;parses&nbsp;the&nbsp;URL-encoded&nbsp;query&nbsp;string&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3586882">//&nbsp;a&nbsp;map&nbsp;listing&nbsp;the&nbsp;values&nbsp;specified&nbsp;for&nbsp;each&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3586934">//&nbsp;ParseQuery&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;map&nbsp;containing&nbsp;all&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3586996">//&nbsp;valid&nbsp;query&nbsp;parameters&nbsp;found;&nbsp;err&nbsp;describes&nbsp;the&nbsp;first&nbsp;decoding&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3587068">//&nbsp;encountered,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">540</span><span class="keyword" id="3587092">func</span>&nbsp;<span class="ident" id="3587097">ParseQuery</span><span class="op" id="3587107">(</span><span class="ident" id="3587108">query</span>&nbsp;<span class="builtintype" id="3587114">string</span><span class="op" id="3587120">)</span>&nbsp;<span class="op" id="3587122">(</span><span class="ident" id="3587123">m</span>&nbsp;<span class="ident" id="3587125"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3587131">,</span>&nbsp;<span class="ident" id="3587133">err</span>&nbsp;<span class="builtintype" id="3587137">error</span><span class="op" id="3587142">)</span>&nbsp;<span class="op" id="3587144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587147"><a href="/net/url/url.go.html#3587123">m</a></span>&nbsp;<span class="op" id="3587149">=</span>&nbsp;<span class="builtinfunc" id="3587151">make</span><span class="op" id="3587155">(</span><span class="ident" id="3587156"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3587162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587165"><a href="/net/url/url.go.html#3587133">err</a></span>&nbsp;<span class="op" id="3587169">=</span>&nbsp;<span class="ident" id="3587171"><a href="/net/url/url.go.html#3587208">parseQuery</a></span><span class="op" id="3587181">(</span><span class="ident" id="3587182"><a href="/net/url/url.go.html#3587123">m</a></span><span class="op" id="3587183">,</span>&nbsp;<span class="ident" id="3587185"><a href="/net/url/url.go.html#3587108">query</a></span><span class="op" id="3587190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587193">return</span><br>
<span class="lineno"></span><span class="op" id="3587200">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="keyword" id="3587203">func</span>&nbsp;<span class="ident" id="3587208">parseQuery</span><span class="op" id="3587218">(</span><span class="ident" id="3587219">m</span>&nbsp;<span class="ident" id="3587221"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3587227">,</span>&nbsp;<span class="ident" id="3587229">query</span>&nbsp;<span class="builtintype" id="3587235">string</span><span class="op" id="3587241">)</span>&nbsp;<span class="op" id="3587243">(</span><span class="ident" id="3587244">err</span>&nbsp;<span class="builtintype" id="3587248">error</span><span class="op" id="3587253">)</span>&nbsp;<span class="op" id="3587255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587258">for</span>&nbsp;<span class="ident" id="3587262"><a href="/net/url/url.go.html#3587229">query</a></span>&nbsp;<span class="op" id="3587268">!=</span>&nbsp;<span class="string" id="3587271">&#34;&#34;</span>&nbsp;<span class="op" id="3587274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587278">key</span>&nbsp;<span class="op" id="3587282">:=</span>&nbsp;<span class="ident" id="3587285"><a href="/net/url/url.go.html#3587229">query</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587293">if</span>&nbsp;<span class="ident" id="3587296">i</span>&nbsp;<span class="op" id="3587298">:=</span>&nbsp;<span class="ident" id="3587301"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3587308">.</span><span class="ident" id="3587309">IndexAny</span><span class="op" id="3587317">(</span><span class="ident" id="3587318"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587321">,</span>&nbsp;<span class="string" id="3587323">&#34;&amp;;&#34;</span><span class="op" id="3587327">)</span><span class="op" id="3587328">;</span>&nbsp;<span class="ident" id="3587330"><a href="/net/url/url.go.html#3587296">i</a></span>&nbsp;<span class="op" id="3587332">&gt;=</span>&nbsp;<span class="num" id="3587335">0</span>&nbsp;<span class="op" id="3587337">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587342"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587345">,</span>&nbsp;<span class="ident" id="3587347"><a href="/net/url/url.go.html#3587229">query</a></span>&nbsp;<span class="op" id="3587353">=</span>&nbsp;<span class="ident" id="3587355"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587358">[</span><span class="op" id="3587359">:</span><span class="ident" id="3587360"><a href="/net/url/url.go.html#3587296">i</a></span><span class="op" id="3587361">]</span><span class="op" id="3587362">,</span>&nbsp;<span class="ident" id="3587364"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587367">[</span><span class="ident" id="3587368"><a href="/net/url/url.go.html#3587296">i</a></span><span class="op" id="3587369">+</span><span class="num" id="3587370">1</span><span class="op" id="3587371">:</span><span class="op" id="3587372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587376">}</span>&nbsp;<span class="keyword" id="3587378">else</span>&nbsp;<span class="op" id="3587383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587388"><a href="/net/url/url.go.html#3587229">query</a></span>&nbsp;<span class="op" id="3587394">=</span>&nbsp;<span class="string" id="3587396">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587405">if</span>&nbsp;<span class="ident" id="3587408"><a href="/net/url/url.go.html#3587278">key</a></span>&nbsp;<span class="op" id="3587412">==</span>&nbsp;<span class="string" id="3587415">&#34;&#34;</span>&nbsp;<span class="op" id="3587418">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587423">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587438">value</span>&nbsp;<span class="op" id="3587444">:=</span>&nbsp;<span class="string" id="3587447">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587452">if</span>&nbsp;<span class="ident" id="3587455">i</span>&nbsp;<span class="op" id="3587457">:=</span>&nbsp;<span class="ident" id="3587460"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3587467">.</span><span class="ident" id="3587468">Index</span><span class="op" id="3587473">(</span><span class="ident" id="3587474"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587477">,</span>&nbsp;<span class="string" id="3587479">&#34;=&#34;</span><span class="op" id="3587482">)</span><span class="op" id="3587483">;</span>&nbsp;<span class="ident" id="3587485"><a href="/net/url/url.go.html#3587455">i</a></span>&nbsp;<span class="op" id="3587487">&gt;=</span>&nbsp;<span class="num" id="3587490">0</span>&nbsp;<span class="op" id="3587492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587497"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587500">,</span>&nbsp;<span class="ident" id="3587502"><a href="/net/url/url.go.html#3587438">value</a></span>&nbsp;<span class="op" id="3587508">=</span>&nbsp;<span class="ident" id="3587510"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587513">[</span><span class="op" id="3587514">:</span><span class="ident" id="3587515"><a href="/net/url/url.go.html#3587455">i</a></span><span class="op" id="3587516">]</span><span class="op" id="3587517">,</span>&nbsp;<span class="ident" id="3587519"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587522">[</span><span class="ident" id="3587523"><a href="/net/url/url.go.html#3587455">i</a></span><span class="op" id="3587524">+</span><span class="num" id="3587525">1</span><span class="op" id="3587526">:</span><span class="op" id="3587527">]</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587535"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587538">,</span>&nbsp;<span class="ident" id="3587540">err1</span>&nbsp;<span class="op" id="3587545">:=</span>&nbsp;<span class="ident" id="3587548"><a href="/net/url/url.go.html#3575716">QueryUnescape</a></span><span class="op" id="3587561">(</span><span class="ident" id="3587562"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587569">if</span>&nbsp;<span class="ident" id="3587572"><a href="/net/url/url.go.html#3587540">err1</a></span>&nbsp;<span class="op" id="3587577">!=</span>&nbsp;<span class="ident" id="3587580">nil</span>&nbsp;<span class="op" id="3587584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587589">if</span>&nbsp;<span class="ident" id="3587592"><a href="/net/url/url.go.html#3587244">err</a></span>&nbsp;<span class="op" id="3587596">==</span>&nbsp;<span class="ident" id="3587599">nil</span>&nbsp;<span class="op" id="3587603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587609"><a href="/net/url/url.go.html#3587244">err</a></span>&nbsp;<span class="op" id="3587613">=</span>&nbsp;<span class="ident" id="3587615"><a href="/net/url/url.go.html#3587540">err1</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587628">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587643"><a href="/net/url/url.go.html#3587438">value</a></span><span class="op" id="3587648">,</span>&nbsp;<span class="ident" id="3587650"><a href="/net/url/url.go.html#3587540">err1</a></span>&nbsp;<span class="op" id="3587655">=</span>&nbsp;<span class="ident" id="3587657"><a href="/net/url/url.go.html#3575716">QueryUnescape</a></span><span class="op" id="3587670">(</span><span class="ident" id="3587671"><a href="/net/url/url.go.html#3587438">value</a></span><span class="op" id="3587676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587680">if</span>&nbsp;<span class="ident" id="3587683"><a href="/net/url/url.go.html#3587540">err1</a></span>&nbsp;<span class="op" id="3587688">!=</span>&nbsp;<span class="ident" id="3587691">nil</span>&nbsp;<span class="op" id="3587695">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587700">if</span>&nbsp;<span class="ident" id="3587703"><a href="/net/url/url.go.html#3587244">err</a></span>&nbsp;<span class="op" id="3587707">==</span>&nbsp;<span class="ident" id="3587710">nil</span>&nbsp;<span class="op" id="3587714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587720"><a href="/net/url/url.go.html#3587244">err</a></span>&nbsp;<span class="op" id="3587724">=</span>&nbsp;<span class="ident" id="3587726"><a href="/net/url/url.go.html#3587540">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587739">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587750">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587754"><a href="/net/url/url.go.html#3587219">m</a></span><span class="op" id="3587755">[</span><span class="ident" id="3587756"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587759">]</span>&nbsp;<span class="op" id="3587761">=</span>&nbsp;<span class="builtinfunc" id="3587763">append</span><span class="op" id="3587769">(</span><span class="ident" id="3587770"><a href="/net/url/url.go.html#3587219">m</a></span><span class="op" id="3587771">[</span><span class="ident" id="3587772"><a href="/net/url/url.go.html#3587278">key</a></span><span class="op" id="3587775">]</span><span class="op" id="3587776">,</span>&nbsp;<span class="ident" id="3587778"><a href="/net/url/url.go.html#3587438">value</a></span><span class="op" id="3587783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587789">return</span>&nbsp;<span class="ident" id="3587796"><a href="/net/url/url.go.html#3587244">err</a></span><br>
<span class="lineno"></span><span class="op" id="3587800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="3587803">//&nbsp;Encode&nbsp;encodes&nbsp;the&nbsp;values&nbsp;into&nbsp;``URL&nbsp;encoded&#39;&#39;&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3587858">//&nbsp;(&#34;bar=baz&amp;foo=quux&#34;)&nbsp;sorted&nbsp;by&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3587897">func</span>&nbsp;<span class="op" id="3587902">(</span><span class="ident" id="3587903">v</span>&nbsp;<span class="ident" id="3587905"><a href="/net/url/url.go.html#3586050">Values</a></span><span class="op" id="3587911">)</span>&nbsp;<span class="ident" id="3587913">Encode</span><span class="op" id="3587919">(</span><span class="op" id="3587920">)</span>&nbsp;<span class="builtintype" id="3587922">string</span>&nbsp;<span class="op" id="3587929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587932">if</span>&nbsp;<span class="ident" id="3587935"><a href="/net/url/url.go.html#3587903">v</a></span>&nbsp;<span class="op" id="3587937">==</span>&nbsp;<span class="ident" id="3587940">nil</span>&nbsp;<span class="op" id="3587944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587948">return</span>&nbsp;<span class="string" id="3587955">&#34;&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3587959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3587962">var</span>&nbsp;<span class="ident" id="3587966">buf</span>&nbsp;<span class="ident" id="3587970"><a href="/net/url/url.go.html#3573127">bytes</a></span><span class="op" id="3587975">.</span><span class="ident" id="3587976">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3587984">keys</span>&nbsp;<span class="op" id="3587989">:=</span>&nbsp;<span class="builtinfunc" id="3587992">make</span><span class="op" id="3587996">(</span><span class="op" id="3587997">[</span><span class="op" id="3587998">]</span><span class="builtintype" id="3587999">string</span><span class="op" id="3588005">,</span>&nbsp;<span class="num" id="3588007">0</span><span class="op" id="3588008">,</span>&nbsp;<span class="builtinfunc" id="3588010">len</span><span class="op" id="3588013">(</span><span class="ident" id="3588014"><a href="/net/url/url.go.html#3587903">v</a></span><span class="op" id="3588015">)</span><span class="op" id="3588016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588019">for</span>&nbsp;<span class="ident" id="3588023">k</span>&nbsp;<span class="op" id="3588025">:=</span>&nbsp;<span class="keyword" id="3588028">range</span>&nbsp;<span class="ident" id="3588034"><a href="/net/url/url.go.html#3587903">v</a></span>&nbsp;<span class="op" id="3588036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588040"><a href="/net/url/url.go.html#3587984">keys</a></span>&nbsp;<span class="op" id="3588045">=</span>&nbsp;<span class="builtinfunc" id="3588047">append</span><span class="op" id="3588053">(</span><span class="ident" id="3588054"><a href="/net/url/url.go.html#3587984">keys</a></span><span class="op" id="3588058">,</span>&nbsp;<span class="ident" id="3588060"><a href="/net/url/url.go.html#3588023">k</a></span><span class="op" id="3588061">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588067"><a href="/net/url/url.go.html#3573146">sort</a></span><span class="op" id="3588071">.</span><span class="ident" id="3588072">Strings</span><span class="op" id="3588079">(</span><span class="ident" id="3588080"><a href="/net/url/url.go.html#3587984">keys</a></span><span class="op" id="3588084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588087">for</span>&nbsp;<span class="ident" id="3588091">_</span><span class="op" id="3588092">,</span>&nbsp;<span class="ident" id="3588094">k</span>&nbsp;<span class="op" id="3588096">:=</span>&nbsp;<span class="keyword" id="3588099">range</span>&nbsp;<span class="ident" id="3588105"><a href="/net/url/url.go.html#3587984">keys</a></span>&nbsp;<span class="op" id="3588110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588114">vs</span>&nbsp;<span class="op" id="3588117">:=</span>&nbsp;<span class="ident" id="3588120"><a href="/net/url/url.go.html#3587903">v</a></span><span class="op" id="3588121">[</span><span class="ident" id="3588122"><a href="/net/url/url.go.html#3588094">k</a></span><span class="op" id="3588123">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588127">prefix</span>&nbsp;<span class="op" id="3588134">:=</span>&nbsp;<span class="ident" id="3588137"><a href="/net/url/url.go.html#3576816">QueryEscape</a></span><span class="op" id="3588148">(</span><span class="ident" id="3588149"><a href="/net/url/url.go.html#3588094">k</a></span><span class="op" id="3588150">)</span>&nbsp;<span class="op" id="3588152">+</span>&nbsp;<span class="string" id="3588154">&#34;=&#34;</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588160">for</span>&nbsp;<span class="ident" id="3588164">_</span><span class="op" id="3588165">,</span>&nbsp;<span class="ident" id="3588167">v</span>&nbsp;<span class="op" id="3588169">:=</span>&nbsp;<span class="keyword" id="3588172">range</span>&nbsp;<span class="ident" id="3588178"><a href="/net/url/url.go.html#3588114">vs</a></span>&nbsp;<span class="op" id="3588181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588186">if</span>&nbsp;<span class="ident" id="3588189"><a href="/net/url/url.go.html#3587966">buf</a></span><span class="op" id="3588192">.</span><span class="ident" id="3588193">Len</span><span class="op" id="3588196">(</span><span class="op" id="3588197">)</span>&nbsp;<span class="op" id="3588199">&gt;</span>&nbsp;<span class="num" id="3588201">0</span>&nbsp;<span class="op" id="3588203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588209"><a href="/net/url/url.go.html#3587966">buf</a></span><span class="op" id="3588212">.</span><span class="ident" id="3588213">WriteByte</span><span class="op" id="3588222">(</span><span class="string" id="3588223">&#39;&amp;&#39;</span><span class="op" id="3588226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588236"><a href="/net/url/url.go.html#3587966">buf</a></span><span class="op" id="3588239">.</span><span class="ident" id="3588240">WriteString</span><span class="op" id="3588251">(</span><span class="ident" id="3588252"><a href="/net/url/url.go.html#3588127">prefix</a></span><span class="op" id="3588258">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588263"><a href="/net/url/url.go.html#3587966">buf</a></span><span class="op" id="3588266">.</span><span class="ident" id="3588267">WriteString</span><span class="op" id="3588278">(</span><span class="ident" id="3588279"><a href="/net/url/url.go.html#3576816">QueryEscape</a></span><span class="op" id="3588290">(</span><span class="ident" id="3588291"><a href="/net/url/url.go.html#3588167">v</a></span><span class="op" id="3588292">)</span><span class="op" id="3588293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588303">return</span>&nbsp;<span class="ident" id="3588310"><a href="/net/url/url.go.html#3587966">buf</a></span><span class="op" id="3588313">.</span><span class="ident" id="3588314">String</span><span class="op" id="3588320">(</span><span class="op" id="3588321">)</span><br>
<span class="lineno"></span><span class="op" id="3588323">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="3588326">//&nbsp;resolvePath&nbsp;applies&nbsp;special&nbsp;path&nbsp;segments&nbsp;from&nbsp;refs&nbsp;and&nbsp;applies</span><br>
<span class="lineno"></span><span class="comment" id="3588393">//&nbsp;them&nbsp;to&nbsp;base,&nbsp;per&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3588424">func</span>&nbsp;<span class="ident" id="3588429">resolvePath</span><span class="op" id="3588440">(</span><span class="ident" id="3588441">base</span><span class="op" id="3588445">,</span>&nbsp;<span class="ident" id="3588447">ref</span>&nbsp;<span class="builtintype" id="3588451">string</span><span class="op" id="3588457">)</span>&nbsp;<span class="builtintype" id="3588459">string</span>&nbsp;<span class="op" id="3588466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588469">var</span>&nbsp;<span class="ident" id="3588473">full</span>&nbsp;<span class="builtintype" id="3588478">string</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588486">if</span>&nbsp;<span class="ident" id="3588489"><a href="/net/url/url.go.html#3588447">ref</a></span>&nbsp;<span class="op" id="3588493">==</span>&nbsp;<span class="string" id="3588496">&#34;&#34;</span>&nbsp;<span class="op" id="3588499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588503"><a href="/net/url/url.go.html#3588473">full</a></span>&nbsp;<span class="op" id="3588508">=</span>&nbsp;<span class="ident" id="3588510"><a href="/net/url/url.go.html#3588441">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588516">}</span>&nbsp;<span class="keyword" id="3588518">else</span>&nbsp;<span class="keyword" id="3588523">if</span>&nbsp;<span class="ident" id="3588526"><a href="/net/url/url.go.html#3588447">ref</a></span><span class="op" id="3588529">[</span><span class="num" id="3588530">0</span><span class="op" id="3588531">]</span>&nbsp;<span class="op" id="3588533">!=</span>&nbsp;<span class="string" id="3588536">&#39;/&#39;</span>&nbsp;<span class="op" id="3588540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588544">i</span>&nbsp;<span class="op" id="3588546">:=</span>&nbsp;<span class="ident" id="3588549"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3588556">.</span><span class="ident" id="3588557">LastIndex</span><span class="op" id="3588566">(</span><span class="ident" id="3588567"><a href="/net/url/url.go.html#3588441">base</a></span><span class="op" id="3588571">,</span>&nbsp;<span class="string" id="3588573">&#34;/&#34;</span><span class="op" id="3588576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588580"><a href="/net/url/url.go.html#3588473">full</a></span>&nbsp;<span class="op" id="3588585">=</span>&nbsp;<span class="ident" id="3588587"><a href="/net/url/url.go.html#3588441">base</a></span><span class="op" id="3588591">[</span><span class="op" id="3588592">:</span><span class="ident" id="3588593"><a href="/net/url/url.go.html#3588544">i</a></span><span class="op" id="3588594">+</span><span class="num" id="3588595">1</span><span class="op" id="3588596">]</span>&nbsp;<span class="op" id="3588598">+</span>&nbsp;<span class="ident" id="3588600"><a href="/net/url/url.go.html#3588447">ref</a></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588605">}</span>&nbsp;<span class="keyword" id="3588607">else</span>&nbsp;<span class="op" id="3588612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588616"><a href="/net/url/url.go.html#3588473">full</a></span>&nbsp;<span class="op" id="3588621">=</span>&nbsp;<span class="ident" id="3588623"><a href="/net/url/url.go.html#3588447">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588631">if</span>&nbsp;<span class="ident" id="3588634"><a href="/net/url/url.go.html#3588473">full</a></span>&nbsp;<span class="op" id="3588639">==</span>&nbsp;<span class="string" id="3588642">&#34;&#34;</span>&nbsp;<span class="op" id="3588645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588649">return</span>&nbsp;<span class="string" id="3588656">&#34;&#34;</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588663">var</span>&nbsp;<span class="ident" id="3588667">dst</span>&nbsp;<span class="op" id="3588671">[</span><span class="op" id="3588672">]</span><span class="builtintype" id="3588673">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588681">src</span>&nbsp;<span class="op" id="3588685">:=</span>&nbsp;<span class="ident" id="3588688"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3588695">.</span><span class="ident" id="3588696">Split</span><span class="op" id="3588701">(</span><span class="ident" id="3588702"><a href="/net/url/url.go.html#3588473">full</a></span><span class="op" id="3588706">,</span>&nbsp;<span class="string" id="3588708">&#34;/&#34;</span><span class="op" id="3588711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588714">for</span>&nbsp;<span class="ident" id="3588718">_</span><span class="op" id="3588719">,</span>&nbsp;<span class="ident" id="3588721">elem</span>&nbsp;<span class="op" id="3588726">:=</span>&nbsp;<span class="keyword" id="3588729">range</span>&nbsp;<span class="ident" id="3588735"><a href="/net/url/url.go.html#3588681">src</a></span>&nbsp;<span class="op" id="3588739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588743">switch</span>&nbsp;<span class="ident" id="3588750"><a href="/net/url/url.go.html#3588721">elem</a></span>&nbsp;<span class="op" id="3588755">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588759">case</span>&nbsp;<span class="string" id="3588764">&#34;.&#34;</span><span class="op" id="3588767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588772">//&nbsp;drop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588782">case</span>&nbsp;<span class="string" id="3588787">&#34;..&#34;</span><span class="op" id="3588791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588796">if</span>&nbsp;<span class="builtinfunc" id="3588799">len</span><span class="op" id="3588802">(</span><span class="ident" id="3588803"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3588806">)</span>&nbsp;<span class="op" id="3588808">&gt;</span>&nbsp;<span class="num" id="3588810">0</span>&nbsp;<span class="op" id="3588812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588818"><a href="/net/url/url.go.html#3588667">dst</a></span>&nbsp;<span class="op" id="3588822">=</span>&nbsp;<span class="ident" id="3588824"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3588827">[</span><span class="op" id="3588828">:</span><span class="builtinfunc" id="3588829">len</span><span class="op" id="3588832">(</span><span class="ident" id="3588833"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3588836">)</span><span class="op" id="3588837">-</span><span class="num" id="3588838">1</span><span class="op" id="3588839">]</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588848">default</span><span class="op" id="3588855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588860"><a href="/net/url/url.go.html#3588667">dst</a></span>&nbsp;<span class="op" id="3588864">=</span>&nbsp;<span class="builtinfunc" id="3588866">append</span><span class="op" id="3588872">(</span><span class="ident" id="3588873"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3588876">,</span>&nbsp;<span class="ident" id="3588878"><a href="/net/url/url.go.html#3588721">elem</a></span><span class="op" id="3588882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3588889">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3588892">if</span>&nbsp;<span class="ident" id="3588895">last</span>&nbsp;<span class="op" id="3588900">:=</span>&nbsp;<span class="ident" id="3588903"><a href="/net/url/url.go.html#3588681">src</a></span><span class="op" id="3588906">[</span><span class="builtinfunc" id="3588907">len</span><span class="op" id="3588910">(</span><span class="ident" id="3588911"><a href="/net/url/url.go.html#3588681">src</a></span><span class="op" id="3588914">)</span><span class="op" id="3588915">-</span><span class="num" id="3588916">1</span><span class="op" id="3588917">]</span><span class="op" id="3588918">;</span>&nbsp;<span class="ident" id="3588920"><a href="/net/url/url.go.html#3588895">last</a></span>&nbsp;<span class="op" id="3588925">==</span>&nbsp;<span class="string" id="3588928">&#34;.&#34;</span>&nbsp;<span class="op" id="3588932">||</span>&nbsp;<span class="ident" id="3588935"><a href="/net/url/url.go.html#3588895">last</a></span>&nbsp;<span class="op" id="3588940">==</span>&nbsp;<span class="string" id="3588943">&#34;..&#34;</span>&nbsp;<span class="op" id="3588948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3588952">//&nbsp;Add&nbsp;final&nbsp;slash&nbsp;to&nbsp;the&nbsp;joined&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3588993"><a href="/net/url/url.go.html#3588667">dst</a></span>&nbsp;<span class="op" id="3588997">=</span>&nbsp;<span class="builtinfunc" id="3588999">append</span><span class="op" id="3589005">(</span><span class="ident" id="3589006"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3589009">,</span>&nbsp;<span class="string" id="3589011">&#34;&#34;</span><span class="op" id="3589013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589019">return</span>&nbsp;<span class="string" id="3589026">&#34;/&#34;</span>&nbsp;<span class="op" id="3589030">+</span>&nbsp;<span class="ident" id="3589032"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3589039">.</span><span class="ident" id="3589040">TrimLeft</span><span class="op" id="3589048">(</span><span class="ident" id="3589049"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3589056">.</span><span class="ident" id="3589057">Join</span><span class="op" id="3589061">(</span><span class="ident" id="3589062"><a href="/net/url/url.go.html#3588667">dst</a></span><span class="op" id="3589065">,</span>&nbsp;<span class="string" id="3589067">&#34;/&#34;</span><span class="op" id="3589070">)</span><span class="op" id="3589071">,</span>&nbsp;<span class="string" id="3589073">&#34;/&#34;</span><span class="op" id="3589076">)</span><br>
<span class="lineno">640</span><span class="op" id="3589078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3589081">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;URL&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3589127">func</span>&nbsp;<span class="op" id="3589132">(</span><span class="ident" id="3589133">u</span>&nbsp;<span class="op" id="3589135">*</span><span class="ident" id="3589136"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3589139">)</span>&nbsp;<span class="ident" id="3589141">IsAbs</span><span class="op" id="3589146">(</span><span class="op" id="3589147">)</span>&nbsp;<span class="builtintype" id="3589149">bool</span>&nbsp;<span class="op" id="3589154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589157">return</span>&nbsp;<span class="ident" id="3589164"><a href="/net/url/url.go.html#3589133">u</a></span><span class="op" id="3589165">.</span><span class="ident" id="3589166">Scheme</span>&nbsp;<span class="op" id="3589173">!=</span>&nbsp;<span class="string" id="3589176">&#34;&#34;</span><br>
<span class="lineno">645</span><span class="op" id="3589179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3589182">//&nbsp;Parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;the&nbsp;receiver.&nbsp;&nbsp;The&nbsp;provided&nbsp;URL</span><br>
<span class="lineno"></span><span class="comment" id="3589254">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;Parse&nbsp;returns&nbsp;nil,&nbsp;err&nbsp;on&nbsp;parse</span><br>
<span class="lineno"></span><span class="comment" id="3589319">//&nbsp;failure,&nbsp;otherwise&nbsp;its&nbsp;return&nbsp;value&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;ResolveReference.</span><br>
<span class="lineno">650</span><span class="keyword" id="3589391">func</span>&nbsp;<span class="op" id="3589396">(</span><span class="ident" id="3589397">u</span>&nbsp;<span class="op" id="3589399">*</span><span class="ident" id="3589400"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3589403">)</span>&nbsp;<span class="ident" id="3589405">Parse</span><span class="op" id="3589410">(</span><span class="ident" id="3589411">ref</span>&nbsp;<span class="builtintype" id="3589415">string</span><span class="op" id="3589421">)</span>&nbsp;<span class="op" id="3589423">(</span><span class="op" id="3589424">*</span><span class="ident" id="3589425"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3589428">,</span>&nbsp;<span class="builtintype" id="3589430">error</span><span class="op" id="3589435">)</span>&nbsp;<span class="op" id="3589437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589440">refurl</span><span class="op" id="3589446">,</span>&nbsp;<span class="ident" id="3589448">err</span>&nbsp;<span class="op" id="3589452">:=</span>&nbsp;<span class="ident" id="3589455"><a href="/net/url/url.go.html#3581358">Parse</a></span><span class="op" id="3589460">(</span><span class="ident" id="3589461"><a href="/net/url/url.go.html#3589411">ref</a></span><span class="op" id="3589464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589467">if</span>&nbsp;<span class="ident" id="3589470"><a href="/net/url/url.go.html#3589448">err</a></span>&nbsp;<span class="op" id="3589474">!=</span>&nbsp;<span class="ident" id="3589477">nil</span>&nbsp;<span class="op" id="3589481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589485">return</span>&nbsp;<span class="ident" id="3589492">nil</span><span class="op" id="3589495">,</span>&nbsp;<span class="ident" id="3589497"><a href="/net/url/url.go.html#3589448">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3589502">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3589505">return</span>&nbsp;<span class="ident" id="3589512"><a href="/net/url/url.go.html#3589397">u</a></span><span class="op" id="3589513">.</span><span class="ident" id="3589514">ResolveReference</span><span class="op" id="3589530">(</span><span class="ident" id="3589531"><a href="/net/url/url.go.html#3589440">refurl</a></span><span class="op" id="3589537">)</span><span class="op" id="3589538">,</span>&nbsp;<span class="ident" id="3589540">nil</span><br>
<span class="lineno"></span><span class="op" id="3589544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3589547">//&nbsp;ResolveReference&nbsp;resolves&nbsp;a&nbsp;URI&nbsp;reference&nbsp;to&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3589616">//&nbsp;an&nbsp;absolute&nbsp;base&nbsp;URI,&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;Section&nbsp;5.2.&nbsp;&nbsp;The&nbsp;URI&nbsp;reference</span><br>
<span class="lineno">660</span><span class="comment" id="3589686">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;ResolveReference&nbsp;always&nbsp;returns&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="3589757">//&nbsp;URL&nbsp;instance,&nbsp;even&nbsp;if&nbsp;the&nbsp;returned&nbsp;URL&nbsp;is&nbsp;identical&nbsp;to&nbsp;either&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3589826">//&nbsp;base&nbsp;or&nbsp;reference.&nbsp;If&nbsp;ref&nbsp;is&nbsp;an&nbsp;absolute&nbsp;URL,&nbsp;then&nbsp;ResolveReference</span><br>
<span class="lineno"></span><span class="comment" id="3589897">//&nbsp;ignores&nbsp;base&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;ref.</span><br>
<span class="lineno"></span><span class="keyword" id="3589940">func</span>&nbsp;<span class="op" id="3589945">(</span><span class="ident" id="3589946">u</span>&nbsp;<span class="op" id="3589948">*</span><span class="ident" id="3589949"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3589952">)</span>&nbsp;<span class="ident" id="3589954">ResolveReference</span><span class="op" id="3589970">(</span><span class="ident" id="3589971">ref</span>&nbsp;<span class="op" id="3589975">*</span><span class="ident" id="3589976"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3589979">)</span>&nbsp;<span class="op" id="3589981">*</span><span class="ident" id="3589982"><a href="/net/url/url.go.html#3578383">URL</a></span>&nbsp;<span class="op" id="3589986">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3589989">url</span>&nbsp;<span class="op" id="3589993">:=</span>&nbsp;<span class="op" id="3589996">*</span><span class="ident" id="3589997"><a href="/net/url/url.go.html#3589971">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590002">if</span>&nbsp;<span class="ident" id="3590005"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590008">.</span><span class="ident" id="3590009">Scheme</span>&nbsp;<span class="op" id="3590016">==</span>&nbsp;<span class="string" id="3590019">&#34;&#34;</span>&nbsp;<span class="op" id="3590022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590026"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590029">.</span><span class="ident" id="3590030">Scheme</span>&nbsp;<span class="op" id="3590037">=</span>&nbsp;<span class="ident" id="3590039"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590040">.</span><span class="ident" id="3590041">Scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590052">if</span>&nbsp;<span class="ident" id="3590055"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590058">.</span><span class="ident" id="3590059">Scheme</span>&nbsp;<span class="op" id="3590066">!=</span>&nbsp;<span class="string" id="3590069">&#34;&#34;</span>&nbsp;<span class="op" id="3590072">||</span>&nbsp;<span class="ident" id="3590075"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590078">.</span><span class="ident" id="3590079">Host</span>&nbsp;<span class="op" id="3590084">!=</span>&nbsp;<span class="string" id="3590087">&#34;&#34;</span>&nbsp;<span class="op" id="3590090">||</span>&nbsp;<span class="ident" id="3590093"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590096">.</span><span class="ident" id="3590097">User</span>&nbsp;<span class="op" id="3590102">!=</span>&nbsp;<span class="ident" id="3590105">nil</span>&nbsp;<span class="op" id="3590109">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3590113">//&nbsp;The&nbsp;&#34;absoluteURI&#34;&nbsp;or&nbsp;&#34;net_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590157"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590160">.</span><span class="ident" id="3590161">Path</span>&nbsp;<span class="op" id="3590166">=</span>&nbsp;<span class="ident" id="3590168"><a href="/net/url/url.go.html#3588429">resolvePath</a></span><span class="op" id="3590179">(</span><span class="ident" id="3590180"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590183">.</span><span class="ident" id="3590184">Path</span><span class="op" id="3590188">,</span>&nbsp;<span class="string" id="3590190">&#34;&#34;</span><span class="op" id="3590192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590196">return</span>&nbsp;<span class="op" id="3590203">&amp;</span><span class="ident" id="3590204"><a href="/net/url/url.go.html#3589989">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590212">if</span>&nbsp;<span class="ident" id="3590215"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590218">.</span><span class="ident" id="3590219">Opaque</span>&nbsp;<span class="op" id="3590226">!=</span>&nbsp;<span class="string" id="3590229">&#34;&#34;</span>&nbsp;<span class="op" id="3590232">{</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590236"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590239">.</span><span class="ident" id="3590240">User</span>&nbsp;<span class="op" id="3590245">=</span>&nbsp;<span class="ident" id="3590247">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590253"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590256">.</span><span class="ident" id="3590257">Host</span>&nbsp;<span class="op" id="3590262">=</span>&nbsp;<span class="string" id="3590264">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590269"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590272">.</span><span class="ident" id="3590273">Path</span>&nbsp;<span class="op" id="3590278">=</span>&nbsp;<span class="string" id="3590280">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590285">return</span>&nbsp;<span class="op" id="3590292">&amp;</span><span class="ident" id="3590293"><a href="/net/url/url.go.html#3589989">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590298">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590301">if</span>&nbsp;<span class="ident" id="3590304"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590307">.</span><span class="ident" id="3590308">Path</span>&nbsp;<span class="op" id="3590313">==</span>&nbsp;<span class="string" id="3590316">&#34;&#34;</span>&nbsp;<span class="op" id="3590319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590323">if</span>&nbsp;<span class="ident" id="3590326"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590329">.</span><span class="ident" id="3590330">RawQuery</span>&nbsp;<span class="op" id="3590339">==</span>&nbsp;<span class="string" id="3590342">&#34;&#34;</span>&nbsp;<span class="op" id="3590345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590350"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590353">.</span><span class="ident" id="3590354">RawQuery</span>&nbsp;<span class="op" id="3590363">=</span>&nbsp;<span class="ident" id="3590365"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590366">.</span><span class="ident" id="3590367">RawQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590379">if</span>&nbsp;<span class="ident" id="3590382"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590385">.</span><span class="ident" id="3590386">Fragment</span>&nbsp;<span class="op" id="3590395">==</span>&nbsp;<span class="string" id="3590398">&#34;&#34;</span>&nbsp;<span class="op" id="3590401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590407"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590410">.</span><span class="ident" id="3590411">Fragment</span>&nbsp;<span class="op" id="3590420">=</span>&nbsp;<span class="ident" id="3590422"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590423">.</span><span class="ident" id="3590424">Fragment</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3590446">//&nbsp;The&nbsp;&#34;abs_path&#34;&nbsp;or&nbsp;&#34;rel_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590486"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590489">.</span><span class="ident" id="3590490">Host</span>&nbsp;<span class="op" id="3590495">=</span>&nbsp;<span class="ident" id="3590497"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590498">.</span><span class="ident" id="3590499">Host</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590505"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590508">.</span><span class="ident" id="3590509">User</span>&nbsp;<span class="op" id="3590514">=</span>&nbsp;<span class="ident" id="3590516"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590517">.</span><span class="ident" id="3590518">User</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590524"><a href="/net/url/url.go.html#3589989">url</a></span><span class="op" id="3590527">.</span><span class="ident" id="3590528">Path</span>&nbsp;<span class="op" id="3590533">=</span>&nbsp;<span class="ident" id="3590535"><a href="/net/url/url.go.html#3588429">resolvePath</a></span><span class="op" id="3590546">(</span><span class="ident" id="3590547"><a href="/net/url/url.go.html#3589946">u</a></span><span class="op" id="3590548">.</span><span class="ident" id="3590549">Path</span><span class="op" id="3590553">,</span>&nbsp;<span class="ident" id="3590555"><a href="/net/url/url.go.html#3589971">ref</a></span><span class="op" id="3590558">.</span><span class="ident" id="3590559">Path</span><span class="op" id="3590563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590566">return</span>&nbsp;<span class="op" id="3590573">&amp;</span><span class="ident" id="3590574"><a href="/net/url/url.go.html#3589989">url</a></span><br>
<span class="lineno"></span><span class="op" id="3590578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3590581">//&nbsp;Query&nbsp;parses&nbsp;RawQuery&nbsp;and&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3590644">func</span>&nbsp;<span class="op" id="3590649">(</span><span class="ident" id="3590650">u</span>&nbsp;<span class="op" id="3590652">*</span><span class="ident" id="3590653"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3590656">)</span>&nbsp;<span class="ident" id="3590658">Query</span><span class="op" id="3590663">(</span><span class="op" id="3590664">)</span>&nbsp;<span class="ident" id="3590666"><a href="/net/url/url.go.html#3586050">Values</a></span>&nbsp;<span class="op" id="3590673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590676">v</span><span class="op" id="3590677">,</span>&nbsp;<span class="ident" id="3590679">_</span>&nbsp;<span class="op" id="3590681">:=</span>&nbsp;<span class="ident" id="3590684"><a href="/net/url/url.go.html#3587097">ParseQuery</a></span><span class="op" id="3590694">(</span><span class="ident" id="3590695"><a href="/net/url/url.go.html#3590650">u</a></span><span class="op" id="3590696">.</span><span class="ident" id="3590697">RawQuery</span><span class="op" id="3590705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590708">return</span>&nbsp;<span class="ident" id="3590715"><a href="/net/url/url.go.html#3590676">v</a></span><br>
<span class="lineno"></span><span class="op" id="3590717">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="3590720">//&nbsp;RequestURI&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;path?query&nbsp;or&nbsp;opaque?query</span><br>
<span class="lineno"></span><span class="comment" id="3590781">//&nbsp;string&nbsp;that&nbsp;would&nbsp;be&nbsp;used&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;for&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="3590836">func</span>&nbsp;<span class="op" id="3590841">(</span><span class="ident" id="3590842">u</span>&nbsp;<span class="op" id="3590844">*</span><span class="ident" id="3590845"><a href="/net/url/url.go.html#3578383">URL</a></span><span class="op" id="3590848">)</span>&nbsp;<span class="ident" id="3590850">RequestURI</span><span class="op" id="3590860">(</span><span class="op" id="3590861">)</span>&nbsp;<span class="builtintype" id="3590863">string</span>&nbsp;<span class="op" id="3590870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590873">result</span>&nbsp;<span class="op" id="3590880">:=</span>&nbsp;<span class="ident" id="3590883"><a href="/net/url/url.go.html#3590842">u</a></span><span class="op" id="3590884">.</span><span class="ident" id="3590885">Opaque</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590893">if</span>&nbsp;<span class="ident" id="3590896"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3590903">==</span>&nbsp;<span class="string" id="3590906">&#34;&#34;</span>&nbsp;<span class="op" id="3590909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590913"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3590920">=</span>&nbsp;<span class="ident" id="3590922"><a href="/net/url/url.go.html#3576895">escape</a></span><span class="op" id="3590928">(</span><span class="ident" id="3590929"><a href="/net/url/url.go.html#3590842">u</a></span><span class="op" id="3590930">.</span><span class="ident" id="3590931">Path</span><span class="op" id="3590935">,</span>&nbsp;<span class="ident" id="3590937"><a href="/net/url/url.go.html#3573796">encodePath</a></span><span class="op" id="3590947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3590951">if</span>&nbsp;<span class="ident" id="3590954"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3590961">==</span>&nbsp;<span class="string" id="3590964">&#34;&#34;</span>&nbsp;<span class="op" id="3590967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3590972"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3590979">=</span>&nbsp;<span class="string" id="3590981">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590987">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3590990">}</span>&nbsp;<span class="keyword" id="3590992">else</span>&nbsp;<span class="op" id="3590997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3591001">if</span>&nbsp;<span class="ident" id="3591004"><a href="/net/url/url.go.html#3573165">strings</a></span><span class="op" id="3591011">.</span><span class="ident" id="3591012">HasPrefix</span><span class="op" id="3591021">(</span><span class="ident" id="3591022"><a href="/net/url/url.go.html#3590873">result</a></span><span class="op" id="3591028">,</span>&nbsp;<span class="string" id="3591030">&#34;//&#34;</span><span class="op" id="3591034">)</span>&nbsp;<span class="op" id="3591036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591041"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3591048">=</span>&nbsp;<span class="ident" id="3591050"><a href="/net/url/url.go.html#3590842">u</a></span><span class="op" id="3591051">.</span><span class="ident" id="3591052">Scheme</span>&nbsp;<span class="op" id="3591059">+</span>&nbsp;<span class="string" id="3591061">&#34;:&#34;</span>&nbsp;<span class="op" id="3591065">+</span>&nbsp;<span class="ident" id="3591067"><a href="/net/url/url.go.html#3590873">result</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3591076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3591079">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3591082">if</span>&nbsp;<span class="ident" id="3591085"><a href="/net/url/url.go.html#3590842">u</a></span><span class="op" id="3591086">.</span><span class="ident" id="3591087">RawQuery</span>&nbsp;<span class="op" id="3591096">!=</span>&nbsp;<span class="string" id="3591099">&#34;&#34;</span>&nbsp;<span class="op" id="3591102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3591106"><a href="/net/url/url.go.html#3590873">result</a></span>&nbsp;<span class="op" id="3591113">+=</span>&nbsp;<span class="string" id="3591116">&#34;?&#34;</span>&nbsp;<span class="op" id="3591120">+</span>&nbsp;<span class="ident" id="3591122"><a href="/net/url/url.go.html#3590842">u</a></span><span class="op" id="3591123">.</span><span class="ident" id="3591124">RawQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3591134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3591137">return</span>&nbsp;<span class="ident" id="3591144"><a href="/net/url/url.go.html#3590873">result</a></span><br>
<span class="lineno"></span><span class="op" id="3591151">}</span>
</div>
</body>
</html>
