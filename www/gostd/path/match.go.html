<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3599015">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3599070">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3599124">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3599175">package</span>&nbsp;<span class="ident" id="3599183">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3599189">import</span>&nbsp;<span class="op" id="3599196">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3599199">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3599209">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3599220">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3599235">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3599238">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3599299">var</span>&nbsp;<span class="ident" id="3599303">ErrBadPattern</span>&nbsp;<span class="op" id="3599317">=</span>&nbsp;<span class="ident" id="3599319">errors</span><span class="op" id="3599325">.</span><span class="ident" id="3599326">New</span><span class="op" id="3599329">(</span><span class="string" id="3599330">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3599355">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3599358">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3599425">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3599451">//</span><br>
<span class="lineno"></span><span class="comment" id="3599454">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3599466">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3599479">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="3599488">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3599545">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3599596">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3599636">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3599688">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3599751">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3599787">//</span><br>
<span class="lineno"></span><span class="comment" id="3599790">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3599810">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3599868">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3599904">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3599958">//</span><br>
<span class="lineno"></span><span class="comment" id="3599961">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3600031">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3600098">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3600115">//</span><br>
<span class="lineno"></span><span class="keyword" id="3600118">func</span>&nbsp;<span class="ident" id="3600123">Match</span><span class="op" id="3600128">(</span><span class="ident" id="3600129">pattern</span><span class="op" id="3600136">,</span>&nbsp;<span class="ident" id="3600138">name</span>&nbsp;<span class="builtintype" id="3600143">string</span><span class="op" id="3600149">)</span>&nbsp;<span class="op" id="3600151">(</span><span class="ident" id="3600152">matched</span>&nbsp;<span class="builtintype" id="3600160">bool</span><span class="op" id="3600164">,</span>&nbsp;<span class="ident" id="3600166">err</span>&nbsp;<span class="builtintype" id="3600170">error</span><span class="op" id="3600175">)</span>&nbsp;<span class="op" id="3600177">{</span><br>
<span class="lineno"></span><span class="ident" id="3600179">Pattern</span><span class="op" id="3600186">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600189">for</span>&nbsp;<span class="builtinfunc" id="3600193">len</span><span class="op" id="3600196">(</span><span class="ident" id="3600197">pattern</span><span class="op" id="3600204">)</span>&nbsp;<span class="op" id="3600206">&gt;</span>&nbsp;<span class="num" id="3600208">0</span>&nbsp;<span class="op" id="3600210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600214">var</span>&nbsp;<span class="ident" id="3600218">star</span>&nbsp;<span class="builtintype" id="3600223">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600230">var</span>&nbsp;<span class="ident" id="3600234">chunk</span>&nbsp;<span class="builtintype" id="3600240">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600249">star</span><span class="op" id="3600253">,</span>&nbsp;<span class="ident" id="3600255">chunk</span><span class="op" id="3600260">,</span>&nbsp;<span class="ident" id="3600262">pattern</span>&nbsp;<span class="op" id="3600270">=</span>&nbsp;<span class="ident" id="3600272">scanChunk</span><span class="op" id="3600281">(</span><span class="ident" id="3600282">pattern</span><span class="op" id="3600289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600293">if</span>&nbsp;<span class="ident" id="3600296">star</span>&nbsp;<span class="op" id="3600301">&amp;&amp;</span>&nbsp;<span class="ident" id="3600304">chunk</span>&nbsp;<span class="op" id="3600310">==</span>&nbsp;<span class="string" id="3600313">&#34;&#34;</span>&nbsp;<span class="op" id="3600316">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600321">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600380">return</span>&nbsp;<span class="ident" id="3600387">strings</span><span class="op" id="3600394">.</span><span class="ident" id="3600395">Index</span><span class="op" id="3600400">(</span><span class="ident" id="3600401">name</span><span class="op" id="3600405">,</span>&nbsp;<span class="string" id="3600407">&#34;/&#34;</span><span class="op" id="3600410">)</span>&nbsp;<span class="op" id="3600412">&lt;</span>&nbsp;<span class="num" id="3600414">0</span><span class="op" id="3600415">,</span>&nbsp;<span class="ident" id="3600417">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3600423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600427">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600468">t</span><span class="op" id="3600469">,</span>&nbsp;<span class="ident" id="3600471">ok</span><span class="op" id="3600473">,</span>&nbsp;<span class="ident" id="3600475">err</span>&nbsp;<span class="op" id="3600479">:=</span>&nbsp;<span class="ident" id="3600482">matchChunk</span><span class="op" id="3600492">(</span><span class="ident" id="3600493">chunk</span><span class="op" id="3600498">,</span>&nbsp;<span class="ident" id="3600500">name</span><span class="op" id="3600504">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600508">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600573">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600643">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600663">if</span>&nbsp;<span class="ident" id="3600666">ok</span>&nbsp;<span class="op" id="3600669">&amp;&amp;</span>&nbsp;<span class="op" id="3600672">(</span><span class="builtinfunc" id="3600673">len</span><span class="op" id="3600676">(</span><span class="ident" id="3600677">t</span><span class="op" id="3600678">)</span>&nbsp;<span class="op" id="3600680">==</span>&nbsp;<span class="num" id="3600683">0</span>&nbsp;<span class="op" id="3600685">||</span>&nbsp;<span class="builtinfunc" id="3600688">len</span><span class="op" id="3600691">(</span><span class="ident" id="3600692">pattern</span><span class="op" id="3600699">)</span>&nbsp;<span class="op" id="3600701">&gt;</span>&nbsp;<span class="num" id="3600703">0</span><span class="op" id="3600704">)</span>&nbsp;<span class="op" id="3600706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600711">name</span>&nbsp;<span class="op" id="3600716">=</span>&nbsp;<span class="ident" id="3600718">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600723">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3600734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600738">if</span>&nbsp;<span class="ident" id="3600741">err</span>&nbsp;<span class="op" id="3600745">!=</span>&nbsp;<span class="ident" id="3600748">nil</span>&nbsp;<span class="op" id="3600752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600757">return</span>&nbsp;<span class="builtintype" id="3600764">false</span><span class="op" id="3600769">,</span>&nbsp;<span class="ident" id="3600771">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3600777">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600781">if</span>&nbsp;<span class="ident" id="3600784">star</span>&nbsp;<span class="op" id="3600789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600794">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600835">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600856">for</span>&nbsp;<span class="ident" id="3600860">i</span>&nbsp;<span class="op" id="3600862">:=</span>&nbsp;<span class="num" id="3600865">0</span><span class="op" id="3600866">;</span>&nbsp;<span class="ident" id="3600868">i</span>&nbsp;<span class="op" id="3600870">&lt;</span>&nbsp;<span class="builtinfunc" id="3600872">len</span><span class="op" id="3600875">(</span><span class="ident" id="3600876">name</span><span class="op" id="3600880">)</span>&nbsp;<span class="op" id="3600882">&amp;&amp;</span>&nbsp;<span class="ident" id="3600885">name</span><span class="op" id="3600889">[</span><span class="ident" id="3600890">i</span><span class="op" id="3600891">]</span>&nbsp;<span class="op" id="3600893">!=</span>&nbsp;<span class="string" id="3600896">&#39;/&#39;</span><span class="op" id="3600899">;</span>&nbsp;<span class="ident" id="3600901">i</span><span class="op" id="3600902">++</span>&nbsp;<span class="op" id="3600905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3600911">t</span><span class="op" id="3600912">,</span>&nbsp;<span class="ident" id="3600914">ok</span><span class="op" id="3600916">,</span>&nbsp;<span class="ident" id="3600918">err</span>&nbsp;<span class="op" id="3600922">:=</span>&nbsp;<span class="ident" id="3600925">matchChunk</span><span class="op" id="3600935">(</span><span class="ident" id="3600936">chunk</span><span class="op" id="3600941">,</span>&nbsp;<span class="ident" id="3600943">name</span><span class="op" id="3600947">[</span><span class="ident" id="3600948">i</span><span class="op" id="3600949">+</span><span class="num" id="3600950">1</span><span class="op" id="3600951">:</span><span class="op" id="3600952">]</span><span class="op" id="3600953">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3600959">if</span>&nbsp;<span class="ident" id="3600962">ok</span>&nbsp;<span class="op" id="3600965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3600972">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601037">if</span>&nbsp;<span class="builtinfunc" id="3601040">len</span><span class="op" id="3601043">(</span><span class="ident" id="3601044">pattern</span><span class="op" id="3601051">)</span>&nbsp;<span class="op" id="3601053">==</span>&nbsp;<span class="num" id="3601056">0</span>&nbsp;<span class="op" id="3601058">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3601061">len</span><span class="op" id="3601064">(</span><span class="ident" id="3601065">t</span><span class="op" id="3601066">)</span>&nbsp;<span class="op" id="3601068">&gt;</span>&nbsp;<span class="num" id="3601070">0</span>&nbsp;<span class="op" id="3601072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601080">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601094">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601101">name</span>&nbsp;<span class="op" id="3601106">=</span>&nbsp;<span class="ident" id="3601108">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601115">continue</span>&nbsp;<span class="ident" id="3601124">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601142">if</span>&nbsp;<span class="ident" id="3601145">err</span>&nbsp;<span class="op" id="3601149">!=</span>&nbsp;<span class="ident" id="3601152">nil</span>&nbsp;<span class="op" id="3601156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601163">return</span>&nbsp;<span class="builtintype" id="3601170">false</span><span class="op" id="3601175">,</span>&nbsp;<span class="ident" id="3601177">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601198">return</span>&nbsp;<span class="builtintype" id="3601205">false</span><span class="op" id="3601210">,</span>&nbsp;<span class="ident" id="3601212">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601217">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601220">return</span>&nbsp;<span class="builtinfunc" id="3601227">len</span><span class="op" id="3601230">(</span><span class="ident" id="3601231">name</span><span class="op" id="3601235">)</span>&nbsp;<span class="op" id="3601237">==</span>&nbsp;<span class="num" id="3601240">0</span><span class="op" id="3601241">,</span>&nbsp;<span class="ident" id="3601243">nil</span><br>
<span class="lineno"></span><span class="op" id="3601247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3601250">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3601324">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3601356">func</span>&nbsp;<span class="ident" id="3601361">scanChunk</span><span class="op" id="3601370">(</span><span class="ident" id="3601371">pattern</span>&nbsp;<span class="builtintype" id="3601379">string</span><span class="op" id="3601385">)</span>&nbsp;<span class="op" id="3601387">(</span><span class="ident" id="3601388">star</span>&nbsp;<span class="builtintype" id="3601393">bool</span><span class="op" id="3601397">,</span>&nbsp;<span class="ident" id="3601399">chunk</span><span class="op" id="3601404">,</span>&nbsp;<span class="ident" id="3601406">rest</span>&nbsp;<span class="builtintype" id="3601411">string</span><span class="op" id="3601417">)</span>&nbsp;<span class="op" id="3601419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601422">for</span>&nbsp;<span class="builtinfunc" id="3601426">len</span><span class="op" id="3601429">(</span><span class="ident" id="3601430">pattern</span><span class="op" id="3601437">)</span>&nbsp;<span class="op" id="3601439">&gt;</span>&nbsp;<span class="num" id="3601441">0</span>&nbsp;<span class="op" id="3601443">&amp;&amp;</span>&nbsp;<span class="ident" id="3601446">pattern</span><span class="op" id="3601453">[</span><span class="num" id="3601454">0</span><span class="op" id="3601455">]</span>&nbsp;<span class="op" id="3601457">==</span>&nbsp;<span class="string" id="3601460">&#39;*&#39;</span>&nbsp;<span class="op" id="3601464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601468">pattern</span>&nbsp;<span class="op" id="3601476">=</span>&nbsp;<span class="ident" id="3601478">pattern</span><span class="op" id="3601485">[</span><span class="num" id="3601486">1</span><span class="op" id="3601487">:</span><span class="op" id="3601488">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601492">star</span>&nbsp;<span class="op" id="3601497">=</span>&nbsp;<span class="builtintype" id="3601499">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601505">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601508">inrange</span>&nbsp;<span class="op" id="3601516">:=</span>&nbsp;<span class="builtintype" id="3601519">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601526">var</span>&nbsp;<span class="ident" id="3601530">i</span>&nbsp;<span class="builtintype" id="3601532">int</span><br>
<span class="lineno"></span><span class="ident" id="3601536">Scan</span><span class="op" id="3601540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601543">for</span>&nbsp;<span class="ident" id="3601547">i</span>&nbsp;<span class="op" id="3601549">=</span>&nbsp;<span class="num" id="3601551">0</span><span class="op" id="3601552">;</span>&nbsp;<span class="ident" id="3601554">i</span>&nbsp;<span class="op" id="3601556">&lt;</span>&nbsp;<span class="builtinfunc" id="3601558">len</span><span class="op" id="3601561">(</span><span class="ident" id="3601562">pattern</span><span class="op" id="3601569">)</span><span class="op" id="3601570">;</span>&nbsp;<span class="ident" id="3601572">i</span><span class="op" id="3601573">++</span>&nbsp;<span class="op" id="3601576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601580">switch</span>&nbsp;<span class="ident" id="3601587">pattern</span><span class="op" id="3601594">[</span><span class="ident" id="3601595">i</span><span class="op" id="3601596">]</span>&nbsp;<span class="op" id="3601598">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601602">case</span>&nbsp;<span class="string" id="3601607">&#39;\\&#39;</span><span class="op" id="3601611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3601616">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601670">if</span>&nbsp;<span class="ident" id="3601673">i</span><span class="op" id="3601674">+</span><span class="num" id="3601675">1</span>&nbsp;<span class="op" id="3601677">&lt;</span>&nbsp;<span class="builtinfunc" id="3601679">len</span><span class="op" id="3601682">(</span><span class="ident" id="3601683">pattern</span><span class="op" id="3601690">)</span>&nbsp;<span class="op" id="3601692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601698">i</span><span class="op" id="3601699">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601705">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601709">case</span>&nbsp;<span class="string" id="3601714">&#39;[&#39;</span><span class="op" id="3601717">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601722">inrange</span>&nbsp;<span class="op" id="3601730">=</span>&nbsp;<span class="builtintype" id="3601732">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601739">case</span>&nbsp;<span class="string" id="3601744">&#39;]&#39;</span><span class="op" id="3601747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3601752">inrange</span>&nbsp;<span class="op" id="3601760">=</span>&nbsp;<span class="builtintype" id="3601762">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601770">case</span>&nbsp;<span class="string" id="3601775">&#39;*&#39;</span><span class="op" id="3601778">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601783">if</span>&nbsp;<span class="op" id="3601786">!</span><span class="ident" id="3601787">inrange</span>&nbsp;<span class="op" id="3601795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601801">break</span>&nbsp;<span class="ident" id="3601807">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3601822">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3601825">return</span>&nbsp;<span class="ident" id="3601832">star</span><span class="op" id="3601836">,</span>&nbsp;<span class="ident" id="3601838">pattern</span><span class="op" id="3601845">[</span><span class="num" id="3601846">0</span><span class="op" id="3601847">:</span><span class="ident" id="3601848">i</span><span class="op" id="3601849">]</span><span class="op" id="3601850">,</span>&nbsp;<span class="ident" id="3601852">pattern</span><span class="op" id="3601859">[</span><span class="ident" id="3601860">i</span><span class="op" id="3601861">:</span><span class="op" id="3601862">]</span><br>
<span class="lineno"></span><span class="op" id="3601864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3601867">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3601930">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3601989">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3602064">func</span>&nbsp;<span class="ident" id="3602069">matchChunk</span><span class="op" id="3602079">(</span><span class="ident" id="3602080">chunk</span><span class="op" id="3602085">,</span>&nbsp;<span class="ident" id="3602087">s</span>&nbsp;<span class="builtintype" id="3602089">string</span><span class="op" id="3602095">)</span>&nbsp;<span class="op" id="3602097">(</span><span class="ident" id="3602098">rest</span>&nbsp;<span class="builtintype" id="3602103">string</span><span class="op" id="3602109">,</span>&nbsp;<span class="ident" id="3602111">ok</span>&nbsp;<span class="builtintype" id="3602114">bool</span><span class="op" id="3602118">,</span>&nbsp;<span class="ident" id="3602120">err</span>&nbsp;<span class="builtintype" id="3602124">error</span><span class="op" id="3602129">)</span>&nbsp;<span class="op" id="3602131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602134">for</span>&nbsp;<span class="builtinfunc" id="3602138">len</span><span class="op" id="3602141">(</span><span class="ident" id="3602142">chunk</span><span class="op" id="3602147">)</span>&nbsp;<span class="op" id="3602149">&gt;</span>&nbsp;<span class="num" id="3602151">0</span>&nbsp;<span class="op" id="3602153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602157">if</span>&nbsp;<span class="builtinfunc" id="3602160">len</span><span class="op" id="3602163">(</span><span class="ident" id="3602164">s</span><span class="op" id="3602165">)</span>&nbsp;<span class="op" id="3602167">==</span>&nbsp;<span class="num" id="3602170">0</span>&nbsp;<span class="op" id="3602172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602177">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602190">switch</span>&nbsp;<span class="ident" id="3602197">chunk</span><span class="op" id="3602202">[</span><span class="num" id="3602203">0</span><span class="op" id="3602204">]</span>&nbsp;<span class="op" id="3602206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602210">case</span>&nbsp;<span class="string" id="3602215">&#39;[&#39;</span><span class="op" id="3602218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3602223">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602245">r</span><span class="op" id="3602246">,</span>&nbsp;<span class="ident" id="3602248">n</span>&nbsp;<span class="op" id="3602250">:=</span>&nbsp;<span class="ident" id="3602253">utf8</span><span class="op" id="3602257">.</span><span class="ident" id="3602258">DecodeRuneInString</span><span class="op" id="3602276">(</span><span class="ident" id="3602277">s</span><span class="op" id="3602278">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602283">s</span>&nbsp;<span class="op" id="3602285">=</span>&nbsp;<span class="ident" id="3602287">s</span><span class="op" id="3602288">[</span><span class="ident" id="3602289">n</span><span class="op" id="3602290">:</span><span class="op" id="3602291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602296">chunk</span>&nbsp;<span class="op" id="3602302">=</span>&nbsp;<span class="ident" id="3602304">chunk</span><span class="op" id="3602309">[</span><span class="num" id="3602310">1</span><span class="op" id="3602311">:</span><span class="op" id="3602312">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3602317">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602340">notNegated</span>&nbsp;<span class="op" id="3602351">:=</span>&nbsp;<span class="builtintype" id="3602354">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602362">if</span>&nbsp;<span class="builtinfunc" id="3602365">len</span><span class="op" id="3602368">(</span><span class="ident" id="3602369">chunk</span><span class="op" id="3602374">)</span>&nbsp;<span class="op" id="3602376">&gt;</span>&nbsp;<span class="num" id="3602378">0</span>&nbsp;<span class="op" id="3602380">&amp;&amp;</span>&nbsp;<span class="ident" id="3602383">chunk</span><span class="op" id="3602388">[</span><span class="num" id="3602389">0</span><span class="op" id="3602390">]</span>&nbsp;<span class="op" id="3602392">==</span>&nbsp;<span class="string" id="3602395">&#39;^&#39;</span>&nbsp;<span class="op" id="3602399">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602405">notNegated</span>&nbsp;<span class="op" id="3602416">=</span>&nbsp;<span class="builtintype" id="3602418">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602428">chunk</span>&nbsp;<span class="op" id="3602434">=</span>&nbsp;<span class="ident" id="3602436">chunk</span><span class="op" id="3602441">[</span><span class="num" id="3602442">1</span><span class="op" id="3602443">:</span><span class="op" id="3602444">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3602454">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602477">match</span>&nbsp;<span class="op" id="3602483">:=</span>&nbsp;<span class="builtintype" id="3602486">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602495">nrange</span>&nbsp;<span class="op" id="3602502">:=</span>&nbsp;<span class="num" id="3602505">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602510">for</span>&nbsp;<span class="op" id="3602514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602520">if</span>&nbsp;<span class="builtinfunc" id="3602523">len</span><span class="op" id="3602526">(</span><span class="ident" id="3602527">chunk</span><span class="op" id="3602532">)</span>&nbsp;<span class="op" id="3602534">&gt;</span>&nbsp;<span class="num" id="3602536">0</span>&nbsp;<span class="op" id="3602538">&amp;&amp;</span>&nbsp;<span class="ident" id="3602541">chunk</span><span class="op" id="3602546">[</span><span class="num" id="3602547">0</span><span class="op" id="3602548">]</span>&nbsp;<span class="op" id="3602550">==</span>&nbsp;<span class="string" id="3602553">&#39;]&#39;</span>&nbsp;<span class="op" id="3602557">&amp;&amp;</span>&nbsp;<span class="ident" id="3602560">nrange</span>&nbsp;<span class="op" id="3602567">&gt;</span>&nbsp;<span class="num" id="3602569">0</span>&nbsp;<span class="op" id="3602571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602578">chunk</span>&nbsp;<span class="op" id="3602584">=</span>&nbsp;<span class="ident" id="3602586">chunk</span><span class="op" id="3602591">[</span><span class="num" id="3602592">1</span><span class="op" id="3602593">:</span><span class="op" id="3602594">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602601">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602617">var</span>&nbsp;<span class="ident" id="3602621">lo</span><span class="op" id="3602623">,</span>&nbsp;<span class="ident" id="3602625">hi</span>&nbsp;<span class="builtintype" id="3602628">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602637">if</span>&nbsp;<span class="ident" id="3602640">lo</span><span class="op" id="3602642">,</span>&nbsp;<span class="ident" id="3602644">chunk</span><span class="op" id="3602649">,</span>&nbsp;<span class="ident" id="3602651">err</span>&nbsp;<span class="op" id="3602655">=</span>&nbsp;<span class="ident" id="3602657">getEsc</span><span class="op" id="3602663">(</span><span class="ident" id="3602664">chunk</span><span class="op" id="3602669">)</span><span class="op" id="3602670">;</span>&nbsp;<span class="ident" id="3602672">err</span>&nbsp;<span class="op" id="3602676">!=</span>&nbsp;<span class="ident" id="3602679">nil</span>&nbsp;<span class="op" id="3602683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602690">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602701">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602707">hi</span>&nbsp;<span class="op" id="3602710">=</span>&nbsp;<span class="ident" id="3602712">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602719">if</span>&nbsp;<span class="ident" id="3602722">chunk</span><span class="op" id="3602727">[</span><span class="num" id="3602728">0</span><span class="op" id="3602729">]</span>&nbsp;<span class="op" id="3602731">==</span>&nbsp;<span class="string" id="3602734">&#39;-&#39;</span>&nbsp;<span class="op" id="3602738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602745">if</span>&nbsp;<span class="ident" id="3602748">hi</span><span class="op" id="3602750">,</span>&nbsp;<span class="ident" id="3602752">chunk</span><span class="op" id="3602757">,</span>&nbsp;<span class="ident" id="3602759">err</span>&nbsp;<span class="op" id="3602763">=</span>&nbsp;<span class="ident" id="3602765">getEsc</span><span class="op" id="3602771">(</span><span class="ident" id="3602772">chunk</span><span class="op" id="3602777">[</span><span class="num" id="3602778">1</span><span class="op" id="3602779">:</span><span class="op" id="3602780">]</span><span class="op" id="3602781">)</span><span class="op" id="3602782">;</span>&nbsp;<span class="ident" id="3602784">err</span>&nbsp;<span class="op" id="3602788">!=</span>&nbsp;<span class="ident" id="3602791">nil</span>&nbsp;<span class="op" id="3602795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602803">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602815">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602827">if</span>&nbsp;<span class="ident" id="3602830">lo</span>&nbsp;<span class="op" id="3602833">&lt;=</span>&nbsp;<span class="ident" id="3602836">r</span>&nbsp;<span class="op" id="3602838">&amp;&amp;</span>&nbsp;<span class="ident" id="3602841">r</span>&nbsp;<span class="op" id="3602843">&lt;=</span>&nbsp;<span class="ident" id="3602846">hi</span>&nbsp;<span class="op" id="3602849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602856">match</span>&nbsp;<span class="op" id="3602862">=</span>&nbsp;<span class="builtintype" id="3602864">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602879">nrange</span><span class="op" id="3602885">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602896">if</span>&nbsp;<span class="ident" id="3602899">match</span>&nbsp;<span class="op" id="3602905">!=</span>&nbsp;<span class="ident" id="3602908">notNegated</span>&nbsp;<span class="op" id="3602919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602925">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602940">case</span>&nbsp;<span class="string" id="3602945">&#39;?&#39;</span><span class="op" id="3602948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602953">if</span>&nbsp;<span class="ident" id="3602956">s</span><span class="op" id="3602957">[</span><span class="num" id="3602958">0</span><span class="op" id="3602959">]</span>&nbsp;<span class="op" id="3602961">==</span>&nbsp;<span class="string" id="3602964">&#39;/&#39;</span>&nbsp;<span class="op" id="3602968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3602974">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3602984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3602989">_</span><span class="op" id="3602990">,</span>&nbsp;<span class="ident" id="3602992">n</span>&nbsp;<span class="op" id="3602994">:=</span>&nbsp;<span class="ident" id="3602997">utf8</span><span class="op" id="3603001">.</span><span class="ident" id="3603002">DecodeRuneInString</span><span class="op" id="3603020">(</span><span class="ident" id="3603021">s</span><span class="op" id="3603022">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603027">s</span>&nbsp;<span class="op" id="3603029">=</span>&nbsp;<span class="ident" id="3603031">s</span><span class="op" id="3603032">[</span><span class="ident" id="3603033">n</span><span class="op" id="3603034">:</span><span class="op" id="3603035">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603040">chunk</span>&nbsp;<span class="op" id="3603046">=</span>&nbsp;<span class="ident" id="3603048">chunk</span><span class="op" id="3603053">[</span><span class="num" id="3603054">1</span><span class="op" id="3603055">:</span><span class="op" id="3603056">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603061">case</span>&nbsp;<span class="string" id="3603066">&#39;\\&#39;</span><span class="op" id="3603070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603075">chunk</span>&nbsp;<span class="op" id="3603081">=</span>&nbsp;<span class="ident" id="3603083">chunk</span><span class="op" id="3603088">[</span><span class="num" id="3603089">1</span><span class="op" id="3603090">:</span><span class="op" id="3603091">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603096">if</span>&nbsp;<span class="builtinfunc" id="3603099">len</span><span class="op" id="3603102">(</span><span class="ident" id="3603103">chunk</span><span class="op" id="3603108">)</span>&nbsp;<span class="op" id="3603110">==</span>&nbsp;<span class="num" id="3603113">0</span>&nbsp;<span class="op" id="3603115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603121">err</span>&nbsp;<span class="op" id="3603125">=</span>&nbsp;<span class="ident" id="3603127">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603145">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603160">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603175">default</span><span class="op" id="3603182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603187">if</span>&nbsp;<span class="ident" id="3603190">chunk</span><span class="op" id="3603195">[</span><span class="num" id="3603196">0</span><span class="op" id="3603197">]</span>&nbsp;<span class="op" id="3603199">!=</span>&nbsp;<span class="ident" id="3603202">s</span><span class="op" id="3603203">[</span><span class="num" id="3603204">0</span><span class="op" id="3603205">]</span>&nbsp;<span class="op" id="3603207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603213">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603223">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603228">s</span>&nbsp;<span class="op" id="3603230">=</span>&nbsp;<span class="ident" id="3603232">s</span><span class="op" id="3603233">[</span><span class="num" id="3603234">1</span><span class="op" id="3603235">:</span><span class="op" id="3603236">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603241">chunk</span>&nbsp;<span class="op" id="3603247">=</span>&nbsp;<span class="ident" id="3603249">chunk</span><span class="op" id="3603254">[</span><span class="num" id="3603255">1</span><span class="op" id="3603256">:</span><span class="op" id="3603257">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603267">return</span>&nbsp;<span class="ident" id="3603274">s</span><span class="op" id="3603275">,</span>&nbsp;<span class="builtintype" id="3603277">true</span><span class="op" id="3603281">,</span>&nbsp;<span class="ident" id="3603283">nil</span><br>
<span class="lineno">185</span><span class="op" id="3603287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3603290">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3603369">func</span>&nbsp;<span class="ident" id="3603374">getEsc</span><span class="op" id="3603380">(</span><span class="ident" id="3603381">chunk</span>&nbsp;<span class="builtintype" id="3603387">string</span><span class="op" id="3603393">)</span>&nbsp;<span class="op" id="3603395">(</span><span class="ident" id="3603396">r</span>&nbsp;<span class="builtintype" id="3603398">rune</span><span class="op" id="3603402">,</span>&nbsp;<span class="ident" id="3603404">nchunk</span>&nbsp;<span class="builtintype" id="3603411">string</span><span class="op" id="3603417">,</span>&nbsp;<span class="ident" id="3603419">err</span>&nbsp;<span class="builtintype" id="3603423">error</span><span class="op" id="3603428">)</span>&nbsp;<span class="op" id="3603430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603433">if</span>&nbsp;<span class="builtinfunc" id="3603436">len</span><span class="op" id="3603439">(</span><span class="ident" id="3603440">chunk</span><span class="op" id="3603445">)</span>&nbsp;<span class="op" id="3603447">==</span>&nbsp;<span class="num" id="3603450">0</span>&nbsp;<span class="op" id="3603452">||</span>&nbsp;<span class="ident" id="3603455">chunk</span><span class="op" id="3603460">[</span><span class="num" id="3603461">0</span><span class="op" id="3603462">]</span>&nbsp;<span class="op" id="3603464">==</span>&nbsp;<span class="string" id="3603467">&#39;-&#39;</span>&nbsp;<span class="op" id="3603471">||</span>&nbsp;<span class="ident" id="3603474">chunk</span><span class="op" id="3603479">[</span><span class="num" id="3603480">0</span><span class="op" id="3603481">]</span>&nbsp;<span class="op" id="3603483">==</span>&nbsp;<span class="string" id="3603486">&#39;]&#39;</span>&nbsp;<span class="op" id="3603490">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603494">err</span>&nbsp;<span class="op" id="3603498">=</span>&nbsp;<span class="ident" id="3603500">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603516">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603527">if</span>&nbsp;<span class="ident" id="3603530">chunk</span><span class="op" id="3603535">[</span><span class="num" id="3603536">0</span><span class="op" id="3603537">]</span>&nbsp;<span class="op" id="3603539">==</span>&nbsp;<span class="string" id="3603542">&#39;\\&#39;</span>&nbsp;<span class="op" id="3603547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603551">chunk</span>&nbsp;<span class="op" id="3603557">=</span>&nbsp;<span class="ident" id="3603559">chunk</span><span class="op" id="3603564">[</span><span class="num" id="3603565">1</span><span class="op" id="3603566">:</span><span class="op" id="3603567">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603571">if</span>&nbsp;<span class="builtinfunc" id="3603574">len</span><span class="op" id="3603577">(</span><span class="ident" id="3603578">chunk</span><span class="op" id="3603583">)</span>&nbsp;<span class="op" id="3603585">==</span>&nbsp;<span class="num" id="3603588">0</span>&nbsp;<span class="op" id="3603590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603595">err</span>&nbsp;<span class="op" id="3603599">=</span>&nbsp;<span class="ident" id="3603601">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603618">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603630">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603633">r</span><span class="op" id="3603634">,</span>&nbsp;<span class="ident" id="3603636">n</span>&nbsp;<span class="op" id="3603638">:=</span>&nbsp;<span class="ident" id="3603641">utf8</span><span class="op" id="3603645">.</span><span class="ident" id="3603646">DecodeRuneInString</span><span class="op" id="3603664">(</span><span class="ident" id="3603665">chunk</span><span class="op" id="3603670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603673">if</span>&nbsp;<span class="ident" id="3603676">r</span>&nbsp;<span class="op" id="3603678">==</span>&nbsp;<span class="ident" id="3603681">utf8</span><span class="op" id="3603685">.</span><span class="ident" id="3603686">RuneError</span>&nbsp;<span class="op" id="3603696">&amp;&amp;</span>&nbsp;<span class="ident" id="3603699">n</span>&nbsp;<span class="op" id="3603701">==</span>&nbsp;<span class="num" id="3603704">1</span>&nbsp;<span class="op" id="3603706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603710">err</span>&nbsp;<span class="op" id="3603714">=</span>&nbsp;<span class="ident" id="3603716">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603734">nchunk</span>&nbsp;<span class="op" id="3603741">=</span>&nbsp;<span class="ident" id="3603743">chunk</span><span class="op" id="3603748">[</span><span class="ident" id="3603749">n</span><span class="op" id="3603750">:</span><span class="op" id="3603751">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603754">if</span>&nbsp;<span class="builtinfunc" id="3603757">len</span><span class="op" id="3603760">(</span><span class="ident" id="3603761">nchunk</span><span class="op" id="3603767">)</span>&nbsp;<span class="op" id="3603769">==</span>&nbsp;<span class="num" id="3603772">0</span>&nbsp;<span class="op" id="3603774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3603778">err</span>&nbsp;<span class="op" id="3603782">=</span>&nbsp;<span class="ident" id="3603784">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3603799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3603802">return</span><br>
<span class="lineno"></span><span class="op" id="3603809">}</span>
</div>
</body>
</html>
