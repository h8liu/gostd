<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1458502">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1458558">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1458612">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1458663">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1458728">package</span>&nbsp;<span class="ident" id="1458736">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1458741">import</span>&nbsp;<span class="op" id="1458748">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1458751">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1458761">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="1458768">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1458771">var</span>&nbsp;<span class="ident" id="1458775">onceReadProtocols</span>&nbsp;<span class="ident" id="1458793"><a href="/net/lookup_unix.go.html#1458761">sync</a></span><span class="op" id="1458797">.</span><span class="ident" id="1458798">Once</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1458804">//&nbsp;readProtocols&nbsp;loads&nbsp;contents&nbsp;of&nbsp;/etc/protocols&nbsp;into&nbsp;protocols&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="1458873">//&nbsp;for&nbsp;quick&nbsp;access.</span><br>
<span class="lineno"></span><span class="keyword" id="1458894">func</span>&nbsp;<span class="ident" id="1458899">readProtocols</span><span class="op" id="1458912">(</span><span class="op" id="1458913">)</span>&nbsp;<span class="op" id="1458915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1458918">if</span>&nbsp;<span class="ident" id="1458921">file</span><span class="op" id="1458925">,</span>&nbsp;<span class="ident" id="1458927">err</span>&nbsp;<span class="op" id="1458931">:=</span>&nbsp;<span class="ident" id="1458934"><a href="/net/parse.go.html#1476797">open</a></span><span class="op" id="1458938">(</span><span class="string" id="1458939">&#34;/etc/protocols&#34;</span><span class="op" id="1458955">)</span><span class="op" id="1458956">;</span>&nbsp;<span class="ident" id="1458958"><a href="/net/lookup_unix.go.html#1458927">err</a></span>&nbsp;<span class="op" id="1458962">==</span>&nbsp;<span class="ident" id="1458965">nil</span>&nbsp;<span class="op" id="1458969">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1458973">for</span>&nbsp;<span class="ident" id="1458977">line</span><span class="op" id="1458981">,</span>&nbsp;<span class="ident" id="1458983">ok</span>&nbsp;<span class="op" id="1458986">:=</span>&nbsp;<span class="ident" id="1458989"><a href="/net/lookup_unix.go.html#1458921">file</a></span><span class="op" id="1458993">.</span><span class="ident" id="1458994">readLine</span><span class="op" id="1459002">(</span><span class="op" id="1459003">)</span><span class="op" id="1459004">;</span>&nbsp;<span class="ident" id="1459006"><a href="/net/lookup_unix.go.html#1458983">ok</a></span><span class="op" id="1459008">;</span>&nbsp;<span class="ident" id="1459010"><a href="/net/lookup_unix.go.html#1458977">line</a></span><span class="op" id="1459014">,</span>&nbsp;<span class="ident" id="1459016"><a href="/net/lookup_unix.go.html#1458983">ok</a></span>&nbsp;<span class="op" id="1459019">=</span>&nbsp;<span class="ident" id="1459021"><a href="/net/lookup_unix.go.html#1458921">file</a></span><span class="op" id="1459025">.</span><span class="ident" id="1459026">readLine</span><span class="op" id="1459034">(</span><span class="op" id="1459035">)</span>&nbsp;<span class="op" id="1459037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1459042">//&nbsp;tcp&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;TCP&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;transmission&nbsp;control&nbsp;protocol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459098">if</span>&nbsp;<span class="ident" id="1459101">i</span>&nbsp;<span class="op" id="1459103">:=</span>&nbsp;<span class="ident" id="1459106"><a href="/net/parse.go.html#1476969">byteIndex</a></span><span class="op" id="1459115">(</span><span class="ident" id="1459116"><a href="/net/lookup_unix.go.html#1458977">line</a></span><span class="op" id="1459120">,</span>&nbsp;<span class="string" id="1459122">&#39;#&#39;</span><span class="op" id="1459125">)</span><span class="op" id="1459126">;</span>&nbsp;<span class="ident" id="1459128"><a href="/net/lookup_unix.go.html#1459101">i</a></span>&nbsp;<span class="op" id="1459130">&gt;=</span>&nbsp;<span class="num" id="1459133">0</span>&nbsp;<span class="op" id="1459135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459141"><a href="/net/lookup_unix.go.html#1458977">line</a></span>&nbsp;<span class="op" id="1459146">=</span>&nbsp;<span class="ident" id="1459148"><a href="/net/lookup_unix.go.html#1458977">line</a></span><span class="op" id="1459152">[</span><span class="num" id="1459153">0</span><span class="op" id="1459154">:</span><span class="ident" id="1459155"><a href="/net/lookup_unix.go.html#1459101">i</a></span><span class="op" id="1459156">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459161">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459166">f</span>&nbsp;<span class="op" id="1459168">:=</span>&nbsp;<span class="ident" id="1459171"><a href="/net/parse.go.html#1477633">getFields</a></span><span class="op" id="1459180">(</span><span class="ident" id="1459181"><a href="/net/lookup_unix.go.html#1458977">line</a></span><span class="op" id="1459185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459190">if</span>&nbsp;<span class="builtinfunc" id="1459193">len</span><span class="op" id="1459196">(</span><span class="ident" id="1459197"><a href="/net/lookup_unix.go.html#1459166">f</a></span><span class="op" id="1459198">)</span>&nbsp;<span class="op" id="1459200">&lt;</span>&nbsp;<span class="num" id="1459202">2</span>&nbsp;<span class="op" id="1459204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459210">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459227">if</span>&nbsp;<span class="ident" id="1459230">proto</span><span class="op" id="1459235">,</span>&nbsp;<span class="ident" id="1459237">_</span><span class="op" id="1459238">,</span>&nbsp;<span class="ident" id="1459240">ok</span>&nbsp;<span class="op" id="1459243">:=</span>&nbsp;<span class="ident" id="1459246"><a href="/net/parse.go.html#1477870">dtoi</a></span><span class="op" id="1459250">(</span><span class="ident" id="1459251"><a href="/net/lookup_unix.go.html#1459166">f</a></span><span class="op" id="1459252">[</span><span class="num" id="1459253">1</span><span class="op" id="1459254">]</span><span class="op" id="1459255">,</span>&nbsp;<span class="num" id="1459257">0</span><span class="op" id="1459258">)</span><span class="op" id="1459259">;</span>&nbsp;<span class="ident" id="1459261"><a href="/net/lookup_unix.go.html#1459240">ok</a></span>&nbsp;<span class="op" id="1459264">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459270">if</span>&nbsp;<span class="ident" id="1459273">_</span><span class="op" id="1459274">,</span>&nbsp;<span class="ident" id="1459276">ok</span>&nbsp;<span class="op" id="1459279">:=</span>&nbsp;<span class="ident" id="1459282"><a href="/net/lookup.go.html#1454466">protocols</a></span><span class="op" id="1459291">[</span><span class="ident" id="1459292"><a href="/net/lookup_unix.go.html#1459166">f</a></span><span class="op" id="1459293">[</span><span class="num" id="1459294">0</span><span class="op" id="1459295">]</span><span class="op" id="1459296">]</span><span class="op" id="1459297">;</span>&nbsp;<span class="op" id="1459299">!</span><span class="ident" id="1459300"><a href="/net/lookup_unix.go.html#1459276">ok</a></span>&nbsp;<span class="op" id="1459303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459310"><a href="/net/lookup.go.html#1454466">protocols</a></span><span class="op" id="1459319">[</span><span class="ident" id="1459320"><a href="/net/lookup_unix.go.html#1459166">f</a></span><span class="op" id="1459321">[</span><span class="num" id="1459322">0</span><span class="op" id="1459323">]</span><span class="op" id="1459324">]</span>&nbsp;<span class="op" id="1459326">=</span>&nbsp;<span class="ident" id="1459328"><a href="/net/lookup_unix.go.html#1459230">proto</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459344">for</span>&nbsp;<span class="ident" id="1459348">_</span><span class="op" id="1459349">,</span>&nbsp;<span class="ident" id="1459351">alias</span>&nbsp;<span class="op" id="1459357">:=</span>&nbsp;<span class="keyword" id="1459360">range</span>&nbsp;<span class="ident" id="1459366"><a href="/net/lookup_unix.go.html#1459166">f</a></span><span class="op" id="1459367">[</span><span class="num" id="1459368">2</span><span class="op" id="1459369">:</span><span class="op" id="1459370">]</span>&nbsp;<span class="op" id="1459372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459379">if</span>&nbsp;<span class="ident" id="1459382">_</span><span class="op" id="1459383">,</span>&nbsp;<span class="ident" id="1459385">ok</span>&nbsp;<span class="op" id="1459388">:=</span>&nbsp;<span class="ident" id="1459391"><a href="/net/lookup.go.html#1454466">protocols</a></span><span class="op" id="1459400">[</span><span class="ident" id="1459401"><a href="/net/lookup_unix.go.html#1459351">alias</a></span><span class="op" id="1459406">]</span><span class="op" id="1459407">;</span>&nbsp;<span class="op" id="1459409">!</span><span class="ident" id="1459410"><a href="/net/lookup_unix.go.html#1459385">ok</a></span>&nbsp;<span class="op" id="1459413">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459421"><a href="/net/lookup.go.html#1454466">protocols</a></span><span class="op" id="1459430">[</span><span class="ident" id="1459431"><a href="/net/lookup_unix.go.html#1459351">alias</a></span><span class="op" id="1459436">]</span>&nbsp;<span class="op" id="1459438">=</span>&nbsp;<span class="ident" id="1459440"><a href="/net/lookup_unix.go.html#1459230">proto</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459466">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459470"><a href="/net/lookup_unix.go.html#1458921">file</a></span><span class="op" id="1459474">.</span><span class="builtinfunc" id="1459475">close</span><span class="op" id="1459480">(</span><span class="op" id="1459481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459484">}</span><br>
<span class="lineno"></span><span class="op" id="1459486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1459489">//&nbsp;lookupProtocol&nbsp;looks&nbsp;up&nbsp;IP&nbsp;protocol&nbsp;name&nbsp;in&nbsp;/etc/protocols&nbsp;and</span><br>
<span class="lineno">45</span><span class="comment" id="1459555">//&nbsp;returns&nbsp;correspondent&nbsp;protocol&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="1459597">func</span>&nbsp;<span class="ident" id="1459602">lookupProtocol</span><span class="op" id="1459616">(</span><span class="ident" id="1459617">name</span>&nbsp;<span class="builtintype" id="1459622">string</span><span class="op" id="1459628">)</span>&nbsp;<span class="op" id="1459630">(</span><span class="ident" id="1459631">proto</span>&nbsp;<span class="builtintype" id="1459637">int</span><span class="op" id="1459640">,</span>&nbsp;<span class="ident" id="1459642">err</span>&nbsp;<span class="builtintype" id="1459646">error</span><span class="op" id="1459651">)</span>&nbsp;<span class="op" id="1459653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459656"><a href="/net/lookup_unix.go.html#1458775">onceReadProtocols</a></span><span class="op" id="1459673">.</span><span class="ident" id="1459674">Do</span><span class="op" id="1459676">(</span><span class="ident" id="1459677"><a href="/net/lookup_unix.go.html#1458899">readProtocols</a></span><span class="op" id="1459690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459693"><a href="/net/lookup_unix.go.html#1459631">proto</a></span><span class="op" id="1459698">,</span>&nbsp;<span class="ident" id="1459700">found</span>&nbsp;<span class="op" id="1459706">:=</span>&nbsp;<span class="ident" id="1459709"><a href="/net/lookup.go.html#1454466">protocols</a></span><span class="op" id="1459718">[</span><span class="ident" id="1459719"><a href="/net/lookup_unix.go.html#1459617">name</a></span><span class="op" id="1459723">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459726">if</span>&nbsp;<span class="op" id="1459729">!</span><span class="ident" id="1459730"><a href="/net/lookup_unix.go.html#1459700">found</a></span>&nbsp;<span class="op" id="1459736">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459740">return</span>&nbsp;<span class="num" id="1459747">0</span><span class="op" id="1459748">,</span>&nbsp;<span class="ident" id="1459750"><a href="/net/lookup_unix.go.html#1458751">errors</a></span><span class="op" id="1459756">.</span><span class="ident" id="1459757">New</span><span class="op" id="1459760">(</span><span class="string" id="1459761">&#34;unknown&nbsp;IP&nbsp;protocol&nbsp;specified:&nbsp;&#34;</span>&nbsp;<span class="op" id="1459795">+</span>&nbsp;<span class="ident" id="1459797"><a href="/net/lookup_unix.go.html#1459617">name</a></span><span class="op" id="1459801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459807">return</span><br>
<span class="lineno"></span><span class="op" id="1459814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="1459817">func</span>&nbsp;<span class="ident" id="1459822">lookupHost</span><span class="op" id="1459832">(</span><span class="ident" id="1459833">host</span>&nbsp;<span class="builtintype" id="1459838">string</span><span class="op" id="1459844">)</span>&nbsp;<span class="op" id="1459846">(</span><span class="ident" id="1459847">addrs</span>&nbsp;<span class="op" id="1459853">[</span><span class="op" id="1459854">]</span><span class="builtintype" id="1459855">string</span><span class="op" id="1459861">,</span>&nbsp;<span class="ident" id="1459863">err</span>&nbsp;<span class="builtintype" id="1459867">error</span><span class="op" id="1459872">)</span>&nbsp;<span class="op" id="1459874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459877"><a href="/net/lookup_unix.go.html#1459847">addrs</a></span><span class="op" id="1459882">,</span>&nbsp;<span class="ident" id="1459884"><a href="/net/lookup_unix.go.html#1459863">err</a></span><span class="op" id="1459887">,</span>&nbsp;<span class="ident" id="1459889">ok</span>&nbsp;<span class="op" id="1459892">:=</span>&nbsp;<span class="ident" id="1459895"><a href="/net/cgo_stub.go.html#1329810">cgoLookupHost</a></span><span class="op" id="1459908">(</span><span class="ident" id="1459909"><a href="/net/lookup_unix.go.html#1459833">host</a></span><span class="op" id="1459913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459916">if</span>&nbsp;<span class="op" id="1459919">!</span><span class="ident" id="1459920"><a href="/net/lookup_unix.go.html#1459889">ok</a></span>&nbsp;<span class="op" id="1459923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1459927"><a href="/net/lookup_unix.go.html#1459847">addrs</a></span><span class="op" id="1459932">,</span>&nbsp;<span class="ident" id="1459934"><a href="/net/lookup_unix.go.html#1459863">err</a></span>&nbsp;<span class="op" id="1459938">=</span>&nbsp;<span class="ident" id="1459940"><a href="/net/dnsclient_unix.go.html#1354022">goLookupHost</a></span><span class="op" id="1459952">(</span><span class="ident" id="1459953"><a href="/net/lookup_unix.go.html#1459833">host</a></span><span class="op" id="1459957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1459960">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1459963">return</span><br>
<span class="lineno"></span><span class="op" id="1459970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1459973">func</span>&nbsp;<span class="ident" id="1459978">lookupIP</span><span class="op" id="1459986">(</span><span class="ident" id="1459987">host</span>&nbsp;<span class="builtintype" id="1459992">string</span><span class="op" id="1459998">)</span>&nbsp;<span class="op" id="1460000">(</span><span class="ident" id="1460001">addrs</span>&nbsp;<span class="op" id="1460007">[</span><span class="op" id="1460008">]</span><span class="ident" id="1460009"><a href="/net/ip.go.html#1417189">IP</a></span><span class="op" id="1460011">,</span>&nbsp;<span class="ident" id="1460013">err</span>&nbsp;<span class="builtintype" id="1460017">error</span><span class="op" id="1460022">)</span>&nbsp;<span class="op" id="1460024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460027"><a href="/net/lookup_unix.go.html#1460001">addrs</a></span><span class="op" id="1460032">,</span>&nbsp;<span class="ident" id="1460034"><a href="/net/lookup_unix.go.html#1460013">err</a></span><span class="op" id="1460037">,</span>&nbsp;<span class="ident" id="1460039">ok</span>&nbsp;<span class="op" id="1460042">:=</span>&nbsp;<span class="ident" id="1460045"><a href="/net/cgo_stub.go.html#1330024">cgoLookupIP</a></span><span class="op" id="1460056">(</span><span class="ident" id="1460057"><a href="/net/lookup_unix.go.html#1459987">host</a></span><span class="op" id="1460061">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460064">if</span>&nbsp;<span class="op" id="1460067">!</span><span class="ident" id="1460068"><a href="/net/lookup_unix.go.html#1460039">ok</a></span>&nbsp;<span class="op" id="1460071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460075"><a href="/net/lookup_unix.go.html#1460001">addrs</a></span><span class="op" id="1460080">,</span>&nbsp;<span class="ident" id="1460082"><a href="/net/lookup_unix.go.html#1460013">err</a></span>&nbsp;<span class="op" id="1460086">=</span>&nbsp;<span class="ident" id="1460088"><a href="/net/dnsclient_unix.go.html#1354683">goLookupIP</a></span><span class="op" id="1460098">(</span><span class="ident" id="1460099"><a href="/net/lookup_unix.go.html#1459987">host</a></span><span class="op" id="1460103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460109">return</span><br>
<span class="lineno"></span><span class="op" id="1460116">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="1460119">func</span>&nbsp;<span class="ident" id="1460124">lookupPort</span><span class="op" id="1460134">(</span><span class="ident" id="1460135">network</span><span class="op" id="1460142">,</span>&nbsp;<span class="ident" id="1460144">service</span>&nbsp;<span class="builtintype" id="1460152">string</span><span class="op" id="1460158">)</span>&nbsp;<span class="op" id="1460160">(</span><span class="ident" id="1460161">port</span>&nbsp;<span class="builtintype" id="1460166">int</span><span class="op" id="1460169">,</span>&nbsp;<span class="ident" id="1460171">err</span>&nbsp;<span class="builtintype" id="1460175">error</span><span class="op" id="1460180">)</span>&nbsp;<span class="op" id="1460182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460185"><a href="/net/lookup_unix.go.html#1460161">port</a></span><span class="op" id="1460189">,</span>&nbsp;<span class="ident" id="1460191"><a href="/net/lookup_unix.go.html#1460171">err</a></span><span class="op" id="1460194">,</span>&nbsp;<span class="ident" id="1460196">ok</span>&nbsp;<span class="op" id="1460199">:=</span>&nbsp;<span class="ident" id="1460202"><a href="/net/cgo_stub.go.html#1329915">cgoLookupPort</a></span><span class="op" id="1460215">(</span><span class="ident" id="1460216"><a href="/net/lookup_unix.go.html#1460135">network</a></span><span class="op" id="1460223">,</span>&nbsp;<span class="ident" id="1460225"><a href="/net/lookup_unix.go.html#1460144">service</a></span><span class="op" id="1460232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460235">if</span>&nbsp;<span class="op" id="1460238">!</span><span class="ident" id="1460239"><a href="/net/lookup_unix.go.html#1460196">ok</a></span>&nbsp;<span class="op" id="1460242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460246"><a href="/net/lookup_unix.go.html#1460161">port</a></span><span class="op" id="1460250">,</span>&nbsp;<span class="ident" id="1460252"><a href="/net/lookup_unix.go.html#1460171">err</a></span>&nbsp;<span class="op" id="1460256">=</span>&nbsp;<span class="ident" id="1460258"><a href="/net/port_unix.go.html#1483506">goLookupPort</a></span><span class="op" id="1460270">(</span><span class="ident" id="1460271"><a href="/net/lookup_unix.go.html#1460135">network</a></span><span class="op" id="1460278">,</span>&nbsp;<span class="ident" id="1460280"><a href="/net/lookup_unix.go.html#1460144">service</a></span><span class="op" id="1460287">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460293">return</span><br>
<span class="lineno"></span><span class="op" id="1460300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460303">func</span>&nbsp;<span class="ident" id="1460308">lookupCNAME</span><span class="op" id="1460319">(</span><span class="ident" id="1460320">name</span>&nbsp;<span class="builtintype" id="1460325">string</span><span class="op" id="1460331">)</span>&nbsp;<span class="op" id="1460333">(</span><span class="ident" id="1460334">cname</span>&nbsp;<span class="builtintype" id="1460340">string</span><span class="op" id="1460346">,</span>&nbsp;<span class="ident" id="1460348">err</span>&nbsp;<span class="builtintype" id="1460352">error</span><span class="op" id="1460357">)</span>&nbsp;<span class="op" id="1460359">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460362"><a href="/net/lookup_unix.go.html#1460334">cname</a></span><span class="op" id="1460367">,</span>&nbsp;<span class="ident" id="1460369"><a href="/net/lookup_unix.go.html#1460348">err</a></span><span class="op" id="1460372">,</span>&nbsp;<span class="ident" id="1460374">ok</span>&nbsp;<span class="op" id="1460377">:=</span>&nbsp;<span class="ident" id="1460380"><a href="/net/cgo_stub.go.html#1330123">cgoLookupCNAME</a></span><span class="op" id="1460394">(</span><span class="ident" id="1460395"><a href="/net/lookup_unix.go.html#1460320">name</a></span><span class="op" id="1460399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460402">if</span>&nbsp;<span class="op" id="1460405">!</span><span class="ident" id="1460406"><a href="/net/lookup_unix.go.html#1460374">ok</a></span>&nbsp;<span class="op" id="1460409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460413"><a href="/net/lookup_unix.go.html#1460334">cname</a></span><span class="op" id="1460418">,</span>&nbsp;<span class="ident" id="1460420"><a href="/net/lookup_unix.go.html#1460348">err</a></span>&nbsp;<span class="op" id="1460424">=</span>&nbsp;<span class="ident" id="1460426"><a href="/net/dnsclient_unix.go.html#1355984">goLookupCNAME</a></span><span class="op" id="1460439">(</span><span class="ident" id="1460440"><a href="/net/lookup_unix.go.html#1460320">name</a></span><span class="op" id="1460444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460450">return</span><br>
<span class="lineno">85</span><span class="op" id="1460457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460460">func</span>&nbsp;<span class="ident" id="1460465">lookupSRV</span><span class="op" id="1460474">(</span><span class="ident" id="1460475">service</span><span class="op" id="1460482">,</span>&nbsp;<span class="ident" id="1460484">proto</span><span class="op" id="1460489">,</span>&nbsp;<span class="ident" id="1460491">name</span>&nbsp;<span class="builtintype" id="1460496">string</span><span class="op" id="1460502">)</span>&nbsp;<span class="op" id="1460504">(</span><span class="ident" id="1460505">cname</span>&nbsp;<span class="builtintype" id="1460511">string</span><span class="op" id="1460517">,</span>&nbsp;<span class="ident" id="1460519">addrs</span>&nbsp;<span class="op" id="1460525">[</span><span class="op" id="1460526">]</span><span class="op" id="1460527">*</span><span class="ident" id="1460528"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="1460531">,</span>&nbsp;<span class="ident" id="1460533">err</span>&nbsp;<span class="builtintype" id="1460537">error</span><span class="op" id="1460542">)</span>&nbsp;<span class="op" id="1460544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460547">var</span>&nbsp;<span class="ident" id="1460551">target</span>&nbsp;<span class="builtintype" id="1460558">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460566">if</span>&nbsp;<span class="ident" id="1460569"><a href="/net/lookup_unix.go.html#1460475">service</a></span>&nbsp;<span class="op" id="1460577">==</span>&nbsp;<span class="string" id="1460580">&#34;&#34;</span>&nbsp;<span class="op" id="1460583">&amp;&amp;</span>&nbsp;<span class="ident" id="1460586"><a href="/net/lookup_unix.go.html#1460484">proto</a></span>&nbsp;<span class="op" id="1460592">==</span>&nbsp;<span class="string" id="1460595">&#34;&#34;</span>&nbsp;<span class="op" id="1460598">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460602"><a href="/net/lookup_unix.go.html#1460551">target</a></span>&nbsp;<span class="op" id="1460609">=</span>&nbsp;<span class="ident" id="1460611"><a href="/net/lookup_unix.go.html#1460491">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460617">}</span>&nbsp;<span class="keyword" id="1460619">else</span>&nbsp;<span class="op" id="1460624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460628"><a href="/net/lookup_unix.go.html#1460551">target</a></span>&nbsp;<span class="op" id="1460635">=</span>&nbsp;<span class="string" id="1460637">&#34;_&#34;</span>&nbsp;<span class="op" id="1460641">+</span>&nbsp;<span class="ident" id="1460643"><a href="/net/lookup_unix.go.html#1460475">service</a></span>&nbsp;<span class="op" id="1460651">+</span>&nbsp;<span class="string" id="1460653">&#34;._&#34;</span>&nbsp;<span class="op" id="1460658">+</span>&nbsp;<span class="ident" id="1460660"><a href="/net/lookup_unix.go.html#1460484">proto</a></span>&nbsp;<span class="op" id="1460666">+</span>&nbsp;<span class="string" id="1460668">&#34;.&#34;</span>&nbsp;<span class="op" id="1460672">+</span>&nbsp;<span class="ident" id="1460674"><a href="/net/lookup_unix.go.html#1460491">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460683">var</span>&nbsp;<span class="ident" id="1460687">records</span>&nbsp;<span class="op" id="1460695">[</span><span class="op" id="1460696">]</span><span class="ident" id="1460697"><a href="/net/dnsmsg.go.html#1362702">dnsRR</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460704"><a href="/net/lookup_unix.go.html#1460505">cname</a></span><span class="op" id="1460709">,</span>&nbsp;<span class="ident" id="1460711"><a href="/net/lookup_unix.go.html#1460687">records</a></span><span class="op" id="1460718">,</span>&nbsp;<span class="ident" id="1460720"><a href="/net/lookup_unix.go.html#1460533">err</a></span>&nbsp;<span class="op" id="1460724">=</span>&nbsp;<span class="ident" id="1460726"><a href="/net/dnsclient_unix.go.html#1352125">lookup</a></span><span class="op" id="1460732">(</span><span class="ident" id="1460733"><a href="/net/lookup_unix.go.html#1460551">target</a></span><span class="op" id="1460739">,</span>&nbsp;<span class="ident" id="1460741"><a href="/net/dnsmsg.go.html#1360018">dnsTypeSRV</a></span><span class="op" id="1460751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460754">if</span>&nbsp;<span class="ident" id="1460757"><a href="/net/lookup_unix.go.html#1460533">err</a></span>&nbsp;<span class="op" id="1460761">!=</span>&nbsp;<span class="ident" id="1460764">nil</span>&nbsp;<span class="op" id="1460768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460772">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460783"><a href="/net/lookup_unix.go.html#1460519">addrs</a></span>&nbsp;<span class="op" id="1460789">=</span>&nbsp;<span class="builtinfunc" id="1460791">make</span><span class="op" id="1460795">(</span><span class="op" id="1460796">[</span><span class="op" id="1460797">]</span><span class="op" id="1460798">*</span><span class="ident" id="1460799"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="1460802">,</span>&nbsp;<span class="builtinfunc" id="1460804">len</span><span class="op" id="1460807">(</span><span class="ident" id="1460808"><a href="/net/lookup_unix.go.html#1460687">records</a></span><span class="op" id="1460815">)</span><span class="op" id="1460816">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460819">for</span>&nbsp;<span class="ident" id="1460823">i</span><span class="op" id="1460824">,</span>&nbsp;<span class="ident" id="1460826">rr</span>&nbsp;<span class="op" id="1460829">:=</span>&nbsp;<span class="keyword" id="1460832">range</span>&nbsp;<span class="ident" id="1460838"><a href="/net/lookup_unix.go.html#1460687">records</a></span>&nbsp;<span class="op" id="1460846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460850">r</span>&nbsp;<span class="op" id="1460852">:=</span>&nbsp;<span class="ident" id="1460855"><a href="/net/lookup_unix.go.html#1460826">rr</a></span><span class="op" id="1460857">.</span><span class="op" id="1460858">(</span><span class="op" id="1460859">*</span><span class="ident" id="1460860"><a href="/net/dnsmsg.go.html#1366316">dnsRR_SRV</a></span><span class="op" id="1460869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460873"><a href="/net/lookup_unix.go.html#1460519">addrs</a></span><span class="op" id="1460878">[</span><span class="ident" id="1460879"><a href="/net/lookup_unix.go.html#1460823">i</a></span><span class="op" id="1460880">]</span>&nbsp;<span class="op" id="1460882">=</span>&nbsp;<span class="op" id="1460884">&amp;</span><span class="ident" id="1460885"><a href="/net/dnsclient.go.html#1343670">SRV</a></span><span class="op" id="1460888">{</span><span class="ident" id="1460889"><a href="/net/lookup_unix.go.html#1460850">r</a></span><span class="op" id="1460890">.</span><span class="ident" id="1460891">Target</span><span class="op" id="1460897">,</span>&nbsp;<span class="ident" id="1460899"><a href="/net/lookup_unix.go.html#1460850">r</a></span><span class="op" id="1460900">.</span><span class="ident" id="1460901">Port</span><span class="op" id="1460905">,</span>&nbsp;<span class="ident" id="1460907"><a href="/net/lookup_unix.go.html#1460850">r</a></span><span class="op" id="1460908">.</span><span class="ident" id="1460909">Priority</span><span class="op" id="1460917">,</span>&nbsp;<span class="ident" id="1460919"><a href="/net/lookup_unix.go.html#1460850">r</a></span><span class="op" id="1460920">.</span><span class="ident" id="1460921">Weight</span><span class="op" id="1460927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460933"><a href="/net/dnsclient.go.html#1343831">byPriorityWeight</a></span><span class="op" id="1460949">(</span><span class="ident" id="1460950"><a href="/net/lookup_unix.go.html#1460519">addrs</a></span><span class="op" id="1460955">)</span><span class="op" id="1460956">.</span><span class="ident" id="1460957">sort</span><span class="op" id="1460961">(</span><span class="op" id="1460962">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460965">return</span><br>
<span class="lineno"></span><span class="op" id="1460972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460975">func</span>&nbsp;<span class="ident" id="1460980">lookupMX</span><span class="op" id="1460988">(</span><span class="ident" id="1460989">name</span>&nbsp;<span class="builtintype" id="1460994">string</span><span class="op" id="1461000">)</span>&nbsp;<span class="op" id="1461002">(</span><span class="ident" id="1461003">mx</span>&nbsp;<span class="op" id="1461006">[</span><span class="op" id="1461007">]</span><span class="op" id="1461008">*</span><span class="ident" id="1461009"><a href="/net/dnsclient.go.html#1344955">MX</a></span><span class="op" id="1461011">,</span>&nbsp;<span class="ident" id="1461013">err</span>&nbsp;<span class="builtintype" id="1461017">error</span><span class="op" id="1461022">)</span>&nbsp;<span class="op" id="1461024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461027">_</span><span class="op" id="1461028">,</span>&nbsp;<span class="ident" id="1461030">records</span><span class="op" id="1461037">,</span>&nbsp;<span class="ident" id="1461039"><a href="/net/lookup_unix.go.html#1461013">err</a></span>&nbsp;<span class="op" id="1461043">:=</span>&nbsp;<span class="ident" id="1461046"><a href="/net/dnsclient_unix.go.html#1352125">lookup</a></span><span class="op" id="1461052">(</span><span class="ident" id="1461053"><a href="/net/lookup_unix.go.html#1460989">name</a></span><span class="op" id="1461057">,</span>&nbsp;<span class="ident" id="1461059"><a href="/net/dnsmsg.go.html#1359961">dnsTypeMX</a></span><span class="op" id="1461068">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461071">if</span>&nbsp;<span class="ident" id="1461074"><a href="/net/lookup_unix.go.html#1461013">err</a></span>&nbsp;<span class="op" id="1461078">!=</span>&nbsp;<span class="ident" id="1461081">nil</span>&nbsp;<span class="op" id="1461085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461089">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461100"><a href="/net/lookup_unix.go.html#1461003">mx</a></span>&nbsp;<span class="op" id="1461103">=</span>&nbsp;<span class="builtinfunc" id="1461105">make</span><span class="op" id="1461109">(</span><span class="op" id="1461110">[</span><span class="op" id="1461111">]</span><span class="op" id="1461112">*</span><span class="ident" id="1461113"><a href="/net/dnsclient.go.html#1344955">MX</a></span><span class="op" id="1461115">,</span>&nbsp;<span class="builtinfunc" id="1461117">len</span><span class="op" id="1461120">(</span><span class="ident" id="1461121"><a href="/net/lookup_unix.go.html#1461030">records</a></span><span class="op" id="1461128">)</span><span class="op" id="1461129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461132">for</span>&nbsp;<span class="ident" id="1461136">i</span><span class="op" id="1461137">,</span>&nbsp;<span class="ident" id="1461139">rr</span>&nbsp;<span class="op" id="1461142">:=</span>&nbsp;<span class="keyword" id="1461145">range</span>&nbsp;<span class="ident" id="1461151"><a href="/net/lookup_unix.go.html#1461030">records</a></span>&nbsp;<span class="op" id="1461159">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461163">r</span>&nbsp;<span class="op" id="1461165">:=</span>&nbsp;<span class="ident" id="1461168"><a href="/net/lookup_unix.go.html#1461139">rr</a></span><span class="op" id="1461170">.</span><span class="op" id="1461171">(</span><span class="op" id="1461172">*</span><span class="ident" id="1461173"><a href="/net/dnsmsg.go.html#1364577">dnsRR_MX</a></span><span class="op" id="1461181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461185"><a href="/net/lookup_unix.go.html#1461003">mx</a></span><span class="op" id="1461187">[</span><span class="ident" id="1461188"><a href="/net/lookup_unix.go.html#1461136">i</a></span><span class="op" id="1461189">]</span>&nbsp;<span class="op" id="1461191">=</span>&nbsp;<span class="op" id="1461193">&amp;</span><span class="ident" id="1461194"><a href="/net/dnsclient.go.html#1344955">MX</a></span><span class="op" id="1461196">{</span><span class="ident" id="1461197"><a href="/net/lookup_unix.go.html#1461163">r</a></span><span class="op" id="1461198">.</span><span class="ident" id="1461199">Mx</span><span class="op" id="1461201">,</span>&nbsp;<span class="ident" id="1461203"><a href="/net/lookup_unix.go.html#1461163">r</a></span><span class="op" id="1461204">.</span><span class="ident" id="1461205">Pref</span><span class="op" id="1461209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461215"><a href="/net/dnsclient.go.html#1345070">byPref</a></span><span class="op" id="1461221">(</span><span class="ident" id="1461222"><a href="/net/lookup_unix.go.html#1461003">mx</a></span><span class="op" id="1461224">)</span><span class="op" id="1461225">.</span><span class="ident" id="1461226">sort</span><span class="op" id="1461230">(</span><span class="op" id="1461231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461234">return</span><br>
<span class="lineno">120</span><span class="op" id="1461241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1461244">func</span>&nbsp;<span class="ident" id="1461249">lookupNS</span><span class="op" id="1461257">(</span><span class="ident" id="1461258">name</span>&nbsp;<span class="builtintype" id="1461263">string</span><span class="op" id="1461269">)</span>&nbsp;<span class="op" id="1461271">(</span><span class="ident" id="1461272">ns</span>&nbsp;<span class="op" id="1461275">[</span><span class="op" id="1461276">]</span><span class="op" id="1461277">*</span><span class="ident" id="1461278"><a href="/net/dnsclient.go.html#1345477">NS</a></span><span class="op" id="1461280">,</span>&nbsp;<span class="ident" id="1461282">err</span>&nbsp;<span class="builtintype" id="1461286">error</span><span class="op" id="1461291">)</span>&nbsp;<span class="op" id="1461293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461296">_</span><span class="op" id="1461297">,</span>&nbsp;<span class="ident" id="1461299">records</span><span class="op" id="1461306">,</span>&nbsp;<span class="ident" id="1461308"><a href="/net/lookup_unix.go.html#1461282">err</a></span>&nbsp;<span class="op" id="1461312">:=</span>&nbsp;<span class="ident" id="1461315"><a href="/net/dnsclient_unix.go.html#1352125">lookup</a></span><span class="op" id="1461321">(</span><span class="ident" id="1461322"><a href="/net/lookup_unix.go.html#1461258">name</a></span><span class="op" id="1461326">,</span>&nbsp;<span class="ident" id="1461328"><a href="/net/dnsmsg.go.html#1359722">dnsTypeNS</a></span><span class="op" id="1461337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461340">if</span>&nbsp;<span class="ident" id="1461343"><a href="/net/lookup_unix.go.html#1461282">err</a></span>&nbsp;<span class="op" id="1461347">!=</span>&nbsp;<span class="ident" id="1461350">nil</span>&nbsp;<span class="op" id="1461354">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461358">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461369"><a href="/net/lookup_unix.go.html#1461272">ns</a></span>&nbsp;<span class="op" id="1461372">=</span>&nbsp;<span class="builtinfunc" id="1461374">make</span><span class="op" id="1461378">(</span><span class="op" id="1461379">[</span><span class="op" id="1461380">]</span><span class="op" id="1461381">*</span><span class="ident" id="1461382"><a href="/net/dnsclient.go.html#1345477">NS</a></span><span class="op" id="1461384">,</span>&nbsp;<span class="builtinfunc" id="1461386">len</span><span class="op" id="1461389">(</span><span class="ident" id="1461390"><a href="/net/lookup_unix.go.html#1461299">records</a></span><span class="op" id="1461397">)</span><span class="op" id="1461398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461401">for</span>&nbsp;<span class="ident" id="1461405">i</span><span class="op" id="1461406">,</span>&nbsp;<span class="ident" id="1461408">r</span>&nbsp;<span class="op" id="1461410">:=</span>&nbsp;<span class="keyword" id="1461413">range</span>&nbsp;<span class="ident" id="1461419"><a href="/net/lookup_unix.go.html#1461299">records</a></span>&nbsp;<span class="op" id="1461427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461431">r</span>&nbsp;<span class="op" id="1461433">:=</span>&nbsp;<span class="ident" id="1461436"><a href="/net/lookup_unix.go.html#1461408">r</a></span><span class="op" id="1461437">.</span><span class="op" id="1461438">(</span><span class="op" id="1461439">*</span><span class="ident" id="1461440"><a href="/net/dnsmsg.go.html#1364892">dnsRR_NS</a></span><span class="op" id="1461448">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461452"><a href="/net/lookup_unix.go.html#1461272">ns</a></span><span class="op" id="1461454">[</span><span class="ident" id="1461455"><a href="/net/lookup_unix.go.html#1461405">i</a></span><span class="op" id="1461456">]</span>&nbsp;<span class="op" id="1461458">=</span>&nbsp;<span class="op" id="1461460">&amp;</span><span class="ident" id="1461461"><a href="/net/dnsclient.go.html#1345477">NS</a></span><span class="op" id="1461463">{</span><span class="ident" id="1461464"><a href="/net/lookup_unix.go.html#1461431">r</a></span><span class="op" id="1461465">.</span><span class="ident" id="1461466">Ns</span><span class="op" id="1461468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461474">return</span><br>
<span class="lineno"></span><span class="op" id="1461481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="1461484">func</span>&nbsp;<span class="ident" id="1461489">lookupTXT</span><span class="op" id="1461498">(</span><span class="ident" id="1461499">name</span>&nbsp;<span class="builtintype" id="1461504">string</span><span class="op" id="1461510">)</span>&nbsp;<span class="op" id="1461512">(</span><span class="ident" id="1461513">txt</span>&nbsp;<span class="op" id="1461517">[</span><span class="op" id="1461518">]</span><span class="builtintype" id="1461519">string</span><span class="op" id="1461525">,</span>&nbsp;<span class="ident" id="1461527">err</span>&nbsp;<span class="builtintype" id="1461531">error</span><span class="op" id="1461536">)</span>&nbsp;<span class="op" id="1461538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461541">_</span><span class="op" id="1461542">,</span>&nbsp;<span class="ident" id="1461544">records</span><span class="op" id="1461551">,</span>&nbsp;<span class="ident" id="1461553"><a href="/net/lookup_unix.go.html#1461527">err</a></span>&nbsp;<span class="op" id="1461557">:=</span>&nbsp;<span class="ident" id="1461560"><a href="/net/dnsclient_unix.go.html#1352125">lookup</a></span><span class="op" id="1461566">(</span><span class="ident" id="1461567"><a href="/net/lookup_unix.go.html#1461499">name</a></span><span class="op" id="1461571">,</span>&nbsp;<span class="ident" id="1461573"><a href="/net/dnsmsg.go.html#1359980">dnsTypeTXT</a></span><span class="op" id="1461583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461586">if</span>&nbsp;<span class="ident" id="1461589"><a href="/net/lookup_unix.go.html#1461527">err</a></span>&nbsp;<span class="op" id="1461593">!=</span>&nbsp;<span class="ident" id="1461596">nil</span>&nbsp;<span class="op" id="1461600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461604">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461612">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461615"><a href="/net/lookup_unix.go.html#1461513">txt</a></span>&nbsp;<span class="op" id="1461619">=</span>&nbsp;<span class="builtinfunc" id="1461621">make</span><span class="op" id="1461625">(</span><span class="op" id="1461626">[</span><span class="op" id="1461627">]</span><span class="builtintype" id="1461628">string</span><span class="op" id="1461634">,</span>&nbsp;<span class="builtinfunc" id="1461636">len</span><span class="op" id="1461639">(</span><span class="ident" id="1461640"><a href="/net/lookup_unix.go.html#1461544">records</a></span><span class="op" id="1461647">)</span><span class="op" id="1461648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461651">for</span>&nbsp;<span class="ident" id="1461655">i</span><span class="op" id="1461656">,</span>&nbsp;<span class="ident" id="1461658">r</span>&nbsp;<span class="op" id="1461660">:=</span>&nbsp;<span class="keyword" id="1461663">range</span>&nbsp;<span class="ident" id="1461669"><a href="/net/lookup_unix.go.html#1461544">records</a></span>&nbsp;<span class="op" id="1461677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461681"><a href="/net/lookup_unix.go.html#1461513">txt</a></span><span class="op" id="1461684">[</span><span class="ident" id="1461685"><a href="/net/lookup_unix.go.html#1461655">i</a></span><span class="op" id="1461686">]</span>&nbsp;<span class="op" id="1461688">=</span>&nbsp;<span class="ident" id="1461690"><a href="/net/lookup_unix.go.html#1461658">r</a></span><span class="op" id="1461691">.</span><span class="op" id="1461692">(</span><span class="op" id="1461693">*</span><span class="ident" id="1461694"><a href="/net/dnsmsg.go.html#1366045">dnsRR_TXT</a></span><span class="op" id="1461703">)</span><span class="op" id="1461704">.</span><span class="ident" id="1461705">Txt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461713">return</span><br>
<span class="lineno">145</span><span class="op" id="1461720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1461723">func</span>&nbsp;<span class="ident" id="1461728">lookupAddr</span><span class="op" id="1461738">(</span><span class="ident" id="1461739">addr</span>&nbsp;<span class="builtintype" id="1461744">string</span><span class="op" id="1461750">)</span>&nbsp;<span class="op" id="1461752">(</span><span class="ident" id="1461753">name</span>&nbsp;<span class="op" id="1461758">[</span><span class="op" id="1461759">]</span><span class="builtintype" id="1461760">string</span><span class="op" id="1461766">,</span>&nbsp;<span class="ident" id="1461768">err</span>&nbsp;<span class="builtintype" id="1461772">error</span><span class="op" id="1461777">)</span>&nbsp;<span class="op" id="1461779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461782"><a href="/net/lookup_unix.go.html#1461753">name</a></span>&nbsp;<span class="op" id="1461787">=</span>&nbsp;<span class="ident" id="1461789"><a href="/net/hosts.go.html#1405460">lookupStaticAddr</a></span><span class="op" id="1461805">(</span><span class="ident" id="1461806"><a href="/net/lookup_unix.go.html#1461739">addr</a></span><span class="op" id="1461810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461813">if</span>&nbsp;<span class="builtinfunc" id="1461816">len</span><span class="op" id="1461819">(</span><span class="ident" id="1461820"><a href="/net/lookup_unix.go.html#1461753">name</a></span><span class="op" id="1461824">)</span>&nbsp;<span class="op" id="1461826">&gt;</span>&nbsp;<span class="num" id="1461828">0</span>&nbsp;<span class="op" id="1461830">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461834">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461845">var</span>&nbsp;<span class="ident" id="1461849">arpa</span>&nbsp;<span class="builtintype" id="1461854">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461862"><a href="/net/lookup_unix.go.html#1461849">arpa</a></span><span class="op" id="1461866">,</span>&nbsp;<span class="ident" id="1461868"><a href="/net/lookup_unix.go.html#1461768">err</a></span>&nbsp;<span class="op" id="1461872">=</span>&nbsp;<span class="ident" id="1461874"><a href="/net/dnsclient.go.html#1340381">reverseaddr</a></span><span class="op" id="1461885">(</span><span class="ident" id="1461886"><a href="/net/lookup_unix.go.html#1461739">addr</a></span><span class="op" id="1461890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461893">if</span>&nbsp;<span class="ident" id="1461896"><a href="/net/lookup_unix.go.html#1461768">err</a></span>&nbsp;<span class="op" id="1461900">!=</span>&nbsp;<span class="ident" id="1461903">nil</span>&nbsp;<span class="op" id="1461907">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461911">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1461919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461922">var</span>&nbsp;<span class="ident" id="1461926">records</span>&nbsp;<span class="op" id="1461934">[</span><span class="op" id="1461935">]</span><span class="ident" id="1461936"><a href="/net/dnsmsg.go.html#1362702">dnsRR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1461943">_</span><span class="op" id="1461944">,</span>&nbsp;<span class="ident" id="1461946"><a href="/net/lookup_unix.go.html#1461926">records</a></span><span class="op" id="1461953">,</span>&nbsp;<span class="ident" id="1461955"><a href="/net/lookup_unix.go.html#1461768">err</a></span>&nbsp;<span class="op" id="1461959">=</span>&nbsp;<span class="ident" id="1461961"><a href="/net/dnsclient_unix.go.html#1352125">lookup</a></span><span class="op" id="1461967">(</span><span class="ident" id="1461968"><a href="/net/lookup_unix.go.html#1461849">arpa</a></span><span class="op" id="1461972">,</span>&nbsp;<span class="ident" id="1461974"><a href="/net/dnsmsg.go.html#1359904">dnsTypePTR</a></span><span class="op" id="1461984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1461987">if</span>&nbsp;<span class="ident" id="1461990"><a href="/net/lookup_unix.go.html#1461768">err</a></span>&nbsp;<span class="op" id="1461994">!=</span>&nbsp;<span class="ident" id="1461997">nil</span>&nbsp;<span class="op" id="1462001">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462005">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462016"><a href="/net/lookup_unix.go.html#1461753">name</a></span>&nbsp;<span class="op" id="1462021">=</span>&nbsp;<span class="builtinfunc" id="1462023">make</span><span class="op" id="1462027">(</span><span class="op" id="1462028">[</span><span class="op" id="1462029">]</span><span class="builtintype" id="1462030">string</span><span class="op" id="1462036">,</span>&nbsp;<span class="builtinfunc" id="1462038">len</span><span class="op" id="1462041">(</span><span class="ident" id="1462042"><a href="/net/lookup_unix.go.html#1461926">records</a></span><span class="op" id="1462049">)</span><span class="op" id="1462050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462053">for</span>&nbsp;<span class="ident" id="1462057">i</span>&nbsp;<span class="op" id="1462059">:=</span>&nbsp;<span class="keyword" id="1462062">range</span>&nbsp;<span class="ident" id="1462068"><a href="/net/lookup_unix.go.html#1461926">records</a></span>&nbsp;<span class="op" id="1462076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462080">r</span>&nbsp;<span class="op" id="1462082">:=</span>&nbsp;<span class="ident" id="1462085"><a href="/net/lookup_unix.go.html#1461926">records</a></span><span class="op" id="1462092">[</span><span class="ident" id="1462093"><a href="/net/lookup_unix.go.html#1462057">i</a></span><span class="op" id="1462094">]</span><span class="op" id="1462095">.</span><span class="op" id="1462096">(</span><span class="op" id="1462097">*</span><span class="ident" id="1462098"><a href="/net/dnsmsg.go.html#1365165">dnsRR_PTR</a></span><span class="op" id="1462107">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1462111"><a href="/net/lookup_unix.go.html#1461753">name</a></span><span class="op" id="1462115">[</span><span class="ident" id="1462116"><a href="/net/lookup_unix.go.html#1462057">i</a></span><span class="op" id="1462117">]</span>&nbsp;<span class="op" id="1462119">=</span>&nbsp;<span class="ident" id="1462121"><a href="/net/lookup_unix.go.html#1462080">r</a></span><span class="op" id="1462122">.</span><span class="ident" id="1462123">Ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1462128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1462131">return</span><br>
<span class="lineno"></span><span class="op" id="1462138">}</span>
</div>
</body>
</html>
