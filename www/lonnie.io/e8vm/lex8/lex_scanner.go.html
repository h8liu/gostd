<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6068723">package</span>&nbsp;<span class="ident" id="6068731">lex8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6068737">import</span>&nbsp;<span class="op" id="6068744">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6068747">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6068756">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6068761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6068764">//&nbsp;LexScanner&nbsp;parses&nbsp;a&nbsp;file&nbsp;input&nbsp;stream&nbsp;into&nbsp;tokens.</span><br>
<span class="lineno"></span><span class="keyword" id="6068818">type</span>&nbsp;<span class="ident" id="6068823">LexScanner</span>&nbsp;<span class="keyword" id="6068834">struct</span>&nbsp;<span class="op" id="6068841">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068844">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6068850">*</span><span class="ident" id="6068851"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072224">RuneScanner</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068864">errs</span>&nbsp;&nbsp;<span class="op" id="6068870">*</span><span class="ident" id="6068871"><a href="/lonnie.io/e8vm/lex8/error_list.go.html#6067832">ErrorList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068882">valid</span>&nbsp;<span class="builtintype" id="6068888">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068895">pos</span>&nbsp;<span class="op" id="6068899">*</span><span class="ident" id="6068900"><a href="/lonnie.io/e8vm/lex8/pos.go.html#6072023">Pos</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068905">buf</span>&nbsp;<span class="op" id="6068909">*</span><span class="ident" id="6068910"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068747">bytes</a></span><span class="op" id="6068915">.</span><span class="ident" id="6068916">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6068923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6068926">//&nbsp;NewLexScanner&nbsp;creates&nbsp;a&nbsp;new&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="6068964">func</span>&nbsp;<span class="ident" id="6068969">NewLexScanner</span><span class="op" id="6068982">(</span><span class="ident" id="6068983">file</span>&nbsp;<span class="builtintype" id="6068988">string</span><span class="op" id="6068994">,</span>&nbsp;<span class="ident" id="6068996">rc</span>&nbsp;<span class="ident" id="6068999"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068756">io</a></span><span class="op" id="6069001">.</span><span class="ident" id="6069002">ReadCloser</span><span class="op" id="6069012">)</span>&nbsp;<span class="op" id="6069014">*</span><span class="ident" id="6069015"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068823">LexScanner</a></span>&nbsp;<span class="op" id="6069026">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069029">ret</span>&nbsp;<span class="op" id="6069033">:=</span>&nbsp;<span class="builtinfunc" id="6069036">new</span><span class="op" id="6069039">(</span><span class="ident" id="6069040"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068823">LexScanner</a></span><span class="op" id="6069050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069053"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><span class="op" id="6069056">.</span><span class="ident" id="6069057">s</span>&nbsp;<span class="op" id="6069059">=</span>&nbsp;<span class="ident" id="6069061"><a href="/lonnie.io/e8vm/lex8/rune_scanner.go.html#6072422">NewRuneScanner</a></span><span class="op" id="6069075">(</span><span class="ident" id="6069076"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068983">file</a></span><span class="op" id="6069080">,</span>&nbsp;<span class="ident" id="6069082"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068996">rc</a></span><span class="op" id="6069084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069087"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><span class="op" id="6069090">.</span><span class="ident" id="6069091">errs</span>&nbsp;<span class="op" id="6069096">=</span>&nbsp;<span class="ident" id="6069098"><a href="/lonnie.io/e8vm/lex8/error_list.go.html#6067969">NewErrList</a></span><span class="op" id="6069108">(</span><span class="op" id="6069109">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069113"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><span class="op" id="6069116">.</span><span class="ident" id="6069117">buf</span>&nbsp;<span class="op" id="6069121">=</span>&nbsp;<span class="builtinfunc" id="6069123">new</span><span class="op" id="6069126">(</span><span class="ident" id="6069127"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068747">bytes</a></span><span class="op" id="6069132">.</span><span class="ident" id="6069133">Buffer</span><span class="op" id="6069139">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069142"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><span class="op" id="6069145">.</span><span class="ident" id="6069146">pos</span>&nbsp;<span class="op" id="6069150">=</span>&nbsp;<span class="ident" id="6069152"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><span class="op" id="6069155">.</span><span class="ident" id="6069156">s</span><span class="op" id="6069157">.</span><span class="ident" id="6069158">Pos</span><span class="op" id="6069161">(</span><span class="op" id="6069162">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069166">return</span>&nbsp;<span class="ident" id="6069173"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069029">ret</a></span><br>
<span class="lineno"></span><span class="op" id="6069177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="6069180">//&nbsp;Next&nbsp;pushes&nbsp;the&nbsp;current&nbsp;rune&nbsp;(if&nbsp;valid)&nbsp;into&nbsp;the&nbsp;buffer,</span><br>
<span class="lineno"></span><span class="comment" id="6069240">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;or&nbsp;error&nbsp;from&nbsp;scanning&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="6069302">//&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="6069313">func</span>&nbsp;<span class="op" id="6069318">(</span><span class="ident" id="6069319">s</span>&nbsp;<span class="op" id="6069321">*</span><span class="ident" id="6069322"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068823">LexScanner</a></span><span class="op" id="6069332">)</span>&nbsp;<span class="ident" id="6069334">Next</span><span class="op" id="6069338">(</span><span class="op" id="6069339">)</span>&nbsp;<span class="op" id="6069341">(</span><span class="builtintype" id="6069342">rune</span><span class="op" id="6069346">,</span>&nbsp;<span class="builtintype" id="6069348">error</span><span class="op" id="6069353">)</span>&nbsp;<span class="op" id="6069355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069358">if</span>&nbsp;<span class="ident" id="6069361"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069362">.</span><span class="ident" id="6069363">valid</span>&nbsp;<span class="op" id="6069369">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069373"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069374">.</span><span class="ident" id="6069375">buf</span><span class="op" id="6069378">.</span><span class="ident" id="6069379">WriteRune</span><span class="op" id="6069388">(</span><span class="ident" id="6069389"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069390">.</span><span class="ident" id="6069391">s</span><span class="op" id="6069392">.</span><span class="ident" id="6069393">Rune</span><span class="op" id="6069397">)</span>&nbsp;<span class="comment" id="6069399">//&nbsp;push&nbsp;into&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069425"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069426">.</span><span class="ident" id="6069427">valid</span>&nbsp;<span class="op" id="6069433">=</span>&nbsp;<span class="builtintype" id="6069435">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069446">if</span>&nbsp;<span class="op" id="6069449">!</span><span class="ident" id="6069450"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069451">.</span><span class="ident" id="6069452">s</span><span class="op" id="6069453">.</span><span class="ident" id="6069454">Scan</span><span class="op" id="6069458">(</span><span class="op" id="6069459">)</span>&nbsp;<span class="op" id="6069461">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069465">if</span>&nbsp;<span class="ident" id="6069468"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069469">.</span><span class="ident" id="6069470">s</span><span class="op" id="6069471">.</span><span class="ident" id="6069472">Err</span>&nbsp;<span class="op" id="6069476">!=</span>&nbsp;<span class="ident" id="6069479">nil</span>&nbsp;<span class="op" id="6069483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069488">return</span>&nbsp;<span class="num" id="6069495">0</span><span class="op" id="6069496">,</span>&nbsp;<span class="ident" id="6069498"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069499">.</span><span class="ident" id="6069500">s</span><span class="op" id="6069501">.</span><span class="ident" id="6069502">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069513">return</span>&nbsp;<span class="num" id="6069520">0</span><span class="op" id="6069521">,</span>&nbsp;<span class="ident" id="6069523"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068756">io</a></span><span class="op" id="6069525">.</span><span class="ident" id="6069526">EOF</span>&nbsp;<span class="comment" id="6069530">//&nbsp;signal&nbsp;end&nbsp;of&nbsp;file</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069557"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069558">.</span><span class="ident" id="6069559">valid</span>&nbsp;<span class="op" id="6069565">=</span>&nbsp;<span class="builtintype" id="6069567">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069573">return</span>&nbsp;<span class="ident" id="6069580"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069319">s</a></span><span class="op" id="6069581">.</span><span class="ident" id="6069582">s</span><span class="op" id="6069583">.</span><span class="ident" id="6069584">Rune</span><span class="op" id="6069588">,</span>&nbsp;<span class="ident" id="6069590">nil</span><br>
<span class="lineno"></span><span class="op" id="6069594">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="6069597">//&nbsp;Accept&nbsp;returns&nbsp;the&nbsp;string&nbsp;buffered,&nbsp;and&nbsp;the&nbsp;starting&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="6069662">//&nbsp;of&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="6069680">func</span>&nbsp;<span class="op" id="6069685">(</span><span class="ident" id="6069686">s</span>&nbsp;<span class="op" id="6069688">*</span><span class="ident" id="6069689"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068823">LexScanner</a></span><span class="op" id="6069699">)</span>&nbsp;<span class="ident" id="6069701">Accept</span><span class="op" id="6069707">(</span><span class="op" id="6069708">)</span>&nbsp;<span class="op" id="6069710">(</span><span class="builtintype" id="6069711">string</span><span class="op" id="6069717">,</span>&nbsp;<span class="op" id="6069719">*</span><span class="ident" id="6069720"><a href="/lonnie.io/e8vm/lex8/pos.go.html#6072023">Pos</a></span><span class="op" id="6069723">)</span>&nbsp;<span class="op" id="6069725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069728">ret</span>&nbsp;<span class="op" id="6069732">:=</span>&nbsp;<span class="ident" id="6069735"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069686">s</a></span><span class="op" id="6069736">.</span><span class="ident" id="6069737">buf</span><span class="op" id="6069740">.</span><span class="ident" id="6069741">String</span><span class="op" id="6069747">(</span><span class="op" id="6069748">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069751"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069686">s</a></span><span class="op" id="6069752">.</span><span class="ident" id="6069753">buf</span><span class="op" id="6069756">.</span><span class="ident" id="6069757">Reset</span><span class="op" id="6069762">(</span><span class="op" id="6069763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069766">pos</span>&nbsp;<span class="op" id="6069770">:=</span>&nbsp;<span class="ident" id="6069773"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069686">s</a></span><span class="op" id="6069774">.</span><span class="ident" id="6069775">pos</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069781"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069686">s</a></span><span class="op" id="6069782">.</span><span class="ident" id="6069783">pos</span>&nbsp;<span class="op" id="6069787">=</span>&nbsp;<span class="ident" id="6069789"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069686">s</a></span><span class="op" id="6069790">.</span><span class="ident" id="6069791">s</span><span class="op" id="6069792">.</span><span class="ident" id="6069793">Pos</span><span class="op" id="6069796">(</span><span class="op" id="6069797">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069801">return</span>&nbsp;<span class="ident" id="6069808"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069728">ret</a></span><span class="op" id="6069811">,</span>&nbsp;<span class="ident" id="6069813"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069766">pos</a></span><br>
<span class="lineno"></span><span class="op" id="6069817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6069820">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;buffer&nbsp;start.</span><br>
<span class="lineno"></span><span class="keyword" id="6069869">func</span>&nbsp;<span class="op" id="6069874">(</span><span class="ident" id="6069875">s</span>&nbsp;<span class="op" id="6069877">*</span><span class="ident" id="6069878"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6068823">LexScanner</a></span><span class="op" id="6069888">)</span>&nbsp;<span class="ident" id="6069890">Pos</span><span class="op" id="6069893">(</span><span class="op" id="6069894">)</span>&nbsp;<span class="op" id="6069896">*</span><span class="ident" id="6069897"><a href="/lonnie.io/e8vm/lex8/pos.go.html#6072023">Pos</a></span>&nbsp;<span class="op" id="6069901">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069904">return</span>&nbsp;<span class="ident" id="6069911"><a href="/lonnie.io/e8vm/lex8/lex_scanner.go.html#6069875">s</a></span><span class="op" id="6069912">.</span><span class="ident" id="6069913">pos</span><br>
<span class="lineno"></span><span class="op" id="6069917">}</span>
</div>
</body>
</html>
