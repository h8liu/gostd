<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4594674">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4594729">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4594783">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4594834">//go:generate&nbsp;go&nbsp;run&nbsp;gen.go&nbsp;-output&nbsp;fixedhuff.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4594884">//&nbsp;Package&nbsp;flate&nbsp;implements&nbsp;the&nbsp;DEFLATE&nbsp;compressed&nbsp;data&nbsp;format,&nbsp;described&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4594961">//&nbsp;RFC&nbsp;1951.&nbsp;&nbsp;The&nbsp;gzip&nbsp;and&nbsp;zlib&nbsp;packages&nbsp;implement&nbsp;access&nbsp;to&nbsp;DEFLATE-based&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="4595041">//&nbsp;formats.</span><br>
<span class="lineno">10</span><span class="keyword" id="4595053">package</span>&nbsp;<span class="ident" id="4595061">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4595068">import</span>&nbsp;<span class="op" id="4595075">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4595078">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4595087">&#34;io&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4595093">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="4595103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4595106">const</span>&nbsp;<span class="op" id="4595112">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595115">maxCodeLen</span>&nbsp;<span class="op" id="4595126">=</span>&nbsp;<span class="num" id="4595128">16</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4595134">//&nbsp;max&nbsp;length&nbsp;of&nbsp;Huffman&nbsp;code</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595165">maxHist</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4595176">=</span>&nbsp;<span class="num" id="4595178">32768</span>&nbsp;<span class="comment" id="4595184">//&nbsp;max&nbsp;history&nbsp;required</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4595209">//&nbsp;The&nbsp;next&nbsp;three&nbsp;numbers&nbsp;come&nbsp;from&nbsp;the&nbsp;RFC,&nbsp;section&nbsp;3.2.7.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595270">maxLit</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4595279">=</span>&nbsp;<span class="num" id="4595281">286</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595286">maxDist</span>&nbsp;&nbsp;<span class="op" id="4595295">=</span>&nbsp;<span class="num" id="4595297">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595301">numCodes</span>&nbsp;<span class="op" id="4595310">=</span>&nbsp;<span class="num" id="4595312">19</span>&nbsp;<span class="comment" id="4595315">//&nbsp;number&nbsp;of&nbsp;codes&nbsp;in&nbsp;Huffman&nbsp;meta-code</span><br>
<span class="lineno">25</span><span class="op" id="4595355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4595358">//&nbsp;A&nbsp;CorruptInputError&nbsp;reports&nbsp;the&nbsp;presence&nbsp;of&nbsp;corrupt&nbsp;input&nbsp;at&nbsp;a&nbsp;given&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="4595438">type</span>&nbsp;<span class="ident" id="4595443">CorruptInputError</span>&nbsp;<span class="ident" id="4595461">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4595468">func</span>&nbsp;<span class="op" id="4595473">(</span><span class="ident" id="4595474">e</span>&nbsp;<span class="ident" id="4595476"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4595493">)</span>&nbsp;<span class="ident" id="4595495">Error</span><span class="op" id="4595500">(</span><span class="op" id="4595501">)</span>&nbsp;<span class="builtintype" id="4595503">string</span>&nbsp;<span class="op" id="4595510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4595513">return</span>&nbsp;<span class="string" id="4595520">&#34;flate:&nbsp;corrupt&nbsp;input&nbsp;before&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4595558">+</span>&nbsp;<span class="ident" id="4595560"><a href="/compress/flate/inflate.go.html#4595093">strconv</a></span><span class="op" id="4595567">.</span><span class="ident" id="4595568">FormatInt</span><span class="op" id="4595577">(</span><span class="ident" id="4595578">int64</span><span class="op" id="4595583">(</span><span class="ident" id="4595584"><a href="/compress/flate/inflate.go.html#4595474">e</a></span><span class="op" id="4595585">)</span><span class="op" id="4595586">,</span>&nbsp;<span class="num" id="4595588">10</span><span class="op" id="4595590">)</span><br>
<span class="lineno"></span><span class="op" id="4595592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4595595">//&nbsp;An&nbsp;InternalError&nbsp;reports&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;flate&nbsp;code&nbsp;itself.</span><br>
<span class="lineno">35</span><span class="keyword" id="4595658">type</span>&nbsp;<span class="ident" id="4595663">InternalError</span>&nbsp;<span class="builtintype" id="4595677">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4595685">func</span>&nbsp;<span class="op" id="4595690">(</span><span class="ident" id="4595691">e</span>&nbsp;<span class="ident" id="4595693"><a href="/compress/flate/inflate.go.html#4595663">InternalError</a></span><span class="op" id="4595706">)</span>&nbsp;<span class="ident" id="4595708">Error</span><span class="op" id="4595713">(</span><span class="op" id="4595714">)</span>&nbsp;<span class="builtintype" id="4595716">string</span>&nbsp;<span class="op" id="4595723">{</span>&nbsp;<span class="keyword" id="4595725">return</span>&nbsp;<span class="string" id="4595732">&#34;flate:&nbsp;internal&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="4595758">+</span>&nbsp;<span class="builtintype" id="4595760">string</span><span class="op" id="4595766">(</span><span class="ident" id="4595767"><a href="/compress/flate/inflate.go.html#4595691">e</a></span><span class="op" id="4595768">)</span>&nbsp;<span class="op" id="4595770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4595773">//&nbsp;A&nbsp;ReadError&nbsp;reports&nbsp;an&nbsp;error&nbsp;encountered&nbsp;while&nbsp;reading&nbsp;input.</span><br>
<span class="lineno">40</span><span class="keyword" id="4595838">type</span>&nbsp;<span class="ident" id="4595843">ReadError</span>&nbsp;<span class="keyword" id="4595853">struct</span>&nbsp;<span class="op" id="4595860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595863">Offset</span>&nbsp;<span class="ident" id="4595870">int64</span>&nbsp;<span class="comment" id="4595876">//&nbsp;byte&nbsp;offset&nbsp;where&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4595913">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4595920">error</span>&nbsp;<span class="comment" id="4595926">//&nbsp;error&nbsp;returned&nbsp;by&nbsp;underlying&nbsp;Read</span><br>
<span class="lineno"></span><span class="op" id="4595963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="4595966">func</span>&nbsp;<span class="op" id="4595971">(</span><span class="ident" id="4595972">e</span>&nbsp;<span class="op" id="4595974">*</span><span class="ident" id="4595975"><a href="/compress/flate/inflate.go.html#4595843">ReadError</a></span><span class="op" id="4595984">)</span>&nbsp;<span class="ident" id="4595986">Error</span><span class="op" id="4595991">(</span><span class="op" id="4595992">)</span>&nbsp;<span class="builtintype" id="4595994">string</span>&nbsp;<span class="op" id="4596001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4596004">return</span>&nbsp;<span class="string" id="4596011">&#34;flate:&nbsp;read&nbsp;error&nbsp;at&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4596042">+</span>&nbsp;<span class="ident" id="4596044"><a href="/compress/flate/inflate.go.html#4595093">strconv</a></span><span class="op" id="4596051">.</span><span class="ident" id="4596052">FormatInt</span><span class="op" id="4596061">(</span><span class="ident" id="4596062"><a href="/compress/flate/inflate.go.html#4595972">e</a></span><span class="op" id="4596063">.</span><span class="ident" id="4596064">Offset</span><span class="op" id="4596070">,</span>&nbsp;<span class="num" id="4596072">10</span><span class="op" id="4596074">)</span>&nbsp;<span class="op" id="4596076">+</span>&nbsp;<span class="string" id="4596078">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4596083">+</span>&nbsp;<span class="ident" id="4596085"><a href="/compress/flate/inflate.go.html#4595972">e</a></span><span class="op" id="4596086">.</span><span class="ident" id="4596087">Err</span><span class="op" id="4596090">.</span><span class="ident" id="4596091">Error</span><span class="op" id="4596096">(</span><span class="op" id="4596097">)</span><br>
<span class="lineno"></span><span class="op" id="4596099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4596102">//&nbsp;A&nbsp;WriteError&nbsp;reports&nbsp;an&nbsp;error&nbsp;encountered&nbsp;while&nbsp;writing&nbsp;output.</span><br>
<span class="lineno">50</span><span class="keyword" id="4596169">type</span>&nbsp;<span class="ident" id="4596174">WriteError</span>&nbsp;<span class="keyword" id="4596185">struct</span>&nbsp;<span class="op" id="4596192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4596195">Offset</span>&nbsp;<span class="ident" id="4596202">int64</span>&nbsp;<span class="comment" id="4596208">//&nbsp;byte&nbsp;offset&nbsp;where&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4596245">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4596252">error</span>&nbsp;<span class="comment" id="4596258">//&nbsp;error&nbsp;returned&nbsp;by&nbsp;underlying&nbsp;Write</span><br>
<span class="lineno"></span><span class="op" id="4596296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="4596299">func</span>&nbsp;<span class="op" id="4596304">(</span><span class="ident" id="4596305">e</span>&nbsp;<span class="op" id="4596307">*</span><span class="ident" id="4596308"><a href="/compress/flate/inflate.go.html#4596174">WriteError</a></span><span class="op" id="4596318">)</span>&nbsp;<span class="ident" id="4596320">Error</span><span class="op" id="4596325">(</span><span class="op" id="4596326">)</span>&nbsp;<span class="builtintype" id="4596328">string</span>&nbsp;<span class="op" id="4596335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4596338">return</span>&nbsp;<span class="string" id="4596345">&#34;flate:&nbsp;write&nbsp;error&nbsp;at&nbsp;offset&nbsp;&#34;</span>&nbsp;<span class="op" id="4596377">+</span>&nbsp;<span class="ident" id="4596379"><a href="/compress/flate/inflate.go.html#4595093">strconv</a></span><span class="op" id="4596386">.</span><span class="ident" id="4596387">FormatInt</span><span class="op" id="4596396">(</span><span class="ident" id="4596397"><a href="/compress/flate/inflate.go.html#4596305">e</a></span><span class="op" id="4596398">.</span><span class="ident" id="4596399">Offset</span><span class="op" id="4596405">,</span>&nbsp;<span class="num" id="4596407">10</span><span class="op" id="4596409">)</span>&nbsp;<span class="op" id="4596411">+</span>&nbsp;<span class="string" id="4596413">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4596418">+</span>&nbsp;<span class="ident" id="4596420"><a href="/compress/flate/inflate.go.html#4596305">e</a></span><span class="op" id="4596421">.</span><span class="ident" id="4596422">Err</span><span class="op" id="4596425">.</span><span class="ident" id="4596426">Error</span><span class="op" id="4596431">(</span><span class="op" id="4596432">)</span><br>
<span class="lineno"></span><span class="op" id="4596434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4596437">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">60</span><span class="comment" id="4596511">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="4596586">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4596622">type</span>&nbsp;<span class="ident" id="4596627">Resetter</span>&nbsp;<span class="keyword" id="4596636">interface</span>&nbsp;<span class="op" id="4596646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4596649">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4596723">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4596768">Reset</span><span class="op" id="4596773">(</span><span class="ident" id="4596774">r</span>&nbsp;<span class="ident" id="4596776"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4596778">.</span><span class="ident" id="4596779">Reader</span><span class="op" id="4596785">,</span>&nbsp;<span class="ident" id="4596787">dict</span>&nbsp;<span class="op" id="4596792">[</span><span class="op" id="4596793">]</span><span class="builtintype" id="4596794">byte</span><span class="op" id="4596798">)</span>&nbsp;<span class="builtintype" id="4596800">error</span><br>
<span class="lineno"></span><span class="op" id="4596806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4596809">//&nbsp;Note&nbsp;that&nbsp;much&nbsp;of&nbsp;the&nbsp;implementation&nbsp;of&nbsp;huffmanDecoder&nbsp;is&nbsp;also&nbsp;copied</span><br>
<span class="lineno"></span><span class="comment" id="4596882">//&nbsp;into&nbsp;gen.go&nbsp;(in&nbsp;package&nbsp;main)&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;precomputing&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="4596951">//&nbsp;fixed&nbsp;huffman&nbsp;tables&nbsp;so&nbsp;they&nbsp;can&nbsp;be&nbsp;included&nbsp;statically.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4597012">//&nbsp;The&nbsp;data&nbsp;structure&nbsp;for&nbsp;decoding&nbsp;Huffman&nbsp;tables&nbsp;is&nbsp;based&nbsp;on&nbsp;that&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4597082">//&nbsp;zlib.&nbsp;There&nbsp;is&nbsp;a&nbsp;lookup&nbsp;table&nbsp;of&nbsp;a&nbsp;fixed&nbsp;bit&nbsp;width&nbsp;(huffmanChunkBits),</span><br>
<span class="lineno"></span><span class="comment" id="4597156">//&nbsp;For&nbsp;codes&nbsp;smaller&nbsp;than&nbsp;the&nbsp;table&nbsp;width,&nbsp;there&nbsp;are&nbsp;multiple&nbsp;entries</span><br>
<span class="lineno">75</span><span class="comment" id="4597226">//&nbsp;(each&nbsp;combination&nbsp;of&nbsp;trailing&nbsp;bits&nbsp;has&nbsp;the&nbsp;same&nbsp;value).&nbsp;For&nbsp;codes</span><br>
<span class="lineno"></span><span class="comment" id="4597295">//&nbsp;larger&nbsp;than&nbsp;the&nbsp;table&nbsp;width,&nbsp;the&nbsp;table&nbsp;contains&nbsp;a&nbsp;link&nbsp;to&nbsp;an&nbsp;overflow</span><br>
<span class="lineno"></span><span class="comment" id="4597368">//&nbsp;table.&nbsp;The&nbsp;width&nbsp;of&nbsp;each&nbsp;entry&nbsp;in&nbsp;the&nbsp;link&nbsp;table&nbsp;is&nbsp;the&nbsp;maximum&nbsp;code</span><br>
<span class="lineno"></span><span class="comment" id="4597440">//&nbsp;size&nbsp;minus&nbsp;the&nbsp;chunk&nbsp;width.</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4597472">//&nbsp;Note&nbsp;that&nbsp;you&nbsp;can&nbsp;do&nbsp;a&nbsp;lookup&nbsp;in&nbsp;the&nbsp;table&nbsp;even&nbsp;without&nbsp;all&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="4597540">//&nbsp;filled.&nbsp;Since&nbsp;the&nbsp;extra&nbsp;bits&nbsp;are&nbsp;zero,&nbsp;and&nbsp;the&nbsp;DEFLATE&nbsp;Huffman&nbsp;codes</span><br>
<span class="lineno"></span><span class="comment" id="4597612">//&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;shorter&nbsp;codes&nbsp;come&nbsp;before&nbsp;longer&nbsp;ones,&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4597681">//&nbsp;bit&nbsp;length&nbsp;estimate&nbsp;in&nbsp;the&nbsp;result&nbsp;is&nbsp;a&nbsp;lower&nbsp;bound&nbsp;on&nbsp;the&nbsp;actual</span><br>
<span class="lineno"></span><span class="comment" id="4597749">//&nbsp;number&nbsp;of&nbsp;bits.</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4597769">//&nbsp;chunk&nbsp;&amp;&nbsp;15&nbsp;is&nbsp;number&nbsp;of&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="4597801">//&nbsp;chunk&nbsp;&gt;&gt;&nbsp;4&nbsp;is&nbsp;value,&nbsp;including&nbsp;table&nbsp;link</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4597847">const</span>&nbsp;<span class="op" id="4597853">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4597856">huffmanChunkBits</span>&nbsp;&nbsp;<span class="op" id="4597874">=</span>&nbsp;<span class="num" id="4597876">9</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4597879">huffmanNumChunks</span>&nbsp;&nbsp;<span class="op" id="4597897">=</span>&nbsp;<span class="num" id="4597899">1</span>&nbsp;<span class="op" id="4597901">&lt;&lt;</span>&nbsp;<span class="ident" id="4597904"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4597922">huffmanCountMask</span>&nbsp;&nbsp;<span class="op" id="4597940">=</span>&nbsp;<span class="num" id="4597942">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4597946">huffmanValueShift</span>&nbsp;<span class="op" id="4597964">=</span>&nbsp;<span class="num" id="4597966">4</span><br>
<span class="lineno"></span><span class="op" id="4597968">)</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="4597971">type</span>&nbsp;<span class="ident" id="4597976">huffmanDecoder</span>&nbsp;<span class="keyword" id="4597991">struct</span>&nbsp;<span class="op" id="4597998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598001">min</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4598010">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4598035">//&nbsp;the&nbsp;minimum&nbsp;code&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598063">chunks</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4598072">[</span><span class="ident" id="4598073"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4598089">]</span><span class="builtintype" id="4598090">uint32</span>&nbsp;<span class="comment" id="4598097">//&nbsp;chunks&nbsp;as&nbsp;described&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598127">links</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4598136">[</span><span class="op" id="4598137">]</span><span class="op" id="4598138">[</span><span class="op" id="4598139">]</span><span class="builtintype" id="4598140">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4598161">//&nbsp;overflow&nbsp;links</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598180">linkMask</span>&nbsp;<span class="builtintype" id="4598189">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4598214">//&nbsp;mask&nbsp;the&nbsp;width&nbsp;of&nbsp;the&nbsp;link&nbsp;table</span><br>
<span class="lineno"></span><span class="op" id="4598250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4598253">//&nbsp;Initialize&nbsp;Huffman&nbsp;decoding&nbsp;tables&nbsp;from&nbsp;array&nbsp;of&nbsp;code&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="4598319">func</span>&nbsp;<span class="op" id="4598324">(</span><span class="ident" id="4598325">h</span>&nbsp;<span class="op" id="4598327">*</span><span class="ident" id="4598328"><a href="/compress/flate/inflate.go.html#4597976">huffmanDecoder</a></span><span class="op" id="4598342">)</span>&nbsp;<span class="ident" id="4598344">init</span><span class="op" id="4598348">(</span><span class="ident" id="4598349">bits</span>&nbsp;<span class="op" id="4598354">[</span><span class="op" id="4598355">]</span><span class="builtintype" id="4598356">int</span><span class="op" id="4598359">)</span>&nbsp;<span class="builtintype" id="4598361">bool</span>&nbsp;<span class="op" id="4598366">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598369">if</span>&nbsp;<span class="ident" id="4598372"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4598373">.</span><span class="ident" id="4598374">min</span>&nbsp;<span class="op" id="4598378">!=</span>&nbsp;<span class="num" id="4598381">0</span>&nbsp;<span class="op" id="4598383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598387">*</span><span class="ident" id="4598388"><a href="/compress/flate/inflate.go.html#4598325">h</a></span>&nbsp;<span class="op" id="4598390">=</span>&nbsp;<span class="ident" id="4598392"><a href="/compress/flate/inflate.go.html#4597976">huffmanDecoder</a></span><span class="op" id="4598406">{</span><span class="op" id="4598407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4598414">//&nbsp;Count&nbsp;number&nbsp;of&nbsp;codes&nbsp;of&nbsp;each&nbsp;length,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4598456">//&nbsp;compute&nbsp;min&nbsp;and&nbsp;max&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598488">var</span>&nbsp;<span class="ident" id="4598492">count</span>&nbsp;<span class="op" id="4598498">[</span><span class="ident" id="4598499"><a href="/compress/flate/inflate.go.html#4595115">maxCodeLen</a></span><span class="op" id="4598509">]</span><span class="builtintype" id="4598510">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598515">var</span>&nbsp;<span class="ident" id="4598519">min</span><span class="op" id="4598522">,</span>&nbsp;<span class="ident" id="4598524">max</span>&nbsp;<span class="builtintype" id="4598528">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598533">for</span>&nbsp;<span class="ident" id="4598537">_</span><span class="op" id="4598538">,</span>&nbsp;<span class="ident" id="4598540">n</span>&nbsp;<span class="op" id="4598542">:=</span>&nbsp;<span class="keyword" id="4598545">range</span>&nbsp;<span class="ident" id="4598551"><a href="/compress/flate/inflate.go.html#4598349">bits</a></span>&nbsp;<span class="op" id="4598556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598560">if</span>&nbsp;<span class="ident" id="4598563"><a href="/compress/flate/inflate.go.html#4598540">n</a></span>&nbsp;<span class="op" id="4598565">==</span>&nbsp;<span class="num" id="4598568">0</span>&nbsp;<span class="op" id="4598570">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598590">if</span>&nbsp;<span class="ident" id="4598593"><a href="/compress/flate/inflate.go.html#4598519">min</a></span>&nbsp;<span class="op" id="4598597">==</span>&nbsp;<span class="num" id="4598600">0</span>&nbsp;<span class="op" id="4598602">||</span>&nbsp;<span class="ident" id="4598605"><a href="/compress/flate/inflate.go.html#4598540">n</a></span>&nbsp;<span class="op" id="4598607">&lt;</span>&nbsp;<span class="ident" id="4598609"><a href="/compress/flate/inflate.go.html#4598519">min</a></span>&nbsp;<span class="op" id="4598613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598618"><a href="/compress/flate/inflate.go.html#4598519">min</a></span>&nbsp;<span class="op" id="4598622">=</span>&nbsp;<span class="ident" id="4598624"><a href="/compress/flate/inflate.go.html#4598540">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598628">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598632">if</span>&nbsp;<span class="ident" id="4598635"><a href="/compress/flate/inflate.go.html#4598540">n</a></span>&nbsp;<span class="op" id="4598637">&gt;</span>&nbsp;<span class="ident" id="4598639"><a href="/compress/flate/inflate.go.html#4598524">max</a></span>&nbsp;<span class="op" id="4598643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598648"><a href="/compress/flate/inflate.go.html#4598524">max</a></span>&nbsp;<span class="op" id="4598652">=</span>&nbsp;<span class="ident" id="4598654"><a href="/compress/flate/inflate.go.html#4598540">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598662"><a href="/compress/flate/inflate.go.html#4598492">count</a></span><span class="op" id="4598667">[</span><span class="ident" id="4598668"><a href="/compress/flate/inflate.go.html#4598540">n</a></span><span class="op" id="4598669">]</span><span class="op" id="4598670">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598674">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598677">if</span>&nbsp;<span class="ident" id="4598680"><a href="/compress/flate/inflate.go.html#4598524">max</a></span>&nbsp;<span class="op" id="4598684">==</span>&nbsp;<span class="num" id="4598687">0</span>&nbsp;<span class="op" id="4598689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598693">return</span>&nbsp;<span class="ident" id="4598700">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598711"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4598712">.</span><span class="ident" id="4598713">min</span>&nbsp;<span class="op" id="4598717">=</span>&nbsp;<span class="ident" id="4598719"><a href="/compress/flate/inflate.go.html#4598519">min</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598724">var</span>&nbsp;<span class="ident" id="4598728">linkBits</span>&nbsp;<span class="builtintype" id="4598737">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598743">var</span>&nbsp;<span class="ident" id="4598747">numLinks</span>&nbsp;<span class="builtintype" id="4598756">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598761">if</span>&nbsp;<span class="ident" id="4598764"><a href="/compress/flate/inflate.go.html#4598524">max</a></span>&nbsp;<span class="op" id="4598768">&gt;</span>&nbsp;<span class="ident" id="4598770"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4598787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598791"><a href="/compress/flate/inflate.go.html#4598728">linkBits</a></span>&nbsp;<span class="op" id="4598800">=</span>&nbsp;<span class="builtintype" id="4598802">uint</span><span class="op" id="4598806">(</span><span class="ident" id="4598807"><a href="/compress/flate/inflate.go.html#4598524">max</a></span><span class="op" id="4598810">)</span>&nbsp;<span class="op" id="4598812">-</span>&nbsp;<span class="ident" id="4598814"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598833"><a href="/compress/flate/inflate.go.html#4598747">numLinks</a></span>&nbsp;<span class="op" id="4598842">=</span>&nbsp;<span class="num" id="4598844">1</span>&nbsp;<span class="op" id="4598846">&lt;&lt;</span>&nbsp;<span class="ident" id="4598849"><a href="/compress/flate/inflate.go.html#4598728">linkBits</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598860"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4598861">.</span><span class="ident" id="4598862">linkMask</span>&nbsp;<span class="op" id="4598871">=</span>&nbsp;<span class="builtintype" id="4598873">uint32</span><span class="op" id="4598879">(</span><span class="ident" id="4598880"><a href="/compress/flate/inflate.go.html#4598747">numLinks</a></span>&nbsp;<span class="op" id="4598889">-</span>&nbsp;<span class="num" id="4598891">1</span><span class="op" id="4598892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4598895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4598898">code</span>&nbsp;<span class="op" id="4598903">:=</span>&nbsp;<span class="num" id="4598906">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598909">var</span>&nbsp;<span class="ident" id="4598913">nextcode</span>&nbsp;<span class="op" id="4598922">[</span><span class="ident" id="4598923"><a href="/compress/flate/inflate.go.html#4595115">maxCodeLen</a></span><span class="op" id="4598933">]</span><span class="builtintype" id="4598934">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598939">for</span>&nbsp;<span class="ident" id="4598943">i</span>&nbsp;<span class="op" id="4598945">:=</span>&nbsp;<span class="ident" id="4598948"><a href="/compress/flate/inflate.go.html#4598519">min</a></span><span class="op" id="4598951">;</span>&nbsp;<span class="ident" id="4598953"><a href="/compress/flate/inflate.go.html#4598943">i</a></span>&nbsp;<span class="op" id="4598955">&lt;=</span>&nbsp;<span class="ident" id="4598958"><a href="/compress/flate/inflate.go.html#4598524">max</a></span><span class="op" id="4598961">;</span>&nbsp;<span class="ident" id="4598963"><a href="/compress/flate/inflate.go.html#4598943">i</a></span><span class="op" id="4598964">++</span>&nbsp;<span class="op" id="4598967">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4598971">if</span>&nbsp;<span class="ident" id="4598974"><a href="/compress/flate/inflate.go.html#4598943">i</a></span>&nbsp;<span class="op" id="4598976">==</span>&nbsp;<span class="ident" id="4598979"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><span class="op" id="4598995">+</span><span class="num" id="4598996">1</span>&nbsp;<span class="op" id="4598998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4599003">//&nbsp;create&nbsp;link&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599028">link</span>&nbsp;<span class="op" id="4599033">:=</span>&nbsp;<span class="ident" id="4599036"><a href="/compress/flate/inflate.go.html#4598898">code</a></span>&nbsp;<span class="op" id="4599041">&gt;&gt;</span>&nbsp;<span class="num" id="4599044">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599049">if</span>&nbsp;<span class="ident" id="4599052"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span>&nbsp;<span class="op" id="4599069">&lt;</span>&nbsp;<span class="ident" id="4599071"><a href="/compress/flate/inflate.go.html#4599028">link</a></span>&nbsp;<span class="op" id="4599076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599082">return</span>&nbsp;<span class="ident" id="4599089">false</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599103"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4599104">.</span><span class="ident" id="4599105">links</span>&nbsp;<span class="op" id="4599111">=</span>&nbsp;<span class="builtinfunc" id="4599113">make</span><span class="op" id="4599117">(</span><span class="op" id="4599118">[</span><span class="op" id="4599119">]</span><span class="op" id="4599120">[</span><span class="op" id="4599121">]</span><span class="builtintype" id="4599122">uint32</span><span class="op" id="4599128">,</span>&nbsp;<span class="ident" id="4599130"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4599146">-</span><span class="ident" id="4599147"><a href="/compress/flate/inflate.go.html#4599028">link</a></span><span class="op" id="4599151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599156">for</span>&nbsp;<span class="ident" id="4599160">j</span>&nbsp;<span class="op" id="4599162">:=</span>&nbsp;<span class="builtintype" id="4599165">uint</span><span class="op" id="4599169">(</span><span class="ident" id="4599170"><a href="/compress/flate/inflate.go.html#4599028">link</a></span><span class="op" id="4599174">)</span><span class="op" id="4599175">;</span>&nbsp;<span class="ident" id="4599177"><a href="/compress/flate/inflate.go.html#4599160">j</a></span>&nbsp;<span class="op" id="4599179">&lt;</span>&nbsp;<span class="ident" id="4599181"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4599197">;</span>&nbsp;<span class="ident" id="4599199"><a href="/compress/flate/inflate.go.html#4599160">j</a></span><span class="op" id="4599200">++</span>&nbsp;<span class="op" id="4599203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599209">reverse</span>&nbsp;<span class="op" id="4599217">:=</span>&nbsp;<span class="builtintype" id="4599220">int</span><span class="op" id="4599223">(</span><span class="ident" id="4599224"><a href="/compress/flate/reverse_bits.go.html#4611770">reverseByte</a></span><span class="op" id="4599235">[</span><span class="ident" id="4599236"><a href="/compress/flate/inflate.go.html#4599160">j</a></span><span class="op" id="4599237">&gt;&gt;</span><span class="num" id="4599239">8</span><span class="op" id="4599240">]</span><span class="op" id="4599241">)</span>&nbsp;<span class="op" id="4599243">|</span>&nbsp;<span class="builtintype" id="4599245">int</span><span class="op" id="4599248">(</span><span class="ident" id="4599249"><a href="/compress/flate/reverse_bits.go.html#4611770">reverseByte</a></span><span class="op" id="4599260">[</span><span class="ident" id="4599261"><a href="/compress/flate/inflate.go.html#4599160">j</a></span><span class="op" id="4599262">&amp;</span><span class="num" id="4599263">0xff</span><span class="op" id="4599267">]</span><span class="op" id="4599268">)</span><span class="op" id="4599269">&lt;&lt;</span><span class="num" id="4599271">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599277"><a href="/compress/flate/inflate.go.html#4599209">reverse</a></span>&nbsp;<span class="op" id="4599285">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="4599289">uint</span><span class="op" id="4599293">(</span><span class="num" id="4599294">16</span>&nbsp;<span class="op" id="4599297">-</span>&nbsp;<span class="ident" id="4599299"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><span class="op" id="4599315">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599321">off</span>&nbsp;<span class="op" id="4599325">:=</span>&nbsp;<span class="ident" id="4599328"><a href="/compress/flate/inflate.go.html#4599160">j</a></span>&nbsp;<span class="op" id="4599330">-</span>&nbsp;<span class="builtintype" id="4599332">uint</span><span class="op" id="4599336">(</span><span class="ident" id="4599337"><a href="/compress/flate/inflate.go.html#4599028">link</a></span><span class="op" id="4599341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599347"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4599348">.</span><span class="ident" id="4599349">chunks</span><span class="op" id="4599355">[</span><span class="ident" id="4599356"><a href="/compress/flate/inflate.go.html#4599209">reverse</a></span><span class="op" id="4599363">]</span>&nbsp;<span class="op" id="4599365">=</span>&nbsp;<span class="builtintype" id="4599367">uint32</span><span class="op" id="4599373">(</span><span class="ident" id="4599374"><a href="/compress/flate/inflate.go.html#4599321">off</a></span><span class="op" id="4599377">&lt;&lt;</span><span class="ident" id="4599379"><a href="/compress/flate/inflate.go.html#4597946">huffmanValueShift</a></span>&nbsp;<span class="op" id="4599397">+</span>&nbsp;<span class="builtintype" id="4599399">uint</span><span class="op" id="4599403">(</span><span class="ident" id="4599404"><a href="/compress/flate/inflate.go.html#4598943">i</a></span><span class="op" id="4599405">)</span><span class="op" id="4599406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599412"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4599413">.</span><span class="ident" id="4599414">links</span><span class="op" id="4599419">[</span><span class="ident" id="4599420"><a href="/compress/flate/inflate.go.html#4599321">off</a></span><span class="op" id="4599423">]</span>&nbsp;<span class="op" id="4599425">=</span>&nbsp;<span class="builtinfunc" id="4599427">make</span><span class="op" id="4599431">(</span><span class="op" id="4599432">[</span><span class="op" id="4599433">]</span><span class="builtintype" id="4599434">uint32</span><span class="op" id="4599440">,</span>&nbsp;<span class="num" id="4599442">1</span><span class="op" id="4599443">&lt;&lt;</span><span class="ident" id="4599445"><a href="/compress/flate/inflate.go.html#4598728">linkBits</a></span><span class="op" id="4599453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599462">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599466">n</span>&nbsp;<span class="op" id="4599468">:=</span>&nbsp;<span class="ident" id="4599471"><a href="/compress/flate/inflate.go.html#4598492">count</a></span><span class="op" id="4599476">[</span><span class="ident" id="4599477"><a href="/compress/flate/inflate.go.html#4598943">i</a></span><span class="op" id="4599478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599482"><a href="/compress/flate/inflate.go.html#4598913">nextcode</a></span><span class="op" id="4599490">[</span><span class="ident" id="4599491"><a href="/compress/flate/inflate.go.html#4598943">i</a></span><span class="op" id="4599492">]</span>&nbsp;<span class="op" id="4599494">=</span>&nbsp;<span class="ident" id="4599496"><a href="/compress/flate/inflate.go.html#4598898">code</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599503"><a href="/compress/flate/inflate.go.html#4598898">code</a></span>&nbsp;<span class="op" id="4599508">+=</span>&nbsp;<span class="ident" id="4599511"><a href="/compress/flate/inflate.go.html#4599466">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599515"><a href="/compress/flate/inflate.go.html#4598898">code</a></span>&nbsp;<span class="op" id="4599520">&lt;&lt;=</span>&nbsp;<span class="num" id="4599524">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599527">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599531">for</span>&nbsp;<span class="ident" id="4599535">i</span><span class="op" id="4599536">,</span>&nbsp;<span class="ident" id="4599538">n</span>&nbsp;<span class="op" id="4599540">:=</span>&nbsp;<span class="keyword" id="4599543">range</span>&nbsp;<span class="ident" id="4599549"><a href="/compress/flate/inflate.go.html#4598349">bits</a></span>&nbsp;<span class="op" id="4599554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599558">if</span>&nbsp;<span class="ident" id="4599561"><a href="/compress/flate/inflate.go.html#4599538">n</a></span>&nbsp;<span class="op" id="4599563">==</span>&nbsp;<span class="num" id="4599566">0</span>&nbsp;<span class="op" id="4599568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599573">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599584">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599588">code</span>&nbsp;<span class="op" id="4599593">:=</span>&nbsp;<span class="ident" id="4599596"><a href="/compress/flate/inflate.go.html#4598913">nextcode</a></span><span class="op" id="4599604">[</span><span class="ident" id="4599605"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4599606">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599610"><a href="/compress/flate/inflate.go.html#4598913">nextcode</a></span><span class="op" id="4599618">[</span><span class="ident" id="4599619"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4599620">]</span><span class="op" id="4599621">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599626">chunk</span>&nbsp;<span class="op" id="4599632">:=</span>&nbsp;<span class="builtintype" id="4599635">uint32</span><span class="op" id="4599641">(</span><span class="ident" id="4599642"><a href="/compress/flate/inflate.go.html#4599535">i</a></span><span class="op" id="4599643">&lt;&lt;</span><span class="ident" id="4599645"><a href="/compress/flate/inflate.go.html#4597946">huffmanValueShift</a></span>&nbsp;<span class="op" id="4599663">|</span>&nbsp;<span class="ident" id="4599665"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4599666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599670">reverse</span>&nbsp;<span class="op" id="4599678">:=</span>&nbsp;<span class="builtintype" id="4599681">int</span><span class="op" id="4599684">(</span><span class="ident" id="4599685"><a href="/compress/flate/reverse_bits.go.html#4611770">reverseByte</a></span><span class="op" id="4599696">[</span><span class="ident" id="4599697"><a href="/compress/flate/inflate.go.html#4599588">code</a></span><span class="op" id="4599701">&gt;&gt;</span><span class="num" id="4599703">8</span><span class="op" id="4599704">]</span><span class="op" id="4599705">)</span>&nbsp;<span class="op" id="4599707">|</span>&nbsp;<span class="builtintype" id="4599709">int</span><span class="op" id="4599712">(</span><span class="ident" id="4599713"><a href="/compress/flate/reverse_bits.go.html#4611770">reverseByte</a></span><span class="op" id="4599724">[</span><span class="ident" id="4599725"><a href="/compress/flate/inflate.go.html#4599588">code</a></span><span class="op" id="4599729">&amp;</span><span class="num" id="4599730">0xff</span><span class="op" id="4599734">]</span><span class="op" id="4599735">)</span><span class="op" id="4599736">&lt;&lt;</span><span class="num" id="4599738">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599742"><a href="/compress/flate/inflate.go.html#4599670">reverse</a></span>&nbsp;<span class="op" id="4599750">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="4599754">uint</span><span class="op" id="4599758">(</span><span class="num" id="4599759">16</span>&nbsp;<span class="op" id="4599762">-</span>&nbsp;<span class="ident" id="4599764"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4599765">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599769">if</span>&nbsp;<span class="ident" id="4599772"><a href="/compress/flate/inflate.go.html#4599538">n</a></span>&nbsp;<span class="op" id="4599774">&lt;=</span>&nbsp;<span class="ident" id="4599777"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4599794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599799">for</span>&nbsp;<span class="ident" id="4599803">off</span>&nbsp;<span class="op" id="4599807">:=</span>&nbsp;<span class="ident" id="4599810"><a href="/compress/flate/inflate.go.html#4599670">reverse</a></span><span class="op" id="4599817">;</span>&nbsp;<span class="ident" id="4599819"><a href="/compress/flate/inflate.go.html#4599803">off</a></span>&nbsp;<span class="op" id="4599823">&lt;</span>&nbsp;<span class="ident" id="4599825"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4599841">;</span>&nbsp;<span class="ident" id="4599843"><a href="/compress/flate/inflate.go.html#4599803">off</a></span>&nbsp;<span class="op" id="4599847">+=</span>&nbsp;<span class="num" id="4599850">1</span>&nbsp;<span class="op" id="4599852">&lt;&lt;</span>&nbsp;<span class="builtintype" id="4599855">uint</span><span class="op" id="4599859">(</span><span class="ident" id="4599860"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4599861">)</span>&nbsp;<span class="op" id="4599863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599869"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4599870">.</span><span class="ident" id="4599871">chunks</span><span class="op" id="4599877">[</span><span class="ident" id="4599878"><a href="/compress/flate/inflate.go.html#4599803">off</a></span><span class="op" id="4599881">]</span>&nbsp;<span class="op" id="4599883">=</span>&nbsp;<span class="ident" id="4599885"><a href="/compress/flate/inflate.go.html#4599626">chunk</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4599898">}</span>&nbsp;<span class="keyword" id="4599900">else</span>&nbsp;<span class="op" id="4599905">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4599910">value</span>&nbsp;<span class="op" id="4599916">:=</span>&nbsp;<span class="ident" id="4599919"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4599920">.</span><span class="ident" id="4599921">chunks</span><span class="op" id="4599927">[</span><span class="ident" id="4599928"><a href="/compress/flate/inflate.go.html#4599670">reverse</a></span><span class="op" id="4599935">&amp;</span><span class="op" id="4599936">(</span><span class="ident" id="4599937"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4599953">-</span><span class="num" id="4599954">1</span><span class="op" id="4599955">)</span><span class="op" id="4599956">]</span>&nbsp;<span class="op" id="4599958">&gt;&gt;</span>&nbsp;<span class="ident" id="4599961"><a href="/compress/flate/inflate.go.html#4597946">huffmanValueShift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4599982">if</span>&nbsp;<span class="ident" id="4599985"><a href="/compress/flate/inflate.go.html#4599910">value</a></span>&nbsp;<span class="op" id="4599991">&gt;=</span>&nbsp;<span class="builtintype" id="4599994">uint32</span><span class="op" id="4600000">(</span><span class="builtinfunc" id="4600001">len</span><span class="op" id="4600004">(</span><span class="ident" id="4600005"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4600006">.</span><span class="ident" id="4600007">links</span><span class="op" id="4600012">)</span><span class="op" id="4600013">)</span>&nbsp;<span class="op" id="4600015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4600021">return</span>&nbsp;<span class="ident" id="4600028">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4600037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600042">linktab</span>&nbsp;<span class="op" id="4600050">:=</span>&nbsp;<span class="ident" id="4600053"><a href="/compress/flate/inflate.go.html#4598325">h</a></span><span class="op" id="4600054">.</span><span class="ident" id="4600055">links</span><span class="op" id="4600060">[</span><span class="ident" id="4600061"><a href="/compress/flate/inflate.go.html#4599910">value</a></span><span class="op" id="4600066">]</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600071"><a href="/compress/flate/inflate.go.html#4599670">reverse</a></span>&nbsp;<span class="op" id="4600079">&gt;&gt;=</span>&nbsp;<span class="ident" id="4600083"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4600103">for</span>&nbsp;<span class="ident" id="4600107">off</span>&nbsp;<span class="op" id="4600111">:=</span>&nbsp;<span class="ident" id="4600114"><a href="/compress/flate/inflate.go.html#4599670">reverse</a></span><span class="op" id="4600121">;</span>&nbsp;<span class="ident" id="4600123"><a href="/compress/flate/inflate.go.html#4600107">off</a></span>&nbsp;<span class="op" id="4600127">&lt;</span>&nbsp;<span class="ident" id="4600129"><a href="/compress/flate/inflate.go.html#4598747">numLinks</a></span><span class="op" id="4600137">;</span>&nbsp;<span class="ident" id="4600139"><a href="/compress/flate/inflate.go.html#4600107">off</a></span>&nbsp;<span class="op" id="4600143">+=</span>&nbsp;<span class="num" id="4600146">1</span>&nbsp;<span class="op" id="4600148">&lt;&lt;</span>&nbsp;<span class="builtintype" id="4600151">uint</span><span class="op" id="4600155">(</span><span class="ident" id="4600156"><a href="/compress/flate/inflate.go.html#4599538">n</a></span><span class="op" id="4600157">-</span><span class="ident" id="4600158"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><span class="op" id="4600174">)</span>&nbsp;<span class="op" id="4600176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600182"><a href="/compress/flate/inflate.go.html#4600042">linktab</a></span><span class="op" id="4600189">[</span><span class="ident" id="4600190"><a href="/compress/flate/inflate.go.html#4600107">off</a></span><span class="op" id="4600193">]</span>&nbsp;<span class="op" id="4600195">=</span>&nbsp;<span class="ident" id="4600197"><a href="/compress/flate/inflate.go.html#4599626">chunk</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4600206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4600210">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4600213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4600216">return</span>&nbsp;<span class="ident" id="4600223">true</span><br>
<span class="lineno"></span><span class="op" id="4600228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4600231">//&nbsp;The&nbsp;actual&nbsp;read&nbsp;interface&nbsp;needed&nbsp;by&nbsp;NewReader.</span><br>
<span class="lineno">190</span><span class="comment" id="4600281">//&nbsp;If&nbsp;the&nbsp;passed&nbsp;in&nbsp;io.Reader&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;ReadByte,</span><br>
<span class="lineno"></span><span class="comment" id="4600340">//&nbsp;the&nbsp;NewReader&nbsp;will&nbsp;introduce&nbsp;its&nbsp;own&nbsp;buffering.</span><br>
<span class="lineno"></span><span class="keyword" id="4600391">type</span>&nbsp;<span class="ident" id="4600396">Reader</span>&nbsp;<span class="keyword" id="4600403">interface</span>&nbsp;<span class="op" id="4600413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600416"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4600418">.</span><span class="ident" id="4600419">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600427"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4600429">.</span><span class="ident" id="4600430">ByteReader</span><br>
<span class="lineno">195</span><span class="op" id="4600441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4600444">//&nbsp;Decompress&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4600465">type</span>&nbsp;<span class="ident" id="4600470">decompressor</span>&nbsp;<span class="keyword" id="4600483">struct</span>&nbsp;<span class="op" id="4600490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600493">//&nbsp;Input&nbsp;source.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600511">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600519"><a href="/compress/flate/inflate.go.html#4600396">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600527">roffset</span>&nbsp;<span class="ident" id="4600535">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600542">woffset</span>&nbsp;<span class="ident" id="4600550">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600558">//&nbsp;Input&nbsp;bits,&nbsp;in&nbsp;top&nbsp;of&nbsp;b.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600587">b</span>&nbsp;&nbsp;<span class="builtintype" id="4600590">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600598">nb</span>&nbsp;<span class="builtintype" id="4600601">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600608">//&nbsp;Huffman&nbsp;decoders&nbsp;for&nbsp;literal/length,&nbsp;distance.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600659">h1</span><span class="op" id="4600661">,</span>&nbsp;<span class="ident" id="4600663">h2</span>&nbsp;<span class="ident" id="4600666"><a href="/compress/flate/inflate.go.html#4597976">huffmanDecoder</a></span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600683">//&nbsp;Length&nbsp;arrays&nbsp;used&nbsp;to&nbsp;define&nbsp;Huffman&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600731">bits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4600740">*</span><span class="op" id="4600741">[</span><span class="ident" id="4600742"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span>&nbsp;<span class="op" id="4600749">+</span>&nbsp;<span class="ident" id="4600751"><a href="/compress/flate/inflate.go.html#4595286">maxDist</a></span><span class="op" id="4600758">]</span><span class="builtintype" id="4600759">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600764">codebits</span>&nbsp;<span class="op" id="4600773">*</span><span class="op" id="4600774">[</span><span class="ident" id="4600775"><a href="/compress/flate/inflate.go.html#4595301">numCodes</a></span><span class="op" id="4600783">]</span><span class="builtintype" id="4600784">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600790">//&nbsp;Output&nbsp;history,&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600818">hist</span>&nbsp;&nbsp;<span class="op" id="4600824">*</span><span class="op" id="4600825">[</span><span class="ident" id="4600826"><a href="/compress/flate/inflate.go.html#4595165">maxHist</a></span><span class="op" id="4600833">]</span><span class="builtintype" id="4600834">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600840">hp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4600846">int</span>&nbsp;&nbsp;<span class="comment" id="4600851">//&nbsp;current&nbsp;output&nbsp;position&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600889">hw</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4600895">int</span>&nbsp;&nbsp;<span class="comment" id="4600900">//&nbsp;have&nbsp;written&nbsp;hist[0:hw]&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4600936">hfull</span>&nbsp;<span class="builtintype" id="4600942">bool</span>&nbsp;<span class="comment" id="4600947">//&nbsp;buffer&nbsp;has&nbsp;filled&nbsp;at&nbsp;least&nbsp;once</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4600984">//&nbsp;Temporary&nbsp;buffer&nbsp;(avoids&nbsp;repeated&nbsp;allocation).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601035">buf</span>&nbsp;<span class="op" id="4601039">[</span><span class="num" id="4601040">4</span><span class="op" id="4601041">]</span><span class="builtintype" id="4601042">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4601049">//&nbsp;Next&nbsp;step&nbsp;in&nbsp;the&nbsp;decompression,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4601085">//&nbsp;and&nbsp;decompression&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601114">step</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601123">func</span><span class="op" id="4601127">(</span><span class="op" id="4601128">*</span><span class="ident" id="4601129"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4601141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601144">final</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4601153">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601159">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4601168">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601175">toRead</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4601184">[</span><span class="op" id="4601185">]</span><span class="builtintype" id="4601186">byte</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601192">hl</span><span class="op" id="4601194">,</span>&nbsp;<span class="ident" id="4601196">hd</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4601201">*</span><span class="ident" id="4601202"><a href="/compress/flate/inflate.go.html#4597976">huffmanDecoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601218">copyLen</span>&nbsp;&nbsp;<span class="builtintype" id="4601227">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601232">copyDist</span>&nbsp;<span class="builtintype" id="4601241">int</span><br>
<span class="lineno"></span><span class="op" id="4601245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4601248">func</span>&nbsp;<span class="op" id="4601253">(</span><span class="ident" id="4601254">f</span>&nbsp;<span class="op" id="4601256">*</span><span class="ident" id="4601257"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4601269">)</span>&nbsp;<span class="ident" id="4601271">nextBlock</span><span class="op" id="4601280">(</span><span class="op" id="4601281">)</span>&nbsp;<span class="op" id="4601283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601286">if</span>&nbsp;<span class="ident" id="4601289"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601290">.</span><span class="ident" id="4601291">final</span>&nbsp;<span class="op" id="4601297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601301">if</span>&nbsp;<span class="ident" id="4601304"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601305">.</span><span class="ident" id="4601306">hw</span>&nbsp;<span class="op" id="4601309">!=</span>&nbsp;<span class="ident" id="4601312"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601313">.</span><span class="ident" id="4601314">hp</span>&nbsp;<span class="op" id="4601317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601322"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601323">.</span><span class="ident" id="4601324">flush</span><span class="op" id="4601329">(</span><span class="op" id="4601330">(</span><span class="op" id="4601331">*</span><span class="ident" id="4601332"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4601344">)</span><span class="op" id="4601345">.</span><span class="ident" id="4601346">nextBlock</span><span class="op" id="4601355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601360">return</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601373"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601374">.</span><span class="ident" id="4601375">err</span>&nbsp;<span class="op" id="4601379">=</span>&nbsp;<span class="ident" id="4601381"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4601383">.</span><span class="ident" id="4601384">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601390">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601401">for</span>&nbsp;<span class="ident" id="4601405"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601406">.</span><span class="ident" id="4601407">nb</span>&nbsp;<span class="op" id="4601410">&lt;</span>&nbsp;<span class="num" id="4601412">1</span><span class="op" id="4601413">+</span><span class="num" id="4601414">2</span>&nbsp;<span class="op" id="4601416">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601420">if</span>&nbsp;<span class="ident" id="4601423"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601424">.</span><span class="ident" id="4601425">err</span>&nbsp;<span class="op" id="4601429">=</span>&nbsp;<span class="ident" id="4601431"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601432">.</span><span class="ident" id="4601433">moreBits</span><span class="op" id="4601441">(</span><span class="op" id="4601442">)</span><span class="op" id="4601443">;</span>&nbsp;<span class="ident" id="4601445"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601446">.</span><span class="ident" id="4601447">err</span>&nbsp;<span class="op" id="4601451">!=</span>&nbsp;<span class="ident" id="4601454">nil</span>&nbsp;<span class="op" id="4601458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601463">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601478"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601479">.</span><span class="ident" id="4601480">final</span>&nbsp;<span class="op" id="4601486">=</span>&nbsp;<span class="ident" id="4601488"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601489">.</span><span class="ident" id="4601490">b</span><span class="op" id="4601491">&amp;</span><span class="num" id="4601492">1</span>&nbsp;<span class="op" id="4601494">==</span>&nbsp;<span class="num" id="4601497">1</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601500"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601501">.</span><span class="ident" id="4601502">b</span>&nbsp;<span class="op" id="4601504">&gt;&gt;=</span>&nbsp;<span class="num" id="4601508">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601511">typ</span>&nbsp;<span class="op" id="4601515">:=</span>&nbsp;<span class="ident" id="4601518"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601519">.</span><span class="ident" id="4601520">b</span>&nbsp;<span class="op" id="4601522">&amp;</span>&nbsp;<span class="num" id="4601524">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601527"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601528">.</span><span class="ident" id="4601529">b</span>&nbsp;<span class="op" id="4601531">&gt;&gt;=</span>&nbsp;<span class="num" id="4601535">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601538"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601539">.</span><span class="ident" id="4601540">nb</span>&nbsp;<span class="op" id="4601543">-=</span>&nbsp;<span class="num" id="4601546">1</span>&nbsp;<span class="op" id="4601548">+</span>&nbsp;<span class="num" id="4601550">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601553">switch</span>&nbsp;<span class="ident" id="4601560"><a href="/compress/flate/inflate.go.html#4601511">typ</a></span>&nbsp;<span class="op" id="4601564">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601567">case</span>&nbsp;<span class="num" id="4601572">0</span><span class="op" id="4601573">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601577"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601578">.</span><span class="ident" id="4601579">dataBlock</span><span class="op" id="4601588">(</span><span class="op" id="4601589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601592">case</span>&nbsp;<span class="num" id="4601597">1</span><span class="op" id="4601598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4601602">//&nbsp;compressed,&nbsp;fixed&nbsp;Huffman&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601640"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601641">.</span><span class="ident" id="4601642">hl</span>&nbsp;<span class="op" id="4601645">=</span>&nbsp;<span class="op" id="4601647">&amp;</span><span class="ident" id="4601648"><a href="/compress/flate/fixedhuff.go.html#4567773">fixedHuffmanDecoder</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601670"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601671">.</span><span class="ident" id="4601672">hd</span>&nbsp;<span class="op" id="4601675">=</span>&nbsp;<span class="ident" id="4601677">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601683"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601684">.</span><span class="ident" id="4601685">huffmanBlock</span><span class="op" id="4601697">(</span><span class="op" id="4601698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601701">case</span>&nbsp;<span class="num" id="4601706">2</span><span class="op" id="4601707">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4601711">//&nbsp;compressed,&nbsp;dynamic&nbsp;Huffman&nbsp;tables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601751">if</span>&nbsp;<span class="ident" id="4601754"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601755">.</span><span class="ident" id="4601756">err</span>&nbsp;<span class="op" id="4601760">=</span>&nbsp;<span class="ident" id="4601762"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601763">.</span><span class="ident" id="4601764">readHuffman</span><span class="op" id="4601775">(</span><span class="op" id="4601776">)</span><span class="op" id="4601777">;</span>&nbsp;<span class="ident" id="4601779"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601780">.</span><span class="ident" id="4601781">err</span>&nbsp;<span class="op" id="4601785">!=</span>&nbsp;<span class="ident" id="4601788">nil</span>&nbsp;<span class="op" id="4601792">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601797">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601809"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601810">.</span><span class="ident" id="4601811">hl</span>&nbsp;<span class="op" id="4601814">=</span>&nbsp;<span class="op" id="4601816">&amp;</span><span class="ident" id="4601817"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601818">.</span><span class="ident" id="4601819">h1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601824"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601825">.</span><span class="ident" id="4601826">hd</span>&nbsp;<span class="op" id="4601829">=</span>&nbsp;<span class="op" id="4601831">&amp;</span><span class="ident" id="4601832"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601833">.</span><span class="ident" id="4601834">h2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601839"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601840">.</span><span class="ident" id="4601841">huffmanBlock</span><span class="op" id="4601853">(</span><span class="op" id="4601854">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601857">default</span><span class="op" id="4601864">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4601868">//&nbsp;3&nbsp;is&nbsp;reserved.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4601888"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601889">.</span><span class="ident" id="4601890">err</span>&nbsp;<span class="op" id="4601894">=</span>&nbsp;<span class="ident" id="4601896"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4601913">(</span><span class="ident" id="4601914"><a href="/compress/flate/inflate.go.html#4601254">f</a></span><span class="op" id="4601915">.</span><span class="ident" id="4601916">roffset</span><span class="op" id="4601923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4601926">}</span><br>
<span class="lineno"></span><span class="op" id="4601928">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="4601931">func</span>&nbsp;<span class="op" id="4601936">(</span><span class="ident" id="4601937">f</span>&nbsp;<span class="op" id="4601939">*</span><span class="ident" id="4601940"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4601952">)</span>&nbsp;<span class="ident" id="4601954">Read</span><span class="op" id="4601958">(</span><span class="ident" id="4601959">b</span>&nbsp;<span class="op" id="4601961">[</span><span class="op" id="4601962">]</span><span class="builtintype" id="4601963">byte</span><span class="op" id="4601967">)</span>&nbsp;<span class="op" id="4601969">(</span><span class="builtintype" id="4601970">int</span><span class="op" id="4601973">,</span>&nbsp;<span class="builtintype" id="4601975">error</span><span class="op" id="4601980">)</span>&nbsp;<span class="op" id="4601982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601985">for</span>&nbsp;<span class="op" id="4601989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4601993">if</span>&nbsp;<span class="builtinfunc" id="4601996">len</span><span class="op" id="4601999">(</span><span class="ident" id="4602000"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602001">.</span><span class="ident" id="4602002">toRead</span><span class="op" id="4602008">)</span>&nbsp;<span class="op" id="4602010">&gt;</span>&nbsp;<span class="num" id="4602012">0</span>&nbsp;<span class="op" id="4602014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602019">n</span>&nbsp;<span class="op" id="4602021">:=</span>&nbsp;<span class="builtinfunc" id="4602024">copy</span><span class="op" id="4602028">(</span><span class="ident" id="4602029"><a href="/compress/flate/inflate.go.html#4601959">b</a></span><span class="op" id="4602030">,</span>&nbsp;<span class="ident" id="4602032"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602033">.</span><span class="ident" id="4602034">toRead</span><span class="op" id="4602040">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602045"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602046">.</span><span class="ident" id="4602047">toRead</span>&nbsp;<span class="op" id="4602054">=</span>&nbsp;<span class="ident" id="4602056"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602057">.</span><span class="ident" id="4602058">toRead</span><span class="op" id="4602064">[</span><span class="ident" id="4602065"><a href="/compress/flate/inflate.go.html#4602019">n</a></span><span class="op" id="4602066">:</span><span class="op" id="4602067">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602072">return</span>&nbsp;<span class="ident" id="4602079"><a href="/compress/flate/inflate.go.html#4602019">n</a></span><span class="op" id="4602080">,</span>&nbsp;<span class="ident" id="4602082">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602092">if</span>&nbsp;<span class="ident" id="4602095"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602096">.</span><span class="ident" id="4602097">err</span>&nbsp;<span class="op" id="4602101">!=</span>&nbsp;<span class="ident" id="4602104">nil</span>&nbsp;<span class="op" id="4602108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602113">return</span>&nbsp;<span class="num" id="4602120">0</span><span class="op" id="4602121">,</span>&nbsp;<span class="ident" id="4602123"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602124">.</span><span class="ident" id="4602125">err</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602135"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602136">.</span><span class="ident" id="4602137">step</span><span class="op" id="4602141">(</span><span class="ident" id="4602142"><a href="/compress/flate/inflate.go.html#4601937">f</a></span><span class="op" id="4602143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602146">}</span><br>
<span class="lineno"></span><span class="op" id="4602148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4602151">func</span>&nbsp;<span class="op" id="4602156">(</span><span class="ident" id="4602157">f</span>&nbsp;<span class="op" id="4602159">*</span><span class="ident" id="4602160"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4602172">)</span>&nbsp;<span class="ident" id="4602174">Close</span><span class="op" id="4602179">(</span><span class="op" id="4602180">)</span>&nbsp;<span class="builtintype" id="4602182">error</span>&nbsp;<span class="op" id="4602188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602191">if</span>&nbsp;<span class="ident" id="4602194"><a href="/compress/flate/inflate.go.html#4602157">f</a></span><span class="op" id="4602195">.</span><span class="ident" id="4602196">err</span>&nbsp;<span class="op" id="4602200">==</span>&nbsp;<span class="ident" id="4602203"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4602205">.</span><span class="ident" id="4602206">EOF</span>&nbsp;<span class="op" id="4602210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602214">return</span>&nbsp;<span class="ident" id="4602221">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602229">return</span>&nbsp;<span class="ident" id="4602236"><a href="/compress/flate/inflate.go.html#4602157">f</a></span><span class="op" id="4602237">.</span><span class="ident" id="4602238">err</span><br>
<span class="lineno">295</span><span class="op" id="4602242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4602245">//&nbsp;RFC&nbsp;1951&nbsp;section&nbsp;3.2.7.</span><br>
<span class="lineno"></span><span class="comment" id="4602272">//&nbsp;Compression&nbsp;with&nbsp;dynamic&nbsp;Huffman&nbsp;codes</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="keyword" id="4602315">var</span>&nbsp;<span class="ident" id="4602319">codeOrder</span>&nbsp;<span class="op" id="4602329">=</span>&nbsp;<span class="op" id="4602331">[</span><span class="op" id="4602332">...</span><span class="op" id="4602335">]</span><span class="builtintype" id="4602336">int</span><span class="op" id="4602339">{</span><span class="num" id="4602340">16</span><span class="op" id="4602342">,</span>&nbsp;<span class="num" id="4602344">17</span><span class="op" id="4602346">,</span>&nbsp;<span class="num" id="4602348">18</span><span class="op" id="4602350">,</span>&nbsp;<span class="num" id="4602352">0</span><span class="op" id="4602353">,</span>&nbsp;<span class="num" id="4602355">8</span><span class="op" id="4602356">,</span>&nbsp;<span class="num" id="4602358">7</span><span class="op" id="4602359">,</span>&nbsp;<span class="num" id="4602361">9</span><span class="op" id="4602362">,</span>&nbsp;<span class="num" id="4602364">6</span><span class="op" id="4602365">,</span>&nbsp;<span class="num" id="4602367">10</span><span class="op" id="4602369">,</span>&nbsp;<span class="num" id="4602371">5</span><span class="op" id="4602372">,</span>&nbsp;<span class="num" id="4602374">11</span><span class="op" id="4602376">,</span>&nbsp;<span class="num" id="4602378">4</span><span class="op" id="4602379">,</span>&nbsp;<span class="num" id="4602381">12</span><span class="op" id="4602383">,</span>&nbsp;<span class="num" id="4602385">3</span><span class="op" id="4602386">,</span>&nbsp;<span class="num" id="4602388">13</span><span class="op" id="4602390">,</span>&nbsp;<span class="num" id="4602392">2</span><span class="op" id="4602393">,</span>&nbsp;<span class="num" id="4602395">14</span><span class="op" id="4602397">,</span>&nbsp;<span class="num" id="4602399">1</span><span class="op" id="4602400">,</span>&nbsp;<span class="num" id="4602402">15</span><span class="op" id="4602404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4602407">func</span>&nbsp;<span class="op" id="4602412">(</span><span class="ident" id="4602413">f</span>&nbsp;<span class="op" id="4602415">*</span><span class="ident" id="4602416"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4602428">)</span>&nbsp;<span class="ident" id="4602430">readHuffman</span><span class="op" id="4602441">(</span><span class="op" id="4602442">)</span>&nbsp;<span class="builtintype" id="4602444">error</span>&nbsp;<span class="op" id="4602450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4602453">//&nbsp;HLIT[5],&nbsp;HDIST[5],&nbsp;HCLEN[4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602486">for</span>&nbsp;<span class="ident" id="4602490"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602491">.</span><span class="ident" id="4602492">nb</span>&nbsp;<span class="op" id="4602495">&lt;</span>&nbsp;<span class="num" id="4602497">5</span><span class="op" id="4602498">+</span><span class="num" id="4602499">5</span><span class="op" id="4602500">+</span><span class="num" id="4602501">4</span>&nbsp;<span class="op" id="4602503">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602507">if</span>&nbsp;<span class="ident" id="4602510">err</span>&nbsp;<span class="op" id="4602514">:=</span>&nbsp;<span class="ident" id="4602517"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602518">.</span><span class="ident" id="4602519">moreBits</span><span class="op" id="4602527">(</span><span class="op" id="4602528">)</span><span class="op" id="4602529">;</span>&nbsp;<span class="ident" id="4602531"><a href="/compress/flate/inflate.go.html#4602510">err</a></span>&nbsp;<span class="op" id="4602535">!=</span>&nbsp;<span class="ident" id="4602538">nil</span>&nbsp;<span class="op" id="4602542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602547">return</span>&nbsp;<span class="ident" id="4602554"><a href="/compress/flate/inflate.go.html#4602510">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602566">nlit</span>&nbsp;<span class="op" id="4602571">:=</span>&nbsp;<span class="builtintype" id="4602574">int</span><span class="op" id="4602577">(</span><span class="ident" id="4602578"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602579">.</span><span class="ident" id="4602580">b</span><span class="op" id="4602581">&amp;</span><span class="num" id="4602582">0x1F</span><span class="op" id="4602586">)</span>&nbsp;<span class="op" id="4602588">+</span>&nbsp;<span class="num" id="4602590">257</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602595">if</span>&nbsp;<span class="ident" id="4602598"><a href="/compress/flate/inflate.go.html#4602566">nlit</a></span>&nbsp;<span class="op" id="4602603">&gt;</span>&nbsp;<span class="ident" id="4602605"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span>&nbsp;<span class="op" id="4602612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602616">return</span>&nbsp;<span class="ident" id="4602623"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4602640">(</span><span class="ident" id="4602641"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602642">.</span><span class="ident" id="4602643">roffset</span><span class="op" id="4602650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4602653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602656"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602657">.</span><span class="ident" id="4602658">b</span>&nbsp;<span class="op" id="4602660">&gt;&gt;=</span>&nbsp;<span class="num" id="4602664">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602667">ndist</span>&nbsp;<span class="op" id="4602673">:=</span>&nbsp;<span class="builtintype" id="4602676">int</span><span class="op" id="4602679">(</span><span class="ident" id="4602680"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602681">.</span><span class="ident" id="4602682">b</span><span class="op" id="4602683">&amp;</span><span class="num" id="4602684">0x1F</span><span class="op" id="4602688">)</span>&nbsp;<span class="op" id="4602690">+</span>&nbsp;<span class="num" id="4602692">1</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4602695">//&nbsp;maxDist&nbsp;is&nbsp;32,&nbsp;so&nbsp;ndist&nbsp;is&nbsp;always&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602740"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602741">.</span><span class="ident" id="4602742">b</span>&nbsp;<span class="op" id="4602744">&gt;&gt;=</span>&nbsp;<span class="num" id="4602748">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602751">nclen</span>&nbsp;<span class="op" id="4602757">:=</span>&nbsp;<span class="builtintype" id="4602760">int</span><span class="op" id="4602763">(</span><span class="ident" id="4602764"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602765">.</span><span class="ident" id="4602766">b</span><span class="op" id="4602767">&amp;</span><span class="num" id="4602768">0xF</span><span class="op" id="4602771">)</span>&nbsp;<span class="op" id="4602773">+</span>&nbsp;<span class="num" id="4602775">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4602778">//&nbsp;numCodes&nbsp;is&nbsp;19,&nbsp;so&nbsp;nclen&nbsp;is&nbsp;always&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602824"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602825">.</span><span class="ident" id="4602826">b</span>&nbsp;<span class="op" id="4602828">&gt;&gt;=</span>&nbsp;<span class="num" id="4602832">4</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4602835"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602836">.</span><span class="ident" id="4602837">nb</span>&nbsp;<span class="op" id="4602840">-=</span>&nbsp;<span class="num" id="4602843">5</span>&nbsp;<span class="op" id="4602845">+</span>&nbsp;<span class="num" id="4602847">5</span>&nbsp;<span class="op" id="4602849">+</span>&nbsp;<span class="num" id="4602851">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4602855">//&nbsp;(HCLEN+4)*3&nbsp;bits:&nbsp;code&nbsp;lengths&nbsp;in&nbsp;the&nbsp;magic&nbsp;codeOrder&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602920">for</span>&nbsp;<span class="ident" id="4602924">i</span>&nbsp;<span class="op" id="4602926">:=</span>&nbsp;<span class="num" id="4602929">0</span><span class="op" id="4602930">;</span>&nbsp;<span class="ident" id="4602932"><a href="/compress/flate/inflate.go.html#4602924">i</a></span>&nbsp;<span class="op" id="4602934">&lt;</span>&nbsp;<span class="ident" id="4602936"><a href="/compress/flate/inflate.go.html#4602751">nclen</a></span><span class="op" id="4602941">;</span>&nbsp;<span class="ident" id="4602943"><a href="/compress/flate/inflate.go.html#4602924">i</a></span><span class="op" id="4602944">++</span>&nbsp;<span class="op" id="4602947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602951">for</span>&nbsp;<span class="ident" id="4602955"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602956">.</span><span class="ident" id="4602957">nb</span>&nbsp;<span class="op" id="4602960">&lt;</span>&nbsp;<span class="num" id="4602962">3</span>&nbsp;<span class="op" id="4602964">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4602969">if</span>&nbsp;<span class="ident" id="4602972">err</span>&nbsp;<span class="op" id="4602976">:=</span>&nbsp;<span class="ident" id="4602979"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4602980">.</span><span class="ident" id="4602981">moreBits</span><span class="op" id="4602989">(</span><span class="op" id="4602990">)</span><span class="op" id="4602991">;</span>&nbsp;<span class="ident" id="4602993"><a href="/compress/flate/inflate.go.html#4602972">err</a></span>&nbsp;<span class="op" id="4602997">!=</span>&nbsp;<span class="ident" id="4603000">nil</span>&nbsp;<span class="op" id="4603004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603010">return</span>&nbsp;<span class="ident" id="4603017"><a href="/compress/flate/inflate.go.html#4602972">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603032"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603033">.</span><span class="ident" id="4603034">codebits</span><span class="op" id="4603042">[</span><span class="ident" id="4603043"><a href="/compress/flate/inflate.go.html#4602319">codeOrder</a></span><span class="op" id="4603052">[</span><span class="ident" id="4603053"><a href="/compress/flate/inflate.go.html#4602924">i</a></span><span class="op" id="4603054">]</span><span class="op" id="4603055">]</span>&nbsp;<span class="op" id="4603057">=</span>&nbsp;<span class="builtintype" id="4603059">int</span><span class="op" id="4603062">(</span><span class="ident" id="4603063"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603064">.</span><span class="ident" id="4603065">b</span>&nbsp;<span class="op" id="4603067">&amp;</span>&nbsp;<span class="num" id="4603069">0x7</span><span class="op" id="4603072">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603076"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603077">.</span><span class="ident" id="4603078">b</span>&nbsp;<span class="op" id="4603080">&gt;&gt;=</span>&nbsp;<span class="num" id="4603084">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603088"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603089">.</span><span class="ident" id="4603090">nb</span>&nbsp;<span class="op" id="4603093">-=</span>&nbsp;<span class="num" id="4603096">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603102">for</span>&nbsp;<span class="ident" id="4603106">i</span>&nbsp;<span class="op" id="4603108">:=</span>&nbsp;<span class="ident" id="4603111"><a href="/compress/flate/inflate.go.html#4602751">nclen</a></span><span class="op" id="4603116">;</span>&nbsp;<span class="ident" id="4603118"><a href="/compress/flate/inflate.go.html#4603106">i</a></span>&nbsp;<span class="op" id="4603120">&lt;</span>&nbsp;<span class="builtinfunc" id="4603122">len</span><span class="op" id="4603125">(</span><span class="ident" id="4603126"><a href="/compress/flate/inflate.go.html#4602319">codeOrder</a></span><span class="op" id="4603135">)</span><span class="op" id="4603136">;</span>&nbsp;<span class="ident" id="4603138"><a href="/compress/flate/inflate.go.html#4603106">i</a></span><span class="op" id="4603139">++</span>&nbsp;<span class="op" id="4603142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603146"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603147">.</span><span class="ident" id="4603148">codebits</span><span class="op" id="4603156">[</span><span class="ident" id="4603157"><a href="/compress/flate/inflate.go.html#4602319">codeOrder</a></span><span class="op" id="4603166">[</span><span class="ident" id="4603167"><a href="/compress/flate/inflate.go.html#4603106">i</a></span><span class="op" id="4603168">]</span><span class="op" id="4603169">]</span>&nbsp;<span class="op" id="4603171">=</span>&nbsp;<span class="num" id="4603173">0</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603179">if</span>&nbsp;<span class="op" id="4603182">!</span><span class="ident" id="4603183"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603184">.</span><span class="ident" id="4603185">h1</span><span class="op" id="4603187">.</span><span class="ident" id="4603188">init</span><span class="op" id="4603192">(</span><span class="ident" id="4603193"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603194">.</span><span class="ident" id="4603195">codebits</span><span class="op" id="4603203">[</span><span class="num" id="4603204">0</span><span class="op" id="4603205">:</span><span class="op" id="4603206">]</span><span class="op" id="4603207">)</span>&nbsp;<span class="op" id="4603209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603213">return</span>&nbsp;<span class="ident" id="4603220"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4603237">(</span><span class="ident" id="4603238"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603239">.</span><span class="ident" id="4603240">roffset</span><span class="op" id="4603247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4603254">//&nbsp;HLIT&nbsp;+&nbsp;257&nbsp;code&nbsp;lengths,&nbsp;HDIST&nbsp;+&nbsp;1&nbsp;code&nbsp;lengths,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4603307">//&nbsp;using&nbsp;the&nbsp;code&nbsp;length&nbsp;Huffman&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603347">for</span>&nbsp;<span class="ident" id="4603351">i</span><span class="op" id="4603352">,</span>&nbsp;<span class="ident" id="4603354">n</span>&nbsp;<span class="op" id="4603356">:=</span>&nbsp;<span class="num" id="4603359">0</span><span class="op" id="4603360">,</span>&nbsp;<span class="ident" id="4603362"><a href="/compress/flate/inflate.go.html#4602566">nlit</a></span><span class="op" id="4603366">+</span><span class="ident" id="4603367"><a href="/compress/flate/inflate.go.html#4602667">ndist</a></span><span class="op" id="4603372">;</span>&nbsp;<span class="ident" id="4603374"><a href="/compress/flate/inflate.go.html#4603351">i</a></span>&nbsp;<span class="op" id="4603376">&lt;</span>&nbsp;<span class="ident" id="4603378"><a href="/compress/flate/inflate.go.html#4603354">n</a></span><span class="op" id="4603379">;</span>&nbsp;<span class="op" id="4603381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603385">x</span><span class="op" id="4603386">,</span>&nbsp;<span class="ident" id="4603388">err</span>&nbsp;<span class="op" id="4603392">:=</span>&nbsp;<span class="ident" id="4603395"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603396">.</span><span class="ident" id="4603397">huffSym</span><span class="op" id="4603404">(</span><span class="op" id="4603405">&amp;</span><span class="ident" id="4603406"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603407">.</span><span class="ident" id="4603408">h1</span><span class="op" id="4603410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603414">if</span>&nbsp;<span class="ident" id="4603417"><a href="/compress/flate/inflate.go.html#4603388">err</a></span>&nbsp;<span class="op" id="4603421">!=</span>&nbsp;<span class="ident" id="4603424">nil</span>&nbsp;<span class="op" id="4603428">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603433">return</span>&nbsp;<span class="ident" id="4603440"><a href="/compress/flate/inflate.go.html#4603388">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603450">if</span>&nbsp;<span class="ident" id="4603453"><a href="/compress/flate/inflate.go.html#4603385">x</a></span>&nbsp;<span class="op" id="4603455">&lt;</span>&nbsp;<span class="num" id="4603457">16</span>&nbsp;<span class="op" id="4603460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4603465">//&nbsp;Actual&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603486"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603487">.</span><span class="ident" id="4603488">bits</span><span class="op" id="4603492">[</span><span class="ident" id="4603493"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4603494">]</span>&nbsp;<span class="op" id="4603496">=</span>&nbsp;<span class="ident" id="4603498"><a href="/compress/flate/inflate.go.html#4603385">x</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603503"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4603504">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603510">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4603525">//&nbsp;Repeat&nbsp;previous&nbsp;length&nbsp;or&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603562">var</span>&nbsp;<span class="ident" id="4603566">rep</span>&nbsp;<span class="builtintype" id="4603570">int</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603576">var</span>&nbsp;<span class="ident" id="4603580">nb</span>&nbsp;<span class="builtintype" id="4603583">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603590">var</span>&nbsp;<span class="ident" id="4603594">b</span>&nbsp;<span class="builtintype" id="4603596">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603602">switch</span>&nbsp;<span class="ident" id="4603609"><a href="/compress/flate/inflate.go.html#4603385">x</a></span>&nbsp;<span class="op" id="4603611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603615">default</span><span class="op" id="4603622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603627">return</span>&nbsp;<span class="ident" id="4603634"><a href="/compress/flate/inflate.go.html#4595663">InternalError</a></span><span class="op" id="4603647">(</span><span class="string" id="4603648">&#34;unexpected&nbsp;length&nbsp;code&#34;</span><span class="op" id="4603672">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603676">case</span>&nbsp;<span class="num" id="4603681">16</span><span class="op" id="4603683">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603688"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span>&nbsp;<span class="op" id="4603692">=</span>&nbsp;<span class="num" id="4603694">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603699"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span>&nbsp;<span class="op" id="4603702">=</span>&nbsp;<span class="num" id="4603704">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603709">if</span>&nbsp;<span class="ident" id="4603712"><a href="/compress/flate/inflate.go.html#4603351">i</a></span>&nbsp;<span class="op" id="4603714">==</span>&nbsp;<span class="num" id="4603717">0</span>&nbsp;<span class="op" id="4603719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603725">return</span>&nbsp;<span class="ident" id="4603732"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4603749">(</span><span class="ident" id="4603750"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603751">.</span><span class="ident" id="4603752">roffset</span><span class="op" id="4603759">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603769"><a href="/compress/flate/inflate.go.html#4603594">b</a></span>&nbsp;<span class="op" id="4603771">=</span>&nbsp;<span class="ident" id="4603773"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603774">.</span><span class="ident" id="4603775">bits</span><span class="op" id="4603779">[</span><span class="ident" id="4603780"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4603781">-</span><span class="num" id="4603782">1</span><span class="op" id="4603783">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603787">case</span>&nbsp;<span class="num" id="4603792">17</span><span class="op" id="4603794">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603799"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span>&nbsp;<span class="op" id="4603803">=</span>&nbsp;<span class="num" id="4603805">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603810"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span>&nbsp;<span class="op" id="4603813">=</span>&nbsp;<span class="num" id="4603815">3</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603820"><a href="/compress/flate/inflate.go.html#4603594">b</a></span>&nbsp;<span class="op" id="4603822">=</span>&nbsp;<span class="num" id="4603824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603828">case</span>&nbsp;<span class="num" id="4603833">18</span><span class="op" id="4603835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603840"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span>&nbsp;<span class="op" id="4603844">=</span>&nbsp;<span class="num" id="4603846">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603852"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span>&nbsp;<span class="op" id="4603855">=</span>&nbsp;<span class="num" id="4603857">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603862"><a href="/compress/flate/inflate.go.html#4603594">b</a></span>&nbsp;<span class="op" id="4603864">=</span>&nbsp;<span class="num" id="4603866">0</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603874">for</span>&nbsp;<span class="ident" id="4603878"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603879">.</span><span class="ident" id="4603880">nb</span>&nbsp;<span class="op" id="4603883">&lt;</span>&nbsp;<span class="ident" id="4603885"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span>&nbsp;<span class="op" id="4603888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603893">if</span>&nbsp;<span class="ident" id="4603896">err</span>&nbsp;<span class="op" id="4603900">:=</span>&nbsp;<span class="ident" id="4603903"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603904">.</span><span class="ident" id="4603905">moreBits</span><span class="op" id="4603913">(</span><span class="op" id="4603914">)</span><span class="op" id="4603915">;</span>&nbsp;<span class="ident" id="4603917"><a href="/compress/flate/inflate.go.html#4603896">err</a></span>&nbsp;<span class="op" id="4603921">!=</span>&nbsp;<span class="ident" id="4603924">nil</span>&nbsp;<span class="op" id="4603928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4603934">return</span>&nbsp;<span class="ident" id="4603941"><a href="/compress/flate/inflate.go.html#4603896">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603948">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4603952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603956"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span>&nbsp;<span class="op" id="4603960">+=</span>&nbsp;<span class="builtintype" id="4603963">int</span><span class="op" id="4603966">(</span><span class="ident" id="4603967"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603968">.</span><span class="ident" id="4603969">b</span>&nbsp;<span class="op" id="4603971">&amp;</span>&nbsp;<span class="builtintype" id="4603973">uint32</span><span class="op" id="4603979">(</span><span class="num" id="4603980">1</span><span class="op" id="4603981">&lt;&lt;</span><span class="ident" id="4603983"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span><span class="op" id="4603985">-</span><span class="num" id="4603986">1</span><span class="op" id="4603987">)</span><span class="op" id="4603988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4603992"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4603993">.</span><span class="ident" id="4603994">b</span>&nbsp;<span class="op" id="4603996">&gt;&gt;=</span>&nbsp;<span class="ident" id="4604000"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604005"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604006">.</span><span class="ident" id="4604007">nb</span>&nbsp;<span class="op" id="4604010">-=</span>&nbsp;<span class="ident" id="4604013"><a href="/compress/flate/inflate.go.html#4603580">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604018">if</span>&nbsp;<span class="ident" id="4604021"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4604022">+</span><span class="ident" id="4604023"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span>&nbsp;<span class="op" id="4604027">&gt;</span>&nbsp;<span class="ident" id="4604029"><a href="/compress/flate/inflate.go.html#4603354">n</a></span>&nbsp;<span class="op" id="4604031">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604036">return</span>&nbsp;<span class="ident" id="4604043"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4604060">(</span><span class="ident" id="4604061"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604062">.</span><span class="ident" id="4604063">roffset</span><span class="op" id="4604070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604078">for</span>&nbsp;<span class="ident" id="4604082">j</span>&nbsp;<span class="op" id="4604084">:=</span>&nbsp;<span class="num" id="4604087">0</span><span class="op" id="4604088">;</span>&nbsp;<span class="ident" id="4604090"><a href="/compress/flate/inflate.go.html#4604082">j</a></span>&nbsp;<span class="op" id="4604092">&lt;</span>&nbsp;<span class="ident" id="4604094"><a href="/compress/flate/inflate.go.html#4603566">rep</a></span><span class="op" id="4604097">;</span>&nbsp;<span class="ident" id="4604099"><a href="/compress/flate/inflate.go.html#4604082">j</a></span><span class="op" id="4604100">++</span>&nbsp;<span class="op" id="4604103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604108"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604109">.</span><span class="ident" id="4604110">bits</span><span class="op" id="4604114">[</span><span class="ident" id="4604115"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4604116">]</span>&nbsp;<span class="op" id="4604118">=</span>&nbsp;<span class="ident" id="4604120"><a href="/compress/flate/inflate.go.html#4603594">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604125"><a href="/compress/flate/inflate.go.html#4603351">i</a></span><span class="op" id="4604126">++</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604138">if</span>&nbsp;<span class="op" id="4604141">!</span><span class="ident" id="4604142"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604143">.</span><span class="ident" id="4604144">h1</span><span class="op" id="4604146">.</span><span class="ident" id="4604147">init</span><span class="op" id="4604151">(</span><span class="ident" id="4604152"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604153">.</span><span class="ident" id="4604154">bits</span><span class="op" id="4604158">[</span><span class="num" id="4604159">0</span><span class="op" id="4604160">:</span><span class="ident" id="4604161"><a href="/compress/flate/inflate.go.html#4602566">nlit</a></span><span class="op" id="4604165">]</span><span class="op" id="4604166">)</span>&nbsp;<span class="op" id="4604168">||</span>&nbsp;<span class="op" id="4604171">!</span><span class="ident" id="4604172"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604173">.</span><span class="ident" id="4604174">h2</span><span class="op" id="4604176">.</span><span class="ident" id="4604177">init</span><span class="op" id="4604181">(</span><span class="ident" id="4604182"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604183">.</span><span class="ident" id="4604184">bits</span><span class="op" id="4604188">[</span><span class="ident" id="4604189"><a href="/compress/flate/inflate.go.html#4602566">nlit</a></span><span class="op" id="4604193">:</span><span class="ident" id="4604194"><a href="/compress/flate/inflate.go.html#4602566">nlit</a></span><span class="op" id="4604198">+</span><span class="ident" id="4604199"><a href="/compress/flate/inflate.go.html#4602667">ndist</a></span><span class="op" id="4604204">]</span><span class="op" id="4604205">)</span>&nbsp;<span class="op" id="4604207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604211">return</span>&nbsp;<span class="ident" id="4604218"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4604235">(</span><span class="ident" id="4604236"><a href="/compress/flate/inflate.go.html#4602413">f</a></span><span class="op" id="4604237">.</span><span class="ident" id="4604238">roffset</span><span class="op" id="4604245">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604252">return</span>&nbsp;<span class="ident" id="4604259">nil</span><br>
<span class="lineno"></span><span class="op" id="4604263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="4604266">//&nbsp;Decode&nbsp;a&nbsp;single&nbsp;Huffman&nbsp;block&nbsp;from&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="4604307">//&nbsp;hl&nbsp;and&nbsp;hd&nbsp;are&nbsp;the&nbsp;Huffman&nbsp;states&nbsp;for&nbsp;the&nbsp;lit/length&nbsp;values</span><br>
<span class="lineno"></span><span class="comment" id="4604369">//&nbsp;and&nbsp;the&nbsp;distance&nbsp;values,&nbsp;respectively.&nbsp;&nbsp;If&nbsp;hd&nbsp;==&nbsp;nil,&nbsp;using&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4604436">//&nbsp;fixed&nbsp;distance&nbsp;encoding&nbsp;associated&nbsp;with&nbsp;fixed&nbsp;Huffman&nbsp;blocks.</span><br>
<span class="lineno"></span><span class="keyword" id="4604501">func</span>&nbsp;<span class="op" id="4604506">(</span><span class="ident" id="4604507">f</span>&nbsp;<span class="op" id="4604509">*</span><span class="ident" id="4604510"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4604522">)</span>&nbsp;<span class="ident" id="4604524">huffmanBlock</span><span class="op" id="4604536">(</span><span class="op" id="4604537">)</span>&nbsp;<span class="op" id="4604539">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604542">for</span>&nbsp;<span class="op" id="4604546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604550">v</span><span class="op" id="4604551">,</span>&nbsp;<span class="ident" id="4604553">err</span>&nbsp;<span class="op" id="4604557">:=</span>&nbsp;<span class="ident" id="4604560"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604561">.</span><span class="ident" id="4604562">huffSym</span><span class="op" id="4604569">(</span><span class="ident" id="4604570"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604571">.</span><span class="ident" id="4604572">hl</span><span class="op" id="4604574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604578">if</span>&nbsp;<span class="ident" id="4604581"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4604585">!=</span>&nbsp;<span class="ident" id="4604588">nil</span>&nbsp;<span class="op" id="4604592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604597"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604598">.</span><span class="ident" id="4604599">err</span>&nbsp;<span class="op" id="4604603">=</span>&nbsp;<span class="ident" id="4604605"><a href="/compress/flate/inflate.go.html#4604553">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604612">return</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604625">var</span>&nbsp;<span class="ident" id="4604629">n</span>&nbsp;<span class="builtintype" id="4604631">uint</span>&nbsp;<span class="comment" id="4604636">//&nbsp;number&nbsp;of&nbsp;bits&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604662">var</span>&nbsp;<span class="ident" id="4604666">length</span>&nbsp;<span class="builtintype" id="4604673">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604679">switch</span>&nbsp;<span class="op" id="4604686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604690">case</span>&nbsp;<span class="ident" id="4604695"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4604697">&lt;</span>&nbsp;<span class="num" id="4604699">256</span><span class="op" id="4604702">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604707"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604708">.</span><span class="ident" id="4604709">hist</span><span class="op" id="4604713">[</span><span class="ident" id="4604714"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604715">.</span><span class="ident" id="4604716">hp</span><span class="op" id="4604718">]</span>&nbsp;<span class="op" id="4604720">=</span>&nbsp;<span class="builtintype" id="4604722">byte</span><span class="op" id="4604726">(</span><span class="ident" id="4604727"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4604728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604733"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604734">.</span><span class="ident" id="4604735">hp</span><span class="op" id="4604737">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604743">if</span>&nbsp;<span class="ident" id="4604746"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604747">.</span><span class="ident" id="4604748">hp</span>&nbsp;<span class="op" id="4604751">==</span>&nbsp;<span class="builtinfunc" id="4604754">len</span><span class="op" id="4604757">(</span><span class="ident" id="4604758"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604759">.</span><span class="ident" id="4604760">hist</span><span class="op" id="4604764">)</span>&nbsp;<span class="op" id="4604766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4604772">//&nbsp;After&nbsp;the&nbsp;flush,&nbsp;continue&nbsp;this&nbsp;loop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604816"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604817">.</span><span class="ident" id="4604818">flush</span><span class="op" id="4604823">(</span><span class="op" id="4604824">(</span><span class="op" id="4604825">*</span><span class="ident" id="4604826"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4604838">)</span><span class="op" id="4604839">.</span><span class="ident" id="4604840">huffmanBlock</span><span class="op" id="4604852">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604858">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4604868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604873">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604884">case</span>&nbsp;<span class="ident" id="4604889"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4604891">==</span>&nbsp;<span class="num" id="4604894">256</span><span class="op" id="4604897">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4604902">//&nbsp;Done&nbsp;with&nbsp;huffman&nbsp;block;&nbsp;read&nbsp;next&nbsp;block.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4604950"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4604951">.</span><span class="ident" id="4604952">step</span>&nbsp;<span class="op" id="4604957">=</span>&nbsp;<span class="op" id="4604959">(</span><span class="op" id="4604960">*</span><span class="ident" id="4604961"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4604973">)</span><span class="op" id="4604974">.</span><span class="ident" id="4604975">nextBlock</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4604988">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4604997">//&nbsp;otherwise,&nbsp;reference&nbsp;to&nbsp;older&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605037">case</span>&nbsp;<span class="ident" id="4605042"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605044">&lt;</span>&nbsp;<span class="num" id="4605046">265</span><span class="op" id="4605049">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605054"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605061">=</span>&nbsp;<span class="ident" id="4605063"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605065">-</span>&nbsp;<span class="op" id="4605067">(</span><span class="num" id="4605068">257</span>&nbsp;<span class="op" id="4605072">-</span>&nbsp;<span class="num" id="4605074">3</span><span class="op" id="4605075">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605080"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605082">=</span>&nbsp;<span class="num" id="4605084">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605088">case</span>&nbsp;<span class="ident" id="4605093"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605095">&lt;</span>&nbsp;<span class="num" id="4605097">269</span><span class="op" id="4605100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605105"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605112">=</span>&nbsp;<span class="ident" id="4605114"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4605115">*</span><span class="num" id="4605116">2</span>&nbsp;<span class="op" id="4605118">-</span>&nbsp;<span class="op" id="4605120">(</span><span class="num" id="4605121">265</span><span class="op" id="4605124">*</span><span class="num" id="4605125">2</span>&nbsp;<span class="op" id="4605127">-</span>&nbsp;<span class="num" id="4605129">11</span><span class="op" id="4605131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605136"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605138">=</span>&nbsp;<span class="num" id="4605140">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605144">case</span>&nbsp;<span class="ident" id="4605149"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605151">&lt;</span>&nbsp;<span class="num" id="4605153">273</span><span class="op" id="4605156">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605161"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605168">=</span>&nbsp;<span class="ident" id="4605170"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4605171">*</span><span class="num" id="4605172">4</span>&nbsp;<span class="op" id="4605174">-</span>&nbsp;<span class="op" id="4605176">(</span><span class="num" id="4605177">269</span><span class="op" id="4605180">*</span><span class="num" id="4605181">4</span>&nbsp;<span class="op" id="4605183">-</span>&nbsp;<span class="num" id="4605185">19</span><span class="op" id="4605187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605192"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605194">=</span>&nbsp;<span class="num" id="4605196">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605200">case</span>&nbsp;<span class="ident" id="4605205"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605207">&lt;</span>&nbsp;<span class="num" id="4605209">277</span><span class="op" id="4605212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605217"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605224">=</span>&nbsp;<span class="ident" id="4605226"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4605227">*</span><span class="num" id="4605228">8</span>&nbsp;<span class="op" id="4605230">-</span>&nbsp;<span class="op" id="4605232">(</span><span class="num" id="4605233">273</span><span class="op" id="4605236">*</span><span class="num" id="4605237">8</span>&nbsp;<span class="op" id="4605239">-</span>&nbsp;<span class="num" id="4605241">35</span><span class="op" id="4605243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605248"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605250">=</span>&nbsp;<span class="num" id="4605252">3</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605256">case</span>&nbsp;<span class="ident" id="4605261"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605263">&lt;</span>&nbsp;<span class="num" id="4605265">281</span><span class="op" id="4605268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605273"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605280">=</span>&nbsp;<span class="ident" id="4605282"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4605283">*</span><span class="num" id="4605284">16</span>&nbsp;<span class="op" id="4605287">-</span>&nbsp;<span class="op" id="4605289">(</span><span class="num" id="4605290">277</span><span class="op" id="4605293">*</span><span class="num" id="4605294">16</span>&nbsp;<span class="op" id="4605297">-</span>&nbsp;<span class="num" id="4605299">67</span><span class="op" id="4605301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605306"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605308">=</span>&nbsp;<span class="num" id="4605310">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605314">case</span>&nbsp;<span class="ident" id="4605319"><a href="/compress/flate/inflate.go.html#4604550">v</a></span>&nbsp;<span class="op" id="4605321">&lt;</span>&nbsp;<span class="num" id="4605323">285</span><span class="op" id="4605326">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605331"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605338">=</span>&nbsp;<span class="ident" id="4605340"><a href="/compress/flate/inflate.go.html#4604550">v</a></span><span class="op" id="4605341">*</span><span class="num" id="4605342">32</span>&nbsp;<span class="op" id="4605345">-</span>&nbsp;<span class="op" id="4605347">(</span><span class="num" id="4605348">281</span><span class="op" id="4605351">*</span><span class="num" id="4605352">32</span>&nbsp;<span class="op" id="4605355">-</span>&nbsp;<span class="num" id="4605357">131</span><span class="op" id="4605360">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605365"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605367">=</span>&nbsp;<span class="num" id="4605369">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605373">default</span><span class="op" id="4605380">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605385"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605392">=</span>&nbsp;<span class="num" id="4605394">258</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605401"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605403">=</span>&nbsp;<span class="num" id="4605405">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605409">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605413">if</span>&nbsp;<span class="ident" id="4605416"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605418">&gt;</span>&nbsp;<span class="num" id="4605420">0</span>&nbsp;<span class="op" id="4605422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605427">for</span>&nbsp;<span class="ident" id="4605431"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605432">.</span><span class="ident" id="4605433">nb</span>&nbsp;<span class="op" id="4605436">&lt;</span>&nbsp;<span class="ident" id="4605438"><a href="/compress/flate/inflate.go.html#4604629">n</a></span>&nbsp;<span class="op" id="4605440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605446">if</span>&nbsp;<span class="ident" id="4605449"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605453">=</span>&nbsp;<span class="ident" id="4605455"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605456">.</span><span class="ident" id="4605457">moreBits</span><span class="op" id="4605465">(</span><span class="op" id="4605466">)</span><span class="op" id="4605467">;</span>&nbsp;<span class="ident" id="4605469"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605473">!=</span>&nbsp;<span class="ident" id="4605476">nil</span>&nbsp;<span class="op" id="4605480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605487"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605488">.</span><span class="ident" id="4605489">err</span>&nbsp;<span class="op" id="4605493">=</span>&nbsp;<span class="ident" id="4605495"><a href="/compress/flate/inflate.go.html#4604553">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605504">return</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605525"><a href="/compress/flate/inflate.go.html#4604666">length</a></span>&nbsp;<span class="op" id="4605532">+=</span>&nbsp;<span class="builtintype" id="4605535">int</span><span class="op" id="4605538">(</span><span class="ident" id="4605539"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605540">.</span><span class="ident" id="4605541">b</span>&nbsp;<span class="op" id="4605543">&amp;</span>&nbsp;<span class="builtintype" id="4605545">uint32</span><span class="op" id="4605551">(</span><span class="num" id="4605552">1</span><span class="op" id="4605553">&lt;&lt;</span><span class="ident" id="4605555"><a href="/compress/flate/inflate.go.html#4604629">n</a></span><span class="op" id="4605556">-</span><span class="num" id="4605557">1</span><span class="op" id="4605558">)</span><span class="op" id="4605559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605564"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605565">.</span><span class="ident" id="4605566">b</span>&nbsp;<span class="op" id="4605568">&gt;&gt;=</span>&nbsp;<span class="ident" id="4605572"><a href="/compress/flate/inflate.go.html#4604629">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605577"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605578">.</span><span class="ident" id="4605579">nb</span>&nbsp;<span class="op" id="4605582">-=</span>&nbsp;<span class="ident" id="4605585"><a href="/compress/flate/inflate.go.html#4604629">n</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605594">var</span>&nbsp;<span class="ident" id="4605598">dist</span>&nbsp;<span class="builtintype" id="4605603">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605609">if</span>&nbsp;<span class="ident" id="4605612"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605613">.</span><span class="ident" id="4605614">hd</span>&nbsp;<span class="op" id="4605617">==</span>&nbsp;<span class="ident" id="4605620">nil</span>&nbsp;<span class="op" id="4605624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605629">for</span>&nbsp;<span class="ident" id="4605633"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605634">.</span><span class="ident" id="4605635">nb</span>&nbsp;<span class="op" id="4605638">&lt;</span>&nbsp;<span class="num" id="4605640">5</span>&nbsp;<span class="op" id="4605642">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605648">if</span>&nbsp;<span class="ident" id="4605651"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605655">=</span>&nbsp;<span class="ident" id="4605657"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605658">.</span><span class="ident" id="4605659">moreBits</span><span class="op" id="4605667">(</span><span class="op" id="4605668">)</span><span class="op" id="4605669">;</span>&nbsp;<span class="ident" id="4605671"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605675">!=</span>&nbsp;<span class="ident" id="4605678">nil</span>&nbsp;<span class="op" id="4605682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605689"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605690">.</span><span class="ident" id="4605691">err</span>&nbsp;<span class="op" id="4605695">=</span>&nbsp;<span class="ident" id="4605697"><a href="/compress/flate/inflate.go.html#4604553">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605706">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605722">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605727"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4605732">=</span>&nbsp;<span class="builtintype" id="4605734">int</span><span class="op" id="4605737">(</span><span class="ident" id="4605738"><a href="/compress/flate/reverse_bits.go.html#4611770">reverseByte</a></span><span class="op" id="4605749">[</span><span class="op" id="4605750">(</span><span class="ident" id="4605751"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605752">.</span><span class="ident" id="4605753">b</span><span class="op" id="4605754">&amp;</span><span class="num" id="4605755">0x1F</span><span class="op" id="4605759">)</span><span class="op" id="4605760">&lt;&lt;</span><span class="num" id="4605762">3</span><span class="op" id="4605763">]</span><span class="op" id="4605764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605769"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605770">.</span><span class="ident" id="4605771">b</span>&nbsp;<span class="op" id="4605773">&gt;&gt;=</span>&nbsp;<span class="num" id="4605777">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605782"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605783">.</span><span class="ident" id="4605784">nb</span>&nbsp;<span class="op" id="4605787">-=</span>&nbsp;<span class="num" id="4605790">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605794">}</span>&nbsp;<span class="keyword" id="4605796">else</span>&nbsp;<span class="op" id="4605801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605806">if</span>&nbsp;<span class="ident" id="4605809"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span><span class="op" id="4605813">,</span>&nbsp;<span class="ident" id="4605815"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605819">=</span>&nbsp;<span class="ident" id="4605821"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605822">.</span><span class="ident" id="4605823">huffSym</span><span class="op" id="4605830">(</span><span class="ident" id="4605831"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605832">.</span><span class="ident" id="4605833">hd</span><span class="op" id="4605835">)</span><span class="op" id="4605836">;</span>&nbsp;<span class="ident" id="4605838"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4605842">!=</span>&nbsp;<span class="ident" id="4605845">nil</span>&nbsp;<span class="op" id="4605849">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605855"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605856">.</span><span class="ident" id="4605857">err</span>&nbsp;<span class="op" id="4605861">=</span>&nbsp;<span class="ident" id="4605863"><a href="/compress/flate/inflate.go.html#4604553">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605871">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4605885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605890">switch</span>&nbsp;<span class="op" id="4605897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605901">case</span>&nbsp;<span class="ident" id="4605906"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4605911">&lt;</span>&nbsp;<span class="num" id="4605913">4</span><span class="op" id="4605914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605919"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span><span class="op" id="4605923">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605928">case</span>&nbsp;<span class="ident" id="4605933"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4605938">&gt;=</span>&nbsp;<span class="num" id="4605941">30</span><span class="op" id="4605943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4605948"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605949">.</span><span class="ident" id="4605950">err</span>&nbsp;<span class="op" id="4605954">=</span>&nbsp;<span class="ident" id="4605956"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4605973">(</span><span class="ident" id="4605974"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4605975">.</span><span class="ident" id="4605976">roffset</span><span class="op" id="4605983">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605988">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4605997">default</span><span class="op" id="4606004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606009">nb</span>&nbsp;<span class="op" id="4606012">:=</span>&nbsp;<span class="builtintype" id="4606015">uint</span><span class="op" id="4606019">(</span><span class="ident" id="4606020"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span><span class="op" id="4606024">-</span><span class="num" id="4606025">2</span><span class="op" id="4606026">)</span>&nbsp;<span class="op" id="4606028">&gt;&gt;</span>&nbsp;<span class="num" id="4606031">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4606036">//&nbsp;have&nbsp;1&nbsp;bit&nbsp;in&nbsp;bottom&nbsp;of&nbsp;dist,&nbsp;need&nbsp;nb&nbsp;more.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606086">extra</span>&nbsp;<span class="op" id="4606092">:=</span>&nbsp;<span class="op" id="4606095">(</span><span class="ident" id="4606096"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4606101">&amp;</span>&nbsp;<span class="num" id="4606103">1</span><span class="op" id="4606104">)</span>&nbsp;<span class="op" id="4606106">&lt;&lt;</span>&nbsp;<span class="ident" id="4606109"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606115">for</span>&nbsp;<span class="ident" id="4606119"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606120">.</span><span class="ident" id="4606121">nb</span>&nbsp;<span class="op" id="4606124">&lt;</span>&nbsp;<span class="ident" id="4606126"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span>&nbsp;<span class="op" id="4606129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606135">if</span>&nbsp;<span class="ident" id="4606138"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4606142">=</span>&nbsp;<span class="ident" id="4606144"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606145">.</span><span class="ident" id="4606146">moreBits</span><span class="op" id="4606154">(</span><span class="op" id="4606155">)</span><span class="op" id="4606156">;</span>&nbsp;<span class="ident" id="4606158"><a href="/compress/flate/inflate.go.html#4604553">err</a></span>&nbsp;<span class="op" id="4606162">!=</span>&nbsp;<span class="ident" id="4606165">nil</span>&nbsp;<span class="op" id="4606169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606176"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606177">.</span><span class="ident" id="4606178">err</span>&nbsp;<span class="op" id="4606182">=</span>&nbsp;<span class="ident" id="4606184"><a href="/compress/flate/inflate.go.html#4604553">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606193">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606204">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606214"><a href="/compress/flate/inflate.go.html#4606086">extra</a></span>&nbsp;<span class="op" id="4606220">|=</span>&nbsp;<span class="builtintype" id="4606223">int</span><span class="op" id="4606226">(</span><span class="ident" id="4606227"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606228">.</span><span class="ident" id="4606229">b</span>&nbsp;<span class="op" id="4606231">&amp;</span>&nbsp;<span class="builtintype" id="4606233">uint32</span><span class="op" id="4606239">(</span><span class="num" id="4606240">1</span><span class="op" id="4606241">&lt;&lt;</span><span class="ident" id="4606243"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span><span class="op" id="4606245">-</span><span class="num" id="4606246">1</span><span class="op" id="4606247">)</span><span class="op" id="4606248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606253"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606254">.</span><span class="ident" id="4606255">b</span>&nbsp;<span class="op" id="4606257">&gt;&gt;=</span>&nbsp;<span class="ident" id="4606261"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606267"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606268">.</span><span class="ident" id="4606269">nb</span>&nbsp;<span class="op" id="4606272">-=</span>&nbsp;<span class="ident" id="4606275"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606281"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4606286">=</span>&nbsp;<span class="num" id="4606288">1</span><span class="op" id="4606289">&lt;&lt;</span><span class="op" id="4606291">(</span><span class="ident" id="4606292"><a href="/compress/flate/inflate.go.html#4606009">nb</a></span><span class="op" id="4606294">+</span><span class="num" id="4606295">1</span><span class="op" id="4606296">)</span>&nbsp;<span class="op" id="4606298">+</span>&nbsp;<span class="num" id="4606300">1</span>&nbsp;<span class="op" id="4606302">+</span>&nbsp;<span class="ident" id="4606304"><a href="/compress/flate/inflate.go.html#4606086">extra</a></span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4606317">//&nbsp;Copy&nbsp;history[-dist:-dist+length]&nbsp;into&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606368">if</span>&nbsp;<span class="ident" id="4606371"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4606376">&gt;</span>&nbsp;<span class="builtinfunc" id="4606378">len</span><span class="op" id="4606381">(</span><span class="ident" id="4606382"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606383">.</span><span class="ident" id="4606384">hist</span><span class="op" id="4606388">)</span>&nbsp;<span class="op" id="4606390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606395"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606396">.</span><span class="ident" id="4606397">err</span>&nbsp;<span class="op" id="4606401">=</span>&nbsp;<span class="ident" id="4606403"><a href="/compress/flate/inflate.go.html#4595663">InternalError</a></span><span class="op" id="4606416">(</span><span class="string" id="4606417">&#34;bad&nbsp;history&nbsp;distance&#34;</span><span class="op" id="4606439">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606444">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4606458">//&nbsp;No&nbsp;check&nbsp;on&nbsp;length;&nbsp;encoding&nbsp;can&nbsp;be&nbsp;prescient.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606510">if</span>&nbsp;<span class="op" id="4606513">!</span><span class="ident" id="4606514"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606515">.</span><span class="ident" id="4606516">hfull</span>&nbsp;<span class="op" id="4606522">&amp;&amp;</span>&nbsp;<span class="ident" id="4606525"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span>&nbsp;<span class="op" id="4606530">&gt;</span>&nbsp;<span class="ident" id="4606532"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606533">.</span><span class="ident" id="4606534">hp</span>&nbsp;<span class="op" id="4606537">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606542"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606543">.</span><span class="ident" id="4606544">err</span>&nbsp;<span class="op" id="4606548">=</span>&nbsp;<span class="ident" id="4606550"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4606567">(</span><span class="ident" id="4606568"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606569">.</span><span class="ident" id="4606570">roffset</span><span class="op" id="4606577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606582">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606596"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606597">.</span><span class="ident" id="4606598">copyLen</span><span class="op" id="4606605">,</span>&nbsp;<span class="ident" id="4606607"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606608">.</span><span class="ident" id="4606609">copyDist</span>&nbsp;<span class="op" id="4606618">=</span>&nbsp;<span class="ident" id="4606620"><a href="/compress/flate/inflate.go.html#4604666">length</a></span><span class="op" id="4606626">,</span>&nbsp;<span class="ident" id="4606628"><a href="/compress/flate/inflate.go.html#4605598">dist</a></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606635">if</span>&nbsp;<span class="ident" id="4606638"><a href="/compress/flate/inflate.go.html#4604507">f</a></span><span class="op" id="4606639">.</span><span class="ident" id="4606640">copyHist</span><span class="op" id="4606648">(</span><span class="op" id="4606649">)</span>&nbsp;<span class="op" id="4606651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606656">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606668">}</span><br>
<span class="lineno"></span><span class="op" id="4606670">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span><span class="comment" id="4606673">//&nbsp;copyHist&nbsp;copies&nbsp;f.copyLen&nbsp;bytes&nbsp;from&nbsp;f.hist&nbsp;(f.copyDist&nbsp;bytes&nbsp;ago)&nbsp;to&nbsp;itself.</span><br>
<span class="lineno"></span><span class="comment" id="4606754">//&nbsp;It&nbsp;reports&nbsp;whether&nbsp;the&nbsp;f.hist&nbsp;buffer&nbsp;is&nbsp;full.</span><br>
<span class="lineno"></span><span class="keyword" id="4606803">func</span>&nbsp;<span class="op" id="4606808">(</span><span class="ident" id="4606809">f</span>&nbsp;<span class="op" id="4606811">*</span><span class="ident" id="4606812"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4606824">)</span>&nbsp;<span class="ident" id="4606826">copyHist</span><span class="op" id="4606834">(</span><span class="op" id="4606835">)</span>&nbsp;<span class="builtintype" id="4606837">bool</span>&nbsp;<span class="op" id="4606842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606845">p</span>&nbsp;<span class="op" id="4606847">:=</span>&nbsp;<span class="ident" id="4606850"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606851">.</span><span class="ident" id="4606852">hp</span>&nbsp;<span class="op" id="4606855">-</span>&nbsp;<span class="ident" id="4606857"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606858">.</span><span class="ident" id="4606859">copyDist</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606869">if</span>&nbsp;<span class="ident" id="4606872"><a href="/compress/flate/inflate.go.html#4606845">p</a></span>&nbsp;<span class="op" id="4606874">&lt;</span>&nbsp;<span class="num" id="4606876">0</span>&nbsp;<span class="op" id="4606878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606882"><a href="/compress/flate/inflate.go.html#4606845">p</a></span>&nbsp;<span class="op" id="4606884">+=</span>&nbsp;<span class="builtinfunc" id="4606887">len</span><span class="op" id="4606890">(</span><span class="ident" id="4606891"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606892">.</span><span class="ident" id="4606893">hist</span><span class="op" id="4606897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606903">for</span>&nbsp;<span class="ident" id="4606907"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606908">.</span><span class="ident" id="4606909">copyLen</span>&nbsp;<span class="op" id="4606917">&gt;</span>&nbsp;<span class="num" id="4606919">0</span>&nbsp;<span class="op" id="4606921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606925">n</span>&nbsp;<span class="op" id="4606927">:=</span>&nbsp;<span class="ident" id="4606930"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606931">.</span><span class="ident" id="4606932">copyLen</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606942">if</span>&nbsp;<span class="ident" id="4606945">x</span>&nbsp;<span class="op" id="4606947">:=</span>&nbsp;<span class="builtinfunc" id="4606950">len</span><span class="op" id="4606953">(</span><span class="ident" id="4606954"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606955">.</span><span class="ident" id="4606956">hist</span><span class="op" id="4606960">)</span>&nbsp;<span class="op" id="4606962">-</span>&nbsp;<span class="ident" id="4606964"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4606965">.</span><span class="ident" id="4606966">hp</span><span class="op" id="4606968">;</span>&nbsp;<span class="ident" id="4606970"><a href="/compress/flate/inflate.go.html#4606925">n</a></span>&nbsp;<span class="op" id="4606972">&gt;</span>&nbsp;<span class="ident" id="4606974"><a href="/compress/flate/inflate.go.html#4606945">x</a></span>&nbsp;<span class="op" id="4606976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4606981"><a href="/compress/flate/inflate.go.html#4606925">n</a></span>&nbsp;<span class="op" id="4606983">=</span>&nbsp;<span class="ident" id="4606985"><a href="/compress/flate/inflate.go.html#4606945">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4606989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4606993">if</span>&nbsp;<span class="ident" id="4606996">x</span>&nbsp;<span class="op" id="4606998">:=</span>&nbsp;<span class="builtinfunc" id="4607001">len</span><span class="op" id="4607004">(</span><span class="ident" id="4607005"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607006">.</span><span class="ident" id="4607007">hist</span><span class="op" id="4607011">)</span>&nbsp;<span class="op" id="4607013">-</span>&nbsp;<span class="ident" id="4607015"><a href="/compress/flate/inflate.go.html#4606845">p</a></span><span class="op" id="4607016">;</span>&nbsp;<span class="ident" id="4607018"><a href="/compress/flate/inflate.go.html#4606925">n</a></span>&nbsp;<span class="op" id="4607020">&gt;</span>&nbsp;<span class="ident" id="4607022"><a href="/compress/flate/inflate.go.html#4606996">x</a></span>&nbsp;<span class="op" id="4607024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607029"><a href="/compress/flate/inflate.go.html#4606925">n</a></span>&nbsp;<span class="op" id="4607031">=</span>&nbsp;<span class="ident" id="4607033"><a href="/compress/flate/inflate.go.html#4606996">x</a></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607041"><a href="/compress/flate/copy.go.html#4551731">forwardCopy</a></span><span class="op" id="4607052">(</span><span class="ident" id="4607053"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607054">.</span><span class="ident" id="4607055">hist</span><span class="op" id="4607059">[</span><span class="op" id="4607060">:</span><span class="op" id="4607061">]</span><span class="op" id="4607062">,</span>&nbsp;<span class="ident" id="4607064"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607065">.</span><span class="ident" id="4607066">hp</span><span class="op" id="4607068">,</span>&nbsp;<span class="ident" id="4607070"><a href="/compress/flate/inflate.go.html#4606845">p</a></span><span class="op" id="4607071">,</span>&nbsp;<span class="ident" id="4607073"><a href="/compress/flate/inflate.go.html#4606925">n</a></span><span class="op" id="4607074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607078"><a href="/compress/flate/inflate.go.html#4606845">p</a></span>&nbsp;<span class="op" id="4607080">+=</span>&nbsp;<span class="ident" id="4607083"><a href="/compress/flate/inflate.go.html#4606925">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607087"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607088">.</span><span class="ident" id="4607089">hp</span>&nbsp;<span class="op" id="4607092">+=</span>&nbsp;<span class="ident" id="4607095"><a href="/compress/flate/inflate.go.html#4606925">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607099"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607100">.</span><span class="ident" id="4607101">copyLen</span>&nbsp;<span class="op" id="4607109">-=</span>&nbsp;<span class="ident" id="4607112"><a href="/compress/flate/inflate.go.html#4606925">n</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607116">if</span>&nbsp;<span class="ident" id="4607119"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607120">.</span><span class="ident" id="4607121">hp</span>&nbsp;<span class="op" id="4607124">==</span>&nbsp;<span class="builtinfunc" id="4607127">len</span><span class="op" id="4607130">(</span><span class="ident" id="4607131"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607132">.</span><span class="ident" id="4607133">hist</span><span class="op" id="4607137">)</span>&nbsp;<span class="op" id="4607139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4607144">//&nbsp;After&nbsp;flush&nbsp;continue&nbsp;copying&nbsp;out&nbsp;of&nbsp;history.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607195"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607196">.</span><span class="ident" id="4607197">flush</span><span class="op" id="4607202">(</span><span class="op" id="4607203">(</span><span class="op" id="4607204">*</span><span class="ident" id="4607205"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4607217">)</span><span class="op" id="4607218">.</span><span class="ident" id="4607219">copyHuff</span><span class="op" id="4607227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607232">return</span>&nbsp;<span class="ident" id="4607239">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607246">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607250">if</span>&nbsp;<span class="ident" id="4607253"><a href="/compress/flate/inflate.go.html#4606845">p</a></span>&nbsp;<span class="op" id="4607255">==</span>&nbsp;<span class="builtinfunc" id="4607258">len</span><span class="op" id="4607261">(</span><span class="ident" id="4607262"><a href="/compress/flate/inflate.go.html#4606809">f</a></span><span class="op" id="4607263">.</span><span class="ident" id="4607264">hist</span><span class="op" id="4607268">)</span>&nbsp;<span class="op" id="4607270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607275"><a href="/compress/flate/inflate.go.html#4606845">p</a></span>&nbsp;<span class="op" id="4607277">=</span>&nbsp;<span class="num" id="4607279">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607289">return</span>&nbsp;<span class="ident" id="4607296">false</span><br>
<span class="lineno">550</span><span class="op" id="4607302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4607305">func</span>&nbsp;<span class="op" id="4607310">(</span><span class="ident" id="4607311">f</span>&nbsp;<span class="op" id="4607313">*</span><span class="ident" id="4607314"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4607326">)</span>&nbsp;<span class="ident" id="4607328">copyHuff</span><span class="op" id="4607336">(</span><span class="op" id="4607337">)</span>&nbsp;<span class="op" id="4607339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607342">if</span>&nbsp;<span class="ident" id="4607345"><a href="/compress/flate/inflate.go.html#4607311">f</a></span><span class="op" id="4607346">.</span><span class="ident" id="4607347">copyHist</span><span class="op" id="4607355">(</span><span class="op" id="4607356">)</span>&nbsp;<span class="op" id="4607358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607362">return</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607373"><a href="/compress/flate/inflate.go.html#4607311">f</a></span><span class="op" id="4607374">.</span><span class="ident" id="4607375">huffmanBlock</span><span class="op" id="4607387">(</span><span class="op" id="4607388">)</span><br>
<span class="lineno"></span><span class="op" id="4607390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4607393">//&nbsp;Copy&nbsp;a&nbsp;single&nbsp;uncompressed&nbsp;data&nbsp;block&nbsp;from&nbsp;input&nbsp;to&nbsp;output.</span><br>
<span class="lineno">560</span><span class="keyword" id="4607456">func</span>&nbsp;<span class="op" id="4607461">(</span><span class="ident" id="4607462">f</span>&nbsp;<span class="op" id="4607464">*</span><span class="ident" id="4607465"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4607477">)</span>&nbsp;<span class="ident" id="4607479">dataBlock</span><span class="op" id="4607488">(</span><span class="op" id="4607489">)</span>&nbsp;<span class="op" id="4607491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4607494">//&nbsp;Uncompressed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4607512">//&nbsp;Discard&nbsp;current&nbsp;half-byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607543"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607544">.</span><span class="ident" id="4607545">nb</span>&nbsp;<span class="op" id="4607548">=</span>&nbsp;<span class="num" id="4607550">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607553"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607554">.</span><span class="ident" id="4607555">b</span>&nbsp;<span class="op" id="4607557">=</span>&nbsp;<span class="num" id="4607559">0</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4607563">//&nbsp;Length&nbsp;then&nbsp;ones-complement&nbsp;of&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607606">nr</span><span class="op" id="4607608">,</span>&nbsp;<span class="ident" id="4607610">err</span>&nbsp;<span class="op" id="4607614">:=</span>&nbsp;<span class="ident" id="4607617"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4607619">.</span><span class="ident" id="4607620">ReadFull</span><span class="op" id="4607628">(</span><span class="ident" id="4607629"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607630">.</span><span class="ident" id="4607631">r</span><span class="op" id="4607632">,</span>&nbsp;<span class="ident" id="4607634"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607635">.</span><span class="ident" id="4607636">buf</span><span class="op" id="4607639">[</span><span class="num" id="4607640">0</span><span class="op" id="4607641">:</span><span class="num" id="4607642">4</span><span class="op" id="4607643">]</span><span class="op" id="4607644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607647"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607648">.</span><span class="ident" id="4607649">roffset</span>&nbsp;<span class="op" id="4607657">+=</span>&nbsp;<span class="ident" id="4607660">int64</span><span class="op" id="4607665">(</span><span class="ident" id="4607666"><a href="/compress/flate/inflate.go.html#4607606">nr</a></span><span class="op" id="4607668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607671">if</span>&nbsp;<span class="ident" id="4607674"><a href="/compress/flate/inflate.go.html#4607610">err</a></span>&nbsp;<span class="op" id="4607678">!=</span>&nbsp;<span class="ident" id="4607681">nil</span>&nbsp;<span class="op" id="4607685">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607689"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607690">.</span><span class="ident" id="4607691">err</span>&nbsp;<span class="op" id="4607695">=</span>&nbsp;<span class="op" id="4607697">&amp;</span><span class="ident" id="4607698"><a href="/compress/flate/inflate.go.html#4595843">ReadError</a></span><span class="op" id="4607707">{</span><span class="ident" id="4607708"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607709">.</span><span class="ident" id="4607710">roffset</span><span class="op" id="4607717">,</span>&nbsp;<span class="ident" id="4607719"><a href="/compress/flate/inflate.go.html#4607610">err</a></span><span class="op" id="4607722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607726">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607737">n</span>&nbsp;<span class="op" id="4607739">:=</span>&nbsp;<span class="builtintype" id="4607742">int</span><span class="op" id="4607745">(</span><span class="ident" id="4607746"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607747">.</span><span class="ident" id="4607748">buf</span><span class="op" id="4607751">[</span><span class="num" id="4607752">0</span><span class="op" id="4607753">]</span><span class="op" id="4607754">)</span>&nbsp;<span class="op" id="4607756">|</span>&nbsp;<span class="builtintype" id="4607758">int</span><span class="op" id="4607761">(</span><span class="ident" id="4607762"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607763">.</span><span class="ident" id="4607764">buf</span><span class="op" id="4607767">[</span><span class="num" id="4607768">1</span><span class="op" id="4607769">]</span><span class="op" id="4607770">)</span><span class="op" id="4607771">&lt;&lt;</span><span class="num" id="4607773">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607776">nn</span>&nbsp;<span class="op" id="4607779">:=</span>&nbsp;<span class="builtintype" id="4607782">int</span><span class="op" id="4607785">(</span><span class="ident" id="4607786"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607787">.</span><span class="ident" id="4607788">buf</span><span class="op" id="4607791">[</span><span class="num" id="4607792">2</span><span class="op" id="4607793">]</span><span class="op" id="4607794">)</span>&nbsp;<span class="op" id="4607796">|</span>&nbsp;<span class="builtintype" id="4607798">int</span><span class="op" id="4607801">(</span><span class="ident" id="4607802"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607803">.</span><span class="ident" id="4607804">buf</span><span class="op" id="4607807">[</span><span class="num" id="4607808">3</span><span class="op" id="4607809">]</span><span class="op" id="4607810">)</span><span class="op" id="4607811">&lt;&lt;</span><span class="num" id="4607813">8</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607816">if</span>&nbsp;<span class="builtintype" id="4607819">uint16</span><span class="op" id="4607825">(</span><span class="ident" id="4607826"><a href="/compress/flate/inflate.go.html#4607776">nn</a></span><span class="op" id="4607828">)</span>&nbsp;<span class="op" id="4607830">!=</span>&nbsp;<span class="builtintype" id="4607833">uint16</span><span class="op" id="4607839">(</span><span class="op" id="4607840">^</span><span class="ident" id="4607841"><a href="/compress/flate/inflate.go.html#4607737">n</a></span><span class="op" id="4607842">)</span>&nbsp;<span class="op" id="4607844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607848"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607849">.</span><span class="ident" id="4607850">err</span>&nbsp;<span class="op" id="4607854">=</span>&nbsp;<span class="ident" id="4607856"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4607873">(</span><span class="ident" id="4607874"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607875">.</span><span class="ident" id="4607876">roffset</span><span class="op" id="4607883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607887">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607899">if</span>&nbsp;<span class="ident" id="4607902"><a href="/compress/flate/inflate.go.html#4607737">n</a></span>&nbsp;<span class="op" id="4607904">==</span>&nbsp;<span class="num" id="4607907">0</span>&nbsp;<span class="op" id="4607909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4607913">//&nbsp;0-length&nbsp;block&nbsp;means&nbsp;sync</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607944"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607945">.</span><span class="ident" id="4607946">flush</span><span class="op" id="4607951">(</span><span class="op" id="4607952">(</span><span class="op" id="4607953">*</span><span class="ident" id="4607954"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4607966">)</span><span class="op" id="4607967">.</span><span class="ident" id="4607968">nextBlock</span><span class="op" id="4607977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4607981">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4607989">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4607993"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4607994">.</span><span class="ident" id="4607995">copyLen</span>&nbsp;<span class="op" id="4608003">=</span>&nbsp;<span class="ident" id="4608005"><a href="/compress/flate/inflate.go.html#4607737">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608008"><a href="/compress/flate/inflate.go.html#4607462">f</a></span><span class="op" id="4608009">.</span><span class="ident" id="4608010">copyData</span><span class="op" id="4608018">(</span><span class="op" id="4608019">)</span><br>
<span class="lineno"></span><span class="op" id="4608021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="4608024">//&nbsp;copyData&nbsp;copies&nbsp;f.copyLen&nbsp;bytes&nbsp;from&nbsp;the&nbsp;underlying&nbsp;reader&nbsp;into&nbsp;f.hist.</span><br>
<span class="lineno"></span><span class="comment" id="4608099">//&nbsp;It&nbsp;pauses&nbsp;for&nbsp;reads&nbsp;when&nbsp;f.hist&nbsp;is&nbsp;full.</span><br>
<span class="lineno"></span><span class="keyword" id="4608143">func</span>&nbsp;<span class="op" id="4608148">(</span><span class="ident" id="4608149">f</span>&nbsp;<span class="op" id="4608151">*</span><span class="ident" id="4608152"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4608164">)</span>&nbsp;<span class="ident" id="4608166">copyData</span><span class="op" id="4608174">(</span><span class="op" id="4608175">)</span>&nbsp;<span class="op" id="4608177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608180">n</span>&nbsp;<span class="op" id="4608182">:=</span>&nbsp;<span class="ident" id="4608185"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608186">.</span><span class="ident" id="4608187">copyLen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608196">for</span>&nbsp;<span class="ident" id="4608200"><a href="/compress/flate/inflate.go.html#4608180">n</a></span>&nbsp;<span class="op" id="4608202">&gt;</span>&nbsp;<span class="num" id="4608204">0</span>&nbsp;<span class="op" id="4608206">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608210">m</span>&nbsp;<span class="op" id="4608212">:=</span>&nbsp;<span class="builtinfunc" id="4608215">len</span><span class="op" id="4608218">(</span><span class="ident" id="4608219"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608220">.</span><span class="ident" id="4608221">hist</span><span class="op" id="4608225">)</span>&nbsp;<span class="op" id="4608227">-</span>&nbsp;<span class="ident" id="4608229"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608230">.</span><span class="ident" id="4608231">hp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608236">if</span>&nbsp;<span class="ident" id="4608239"><a href="/compress/flate/inflate.go.html#4608210">m</a></span>&nbsp;<span class="op" id="4608241">&gt;</span>&nbsp;<span class="ident" id="4608243"><a href="/compress/flate/inflate.go.html#4608180">n</a></span>&nbsp;<span class="op" id="4608245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608250"><a href="/compress/flate/inflate.go.html#4608210">m</a></span>&nbsp;<span class="op" id="4608252">=</span>&nbsp;<span class="ident" id="4608254"><a href="/compress/flate/inflate.go.html#4608180">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608262"><a href="/compress/flate/inflate.go.html#4608210">m</a></span><span class="op" id="4608263">,</span>&nbsp;<span class="ident" id="4608265">err</span>&nbsp;<span class="op" id="4608269">:=</span>&nbsp;<span class="ident" id="4608272"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4608274">.</span><span class="ident" id="4608275">ReadFull</span><span class="op" id="4608283">(</span><span class="ident" id="4608284"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608285">.</span><span class="ident" id="4608286">r</span><span class="op" id="4608287">,</span>&nbsp;<span class="ident" id="4608289"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608290">.</span><span class="ident" id="4608291">hist</span><span class="op" id="4608295">[</span><span class="ident" id="4608296"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608297">.</span><span class="ident" id="4608298">hp</span><span class="op" id="4608300">:</span><span class="ident" id="4608301"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608302">.</span><span class="ident" id="4608303">hp</span><span class="op" id="4608305">+</span><span class="ident" id="4608306"><a href="/compress/flate/inflate.go.html#4608210">m</a></span><span class="op" id="4608307">]</span><span class="op" id="4608308">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608312"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608313">.</span><span class="ident" id="4608314">roffset</span>&nbsp;<span class="op" id="4608322">+=</span>&nbsp;<span class="ident" id="4608325">int64</span><span class="op" id="4608330">(</span><span class="ident" id="4608331"><a href="/compress/flate/inflate.go.html#4608210">m</a></span><span class="op" id="4608332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608336">if</span>&nbsp;<span class="ident" id="4608339"><a href="/compress/flate/inflate.go.html#4608265">err</a></span>&nbsp;<span class="op" id="4608343">!=</span>&nbsp;<span class="ident" id="4608346">nil</span>&nbsp;<span class="op" id="4608350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608355"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608356">.</span><span class="ident" id="4608357">err</span>&nbsp;<span class="op" id="4608361">=</span>&nbsp;<span class="op" id="4608363">&amp;</span><span class="ident" id="4608364"><a href="/compress/flate/inflate.go.html#4595843">ReadError</a></span><span class="op" id="4608373">{</span><span class="ident" id="4608374"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608375">.</span><span class="ident" id="4608376">roffset</span><span class="op" id="4608383">,</span>&nbsp;<span class="ident" id="4608385"><a href="/compress/flate/inflate.go.html#4608265">err</a></span><span class="op" id="4608388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608393">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608402">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608406"><a href="/compress/flate/inflate.go.html#4608180">n</a></span>&nbsp;<span class="op" id="4608408">-=</span>&nbsp;<span class="ident" id="4608411"><a href="/compress/flate/inflate.go.html#4608210">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608415"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608416">.</span><span class="ident" id="4608417">hp</span>&nbsp;<span class="op" id="4608420">+=</span>&nbsp;<span class="ident" id="4608423"><a href="/compress/flate/inflate.go.html#4608210">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608427">if</span>&nbsp;<span class="ident" id="4608430"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608431">.</span><span class="ident" id="4608432">hp</span>&nbsp;<span class="op" id="4608435">==</span>&nbsp;<span class="builtinfunc" id="4608438">len</span><span class="op" id="4608441">(</span><span class="ident" id="4608442"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608443">.</span><span class="ident" id="4608444">hist</span><span class="op" id="4608448">)</span>&nbsp;<span class="op" id="4608450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608455"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608456">.</span><span class="ident" id="4608457">copyLen</span>&nbsp;<span class="op" id="4608465">=</span>&nbsp;<span class="ident" id="4608467"><a href="/compress/flate/inflate.go.html#4608180">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608472"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608473">.</span><span class="ident" id="4608474">flush</span><span class="op" id="4608479">(</span><span class="op" id="4608480">(</span><span class="op" id="4608481">*</span><span class="ident" id="4608482"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4608494">)</span><span class="op" id="4608495">.</span><span class="ident" id="4608496">copyData</span><span class="op" id="4608504">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608509">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608524"><a href="/compress/flate/inflate.go.html#4608149">f</a></span><span class="op" id="4608525">.</span><span class="ident" id="4608526">step</span>&nbsp;<span class="op" id="4608531">=</span>&nbsp;<span class="op" id="4608533">(</span><span class="op" id="4608534">*</span><span class="ident" id="4608535"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4608547">)</span><span class="op" id="4608548">.</span><span class="ident" id="4608549">nextBlock</span><br>
<span class="lineno"></span><span class="op" id="4608559">}</span><br>
<span class="lineno">615</span><br>
<span class="lineno"></span><span class="keyword" id="4608562">func</span>&nbsp;<span class="op" id="4608567">(</span><span class="ident" id="4608568">f</span>&nbsp;<span class="op" id="4608570">*</span><span class="ident" id="4608571"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4608583">)</span>&nbsp;<span class="ident" id="4608585">setDict</span><span class="op" id="4608592">(</span><span class="ident" id="4608593">dict</span>&nbsp;<span class="op" id="4608598">[</span><span class="op" id="4608599">]</span><span class="builtintype" id="4608600">byte</span><span class="op" id="4608604">)</span>&nbsp;<span class="op" id="4608606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608609">if</span>&nbsp;<span class="builtinfunc" id="4608612">len</span><span class="op" id="4608615">(</span><span class="ident" id="4608616"><a href="/compress/flate/inflate.go.html#4608593">dict</a></span><span class="op" id="4608620">)</span>&nbsp;<span class="op" id="4608622">&gt;</span>&nbsp;<span class="builtinfunc" id="4608624">len</span><span class="op" id="4608627">(</span><span class="ident" id="4608628"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608629">.</span><span class="ident" id="4608630">hist</span><span class="op" id="4608634">)</span>&nbsp;<span class="op" id="4608636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4608640">//&nbsp;Will&nbsp;only&nbsp;remember&nbsp;the&nbsp;tail.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608674"><a href="/compress/flate/inflate.go.html#4608593">dict</a></span>&nbsp;<span class="op" id="4608679">=</span>&nbsp;<span class="ident" id="4608681"><a href="/compress/flate/inflate.go.html#4608593">dict</a></span><span class="op" id="4608685">[</span><span class="builtinfunc" id="4608686">len</span><span class="op" id="4608689">(</span><span class="ident" id="4608690"><a href="/compress/flate/inflate.go.html#4608593">dict</a></span><span class="op" id="4608694">)</span><span class="op" id="4608695">-</span><span class="builtinfunc" id="4608696">len</span><span class="op" id="4608699">(</span><span class="ident" id="4608700"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608701">.</span><span class="ident" id="4608702">hist</span><span class="op" id="4608706">)</span><span class="op" id="4608707">:</span><span class="op" id="4608708">]</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608715"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608716">.</span><span class="ident" id="4608717">hp</span>&nbsp;<span class="op" id="4608720">=</span>&nbsp;<span class="builtinfunc" id="4608722">copy</span><span class="op" id="4608726">(</span><span class="ident" id="4608727"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608728">.</span><span class="ident" id="4608729">hist</span><span class="op" id="4608733">[</span><span class="op" id="4608734">:</span><span class="op" id="4608735">]</span><span class="op" id="4608736">,</span>&nbsp;<span class="ident" id="4608738"><a href="/compress/flate/inflate.go.html#4608593">dict</a></span><span class="op" id="4608742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608745">if</span>&nbsp;<span class="ident" id="4608748"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608749">.</span><span class="ident" id="4608750">hp</span>&nbsp;<span class="op" id="4608753">==</span>&nbsp;<span class="builtinfunc" id="4608756">len</span><span class="op" id="4608759">(</span><span class="ident" id="4608760"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608761">.</span><span class="ident" id="4608762">hist</span><span class="op" id="4608766">)</span>&nbsp;<span class="op" id="4608768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608772"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608773">.</span><span class="ident" id="4608774">hp</span>&nbsp;<span class="op" id="4608777">=</span>&nbsp;<span class="num" id="4608779">0</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608783"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608784">.</span><span class="ident" id="4608785">hfull</span>&nbsp;<span class="op" id="4608791">=</span>&nbsp;<span class="ident" id="4608793">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608802"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608803">.</span><span class="ident" id="4608804">hw</span>&nbsp;<span class="op" id="4608807">=</span>&nbsp;<span class="ident" id="4608809"><a href="/compress/flate/inflate.go.html#4608568">f</a></span><span class="op" id="4608810">.</span><span class="ident" id="4608811">hp</span><br>
<span class="lineno"></span><span class="op" id="4608814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="keyword" id="4608817">func</span>&nbsp;<span class="op" id="4608822">(</span><span class="ident" id="4608823">f</span>&nbsp;<span class="op" id="4608825">*</span><span class="ident" id="4608826"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4608838">)</span>&nbsp;<span class="ident" id="4608840">moreBits</span><span class="op" id="4608848">(</span><span class="op" id="4608849">)</span>&nbsp;<span class="builtintype" id="4608851">error</span>&nbsp;<span class="op" id="4608857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608860">c</span><span class="op" id="4608861">,</span>&nbsp;<span class="ident" id="4608863">err</span>&nbsp;<span class="op" id="4608867">:=</span>&nbsp;<span class="ident" id="4608870"><a href="/compress/flate/inflate.go.html#4608823">f</a></span><span class="op" id="4608871">.</span><span class="ident" id="4608872">r</span><span class="op" id="4608873">.</span><span class="ident" id="4608874">ReadByte</span><span class="op" id="4608882">(</span><span class="op" id="4608883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608886">if</span>&nbsp;<span class="ident" id="4608889"><a href="/compress/flate/inflate.go.html#4608863">err</a></span>&nbsp;<span class="op" id="4608893">!=</span>&nbsp;<span class="ident" id="4608896">nil</span>&nbsp;<span class="op" id="4608900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608904">if</span>&nbsp;<span class="ident" id="4608907"><a href="/compress/flate/inflate.go.html#4608863">err</a></span>&nbsp;<span class="op" id="4608911">==</span>&nbsp;<span class="ident" id="4608914"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4608916">.</span><span class="ident" id="4608917">EOF</span>&nbsp;<span class="op" id="4608921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608926"><a href="/compress/flate/inflate.go.html#4608863">err</a></span>&nbsp;<span class="op" id="4608930">=</span>&nbsp;<span class="ident" id="4608932"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4608934">.</span><span class="ident" id="4608935">ErrUnexpectedEOF</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4608958">return</span>&nbsp;<span class="ident" id="4608965"><a href="/compress/flate/inflate.go.html#4608863">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4608970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608973"><a href="/compress/flate/inflate.go.html#4608823">f</a></span><span class="op" id="4608974">.</span><span class="ident" id="4608975">roffset</span><span class="op" id="4608982">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4608986"><a href="/compress/flate/inflate.go.html#4608823">f</a></span><span class="op" id="4608987">.</span><span class="ident" id="4608988">b</span>&nbsp;<span class="op" id="4608990">|=</span>&nbsp;<span class="builtintype" id="4608993">uint32</span><span class="op" id="4608999">(</span><span class="ident" id="4609000"><a href="/compress/flate/inflate.go.html#4608860">c</a></span><span class="op" id="4609001">)</span>&nbsp;<span class="op" id="4609003">&lt;&lt;</span>&nbsp;<span class="ident" id="4609006"><a href="/compress/flate/inflate.go.html#4608823">f</a></span><span class="op" id="4609007">.</span><span class="ident" id="4609008">nb</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609012"><a href="/compress/flate/inflate.go.html#4608823">f</a></span><span class="op" id="4609013">.</span><span class="ident" id="4609014">nb</span>&nbsp;<span class="op" id="4609017">+=</span>&nbsp;<span class="num" id="4609020">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609023">return</span>&nbsp;<span class="ident" id="4609030">nil</span><br>
<span class="lineno"></span><span class="op" id="4609034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609037">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Huffman-encoded&nbsp;symbol&nbsp;from&nbsp;f&nbsp;according&nbsp;to&nbsp;h.</span><br>
<span class="lineno">645</span><span class="keyword" id="4609100">func</span>&nbsp;<span class="op" id="4609105">(</span><span class="ident" id="4609106">f</span>&nbsp;<span class="op" id="4609108">*</span><span class="ident" id="4609109"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4609121">)</span>&nbsp;<span class="ident" id="4609123">huffSym</span><span class="op" id="4609130">(</span><span class="ident" id="4609131">h</span>&nbsp;<span class="op" id="4609133">*</span><span class="ident" id="4609134"><a href="/compress/flate/inflate.go.html#4597976">huffmanDecoder</a></span><span class="op" id="4609148">)</span>&nbsp;<span class="op" id="4609150">(</span><span class="builtintype" id="4609151">int</span><span class="op" id="4609154">,</span>&nbsp;<span class="builtintype" id="4609156">error</span><span class="op" id="4609161">)</span>&nbsp;<span class="op" id="4609163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609166">n</span>&nbsp;<span class="op" id="4609168">:=</span>&nbsp;<span class="builtintype" id="4609171">uint</span><span class="op" id="4609175">(</span><span class="ident" id="4609176"><a href="/compress/flate/inflate.go.html#4609131">h</a></span><span class="op" id="4609177">.</span><span class="ident" id="4609178">min</span><span class="op" id="4609181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609184">for</span>&nbsp;<span class="op" id="4609188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609192">for</span>&nbsp;<span class="ident" id="4609196"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609197">.</span><span class="ident" id="4609198">nb</span>&nbsp;<span class="op" id="4609201">&lt;</span>&nbsp;<span class="ident" id="4609203"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609210">if</span>&nbsp;<span class="ident" id="4609213">err</span>&nbsp;<span class="op" id="4609217">:=</span>&nbsp;<span class="ident" id="4609220"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609221">.</span><span class="ident" id="4609222">moreBits</span><span class="op" id="4609230">(</span><span class="op" id="4609231">)</span><span class="op" id="4609232">;</span>&nbsp;<span class="ident" id="4609234"><a href="/compress/flate/inflate.go.html#4609213">err</a></span>&nbsp;<span class="op" id="4609238">!=</span>&nbsp;<span class="ident" id="4609241">nil</span>&nbsp;<span class="op" id="4609245">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609251">return</span>&nbsp;<span class="num" id="4609258">0</span><span class="op" id="4609259">,</span>&nbsp;<span class="ident" id="4609261"><a href="/compress/flate/inflate.go.html#4609213">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609276">chunk</span>&nbsp;<span class="op" id="4609282">:=</span>&nbsp;<span class="ident" id="4609285"><a href="/compress/flate/inflate.go.html#4609131">h</a></span><span class="op" id="4609286">.</span><span class="ident" id="4609287">chunks</span><span class="op" id="4609293">[</span><span class="ident" id="4609294"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609295">.</span><span class="ident" id="4609296">b</span><span class="op" id="4609297">&amp;</span><span class="op" id="4609298">(</span><span class="ident" id="4609299"><a href="/compress/flate/inflate.go.html#4597879">huffmanNumChunks</a></span><span class="op" id="4609315">-</span><span class="num" id="4609316">1</span><span class="op" id="4609317">)</span><span class="op" id="4609318">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609322"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609324">=</span>&nbsp;<span class="builtintype" id="4609326">uint</span><span class="op" id="4609330">(</span><span class="ident" id="4609331"><a href="/compress/flate/inflate.go.html#4609276">chunk</a></span>&nbsp;<span class="op" id="4609337">&amp;</span>&nbsp;<span class="ident" id="4609339"><a href="/compress/flate/inflate.go.html#4597922">huffmanCountMask</a></span><span class="op" id="4609355">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609359">if</span>&nbsp;<span class="ident" id="4609362"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609364">&gt;</span>&nbsp;<span class="ident" id="4609366"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span>&nbsp;<span class="op" id="4609383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609388"><a href="/compress/flate/inflate.go.html#4609276">chunk</a></span>&nbsp;<span class="op" id="4609394">=</span>&nbsp;<span class="ident" id="4609396"><a href="/compress/flate/inflate.go.html#4609131">h</a></span><span class="op" id="4609397">.</span><span class="ident" id="4609398">links</span><span class="op" id="4609403">[</span><span class="ident" id="4609404"><a href="/compress/flate/inflate.go.html#4609276">chunk</a></span><span class="op" id="4609409">&gt;&gt;</span><span class="ident" id="4609411"><a href="/compress/flate/inflate.go.html#4597946">huffmanValueShift</a></span><span class="op" id="4609428">]</span><span class="op" id="4609429">[</span><span class="op" id="4609430">(</span><span class="ident" id="4609431"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609432">.</span><span class="ident" id="4609433">b</span><span class="op" id="4609434">&gt;&gt;</span><span class="ident" id="4609436"><a href="/compress/flate/inflate.go.html#4597856">huffmanChunkBits</a></span><span class="op" id="4609452">)</span><span class="op" id="4609453">&amp;</span><span class="ident" id="4609454"><a href="/compress/flate/inflate.go.html#4609131">h</a></span><span class="op" id="4609455">.</span><span class="ident" id="4609456">linkMask</span><span class="op" id="4609464">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609469"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609471">=</span>&nbsp;<span class="builtintype" id="4609473">uint</span><span class="op" id="4609477">(</span><span class="ident" id="4609478"><a href="/compress/flate/inflate.go.html#4609276">chunk</a></span>&nbsp;<span class="op" id="4609484">&amp;</span>&nbsp;<span class="ident" id="4609486"><a href="/compress/flate/inflate.go.html#4597922">huffmanCountMask</a></span><span class="op" id="4609502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609507">if</span>&nbsp;<span class="ident" id="4609510"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609512">==</span>&nbsp;<span class="num" id="4609515">0</span>&nbsp;<span class="op" id="4609517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609523"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609524">.</span><span class="ident" id="4609525">err</span>&nbsp;<span class="op" id="4609529">=</span>&nbsp;<span class="ident" id="4609531"><a href="/compress/flate/inflate.go.html#4595443">CorruptInputError</a></span><span class="op" id="4609548">(</span><span class="ident" id="4609549"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609550">.</span><span class="ident" id="4609551">roffset</span><span class="op" id="4609558">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609564">return</span>&nbsp;<span class="num" id="4609571">0</span><span class="op" id="4609572">,</span>&nbsp;<span class="ident" id="4609574"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609575">.</span><span class="ident" id="4609576">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609591">if</span>&nbsp;<span class="ident" id="4609594"><a href="/compress/flate/inflate.go.html#4609166">n</a></span>&nbsp;<span class="op" id="4609596">&lt;=</span>&nbsp;<span class="ident" id="4609599"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609600">.</span><span class="ident" id="4609601">nb</span>&nbsp;<span class="op" id="4609604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609609"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609610">.</span><span class="ident" id="4609611">b</span>&nbsp;<span class="op" id="4609613">&gt;&gt;=</span>&nbsp;<span class="ident" id="4609617"><a href="/compress/flate/inflate.go.html#4609166">n</a></span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609622"><a href="/compress/flate/inflate.go.html#4609106">f</a></span><span class="op" id="4609623">.</span><span class="ident" id="4609624">nb</span>&nbsp;<span class="op" id="4609627">-=</span>&nbsp;<span class="ident" id="4609630"><a href="/compress/flate/inflate.go.html#4609166">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609635">return</span>&nbsp;<span class="builtintype" id="4609642">int</span><span class="op" id="4609645">(</span><span class="ident" id="4609646"><a href="/compress/flate/inflate.go.html#4609276">chunk</a></span>&nbsp;<span class="op" id="4609652">&gt;&gt;</span>&nbsp;<span class="ident" id="4609655"><a href="/compress/flate/inflate.go.html#4597946">huffmanValueShift</a></span><span class="op" id="4609672">)</span><span class="op" id="4609673">,</span>&nbsp;<span class="ident" id="4609675">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609684">}</span><br>
<span class="lineno"></span><span class="op" id="4609686">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="4609689">//&nbsp;Flush&nbsp;any&nbsp;buffered&nbsp;output&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="4609744">func</span>&nbsp;<span class="op" id="4609749">(</span><span class="ident" id="4609750">f</span>&nbsp;<span class="op" id="4609752">*</span><span class="ident" id="4609753"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4609765">)</span>&nbsp;<span class="ident" id="4609767">flush</span><span class="op" id="4609772">(</span><span class="ident" id="4609773">step</span>&nbsp;<span class="keyword" id="4609778">func</span><span class="op" id="4609782">(</span><span class="op" id="4609783">*</span><span class="ident" id="4609784"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4609796">)</span><span class="op" id="4609797">)</span>&nbsp;<span class="op" id="4609799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609802"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609803">.</span><span class="ident" id="4609804">toRead</span>&nbsp;<span class="op" id="4609811">=</span>&nbsp;<span class="ident" id="4609813"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609814">.</span><span class="ident" id="4609815">hist</span><span class="op" id="4609819">[</span><span class="ident" id="4609820"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609821">.</span><span class="ident" id="4609822">hw</span><span class="op" id="4609824">:</span><span class="ident" id="4609825"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609826">.</span><span class="ident" id="4609827">hp</span><span class="op" id="4609829">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609832"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609833">.</span><span class="ident" id="4609834">woffset</span>&nbsp;<span class="op" id="4609842">+=</span>&nbsp;<span class="ident" id="4609845">int64</span><span class="op" id="4609850">(</span><span class="ident" id="4609851"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609852">.</span><span class="ident" id="4609853">hp</span>&nbsp;<span class="op" id="4609856">-</span>&nbsp;<span class="ident" id="4609858"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609859">.</span><span class="ident" id="4609860">hw</span><span class="op" id="4609862">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609865"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609866">.</span><span class="ident" id="4609867">hw</span>&nbsp;<span class="op" id="4609870">=</span>&nbsp;<span class="ident" id="4609872"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609873">.</span><span class="ident" id="4609874">hp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4609878">if</span>&nbsp;<span class="ident" id="4609881"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609882">.</span><span class="ident" id="4609883">hp</span>&nbsp;<span class="op" id="4609886">==</span>&nbsp;<span class="builtinfunc" id="4609889">len</span><span class="op" id="4609892">(</span><span class="ident" id="4609893"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609894">.</span><span class="ident" id="4609895">hist</span><span class="op" id="4609899">)</span>&nbsp;<span class="op" id="4609901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609905"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609906">.</span><span class="ident" id="4609907">hp</span>&nbsp;<span class="op" id="4609910">=</span>&nbsp;<span class="num" id="4609912">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609916"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609917">.</span><span class="ident" id="4609918">hw</span>&nbsp;<span class="op" id="4609921">=</span>&nbsp;<span class="num" id="4609923">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609927"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609928">.</span><span class="ident" id="4609929">hfull</span>&nbsp;<span class="op" id="4609935">=</span>&nbsp;<span class="ident" id="4609937">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4609943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4609946"><a href="/compress/flate/inflate.go.html#4609750">f</a></span><span class="op" id="4609947">.</span><span class="ident" id="4609948">step</span>&nbsp;<span class="op" id="4609953">=</span>&nbsp;<span class="ident" id="4609955"><a href="/compress/flate/inflate.go.html#4609773">step</a></span><br>
<span class="lineno"></span><span class="op" id="4609960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4609963">func</span>&nbsp;<span class="ident" id="4609968">makeReader</span><span class="op" id="4609978">(</span><span class="ident" id="4609979">r</span>&nbsp;<span class="ident" id="4609981"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4609983">.</span><span class="ident" id="4609984">Reader</span><span class="op" id="4609990">)</span>&nbsp;<span class="ident" id="4609992"><a href="/compress/flate/inflate.go.html#4600396">Reader</a></span>&nbsp;<span class="op" id="4609999">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610002">if</span>&nbsp;<span class="ident" id="4610005">rr</span><span class="op" id="4610007">,</span>&nbsp;<span class="ident" id="4610009">ok</span>&nbsp;<span class="op" id="4610012">:=</span>&nbsp;<span class="ident" id="4610015"><a href="/compress/flate/inflate.go.html#4609979">r</a></span><span class="op" id="4610016">.</span><span class="op" id="4610017">(</span><span class="ident" id="4610018"><a href="/compress/flate/inflate.go.html#4600396">Reader</a></span><span class="op" id="4610024">)</span><span class="op" id="4610025">;</span>&nbsp;<span class="ident" id="4610027"><a href="/compress/flate/inflate.go.html#4610009">ok</a></span>&nbsp;<span class="op" id="4610030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610034">return</span>&nbsp;<span class="ident" id="4610041"><a href="/compress/flate/inflate.go.html#4610005">rr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610048">return</span>&nbsp;<span class="ident" id="4610055"><a href="/compress/flate/inflate.go.html#4595078">bufio</a></span><span class="op" id="4610060">.</span><span class="ident" id="4610061">NewReader</span><span class="op" id="4610070">(</span><span class="ident" id="4610071"><a href="/compress/flate/inflate.go.html#4609979">r</a></span><span class="op" id="4610072">)</span><br>
<span class="lineno"></span><span class="op" id="4610074">}</span><br>
<span class="lineno">690</span><br>
<span class="lineno"></span><span class="keyword" id="4610077">func</span>&nbsp;<span class="op" id="4610082">(</span><span class="ident" id="4610083">f</span>&nbsp;<span class="op" id="4610085">*</span><span class="ident" id="4610086"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4610098">)</span>&nbsp;<span class="ident" id="4610100">Reset</span><span class="op" id="4610105">(</span><span class="ident" id="4610106">r</span>&nbsp;<span class="ident" id="4610108"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4610110">.</span><span class="ident" id="4610111">Reader</span><span class="op" id="4610117">,</span>&nbsp;<span class="ident" id="4610119">dict</span>&nbsp;<span class="op" id="4610124">[</span><span class="op" id="4610125">]</span><span class="builtintype" id="4610126">byte</span><span class="op" id="4610130">)</span>&nbsp;<span class="builtintype" id="4610132">error</span>&nbsp;<span class="op" id="4610138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610141">*</span><span class="ident" id="4610142"><a href="/compress/flate/inflate.go.html#4610083">f</a></span>&nbsp;<span class="op" id="4610144">=</span>&nbsp;<span class="ident" id="4610146"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4610158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610162">r</span><span class="op" id="4610163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610172"><a href="/compress/flate/inflate.go.html#4609968">makeReader</a></span><span class="op" id="4610182">(</span><span class="ident" id="4610183"><a href="/compress/flate/inflate.go.html#4610106">r</a></span><span class="op" id="4610184">)</span><span class="op" id="4610185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610189">bits</span><span class="op" id="4610193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610199"><a href="/compress/flate/inflate.go.html#4610083">f</a></span><span class="op" id="4610200">.</span><span class="ident" id="4610201">bits</span><span class="op" id="4610205">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610209">codebits</span><span class="op" id="4610217">:</span>&nbsp;<span class="ident" id="4610219"><a href="/compress/flate/inflate.go.html#4610083">f</a></span><span class="op" id="4610220">.</span><span class="ident" id="4610221">codebits</span><span class="op" id="4610229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610233">hist</span><span class="op" id="4610237">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610243"><a href="/compress/flate/inflate.go.html#4610083">f</a></span><span class="op" id="4610244">.</span><span class="ident" id="4610245">hist</span><span class="op" id="4610249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610253">step</span><span class="op" id="4610257">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4610263">(</span><span class="op" id="4610264">*</span><span class="ident" id="4610265"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4610277">)</span><span class="op" id="4610278">.</span><span class="ident" id="4610279">nextBlock</span><span class="op" id="4610288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610294">if</span>&nbsp;<span class="ident" id="4610297"><a href="/compress/flate/inflate.go.html#4610119">dict</a></span>&nbsp;<span class="op" id="4610302">!=</span>&nbsp;<span class="ident" id="4610305">nil</span>&nbsp;<span class="op" id="4610309">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610313"><a href="/compress/flate/inflate.go.html#4610083">f</a></span><span class="op" id="4610314">.</span><span class="ident" id="4610315">setDict</span><span class="op" id="4610322">(</span><span class="ident" id="4610323"><a href="/compress/flate/inflate.go.html#4610119">dict</a></span><span class="op" id="4610327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4610330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610333">return</span>&nbsp;<span class="ident" id="4610340">nil</span><br>
<span class="lineno"></span><span class="op" id="4610344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">705</span><span class="comment" id="4610347">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadCloser&nbsp;that&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="4610402">//&nbsp;to&nbsp;read&nbsp;the&nbsp;uncompressed&nbsp;version&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4610444">//&nbsp;If&nbsp;r&nbsp;does&nbsp;not&nbsp;also&nbsp;implement&nbsp;io.ByteReader,</span><br>
<span class="lineno"></span><span class="comment" id="4610491">//&nbsp;the&nbsp;decompressor&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="4610553">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser</span><br>
<span class="lineno">710</span><span class="comment" id="4610622">//&nbsp;when&nbsp;finished&nbsp;reading.</span><br>
<span class="lineno"></span><span class="comment" id="4610648">//</span><br>
<span class="lineno"></span><span class="comment" id="4610651">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="4610717">func</span>&nbsp;<span class="ident" id="4610722">NewReader</span><span class="op" id="4610731">(</span><span class="ident" id="4610732">r</span>&nbsp;<span class="ident" id="4610734"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4610736">.</span><span class="ident" id="4610737">Reader</span><span class="op" id="4610743">)</span>&nbsp;<span class="ident" id="4610745"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4610747">.</span><span class="ident" id="4610748">ReadCloser</span>&nbsp;<span class="op" id="4610759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610762">var</span>&nbsp;<span class="ident" id="4610766">f</span>&nbsp;<span class="ident" id="4610768"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610782"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><span class="op" id="4610783">.</span><span class="ident" id="4610784">bits</span>&nbsp;<span class="op" id="4610789">=</span>&nbsp;<span class="builtinfunc" id="4610791">new</span><span class="op" id="4610794">(</span><span class="op" id="4610795">[</span><span class="ident" id="4610796"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span>&nbsp;<span class="op" id="4610803">+</span>&nbsp;<span class="ident" id="4610805"><a href="/compress/flate/inflate.go.html#4595286">maxDist</a></span><span class="op" id="4610812">]</span><span class="builtintype" id="4610813">int</span><span class="op" id="4610816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610819"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><span class="op" id="4610820">.</span><span class="ident" id="4610821">codebits</span>&nbsp;<span class="op" id="4610830">=</span>&nbsp;<span class="builtinfunc" id="4610832">new</span><span class="op" id="4610835">(</span><span class="op" id="4610836">[</span><span class="ident" id="4610837"><a href="/compress/flate/inflate.go.html#4595301">numCodes</a></span><span class="op" id="4610845">]</span><span class="builtintype" id="4610846">int</span><span class="op" id="4610849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610852"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><span class="op" id="4610853">.</span><span class="ident" id="4610854">r</span>&nbsp;<span class="op" id="4610856">=</span>&nbsp;<span class="ident" id="4610858"><a href="/compress/flate/inflate.go.html#4609968">makeReader</a></span><span class="op" id="4610868">(</span><span class="ident" id="4610869"><a href="/compress/flate/inflate.go.html#4610732">r</a></span><span class="op" id="4610870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610873"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><span class="op" id="4610874">.</span><span class="ident" id="4610875">hist</span>&nbsp;<span class="op" id="4610880">=</span>&nbsp;<span class="builtinfunc" id="4610882">new</span><span class="op" id="4610885">(</span><span class="op" id="4610886">[</span><span class="ident" id="4610887"><a href="/compress/flate/inflate.go.html#4595165">maxHist</a></span><span class="op" id="4610894">]</span><span class="builtintype" id="4610895">byte</span><span class="op" id="4610899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4610902"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><span class="op" id="4610903">.</span><span class="ident" id="4610904">step</span>&nbsp;<span class="op" id="4610909">=</span>&nbsp;<span class="op" id="4610911">(</span><span class="op" id="4610912">*</span><span class="ident" id="4610913"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4610925">)</span><span class="op" id="4610926">.</span><span class="ident" id="4610927">nextBlock</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4610938">return</span>&nbsp;<span class="op" id="4610945">&amp;</span><span class="ident" id="4610946"><a href="/compress/flate/inflate.go.html#4610766">f</a></span><br>
<span class="lineno"></span><span class="op" id="4610948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4610951">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;initializes&nbsp;the&nbsp;reader</span><br>
<span class="lineno"></span><span class="comment" id="4611013">//&nbsp;with&nbsp;a&nbsp;preset&nbsp;dictionary.&nbsp;&nbsp;The&nbsp;returned&nbsp;Reader&nbsp;behaves&nbsp;as&nbsp;if</span><br>
<span class="lineno">725</span><span class="comment" id="4611077">//&nbsp;the&nbsp;uncompressed&nbsp;data&nbsp;stream&nbsp;started&nbsp;with&nbsp;the&nbsp;given&nbsp;dictionary,</span><br>
<span class="lineno"></span><span class="comment" id="4611144">//&nbsp;which&nbsp;has&nbsp;already&nbsp;been&nbsp;read.&nbsp;&nbsp;NewReaderDict&nbsp;is&nbsp;typically&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="4611209">//&nbsp;to&nbsp;read&nbsp;data&nbsp;compressed&nbsp;by&nbsp;NewWriterDict.</span><br>
<span class="lineno"></span><span class="comment" id="4611254">//</span><br>
<span class="lineno"></span><span class="comment" id="4611257">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno">730</span><span class="keyword" id="4611323">func</span>&nbsp;<span class="ident" id="4611328">NewReaderDict</span><span class="op" id="4611341">(</span><span class="ident" id="4611342">r</span>&nbsp;<span class="ident" id="4611344"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4611346">.</span><span class="ident" id="4611347">Reader</span><span class="op" id="4611353">,</span>&nbsp;<span class="ident" id="4611355">dict</span>&nbsp;<span class="op" id="4611360">[</span><span class="op" id="4611361">]</span><span class="builtintype" id="4611362">byte</span><span class="op" id="4611366">)</span>&nbsp;<span class="ident" id="4611368"><a href="/compress/flate/inflate.go.html#4595087">io</a></span><span class="op" id="4611370">.</span><span class="ident" id="4611371">ReadCloser</span>&nbsp;<span class="op" id="4611382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611385">var</span>&nbsp;<span class="ident" id="4611389">f</span>&nbsp;<span class="ident" id="4611391"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611405"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611406">.</span><span class="ident" id="4611407">r</span>&nbsp;<span class="op" id="4611409">=</span>&nbsp;<span class="ident" id="4611411"><a href="/compress/flate/inflate.go.html#4609968">makeReader</a></span><span class="op" id="4611421">(</span><span class="ident" id="4611422"><a href="/compress/flate/inflate.go.html#4611342">r</a></span><span class="op" id="4611423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611426"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611427">.</span><span class="ident" id="4611428">hist</span>&nbsp;<span class="op" id="4611433">=</span>&nbsp;<span class="builtinfunc" id="4611435">new</span><span class="op" id="4611438">(</span><span class="op" id="4611439">[</span><span class="ident" id="4611440"><a href="/compress/flate/inflate.go.html#4595165">maxHist</a></span><span class="op" id="4611447">]</span><span class="builtintype" id="4611448">byte</span><span class="op" id="4611452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611455"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611456">.</span><span class="ident" id="4611457">bits</span>&nbsp;<span class="op" id="4611462">=</span>&nbsp;<span class="builtinfunc" id="4611464">new</span><span class="op" id="4611467">(</span><span class="op" id="4611468">[</span><span class="ident" id="4611469"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span>&nbsp;<span class="op" id="4611476">+</span>&nbsp;<span class="ident" id="4611478"><a href="/compress/flate/inflate.go.html#4595286">maxDist</a></span><span class="op" id="4611485">]</span><span class="builtintype" id="4611486">int</span><span class="op" id="4611489">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611492"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611493">.</span><span class="ident" id="4611494">codebits</span>&nbsp;<span class="op" id="4611503">=</span>&nbsp;<span class="builtinfunc" id="4611505">new</span><span class="op" id="4611508">(</span><span class="op" id="4611509">[</span><span class="ident" id="4611510"><a href="/compress/flate/inflate.go.html#4595301">numCodes</a></span><span class="op" id="4611518">]</span><span class="builtintype" id="4611519">int</span><span class="op" id="4611522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611525"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611526">.</span><span class="ident" id="4611527">step</span>&nbsp;<span class="op" id="4611532">=</span>&nbsp;<span class="op" id="4611534">(</span><span class="op" id="4611535">*</span><span class="ident" id="4611536"><a href="/compress/flate/inflate.go.html#4600470">decompressor</a></span><span class="op" id="4611548">)</span><span class="op" id="4611549">.</span><span class="ident" id="4611550">nextBlock</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4611561"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><span class="op" id="4611562">.</span><span class="ident" id="4611563">setDict</span><span class="op" id="4611570">(</span><span class="ident" id="4611571"><a href="/compress/flate/inflate.go.html#4611355">dict</a></span><span class="op" id="4611575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4611578">return</span>&nbsp;<span class="op" id="4611585">&amp;</span><span class="ident" id="4611586"><a href="/compress/flate/inflate.go.html#4611389">f</a></span><br>
<span class="lineno"></span><span class="op" id="4611588">}</span>
</div>
</body>
</html>
