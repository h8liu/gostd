<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2846228">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2846283">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2846337">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2846388">package</span>&nbsp;<span class="ident" id="2846396">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2846401">import</span>&nbsp;<span class="op" id="2846408">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2846411">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2846423">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2846431">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="2846441">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2846444">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="2846521">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="2846606">func</span>&nbsp;<span class="ident" id="2846611">SortImports</span><span class="op" id="2846622">(</span><span class="ident" id="2846623">fset</span>&nbsp;<span class="op" id="2846628">*</span><span class="ident" id="2846629">token</span><span class="op" id="2846634">.</span><span class="ident" id="2846635">FileSet</span><span class="op" id="2846642">,</span>&nbsp;<span class="ident" id="2846644">f</span>&nbsp;<span class="op" id="2846646">*</span><span class="ident" id="2846647">File</span><span class="op" id="2846651">)</span>&nbsp;<span class="op" id="2846653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846656">for</span>&nbsp;<span class="ident" id="2846660">_</span><span class="op" id="2846661">,</span>&nbsp;<span class="ident" id="2846663">d</span>&nbsp;<span class="op" id="2846665">:=</span>&nbsp;<span class="keyword" id="2846668">range</span>&nbsp;<span class="ident" id="2846674">f</span><span class="op" id="2846675">.</span><span class="ident" id="2846676">Decls</span>&nbsp;<span class="op" id="2846682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846686">d</span><span class="op" id="2846687">,</span>&nbsp;<span class="ident" id="2846689">ok</span>&nbsp;<span class="op" id="2846692">:=</span>&nbsp;<span class="ident" id="2846695">d</span><span class="op" id="2846696">.</span><span class="op" id="2846697">(</span><span class="op" id="2846698">*</span><span class="ident" id="2846699">GenDecl</span><span class="op" id="2846706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846710">if</span>&nbsp;<span class="op" id="2846713">!</span><span class="ident" id="2846714">ok</span>&nbsp;<span class="op" id="2846717">||</span>&nbsp;<span class="ident" id="2846720">d</span><span class="op" id="2846721">.</span><span class="ident" id="2846722">Tok</span>&nbsp;<span class="op" id="2846726">!=</span>&nbsp;<span class="ident" id="2846729">token</span><span class="op" id="2846734">.</span><span class="ident" id="2846735">IMPORT</span>&nbsp;<span class="op" id="2846742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2846747">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2846795">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846827">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2846835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846840">if</span>&nbsp;<span class="op" id="2846843">!</span><span class="ident" id="2846844">d</span><span class="op" id="2846845">.</span><span class="ident" id="2846846">Lparen</span><span class="op" id="2846852">.</span><span class="ident" id="2846853">IsValid</span><span class="op" id="2846860">(</span><span class="op" id="2846861">)</span>&nbsp;<span class="op" id="2846863">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2846868">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2846906">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2846917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2846922">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846980">i</span>&nbsp;<span class="op" id="2846982">:=</span>&nbsp;<span class="num" id="2846985">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2846989">specs</span>&nbsp;<span class="op" id="2846995">:=</span>&nbsp;<span class="ident" id="2846998">d</span><span class="op" id="2846999">.</span><span class="ident" id="2847000">Specs</span><span class="op" id="2847005">[</span><span class="op" id="2847006">:</span><span class="num" id="2847007">0</span><span class="op" id="2847008">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847012">for</span>&nbsp;<span class="ident" id="2847016">j</span><span class="op" id="2847017">,</span>&nbsp;<span class="ident" id="2847019">s</span>&nbsp;<span class="op" id="2847021">:=</span>&nbsp;<span class="keyword" id="2847024">range</span>&nbsp;<span class="ident" id="2847030">d</span><span class="op" id="2847031">.</span><span class="ident" id="2847032">Specs</span>&nbsp;<span class="op" id="2847038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847043">if</span>&nbsp;<span class="ident" id="2847046">j</span>&nbsp;<span class="op" id="2847048">&gt;</span>&nbsp;<span class="ident" id="2847050">i</span>&nbsp;<span class="op" id="2847052">&amp;&amp;</span>&nbsp;<span class="ident" id="2847055">fset</span><span class="op" id="2847059">.</span><span class="ident" id="2847060">Position</span><span class="op" id="2847068">(</span><span class="ident" id="2847069">s</span><span class="op" id="2847070">.</span><span class="ident" id="2847071">Pos</span><span class="op" id="2847074">(</span><span class="op" id="2847075">)</span><span class="op" id="2847076">)</span><span class="op" id="2847077">.</span><span class="ident" id="2847078">Line</span>&nbsp;<span class="op" id="2847083">&gt;</span>&nbsp;<span class="num" id="2847085">1</span><span class="op" id="2847086">+</span><span class="ident" id="2847087">fset</span><span class="op" id="2847091">.</span><span class="ident" id="2847092">Position</span><span class="op" id="2847100">(</span><span class="ident" id="2847101">d</span><span class="op" id="2847102">.</span><span class="ident" id="2847103">Specs</span><span class="op" id="2847108">[</span><span class="ident" id="2847109">j</span><span class="op" id="2847110">-</span><span class="num" id="2847111">1</span><span class="op" id="2847112">]</span><span class="op" id="2847113">.</span><span class="ident" id="2847114">End</span><span class="op" id="2847117">(</span><span class="op" id="2847118">)</span><span class="op" id="2847119">)</span><span class="op" id="2847120">.</span><span class="ident" id="2847121">Line</span>&nbsp;<span class="op" id="2847126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2847132">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847174">specs</span>&nbsp;<span class="op" id="2847180">=</span>&nbsp;<span class="builtinfunc" id="2847182">append</span><span class="op" id="2847188">(</span><span class="ident" id="2847189">specs</span><span class="op" id="2847194">,</span>&nbsp;<span class="ident" id="2847196">sortSpecs</span><span class="op" id="2847205">(</span><span class="ident" id="2847206">fset</span><span class="op" id="2847210">,</span>&nbsp;<span class="ident" id="2847212">f</span><span class="op" id="2847213">,</span>&nbsp;<span class="ident" id="2847215">d</span><span class="op" id="2847216">.</span><span class="ident" id="2847217">Specs</span><span class="op" id="2847222">[</span><span class="ident" id="2847223">i</span><span class="op" id="2847224">:</span><span class="ident" id="2847225">j</span><span class="op" id="2847226">]</span><span class="op" id="2847227">)</span><span class="op" id="2847228">...</span><span class="op" id="2847231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847237">i</span>&nbsp;<span class="op" id="2847239">=</span>&nbsp;<span class="ident" id="2847241">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847254">specs</span>&nbsp;<span class="op" id="2847260">=</span>&nbsp;<span class="builtinfunc" id="2847262">append</span><span class="op" id="2847268">(</span><span class="ident" id="2847269">specs</span><span class="op" id="2847274">,</span>&nbsp;<span class="ident" id="2847276">sortSpecs</span><span class="op" id="2847285">(</span><span class="ident" id="2847286">fset</span><span class="op" id="2847290">,</span>&nbsp;<span class="ident" id="2847292">f</span><span class="op" id="2847293">,</span>&nbsp;<span class="ident" id="2847295">d</span><span class="op" id="2847296">.</span><span class="ident" id="2847297">Specs</span><span class="op" id="2847302">[</span><span class="ident" id="2847303">i</span><span class="op" id="2847304">:</span><span class="op" id="2847305">]</span><span class="op" id="2847306">)</span><span class="op" id="2847307">...</span><span class="op" id="2847310">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847314">d</span><span class="op" id="2847315">.</span><span class="ident" id="2847316">Specs</span>&nbsp;<span class="op" id="2847322">=</span>&nbsp;<span class="ident" id="2847324">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2847333">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847404">if</span>&nbsp;<span class="builtinfunc" id="2847407">len</span><span class="op" id="2847410">(</span><span class="ident" id="2847411">d</span><span class="op" id="2847412">.</span><span class="ident" id="2847413">Specs</span><span class="op" id="2847418">)</span>&nbsp;<span class="op" id="2847420">&gt;</span>&nbsp;<span class="num" id="2847422">0</span>&nbsp;<span class="op" id="2847424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847429">lastSpec</span>&nbsp;<span class="op" id="2847438">:=</span>&nbsp;<span class="ident" id="2847441">d</span><span class="op" id="2847442">.</span><span class="ident" id="2847443">Specs</span><span class="op" id="2847448">[</span><span class="builtinfunc" id="2847449">len</span><span class="op" id="2847452">(</span><span class="ident" id="2847453">d</span><span class="op" id="2847454">.</span><span class="ident" id="2847455">Specs</span><span class="op" id="2847460">)</span><span class="op" id="2847461">-</span><span class="num" id="2847462">1</span><span class="op" id="2847463">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847468">lastLine</span>&nbsp;<span class="op" id="2847477">:=</span>&nbsp;<span class="ident" id="2847480">fset</span><span class="op" id="2847484">.</span><span class="ident" id="2847485">Position</span><span class="op" id="2847493">(</span><span class="ident" id="2847494">lastSpec</span><span class="op" id="2847502">.</span><span class="ident" id="2847503">Pos</span><span class="op" id="2847506">(</span><span class="op" id="2847507">)</span><span class="op" id="2847508">)</span><span class="op" id="2847509">.</span><span class="ident" id="2847510">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847518">if</span>&nbsp;<span class="ident" id="2847521">rParenLine</span>&nbsp;<span class="op" id="2847532">:=</span>&nbsp;<span class="ident" id="2847535">fset</span><span class="op" id="2847539">.</span><span class="ident" id="2847540">Position</span><span class="op" id="2847548">(</span><span class="ident" id="2847549">d</span><span class="op" id="2847550">.</span><span class="ident" id="2847551">Rparen</span><span class="op" id="2847557">)</span><span class="op" id="2847558">.</span><span class="ident" id="2847559">Line</span><span class="op" id="2847563">;</span>&nbsp;<span class="ident" id="2847565">rParenLine</span>&nbsp;<span class="op" id="2847576">&gt;</span>&nbsp;<span class="ident" id="2847578">lastLine</span><span class="op" id="2847586">+</span><span class="num" id="2847587">1</span>&nbsp;<span class="op" id="2847589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847595">fset</span><span class="op" id="2847599">.</span><span class="ident" id="2847600">File</span><span class="op" id="2847604">(</span><span class="ident" id="2847605">d</span><span class="op" id="2847606">.</span><span class="ident" id="2847607">Rparen</span><span class="op" id="2847613">)</span><span class="op" id="2847614">.</span><span class="ident" id="2847615">MergeLine</span><span class="op" id="2847624">(</span><span class="ident" id="2847625">rParenLine</span>&nbsp;<span class="op" id="2847636">-</span>&nbsp;<span class="num" id="2847638">1</span><span class="op" id="2847639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847648">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847651">}</span><br>
<span class="lineno"></span><span class="op" id="2847653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2847656">func</span>&nbsp;<span class="ident" id="2847661">importPath</span><span class="op" id="2847671">(</span><span class="ident" id="2847672">s</span>&nbsp;<span class="ident" id="2847674">Spec</span><span class="op" id="2847678">)</span>&nbsp;<span class="builtintype" id="2847680">string</span>&nbsp;<span class="op" id="2847687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847690">t</span><span class="op" id="2847691">,</span>&nbsp;<span class="ident" id="2847693">err</span>&nbsp;<span class="op" id="2847697">:=</span>&nbsp;<span class="ident" id="2847700">strconv</span><span class="op" id="2847707">.</span><span class="ident" id="2847708">Unquote</span><span class="op" id="2847715">(</span><span class="ident" id="2847716">s</span><span class="op" id="2847717">.</span><span class="op" id="2847718">(</span><span class="op" id="2847719">*</span><span class="ident" id="2847720">ImportSpec</span><span class="op" id="2847730">)</span><span class="op" id="2847731">.</span><span class="ident" id="2847732">Path</span><span class="op" id="2847736">.</span><span class="ident" id="2847737">Value</span><span class="op" id="2847742">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847745">if</span>&nbsp;<span class="ident" id="2847748">err</span>&nbsp;<span class="op" id="2847752">==</span>&nbsp;<span class="ident" id="2847755">nil</span>&nbsp;<span class="op" id="2847759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847763">return</span>&nbsp;<span class="ident" id="2847770">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847776">return</span>&nbsp;<span class="string" id="2847783">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2847786">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2847789">func</span>&nbsp;<span class="ident" id="2847794">importName</span><span class="op" id="2847804">(</span><span class="ident" id="2847805">s</span>&nbsp;<span class="ident" id="2847807">Spec</span><span class="op" id="2847811">)</span>&nbsp;<span class="builtintype" id="2847813">string</span>&nbsp;<span class="op" id="2847820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847823">n</span>&nbsp;<span class="op" id="2847825">:=</span>&nbsp;<span class="ident" id="2847828">s</span><span class="op" id="2847829">.</span><span class="op" id="2847830">(</span><span class="op" id="2847831">*</span><span class="ident" id="2847832">ImportSpec</span><span class="op" id="2847842">)</span><span class="op" id="2847843">.</span><span class="ident" id="2847844">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847850">if</span>&nbsp;<span class="ident" id="2847853">n</span>&nbsp;<span class="op" id="2847855">==</span>&nbsp;<span class="ident" id="2847858">nil</span>&nbsp;<span class="op" id="2847862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847866">return</span>&nbsp;<span class="string" id="2847873">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847880">return</span>&nbsp;<span class="ident" id="2847887">n</span><span class="op" id="2847888">.</span><span class="ident" id="2847889">Name</span><br>
<span class="lineno"></span><span class="op" id="2847894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2847897">func</span>&nbsp;<span class="ident" id="2847902">importComment</span><span class="op" id="2847915">(</span><span class="ident" id="2847916">s</span>&nbsp;<span class="ident" id="2847918">Spec</span><span class="op" id="2847922">)</span>&nbsp;<span class="builtintype" id="2847924">string</span>&nbsp;<span class="op" id="2847931">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2847934">c</span>&nbsp;<span class="op" id="2847936">:=</span>&nbsp;<span class="ident" id="2847939">s</span><span class="op" id="2847940">.</span><span class="op" id="2847941">(</span><span class="op" id="2847942">*</span><span class="ident" id="2847943">ImportSpec</span><span class="op" id="2847953">)</span><span class="op" id="2847954">.</span><span class="ident" id="2847955">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847964">if</span>&nbsp;<span class="ident" id="2847967">c</span>&nbsp;<span class="op" id="2847969">==</span>&nbsp;<span class="ident" id="2847972">nil</span>&nbsp;<span class="op" id="2847976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847980">return</span>&nbsp;<span class="string" id="2847987">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2847991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2847994">return</span>&nbsp;<span class="ident" id="2848001">c</span><span class="op" id="2848002">.</span><span class="ident" id="2848003">Text</span><span class="op" id="2848007">(</span><span class="op" id="2848008">)</span><br>
<span class="lineno">75</span><span class="op" id="2848010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2848013">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="2848083">func</span>&nbsp;<span class="ident" id="2848088">collapse</span><span class="op" id="2848096">(</span><span class="ident" id="2848097">prev</span><span class="op" id="2848101">,</span>&nbsp;<span class="ident" id="2848103">next</span>&nbsp;<span class="ident" id="2848108">Spec</span><span class="op" id="2848112">)</span>&nbsp;<span class="builtintype" id="2848114">bool</span>&nbsp;<span class="op" id="2848119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848122">if</span>&nbsp;<span class="ident" id="2848125">importPath</span><span class="op" id="2848135">(</span><span class="ident" id="2848136">next</span><span class="op" id="2848140">)</span>&nbsp;<span class="op" id="2848142">!=</span>&nbsp;<span class="ident" id="2848145">importPath</span><span class="op" id="2848155">(</span><span class="ident" id="2848156">prev</span><span class="op" id="2848160">)</span>&nbsp;<span class="op" id="2848162">||</span>&nbsp;<span class="ident" id="2848165">importName</span><span class="op" id="2848175">(</span><span class="ident" id="2848176">next</span><span class="op" id="2848180">)</span>&nbsp;<span class="op" id="2848182">!=</span>&nbsp;<span class="ident" id="2848185">importName</span><span class="op" id="2848195">(</span><span class="ident" id="2848196">prev</span><span class="op" id="2848200">)</span>&nbsp;<span class="op" id="2848202">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848206">return</span>&nbsp;<span class="builtintype" id="2848213">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848223">return</span>&nbsp;<span class="ident" id="2848230">prev</span><span class="op" id="2848234">.</span><span class="op" id="2848235">(</span><span class="op" id="2848236">*</span><span class="ident" id="2848237">ImportSpec</span><span class="op" id="2848247">)</span><span class="op" id="2848248">.</span><span class="ident" id="2848249">Comment</span>&nbsp;<span class="op" id="2848257">==</span>&nbsp;<span class="ident" id="2848260">nil</span><br>
<span class="lineno"></span><span class="op" id="2848264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="2848267">type</span>&nbsp;<span class="ident" id="2848272">posSpan</span>&nbsp;<span class="keyword" id="2848280">struct</span>&nbsp;<span class="op" id="2848287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848290">Start</span>&nbsp;<span class="ident" id="2848296">token</span><span class="op" id="2848301">.</span><span class="ident" id="2848302">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848307">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2848313">token</span><span class="op" id="2848318">.</span><span class="ident" id="2848319">Pos</span><br>
<span class="lineno"></span><span class="op" id="2848323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="2848326">func</span>&nbsp;<span class="ident" id="2848331">sortSpecs</span><span class="op" id="2848340">(</span><span class="ident" id="2848341">fset</span>&nbsp;<span class="op" id="2848346">*</span><span class="ident" id="2848347">token</span><span class="op" id="2848352">.</span><span class="ident" id="2848353">FileSet</span><span class="op" id="2848360">,</span>&nbsp;<span class="ident" id="2848362">f</span>&nbsp;<span class="op" id="2848364">*</span><span class="ident" id="2848365">File</span><span class="op" id="2848369">,</span>&nbsp;<span class="ident" id="2848371">specs</span>&nbsp;<span class="op" id="2848377">[</span><span class="op" id="2848378">]</span><span class="ident" id="2848379">Spec</span><span class="op" id="2848383">)</span>&nbsp;<span class="op" id="2848385">[</span><span class="op" id="2848386">]</span><span class="ident" id="2848387">Spec</span>&nbsp;<span class="op" id="2848392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848395">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848458">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848503">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848554">if</span>&nbsp;<span class="builtinfunc" id="2848557">len</span><span class="op" id="2848560">(</span><span class="ident" id="2848561">specs</span><span class="op" id="2848566">)</span>&nbsp;<span class="op" id="2848568">&lt;=</span>&nbsp;<span class="num" id="2848571">1</span>&nbsp;<span class="op" id="2848573">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848577">return</span>&nbsp;<span class="ident" id="2848584">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848595">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848627">pos</span>&nbsp;<span class="op" id="2848631">:=</span>&nbsp;<span class="builtinfunc" id="2848634">make</span><span class="op" id="2848638">(</span><span class="op" id="2848639">[</span><span class="op" id="2848640">]</span><span class="ident" id="2848641">posSpan</span><span class="op" id="2848648">,</span>&nbsp;<span class="builtinfunc" id="2848650">len</span><span class="op" id="2848653">(</span><span class="ident" id="2848654">specs</span><span class="op" id="2848659">)</span><span class="op" id="2848660">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848663">for</span>&nbsp;<span class="ident" id="2848667">i</span><span class="op" id="2848668">,</span>&nbsp;<span class="ident" id="2848670">s</span>&nbsp;<span class="op" id="2848672">:=</span>&nbsp;<span class="keyword" id="2848675">range</span>&nbsp;<span class="ident" id="2848681">specs</span>&nbsp;<span class="op" id="2848687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848691">pos</span><span class="op" id="2848694">[</span><span class="ident" id="2848695">i</span><span class="op" id="2848696">]</span>&nbsp;<span class="op" id="2848698">=</span>&nbsp;<span class="ident" id="2848700">posSpan</span><span class="op" id="2848707">{</span><span class="ident" id="2848708">s</span><span class="op" id="2848709">.</span><span class="ident" id="2848710">Pos</span><span class="op" id="2848713">(</span><span class="op" id="2848714">)</span><span class="op" id="2848715">,</span>&nbsp;<span class="ident" id="2848717">s</span><span class="op" id="2848718">.</span><span class="ident" id="2848719">End</span><span class="op" id="2848722">(</span><span class="op" id="2848723">)</span><span class="op" id="2848724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2848727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848731">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2848768">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848828">lastLine</span>&nbsp;<span class="op" id="2848837">:=</span>&nbsp;<span class="ident" id="2848840">fset</span><span class="op" id="2848844">.</span><span class="ident" id="2848845">Position</span><span class="op" id="2848853">(</span><span class="ident" id="2848854">pos</span><span class="op" id="2848857">[</span><span class="builtinfunc" id="2848858">len</span><span class="op" id="2848861">(</span><span class="ident" id="2848862">pos</span><span class="op" id="2848865">)</span><span class="op" id="2848866">-</span><span class="num" id="2848867">1</span><span class="op" id="2848868">]</span><span class="op" id="2848869">.</span><span class="ident" id="2848870">End</span><span class="op" id="2848873">)</span><span class="op" id="2848874">.</span><span class="ident" id="2848875">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848881">cstart</span>&nbsp;<span class="op" id="2848888">:=</span>&nbsp;<span class="builtinfunc" id="2848891">len</span><span class="op" id="2848894">(</span><span class="ident" id="2848895">f</span><span class="op" id="2848896">.</span><span class="ident" id="2848897">Comments</span><span class="op" id="2848905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2848908">cend</span>&nbsp;<span class="op" id="2848913">:=</span>&nbsp;<span class="builtinfunc" id="2848916">len</span><span class="op" id="2848919">(</span><span class="ident" id="2848920">f</span><span class="op" id="2848921">.</span><span class="ident" id="2848922">Comments</span><span class="op" id="2848930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848933">for</span>&nbsp;<span class="ident" id="2848937">i</span><span class="op" id="2848938">,</span>&nbsp;<span class="ident" id="2848940">g</span>&nbsp;<span class="op" id="2848942">:=</span>&nbsp;<span class="keyword" id="2848945">range</span>&nbsp;<span class="ident" id="2848951">f</span><span class="op" id="2848952">.</span><span class="ident" id="2848953">Comments</span>&nbsp;<span class="op" id="2848962">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848966">if</span>&nbsp;<span class="ident" id="2848969">g</span><span class="op" id="2848970">.</span><span class="ident" id="2848971">Pos</span><span class="op" id="2848974">(</span><span class="op" id="2848975">)</span>&nbsp;<span class="op" id="2848977">&lt;</span>&nbsp;<span class="ident" id="2848979">pos</span><span class="op" id="2848982">[</span><span class="num" id="2848983">0</span><span class="op" id="2848984">]</span><span class="op" id="2848985">.</span><span class="ident" id="2848986">Start</span>&nbsp;<span class="op" id="2848992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2848997">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849012">if</span>&nbsp;<span class="ident" id="2849015">i</span>&nbsp;<span class="op" id="2849017">&lt;</span>&nbsp;<span class="ident" id="2849019">cstart</span>&nbsp;<span class="op" id="2849026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849031">cstart</span>&nbsp;<span class="op" id="2849038">=</span>&nbsp;<span class="ident" id="2849040">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849048">if</span>&nbsp;<span class="ident" id="2849051">fset</span><span class="op" id="2849055">.</span><span class="ident" id="2849056">Position</span><span class="op" id="2849064">(</span><span class="ident" id="2849065">g</span><span class="op" id="2849066">.</span><span class="ident" id="2849067">End</span><span class="op" id="2849070">(</span><span class="op" id="2849071">)</span><span class="op" id="2849072">)</span><span class="op" id="2849073">.</span><span class="ident" id="2849074">Line</span>&nbsp;<span class="op" id="2849079">&gt;</span>&nbsp;<span class="ident" id="2849081">lastLine</span>&nbsp;<span class="op" id="2849090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849095">cend</span>&nbsp;<span class="op" id="2849100">=</span>&nbsp;<span class="ident" id="2849102">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849107">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849115">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849121">comments</span>&nbsp;<span class="op" id="2849130">:=</span>&nbsp;<span class="ident" id="2849133">f</span><span class="op" id="2849134">.</span><span class="ident" id="2849135">Comments</span><span class="op" id="2849143">[</span><span class="ident" id="2849144">cstart</span><span class="op" id="2849150">:</span><span class="ident" id="2849151">cend</span><span class="op" id="2849155">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849159">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849216">importComment</span>&nbsp;<span class="op" id="2849230">:=</span>&nbsp;<span class="keyword" id="2849233">map</span><span class="op" id="2849236">[</span><span class="op" id="2849237">*</span><span class="ident" id="2849238">ImportSpec</span><span class="op" id="2849248">]</span><span class="op" id="2849249">[</span><span class="op" id="2849250">]</span><span class="op" id="2849251">*</span><span class="ident" id="2849252">CommentGroup</span><span class="op" id="2849264">{</span><span class="op" id="2849265">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849268">specIndex</span>&nbsp;<span class="op" id="2849278">:=</span>&nbsp;<span class="num" id="2849281">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849284">for</span>&nbsp;<span class="ident" id="2849288">_</span><span class="op" id="2849289">,</span>&nbsp;<span class="ident" id="2849291">g</span>&nbsp;<span class="op" id="2849293">:=</span>&nbsp;<span class="keyword" id="2849296">range</span>&nbsp;<span class="ident" id="2849302">comments</span>&nbsp;<span class="op" id="2849311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849315">for</span>&nbsp;<span class="ident" id="2849319">specIndex</span><span class="op" id="2849328">+</span><span class="num" id="2849329">1</span>&nbsp;<span class="op" id="2849331">&lt;</span>&nbsp;<span class="builtinfunc" id="2849333">len</span><span class="op" id="2849336">(</span><span class="ident" id="2849337">specs</span><span class="op" id="2849342">)</span>&nbsp;<span class="op" id="2849344">&amp;&amp;</span>&nbsp;<span class="ident" id="2849347">pos</span><span class="op" id="2849350">[</span><span class="ident" id="2849351">specIndex</span><span class="op" id="2849360">+</span><span class="num" id="2849361">1</span><span class="op" id="2849362">]</span><span class="op" id="2849363">.</span><span class="ident" id="2849364">Start</span>&nbsp;<span class="op" id="2849370">&lt;=</span>&nbsp;<span class="ident" id="2849373">g</span><span class="op" id="2849374">.</span><span class="ident" id="2849375">Pos</span><span class="op" id="2849378">(</span><span class="op" id="2849379">)</span>&nbsp;<span class="op" id="2849381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849386">specIndex</span><span class="op" id="2849395">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849400">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849404">s</span>&nbsp;<span class="op" id="2849406">:=</span>&nbsp;<span class="ident" id="2849409">specs</span><span class="op" id="2849414">[</span><span class="ident" id="2849415">specIndex</span><span class="op" id="2849424">]</span><span class="op" id="2849425">.</span><span class="op" id="2849426">(</span><span class="op" id="2849427">*</span><span class="ident" id="2849428">ImportSpec</span><span class="op" id="2849438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849442">importComment</span><span class="op" id="2849455">[</span><span class="ident" id="2849456">s</span><span class="op" id="2849457">]</span>&nbsp;<span class="op" id="2849459">=</span>&nbsp;<span class="builtinfunc" id="2849461">append</span><span class="op" id="2849467">(</span><span class="ident" id="2849468">importComment</span><span class="op" id="2849481">[</span><span class="ident" id="2849482">s</span><span class="op" id="2849483">]</span><span class="op" id="2849484">,</span>&nbsp;<span class="ident" id="2849486">g</span><span class="op" id="2849487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2849490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849494">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849536">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849592">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849658">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849713">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849752">sort</span><span class="op" id="2849756">.</span><span class="ident" id="2849757">Sort</span><span class="op" id="2849761">(</span><span class="ident" id="2849762">byImportSpec</span><span class="op" id="2849774">(</span><span class="ident" id="2849775">specs</span><span class="op" id="2849780">)</span><span class="op" id="2849781">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849785">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2849840">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849871">deduped</span>&nbsp;<span class="op" id="2849879">:=</span>&nbsp;<span class="ident" id="2849882">specs</span><span class="op" id="2849887">[</span><span class="op" id="2849888">:</span><span class="num" id="2849889">0</span><span class="op" id="2849890">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849893">for</span>&nbsp;<span class="ident" id="2849897">i</span><span class="op" id="2849898">,</span>&nbsp;<span class="ident" id="2849900">s</span>&nbsp;<span class="op" id="2849902">:=</span>&nbsp;<span class="keyword" id="2849905">range</span>&nbsp;<span class="ident" id="2849911">specs</span>&nbsp;<span class="op" id="2849917">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2849921">if</span>&nbsp;<span class="ident" id="2849924">i</span>&nbsp;<span class="op" id="2849926">==</span>&nbsp;<span class="builtinfunc" id="2849929">len</span><span class="op" id="2849932">(</span><span class="ident" id="2849933">specs</span><span class="op" id="2849938">)</span><span class="op" id="2849939">-</span><span class="num" id="2849940">1</span>&nbsp;<span class="op" id="2849942">||</span>&nbsp;<span class="op" id="2849945">!</span><span class="ident" id="2849946">collapse</span><span class="op" id="2849954">(</span><span class="ident" id="2849955">s</span><span class="op" id="2849956">,</span>&nbsp;<span class="ident" id="2849958">specs</span><span class="op" id="2849963">[</span><span class="ident" id="2849964">i</span><span class="op" id="2849965">+</span><span class="num" id="2849966">1</span><span class="op" id="2849967">]</span><span class="op" id="2849968">)</span>&nbsp;<span class="op" id="2849970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2849975">deduped</span>&nbsp;<span class="op" id="2849983">=</span>&nbsp;<span class="builtinfunc" id="2849985">append</span><span class="op" id="2849991">(</span><span class="ident" id="2849992">deduped</span><span class="op" id="2849999">,</span>&nbsp;<span class="ident" id="2850001">s</span><span class="op" id="2850002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850006">}</span>&nbsp;<span class="keyword" id="2850008">else</span>&nbsp;<span class="op" id="2850013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850018">p</span>&nbsp;<span class="op" id="2850020">:=</span>&nbsp;<span class="ident" id="2850023">s</span><span class="op" id="2850024">.</span><span class="ident" id="2850025">Pos</span><span class="op" id="2850028">(</span><span class="op" id="2850029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850034">fset</span><span class="op" id="2850038">.</span><span class="ident" id="2850039">File</span><span class="op" id="2850043">(</span><span class="ident" id="2850044">p</span><span class="op" id="2850045">)</span><span class="op" id="2850046">.</span><span class="ident" id="2850047">MergeLine</span><span class="op" id="2850056">(</span><span class="ident" id="2850057">fset</span><span class="op" id="2850061">.</span><span class="ident" id="2850062">Position</span><span class="op" id="2850070">(</span><span class="ident" id="2850071">p</span><span class="op" id="2850072">)</span><span class="op" id="2850073">.</span><span class="ident" id="2850074">Line</span><span class="op" id="2850078">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850088">specs</span>&nbsp;<span class="op" id="2850094">=</span>&nbsp;<span class="ident" id="2850096">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2850106">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850135">for</span>&nbsp;<span class="ident" id="2850139">i</span><span class="op" id="2850140">,</span>&nbsp;<span class="ident" id="2850142">s</span>&nbsp;<span class="op" id="2850144">:=</span>&nbsp;<span class="keyword" id="2850147">range</span>&nbsp;<span class="ident" id="2850153">specs</span>&nbsp;<span class="op" id="2850159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850163">s</span>&nbsp;<span class="op" id="2850165">:=</span>&nbsp;<span class="ident" id="2850168">s</span><span class="op" id="2850169">.</span><span class="op" id="2850170">(</span><span class="op" id="2850171">*</span><span class="ident" id="2850172">ImportSpec</span><span class="op" id="2850182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850186">if</span>&nbsp;<span class="ident" id="2850189">s</span><span class="op" id="2850190">.</span><span class="ident" id="2850191">Name</span>&nbsp;<span class="op" id="2850196">!=</span>&nbsp;<span class="ident" id="2850199">nil</span>&nbsp;<span class="op" id="2850203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850208">s</span><span class="op" id="2850209">.</span><span class="ident" id="2850210">Name</span><span class="op" id="2850214">.</span><span class="ident" id="2850215">NamePos</span>&nbsp;<span class="op" id="2850223">=</span>&nbsp;<span class="ident" id="2850225">pos</span><span class="op" id="2850228">[</span><span class="ident" id="2850229">i</span><span class="op" id="2850230">]</span><span class="op" id="2850231">.</span><span class="ident" id="2850232">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850240">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850244">s</span><span class="op" id="2850245">.</span><span class="ident" id="2850246">Path</span><span class="op" id="2850250">.</span><span class="ident" id="2850251">ValuePos</span>&nbsp;<span class="op" id="2850260">=</span>&nbsp;<span class="ident" id="2850262">pos</span><span class="op" id="2850265">[</span><span class="ident" id="2850266">i</span><span class="op" id="2850267">]</span><span class="op" id="2850268">.</span><span class="ident" id="2850269">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850277">s</span><span class="op" id="2850278">.</span><span class="ident" id="2850279">EndPos</span>&nbsp;<span class="op" id="2850286">=</span>&nbsp;<span class="ident" id="2850288">pos</span><span class="op" id="2850291">[</span><span class="ident" id="2850292">i</span><span class="op" id="2850293">]</span><span class="op" id="2850294">.</span><span class="ident" id="2850295">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850301">for</span>&nbsp;<span class="ident" id="2850305">_</span><span class="op" id="2850306">,</span>&nbsp;<span class="ident" id="2850308">g</span>&nbsp;<span class="op" id="2850310">:=</span>&nbsp;<span class="keyword" id="2850313">range</span>&nbsp;<span class="ident" id="2850319">importComment</span><span class="op" id="2850332">[</span><span class="ident" id="2850333">s</span><span class="op" id="2850334">]</span>&nbsp;<span class="op" id="2850336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850341">for</span>&nbsp;<span class="ident" id="2850345">_</span><span class="op" id="2850346">,</span>&nbsp;<span class="ident" id="2850348">c</span>&nbsp;<span class="op" id="2850350">:=</span>&nbsp;<span class="keyword" id="2850353">range</span>&nbsp;<span class="ident" id="2850359">g</span><span class="op" id="2850360">.</span><span class="ident" id="2850361">List</span>&nbsp;<span class="op" id="2850366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850372">c</span><span class="op" id="2850373">.</span><span class="ident" id="2850374">Slash</span>&nbsp;<span class="op" id="2850380">=</span>&nbsp;<span class="ident" id="2850382">pos</span><span class="op" id="2850385">[</span><span class="ident" id="2850386">i</span><span class="op" id="2850387">]</span><span class="op" id="2850388">.</span><span class="ident" id="2850389">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850407">sort</span><span class="op" id="2850411">.</span><span class="ident" id="2850412">Sort</span><span class="op" id="2850416">(</span><span class="ident" id="2850417">byCommentPos</span><span class="op" id="2850429">(</span><span class="ident" id="2850430">comments</span><span class="op" id="2850438">)</span><span class="op" id="2850439">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850443">return</span>&nbsp;<span class="ident" id="2850450">specs</span><br>
<span class="lineno"></span><span class="op" id="2850456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2850459">type</span>&nbsp;<span class="ident" id="2850464">byImportSpec</span>&nbsp;<span class="op" id="2850477">[</span><span class="op" id="2850478">]</span><span class="ident" id="2850479">Spec</span>&nbsp;<span class="comment" id="2850484">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="2850509">func</span>&nbsp;<span class="op" id="2850514">(</span><span class="ident" id="2850515">x</span>&nbsp;<span class="ident" id="2850517">byImportSpec</span><span class="op" id="2850529">)</span>&nbsp;<span class="ident" id="2850531">Len</span><span class="op" id="2850534">(</span><span class="op" id="2850535">)</span>&nbsp;<span class="builtintype" id="2850537">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2850546">{</span>&nbsp;<span class="keyword" id="2850548">return</span>&nbsp;<span class="builtinfunc" id="2850555">len</span><span class="op" id="2850558">(</span><span class="ident" id="2850559">x</span><span class="op" id="2850560">)</span>&nbsp;<span class="op" id="2850562">}</span><br>
<span class="lineno"></span><span class="keyword" id="2850564">func</span>&nbsp;<span class="op" id="2850569">(</span><span class="ident" id="2850570">x</span>&nbsp;<span class="ident" id="2850572">byImportSpec</span><span class="op" id="2850584">)</span>&nbsp;<span class="ident" id="2850586">Swap</span><span class="op" id="2850590">(</span><span class="ident" id="2850591">i</span><span class="op" id="2850592">,</span>&nbsp;<span class="ident" id="2850594">j</span>&nbsp;<span class="builtintype" id="2850596">int</span><span class="op" id="2850599">)</span>&nbsp;<span class="op" id="2850601">{</span>&nbsp;<span class="ident" id="2850603">x</span><span class="op" id="2850604">[</span><span class="ident" id="2850605">i</span><span class="op" id="2850606">]</span><span class="op" id="2850607">,</span>&nbsp;<span class="ident" id="2850609">x</span><span class="op" id="2850610">[</span><span class="ident" id="2850611">j</span><span class="op" id="2850612">]</span>&nbsp;<span class="op" id="2850614">=</span>&nbsp;<span class="ident" id="2850616">x</span><span class="op" id="2850617">[</span><span class="ident" id="2850618">j</span><span class="op" id="2850619">]</span><span class="op" id="2850620">,</span>&nbsp;<span class="ident" id="2850622">x</span><span class="op" id="2850623">[</span><span class="ident" id="2850624">i</span><span class="op" id="2850625">]</span>&nbsp;<span class="op" id="2850627">}</span><br>
<span class="lineno"></span><span class="keyword" id="2850629">func</span>&nbsp;<span class="op" id="2850634">(</span><span class="ident" id="2850635">x</span>&nbsp;<span class="ident" id="2850637">byImportSpec</span><span class="op" id="2850649">)</span>&nbsp;<span class="ident" id="2850651">Less</span><span class="op" id="2850655">(</span><span class="ident" id="2850656">i</span><span class="op" id="2850657">,</span>&nbsp;<span class="ident" id="2850659">j</span>&nbsp;<span class="builtintype" id="2850661">int</span><span class="op" id="2850664">)</span>&nbsp;<span class="builtintype" id="2850666">bool</span>&nbsp;<span class="op" id="2850671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850674">ipath</span>&nbsp;<span class="op" id="2850680">:=</span>&nbsp;<span class="ident" id="2850683">importPath</span><span class="op" id="2850693">(</span><span class="ident" id="2850694">x</span><span class="op" id="2850695">[</span><span class="ident" id="2850696">i</span><span class="op" id="2850697">]</span><span class="op" id="2850698">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850701">jpath</span>&nbsp;<span class="op" id="2850707">:=</span>&nbsp;<span class="ident" id="2850710">importPath</span><span class="op" id="2850720">(</span><span class="ident" id="2850721">x</span><span class="op" id="2850722">[</span><span class="ident" id="2850723">j</span><span class="op" id="2850724">]</span><span class="op" id="2850725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850728">if</span>&nbsp;<span class="ident" id="2850731">ipath</span>&nbsp;<span class="op" id="2850737">!=</span>&nbsp;<span class="ident" id="2850740">jpath</span>&nbsp;<span class="op" id="2850746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850750">return</span>&nbsp;<span class="ident" id="2850757">ipath</span>&nbsp;<span class="op" id="2850763">&lt;</span>&nbsp;<span class="ident" id="2850765">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850775">iname</span>&nbsp;<span class="op" id="2850781">:=</span>&nbsp;<span class="ident" id="2850784">importName</span><span class="op" id="2850794">(</span><span class="ident" id="2850795">x</span><span class="op" id="2850796">[</span><span class="ident" id="2850797">i</span><span class="op" id="2850798">]</span><span class="op" id="2850799">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2850802">jname</span>&nbsp;<span class="op" id="2850808">:=</span>&nbsp;<span class="ident" id="2850811">importName</span><span class="op" id="2850821">(</span><span class="ident" id="2850822">x</span><span class="op" id="2850823">[</span><span class="ident" id="2850824">j</span><span class="op" id="2850825">]</span><span class="op" id="2850826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850829">if</span>&nbsp;<span class="ident" id="2850832">iname</span>&nbsp;<span class="op" id="2850838">!=</span>&nbsp;<span class="ident" id="2850841">jname</span>&nbsp;<span class="op" id="2850847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850851">return</span>&nbsp;<span class="ident" id="2850858">iname</span>&nbsp;<span class="op" id="2850864">&lt;</span>&nbsp;<span class="ident" id="2850866">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2850873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2850876">return</span>&nbsp;<span class="ident" id="2850883">importComment</span><span class="op" id="2850896">(</span><span class="ident" id="2850897">x</span><span class="op" id="2850898">[</span><span class="ident" id="2850899">i</span><span class="op" id="2850900">]</span><span class="op" id="2850901">)</span>&nbsp;<span class="op" id="2850903">&lt;</span>&nbsp;<span class="ident" id="2850905">importComment</span><span class="op" id="2850918">(</span><span class="ident" id="2850919">x</span><span class="op" id="2850920">[</span><span class="ident" id="2850921">j</span><span class="op" id="2850922">]</span><span class="op" id="2850923">)</span><br>
<span class="lineno">190</span><span class="op" id="2850925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2850928">type</span>&nbsp;<span class="ident" id="2850933">byCommentPos</span>&nbsp;<span class="op" id="2850946">[</span><span class="op" id="2850947">]</span><span class="op" id="2850948">*</span><span class="ident" id="2850949">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2850963">func</span>&nbsp;<span class="op" id="2850968">(</span><span class="ident" id="2850969">x</span>&nbsp;<span class="ident" id="2850971">byCommentPos</span><span class="op" id="2850983">)</span>&nbsp;<span class="ident" id="2850985">Len</span><span class="op" id="2850988">(</span><span class="op" id="2850989">)</span>&nbsp;<span class="builtintype" id="2850991">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2851005">{</span>&nbsp;<span class="keyword" id="2851007">return</span>&nbsp;<span class="builtinfunc" id="2851014">len</span><span class="op" id="2851017">(</span><span class="ident" id="2851018">x</span><span class="op" id="2851019">)</span>&nbsp;<span class="op" id="2851021">}</span><br>
<span class="lineno">195</span><span class="keyword" id="2851023">func</span>&nbsp;<span class="op" id="2851028">(</span><span class="ident" id="2851029">x</span>&nbsp;<span class="ident" id="2851031">byCommentPos</span><span class="op" id="2851043">)</span>&nbsp;<span class="ident" id="2851045">Swap</span><span class="op" id="2851049">(</span><span class="ident" id="2851050">i</span><span class="op" id="2851051">,</span>&nbsp;<span class="ident" id="2851053">j</span>&nbsp;<span class="builtintype" id="2851055">int</span><span class="op" id="2851058">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2851065">{</span>&nbsp;<span class="ident" id="2851067">x</span><span class="op" id="2851068">[</span><span class="ident" id="2851069">i</span><span class="op" id="2851070">]</span><span class="op" id="2851071">,</span>&nbsp;<span class="ident" id="2851073">x</span><span class="op" id="2851074">[</span><span class="ident" id="2851075">j</span><span class="op" id="2851076">]</span>&nbsp;<span class="op" id="2851078">=</span>&nbsp;<span class="ident" id="2851080">x</span><span class="op" id="2851081">[</span><span class="ident" id="2851082">j</span><span class="op" id="2851083">]</span><span class="op" id="2851084">,</span>&nbsp;<span class="ident" id="2851086">x</span><span class="op" id="2851087">[</span><span class="ident" id="2851088">i</span><span class="op" id="2851089">]</span>&nbsp;<span class="op" id="2851091">}</span><br>
<span class="lineno"></span><span class="keyword" id="2851093">func</span>&nbsp;<span class="op" id="2851098">(</span><span class="ident" id="2851099">x</span>&nbsp;<span class="ident" id="2851101">byCommentPos</span><span class="op" id="2851113">)</span>&nbsp;<span class="ident" id="2851115">Less</span><span class="op" id="2851119">(</span><span class="ident" id="2851120">i</span><span class="op" id="2851121">,</span>&nbsp;<span class="ident" id="2851123">j</span>&nbsp;<span class="builtintype" id="2851125">int</span><span class="op" id="2851128">)</span>&nbsp;<span class="builtintype" id="2851130">bool</span>&nbsp;<span class="op" id="2851135">{</span>&nbsp;<span class="keyword" id="2851137">return</span>&nbsp;<span class="ident" id="2851144">x</span><span class="op" id="2851145">[</span><span class="ident" id="2851146">i</span><span class="op" id="2851147">]</span><span class="op" id="2851148">.</span><span class="ident" id="2851149">Pos</span><span class="op" id="2851152">(</span><span class="op" id="2851153">)</span>&nbsp;<span class="op" id="2851155">&lt;</span>&nbsp;<span class="ident" id="2851157">x</span><span class="op" id="2851158">[</span><span class="ident" id="2851159">j</span><span class="op" id="2851160">]</span><span class="op" id="2851161">.</span><span class="ident" id="2851162">Pos</span><span class="op" id="2851165">(</span><span class="op" id="2851166">)</span>&nbsp;<span class="op" id="2851168">}</span>
</div>
</body>
</html>
