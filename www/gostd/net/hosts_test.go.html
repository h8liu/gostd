<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6613740">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6613795">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6613849">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6613900">package</span>&nbsp;<span class="ident" id="6613908">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613913">import</span>&nbsp;<span class="op" id="6613920">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6613923">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6613931">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6613941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613944">type</span>&nbsp;<span class="ident" id="6613949">hostTest</span>&nbsp;<span class="keyword" id="6613958">struct</span>&nbsp;<span class="op" id="6613965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6613968">host</span>&nbsp;<span class="builtintype" id="6613973">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6613981">ips</span>&nbsp;&nbsp;<span class="op" id="6613986">[</span><span class="op" id="6613987">]</span><span class="ident" id="6613988">IP</span><br>
<span class="lineno">15</span><span class="op" id="6613991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6613994">var</span>&nbsp;<span class="ident" id="6613998">hosttests</span>&nbsp;<span class="op" id="6614008">=</span>&nbsp;<span class="op" id="6614010">[</span><span class="op" id="6614011">]</span><span class="ident" id="6614012">hostTest</span><span class="op" id="6614020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614023">{</span><span class="string" id="6614024">&#34;odin&#34;</span><span class="op" id="6614030">,</span>&nbsp;<span class="op" id="6614032">[</span><span class="op" id="6614033">]</span><span class="ident" id="6614034">IP</span><span class="op" id="6614036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614040">IPv4</span><span class="op" id="6614044">(</span><span class="num" id="6614045">127</span><span class="op" id="6614048">,</span>&nbsp;<span class="num" id="6614050">0</span><span class="op" id="6614051">,</span>&nbsp;<span class="num" id="6614053">0</span><span class="op" id="6614054">,</span>&nbsp;<span class="num" id="6614056">2</span><span class="op" id="6614057">)</span><span class="op" id="6614058">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614062">IPv4</span><span class="op" id="6614066">(</span><span class="num" id="6614067">127</span><span class="op" id="6614070">,</span>&nbsp;<span class="num" id="6614072">0</span><span class="op" id="6614073">,</span>&nbsp;<span class="num" id="6614075">0</span><span class="op" id="6614076">,</span>&nbsp;<span class="num" id="6614078">3</span><span class="op" id="6614079">)</span><span class="op" id="6614080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614084">ParseIP</span><span class="op" id="6614091">(</span><span class="string" id="6614092">&#34;::2&#34;</span><span class="op" id="6614097">)</span><span class="op" id="6614098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614101">}</span><span class="op" id="6614102">}</span><span class="op" id="6614103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614106">{</span><span class="string" id="6614107">&#34;thor&#34;</span><span class="op" id="6614113">,</span>&nbsp;<span class="op" id="6614115">[</span><span class="op" id="6614116">]</span><span class="ident" id="6614117">IP</span><span class="op" id="6614119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614123">IPv4</span><span class="op" id="6614127">(</span><span class="num" id="6614128">127</span><span class="op" id="6614131">,</span>&nbsp;<span class="num" id="6614133">1</span><span class="op" id="6614134">,</span>&nbsp;<span class="num" id="6614136">1</span><span class="op" id="6614137">,</span>&nbsp;<span class="num" id="6614139">1</span><span class="op" id="6614140">)</span><span class="op" id="6614141">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614144">}</span><span class="op" id="6614145">}</span><span class="op" id="6614146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614149">{</span><span class="string" id="6614150">&#34;loki&#34;</span><span class="op" id="6614156">,</span>&nbsp;<span class="op" id="6614158">[</span><span class="op" id="6614159">]</span><span class="ident" id="6614160">IP</span><span class="op" id="6614162">{</span><span class="op" id="6614163">}</span><span class="op" id="6614164">}</span><span class="op" id="6614165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614168">{</span><span class="string" id="6614169">&#34;ullr&#34;</span><span class="op" id="6614175">,</span>&nbsp;<span class="op" id="6614177">[</span><span class="op" id="6614178">]</span><span class="ident" id="6614179">IP</span><span class="op" id="6614181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614185">IPv4</span><span class="op" id="6614189">(</span><span class="num" id="6614190">127</span><span class="op" id="6614193">,</span>&nbsp;<span class="num" id="6614195">1</span><span class="op" id="6614196">,</span>&nbsp;<span class="num" id="6614198">1</span><span class="op" id="6614199">,</span>&nbsp;<span class="num" id="6614201">2</span><span class="op" id="6614202">)</span><span class="op" id="6614203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614206">}</span><span class="op" id="6614207">}</span><span class="op" id="6614208">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614211">{</span><span class="string" id="6614212">&#34;ullrhost&#34;</span><span class="op" id="6614222">,</span>&nbsp;<span class="op" id="6614224">[</span><span class="op" id="6614225">]</span><span class="ident" id="6614226">IP</span><span class="op" id="6614228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614232">IPv4</span><span class="op" id="6614236">(</span><span class="num" id="6614237">127</span><span class="op" id="6614240">,</span>&nbsp;<span class="num" id="6614242">1</span><span class="op" id="6614243">,</span>&nbsp;<span class="num" id="6614245">1</span><span class="op" id="6614246">,</span>&nbsp;<span class="num" id="6614248">2</span><span class="op" id="6614249">)</span><span class="op" id="6614250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614253">}</span><span class="op" id="6614254">}</span><span class="op" id="6614255">,</span><br>
<span class="lineno"></span><span class="op" id="6614257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6614260">func</span>&nbsp;<span class="ident" id="6614265">TestLookupStaticHost</span><span class="op" id="6614285">(</span><span class="ident" id="6614286">t</span>&nbsp;<span class="op" id="6614288">*</span><span class="ident" id="6614289">testing</span><span class="op" id="6614296">.</span><span class="ident" id="6614297">T</span><span class="op" id="6614298">)</span>&nbsp;<span class="op" id="6614300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614303">p</span>&nbsp;<span class="op" id="6614305">:=</span>&nbsp;<span class="ident" id="6614308">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614319">hostsPath</span>&nbsp;<span class="op" id="6614329">=</span>&nbsp;<span class="string" id="6614331">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614349">for</span>&nbsp;<span class="ident" id="6614353">i</span>&nbsp;<span class="op" id="6614355">:=</span>&nbsp;<span class="num" id="6614358">0</span><span class="op" id="6614359">;</span>&nbsp;<span class="ident" id="6614361">i</span>&nbsp;<span class="op" id="6614363">&lt;</span>&nbsp;<span class="builtinfunc" id="6614365">len</span><span class="op" id="6614368">(</span><span class="ident" id="6614369">hosttests</span><span class="op" id="6614378">)</span><span class="op" id="6614379">;</span>&nbsp;<span class="ident" id="6614381">i</span><span class="op" id="6614382">++</span>&nbsp;<span class="op" id="6614385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614389">tt</span>&nbsp;<span class="op" id="6614392">:=</span>&nbsp;<span class="ident" id="6614395">hosttests</span><span class="op" id="6614404">[</span><span class="ident" id="6614405">i</span><span class="op" id="6614406">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614410">ips</span>&nbsp;<span class="op" id="6614414">:=</span>&nbsp;<span class="ident" id="6614417">lookupStaticHost</span><span class="op" id="6614433">(</span><span class="ident" id="6614434">tt</span><span class="op" id="6614436">.</span><span class="ident" id="6614437">host</span><span class="op" id="6614441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614445">if</span>&nbsp;<span class="builtinfunc" id="6614448">len</span><span class="op" id="6614451">(</span><span class="ident" id="6614452">ips</span><span class="op" id="6614455">)</span>&nbsp;<span class="op" id="6614457">!=</span>&nbsp;<span class="builtinfunc" id="6614460">len</span><span class="op" id="6614463">(</span><span class="ident" id="6614464">tt</span><span class="op" id="6614466">.</span><span class="ident" id="6614467">ips</span><span class="op" id="6614470">)</span>&nbsp;<span class="op" id="6614472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614477">t</span><span class="op" id="6614478">.</span><span class="ident" id="6614479">Errorf</span><span class="op" id="6614485">(</span><span class="string" id="6614486">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6614512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6614518">len</span><span class="op" id="6614521">(</span><span class="ident" id="6614522">ips</span><span class="op" id="6614525">)</span><span class="op" id="6614526">,</span>&nbsp;<span class="builtinfunc" id="6614528">len</span><span class="op" id="6614531">(</span><span class="ident" id="6614532">tt</span><span class="op" id="6614534">.</span><span class="ident" id="6614535">ips</span><span class="op" id="6614538">)</span><span class="op" id="6614539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614544">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614559">for</span>&nbsp;<span class="ident" id="6614563">k</span><span class="op" id="6614564">,</span>&nbsp;<span class="ident" id="6614566">v</span>&nbsp;<span class="op" id="6614568">:=</span>&nbsp;<span class="keyword" id="6614571">range</span>&nbsp;<span class="ident" id="6614577">ips</span>&nbsp;<span class="op" id="6614581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614586">if</span>&nbsp;<span class="ident" id="6614589">tt</span><span class="op" id="6614591">.</span><span class="ident" id="6614592">ips</span><span class="op" id="6614595">[</span><span class="ident" id="6614596">k</span><span class="op" id="6614597">]</span><span class="op" id="6614598">.</span><span class="ident" id="6614599">String</span><span class="op" id="6614605">(</span><span class="op" id="6614606">)</span>&nbsp;<span class="op" id="6614608">!=</span>&nbsp;<span class="ident" id="6614611">v</span>&nbsp;<span class="op" id="6614613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614619">t</span><span class="op" id="6614620">.</span><span class="ident" id="6614621">Errorf</span><span class="op" id="6614627">(</span><span class="string" id="6614628">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6614664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614671">tt</span><span class="op" id="6614673">.</span><span class="ident" id="6614674">host</span><span class="op" id="6614678">,</span>&nbsp;<span class="ident" id="6614680">v</span><span class="op" id="6614681">,</span>&nbsp;<span class="ident" id="6614683">tt</span><span class="op" id="6614685">.</span><span class="ident" id="6614686">ips</span><span class="op" id="6614689">[</span><span class="ident" id="6614690">k</span><span class="op" id="6614691">]</span><span class="op" id="6614692">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6614704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614707">hostsPath</span>&nbsp;<span class="op" id="6614717">=</span>&nbsp;<span class="ident" id="6614719">p</span><br>
<span class="lineno"></span><span class="op" id="6614721">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6614724">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6614778">func</span>&nbsp;<span class="ident" id="6614783">TestSingleLineHostsFile</span><span class="op" id="6614806">(</span><span class="ident" id="6614807">t</span>&nbsp;<span class="op" id="6614809">*</span><span class="ident" id="6614810">testing</span><span class="op" id="6614817">.</span><span class="ident" id="6614818">T</span><span class="op" id="6614819">)</span>&nbsp;<span class="op" id="6614821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614824">p</span>&nbsp;<span class="op" id="6614826">:=</span>&nbsp;<span class="ident" id="6614829">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614840">hostsPath</span>&nbsp;<span class="op" id="6614850">=</span>&nbsp;<span class="string" id="6614852">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614882">ips</span>&nbsp;<span class="op" id="6614886">:=</span>&nbsp;<span class="ident" id="6614889">lookupStaticHost</span><span class="op" id="6614905">(</span><span class="string" id="6614906">&#34;odin&#34;</span><span class="op" id="6614912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6614915">if</span>&nbsp;<span class="builtinfunc" id="6614918">len</span><span class="op" id="6614921">(</span><span class="ident" id="6614922">ips</span><span class="op" id="6614925">)</span>&nbsp;<span class="op" id="6614927">!=</span>&nbsp;<span class="num" id="6614930">1</span>&nbsp;<span class="op" id="6614932">||</span>&nbsp;<span class="ident" id="6614935">ips</span><span class="op" id="6614938">[</span><span class="num" id="6614939">0</span><span class="op" id="6614940">]</span>&nbsp;<span class="op" id="6614942">!=</span>&nbsp;<span class="string" id="6614945">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6614957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6614961">t</span><span class="op" id="6614962">.</span><span class="ident" id="6614963">Errorf</span><span class="op" id="6614969">(</span><span class="string" id="6614970">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6615002">,</span>&nbsp;<span class="ident" id="6615004">ips</span><span class="op" id="6615007">,</span>&nbsp;<span class="op" id="6615009">[</span><span class="op" id="6615010">]</span><span class="builtintype" id="6615011">string</span><span class="op" id="6615017">{</span><span class="string" id="6615018">&#34;127.0.0.2&#34;</span><span class="op" id="6615029">}</span><span class="op" id="6615030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6615033">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615037">hostsPath</span>&nbsp;<span class="op" id="6615047">=</span>&nbsp;<span class="ident" id="6615049">p</span><br>
<span class="lineno"></span><span class="op" id="6615051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6615054">func</span>&nbsp;<span class="ident" id="6615059">TestLookupHost</span><span class="op" id="6615073">(</span><span class="ident" id="6615074">t</span>&nbsp;<span class="op" id="6615076">*</span><span class="ident" id="6615077">testing</span><span class="op" id="6615084">.</span><span class="ident" id="6615085">T</span><span class="op" id="6615086">)</span>&nbsp;<span class="op" id="6615088">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6615091">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6615150">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6615208">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6615261">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615285">addrs</span><span class="op" id="6615290">,</span>&nbsp;<span class="ident" id="6615292">_</span>&nbsp;<span class="op" id="6615294">:=</span>&nbsp;<span class="ident" id="6615297">LookupHost</span><span class="op" id="6615307">(</span><span class="string" id="6615308">&#34;localhost&#34;</span><span class="op" id="6615319">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615322">sort</span><span class="op" id="6615326">.</span><span class="ident" id="6615327">Strings</span><span class="op" id="6615334">(</span><span class="ident" id="6615335">addrs</span><span class="op" id="6615340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6615343">for</span>&nbsp;<span class="ident" id="6615347">i</span>&nbsp;<span class="op" id="6615349">:=</span>&nbsp;<span class="num" id="6615352">0</span><span class="op" id="6615353">;</span>&nbsp;<span class="ident" id="6615355">i</span><span class="op" id="6615356">+</span><span class="num" id="6615357">1</span>&nbsp;<span class="op" id="6615359">&lt;</span>&nbsp;<span class="builtinfunc" id="6615361">len</span><span class="op" id="6615364">(</span><span class="ident" id="6615365">addrs</span><span class="op" id="6615370">)</span><span class="op" id="6615371">;</span>&nbsp;<span class="ident" id="6615373">i</span><span class="op" id="6615374">++</span>&nbsp;<span class="op" id="6615377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6615381">if</span>&nbsp;<span class="ident" id="6615384">addrs</span><span class="op" id="6615389">[</span><span class="ident" id="6615390">i</span><span class="op" id="6615391">]</span>&nbsp;<span class="op" id="6615393">==</span>&nbsp;<span class="ident" id="6615396">addrs</span><span class="op" id="6615401">[</span><span class="ident" id="6615402">i</span><span class="op" id="6615403">+</span><span class="num" id="6615404">1</span><span class="op" id="6615405">]</span>&nbsp;<span class="op" id="6615407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6615412">t</span><span class="op" id="6615413">.</span><span class="ident" id="6615414">Fatalf</span><span class="op" id="6615420">(</span><span class="string" id="6615421">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6615478">,</span>&nbsp;<span class="ident" id="6615480">addrs</span><span class="op" id="6615485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6615489">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6615492">}</span><br>
<span class="lineno"></span><span class="op" id="6615494">}</span>
</div>
</body>
</html>
