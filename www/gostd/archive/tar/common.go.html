<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html" class="current">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5609907">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5609962">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5610016">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5610067">//&nbsp;Package&nbsp;tar&nbsp;implements&nbsp;access&nbsp;to&nbsp;tar&nbsp;archives.</span><br>
<span class="lineno"></span><span class="comment" id="5610117">//&nbsp;It&nbsp;aims&nbsp;to&nbsp;cover&nbsp;most&nbsp;of&nbsp;the&nbsp;variations,&nbsp;including&nbsp;those&nbsp;produced</span><br>
<span class="lineno"></span><span class="comment" id="5610186">//&nbsp;by&nbsp;GNU&nbsp;and&nbsp;BSD&nbsp;tars.</span><br>
<span class="lineno"></span><span class="comment" id="5610210">//</span><br>
<span class="lineno"></span><span class="comment" id="5610213">//&nbsp;References:</span><br>
<span class="lineno">10</span><span class="comment" id="5610228">//&nbsp;&nbsp;&nbsp;http://www.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=5</span><br>
<span class="lineno"></span><span class="comment" id="5610288">//&nbsp;&nbsp;&nbsp;http://www.gnu.org/software/tar/manual/html_node/Standard.html</span><br>
<span class="lineno"></span><span class="comment" id="5610356">//&nbsp;&nbsp;&nbsp;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html</span><br>
<span class="lineno"></span><span class="keyword" id="5610428">package</span>&nbsp;<span class="ident" id="5610436">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5610441">import</span>&nbsp;<span class="op" id="5610448">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610451">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610460">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610470">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610477">&#34;os&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610483">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5610491">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5610498">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5610501">const</span>&nbsp;<span class="op" id="5610507">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610510">blockSize</span>&nbsp;<span class="op" id="5610520">=</span>&nbsp;<span class="num" id="5610522">512</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610528">//&nbsp;Types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610538">TypeReg</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610556">=</span>&nbsp;<span class="string" id="5610558">&#39;0&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610565">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610582">TypeRegA</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610600">=</span>&nbsp;<span class="string" id="5610602">&#39;\x00&#39;</span>&nbsp;<span class="comment" id="5610609">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610626">TypeLink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610644">=</span>&nbsp;<span class="string" id="5610646">&#39;1&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610653">//&nbsp;hard&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610667">TypeSymlink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610685">=</span>&nbsp;<span class="string" id="5610687">&#39;2&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610694">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610712">TypeChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610730">=</span>&nbsp;<span class="string" id="5610732">&#39;3&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610739">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610765">TypeBlock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610783">=</span>&nbsp;<span class="string" id="5610785">&#39;4&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610792">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610814">TypeDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610832">=</span>&nbsp;<span class="string" id="5610834">&#39;5&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610841">//&nbsp;directory</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610855">TypeFifo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610873">=</span>&nbsp;<span class="string" id="5610875">&#39;6&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610882">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610896">TypeCont</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610914">=</span>&nbsp;<span class="string" id="5610916">&#39;7&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610923">//&nbsp;reserved</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610936">TypeXHeader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5610954">=</span>&nbsp;<span class="string" id="5610956">&#39;x&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5610963">//&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5610983">TypeXGlobalHeader</span>&nbsp;<span class="op" id="5611001">=</span>&nbsp;<span class="string" id="5611003">&#39;g&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611010">//&nbsp;global&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611037">TypeGNULongName</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5611055">=</span>&nbsp;<span class="string" id="5611057">&#39;L&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611064">//&nbsp;Next&nbsp;file&nbsp;has&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611094">TypeGNULongLink</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5611112">=</span>&nbsp;<span class="string" id="5611114">&#39;K&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611121">//&nbsp;Next&nbsp;file&nbsp;symlinks&nbsp;to&nbsp;a&nbsp;file&nbsp;w/&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611169">TypeGNUSparse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5611187">=</span>&nbsp;<span class="string" id="5611189">&#39;S&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611196">//&nbsp;sparse&nbsp;file</span><br>
<span class="lineno"></span><span class="op" id="5611211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5611214">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;a&nbsp;single&nbsp;header&nbsp;in&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno">45</span><span class="comment" id="5611271">//&nbsp;Some&nbsp;fields&nbsp;may&nbsp;not&nbsp;be&nbsp;populated.</span><br>
<span class="lineno"></span><span class="keyword" id="5611308">type</span>&nbsp;<span class="ident" id="5611313">Header</span>&nbsp;<span class="keyword" id="5611320">struct</span>&nbsp;<span class="op" id="5611327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611330">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611341">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611351">//&nbsp;name&nbsp;of&nbsp;header&nbsp;file&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611381">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611392">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611402">//&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611431">Uid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611442">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611452">//&nbsp;user&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611473">Gid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611484">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611494">//&nbsp;group&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611516">Size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611527">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611537">//&nbsp;length&nbsp;in&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611557">ModTime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611568"><a href="/gostd/archive/tar/common.go.html#5610491">time</a></span><span class="op" id="5611572">.</span><span class="ident" id="5611573"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="comment" id="5611578">//&nbsp;modified&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611596">Typeflag</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611607">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611617">//&nbsp;type&nbsp;of&nbsp;header&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611642">Linkname</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611653">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611663">//&nbsp;target&nbsp;name&nbsp;of&nbsp;link</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611687">Uname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611698">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611708">//&nbsp;user&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611731">Gname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611742">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611752">//&nbsp;group&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611776">Devmajor</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611787">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611797">//&nbsp;major&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611843">Devminor</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5611854">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5611864">//&nbsp;minor&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611910">AccessTime</span>&nbsp;<span class="ident" id="5611921"><a href="/gostd/archive/tar/common.go.html#5610491">time</a></span><span class="op" id="5611925">.</span><span class="ident" id="5611926"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="comment" id="5611931">//&nbsp;access&nbsp;time</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611947">ChangeTime</span>&nbsp;<span class="ident" id="5611958"><a href="/gostd/archive/tar/common.go.html#5610491">time</a></span><span class="op" id="5611962">.</span><span class="ident" id="5611963"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="comment" id="5611968">//&nbsp;status&nbsp;change&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5611991">Xattrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5612002">map</span><span class="op" id="5612005">[</span><span class="builtintype" id="5612006">string</span><span class="op" id="5612012">]</span><span class="builtintype" id="5612013">string</span><br>
<span class="lineno"></span><span class="op" id="5612020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5612023">//&nbsp;File&nbsp;name&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno">65</span><span class="keyword" id="5612065">const</span>&nbsp;<span class="op" id="5612071">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5612074">fileNameSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5612093">=</span>&nbsp;<span class="num" id="5612095">100</span>&nbsp;<span class="comment" id="5612099">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;a&nbsp;standard&nbsp;tar&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5612151">fileNamePrefixSize</span>&nbsp;<span class="op" id="5612170">=</span>&nbsp;<span class="num" id="5612172">155</span>&nbsp;<span class="comment" id="5612176">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;ustar&nbsp;extension&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="op" id="5612220">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="5612223">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;Header.</span><br>
<span class="lineno"></span><span class="keyword" id="5612274">func</span>&nbsp;<span class="op" id="5612279">(</span><span class="ident" id="5612280">h</span>&nbsp;<span class="op" id="5612282">*</span><span class="ident" id="5612283"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5612289">)</span>&nbsp;<span class="ident" id="5612291">FileInfo</span><span class="op" id="5612299">(</span><span class="op" id="5612300">)</span>&nbsp;<span class="ident" id="5612302"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5612304">.</span><span class="ident" id="5612305"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span>&nbsp;<span class="op" id="5612314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5612317">return</span>&nbsp;<span class="ident" id="5612324"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612338">{</span><span class="ident" id="5612339"><a href="/gostd/archive/tar/common.go.html#5612280">h</a></span><span class="op" id="5612340">}</span><br>
<span class="lineno"></span><span class="op" id="5612342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5612345">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5612387">type</span>&nbsp;<span class="ident" id="5612392">headerFileInfo</span>&nbsp;<span class="keyword" id="5612407">struct</span>&nbsp;<span class="op" id="5612414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5612417">h</span>&nbsp;<span class="op" id="5612419">*</span><span class="ident" id="5612420"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><br>
<span class="lineno"></span><span class="op" id="5612427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="5612430">func</span>&nbsp;<span class="op" id="5612435">(</span><span class="ident" id="5612436">fi</span>&nbsp;<span class="ident" id="5612439"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612453">)</span>&nbsp;<span class="ident" id="5612455">Size</span><span class="op" id="5612459">(</span><span class="op" id="5612460">)</span>&nbsp;<span class="builtintype" id="5612462">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5612475">{</span>&nbsp;<span class="keyword" id="5612477">return</span>&nbsp;<span class="ident" id="5612484"><a href="/gostd/archive/tar/common.go.html#5612436">fi</a></span><span class="op" id="5612486">.</span><span class="ident" id="5612487"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5612488">.</span><span class="ident" id="5612489"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5612494">}</span><br>
<span class="lineno"></span><span class="keyword" id="5612496">func</span>&nbsp;<span class="op" id="5612501">(</span><span class="ident" id="5612502">fi</span>&nbsp;<span class="ident" id="5612505"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612519">)</span>&nbsp;<span class="ident" id="5612521">IsDir</span><span class="op" id="5612526">(</span><span class="op" id="5612527">)</span>&nbsp;<span class="builtintype" id="5612529">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5612541">{</span>&nbsp;<span class="keyword" id="5612543">return</span>&nbsp;<span class="ident" id="5612550"><a href="/gostd/archive/tar/common.go.html#5612502">fi</a></span><span class="op" id="5612552">.</span><span class="ident" id="5612553"><a href="/gostd/archive/tar/common.go.html#5612973">Mode</a></span><span class="op" id="5612557">(</span><span class="op" id="5612558">)</span><span class="op" id="5612559">.</span><span class="ident" id="5612560"><a href="/gostd/os/types.go.html#2475152">IsDir</a></span><span class="op" id="5612565">(</span><span class="op" id="5612566">)</span>&nbsp;<span class="op" id="5612568">}</span><br>
<span class="lineno"></span><span class="keyword" id="5612570">func</span>&nbsp;<span class="op" id="5612575">(</span><span class="ident" id="5612576">fi</span>&nbsp;<span class="ident" id="5612579"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612593">)</span>&nbsp;<span class="ident" id="5612595">ModTime</span><span class="op" id="5612602">(</span><span class="op" id="5612603">)</span>&nbsp;<span class="ident" id="5612605"><a href="/gostd/archive/tar/common.go.html#5610491">time</a></span><span class="op" id="5612609">.</span><span class="ident" id="5612610"><a href="/gostd/time/time.go.html#2722087">Time</a></span>&nbsp;<span class="op" id="5612615">{</span>&nbsp;<span class="keyword" id="5612617">return</span>&nbsp;<span class="ident" id="5612624"><a href="/gostd/archive/tar/common.go.html#5612576">fi</a></span><span class="op" id="5612626">.</span><span class="ident" id="5612627"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5612628">.</span><span class="ident" id="5612629"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span>&nbsp;<span class="op" id="5612637">}</span><br>
<span class="lineno"></span><span class="keyword" id="5612639">func</span>&nbsp;<span class="op" id="5612644">(</span><span class="ident" id="5612645">fi</span>&nbsp;<span class="ident" id="5612648"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612662">)</span>&nbsp;<span class="ident" id="5612664">Sys</span><span class="op" id="5612667">(</span><span class="op" id="5612668">)</span>&nbsp;<span class="keyword" id="5612670">interface</span><span class="op" id="5612679">{</span><span class="op" id="5612680">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5612684">{</span>&nbsp;<span class="keyword" id="5612686">return</span>&nbsp;<span class="ident" id="5612693"><a href="/gostd/archive/tar/common.go.html#5612645">fi</a></span><span class="op" id="5612695">.</span><span class="ident" id="5612696"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span>&nbsp;<span class="op" id="5612698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="5612701">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5612744">func</span>&nbsp;<span class="op" id="5612749">(</span><span class="ident" id="5612750">fi</span>&nbsp;<span class="ident" id="5612753"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612767">)</span>&nbsp;<span class="ident" id="5612769">Name</span><span class="op" id="5612773">(</span><span class="op" id="5612774">)</span>&nbsp;<span class="builtintype" id="5612776">string</span>&nbsp;<span class="op" id="5612783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5612786">if</span>&nbsp;<span class="ident" id="5612789"><a href="/gostd/archive/tar/common.go.html#5612750">fi</a></span><span class="op" id="5612791">.</span><span class="ident" id="5612792"><a href="/gostd/archive/tar/common.go.html#5612521">IsDir</a></span><span class="op" id="5612797">(</span><span class="op" id="5612798">)</span>&nbsp;<span class="op" id="5612800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5612804">return</span>&nbsp;<span class="ident" id="5612811"><a href="/gostd/archive/tar/common.go.html#5610483">path</a></span><span class="op" id="5612815">.</span><span class="ident" id="5612816"><a href="/gostd/path/path.go.html#3924660">Base</a></span><span class="op" id="5612820">(</span><span class="ident" id="5612821"><a href="/gostd/archive/tar/common.go.html#5610483">path</a></span><span class="op" id="5612825">.</span><span class="ident" id="5612826"><a href="/gostd/path/path.go.html#3922001">Clean</a></span><span class="op" id="5612831">(</span><span class="ident" id="5612832"><a href="/gostd/archive/tar/common.go.html#5612750">fi</a></span><span class="op" id="5612834">.</span><span class="ident" id="5612835"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5612836">.</span><span class="ident" id="5612837"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="5612841">)</span><span class="op" id="5612842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5612845">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5612848">return</span>&nbsp;<span class="ident" id="5612855"><a href="/gostd/archive/tar/common.go.html#5610483">path</a></span><span class="op" id="5612859">.</span><span class="ident" id="5612860"><a href="/gostd/path/path.go.html#3924660">Base</a></span><span class="op" id="5612864">(</span><span class="ident" id="5612865"><a href="/gostd/archive/tar/common.go.html#5612750">fi</a></span><span class="op" id="5612867">.</span><span class="ident" id="5612868"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5612869">.</span><span class="ident" id="5612870"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="5612874">)</span><br>
<span class="lineno"></span><span class="op" id="5612876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5612879">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;headerFileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5612948">func</span>&nbsp;<span class="op" id="5612953">(</span><span class="ident" id="5612954">fi</span>&nbsp;<span class="ident" id="5612957"><a href="/gostd/archive/tar/common.go.html#5612392">headerFileInfo</a></span><span class="op" id="5612971">)</span>&nbsp;<span class="ident" id="5612973">Mode</span><span class="op" id="5612977">(</span><span class="op" id="5612978">)</span>&nbsp;<span class="op" id="5612980">(</span><span class="ident" id="5612981">mode</span>&nbsp;<span class="ident" id="5612986"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5612988">.</span><span class="ident" id="5612989"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5612997">)</span>&nbsp;<span class="op" id="5612999">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613002">//&nbsp;Set&nbsp;file&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613032"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613037">=</span>&nbsp;<span class="ident" id="5613039"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613041">.</span><span class="ident" id="5613042"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5613050">(</span><span class="ident" id="5613051"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613053">.</span><span class="ident" id="5613054"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613055">.</span><span class="ident" id="5613056"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5613060">)</span><span class="op" id="5613061">.</span><span class="ident" id="5613062"><a href="/gostd/os/types.go.html#2475432">Perm</a></span><span class="op" id="5613066">(</span><span class="op" id="5613067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613071">//&nbsp;Set&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613111">if</span>&nbsp;<span class="ident" id="5613114"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613116">.</span><span class="ident" id="5613117"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613118">.</span><span class="ident" id="5613119"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5613123">&amp;</span><span class="ident" id="5613124"><a href="/gostd/archive/tar/common.go.html#5614423">c_ISUID</a></span>&nbsp;<span class="op" id="5613132">!=</span>&nbsp;<span class="num" id="5613135">0</span>&nbsp;<span class="op" id="5613137">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613141">//&nbsp;setuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613153"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613158">|=</span>&nbsp;<span class="ident" id="5613161"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613163">.</span><span class="ident" id="5613164"><a href="/gostd/os/types.go.html#2474149">ModeSetuid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613179">if</span>&nbsp;<span class="ident" id="5613182"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613184">.</span><span class="ident" id="5613185"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613186">.</span><span class="ident" id="5613187"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5613191">&amp;</span><span class="ident" id="5613192"><a href="/gostd/archive/tar/common.go.html#5614454">c_ISGID</a></span>&nbsp;<span class="op" id="5613200">!=</span>&nbsp;<span class="num" id="5613203">0</span>&nbsp;<span class="op" id="5613205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613209">//&nbsp;setgid</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613221"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613226">|=</span>&nbsp;<span class="ident" id="5613229"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613231">.</span><span class="ident" id="5613232"><a href="/gostd/os/types.go.html#2474210">ModeSetgid</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613244">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613247">if</span>&nbsp;<span class="ident" id="5613250"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613252">.</span><span class="ident" id="5613253"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613254">.</span><span class="ident" id="5613255"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5613259">&amp;</span><span class="ident" id="5613260"><a href="/gostd/archive/tar/common.go.html#5614485">c_ISVTX</a></span>&nbsp;<span class="op" id="5613268">!=</span>&nbsp;<span class="num" id="5613271">0</span>&nbsp;<span class="op" id="5613273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613277">//&nbsp;sticky</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613289"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613294">|=</span>&nbsp;<span class="ident" id="5613297"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613299">.</span><span class="ident" id="5613300"><a href="/gostd/os/types.go.html#2474371">ModeSticky</a></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613316">//&nbsp;Set&nbsp;file&nbsp;mode&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613340">//&nbsp;clear&nbsp;perm,&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613388">m</span>&nbsp;<span class="op" id="5613390">:=</span>&nbsp;<span class="ident" id="5613393"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613395">.</span><span class="ident" id="5613396"><a href="/gostd/os/types.go.html#2473113">FileMode</a></span><span class="op" id="5613404">(</span><span class="ident" id="5613405"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613407">.</span><span class="ident" id="5613408"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613409">.</span><span class="ident" id="5613410"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5613414">)</span>&nbsp;<span class="op" id="5613416">&amp;^</span>&nbsp;<span class="num" id="5613419">07777</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613426">if</span>&nbsp;<span class="ident" id="5613429"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613431">==</span>&nbsp;<span class="ident" id="5613434"><a href="/gostd/archive/tar/common.go.html#5614531">c_ISDIR</a></span>&nbsp;<span class="op" id="5613442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613446">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613461"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613466">|=</span>&nbsp;<span class="ident" id="5613469"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613471">.</span><span class="ident" id="5613472"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613484">if</span>&nbsp;<span class="ident" id="5613487"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613489">==</span>&nbsp;<span class="ident" id="5613492"><a href="/gostd/archive/tar/common.go.html#5614564">c_ISFIFO</a></span>&nbsp;<span class="op" id="5613501">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613505">//&nbsp;named&nbsp;pipe&nbsp;(FIFO)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613528"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613533">|=</span>&nbsp;<span class="ident" id="5613536"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613538">.</span><span class="ident" id="5613539"><a href="/gostd/os/types.go.html#2474004">ModeNamedPipe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613557">if</span>&nbsp;<span class="ident" id="5613560"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613562">==</span>&nbsp;<span class="ident" id="5613565"><a href="/gostd/archive/tar/common.go.html#5614628">c_ISLNK</a></span>&nbsp;<span class="op" id="5613573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613577">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613596"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613601">|=</span>&nbsp;<span class="ident" id="5613604"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613606">.</span><span class="ident" id="5613607"><a href="/gostd/os/types.go.html#2473870">ModeSymlink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613623">if</span>&nbsp;<span class="ident" id="5613626"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613628">==</span>&nbsp;<span class="ident" id="5613631"><a href="/gostd/archive/tar/common.go.html#5614665">c_ISBLK</a></span>&nbsp;<span class="op" id="5613639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613643">//&nbsp;device&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613660"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613665">|=</span>&nbsp;<span class="ident" id="5613668"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613670">.</span><span class="ident" id="5613671"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613686">if</span>&nbsp;<span class="ident" id="5613689"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613691">==</span>&nbsp;<span class="ident" id="5613694"><a href="/gostd/archive/tar/common.go.html#5614707">c_ISCHR</a></span>&nbsp;<span class="op" id="5613702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613706">//&nbsp;Unix&nbsp;character&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613733"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613738">|=</span>&nbsp;<span class="ident" id="5613741"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613743">.</span><span class="ident" id="5613744"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613757"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613762">|=</span>&nbsp;<span class="ident" id="5613765"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613767">.</span><span class="ident" id="5613768"><a href="/gostd/os/types.go.html#2474271">ModeCharDevice</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613787">if</span>&nbsp;<span class="ident" id="5613790"><a href="/gostd/archive/tar/common.go.html#5613388">m</a></span>&nbsp;<span class="op" id="5613792">==</span>&nbsp;<span class="ident" id="5613795"><a href="/gostd/archive/tar/common.go.html#5614753">c_ISSOCK</a></span>&nbsp;<span class="op" id="5613804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613808">//&nbsp;Unix&nbsp;domain&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613832"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613837">|=</span>&nbsp;<span class="ident" id="5613840"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613842">.</span><span class="ident" id="5613843"><a href="/gostd/os/types.go.html#2474076">ModeSocket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5613855">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613859">switch</span>&nbsp;<span class="ident" id="5613866"><a href="/gostd/archive/tar/common.go.html#5612954">fi</a></span><span class="op" id="5613868">.</span><span class="ident" id="5613869"><a href="/gostd/archive/tar/common.go.html#5612417">h</a></span><span class="op" id="5613870">.</span><span class="ident" id="5613871"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5613880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613883">case</span>&nbsp;<span class="ident" id="5613888"><a href="/gostd/archive/tar/common.go.html#5610626">TypeLink</a></span><span class="op" id="5613896">,</span>&nbsp;<span class="ident" id="5613898"><a href="/gostd/archive/tar/common.go.html#5610667">TypeSymlink</a></span><span class="op" id="5613909">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613913">//&nbsp;hard&nbsp;link,&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5613943"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5613948">|=</span>&nbsp;<span class="ident" id="5613951"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5613953">.</span><span class="ident" id="5613954"><a href="/gostd/os/types.go.html#2473870">ModeSymlink</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5613967">case</span>&nbsp;<span class="ident" id="5613972"><a href="/gostd/archive/tar/common.go.html#5610712">TypeChar</a></span><span class="op" id="5613980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5613984">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614011"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5614016">|=</span>&nbsp;<span class="ident" id="5614019"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614021">.</span><span class="ident" id="5614022"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614035"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5614040">|=</span>&nbsp;<span class="ident" id="5614043"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614045">.</span><span class="ident" id="5614046"><a href="/gostd/os/types.go.html#2474271">ModeCharDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5614062">case</span>&nbsp;<span class="ident" id="5614067"><a href="/gostd/archive/tar/common.go.html#5610765">TypeBlock</a></span><span class="op" id="5614076">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5614080">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614103"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5614108">|=</span>&nbsp;<span class="ident" id="5614111"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614113">.</span><span class="ident" id="5614114"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5614126">case</span>&nbsp;<span class="ident" id="5614131"><a href="/gostd/archive/tar/common.go.html#5610814">TypeDir</a></span><span class="op" id="5614138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5614142">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614157"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5614162">|=</span>&nbsp;<span class="ident" id="5614165"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614167">.</span><span class="ident" id="5614168"><a href="/gostd/os/types.go.html#2473582">ModeDir</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5614177">case</span>&nbsp;<span class="ident" id="5614182"><a href="/gostd/archive/tar/common.go.html#5610855">TypeFifo</a></span><span class="op" id="5614190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5614194">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614209"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span>&nbsp;<span class="op" id="5614214">|=</span>&nbsp;<span class="ident" id="5614217"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614219">.</span><span class="ident" id="5614220"><a href="/gostd/os/types.go.html#2474004">ModeNamedPipe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5614235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5614239">return</span>&nbsp;<span class="ident" id="5614246"><a href="/gostd/archive/tar/common.go.html#5612981">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5614251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5614254">//&nbsp;sysStat,&nbsp;if&nbsp;non-nil,&nbsp;populates&nbsp;h&nbsp;from&nbsp;system-dependent&nbsp;fields&nbsp;of&nbsp;fi.</span><br>
<span class="lineno"></span><span class="keyword" id="5614326">var</span>&nbsp;<span class="ident" id="5614330">sysStat</span>&nbsp;<span class="keyword" id="5614338">func</span><span class="op" id="5614342">(</span><span class="ident" id="5614343">fi</span>&nbsp;<span class="ident" id="5614346"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5614348">.</span><span class="ident" id="5614349"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5614357">,</span>&nbsp;<span class="ident" id="5614359">h</span>&nbsp;<span class="op" id="5614361">*</span><span class="ident" id="5614362"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5614368">)</span>&nbsp;<span class="builtintype" id="5614370">error</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="5614377">//&nbsp;Mode&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="5614414">const</span>&nbsp;<span class="op" id="5614420">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614423">c_ISUID</span>&nbsp;&nbsp;<span class="op" id="5614432">=</span>&nbsp;<span class="num" id="5614434">04000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5614442">//&nbsp;Set&nbsp;uid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614454">c_ISGID</span>&nbsp;&nbsp;<span class="op" id="5614463">=</span>&nbsp;<span class="num" id="5614465">02000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5614473">//&nbsp;Set&nbsp;gid</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614485">c_ISVTX</span>&nbsp;&nbsp;<span class="op" id="5614494">=</span>&nbsp;<span class="num" id="5614496">01000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5614504">//&nbsp;Save&nbsp;text&nbsp;(sticky&nbsp;bit)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614531">c_ISDIR</span>&nbsp;&nbsp;<span class="op" id="5614540">=</span>&nbsp;<span class="num" id="5614542">040000</span>&nbsp;&nbsp;<span class="comment" id="5614550">//&nbsp;Directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614564">c_ISFIFO</span>&nbsp;<span class="op" id="5614573">=</span>&nbsp;<span class="num" id="5614575">010000</span>&nbsp;&nbsp;<span class="comment" id="5614583">//&nbsp;FIFO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614592">c_ISREG</span>&nbsp;&nbsp;<span class="op" id="5614601">=</span>&nbsp;<span class="num" id="5614603">0100000</span>&nbsp;<span class="comment" id="5614611">//&nbsp;Regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614628">c_ISLNK</span>&nbsp;&nbsp;<span class="op" id="5614637">=</span>&nbsp;<span class="num" id="5614639">0120000</span>&nbsp;<span class="comment" id="5614647">//&nbsp;Symbolic&nbsp;link</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614665">c_ISBLK</span>&nbsp;&nbsp;<span class="op" id="5614674">=</span>&nbsp;<span class="num" id="5614676">060000</span>&nbsp;&nbsp;<span class="comment" id="5614684">//&nbsp;Block&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614707">c_ISCHR</span>&nbsp;&nbsp;<span class="op" id="5614716">=</span>&nbsp;<span class="num" id="5614718">020000</span>&nbsp;&nbsp;<span class="comment" id="5614726">//&nbsp;Character&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614753">c_ISSOCK</span>&nbsp;<span class="op" id="5614762">=</span>&nbsp;<span class="num" id="5614764">0140000</span>&nbsp;<span class="comment" id="5614772">//&nbsp;Socket</span><br>
<span class="lineno"></span><span class="op" id="5614782">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="5614785">//&nbsp;Keywords&nbsp;for&nbsp;the&nbsp;PAX&nbsp;Extended&nbsp;Header</span><br>
<span class="lineno"></span><span class="keyword" id="5614825">const</span>&nbsp;<span class="op" id="5614831">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614834">paxAtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5614846">=</span>&nbsp;<span class="string" id="5614848">&#34;atime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614857">paxCharset</span>&nbsp;&nbsp;<span class="op" id="5614869">=</span>&nbsp;<span class="string" id="5614871">&#34;charset&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614882">paxComment</span>&nbsp;&nbsp;<span class="op" id="5614894">=</span>&nbsp;<span class="string" id="5614896">&#34;comment&#34;</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614907">paxCtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5614919">=</span>&nbsp;<span class="string" id="5614921">&#34;ctime&#34;</span>&nbsp;<span class="comment" id="5614929">//&nbsp;please&nbsp;note&nbsp;that&nbsp;ctime&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;pax&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5614983">paxGid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5614995">=</span>&nbsp;<span class="string" id="5614997">&#34;gid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615004">paxGname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615016">=</span>&nbsp;<span class="string" id="5615018">&#34;gname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615027">paxLinkpath</span>&nbsp;<span class="op" id="5615039">=</span>&nbsp;<span class="string" id="5615041">&#34;linkpath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615053">paxMtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615065">=</span>&nbsp;<span class="string" id="5615067">&#34;mtime&#34;</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615076">paxPath</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615088">=</span>&nbsp;<span class="string" id="5615090">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615098">paxSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615110">=</span>&nbsp;<span class="string" id="5615112">&#34;size&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615120">paxUid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615132">=</span>&nbsp;<span class="string" id="5615134">&#34;uid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615141">paxUname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615153">=</span>&nbsp;<span class="string" id="5615155">&#34;uname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615164">paxXattr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615176">=</span>&nbsp;<span class="string" id="5615178">&#34;SCHILY.xattr.&#34;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615195">paxNone</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615207">=</span>&nbsp;<span class="string" id="5615209">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5615212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5615215">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;Header&nbsp;from&nbsp;fi.</span><br>
<span class="lineno"></span><span class="comment" id="5615279">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;symlink,&nbsp;FileInfoHeader&nbsp;records&nbsp;link&nbsp;as&nbsp;the&nbsp;link&nbsp;target.</span><br>
<span class="lineno">200</span><span class="comment" id="5615357">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;directory,&nbsp;a&nbsp;slash&nbsp;is&nbsp;appended&nbsp;to&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5615422">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5615489">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5615560">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5615629">func</span>&nbsp;<span class="ident" id="5615634">FileInfoHeader</span><span class="op" id="5615648">(</span><span class="ident" id="5615649">fi</span>&nbsp;<span class="ident" id="5615652"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5615654">.</span><span class="ident" id="5615655"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5615663">,</span>&nbsp;<span class="ident" id="5615665">link</span>&nbsp;<span class="builtintype" id="5615670">string</span><span class="op" id="5615676">)</span>&nbsp;<span class="op" id="5615678">(</span><span class="op" id="5615679">*</span><span class="ident" id="5615680"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5615686">,</span>&nbsp;<span class="builtintype" id="5615688">error</span><span class="op" id="5615693">)</span>&nbsp;<span class="op" id="5615695">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5615698">if</span>&nbsp;<span class="ident" id="5615701"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span>&nbsp;<span class="op" id="5615704">==</span>&nbsp;<span class="builtintype" id="5615707">nil</span>&nbsp;<span class="op" id="5615711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5615715">return</span>&nbsp;<span class="builtintype" id="5615722">nil</span><span class="op" id="5615725">,</span>&nbsp;<span class="ident" id="5615727"><a href="/gostd/archive/tar/common.go.html#5610460">errors</a></span><span class="op" id="5615733">.</span><span class="ident" id="5615734"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5615737">(</span><span class="string" id="5615738">&#34;tar:&nbsp;FileInfo&nbsp;is&nbsp;nil&#34;</span><span class="op" id="5615760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615766">fm</span>&nbsp;<span class="op" id="5615769">:=</span>&nbsp;<span class="ident" id="5615772"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5615774">.</span><span class="ident" id="5615775"><a href="/gostd/os/types.go.html#2472615">Mode</a></span><span class="op" id="5615779">(</span><span class="op" id="5615780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615783">h</span>&nbsp;<span class="op" id="5615785">:=</span>&nbsp;<span class="op" id="5615788">&amp;</span><span class="ident" id="5615789"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="5615795">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615799"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="5615803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615808"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5615810">.</span><span class="ident" id="5615811"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="5615815">(</span><span class="op" id="5615816">)</span><span class="op" id="5615817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615821"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="5615828">:</span>&nbsp;<span class="ident" id="5615830"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5615832">.</span><span class="ident" id="5615833"><a href="/gostd/os/types.go.html#2472654">ModTime</a></span><span class="op" id="5615840">(</span><span class="op" id="5615841">)</span><span class="op" id="5615842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615846"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="5615850">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5615855">int64</span><span class="op" id="5615860">(</span><span class="ident" id="5615861"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5615863">.</span><span class="ident" id="5615864"><a href="/gostd/os/types.go.html#2475432">Perm</a></span><span class="op" id="5615868">(</span><span class="op" id="5615869">)</span><span class="op" id="5615870">)</span><span class="op" id="5615871">,</span>&nbsp;<span class="comment" id="5615873">//&nbsp;or&#39;d&nbsp;with&nbsp;c_IS*&nbsp;constants&nbsp;later</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5615909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5615912">switch</span>&nbsp;<span class="op" id="5615919">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5615922">case</span>&nbsp;<span class="ident" id="5615927"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5615929">.</span><span class="ident" id="5615930"><a href="/gostd/os/types.go.html#2475321">IsRegular</a></span><span class="op" id="5615939">(</span><span class="op" id="5615940">)</span><span class="op" id="5615941">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615945"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5615946">.</span><span class="ident" id="5615947"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5615952">|=</span>&nbsp;<span class="ident" id="5615955"><a href="/gostd/archive/tar/common.go.html#5614592">c_ISREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615965"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5615966">.</span><span class="ident" id="5615967"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5615976">=</span>&nbsp;<span class="ident" id="5615978"><a href="/gostd/archive/tar/common.go.html#5610538">TypeReg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5615988"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5615989">.</span><span class="ident" id="5615990"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="5615995">=</span>&nbsp;<span class="ident" id="5615997"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5615999">.</span><span class="ident" id="5616000"><a href="/gostd/os/types.go.html#2472528">Size</a></span><span class="op" id="5616004">(</span><span class="op" id="5616005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616008">case</span>&nbsp;<span class="ident" id="5616013"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5616015">.</span><span class="ident" id="5616016"><a href="/gostd/os/types.go.html#2472696">IsDir</a></span><span class="op" id="5616021">(</span><span class="op" id="5616022">)</span><span class="op" id="5616023">:</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616027"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616028">.</span><span class="ident" id="5616029"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5616038">=</span>&nbsp;<span class="ident" id="5616040"><a href="/gostd/archive/tar/common.go.html#5610814">TypeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616050"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616051">.</span><span class="ident" id="5616052"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616057">|=</span>&nbsp;<span class="ident" id="5616060"><a href="/gostd/archive/tar/common.go.html#5614531">c_ISDIR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616070"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616071">.</span><span class="ident" id="5616072"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="5616077">+=</span>&nbsp;<span class="string" id="5616080">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616085">case</span>&nbsp;<span class="ident" id="5616090"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616092">&amp;</span><span class="ident" id="5616093"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616095">.</span><span class="ident" id="5616096"><a href="/gostd/os/types.go.html#2473870">ModeSymlink</a></span>&nbsp;<span class="op" id="5616108">!=</span>&nbsp;<span class="num" id="5616111">0</span><span class="op" id="5616112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616116"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616117">.</span><span class="ident" id="5616118"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5616127">=</span>&nbsp;<span class="ident" id="5616129"><a href="/gostd/archive/tar/common.go.html#5610667">TypeSymlink</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616143"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616144">.</span><span class="ident" id="5616145"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616150">|=</span>&nbsp;<span class="ident" id="5616153"><a href="/gostd/archive/tar/common.go.html#5614628">c_ISLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616163"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616164">.</span><span class="ident" id="5616165"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="5616174">=</span>&nbsp;<span class="ident" id="5616176"><a href="/gostd/archive/tar/common.go.html#5615665">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616182">case</span>&nbsp;<span class="ident" id="5616187"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616189">&amp;</span><span class="ident" id="5616190"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616192">.</span><span class="ident" id="5616193"><a href="/gostd/os/types.go.html#2473938">ModeDevice</a></span>&nbsp;<span class="op" id="5616204">!=</span>&nbsp;<span class="num" id="5616207">0</span><span class="op" id="5616208">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616212">if</span>&nbsp;<span class="ident" id="5616215"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616217">&amp;</span><span class="ident" id="5616218"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616220">.</span><span class="ident" id="5616221"><a href="/gostd/os/types.go.html#2474271">ModeCharDevice</a></span>&nbsp;<span class="op" id="5616236">!=</span>&nbsp;<span class="num" id="5616239">0</span>&nbsp;<span class="op" id="5616241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616246"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616247">.</span><span class="ident" id="5616248"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616253">|=</span>&nbsp;<span class="ident" id="5616256"><a href="/gostd/archive/tar/common.go.html#5614707">c_ISCHR</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616267"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616268">.</span><span class="ident" id="5616269"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5616278">=</span>&nbsp;<span class="ident" id="5616280"><a href="/gostd/archive/tar/common.go.html#5610712">TypeChar</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616291">}</span>&nbsp;<span class="keyword" id="5616293">else</span>&nbsp;<span class="op" id="5616298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616303"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616304">.</span><span class="ident" id="5616305"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616310">|=</span>&nbsp;<span class="ident" id="5616313"><a href="/gostd/archive/tar/common.go.html#5614665">c_ISBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616324"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616325">.</span><span class="ident" id="5616326"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5616335">=</span>&nbsp;<span class="ident" id="5616337"><a href="/gostd/archive/tar/common.go.html#5610765">TypeBlock</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616349">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616352">case</span>&nbsp;<span class="ident" id="5616357"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616359">&amp;</span><span class="ident" id="5616360"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616362">.</span><span class="ident" id="5616363"><a href="/gostd/os/types.go.html#2474004">ModeNamedPipe</a></span>&nbsp;<span class="op" id="5616377">!=</span>&nbsp;<span class="num" id="5616380">0</span><span class="op" id="5616381">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616385"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616386">.</span><span class="ident" id="5616387"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="5616396">=</span>&nbsp;<span class="ident" id="5616398"><a href="/gostd/archive/tar/common.go.html#5610855">TypeFifo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616409"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616410">.</span><span class="ident" id="5616411"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616416">|=</span>&nbsp;<span class="ident" id="5616419"><a href="/gostd/archive/tar/common.go.html#5614564">c_ISFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616429">case</span>&nbsp;<span class="ident" id="5616434"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616436">&amp;</span><span class="ident" id="5616437"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616439">.</span><span class="ident" id="5616440"><a href="/gostd/os/types.go.html#2474076">ModeSocket</a></span>&nbsp;<span class="op" id="5616451">!=</span>&nbsp;<span class="num" id="5616454">0</span><span class="op" id="5616455">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616459"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616460">.</span><span class="ident" id="5616461"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616466">|=</span>&nbsp;<span class="ident" id="5616469"><a href="/gostd/archive/tar/common.go.html#5614753">c_ISSOCK</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616479">default</span><span class="op" id="5616486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616490">return</span>&nbsp;<span class="builtintype" id="5616497">nil</span><span class="op" id="5616500">,</span>&nbsp;<span class="ident" id="5616502"><a href="/gostd/archive/tar/common.go.html#5610470">fmt</a></span><span class="op" id="5616505">.</span><span class="ident" id="5616506"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5616512">(</span><span class="string" id="5616513">&#34;archive/tar:&nbsp;unknown&nbsp;file&nbsp;mode&nbsp;%v&#34;</span><span class="op" id="5616548">,</span>&nbsp;<span class="ident" id="5616550"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616558">if</span>&nbsp;<span class="ident" id="5616561"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616563">&amp;</span><span class="ident" id="5616564"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616566">.</span><span class="ident" id="5616567"><a href="/gostd/os/types.go.html#2474149">ModeSetuid</a></span>&nbsp;<span class="op" id="5616578">!=</span>&nbsp;<span class="num" id="5616581">0</span>&nbsp;<span class="op" id="5616583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616587"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616588">.</span><span class="ident" id="5616589"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616594">|=</span>&nbsp;<span class="ident" id="5616597"><a href="/gostd/archive/tar/common.go.html#5614423">c_ISUID</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616609">if</span>&nbsp;<span class="ident" id="5616612"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616614">&amp;</span><span class="ident" id="5616615"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616617">.</span><span class="ident" id="5616618"><a href="/gostd/os/types.go.html#2474210">ModeSetgid</a></span>&nbsp;<span class="op" id="5616629">!=</span>&nbsp;<span class="num" id="5616632">0</span>&nbsp;<span class="op" id="5616634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616638"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616639">.</span><span class="ident" id="5616640"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616645">|=</span>&nbsp;<span class="ident" id="5616648"><a href="/gostd/archive/tar/common.go.html#5614454">c_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616660">if</span>&nbsp;<span class="ident" id="5616663"><a href="/gostd/archive/tar/common.go.html#5615766">fm</a></span><span class="op" id="5616665">&amp;</span><span class="ident" id="5616666"><a href="/gostd/archive/tar/common.go.html#5610477">os</a></span><span class="op" id="5616668">.</span><span class="ident" id="5616669"><a href="/gostd/os/types.go.html#2474371">ModeSticky</a></span>&nbsp;<span class="op" id="5616680">!=</span>&nbsp;<span class="num" id="5616683">0</span>&nbsp;<span class="op" id="5616685">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5616689"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616690">.</span><span class="ident" id="5616691"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span>&nbsp;<span class="op" id="5616696">|=</span>&nbsp;<span class="ident" id="5616699"><a href="/gostd/archive/tar/common.go.html#5614485">c_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616711">if</span>&nbsp;<span class="ident" id="5616714"><a href="/gostd/archive/tar/common.go.html#5614330">sysStat</a></span>&nbsp;<span class="op" id="5616722">!=</span>&nbsp;<span class="builtintype" id="5616725">nil</span>&nbsp;<span class="op" id="5616729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616733">return</span>&nbsp;<span class="ident" id="5616740"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616741">,</span>&nbsp;<span class="ident" id="5616743"><a href="/gostd/archive/tar/common.go.html#5614330">sysStat</a></span><span class="op" id="5616750">(</span><span class="ident" id="5616751"><a href="/gostd/archive/tar/common.go.html#5615649">fi</a></span><span class="op" id="5616753">,</span>&nbsp;<span class="ident" id="5616755"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5616759">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5616762">return</span>&nbsp;<span class="ident" id="5616769"><a href="/gostd/archive/tar/common.go.html#5615783">h</a></span><span class="op" id="5616770">,</span>&nbsp;<span class="builtintype" id="5616772">nil</span><br>
<span class="lineno"></span><span class="op" id="5616776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5616779">var</span>&nbsp;<span class="ident" id="5616783">zeroBlock</span>&nbsp;<span class="op" id="5616793">=</span>&nbsp;<span class="builtinfunc" id="5616795">make</span><span class="op" id="5616799">(</span><span class="op" id="5616800">[</span><span class="op" id="5616801">]</span><span class="builtintype" id="5616802">byte</span><span class="op" id="5616806">,</span>&nbsp;<span class="ident" id="5616808"><a href="/gostd/archive/tar/common.go.html#5610510">blockSize</a></span><span class="op" id="5616817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5616820">//&nbsp;POSIX&nbsp;specifies&nbsp;a&nbsp;sum&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;byte&nbsp;values,&nbsp;but&nbsp;the&nbsp;Sun&nbsp;tar&nbsp;uses&nbsp;signed&nbsp;byte&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="5616915">//&nbsp;We&nbsp;compute&nbsp;and&nbsp;return&nbsp;both.</span><br>
<span class="lineno"></span><span class="keyword" id="5616946">func</span>&nbsp;<span class="ident" id="5616951">checksum</span><span class="op" id="5616959">(</span><span class="ident" id="5616960">header</span>&nbsp;<span class="op" id="5616967">[</span><span class="op" id="5616968">]</span><span class="builtintype" id="5616969">byte</span><span class="op" id="5616973">)</span>&nbsp;<span class="op" id="5616975">(</span><span class="ident" id="5616976">unsigned</span>&nbsp;<span class="builtintype" id="5616985">int64</span><span class="op" id="5616990">,</span>&nbsp;<span class="ident" id="5616992">signed</span>&nbsp;<span class="builtintype" id="5616999">int64</span><span class="op" id="5617004">)</span>&nbsp;<span class="op" id="5617006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617009">for</span>&nbsp;<span class="ident" id="5617013">i</span>&nbsp;<span class="op" id="5617015">:=</span>&nbsp;<span class="num" id="5617018">0</span><span class="op" id="5617019">;</span>&nbsp;<span class="ident" id="5617021"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span>&nbsp;<span class="op" id="5617023">&lt;</span>&nbsp;<span class="builtinfunc" id="5617025">len</span><span class="op" id="5617028">(</span><span class="ident" id="5617029"><a href="/gostd/archive/tar/common.go.html#5616960">header</a></span><span class="op" id="5617035">)</span><span class="op" id="5617036">;</span>&nbsp;<span class="ident" id="5617038"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span><span class="op" id="5617039">++</span>&nbsp;<span class="op" id="5617042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617046">if</span>&nbsp;<span class="ident" id="5617049"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span>&nbsp;<span class="op" id="5617051">==</span>&nbsp;<span class="num" id="5617054">148</span>&nbsp;<span class="op" id="5617058">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5617063">//&nbsp;The&nbsp;chksum&nbsp;field&nbsp;(header[148:156])&nbsp;is&nbsp;special:&nbsp;it&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;space&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617153"><a href="/gostd/archive/tar/common.go.html#5616976">unsigned</a></span>&nbsp;<span class="op" id="5617162">+=</span>&nbsp;<span class="string" id="5617165">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5617169">*</span>&nbsp;<span class="num" id="5617171">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617176"><a href="/gostd/archive/tar/common.go.html#5616992">signed</a></span>&nbsp;<span class="op" id="5617183">+=</span>&nbsp;<span class="string" id="5617186">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5617190">*</span>&nbsp;<span class="num" id="5617192">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617197"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span>&nbsp;<span class="op" id="5617199">+=</span>&nbsp;<span class="num" id="5617202">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617207">continue</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617222"><a href="/gostd/archive/tar/common.go.html#5616976">unsigned</a></span>&nbsp;<span class="op" id="5617231">+=</span>&nbsp;<span class="builtintype" id="5617234">int64</span><span class="op" id="5617239">(</span><span class="ident" id="5617240"><a href="/gostd/archive/tar/common.go.html#5616960">header</a></span><span class="op" id="5617246">[</span><span class="ident" id="5617247"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span><span class="op" id="5617248">]</span><span class="op" id="5617249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617253"><a href="/gostd/archive/tar/common.go.html#5616992">signed</a></span>&nbsp;<span class="op" id="5617260">+=</span>&nbsp;<span class="builtintype" id="5617263">int64</span><span class="op" id="5617268">(</span><span class="builtintype" id="5617269">int8</span><span class="op" id="5617273">(</span><span class="ident" id="5617274"><a href="/gostd/archive/tar/common.go.html#5616960">header</a></span><span class="op" id="5617280">[</span><span class="ident" id="5617281"><a href="/gostd/archive/tar/common.go.html#5617013">i</a></span><span class="op" id="5617282">]</span><span class="op" id="5617283">)</span><span class="op" id="5617284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617290">return</span><br>
<span class="lineno">275</span><span class="op" id="5617297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5617300">type</span>&nbsp;<span class="ident" id="5617305">slicer</span>&nbsp;<span class="op" id="5617312">[</span><span class="op" id="5617313">]</span><span class="builtintype" id="5617314">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5617320">func</span>&nbsp;<span class="op" id="5617325">(</span><span class="ident" id="5617326">sp</span>&nbsp;<span class="op" id="5617329">*</span><span class="ident" id="5617330"><a href="/gostd/archive/tar/common.go.html#5617305">slicer</a></span><span class="op" id="5617336">)</span>&nbsp;<span class="ident" id="5617338">next</span><span class="op" id="5617342">(</span><span class="ident" id="5617343">n</span>&nbsp;<span class="builtintype" id="5617345">int</span><span class="op" id="5617348">)</span>&nbsp;<span class="op" id="5617350">(</span><span class="ident" id="5617351">b</span>&nbsp;<span class="op" id="5617353">[</span><span class="op" id="5617354">]</span><span class="builtintype" id="5617355">byte</span><span class="op" id="5617359">)</span>&nbsp;<span class="op" id="5617361">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617364">s</span>&nbsp;<span class="op" id="5617366">:=</span>&nbsp;<span class="op" id="5617369">*</span><span class="ident" id="5617370"><a href="/gostd/archive/tar/common.go.html#5617326">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617374"><a href="/gostd/archive/tar/common.go.html#5617351">b</a></span><span class="op" id="5617375">,</span>&nbsp;<span class="op" id="5617377">*</span><span class="ident" id="5617378"><a href="/gostd/archive/tar/common.go.html#5617326">sp</a></span>&nbsp;<span class="op" id="5617381">=</span>&nbsp;<span class="ident" id="5617383"><a href="/gostd/archive/tar/common.go.html#5617364">s</a></span><span class="op" id="5617384">[</span><span class="num" id="5617385">0</span><span class="op" id="5617386">:</span><span class="ident" id="5617387"><a href="/gostd/archive/tar/common.go.html#5617343">n</a></span><span class="op" id="5617388">]</span><span class="op" id="5617389">,</span>&nbsp;<span class="ident" id="5617391"><a href="/gostd/archive/tar/common.go.html#5617364">s</a></span><span class="op" id="5617392">[</span><span class="ident" id="5617393"><a href="/gostd/archive/tar/common.go.html#5617343">n</a></span><span class="op" id="5617394">:</span><span class="op" id="5617395">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617398">return</span><br>
<span class="lineno"></span><span class="op" id="5617405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5617408">func</span>&nbsp;<span class="ident" id="5617413">isASCII</span><span class="op" id="5617420">(</span><span class="ident" id="5617421">s</span>&nbsp;<span class="builtintype" id="5617423">string</span><span class="op" id="5617429">)</span>&nbsp;<span class="builtintype" id="5617431">bool</span>&nbsp;<span class="op" id="5617436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617439">for</span>&nbsp;<span class="ident" id="5617443">_</span><span class="op" id="5617444">,</span>&nbsp;<span class="ident" id="5617446">c</span>&nbsp;<span class="op" id="5617448">:=</span>&nbsp;<span class="keyword" id="5617451">range</span>&nbsp;<span class="ident" id="5617457"><a href="/gostd/archive/tar/common.go.html#5617421">s</a></span>&nbsp;<span class="op" id="5617459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617463">if</span>&nbsp;<span class="ident" id="5617466"><a href="/gostd/archive/tar/common.go.html#5617446">c</a></span>&nbsp;<span class="op" id="5617468">&gt;=</span>&nbsp;<span class="num" id="5617471">0x80</span>&nbsp;<span class="op" id="5617476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617481">return</span>&nbsp;<span class="builtintype" id="5617488">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617496">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617502">return</span>&nbsp;<span class="builtintype" id="5617509">true</span><br>
<span class="lineno"></span><span class="op" id="5617514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5617517">func</span>&nbsp;<span class="ident" id="5617522">toASCII</span><span class="op" id="5617529">(</span><span class="ident" id="5617530">s</span>&nbsp;<span class="builtintype" id="5617532">string</span><span class="op" id="5617538">)</span>&nbsp;<span class="builtintype" id="5617540">string</span>&nbsp;<span class="op" id="5617547">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617550">if</span>&nbsp;<span class="ident" id="5617553"><a href="/gostd/archive/tar/common.go.html#5617413">isASCII</a></span><span class="op" id="5617560">(</span><span class="ident" id="5617561"><a href="/gostd/archive/tar/common.go.html#5617530">s</a></span><span class="op" id="5617562">)</span>&nbsp;<span class="op" id="5617564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617568">return</span>&nbsp;<span class="ident" id="5617575"><a href="/gostd/archive/tar/common.go.html#5617530">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617581">var</span>&nbsp;<span class="ident" id="5617585">buf</span>&nbsp;<span class="ident" id="5617589"><a href="/gostd/archive/tar/common.go.html#5610451">bytes</a></span><span class="op" id="5617594">.</span><span class="ident" id="5617595"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617603">for</span>&nbsp;<span class="ident" id="5617607">_</span><span class="op" id="5617608">,</span>&nbsp;<span class="ident" id="5617610">c</span>&nbsp;<span class="op" id="5617612">:=</span>&nbsp;<span class="keyword" id="5617615">range</span>&nbsp;<span class="ident" id="5617621"><a href="/gostd/archive/tar/common.go.html#5617530">s</a></span>&nbsp;<span class="op" id="5617623">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617627">if</span>&nbsp;<span class="ident" id="5617630"><a href="/gostd/archive/tar/common.go.html#5617610">c</a></span>&nbsp;<span class="op" id="5617632">&lt;</span>&nbsp;<span class="num" id="5617634">0x80</span>&nbsp;<span class="op" id="5617639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5617644"><a href="/gostd/archive/tar/common.go.html#5617585">buf</a></span><span class="op" id="5617647">.</span><span class="ident" id="5617648"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="5617657">(</span><span class="builtintype" id="5617658">byte</span><span class="op" id="5617662">(</span><span class="ident" id="5617663"><a href="/gostd/archive/tar/common.go.html#5617610">c</a></span><span class="op" id="5617664">)</span><span class="op" id="5617665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5617672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5617675">return</span>&nbsp;<span class="ident" id="5617682"><a href="/gostd/archive/tar/common.go.html#5617585">buf</a></span><span class="op" id="5617685">.</span><span class="ident" id="5617686"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="5617692">(</span><span class="op" id="5617693">)</span><br>
<span class="lineno">305</span><span class="op" id="5617695">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
