<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html" class="current">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3847884">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3847940">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3847994">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3848045">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848110">package</span>&nbsp;<span class="ident" id="3848118">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848123">import</span>&nbsp;<span class="op" id="3848130">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3848133">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3848139">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3848149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848152">func</span>&nbsp;<span class="ident" id="3848157">joinIPv4Group</span><span class="op" id="3848170">(</span><span class="ident" id="3848171">fd</span>&nbsp;<span class="op" id="3848174">*</span><span class="ident" id="3848175">netFD</span><span class="op" id="3848180">,</span>&nbsp;<span class="ident" id="3848182">ifi</span>&nbsp;<span class="op" id="3848186">*</span><span class="ident" id="3848187">Interface</span><span class="op" id="3848196">,</span>&nbsp;<span class="ident" id="3848198">ip</span>&nbsp;<span class="ident" id="3848201">IP</span><span class="op" id="3848203">)</span>&nbsp;<span class="builtintype" id="3848205">error</span>&nbsp;<span class="op" id="3848211">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848214">mreq</span>&nbsp;<span class="op" id="3848219">:=</span>&nbsp;<span class="op" id="3848222">&amp;</span><span class="ident" id="3848223">syscall</span><span class="op" id="3848230">.</span><span class="ident" id="3848231">IPMreq</span><span class="op" id="3848237">{</span><span class="ident" id="3848238">Multiaddr</span><span class="op" id="3848247">:</span>&nbsp;<span class="op" id="3848249">[</span><span class="num" id="3848250">4</span><span class="op" id="3848251">]</span><span class="builtintype" id="3848252">byte</span><span class="op" id="3848256">{</span><span class="ident" id="3848257">ip</span><span class="op" id="3848259">[</span><span class="num" id="3848260">0</span><span class="op" id="3848261">]</span><span class="op" id="3848262">,</span>&nbsp;<span class="ident" id="3848264">ip</span><span class="op" id="3848266">[</span><span class="num" id="3848267">1</span><span class="op" id="3848268">]</span><span class="op" id="3848269">,</span>&nbsp;<span class="ident" id="3848271">ip</span><span class="op" id="3848273">[</span><span class="num" id="3848274">2</span><span class="op" id="3848275">]</span><span class="op" id="3848276">,</span>&nbsp;<span class="ident" id="3848278">ip</span><span class="op" id="3848280">[</span><span class="num" id="3848281">3</span><span class="op" id="3848282">]</span><span class="op" id="3848283">}</span><span class="op" id="3848284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848287">if</span>&nbsp;<span class="ident" id="3848290">err</span>&nbsp;<span class="op" id="3848294">:=</span>&nbsp;<span class="ident" id="3848297">setIPv4MreqToInterface</span><span class="op" id="3848319">(</span><span class="ident" id="3848320">mreq</span><span class="op" id="3848324">,</span>&nbsp;<span class="ident" id="3848326">ifi</span><span class="op" id="3848329">)</span><span class="op" id="3848330">;</span>&nbsp;<span class="ident" id="3848332">err</span>&nbsp;<span class="op" id="3848336">!=</span>&nbsp;<span class="builtintype" id="3848339">nil</span>&nbsp;<span class="op" id="3848343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848347">return</span>&nbsp;<span class="ident" id="3848354">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848362">if</span>&nbsp;<span class="ident" id="3848365">err</span>&nbsp;<span class="op" id="3848369">:=</span>&nbsp;<span class="ident" id="3848372">fd</span><span class="op" id="3848374">.</span><span class="ident" id="3848375">incref</span><span class="op" id="3848381">(</span><span class="op" id="3848382">)</span><span class="op" id="3848383">;</span>&nbsp;<span class="ident" id="3848385">err</span>&nbsp;<span class="op" id="3848389">!=</span>&nbsp;<span class="builtintype" id="3848392">nil</span>&nbsp;<span class="op" id="3848396">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848400">return</span>&nbsp;<span class="ident" id="3848407">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848415">defer</span>&nbsp;<span class="ident" id="3848421">fd</span><span class="op" id="3848423">.</span><span class="ident" id="3848424">decref</span><span class="op" id="3848430">(</span><span class="op" id="3848431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848434">return</span>&nbsp;<span class="ident" id="3848441">os</span><span class="op" id="3848443">.</span><span class="ident" id="3848444">NewSyscallError</span><span class="op" id="3848459">(</span><span class="string" id="3848460">&#34;setsockopt&#34;</span><span class="op" id="3848472">,</span>&nbsp;<span class="ident" id="3848474">syscall</span><span class="op" id="3848481">.</span><span class="ident" id="3848482">SetsockoptIPMreq</span><span class="op" id="3848498">(</span><span class="ident" id="3848499">fd</span><span class="op" id="3848501">.</span><span class="ident" id="3848502">sysfd</span><span class="op" id="3848507">,</span>&nbsp;<span class="ident" id="3848509">syscall</span><span class="op" id="3848516">.</span><span class="ident" id="3848517">IPPROTO_IP</span><span class="op" id="3848527">,</span>&nbsp;<span class="ident" id="3848529">syscall</span><span class="op" id="3848536">.</span><span class="ident" id="3848537">IP_ADD_MEMBERSHIP</span><span class="op" id="3848554">,</span>&nbsp;<span class="ident" id="3848556">mreq</span><span class="op" id="3848560">)</span><span class="op" id="3848561">)</span><br>
<span class="lineno"></span><span class="op" id="3848563">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3848566">func</span>&nbsp;<span class="ident" id="3848571">setIPv6MulticastInterface</span><span class="op" id="3848596">(</span><span class="ident" id="3848597">fd</span>&nbsp;<span class="op" id="3848600">*</span><span class="ident" id="3848601">netFD</span><span class="op" id="3848606">,</span>&nbsp;<span class="ident" id="3848608">ifi</span>&nbsp;<span class="op" id="3848612">*</span><span class="ident" id="3848613">Interface</span><span class="op" id="3848622">)</span>&nbsp;<span class="builtintype" id="3848624">error</span>&nbsp;<span class="op" id="3848630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848633">var</span>&nbsp;<span class="ident" id="3848637">v</span>&nbsp;<span class="builtintype" id="3848639">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848644">if</span>&nbsp;<span class="ident" id="3848647">ifi</span>&nbsp;<span class="op" id="3848651">!=</span>&nbsp;<span class="builtintype" id="3848654">nil</span>&nbsp;<span class="op" id="3848658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848662">v</span>&nbsp;<span class="op" id="3848664">=</span>&nbsp;<span class="ident" id="3848666">ifi</span><span class="op" id="3848669">.</span><span class="ident" id="3848670">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848680">if</span>&nbsp;<span class="ident" id="3848683">err</span>&nbsp;<span class="op" id="3848687">:=</span>&nbsp;<span class="ident" id="3848690">fd</span><span class="op" id="3848692">.</span><span class="ident" id="3848693">incref</span><span class="op" id="3848699">(</span><span class="op" id="3848700">)</span><span class="op" id="3848701">;</span>&nbsp;<span class="ident" id="3848703">err</span>&nbsp;<span class="op" id="3848707">!=</span>&nbsp;<span class="builtintype" id="3848710">nil</span>&nbsp;<span class="op" id="3848714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848718">return</span>&nbsp;<span class="ident" id="3848725">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848733">defer</span>&nbsp;<span class="ident" id="3848739">fd</span><span class="op" id="3848741">.</span><span class="ident" id="3848742">decref</span><span class="op" id="3848748">(</span><span class="op" id="3848749">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848752">return</span>&nbsp;<span class="ident" id="3848759">os</span><span class="op" id="3848761">.</span><span class="ident" id="3848762">NewSyscallError</span><span class="op" id="3848777">(</span><span class="string" id="3848778">&#34;setsockopt&#34;</span><span class="op" id="3848790">,</span>&nbsp;<span class="ident" id="3848792">syscall</span><span class="op" id="3848799">.</span><span class="ident" id="3848800">SetsockoptInt</span><span class="op" id="3848813">(</span><span class="ident" id="3848814">fd</span><span class="op" id="3848816">.</span><span class="ident" id="3848817">sysfd</span><span class="op" id="3848822">,</span>&nbsp;<span class="ident" id="3848824">syscall</span><span class="op" id="3848831">.</span><span class="ident" id="3848832">IPPROTO_IPV6</span><span class="op" id="3848844">,</span>&nbsp;<span class="ident" id="3848846">syscall</span><span class="op" id="3848853">.</span><span class="ident" id="3848854">IPV6_MULTICAST_IF</span><span class="op" id="3848871">,</span>&nbsp;<span class="ident" id="3848873">v</span><span class="op" id="3848874">)</span><span class="op" id="3848875">)</span><br>
<span class="lineno"></span><span class="op" id="3848877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3848880">func</span>&nbsp;<span class="ident" id="3848885">setIPv6MulticastLoopback</span><span class="op" id="3848909">(</span><span class="ident" id="3848910">fd</span>&nbsp;<span class="op" id="3848913">*</span><span class="ident" id="3848914">netFD</span><span class="op" id="3848919">,</span>&nbsp;<span class="ident" id="3848921">v</span>&nbsp;<span class="builtintype" id="3848923">bool</span><span class="op" id="3848927">)</span>&nbsp;<span class="builtintype" id="3848929">error</span>&nbsp;<span class="op" id="3848935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848938">if</span>&nbsp;<span class="ident" id="3848941">err</span>&nbsp;<span class="op" id="3848945">:=</span>&nbsp;<span class="ident" id="3848948">fd</span><span class="op" id="3848950">.</span><span class="ident" id="3848951">incref</span><span class="op" id="3848957">(</span><span class="op" id="3848958">)</span><span class="op" id="3848959">;</span>&nbsp;<span class="ident" id="3848961">err</span>&nbsp;<span class="op" id="3848965">!=</span>&nbsp;<span class="builtintype" id="3848968">nil</span>&nbsp;<span class="op" id="3848972">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848976">return</span>&nbsp;<span class="ident" id="3848983">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848991">defer</span>&nbsp;<span class="ident" id="3848997">fd</span><span class="op" id="3848999">.</span><span class="ident" id="3849000">decref</span><span class="op" id="3849006">(</span><span class="op" id="3849007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849010">return</span>&nbsp;<span class="ident" id="3849017">os</span><span class="op" id="3849019">.</span><span class="ident" id="3849020">NewSyscallError</span><span class="op" id="3849035">(</span><span class="string" id="3849036">&#34;setsockopt&#34;</span><span class="op" id="3849048">,</span>&nbsp;<span class="ident" id="3849050">syscall</span><span class="op" id="3849057">.</span><span class="ident" id="3849058">SetsockoptInt</span><span class="op" id="3849071">(</span><span class="ident" id="3849072">fd</span><span class="op" id="3849074">.</span><span class="ident" id="3849075">sysfd</span><span class="op" id="3849080">,</span>&nbsp;<span class="ident" id="3849082">syscall</span><span class="op" id="3849089">.</span><span class="ident" id="3849090">IPPROTO_IPV6</span><span class="op" id="3849102">,</span>&nbsp;<span class="ident" id="3849104">syscall</span><span class="op" id="3849111">.</span><span class="ident" id="3849112">IPV6_MULTICAST_LOOP</span><span class="op" id="3849131">,</span>&nbsp;<span class="ident" id="3849133">boolint</span><span class="op" id="3849140">(</span><span class="ident" id="3849141">v</span><span class="op" id="3849142">)</span><span class="op" id="3849143">)</span><span class="op" id="3849144">)</span><br>
<span class="lineno"></span><span class="op" id="3849146">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3849149">func</span>&nbsp;<span class="ident" id="3849154">joinIPv6Group</span><span class="op" id="3849167">(</span><span class="ident" id="3849168">fd</span>&nbsp;<span class="op" id="3849171">*</span><span class="ident" id="3849172">netFD</span><span class="op" id="3849177">,</span>&nbsp;<span class="ident" id="3849179">ifi</span>&nbsp;<span class="op" id="3849183">*</span><span class="ident" id="3849184">Interface</span><span class="op" id="3849193">,</span>&nbsp;<span class="ident" id="3849195">ip</span>&nbsp;<span class="ident" id="3849198">IP</span><span class="op" id="3849200">)</span>&nbsp;<span class="builtintype" id="3849202">error</span>&nbsp;<span class="op" id="3849208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849211">mreq</span>&nbsp;<span class="op" id="3849216">:=</span>&nbsp;<span class="op" id="3849219">&amp;</span><span class="ident" id="3849220">syscall</span><span class="op" id="3849227">.</span><span class="ident" id="3849228">IPv6Mreq</span><span class="op" id="3849236">{</span><span class="op" id="3849237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3849240">copy</span><span class="op" id="3849244">(</span><span class="ident" id="3849245">mreq</span><span class="op" id="3849249">.</span><span class="ident" id="3849250">Multiaddr</span><span class="op" id="3849259">[</span><span class="op" id="3849260">:</span><span class="op" id="3849261">]</span><span class="op" id="3849262">,</span>&nbsp;<span class="ident" id="3849264">ip</span><span class="op" id="3849266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849269">if</span>&nbsp;<span class="ident" id="3849272">ifi</span>&nbsp;<span class="op" id="3849276">!=</span>&nbsp;<span class="builtintype" id="3849279">nil</span>&nbsp;<span class="op" id="3849283">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849287">mreq</span><span class="op" id="3849291">.</span><span class="ident" id="3849292">Interface</span>&nbsp;<span class="op" id="3849302">=</span>&nbsp;<span class="builtintype" id="3849304">uint32</span><span class="op" id="3849310">(</span><span class="ident" id="3849311">ifi</span><span class="op" id="3849314">.</span><span class="ident" id="3849315">Index</span><span class="op" id="3849320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849326">if</span>&nbsp;<span class="ident" id="3849329">err</span>&nbsp;<span class="op" id="3849333">:=</span>&nbsp;<span class="ident" id="3849336">fd</span><span class="op" id="3849338">.</span><span class="ident" id="3849339">incref</span><span class="op" id="3849345">(</span><span class="op" id="3849346">)</span><span class="op" id="3849347">;</span>&nbsp;<span class="ident" id="3849349">err</span>&nbsp;<span class="op" id="3849353">!=</span>&nbsp;<span class="builtintype" id="3849356">nil</span>&nbsp;<span class="op" id="3849360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849364">return</span>&nbsp;<span class="ident" id="3849371">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849376">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849379">defer</span>&nbsp;<span class="ident" id="3849385">fd</span><span class="op" id="3849387">.</span><span class="ident" id="3849388">decref</span><span class="op" id="3849394">(</span><span class="op" id="3849395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849398">return</span>&nbsp;<span class="ident" id="3849405">os</span><span class="op" id="3849407">.</span><span class="ident" id="3849408">NewSyscallError</span><span class="op" id="3849423">(</span><span class="string" id="3849424">&#34;setsockopt&#34;</span><span class="op" id="3849436">,</span>&nbsp;<span class="ident" id="3849438">syscall</span><span class="op" id="3849445">.</span><span class="ident" id="3849446">SetsockoptIPv6Mreq</span><span class="op" id="3849464">(</span><span class="ident" id="3849465">fd</span><span class="op" id="3849467">.</span><span class="ident" id="3849468">sysfd</span><span class="op" id="3849473">,</span>&nbsp;<span class="ident" id="3849475">syscall</span><span class="op" id="3849482">.</span><span class="ident" id="3849483">IPPROTO_IPV6</span><span class="op" id="3849495">,</span>&nbsp;<span class="ident" id="3849497">syscall</span><span class="op" id="3849504">.</span><span class="ident" id="3849505">IPV6_JOIN_GROUP</span><span class="op" id="3849520">,</span>&nbsp;<span class="ident" id="3849522">mreq</span><span class="op" id="3849526">)</span><span class="op" id="3849527">)</span><br>
<span class="lineno"></span><span class="op" id="3849529">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
