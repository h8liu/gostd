<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5821787">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5821843">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5821897">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5821948">package</span>&nbsp;<span class="ident" id="5821956">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5821963">import</span>&nbsp;<span class="op" id="5821970">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5821973">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5821982">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5821992">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5821997">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5822000">type</span>&nbsp;<span class="ident" id="5822005">importReader</span>&nbsp;<span class="keyword" id="5822018">struct</span>&nbsp;<span class="op" id="5822025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822028">b</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5822033">*</span><span class="ident" id="5822034">bufio</span><span class="op" id="5822039">.</span><span class="ident" id="5822040">Reader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822048">buf</span>&nbsp;&nbsp;<span class="op" id="5822053">[</span><span class="op" id="5822054">]</span><span class="builtintype" id="5822055">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822061">peek</span>&nbsp;<span class="builtintype" id="5822066">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822072">err</span>&nbsp;&nbsp;<span class="builtintype" id="5822077">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822084">eof</span>&nbsp;&nbsp;<span class="builtintype" id="5822089">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822095">nerr</span>&nbsp;<span class="builtintype" id="5822100">int</span><br>
<span class="lineno">20</span><span class="op" id="5822104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5822107">func</span>&nbsp;<span class="ident" id="5822112">isIdent</span><span class="op" id="5822119">(</span><span class="ident" id="5822120">c</span>&nbsp;<span class="builtintype" id="5822122">byte</span><span class="op" id="5822126">)</span>&nbsp;<span class="builtintype" id="5822128">bool</span>&nbsp;<span class="op" id="5822133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822136">return</span>&nbsp;<span class="string" id="5822143">&#39;A&#39;</span>&nbsp;<span class="op" id="5822147">&lt;=</span>&nbsp;<span class="ident" id="5822150">c</span>&nbsp;<span class="op" id="5822152">&amp;&amp;</span>&nbsp;<span class="ident" id="5822155">c</span>&nbsp;<span class="op" id="5822157">&lt;=</span>&nbsp;<span class="string" id="5822160">&#39;Z&#39;</span>&nbsp;<span class="op" id="5822164">||</span>&nbsp;<span class="string" id="5822167">&#39;a&#39;</span>&nbsp;<span class="op" id="5822171">&lt;=</span>&nbsp;<span class="ident" id="5822174">c</span>&nbsp;<span class="op" id="5822176">&amp;&amp;</span>&nbsp;<span class="ident" id="5822179">c</span>&nbsp;<span class="op" id="5822181">&lt;=</span>&nbsp;<span class="string" id="5822184">&#39;z&#39;</span>&nbsp;<span class="op" id="5822188">||</span>&nbsp;<span class="string" id="5822191">&#39;0&#39;</span>&nbsp;<span class="op" id="5822195">&lt;=</span>&nbsp;<span class="ident" id="5822198">c</span>&nbsp;<span class="op" id="5822200">&amp;&amp;</span>&nbsp;<span class="ident" id="5822203">c</span>&nbsp;<span class="op" id="5822205">&lt;=</span>&nbsp;<span class="string" id="5822208">&#39;9&#39;</span>&nbsp;<span class="op" id="5822212">||</span>&nbsp;<span class="ident" id="5822215">c</span>&nbsp;<span class="op" id="5822217">==</span>&nbsp;<span class="string" id="5822220">&#39;_&#39;</span>&nbsp;<span class="op" id="5822224">||</span>&nbsp;<span class="ident" id="5822227">c</span>&nbsp;<span class="op" id="5822229">&gt;=</span>&nbsp;<span class="num" id="5822232">0x80</span><br>
<span class="lineno"></span><span class="op" id="5822237">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5822240">var</span>&nbsp;<span class="op" id="5822244">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822247">errSyntax</span>&nbsp;<span class="op" id="5822257">=</span>&nbsp;<span class="ident" id="5822259">errors</span><span class="op" id="5822265">.</span><span class="ident" id="5822266">New</span><span class="op" id="5822269">(</span><span class="string" id="5822270">&#34;syntax&nbsp;error&#34;</span><span class="op" id="5822284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822287">errNUL</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5822297">=</span>&nbsp;<span class="ident" id="5822299">errors</span><span class="op" id="5822305">.</span><span class="ident" id="5822306">New</span><span class="op" id="5822309">(</span><span class="string" id="5822310">&#34;unexpected&nbsp;NUL&nbsp;in&nbsp;input&#34;</span><span class="op" id="5822335">)</span><br>
<span class="lineno"></span><span class="op" id="5822337">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5822340">//&nbsp;syntaxError&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;but&nbsp;only&nbsp;if&nbsp;an&nbsp;I/O&nbsp;error&nbsp;has&nbsp;not&nbsp;already&nbsp;been&nbsp;recorded.</span><br>
<span class="lineno"></span><span class="keyword" id="5822435">func</span>&nbsp;<span class="op" id="5822440">(</span><span class="ident" id="5822441">r</span>&nbsp;<span class="op" id="5822443">*</span><span class="ident" id="5822444">importReader</span><span class="op" id="5822456">)</span>&nbsp;<span class="ident" id="5822458">syntaxError</span><span class="op" id="5822469">(</span><span class="op" id="5822470">)</span>&nbsp;<span class="op" id="5822472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822475">if</span>&nbsp;<span class="ident" id="5822478">r</span><span class="op" id="5822479">.</span><span class="ident" id="5822480">err</span>&nbsp;<span class="op" id="5822484">==</span>&nbsp;<span class="ident" id="5822487">nil</span>&nbsp;<span class="op" id="5822491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822495">r</span><span class="op" id="5822496">.</span><span class="ident" id="5822497">err</span>&nbsp;<span class="op" id="5822501">=</span>&nbsp;<span class="ident" id="5822503">errSyntax</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822514">}</span><br>
<span class="lineno"></span><span class="op" id="5822516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5822519">//&nbsp;readByte&nbsp;reads&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input,&nbsp;saves&nbsp;it&nbsp;in&nbsp;buf,&nbsp;and&nbsp;returns&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5822600">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;readByte&nbsp;records&nbsp;the&nbsp;error&nbsp;in&nbsp;r.err&nbsp;and&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="keyword" id="5822674">func</span>&nbsp;<span class="op" id="5822679">(</span><span class="ident" id="5822680">r</span>&nbsp;<span class="op" id="5822682">*</span><span class="ident" id="5822683">importReader</span><span class="op" id="5822695">)</span>&nbsp;<span class="ident" id="5822697">readByte</span><span class="op" id="5822705">(</span><span class="op" id="5822706">)</span>&nbsp;<span class="builtintype" id="5822708">byte</span>&nbsp;<span class="op" id="5822713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822716">c</span><span class="op" id="5822717">,</span>&nbsp;<span class="ident" id="5822719">err</span>&nbsp;<span class="op" id="5822723">:=</span>&nbsp;<span class="ident" id="5822726">r</span><span class="op" id="5822727">.</span><span class="ident" id="5822728">b</span><span class="op" id="5822729">.</span><span class="ident" id="5822730">ReadByte</span><span class="op" id="5822738">(</span><span class="op" id="5822739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822742">if</span>&nbsp;<span class="ident" id="5822745">err</span>&nbsp;<span class="op" id="5822749">==</span>&nbsp;<span class="ident" id="5822752">nil</span>&nbsp;<span class="op" id="5822756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822760">r</span><span class="op" id="5822761">.</span><span class="ident" id="5822762">buf</span>&nbsp;<span class="op" id="5822766">=</span>&nbsp;<span class="builtinfunc" id="5822768">append</span><span class="op" id="5822774">(</span><span class="ident" id="5822775">r</span><span class="op" id="5822776">.</span><span class="ident" id="5822777">buf</span><span class="op" id="5822780">,</span>&nbsp;<span class="ident" id="5822782">c</span><span class="op" id="5822783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822787">if</span>&nbsp;<span class="ident" id="5822790">c</span>&nbsp;<span class="op" id="5822792">==</span>&nbsp;<span class="num" id="5822795">0</span>&nbsp;<span class="op" id="5822797">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822802">err</span>&nbsp;<span class="op" id="5822806">=</span>&nbsp;<span class="ident" id="5822808">errNUL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822823">if</span>&nbsp;<span class="ident" id="5822826">err</span>&nbsp;<span class="op" id="5822830">!=</span>&nbsp;<span class="ident" id="5822833">nil</span>&nbsp;<span class="op" id="5822837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822841">if</span>&nbsp;<span class="ident" id="5822844">err</span>&nbsp;<span class="op" id="5822848">==</span>&nbsp;<span class="ident" id="5822851">io</span><span class="op" id="5822853">.</span><span class="ident" id="5822854">EOF</span>&nbsp;<span class="op" id="5822858">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822863">r</span><span class="op" id="5822864">.</span><span class="ident" id="5822865">eof</span>&nbsp;<span class="op" id="5822869">=</span>&nbsp;<span class="builtintype" id="5822871">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822878">}</span>&nbsp;<span class="keyword" id="5822880">else</span>&nbsp;<span class="keyword" id="5822885">if</span>&nbsp;<span class="ident" id="5822888">r</span><span class="op" id="5822889">.</span><span class="ident" id="5822890">err</span>&nbsp;<span class="op" id="5822894">==</span>&nbsp;<span class="ident" id="5822897">nil</span>&nbsp;<span class="op" id="5822901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822906">r</span><span class="op" id="5822907">.</span><span class="ident" id="5822908">err</span>&nbsp;<span class="op" id="5822912">=</span>&nbsp;<span class="ident" id="5822914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822924">c</span>&nbsp;<span class="op" id="5822926">=</span>&nbsp;<span class="num" id="5822928">0</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822934">return</span>&nbsp;<span class="ident" id="5822941">c</span><br>
<span class="lineno"></span><span class="op" id="5822943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5822946">//&nbsp;peekByte&nbsp;returns&nbsp;the&nbsp;next&nbsp;byte&nbsp;from&nbsp;the&nbsp;input&nbsp;reader&nbsp;but&nbsp;does&nbsp;not&nbsp;advance&nbsp;beyond&nbsp;it.</span><br>
<span class="lineno">60</span><span class="comment" id="5823034">//&nbsp;If&nbsp;skipSpace&nbsp;is&nbsp;set,&nbsp;peekByte&nbsp;skips&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;comments.</span><br>
<span class="lineno"></span><span class="keyword" id="5823102">func</span>&nbsp;<span class="op" id="5823107">(</span><span class="ident" id="5823108">r</span>&nbsp;<span class="op" id="5823110">*</span><span class="ident" id="5823111">importReader</span><span class="op" id="5823123">)</span>&nbsp;<span class="ident" id="5823125">peekByte</span><span class="op" id="5823133">(</span><span class="ident" id="5823134">skipSpace</span>&nbsp;<span class="builtintype" id="5823144">bool</span><span class="op" id="5823148">)</span>&nbsp;<span class="builtintype" id="5823150">byte</span>&nbsp;<span class="op" id="5823155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823158">if</span>&nbsp;<span class="ident" id="5823161">r</span><span class="op" id="5823162">.</span><span class="ident" id="5823163">err</span>&nbsp;<span class="op" id="5823167">!=</span>&nbsp;<span class="ident" id="5823170">nil</span>&nbsp;<span class="op" id="5823174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823178">if</span>&nbsp;<span class="ident" id="5823181">r</span><span class="op" id="5823182">.</span><span class="ident" id="5823183">nerr</span><span class="op" id="5823187">++</span><span class="op" id="5823189">;</span>&nbsp;<span class="ident" id="5823191">r</span><span class="op" id="5823192">.</span><span class="ident" id="5823193">nerr</span>&nbsp;<span class="op" id="5823198">&gt;</span>&nbsp;<span class="num" id="5823200">10000</span>&nbsp;<span class="op" id="5823206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5823211">panic</span><span class="op" id="5823216">(</span><span class="string" id="5823217">&#34;go/build:&nbsp;import&nbsp;reader&nbsp;looping&#34;</span><span class="op" id="5823250">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823258">return</span>&nbsp;<span class="num" id="5823265">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823272">//&nbsp;Use&nbsp;r.peek&nbsp;as&nbsp;first&nbsp;input&nbsp;byte.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823308">//&nbsp;Don&#39;t&nbsp;just&nbsp;return&nbsp;r.peek&nbsp;here:&nbsp;it&nbsp;might&nbsp;have&nbsp;been&nbsp;left&nbsp;by&nbsp;peekByte(false)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823386">//&nbsp;and&nbsp;this&nbsp;might&nbsp;be&nbsp;peekByte(true).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823424">c</span>&nbsp;<span class="op" id="5823426">:=</span>&nbsp;<span class="ident" id="5823429">r</span><span class="op" id="5823430">.</span><span class="ident" id="5823431">peek</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823437">if</span>&nbsp;<span class="ident" id="5823440">c</span>&nbsp;<span class="op" id="5823442">==</span>&nbsp;<span class="num" id="5823445">0</span>&nbsp;<span class="op" id="5823447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823451">c</span>&nbsp;<span class="op" id="5823453">=</span>&nbsp;<span class="ident" id="5823455">r</span><span class="op" id="5823456">.</span><span class="ident" id="5823457">readByte</span><span class="op" id="5823465">(</span><span class="op" id="5823466">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823472">for</span>&nbsp;<span class="ident" id="5823476">r</span><span class="op" id="5823477">.</span><span class="ident" id="5823478">err</span>&nbsp;<span class="op" id="5823482">==</span>&nbsp;<span class="ident" id="5823485">nil</span>&nbsp;<span class="op" id="5823489">&amp;&amp;</span>&nbsp;<span class="op" id="5823492">!</span><span class="ident" id="5823493">r</span><span class="op" id="5823494">.</span><span class="ident" id="5823495">eof</span>&nbsp;<span class="op" id="5823499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823503">if</span>&nbsp;<span class="ident" id="5823506">skipSpace</span>&nbsp;<span class="op" id="5823516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823521">//&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;reader,&nbsp;semicolons&nbsp;are&nbsp;never&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823594">//&nbsp;understand&nbsp;the&nbsp;input&nbsp;and&nbsp;are&nbsp;treated&nbsp;as&nbsp;spaces.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823648">switch</span>&nbsp;<span class="ident" id="5823655">c</span>&nbsp;<span class="op" id="5823657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823662">case</span>&nbsp;<span class="string" id="5823667">&#39;&nbsp;&#39;</span><span class="op" id="5823670">,</span>&nbsp;<span class="string" id="5823672">&#39;\f&#39;</span><span class="op" id="5823676">,</span>&nbsp;<span class="string" id="5823678">&#39;\t&#39;</span><span class="op" id="5823682">,</span>&nbsp;<span class="string" id="5823684">&#39;\r&#39;</span><span class="op" id="5823688">,</span>&nbsp;<span class="string" id="5823690">&#39;\n&#39;</span><span class="op" id="5823694">,</span>&nbsp;<span class="string" id="5823696">&#39;;&#39;</span><span class="op" id="5823699">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823705">c</span>&nbsp;<span class="op" id="5823707">=</span>&nbsp;<span class="ident" id="5823709">r</span><span class="op" id="5823710">.</span><span class="ident" id="5823711">readByte</span><span class="op" id="5823719">(</span><span class="op" id="5823720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823726">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823739">case</span>&nbsp;<span class="string" id="5823744">&#39;/&#39;</span><span class="op" id="5823747">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823753">c</span>&nbsp;<span class="op" id="5823755">=</span>&nbsp;<span class="ident" id="5823757">r</span><span class="op" id="5823758">.</span><span class="ident" id="5823759">readByte</span><span class="op" id="5823767">(</span><span class="op" id="5823768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823774">if</span>&nbsp;<span class="ident" id="5823777">c</span>&nbsp;<span class="op" id="5823779">==</span>&nbsp;<span class="string" id="5823782">&#39;/&#39;</span>&nbsp;<span class="op" id="5823786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823793">for</span>&nbsp;<span class="ident" id="5823797">c</span>&nbsp;<span class="op" id="5823799">!=</span>&nbsp;<span class="string" id="5823802">&#39;\n&#39;</span>&nbsp;<span class="op" id="5823807">&amp;&amp;</span>&nbsp;<span class="ident" id="5823810">r</span><span class="op" id="5823811">.</span><span class="ident" id="5823812">err</span>&nbsp;<span class="op" id="5823816">==</span>&nbsp;<span class="ident" id="5823819">nil</span>&nbsp;<span class="op" id="5823823">&amp;&amp;</span>&nbsp;<span class="op" id="5823826">!</span><span class="ident" id="5823827">r</span><span class="op" id="5823828">.</span><span class="ident" id="5823829">eof</span>&nbsp;<span class="op" id="5823833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823841">c</span>&nbsp;<span class="op" id="5823843">=</span>&nbsp;<span class="ident" id="5823845">r</span><span class="op" id="5823846">.</span><span class="ident" id="5823847">readByte</span><span class="op" id="5823855">(</span><span class="op" id="5823856">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823869">}</span>&nbsp;<span class="keyword" id="5823871">else</span>&nbsp;<span class="keyword" id="5823876">if</span>&nbsp;<span class="ident" id="5823879">c</span>&nbsp;<span class="op" id="5823881">==</span>&nbsp;<span class="string" id="5823884">&#39;*&#39;</span>&nbsp;<span class="op" id="5823888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823895">var</span>&nbsp;<span class="ident" id="5823899">c1</span>&nbsp;<span class="builtintype" id="5823902">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823912">for</span>&nbsp;<span class="op" id="5823916">(</span><span class="ident" id="5823917">c</span>&nbsp;<span class="op" id="5823919">!=</span>&nbsp;<span class="string" id="5823922">&#39;*&#39;</span>&nbsp;<span class="op" id="5823926">||</span>&nbsp;<span class="ident" id="5823929">c1</span>&nbsp;<span class="op" id="5823932">!=</span>&nbsp;<span class="string" id="5823935">&#39;/&#39;</span><span class="op" id="5823938">)</span>&nbsp;<span class="op" id="5823940">&amp;&amp;</span>&nbsp;<span class="ident" id="5823943">r</span><span class="op" id="5823944">.</span><span class="ident" id="5823945">err</span>&nbsp;<span class="op" id="5823949">==</span>&nbsp;<span class="ident" id="5823952">nil</span>&nbsp;<span class="op" id="5823956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823964">if</span>&nbsp;<span class="ident" id="5823967">r</span><span class="op" id="5823968">.</span><span class="ident" id="5823969">eof</span>&nbsp;<span class="op" id="5823973">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823982">r</span><span class="op" id="5823983">.</span><span class="ident" id="5823984">syntaxError</span><span class="op" id="5823995">(</span><span class="op" id="5823996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824012">c</span><span class="op" id="5824013">,</span>&nbsp;<span class="ident" id="5824015">c1</span>&nbsp;<span class="op" id="5824018">=</span>&nbsp;<span class="ident" id="5824020">c1</span><span class="op" id="5824022">,</span>&nbsp;<span class="ident" id="5824024">r</span><span class="op" id="5824025">.</span><span class="ident" id="5824026">readByte</span><span class="op" id="5824034">(</span><span class="op" id="5824035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824048">}</span>&nbsp;<span class="keyword" id="5824050">else</span>&nbsp;<span class="op" id="5824055">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824062">r</span><span class="op" id="5824063">.</span><span class="ident" id="5824064">syntaxError</span><span class="op" id="5824075">(</span><span class="op" id="5824076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824088">c</span>&nbsp;<span class="op" id="5824090">=</span>&nbsp;<span class="ident" id="5824092">r</span><span class="op" id="5824093">.</span><span class="ident" id="5824094">readByte</span><span class="op" id="5824102">(</span><span class="op" id="5824103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824109">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824121">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824129">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824139">r</span><span class="op" id="5824140">.</span><span class="ident" id="5824141">peek</span>&nbsp;<span class="op" id="5824146">=</span>&nbsp;<span class="ident" id="5824148">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824151">return</span>&nbsp;<span class="ident" id="5824158">r</span><span class="op" id="5824159">.</span><span class="ident" id="5824160">peek</span><br>
<span class="lineno">110</span><span class="op" id="5824165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5824168">//&nbsp;nextByte&nbsp;is&nbsp;like&nbsp;peekByte&nbsp;but&nbsp;advances&nbsp;beyond&nbsp;the&nbsp;returned&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="5824236">func</span>&nbsp;<span class="op" id="5824241">(</span><span class="ident" id="5824242">r</span>&nbsp;<span class="op" id="5824244">*</span><span class="ident" id="5824245">importReader</span><span class="op" id="5824257">)</span>&nbsp;<span class="ident" id="5824259">nextByte</span><span class="op" id="5824267">(</span><span class="ident" id="5824268">skipSpace</span>&nbsp;<span class="builtintype" id="5824278">bool</span><span class="op" id="5824282">)</span>&nbsp;<span class="builtintype" id="5824284">byte</span>&nbsp;<span class="op" id="5824289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824292">c</span>&nbsp;<span class="op" id="5824294">:=</span>&nbsp;<span class="ident" id="5824297">r</span><span class="op" id="5824298">.</span><span class="ident" id="5824299">peekByte</span><span class="op" id="5824307">(</span><span class="ident" id="5824308">skipSpace</span><span class="op" id="5824317">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824320">r</span><span class="op" id="5824321">.</span><span class="ident" id="5824322">peek</span>&nbsp;<span class="op" id="5824327">=</span>&nbsp;<span class="num" id="5824329">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824332">return</span>&nbsp;<span class="ident" id="5824339">c</span><br>
<span class="lineno"></span><span class="op" id="5824341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5824344">//&nbsp;readKeyword&nbsp;reads&nbsp;the&nbsp;given&nbsp;keyword&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">120</span><span class="comment" id="5824399">//&nbsp;If&nbsp;the&nbsp;keyword&nbsp;is&nbsp;not&nbsp;present,&nbsp;readKeyword&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5824469">func</span>&nbsp;<span class="op" id="5824474">(</span><span class="ident" id="5824475">r</span>&nbsp;<span class="op" id="5824477">*</span><span class="ident" id="5824478">importReader</span><span class="op" id="5824490">)</span>&nbsp;<span class="ident" id="5824492">readKeyword</span><span class="op" id="5824503">(</span><span class="ident" id="5824504">kw</span>&nbsp;<span class="builtintype" id="5824507">string</span><span class="op" id="5824513">)</span>&nbsp;<span class="op" id="5824515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824518">r</span><span class="op" id="5824519">.</span><span class="ident" id="5824520">peekByte</span><span class="op" id="5824528">(</span><span class="builtintype" id="5824529">true</span><span class="op" id="5824533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824536">for</span>&nbsp;<span class="ident" id="5824540">i</span>&nbsp;<span class="op" id="5824542">:=</span>&nbsp;<span class="num" id="5824545">0</span><span class="op" id="5824546">;</span>&nbsp;<span class="ident" id="5824548">i</span>&nbsp;<span class="op" id="5824550">&lt;</span>&nbsp;<span class="builtinfunc" id="5824552">len</span><span class="op" id="5824555">(</span><span class="ident" id="5824556">kw</span><span class="op" id="5824558">)</span><span class="op" id="5824559">;</span>&nbsp;<span class="ident" id="5824561">i</span><span class="op" id="5824562">++</span>&nbsp;<span class="op" id="5824565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824569">if</span>&nbsp;<span class="ident" id="5824572">r</span><span class="op" id="5824573">.</span><span class="ident" id="5824574">nextByte</span><span class="op" id="5824582">(</span><span class="builtintype" id="5824583">false</span><span class="op" id="5824588">)</span>&nbsp;<span class="op" id="5824590">!=</span>&nbsp;<span class="ident" id="5824593">kw</span><span class="op" id="5824595">[</span><span class="ident" id="5824596">i</span><span class="op" id="5824597">]</span>&nbsp;<span class="op" id="5824599">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824604">r</span><span class="op" id="5824605">.</span><span class="ident" id="5824606">syntaxError</span><span class="op" id="5824617">(</span><span class="op" id="5824618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824623">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824638">if</span>&nbsp;<span class="ident" id="5824641">isIdent</span><span class="op" id="5824648">(</span><span class="ident" id="5824649">r</span><span class="op" id="5824650">.</span><span class="ident" id="5824651">peekByte</span><span class="op" id="5824659">(</span><span class="builtintype" id="5824660">false</span><span class="op" id="5824665">)</span><span class="op" id="5824666">)</span>&nbsp;<span class="op" id="5824668">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824672">r</span><span class="op" id="5824673">.</span><span class="ident" id="5824674">syntaxError</span><span class="op" id="5824685">(</span><span class="op" id="5824686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824689">}</span><br>
<span class="lineno"></span><span class="op" id="5824691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5824694">//&nbsp;readIdent&nbsp;reads&nbsp;an&nbsp;identifier&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">135</span><span class="comment" id="5824743">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readIdent&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5824813">func</span>&nbsp;<span class="op" id="5824818">(</span><span class="ident" id="5824819">r</span>&nbsp;<span class="op" id="5824821">*</span><span class="ident" id="5824822">importReader</span><span class="op" id="5824834">)</span>&nbsp;<span class="ident" id="5824836">readIdent</span><span class="op" id="5824845">(</span><span class="op" id="5824846">)</span>&nbsp;<span class="op" id="5824848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824851">c</span>&nbsp;<span class="op" id="5824853">:=</span>&nbsp;<span class="ident" id="5824856">r</span><span class="op" id="5824857">.</span><span class="ident" id="5824858">peekByte</span><span class="op" id="5824866">(</span><span class="builtintype" id="5824867">true</span><span class="op" id="5824871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824874">if</span>&nbsp;<span class="op" id="5824877">!</span><span class="ident" id="5824878">isIdent</span><span class="op" id="5824885">(</span><span class="ident" id="5824886">c</span><span class="op" id="5824887">)</span>&nbsp;<span class="op" id="5824889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824893">r</span><span class="op" id="5824894">.</span><span class="ident" id="5824895">syntaxError</span><span class="op" id="5824906">(</span><span class="op" id="5824907">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824911">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824922">for</span>&nbsp;<span class="ident" id="5824926">isIdent</span><span class="op" id="5824933">(</span><span class="ident" id="5824934">r</span><span class="op" id="5824935">.</span><span class="ident" id="5824936">peekByte</span><span class="op" id="5824944">(</span><span class="builtintype" id="5824945">false</span><span class="op" id="5824950">)</span><span class="op" id="5824951">)</span>&nbsp;<span class="op" id="5824953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824957">r</span><span class="op" id="5824958">.</span><span class="ident" id="5824959">peek</span>&nbsp;<span class="op" id="5824964">=</span>&nbsp;<span class="num" id="5824966">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824969">}</span><br>
<span class="lineno">145</span><span class="op" id="5824971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5824974">//&nbsp;readString&nbsp;reads&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="5825034">//&nbsp;If&nbsp;an&nbsp;identifier&nbsp;is&nbsp;not&nbsp;present,&nbsp;readString&nbsp;records&nbsp;a&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5825105">func</span>&nbsp;<span class="op" id="5825110">(</span><span class="ident" id="5825111">r</span>&nbsp;<span class="op" id="5825113">*</span><span class="ident" id="5825114">importReader</span><span class="op" id="5825126">)</span>&nbsp;<span class="ident" id="5825128">readString</span><span class="op" id="5825138">(</span><span class="op" id="5825139">)</span>&nbsp;<span class="op" id="5825141">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825144">switch</span>&nbsp;<span class="ident" id="5825151">r</span><span class="op" id="5825152">.</span><span class="ident" id="5825153">nextByte</span><span class="op" id="5825161">(</span><span class="builtintype" id="5825162">true</span><span class="op" id="5825166">)</span>&nbsp;<span class="op" id="5825168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825171">case</span>&nbsp;<span class="string" id="5825176">&#39;`&#39;</span><span class="op" id="5825179">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825183">for</span>&nbsp;<span class="ident" id="5825187">r</span><span class="op" id="5825188">.</span><span class="ident" id="5825189">err</span>&nbsp;<span class="op" id="5825193">==</span>&nbsp;<span class="ident" id="5825196">nil</span>&nbsp;<span class="op" id="5825200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825205">if</span>&nbsp;<span class="ident" id="5825208">r</span><span class="op" id="5825209">.</span><span class="ident" id="5825210">nextByte</span><span class="op" id="5825218">(</span><span class="builtintype" id="5825219">false</span><span class="op" id="5825224">)</span>&nbsp;<span class="op" id="5825226">==</span>&nbsp;<span class="string" id="5825229">&#39;`&#39;</span>&nbsp;<span class="op" id="5825233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825239">break</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825253">if</span>&nbsp;<span class="ident" id="5825256">r</span><span class="op" id="5825257">.</span><span class="ident" id="5825258">eof</span>&nbsp;<span class="op" id="5825262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825268">r</span><span class="op" id="5825269">.</span><span class="ident" id="5825270">syntaxError</span><span class="op" id="5825281">(</span><span class="op" id="5825282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825291">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825294">case</span>&nbsp;<span class="string" id="5825299">&#39;&#34;&#39;</span><span class="op" id="5825302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825306">for</span>&nbsp;<span class="ident" id="5825310">r</span><span class="op" id="5825311">.</span><span class="ident" id="5825312">err</span>&nbsp;<span class="op" id="5825316">==</span>&nbsp;<span class="ident" id="5825319">nil</span>&nbsp;<span class="op" id="5825323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825328">c</span>&nbsp;<span class="op" id="5825330">:=</span>&nbsp;<span class="ident" id="5825333">r</span><span class="op" id="5825334">.</span><span class="ident" id="5825335">nextByte</span><span class="op" id="5825343">(</span><span class="builtintype" id="5825344">false</span><span class="op" id="5825349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825354">if</span>&nbsp;<span class="ident" id="5825357">c</span>&nbsp;<span class="op" id="5825359">==</span>&nbsp;<span class="string" id="5825362">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5825366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825372">break</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825386">if</span>&nbsp;<span class="ident" id="5825389">r</span><span class="op" id="5825390">.</span><span class="ident" id="5825391">eof</span>&nbsp;<span class="op" id="5825395">||</span>&nbsp;<span class="ident" id="5825398">c</span>&nbsp;<span class="op" id="5825400">==</span>&nbsp;<span class="string" id="5825403">&#39;\n&#39;</span>&nbsp;<span class="op" id="5825408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825414">r</span><span class="op" id="5825415">.</span><span class="ident" id="5825416">syntaxError</span><span class="op" id="5825427">(</span><span class="op" id="5825428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825438">if</span>&nbsp;<span class="ident" id="5825441">c</span>&nbsp;<span class="op" id="5825443">==</span>&nbsp;<span class="string" id="5825446">&#39;\\&#39;</span>&nbsp;<span class="op" id="5825451">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825457">r</span><span class="op" id="5825458">.</span><span class="ident" id="5825459">nextByte</span><span class="op" id="5825467">(</span><span class="builtintype" id="5825468">false</span><span class="op" id="5825473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825485">default</span><span class="op" id="5825492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825496">r</span><span class="op" id="5825497">.</span><span class="ident" id="5825498">syntaxError</span><span class="op" id="5825509">(</span><span class="op" id="5825510">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825513">}</span><br>
<span class="lineno"></span><span class="op" id="5825515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5825518">//&nbsp;readImport&nbsp;reads&nbsp;an&nbsp;import&nbsp;clause&nbsp;-&nbsp;optional&nbsp;identifier&nbsp;followed&nbsp;by&nbsp;quoted&nbsp;string&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="5825605">//&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">180</span><span class="keyword" id="5825624">func</span>&nbsp;<span class="op" id="5825629">(</span><span class="ident" id="5825630">r</span>&nbsp;<span class="op" id="5825632">*</span><span class="ident" id="5825633">importReader</span><span class="op" id="5825645">)</span>&nbsp;<span class="ident" id="5825647">readImport</span><span class="op" id="5825657">(</span><span class="op" id="5825658">)</span>&nbsp;<span class="op" id="5825660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825663">c</span>&nbsp;<span class="op" id="5825665">:=</span>&nbsp;<span class="ident" id="5825668">r</span><span class="op" id="5825669">.</span><span class="ident" id="5825670">peekByte</span><span class="op" id="5825678">(</span><span class="builtintype" id="5825679">true</span><span class="op" id="5825683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825686">if</span>&nbsp;<span class="ident" id="5825689">c</span>&nbsp;<span class="op" id="5825691">==</span>&nbsp;<span class="string" id="5825694">&#39;.&#39;</span>&nbsp;<span class="op" id="5825698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825702">r</span><span class="op" id="5825703">.</span><span class="ident" id="5825704">peek</span>&nbsp;<span class="op" id="5825709">=</span>&nbsp;<span class="num" id="5825711">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825714">}</span>&nbsp;<span class="keyword" id="5825716">else</span>&nbsp;<span class="keyword" id="5825721">if</span>&nbsp;<span class="ident" id="5825724">isIdent</span><span class="op" id="5825731">(</span><span class="ident" id="5825732">c</span><span class="op" id="5825733">)</span>&nbsp;<span class="op" id="5825735">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825739">r</span><span class="op" id="5825740">.</span><span class="ident" id="5825741">readIdent</span><span class="op" id="5825750">(</span><span class="op" id="5825751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825757">r</span><span class="op" id="5825758">.</span><span class="ident" id="5825759">readString</span><span class="op" id="5825769">(</span><span class="op" id="5825770">)</span><br>
<span class="lineno"></span><span class="op" id="5825772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5825775">//&nbsp;readComments&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;only&nbsp;reads&nbsp;the&nbsp;leading</span><br>
<span class="lineno"></span><span class="comment" id="5825853">//&nbsp;block&nbsp;of&nbsp;comments&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5825887">func</span>&nbsp;<span class="ident" id="5825892">readComments</span><span class="op" id="5825904">(</span><span class="ident" id="5825905">f</span>&nbsp;<span class="ident" id="5825907">io</span><span class="op" id="5825909">.</span><span class="ident" id="5825910">Reader</span><span class="op" id="5825916">)</span>&nbsp;<span class="op" id="5825918">(</span><span class="op" id="5825919">[</span><span class="op" id="5825920">]</span><span class="builtintype" id="5825921">byte</span><span class="op" id="5825925">,</span>&nbsp;<span class="builtintype" id="5825927">error</span><span class="op" id="5825932">)</span>&nbsp;<span class="op" id="5825934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825937">r</span>&nbsp;<span class="op" id="5825939">:=</span>&nbsp;<span class="op" id="5825942">&amp;</span><span class="ident" id="5825943">importReader</span><span class="op" id="5825955">{</span><span class="ident" id="5825956">b</span><span class="op" id="5825957">:</span>&nbsp;<span class="ident" id="5825959">bufio</span><span class="op" id="5825964">.</span><span class="ident" id="5825965">NewReader</span><span class="op" id="5825974">(</span><span class="ident" id="5825975">f</span><span class="op" id="5825976">)</span><span class="op" id="5825977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825980">r</span><span class="op" id="5825981">.</span><span class="ident" id="5825982">peekByte</span><span class="op" id="5825990">(</span><span class="builtintype" id="5825991">true</span><span class="op" id="5825995">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825998">if</span>&nbsp;<span class="ident" id="5826001">r</span><span class="op" id="5826002">.</span><span class="ident" id="5826003">err</span>&nbsp;<span class="op" id="5826007">==</span>&nbsp;<span class="ident" id="5826010">nil</span>&nbsp;<span class="op" id="5826014">&amp;&amp;</span>&nbsp;<span class="op" id="5826017">!</span><span class="ident" id="5826018">r</span><span class="op" id="5826019">.</span><span class="ident" id="5826020">eof</span>&nbsp;<span class="op" id="5826024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826028">//&nbsp;Didn&#39;t&nbsp;reach&nbsp;EOF,&nbsp;so&nbsp;must&nbsp;have&nbsp;found&nbsp;a&nbsp;non-space&nbsp;byte.&nbsp;Remove&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826099">r</span><span class="op" id="5826100">.</span><span class="ident" id="5826101">buf</span>&nbsp;<span class="op" id="5826105">=</span>&nbsp;<span class="ident" id="5826107">r</span><span class="op" id="5826108">.</span><span class="ident" id="5826109">buf</span><span class="op" id="5826112">[</span><span class="op" id="5826113">:</span><span class="builtinfunc" id="5826114">len</span><span class="op" id="5826117">(</span><span class="ident" id="5826118">r</span><span class="op" id="5826119">.</span><span class="ident" id="5826120">buf</span><span class="op" id="5826123">)</span><span class="op" id="5826124">-</span><span class="num" id="5826125">1</span><span class="op" id="5826126">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826132">return</span>&nbsp;<span class="ident" id="5826139">r</span><span class="op" id="5826140">.</span><span class="ident" id="5826141">buf</span><span class="op" id="5826144">,</span>&nbsp;<span class="ident" id="5826146">r</span><span class="op" id="5826147">.</span><span class="ident" id="5826148">err</span><br>
<span class="lineno">200</span><span class="op" id="5826152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5826155">//&nbsp;readImports&nbsp;is&nbsp;like&nbsp;ioutil.ReadAll,&nbsp;except&nbsp;that&nbsp;it&nbsp;expects&nbsp;a&nbsp;Go&nbsp;file&nbsp;as&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="5826236">//&nbsp;and&nbsp;stops&nbsp;reading&nbsp;the&nbsp;input&nbsp;once&nbsp;the&nbsp;imports&nbsp;have&nbsp;completed.</span><br>
<span class="lineno"></span><span class="keyword" id="5826300">func</span>&nbsp;<span class="ident" id="5826305">readImports</span><span class="op" id="5826316">(</span><span class="ident" id="5826317">f</span>&nbsp;<span class="ident" id="5826319">io</span><span class="op" id="5826321">.</span><span class="ident" id="5826322">Reader</span><span class="op" id="5826328">,</span>&nbsp;<span class="ident" id="5826330">reportSyntaxError</span>&nbsp;<span class="builtintype" id="5826348">bool</span><span class="op" id="5826352">)</span>&nbsp;<span class="op" id="5826354">(</span><span class="op" id="5826355">[</span><span class="op" id="5826356">]</span><span class="builtintype" id="5826357">byte</span><span class="op" id="5826361">,</span>&nbsp;<span class="builtintype" id="5826363">error</span><span class="op" id="5826368">)</span>&nbsp;<span class="op" id="5826370">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826373">r</span>&nbsp;<span class="op" id="5826375">:=</span>&nbsp;<span class="op" id="5826378">&amp;</span><span class="ident" id="5826379">importReader</span><span class="op" id="5826391">{</span><span class="ident" id="5826392">b</span><span class="op" id="5826393">:</span>&nbsp;<span class="ident" id="5826395">bufio</span><span class="op" id="5826400">.</span><span class="ident" id="5826401">NewReader</span><span class="op" id="5826410">(</span><span class="ident" id="5826411">f</span><span class="op" id="5826412">)</span><span class="op" id="5826413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826417">r</span><span class="op" id="5826418">.</span><span class="ident" id="5826419">readKeyword</span><span class="op" id="5826430">(</span><span class="string" id="5826431">&#34;package&#34;</span><span class="op" id="5826440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826443">r</span><span class="op" id="5826444">.</span><span class="ident" id="5826445">readIdent</span><span class="op" id="5826454">(</span><span class="op" id="5826455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826458">for</span>&nbsp;<span class="ident" id="5826462">r</span><span class="op" id="5826463">.</span><span class="ident" id="5826464">peekByte</span><span class="op" id="5826472">(</span><span class="builtintype" id="5826473">true</span><span class="op" id="5826477">)</span>&nbsp;<span class="op" id="5826479">==</span>&nbsp;<span class="string" id="5826482">&#39;i&#39;</span>&nbsp;<span class="op" id="5826486">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826490">r</span><span class="op" id="5826491">.</span><span class="ident" id="5826492">readKeyword</span><span class="op" id="5826503">(</span><span class="string" id="5826504">&#34;import&#34;</span><span class="op" id="5826512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826516">if</span>&nbsp;<span class="ident" id="5826519">r</span><span class="op" id="5826520">.</span><span class="ident" id="5826521">peekByte</span><span class="op" id="5826529">(</span><span class="builtintype" id="5826530">true</span><span class="op" id="5826534">)</span>&nbsp;<span class="op" id="5826536">==</span>&nbsp;<span class="string" id="5826539">&#39;(&#39;</span>&nbsp;<span class="op" id="5826543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826548">r</span><span class="op" id="5826549">.</span><span class="ident" id="5826550">nextByte</span><span class="op" id="5826558">(</span><span class="builtintype" id="5826559">false</span><span class="op" id="5826564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826569">for</span>&nbsp;<span class="ident" id="5826573">r</span><span class="op" id="5826574">.</span><span class="ident" id="5826575">peekByte</span><span class="op" id="5826583">(</span><span class="builtintype" id="5826584">true</span><span class="op" id="5826588">)</span>&nbsp;<span class="op" id="5826590">!=</span>&nbsp;<span class="string" id="5826593">&#39;)&#39;</span>&nbsp;<span class="op" id="5826597">&amp;&amp;</span>&nbsp;<span class="ident" id="5826600">r</span><span class="op" id="5826601">.</span><span class="ident" id="5826602">err</span>&nbsp;<span class="op" id="5826606">==</span>&nbsp;<span class="ident" id="5826609">nil</span>&nbsp;<span class="op" id="5826613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826619">r</span><span class="op" id="5826620">.</span><span class="ident" id="5826621">readImport</span><span class="op" id="5826631">(</span><span class="op" id="5826632">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826642">r</span><span class="op" id="5826643">.</span><span class="ident" id="5826644">nextByte</span><span class="op" id="5826652">(</span><span class="builtintype" id="5826653">false</span><span class="op" id="5826658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826662">}</span>&nbsp;<span class="keyword" id="5826664">else</span>&nbsp;<span class="op" id="5826669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826674">r</span><span class="op" id="5826675">.</span><span class="ident" id="5826676">readImport</span><span class="op" id="5826686">(</span><span class="op" id="5826687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826691">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826698">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;successfully&nbsp;before&nbsp;EOF,&nbsp;we&nbsp;read&nbsp;a&nbsp;byte&nbsp;that&nbsp;told&nbsp;us&nbsp;we&nbsp;were&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826783">//&nbsp;Return&nbsp;all&nbsp;but&nbsp;that&nbsp;last&nbsp;byte,&nbsp;which&nbsp;would&nbsp;cause&nbsp;a&nbsp;syntax&nbsp;error&nbsp;if&nbsp;we&nbsp;let&nbsp;it&nbsp;through.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826873">if</span>&nbsp;<span class="ident" id="5826876">r</span><span class="op" id="5826877">.</span><span class="ident" id="5826878">err</span>&nbsp;<span class="op" id="5826882">==</span>&nbsp;<span class="ident" id="5826885">nil</span>&nbsp;<span class="op" id="5826889">&amp;&amp;</span>&nbsp;<span class="op" id="5826892">!</span><span class="ident" id="5826893">r</span><span class="op" id="5826894">.</span><span class="ident" id="5826895">eof</span>&nbsp;<span class="op" id="5826899">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826903">return</span>&nbsp;<span class="ident" id="5826910">r</span><span class="op" id="5826911">.</span><span class="ident" id="5826912">buf</span><span class="op" id="5826915">[</span><span class="op" id="5826916">:</span><span class="builtinfunc" id="5826917">len</span><span class="op" id="5826920">(</span><span class="ident" id="5826921">r</span><span class="op" id="5826922">.</span><span class="ident" id="5826923">buf</span><span class="op" id="5826926">)</span><span class="op" id="5826927">-</span><span class="num" id="5826928">1</span><span class="op" id="5826929">]</span><span class="op" id="5826930">,</span>&nbsp;<span class="ident" id="5826932">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826941">//&nbsp;If&nbsp;we&nbsp;stopped&nbsp;for&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;consume&nbsp;the&nbsp;whole&nbsp;file&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5827010">//&nbsp;we&nbsp;are&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;the&nbsp;errors&nbsp;that&nbsp;go/parser&nbsp;returns.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827077">if</span>&nbsp;<span class="ident" id="5827080">r</span><span class="op" id="5827081">.</span><span class="ident" id="5827082">err</span>&nbsp;<span class="op" id="5827086">==</span>&nbsp;<span class="ident" id="5827089">errSyntax</span>&nbsp;<span class="op" id="5827099">&amp;&amp;</span>&nbsp;<span class="op" id="5827102">!</span><span class="ident" id="5827103">reportSyntaxError</span>&nbsp;<span class="op" id="5827121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827125">r</span><span class="op" id="5827126">.</span><span class="ident" id="5827127">err</span>&nbsp;<span class="op" id="5827131">=</span>&nbsp;<span class="ident" id="5827133">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827139">for</span>&nbsp;<span class="ident" id="5827143">r</span><span class="op" id="5827144">.</span><span class="ident" id="5827145">err</span>&nbsp;<span class="op" id="5827149">==</span>&nbsp;<span class="ident" id="5827152">nil</span>&nbsp;<span class="op" id="5827156">&amp;&amp;</span>&nbsp;<span class="op" id="5827159">!</span><span class="ident" id="5827160">r</span><span class="op" id="5827161">.</span><span class="ident" id="5827162">eof</span>&nbsp;<span class="op" id="5827166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827171">r</span><span class="op" id="5827172">.</span><span class="ident" id="5827173">readByte</span><span class="op" id="5827181">(</span><span class="op" id="5827182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827186">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827193">return</span>&nbsp;<span class="ident" id="5827200">r</span><span class="op" id="5827201">.</span><span class="ident" id="5827202">buf</span><span class="op" id="5827205">,</span>&nbsp;<span class="ident" id="5827207">r</span><span class="op" id="5827208">.</span><span class="ident" id="5827209">err</span><br>
<span class="lineno"></span><span class="op" id="5827213">}</span>
</div>
</body>
</html>
