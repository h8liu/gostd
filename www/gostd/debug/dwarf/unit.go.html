<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html" class="current">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2018389">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2018445">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2018499">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2018550">package</span>&nbsp;<span class="ident" id="2018558">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2018565">import</span>&nbsp;<span class="string" id="2018572">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2018583">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="2018650">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2018713">type</span>&nbsp;<span class="ident" id="2018718">unit</span>&nbsp;<span class="keyword" id="2018723">struct</span>&nbsp;<span class="op" id="2018730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018733">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2018740">Offset</span>&nbsp;<span class="comment" id="2018747">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018799">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018806">Offset</span>&nbsp;<span class="comment" id="2018813">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018863">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2018870">[</span><span class="op" id="2018871">]</span><span class="builtintype" id="2018872">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018878">atable</span>&nbsp;<span class="ident" id="2018885">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018898">asize</span>&nbsp;&nbsp;<span class="builtintype" id="2018905">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018910">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2018917">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2018922">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2018929">bool</span>&nbsp;<span class="comment" id="2018934">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="2018966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2018969">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2019009">func</span>&nbsp;<span class="op" id="2019014">(</span><span class="ident" id="2019015">u</span>&nbsp;<span class="op" id="2019017">*</span><span class="ident" id="2019018">unit</span><span class="op" id="2019022">)</span>&nbsp;<span class="ident" id="2019024">version</span><span class="op" id="2019031">(</span><span class="op" id="2019032">)</span>&nbsp;<span class="builtintype" id="2019034">int</span>&nbsp;<span class="op" id="2019038">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019041">return</span>&nbsp;<span class="ident" id="2019048">u</span><span class="op" id="2019049">.</span><span class="ident" id="2019050">vers</span><br>
<span class="lineno"></span><span class="op" id="2019055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2019058">func</span>&nbsp;<span class="op" id="2019063">(</span><span class="ident" id="2019064">u</span>&nbsp;<span class="op" id="2019066">*</span><span class="ident" id="2019067">unit</span><span class="op" id="2019071">)</span>&nbsp;<span class="ident" id="2019073">dwarf64</span><span class="op" id="2019080">(</span><span class="op" id="2019081">)</span>&nbsp;<span class="op" id="2019083">(</span><span class="builtintype" id="2019084">bool</span><span class="op" id="2019088">,</span>&nbsp;<span class="builtintype" id="2019090">bool</span><span class="op" id="2019094">)</span>&nbsp;<span class="op" id="2019096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019099">return</span>&nbsp;<span class="ident" id="2019106">u</span><span class="op" id="2019107">.</span><span class="ident" id="2019108">is64</span><span class="op" id="2019112">,</span>&nbsp;<span class="builtintype" id="2019114">true</span><br>
<span class="lineno">30</span><span class="op" id="2019119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2019122">func</span>&nbsp;<span class="op" id="2019127">(</span><span class="ident" id="2019128">u</span>&nbsp;<span class="op" id="2019130">*</span><span class="ident" id="2019131">unit</span><span class="op" id="2019135">)</span>&nbsp;<span class="ident" id="2019137">addrsize</span><span class="op" id="2019145">(</span><span class="op" id="2019146">)</span>&nbsp;<span class="builtintype" id="2019148">int</span>&nbsp;<span class="op" id="2019152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019155">return</span>&nbsp;<span class="ident" id="2019162">u</span><span class="op" id="2019163">.</span><span class="ident" id="2019164">asize</span><br>
<span class="lineno"></span><span class="op" id="2019170">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="2019173">func</span>&nbsp;<span class="op" id="2019178">(</span><span class="ident" id="2019179">d</span>&nbsp;<span class="op" id="2019181">*</span><span class="ident" id="2019182">Data</span><span class="op" id="2019186">)</span>&nbsp;<span class="ident" id="2019188">parseUnits</span><span class="op" id="2019198">(</span><span class="op" id="2019199">)</span>&nbsp;<span class="op" id="2019201">(</span><span class="op" id="2019202">[</span><span class="op" id="2019203">]</span><span class="ident" id="2019204">unit</span><span class="op" id="2019208">,</span>&nbsp;<span class="builtintype" id="2019210">error</span><span class="op" id="2019215">)</span>&nbsp;<span class="op" id="2019217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2019220">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019237">nunit</span>&nbsp;<span class="op" id="2019243">:=</span>&nbsp;<span class="num" id="2019246">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019249">b</span>&nbsp;<span class="op" id="2019251">:=</span>&nbsp;<span class="ident" id="2019254">makeBuf</span><span class="op" id="2019261">(</span><span class="ident" id="2019262">d</span><span class="op" id="2019263">,</span>&nbsp;<span class="ident" id="2019265">unknownFormat</span><span class="op" id="2019278">{</span><span class="op" id="2019279">}</span><span class="op" id="2019280">,</span>&nbsp;<span class="string" id="2019282">&#34;info&#34;</span><span class="op" id="2019288">,</span>&nbsp;<span class="num" id="2019290">0</span><span class="op" id="2019291">,</span>&nbsp;<span class="ident" id="2019293">d</span><span class="op" id="2019294">.</span><span class="ident" id="2019295">info</span><span class="op" id="2019299">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019302">for</span>&nbsp;<span class="builtinfunc" id="2019306">len</span><span class="op" id="2019309">(</span><span class="ident" id="2019310">b</span><span class="op" id="2019311">.</span><span class="ident" id="2019312">data</span><span class="op" id="2019316">)</span>&nbsp;<span class="op" id="2019318">&gt;</span>&nbsp;<span class="num" id="2019320">0</span>&nbsp;<span class="op" id="2019322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2019326">len</span>&nbsp;<span class="op" id="2019330">:=</span>&nbsp;<span class="ident" id="2019333">b</span><span class="op" id="2019334">.</span><span class="builtintype" id="2019335">uint32</span><span class="op" id="2019341">(</span><span class="op" id="2019342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019346">if</span>&nbsp;<span class="builtinfunc" id="2019349">len</span>&nbsp;<span class="op" id="2019353">==</span>&nbsp;<span class="num" id="2019356">0xffffffff</span>&nbsp;<span class="op" id="2019367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019372">len64</span>&nbsp;<span class="op" id="2019378">:=</span>&nbsp;<span class="ident" id="2019381">b</span><span class="op" id="2019382">.</span><span class="ident" id="2019383">uint64</span><span class="op" id="2019389">(</span><span class="op" id="2019390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019395">if</span>&nbsp;<span class="ident" id="2019398">len64</span>&nbsp;<span class="op" id="2019404">!=</span>&nbsp;<span class="ident" id="2019407">uint64</span><span class="op" id="2019413">(</span><span class="builtintype" id="2019414">uint32</span><span class="op" id="2019420">(</span><span class="ident" id="2019421">len64</span><span class="op" id="2019426">)</span><span class="op" id="2019427">)</span>&nbsp;<span class="op" id="2019429">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019435">b</span><span class="op" id="2019436">.</span><span class="builtintype" id="2019437">error</span><span class="op" id="2019442">(</span><span class="string" id="2019443">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="2019465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019471">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2019485">len</span>&nbsp;<span class="op" id="2019489">=</span>&nbsp;<span class="builtintype" id="2019491">uint32</span><span class="op" id="2019497">(</span><span class="ident" id="2019498">len64</span><span class="op" id="2019503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019507">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019511">b</span><span class="op" id="2019512">.</span><span class="ident" id="2019513">skip</span><span class="op" id="2019517">(</span><span class="builtintype" id="2019518">int</span><span class="op" id="2019521">(</span><span class="builtinfunc" id="2019522">len</span><span class="op" id="2019525">)</span><span class="op" id="2019526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019530">nunit</span><span class="op" id="2019535">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019542">if</span>&nbsp;<span class="ident" id="2019545">b</span><span class="op" id="2019546">.</span><span class="ident" id="2019547">err</span>&nbsp;<span class="op" id="2019551">!=</span>&nbsp;<span class="ident" id="2019554">nil</span>&nbsp;<span class="op" id="2019558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019562">return</span>&nbsp;<span class="ident" id="2019569">nil</span><span class="op" id="2019572">,</span>&nbsp;<span class="ident" id="2019574">b</span><span class="op" id="2019575">.</span><span class="ident" id="2019576">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2019585">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019625">b</span>&nbsp;<span class="op" id="2019627">=</span>&nbsp;<span class="ident" id="2019629">makeBuf</span><span class="op" id="2019636">(</span><span class="ident" id="2019637">d</span><span class="op" id="2019638">,</span>&nbsp;<span class="ident" id="2019640">unknownFormat</span><span class="op" id="2019653">{</span><span class="op" id="2019654">}</span><span class="op" id="2019655">,</span>&nbsp;<span class="string" id="2019657">&#34;info&#34;</span><span class="op" id="2019663">,</span>&nbsp;<span class="num" id="2019665">0</span><span class="op" id="2019666">,</span>&nbsp;<span class="ident" id="2019668">d</span><span class="op" id="2019669">.</span><span class="ident" id="2019670">info</span><span class="op" id="2019674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019677">units</span>&nbsp;<span class="op" id="2019683">:=</span>&nbsp;<span class="builtinfunc" id="2019686">make</span><span class="op" id="2019690">(</span><span class="op" id="2019691">[</span><span class="op" id="2019692">]</span><span class="ident" id="2019693">unit</span><span class="op" id="2019697">,</span>&nbsp;<span class="ident" id="2019699">nunit</span><span class="op" id="2019704">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019707">for</span>&nbsp;<span class="ident" id="2019711">i</span>&nbsp;<span class="op" id="2019713">:=</span>&nbsp;<span class="keyword" id="2019716">range</span>&nbsp;<span class="ident" id="2019722">units</span>&nbsp;<span class="op" id="2019728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019732">u</span>&nbsp;<span class="op" id="2019734">:=</span>&nbsp;<span class="op" id="2019737">&amp;</span><span class="ident" id="2019738">units</span><span class="op" id="2019743">[</span><span class="ident" id="2019744">i</span><span class="op" id="2019745">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019749">u</span><span class="op" id="2019750">.</span><span class="ident" id="2019751">base</span>&nbsp;<span class="op" id="2019756">=</span>&nbsp;<span class="ident" id="2019758">b</span><span class="op" id="2019759">.</span><span class="ident" id="2019760">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019766">n</span>&nbsp;<span class="op" id="2019768">:=</span>&nbsp;<span class="ident" id="2019771">b</span><span class="op" id="2019772">.</span><span class="builtintype" id="2019773">uint32</span><span class="op" id="2019779">(</span><span class="op" id="2019780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019784">if</span>&nbsp;<span class="ident" id="2019787">n</span>&nbsp;<span class="op" id="2019789">==</span>&nbsp;<span class="num" id="2019792">0xffffffff</span>&nbsp;<span class="op" id="2019803">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019808">u</span><span class="op" id="2019809">.</span><span class="ident" id="2019810">is64</span>&nbsp;<span class="op" id="2019815">=</span>&nbsp;<span class="builtintype" id="2019817">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019825">n</span>&nbsp;<span class="op" id="2019827">=</span>&nbsp;<span class="builtintype" id="2019829">uint32</span><span class="op" id="2019835">(</span><span class="ident" id="2019836">b</span><span class="op" id="2019837">.</span><span class="ident" id="2019838">uint64</span><span class="op" id="2019844">(</span><span class="op" id="2019845">)</span><span class="op" id="2019846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019854">vers</span>&nbsp;<span class="op" id="2019859">:=</span>&nbsp;<span class="ident" id="2019862">b</span><span class="op" id="2019863">.</span><span class="builtintype" id="2019864">uint16</span><span class="op" id="2019870">(</span><span class="op" id="2019871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019875">if</span>&nbsp;<span class="ident" id="2019878">vers</span>&nbsp;<span class="op" id="2019883">!=</span>&nbsp;<span class="num" id="2019886">2</span>&nbsp;<span class="op" id="2019888">&amp;&amp;</span>&nbsp;<span class="ident" id="2019891">vers</span>&nbsp;<span class="op" id="2019896">!=</span>&nbsp;<span class="num" id="2019899">3</span>&nbsp;<span class="op" id="2019901">&amp;&amp;</span>&nbsp;<span class="ident" id="2019904">vers</span>&nbsp;<span class="op" id="2019909">!=</span>&nbsp;<span class="num" id="2019912">4</span>&nbsp;<span class="op" id="2019914">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019919">b</span><span class="op" id="2019920">.</span><span class="builtintype" id="2019921">error</span><span class="op" id="2019926">(</span><span class="string" id="2019927">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="2019956">+</span>&nbsp;<span class="ident" id="2019958">strconv</span><span class="op" id="2019965">.</span><span class="ident" id="2019966">Itoa</span><span class="op" id="2019970">(</span><span class="builtintype" id="2019971">int</span><span class="op" id="2019974">(</span><span class="ident" id="2019975">vers</span><span class="op" id="2019979">)</span><span class="op" id="2019980">)</span><span class="op" id="2019981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2019986">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2019994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2019998">u</span><span class="op" id="2019999">.</span><span class="ident" id="2020000">vers</span>&nbsp;<span class="op" id="2020005">=</span>&nbsp;<span class="builtintype" id="2020007">int</span><span class="op" id="2020010">(</span><span class="ident" id="2020011">vers</span><span class="op" id="2020015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020019">atable</span><span class="op" id="2020025">,</span>&nbsp;<span class="ident" id="2020027">err</span>&nbsp;<span class="op" id="2020031">:=</span>&nbsp;<span class="ident" id="2020034">d</span><span class="op" id="2020035">.</span><span class="ident" id="2020036">parseAbbrev</span><span class="op" id="2020047">(</span><span class="ident" id="2020048">b</span><span class="op" id="2020049">.</span><span class="builtintype" id="2020050">uint32</span><span class="op" id="2020056">(</span><span class="op" id="2020057">)</span><span class="op" id="2020058">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020062">if</span>&nbsp;<span class="ident" id="2020065">err</span>&nbsp;<span class="op" id="2020069">!=</span>&nbsp;<span class="ident" id="2020072">nil</span>&nbsp;<span class="op" id="2020076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020081">if</span>&nbsp;<span class="ident" id="2020084">b</span><span class="op" id="2020085">.</span><span class="ident" id="2020086">err</span>&nbsp;<span class="op" id="2020090">==</span>&nbsp;<span class="ident" id="2020093">nil</span>&nbsp;<span class="op" id="2020097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020103">b</span><span class="op" id="2020104">.</span><span class="ident" id="2020105">err</span>&nbsp;<span class="op" id="2020109">=</span>&nbsp;<span class="ident" id="2020111">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2020118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020123">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2020131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020135">u</span><span class="op" id="2020136">.</span><span class="ident" id="2020137">atable</span>&nbsp;<span class="op" id="2020144">=</span>&nbsp;<span class="ident" id="2020146">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020155">u</span><span class="op" id="2020156">.</span><span class="ident" id="2020157">asize</span>&nbsp;<span class="op" id="2020163">=</span>&nbsp;<span class="builtintype" id="2020165">int</span><span class="op" id="2020168">(</span><span class="ident" id="2020169">b</span><span class="op" id="2020170">.</span><span class="builtintype" id="2020171">uint8</span><span class="op" id="2020176">(</span><span class="op" id="2020177">)</span><span class="op" id="2020178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020182">u</span><span class="op" id="2020183">.</span><span class="ident" id="2020184">off</span>&nbsp;<span class="op" id="2020188">=</span>&nbsp;<span class="ident" id="2020190">b</span><span class="op" id="2020191">.</span><span class="ident" id="2020192">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2020198">u</span><span class="op" id="2020199">.</span><span class="ident" id="2020200">data</span>&nbsp;<span class="op" id="2020205">=</span>&nbsp;<span class="ident" id="2020207">b</span><span class="op" id="2020208">.</span><span class="ident" id="2020209">bytes</span><span class="op" id="2020214">(</span><span class="builtintype" id="2020215">int</span><span class="op" id="2020218">(</span><span class="ident" id="2020219">n</span>&nbsp;<span class="op" id="2020221">-</span>&nbsp;<span class="op" id="2020223">(</span><span class="num" id="2020224">2</span>&nbsp;<span class="op" id="2020226">+</span>&nbsp;<span class="num" id="2020228">4</span>&nbsp;<span class="op" id="2020230">+</span>&nbsp;<span class="num" id="2020232">1</span><span class="op" id="2020233">)</span><span class="op" id="2020234">)</span><span class="op" id="2020235">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2020238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020241">if</span>&nbsp;<span class="ident" id="2020244">b</span><span class="op" id="2020245">.</span><span class="ident" id="2020246">err</span>&nbsp;<span class="op" id="2020250">!=</span>&nbsp;<span class="ident" id="2020253">nil</span>&nbsp;<span class="op" id="2020257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020261">return</span>&nbsp;<span class="ident" id="2020268">nil</span><span class="op" id="2020271">,</span>&nbsp;<span class="ident" id="2020273">b</span><span class="op" id="2020274">.</span><span class="ident" id="2020275">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2020280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2020283">return</span>&nbsp;<span class="ident" id="2020290">units</span><span class="op" id="2020295">,</span>&nbsp;<span class="ident" id="2020297">nil</span><br>
<span class="lineno">90</span><span class="op" id="2020301">}</span>
</div>
</body>
</html>
