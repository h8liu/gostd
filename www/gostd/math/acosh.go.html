<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1518441">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1518496">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1518550">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1518601">package</span>&nbsp;<span class="ident" id="1518609">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1518615">//&nbsp;The&nbsp;original&nbsp;C&nbsp;code,&nbsp;the&nbsp;long&nbsp;comment,&nbsp;and&nbsp;the&nbsp;constants</span><br>
<span class="lineno"></span><span class="comment" id="1518675">//&nbsp;below&nbsp;are&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_acosh.c</span><br>
<span class="lineno"></span><span class="comment" id="1518735">//&nbsp;and&nbsp;came&nbsp;with&nbsp;this&nbsp;notice.&nbsp;&nbsp;The&nbsp;go&nbsp;code&nbsp;is&nbsp;a&nbsp;simplified</span><br>
<span class="lineno">10</span><span class="comment" id="1518794">//&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;C.</span><br>
<span class="lineno"></span><span class="comment" id="1518824">//</span><br>
<span class="lineno"></span><span class="comment" id="1518827">//&nbsp;====================================================</span><br>
<span class="lineno"></span><span class="comment" id="1518883">//&nbsp;Copyright&nbsp;(C)&nbsp;1993&nbsp;by&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1518952">//</span><br>
<span class="lineno">15</span><span class="comment" id="1518955">//&nbsp;Developed&nbsp;at&nbsp;SunPro,&nbsp;a&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;business.</span><br>
<span class="lineno"></span><span class="comment" id="1519014">//&nbsp;Permission&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;and&nbsp;distribute&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="1519070">//&nbsp;software&nbsp;is&nbsp;freely&nbsp;granted,&nbsp;provided&nbsp;that&nbsp;this&nbsp;notice</span><br>
<span class="lineno"></span><span class="comment" id="1519127">//&nbsp;is&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="comment" id="1519144">//&nbsp;====================================================</span><br>
<span class="lineno">20</span><span class="comment" id="1519200">//</span><br>
<span class="lineno"></span><span class="comment" id="1519203">//</span><br>
<span class="lineno"></span><span class="comment" id="1519206">//&nbsp;__ieee754_acosh(x)</span><br>
<span class="lineno"></span><span class="comment" id="1519228">//&nbsp;Method&nbsp;:</span><br>
<span class="lineno"></span><span class="comment" id="1519240">//&nbsp;&nbsp;&nbsp;&nbspBased&nbsp;on</span><br>
<span class="lineno">25</span><span class="comment" id="1519252">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;=&nbsp;log&nbsp;[&nbsp;x&nbsp;+&nbsp;sqrt(x*x-1)&nbsp;]</span><br>
<span class="lineno"></span><span class="comment" id="1519298">//&nbsp;&nbsp;&nbsp;&nbspwe&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="1519309">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(x)+ln2,&nbsp;&nbsp;&nbsp;&nbspif&nbsp;x&nbsp;is&nbsp;large;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1519364">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log(2x-1/(sqrt(x*x-1)+x))&nbsp;if&nbsp;x&gt;2;&nbsp;else</span><br>
<span class="lineno"></span><span class="comment" id="1519426">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acosh(x)&nbsp;:=&nbsp;log1p(t+sqrt(2.0*t+t*t));&nbsp;where&nbsp;t=x-1.</span><br>
<span class="lineno">30</span><span class="comment" id="1519488">//</span><br>
<span class="lineno"></span><span class="comment" id="1519491">//&nbsp;Special&nbsp;cases:</span><br>
<span class="lineno"></span><span class="comment" id="1519509">//&nbsp;&nbsp;&nbsp;&nbspacosh(x)&nbsp;is&nbsp;NaN&nbsp;with&nbsp;signal&nbsp;if&nbsp;x&lt;1.</span><br>
<span class="lineno"></span><span class="comment" id="1519548">//&nbsp;&nbsp;&nbsp;&nbspacosh(NaN)&nbsp;is&nbsp;NaN&nbsp;without&nbsp;signal.</span><br>
<span class="lineno"></span><span class="comment" id="1519585">//</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="1519589">//&nbsp;Acosh&nbsp;returns&nbsp;the&nbsp;inverse&nbsp;hyperbolic&nbsp;cosine&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="1519642">//</span><br>
<span class="lineno"></span><span class="comment" id="1519645">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1519667">//&nbsp;&nbsp;&nbsp;&nbspAcosh(+Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">40</span><span class="comment" id="1519689">//&nbsp;&nbsp;&nbsp;&nbspAcosh(x)&nbsp;=&nbsp;NaN&nbsp;if&nbsp;x&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="1519716">//&nbsp;&nbsp;&nbsp;&nbspAcosh(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="1519736">func</span>&nbsp;<span class="ident" id="1519741">Acosh</span><span class="op" id="1519746">(</span><span class="ident" id="1519747">x</span>&nbsp;<span class="builtintype" id="1519749">float64</span><span class="op" id="1519756">)</span>&nbsp;<span class="builtintype" id="1519758">float64</span>&nbsp;<span class="op" id="1519766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519769">const</span>&nbsp;<span class="op" id="1519775">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519779">Ln2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1519785">=</span>&nbsp;<span class="num" id="1519787">6.93147180559945286227e-01</span>&nbsp;<span class="comment" id="1519814">//&nbsp;0x3FE62E42FEFA39EF</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1519838">Large</span>&nbsp;<span class="op" id="1519844">=</span>&nbsp;<span class="num" id="1519846">1</span>&nbsp;<span class="op" id="1519848">&lt;&lt;</span>&nbsp;<span class="num" id="1519851">28</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1519873">//&nbsp;2**28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1519883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1519886">//&nbsp;first&nbsp;case&nbsp;is&nbsp;special&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519917">switch</span>&nbsp;<span class="op" id="1519924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519927">case</span>&nbsp;<span class="ident" id="1519932">x</span>&nbsp;<span class="op" id="1519934">&lt;</span>&nbsp;<span class="num" id="1519936">1</span>&nbsp;<span class="op" id="1519938">||</span>&nbsp;<span class="ident" id="1519941">IsNaN</span><span class="op" id="1519946">(</span><span class="ident" id="1519947">x</span><span class="op" id="1519948">)</span><span class="op" id="1519949">:</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519953">return</span>&nbsp;<span class="ident" id="1519960">NaN</span><span class="op" id="1519963">(</span><span class="op" id="1519964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519967">case</span>&nbsp;<span class="ident" id="1519972">x</span>&nbsp;<span class="op" id="1519974">==</span>&nbsp;<span class="num" id="1519977">1</span><span class="op" id="1519978">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519982">return</span>&nbsp;<span class="num" id="1519989">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1519992">case</span>&nbsp;<span class="ident" id="1519997">x</span>&nbsp;<span class="op" id="1519999">&gt;=</span>&nbsp;<span class="ident" id="1520002">Large</span><span class="op" id="1520007">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520011">return</span>&nbsp;<span class="ident" id="1520018">Log</span><span class="op" id="1520021">(</span><span class="ident" id="1520022">x</span><span class="op" id="1520023">)</span>&nbsp;<span class="op" id="1520025">+</span>&nbsp;<span class="ident" id="1520027">Ln2</span>&nbsp;<span class="comment" id="1520031">//&nbsp;x&nbsp;&gt;&nbsp;2**28</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520045">case</span>&nbsp;<span class="ident" id="1520050">x</span>&nbsp;<span class="op" id="1520052">&gt;</span>&nbsp;<span class="num" id="1520054">2</span><span class="op" id="1520055">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520059">return</span>&nbsp;<span class="ident" id="1520066">Log</span><span class="op" id="1520069">(</span><span class="num" id="1520070">2</span><span class="op" id="1520071">*</span><span class="ident" id="1520072">x</span>&nbsp;<span class="op" id="1520074">-</span>&nbsp;<span class="num" id="1520076">1</span><span class="op" id="1520077">/</span><span class="op" id="1520078">(</span><span class="ident" id="1520079">x</span><span class="op" id="1520080">+</span><span class="ident" id="1520081">Sqrt</span><span class="op" id="1520085">(</span><span class="ident" id="1520086">x</span><span class="op" id="1520087">*</span><span class="ident" id="1520088">x</span><span class="op" id="1520089">-</span><span class="num" id="1520090">1</span><span class="op" id="1520091">)</span><span class="op" id="1520092">)</span><span class="op" id="1520093">)</span>&nbsp;<span class="comment" id="1520095">//&nbsp;2**28&nbsp;&gt;&nbsp;x&nbsp;&gt;&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1520113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1520116">t</span>&nbsp;<span class="op" id="1520118">:=</span>&nbsp;<span class="ident" id="1520121">x</span>&nbsp;<span class="op" id="1520123">-</span>&nbsp;<span class="num" id="1520125">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1520128">return</span>&nbsp;<span class="ident" id="1520135">Log1p</span><span class="op" id="1520140">(</span><span class="ident" id="1520141">t</span>&nbsp;<span class="op" id="1520143">+</span>&nbsp;<span class="ident" id="1520145">Sqrt</span><span class="op" id="1520149">(</span><span class="num" id="1520150">2</span><span class="op" id="1520151">*</span><span class="ident" id="1520152">t</span><span class="op" id="1520153">+</span><span class="ident" id="1520154">t</span><span class="op" id="1520155">*</span><span class="ident" id="1520156">t</span><span class="op" id="1520157">)</span><span class="op" id="1520158">)</span>&nbsp;<span class="comment" id="1520160">//&nbsp;2&nbsp;&gt;=&nbsp;x&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno">60</span><span class="op" id="1520174">}</span>
</div>
</body>
</html>
