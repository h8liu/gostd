<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2040675">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2040731">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2040785">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2040836">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2040871">package</span>&nbsp;<span class="ident" id="2040879">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2040883">import</span>&nbsp;<span class="string" id="2040890">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2040901">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2040980">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2041054">func</span>&nbsp;<span class="ident" id="2041059">Expand</span><span class="op" id="2041065">(</span><span class="ident" id="2041066">s</span>&nbsp;<span class="builtintype" id="2041068">string</span><span class="op" id="2041074">,</span>&nbsp;<span class="ident" id="2041076">mapping</span>&nbsp;<span class="keyword" id="2041084">func</span><span class="op" id="2041088">(</span><span class="builtintype" id="2041089">string</span><span class="op" id="2041095">)</span>&nbsp;<span class="builtintype" id="2041097">string</span><span class="op" id="2041103">)</span>&nbsp;<span class="builtintype" id="2041105">string</span>&nbsp;<span class="op" id="2041112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041115">buf</span>&nbsp;<span class="op" id="2041119">:=</span>&nbsp;<span class="builtinfunc" id="2041122">make</span><span class="op" id="2041126">(</span><span class="op" id="2041127">[</span><span class="op" id="2041128">]</span><span class="builtintype" id="2041129">byte</span><span class="op" id="2041133">,</span>&nbsp;<span class="num" id="2041135">0</span><span class="op" id="2041136">,</span>&nbsp;<span class="num" id="2041138">2</span><span class="op" id="2041139">*</span><span class="builtinfunc" id="2041140">len</span><span class="op" id="2041143">(</span><span class="ident" id="2041144"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041145">)</span><span class="op" id="2041146">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2041149">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041209">i</span>&nbsp;<span class="op" id="2041211">:=</span>&nbsp;<span class="num" id="2041214">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041217">for</span>&nbsp;<span class="ident" id="2041221">j</span>&nbsp;<span class="op" id="2041223">:=</span>&nbsp;<span class="num" id="2041226">0</span><span class="op" id="2041227">;</span>&nbsp;<span class="ident" id="2041229"><a href="/os/env.go.html#2041221">j</a></span>&nbsp;<span class="op" id="2041231">&lt;</span>&nbsp;<span class="builtinfunc" id="2041233">len</span><span class="op" id="2041236">(</span><span class="ident" id="2041237"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041238">)</span><span class="op" id="2041239">;</span>&nbsp;<span class="ident" id="2041241"><a href="/os/env.go.html#2041221">j</a></span><span class="op" id="2041242">++</span>&nbsp;<span class="op" id="2041245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041249">if</span>&nbsp;<span class="ident" id="2041252"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041253">[</span><span class="ident" id="2041254"><a href="/os/env.go.html#2041221">j</a></span><span class="op" id="2041255">]</span>&nbsp;<span class="op" id="2041257">==</span>&nbsp;<span class="string" id="2041260">&#39;$&#39;</span>&nbsp;<span class="op" id="2041264">&amp;&amp;</span>&nbsp;<span class="ident" id="2041267"><a href="/os/env.go.html#2041221">j</a></span><span class="op" id="2041268">+</span><span class="num" id="2041269">1</span>&nbsp;<span class="op" id="2041271">&lt;</span>&nbsp;<span class="builtinfunc" id="2041273">len</span><span class="op" id="2041276">(</span><span class="ident" id="2041277"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041278">)</span>&nbsp;<span class="op" id="2041280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041285"><a href="/os/env.go.html#2041115">buf</a></span>&nbsp;<span class="op" id="2041289">=</span>&nbsp;<span class="builtinfunc" id="2041291">append</span><span class="op" id="2041297">(</span><span class="ident" id="2041298"><a href="/os/env.go.html#2041115">buf</a></span><span class="op" id="2041301">,</span>&nbsp;<span class="ident" id="2041303"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041304">[</span><span class="ident" id="2041305"><a href="/os/env.go.html#2041209">i</a></span><span class="op" id="2041306">:</span><span class="ident" id="2041307"><a href="/os/env.go.html#2041221">j</a></span><span class="op" id="2041308">]</span><span class="op" id="2041309">...</span><span class="op" id="2041312">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041317">name</span><span class="op" id="2041321">,</span>&nbsp;<span class="ident" id="2041323">w</span>&nbsp;<span class="op" id="2041325">:=</span>&nbsp;<span class="ident" id="2041328"><a href="/os/env.go.html#2042409">getShellName</a></span><span class="op" id="2041340">(</span><span class="ident" id="2041341"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041342">[</span><span class="ident" id="2041343"><a href="/os/env.go.html#2041221">j</a></span><span class="op" id="2041344">+</span><span class="num" id="2041345">1</span><span class="op" id="2041346">:</span><span class="op" id="2041347">]</span><span class="op" id="2041348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041353"><a href="/os/env.go.html#2041115">buf</a></span>&nbsp;<span class="op" id="2041357">=</span>&nbsp;<span class="builtinfunc" id="2041359">append</span><span class="op" id="2041365">(</span><span class="ident" id="2041366"><a href="/os/env.go.html#2041115">buf</a></span><span class="op" id="2041369">,</span>&nbsp;<span class="ident" id="2041371"><a href="/os/env.go.html#2041076">mapping</a></span><span class="op" id="2041378">(</span><span class="ident" id="2041379"><a href="/os/env.go.html#2041317">name</a></span><span class="op" id="2041383">)</span><span class="op" id="2041384">...</span><span class="op" id="2041387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041392"><a href="/os/env.go.html#2041221">j</a></span>&nbsp;<span class="op" id="2041394">+=</span>&nbsp;<span class="ident" id="2041397"><a href="/os/env.go.html#2041323">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2041402"><a href="/os/env.go.html#2041209">i</a></span>&nbsp;<span class="op" id="2041404">=</span>&nbsp;<span class="ident" id="2041406"><a href="/os/env.go.html#2041221">j</a></span>&nbsp;<span class="op" id="2041408">+</span>&nbsp;<span class="num" id="2041410">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2041414">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2041417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041420">return</span>&nbsp;<span class="builtintype" id="2041427">string</span><span class="op" id="2041433">(</span><span class="ident" id="2041434"><a href="/os/env.go.html#2041115">buf</a></span><span class="op" id="2041437">)</span>&nbsp;<span class="op" id="2041439">+</span>&nbsp;<span class="ident" id="2041441"><a href="/os/env.go.html#2041066">s</a></span><span class="op" id="2041442">[</span><span class="ident" id="2041443"><a href="/os/env.go.html#2041209">i</a></span><span class="op" id="2041444">:</span><span class="op" id="2041445">]</span><br>
<span class="lineno"></span><span class="op" id="2041447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2041450">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2041525">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2041591">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2041638">func</span>&nbsp;<span class="ident" id="2041643">ExpandEnv</span><span class="op" id="2041652">(</span><span class="ident" id="2041653">s</span>&nbsp;<span class="builtintype" id="2041655">string</span><span class="op" id="2041661">)</span>&nbsp;<span class="builtintype" id="2041663">string</span>&nbsp;<span class="op" id="2041670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041673">return</span>&nbsp;<span class="ident" id="2041680"><a href="/os/env.go.html#2041059">Expand</a></span><span class="op" id="2041686">(</span><span class="ident" id="2041687"><a href="/os/env.go.html#2041653">s</a></span><span class="op" id="2041688">,</span>&nbsp;<span class="ident" id="2041690"><a href="/os/env.go.html#2043043">Getenv</a></span><span class="op" id="2041696">)</span><br>
<span class="lineno"></span><span class="op" id="2041698">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2041701">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2041773">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2041803">func</span>&nbsp;<span class="ident" id="2041808">isShellSpecialVar</span><span class="op" id="2041825">(</span><span class="ident" id="2041826">c</span>&nbsp;<span class="builtintype" id="2041828">uint8</span><span class="op" id="2041833">)</span>&nbsp;<span class="builtintype" id="2041835">bool</span>&nbsp;<span class="op" id="2041840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041843">switch</span>&nbsp;<span class="ident" id="2041850"><a href="/os/env.go.html#2041826">c</a></span>&nbsp;<span class="op" id="2041852">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041855">case</span>&nbsp;<span class="string" id="2041860">&#39;*&#39;</span><span class="op" id="2041863">,</span>&nbsp;<span class="string" id="2041865">&#39;#&#39;</span><span class="op" id="2041868">,</span>&nbsp;<span class="string" id="2041870">&#39;$&#39;</span><span class="op" id="2041873">,</span>&nbsp;<span class="string" id="2041875">&#39;@&#39;</span><span class="op" id="2041878">,</span>&nbsp;<span class="string" id="2041880">&#39;!&#39;</span><span class="op" id="2041883">,</span>&nbsp;<span class="string" id="2041885">&#39;?&#39;</span><span class="op" id="2041888">,</span>&nbsp;<span class="string" id="2041890">&#39;0&#39;</span><span class="op" id="2041893">,</span>&nbsp;<span class="string" id="2041895">&#39;1&#39;</span><span class="op" id="2041898">,</span>&nbsp;<span class="string" id="2041900">&#39;2&#39;</span><span class="op" id="2041903">,</span>&nbsp;<span class="string" id="2041905">&#39;3&#39;</span><span class="op" id="2041908">,</span>&nbsp;<span class="string" id="2041910">&#39;4&#39;</span><span class="op" id="2041913">,</span>&nbsp;<span class="string" id="2041915">&#39;5&#39;</span><span class="op" id="2041918">,</span>&nbsp;<span class="string" id="2041920">&#39;6&#39;</span><span class="op" id="2041923">,</span>&nbsp;<span class="string" id="2041925">&#39;7&#39;</span><span class="op" id="2041928">,</span>&nbsp;<span class="string" id="2041930">&#39;8&#39;</span><span class="op" id="2041933">,</span>&nbsp;<span class="string" id="2041935">&#39;9&#39;</span><span class="op" id="2041938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041942">return</span>&nbsp;<span class="ident" id="2041949">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2041955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2041958">return</span>&nbsp;<span class="ident" id="2041965">false</span><br>
<span class="lineno"></span><span class="op" id="2041971">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2041974">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2042055">func</span>&nbsp;<span class="ident" id="2042060">isAlphaNum</span><span class="op" id="2042070">(</span><span class="ident" id="2042071">c</span>&nbsp;<span class="builtintype" id="2042073">uint8</span><span class="op" id="2042078">)</span>&nbsp;<span class="builtintype" id="2042080">bool</span>&nbsp;<span class="op" id="2042085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042088">return</span>&nbsp;<span class="ident" id="2042095"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042097">==</span>&nbsp;<span class="string" id="2042100">&#39;_&#39;</span>&nbsp;<span class="op" id="2042104">||</span>&nbsp;<span class="string" id="2042107">&#39;0&#39;</span>&nbsp;<span class="op" id="2042111">&lt;=</span>&nbsp;<span class="ident" id="2042114"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042116">&amp;&amp;</span>&nbsp;<span class="ident" id="2042119"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042121">&lt;=</span>&nbsp;<span class="string" id="2042124">&#39;9&#39;</span>&nbsp;<span class="op" id="2042128">||</span>&nbsp;<span class="string" id="2042131">&#39;a&#39;</span>&nbsp;<span class="op" id="2042135">&lt;=</span>&nbsp;<span class="ident" id="2042138"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042140">&amp;&amp;</span>&nbsp;<span class="ident" id="2042143"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042145">&lt;=</span>&nbsp;<span class="string" id="2042148">&#39;z&#39;</span>&nbsp;<span class="op" id="2042152">||</span>&nbsp;<span class="string" id="2042155">&#39;A&#39;</span>&nbsp;<span class="op" id="2042159">&lt;=</span>&nbsp;<span class="ident" id="2042162"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042164">&amp;&amp;</span>&nbsp;<span class="ident" id="2042167"><a href="/os/env.go.html#2042071">c</a></span>&nbsp;<span class="op" id="2042169">&lt;=</span>&nbsp;<span class="string" id="2042172">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2042176">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2042179">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2042254">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2042332">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2042404">func</span>&nbsp;<span class="ident" id="2042409">getShellName</span><span class="op" id="2042421">(</span><span class="ident" id="2042422">s</span>&nbsp;<span class="builtintype" id="2042424">string</span><span class="op" id="2042430">)</span>&nbsp;<span class="op" id="2042432">(</span><span class="builtintype" id="2042433">string</span><span class="op" id="2042439">,</span>&nbsp;<span class="builtintype" id="2042441">int</span><span class="op" id="2042444">)</span>&nbsp;<span class="op" id="2042446">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042449">switch</span>&nbsp;<span class="op" id="2042456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042459">case</span>&nbsp;<span class="ident" id="2042464"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042465">[</span><span class="num" id="2042466">0</span><span class="op" id="2042467">]</span>&nbsp;<span class="op" id="2042469">==</span>&nbsp;<span class="string" id="2042472">&#39;{&#39;</span><span class="op" id="2042475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042479">if</span>&nbsp;<span class="builtinfunc" id="2042482">len</span><span class="op" id="2042485">(</span><span class="ident" id="2042486"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042487">)</span>&nbsp;<span class="op" id="2042489">&gt;</span>&nbsp;<span class="num" id="2042491">2</span>&nbsp;<span class="op" id="2042493">&amp;&amp;</span>&nbsp;<span class="ident" id="2042496"><a href="/os/env.go.html#2041808">isShellSpecialVar</a></span><span class="op" id="2042513">(</span><span class="ident" id="2042514"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042515">[</span><span class="num" id="2042516">1</span><span class="op" id="2042517">]</span><span class="op" id="2042518">)</span>&nbsp;<span class="op" id="2042520">&amp;&amp;</span>&nbsp;<span class="ident" id="2042523"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042524">[</span><span class="num" id="2042525">2</span><span class="op" id="2042526">]</span>&nbsp;<span class="op" id="2042528">==</span>&nbsp;<span class="string" id="2042531">&#39;}&#39;</span>&nbsp;<span class="op" id="2042535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042540">return</span>&nbsp;<span class="ident" id="2042547"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042548">[</span><span class="num" id="2042549">1</span><span class="op" id="2042550">:</span><span class="num" id="2042551">2</span><span class="op" id="2042552">]</span><span class="op" id="2042553">,</span>&nbsp;<span class="num" id="2042555">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2042559">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2042563">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042590">for</span>&nbsp;<span class="ident" id="2042594">i</span>&nbsp;<span class="op" id="2042596">:=</span>&nbsp;<span class="num" id="2042599">1</span><span class="op" id="2042600">;</span>&nbsp;<span class="ident" id="2042602"><a href="/os/env.go.html#2042594">i</a></span>&nbsp;<span class="op" id="2042604">&lt;</span>&nbsp;<span class="builtinfunc" id="2042606">len</span><span class="op" id="2042609">(</span><span class="ident" id="2042610"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042611">)</span><span class="op" id="2042612">;</span>&nbsp;<span class="ident" id="2042614"><a href="/os/env.go.html#2042594">i</a></span><span class="op" id="2042615">++</span>&nbsp;<span class="op" id="2042618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042623">if</span>&nbsp;<span class="ident" id="2042626"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042627">[</span><span class="ident" id="2042628"><a href="/os/env.go.html#2042594">i</a></span><span class="op" id="2042629">]</span>&nbsp;<span class="op" id="2042631">==</span>&nbsp;<span class="string" id="2042634">&#39;}&#39;</span>&nbsp;<span class="op" id="2042638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042644">return</span>&nbsp;<span class="ident" id="2042651"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042652">[</span><span class="num" id="2042653">1</span><span class="op" id="2042654">:</span><span class="ident" id="2042655"><a href="/os/env.go.html#2042594">i</a></span><span class="op" id="2042656">]</span><span class="op" id="2042657">,</span>&nbsp;<span class="ident" id="2042659"><a href="/os/env.go.html#2042594">i</a></span>&nbsp;<span class="op" id="2042661">+</span>&nbsp;<span class="num" id="2042663">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2042668">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2042672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042676">return</span>&nbsp;<span class="string" id="2042683">&#34;&#34;</span><span class="op" id="2042685">,</span>&nbsp;<span class="num" id="2042687">1</span>&nbsp;<span class="comment" id="2042689">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042725">case</span>&nbsp;<span class="ident" id="2042730"><a href="/os/env.go.html#2041808">isShellSpecialVar</a></span><span class="op" id="2042747">(</span><span class="ident" id="2042748"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042749">[</span><span class="num" id="2042750">0</span><span class="op" id="2042751">]</span><span class="op" id="2042752">)</span><span class="op" id="2042753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042757">return</span>&nbsp;<span class="ident" id="2042764"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042765">[</span><span class="num" id="2042766">0</span><span class="op" id="2042767">:</span><span class="num" id="2042768">1</span><span class="op" id="2042769">]</span><span class="op" id="2042770">,</span>&nbsp;<span class="num" id="2042772">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2042775">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2042778">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042802">var</span>&nbsp;<span class="ident" id="2042806">i</span>&nbsp;<span class="builtintype" id="2042808">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042813">for</span>&nbsp;<span class="ident" id="2042817"><a href="/os/env.go.html#2042806">i</a></span>&nbsp;<span class="op" id="2042819">=</span>&nbsp;<span class="num" id="2042821">0</span><span class="op" id="2042822">;</span>&nbsp;<span class="ident" id="2042824"><a href="/os/env.go.html#2042806">i</a></span>&nbsp;<span class="op" id="2042826">&lt;</span>&nbsp;<span class="builtinfunc" id="2042828">len</span><span class="op" id="2042831">(</span><span class="ident" id="2042832"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042833">)</span>&nbsp;<span class="op" id="2042835">&amp;&amp;</span>&nbsp;<span class="ident" id="2042838"><a href="/os/env.go.html#2042060">isAlphaNum</a></span><span class="op" id="2042848">(</span><span class="ident" id="2042849"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042850">[</span><span class="ident" id="2042851"><a href="/os/env.go.html#2042806">i</a></span><span class="op" id="2042852">]</span><span class="op" id="2042853">)</span><span class="op" id="2042854">;</span>&nbsp;<span class="ident" id="2042856"><a href="/os/env.go.html#2042806">i</a></span><span class="op" id="2042857">++</span>&nbsp;<span class="op" id="2042860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2042863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2042866">return</span>&nbsp;<span class="ident" id="2042873"><a href="/os/env.go.html#2042422">s</a></span><span class="op" id="2042874">[</span><span class="op" id="2042875">:</span><span class="ident" id="2042876"><a href="/os/env.go.html#2042806">i</a></span><span class="op" id="2042877">]</span><span class="op" id="2042878">,</span>&nbsp;<span class="ident" id="2042880"><a href="/os/env.go.html#2042806">i</a></span><br>
<span class="lineno">75</span><span class="op" id="2042882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2042885">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2042961">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2043038">func</span>&nbsp;<span class="ident" id="2043043">Getenv</span><span class="op" id="2043049">(</span><span class="ident" id="2043050">key</span>&nbsp;<span class="builtintype" id="2043054">string</span><span class="op" id="2043060">)</span>&nbsp;<span class="builtintype" id="2043062">string</span>&nbsp;<span class="op" id="2043069">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2043072">v</span><span class="op" id="2043073">,</span>&nbsp;<span class="ident" id="2043075">_</span>&nbsp;<span class="op" id="2043077">:=</span>&nbsp;<span class="ident" id="2043080"><a href="/os/env.go.html#2040890">syscall</a></span><span class="op" id="2043087">.</span><span class="ident" id="2043088">Getenv</span><span class="op" id="2043094">(</span><span class="ident" id="2043095"><a href="/os/env.go.html#2043050">key</a></span><span class="op" id="2043098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043101">return</span>&nbsp;<span class="ident" id="2043108"><a href="/os/env.go.html#2043072">v</a></span><br>
<span class="lineno"></span><span class="op" id="2043110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2043113">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2043184">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2043216">func</span>&nbsp;<span class="ident" id="2043221">Setenv</span><span class="op" id="2043227">(</span><span class="ident" id="2043228">key</span><span class="op" id="2043231">,</span>&nbsp;<span class="ident" id="2043233">value</span>&nbsp;<span class="builtintype" id="2043239">string</span><span class="op" id="2043245">)</span>&nbsp;<span class="builtintype" id="2043247">error</span>&nbsp;<span class="op" id="2043253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2043256">err</span>&nbsp;<span class="op" id="2043260">:=</span>&nbsp;<span class="ident" id="2043263"><a href="/os/env.go.html#2040890">syscall</a></span><span class="op" id="2043270">.</span><span class="ident" id="2043271">Setenv</span><span class="op" id="2043277">(</span><span class="ident" id="2043278"><a href="/os/env.go.html#2043228">key</a></span><span class="op" id="2043281">,</span>&nbsp;<span class="ident" id="2043283"><a href="/os/env.go.html#2043233">value</a></span><span class="op" id="2043288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043291">if</span>&nbsp;<span class="ident" id="2043294"><a href="/os/env.go.html#2043256">err</a></span>&nbsp;<span class="op" id="2043298">!=</span>&nbsp;<span class="ident" id="2043301">nil</span>&nbsp;<span class="op" id="2043305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043309">return</span>&nbsp;<span class="ident" id="2043316"><a href="/os/error.go.html#2044800">NewSyscallError</a></span><span class="op" id="2043331">(</span><span class="string" id="2043332">&#34;setenv&#34;</span><span class="op" id="2043340">,</span>&nbsp;<span class="ident" id="2043342"><a href="/os/env.go.html#2043256">err</a></span><span class="op" id="2043345">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2043348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043351">return</span>&nbsp;<span class="ident" id="2043358">nil</span><br>
<span class="lineno"></span><span class="op" id="2043362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2043365">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2043415">func</span>&nbsp;<span class="ident" id="2043420">Unsetenv</span><span class="op" id="2043428">(</span><span class="ident" id="2043429">key</span>&nbsp;<span class="builtintype" id="2043433">string</span><span class="op" id="2043439">)</span>&nbsp;<span class="builtintype" id="2043441">error</span>&nbsp;<span class="op" id="2043447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043450">return</span>&nbsp;<span class="ident" id="2043457"><a href="/os/env.go.html#2040890">syscall</a></span><span class="op" id="2043464">.</span><span class="ident" id="2043465">Unsetenv</span><span class="op" id="2043473">(</span><span class="ident" id="2043474"><a href="/os/env.go.html#2043429">key</a></span><span class="op" id="2043477">)</span><br>
<span class="lineno"></span><span class="op" id="2043479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2043482">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2043529">func</span>&nbsp;<span class="ident" id="2043534">Clearenv</span><span class="op" id="2043542">(</span><span class="op" id="2043543">)</span>&nbsp;<span class="op" id="2043545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2043548"><a href="/os/env.go.html#2040890">syscall</a></span><span class="op" id="2043555">.</span><span class="ident" id="2043556">Clearenv</span><span class="op" id="2043564">(</span><span class="op" id="2043565">)</span><br>
<span class="lineno"></span><span class="op" id="2043567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2043570">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2043637">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2043665">func</span>&nbsp;<span class="ident" id="2043670">Environ</span><span class="op" id="2043677">(</span><span class="op" id="2043678">)</span>&nbsp;<span class="op" id="2043680">[</span><span class="op" id="2043681">]</span><span class="builtintype" id="2043682">string</span>&nbsp;<span class="op" id="2043689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2043692">return</span>&nbsp;<span class="ident" id="2043699"><a href="/os/env.go.html#2040890">syscall</a></span><span class="op" id="2043706">.</span><span class="ident" id="2043707">Environ</span><span class="op" id="2043714">(</span><span class="op" id="2043715">)</span><br>
<span class="lineno"></span><span class="op" id="2043717">}</span>
</div>
</body>
</html>
