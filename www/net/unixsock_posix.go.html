<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2714277">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2714333">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2714387">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2714438">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2714516">package</span>&nbsp;<span class="ident" id="2714524">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2714529">import</span>&nbsp;<span class="op" id="2714536">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2714539">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2714549">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2714555">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2714566">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="2714573">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="2714576">func</span>&nbsp;<span class="ident" id="2714581">unixSocket</span><span class="op" id="2714591">(</span><span class="ident" id="2714592">net</span>&nbsp;<span class="builtintype" id="2714596">string</span><span class="op" id="2714602">,</span>&nbsp;<span class="ident" id="2714604">laddr</span><span class="op" id="2714609">,</span>&nbsp;<span class="ident" id="2714611">raddr</span>&nbsp;<span class="ident" id="2714617"><a href="/net/sock_posix.go.html#2679308">sockaddr</a></span><span class="op" id="2714625">,</span>&nbsp;<span class="ident" id="2714627">mode</span>&nbsp;<span class="builtintype" id="2714632">string</span><span class="op" id="2714638">,</span>&nbsp;<span class="ident" id="2714640">deadline</span>&nbsp;<span class="ident" id="2714649"><a href="/net/unixsock_posix.go.html#2714566">time</a></span><span class="op" id="2714653">.</span><span class="ident" id="2714654">Time</span><span class="op" id="2714658">)</span>&nbsp;<span class="op" id="2714660">(</span><span class="op" id="2714661">*</span><span class="ident" id="2714662"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2714667">,</span>&nbsp;<span class="builtintype" id="2714669">error</span><span class="op" id="2714674">)</span>&nbsp;<span class="op" id="2714676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714679">var</span>&nbsp;<span class="ident" id="2714683">sotype</span>&nbsp;<span class="builtintype" id="2714690">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714695">switch</span>&nbsp;<span class="ident" id="2714702"><a href="/net/unixsock_posix.go.html#2714592">net</a></span>&nbsp;<span class="op" id="2714706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714709">case</span>&nbsp;<span class="string" id="2714714">&#34;unix&#34;</span><span class="op" id="2714720">:</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2714724"><a href="/net/unixsock_posix.go.html#2714683">sotype</a></span>&nbsp;<span class="op" id="2714731">=</span>&nbsp;<span class="ident" id="2714733"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2714740">.</span><span class="ident" id="2714741">SOCK_STREAM</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714754">case</span>&nbsp;<span class="string" id="2714759">&#34;unixgram&#34;</span><span class="op" id="2714769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2714773"><a href="/net/unixsock_posix.go.html#2714683">sotype</a></span>&nbsp;<span class="op" id="2714780">=</span>&nbsp;<span class="ident" id="2714782"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2714789">.</span><span class="ident" id="2714790">SOCK_DGRAM</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714802">case</span>&nbsp;<span class="string" id="2714807">&#34;unixpacket&#34;</span><span class="op" id="2714819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2714823"><a href="/net/unixsock_posix.go.html#2714683">sotype</a></span>&nbsp;<span class="op" id="2714830">=</span>&nbsp;<span class="ident" id="2714832"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2714839">.</span><span class="ident" id="2714840">SOCK_SEQPACKET</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714856">default</span><span class="op" id="2714863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714867">return</span>&nbsp;<span class="ident" id="2714874">nil</span><span class="op" id="2714877">,</span>&nbsp;<span class="ident" id="2714879"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2714898">(</span><span class="ident" id="2714899"><a href="/net/unixsock_posix.go.html#2714592">net</a></span><span class="op" id="2714902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2714905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714909">switch</span>&nbsp;<span class="ident" id="2714916"><a href="/net/unixsock_posix.go.html#2714627">mode</a></span>&nbsp;<span class="op" id="2714921">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714924">case</span>&nbsp;<span class="string" id="2714929">&#34;dial&#34;</span><span class="op" id="2714935">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2714939">if</span>&nbsp;<span class="ident" id="2714942"><a href="/net/unixsock_posix.go.html#2714604">laddr</a></span>&nbsp;<span class="op" id="2714948">!=</span>&nbsp;<span class="ident" id="2714951">nil</span>&nbsp;<span class="op" id="2714955">&amp;&amp;</span>&nbsp;<span class="ident" id="2714958"><a href="/net/unixsock_posix.go.html#2714604">laddr</a></span><span class="op" id="2714963">.</span><span class="ident" id="2714964">isWildcard</span><span class="op" id="2714974">(</span><span class="op" id="2714975">)</span>&nbsp;<span class="op" id="2714977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2714982"><a href="/net/unixsock_posix.go.html#2714604">laddr</a></span>&nbsp;<span class="op" id="2714988">=</span>&nbsp;<span class="ident" id="2714990">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2714996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715000">if</span>&nbsp;<span class="ident" id="2715003"><a href="/net/unixsock_posix.go.html#2714611">raddr</a></span>&nbsp;<span class="op" id="2715009">!=</span>&nbsp;<span class="ident" id="2715012">nil</span>&nbsp;<span class="op" id="2715016">&amp;&amp;</span>&nbsp;<span class="ident" id="2715019"><a href="/net/unixsock_posix.go.html#2714611">raddr</a></span><span class="op" id="2715024">.</span><span class="ident" id="2715025">isWildcard</span><span class="op" id="2715035">(</span><span class="op" id="2715036">)</span>&nbsp;<span class="op" id="2715038">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2715043"><a href="/net/unixsock_posix.go.html#2714611">raddr</a></span>&nbsp;<span class="op" id="2715049">=</span>&nbsp;<span class="ident" id="2715051">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715061">if</span>&nbsp;<span class="ident" id="2715064"><a href="/net/unixsock_posix.go.html#2714611">raddr</a></span>&nbsp;<span class="op" id="2715070">==</span>&nbsp;<span class="ident" id="2715073">nil</span>&nbsp;<span class="op" id="2715077">&amp;&amp;</span>&nbsp;<span class="op" id="2715080">(</span><span class="ident" id="2715081"><a href="/net/unixsock_posix.go.html#2714683">sotype</a></span>&nbsp;<span class="op" id="2715088">!=</span>&nbsp;<span class="ident" id="2715091"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715098">.</span><span class="ident" id="2715099">SOCK_DGRAM</span>&nbsp;<span class="op" id="2715110">||</span>&nbsp;<span class="ident" id="2715113"><a href="/net/unixsock_posix.go.html#2714604">laddr</a></span>&nbsp;<span class="op" id="2715119">==</span>&nbsp;<span class="ident" id="2715122">nil</span><span class="op" id="2715125">)</span>&nbsp;<span class="op" id="2715127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715132">return</span>&nbsp;<span class="ident" id="2715139">nil</span><span class="op" id="2715142">,</span>&nbsp;<span class="ident" id="2715144"><a href="/net/net.go.html#2659161">errMissingAddress</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715164">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715167">case</span>&nbsp;<span class="string" id="2715172">&#34;listen&#34;</span><span class="op" id="2715180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715183">default</span><span class="op" id="2715190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715194">return</span>&nbsp;<span class="ident" id="2715201">nil</span><span class="op" id="2715204">,</span>&nbsp;<span class="ident" id="2715206"><a href="/net/unixsock_posix.go.html#2714539">errors</a></span><span class="op" id="2715212">.</span><span class="ident" id="2715213">New</span><span class="op" id="2715216">(</span><span class="string" id="2715217">&#34;unknown&nbsp;mode:&nbsp;&#34;</span>&nbsp;<span class="op" id="2715234">+</span>&nbsp;<span class="ident" id="2715236"><a href="/net/unixsock_posix.go.html#2714627">mode</a></span><span class="op" id="2715240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2715247">fd</span><span class="op" id="2715249">,</span>&nbsp;<span class="ident" id="2715251">err</span>&nbsp;<span class="op" id="2715255">:=</span>&nbsp;<span class="ident" id="2715258"><a href="/net/sock_posix.go.html#2679868">socket</a></span><span class="op" id="2715264">(</span><span class="ident" id="2715265"><a href="/net/unixsock_posix.go.html#2714592">net</a></span><span class="op" id="2715268">,</span>&nbsp;<span class="ident" id="2715270"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715277">.</span><span class="ident" id="2715278">AF_UNIX</span><span class="op" id="2715285">,</span>&nbsp;<span class="ident" id="2715287"><a href="/net/unixsock_posix.go.html#2714683">sotype</a></span><span class="op" id="2715293">,</span>&nbsp;<span class="num" id="2715295">0</span><span class="op" id="2715296">,</span>&nbsp;<span class="ident" id="2715298">false</span><span class="op" id="2715303">,</span>&nbsp;<span class="ident" id="2715305"><a href="/net/unixsock_posix.go.html#2714604">laddr</a></span><span class="op" id="2715310">,</span>&nbsp;<span class="ident" id="2715312"><a href="/net/unixsock_posix.go.html#2714611">raddr</a></span><span class="op" id="2715317">,</span>&nbsp;<span class="ident" id="2715319"><a href="/net/unixsock_posix.go.html#2714640">deadline</a></span><span class="op" id="2715327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715330">if</span>&nbsp;<span class="ident" id="2715333"><a href="/net/unixsock_posix.go.html#2715251">err</a></span>&nbsp;<span class="op" id="2715337">!=</span>&nbsp;<span class="ident" id="2715340">nil</span>&nbsp;<span class="op" id="2715344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715348">return</span>&nbsp;<span class="ident" id="2715355">nil</span><span class="op" id="2715358">,</span>&nbsp;<span class="ident" id="2715360"><a href="/net/unixsock_posix.go.html#2715251">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715368">return</span>&nbsp;<span class="ident" id="2715375"><a href="/net/unixsock_posix.go.html#2715247">fd</a></span><span class="op" id="2715377">,</span>&nbsp;<span class="ident" id="2715379">nil</span><br>
<span class="lineno">50</span><span class="op" id="2715383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2715386">func</span>&nbsp;<span class="ident" id="2715391">sockaddrToUnix</span><span class="op" id="2715405">(</span><span class="ident" id="2715406">sa</span>&nbsp;<span class="ident" id="2715409"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715416">.</span><span class="ident" id="2715417">Sockaddr</span><span class="op" id="2715425">)</span>&nbsp;<span class="ident" id="2715427"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2715432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715435">if</span>&nbsp;<span class="ident" id="2715438">s</span><span class="op" id="2715439">,</span>&nbsp;<span class="ident" id="2715441">ok</span>&nbsp;<span class="op" id="2715444">:=</span>&nbsp;<span class="ident" id="2715447"><a href="/net/unixsock_posix.go.html#2715406">sa</a></span><span class="op" id="2715449">.</span><span class="op" id="2715450">(</span><span class="op" id="2715451">*</span><span class="ident" id="2715452"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715459">.</span><span class="ident" id="2715460">SockaddrUnix</span><span class="op" id="2715472">)</span><span class="op" id="2715473">;</span>&nbsp;<span class="ident" id="2715475"><a href="/net/unixsock_posix.go.html#2715441">ok</a></span>&nbsp;<span class="op" id="2715478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715482">return</span>&nbsp;<span class="op" id="2715489">&amp;</span><span class="ident" id="2715490"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2715498">{</span><span class="ident" id="2715499">Name</span><span class="op" id="2715503">:</span>&nbsp;<span class="ident" id="2715505"><a href="/net/unixsock_posix.go.html#2715438">s</a></span><span class="op" id="2715506">.</span><span class="ident" id="2715507">Name</span><span class="op" id="2715511">,</span>&nbsp;<span class="ident" id="2715513">Net</span><span class="op" id="2715516">:</span>&nbsp;<span class="string" id="2715518">&#34;unix&#34;</span><span class="op" id="2715524">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715530">return</span>&nbsp;<span class="ident" id="2715537">nil</span><br>
<span class="lineno"></span><span class="op" id="2715541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2715544">func</span>&nbsp;<span class="ident" id="2715549">sockaddrToUnixgram</span><span class="op" id="2715567">(</span><span class="ident" id="2715568">sa</span>&nbsp;<span class="ident" id="2715571"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715578">.</span><span class="ident" id="2715579">Sockaddr</span><span class="op" id="2715587">)</span>&nbsp;<span class="ident" id="2715589"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2715594">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715597">if</span>&nbsp;<span class="ident" id="2715600">s</span><span class="op" id="2715601">,</span>&nbsp;<span class="ident" id="2715603">ok</span>&nbsp;<span class="op" id="2715606">:=</span>&nbsp;<span class="ident" id="2715609"><a href="/net/unixsock_posix.go.html#2715568">sa</a></span><span class="op" id="2715611">.</span><span class="op" id="2715612">(</span><span class="op" id="2715613">*</span><span class="ident" id="2715614"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715621">.</span><span class="ident" id="2715622">SockaddrUnix</span><span class="op" id="2715634">)</span><span class="op" id="2715635">;</span>&nbsp;<span class="ident" id="2715637"><a href="/net/unixsock_posix.go.html#2715603">ok</a></span>&nbsp;<span class="op" id="2715640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715644">return</span>&nbsp;<span class="op" id="2715651">&amp;</span><span class="ident" id="2715652"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2715660">{</span><span class="ident" id="2715661">Name</span><span class="op" id="2715665">:</span>&nbsp;<span class="ident" id="2715667"><a href="/net/unixsock_posix.go.html#2715600">s</a></span><span class="op" id="2715668">.</span><span class="ident" id="2715669">Name</span><span class="op" id="2715673">,</span>&nbsp;<span class="ident" id="2715675">Net</span><span class="op" id="2715678">:</span>&nbsp;<span class="string" id="2715680">&#34;unixgram&#34;</span><span class="op" id="2715690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715696">return</span>&nbsp;<span class="ident" id="2715703">nil</span><br>
<span class="lineno"></span><span class="op" id="2715707">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="2715710">func</span>&nbsp;<span class="ident" id="2715715">sockaddrToUnixpacket</span><span class="op" id="2715735">(</span><span class="ident" id="2715736">sa</span>&nbsp;<span class="ident" id="2715739"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715746">.</span><span class="ident" id="2715747">Sockaddr</span><span class="op" id="2715755">)</span>&nbsp;<span class="ident" id="2715757"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2715762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715765">if</span>&nbsp;<span class="ident" id="2715768">s</span><span class="op" id="2715769">,</span>&nbsp;<span class="ident" id="2715771">ok</span>&nbsp;<span class="op" id="2715774">:=</span>&nbsp;<span class="ident" id="2715777"><a href="/net/unixsock_posix.go.html#2715736">sa</a></span><span class="op" id="2715779">.</span><span class="op" id="2715780">(</span><span class="op" id="2715781">*</span><span class="ident" id="2715782"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715789">.</span><span class="ident" id="2715790">SockaddrUnix</span><span class="op" id="2715802">)</span><span class="op" id="2715803">;</span>&nbsp;<span class="ident" id="2715805"><a href="/net/unixsock_posix.go.html#2715771">ok</a></span>&nbsp;<span class="op" id="2715808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715812">return</span>&nbsp;<span class="op" id="2715819">&amp;</span><span class="ident" id="2715820"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2715828">{</span><span class="ident" id="2715829">Name</span><span class="op" id="2715833">:</span>&nbsp;<span class="ident" id="2715835"><a href="/net/unixsock_posix.go.html#2715768">s</a></span><span class="op" id="2715836">.</span><span class="ident" id="2715837">Name</span><span class="op" id="2715841">,</span>&nbsp;<span class="ident" id="2715843">Net</span><span class="op" id="2715846">:</span>&nbsp;<span class="string" id="2715848">&#34;unixpacket&#34;</span><span class="op" id="2715860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2715863">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715866">return</span>&nbsp;<span class="ident" id="2715873">nil</span><br>
<span class="lineno"></span><span class="op" id="2715877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2715880">func</span>&nbsp;<span class="ident" id="2715885">sotypeToNet</span><span class="op" id="2715896">(</span><span class="ident" id="2715897">sotype</span>&nbsp;<span class="builtintype" id="2715904">int</span><span class="op" id="2715907">)</span>&nbsp;<span class="builtintype" id="2715909">string</span>&nbsp;<span class="op" id="2715916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715919">switch</span>&nbsp;<span class="ident" id="2715926"><a href="/net/unixsock_posix.go.html#2715897">sotype</a></span>&nbsp;<span class="op" id="2715933">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715936">case</span>&nbsp;<span class="ident" id="2715941"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715948">.</span><span class="ident" id="2715949">SOCK_STREAM</span><span class="op" id="2715960">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715964">return</span>&nbsp;<span class="string" id="2715971">&#34;unix&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2715979">case</span>&nbsp;<span class="ident" id="2715984"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2715991">.</span><span class="ident" id="2715992">SOCK_DGRAM</span><span class="op" id="2716002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716006">return</span>&nbsp;<span class="string" id="2716013">&#34;unixgram&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716025">case</span>&nbsp;<span class="ident" id="2716030"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2716037">.</span><span class="ident" id="2716038">SOCK_SEQPACKET</span><span class="op" id="2716052">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716056">return</span>&nbsp;<span class="string" id="2716063">&#34;unixpacket&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716077">default</span><span class="op" id="2716084">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2716088">panic</span><span class="op" id="2716093">(</span><span class="string" id="2716094">&#34;sotypeToNet&nbsp;unknown&nbsp;socket&nbsp;type&#34;</span><span class="op" id="2716127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2716130">}</span><br>
<span class="lineno"></span><span class="op" id="2716132">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="2716135">func</span>&nbsp;<span class="op" id="2716140">(</span><span class="ident" id="2716141">a</span>&nbsp;<span class="op" id="2716143">*</span><span class="ident" id="2716144"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2716152">)</span>&nbsp;<span class="ident" id="2716154">family</span><span class="op" id="2716160">(</span><span class="op" id="2716161">)</span>&nbsp;<span class="builtintype" id="2716163">int</span>&nbsp;<span class="op" id="2716167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716170">return</span>&nbsp;<span class="ident" id="2716177"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2716184">.</span><span class="ident" id="2716185">AF_UNIX</span><br>
<span class="lineno"></span><span class="op" id="2716193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="2716196">func</span>&nbsp;<span class="op" id="2716201">(</span><span class="ident" id="2716202">a</span>&nbsp;<span class="op" id="2716204">*</span><span class="ident" id="2716205"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2716213">)</span>&nbsp;<span class="ident" id="2716215">isWildcard</span><span class="op" id="2716225">(</span><span class="op" id="2716226">)</span>&nbsp;<span class="builtintype" id="2716228">bool</span>&nbsp;<span class="op" id="2716233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716236">return</span>&nbsp;<span class="ident" id="2716243"><a href="/net/unixsock_posix.go.html#2716202">a</a></span>&nbsp;<span class="op" id="2716245">==</span>&nbsp;<span class="ident" id="2716248">nil</span>&nbsp;<span class="op" id="2716252">||</span>&nbsp;<span class="ident" id="2716255"><a href="/net/unixsock_posix.go.html#2716202">a</a></span><span class="op" id="2716256">.</span><span class="ident" id="2716257">Name</span>&nbsp;<span class="op" id="2716262">==</span>&nbsp;<span class="string" id="2716265">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2716268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2716271">func</span>&nbsp;<span class="op" id="2716276">(</span><span class="ident" id="2716277">a</span>&nbsp;<span class="op" id="2716279">*</span><span class="ident" id="2716280"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2716288">)</span>&nbsp;<span class="ident" id="2716290">sockaddr</span><span class="op" id="2716298">(</span><span class="ident" id="2716299">family</span>&nbsp;<span class="builtintype" id="2716306">int</span><span class="op" id="2716309">)</span>&nbsp;<span class="op" id="2716311">(</span><span class="ident" id="2716312"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2716319">.</span><span class="ident" id="2716320">Sockaddr</span><span class="op" id="2716328">,</span>&nbsp;<span class="builtintype" id="2716330">error</span><span class="op" id="2716335">)</span>&nbsp;<span class="op" id="2716337">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716340">if</span>&nbsp;<span class="ident" id="2716343"><a href="/net/unixsock_posix.go.html#2716277">a</a></span>&nbsp;<span class="op" id="2716345">==</span>&nbsp;<span class="ident" id="2716348">nil</span>&nbsp;<span class="op" id="2716352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716356">return</span>&nbsp;<span class="ident" id="2716363">nil</span><span class="op" id="2716366">,</span>&nbsp;<span class="ident" id="2716368">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2716373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2716376">return</span>&nbsp;<span class="op" id="2716383">&amp;</span><span class="ident" id="2716384"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2716391">.</span><span class="ident" id="2716392">SockaddrUnix</span><span class="op" id="2716404">{</span><span class="ident" id="2716405">Name</span><span class="op" id="2716409">:</span>&nbsp;<span class="ident" id="2716411"><a href="/net/unixsock_posix.go.html#2716277">a</a></span><span class="op" id="2716412">.</span><span class="ident" id="2716413">Name</span><span class="op" id="2716417">}</span><span class="op" id="2716418">,</span>&nbsp;<span class="ident" id="2716420">nil</span><br>
<span class="lineno"></span><span class="op" id="2716424">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="2716427">//&nbsp;UnixConn&nbsp;is&nbsp;an&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface&nbsp;for&nbsp;connections</span><br>
<span class="lineno"></span><span class="comment" id="2716498">//&nbsp;to&nbsp;Unix&nbsp;domain&nbsp;sockets.</span><br>
<span class="lineno"></span><span class="keyword" id="2716525">type</span>&nbsp;<span class="ident" id="2716530">UnixConn</span>&nbsp;<span class="keyword" id="2716539">struct</span>&nbsp;<span class="op" id="2716546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2716549"><a href="/net/net.go.html#2654243">conn</a></span><br>
<span class="lineno">105</span><span class="op" id="2716554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2716557">func</span>&nbsp;<span class="ident" id="2716562">newUnixConn</span><span class="op" id="2716573">(</span><span class="ident" id="2716574">fd</span>&nbsp;<span class="op" id="2716577">*</span><span class="ident" id="2716578"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2716583">)</span>&nbsp;<span class="op" id="2716585">*</span><span class="ident" id="2716586"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span>&nbsp;<span class="op" id="2716595">{</span>&nbsp;<span class="keyword" id="2716597">return</span>&nbsp;<span class="op" id="2716604">&amp;</span><span class="ident" id="2716605"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2716613">{</span><span class="ident" id="2716614"><a href="/net/net.go.html#2654243">conn</a></span><span class="op" id="2716618">{</span><span class="ident" id="2716619"><a href="/net/unixsock_posix.go.html#2716574">fd</a></span><span class="op" id="2716621">}</span><span class="op" id="2716622">}</span>&nbsp;<span class="op" id="2716624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2716627">//&nbsp;ReadFromUnix&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It</span><br>
<span class="lineno">110</span><span class="comment" id="2716698">//&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2716769">//&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="comment" id="2716784">//</span><br>
<span class="lineno"></span><span class="comment" id="2716787">//&nbsp;ReadFromUnix&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="2716852">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno">115</span><span class="comment" id="2716919">//&nbsp;SetReadDeadline.</span><br>
<span class="lineno"></span><span class="keyword" id="2716939">func</span>&nbsp;<span class="op" id="2716944">(</span><span class="ident" id="2716945">c</span>&nbsp;<span class="op" id="2716947">*</span><span class="ident" id="2716948"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2716956">)</span>&nbsp;<span class="ident" id="2716958">ReadFromUnix</span><span class="op" id="2716970">(</span><span class="ident" id="2716971">b</span>&nbsp;<span class="op" id="2716973">[</span><span class="op" id="2716974">]</span><span class="builtintype" id="2716975">byte</span><span class="op" id="2716979">)</span>&nbsp;<span class="op" id="2716981">(</span><span class="ident" id="2716982">n</span>&nbsp;<span class="builtintype" id="2716984">int</span><span class="op" id="2716987">,</span>&nbsp;<span class="ident" id="2716989">addr</span>&nbsp;<span class="op" id="2716994">*</span><span class="ident" id="2716995"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2717003">,</span>&nbsp;<span class="ident" id="2717005">err</span>&nbsp;<span class="builtintype" id="2717009">error</span><span class="op" id="2717014">)</span>&nbsp;<span class="op" id="2717016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717019">if</span>&nbsp;<span class="op" id="2717022">!</span><span class="ident" id="2717023"><a href="/net/unixsock_posix.go.html#2716945">c</a></span><span class="op" id="2717024">.</span><span class="ident" id="2717025">ok</span><span class="op" id="2717027">(</span><span class="op" id="2717028">)</span>&nbsp;<span class="op" id="2717030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717034">return</span>&nbsp;<span class="num" id="2717041">0</span><span class="op" id="2717042">,</span>&nbsp;<span class="ident" id="2717044">nil</span><span class="op" id="2717047">,</span>&nbsp;<span class="ident" id="2717049"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2717056">.</span><span class="ident" id="2717057">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2717065">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717068"><a href="/net/unixsock_posix.go.html#2716982">n</a></span><span class="op" id="2717069">,</span>&nbsp;<span class="ident" id="2717071">sa</span><span class="op" id="2717073">,</span>&nbsp;<span class="ident" id="2717075"><a href="/net/unixsock_posix.go.html#2717005">err</a></span>&nbsp;<span class="op" id="2717079">:=</span>&nbsp;<span class="ident" id="2717082"><a href="/net/unixsock_posix.go.html#2716945">c</a></span><span class="op" id="2717083">.</span><span class="ident" id="2717084">fd</span><span class="op" id="2717086">.</span><span class="ident" id="2717087">readFrom</span><span class="op" id="2717095">(</span><span class="ident" id="2717096"><a href="/net/unixsock_posix.go.html#2716971">b</a></span><span class="op" id="2717097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717100">switch</span>&nbsp;<span class="ident" id="2717107">sa</span>&nbsp;<span class="op" id="2717110">:=</span>&nbsp;<span class="ident" id="2717113"><a href="/net/unixsock_posix.go.html#2717071">sa</a></span><span class="op" id="2717115">.</span><span class="op" id="2717116">(</span><span class="keyword" id="2717117">type</span><span class="op" id="2717121">)</span>&nbsp;<span class="op" id="2717123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717126">case</span>&nbsp;<span class="op" id="2717131">*</span><span class="ident" id="2717132"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2717139">.</span><span class="ident" id="2717140">SockaddrUnix</span><span class="op" id="2717152">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717156">if</span>&nbsp;<span class="ident" id="2717159"><a href="/net/unixsock_posix.go.html#2717107">sa</a></span><span class="op" id="2717161">.</span><span class="ident" id="2717162">Name</span>&nbsp;<span class="op" id="2717167">!=</span>&nbsp;<span class="string" id="2717170">&#34;&#34;</span>&nbsp;<span class="op" id="2717173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717178"><a href="/net/unixsock_posix.go.html#2716989">addr</a></span>&nbsp;<span class="op" id="2717183">=</span>&nbsp;<span class="op" id="2717185">&amp;</span><span class="ident" id="2717186"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2717194">{</span><span class="ident" id="2717195">Name</span><span class="op" id="2717199">:</span>&nbsp;<span class="ident" id="2717201"><a href="/net/unixsock_posix.go.html#2717107">sa</a></span><span class="op" id="2717203">.</span><span class="ident" id="2717204">Name</span><span class="op" id="2717208">,</span>&nbsp;<span class="ident" id="2717210">Net</span><span class="op" id="2717213">:</span>&nbsp;<span class="ident" id="2717215"><a href="/net/unixsock_posix.go.html#2715885">sotypeToNet</a></span><span class="op" id="2717226">(</span><span class="ident" id="2717227"><a href="/net/unixsock_posix.go.html#2716945">c</a></span><span class="op" id="2717228">.</span><span class="ident" id="2717229">fd</span><span class="op" id="2717231">.</span><span class="ident" id="2717232">sotype</span><span class="op" id="2717238">)</span><span class="op" id="2717239">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2717243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2717246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717249">return</span><br>
<span class="lineno"></span><span class="op" id="2717256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="2717259">//&nbsp;ReadFrom&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;ReadFrom&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2717314">func</span>&nbsp;<span class="op" id="2717319">(</span><span class="ident" id="2717320">c</span>&nbsp;<span class="op" id="2717322">*</span><span class="ident" id="2717323"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2717331">)</span>&nbsp;<span class="ident" id="2717333">ReadFrom</span><span class="op" id="2717341">(</span><span class="ident" id="2717342">b</span>&nbsp;<span class="op" id="2717344">[</span><span class="op" id="2717345">]</span><span class="builtintype" id="2717346">byte</span><span class="op" id="2717350">)</span>&nbsp;<span class="op" id="2717352">(</span><span class="builtintype" id="2717353">int</span><span class="op" id="2717356">,</span>&nbsp;<span class="ident" id="2717358"><a href="/net/net.go.html#2652238">Addr</a></span><span class="op" id="2717362">,</span>&nbsp;<span class="builtintype" id="2717364">error</span><span class="op" id="2717369">)</span>&nbsp;<span class="op" id="2717371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717374">if</span>&nbsp;<span class="op" id="2717377">!</span><span class="ident" id="2717378"><a href="/net/unixsock_posix.go.html#2717320">c</a></span><span class="op" id="2717379">.</span><span class="ident" id="2717380">ok</span><span class="op" id="2717382">(</span><span class="op" id="2717383">)</span>&nbsp;<span class="op" id="2717385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717389">return</span>&nbsp;<span class="num" id="2717396">0</span><span class="op" id="2717397">,</span>&nbsp;<span class="ident" id="2717399">nil</span><span class="op" id="2717402">,</span>&nbsp;<span class="ident" id="2717404"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2717411">.</span><span class="ident" id="2717412">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2717420">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717423">n</span><span class="op" id="2717424">,</span>&nbsp;<span class="ident" id="2717426">addr</span><span class="op" id="2717430">,</span>&nbsp;<span class="ident" id="2717432">err</span>&nbsp;<span class="op" id="2717436">:=</span>&nbsp;<span class="ident" id="2717439"><a href="/net/unixsock_posix.go.html#2717320">c</a></span><span class="op" id="2717440">.</span><span class="ident" id="2717441">ReadFromUnix</span><span class="op" id="2717453">(</span><span class="ident" id="2717454"><a href="/net/unixsock_posix.go.html#2717342">b</a></span><span class="op" id="2717455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717458">return</span>&nbsp;<span class="ident" id="2717465"><a href="/net/unixsock_posix.go.html#2717423">n</a></span><span class="op" id="2717466">,</span>&nbsp;<span class="ident" id="2717468"><a href="/net/unixsock_posix.go.html#2717426">addr</a></span><span class="op" id="2717472">.</span><span class="ident" id="2717473">toAddr</span><span class="op" id="2717479">(</span><span class="op" id="2717480">)</span><span class="op" id="2717481">,</span>&nbsp;<span class="ident" id="2717483"><a href="/net/unixsock_posix.go.html#2717432">err</a></span><br>
<span class="lineno"></span><span class="op" id="2717487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2717490">//&nbsp;ReadMsgUnix&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="2717559">//&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;into&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2717630">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b,&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;oob,&nbsp;the&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2717701">//&nbsp;that&nbsp;were&nbsp;set&nbsp;on&nbsp;the&nbsp;packet,&nbsp;and&nbsp;the&nbsp;source&nbsp;address&nbsp;of&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span><span class="keyword" id="2717771">func</span>&nbsp;<span class="op" id="2717776">(</span><span class="ident" id="2717777">c</span>&nbsp;<span class="op" id="2717779">*</span><span class="ident" id="2717780"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2717788">)</span>&nbsp;<span class="ident" id="2717790">ReadMsgUnix</span><span class="op" id="2717801">(</span><span class="ident" id="2717802">b</span><span class="op" id="2717803">,</span>&nbsp;<span class="ident" id="2717805">oob</span>&nbsp;<span class="op" id="2717809">[</span><span class="op" id="2717810">]</span><span class="builtintype" id="2717811">byte</span><span class="op" id="2717815">)</span>&nbsp;<span class="op" id="2717817">(</span><span class="ident" id="2717818">n</span><span class="op" id="2717819">,</span>&nbsp;<span class="ident" id="2717821">oobn</span><span class="op" id="2717825">,</span>&nbsp;<span class="ident" id="2717827">flags</span>&nbsp;<span class="builtintype" id="2717833">int</span><span class="op" id="2717836">,</span>&nbsp;<span class="ident" id="2717838">addr</span>&nbsp;<span class="op" id="2717843">*</span><span class="ident" id="2717844"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2717852">,</span>&nbsp;<span class="ident" id="2717854">err</span>&nbsp;<span class="builtintype" id="2717858">error</span><span class="op" id="2717863">)</span>&nbsp;<span class="op" id="2717865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717868">if</span>&nbsp;<span class="op" id="2717871">!</span><span class="ident" id="2717872"><a href="/net/unixsock_posix.go.html#2717777">c</a></span><span class="op" id="2717873">.</span><span class="ident" id="2717874">ok</span><span class="op" id="2717876">(</span><span class="op" id="2717877">)</span>&nbsp;<span class="op" id="2717879">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717883">return</span>&nbsp;<span class="num" id="2717890">0</span><span class="op" id="2717891">,</span>&nbsp;<span class="num" id="2717893">0</span><span class="op" id="2717894">,</span>&nbsp;<span class="num" id="2717896">0</span><span class="op" id="2717897">,</span>&nbsp;<span class="ident" id="2717899">nil</span><span class="op" id="2717902">,</span>&nbsp;<span class="ident" id="2717904"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2717911">.</span><span class="ident" id="2717912">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2717920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2717923"><a href="/net/unixsock_posix.go.html#2717818">n</a></span><span class="op" id="2717924">,</span>&nbsp;<span class="ident" id="2717926"><a href="/net/unixsock_posix.go.html#2717821">oobn</a></span><span class="op" id="2717930">,</span>&nbsp;<span class="ident" id="2717932"><a href="/net/unixsock_posix.go.html#2717827">flags</a></span><span class="op" id="2717937">,</span>&nbsp;<span class="ident" id="2717939">sa</span><span class="op" id="2717941">,</span>&nbsp;<span class="ident" id="2717943"><a href="/net/unixsock_posix.go.html#2717854">err</a></span>&nbsp;<span class="op" id="2717947">:=</span>&nbsp;<span class="ident" id="2717950"><a href="/net/unixsock_posix.go.html#2717777">c</a></span><span class="op" id="2717951">.</span><span class="ident" id="2717952">fd</span><span class="op" id="2717954">.</span><span class="ident" id="2717955">readMsg</span><span class="op" id="2717962">(</span><span class="ident" id="2717963"><a href="/net/unixsock_posix.go.html#2717802">b</a></span><span class="op" id="2717964">,</span>&nbsp;<span class="ident" id="2717966"><a href="/net/unixsock_posix.go.html#2717805">oob</a></span><span class="op" id="2717969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717972">switch</span>&nbsp;<span class="ident" id="2717979">sa</span>&nbsp;<span class="op" id="2717982">:=</span>&nbsp;<span class="ident" id="2717985"><a href="/net/unixsock_posix.go.html#2717939">sa</a></span><span class="op" id="2717987">.</span><span class="op" id="2717988">(</span><span class="keyword" id="2717989">type</span><span class="op" id="2717993">)</span>&nbsp;<span class="op" id="2717995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2717998">case</span>&nbsp;<span class="op" id="2718003">*</span><span class="ident" id="2718004"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2718011">.</span><span class="ident" id="2718012">SockaddrUnix</span><span class="op" id="2718024">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718028">if</span>&nbsp;<span class="ident" id="2718031"><a href="/net/unixsock_posix.go.html#2717979">sa</a></span><span class="op" id="2718033">.</span><span class="ident" id="2718034">Name</span>&nbsp;<span class="op" id="2718039">!=</span>&nbsp;<span class="string" id="2718042">&#34;&#34;</span>&nbsp;<span class="op" id="2718045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718050"><a href="/net/unixsock_posix.go.html#2717838">addr</a></span>&nbsp;<span class="op" id="2718055">=</span>&nbsp;<span class="op" id="2718057">&amp;</span><span class="ident" id="2718058"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2718066">{</span><span class="ident" id="2718067">Name</span><span class="op" id="2718071">:</span>&nbsp;<span class="ident" id="2718073"><a href="/net/unixsock_posix.go.html#2717979">sa</a></span><span class="op" id="2718075">.</span><span class="ident" id="2718076">Name</span><span class="op" id="2718080">,</span>&nbsp;<span class="ident" id="2718082">Net</span><span class="op" id="2718085">:</span>&nbsp;<span class="ident" id="2718087"><a href="/net/unixsock_posix.go.html#2715885">sotypeToNet</a></span><span class="op" id="2718098">(</span><span class="ident" id="2718099"><a href="/net/unixsock_posix.go.html#2717777">c</a></span><span class="op" id="2718100">.</span><span class="ident" id="2718101">fd</span><span class="op" id="2718103">.</span><span class="ident" id="2718104">sotype</span><span class="op" id="2718110">)</span><span class="op" id="2718111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718121">return</span><br>
<span class="lineno">155</span><span class="op" id="2718128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2718131">//&nbsp;WriteToUnix&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload&nbsp;from&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="2718205">//</span><br>
<span class="lineno"></span><span class="comment" id="2718208">//&nbsp;WriteToUnix&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;an&nbsp;error&nbsp;with</span><br>
<span class="lineno">160</span><span class="comment" id="2718272">//&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2718339">//&nbsp;SetWriteDeadline.&nbsp;&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts</span><br>
<span class="lineno"></span><span class="comment" id="2718408">//&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span><span class="keyword" id="2718421">func</span>&nbsp;<span class="op" id="2718426">(</span><span class="ident" id="2718427">c</span>&nbsp;<span class="op" id="2718429">*</span><span class="ident" id="2718430"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2718438">)</span>&nbsp;<span class="ident" id="2718440">WriteToUnix</span><span class="op" id="2718451">(</span><span class="ident" id="2718452">b</span>&nbsp;<span class="op" id="2718454">[</span><span class="op" id="2718455">]</span><span class="builtintype" id="2718456">byte</span><span class="op" id="2718460">,</span>&nbsp;<span class="ident" id="2718462">addr</span>&nbsp;<span class="op" id="2718467">*</span><span class="ident" id="2718468"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2718476">)</span>&nbsp;<span class="op" id="2718478">(</span><span class="ident" id="2718479">n</span>&nbsp;<span class="builtintype" id="2718481">int</span><span class="op" id="2718484">,</span>&nbsp;<span class="ident" id="2718486">err</span>&nbsp;<span class="builtintype" id="2718490">error</span><span class="op" id="2718495">)</span>&nbsp;<span class="op" id="2718497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718500">if</span>&nbsp;<span class="op" id="2718503">!</span><span class="ident" id="2718504"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718505">.</span><span class="ident" id="2718506">ok</span><span class="op" id="2718508">(</span><span class="op" id="2718509">)</span>&nbsp;<span class="op" id="2718511">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718515">return</span>&nbsp;<span class="num" id="2718522">0</span><span class="op" id="2718523">,</span>&nbsp;<span class="ident" id="2718525"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2718532">.</span><span class="ident" id="2718533">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718544">if</span>&nbsp;<span class="ident" id="2718547"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718548">.</span><span class="ident" id="2718549">fd</span><span class="op" id="2718551">.</span><span class="ident" id="2718552">isConnected</span>&nbsp;<span class="op" id="2718564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718568">return</span>&nbsp;<span class="num" id="2718575">0</span><span class="op" id="2718576">,</span>&nbsp;<span class="op" id="2718578">&amp;</span><span class="ident" id="2718579"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2718586">{</span><span class="ident" id="2718587">Op</span><span class="op" id="2718589">:</span>&nbsp;<span class="string" id="2718591">&#34;write&#34;</span><span class="op" id="2718598">,</span>&nbsp;<span class="ident" id="2718600">Net</span><span class="op" id="2718603">:</span>&nbsp;<span class="ident" id="2718605"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718606">.</span><span class="ident" id="2718607">fd</span><span class="op" id="2718609">.</span><span class="ident" id="2718610">net</span><span class="op" id="2718613">,</span>&nbsp;<span class="ident" id="2718615">Addr</span><span class="op" id="2718619">:</span>&nbsp;<span class="ident" id="2718621"><a href="/net/unixsock_posix.go.html#2718462">addr</a></span><span class="op" id="2718625">,</span>&nbsp;<span class="ident" id="2718627">Err</span><span class="op" id="2718630">:</span>&nbsp;<span class="ident" id="2718632"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span><span class="op" id="2718651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718654">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718657">if</span>&nbsp;<span class="ident" id="2718660"><a href="/net/unixsock_posix.go.html#2718462">addr</a></span>&nbsp;<span class="op" id="2718665">==</span>&nbsp;<span class="ident" id="2718668">nil</span>&nbsp;<span class="op" id="2718672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718676">return</span>&nbsp;<span class="num" id="2718683">0</span><span class="op" id="2718684">,</span>&nbsp;<span class="op" id="2718686">&amp;</span><span class="ident" id="2718687"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2718694">{</span><span class="ident" id="2718695">Op</span><span class="op" id="2718697">:</span>&nbsp;<span class="string" id="2718699">&#34;write&#34;</span><span class="op" id="2718706">,</span>&nbsp;<span class="ident" id="2718708">Net</span><span class="op" id="2718711">:</span>&nbsp;<span class="ident" id="2718713"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718714">.</span><span class="ident" id="2718715">fd</span><span class="op" id="2718717">.</span><span class="ident" id="2718718">net</span><span class="op" id="2718721">,</span>&nbsp;<span class="ident" id="2718723">Addr</span><span class="op" id="2718727">:</span>&nbsp;<span class="ident" id="2718729">nil</span><span class="op" id="2718732">,</span>&nbsp;<span class="ident" id="2718734">Err</span><span class="op" id="2718737">:</span>&nbsp;<span class="ident" id="2718739"><a href="/net/net.go.html#2659161">errMissingAddress</a></span><span class="op" id="2718756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718762">if</span>&nbsp;<span class="ident" id="2718765"><a href="/net/unixsock_posix.go.html#2718462">addr</a></span><span class="op" id="2718769">.</span><span class="ident" id="2718770">Net</span>&nbsp;<span class="op" id="2718774">!=</span>&nbsp;<span class="ident" id="2718777"><a href="/net/unixsock_posix.go.html#2715885">sotypeToNet</a></span><span class="op" id="2718788">(</span><span class="ident" id="2718789"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718790">.</span><span class="ident" id="2718791">fd</span><span class="op" id="2718793">.</span><span class="ident" id="2718794">sotype</span><span class="op" id="2718800">)</span>&nbsp;<span class="op" id="2718802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718806">return</span>&nbsp;<span class="num" id="2718813">0</span><span class="op" id="2718814">,</span>&nbsp;<span class="ident" id="2718816"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2718823">.</span><span class="ident" id="2718824">EAFNOSUPPORT</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2718838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718841">sa</span>&nbsp;<span class="op" id="2718844">:=</span>&nbsp;<span class="op" id="2718847">&amp;</span><span class="ident" id="2718848"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2718855">.</span><span class="ident" id="2718856">SockaddrUnix</span><span class="op" id="2718868">{</span><span class="ident" id="2718869">Name</span><span class="op" id="2718873">:</span>&nbsp;<span class="ident" id="2718875"><a href="/net/unixsock_posix.go.html#2718462">addr</a></span><span class="op" id="2718879">.</span><span class="ident" id="2718880">Name</span><span class="op" id="2718884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2718887">return</span>&nbsp;<span class="ident" id="2718894"><a href="/net/unixsock_posix.go.html#2718427">c</a></span><span class="op" id="2718895">.</span><span class="ident" id="2718896">fd</span><span class="op" id="2718898">.</span><span class="ident" id="2718899">writeTo</span><span class="op" id="2718906">(</span><span class="ident" id="2718907"><a href="/net/unixsock_posix.go.html#2718452">b</a></span><span class="op" id="2718908">,</span>&nbsp;<span class="ident" id="2718910"><a href="/net/unixsock_posix.go.html#2718841">sa</a></span><span class="op" id="2718912">)</span><br>
<span class="lineno"></span><span class="op" id="2718914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="2718917">//&nbsp;WriteTo&nbsp;implements&nbsp;the&nbsp;PacketConn&nbsp;WriteTo&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2718970">func</span>&nbsp;<span class="op" id="2718975">(</span><span class="ident" id="2718976">c</span>&nbsp;<span class="op" id="2718978">*</span><span class="ident" id="2718979"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2718987">)</span>&nbsp;<span class="ident" id="2718989">WriteTo</span><span class="op" id="2718996">(</span><span class="ident" id="2718997">b</span>&nbsp;<span class="op" id="2718999">[</span><span class="op" id="2719000">]</span><span class="builtintype" id="2719001">byte</span><span class="op" id="2719005">,</span>&nbsp;<span class="ident" id="2719007">addr</span>&nbsp;<span class="ident" id="2719012"><a href="/net/net.go.html#2652238">Addr</a></span><span class="op" id="2719016">)</span>&nbsp;<span class="op" id="2719018">(</span><span class="ident" id="2719019">n</span>&nbsp;<span class="builtintype" id="2719021">int</span><span class="op" id="2719024">,</span>&nbsp;<span class="ident" id="2719026">err</span>&nbsp;<span class="builtintype" id="2719030">error</span><span class="op" id="2719035">)</span>&nbsp;<span class="op" id="2719037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719040">if</span>&nbsp;<span class="op" id="2719043">!</span><span class="ident" id="2719044"><a href="/net/unixsock_posix.go.html#2718976">c</a></span><span class="op" id="2719045">.</span><span class="ident" id="2719046">ok</span><span class="op" id="2719048">(</span><span class="op" id="2719049">)</span>&nbsp;<span class="op" id="2719051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719055">return</span>&nbsp;<span class="num" id="2719062">0</span><span class="op" id="2719063">,</span>&nbsp;<span class="ident" id="2719065"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719072">.</span><span class="ident" id="2719073">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719081">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719084">a</span><span class="op" id="2719085">,</span>&nbsp;<span class="ident" id="2719087">ok</span>&nbsp;<span class="op" id="2719090">:=</span>&nbsp;<span class="ident" id="2719093"><a href="/net/unixsock_posix.go.html#2719007">addr</a></span><span class="op" id="2719097">.</span><span class="op" id="2719098">(</span><span class="op" id="2719099">*</span><span class="ident" id="2719100"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2719108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719111">if</span>&nbsp;<span class="op" id="2719114">!</span><span class="ident" id="2719115"><a href="/net/unixsock_posix.go.html#2719087">ok</a></span>&nbsp;<span class="op" id="2719118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719122">return</span>&nbsp;<span class="num" id="2719129">0</span><span class="op" id="2719130">,</span>&nbsp;<span class="op" id="2719132">&amp;</span><span class="ident" id="2719133"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2719140">{</span><span class="string" id="2719141">&#34;write&#34;</span><span class="op" id="2719148">,</span>&nbsp;<span class="ident" id="2719150"><a href="/net/unixsock_posix.go.html#2718976">c</a></span><span class="op" id="2719151">.</span><span class="ident" id="2719152">fd</span><span class="op" id="2719154">.</span><span class="ident" id="2719155">net</span><span class="op" id="2719158">,</span>&nbsp;<span class="ident" id="2719160"><a href="/net/unixsock_posix.go.html#2719007">addr</a></span><span class="op" id="2719164">,</span>&nbsp;<span class="ident" id="2719166"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719173">.</span><span class="ident" id="2719174">EINVAL</span><span class="op" id="2719180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719186">return</span>&nbsp;<span class="ident" id="2719193"><a href="/net/unixsock_posix.go.html#2718976">c</a></span><span class="op" id="2719194">.</span><span class="ident" id="2719195">WriteToUnix</span><span class="op" id="2719206">(</span><span class="ident" id="2719207"><a href="/net/unixsock_posix.go.html#2718997">b</a></span><span class="op" id="2719208">,</span>&nbsp;<span class="ident" id="2719210"><a href="/net/unixsock_posix.go.html#2719084">a</a></span><span class="op" id="2719211">)</span><br>
<span class="lineno">190</span><span class="op" id="2719213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2719216">//&nbsp;WriteMsgUnix&nbsp;writes&nbsp;a&nbsp;packet&nbsp;to&nbsp;addr&nbsp;via&nbsp;c,&nbsp;copying&nbsp;the&nbsp;payload</span><br>
<span class="lineno"></span><span class="comment" id="2719283">//&nbsp;from&nbsp;b&nbsp;and&nbsp;the&nbsp;associated&nbsp;out-of-band&nbsp;data&nbsp;from&nbsp;oob.&nbsp;&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="2719351">//&nbsp;the&nbsp;number&nbsp;of&nbsp;payload&nbsp;and&nbsp;out-of-band&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno">195</span><span class="keyword" id="2719407">func</span>&nbsp;<span class="op" id="2719412">(</span><span class="ident" id="2719413">c</span>&nbsp;<span class="op" id="2719415">*</span><span class="ident" id="2719416"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2719424">)</span>&nbsp;<span class="ident" id="2719426">WriteMsgUnix</span><span class="op" id="2719438">(</span><span class="ident" id="2719439">b</span><span class="op" id="2719440">,</span>&nbsp;<span class="ident" id="2719442">oob</span>&nbsp;<span class="op" id="2719446">[</span><span class="op" id="2719447">]</span><span class="builtintype" id="2719448">byte</span><span class="op" id="2719452">,</span>&nbsp;<span class="ident" id="2719454">addr</span>&nbsp;<span class="op" id="2719459">*</span><span class="ident" id="2719460"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2719468">)</span>&nbsp;<span class="op" id="2719470">(</span><span class="ident" id="2719471">n</span><span class="op" id="2719472">,</span>&nbsp;<span class="ident" id="2719474">oobn</span>&nbsp;<span class="builtintype" id="2719479">int</span><span class="op" id="2719482">,</span>&nbsp;<span class="ident" id="2719484">err</span>&nbsp;<span class="builtintype" id="2719488">error</span><span class="op" id="2719493">)</span>&nbsp;<span class="op" id="2719495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719498">if</span>&nbsp;<span class="op" id="2719501">!</span><span class="ident" id="2719502"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719503">.</span><span class="ident" id="2719504">ok</span><span class="op" id="2719506">(</span><span class="op" id="2719507">)</span>&nbsp;<span class="op" id="2719509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719513">return</span>&nbsp;<span class="num" id="2719520">0</span><span class="op" id="2719521">,</span>&nbsp;<span class="num" id="2719523">0</span><span class="op" id="2719524">,</span>&nbsp;<span class="ident" id="2719526"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719533">.</span><span class="ident" id="2719534">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719545">if</span>&nbsp;<span class="ident" id="2719548"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719549">.</span><span class="ident" id="2719550">fd</span><span class="op" id="2719552">.</span><span class="ident" id="2719553">sotype</span>&nbsp;<span class="op" id="2719560">==</span>&nbsp;<span class="ident" id="2719563"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719570">.</span><span class="ident" id="2719571">SOCK_DGRAM</span>&nbsp;<span class="op" id="2719582">&amp;&amp;</span>&nbsp;<span class="ident" id="2719585"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719586">.</span><span class="ident" id="2719587">fd</span><span class="op" id="2719589">.</span><span class="ident" id="2719590">isConnected</span>&nbsp;<span class="op" id="2719602">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719606">return</span>&nbsp;<span class="num" id="2719613">0</span><span class="op" id="2719614">,</span>&nbsp;<span class="num" id="2719616">0</span><span class="op" id="2719617">,</span>&nbsp;<span class="op" id="2719619">&amp;</span><span class="ident" id="2719620"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2719627">{</span><span class="ident" id="2719628">Op</span><span class="op" id="2719630">:</span>&nbsp;<span class="string" id="2719632">&#34;write&#34;</span><span class="op" id="2719639">,</span>&nbsp;<span class="ident" id="2719641">Net</span><span class="op" id="2719644">:</span>&nbsp;<span class="ident" id="2719646"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719647">.</span><span class="ident" id="2719648">fd</span><span class="op" id="2719650">.</span><span class="ident" id="2719651">net</span><span class="op" id="2719654">,</span>&nbsp;<span class="ident" id="2719656">Addr</span><span class="op" id="2719660">:</span>&nbsp;<span class="ident" id="2719662"><a href="/net/unixsock_posix.go.html#2719454">addr</a></span><span class="op" id="2719666">,</span>&nbsp;<span class="ident" id="2719668">Err</span><span class="op" id="2719671">:</span>&nbsp;<span class="ident" id="2719673"><a href="/net/net.go.html#2659374">ErrWriteToConnected</a></span><span class="op" id="2719692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719698">if</span>&nbsp;<span class="ident" id="2719701"><a href="/net/unixsock_posix.go.html#2719454">addr</a></span>&nbsp;<span class="op" id="2719706">!=</span>&nbsp;<span class="ident" id="2719709">nil</span>&nbsp;<span class="op" id="2719713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719717">if</span>&nbsp;<span class="ident" id="2719720"><a href="/net/unixsock_posix.go.html#2719454">addr</a></span><span class="op" id="2719724">.</span><span class="ident" id="2719725">Net</span>&nbsp;<span class="op" id="2719729">!=</span>&nbsp;<span class="ident" id="2719732"><a href="/net/unixsock_posix.go.html#2715885">sotypeToNet</a></span><span class="op" id="2719743">(</span><span class="ident" id="2719744"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719745">.</span><span class="ident" id="2719746">fd</span><span class="op" id="2719748">.</span><span class="ident" id="2719749">sotype</span><span class="op" id="2719755">)</span>&nbsp;<span class="op" id="2719757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719762">return</span>&nbsp;<span class="num" id="2719769">0</span><span class="op" id="2719770">,</span>&nbsp;<span class="num" id="2719772">0</span><span class="op" id="2719773">,</span>&nbsp;<span class="ident" id="2719775"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719782">.</span><span class="ident" id="2719783">EAFNOSUPPORT</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719802">sa</span>&nbsp;<span class="op" id="2719805">:=</span>&nbsp;<span class="op" id="2719808">&amp;</span><span class="ident" id="2719809"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2719816">.</span><span class="ident" id="2719817">SockaddrUnix</span><span class="op" id="2719829">{</span><span class="ident" id="2719830">Name</span><span class="op" id="2719834">:</span>&nbsp;<span class="ident" id="2719836"><a href="/net/unixsock_posix.go.html#2719454">addr</a></span><span class="op" id="2719840">.</span><span class="ident" id="2719841">Name</span><span class="op" id="2719845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719849">return</span>&nbsp;<span class="ident" id="2719856"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719857">.</span><span class="ident" id="2719858">fd</span><span class="op" id="2719860">.</span><span class="ident" id="2719861">writeMsg</span><span class="op" id="2719869">(</span><span class="ident" id="2719870"><a href="/net/unixsock_posix.go.html#2719439">b</a></span><span class="op" id="2719871">,</span>&nbsp;<span class="ident" id="2719873"><a href="/net/unixsock_posix.go.html#2719442">oob</a></span><span class="op" id="2719876">,</span>&nbsp;<span class="ident" id="2719878"><a href="/net/unixsock_posix.go.html#2719802">sa</a></span><span class="op" id="2719880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719886">return</span>&nbsp;<span class="ident" id="2719893"><a href="/net/unixsock_posix.go.html#2719413">c</a></span><span class="op" id="2719894">.</span><span class="ident" id="2719895">fd</span><span class="op" id="2719897">.</span><span class="ident" id="2719898">writeMsg</span><span class="op" id="2719906">(</span><span class="ident" id="2719907"><a href="/net/unixsock_posix.go.html#2719439">b</a></span><span class="op" id="2719908">,</span>&nbsp;<span class="ident" id="2719910"><a href="/net/unixsock_posix.go.html#2719442">oob</a></span><span class="op" id="2719913">,</span>&nbsp;<span class="ident" id="2719915">nil</span><span class="op" id="2719918">)</span><br>
<span class="lineno">210</span><span class="op" id="2719920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2719923">//&nbsp;CloseRead&nbsp;shuts&nbsp;down&nbsp;the&nbsp;reading&nbsp;side&nbsp;of&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="2719995">//&nbsp;Most&nbsp;callers&nbsp;should&nbsp;just&nbsp;use&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="2720034">func</span>&nbsp;<span class="op" id="2720039">(</span><span class="ident" id="2720040">c</span>&nbsp;<span class="op" id="2720042">*</span><span class="ident" id="2720043"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2720051">)</span>&nbsp;<span class="ident" id="2720053">CloseRead</span><span class="op" id="2720062">(</span><span class="op" id="2720063">)</span>&nbsp;<span class="builtintype" id="2720065">error</span>&nbsp;<span class="op" id="2720071">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720074">if</span>&nbsp;<span class="op" id="2720077">!</span><span class="ident" id="2720078"><a href="/net/unixsock_posix.go.html#2720040">c</a></span><span class="op" id="2720079">.</span><span class="ident" id="2720080">ok</span><span class="op" id="2720082">(</span><span class="op" id="2720083">)</span>&nbsp;<span class="op" id="2720085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720089">return</span>&nbsp;<span class="ident" id="2720096"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2720103">.</span><span class="ident" id="2720104">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720115">return</span>&nbsp;<span class="ident" id="2720122"><a href="/net/unixsock_posix.go.html#2720040">c</a></span><span class="op" id="2720123">.</span><span class="ident" id="2720124">fd</span><span class="op" id="2720126">.</span><span class="ident" id="2720127">closeRead</span><span class="op" id="2720136">(</span><span class="op" id="2720137">)</span><br>
<span class="lineno"></span><span class="op" id="2720139">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2720142">//&nbsp;CloseWrite&nbsp;shuts&nbsp;down&nbsp;the&nbsp;writing&nbsp;side&nbsp;of&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="2720215">//&nbsp;Most&nbsp;callers&nbsp;should&nbsp;just&nbsp;use&nbsp;Close.</span><br>
<span class="lineno"></span><span class="keyword" id="2720254">func</span>&nbsp;<span class="op" id="2720259">(</span><span class="ident" id="2720260">c</span>&nbsp;<span class="op" id="2720262">*</span><span class="ident" id="2720263"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2720271">)</span>&nbsp;<span class="ident" id="2720273">CloseWrite</span><span class="op" id="2720283">(</span><span class="op" id="2720284">)</span>&nbsp;<span class="builtintype" id="2720286">error</span>&nbsp;<span class="op" id="2720292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720295">if</span>&nbsp;<span class="op" id="2720298">!</span><span class="ident" id="2720299"><a href="/net/unixsock_posix.go.html#2720260">c</a></span><span class="op" id="2720300">.</span><span class="ident" id="2720301">ok</span><span class="op" id="2720303">(</span><span class="op" id="2720304">)</span>&nbsp;<span class="op" id="2720306">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720310">return</span>&nbsp;<span class="ident" id="2720317"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2720324">.</span><span class="ident" id="2720325">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720336">return</span>&nbsp;<span class="ident" id="2720343"><a href="/net/unixsock_posix.go.html#2720260">c</a></span><span class="op" id="2720344">.</span><span class="ident" id="2720345">fd</span><span class="op" id="2720347">.</span><span class="ident" id="2720348">closeWrite</span><span class="op" id="2720358">(</span><span class="op" id="2720359">)</span><br>
<span class="lineno"></span><span class="op" id="2720361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2720364">//&nbsp;DialUnix&nbsp;connects&nbsp;to&nbsp;the&nbsp;remote&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno"></span><span class="comment" id="2720433">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;unix&#34;,&nbsp;&#34;unixgram&#34;&nbsp;or&nbsp;&#34;unixpacket&#34;.&nbsp;&nbsp;If&nbsp;laddr&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2720503">//&nbsp;nil,&nbsp;it&nbsp;is&nbsp;used&nbsp;as&nbsp;the&nbsp;local&nbsp;address&nbsp;for&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="2720563">func</span>&nbsp;<span class="ident" id="2720568">DialUnix</span><span class="op" id="2720576">(</span><span class="ident" id="2720577">net</span>&nbsp;<span class="builtintype" id="2720581">string</span><span class="op" id="2720587">,</span>&nbsp;<span class="ident" id="2720589">laddr</span><span class="op" id="2720594">,</span>&nbsp;<span class="ident" id="2720596">raddr</span>&nbsp;<span class="op" id="2720602">*</span><span class="ident" id="2720603"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2720611">)</span>&nbsp;<span class="op" id="2720613">(</span><span class="op" id="2720614">*</span><span class="ident" id="2720615"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2720623">,</span>&nbsp;<span class="builtintype" id="2720625">error</span><span class="op" id="2720630">)</span>&nbsp;<span class="op" id="2720632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720635">switch</span>&nbsp;<span class="ident" id="2720642"><a href="/net/unixsock_posix.go.html#2720577">net</a></span>&nbsp;<span class="op" id="2720646">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720649">case</span>&nbsp;<span class="string" id="2720654">&#34;unix&#34;</span><span class="op" id="2720660">,</span>&nbsp;<span class="string" id="2720662">&#34;unixgram&#34;</span><span class="op" id="2720672">,</span>&nbsp;<span class="string" id="2720674">&#34;unixpacket&#34;</span><span class="op" id="2720686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720689">default</span><span class="op" id="2720696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720700">return</span>&nbsp;<span class="ident" id="2720707">nil</span><span class="op" id="2720710">,</span>&nbsp;<span class="op" id="2720712">&amp;</span><span class="ident" id="2720713"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2720720">{</span><span class="ident" id="2720721">Op</span><span class="op" id="2720723">:</span>&nbsp;<span class="string" id="2720725">&#34;dial&#34;</span><span class="op" id="2720731">,</span>&nbsp;<span class="ident" id="2720733">Net</span><span class="op" id="2720736">:</span>&nbsp;<span class="ident" id="2720738"><a href="/net/unixsock_posix.go.html#2720577">net</a></span><span class="op" id="2720741">,</span>&nbsp;<span class="ident" id="2720743">Addr</span><span class="op" id="2720747">:</span>&nbsp;<span class="ident" id="2720749"><a href="/net/unixsock_posix.go.html#2720596">raddr</a></span><span class="op" id="2720754">,</span>&nbsp;<span class="ident" id="2720756">Err</span><span class="op" id="2720759">:</span>&nbsp;<span class="ident" id="2720761"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2720780">(</span><span class="ident" id="2720781"><a href="/net/unixsock_posix.go.html#2720577">net</a></span><span class="op" id="2720784">)</span><span class="op" id="2720785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720791">return</span>&nbsp;<span class="ident" id="2720798"><a href="/net/unixsock_posix.go.html#2720846">dialUnix</a></span><span class="op" id="2720806">(</span><span class="ident" id="2720807"><a href="/net/unixsock_posix.go.html#2720577">net</a></span><span class="op" id="2720810">,</span>&nbsp;<span class="ident" id="2720812"><a href="/net/unixsock_posix.go.html#2720589">laddr</a></span><span class="op" id="2720817">,</span>&nbsp;<span class="ident" id="2720819"><a href="/net/unixsock_posix.go.html#2720596">raddr</a></span><span class="op" id="2720824">,</span>&nbsp;<span class="ident" id="2720826"><a href="/net/net.go.html#2660335">noDeadline</a></span><span class="op" id="2720836">)</span><br>
<span class="lineno">240</span><span class="op" id="2720838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2720841">func</span>&nbsp;<span class="ident" id="2720846">dialUnix</span><span class="op" id="2720854">(</span><span class="ident" id="2720855">net</span>&nbsp;<span class="builtintype" id="2720859">string</span><span class="op" id="2720865">,</span>&nbsp;<span class="ident" id="2720867">laddr</span><span class="op" id="2720872">,</span>&nbsp;<span class="ident" id="2720874">raddr</span>&nbsp;<span class="op" id="2720880">*</span><span class="ident" id="2720881"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2720889">,</span>&nbsp;<span class="ident" id="2720891">deadline</span>&nbsp;<span class="ident" id="2720900"><a href="/net/unixsock_posix.go.html#2714566">time</a></span><span class="op" id="2720904">.</span><span class="ident" id="2720905">Time</span><span class="op" id="2720909">)</span>&nbsp;<span class="op" id="2720911">(</span><span class="op" id="2720912">*</span><span class="ident" id="2720913"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2720921">,</span>&nbsp;<span class="builtintype" id="2720923">error</span><span class="op" id="2720928">)</span>&nbsp;<span class="op" id="2720930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720933">fd</span><span class="op" id="2720935">,</span>&nbsp;<span class="ident" id="2720937">err</span>&nbsp;<span class="op" id="2720941">:=</span>&nbsp;<span class="ident" id="2720944"><a href="/net/unixsock_posix.go.html#2714581">unixSocket</a></span><span class="op" id="2720954">(</span><span class="ident" id="2720955"><a href="/net/unixsock_posix.go.html#2720855">net</a></span><span class="op" id="2720958">,</span>&nbsp;<span class="ident" id="2720960"><a href="/net/unixsock_posix.go.html#2720867">laddr</a></span><span class="op" id="2720965">,</span>&nbsp;<span class="ident" id="2720967"><a href="/net/unixsock_posix.go.html#2720874">raddr</a></span><span class="op" id="2720972">,</span>&nbsp;<span class="string" id="2720974">&#34;dial&#34;</span><span class="op" id="2720980">,</span>&nbsp;<span class="ident" id="2720982"><a href="/net/unixsock_posix.go.html#2720891">deadline</a></span><span class="op" id="2720990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720993">if</span>&nbsp;<span class="ident" id="2720996"><a href="/net/unixsock_posix.go.html#2720937">err</a></span>&nbsp;<span class="op" id="2721000">!=</span>&nbsp;<span class="ident" id="2721003">nil</span>&nbsp;<span class="op" id="2721007">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721011">return</span>&nbsp;<span class="ident" id="2721018">nil</span><span class="op" id="2721021">,</span>&nbsp;<span class="op" id="2721023">&amp;</span><span class="ident" id="2721024"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2721031">{</span><span class="ident" id="2721032">Op</span><span class="op" id="2721034">:</span>&nbsp;<span class="string" id="2721036">&#34;dial&#34;</span><span class="op" id="2721042">,</span>&nbsp;<span class="ident" id="2721044">Net</span><span class="op" id="2721047">:</span>&nbsp;<span class="ident" id="2721049"><a href="/net/unixsock_posix.go.html#2720855">net</a></span><span class="op" id="2721052">,</span>&nbsp;<span class="ident" id="2721054">Addr</span><span class="op" id="2721058">:</span>&nbsp;<span class="ident" id="2721060"><a href="/net/unixsock_posix.go.html#2720874">raddr</a></span><span class="op" id="2721065">,</span>&nbsp;<span class="ident" id="2721067">Err</span><span class="op" id="2721070">:</span>&nbsp;<span class="ident" id="2721072"><a href="/net/unixsock_posix.go.html#2720937">err</a></span><span class="op" id="2721075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721081">return</span>&nbsp;<span class="ident" id="2721088"><a href="/net/unixsock_posix.go.html#2716562">newUnixConn</a></span><span class="op" id="2721099">(</span><span class="ident" id="2721100"><a href="/net/unixsock_posix.go.html#2720933">fd</a></span><span class="op" id="2721102">)</span><span class="op" id="2721103">,</span>&nbsp;<span class="ident" id="2721105">nil</span><br>
<span class="lineno"></span><span class="op" id="2721109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="comment" id="2721112">//&nbsp;UnixListener&nbsp;is&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket&nbsp;listener.&nbsp;&nbsp;Clients&nbsp;should</span><br>
<span class="lineno"></span><span class="comment" id="2721178">//&nbsp;typically&nbsp;use&nbsp;variables&nbsp;of&nbsp;type&nbsp;Listener&nbsp;instead&nbsp;of&nbsp;assuming&nbsp;Unix</span><br>
<span class="lineno"></span><span class="comment" id="2721247">//&nbsp;domain&nbsp;sockets.</span><br>
<span class="lineno"></span><span class="keyword" id="2721266">type</span>&nbsp;<span class="ident" id="2721271">UnixListener</span>&nbsp;<span class="keyword" id="2721284">struct</span>&nbsp;<span class="op" id="2721291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721294">fd</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2721299">*</span><span class="ident" id="2721300"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721307">path</span>&nbsp;<span class="builtintype" id="2721312">string</span><br>
<span class="lineno"></span><span class="op" id="2721319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2721322">//&nbsp;ListenUnix&nbsp;announces&nbsp;on&nbsp;the&nbsp;Unix&nbsp;domain&nbsp;socket&nbsp;laddr&nbsp;and&nbsp;returns&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2721392">//&nbsp;Unix&nbsp;listener.&nbsp;&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;&#34;unix&#34;&nbsp;or&nbsp;&#34;unixpacket&#34;.</span><br>
<span class="lineno">260</span><span class="keyword" id="2721459">func</span>&nbsp;<span class="ident" id="2721464">ListenUnix</span><span class="op" id="2721474">(</span><span class="ident" id="2721475">net</span>&nbsp;<span class="builtintype" id="2721479">string</span><span class="op" id="2721485">,</span>&nbsp;<span class="ident" id="2721487">laddr</span>&nbsp;<span class="op" id="2721493">*</span><span class="ident" id="2721494"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2721502">)</span>&nbsp;<span class="op" id="2721504">(</span><span class="op" id="2721505">*</span><span class="ident" id="2721506"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2721518">,</span>&nbsp;<span class="builtintype" id="2721520">error</span><span class="op" id="2721525">)</span>&nbsp;<span class="op" id="2721527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721530">switch</span>&nbsp;<span class="ident" id="2721537"><a href="/net/unixsock_posix.go.html#2721475">net</a></span>&nbsp;<span class="op" id="2721541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721544">case</span>&nbsp;<span class="string" id="2721549">&#34;unix&#34;</span><span class="op" id="2721555">,</span>&nbsp;<span class="string" id="2721557">&#34;unixpacket&#34;</span><span class="op" id="2721569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721572">default</span><span class="op" id="2721579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721583">return</span>&nbsp;<span class="ident" id="2721590">nil</span><span class="op" id="2721593">,</span>&nbsp;<span class="op" id="2721595">&amp;</span><span class="ident" id="2721596"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2721603">{</span><span class="ident" id="2721604">Op</span><span class="op" id="2721606">:</span>&nbsp;<span class="string" id="2721608">&#34;listen&#34;</span><span class="op" id="2721616">,</span>&nbsp;<span class="ident" id="2721618">Net</span><span class="op" id="2721621">:</span>&nbsp;<span class="ident" id="2721623"><a href="/net/unixsock_posix.go.html#2721475">net</a></span><span class="op" id="2721626">,</span>&nbsp;<span class="ident" id="2721628">Addr</span><span class="op" id="2721632">:</span>&nbsp;<span class="ident" id="2721634"><a href="/net/unixsock_posix.go.html#2721487">laddr</a></span><span class="op" id="2721639">,</span>&nbsp;<span class="ident" id="2721641">Err</span><span class="op" id="2721644">:</span>&nbsp;<span class="ident" id="2721646"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2721665">(</span><span class="ident" id="2721666"><a href="/net/unixsock_posix.go.html#2721475">net</a></span><span class="op" id="2721669">)</span><span class="op" id="2721670">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721676">if</span>&nbsp;<span class="ident" id="2721679"><a href="/net/unixsock_posix.go.html#2721487">laddr</a></span>&nbsp;<span class="op" id="2721685">==</span>&nbsp;<span class="ident" id="2721688">nil</span>&nbsp;<span class="op" id="2721692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721696">return</span>&nbsp;<span class="ident" id="2721703">nil</span><span class="op" id="2721706">,</span>&nbsp;<span class="op" id="2721708">&amp;</span><span class="ident" id="2721709"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2721716">{</span><span class="ident" id="2721717">Op</span><span class="op" id="2721719">:</span>&nbsp;<span class="string" id="2721721">&#34;listen&#34;</span><span class="op" id="2721729">,</span>&nbsp;<span class="ident" id="2721731">Net</span><span class="op" id="2721734">:</span>&nbsp;<span class="ident" id="2721736"><a href="/net/unixsock_posix.go.html#2721475">net</a></span><span class="op" id="2721739">,</span>&nbsp;<span class="ident" id="2721741">Addr</span><span class="op" id="2721745">:</span>&nbsp;<span class="ident" id="2721747">nil</span><span class="op" id="2721750">,</span>&nbsp;<span class="ident" id="2721752">Err</span><span class="op" id="2721755">:</span>&nbsp;<span class="ident" id="2721757"><a href="/net/net.go.html#2659161">errMissingAddress</a></span><span class="op" id="2721774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721780">fd</span><span class="op" id="2721782">,</span>&nbsp;<span class="ident" id="2721784">err</span>&nbsp;<span class="op" id="2721788">:=</span>&nbsp;<span class="ident" id="2721791"><a href="/net/unixsock_posix.go.html#2714581">unixSocket</a></span><span class="op" id="2721801">(</span><span class="ident" id="2721802"><a href="/net/unixsock_posix.go.html#2721475">net</a></span><span class="op" id="2721805">,</span>&nbsp;<span class="ident" id="2721807"><a href="/net/unixsock_posix.go.html#2721487">laddr</a></span><span class="op" id="2721812">,</span>&nbsp;<span class="ident" id="2721814">nil</span><span class="op" id="2721817">,</span>&nbsp;<span class="string" id="2721819">&#34;listen&#34;</span><span class="op" id="2721827">,</span>&nbsp;<span class="ident" id="2721829"><a href="/net/net.go.html#2660335">noDeadline</a></span><span class="op" id="2721839">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721842">if</span>&nbsp;<span class="ident" id="2721845"><a href="/net/unixsock_posix.go.html#2721784">err</a></span>&nbsp;<span class="op" id="2721849">!=</span>&nbsp;<span class="ident" id="2721852">nil</span>&nbsp;<span class="op" id="2721856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721860">return</span>&nbsp;<span class="ident" id="2721867">nil</span><span class="op" id="2721870">,</span>&nbsp;<span class="op" id="2721872">&amp;</span><span class="ident" id="2721873"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2721880">{</span><span class="ident" id="2721881">Op</span><span class="op" id="2721883">:</span>&nbsp;<span class="string" id="2721885">&#34;listen&#34;</span><span class="op" id="2721893">,</span>&nbsp;<span class="ident" id="2721895">Net</span><span class="op" id="2721898">:</span>&nbsp;<span class="ident" id="2721900"><a href="/net/unixsock_posix.go.html#2721475">net</a></span><span class="op" id="2721903">,</span>&nbsp;<span class="ident" id="2721905">Addr</span><span class="op" id="2721909">:</span>&nbsp;<span class="ident" id="2721911"><a href="/net/unixsock_posix.go.html#2721487">laddr</a></span><span class="op" id="2721916">,</span>&nbsp;<span class="ident" id="2721918">Err</span><span class="op" id="2721921">:</span>&nbsp;<span class="ident" id="2721923"><a href="/net/unixsock_posix.go.html#2721784">err</a></span><span class="op" id="2721926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721932">return</span>&nbsp;<span class="op" id="2721939">&amp;</span><span class="ident" id="2721940"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2721952">{</span><span class="ident" id="2721953"><a href="/net/unixsock_posix.go.html#2721780">fd</a></span><span class="op" id="2721955">,</span>&nbsp;<span class="ident" id="2721957"><a href="/net/unixsock_posix.go.html#2721780">fd</a></span><span class="op" id="2721959">.</span><span class="ident" id="2721960">laddr</span><span class="op" id="2721965">.</span><span class="ident" id="2721966">String</span><span class="op" id="2721972">(</span><span class="op" id="2721973">)</span><span class="op" id="2721974">}</span><span class="op" id="2721975">,</span>&nbsp;<span class="ident" id="2721977">nil</span><br>
<span class="lineno"></span><span class="op" id="2721981">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2721984">//&nbsp;AcceptUnix&nbsp;accepts&nbsp;the&nbsp;next&nbsp;incoming&nbsp;call&nbsp;and&nbsp;returns&nbsp;the&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="2722049">//&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="2722064">func</span>&nbsp;<span class="op" id="2722069">(</span><span class="ident" id="2722070">l</span>&nbsp;<span class="op" id="2722072">*</span><span class="ident" id="2722073"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2722085">)</span>&nbsp;<span class="ident" id="2722087">AcceptUnix</span><span class="op" id="2722097">(</span><span class="op" id="2722098">)</span>&nbsp;<span class="op" id="2722100">(</span><span class="op" id="2722101">*</span><span class="ident" id="2722102"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2722110">,</span>&nbsp;<span class="builtintype" id="2722112">error</span><span class="op" id="2722117">)</span>&nbsp;<span class="op" id="2722119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722122">if</span>&nbsp;<span class="ident" id="2722125"><a href="/net/unixsock_posix.go.html#2722070">l</a></span>&nbsp;<span class="op" id="2722127">==</span>&nbsp;<span class="ident" id="2722130">nil</span>&nbsp;<span class="op" id="2722134">||</span>&nbsp;<span class="ident" id="2722137"><a href="/net/unixsock_posix.go.html#2722070">l</a></span><span class="op" id="2722138">.</span><span class="ident" id="2722139">fd</span>&nbsp;<span class="op" id="2722142">==</span>&nbsp;<span class="ident" id="2722145">nil</span>&nbsp;<span class="op" id="2722149">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722153">return</span>&nbsp;<span class="ident" id="2722160">nil</span><span class="op" id="2722163">,</span>&nbsp;<span class="ident" id="2722165"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2722172">.</span><span class="ident" id="2722173">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722184">fd</span><span class="op" id="2722186">,</span>&nbsp;<span class="ident" id="2722188">err</span>&nbsp;<span class="op" id="2722192">:=</span>&nbsp;<span class="ident" id="2722195"><a href="/net/unixsock_posix.go.html#2722070">l</a></span><span class="op" id="2722196">.</span><span class="ident" id="2722197">fd</span><span class="op" id="2722199">.</span><span class="ident" id="2722200">accept</span><span class="op" id="2722206">(</span><span class="op" id="2722207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722210">if</span>&nbsp;<span class="ident" id="2722213"><a href="/net/unixsock_posix.go.html#2722188">err</a></span>&nbsp;<span class="op" id="2722217">!=</span>&nbsp;<span class="ident" id="2722220">nil</span>&nbsp;<span class="op" id="2722224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722228">return</span>&nbsp;<span class="ident" id="2722235">nil</span><span class="op" id="2722238">,</span>&nbsp;<span class="ident" id="2722240"><a href="/net/unixsock_posix.go.html#2722188">err</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722248">c</span>&nbsp;<span class="op" id="2722250">:=</span>&nbsp;<span class="ident" id="2722253"><a href="/net/unixsock_posix.go.html#2716562">newUnixConn</a></span><span class="op" id="2722264">(</span><span class="ident" id="2722265"><a href="/net/unixsock_posix.go.html#2722184">fd</a></span><span class="op" id="2722267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722270">return</span>&nbsp;<span class="ident" id="2722277"><a href="/net/unixsock_posix.go.html#2722248">c</a></span><span class="op" id="2722278">,</span>&nbsp;<span class="ident" id="2722280">nil</span><br>
<span class="lineno"></span><span class="op" id="2722284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="comment" id="2722287">//&nbsp;Accept&nbsp;implements&nbsp;the&nbsp;Accept&nbsp;method&nbsp;in&nbsp;the&nbsp;Listener&nbsp;interface;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="2722356">//&nbsp;waits&nbsp;for&nbsp;the&nbsp;next&nbsp;call&nbsp;and&nbsp;returns&nbsp;a&nbsp;generic&nbsp;Conn.</span><br>
<span class="lineno"></span><span class="keyword" id="2722411">func</span>&nbsp;<span class="op" id="2722416">(</span><span class="ident" id="2722417">l</span>&nbsp;<span class="op" id="2722419">*</span><span class="ident" id="2722420"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2722432">)</span>&nbsp;<span class="ident" id="2722434">Accept</span><span class="op" id="2722440">(</span><span class="op" id="2722441">)</span>&nbsp;<span class="op" id="2722443">(</span><span class="ident" id="2722444">c</span>&nbsp;<span class="ident" id="2722446"><a href="/net/net.go.html#2652476">Conn</a></span><span class="op" id="2722450">,</span>&nbsp;<span class="ident" id="2722452">err</span>&nbsp;<span class="builtintype" id="2722456">error</span><span class="op" id="2722461">)</span>&nbsp;<span class="op" id="2722463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722466">c1</span><span class="op" id="2722468">,</span>&nbsp;<span class="ident" id="2722470"><a href="/net/unixsock_posix.go.html#2722452">err</a></span>&nbsp;<span class="op" id="2722474">:=</span>&nbsp;<span class="ident" id="2722477"><a href="/net/unixsock_posix.go.html#2722417">l</a></span><span class="op" id="2722478">.</span><span class="ident" id="2722479">AcceptUnix</span><span class="op" id="2722489">(</span><span class="op" id="2722490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722493">if</span>&nbsp;<span class="ident" id="2722496"><a href="/net/unixsock_posix.go.html#2722452">err</a></span>&nbsp;<span class="op" id="2722500">!=</span>&nbsp;<span class="ident" id="2722503">nil</span>&nbsp;<span class="op" id="2722507">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722511">return</span>&nbsp;<span class="ident" id="2722518">nil</span><span class="op" id="2722521">,</span>&nbsp;<span class="ident" id="2722523"><a href="/net/unixsock_posix.go.html#2722452">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722531">return</span>&nbsp;<span class="ident" id="2722538"><a href="/net/unixsock_posix.go.html#2722466">c1</a></span><span class="op" id="2722540">,</span>&nbsp;<span class="ident" id="2722542">nil</span><br>
<span class="lineno"></span><span class="op" id="2722546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="2722549">//&nbsp;Close&nbsp;stops&nbsp;listening&nbsp;on&nbsp;the&nbsp;Unix&nbsp;address.&nbsp;&nbsp;Already&nbsp;accepted</span><br>
<span class="lineno"></span><span class="comment" id="2722613">//&nbsp;connections&nbsp;are&nbsp;not&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2722644">func</span>&nbsp;<span class="op" id="2722649">(</span><span class="ident" id="2722650">l</span>&nbsp;<span class="op" id="2722652">*</span><span class="ident" id="2722653"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2722665">)</span>&nbsp;<span class="ident" id="2722667">Close</span><span class="op" id="2722672">(</span><span class="op" id="2722673">)</span>&nbsp;<span class="builtintype" id="2722675">error</span>&nbsp;<span class="op" id="2722681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722684">if</span>&nbsp;<span class="ident" id="2722687"><a href="/net/unixsock_posix.go.html#2722650">l</a></span>&nbsp;<span class="op" id="2722689">==</span>&nbsp;<span class="ident" id="2722692">nil</span>&nbsp;<span class="op" id="2722696">||</span>&nbsp;<span class="ident" id="2722699"><a href="/net/unixsock_posix.go.html#2722650">l</a></span><span class="op" id="2722700">.</span><span class="ident" id="2722701">fd</span>&nbsp;<span class="op" id="2722704">==</span>&nbsp;<span class="ident" id="2722707">nil</span>&nbsp;<span class="op" id="2722711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722715">return</span>&nbsp;<span class="ident" id="2722722"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2722729">.</span><span class="ident" id="2722730">EINVAL</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722742">//&nbsp;The&nbsp;operating&nbsp;system&nbsp;doesn&#39;t&nbsp;clean&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722784">//&nbsp;the&nbsp;file&nbsp;that&nbsp;announcing&nbsp;created,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722825">//&nbsp;we&nbsp;have&nbsp;to&nbsp;clean&nbsp;it&nbsp;up&nbsp;ourselves.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722863">//&nbsp;There&#39;s&nbsp;a&nbsp;race&nbsp;here--we&nbsp;can&#39;t&nbsp;know&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722906">//&nbsp;sure&nbsp;whether&nbsp;someone&nbsp;else&nbsp;has&nbsp;come&nbsp;along</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722951">//&nbsp;and&nbsp;replaced&nbsp;our&nbsp;socket&nbsp;name&nbsp;already--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722994">//&nbsp;but&nbsp;this&nbsp;sequence&nbsp;(remove&nbsp;then&nbsp;close)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723036">//&nbsp;is&nbsp;at&nbsp;least&nbsp;compatible&nbsp;with&nbsp;the&nbsp;auto-remove</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723084">//&nbsp;sequence&nbsp;in&nbsp;ListenUnix.&nbsp;&nbsp;It&#39;s&nbsp;only&nbsp;non-Go</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723130">//&nbsp;programs&nbsp;that&nbsp;can&nbsp;mess&nbsp;us&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723164">if</span>&nbsp;<span class="ident" id="2723167"><a href="/net/unixsock_posix.go.html#2722650">l</a></span><span class="op" id="2723168">.</span><span class="ident" id="2723169">path</span><span class="op" id="2723173">[</span><span class="num" id="2723174">0</span><span class="op" id="2723175">]</span>&nbsp;<span class="op" id="2723177">!=</span>&nbsp;<span class="string" id="2723180">&#39;@&#39;</span>&nbsp;<span class="op" id="2723184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2723188"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2723195">.</span><span class="ident" id="2723196">Unlink</span><span class="op" id="2723202">(</span><span class="ident" id="2723203"><a href="/net/unixsock_posix.go.html#2722650">l</a></span><span class="op" id="2723204">.</span><span class="ident" id="2723205">path</span><span class="op" id="2723209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723212">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723215">return</span>&nbsp;<span class="ident" id="2723222"><a href="/net/unixsock_posix.go.html#2722650">l</a></span><span class="op" id="2723223">.</span><span class="ident" id="2723224">fd</span><span class="op" id="2723226">.</span><span class="ident" id="2723227">Close</span><span class="op" id="2723232">(</span><span class="op" id="2723233">)</span><br>
<span class="lineno"></span><span class="op" id="2723235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2723238">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="2723286">func</span>&nbsp;<span class="op" id="2723291">(</span><span class="ident" id="2723292">l</span>&nbsp;<span class="op" id="2723294">*</span><span class="ident" id="2723295"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2723307">)</span>&nbsp;<span class="ident" id="2723309">Addr</span><span class="op" id="2723313">(</span><span class="op" id="2723314">)</span>&nbsp;<span class="ident" id="2723316"><a href="/net/net.go.html#2652238">Addr</a></span>&nbsp;<span class="op" id="2723321">{</span>&nbsp;<span class="keyword" id="2723323">return</span>&nbsp;<span class="ident" id="2723330"><a href="/net/unixsock_posix.go.html#2723292">l</a></span><span class="op" id="2723331">.</span><span class="ident" id="2723332">fd</span><span class="op" id="2723334">.</span><span class="ident" id="2723335">laddr</span>&nbsp;<span class="op" id="2723341">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="2723344">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;associated&nbsp;with&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span><span class="comment" id="2723407">//&nbsp;A&nbsp;zero&nbsp;time&nbsp;value&nbsp;disables&nbsp;the&nbsp;deadline.</span><br>
<span class="lineno"></span><span class="keyword" id="2723451">func</span>&nbsp;<span class="op" id="2723456">(</span><span class="ident" id="2723457">l</span>&nbsp;<span class="op" id="2723459">*</span><span class="ident" id="2723460"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2723472">)</span>&nbsp;<span class="ident" id="2723474">SetDeadline</span><span class="op" id="2723485">(</span><span class="ident" id="2723486">t</span>&nbsp;<span class="ident" id="2723488"><a href="/net/unixsock_posix.go.html#2714566">time</a></span><span class="op" id="2723492">.</span><span class="ident" id="2723493">Time</span><span class="op" id="2723497">)</span>&nbsp;<span class="op" id="2723499">(</span><span class="ident" id="2723500">err</span>&nbsp;<span class="builtintype" id="2723504">error</span><span class="op" id="2723509">)</span>&nbsp;<span class="op" id="2723511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723514">if</span>&nbsp;<span class="ident" id="2723517"><a href="/net/unixsock_posix.go.html#2723457">l</a></span>&nbsp;<span class="op" id="2723519">==</span>&nbsp;<span class="ident" id="2723522">nil</span>&nbsp;<span class="op" id="2723526">||</span>&nbsp;<span class="ident" id="2723529"><a href="/net/unixsock_posix.go.html#2723457">l</a></span><span class="op" id="2723530">.</span><span class="ident" id="2723531">fd</span>&nbsp;<span class="op" id="2723534">==</span>&nbsp;<span class="ident" id="2723537">nil</span>&nbsp;<span class="op" id="2723541">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723545">return</span>&nbsp;<span class="ident" id="2723552"><a href="/net/unixsock_posix.go.html#2714555">syscall</a></span><span class="op" id="2723559">.</span><span class="ident" id="2723560">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723571">return</span>&nbsp;<span class="ident" id="2723578"><a href="/net/unixsock_posix.go.html#2723457">l</a></span><span class="op" id="2723579">.</span><span class="ident" id="2723580">fd</span><span class="op" id="2723582">.</span><span class="ident" id="2723583">setDeadline</span><span class="op" id="2723594">(</span><span class="ident" id="2723595"><a href="/net/unixsock_posix.go.html#2723486">t</a></span><span class="op" id="2723596">)</span><br>
<span class="lineno"></span><span class="op" id="2723598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="comment" id="2723601">//&nbsp;File&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;underlying&nbsp;os.File,&nbsp;set&nbsp;to&nbsp;blocking</span><br>
<span class="lineno"></span><span class="comment" id="2723667">//&nbsp;mode.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno"></span><span class="comment" id="2723737">//&nbsp;Closing&nbsp;l&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="2723802">//</span><br>
<span class="lineno"></span><span class="comment" id="2723805">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the</span><br>
<span class="lineno">340</span><span class="comment" id="2723869">//&nbsp;connection&#39;s.&nbsp;&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original</span><br>
<span class="lineno"></span><span class="comment" id="2723935">//&nbsp;using&nbsp;this&nbsp;duplicate&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno"></span><span class="keyword" id="2723999">func</span>&nbsp;<span class="op" id="2724004">(</span><span class="ident" id="2724005">l</span>&nbsp;<span class="op" id="2724007">*</span><span class="ident" id="2724008"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2724020">)</span>&nbsp;<span class="ident" id="2724022">File</span><span class="op" id="2724026">(</span><span class="op" id="2724027">)</span>&nbsp;<span class="op" id="2724029">(</span><span class="ident" id="2724030">f</span>&nbsp;<span class="op" id="2724032">*</span><span class="ident" id="2724033"><a href="/net/unixsock_posix.go.html#2714549">os</a></span><span class="op" id="2724035">.</span><span class="ident" id="2724036">File</span><span class="op" id="2724040">,</span>&nbsp;<span class="ident" id="2724042">err</span>&nbsp;<span class="builtintype" id="2724046">error</span><span class="op" id="2724051">)</span>&nbsp;<span class="op" id="2724053">{</span>&nbsp;<span class="keyword" id="2724055">return</span>&nbsp;<span class="ident" id="2724062"><a href="/net/unixsock_posix.go.html#2724005">l</a></span><span class="op" id="2724063">.</span><span class="ident" id="2724064">fd</span><span class="op" id="2724066">.</span><span class="ident" id="2724067">dup</span><span class="op" id="2724070">(</span><span class="op" id="2724071">)</span>&nbsp;<span class="op" id="2724073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2724076">//&nbsp;ListenUnixgram&nbsp;listens&nbsp;for&nbsp;incoming&nbsp;Unix&nbsp;datagram&nbsp;packets&nbsp;addressed</span><br>
<span class="lineno">345</span><span class="comment" id="2724147">//&nbsp;to&nbsp;the&nbsp;local&nbsp;address&nbsp;laddr.&nbsp;&nbsp;The&nbsp;network&nbsp;net&nbsp;must&nbsp;be&nbsp;&#34;unixgram&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2724215">//&nbsp;The&nbsp;returned&nbsp;connection&#39;s&nbsp;ReadFrom&nbsp;and&nbsp;WriteTo&nbsp;methods&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="2724285">//&nbsp;to&nbsp;receive&nbsp;and&nbsp;send&nbsp;packets&nbsp;with&nbsp;per-packet&nbsp;addressing.</span><br>
<span class="lineno"></span><span class="keyword" id="2724344">func</span>&nbsp;<span class="ident" id="2724349">ListenUnixgram</span><span class="op" id="2724363">(</span><span class="ident" id="2724364">net</span>&nbsp;<span class="builtintype" id="2724368">string</span><span class="op" id="2724374">,</span>&nbsp;<span class="ident" id="2724376">laddr</span>&nbsp;<span class="op" id="2724382">*</span><span class="ident" id="2724383"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2724391">)</span>&nbsp;<span class="op" id="2724393">(</span><span class="op" id="2724394">*</span><span class="ident" id="2724395"><a href="/net/unixsock_posix.go.html#2716530">UnixConn</a></span><span class="op" id="2724403">,</span>&nbsp;<span class="builtintype" id="2724405">error</span><span class="op" id="2724410">)</span>&nbsp;<span class="op" id="2724412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724415">switch</span>&nbsp;<span class="ident" id="2724422"><a href="/net/unixsock_posix.go.html#2724364">net</a></span>&nbsp;<span class="op" id="2724426">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724429">case</span>&nbsp;<span class="string" id="2724434">&#34;unixgram&#34;</span><span class="op" id="2724444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724447">default</span><span class="op" id="2724454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724458">return</span>&nbsp;<span class="ident" id="2724465">nil</span><span class="op" id="2724468">,</span>&nbsp;<span class="op" id="2724470">&amp;</span><span class="ident" id="2724471"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2724478">{</span><span class="ident" id="2724479">Op</span><span class="op" id="2724481">:</span>&nbsp;<span class="string" id="2724483">&#34;listen&#34;</span><span class="op" id="2724491">,</span>&nbsp;<span class="ident" id="2724493">Net</span><span class="op" id="2724496">:</span>&nbsp;<span class="ident" id="2724498"><a href="/net/unixsock_posix.go.html#2724364">net</a></span><span class="op" id="2724501">,</span>&nbsp;<span class="ident" id="2724503">Addr</span><span class="op" id="2724507">:</span>&nbsp;<span class="ident" id="2724509"><a href="/net/unixsock_posix.go.html#2724376">laddr</a></span><span class="op" id="2724514">,</span>&nbsp;<span class="ident" id="2724516">Err</span><span class="op" id="2724519">:</span>&nbsp;<span class="ident" id="2724521"><a href="/net/net.go.html#2661008">UnknownNetworkError</a></span><span class="op" id="2724540">(</span><span class="ident" id="2724541"><a href="/net/unixsock_posix.go.html#2724364">net</a></span><span class="op" id="2724544">)</span><span class="op" id="2724545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2724548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724551">if</span>&nbsp;<span class="ident" id="2724554"><a href="/net/unixsock_posix.go.html#2724376">laddr</a></span>&nbsp;<span class="op" id="2724560">==</span>&nbsp;<span class="ident" id="2724563">nil</span>&nbsp;<span class="op" id="2724567">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724571">return</span>&nbsp;<span class="ident" id="2724578">nil</span><span class="op" id="2724581">,</span>&nbsp;<span class="op" id="2724583">&amp;</span><span class="ident" id="2724584"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2724591">{</span><span class="ident" id="2724592">Op</span><span class="op" id="2724594">:</span>&nbsp;<span class="string" id="2724596">&#34;listen&#34;</span><span class="op" id="2724604">,</span>&nbsp;<span class="ident" id="2724606">Net</span><span class="op" id="2724609">:</span>&nbsp;<span class="ident" id="2724611"><a href="/net/unixsock_posix.go.html#2724364">net</a></span><span class="op" id="2724614">,</span>&nbsp;<span class="ident" id="2724616">Addr</span><span class="op" id="2724620">:</span>&nbsp;<span class="ident" id="2724622">nil</span><span class="op" id="2724625">,</span>&nbsp;<span class="ident" id="2724627">Err</span><span class="op" id="2724630">:</span>&nbsp;<span class="ident" id="2724632"><a href="/net/net.go.html#2659161">errMissingAddress</a></span><span class="op" id="2724649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2724652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724655">fd</span><span class="op" id="2724657">,</span>&nbsp;<span class="ident" id="2724659">err</span>&nbsp;<span class="op" id="2724663">:=</span>&nbsp;<span class="ident" id="2724666"><a href="/net/unixsock_posix.go.html#2714581">unixSocket</a></span><span class="op" id="2724676">(</span><span class="ident" id="2724677"><a href="/net/unixsock_posix.go.html#2724364">net</a></span><span class="op" id="2724680">,</span>&nbsp;<span class="ident" id="2724682"><a href="/net/unixsock_posix.go.html#2724376">laddr</a></span><span class="op" id="2724687">,</span>&nbsp;<span class="ident" id="2724689">nil</span><span class="op" id="2724692">,</span>&nbsp;<span class="string" id="2724694">&#34;listen&#34;</span><span class="op" id="2724702">,</span>&nbsp;<span class="ident" id="2724704"><a href="/net/net.go.html#2660335">noDeadline</a></span><span class="op" id="2724714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724717">if</span>&nbsp;<span class="ident" id="2724720"><a href="/net/unixsock_posix.go.html#2724659">err</a></span>&nbsp;<span class="op" id="2724724">!=</span>&nbsp;<span class="ident" id="2724727">nil</span>&nbsp;<span class="op" id="2724731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724735">return</span>&nbsp;<span class="ident" id="2724742">nil</span><span class="op" id="2724745">,</span>&nbsp;<span class="op" id="2724747">&amp;</span><span class="ident" id="2724748"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2724755">{</span><span class="ident" id="2724756">Op</span><span class="op" id="2724758">:</span>&nbsp;<span class="string" id="2724760">&#34;listen&#34;</span><span class="op" id="2724768">,</span>&nbsp;<span class="ident" id="2724770">Net</span><span class="op" id="2724773">:</span>&nbsp;<span class="ident" id="2724775"><a href="/net/unixsock_posix.go.html#2724364">net</a></span><span class="op" id="2724778">,</span>&nbsp;<span class="ident" id="2724780">Addr</span><span class="op" id="2724784">:</span>&nbsp;<span class="ident" id="2724786"><a href="/net/unixsock_posix.go.html#2724376">laddr</a></span><span class="op" id="2724791">,</span>&nbsp;<span class="ident" id="2724793">Err</span><span class="op" id="2724796">:</span>&nbsp;<span class="ident" id="2724798"><a href="/net/unixsock_posix.go.html#2724659">err</a></span><span class="op" id="2724801">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2724804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724807">return</span>&nbsp;<span class="ident" id="2724814"><a href="/net/unixsock_posix.go.html#2716562">newUnixConn</a></span><span class="op" id="2724825">(</span><span class="ident" id="2724826"><a href="/net/unixsock_posix.go.html#2724655">fd</a></span><span class="op" id="2724828">)</span><span class="op" id="2724829">,</span>&nbsp;<span class="ident" id="2724831">nil</span><br>
<span class="lineno"></span><span class="op" id="2724835">}</span>
</div>
</body>
</html>
