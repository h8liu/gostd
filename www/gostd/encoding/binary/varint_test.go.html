<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/binary</h2>
<ul>
<li><a href="/gostd/encoding/binary/binary.go.html">binary.go</a></li>
<li><a href="/gostd/encoding/binary/binary_test.go.html">binary_test.go</a></li>
<li><a href="/gostd/encoding/binary/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/binary/varint.go.html">varint.go</a></li>
<li><a href="/gostd/encoding/binary/varint_test.go.html">varint_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8048549">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8048604">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8048658">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8048709">package</span>&nbsp;<span class="ident" id="8048717">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8048725">import</span>&nbsp;<span class="op" id="8048732">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8048735">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8048744">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8048750">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8048760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8048763">func</span>&nbsp;<span class="ident" id="8048768">testConstant</span><span class="op" id="8048780">(</span><span class="ident" id="8048781">t</span>&nbsp;<span class="op" id="8048783">*</span><span class="ident" id="8048784">testing</span><span class="op" id="8048791">.</span><span class="ident" id="8048792">T</span><span class="op" id="8048793">,</span>&nbsp;<span class="ident" id="8048795">w</span>&nbsp;<span class="builtintype" id="8048797">uint</span><span class="op" id="8048801">,</span>&nbsp;<span class="ident" id="8048803">max</span>&nbsp;<span class="builtintype" id="8048807">int</span><span class="op" id="8048810">)</span>&nbsp;<span class="op" id="8048812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8048815">buf</span>&nbsp;<span class="op" id="8048819">:=</span>&nbsp;<span class="builtinfunc" id="8048822">make</span><span class="op" id="8048826">(</span><span class="op" id="8048827">[</span><span class="op" id="8048828">]</span><span class="builtintype" id="8048829">byte</span><span class="op" id="8048833">,</span>&nbsp;<span class="ident" id="8048835">MaxVarintLen64</span><span class="op" id="8048849">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8048852">n</span>&nbsp;<span class="op" id="8048854">:=</span>&nbsp;<span class="ident" id="8048857">PutUvarint</span><span class="op" id="8048867">(</span><span class="ident" id="8048868">buf</span><span class="op" id="8048871">,</span>&nbsp;<span class="num" id="8048873">1</span><span class="op" id="8048874">&lt;&lt;</span><span class="ident" id="8048876">w</span><span class="op" id="8048877">-</span><span class="num" id="8048878">1</span><span class="op" id="8048879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8048882">if</span>&nbsp;<span class="ident" id="8048885">n</span>&nbsp;<span class="op" id="8048887">!=</span>&nbsp;<span class="ident" id="8048890">max</span>&nbsp;<span class="op" id="8048894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8048898">t</span><span class="op" id="8048899">.</span><span class="ident" id="8048900">Errorf</span><span class="op" id="8048906">(</span><span class="string" id="8048907">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8048937">,</span>&nbsp;<span class="ident" id="8048939">w</span><span class="op" id="8048940">,</span>&nbsp;<span class="ident" id="8048942">max</span><span class="op" id="8048945">,</span>&nbsp;<span class="ident" id="8048947">n</span><span class="op" id="8048948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8048951">}</span><br>
<span class="lineno"></span><span class="op" id="8048953">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8048956">func</span>&nbsp;<span class="ident" id="8048961">TestConstants</span><span class="op" id="8048974">(</span><span class="ident" id="8048975">t</span>&nbsp;<span class="op" id="8048977">*</span><span class="ident" id="8048978">testing</span><span class="op" id="8048985">.</span><span class="ident" id="8048986">T</span><span class="op" id="8048987">)</span>&nbsp;<span class="op" id="8048989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8048992">testConstant</span><span class="op" id="8049004">(</span><span class="ident" id="8049005">t</span><span class="op" id="8049006">,</span>&nbsp;<span class="num" id="8049008">16</span><span class="op" id="8049010">,</span>&nbsp;<span class="ident" id="8049012">MaxVarintLen16</span><span class="op" id="8049026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049029">testConstant</span><span class="op" id="8049041">(</span><span class="ident" id="8049042">t</span><span class="op" id="8049043">,</span>&nbsp;<span class="num" id="8049045">32</span><span class="op" id="8049047">,</span>&nbsp;<span class="ident" id="8049049">MaxVarintLen32</span><span class="op" id="8049063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049066">testConstant</span><span class="op" id="8049078">(</span><span class="ident" id="8049079">t</span><span class="op" id="8049080">,</span>&nbsp;<span class="num" id="8049082">64</span><span class="op" id="8049084">,</span>&nbsp;<span class="ident" id="8049086">MaxVarintLen64</span><span class="op" id="8049100">)</span><br>
<span class="lineno">25</span><span class="op" id="8049102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8049105">func</span>&nbsp;<span class="ident" id="8049110">testVarint</span><span class="op" id="8049120">(</span><span class="ident" id="8049121">t</span>&nbsp;<span class="op" id="8049123">*</span><span class="ident" id="8049124">testing</span><span class="op" id="8049131">.</span><span class="ident" id="8049132">T</span><span class="op" id="8049133">,</span>&nbsp;<span class="ident" id="8049135">x</span>&nbsp;<span class="ident" id="8049137">int64</span><span class="op" id="8049142">)</span>&nbsp;<span class="op" id="8049144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049147">buf</span>&nbsp;<span class="op" id="8049151">:=</span>&nbsp;<span class="builtinfunc" id="8049154">make</span><span class="op" id="8049158">(</span><span class="op" id="8049159">[</span><span class="op" id="8049160">]</span><span class="builtintype" id="8049161">byte</span><span class="op" id="8049165">,</span>&nbsp;<span class="ident" id="8049167">MaxVarintLen64</span><span class="op" id="8049181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049184">n</span>&nbsp;<span class="op" id="8049186">:=</span>&nbsp;<span class="ident" id="8049189">PutVarint</span><span class="op" id="8049198">(</span><span class="ident" id="8049199">buf</span><span class="op" id="8049202">,</span>&nbsp;<span class="ident" id="8049204">x</span><span class="op" id="8049205">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049208">y</span><span class="op" id="8049209">,</span>&nbsp;<span class="ident" id="8049211">m</span>&nbsp;<span class="op" id="8049213">:=</span>&nbsp;<span class="ident" id="8049216">Varint</span><span class="op" id="8049222">(</span><span class="ident" id="8049223">buf</span><span class="op" id="8049226">[</span><span class="num" id="8049227">0</span><span class="op" id="8049228">:</span><span class="ident" id="8049229">n</span><span class="op" id="8049230">]</span><span class="op" id="8049231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049234">if</span>&nbsp;<span class="ident" id="8049237">x</span>&nbsp;<span class="op" id="8049239">!=</span>&nbsp;<span class="ident" id="8049242">y</span>&nbsp;<span class="op" id="8049244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049248">t</span><span class="op" id="8049249">.</span><span class="ident" id="8049250">Errorf</span><span class="op" id="8049256">(</span><span class="string" id="8049257">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8049277">,</span>&nbsp;<span class="ident" id="8049279">x</span><span class="op" id="8049280">,</span>&nbsp;<span class="ident" id="8049282">y</span><span class="op" id="8049283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049289">if</span>&nbsp;<span class="ident" id="8049292">n</span>&nbsp;<span class="op" id="8049294">!=</span>&nbsp;<span class="ident" id="8049297">m</span>&nbsp;<span class="op" id="8049299">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049303">t</span><span class="op" id="8049304">.</span><span class="ident" id="8049305">Errorf</span><span class="op" id="8049311">(</span><span class="string" id="8049312">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8049345">,</span>&nbsp;<span class="ident" id="8049347">x</span><span class="op" id="8049348">,</span>&nbsp;<span class="ident" id="8049350">m</span><span class="op" id="8049351">,</span>&nbsp;<span class="ident" id="8049353">n</span><span class="op" id="8049354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049361">y</span><span class="op" id="8049362">,</span>&nbsp;<span class="ident" id="8049364">err</span>&nbsp;<span class="op" id="8049368">:=</span>&nbsp;<span class="ident" id="8049371">ReadVarint</span><span class="op" id="8049381">(</span><span class="ident" id="8049382">bytes</span><span class="op" id="8049387">.</span><span class="ident" id="8049388">NewReader</span><span class="op" id="8049397">(</span><span class="ident" id="8049398">buf</span><span class="op" id="8049401">)</span><span class="op" id="8049402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049405">if</span>&nbsp;<span class="ident" id="8049408">err</span>&nbsp;<span class="op" id="8049412">!=</span>&nbsp;<span class="ident" id="8049415">nil</span>&nbsp;<span class="op" id="8049419">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049423">t</span><span class="op" id="8049424">.</span><span class="ident" id="8049425">Errorf</span><span class="op" id="8049431">(</span><span class="string" id="8049432">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="8049452">,</span>&nbsp;<span class="ident" id="8049454">x</span><span class="op" id="8049455">,</span>&nbsp;<span class="ident" id="8049457">err</span><span class="op" id="8049460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049466">if</span>&nbsp;<span class="ident" id="8049469">x</span>&nbsp;<span class="op" id="8049471">!=</span>&nbsp;<span class="ident" id="8049474">y</span>&nbsp;<span class="op" id="8049476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049480">t</span><span class="op" id="8049481">.</span><span class="ident" id="8049482">Errorf</span><span class="op" id="8049488">(</span><span class="string" id="8049489">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8049513">,</span>&nbsp;<span class="ident" id="8049515">x</span><span class="op" id="8049516">,</span>&nbsp;<span class="ident" id="8049518">y</span><span class="op" id="8049519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049522">}</span><br>
<span class="lineno">45</span><span class="op" id="8049524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8049527">func</span>&nbsp;<span class="ident" id="8049532">testUvarint</span><span class="op" id="8049543">(</span><span class="ident" id="8049544">t</span>&nbsp;<span class="op" id="8049546">*</span><span class="ident" id="8049547">testing</span><span class="op" id="8049554">.</span><span class="ident" id="8049555">T</span><span class="op" id="8049556">,</span>&nbsp;<span class="ident" id="8049558">x</span>&nbsp;<span class="ident" id="8049560">uint64</span><span class="op" id="8049566">)</span>&nbsp;<span class="op" id="8049568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049571">buf</span>&nbsp;<span class="op" id="8049575">:=</span>&nbsp;<span class="builtinfunc" id="8049578">make</span><span class="op" id="8049582">(</span><span class="op" id="8049583">[</span><span class="op" id="8049584">]</span><span class="builtintype" id="8049585">byte</span><span class="op" id="8049589">,</span>&nbsp;<span class="ident" id="8049591">MaxVarintLen64</span><span class="op" id="8049605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049608">n</span>&nbsp;<span class="op" id="8049610">:=</span>&nbsp;<span class="ident" id="8049613">PutUvarint</span><span class="op" id="8049623">(</span><span class="ident" id="8049624">buf</span><span class="op" id="8049627">,</span>&nbsp;<span class="ident" id="8049629">x</span><span class="op" id="8049630">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049633">y</span><span class="op" id="8049634">,</span>&nbsp;<span class="ident" id="8049636">m</span>&nbsp;<span class="op" id="8049638">:=</span>&nbsp;<span class="ident" id="8049641">Uvarint</span><span class="op" id="8049648">(</span><span class="ident" id="8049649">buf</span><span class="op" id="8049652">[</span><span class="num" id="8049653">0</span><span class="op" id="8049654">:</span><span class="ident" id="8049655">n</span><span class="op" id="8049656">]</span><span class="op" id="8049657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049660">if</span>&nbsp;<span class="ident" id="8049663">x</span>&nbsp;<span class="op" id="8049665">!=</span>&nbsp;<span class="ident" id="8049668">y</span>&nbsp;<span class="op" id="8049670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049674">t</span><span class="op" id="8049675">.</span><span class="ident" id="8049676">Errorf</span><span class="op" id="8049682">(</span><span class="string" id="8049683">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8049704">,</span>&nbsp;<span class="ident" id="8049706">x</span><span class="op" id="8049707">,</span>&nbsp;<span class="ident" id="8049709">y</span><span class="op" id="8049710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049716">if</span>&nbsp;<span class="ident" id="8049719">n</span>&nbsp;<span class="op" id="8049721">!=</span>&nbsp;<span class="ident" id="8049724">m</span>&nbsp;<span class="op" id="8049726">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049730">t</span><span class="op" id="8049731">.</span><span class="ident" id="8049732">Errorf</span><span class="op" id="8049738">(</span><span class="string" id="8049739">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8049773">,</span>&nbsp;<span class="ident" id="8049775">x</span><span class="op" id="8049776">,</span>&nbsp;<span class="ident" id="8049778">m</span><span class="op" id="8049779">,</span>&nbsp;<span class="ident" id="8049781">n</span><span class="op" id="8049782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049789">y</span><span class="op" id="8049790">,</span>&nbsp;<span class="ident" id="8049792">err</span>&nbsp;<span class="op" id="8049796">:=</span>&nbsp;<span class="ident" id="8049799">ReadUvarint</span><span class="op" id="8049810">(</span><span class="ident" id="8049811">bytes</span><span class="op" id="8049816">.</span><span class="ident" id="8049817">NewReader</span><span class="op" id="8049826">(</span><span class="ident" id="8049827">buf</span><span class="op" id="8049830">)</span><span class="op" id="8049831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049834">if</span>&nbsp;<span class="ident" id="8049837">err</span>&nbsp;<span class="op" id="8049841">!=</span>&nbsp;<span class="ident" id="8049844">nil</span>&nbsp;<span class="op" id="8049848">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049852">t</span><span class="op" id="8049853">.</span><span class="ident" id="8049854">Errorf</span><span class="op" id="8049860">(</span><span class="string" id="8049861">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="8049882">,</span>&nbsp;<span class="ident" id="8049884">x</span><span class="op" id="8049885">,</span>&nbsp;<span class="ident" id="8049887">err</span><span class="op" id="8049890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8049896">if</span>&nbsp;<span class="ident" id="8049899">x</span>&nbsp;<span class="op" id="8049901">!=</span>&nbsp;<span class="ident" id="8049904">y</span>&nbsp;<span class="op" id="8049906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8049910">t</span><span class="op" id="8049911">.</span><span class="ident" id="8049912">Errorf</span><span class="op" id="8049918">(</span><span class="string" id="8049919">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8049944">,</span>&nbsp;<span class="ident" id="8049946">x</span><span class="op" id="8049947">,</span>&nbsp;<span class="ident" id="8049949">y</span><span class="op" id="8049950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049953">}</span><br>
<span class="lineno">65</span><span class="op" id="8049955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8049958">var</span>&nbsp;<span class="ident" id="8049962">tests</span>&nbsp;<span class="op" id="8049968">=</span>&nbsp;<span class="op" id="8049970">[</span><span class="op" id="8049971">]</span><span class="ident" id="8049972">int64</span><span class="op" id="8049977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049980">-</span><span class="num" id="8049981">1</span>&nbsp;<span class="op" id="8049983">&lt;&lt;</span>&nbsp;<span class="num" id="8049986">63</span><span class="op" id="8049988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8049991">-</span><span class="num" id="8049992">1</span><span class="op" id="8049993">&lt;&lt;</span><span class="num" id="8049995">63</span>&nbsp;<span class="op" id="8049998">+</span>&nbsp;<span class="num" id="8050000">1</span><span class="op" id="8050001">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050004">-</span><span class="num" id="8050005">1</span><span class="op" id="8050006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050009">0</span><span class="op" id="8050010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050013">1</span><span class="op" id="8050014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050017">2</span><span class="op" id="8050018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050021">10</span><span class="op" id="8050023">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050026">20</span><span class="op" id="8050028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050031">63</span><span class="op" id="8050033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050036">64</span><span class="op" id="8050038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050041">65</span><span class="op" id="8050043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050046">127</span><span class="op" id="8050049">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050052">128</span><span class="op" id="8050055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050058">129</span><span class="op" id="8050061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050064">255</span><span class="op" id="8050067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050070">256</span><span class="op" id="8050073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050076">257</span><span class="op" id="8050079">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8050082">1</span><span class="op" id="8050083">&lt;&lt;</span><span class="num" id="8050085">63</span>&nbsp;<span class="op" id="8050088">-</span>&nbsp;<span class="num" id="8050090">1</span><span class="op" id="8050091">,</span><br>
<span class="lineno"></span><span class="op" id="8050093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050096">func</span>&nbsp;<span class="ident" id="8050101">TestVarint</span><span class="op" id="8050111">(</span><span class="ident" id="8050112">t</span>&nbsp;<span class="op" id="8050114">*</span><span class="ident" id="8050115">testing</span><span class="op" id="8050122">.</span><span class="ident" id="8050123">T</span><span class="op" id="8050124">)</span>&nbsp;<span class="op" id="8050126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050129">for</span>&nbsp;<span class="ident" id="8050133">_</span><span class="op" id="8050134">,</span>&nbsp;<span class="ident" id="8050136">x</span>&nbsp;<span class="op" id="8050138">:=</span>&nbsp;<span class="keyword" id="8050141">range</span>&nbsp;<span class="ident" id="8050147">tests</span>&nbsp;<span class="op" id="8050153">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050157">testVarint</span><span class="op" id="8050167">(</span><span class="ident" id="8050168">t</span><span class="op" id="8050169">,</span>&nbsp;<span class="ident" id="8050171">x</span><span class="op" id="8050172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050176">testVarint</span><span class="op" id="8050186">(</span><span class="ident" id="8050187">t</span><span class="op" id="8050188">,</span>&nbsp;<span class="op" id="8050190">-</span><span class="ident" id="8050191">x</span><span class="op" id="8050192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050198">for</span>&nbsp;<span class="ident" id="8050202">x</span>&nbsp;<span class="op" id="8050204">:=</span>&nbsp;<span class="ident" id="8050207">int64</span><span class="op" id="8050212">(</span><span class="num" id="8050213">0x7</span><span class="op" id="8050216">)</span><span class="op" id="8050217">;</span>&nbsp;<span class="ident" id="8050219">x</span>&nbsp;<span class="op" id="8050221">!=</span>&nbsp;<span class="num" id="8050224">0</span><span class="op" id="8050225">;</span>&nbsp;<span class="ident" id="8050227">x</span>&nbsp;<span class="op" id="8050229">&lt;&lt;=</span>&nbsp;<span class="num" id="8050233">1</span>&nbsp;<span class="op" id="8050235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050239">testVarint</span><span class="op" id="8050249">(</span><span class="ident" id="8050250">t</span><span class="op" id="8050251">,</span>&nbsp;<span class="ident" id="8050253">x</span><span class="op" id="8050254">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050258">testVarint</span><span class="op" id="8050268">(</span><span class="ident" id="8050269">t</span><span class="op" id="8050270">,</span>&nbsp;<span class="op" id="8050272">-</span><span class="ident" id="8050273">x</span><span class="op" id="8050274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050277">}</span><br>
<span class="lineno"></span><span class="op" id="8050279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050282">func</span>&nbsp;<span class="ident" id="8050287">TestUvarint</span><span class="op" id="8050298">(</span><span class="ident" id="8050299">t</span>&nbsp;<span class="op" id="8050301">*</span><span class="ident" id="8050302">testing</span><span class="op" id="8050309">.</span><span class="ident" id="8050310">T</span><span class="op" id="8050311">)</span>&nbsp;<span class="op" id="8050313">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050316">for</span>&nbsp;<span class="ident" id="8050320">_</span><span class="op" id="8050321">,</span>&nbsp;<span class="ident" id="8050323">x</span>&nbsp;<span class="op" id="8050325">:=</span>&nbsp;<span class="keyword" id="8050328">range</span>&nbsp;<span class="ident" id="8050334">tests</span>&nbsp;<span class="op" id="8050340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050344">testUvarint</span><span class="op" id="8050355">(</span><span class="ident" id="8050356">t</span><span class="op" id="8050357">,</span>&nbsp;<span class="ident" id="8050359">uint64</span><span class="op" id="8050365">(</span><span class="ident" id="8050366">x</span><span class="op" id="8050367">)</span><span class="op" id="8050368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050374">for</span>&nbsp;<span class="ident" id="8050378">x</span>&nbsp;<span class="op" id="8050380">:=</span>&nbsp;<span class="ident" id="8050383">uint64</span><span class="op" id="8050389">(</span><span class="num" id="8050390">0x7</span><span class="op" id="8050393">)</span><span class="op" id="8050394">;</span>&nbsp;<span class="ident" id="8050396">x</span>&nbsp;<span class="op" id="8050398">!=</span>&nbsp;<span class="num" id="8050401">0</span><span class="op" id="8050402">;</span>&nbsp;<span class="ident" id="8050404">x</span>&nbsp;<span class="op" id="8050406">&lt;&lt;=</span>&nbsp;<span class="num" id="8050410">1</span>&nbsp;<span class="op" id="8050412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050416">testUvarint</span><span class="op" id="8050427">(</span><span class="ident" id="8050428">t</span><span class="op" id="8050429">,</span>&nbsp;<span class="ident" id="8050431">x</span><span class="op" id="8050432">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050435">}</span><br>
<span class="lineno"></span><span class="op" id="8050437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050440">func</span>&nbsp;<span class="ident" id="8050445">TestBufferTooSmall</span><span class="op" id="8050463">(</span><span class="ident" id="8050464">t</span>&nbsp;<span class="op" id="8050466">*</span><span class="ident" id="8050467">testing</span><span class="op" id="8050474">.</span><span class="ident" id="8050475">T</span><span class="op" id="8050476">)</span>&nbsp;<span class="op" id="8050478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050481">buf</span>&nbsp;<span class="op" id="8050485">:=</span>&nbsp;<span class="op" id="8050488">[</span><span class="op" id="8050489">]</span><span class="builtintype" id="8050490">byte</span><span class="op" id="8050494">{</span><span class="num" id="8050495">0x80</span><span class="op" id="8050499">,</span>&nbsp;<span class="num" id="8050501">0x80</span><span class="op" id="8050505">,</span>&nbsp;<span class="num" id="8050507">0x80</span><span class="op" id="8050511">,</span>&nbsp;<span class="num" id="8050513">0x80</span><span class="op" id="8050517">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050520">for</span>&nbsp;<span class="ident" id="8050524">i</span>&nbsp;<span class="op" id="8050526">:=</span>&nbsp;<span class="num" id="8050529">0</span><span class="op" id="8050530">;</span>&nbsp;<span class="ident" id="8050532">i</span>&nbsp;<span class="op" id="8050534">&lt;=</span>&nbsp;<span class="builtinfunc" id="8050537">len</span><span class="op" id="8050540">(</span><span class="ident" id="8050541">buf</span><span class="op" id="8050544">)</span><span class="op" id="8050545">;</span>&nbsp;<span class="ident" id="8050547">i</span><span class="op" id="8050548">++</span>&nbsp;<span class="op" id="8050551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050555">buf</span>&nbsp;<span class="op" id="8050559">:=</span>&nbsp;<span class="ident" id="8050562">buf</span><span class="op" id="8050565">[</span><span class="num" id="8050566">0</span><span class="op" id="8050567">:</span><span class="ident" id="8050568">i</span><span class="op" id="8050569">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050573">x</span><span class="op" id="8050574">,</span>&nbsp;<span class="ident" id="8050576">n</span>&nbsp;<span class="op" id="8050578">:=</span>&nbsp;<span class="ident" id="8050581">Uvarint</span><span class="op" id="8050588">(</span><span class="ident" id="8050589">buf</span><span class="op" id="8050592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050596">if</span>&nbsp;<span class="ident" id="8050599">x</span>&nbsp;<span class="op" id="8050601">!=</span>&nbsp;<span class="num" id="8050604">0</span>&nbsp;<span class="op" id="8050606">||</span>&nbsp;<span class="ident" id="8050609">n</span>&nbsp;<span class="op" id="8050611">!=</span>&nbsp;<span class="num" id="8050614">0</span>&nbsp;<span class="op" id="8050616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050621">t</span><span class="op" id="8050622">.</span><span class="ident" id="8050623">Errorf</span><span class="op" id="8050629">(</span><span class="string" id="8050630">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="8050663">,</span>&nbsp;<span class="ident" id="8050665">buf</span><span class="op" id="8050668">,</span>&nbsp;<span class="ident" id="8050670">x</span><span class="op" id="8050671">,</span>&nbsp;<span class="ident" id="8050673">n</span><span class="op" id="8050674">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050683">x</span><span class="op" id="8050684">,</span>&nbsp;<span class="ident" id="8050686">err</span>&nbsp;<span class="op" id="8050690">:=</span>&nbsp;<span class="ident" id="8050693">ReadUvarint</span><span class="op" id="8050704">(</span><span class="ident" id="8050705">bytes</span><span class="op" id="8050710">.</span><span class="ident" id="8050711">NewReader</span><span class="op" id="8050720">(</span><span class="ident" id="8050721">buf</span><span class="op" id="8050724">)</span><span class="op" id="8050725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050729">if</span>&nbsp;<span class="ident" id="8050732">x</span>&nbsp;<span class="op" id="8050734">!=</span>&nbsp;<span class="num" id="8050737">0</span>&nbsp;<span class="op" id="8050739">||</span>&nbsp;<span class="ident" id="8050742">err</span>&nbsp;<span class="op" id="8050746">!=</span>&nbsp;<span class="ident" id="8050749">io</span><span class="op" id="8050751">.</span><span class="ident" id="8050752">EOF</span>&nbsp;<span class="op" id="8050756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050761">t</span><span class="op" id="8050762">.</span><span class="ident" id="8050763">Errorf</span><span class="op" id="8050769">(</span><span class="string" id="8050770">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="8050809">,</span>&nbsp;<span class="ident" id="8050811">buf</span><span class="op" id="8050814">,</span>&nbsp;<span class="ident" id="8050816">x</span><span class="op" id="8050817">,</span>&nbsp;<span class="ident" id="8050819">err</span><span class="op" id="8050822">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050829">}</span><br>
<span class="lineno"></span><span class="op" id="8050831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8050834">func</span>&nbsp;<span class="ident" id="8050839">testOverflow</span><span class="op" id="8050851">(</span><span class="ident" id="8050852">t</span>&nbsp;<span class="op" id="8050854">*</span><span class="ident" id="8050855">testing</span><span class="op" id="8050862">.</span><span class="ident" id="8050863">T</span><span class="op" id="8050864">,</span>&nbsp;<span class="ident" id="8050866">buf</span>&nbsp;<span class="op" id="8050870">[</span><span class="op" id="8050871">]</span><span class="builtintype" id="8050872">byte</span><span class="op" id="8050876">,</span>&nbsp;<span class="ident" id="8050878">n0</span>&nbsp;<span class="builtintype" id="8050881">int</span><span class="op" id="8050884">,</span>&nbsp;<span class="ident" id="8050886">err0</span>&nbsp;<span class="builtintype" id="8050891">error</span><span class="op" id="8050896">)</span>&nbsp;<span class="op" id="8050898">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050901">x</span><span class="op" id="8050902">,</span>&nbsp;<span class="ident" id="8050904">n</span>&nbsp;<span class="op" id="8050906">:=</span>&nbsp;<span class="ident" id="8050909">Uvarint</span><span class="op" id="8050916">(</span><span class="ident" id="8050917">buf</span><span class="op" id="8050920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8050923">if</span>&nbsp;<span class="ident" id="8050926">x</span>&nbsp;<span class="op" id="8050928">!=</span>&nbsp;<span class="num" id="8050931">0</span>&nbsp;<span class="op" id="8050933">||</span>&nbsp;<span class="ident" id="8050936">n</span>&nbsp;<span class="op" id="8050938">!=</span>&nbsp;<span class="ident" id="8050941">n0</span>&nbsp;<span class="op" id="8050944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8050948">t</span><span class="op" id="8050949">.</span><span class="ident" id="8050950">Errorf</span><span class="op" id="8050956">(</span><span class="string" id="8050957">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="8051002">,</span>&nbsp;<span class="ident" id="8051004">buf</span><span class="op" id="8051007">,</span>&nbsp;<span class="ident" id="8051009">x</span><span class="op" id="8051010">,</span>&nbsp;<span class="ident" id="8051012">n</span><span class="op" id="8051013">,</span>&nbsp;<span class="ident" id="8051015">n0</span><span class="op" id="8051017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051024">x</span><span class="op" id="8051025">,</span>&nbsp;<span class="ident" id="8051027">err</span>&nbsp;<span class="op" id="8051031">:=</span>&nbsp;<span class="ident" id="8051034">ReadUvarint</span><span class="op" id="8051045">(</span><span class="ident" id="8051046">bytes</span><span class="op" id="8051051">.</span><span class="ident" id="8051052">NewReader</span><span class="op" id="8051061">(</span><span class="ident" id="8051062">buf</span><span class="op" id="8051065">)</span><span class="op" id="8051066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051069">if</span>&nbsp;<span class="ident" id="8051072">x</span>&nbsp;<span class="op" id="8051074">!=</span>&nbsp;<span class="num" id="8051077">0</span>&nbsp;<span class="op" id="8051079">||</span>&nbsp;<span class="ident" id="8051082">err</span>&nbsp;<span class="op" id="8051086">!=</span>&nbsp;<span class="ident" id="8051089">err0</span>&nbsp;<span class="op" id="8051094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051098">t</span><span class="op" id="8051099">.</span><span class="ident" id="8051100">Errorf</span><span class="op" id="8051106">(</span><span class="string" id="8051107">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="8051158">,</span>&nbsp;<span class="ident" id="8051160">buf</span><span class="op" id="8051163">,</span>&nbsp;<span class="ident" id="8051165">x</span><span class="op" id="8051166">,</span>&nbsp;<span class="ident" id="8051168">err</span><span class="op" id="8051171">,</span>&nbsp;<span class="ident" id="8051173">err0</span><span class="op" id="8051177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051180">}</span><br>
<span class="lineno"></span><span class="op" id="8051182">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="8051185">func</span>&nbsp;<span class="ident" id="8051190">TestOverflow</span><span class="op" id="8051202">(</span><span class="ident" id="8051203">t</span>&nbsp;<span class="op" id="8051205">*</span><span class="ident" id="8051206">testing</span><span class="op" id="8051213">.</span><span class="ident" id="8051214">T</span><span class="op" id="8051215">)</span>&nbsp;<span class="op" id="8051217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051220">testOverflow</span><span class="op" id="8051232">(</span><span class="ident" id="8051233">t</span><span class="op" id="8051234">,</span>&nbsp;<span class="op" id="8051236">[</span><span class="op" id="8051237">]</span><span class="builtintype" id="8051238">byte</span><span class="op" id="8051242">{</span><span class="num" id="8051243">0x80</span><span class="op" id="8051247">,</span>&nbsp;<span class="num" id="8051249">0x80</span><span class="op" id="8051253">,</span>&nbsp;<span class="num" id="8051255">0x80</span><span class="op" id="8051259">,</span>&nbsp;<span class="num" id="8051261">0x80</span><span class="op" id="8051265">,</span>&nbsp;<span class="num" id="8051267">0x80</span><span class="op" id="8051271">,</span>&nbsp;<span class="num" id="8051273">0x80</span><span class="op" id="8051277">,</span>&nbsp;<span class="num" id="8051279">0x80</span><span class="op" id="8051283">,</span>&nbsp;<span class="num" id="8051285">0x80</span><span class="op" id="8051289">,</span>&nbsp;<span class="num" id="8051291">0x80</span><span class="op" id="8051295">,</span>&nbsp;<span class="num" id="8051297">0x2</span><span class="op" id="8051300">}</span><span class="op" id="8051301">,</span>&nbsp;<span class="op" id="8051303">-</span><span class="num" id="8051304">10</span><span class="op" id="8051306">,</span>&nbsp;<span class="ident" id="8051308">overflow</span><span class="op" id="8051316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051319">testOverflow</span><span class="op" id="8051331">(</span><span class="ident" id="8051332">t</span><span class="op" id="8051333">,</span>&nbsp;<span class="op" id="8051335">[</span><span class="op" id="8051336">]</span><span class="builtintype" id="8051337">byte</span><span class="op" id="8051341">{</span><span class="num" id="8051342">0x80</span><span class="op" id="8051346">,</span>&nbsp;<span class="num" id="8051348">0x80</span><span class="op" id="8051352">,</span>&nbsp;<span class="num" id="8051354">0x80</span><span class="op" id="8051358">,</span>&nbsp;<span class="num" id="8051360">0x80</span><span class="op" id="8051364">,</span>&nbsp;<span class="num" id="8051366">0x80</span><span class="op" id="8051370">,</span>&nbsp;<span class="num" id="8051372">0x80</span><span class="op" id="8051376">,</span>&nbsp;<span class="num" id="8051378">0x80</span><span class="op" id="8051382">,</span>&nbsp;<span class="num" id="8051384">0x80</span><span class="op" id="8051388">,</span>&nbsp;<span class="num" id="8051390">0x80</span><span class="op" id="8051394">,</span>&nbsp;<span class="num" id="8051396">0x80</span><span class="op" id="8051400">,</span>&nbsp;<span class="num" id="8051402">0x80</span><span class="op" id="8051406">,</span>&nbsp;<span class="num" id="8051408">0x80</span><span class="op" id="8051412">,</span>&nbsp;<span class="num" id="8051414">0x1</span><span class="op" id="8051417">,</span>&nbsp;<span class="num" id="8051419">0</span><span class="op" id="8051420">,</span>&nbsp;<span class="num" id="8051422">0</span><span class="op" id="8051423">}</span><span class="op" id="8051424">,</span>&nbsp;<span class="op" id="8051426">-</span><span class="num" id="8051427">13</span><span class="op" id="8051429">,</span>&nbsp;<span class="ident" id="8051431">overflow</span><span class="op" id="8051439">)</span><br>
<span class="lineno"></span><span class="op" id="8051441">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8051444">func</span>&nbsp;<span class="ident" id="8051449">TestNonCanonicalZero</span><span class="op" id="8051469">(</span><span class="ident" id="8051470">t</span>&nbsp;<span class="op" id="8051472">*</span><span class="ident" id="8051473">testing</span><span class="op" id="8051480">.</span><span class="ident" id="8051481">T</span><span class="op" id="8051482">)</span>&nbsp;<span class="op" id="8051484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051487">buf</span>&nbsp;<span class="op" id="8051491">:=</span>&nbsp;<span class="op" id="8051494">[</span><span class="op" id="8051495">]</span><span class="builtintype" id="8051496">byte</span><span class="op" id="8051500">{</span><span class="num" id="8051501">0x80</span><span class="op" id="8051505">,</span>&nbsp;<span class="num" id="8051507">0x80</span><span class="op" id="8051511">,</span>&nbsp;<span class="num" id="8051513">0x80</span><span class="op" id="8051517">,</span>&nbsp;<span class="num" id="8051519">0</span><span class="op" id="8051520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051523">x</span><span class="op" id="8051524">,</span>&nbsp;<span class="ident" id="8051526">n</span>&nbsp;<span class="op" id="8051528">:=</span>&nbsp;<span class="ident" id="8051531">Uvarint</span><span class="op" id="8051538">(</span><span class="ident" id="8051539">buf</span><span class="op" id="8051542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051545">if</span>&nbsp;<span class="ident" id="8051548">x</span>&nbsp;<span class="op" id="8051550">!=</span>&nbsp;<span class="num" id="8051553">0</span>&nbsp;<span class="op" id="8051555">||</span>&nbsp;<span class="ident" id="8051558">n</span>&nbsp;<span class="op" id="8051560">!=</span>&nbsp;<span class="num" id="8051563">4</span>&nbsp;<span class="op" id="8051565">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051569">t</span><span class="op" id="8051570">.</span><span class="ident" id="8051571">Errorf</span><span class="op" id="8051577">(</span><span class="string" id="8051578">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="8051622">,</span>&nbsp;<span class="ident" id="8051624">buf</span><span class="op" id="8051627">,</span>&nbsp;<span class="ident" id="8051629">x</span><span class="op" id="8051630">,</span>&nbsp;<span class="ident" id="8051632">n</span><span class="op" id="8051633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051637">}</span><br>
<span class="lineno"></span><span class="op" id="8051639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="8051642">func</span>&nbsp;<span class="ident" id="8051647">BenchmarkPutUvarint32</span><span class="op" id="8051668">(</span><span class="ident" id="8051669">b</span>&nbsp;<span class="op" id="8051671">*</span><span class="ident" id="8051672">testing</span><span class="op" id="8051679">.</span><span class="ident" id="8051680">B</span><span class="op" id="8051681">)</span>&nbsp;<span class="op" id="8051683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051686">buf</span>&nbsp;<span class="op" id="8051690">:=</span>&nbsp;<span class="builtinfunc" id="8051693">make</span><span class="op" id="8051697">(</span><span class="op" id="8051698">[</span><span class="op" id="8051699">]</span><span class="builtintype" id="8051700">byte</span><span class="op" id="8051704">,</span>&nbsp;<span class="ident" id="8051706">MaxVarintLen32</span><span class="op" id="8051720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051723">b</span><span class="op" id="8051724">.</span><span class="ident" id="8051725">SetBytes</span><span class="op" id="8051733">(</span><span class="num" id="8051734">4</span><span class="op" id="8051735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051738">for</span>&nbsp;<span class="ident" id="8051742">i</span>&nbsp;<span class="op" id="8051744">:=</span>&nbsp;<span class="num" id="8051747">0</span><span class="op" id="8051748">;</span>&nbsp;<span class="ident" id="8051750">i</span>&nbsp;<span class="op" id="8051752">&lt;</span>&nbsp;<span class="ident" id="8051754">b</span><span class="op" id="8051755">.</span><span class="ident" id="8051756">N</span><span class="op" id="8051757">;</span>&nbsp;<span class="ident" id="8051759">i</span><span class="op" id="8051760">++</span>&nbsp;<span class="op" id="8051763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051767">for</span>&nbsp;<span class="ident" id="8051771">j</span>&nbsp;<span class="op" id="8051773">:=</span>&nbsp;<span class="builtintype" id="8051776">uint</span><span class="op" id="8051780">(</span><span class="num" id="8051781">0</span><span class="op" id="8051782">)</span><span class="op" id="8051783">;</span>&nbsp;<span class="ident" id="8051785">j</span>&nbsp;<span class="op" id="8051787">&lt;</span>&nbsp;<span class="ident" id="8051789">MaxVarintLen32</span><span class="op" id="8051803">;</span>&nbsp;<span class="ident" id="8051805">j</span><span class="op" id="8051806">++</span>&nbsp;<span class="op" id="8051809">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051814">PutUvarint</span><span class="op" id="8051824">(</span><span class="ident" id="8051825">buf</span><span class="op" id="8051828">,</span>&nbsp;<span class="num" id="8051830">1</span><span class="op" id="8051831">&lt;&lt;</span><span class="op" id="8051833">(</span><span class="ident" id="8051834">j</span><span class="op" id="8051835">*</span><span class="num" id="8051836">7</span><span class="op" id="8051837">)</span><span class="op" id="8051838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8051845">}</span><br>
<span class="lineno"></span><span class="op" id="8051847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8051850">func</span>&nbsp;<span class="ident" id="8051855">BenchmarkPutUvarint64</span><span class="op" id="8051876">(</span><span class="ident" id="8051877">b</span>&nbsp;<span class="op" id="8051879">*</span><span class="ident" id="8051880">testing</span><span class="op" id="8051887">.</span><span class="ident" id="8051888">B</span><span class="op" id="8051889">)</span>&nbsp;<span class="op" id="8051891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051894">buf</span>&nbsp;<span class="op" id="8051898">:=</span>&nbsp;<span class="builtinfunc" id="8051901">make</span><span class="op" id="8051905">(</span><span class="op" id="8051906">[</span><span class="op" id="8051907">]</span><span class="builtintype" id="8051908">byte</span><span class="op" id="8051912">,</span>&nbsp;<span class="ident" id="8051914">MaxVarintLen64</span><span class="op" id="8051928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8051931">b</span><span class="op" id="8051932">.</span><span class="ident" id="8051933">SetBytes</span><span class="op" id="8051941">(</span><span class="num" id="8051942">8</span><span class="op" id="8051943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051946">for</span>&nbsp;<span class="ident" id="8051950">i</span>&nbsp;<span class="op" id="8051952">:=</span>&nbsp;<span class="num" id="8051955">0</span><span class="op" id="8051956">;</span>&nbsp;<span class="ident" id="8051958">i</span>&nbsp;<span class="op" id="8051960">&lt;</span>&nbsp;<span class="ident" id="8051962">b</span><span class="op" id="8051963">.</span><span class="ident" id="8051964">N</span><span class="op" id="8051965">;</span>&nbsp;<span class="ident" id="8051967">i</span><span class="op" id="8051968">++</span>&nbsp;<span class="op" id="8051971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8051975">for</span>&nbsp;<span class="ident" id="8051979">j</span>&nbsp;<span class="op" id="8051981">:=</span>&nbsp;<span class="builtintype" id="8051984">uint</span><span class="op" id="8051988">(</span><span class="num" id="8051989">0</span><span class="op" id="8051990">)</span><span class="op" id="8051991">;</span>&nbsp;<span class="ident" id="8051993">j</span>&nbsp;<span class="op" id="8051995">&lt;</span>&nbsp;<span class="ident" id="8051997">MaxVarintLen64</span><span class="op" id="8052011">;</span>&nbsp;<span class="ident" id="8052013">j</span><span class="op" id="8052014">++</span>&nbsp;<span class="op" id="8052017">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052022">PutUvarint</span><span class="op" id="8052032">(</span><span class="ident" id="8052033">buf</span><span class="op" id="8052036">,</span>&nbsp;<span class="num" id="8052038">1</span><span class="op" id="8052039">&lt;&lt;</span><span class="op" id="8052041">(</span><span class="ident" id="8052042">j</span><span class="op" id="8052043">*</span><span class="num" id="8052044">7</span><span class="op" id="8052045">)</span><span class="op" id="8052046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052053">}</span><br>
<span class="lineno"></span><span class="op" id="8052055">}</span>
</div>
</body>
</html>
