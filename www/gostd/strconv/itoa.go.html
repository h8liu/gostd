<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1725302">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1725357">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1725411">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1725462">package</span>&nbsp;<span class="ident" id="1725470">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1725479">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="1725551">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="1725625">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="1725652">func</span>&nbsp;<span class="ident" id="1725657">FormatUint</span><span class="op" id="1725667">(</span><span class="ident" id="1725668">i</span>&nbsp;<span class="ident" id="1725670">uint64</span><span class="op" id="1725676">,</span>&nbsp;<span class="ident" id="1725678">base</span>&nbsp;<span class="builtintype" id="1725683">int</span><span class="op" id="1725686">)</span>&nbsp;<span class="builtintype" id="1725688">string</span>&nbsp;<span class="op" id="1725695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725698">_</span><span class="op" id="1725699">,</span>&nbsp;<span class="ident" id="1725701">s</span>&nbsp;<span class="op" id="1725703">:=</span>&nbsp;<span class="ident" id="1725706">formatBits</span><span class="op" id="1725716">(</span><span class="ident" id="1725717">nil</span><span class="op" id="1725720">,</span>&nbsp;<span class="ident" id="1725722">i</span><span class="op" id="1725723">,</span>&nbsp;<span class="ident" id="1725725">base</span><span class="op" id="1725729">,</span>&nbsp;<span class="builtintype" id="1725731">false</span><span class="op" id="1725736">,</span>&nbsp;<span class="builtintype" id="1725738">false</span><span class="op" id="1725743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1725746">return</span>&nbsp;<span class="ident" id="1725753">s</span><br>
<span class="lineno"></span><span class="op" id="1725755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1725758">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="1725829">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="1725903">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="1725930">func</span>&nbsp;<span class="ident" id="1725935">FormatInt</span><span class="op" id="1725944">(</span><span class="ident" id="1725945">i</span>&nbsp;<span class="ident" id="1725947">int64</span><span class="op" id="1725952">,</span>&nbsp;<span class="ident" id="1725954">base</span>&nbsp;<span class="builtintype" id="1725959">int</span><span class="op" id="1725962">)</span>&nbsp;<span class="builtintype" id="1725964">string</span>&nbsp;<span class="op" id="1725971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1725974">_</span><span class="op" id="1725975">,</span>&nbsp;<span class="ident" id="1725977">s</span>&nbsp;<span class="op" id="1725979">:=</span>&nbsp;<span class="ident" id="1725982">formatBits</span><span class="op" id="1725992">(</span><span class="ident" id="1725993">nil</span><span class="op" id="1725996">,</span>&nbsp;<span class="ident" id="1725998">uint64</span><span class="op" id="1726004">(</span><span class="ident" id="1726005">i</span><span class="op" id="1726006">)</span><span class="op" id="1726007">,</span>&nbsp;<span class="ident" id="1726009">base</span><span class="op" id="1726013">,</span>&nbsp;<span class="ident" id="1726015">i</span>&nbsp;<span class="op" id="1726017">&lt;</span>&nbsp;<span class="num" id="1726019">0</span><span class="op" id="1726020">,</span>&nbsp;<span class="builtintype" id="1726022">false</span><span class="op" id="1726027">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726030">return</span>&nbsp;<span class="ident" id="1726037">s</span><br>
<span class="lineno"></span><span class="op" id="1726039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1726042">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="1726085">func</span>&nbsp;<span class="ident" id="1726090">Itoa</span><span class="op" id="1726094">(</span><span class="ident" id="1726095">i</span>&nbsp;<span class="builtintype" id="1726097">int</span><span class="op" id="1726100">)</span>&nbsp;<span class="builtintype" id="1726102">string</span>&nbsp;<span class="op" id="1726109">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726112">return</span>&nbsp;<span class="ident" id="1726119">FormatInt</span><span class="op" id="1726128">(</span><span class="ident" id="1726129">int64</span><span class="op" id="1726134">(</span><span class="ident" id="1726135">i</span><span class="op" id="1726136">)</span><span class="op" id="1726137">,</span>&nbsp;<span class="num" id="1726139">10</span><span class="op" id="1726141">)</span><br>
<span class="lineno"></span><span class="op" id="1726143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1726146">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="1726201">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="1726271">func</span>&nbsp;<span class="ident" id="1726276">AppendInt</span><span class="op" id="1726285">(</span><span class="ident" id="1726286">dst</span>&nbsp;<span class="op" id="1726290">[</span><span class="op" id="1726291">]</span><span class="builtintype" id="1726292">byte</span><span class="op" id="1726296">,</span>&nbsp;<span class="ident" id="1726298">i</span>&nbsp;<span class="ident" id="1726300">int64</span><span class="op" id="1726305">,</span>&nbsp;<span class="ident" id="1726307">base</span>&nbsp;<span class="builtintype" id="1726312">int</span><span class="op" id="1726315">)</span>&nbsp;<span class="op" id="1726317">[</span><span class="op" id="1726318">]</span><span class="builtintype" id="1726319">byte</span>&nbsp;<span class="op" id="1726324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726327">dst</span><span class="op" id="1726330">,</span>&nbsp;<span class="ident" id="1726332">_</span>&nbsp;<span class="op" id="1726334">=</span>&nbsp;<span class="ident" id="1726336">formatBits</span><span class="op" id="1726346">(</span><span class="ident" id="1726347">dst</span><span class="op" id="1726350">,</span>&nbsp;<span class="ident" id="1726352">uint64</span><span class="op" id="1726358">(</span><span class="ident" id="1726359">i</span><span class="op" id="1726360">)</span><span class="op" id="1726361">,</span>&nbsp;<span class="ident" id="1726363">base</span><span class="op" id="1726367">,</span>&nbsp;<span class="ident" id="1726369">i</span>&nbsp;<span class="op" id="1726371">&lt;</span>&nbsp;<span class="num" id="1726373">0</span><span class="op" id="1726374">,</span>&nbsp;<span class="builtintype" id="1726376">true</span><span class="op" id="1726380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726383">return</span>&nbsp;<span class="ident" id="1726390">dst</span><br>
<span class="lineno"></span><span class="op" id="1726394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="1726397">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="1726462">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1726533">func</span>&nbsp;<span class="ident" id="1726538">AppendUint</span><span class="op" id="1726548">(</span><span class="ident" id="1726549">dst</span>&nbsp;<span class="op" id="1726553">[</span><span class="op" id="1726554">]</span><span class="builtintype" id="1726555">byte</span><span class="op" id="1726559">,</span>&nbsp;<span class="ident" id="1726561">i</span>&nbsp;<span class="ident" id="1726563">uint64</span><span class="op" id="1726569">,</span>&nbsp;<span class="ident" id="1726571">base</span>&nbsp;<span class="builtintype" id="1726576">int</span><span class="op" id="1726579">)</span>&nbsp;<span class="op" id="1726581">[</span><span class="op" id="1726582">]</span><span class="builtintype" id="1726583">byte</span>&nbsp;<span class="op" id="1726588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726591">dst</span><span class="op" id="1726594">,</span>&nbsp;<span class="ident" id="1726596">_</span>&nbsp;<span class="op" id="1726598">=</span>&nbsp;<span class="ident" id="1726600">formatBits</span><span class="op" id="1726610">(</span><span class="ident" id="1726611">dst</span><span class="op" id="1726614">,</span>&nbsp;<span class="ident" id="1726616">i</span><span class="op" id="1726617">,</span>&nbsp;<span class="ident" id="1726619">base</span><span class="op" id="1726623">,</span>&nbsp;<span class="builtintype" id="1726625">false</span><span class="op" id="1726630">,</span>&nbsp;<span class="builtintype" id="1726632">true</span><span class="op" id="1726636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1726639">return</span>&nbsp;<span class="ident" id="1726646">dst</span><br>
<span class="lineno">40</span><span class="op" id="1726650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1726653">const</span>&nbsp;<span class="op" id="1726659">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726662">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1726671">=</span>&nbsp;<span class="string" id="1726673">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726713">digits01</span>&nbsp;<span class="op" id="1726722">=</span>&nbsp;<span class="string" id="1726724">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1726828">digits10</span>&nbsp;<span class="op" id="1726837">=</span>&nbsp;<span class="string" id="1726839">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="1726942">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1726945">var</span>&nbsp;<span class="ident" id="1726949">shifts</span>&nbsp;<span class="op" id="1726956">=</span>&nbsp;<span class="op" id="1726958">[</span><span class="builtinfunc" id="1726959">len</span><span class="op" id="1726962">(</span><span class="ident" id="1726963">digits</span><span class="op" id="1726969">)</span>&nbsp;<span class="op" id="1726971">+</span>&nbsp;<span class="num" id="1726973">1</span><span class="op" id="1726974">]</span><span class="builtintype" id="1726975">uint</span><span class="op" id="1726979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1726982">1</span>&nbsp;<span class="op" id="1726984">&lt;&lt;</span>&nbsp;<span class="num" id="1726987">1</span><span class="op" id="1726988">:</span>&nbsp;<span class="num" id="1726990">1</span><span class="op" id="1726991">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1726994">1</span>&nbsp;<span class="op" id="1726996">&lt;&lt;</span>&nbsp;<span class="num" id="1726999">2</span><span class="op" id="1727000">:</span>&nbsp;<span class="num" id="1727002">2</span><span class="op" id="1727003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1727006">1</span>&nbsp;<span class="op" id="1727008">&lt;&lt;</span>&nbsp;<span class="num" id="1727011">3</span><span class="op" id="1727012">:</span>&nbsp;<span class="num" id="1727014">3</span><span class="op" id="1727015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1727018">1</span>&nbsp;<span class="op" id="1727020">&lt;&lt;</span>&nbsp;<span class="num" id="1727023">4</span><span class="op" id="1727024">:</span>&nbsp;<span class="num" id="1727026">4</span><span class="op" id="1727027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1727030">1</span>&nbsp;<span class="op" id="1727032">&lt;&lt;</span>&nbsp;<span class="num" id="1727035">5</span><span class="op" id="1727036">:</span>&nbsp;<span class="num" id="1727038">5</span><span class="op" id="1727039">,</span><br>
<span class="lineno"></span><span class="op" id="1727041">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="1727044">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="1727117">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1727187">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1727257">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="1727329">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="1727360">//</span><br>
<span class="lineno"></span><span class="keyword" id="1727363">func</span>&nbsp;<span class="ident" id="1727368">formatBits</span><span class="op" id="1727378">(</span><span class="ident" id="1727379">dst</span>&nbsp;<span class="op" id="1727383">[</span><span class="op" id="1727384">]</span><span class="builtintype" id="1727385">byte</span><span class="op" id="1727389">,</span>&nbsp;<span class="ident" id="1727391">u</span>&nbsp;<span class="ident" id="1727393">uint64</span><span class="op" id="1727399">,</span>&nbsp;<span class="ident" id="1727401">base</span>&nbsp;<span class="builtintype" id="1727406">int</span><span class="op" id="1727409">,</span>&nbsp;<span class="ident" id="1727411">neg</span><span class="op" id="1727414">,</span>&nbsp;<span class="ident" id="1727416">append_</span>&nbsp;<span class="builtintype" id="1727424">bool</span><span class="op" id="1727428">)</span>&nbsp;<span class="op" id="1727430">(</span><span class="ident" id="1727431">d</span>&nbsp;<span class="op" id="1727433">[</span><span class="op" id="1727434">]</span><span class="builtintype" id="1727435">byte</span><span class="op" id="1727439">,</span>&nbsp;<span class="ident" id="1727441">s</span>&nbsp;<span class="builtintype" id="1727443">string</span><span class="op" id="1727449">)</span>&nbsp;<span class="op" id="1727451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727454">if</span>&nbsp;<span class="ident" id="1727457">base</span>&nbsp;<span class="op" id="1727462">&lt;</span>&nbsp;<span class="num" id="1727464">2</span>&nbsp;<span class="op" id="1727466">||</span>&nbsp;<span class="ident" id="1727469">base</span>&nbsp;<span class="op" id="1727474">&gt;</span>&nbsp;<span class="builtinfunc" id="1727476">len</span><span class="op" id="1727479">(</span><span class="ident" id="1727480">digits</span><span class="op" id="1727486">)</span>&nbsp;<span class="op" id="1727488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1727492">panic</span><span class="op" id="1727497">(</span><span class="string" id="1727498">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="1727541">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1727547">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727585">var</span>&nbsp;<span class="ident" id="1727589">a</span>&nbsp;<span class="op" id="1727591">[</span><span class="num" id="1727592">64</span>&nbsp;<span class="op" id="1727595">+</span>&nbsp;<span class="num" id="1727597">1</span><span class="op" id="1727598">]</span><span class="builtintype" id="1727599">byte</span>&nbsp;<span class="comment" id="1727604">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727645">i</span>&nbsp;<span class="op" id="1727647">:=</span>&nbsp;<span class="builtinfunc" id="1727650">len</span><span class="op" id="1727653">(</span><span class="ident" id="1727654">a</span><span class="op" id="1727655">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727659">if</span>&nbsp;<span class="ident" id="1727662">neg</span>&nbsp;<span class="op" id="1727666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727670">u</span>&nbsp;<span class="op" id="1727672">=</span>&nbsp;<span class="op" id="1727674">-</span><span class="ident" id="1727675">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1727682">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727699">if</span>&nbsp;<span class="ident" id="1727702">base</span>&nbsp;<span class="op" id="1727707">==</span>&nbsp;<span class="num" id="1727710">10</span>&nbsp;<span class="op" id="1727713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1727717">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1727769">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1727826">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727847">for</span>&nbsp;<span class="ident" id="1727851">u</span>&nbsp;<span class="op" id="1727853">&gt;=</span>&nbsp;<span class="num" id="1727856">100</span>&nbsp;<span class="op" id="1727860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727865">i</span>&nbsp;<span class="op" id="1727867">-=</span>&nbsp;<span class="num" id="1727870">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727875">q</span>&nbsp;<span class="op" id="1727877">:=</span>&nbsp;<span class="ident" id="1727880">u</span>&nbsp;<span class="op" id="1727882">/</span>&nbsp;<span class="num" id="1727884">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727891">j</span>&nbsp;<span class="op" id="1727893">:=</span>&nbsp;<span class="builtintype" id="1727896">uintptr</span><span class="op" id="1727903">(</span><span class="ident" id="1727904">u</span>&nbsp;<span class="op" id="1727906">-</span>&nbsp;<span class="ident" id="1727908">q</span><span class="op" id="1727909">*</span><span class="num" id="1727910">100</span><span class="op" id="1727913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727918">a</span><span class="op" id="1727919">[</span><span class="ident" id="1727920">i</span><span class="op" id="1727921">+</span><span class="num" id="1727922">1</span><span class="op" id="1727923">]</span>&nbsp;<span class="op" id="1727925">=</span>&nbsp;<span class="ident" id="1727927">digits01</span><span class="op" id="1727935">[</span><span class="ident" id="1727936">j</span><span class="op" id="1727937">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727942">a</span><span class="op" id="1727943">[</span><span class="ident" id="1727944">i</span><span class="op" id="1727945">+</span><span class="num" id="1727946">0</span><span class="op" id="1727947">]</span>&nbsp;<span class="op" id="1727949">=</span>&nbsp;<span class="ident" id="1727951">digits10</span><span class="op" id="1727959">[</span><span class="ident" id="1727960">j</span><span class="op" id="1727961">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727966">u</span>&nbsp;<span class="op" id="1727968">=</span>&nbsp;<span class="ident" id="1727970">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1727974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1727978">if</span>&nbsp;<span class="ident" id="1727981">u</span>&nbsp;<span class="op" id="1727983">&gt;=</span>&nbsp;<span class="num" id="1727986">10</span>&nbsp;<span class="op" id="1727989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1727994">i</span><span class="op" id="1727995">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728001">q</span>&nbsp;<span class="op" id="1728003">:=</span>&nbsp;<span class="ident" id="1728006">u</span>&nbsp;<span class="op" id="1728008">/</span>&nbsp;<span class="num" id="1728010">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728016">a</span><span class="op" id="1728017">[</span><span class="ident" id="1728018">i</span><span class="op" id="1728019">]</span>&nbsp;<span class="op" id="1728021">=</span>&nbsp;<span class="ident" id="1728023">digits</span><span class="op" id="1728029">[</span><span class="builtintype" id="1728030">uintptr</span><span class="op" id="1728037">(</span><span class="ident" id="1728038">u</span><span class="op" id="1728039">-</span><span class="ident" id="1728040">q</span><span class="op" id="1728041">*</span><span class="num" id="1728042">10</span><span class="op" id="1728044">)</span><span class="op" id="1728045">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728050">u</span>&nbsp;<span class="op" id="1728052">=</span>&nbsp;<span class="ident" id="1728054">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728062">}</span>&nbsp;<span class="keyword" id="1728064">else</span>&nbsp;<span class="keyword" id="1728069">if</span>&nbsp;<span class="ident" id="1728072">s</span>&nbsp;<span class="op" id="1728074">:=</span>&nbsp;<span class="ident" id="1728077">shifts</span><span class="op" id="1728083">[</span><span class="ident" id="1728084">base</span><span class="op" id="1728088">]</span><span class="op" id="1728089">;</span>&nbsp;<span class="ident" id="1728091">s</span>&nbsp;<span class="op" id="1728093">&gt;</span>&nbsp;<span class="num" id="1728095">0</span>&nbsp;<span class="op" id="1728097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1728101">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728166">b</span>&nbsp;<span class="op" id="1728168">:=</span>&nbsp;<span class="ident" id="1728171">uint64</span><span class="op" id="1728177">(</span><span class="ident" id="1728178">base</span><span class="op" id="1728182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728186">m</span>&nbsp;<span class="op" id="1728188">:=</span>&nbsp;<span class="builtintype" id="1728191">uintptr</span><span class="op" id="1728198">(</span><span class="ident" id="1728199">b</span><span class="op" id="1728200">)</span>&nbsp;<span class="op" id="1728202">-</span>&nbsp;<span class="num" id="1728204">1</span>&nbsp;<span class="comment" id="1728206">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728223">for</span>&nbsp;<span class="ident" id="1728227">u</span>&nbsp;<span class="op" id="1728229">&gt;=</span>&nbsp;<span class="ident" id="1728232">b</span>&nbsp;<span class="op" id="1728234">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728239">i</span><span class="op" id="1728240">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728246">a</span><span class="op" id="1728247">[</span><span class="ident" id="1728248">i</span><span class="op" id="1728249">]</span>&nbsp;<span class="op" id="1728251">=</span>&nbsp;<span class="ident" id="1728253">digits</span><span class="op" id="1728259">[</span><span class="builtintype" id="1728260">uintptr</span><span class="op" id="1728267">(</span><span class="ident" id="1728268">u</span><span class="op" id="1728269">)</span><span class="op" id="1728270">&amp;</span><span class="ident" id="1728271">m</span><span class="op" id="1728272">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728277">u</span>&nbsp;<span class="op" id="1728279">&gt;&gt;=</span>&nbsp;<span class="ident" id="1728283">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728291">}</span>&nbsp;<span class="keyword" id="1728293">else</span>&nbsp;<span class="op" id="1728298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1728302">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728320">b</span>&nbsp;<span class="op" id="1728322">:=</span>&nbsp;<span class="ident" id="1728325">uint64</span><span class="op" id="1728331">(</span><span class="ident" id="1728332">base</span><span class="op" id="1728336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728340">for</span>&nbsp;<span class="ident" id="1728344">u</span>&nbsp;<span class="op" id="1728346">&gt;=</span>&nbsp;<span class="ident" id="1728349">b</span>&nbsp;<span class="op" id="1728351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728356">i</span><span class="op" id="1728357">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728363">a</span><span class="op" id="1728364">[</span><span class="ident" id="1728365">i</span><span class="op" id="1728366">]</span>&nbsp;<span class="op" id="1728368">=</span>&nbsp;<span class="ident" id="1728370">digits</span><span class="op" id="1728376">[</span><span class="builtintype" id="1728377">uintptr</span><span class="op" id="1728384">(</span><span class="ident" id="1728385">u</span><span class="op" id="1728386">%</span><span class="ident" id="1728387">b</span><span class="op" id="1728388">)</span><span class="op" id="1728389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728394">u</span>&nbsp;<span class="op" id="1728396">/=</span>&nbsp;<span class="ident" id="1728399">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1728410">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728423">i</span><span class="op" id="1728424">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728428">a</span><span class="op" id="1728429">[</span><span class="ident" id="1728430">i</span><span class="op" id="1728431">]</span>&nbsp;<span class="op" id="1728433">=</span>&nbsp;<span class="ident" id="1728435">digits</span><span class="op" id="1728441">[</span><span class="builtintype" id="1728442">uintptr</span><span class="op" id="1728449">(</span><span class="ident" id="1728450">u</span><span class="op" id="1728451">)</span><span class="op" id="1728452">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1728456">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728477">if</span>&nbsp;<span class="ident" id="1728480">neg</span>&nbsp;<span class="op" id="1728484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728488">i</span><span class="op" id="1728489">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728494">a</span><span class="op" id="1728495">[</span><span class="ident" id="1728496">i</span><span class="op" id="1728497">]</span>&nbsp;<span class="op" id="1728499">=</span>&nbsp;<span class="string" id="1728501">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728510">if</span>&nbsp;<span class="ident" id="1728513">append_</span>&nbsp;<span class="op" id="1728521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728525">d</span>&nbsp;<span class="op" id="1728527">=</span>&nbsp;<span class="builtinfunc" id="1728529">append</span><span class="op" id="1728535">(</span><span class="ident" id="1728536">dst</span><span class="op" id="1728539">,</span>&nbsp;<span class="ident" id="1728541">a</span><span class="op" id="1728542">[</span><span class="ident" id="1728543">i</span><span class="op" id="1728544">:</span><span class="op" id="1728545">]</span><span class="op" id="1728546">...</span><span class="op" id="1728549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728553">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1728561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1728564">s</span>&nbsp;<span class="op" id="1728566">=</span>&nbsp;<span class="builtintype" id="1728568">string</span><span class="op" id="1728574">(</span><span class="ident" id="1728575">a</span><span class="op" id="1728576">[</span><span class="ident" id="1728577">i</span><span class="op" id="1728578">:</span><span class="op" id="1728579">]</span><span class="op" id="1728580">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1728583">return</span><br>
<span class="lineno"></span><span class="op" id="1728590">}</span>
</div>
</body>
</html>
