<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html" class="current">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7075265">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7075321">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7075375">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7075426">package</span>&nbsp;<span class="ident" id="7075434">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075440">import</span>&nbsp;<span class="op" id="7075447">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7075450">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7075459">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7075467">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7075480">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7075491">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7075501">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7075504">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075534">type</span>&nbsp;<span class="ident" id="7075539">example</span>&nbsp;<span class="keyword" id="7075547">struct</span>&nbsp;<span class="op" id="7075554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7075557">compact</span>&nbsp;<span class="builtintype" id="7075565">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7075573">indent</span>&nbsp;&nbsp;<span class="builtintype" id="7075581">string</span><br>
<span class="lineno">20</span><span class="op" id="7075588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075591">var</span>&nbsp;<span class="ident" id="7075595">examples</span>&nbsp;<span class="op" id="7075604">=</span>&nbsp;<span class="op" id="7075606">[</span><span class="op" id="7075607">]</span><span class="ident" id="7075608">example</span><span class="op" id="7075615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075618">{</span><span class="string" id="7075619">`1`</span><span class="op" id="7075622">,</span>&nbsp;<span class="string" id="7075624">`1`</span><span class="op" id="7075627">}</span><span class="op" id="7075628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075631">{</span><span class="string" id="7075632">`{}`</span><span class="op" id="7075636">,</span>&nbsp;<span class="string" id="7075638">`{}`</span><span class="op" id="7075642">}</span><span class="op" id="7075643">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075646">{</span><span class="string" id="7075647">`[]`</span><span class="op" id="7075651">,</span>&nbsp;<span class="string" id="7075653">`[]`</span><span class="op" id="7075657">}</span><span class="op" id="7075658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075661">{</span><span class="string" id="7075662">`{&#34;&#34;:2}`</span><span class="op" id="7075670">,</span>&nbsp;<span class="string" id="7075672">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="7075689">}</span><span class="op" id="7075690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075693">{</span><span class="string" id="7075694">`[3]`</span><span class="op" id="7075699">,</span>&nbsp;<span class="string" id="7075701">&#34;[\n\t3\n]&#34;</span><span class="op" id="7075712">}</span><span class="op" id="7075713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075716">{</span><span class="string" id="7075717">`[1,2,3]`</span><span class="op" id="7075726">,</span>&nbsp;<span class="string" id="7075728">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="7075751">}</span><span class="op" id="7075752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075755">{</span><span class="string" id="7075756">`{&#34;x&#34;:1}`</span><span class="op" id="7075765">,</span>&nbsp;<span class="string" id="7075767">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="7075785">}</span><span class="op" id="7075786">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7075789">{</span><span class="ident" id="7075790">ex1</span><span class="op" id="7075793">,</span>&nbsp;<span class="ident" id="7075795">ex1i</span><span class="op" id="7075799">}</span><span class="op" id="7075800">,</span><br>
<span class="lineno"></span><span class="op" id="7075802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7075805">var</span>&nbsp;<span class="ident" id="7075809">ex1</span>&nbsp;<span class="op" id="7075813">=</span>&nbsp;<span class="string" id="7075815">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7075854">var</span>&nbsp;<span class="ident" id="7075858">ex1i</span>&nbsp;<span class="op" id="7075863">=</span>&nbsp;<span class="string" id="7075865">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;true,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;false,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;null,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="7075921">func</span>&nbsp;<span class="ident" id="7075926">TestCompact</span><span class="op" id="7075937">(</span><span class="ident" id="7075938">t</span>&nbsp;<span class="op" id="7075940">*</span><span class="ident" id="7075941">testing</span><span class="op" id="7075948">.</span><span class="ident" id="7075949">T</span><span class="op" id="7075950">)</span>&nbsp;<span class="op" id="7075952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7075955">var</span>&nbsp;<span class="ident" id="7075959">buf</span>&nbsp;<span class="ident" id="7075963">bytes</span><span class="op" id="7075968">.</span><span class="ident" id="7075969">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7075977">for</span>&nbsp;<span class="ident" id="7075981">_</span><span class="op" id="7075982">,</span>&nbsp;<span class="ident" id="7075984">tt</span>&nbsp;<span class="op" id="7075987">:=</span>&nbsp;<span class="keyword" id="7075990">range</span>&nbsp;<span class="ident" id="7075996">examples</span>&nbsp;<span class="op" id="7076005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076009">buf</span><span class="op" id="7076012">.</span><span class="ident" id="7076013">Reset</span><span class="op" id="7076018">(</span><span class="op" id="7076019">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076023">if</span>&nbsp;<span class="ident" id="7076026">err</span>&nbsp;<span class="op" id="7076030">:=</span>&nbsp;<span class="ident" id="7076033">Compact</span><span class="op" id="7076040">(</span><span class="op" id="7076041">&amp;</span><span class="ident" id="7076042">buf</span><span class="op" id="7076045">,</span>&nbsp;<span class="op" id="7076047">[</span><span class="op" id="7076048">]</span><span class="builtintype" id="7076049">byte</span><span class="op" id="7076053">(</span><span class="ident" id="7076054">tt</span><span class="op" id="7076056">.</span><span class="ident" id="7076057">compact</span><span class="op" id="7076064">)</span><span class="op" id="7076065">)</span><span class="op" id="7076066">;</span>&nbsp;<span class="ident" id="7076068">err</span>&nbsp;<span class="op" id="7076072">!=</span>&nbsp;<span class="builtintype" id="7076075">nil</span>&nbsp;<span class="op" id="7076079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076084">t</span><span class="op" id="7076085">.</span><span class="ident" id="7076086">Errorf</span><span class="op" id="7076092">(</span><span class="string" id="7076093">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="7076111">,</span>&nbsp;<span class="ident" id="7076113">tt</span><span class="op" id="7076115">.</span><span class="ident" id="7076116">compact</span><span class="op" id="7076123">,</span>&nbsp;<span class="ident" id="7076125">err</span><span class="op" id="7076128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076132">}</span>&nbsp;<span class="keyword" id="7076134">else</span>&nbsp;<span class="keyword" id="7076139">if</span>&nbsp;<span class="ident" id="7076142">s</span>&nbsp;<span class="op" id="7076144">:=</span>&nbsp;<span class="ident" id="7076147">buf</span><span class="op" id="7076150">.</span><span class="ident" id="7076151">String</span><span class="op" id="7076157">(</span><span class="op" id="7076158">)</span><span class="op" id="7076159">;</span>&nbsp;<span class="ident" id="7076161">s</span>&nbsp;<span class="op" id="7076163">!=</span>&nbsp;<span class="ident" id="7076166">tt</span><span class="op" id="7076168">.</span><span class="ident" id="7076169">compact</span>&nbsp;<span class="op" id="7076177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076182">t</span><span class="op" id="7076183">.</span><span class="ident" id="7076184">Errorf</span><span class="op" id="7076190">(</span><span class="string" id="7076191">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="7076226">,</span>&nbsp;<span class="ident" id="7076228">tt</span><span class="op" id="7076230">.</span><span class="ident" id="7076231">compact</span><span class="op" id="7076238">,</span>&nbsp;<span class="ident" id="7076240">s</span><span class="op" id="7076241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076245">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076250">buf</span><span class="op" id="7076253">.</span><span class="ident" id="7076254">Reset</span><span class="op" id="7076259">(</span><span class="op" id="7076260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076264">if</span>&nbsp;<span class="ident" id="7076267">err</span>&nbsp;<span class="op" id="7076271">:=</span>&nbsp;<span class="ident" id="7076274">Compact</span><span class="op" id="7076281">(</span><span class="op" id="7076282">&amp;</span><span class="ident" id="7076283">buf</span><span class="op" id="7076286">,</span>&nbsp;<span class="op" id="7076288">[</span><span class="op" id="7076289">]</span><span class="builtintype" id="7076290">byte</span><span class="op" id="7076294">(</span><span class="ident" id="7076295">tt</span><span class="op" id="7076297">.</span><span class="ident" id="7076298">indent</span><span class="op" id="7076304">)</span><span class="op" id="7076305">)</span><span class="op" id="7076306">;</span>&nbsp;<span class="ident" id="7076308">err</span>&nbsp;<span class="op" id="7076312">!=</span>&nbsp;<span class="builtintype" id="7076315">nil</span>&nbsp;<span class="op" id="7076319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076324">t</span><span class="op" id="7076325">.</span><span class="ident" id="7076326">Errorf</span><span class="op" id="7076332">(</span><span class="string" id="7076333">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="7076351">,</span>&nbsp;<span class="ident" id="7076353">tt</span><span class="op" id="7076355">.</span><span class="ident" id="7076356">indent</span><span class="op" id="7076362">,</span>&nbsp;<span class="ident" id="7076364">err</span><span class="op" id="7076367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076372">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076383">}</span>&nbsp;<span class="keyword" id="7076385">else</span>&nbsp;<span class="keyword" id="7076390">if</span>&nbsp;<span class="ident" id="7076393">s</span>&nbsp;<span class="op" id="7076395">:=</span>&nbsp;<span class="ident" id="7076398">buf</span><span class="op" id="7076401">.</span><span class="ident" id="7076402">String</span><span class="op" id="7076408">(</span><span class="op" id="7076409">)</span><span class="op" id="7076410">;</span>&nbsp;<span class="ident" id="7076412">s</span>&nbsp;<span class="op" id="7076414">!=</span>&nbsp;<span class="ident" id="7076417">tt</span><span class="op" id="7076419">.</span><span class="ident" id="7076420">compact</span>&nbsp;<span class="op" id="7076428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076433">t</span><span class="op" id="7076434">.</span><span class="ident" id="7076435">Errorf</span><span class="op" id="7076441">(</span><span class="string" id="7076442">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7076472">,</span>&nbsp;<span class="ident" id="7076474">tt</span><span class="op" id="7076476">.</span><span class="ident" id="7076477">indent</span><span class="op" id="7076483">,</span>&nbsp;<span class="ident" id="7076485">s</span><span class="op" id="7076486">,</span>&nbsp;<span class="ident" id="7076488">tt</span><span class="op" id="7076490">.</span><span class="ident" id="7076491">compact</span><span class="op" id="7076498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076505">}</span><br>
<span class="lineno"></span><span class="op" id="7076507">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="7076510">func</span>&nbsp;<span class="ident" id="7076515">TestCompactSeparators</span><span class="op" id="7076536">(</span><span class="ident" id="7076537">t</span>&nbsp;<span class="op" id="7076539">*</span><span class="ident" id="7076540">testing</span><span class="op" id="7076547">.</span><span class="ident" id="7076548">T</span><span class="op" id="7076549">)</span>&nbsp;<span class="op" id="7076551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7076554">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7076610">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076654">tests</span>&nbsp;<span class="op" id="7076660">:=</span>&nbsp;<span class="op" id="7076663">[</span><span class="op" id="7076664">]</span><span class="keyword" id="7076665">struct</span>&nbsp;<span class="op" id="7076672">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076676">in</span><span class="op" id="7076678">,</span>&nbsp;<span class="ident" id="7076680">compact</span>&nbsp;<span class="builtintype" id="7076688">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076696">}</span><span class="op" id="7076697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076701">{</span><span class="string" id="7076702">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="7076719">,</span>&nbsp;<span class="string" id="7076721">`{&#34;\u2028&#34;:1}`</span><span class="op" id="7076735">}</span><span class="op" id="7076736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076740">{</span><span class="string" id="7076741">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="7076758">,</span>&nbsp;<span class="string" id="7076760">`{&#34;\u2029&#34;:2}`</span><span class="op" id="7076774">}</span><span class="op" id="7076775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076778">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076781">for</span>&nbsp;<span class="ident" id="7076785">_</span><span class="op" id="7076786">,</span>&nbsp;<span class="ident" id="7076788">tt</span>&nbsp;<span class="op" id="7076791">:=</span>&nbsp;<span class="keyword" id="7076794">range</span>&nbsp;<span class="ident" id="7076800">tests</span>&nbsp;<span class="op" id="7076806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076810">var</span>&nbsp;<span class="ident" id="7076814">buf</span>&nbsp;<span class="ident" id="7076818">bytes</span><span class="op" id="7076823">.</span><span class="ident" id="7076824">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7076833">if</span>&nbsp;<span class="ident" id="7076836">err</span>&nbsp;<span class="op" id="7076840">:=</span>&nbsp;<span class="ident" id="7076843">Compact</span><span class="op" id="7076850">(</span><span class="op" id="7076851">&amp;</span><span class="ident" id="7076852">buf</span><span class="op" id="7076855">,</span>&nbsp;<span class="op" id="7076857">[</span><span class="op" id="7076858">]</span><span class="builtintype" id="7076859">byte</span><span class="op" id="7076863">(</span><span class="ident" id="7076864">tt</span><span class="op" id="7076866">.</span><span class="ident" id="7076867">in</span><span class="op" id="7076869">)</span><span class="op" id="7076870">)</span><span class="op" id="7076871">;</span>&nbsp;<span class="ident" id="7076873">err</span>&nbsp;<span class="op" id="7076877">!=</span>&nbsp;<span class="builtintype" id="7076880">nil</span>&nbsp;<span class="op" id="7076884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076889">t</span><span class="op" id="7076890">.</span><span class="ident" id="7076891">Errorf</span><span class="op" id="7076897">(</span><span class="string" id="7076898">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="7076915">,</span>&nbsp;<span class="ident" id="7076917">tt</span><span class="op" id="7076919">.</span><span class="ident" id="7076920">in</span><span class="op" id="7076922">,</span>&nbsp;<span class="ident" id="7076924">err</span><span class="op" id="7076927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7076931">}</span>&nbsp;<span class="keyword" id="7076933">else</span>&nbsp;<span class="keyword" id="7076938">if</span>&nbsp;<span class="ident" id="7076941">s</span>&nbsp;<span class="op" id="7076943">:=</span>&nbsp;<span class="ident" id="7076946">buf</span><span class="op" id="7076949">.</span><span class="ident" id="7076950">String</span><span class="op" id="7076956">(</span><span class="op" id="7076957">)</span><span class="op" id="7076958">;</span>&nbsp;<span class="ident" id="7076960">s</span>&nbsp;<span class="op" id="7076962">!=</span>&nbsp;<span class="ident" id="7076965">tt</span><span class="op" id="7076967">.</span><span class="ident" id="7076968">compact</span>&nbsp;<span class="op" id="7076976">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7076981">t</span><span class="op" id="7076982">.</span><span class="ident" id="7076983">Errorf</span><span class="op" id="7076989">(</span><span class="string" id="7076990">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7077017">,</span>&nbsp;<span class="ident" id="7077019">tt</span><span class="op" id="7077021">.</span><span class="ident" id="7077022">in</span><span class="op" id="7077024">,</span>&nbsp;<span class="ident" id="7077026">s</span><span class="op" id="7077027">,</span>&nbsp;<span class="ident" id="7077029">tt</span><span class="op" id="7077031">.</span><span class="ident" id="7077032">compact</span><span class="op" id="7077039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077046">}</span><br>
<span class="lineno"></span><span class="op" id="7077048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7077051">func</span>&nbsp;<span class="ident" id="7077056">TestIndent</span><span class="op" id="7077066">(</span><span class="ident" id="7077067">t</span>&nbsp;<span class="op" id="7077069">*</span><span class="ident" id="7077070">testing</span><span class="op" id="7077077">.</span><span class="ident" id="7077078">T</span><span class="op" id="7077079">)</span>&nbsp;<span class="op" id="7077081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077084">var</span>&nbsp;<span class="ident" id="7077088">buf</span>&nbsp;<span class="ident" id="7077092">bytes</span><span class="op" id="7077097">.</span><span class="ident" id="7077098">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077106">for</span>&nbsp;<span class="ident" id="7077110">_</span><span class="op" id="7077111">,</span>&nbsp;<span class="ident" id="7077113">tt</span>&nbsp;<span class="op" id="7077116">:=</span>&nbsp;<span class="keyword" id="7077119">range</span>&nbsp;<span class="ident" id="7077125">examples</span>&nbsp;<span class="op" id="7077134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077138">buf</span><span class="op" id="7077141">.</span><span class="ident" id="7077142">Reset</span><span class="op" id="7077147">(</span><span class="op" id="7077148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077152">if</span>&nbsp;<span class="ident" id="7077155">err</span>&nbsp;<span class="op" id="7077159">:=</span>&nbsp;<span class="ident" id="7077162">Indent</span><span class="op" id="7077168">(</span><span class="op" id="7077169">&amp;</span><span class="ident" id="7077170">buf</span><span class="op" id="7077173">,</span>&nbsp;<span class="op" id="7077175">[</span><span class="op" id="7077176">]</span><span class="builtintype" id="7077177">byte</span><span class="op" id="7077181">(</span><span class="ident" id="7077182">tt</span><span class="op" id="7077184">.</span><span class="ident" id="7077185">indent</span><span class="op" id="7077191">)</span><span class="op" id="7077192">,</span>&nbsp;<span class="string" id="7077194">&#34;&#34;</span><span class="op" id="7077196">,</span>&nbsp;<span class="string" id="7077198">&#34;\t&#34;</span><span class="op" id="7077202">)</span><span class="op" id="7077203">;</span>&nbsp;<span class="ident" id="7077205">err</span>&nbsp;<span class="op" id="7077209">!=</span>&nbsp;<span class="builtintype" id="7077212">nil</span>&nbsp;<span class="op" id="7077216">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077221">t</span><span class="op" id="7077222">.</span><span class="ident" id="7077223">Errorf</span><span class="op" id="7077229">(</span><span class="string" id="7077230">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="7077247">,</span>&nbsp;<span class="ident" id="7077249">tt</span><span class="op" id="7077251">.</span><span class="ident" id="7077252">indent</span><span class="op" id="7077258">,</span>&nbsp;<span class="ident" id="7077260">err</span><span class="op" id="7077263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077267">}</span>&nbsp;<span class="keyword" id="7077269">else</span>&nbsp;<span class="keyword" id="7077274">if</span>&nbsp;<span class="ident" id="7077277">s</span>&nbsp;<span class="op" id="7077279">:=</span>&nbsp;<span class="ident" id="7077282">buf</span><span class="op" id="7077285">.</span><span class="ident" id="7077286">String</span><span class="op" id="7077292">(</span><span class="op" id="7077293">)</span><span class="op" id="7077294">;</span>&nbsp;<span class="ident" id="7077296">s</span>&nbsp;<span class="op" id="7077298">!=</span>&nbsp;<span class="ident" id="7077301">tt</span><span class="op" id="7077303">.</span><span class="ident" id="7077304">indent</span>&nbsp;<span class="op" id="7077311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077316">t</span><span class="op" id="7077317">.</span><span class="ident" id="7077318">Errorf</span><span class="op" id="7077324">(</span><span class="string" id="7077325">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="7077359">,</span>&nbsp;<span class="ident" id="7077361">tt</span><span class="op" id="7077363">.</span><span class="ident" id="7077364">indent</span><span class="op" id="7077370">,</span>&nbsp;<span class="ident" id="7077372">s</span><span class="op" id="7077373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077382">buf</span><span class="op" id="7077385">.</span><span class="ident" id="7077386">Reset</span><span class="op" id="7077391">(</span><span class="op" id="7077392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077396">if</span>&nbsp;<span class="ident" id="7077399">err</span>&nbsp;<span class="op" id="7077403">:=</span>&nbsp;<span class="ident" id="7077406">Indent</span><span class="op" id="7077412">(</span><span class="op" id="7077413">&amp;</span><span class="ident" id="7077414">buf</span><span class="op" id="7077417">,</span>&nbsp;<span class="op" id="7077419">[</span><span class="op" id="7077420">]</span><span class="builtintype" id="7077421">byte</span><span class="op" id="7077425">(</span><span class="ident" id="7077426">tt</span><span class="op" id="7077428">.</span><span class="ident" id="7077429">compact</span><span class="op" id="7077436">)</span><span class="op" id="7077437">,</span>&nbsp;<span class="string" id="7077439">&#34;&#34;</span><span class="op" id="7077441">,</span>&nbsp;<span class="string" id="7077443">&#34;\t&#34;</span><span class="op" id="7077447">)</span><span class="op" id="7077448">;</span>&nbsp;<span class="ident" id="7077450">err</span>&nbsp;<span class="op" id="7077454">!=</span>&nbsp;<span class="builtintype" id="7077457">nil</span>&nbsp;<span class="op" id="7077461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077466">t</span><span class="op" id="7077467">.</span><span class="ident" id="7077468">Errorf</span><span class="op" id="7077474">(</span><span class="string" id="7077475">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="7077492">,</span>&nbsp;<span class="ident" id="7077494">tt</span><span class="op" id="7077496">.</span><span class="ident" id="7077497">compact</span><span class="op" id="7077504">,</span>&nbsp;<span class="ident" id="7077506">err</span><span class="op" id="7077509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077514">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077525">}</span>&nbsp;<span class="keyword" id="7077527">else</span>&nbsp;<span class="keyword" id="7077532">if</span>&nbsp;<span class="ident" id="7077535">s</span>&nbsp;<span class="op" id="7077537">:=</span>&nbsp;<span class="ident" id="7077540">buf</span><span class="op" id="7077543">.</span><span class="ident" id="7077544">String</span><span class="op" id="7077550">(</span><span class="op" id="7077551">)</span><span class="op" id="7077552">;</span>&nbsp;<span class="ident" id="7077554">s</span>&nbsp;<span class="op" id="7077556">!=</span>&nbsp;<span class="ident" id="7077559">tt</span><span class="op" id="7077561">.</span><span class="ident" id="7077562">indent</span>&nbsp;<span class="op" id="7077569">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077574">t</span><span class="op" id="7077575">.</span><span class="ident" id="7077576">Errorf</span><span class="op" id="7077582">(</span><span class="string" id="7077583">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7077612">,</span>&nbsp;<span class="ident" id="7077614">tt</span><span class="op" id="7077616">.</span><span class="ident" id="7077617">compact</span><span class="op" id="7077624">,</span>&nbsp;<span class="ident" id="7077626">s</span><span class="op" id="7077627">,</span>&nbsp;<span class="ident" id="7077629">tt</span><span class="op" id="7077631">.</span><span class="ident" id="7077632">indent</span><span class="op" id="7077638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077645">}</span><br>
<span class="lineno"></span><span class="op" id="7077647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="7077650">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7077689">func</span>&nbsp;<span class="ident" id="7077694">TestCompactBig</span><span class="op" id="7077708">(</span><span class="ident" id="7077709">t</span>&nbsp;<span class="op" id="7077711">*</span><span class="ident" id="7077712">testing</span><span class="op" id="7077719">.</span><span class="ident" id="7077720">T</span><span class="op" id="7077721">)</span>&nbsp;<span class="op" id="7077723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077726">initBig</span><span class="op" id="7077733">(</span><span class="op" id="7077734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077737">var</span>&nbsp;<span class="ident" id="7077741">buf</span>&nbsp;<span class="ident" id="7077745">bytes</span><span class="op" id="7077750">.</span><span class="ident" id="7077751">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077759">if</span>&nbsp;<span class="ident" id="7077762">err</span>&nbsp;<span class="op" id="7077766">:=</span>&nbsp;<span class="ident" id="7077769">Compact</span><span class="op" id="7077776">(</span><span class="op" id="7077777">&amp;</span><span class="ident" id="7077778">buf</span><span class="op" id="7077781">,</span>&nbsp;<span class="ident" id="7077783">jsonBig</span><span class="op" id="7077790">)</span><span class="op" id="7077791">;</span>&nbsp;<span class="ident" id="7077793">err</span>&nbsp;<span class="op" id="7077797">!=</span>&nbsp;<span class="builtintype" id="7077800">nil</span>&nbsp;<span class="op" id="7077804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077808">t</span><span class="op" id="7077809">.</span><span class="ident" id="7077810">Fatalf</span><span class="op" id="7077816">(</span><span class="string" id="7077817">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="7077830">,</span>&nbsp;<span class="ident" id="7077832">err</span><span class="op" id="7077835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077841">b</span>&nbsp;<span class="op" id="7077843">:=</span>&nbsp;<span class="ident" id="7077846">buf</span><span class="op" id="7077849">.</span><span class="ident" id="7077850">Bytes</span><span class="op" id="7077855">(</span><span class="op" id="7077856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077859">if</span>&nbsp;<span class="op" id="7077862">!</span><span class="ident" id="7077863">bytes</span><span class="op" id="7077868">.</span><span class="ident" id="7077869">Equal</span><span class="op" id="7077874">(</span><span class="ident" id="7077875">b</span><span class="op" id="7077876">,</span>&nbsp;<span class="ident" id="7077878">jsonBig</span><span class="op" id="7077885">)</span>&nbsp;<span class="op" id="7077887">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077891">t</span><span class="op" id="7077892">.</span><span class="ident" id="7077893">Error</span><span class="op" id="7077898">(</span><span class="string" id="7077899">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="7077928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7077932">diff</span><span class="op" id="7077936">(</span><span class="ident" id="7077937">t</span><span class="op" id="7077938">,</span>&nbsp;<span class="ident" id="7077940">b</span><span class="op" id="7077941">,</span>&nbsp;<span class="ident" id="7077943">jsonBig</span><span class="op" id="7077950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7077954">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7077962">}</span><br>
<span class="lineno"></span><span class="op" id="7077964">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7077967">func</span>&nbsp;<span class="ident" id="7077972">TestIndentBig</span><span class="op" id="7077985">(</span><span class="ident" id="7077986">t</span>&nbsp;<span class="op" id="7077988">*</span><span class="ident" id="7077989">testing</span><span class="op" id="7077996">.</span><span class="ident" id="7077997">T</span><span class="op" id="7077998">)</span>&nbsp;<span class="op" id="7078000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078003">initBig</span><span class="op" id="7078010">(</span><span class="op" id="7078011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078014">var</span>&nbsp;<span class="ident" id="7078018">buf</span>&nbsp;<span class="ident" id="7078022">bytes</span><span class="op" id="7078027">.</span><span class="ident" id="7078028">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078036">if</span>&nbsp;<span class="ident" id="7078039">err</span>&nbsp;<span class="op" id="7078043">:=</span>&nbsp;<span class="ident" id="7078046">Indent</span><span class="op" id="7078052">(</span><span class="op" id="7078053">&amp;</span><span class="ident" id="7078054">buf</span><span class="op" id="7078057">,</span>&nbsp;<span class="ident" id="7078059">jsonBig</span><span class="op" id="7078066">,</span>&nbsp;<span class="string" id="7078068">&#34;&#34;</span><span class="op" id="7078070">,</span>&nbsp;<span class="string" id="7078072">&#34;\t&#34;</span><span class="op" id="7078076">)</span><span class="op" id="7078077">;</span>&nbsp;<span class="ident" id="7078079">err</span>&nbsp;<span class="op" id="7078083">!=</span>&nbsp;<span class="builtintype" id="7078086">nil</span>&nbsp;<span class="op" id="7078090">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078094">t</span><span class="op" id="7078095">.</span><span class="ident" id="7078096">Fatalf</span><span class="op" id="7078102">(</span><span class="string" id="7078103">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="7078116">,</span>&nbsp;<span class="ident" id="7078118">err</span><span class="op" id="7078121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078127">b</span>&nbsp;<span class="op" id="7078129">:=</span>&nbsp;<span class="ident" id="7078132">buf</span><span class="op" id="7078135">.</span><span class="ident" id="7078136">Bytes</span><span class="op" id="7078141">(</span><span class="op" id="7078142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078145">if</span>&nbsp;<span class="builtinfunc" id="7078148">len</span><span class="op" id="7078151">(</span><span class="ident" id="7078152">b</span><span class="op" id="7078153">)</span>&nbsp;<span class="op" id="7078155">==</span>&nbsp;<span class="builtinfunc" id="7078158">len</span><span class="op" id="7078161">(</span><span class="ident" id="7078162">jsonBig</span><span class="op" id="7078169">)</span>&nbsp;<span class="op" id="7078171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7078175">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7078224">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078261">t</span><span class="op" id="7078262">.</span><span class="ident" id="7078263">Fatalf</span><span class="op" id="7078269">(</span><span class="string" id="7078270">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="7078306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7078313">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078338">var</span>&nbsp;<span class="ident" id="7078342">buf1</span>&nbsp;<span class="ident" id="7078347">bytes</span><span class="op" id="7078352">.</span><span class="ident" id="7078353">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078361">if</span>&nbsp;<span class="ident" id="7078364">err</span>&nbsp;<span class="op" id="7078368">:=</span>&nbsp;<span class="ident" id="7078371">Indent</span><span class="op" id="7078377">(</span><span class="op" id="7078378">&amp;</span><span class="ident" id="7078379">buf1</span><span class="op" id="7078383">,</span>&nbsp;<span class="ident" id="7078385">b</span><span class="op" id="7078386">,</span>&nbsp;<span class="string" id="7078388">&#34;&#34;</span><span class="op" id="7078390">,</span>&nbsp;<span class="string" id="7078392">&#34;\t&#34;</span><span class="op" id="7078396">)</span><span class="op" id="7078397">;</span>&nbsp;<span class="ident" id="7078399">err</span>&nbsp;<span class="op" id="7078403">!=</span>&nbsp;<span class="builtintype" id="7078406">nil</span>&nbsp;<span class="op" id="7078410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078414">t</span><span class="op" id="7078415">.</span><span class="ident" id="7078416">Fatalf</span><span class="op" id="7078422">(</span><span class="string" id="7078423">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="7078436">,</span>&nbsp;<span class="ident" id="7078438">err</span><span class="op" id="7078441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078447">b1</span>&nbsp;<span class="op" id="7078450">:=</span>&nbsp;<span class="ident" id="7078453">buf1</span><span class="op" id="7078457">.</span><span class="ident" id="7078458">Bytes</span><span class="op" id="7078463">(</span><span class="op" id="7078464">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078467">if</span>&nbsp;<span class="op" id="7078470">!</span><span class="ident" id="7078471">bytes</span><span class="op" id="7078476">.</span><span class="ident" id="7078477">Equal</span><span class="op" id="7078482">(</span><span class="ident" id="7078483">b1</span><span class="op" id="7078485">,</span>&nbsp;<span class="ident" id="7078487">b</span><span class="op" id="7078488">)</span>&nbsp;<span class="op" id="7078490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078494">t</span><span class="op" id="7078495">.</span><span class="ident" id="7078496">Error</span><span class="op" id="7078501">(</span><span class="string" id="7078502">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="7078546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078550">diff</span><span class="op" id="7078554">(</span><span class="ident" id="7078555">t</span><span class="op" id="7078556">,</span>&nbsp;<span class="ident" id="7078558">b1</span><span class="op" id="7078560">,</span>&nbsp;<span class="ident" id="7078562">b</span><span class="op" id="7078563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078567">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078575">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7078579">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078611">buf1</span><span class="op" id="7078615">.</span><span class="ident" id="7078616">Reset</span><span class="op" id="7078621">(</span><span class="op" id="7078622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078625">if</span>&nbsp;<span class="ident" id="7078628">err</span>&nbsp;<span class="op" id="7078632">:=</span>&nbsp;<span class="ident" id="7078635">Compact</span><span class="op" id="7078642">(</span><span class="op" id="7078643">&amp;</span><span class="ident" id="7078644">buf1</span><span class="op" id="7078648">,</span>&nbsp;<span class="ident" id="7078650">b</span><span class="op" id="7078651">)</span><span class="op" id="7078652">;</span>&nbsp;<span class="ident" id="7078654">err</span>&nbsp;<span class="op" id="7078658">!=</span>&nbsp;<span class="builtintype" id="7078661">nil</span>&nbsp;<span class="op" id="7078665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078669">t</span><span class="op" id="7078670">.</span><span class="ident" id="7078671">Fatalf</span><span class="op" id="7078677">(</span><span class="string" id="7078678">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="7078691">,</span>&nbsp;<span class="ident" id="7078693">err</span><span class="op" id="7078696">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078702">b1</span>&nbsp;<span class="op" id="7078705">=</span>&nbsp;<span class="ident" id="7078707">buf1</span><span class="op" id="7078711">.</span><span class="ident" id="7078712">Bytes</span><span class="op" id="7078717">(</span><span class="op" id="7078718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078721">if</span>&nbsp;<span class="op" id="7078724">!</span><span class="ident" id="7078725">bytes</span><span class="op" id="7078730">.</span><span class="ident" id="7078731">Equal</span><span class="op" id="7078736">(</span><span class="ident" id="7078737">b1</span><span class="op" id="7078739">,</span>&nbsp;<span class="ident" id="7078741">jsonBig</span><span class="op" id="7078748">)</span>&nbsp;<span class="op" id="7078750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078754">t</span><span class="op" id="7078755">.</span><span class="ident" id="7078756">Error</span><span class="op" id="7078761">(</span><span class="string" id="7078762">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="7078799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078803">diff</span><span class="op" id="7078807">(</span><span class="ident" id="7078808">t</span><span class="op" id="7078809">,</span>&nbsp;<span class="ident" id="7078811">b1</span><span class="op" id="7078813">,</span>&nbsp;<span class="ident" id="7078815">jsonBig</span><span class="op" id="7078822">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7078826">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078834">}</span><br>
<span class="lineno"></span><span class="op" id="7078836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7078839">type</span>&nbsp;<span class="ident" id="7078844">indentErrorTest</span>&nbsp;<span class="keyword" id="7078860">struct</span>&nbsp;<span class="op" id="7078867">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078870">in</span>&nbsp;&nbsp;<span class="builtintype" id="7078874">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7078882">err</span>&nbsp;<span class="builtintype" id="7078886">error</span><br>
<span class="lineno"></span><span class="op" id="7078892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7078895">var</span>&nbsp;<span class="ident" id="7078899">indentErrorTests</span>&nbsp;<span class="op" id="7078916">=</span>&nbsp;<span class="op" id="7078918">[</span><span class="op" id="7078919">]</span><span class="ident" id="7078920">indentErrorTest</span><span class="op" id="7078935">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7078938">{</span><span class="string" id="7078939">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="7078958">,</span>&nbsp;<span class="op" id="7078960">&amp;</span><span class="ident" id="7078961">SyntaxError</span><span class="op" id="7078972">{</span><span class="string" id="7078973">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="7079013">,</span>&nbsp;<span class="num" id="7079015">17</span><span class="op" id="7079017">}</span><span class="op" id="7079018">}</span><span class="op" id="7079019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079022">{</span><span class="string" id="7079023">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="7079048">,</span>&nbsp;<span class="op" id="7079050">&amp;</span><span class="ident" id="7079051">SyntaxError</span><span class="op" id="7079062">{</span><span class="string" id="7079063">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="7079115">,</span>&nbsp;<span class="num" id="7079117">13</span><span class="op" id="7079119">}</span><span class="op" id="7079120">}</span><span class="op" id="7079121">,</span><br>
<span class="lineno"></span><span class="op" id="7079123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7079126">func</span>&nbsp;<span class="ident" id="7079131">TestIndentErrors</span><span class="op" id="7079147">(</span><span class="ident" id="7079148">t</span>&nbsp;<span class="op" id="7079150">*</span><span class="ident" id="7079151">testing</span><span class="op" id="7079158">.</span><span class="ident" id="7079159">T</span><span class="op" id="7079160">)</span>&nbsp;<span class="op" id="7079162">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079165">for</span>&nbsp;<span class="ident" id="7079169">i</span><span class="op" id="7079170">,</span>&nbsp;<span class="ident" id="7079172">tt</span>&nbsp;<span class="op" id="7079175">:=</span>&nbsp;<span class="keyword" id="7079178">range</span>&nbsp;<span class="ident" id="7079184">indentErrorTests</span>&nbsp;<span class="op" id="7079201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079205">slice</span>&nbsp;<span class="op" id="7079211">:=</span>&nbsp;<span class="builtinfunc" id="7079214">make</span><span class="op" id="7079218">(</span><span class="op" id="7079219">[</span><span class="op" id="7079220">]</span><span class="builtintype" id="7079221">uint8</span><span class="op" id="7079226">,</span>&nbsp;<span class="num" id="7079228">0</span><span class="op" id="7079229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079233">buf</span>&nbsp;<span class="op" id="7079237">:=</span>&nbsp;<span class="ident" id="7079240">bytes</span><span class="op" id="7079245">.</span><span class="ident" id="7079246">NewBuffer</span><span class="op" id="7079255">(</span><span class="ident" id="7079256">slice</span><span class="op" id="7079261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079265">if</span>&nbsp;<span class="ident" id="7079268">err</span>&nbsp;<span class="op" id="7079272">:=</span>&nbsp;<span class="ident" id="7079275">Indent</span><span class="op" id="7079281">(</span><span class="ident" id="7079282">buf</span><span class="op" id="7079285">,</span>&nbsp;<span class="op" id="7079287">[</span><span class="op" id="7079288">]</span><span class="builtintype" id="7079289">uint8</span><span class="op" id="7079294">(</span><span class="ident" id="7079295">tt</span><span class="op" id="7079297">.</span><span class="ident" id="7079298">in</span><span class="op" id="7079300">)</span><span class="op" id="7079301">,</span>&nbsp;<span class="string" id="7079303">&#34;&#34;</span><span class="op" id="7079305">,</span>&nbsp;<span class="string" id="7079307">&#34;&#34;</span><span class="op" id="7079309">)</span><span class="op" id="7079310">;</span>&nbsp;<span class="ident" id="7079312">err</span>&nbsp;<span class="op" id="7079316">!=</span>&nbsp;<span class="builtintype" id="7079319">nil</span>&nbsp;<span class="op" id="7079323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079328">if</span>&nbsp;<span class="op" id="7079331">!</span><span class="ident" id="7079332">reflect</span><span class="op" id="7079339">.</span><span class="ident" id="7079340">DeepEqual</span><span class="op" id="7079349">(</span><span class="ident" id="7079350">err</span><span class="op" id="7079353">,</span>&nbsp;<span class="ident" id="7079355">tt</span><span class="op" id="7079357">.</span><span class="ident" id="7079358">err</span><span class="op" id="7079361">)</span>&nbsp;<span class="op" id="7079363">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079369">t</span><span class="op" id="7079370">.</span><span class="ident" id="7079371">Errorf</span><span class="op" id="7079377">(</span><span class="string" id="7079378">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="7079396">,</span>&nbsp;<span class="ident" id="7079398">i</span><span class="op" id="7079399">,</span>&nbsp;<span class="ident" id="7079401">err</span><span class="op" id="7079404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079429">}</span><br>
<span class="lineno">180</span><span class="op" id="7079431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7079434">func</span>&nbsp;<span class="ident" id="7079439">TestNextValueBig</span><span class="op" id="7079455">(</span><span class="ident" id="7079456">t</span>&nbsp;<span class="op" id="7079458">*</span><span class="ident" id="7079459">testing</span><span class="op" id="7079466">.</span><span class="ident" id="7079467">T</span><span class="op" id="7079468">)</span>&nbsp;<span class="op" id="7079470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079473">initBig</span><span class="op" id="7079480">(</span><span class="op" id="7079481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079484">var</span>&nbsp;<span class="ident" id="7079488">scan</span>&nbsp;<span class="ident" id="7079493">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079502">item</span><span class="op" id="7079506">,</span>&nbsp;<span class="ident" id="7079508">rest</span><span class="op" id="7079512">,</span>&nbsp;<span class="ident" id="7079514">err</span>&nbsp;<span class="op" id="7079518">:=</span>&nbsp;<span class="ident" id="7079521">nextValue</span><span class="op" id="7079530">(</span><span class="ident" id="7079531">jsonBig</span><span class="op" id="7079538">,</span>&nbsp;<span class="op" id="7079540">&amp;</span><span class="ident" id="7079541">scan</span><span class="op" id="7079545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079548">if</span>&nbsp;<span class="ident" id="7079551">err</span>&nbsp;<span class="op" id="7079555">!=</span>&nbsp;<span class="builtintype" id="7079558">nil</span>&nbsp;<span class="op" id="7079562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079566">t</span><span class="op" id="7079567">.</span><span class="ident" id="7079568">Fatalf</span><span class="op" id="7079574">(</span><span class="string" id="7079575">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="7079590">,</span>&nbsp;<span class="ident" id="7079592">err</span><span class="op" id="7079595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079601">if</span>&nbsp;<span class="builtinfunc" id="7079604">len</span><span class="op" id="7079607">(</span><span class="ident" id="7079608">item</span><span class="op" id="7079612">)</span>&nbsp;<span class="op" id="7079614">!=</span>&nbsp;<span class="builtinfunc" id="7079617">len</span><span class="op" id="7079620">(</span><span class="ident" id="7079621">jsonBig</span><span class="op" id="7079628">)</span>&nbsp;<span class="op" id="7079630">||</span>&nbsp;<span class="op" id="7079633">&amp;</span><span class="ident" id="7079634">item</span><span class="op" id="7079638">[</span><span class="num" id="7079639">0</span><span class="op" id="7079640">]</span>&nbsp;<span class="op" id="7079642">!=</span>&nbsp;<span class="op" id="7079645">&amp;</span><span class="ident" id="7079646">jsonBig</span><span class="op" id="7079653">[</span><span class="num" id="7079654">0</span><span class="op" id="7079655">]</span>&nbsp;<span class="op" id="7079657">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079661">t</span><span class="op" id="7079662">.</span><span class="ident" id="7079663">Errorf</span><span class="op" id="7079669">(</span><span class="string" id="7079670">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="7079691">,</span>&nbsp;<span class="builtinfunc" id="7079693">len</span><span class="op" id="7079696">(</span><span class="ident" id="7079697">item</span><span class="op" id="7079701">)</span><span class="op" id="7079702">,</span>&nbsp;<span class="builtinfunc" id="7079704">len</span><span class="op" id="7079707">(</span><span class="ident" id="7079708">jsonBig</span><span class="op" id="7079715">)</span><span class="op" id="7079716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079722">if</span>&nbsp;<span class="builtinfunc" id="7079725">len</span><span class="op" id="7079728">(</span><span class="ident" id="7079729">rest</span><span class="op" id="7079733">)</span>&nbsp;<span class="op" id="7079735">!=</span>&nbsp;<span class="num" id="7079738">0</span>&nbsp;<span class="op" id="7079740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079744">t</span><span class="op" id="7079745">.</span><span class="ident" id="7079746">Errorf</span><span class="op" id="7079752">(</span><span class="string" id="7079753">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="7079771">,</span>&nbsp;<span class="builtinfunc" id="7079773">len</span><span class="op" id="7079776">(</span><span class="ident" id="7079777">rest</span><span class="op" id="7079781">)</span><span class="op" id="7079782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079785">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079789">item</span><span class="op" id="7079793">,</span>&nbsp;<span class="ident" id="7079795">rest</span><span class="op" id="7079799">,</span>&nbsp;<span class="ident" id="7079801">err</span>&nbsp;<span class="op" id="7079805">=</span>&nbsp;<span class="ident" id="7079807">nextValue</span><span class="op" id="7079816">(</span><span class="builtinfunc" id="7079817">append</span><span class="op" id="7079823">(</span><span class="ident" id="7079824">jsonBig</span><span class="op" id="7079831">,</span>&nbsp;<span class="string" id="7079833">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="7079846">...</span><span class="op" id="7079849">)</span><span class="op" id="7079850">,</span>&nbsp;<span class="op" id="7079852">&amp;</span><span class="ident" id="7079853">scan</span><span class="op" id="7079857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079860">if</span>&nbsp;<span class="ident" id="7079863">err</span>&nbsp;<span class="op" id="7079867">!=</span>&nbsp;<span class="builtintype" id="7079870">nil</span>&nbsp;<span class="op" id="7079874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079878">t</span><span class="op" id="7079879">.</span><span class="ident" id="7079880">Fatalf</span><span class="op" id="7079886">(</span><span class="string" id="7079887">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="7079908">,</span>&nbsp;<span class="ident" id="7079910">err</span><span class="op" id="7079913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7079916">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7079919">if</span>&nbsp;<span class="builtinfunc" id="7079922">len</span><span class="op" id="7079925">(</span><span class="ident" id="7079926">item</span><span class="op" id="7079930">)</span>&nbsp;<span class="op" id="7079932">!=</span>&nbsp;<span class="builtinfunc" id="7079935">len</span><span class="op" id="7079938">(</span><span class="ident" id="7079939">jsonBig</span><span class="op" id="7079946">)</span>&nbsp;<span class="op" id="7079948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7079952">t</span><span class="op" id="7079953">.</span><span class="ident" id="7079954">Errorf</span><span class="op" id="7079960">(</span><span class="string" id="7079961">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="7079982">,</span>&nbsp;<span class="builtinfunc" id="7079984">len</span><span class="op" id="7079987">(</span><span class="ident" id="7079988">item</span><span class="op" id="7079992">)</span><span class="op" id="7079993">,</span>&nbsp;<span class="builtinfunc" id="7079995">len</span><span class="op" id="7079998">(</span><span class="ident" id="7079999">jsonBig</span><span class="op" id="7080006">)</span><span class="op" id="7080007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080013">if</span>&nbsp;<span class="builtintype" id="7080016">string</span><span class="op" id="7080022">(</span><span class="ident" id="7080023">rest</span><span class="op" id="7080027">)</span>&nbsp;<span class="op" id="7080029">!=</span>&nbsp;<span class="string" id="7080032">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="7080046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080050">t</span><span class="op" id="7080051">.</span><span class="ident" id="7080052">Errorf</span><span class="op" id="7080058">(</span><span class="string" id="7080059">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="7080077">,</span>&nbsp;<span class="builtinfunc" id="7080079">len</span><span class="op" id="7080082">(</span><span class="ident" id="7080083">rest</span><span class="op" id="7080087">)</span><span class="op" id="7080088">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080091">}</span><br>
<span class="lineno"></span><span class="op" id="7080093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080096">var</span>&nbsp;<span class="ident" id="7080100">benchScan</span>&nbsp;<span class="ident" id="7080110">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="7080119">func</span>&nbsp;<span class="ident" id="7080124">BenchmarkSkipValue</span><span class="op" id="7080142">(</span><span class="ident" id="7080143">b</span>&nbsp;<span class="op" id="7080145">*</span><span class="ident" id="7080146">testing</span><span class="op" id="7080153">.</span><span class="ident" id="7080154">B</span><span class="op" id="7080155">)</span>&nbsp;<span class="op" id="7080157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080160">initBig</span><span class="op" id="7080167">(</span><span class="op" id="7080168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080171">for</span>&nbsp;<span class="ident" id="7080175">i</span>&nbsp;<span class="op" id="7080177">:=</span>&nbsp;<span class="num" id="7080180">0</span><span class="op" id="7080181">;</span>&nbsp;<span class="ident" id="7080183">i</span>&nbsp;<span class="op" id="7080185">&lt;</span>&nbsp;<span class="ident" id="7080187">b</span><span class="op" id="7080188">.</span><span class="ident" id="7080189">N</span><span class="op" id="7080190">;</span>&nbsp;<span class="ident" id="7080192">i</span><span class="op" id="7080193">++</span>&nbsp;<span class="op" id="7080196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080200">nextValue</span><span class="op" id="7080209">(</span><span class="ident" id="7080210">jsonBig</span><span class="op" id="7080217">,</span>&nbsp;<span class="op" id="7080219">&amp;</span><span class="ident" id="7080220">benchScan</span><span class="op" id="7080229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080232">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080235">b</span><span class="op" id="7080236">.</span><span class="ident" id="7080237">SetBytes</span><span class="op" id="7080245">(</span><span class="builtintype" id="7080246">int64</span><span class="op" id="7080251">(</span><span class="builtinfunc" id="7080252">len</span><span class="op" id="7080255">(</span><span class="ident" id="7080256">jsonBig</span><span class="op" id="7080263">)</span><span class="op" id="7080264">)</span><span class="op" id="7080265">)</span><br>
<span class="lineno"></span><span class="op" id="7080267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080270">func</span>&nbsp;<span class="ident" id="7080275">diff</span><span class="op" id="7080279">(</span><span class="ident" id="7080280">t</span>&nbsp;<span class="op" id="7080282">*</span><span class="ident" id="7080283">testing</span><span class="op" id="7080290">.</span><span class="ident" id="7080291">T</span><span class="op" id="7080292">,</span>&nbsp;<span class="ident" id="7080294">a</span><span class="op" id="7080295">,</span>&nbsp;<span class="ident" id="7080297">b</span>&nbsp;<span class="op" id="7080299">[</span><span class="op" id="7080300">]</span><span class="builtintype" id="7080301">byte</span><span class="op" id="7080305">)</span>&nbsp;<span class="op" id="7080307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080310">for</span>&nbsp;<span class="ident" id="7080314">i</span>&nbsp;<span class="op" id="7080316">:=</span>&nbsp;<span class="num" id="7080319">0</span><span class="op" id="7080320">;</span>&nbsp;<span class="op" id="7080322">;</span>&nbsp;<span class="ident" id="7080324">i</span><span class="op" id="7080325">++</span>&nbsp;<span class="op" id="7080328">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080332">if</span>&nbsp;<span class="ident" id="7080335">i</span>&nbsp;<span class="op" id="7080337">&gt;=</span>&nbsp;<span class="builtinfunc" id="7080340">len</span><span class="op" id="7080343">(</span><span class="ident" id="7080344">a</span><span class="op" id="7080345">)</span>&nbsp;<span class="op" id="7080347">||</span>&nbsp;<span class="ident" id="7080350">i</span>&nbsp;<span class="op" id="7080352">&gt;=</span>&nbsp;<span class="builtinfunc" id="7080355">len</span><span class="op" id="7080358">(</span><span class="ident" id="7080359">b</span><span class="op" id="7080360">)</span>&nbsp;<span class="op" id="7080362">||</span>&nbsp;<span class="ident" id="7080365">a</span><span class="op" id="7080366">[</span><span class="ident" id="7080367">i</span><span class="op" id="7080368">]</span>&nbsp;<span class="op" id="7080370">!=</span>&nbsp;<span class="ident" id="7080373">b</span><span class="op" id="7080374">[</span><span class="ident" id="7080375">i</span><span class="op" id="7080376">]</span>&nbsp;<span class="op" id="7080378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080383">j</span>&nbsp;<span class="op" id="7080385">:=</span>&nbsp;<span class="ident" id="7080388">i</span>&nbsp;<span class="op" id="7080390">-</span>&nbsp;<span class="num" id="7080392">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080398">if</span>&nbsp;<span class="ident" id="7080401">j</span>&nbsp;<span class="op" id="7080403">&lt;</span>&nbsp;<span class="num" id="7080405">0</span>&nbsp;<span class="op" id="7080407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080413">j</span>&nbsp;<span class="op" id="7080415">=</span>&nbsp;<span class="num" id="7080417">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080422">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080427">t</span><span class="op" id="7080428">.</span><span class="ident" id="7080429">Errorf</span><span class="op" id="7080435">(</span><span class="string" id="7080436">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;%s&nbsp;vs&nbsp;%s&#34;</span><span class="op" id="7080469">,</span>&nbsp;<span class="ident" id="7080471">i</span><span class="op" id="7080472">,</span>&nbsp;<span class="ident" id="7080474">trim</span><span class="op" id="7080478">(</span><span class="ident" id="7080479">a</span><span class="op" id="7080480">[</span><span class="ident" id="7080481">j</span><span class="op" id="7080482">:</span><span class="op" id="7080483">]</span><span class="op" id="7080484">)</span><span class="op" id="7080485">,</span>&nbsp;<span class="ident" id="7080487">trim</span><span class="op" id="7080491">(</span><span class="ident" id="7080492">b</span><span class="op" id="7080493">[</span><span class="ident" id="7080494">j</span><span class="op" id="7080495">:</span><span class="op" id="7080496">]</span><span class="op" id="7080497">)</span><span class="op" id="7080498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080503">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080515">}</span><br>
<span class="lineno"></span><span class="op" id="7080517">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7080520">func</span>&nbsp;<span class="ident" id="7080525">trim</span><span class="op" id="7080529">(</span><span class="ident" id="7080530">b</span>&nbsp;<span class="op" id="7080532">[</span><span class="op" id="7080533">]</span><span class="builtintype" id="7080534">byte</span><span class="op" id="7080538">)</span>&nbsp;<span class="op" id="7080540">[</span><span class="op" id="7080541">]</span><span class="builtintype" id="7080542">byte</span>&nbsp;<span class="op" id="7080547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080550">if</span>&nbsp;<span class="builtinfunc" id="7080553">len</span><span class="op" id="7080556">(</span><span class="ident" id="7080557">b</span><span class="op" id="7080558">)</span>&nbsp;<span class="op" id="7080560">&gt;</span>&nbsp;<span class="num" id="7080562">20</span>&nbsp;<span class="op" id="7080565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080569">return</span>&nbsp;<span class="ident" id="7080576">b</span><span class="op" id="7080577">[</span><span class="num" id="7080578">0</span><span class="op" id="7080579">:</span><span class="num" id="7080580">20</span><span class="op" id="7080582">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080585">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080588">return</span>&nbsp;<span class="ident" id="7080595">b</span><br>
<span class="lineno"></span><span class="op" id="7080597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7080600">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7080635">var</span>&nbsp;<span class="ident" id="7080639">jsonBig</span>&nbsp;<span class="op" id="7080647">[</span><span class="op" id="7080648">]</span><span class="builtintype" id="7080649">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080655">func</span>&nbsp;<span class="ident" id="7080660">initBig</span><span class="op" id="7080667">(</span><span class="op" id="7080668">)</span>&nbsp;<span class="op" id="7080670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080673">n</span>&nbsp;<span class="op" id="7080675">:=</span>&nbsp;<span class="num" id="7080678">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080685">if</span>&nbsp;<span class="ident" id="7080688">testing</span><span class="op" id="7080695">.</span><span class="ident" id="7080696">Short</span><span class="op" id="7080701">(</span><span class="op" id="7080702">)</span>&nbsp;<span class="op" id="7080704">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080708">n</span>&nbsp;<span class="op" id="7080710">=</span>&nbsp;<span class="num" id="7080712">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080720">b</span><span class="op" id="7080721">,</span>&nbsp;<span class="ident" id="7080723">err</span>&nbsp;<span class="op" id="7080727">:=</span>&nbsp;<span class="ident" id="7080730">Marshal</span><span class="op" id="7080737">(</span><span class="ident" id="7080738">genValue</span><span class="op" id="7080746">(</span><span class="ident" id="7080747">n</span><span class="op" id="7080748">)</span><span class="op" id="7080749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080752">if</span>&nbsp;<span class="ident" id="7080755">err</span>&nbsp;<span class="op" id="7080759">!=</span>&nbsp;<span class="builtintype" id="7080762">nil</span>&nbsp;<span class="op" id="7080766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7080770">panic</span><span class="op" id="7080775">(</span><span class="ident" id="7080776">err</span><span class="op" id="7080779">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7080785">jsonBig</span>&nbsp;<span class="op" id="7080793">=</span>&nbsp;<span class="ident" id="7080795">b</span><br>
<span class="lineno"></span><span class="op" id="7080797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7080800">func</span>&nbsp;<span class="ident" id="7080805">genValue</span><span class="op" id="7080813">(</span><span class="ident" id="7080814">n</span>&nbsp;<span class="builtintype" id="7080816">int</span><span class="op" id="7080819">)</span>&nbsp;<span class="keyword" id="7080821">interface</span><span class="op" id="7080830">{</span><span class="op" id="7080831">}</span>&nbsp;<span class="op" id="7080833">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080836">if</span>&nbsp;<span class="ident" id="7080839">n</span>&nbsp;<span class="op" id="7080841">&gt;</span>&nbsp;<span class="num" id="7080843">1</span>&nbsp;<span class="op" id="7080845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080849">switch</span>&nbsp;<span class="ident" id="7080856">rand</span><span class="op" id="7080860">.</span><span class="ident" id="7080861">Intn</span><span class="op" id="7080865">(</span><span class="num" id="7080866">2</span><span class="op" id="7080867">)</span>&nbsp;<span class="op" id="7080869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080873">case</span>&nbsp;<span class="num" id="7080878">0</span><span class="op" id="7080879">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080884">return</span>&nbsp;<span class="ident" id="7080891">genArray</span><span class="op" id="7080899">(</span><span class="ident" id="7080900">n</span><span class="op" id="7080901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080905">case</span>&nbsp;<span class="num" id="7080910">1</span><span class="op" id="7080911">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080916">return</span>&nbsp;<span class="ident" id="7080923">genMap</span><span class="op" id="7080929">(</span><span class="ident" id="7080930">n</span><span class="op" id="7080931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7080938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080941">switch</span>&nbsp;<span class="ident" id="7080948">rand</span><span class="op" id="7080952">.</span><span class="ident" id="7080953">Intn</span><span class="op" id="7080957">(</span><span class="num" id="7080958">3</span><span class="op" id="7080959">)</span>&nbsp;<span class="op" id="7080961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080964">case</span>&nbsp;<span class="num" id="7080969">0</span><span class="op" id="7080970">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7080974">return</span>&nbsp;<span class="ident" id="7080981">rand</span><span class="op" id="7080985">.</span><span class="ident" id="7080986">Intn</span><span class="op" id="7080990">(</span><span class="num" id="7080991">2</span><span class="op" id="7080992">)</span>&nbsp;<span class="op" id="7080994">==</span>&nbsp;<span class="num" id="7080997">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081000">case</span>&nbsp;<span class="num" id="7081005">1</span><span class="op" id="7081006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081010">return</span>&nbsp;<span class="ident" id="7081017">rand</span><span class="op" id="7081021">.</span><span class="ident" id="7081022">NormFloat64</span><span class="op" id="7081033">(</span><span class="op" id="7081034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081037">case</span>&nbsp;<span class="num" id="7081042">2</span><span class="op" id="7081043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081047">return</span>&nbsp;<span class="ident" id="7081054">genString</span><span class="op" id="7081063">(</span><span class="num" id="7081064">30</span><span class="op" id="7081066">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7081072">panic</span><span class="op" id="7081077">(</span><span class="string" id="7081078">&#34;unreachable&#34;</span><span class="op" id="7081091">)</span><br>
<span class="lineno"></span><span class="op" id="7081093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7081096">func</span>&nbsp;<span class="ident" id="7081101">genString</span><span class="op" id="7081110">(</span><span class="ident" id="7081111">stddev</span>&nbsp;<span class="builtintype" id="7081118">float64</span><span class="op" id="7081125">)</span>&nbsp;<span class="builtintype" id="7081127">string</span>&nbsp;<span class="op" id="7081134">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081137">n</span>&nbsp;<span class="op" id="7081139">:=</span>&nbsp;<span class="builtintype" id="7081142">int</span><span class="op" id="7081145">(</span><span class="ident" id="7081146">math</span><span class="op" id="7081150">.</span><span class="ident" id="7081151">Abs</span><span class="op" id="7081154">(</span><span class="ident" id="7081155">rand</span><span class="op" id="7081159">.</span><span class="ident" id="7081160">NormFloat64</span><span class="op" id="7081171">(</span><span class="op" id="7081172">)</span><span class="op" id="7081173">*</span><span class="ident" id="7081174">stddev</span>&nbsp;<span class="op" id="7081181">+</span>&nbsp;<span class="ident" id="7081183">stddev</span><span class="op" id="7081189">/</span><span class="num" id="7081190">2</span><span class="op" id="7081191">)</span><span class="op" id="7081192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081195">c</span>&nbsp;<span class="op" id="7081197">:=</span>&nbsp;<span class="builtinfunc" id="7081200">make</span><span class="op" id="7081204">(</span><span class="op" id="7081205">[</span><span class="op" id="7081206">]</span><span class="builtintype" id="7081207">rune</span><span class="op" id="7081211">,</span>&nbsp;<span class="ident" id="7081213">n</span><span class="op" id="7081214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081217">for</span>&nbsp;<span class="ident" id="7081221">i</span>&nbsp;<span class="op" id="7081223">:=</span>&nbsp;<span class="keyword" id="7081226">range</span>&nbsp;<span class="ident" id="7081232">c</span>&nbsp;<span class="op" id="7081234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081238">f</span>&nbsp;<span class="op" id="7081240">:=</span>&nbsp;<span class="ident" id="7081243">math</span><span class="op" id="7081247">.</span><span class="ident" id="7081248">Abs</span><span class="op" id="7081251">(</span><span class="ident" id="7081252">rand</span><span class="op" id="7081256">.</span><span class="ident" id="7081257">NormFloat64</span><span class="op" id="7081268">(</span><span class="op" id="7081269">)</span><span class="op" id="7081270">*</span><span class="num" id="7081271">64</span>&nbsp;<span class="op" id="7081274">+</span>&nbsp;<span class="num" id="7081276">32</span><span class="op" id="7081278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081282">if</span>&nbsp;<span class="ident" id="7081285">f</span>&nbsp;<span class="op" id="7081287">&gt;</span>&nbsp;<span class="num" id="7081289">0x10ffff</span>&nbsp;<span class="op" id="7081298">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081303">f</span>&nbsp;<span class="op" id="7081305">=</span>&nbsp;<span class="num" id="7081307">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081322">c</span><span class="op" id="7081323">[</span><span class="ident" id="7081324">i</span><span class="op" id="7081325">]</span>&nbsp;<span class="op" id="7081327">=</span>&nbsp;<span class="builtintype" id="7081329">rune</span><span class="op" id="7081333">(</span><span class="ident" id="7081334">f</span><span class="op" id="7081335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081341">return</span>&nbsp;<span class="builtintype" id="7081348">string</span><span class="op" id="7081354">(</span><span class="ident" id="7081355">c</span><span class="op" id="7081356">)</span><br>
<span class="lineno">285</span><span class="op" id="7081358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7081361">func</span>&nbsp;<span class="ident" id="7081366">genArray</span><span class="op" id="7081374">(</span><span class="ident" id="7081375">n</span>&nbsp;<span class="builtintype" id="7081377">int</span><span class="op" id="7081380">)</span>&nbsp;<span class="op" id="7081382">[</span><span class="op" id="7081383">]</span><span class="keyword" id="7081384">interface</span><span class="op" id="7081393">{</span><span class="op" id="7081394">}</span>&nbsp;<span class="op" id="7081396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081399">f</span>&nbsp;<span class="op" id="7081401">:=</span>&nbsp;<span class="builtintype" id="7081404">int</span><span class="op" id="7081407">(</span><span class="ident" id="7081408">math</span><span class="op" id="7081412">.</span><span class="ident" id="7081413">Abs</span><span class="op" id="7081416">(</span><span class="ident" id="7081417">rand</span><span class="op" id="7081421">.</span><span class="ident" id="7081422">NormFloat64</span><span class="op" id="7081433">(</span><span class="op" id="7081434">)</span><span class="op" id="7081435">)</span>&nbsp;<span class="op" id="7081437">*</span>&nbsp;<span class="ident" id="7081439">math</span><span class="op" id="7081443">.</span><span class="ident" id="7081444">Min</span><span class="op" id="7081447">(</span><span class="num" id="7081448">10</span><span class="op" id="7081450">,</span>&nbsp;<span class="builtintype" id="7081452">float64</span><span class="op" id="7081459">(</span><span class="ident" id="7081460">n</span><span class="op" id="7081461">/</span><span class="num" id="7081462">2</span><span class="op" id="7081463">)</span><span class="op" id="7081464">)</span><span class="op" id="7081465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081468">if</span>&nbsp;<span class="ident" id="7081471">f</span>&nbsp;<span class="op" id="7081473">&gt;</span>&nbsp;<span class="ident" id="7081475">n</span>&nbsp;<span class="op" id="7081477">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081481">f</span>&nbsp;<span class="op" id="7081483">=</span>&nbsp;<span class="ident" id="7081485">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081491">if</span>&nbsp;<span class="ident" id="7081494">f</span>&nbsp;<span class="op" id="7081496">&lt;</span>&nbsp;<span class="num" id="7081498">1</span>&nbsp;<span class="op" id="7081500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081504">f</span>&nbsp;<span class="op" id="7081506">=</span>&nbsp;<span class="num" id="7081508">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081511">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081514">x</span>&nbsp;<span class="op" id="7081516">:=</span>&nbsp;<span class="builtinfunc" id="7081519">make</span><span class="op" id="7081523">(</span><span class="op" id="7081524">[</span><span class="op" id="7081525">]</span><span class="keyword" id="7081526">interface</span><span class="op" id="7081535">{</span><span class="op" id="7081536">}</span><span class="op" id="7081537">,</span>&nbsp;<span class="ident" id="7081539">f</span><span class="op" id="7081540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081543">for</span>&nbsp;<span class="ident" id="7081547">i</span>&nbsp;<span class="op" id="7081549">:=</span>&nbsp;<span class="keyword" id="7081552">range</span>&nbsp;<span class="ident" id="7081558">x</span>&nbsp;<span class="op" id="7081560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081564">x</span><span class="op" id="7081565">[</span><span class="ident" id="7081566">i</span><span class="op" id="7081567">]</span>&nbsp;<span class="op" id="7081569">=</span>&nbsp;<span class="ident" id="7081571">genValue</span><span class="op" id="7081579">(</span><span class="op" id="7081580">(</span><span class="op" id="7081581">(</span><span class="ident" id="7081582">i</span><span class="op" id="7081583">+</span><span class="num" id="7081584">1</span><span class="op" id="7081585">)</span><span class="op" id="7081586">*</span><span class="ident" id="7081587">n</span><span class="op" id="7081588">)</span><span class="op" id="7081589">/</span><span class="ident" id="7081590">f</span>&nbsp;<span class="op" id="7081592">-</span>&nbsp;<span class="op" id="7081594">(</span><span class="ident" id="7081595">i</span><span class="op" id="7081596">*</span><span class="ident" id="7081597">n</span><span class="op" id="7081598">)</span><span class="op" id="7081599">/</span><span class="ident" id="7081600">f</span><span class="op" id="7081601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081607">return</span>&nbsp;<span class="ident" id="7081614">x</span><br>
<span class="lineno">300</span><span class="op" id="7081616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7081619">func</span>&nbsp;<span class="ident" id="7081624">genMap</span><span class="op" id="7081630">(</span><span class="ident" id="7081631">n</span>&nbsp;<span class="builtintype" id="7081633">int</span><span class="op" id="7081636">)</span>&nbsp;<span class="keyword" id="7081638">map</span><span class="op" id="7081641">[</span><span class="builtintype" id="7081642">string</span><span class="op" id="7081648">]</span><span class="keyword" id="7081649">interface</span><span class="op" id="7081658">{</span><span class="op" id="7081659">}</span>&nbsp;<span class="op" id="7081661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081664">f</span>&nbsp;<span class="op" id="7081666">:=</span>&nbsp;<span class="builtintype" id="7081669">int</span><span class="op" id="7081672">(</span><span class="ident" id="7081673">math</span><span class="op" id="7081677">.</span><span class="ident" id="7081678">Abs</span><span class="op" id="7081681">(</span><span class="ident" id="7081682">rand</span><span class="op" id="7081686">.</span><span class="ident" id="7081687">NormFloat64</span><span class="op" id="7081698">(</span><span class="op" id="7081699">)</span><span class="op" id="7081700">)</span>&nbsp;<span class="op" id="7081702">*</span>&nbsp;<span class="ident" id="7081704">math</span><span class="op" id="7081708">.</span><span class="ident" id="7081709">Min</span><span class="op" id="7081712">(</span><span class="num" id="7081713">10</span><span class="op" id="7081715">,</span>&nbsp;<span class="builtintype" id="7081717">float64</span><span class="op" id="7081724">(</span><span class="ident" id="7081725">n</span><span class="op" id="7081726">/</span><span class="num" id="7081727">2</span><span class="op" id="7081728">)</span><span class="op" id="7081729">)</span><span class="op" id="7081730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081733">if</span>&nbsp;<span class="ident" id="7081736">f</span>&nbsp;<span class="op" id="7081738">&gt;</span>&nbsp;<span class="ident" id="7081740">n</span>&nbsp;<span class="op" id="7081742">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081746">f</span>&nbsp;<span class="op" id="7081748">=</span>&nbsp;<span class="ident" id="7081750">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081756">if</span>&nbsp;<span class="ident" id="7081759">n</span>&nbsp;<span class="op" id="7081761">&gt;</span>&nbsp;<span class="num" id="7081763">0</span>&nbsp;<span class="op" id="7081765">&amp;&amp;</span>&nbsp;<span class="ident" id="7081768">f</span>&nbsp;<span class="op" id="7081770">==</span>&nbsp;<span class="num" id="7081773">0</span>&nbsp;<span class="op" id="7081775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081779">f</span>&nbsp;<span class="op" id="7081781">=</span>&nbsp;<span class="num" id="7081783">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081786">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081789">x</span>&nbsp;<span class="op" id="7081791">:=</span>&nbsp;<span class="builtinfunc" id="7081794">make</span><span class="op" id="7081798">(</span><span class="keyword" id="7081799">map</span><span class="op" id="7081802">[</span><span class="builtintype" id="7081803">string</span><span class="op" id="7081809">]</span><span class="keyword" id="7081810">interface</span><span class="op" id="7081819">{</span><span class="op" id="7081820">}</span><span class="op" id="7081821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081824">for</span>&nbsp;<span class="ident" id="7081828">i</span>&nbsp;<span class="op" id="7081830">:=</span>&nbsp;<span class="num" id="7081833">0</span><span class="op" id="7081834">;</span>&nbsp;<span class="ident" id="7081836">i</span>&nbsp;<span class="op" id="7081838">&lt;</span>&nbsp;<span class="ident" id="7081840">f</span><span class="op" id="7081841">;</span>&nbsp;<span class="ident" id="7081843">i</span><span class="op" id="7081844">++</span>&nbsp;<span class="op" id="7081847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7081851">x</span><span class="op" id="7081852">[</span><span class="ident" id="7081853">genString</span><span class="op" id="7081862">(</span><span class="num" id="7081863">10</span><span class="op" id="7081865">)</span><span class="op" id="7081866">]</span>&nbsp;<span class="op" id="7081868">=</span>&nbsp;<span class="ident" id="7081870">genValue</span><span class="op" id="7081878">(</span><span class="op" id="7081879">(</span><span class="op" id="7081880">(</span><span class="ident" id="7081881">i</span><span class="op" id="7081882">+</span><span class="num" id="7081883">1</span><span class="op" id="7081884">)</span><span class="op" id="7081885">*</span><span class="ident" id="7081886">n</span><span class="op" id="7081887">)</span><span class="op" id="7081888">/</span><span class="ident" id="7081889">f</span>&nbsp;<span class="op" id="7081891">-</span>&nbsp;<span class="op" id="7081893">(</span><span class="ident" id="7081894">i</span><span class="op" id="7081895">*</span><span class="ident" id="7081896">n</span><span class="op" id="7081897">)</span><span class="op" id="7081898">/</span><span class="ident" id="7081899">f</span><span class="op" id="7081900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7081903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7081906">return</span>&nbsp;<span class="ident" id="7081913">x</span><br>
<span class="lineno">315</span><span class="op" id="7081915">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
