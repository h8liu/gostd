<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3369382">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3369437">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3369491">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3369542">//&nbsp;Simple&nbsp;file&nbsp;i/o&nbsp;and&nbsp;string&nbsp;manipulation,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno"></span><span class="comment" id="3369595">//&nbsp;depending&nbsp;on&nbsp;strconv&nbsp;and&nbsp;bufio&nbsp;and&nbsp;strings.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3369643">package</span>&nbsp;<span class="ident" id="3369651">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3369656">import</span>&nbsp;<span class="op" id="3369663">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3369666">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3369672">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3369677">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3369680">type</span>&nbsp;<span class="ident" id="3369685">file</span>&nbsp;<span class="keyword" id="3369690">struct</span>&nbsp;<span class="op" id="3369697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369700">file</span>&nbsp;&nbsp;<span class="op" id="3369706">*</span><span class="ident" id="3369707">os</span><span class="op" id="3369709">.</span><span class="ident" id="3369710">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369716">data</span>&nbsp;&nbsp;<span class="op" id="3369722">[</span><span class="op" id="3369723">]</span><span class="builtintype" id="3369724">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369730">atEOF</span>&nbsp;<span class="builtintype" id="3369736">bool</span><br>
<span class="lineno"></span><span class="op" id="3369741">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3369744">func</span>&nbsp;<span class="op" id="3369749">(</span><span class="ident" id="3369750">f</span>&nbsp;<span class="op" id="3369752">*</span><span class="ident" id="3369753">file</span><span class="op" id="3369757">)</span>&nbsp;<span class="builtinfunc" id="3369759">close</span><span class="op" id="3369764">(</span><span class="op" id="3369765">)</span>&nbsp;<span class="op" id="3369767">{</span>&nbsp;<span class="ident" id="3369769">f</span><span class="op" id="3369770">.</span><span class="ident" id="3369771">file</span><span class="op" id="3369775">.</span><span class="ident" id="3369776">Close</span><span class="op" id="3369781">(</span><span class="op" id="3369782">)</span>&nbsp;<span class="op" id="3369784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3369787">func</span>&nbsp;<span class="op" id="3369792">(</span><span class="ident" id="3369793">f</span>&nbsp;<span class="op" id="3369795">*</span><span class="ident" id="3369796">file</span><span class="op" id="3369800">)</span>&nbsp;<span class="ident" id="3369802">getLineFromData</span><span class="op" id="3369817">(</span><span class="op" id="3369818">)</span>&nbsp;<span class="op" id="3369820">(</span><span class="ident" id="3369821">s</span>&nbsp;<span class="builtintype" id="3369823">string</span><span class="op" id="3369829">,</span>&nbsp;<span class="ident" id="3369831">ok</span>&nbsp;<span class="builtintype" id="3369834">bool</span><span class="op" id="3369838">)</span>&nbsp;<span class="op" id="3369840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369843">data</span>&nbsp;<span class="op" id="3369848">:=</span>&nbsp;<span class="ident" id="3369851">f</span><span class="op" id="3369852">.</span><span class="ident" id="3369853">data</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369859">i</span>&nbsp;<span class="op" id="3369861">:=</span>&nbsp;<span class="num" id="3369864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3369867">for</span>&nbsp;<span class="ident" id="3369871">i</span>&nbsp;<span class="op" id="3369873">=</span>&nbsp;<span class="num" id="3369875">0</span><span class="op" id="3369876">;</span>&nbsp;<span class="ident" id="3369878">i</span>&nbsp;<span class="op" id="3369880">&lt;</span>&nbsp;<span class="builtinfunc" id="3369882">len</span><span class="op" id="3369885">(</span><span class="ident" id="3369886">data</span><span class="op" id="3369890">)</span><span class="op" id="3369891">;</span>&nbsp;<span class="ident" id="3369893">i</span><span class="op" id="3369894">++</span>&nbsp;<span class="op" id="3369897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3369901">if</span>&nbsp;<span class="ident" id="3369904">data</span><span class="op" id="3369908">[</span><span class="ident" id="3369909">i</span><span class="op" id="3369910">]</span>&nbsp;<span class="op" id="3369912">==</span>&nbsp;<span class="string" id="3369915">&#39;\n&#39;</span>&nbsp;<span class="op" id="3369920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369925">s</span>&nbsp;<span class="op" id="3369927">=</span>&nbsp;<span class="builtintype" id="3369929">string</span><span class="op" id="3369935">(</span><span class="ident" id="3369936">data</span><span class="op" id="3369940">[</span><span class="num" id="3369941">0</span><span class="op" id="3369942">:</span><span class="ident" id="3369943">i</span><span class="op" id="3369944">]</span><span class="op" id="3369945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369950">ok</span>&nbsp;<span class="op" id="3369953">=</span>&nbsp;<span class="builtintype" id="3369955">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3369963">//&nbsp;move&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369979">i</span><span class="op" id="3369980">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369986">n</span>&nbsp;<span class="op" id="3369988">:=</span>&nbsp;<span class="builtinfunc" id="3369991">len</span><span class="op" id="3369994">(</span><span class="ident" id="3369995">data</span><span class="op" id="3369999">)</span>&nbsp;<span class="op" id="3370001">-</span>&nbsp;<span class="ident" id="3370003">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3370008">copy</span><span class="op" id="3370012">(</span><span class="ident" id="3370013">data</span><span class="op" id="3370017">[</span><span class="num" id="3370018">0</span><span class="op" id="3370019">:</span><span class="op" id="3370020">]</span><span class="op" id="3370021">,</span>&nbsp;<span class="ident" id="3370023">data</span><span class="op" id="3370027">[</span><span class="ident" id="3370028">i</span><span class="op" id="3370029">:</span><span class="op" id="3370030">]</span><span class="op" id="3370031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370036">f</span><span class="op" id="3370037">.</span><span class="ident" id="3370038">data</span>&nbsp;<span class="op" id="3370043">=</span>&nbsp;<span class="ident" id="3370045">data</span><span class="op" id="3370049">[</span><span class="num" id="3370050">0</span><span class="op" id="3370051">:</span><span class="ident" id="3370052">n</span><span class="op" id="3370053">]</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370058">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370073">if</span>&nbsp;<span class="ident" id="3370076">f</span><span class="op" id="3370077">.</span><span class="ident" id="3370078">atEOF</span>&nbsp;<span class="op" id="3370084">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3370087">len</span><span class="op" id="3370090">(</span><span class="ident" id="3370091">f</span><span class="op" id="3370092">.</span><span class="ident" id="3370093">data</span><span class="op" id="3370097">)</span>&nbsp;<span class="op" id="3370099">&gt;</span>&nbsp;<span class="num" id="3370101">0</span>&nbsp;<span class="op" id="3370103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3370107">//&nbsp;EOF,&nbsp;return&nbsp;all&nbsp;we&nbsp;have</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370136">s</span>&nbsp;<span class="op" id="3370138">=</span>&nbsp;<span class="builtintype" id="3370140">string</span><span class="op" id="3370146">(</span><span class="ident" id="3370147">data</span><span class="op" id="3370151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370155">f</span><span class="op" id="3370156">.</span><span class="ident" id="3370157">data</span>&nbsp;<span class="op" id="3370162">=</span>&nbsp;<span class="ident" id="3370164">f</span><span class="op" id="3370165">.</span><span class="ident" id="3370166">data</span><span class="op" id="3370170">[</span><span class="num" id="3370171">0</span><span class="op" id="3370172">:</span><span class="num" id="3370173">0</span><span class="op" id="3370174">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370178">ok</span>&nbsp;<span class="op" id="3370181">=</span>&nbsp;<span class="builtintype" id="3370183">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370192">return</span><br>
<span class="lineno">45</span><span class="op" id="3370199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3370202">func</span>&nbsp;<span class="op" id="3370207">(</span><span class="ident" id="3370208">f</span>&nbsp;<span class="op" id="3370210">*</span><span class="ident" id="3370211">file</span><span class="op" id="3370215">)</span>&nbsp;<span class="ident" id="3370217">readLine</span><span class="op" id="3370225">(</span><span class="op" id="3370226">)</span>&nbsp;<span class="op" id="3370228">(</span><span class="ident" id="3370229">s</span>&nbsp;<span class="builtintype" id="3370231">string</span><span class="op" id="3370237">,</span>&nbsp;<span class="ident" id="3370239">ok</span>&nbsp;<span class="builtintype" id="3370242">bool</span><span class="op" id="3370246">)</span>&nbsp;<span class="op" id="3370248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370251">if</span>&nbsp;<span class="ident" id="3370254">s</span><span class="op" id="3370255">,</span>&nbsp;<span class="ident" id="3370257">ok</span>&nbsp;<span class="op" id="3370260">=</span>&nbsp;<span class="ident" id="3370262">f</span><span class="op" id="3370263">.</span><span class="ident" id="3370264">getLineFromData</span><span class="op" id="3370279">(</span><span class="op" id="3370280">)</span><span class="op" id="3370281">;</span>&nbsp;<span class="ident" id="3370283">ok</span>&nbsp;<span class="op" id="3370286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370290">return</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370301">if</span>&nbsp;<span class="builtinfunc" id="3370304">len</span><span class="op" id="3370307">(</span><span class="ident" id="3370308">f</span><span class="op" id="3370309">.</span><span class="ident" id="3370310">data</span><span class="op" id="3370314">)</span>&nbsp;<span class="op" id="3370316">&lt;</span>&nbsp;<span class="builtinfunc" id="3370318">cap</span><span class="op" id="3370321">(</span><span class="ident" id="3370322">f</span><span class="op" id="3370323">.</span><span class="ident" id="3370324">data</span><span class="op" id="3370328">)</span>&nbsp;<span class="op" id="3370330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370334">ln</span>&nbsp;<span class="op" id="3370337">:=</span>&nbsp;<span class="builtinfunc" id="3370340">len</span><span class="op" id="3370343">(</span><span class="ident" id="3370344">f</span><span class="op" id="3370345">.</span><span class="ident" id="3370346">data</span><span class="op" id="3370350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370354">n</span><span class="op" id="3370355">,</span>&nbsp;<span class="ident" id="3370357">err</span>&nbsp;<span class="op" id="3370361">:=</span>&nbsp;<span class="ident" id="3370364">io</span><span class="op" id="3370366">.</span><span class="ident" id="3370367">ReadFull</span><span class="op" id="3370375">(</span><span class="ident" id="3370376">f</span><span class="op" id="3370377">.</span><span class="ident" id="3370378">file</span><span class="op" id="3370382">,</span>&nbsp;<span class="ident" id="3370384">f</span><span class="op" id="3370385">.</span><span class="ident" id="3370386">data</span><span class="op" id="3370390">[</span><span class="ident" id="3370391">ln</span><span class="op" id="3370393">:</span><span class="builtinfunc" id="3370394">cap</span><span class="op" id="3370397">(</span><span class="ident" id="3370398">f</span><span class="op" id="3370399">.</span><span class="ident" id="3370400">data</span><span class="op" id="3370404">)</span><span class="op" id="3370405">]</span><span class="op" id="3370406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370410">if</span>&nbsp;<span class="ident" id="3370413">n</span>&nbsp;<span class="op" id="3370415">&gt;=</span>&nbsp;<span class="num" id="3370418">0</span>&nbsp;<span class="op" id="3370420">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370425">f</span><span class="op" id="3370426">.</span><span class="ident" id="3370427">data</span>&nbsp;<span class="op" id="3370432">=</span>&nbsp;<span class="ident" id="3370434">f</span><span class="op" id="3370435">.</span><span class="ident" id="3370436">data</span><span class="op" id="3370440">[</span><span class="num" id="3370441">0</span>&nbsp;<span class="op" id="3370443">:</span>&nbsp;<span class="ident" id="3370445">ln</span><span class="op" id="3370447">+</span><span class="ident" id="3370448">n</span><span class="op" id="3370449">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370457">if</span>&nbsp;<span class="ident" id="3370460">err</span>&nbsp;<span class="op" id="3370464">==</span>&nbsp;<span class="ident" id="3370467">io</span><span class="op" id="3370469">.</span><span class="ident" id="3370470">EOF</span>&nbsp;<span class="op" id="3370474">||</span>&nbsp;<span class="ident" id="3370477">err</span>&nbsp;<span class="op" id="3370481">==</span>&nbsp;<span class="ident" id="3370484">io</span><span class="op" id="3370486">.</span><span class="ident" id="3370487">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="3370504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370509">f</span><span class="op" id="3370510">.</span><span class="ident" id="3370511">atEOF</span>&nbsp;<span class="op" id="3370517">=</span>&nbsp;<span class="builtintype" id="3370519">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370526">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370532">s</span><span class="op" id="3370533">,</span>&nbsp;<span class="ident" id="3370535">ok</span>&nbsp;<span class="op" id="3370538">=</span>&nbsp;<span class="ident" id="3370540">f</span><span class="op" id="3370541">.</span><span class="ident" id="3370542">getLineFromData</span><span class="op" id="3370557">(</span><span class="op" id="3370558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370561">return</span><br>
<span class="lineno"></span><span class="op" id="3370568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="3370571">func</span>&nbsp;<span class="ident" id="3370576">open</span><span class="op" id="3370580">(</span><span class="ident" id="3370581">name</span>&nbsp;<span class="builtintype" id="3370586">string</span><span class="op" id="3370592">)</span>&nbsp;<span class="op" id="3370594">(</span><span class="op" id="3370595">*</span><span class="ident" id="3370596">file</span><span class="op" id="3370600">,</span>&nbsp;<span class="builtintype" id="3370602">error</span><span class="op" id="3370607">)</span>&nbsp;<span class="op" id="3370609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370612">fd</span><span class="op" id="3370614">,</span>&nbsp;<span class="ident" id="3370616">err</span>&nbsp;<span class="op" id="3370620">:=</span>&nbsp;<span class="ident" id="3370623">os</span><span class="op" id="3370625">.</span><span class="ident" id="3370626">Open</span><span class="op" id="3370630">(</span><span class="ident" id="3370631">name</span><span class="op" id="3370635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370638">if</span>&nbsp;<span class="ident" id="3370641">err</span>&nbsp;<span class="op" id="3370645">!=</span>&nbsp;<span class="ident" id="3370648">nil</span>&nbsp;<span class="op" id="3370652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370656">return</span>&nbsp;<span class="ident" id="3370663">nil</span><span class="op" id="3370666">,</span>&nbsp;<span class="ident" id="3370668">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370673">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370676">return</span>&nbsp;<span class="op" id="3370683">&amp;</span><span class="ident" id="3370684">file</span><span class="op" id="3370688">{</span><span class="ident" id="3370689">fd</span><span class="op" id="3370691">,</span>&nbsp;<span class="builtinfunc" id="3370693">make</span><span class="op" id="3370697">(</span><span class="op" id="3370698">[</span><span class="op" id="3370699">]</span><span class="builtintype" id="3370700">byte</span><span class="op" id="3370704">,</span>&nbsp;<span class="num" id="3370706">0</span><span class="op" id="3370707">,</span>&nbsp;<span class="ident" id="3370709">os</span><span class="op" id="3370711">.</span><span class="ident" id="3370712">Getpagesize</span><span class="op" id="3370723">(</span><span class="op" id="3370724">)</span><span class="op" id="3370725">)</span><span class="op" id="3370726">,</span>&nbsp;<span class="builtintype" id="3370728">false</span><span class="op" id="3370733">}</span><span class="op" id="3370734">,</span>&nbsp;<span class="ident" id="3370736">nil</span><br>
<span class="lineno"></span><span class="op" id="3370740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3370743">func</span>&nbsp;<span class="ident" id="3370748">byteIndex</span><span class="op" id="3370757">(</span><span class="ident" id="3370758">s</span>&nbsp;<span class="builtintype" id="3370760">string</span><span class="op" id="3370766">,</span>&nbsp;<span class="ident" id="3370768">c</span>&nbsp;<span class="builtintype" id="3370770">byte</span><span class="op" id="3370774">)</span>&nbsp;<span class="builtintype" id="3370776">int</span>&nbsp;<span class="op" id="3370780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370783">for</span>&nbsp;<span class="ident" id="3370787">i</span>&nbsp;<span class="op" id="3370789">:=</span>&nbsp;<span class="num" id="3370792">0</span><span class="op" id="3370793">;</span>&nbsp;<span class="ident" id="3370795">i</span>&nbsp;<span class="op" id="3370797">&lt;</span>&nbsp;<span class="builtinfunc" id="3370799">len</span><span class="op" id="3370802">(</span><span class="ident" id="3370803">s</span><span class="op" id="3370804">)</span><span class="op" id="3370805">;</span>&nbsp;<span class="ident" id="3370807">i</span><span class="op" id="3370808">++</span>&nbsp;<span class="op" id="3370811">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370815">if</span>&nbsp;<span class="ident" id="3370818">s</span><span class="op" id="3370819">[</span><span class="ident" id="3370820">i</span><span class="op" id="3370821">]</span>&nbsp;<span class="op" id="3370823">==</span>&nbsp;<span class="ident" id="3370826">c</span>&nbsp;<span class="op" id="3370828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370833">return</span>&nbsp;<span class="ident" id="3370840">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3370847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370850">return</span>&nbsp;<span class="op" id="3370857">-</span><span class="num" id="3370858">1</span><br>
<span class="lineno">80</span><span class="op" id="3370860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3370863">//&nbsp;Count&nbsp;occurrences&nbsp;in&nbsp;s&nbsp;of&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3370908">func</span>&nbsp;<span class="ident" id="3370913">countAnyByte</span><span class="op" id="3370925">(</span><span class="ident" id="3370926">s</span>&nbsp;<span class="builtintype" id="3370928">string</span><span class="op" id="3370934">,</span>&nbsp;<span class="ident" id="3370936">t</span>&nbsp;<span class="builtintype" id="3370938">string</span><span class="op" id="3370944">)</span>&nbsp;<span class="builtintype" id="3370946">int</span>&nbsp;<span class="op" id="3370950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3370953">n</span>&nbsp;<span class="op" id="3370955">:=</span>&nbsp;<span class="num" id="3370958">0</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370961">for</span>&nbsp;<span class="ident" id="3370965">i</span>&nbsp;<span class="op" id="3370967">:=</span>&nbsp;<span class="num" id="3370970">0</span><span class="op" id="3370971">;</span>&nbsp;<span class="ident" id="3370973">i</span>&nbsp;<span class="op" id="3370975">&lt;</span>&nbsp;<span class="builtinfunc" id="3370977">len</span><span class="op" id="3370980">(</span><span class="ident" id="3370981">s</span><span class="op" id="3370982">)</span><span class="op" id="3370983">;</span>&nbsp;<span class="ident" id="3370985">i</span><span class="op" id="3370986">++</span>&nbsp;<span class="op" id="3370989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3370993">if</span>&nbsp;<span class="ident" id="3370996">byteIndex</span><span class="op" id="3371005">(</span><span class="ident" id="3371006">t</span><span class="op" id="3371007">,</span>&nbsp;<span class="ident" id="3371009">s</span><span class="op" id="3371010">[</span><span class="ident" id="3371011">i</span><span class="op" id="3371012">]</span><span class="op" id="3371013">)</span>&nbsp;<span class="op" id="3371015">&gt;=</span>&nbsp;<span class="num" id="3371018">0</span>&nbsp;<span class="op" id="3371020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371025">n</span><span class="op" id="3371026">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371034">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371037">return</span>&nbsp;<span class="ident" id="3371044">n</span><br>
<span class="lineno"></span><span class="op" id="3371046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3371049">//&nbsp;Split&nbsp;s&nbsp;at&nbsp;any&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno"></span><span class="keyword" id="3371079">func</span>&nbsp;<span class="ident" id="3371084">splitAtBytes</span><span class="op" id="3371096">(</span><span class="ident" id="3371097">s</span>&nbsp;<span class="builtintype" id="3371099">string</span><span class="op" id="3371105">,</span>&nbsp;<span class="ident" id="3371107">t</span>&nbsp;<span class="builtintype" id="3371109">string</span><span class="op" id="3371115">)</span>&nbsp;<span class="op" id="3371117">[</span><span class="op" id="3371118">]</span><span class="builtintype" id="3371119">string</span>&nbsp;<span class="op" id="3371126">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371129">a</span>&nbsp;<span class="op" id="3371131">:=</span>&nbsp;<span class="builtinfunc" id="3371134">make</span><span class="op" id="3371138">(</span><span class="op" id="3371139">[</span><span class="op" id="3371140">]</span><span class="builtintype" id="3371141">string</span><span class="op" id="3371147">,</span>&nbsp;<span class="num" id="3371149">1</span><span class="op" id="3371150">+</span><span class="ident" id="3371151">countAnyByte</span><span class="op" id="3371163">(</span><span class="ident" id="3371164">s</span><span class="op" id="3371165">,</span>&nbsp;<span class="ident" id="3371167">t</span><span class="op" id="3371168">)</span><span class="op" id="3371169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371172">n</span>&nbsp;<span class="op" id="3371174">:=</span>&nbsp;<span class="num" id="3371177">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371180">last</span>&nbsp;<span class="op" id="3371185">:=</span>&nbsp;<span class="num" id="3371188">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371191">for</span>&nbsp;<span class="ident" id="3371195">i</span>&nbsp;<span class="op" id="3371197">:=</span>&nbsp;<span class="num" id="3371200">0</span><span class="op" id="3371201">;</span>&nbsp;<span class="ident" id="3371203">i</span>&nbsp;<span class="op" id="3371205">&lt;</span>&nbsp;<span class="builtinfunc" id="3371207">len</span><span class="op" id="3371210">(</span><span class="ident" id="3371211">s</span><span class="op" id="3371212">)</span><span class="op" id="3371213">;</span>&nbsp;<span class="ident" id="3371215">i</span><span class="op" id="3371216">++</span>&nbsp;<span class="op" id="3371219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371223">if</span>&nbsp;<span class="ident" id="3371226">byteIndex</span><span class="op" id="3371235">(</span><span class="ident" id="3371236">t</span><span class="op" id="3371237">,</span>&nbsp;<span class="ident" id="3371239">s</span><span class="op" id="3371240">[</span><span class="ident" id="3371241">i</span><span class="op" id="3371242">]</span><span class="op" id="3371243">)</span>&nbsp;<span class="op" id="3371245">&gt;=</span>&nbsp;<span class="num" id="3371248">0</span>&nbsp;<span class="op" id="3371250">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371255">if</span>&nbsp;<span class="ident" id="3371258">last</span>&nbsp;<span class="op" id="3371263">&lt;</span>&nbsp;<span class="ident" id="3371265">i</span>&nbsp;<span class="op" id="3371267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371273">a</span><span class="op" id="3371274">[</span><span class="ident" id="3371275">n</span><span class="op" id="3371276">]</span>&nbsp;<span class="op" id="3371278">=</span>&nbsp;<span class="builtintype" id="3371280">string</span><span class="op" id="3371286">(</span><span class="ident" id="3371287">s</span><span class="op" id="3371288">[</span><span class="ident" id="3371289">last</span><span class="op" id="3371293">:</span><span class="ident" id="3371294">i</span><span class="op" id="3371295">]</span><span class="op" id="3371296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371302">n</span><span class="op" id="3371303">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371314">last</span>&nbsp;<span class="op" id="3371319">=</span>&nbsp;<span class="ident" id="3371321">i</span>&nbsp;<span class="op" id="3371323">+</span>&nbsp;<span class="num" id="3371325">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371335">if</span>&nbsp;<span class="ident" id="3371338">last</span>&nbsp;<span class="op" id="3371343">&lt;</span>&nbsp;<span class="builtinfunc" id="3371345">len</span><span class="op" id="3371348">(</span><span class="ident" id="3371349">s</span><span class="op" id="3371350">)</span>&nbsp;<span class="op" id="3371352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371356">a</span><span class="op" id="3371357">[</span><span class="ident" id="3371358">n</span><span class="op" id="3371359">]</span>&nbsp;<span class="op" id="3371361">=</span>&nbsp;<span class="builtintype" id="3371363">string</span><span class="op" id="3371369">(</span><span class="ident" id="3371370">s</span><span class="op" id="3371371">[</span><span class="ident" id="3371372">last</span><span class="op" id="3371376">:</span><span class="op" id="3371377">]</span><span class="op" id="3371378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371382">n</span><span class="op" id="3371383">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371390">return</span>&nbsp;<span class="ident" id="3371397">a</span><span class="op" id="3371398">[</span><span class="num" id="3371399">0</span><span class="op" id="3371400">:</span><span class="ident" id="3371401">n</span><span class="op" id="3371402">]</span><br>
<span class="lineno"></span><span class="op" id="3371404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3371407">func</span>&nbsp;<span class="ident" id="3371412">getFields</span><span class="op" id="3371421">(</span><span class="ident" id="3371422">s</span>&nbsp;<span class="builtintype" id="3371424">string</span><span class="op" id="3371430">)</span>&nbsp;<span class="op" id="3371432">[</span><span class="op" id="3371433">]</span><span class="builtintype" id="3371434">string</span>&nbsp;<span class="op" id="3371441">{</span>&nbsp;<span class="keyword" id="3371443">return</span>&nbsp;<span class="ident" id="3371450">splitAtBytes</span><span class="op" id="3371462">(</span><span class="ident" id="3371463">s</span><span class="op" id="3371464">,</span>&nbsp;<span class="string" id="3371466">&#34;&nbsp;\r\t\n&#34;</span><span class="op" id="3371475">)</span>&nbsp;<span class="op" id="3371477">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3371480">//&nbsp;Bigger&nbsp;than&nbsp;we&nbsp;need,&nbsp;not&nbsp;too&nbsp;big&nbsp;to&nbsp;worry&nbsp;about&nbsp;overflow</span><br>
<span class="lineno"></span><span class="keyword" id="3371540">const</span>&nbsp;<span class="ident" id="3371546">big</span>&nbsp;<span class="op" id="3371550">=</span>&nbsp;<span class="num" id="3371552">0xFFFFFF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3371562">//&nbsp;Decimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno">120</span><span class="comment" id="3371604">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3371644">func</span>&nbsp;<span class="ident" id="3371649">dtoi</span><span class="op" id="3371653">(</span><span class="ident" id="3371654">s</span>&nbsp;<span class="builtintype" id="3371656">string</span><span class="op" id="3371662">,</span>&nbsp;<span class="ident" id="3371664">i0</span>&nbsp;<span class="builtintype" id="3371667">int</span><span class="op" id="3371670">)</span>&nbsp;<span class="op" id="3371672">(</span><span class="ident" id="3371673">n</span>&nbsp;<span class="builtintype" id="3371675">int</span><span class="op" id="3371678">,</span>&nbsp;<span class="ident" id="3371680">i</span>&nbsp;<span class="builtintype" id="3371682">int</span><span class="op" id="3371685">,</span>&nbsp;<span class="ident" id="3371687">ok</span>&nbsp;<span class="builtintype" id="3371690">bool</span><span class="op" id="3371694">)</span>&nbsp;<span class="op" id="3371696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371699">n</span>&nbsp;<span class="op" id="3371701">=</span>&nbsp;<span class="num" id="3371703">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371706">for</span>&nbsp;<span class="ident" id="3371710">i</span>&nbsp;<span class="op" id="3371712">=</span>&nbsp;<span class="ident" id="3371714">i0</span><span class="op" id="3371716">;</span>&nbsp;<span class="ident" id="3371718">i</span>&nbsp;<span class="op" id="3371720">&lt;</span>&nbsp;<span class="builtinfunc" id="3371722">len</span><span class="op" id="3371725">(</span><span class="ident" id="3371726">s</span><span class="op" id="3371727">)</span>&nbsp;<span class="op" id="3371729">&amp;&amp;</span>&nbsp;<span class="string" id="3371732">&#39;0&#39;</span>&nbsp;<span class="op" id="3371736">&lt;=</span>&nbsp;<span class="ident" id="3371739">s</span><span class="op" id="3371740">[</span><span class="ident" id="3371741">i</span><span class="op" id="3371742">]</span>&nbsp;<span class="op" id="3371744">&amp;&amp;</span>&nbsp;<span class="ident" id="3371747">s</span><span class="op" id="3371748">[</span><span class="ident" id="3371749">i</span><span class="op" id="3371750">]</span>&nbsp;<span class="op" id="3371752">&lt;=</span>&nbsp;<span class="string" id="3371755">&#39;9&#39;</span><span class="op" id="3371758">;</span>&nbsp;<span class="ident" id="3371760">i</span><span class="op" id="3371761">++</span>&nbsp;<span class="op" id="3371764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3371768">n</span>&nbsp;<span class="op" id="3371770">=</span>&nbsp;<span class="ident" id="3371772">n</span><span class="op" id="3371773">*</span><span class="num" id="3371774">10</span>&nbsp;<span class="op" id="3371777">+</span>&nbsp;<span class="builtintype" id="3371779">int</span><span class="op" id="3371782">(</span><span class="ident" id="3371783">s</span><span class="op" id="3371784">[</span><span class="ident" id="3371785">i</span><span class="op" id="3371786">]</span><span class="op" id="3371787">-</span><span class="string" id="3371788">&#39;0&#39;</span><span class="op" id="3371791">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371795">if</span>&nbsp;<span class="ident" id="3371798">n</span>&nbsp;<span class="op" id="3371800">&gt;=</span>&nbsp;<span class="ident" id="3371803">big</span>&nbsp;<span class="op" id="3371807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371812">return</span>&nbsp;<span class="num" id="3371819">0</span><span class="op" id="3371820">,</span>&nbsp;<span class="ident" id="3371822">i</span><span class="op" id="3371823">,</span>&nbsp;<span class="builtintype" id="3371825">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371839">if</span>&nbsp;<span class="ident" id="3371842">i</span>&nbsp;<span class="op" id="3371844">==</span>&nbsp;<span class="ident" id="3371847">i0</span>&nbsp;<span class="op" id="3371850">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371854">return</span>&nbsp;<span class="num" id="3371861">0</span><span class="op" id="3371862">,</span>&nbsp;<span class="ident" id="3371864">i</span><span class="op" id="3371865">,</span>&nbsp;<span class="builtintype" id="3371867">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3371874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3371877">return</span>&nbsp;<span class="ident" id="3371884">n</span><span class="op" id="3371885">,</span>&nbsp;<span class="ident" id="3371887">i</span><span class="op" id="3371888">,</span>&nbsp;<span class="builtintype" id="3371890">true</span><br>
<span class="lineno"></span><span class="op" id="3371895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3371898">//&nbsp;Hexadecimal&nbsp;to&nbsp;integer&nbsp;starting&nbsp;at&nbsp;&amp;s[i0].</span><br>
<span class="lineno"></span><span class="comment" id="3371944">//&nbsp;Returns&nbsp;number,&nbsp;new&nbsp;offset,&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="3371984">func</span>&nbsp;<span class="ident" id="3371989">xtoi</span><span class="op" id="3371993">(</span><span class="ident" id="3371994">s</span>&nbsp;<span class="builtintype" id="3371996">string</span><span class="op" id="3372002">,</span>&nbsp;<span class="ident" id="3372004">i0</span>&nbsp;<span class="builtintype" id="3372007">int</span><span class="op" id="3372010">)</span>&nbsp;<span class="op" id="3372012">(</span><span class="ident" id="3372013">n</span>&nbsp;<span class="builtintype" id="3372015">int</span><span class="op" id="3372018">,</span>&nbsp;<span class="ident" id="3372020">i</span>&nbsp;<span class="builtintype" id="3372022">int</span><span class="op" id="3372025">,</span>&nbsp;<span class="ident" id="3372027">ok</span>&nbsp;<span class="builtintype" id="3372030">bool</span><span class="op" id="3372034">)</span>&nbsp;<span class="op" id="3372036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372039">n</span>&nbsp;<span class="op" id="3372041">=</span>&nbsp;<span class="num" id="3372043">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372046">for</span>&nbsp;<span class="ident" id="3372050">i</span>&nbsp;<span class="op" id="3372052">=</span>&nbsp;<span class="ident" id="3372054">i0</span><span class="op" id="3372056">;</span>&nbsp;<span class="ident" id="3372058">i</span>&nbsp;<span class="op" id="3372060">&lt;</span>&nbsp;<span class="builtinfunc" id="3372062">len</span><span class="op" id="3372065">(</span><span class="ident" id="3372066">s</span><span class="op" id="3372067">)</span><span class="op" id="3372068">;</span>&nbsp;<span class="ident" id="3372070">i</span><span class="op" id="3372071">++</span>&nbsp;<span class="op" id="3372074">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372078">if</span>&nbsp;<span class="string" id="3372081">&#39;0&#39;</span>&nbsp;<span class="op" id="3372085">&lt;=</span>&nbsp;<span class="ident" id="3372088">s</span><span class="op" id="3372089">[</span><span class="ident" id="3372090">i</span><span class="op" id="3372091">]</span>&nbsp;<span class="op" id="3372093">&amp;&amp;</span>&nbsp;<span class="ident" id="3372096">s</span><span class="op" id="3372097">[</span><span class="ident" id="3372098">i</span><span class="op" id="3372099">]</span>&nbsp;<span class="op" id="3372101">&lt;=</span>&nbsp;<span class="string" id="3372104">&#39;9&#39;</span>&nbsp;<span class="op" id="3372108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372113">n</span>&nbsp;<span class="op" id="3372115">*=</span>&nbsp;<span class="num" id="3372118">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372124">n</span>&nbsp;<span class="op" id="3372126">+=</span>&nbsp;<span class="builtintype" id="3372129">int</span><span class="op" id="3372132">(</span><span class="ident" id="3372133">s</span><span class="op" id="3372134">[</span><span class="ident" id="3372135">i</span><span class="op" id="3372136">]</span>&nbsp;<span class="op" id="3372138">-</span>&nbsp;<span class="string" id="3372140">&#39;0&#39;</span><span class="op" id="3372143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372147">}</span>&nbsp;<span class="keyword" id="3372149">else</span>&nbsp;<span class="keyword" id="3372154">if</span>&nbsp;<span class="string" id="3372157">&#39;a&#39;</span>&nbsp;<span class="op" id="3372161">&lt;=</span>&nbsp;<span class="ident" id="3372164">s</span><span class="op" id="3372165">[</span><span class="ident" id="3372166">i</span><span class="op" id="3372167">]</span>&nbsp;<span class="op" id="3372169">&amp;&amp;</span>&nbsp;<span class="ident" id="3372172">s</span><span class="op" id="3372173">[</span><span class="ident" id="3372174">i</span><span class="op" id="3372175">]</span>&nbsp;<span class="op" id="3372177">&lt;=</span>&nbsp;<span class="string" id="3372180">&#39;f&#39;</span>&nbsp;<span class="op" id="3372184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372189">n</span>&nbsp;<span class="op" id="3372191">*=</span>&nbsp;<span class="num" id="3372194">16</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372200">n</span>&nbsp;<span class="op" id="3372202">+=</span>&nbsp;<span class="builtintype" id="3372205">int</span><span class="op" id="3372208">(</span><span class="ident" id="3372209">s</span><span class="op" id="3372210">[</span><span class="ident" id="3372211">i</span><span class="op" id="3372212">]</span><span class="op" id="3372213">-</span><span class="string" id="3372214">&#39;a&#39;</span><span class="op" id="3372217">)</span>&nbsp;<span class="op" id="3372219">+</span>&nbsp;<span class="num" id="3372221">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372226">}</span>&nbsp;<span class="keyword" id="3372228">else</span>&nbsp;<span class="keyword" id="3372233">if</span>&nbsp;<span class="string" id="3372236">&#39;A&#39;</span>&nbsp;<span class="op" id="3372240">&lt;=</span>&nbsp;<span class="ident" id="3372243">s</span><span class="op" id="3372244">[</span><span class="ident" id="3372245">i</span><span class="op" id="3372246">]</span>&nbsp;<span class="op" id="3372248">&amp;&amp;</span>&nbsp;<span class="ident" id="3372251">s</span><span class="op" id="3372252">[</span><span class="ident" id="3372253">i</span><span class="op" id="3372254">]</span>&nbsp;<span class="op" id="3372256">&lt;=</span>&nbsp;<span class="string" id="3372259">&#39;F&#39;</span>&nbsp;<span class="op" id="3372263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372268">n</span>&nbsp;<span class="op" id="3372270">*=</span>&nbsp;<span class="num" id="3372273">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372279">n</span>&nbsp;<span class="op" id="3372281">+=</span>&nbsp;<span class="builtintype" id="3372284">int</span><span class="op" id="3372287">(</span><span class="ident" id="3372288">s</span><span class="op" id="3372289">[</span><span class="ident" id="3372290">i</span><span class="op" id="3372291">]</span><span class="op" id="3372292">-</span><span class="string" id="3372293">&#39;A&#39;</span><span class="op" id="3372296">)</span>&nbsp;<span class="op" id="3372298">+</span>&nbsp;<span class="num" id="3372300">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372305">}</span>&nbsp;<span class="keyword" id="3372307">else</span>&nbsp;<span class="op" id="3372312">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372317">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372329">if</span>&nbsp;<span class="ident" id="3372332">n</span>&nbsp;<span class="op" id="3372334">&gt;=</span>&nbsp;<span class="ident" id="3372337">big</span>&nbsp;<span class="op" id="3372341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372346">return</span>&nbsp;<span class="num" id="3372353">0</span><span class="op" id="3372354">,</span>&nbsp;<span class="ident" id="3372356">i</span><span class="op" id="3372357">,</span>&nbsp;<span class="builtintype" id="3372359">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372367">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372373">if</span>&nbsp;<span class="ident" id="3372376">i</span>&nbsp;<span class="op" id="3372378">==</span>&nbsp;<span class="ident" id="3372381">i0</span>&nbsp;<span class="op" id="3372384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372388">return</span>&nbsp;<span class="num" id="3372395">0</span><span class="op" id="3372396">,</span>&nbsp;<span class="ident" id="3372398">i</span><span class="op" id="3372399">,</span>&nbsp;<span class="builtintype" id="3372401">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372411">return</span>&nbsp;<span class="ident" id="3372418">n</span><span class="op" id="3372419">,</span>&nbsp;<span class="ident" id="3372421">i</span><span class="op" id="3372422">,</span>&nbsp;<span class="builtintype" id="3372424">true</span><br>
<span class="lineno">160</span><span class="op" id="3372429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3372432">//&nbsp;xtoi2&nbsp;converts&nbsp;the&nbsp;next&nbsp;two&nbsp;hex&nbsp;digits&nbsp;of&nbsp;s&nbsp;into&nbsp;a&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3372492">//&nbsp;If&nbsp;s&nbsp;is&nbsp;longer&nbsp;than&nbsp;2&nbsp;bytes&nbsp;then&nbsp;the&nbsp;third&nbsp;byte&nbsp;must&nbsp;be&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="3372554">//&nbsp;If&nbsp;the&nbsp;first&nbsp;two&nbsp;bytes&nbsp;of&nbsp;s&nbsp;are&nbsp;not&nbsp;hex&nbsp;digits&nbsp;or&nbsp;the&nbsp;third&nbsp;byte</span><br>
<span class="lineno">165</span><span class="comment" id="3372622">//&nbsp;does&nbsp;not&nbsp;match&nbsp;e,&nbsp;false&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span><span class="keyword" id="3372662">func</span>&nbsp;<span class="ident" id="3372667">xtoi2</span><span class="op" id="3372672">(</span><span class="ident" id="3372673">s</span>&nbsp;<span class="builtintype" id="3372675">string</span><span class="op" id="3372681">,</span>&nbsp;<span class="ident" id="3372683">e</span>&nbsp;<span class="builtintype" id="3372685">byte</span><span class="op" id="3372689">)</span>&nbsp;<span class="op" id="3372691">(</span><span class="builtintype" id="3372692">byte</span><span class="op" id="3372696">,</span>&nbsp;<span class="builtintype" id="3372698">bool</span><span class="op" id="3372702">)</span>&nbsp;<span class="op" id="3372704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372707">if</span>&nbsp;<span class="builtinfunc" id="3372710">len</span><span class="op" id="3372713">(</span><span class="ident" id="3372714">s</span><span class="op" id="3372715">)</span>&nbsp;<span class="op" id="3372717">&gt;</span>&nbsp;<span class="num" id="3372719">2</span>&nbsp;<span class="op" id="3372721">&amp;&amp;</span>&nbsp;<span class="ident" id="3372724">s</span><span class="op" id="3372725">[</span><span class="num" id="3372726">2</span><span class="op" id="3372727">]</span>&nbsp;<span class="op" id="3372729">!=</span>&nbsp;<span class="ident" id="3372732">e</span>&nbsp;<span class="op" id="3372734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372738">return</span>&nbsp;<span class="num" id="3372745">0</span><span class="op" id="3372746">,</span>&nbsp;<span class="builtintype" id="3372748">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372755">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372758">n</span><span class="op" id="3372759">,</span>&nbsp;<span class="ident" id="3372761">ei</span><span class="op" id="3372763">,</span>&nbsp;<span class="ident" id="3372765">ok</span>&nbsp;<span class="op" id="3372768">:=</span>&nbsp;<span class="ident" id="3372771">xtoi</span><span class="op" id="3372775">(</span><span class="ident" id="3372776">s</span><span class="op" id="3372777">[</span><span class="op" id="3372778">:</span><span class="num" id="3372779">2</span><span class="op" id="3372780">]</span><span class="op" id="3372781">,</span>&nbsp;<span class="num" id="3372783">0</span><span class="op" id="3372784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372787">return</span>&nbsp;<span class="builtintype" id="3372794">byte</span><span class="op" id="3372798">(</span><span class="ident" id="3372799">n</span><span class="op" id="3372800">)</span><span class="op" id="3372801">,</span>&nbsp;<span class="ident" id="3372803">ok</span>&nbsp;<span class="op" id="3372806">&amp;&amp;</span>&nbsp;<span class="ident" id="3372809">ei</span>&nbsp;<span class="op" id="3372812">==</span>&nbsp;<span class="num" id="3372815">2</span><br>
<span class="lineno"></span><span class="op" id="3372817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3372820">//&nbsp;Integer&nbsp;to&nbsp;decimal.</span><br>
<span class="lineno">175</span><span class="keyword" id="3372843">func</span>&nbsp;<span class="ident" id="3372848">itoa</span><span class="op" id="3372852">(</span><span class="ident" id="3372853">i</span>&nbsp;<span class="builtintype" id="3372855">int</span><span class="op" id="3372858">)</span>&nbsp;<span class="builtintype" id="3372860">string</span>&nbsp;<span class="op" id="3372867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372870">var</span>&nbsp;<span class="ident" id="3372874">buf</span>&nbsp;<span class="op" id="3372878">[</span><span class="num" id="3372879">30</span><span class="op" id="3372881">]</span><span class="builtintype" id="3372882">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372888">n</span>&nbsp;<span class="op" id="3372890">:=</span>&nbsp;<span class="builtinfunc" id="3372893">len</span><span class="op" id="3372896">(</span><span class="ident" id="3372897">buf</span><span class="op" id="3372900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372903">neg</span>&nbsp;<span class="op" id="3372907">:=</span>&nbsp;<span class="builtintype" id="3372910">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372917">if</span>&nbsp;<span class="ident" id="3372920">i</span>&nbsp;<span class="op" id="3372922">&lt;</span>&nbsp;<span class="num" id="3372924">0</span>&nbsp;<span class="op" id="3372926">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372930">i</span>&nbsp;<span class="op" id="3372932">=</span>&nbsp;<span class="op" id="3372934">-</span><span class="ident" id="3372935">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372939">neg</span>&nbsp;<span class="op" id="3372943">=</span>&nbsp;<span class="builtintype" id="3372945">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3372951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3372954">ui</span>&nbsp;<span class="op" id="3372957">:=</span>&nbsp;<span class="builtintype" id="3372960">uint</span><span class="op" id="3372964">(</span><span class="ident" id="3372965">i</span><span class="op" id="3372966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3372969">for</span>&nbsp;<span class="ident" id="3372973">ui</span>&nbsp;<span class="op" id="3372976">&gt;</span>&nbsp;<span class="num" id="3372978">0</span>&nbsp;<span class="op" id="3372980">||</span>&nbsp;<span class="ident" id="3372983">n</span>&nbsp;<span class="op" id="3372985">==</span>&nbsp;<span class="builtinfunc" id="3372988">len</span><span class="op" id="3372991">(</span><span class="ident" id="3372992">buf</span><span class="op" id="3372995">)</span>&nbsp;<span class="op" id="3372997">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373001">n</span><span class="op" id="3373002">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373007">buf</span><span class="op" id="3373010">[</span><span class="ident" id="3373011">n</span><span class="op" id="3373012">]</span>&nbsp;<span class="op" id="3373014">=</span>&nbsp;<span class="builtintype" id="3373016">byte</span><span class="op" id="3373020">(</span><span class="string" id="3373021">&#39;0&#39;</span>&nbsp;<span class="op" id="3373025">+</span>&nbsp;<span class="ident" id="3373027">ui</span><span class="op" id="3373029">%</span><span class="num" id="3373030">10</span><span class="op" id="3373032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373036">ui</span>&nbsp;<span class="op" id="3373039">/=</span>&nbsp;<span class="num" id="3373042">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373049">if</span>&nbsp;<span class="ident" id="3373052">neg</span>&nbsp;<span class="op" id="3373056">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373060">n</span><span class="op" id="3373061">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373066">buf</span><span class="op" id="3373069">[</span><span class="ident" id="3373070">n</span><span class="op" id="3373071">]</span>&nbsp;<span class="op" id="3373073">=</span>&nbsp;<span class="string" id="3373075">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373083">return</span>&nbsp;<span class="builtintype" id="3373090">string</span><span class="op" id="3373096">(</span><span class="ident" id="3373097">buf</span><span class="op" id="3373100">[</span><span class="ident" id="3373101">n</span><span class="op" id="3373102">:</span><span class="op" id="3373103">]</span><span class="op" id="3373104">)</span><br>
<span class="lineno"></span><span class="op" id="3373106">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3373109">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3373141">func</span>&nbsp;<span class="ident" id="3373146">itod</span><span class="op" id="3373150">(</span><span class="ident" id="3373151">i</span>&nbsp;<span class="builtintype" id="3373153">uint</span><span class="op" id="3373157">)</span>&nbsp;<span class="builtintype" id="3373159">string</span>&nbsp;<span class="op" id="3373166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373169">if</span>&nbsp;<span class="ident" id="3373172">i</span>&nbsp;<span class="op" id="3373174">==</span>&nbsp;<span class="num" id="3373177">0</span>&nbsp;<span class="op" id="3373179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373183">return</span>&nbsp;<span class="string" id="3373190">&#34;0&#34;</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3373199">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373238">var</span>&nbsp;<span class="ident" id="3373242">b</span>&nbsp;<span class="op" id="3373244">[</span><span class="num" id="3373245">32</span><span class="op" id="3373247">]</span><span class="builtintype" id="3373248">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373254">bp</span>&nbsp;<span class="op" id="3373257">:=</span>&nbsp;<span class="builtinfunc" id="3373260">len</span><span class="op" id="3373263">(</span><span class="ident" id="3373264">b</span><span class="op" id="3373265">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373268">for</span>&nbsp;<span class="op" id="3373272">;</span>&nbsp;<span class="ident" id="3373274">i</span>&nbsp;<span class="op" id="3373276">&gt;</span>&nbsp;<span class="num" id="3373278">0</span><span class="op" id="3373279">;</span>&nbsp;<span class="ident" id="3373281">i</span>&nbsp;<span class="op" id="3373283">/=</span>&nbsp;<span class="num" id="3373286">10</span>&nbsp;<span class="op" id="3373289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373293">bp</span><span class="op" id="3373295">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373300">b</span><span class="op" id="3373301">[</span><span class="ident" id="3373302">bp</span><span class="op" id="3373304">]</span>&nbsp;<span class="op" id="3373306">=</span>&nbsp;<span class="builtintype" id="3373308">byte</span><span class="op" id="3373312">(</span><span class="ident" id="3373313">i</span><span class="op" id="3373314">%</span><span class="num" id="3373315">10</span><span class="op" id="3373317">)</span>&nbsp;<span class="op" id="3373319">+</span>&nbsp;<span class="string" id="3373321">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373330">return</span>&nbsp;<span class="builtintype" id="3373337">string</span><span class="op" id="3373343">(</span><span class="ident" id="3373344">b</span><span class="op" id="3373345">[</span><span class="ident" id="3373346">bp</span><span class="op" id="3373348">:</span><span class="op" id="3373349">]</span><span class="op" id="3373350">)</span><br>
<span class="lineno"></span><span class="op" id="3373352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3373355">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;a&nbsp;hexadecimal&nbsp;string.&nbsp;Leading&nbsp;zeros&nbsp;are&nbsp;not&nbsp;printed.</span><br>
<span class="lineno"></span><span class="keyword" id="3373424">func</span>&nbsp;<span class="ident" id="3373429">appendHex</span><span class="op" id="3373438">(</span><span class="ident" id="3373439">dst</span>&nbsp;<span class="op" id="3373443">[</span><span class="op" id="3373444">]</span><span class="builtintype" id="3373445">byte</span><span class="op" id="3373449">,</span>&nbsp;<span class="ident" id="3373451">i</span>&nbsp;<span class="builtintype" id="3373453">uint32</span><span class="op" id="3373459">)</span>&nbsp;<span class="op" id="3373461">[</span><span class="op" id="3373462">]</span><span class="builtintype" id="3373463">byte</span>&nbsp;<span class="op" id="3373468">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373471">if</span>&nbsp;<span class="ident" id="3373474">i</span>&nbsp;<span class="op" id="3373476">==</span>&nbsp;<span class="num" id="3373479">0</span>&nbsp;<span class="op" id="3373481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373485">return</span>&nbsp;<span class="builtinfunc" id="3373492">append</span><span class="op" id="3373498">(</span><span class="ident" id="3373499">dst</span><span class="op" id="3373502">,</span>&nbsp;<span class="string" id="3373504">&#39;0&#39;</span><span class="op" id="3373507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373513">for</span>&nbsp;<span class="ident" id="3373517">j</span>&nbsp;<span class="op" id="3373519">:=</span>&nbsp;<span class="num" id="3373522">7</span><span class="op" id="3373523">;</span>&nbsp;<span class="ident" id="3373525">j</span>&nbsp;<span class="op" id="3373527">&gt;=</span>&nbsp;<span class="num" id="3373530">0</span><span class="op" id="3373531">;</span>&nbsp;<span class="ident" id="3373533">j</span><span class="op" id="3373534">--</span>&nbsp;<span class="op" id="3373537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373541">v</span>&nbsp;<span class="op" id="3373543">:=</span>&nbsp;<span class="ident" id="3373546">i</span>&nbsp;<span class="op" id="3373548">&gt;&gt;</span>&nbsp;<span class="builtintype" id="3373551">uint</span><span class="op" id="3373555">(</span><span class="ident" id="3373556">j</span><span class="op" id="3373557">*</span><span class="num" id="3373558">4</span><span class="op" id="3373559">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373563">if</span>&nbsp;<span class="ident" id="3373566">v</span>&nbsp;<span class="op" id="3373568">&gt;</span>&nbsp;<span class="num" id="3373570">0</span>&nbsp;<span class="op" id="3373572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373577">dst</span>&nbsp;<span class="op" id="3373581">=</span>&nbsp;<span class="builtinfunc" id="3373583">append</span><span class="op" id="3373589">(</span><span class="ident" id="3373590">dst</span><span class="op" id="3373593">,</span>&nbsp;<span class="ident" id="3373595">hexDigit</span><span class="op" id="3373603">[</span><span class="ident" id="3373604">v</span><span class="op" id="3373605">&amp;</span><span class="num" id="3373606">0xf</span><span class="op" id="3373609">]</span><span class="op" id="3373610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373620">return</span>&nbsp;<span class="ident" id="3373627">dst</span><br>
<span class="lineno">225</span><span class="op" id="3373631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3373634">//&nbsp;Number&nbsp;of&nbsp;occurrences&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3373670">func</span>&nbsp;<span class="ident" id="3373675">count</span><span class="op" id="3373680">(</span><span class="ident" id="3373681">s</span>&nbsp;<span class="builtintype" id="3373683">string</span><span class="op" id="3373689">,</span>&nbsp;<span class="ident" id="3373691">b</span>&nbsp;<span class="builtintype" id="3373693">byte</span><span class="op" id="3373697">)</span>&nbsp;<span class="builtintype" id="3373699">int</span>&nbsp;<span class="op" id="3373703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373706">n</span>&nbsp;<span class="op" id="3373708">:=</span>&nbsp;<span class="num" id="3373711">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373714">for</span>&nbsp;<span class="ident" id="3373718">i</span>&nbsp;<span class="op" id="3373720">:=</span>&nbsp;<span class="num" id="3373723">0</span><span class="op" id="3373724">;</span>&nbsp;<span class="ident" id="3373726">i</span>&nbsp;<span class="op" id="3373728">&lt;</span>&nbsp;<span class="builtinfunc" id="3373730">len</span><span class="op" id="3373733">(</span><span class="ident" id="3373734">s</span><span class="op" id="3373735">)</span><span class="op" id="3373736">;</span>&nbsp;<span class="ident" id="3373738">i</span><span class="op" id="3373739">++</span>&nbsp;<span class="op" id="3373742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373746">if</span>&nbsp;<span class="ident" id="3373749">s</span><span class="op" id="3373750">[</span><span class="ident" id="3373751">i</span><span class="op" id="3373752">]</span>&nbsp;<span class="op" id="3373754">==</span>&nbsp;<span class="ident" id="3373757">b</span>&nbsp;<span class="op" id="3373759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373764">n</span><span class="op" id="3373765">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373773">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373776">return</span>&nbsp;<span class="ident" id="3373783">n</span><br>
<span class="lineno"></span><span class="op" id="3373785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3373788">//&nbsp;Index&nbsp;of&nbsp;rightmost&nbsp;occurrence&nbsp;of&nbsp;b&nbsp;in&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3373832">func</span>&nbsp;<span class="ident" id="3373837">last</span><span class="op" id="3373841">(</span><span class="ident" id="3373842">s</span>&nbsp;<span class="builtintype" id="3373844">string</span><span class="op" id="3373850">,</span>&nbsp;<span class="ident" id="3373852">b</span>&nbsp;<span class="builtintype" id="3373854">byte</span><span class="op" id="3373858">)</span>&nbsp;<span class="builtintype" id="3373860">int</span>&nbsp;<span class="op" id="3373864">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3373867">i</span>&nbsp;<span class="op" id="3373869">:=</span>&nbsp;<span class="builtinfunc" id="3373872">len</span><span class="op" id="3373875">(</span><span class="ident" id="3373876">s</span><span class="op" id="3373877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373880">for</span>&nbsp;<span class="ident" id="3373884">i</span><span class="op" id="3373885">--</span><span class="op" id="3373887">;</span>&nbsp;<span class="ident" id="3373889">i</span>&nbsp;<span class="op" id="3373891">&gt;=</span>&nbsp;<span class="num" id="3373894">0</span><span class="op" id="3373895">;</span>&nbsp;<span class="ident" id="3373897">i</span><span class="op" id="3373898">--</span>&nbsp;<span class="op" id="3373901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373905">if</span>&nbsp;<span class="ident" id="3373908">s</span><span class="op" id="3373909">[</span><span class="ident" id="3373910">i</span><span class="op" id="3373911">]</span>&nbsp;<span class="op" id="3373913">==</span>&nbsp;<span class="ident" id="3373916">b</span>&nbsp;<span class="op" id="3373918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373923">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373931">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3373934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3373937">return</span>&nbsp;<span class="ident" id="3373944">i</span><br>
<span class="lineno"></span><span class="op" id="3373946">}</span>
</div>
</body>
</html>
