<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html" class="current">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6629180">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6629235">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6629289">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6629340">package</span>&nbsp;<span class="ident" id="6629348">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6629358">import</span>&nbsp;<span class="op" id="6629365">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6629368">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6629377">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6629385">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6629396">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6629406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6629409">func</span>&nbsp;<span class="ident" id="6629414">TestNextJsCtx</span><span class="op" id="6629427">(</span><span class="ident" id="6629428">t</span>&nbsp;<span class="op" id="6629430">*</span><span class="ident" id="6629431">testing</span><span class="op" id="6629438">.</span><span class="ident" id="6629439">T</span><span class="op" id="6629440">)</span>&nbsp;<span class="op" id="6629442">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6629445">tests</span>&nbsp;<span class="op" id="6629451">:=</span>&nbsp;<span class="op" id="6629454">[</span><span class="op" id="6629455">]</span><span class="keyword" id="6629456">struct</span>&nbsp;<span class="op" id="6629463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6629467">jsCtx</span>&nbsp;<span class="ident" id="6629473">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6629481">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6629487">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6629495">}</span><span class="op" id="6629496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629500">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6629544">{</span><span class="ident" id="6629545">jsCtxRegexp</span><span class="op" id="6629556">,</span>&nbsp;<span class="string" id="6629558">&#34;;&#34;</span><span class="op" id="6629561">}</span><span class="op" id="6629562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629566">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629593">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629646">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629709">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629772">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629795">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6629845">{</span><span class="ident" id="6629846">jsCtxRegexp</span><span class="op" id="6629857">,</span>&nbsp;<span class="string" id="6629859">&#34;}&#34;</span><span class="op" id="6629862">}</span><span class="op" id="6629863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629867">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629933">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6629955">{</span><span class="ident" id="6629956">jsCtxDivOp</span><span class="op" id="6629966">,</span>&nbsp;<span class="string" id="6629968">&#34;)&#34;</span><span class="op" id="6629971">}</span><span class="op" id="6629972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6629976">{</span><span class="ident" id="6629977">jsCtxDivOp</span><span class="op" id="6629987">,</span>&nbsp;<span class="string" id="6629989">&#34;]&#34;</span><span class="op" id="6629992">}</span><span class="op" id="6629993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6629997">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630061">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630094">{</span><span class="ident" id="6630095">jsCtxRegexp</span><span class="op" id="6630106">,</span>&nbsp;<span class="string" id="6630108">&#34;(&#34;</span><span class="op" id="6630111">}</span><span class="op" id="6630112">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630116">{</span><span class="ident" id="6630117">jsCtxRegexp</span><span class="op" id="6630128">,</span>&nbsp;<span class="string" id="6630130">&#34;[&#34;</span><span class="op" id="6630133">}</span><span class="op" id="6630134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630138">{</span><span class="ident" id="6630139">jsCtxRegexp</span><span class="op" id="6630150">,</span>&nbsp;<span class="string" id="6630152">&#34;{&#34;</span><span class="op" id="6630155">}</span><span class="op" id="6630156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630160">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630224">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630258">{</span><span class="ident" id="6630259">jsCtxRegexp</span><span class="op" id="6630270">,</span>&nbsp;<span class="string" id="6630272">&#34;=&#34;</span><span class="op" id="6630275">}</span><span class="op" id="6630276">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630280">{</span><span class="ident" id="6630281">jsCtxRegexp</span><span class="op" id="6630292">,</span>&nbsp;<span class="string" id="6630294">&#34;+=&#34;</span><span class="op" id="6630298">}</span><span class="op" id="6630299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630303">{</span><span class="ident" id="6630304">jsCtxRegexp</span><span class="op" id="6630315">,</span>&nbsp;<span class="string" id="6630317">&#34;*=&#34;</span><span class="op" id="6630321">}</span><span class="op" id="6630322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630326">{</span><span class="ident" id="6630327">jsCtxRegexp</span><span class="op" id="6630338">,</span>&nbsp;<span class="string" id="6630340">&#34;*&#34;</span><span class="op" id="6630343">}</span><span class="op" id="6630344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630348">{</span><span class="ident" id="6630349">jsCtxRegexp</span><span class="op" id="6630360">,</span>&nbsp;<span class="string" id="6630362">&#34;!&#34;</span><span class="op" id="6630365">}</span><span class="op" id="6630366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630370">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630434">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630447">{</span><span class="ident" id="6630448">jsCtxRegexp</span><span class="op" id="6630459">,</span>&nbsp;<span class="string" id="6630461">&#34;+&#34;</span><span class="op" id="6630464">}</span><span class="op" id="6630465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630469">{</span><span class="ident" id="6630470">jsCtxRegexp</span><span class="op" id="6630481">,</span>&nbsp;<span class="string" id="6630483">&#34;-&#34;</span><span class="op" id="6630486">}</span><span class="op" id="6630487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630491">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630537">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630599">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630663">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630712">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630776">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630789">{</span><span class="ident" id="6630790">jsCtxDivOp</span><span class="op" id="6630800">,</span>&nbsp;<span class="string" id="6630802">&#34;--&#34;</span><span class="op" id="6630806">}</span><span class="op" id="6630807">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630811">{</span><span class="ident" id="6630812">jsCtxDivOp</span><span class="op" id="6630822">,</span>&nbsp;<span class="string" id="6630824">&#34;++&#34;</span><span class="op" id="6630828">}</span><span class="op" id="6630829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630833">{</span><span class="ident" id="6630834">jsCtxDivOp</span><span class="op" id="6630844">,</span>&nbsp;<span class="string" id="6630846">&#34;x--&#34;</span><span class="op" id="6630851">}</span><span class="op" id="6630852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630856">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630919">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630939">{</span><span class="ident" id="6630940">jsCtxRegexp</span><span class="op" id="6630951">,</span>&nbsp;<span class="string" id="6630953">&#34;x---&#34;</span><span class="op" id="6630959">}</span><span class="op" id="6630960">,</span>&nbsp;<span class="comment" id="6630962">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6630990">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631056">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631123">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631142">{</span><span class="ident" id="6631143">jsCtxRegexp</span><span class="op" id="6631154">,</span>&nbsp;<span class="string" id="6631156">&#34;return&#34;</span><span class="op" id="6631164">}</span><span class="op" id="6631165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631169">{</span><span class="ident" id="6631170">jsCtxRegexp</span><span class="op" id="6631181">,</span>&nbsp;<span class="string" id="6631183">&#34;return&nbsp;&#34;</span><span class="op" id="6631192">}</span><span class="op" id="6631193">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631197">{</span><span class="ident" id="6631198">jsCtxRegexp</span><span class="op" id="6631209">,</span>&nbsp;<span class="string" id="6631211">&#34;return\t&#34;</span><span class="op" id="6631221">}</span><span class="op" id="6631222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631226">{</span><span class="ident" id="6631227">jsCtxRegexp</span><span class="op" id="6631238">,</span>&nbsp;<span class="string" id="6631240">&#34;return\n&#34;</span><span class="op" id="6631250">}</span><span class="op" id="6631251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631255">{</span><span class="ident" id="6631256">jsCtxRegexp</span><span class="op" id="6631267">,</span>&nbsp;<span class="string" id="6631269">&#34;return\u2028&#34;</span><span class="op" id="6631283">}</span><span class="op" id="6631284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631288">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631354">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631416">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631482">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631547">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631613">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631624">{</span><span class="ident" id="6631625">jsCtxDivOp</span><span class="op" id="6631635">,</span>&nbsp;<span class="string" id="6631637">&#34;x&#34;</span><span class="op" id="6631640">}</span><span class="op" id="6631641">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631645">{</span><span class="ident" id="6631646">jsCtxDivOp</span><span class="op" id="6631656">,</span>&nbsp;<span class="string" id="6631658">&#34;x&nbsp;&#34;</span><span class="op" id="6631662">}</span><span class="op" id="6631663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631667">{</span><span class="ident" id="6631668">jsCtxDivOp</span><span class="op" id="6631678">,</span>&nbsp;<span class="string" id="6631680">&#34;x\t&#34;</span><span class="op" id="6631685">}</span><span class="op" id="6631686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631690">{</span><span class="ident" id="6631691">jsCtxDivOp</span><span class="op" id="6631701">,</span>&nbsp;<span class="string" id="6631703">&#34;x\n&#34;</span><span class="op" id="6631708">}</span><span class="op" id="6631709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631713">{</span><span class="ident" id="6631714">jsCtxDivOp</span><span class="op" id="6631724">,</span>&nbsp;<span class="string" id="6631726">&#34;x\u2028&#34;</span><span class="op" id="6631735">}</span><span class="op" id="6631736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631740">{</span><span class="ident" id="6631741">jsCtxDivOp</span><span class="op" id="6631751">,</span>&nbsp;<span class="string" id="6631753">&#34;preturn&#34;</span><span class="op" id="6631762">}</span><span class="op" id="6631763">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631767">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631797">{</span><span class="ident" id="6631798">jsCtxDivOp</span><span class="op" id="6631808">,</span>&nbsp;<span class="string" id="6631810">&#34;0&#34;</span><span class="op" id="6631813">}</span><span class="op" id="6631814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6631818">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631873">{</span><span class="ident" id="6631874">jsCtxDivOp</span><span class="op" id="6631884">,</span>&nbsp;<span class="string" id="6631886">&#34;0.&#34;</span><span class="op" id="6631890">}</span><span class="op" id="6631891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631894">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631898">for</span>&nbsp;<span class="ident" id="6631902">_</span><span class="op" id="6631903">,</span>&nbsp;<span class="ident" id="6631905">test</span>&nbsp;<span class="op" id="6631910">:=</span>&nbsp;<span class="keyword" id="6631913">range</span>&nbsp;<span class="ident" id="6631919">tests</span>&nbsp;<span class="op" id="6631925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631929">if</span>&nbsp;<span class="ident" id="6631932">nextJSCtx</span><span class="op" id="6631941">(</span><span class="op" id="6631942">[</span><span class="op" id="6631943">]</span><span class="builtintype" id="6631944">byte</span><span class="op" id="6631948">(</span><span class="ident" id="6631949">test</span><span class="op" id="6631953">.</span><span class="ident" id="6631954">s</span><span class="op" id="6631955">)</span><span class="op" id="6631956">,</span>&nbsp;<span class="ident" id="6631958">jsCtxRegexp</span><span class="op" id="6631969">)</span>&nbsp;<span class="op" id="6631971">!=</span>&nbsp;<span class="ident" id="6631974">test</span><span class="op" id="6631978">.</span><span class="ident" id="6631979">jsCtx</span>&nbsp;<span class="op" id="6631985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631990">t</span><span class="op" id="6631991">.</span><span class="ident" id="6631992">Errorf</span><span class="op" id="6631998">(</span><span class="string" id="6631999">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6632015">,</span>&nbsp;<span class="ident" id="6632017">test</span><span class="op" id="6632021">.</span><span class="ident" id="6632022">jsCtx</span><span class="op" id="6632027">,</span>&nbsp;<span class="ident" id="6632029">test</span><span class="op" id="6632033">.</span><span class="ident" id="6632034">s</span><span class="op" id="6632035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632039">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632043">if</span>&nbsp;<span class="ident" id="6632046">nextJSCtx</span><span class="op" id="6632055">(</span><span class="op" id="6632056">[</span><span class="op" id="6632057">]</span><span class="builtintype" id="6632058">byte</span><span class="op" id="6632062">(</span><span class="ident" id="6632063">test</span><span class="op" id="6632067">.</span><span class="ident" id="6632068">s</span><span class="op" id="6632069">)</span><span class="op" id="6632070">,</span>&nbsp;<span class="ident" id="6632072">jsCtxDivOp</span><span class="op" id="6632082">)</span>&nbsp;<span class="op" id="6632084">!=</span>&nbsp;<span class="ident" id="6632087">test</span><span class="op" id="6632091">.</span><span class="ident" id="6632092">jsCtx</span>&nbsp;<span class="op" id="6632098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632103">t</span><span class="op" id="6632104">.</span><span class="ident" id="6632105">Errorf</span><span class="op" id="6632111">(</span><span class="string" id="6632112">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6632128">,</span>&nbsp;<span class="ident" id="6632130">test</span><span class="op" id="6632134">.</span><span class="ident" id="6632135">jsCtx</span><span class="op" id="6632140">,</span>&nbsp;<span class="ident" id="6632142">test</span><span class="op" id="6632146">.</span><span class="ident" id="6632147">s</span><span class="op" id="6632148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632159">if</span>&nbsp;<span class="ident" id="6632162">nextJSCtx</span><span class="op" id="6632171">(</span><span class="op" id="6632172">[</span><span class="op" id="6632173">]</span><span class="builtintype" id="6632174">byte</span><span class="op" id="6632178">(</span><span class="string" id="6632179">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6632184">)</span><span class="op" id="6632185">,</span>&nbsp;<span class="ident" id="6632187">jsCtxRegexp</span><span class="op" id="6632198">)</span>&nbsp;<span class="op" id="6632200">!=</span>&nbsp;<span class="ident" id="6632203">jsCtxRegexp</span>&nbsp;<span class="op" id="6632215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632219">t</span><span class="op" id="6632220">.</span><span class="ident" id="6632221">Error</span><span class="op" id="6632226">(</span><span class="string" id="6632227">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6632241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632248">if</span>&nbsp;<span class="ident" id="6632251">nextJSCtx</span><span class="op" id="6632260">(</span><span class="op" id="6632261">[</span><span class="op" id="6632262">]</span><span class="builtintype" id="6632263">byte</span><span class="op" id="6632267">(</span><span class="string" id="6632268">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="6632273">)</span><span class="op" id="6632274">,</span>&nbsp;<span class="ident" id="6632276">jsCtxDivOp</span><span class="op" id="6632286">)</span>&nbsp;<span class="op" id="6632288">!=</span>&nbsp;<span class="ident" id="6632291">jsCtxDivOp</span>&nbsp;<span class="op" id="6632302">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632306">t</span><span class="op" id="6632307">.</span><span class="ident" id="6632308">Error</span><span class="op" id="6632313">(</span><span class="string" id="6632314">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="6632328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632331">}</span><br>
<span class="lineno"></span><span class="op" id="6632333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6632336">func</span>&nbsp;<span class="ident" id="6632341">TestJSValEscaper</span><span class="op" id="6632357">(</span><span class="ident" id="6632358">t</span>&nbsp;<span class="op" id="6632360">*</span><span class="ident" id="6632361">testing</span><span class="op" id="6632368">.</span><span class="ident" id="6632369">T</span><span class="op" id="6632370">)</span>&nbsp;<span class="op" id="6632372">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632375">tests</span>&nbsp;<span class="op" id="6632381">:=</span>&nbsp;<span class="op" id="6632384">[</span><span class="op" id="6632385">]</span><span class="keyword" id="6632386">struct</span>&nbsp;<span class="op" id="6632393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632397">x</span>&nbsp;&nbsp;<span class="keyword" id="6632400">interface</span><span class="op" id="6632409">{</span><span class="op" id="6632410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632414">js</span>&nbsp;<span class="builtintype" id="6632417">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632425">}</span><span class="op" id="6632426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632430">{</span><span class="builtintype" id="6632431">int</span><span class="op" id="6632434">(</span><span class="num" id="6632435">42</span><span class="op" id="6632437">)</span><span class="op" id="6632438">,</span>&nbsp;<span class="string" id="6632440">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632446">}</span><span class="op" id="6632447">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632451">{</span><span class="builtintype" id="6632452">uint</span><span class="op" id="6632456">(</span><span class="num" id="6632457">42</span><span class="op" id="6632459">)</span><span class="op" id="6632460">,</span>&nbsp;<span class="string" id="6632462">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632468">}</span><span class="op" id="6632469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632473">{</span><span class="builtintype" id="6632474">int16</span><span class="op" id="6632479">(</span><span class="num" id="6632480">42</span><span class="op" id="6632482">)</span><span class="op" id="6632483">,</span>&nbsp;<span class="string" id="6632485">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632491">}</span><span class="op" id="6632492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632496">{</span><span class="builtintype" id="6632497">uint16</span><span class="op" id="6632503">(</span><span class="num" id="6632504">42</span><span class="op" id="6632506">)</span><span class="op" id="6632507">,</span>&nbsp;<span class="string" id="6632509">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632515">}</span><span class="op" id="6632516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632520">{</span><span class="builtintype" id="6632521">int32</span><span class="op" id="6632526">(</span><span class="op" id="6632527">-</span><span class="num" id="6632528">42</span><span class="op" id="6632530">)</span><span class="op" id="6632531">,</span>&nbsp;<span class="string" id="6632533">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6632540">}</span><span class="op" id="6632541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632545">{</span><span class="builtintype" id="6632546">uint32</span><span class="op" id="6632552">(</span><span class="num" id="6632553">42</span><span class="op" id="6632555">)</span><span class="op" id="6632556">,</span>&nbsp;<span class="string" id="6632558">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632564">}</span><span class="op" id="6632565">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632569">{</span><span class="builtintype" id="6632570">int16</span><span class="op" id="6632575">(</span><span class="op" id="6632576">-</span><span class="num" id="6632577">42</span><span class="op" id="6632579">)</span><span class="op" id="6632580">,</span>&nbsp;<span class="string" id="6632582">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6632589">}</span><span class="op" id="6632590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632594">{</span><span class="builtintype" id="6632595">uint16</span><span class="op" id="6632601">(</span><span class="num" id="6632602">42</span><span class="op" id="6632604">)</span><span class="op" id="6632605">,</span>&nbsp;<span class="string" id="6632607">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632613">}</span><span class="op" id="6632614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632618">{</span><span class="ident" id="6632619">int64</span><span class="op" id="6632624">(</span><span class="op" id="6632625">-</span><span class="num" id="6632626">42</span><span class="op" id="6632628">)</span><span class="op" id="6632629">,</span>&nbsp;<span class="string" id="6632631">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="6632638">}</span><span class="op" id="6632639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632643">{</span><span class="ident" id="6632644">uint64</span><span class="op" id="6632650">(</span><span class="num" id="6632651">42</span><span class="op" id="6632653">)</span><span class="op" id="6632654">,</span>&nbsp;<span class="string" id="6632656">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="6632662">}</span><span class="op" id="6632663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632667">{</span><span class="ident" id="6632668">uint64</span><span class="op" id="6632674">(</span><span class="num" id="6632675">1</span><span class="op" id="6632676">)</span>&nbsp;<span class="op" id="6632678">&lt;&lt;</span>&nbsp;<span class="num" id="6632681">53</span><span class="op" id="6632683">,</span>&nbsp;<span class="string" id="6632685">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="6632705">}</span><span class="op" id="6632706">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6632710">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6632762">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632816">{</span><span class="ident" id="6632817">uint64</span><span class="op" id="6632823">(</span><span class="num" id="6632824">1</span><span class="op" id="6632825">)</span><span class="op" id="6632826">&lt;&lt;</span><span class="num" id="6632828">53</span>&nbsp;<span class="op" id="6632831">+</span>&nbsp;<span class="num" id="6632833">1</span><span class="op" id="6632834">,</span>&nbsp;<span class="string" id="6632836">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="6632856">}</span><span class="op" id="6632857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632861">{</span><span class="builtintype" id="6632862">float32</span><span class="op" id="6632869">(</span><span class="num" id="6632870">1.0</span><span class="op" id="6632873">)</span><span class="op" id="6632874">,</span>&nbsp;<span class="string" id="6632876">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6632881">}</span><span class="op" id="6632882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632886">{</span><span class="builtintype" id="6632887">float32</span><span class="op" id="6632894">(</span><span class="op" id="6632895">-</span><span class="num" id="6632896">1.0</span><span class="op" id="6632899">)</span><span class="op" id="6632900">,</span>&nbsp;<span class="string" id="6632902">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6632908">}</span><span class="op" id="6632909">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632913">{</span><span class="builtintype" id="6632914">float32</span><span class="op" id="6632921">(</span><span class="num" id="6632922">0.5</span><span class="op" id="6632925">)</span><span class="op" id="6632926">,</span>&nbsp;<span class="string" id="6632928">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6632935">}</span><span class="op" id="6632936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632940">{</span><span class="builtintype" id="6632941">float32</span><span class="op" id="6632948">(</span><span class="op" id="6632949">-</span><span class="num" id="6632950">0.5</span><span class="op" id="6632953">)</span><span class="op" id="6632954">,</span>&nbsp;<span class="string" id="6632956">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6632964">}</span><span class="op" id="6632965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632969">{</span><span class="builtintype" id="6632970">float32</span><span class="op" id="6632977">(</span><span class="num" id="6632978">1.0</span><span class="op" id="6632981">)</span>&nbsp;<span class="op" id="6632983">/</span>&nbsp;<span class="builtintype" id="6632985">float32</span><span class="op" id="6632992">(</span><span class="num" id="6632993">256</span><span class="op" id="6632996">)</span><span class="op" id="6632997">,</span>&nbsp;<span class="string" id="6632999">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="6633013">}</span><span class="op" id="6633014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633018">{</span><span class="builtintype" id="6633019">float32</span><span class="op" id="6633026">(</span><span class="num" id="6633027">0</span><span class="op" id="6633028">)</span><span class="op" id="6633029">,</span>&nbsp;<span class="string" id="6633031">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6633036">}</span><span class="op" id="6633037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633041">{</span><span class="ident" id="6633042">math</span><span class="op" id="6633046">.</span><span class="ident" id="6633047">Copysign</span><span class="op" id="6633055">(</span><span class="num" id="6633056">0</span><span class="op" id="6633057">,</span>&nbsp;<span class="op" id="6633059">-</span><span class="num" id="6633060">1</span><span class="op" id="6633061">)</span><span class="op" id="6633062">,</span>&nbsp;<span class="string" id="6633064">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6633070">}</span><span class="op" id="6633071">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633075">{</span><span class="builtintype" id="6633076">float64</span><span class="op" id="6633083">(</span><span class="num" id="6633084">1.0</span><span class="op" id="6633087">)</span><span class="op" id="6633088">,</span>&nbsp;<span class="string" id="6633090">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="6633095">}</span><span class="op" id="6633096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633100">{</span><span class="builtintype" id="6633101">float64</span><span class="op" id="6633108">(</span><span class="op" id="6633109">-</span><span class="num" id="6633110">1.0</span><span class="op" id="6633113">)</span><span class="op" id="6633114">,</span>&nbsp;<span class="string" id="6633116">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="6633122">}</span><span class="op" id="6633123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633127">{</span><span class="builtintype" id="6633128">float64</span><span class="op" id="6633135">(</span><span class="num" id="6633136">0.5</span><span class="op" id="6633139">)</span><span class="op" id="6633140">,</span>&nbsp;<span class="string" id="6633142">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="6633149">}</span><span class="op" id="6633150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633154">{</span><span class="builtintype" id="6633155">float64</span><span class="op" id="6633162">(</span><span class="op" id="6633163">-</span><span class="num" id="6633164">0.5</span><span class="op" id="6633167">)</span><span class="op" id="6633168">,</span>&nbsp;<span class="string" id="6633170">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="6633178">}</span><span class="op" id="6633179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633183">{</span><span class="builtintype" id="6633184">float64</span><span class="op" id="6633191">(</span><span class="num" id="6633192">0</span><span class="op" id="6633193">)</span><span class="op" id="6633194">,</span>&nbsp;<span class="string" id="6633196">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="6633201">}</span><span class="op" id="6633202">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633206">{</span><span class="ident" id="6633207">math</span><span class="op" id="6633211">.</span><span class="ident" id="6633212">Copysign</span><span class="op" id="6633220">(</span><span class="num" id="6633221">0</span><span class="op" id="6633222">,</span>&nbsp;<span class="op" id="6633224">-</span><span class="num" id="6633225">1</span><span class="op" id="6633226">)</span><span class="op" id="6633227">,</span>&nbsp;<span class="string" id="6633229">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="6633235">}</span><span class="op" id="6633236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633240">{</span><span class="string" id="6633241">&#34;&#34;</span><span class="op" id="6633243">,</span>&nbsp;<span class="string" id="6633245">`&#34;&#34;`</span><span class="op" id="6633249">}</span><span class="op" id="6633250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633254">{</span><span class="string" id="6633255">&#34;foo&#34;</span><span class="op" id="6633260">,</span>&nbsp;<span class="string" id="6633262">`&#34;foo&#34;`</span><span class="op" id="6633269">}</span><span class="op" id="6633270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6633274">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633289">{</span><span class="string" id="6633290">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="6633308">,</span>&nbsp;<span class="string" id="6633310">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="6633330">}</span><span class="op" id="6633331">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6633335">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633383">{</span><span class="string" id="6633384">&#34;\t\x0b&#34;</span><span class="op" id="6633392">,</span>&nbsp;<span class="string" id="6633394">`&#34;\t\u000b&#34;`</span><span class="op" id="6633406">}</span><span class="op" id="6633407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633411">{</span><span class="keyword" id="6633412">struct</span><span class="op" id="6633418">{</span>&nbsp;<span class="ident" id="6633420">X</span><span class="op" id="6633421">,</span>&nbsp;<span class="ident" id="6633423">Y</span>&nbsp;<span class="builtintype" id="6633425">int</span>&nbsp;<span class="op" id="6633429">}</span><span class="op" id="6633430">{</span><span class="num" id="6633431">1</span><span class="op" id="6633432">,</span>&nbsp;<span class="num" id="6633434">2</span><span class="op" id="6633435">}</span><span class="op" id="6633436">,</span>&nbsp;<span class="string" id="6633438">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="6633453">}</span><span class="op" id="6633454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633458">{</span><span class="op" id="6633459">[</span><span class="op" id="6633460">]</span><span class="keyword" id="6633461">interface</span><span class="op" id="6633470">{</span><span class="op" id="6633471">}</span><span class="op" id="6633472">{</span><span class="op" id="6633473">}</span><span class="op" id="6633474">,</span>&nbsp;<span class="string" id="6633476">&#34;[]&#34;</span><span class="op" id="6633480">}</span><span class="op" id="6633481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633485">{</span><span class="op" id="6633486">[</span><span class="op" id="6633487">]</span><span class="keyword" id="6633488">interface</span><span class="op" id="6633497">{</span><span class="op" id="6633498">}</span><span class="op" id="6633499">{</span><span class="num" id="6633500">42</span><span class="op" id="6633502">,</span>&nbsp;<span class="string" id="6633504">&#34;foo&#34;</span><span class="op" id="6633509">,</span>&nbsp;<span class="ident" id="6633511">nil</span><span class="op" id="6633514">}</span><span class="op" id="6633515">,</span>&nbsp;<span class="string" id="6633517">`[42,&#34;foo&#34;,null]`</span><span class="op" id="6633534">}</span><span class="op" id="6633535">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633539">{</span><span class="op" id="6633540">[</span><span class="op" id="6633541">]</span><span class="builtintype" id="6633542">string</span><span class="op" id="6633548">{</span><span class="string" id="6633549">&#34;&lt;!--&#34;</span><span class="op" id="6633555">,</span>&nbsp;<span class="string" id="6633557">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6633568">,</span>&nbsp;<span class="string" id="6633570">&#34;--&gt;&#34;</span><span class="op" id="6633575">}</span><span class="op" id="6633576">,</span>&nbsp;<span class="string" id="6633578">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="6633626">}</span><span class="op" id="6633627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633631">{</span><span class="string" id="6633632">&#34;&lt;!--&#34;</span><span class="op" id="6633638">,</span>&nbsp;<span class="string" id="6633640">`&#34;\u003c!--&#34;`</span><span class="op" id="6633653">}</span><span class="op" id="6633654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633658">{</span><span class="string" id="6633659">&#34;--&gt;&#34;</span><span class="op" id="6633664">,</span>&nbsp;<span class="string" id="6633666">`&#34;--\u003e&#34;`</span><span class="op" id="6633678">}</span><span class="op" id="6633679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633683">{</span><span class="string" id="6633684">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6633695">,</span>&nbsp;<span class="string" id="6633697">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="6633715">}</span><span class="op" id="6633716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633720">{</span><span class="string" id="6633721">&#34;]]&gt;&#34;</span><span class="op" id="6633726">,</span>&nbsp;<span class="string" id="6633728">`&#34;]]\u003e&#34;`</span><span class="op" id="6633740">}</span><span class="op" id="6633741">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633745">{</span><span class="string" id="6633746">&#34;&lt;/script&#34;</span><span class="op" id="6633756">,</span>&nbsp;<span class="string" id="6633758">`&#34;\u003c/script&#34;`</span><span class="op" id="6633775">}</span><span class="op" id="6633776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633780">{</span><span class="string" id="6633781">&#34;\U0001D11E&#34;</span><span class="op" id="6633793">,</span>&nbsp;<span class="string" id="6633795">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="6633811">}</span><span class="op" id="6633812">,</span>&nbsp;<span class="comment" id="6633814">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633840">for</span>&nbsp;<span class="ident" id="6633844">_</span><span class="op" id="6633845">,</span>&nbsp;<span class="ident" id="6633847">test</span>&nbsp;<span class="op" id="6633852">:=</span>&nbsp;<span class="keyword" id="6633855">range</span>&nbsp;<span class="ident" id="6633861">tests</span>&nbsp;<span class="op" id="6633867">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633871">if</span>&nbsp;<span class="ident" id="6633874">js</span>&nbsp;<span class="op" id="6633877">:=</span>&nbsp;<span class="ident" id="6633880">jsValEscaper</span><span class="op" id="6633892">(</span><span class="ident" id="6633893">test</span><span class="op" id="6633897">.</span><span class="ident" id="6633898">x</span><span class="op" id="6633899">)</span><span class="op" id="6633900">;</span>&nbsp;<span class="ident" id="6633902">js</span>&nbsp;<span class="op" id="6633905">!=</span>&nbsp;<span class="ident" id="6633908">test</span><span class="op" id="6633912">.</span><span class="ident" id="6633913">js</span>&nbsp;<span class="op" id="6633916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633921">t</span><span class="op" id="6633922">.</span><span class="ident" id="6633923">Errorf</span><span class="op" id="6633929">(</span><span class="string" id="6633930">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6633958">,</span>&nbsp;<span class="ident" id="6633960">test</span><span class="op" id="6633964">.</span><span class="ident" id="6633965">x</span><span class="op" id="6633966">,</span>&nbsp;<span class="ident" id="6633968">test</span><span class="op" id="6633972">.</span><span class="ident" id="6633973">js</span><span class="op" id="6633975">,</span>&nbsp;<span class="ident" id="6633977">js</span><span class="op" id="6633979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6633987">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634044">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634061">a</span>&nbsp;<span class="op" id="6634063">:=</span>&nbsp;<span class="op" id="6634066">[</span><span class="op" id="6634067">]</span><span class="keyword" id="6634068">interface</span><span class="op" id="6634077">{</span><span class="op" id="6634078">}</span><span class="op" id="6634079">{</span><span class="ident" id="6634080">test</span><span class="op" id="6634084">.</span><span class="ident" id="6634085">x</span><span class="op" id="6634086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634090">want</span>&nbsp;<span class="op" id="6634095">:=</span>&nbsp;<span class="string" id="6634098">&#34;[&#34;</span>&nbsp;<span class="op" id="6634102">+</span>&nbsp;<span class="ident" id="6634104">strings</span><span class="op" id="6634111">.</span><span class="ident" id="6634112">TrimSpace</span><span class="op" id="6634121">(</span><span class="ident" id="6634122">test</span><span class="op" id="6634126">.</span><span class="ident" id="6634127">js</span><span class="op" id="6634129">)</span>&nbsp;<span class="op" id="6634131">+</span>&nbsp;<span class="string" id="6634133">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6634139">if</span>&nbsp;<span class="ident" id="6634142">js</span>&nbsp;<span class="op" id="6634145">:=</span>&nbsp;<span class="ident" id="6634148">jsValEscaper</span><span class="op" id="6634160">(</span><span class="ident" id="6634161">a</span><span class="op" id="6634162">)</span><span class="op" id="6634163">;</span>&nbsp;<span class="ident" id="6634165">js</span>&nbsp;<span class="op" id="6634168">!=</span>&nbsp;<span class="ident" id="6634171">want</span>&nbsp;<span class="op" id="6634176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634181">t</span><span class="op" id="6634182">.</span><span class="ident" id="6634183">Errorf</span><span class="op" id="6634189">(</span><span class="string" id="6634190">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6634218">,</span>&nbsp;<span class="ident" id="6634220">a</span><span class="op" id="6634221">,</span>&nbsp;<span class="ident" id="6634223">want</span><span class="op" id="6634227">,</span>&nbsp;<span class="ident" id="6634229">js</span><span class="op" id="6634231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634235">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634238">}</span><br>
<span class="lineno"></span><span class="op" id="6634240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6634243">func</span>&nbsp;<span class="ident" id="6634248">TestJSStrEscaper</span><span class="op" id="6634264">(</span><span class="ident" id="6634265">t</span>&nbsp;<span class="op" id="6634267">*</span><span class="ident" id="6634268">testing</span><span class="op" id="6634275">.</span><span class="ident" id="6634276">T</span><span class="op" id="6634277">)</span>&nbsp;<span class="op" id="6634279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634282">tests</span>&nbsp;<span class="op" id="6634288">:=</span>&nbsp;<span class="op" id="6634291">[</span><span class="op" id="6634292">]</span><span class="keyword" id="6634293">struct</span>&nbsp;<span class="op" id="6634300">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634304">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6634308">interface</span><span class="op" id="6634317">{</span><span class="op" id="6634318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634322">esc</span>&nbsp;<span class="builtintype" id="6634326">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634334">}</span><span class="op" id="6634335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634339">{</span><span class="string" id="6634340">&#34;&#34;</span><span class="op" id="6634342">,</span>&nbsp;<span class="string" id="6634344">``</span><span class="op" id="6634346">}</span><span class="op" id="6634347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634351">{</span><span class="string" id="6634352">&#34;foo&#34;</span><span class="op" id="6634357">,</span>&nbsp;<span class="string" id="6634359">`foo`</span><span class="op" id="6634364">}</span><span class="op" id="6634365">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634369">{</span><span class="string" id="6634370">&#34;\u0000&#34;</span><span class="op" id="6634378">,</span>&nbsp;<span class="string" id="6634380">`\0`</span><span class="op" id="6634384">}</span><span class="op" id="6634385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634389">{</span><span class="string" id="6634390">&#34;\t&#34;</span><span class="op" id="6634394">,</span>&nbsp;<span class="string" id="6634396">`\t`</span><span class="op" id="6634400">}</span><span class="op" id="6634401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634405">{</span><span class="string" id="6634406">&#34;\n&#34;</span><span class="op" id="6634410">,</span>&nbsp;<span class="string" id="6634412">`\n`</span><span class="op" id="6634416">}</span><span class="op" id="6634417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634421">{</span><span class="string" id="6634422">&#34;\r&#34;</span><span class="op" id="6634426">,</span>&nbsp;<span class="string" id="6634428">`\r`</span><span class="op" id="6634432">}</span><span class="op" id="6634433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634437">{</span><span class="string" id="6634438">&#34;\u2028&#34;</span><span class="op" id="6634446">,</span>&nbsp;<span class="string" id="6634448">`\u2028`</span><span class="op" id="6634456">}</span><span class="op" id="6634457">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634461">{</span><span class="string" id="6634462">&#34;\u2029&#34;</span><span class="op" id="6634470">,</span>&nbsp;<span class="string" id="6634472">`\u2029`</span><span class="op" id="6634480">}</span><span class="op" id="6634481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634485">{</span><span class="string" id="6634486">&#34;\\&#34;</span><span class="op" id="6634490">,</span>&nbsp;<span class="string" id="6634492">`\\`</span><span class="op" id="6634496">}</span><span class="op" id="6634497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634501">{</span><span class="string" id="6634502">&#34;\\n&#34;</span><span class="op" id="6634507">,</span>&nbsp;<span class="string" id="6634509">`\\n`</span><span class="op" id="6634514">}</span><span class="op" id="6634515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634519">{</span><span class="string" id="6634520">&#34;foo\r\nbar&#34;</span><span class="op" id="6634532">,</span>&nbsp;<span class="string" id="6634534">`foo\r\nbar`</span><span class="op" id="6634546">}</span><span class="op" id="6634547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634551">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634587">{</span><span class="string" id="6634588">`&#34;`</span><span class="op" id="6634591">,</span>&nbsp;<span class="string" id="6634593">`\x22`</span><span class="op" id="6634599">}</span><span class="op" id="6634600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634604">{</span><span class="string" id="6634605">`&#39;`</span><span class="op" id="6634608">,</span>&nbsp;<span class="string" id="6634610">`\x27`</span><span class="op" id="6634616">}</span><span class="op" id="6634617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634621">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634676">{</span><span class="string" id="6634677">`&amp;amp;`</span><span class="op" id="6634684">,</span>&nbsp;<span class="string" id="6634686">`\x26amp;`</span><span class="op" id="6634696">}</span><span class="op" id="6634697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634701">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634764">{</span><span class="string" id="6634765">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6634776">,</span>&nbsp;<span class="string" id="6634778">`\x3c\/script\x3e`</span><span class="op" id="6634796">}</span><span class="op" id="6634797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634801">{</span><span class="string" id="6634802">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6634813">,</span>&nbsp;<span class="string" id="6634815">`\x3c![CDATA[`</span><span class="op" id="6634829">}</span><span class="op" id="6634830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6634834">{</span><span class="string" id="6634835">&#34;]]&gt;&#34;</span><span class="op" id="6634840">,</span>&nbsp;<span class="string" id="6634842">`]]\x3e`</span><span class="op" id="6634850">}</span><span class="op" id="6634851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634855">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634927">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6634991">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635052">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635099">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635163">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635230">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635296">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635356">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635420">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635471">{</span><span class="string" id="6635472">&#34;&lt;!--&#34;</span><span class="op" id="6635478">,</span>&nbsp;<span class="string" id="6635480">`\x3c!--`</span><span class="op" id="6635489">}</span><span class="op" id="6635490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635494">{</span><span class="string" id="6635495">&#34;--&gt;&#34;</span><span class="op" id="6635500">,</span>&nbsp;<span class="string" id="6635502">`--\x3e`</span><span class="op" id="6635510">}</span><span class="op" id="6635511">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635515">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635575">{</span><span class="string" id="6635576">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="6635619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635624">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="6635680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635684">}</span><span class="op" id="6635685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635689">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635717">{</span><span class="string" id="6635718">&#34;foo\xA0bar&#34;</span><span class="op" id="6635730">,</span>&nbsp;<span class="string" id="6635732">&#34;foo\xA0bar&#34;</span><span class="op" id="6635744">}</span><span class="op" id="6635745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6635749">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635784">{</span><span class="string" id="6635785">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6635805">,</span>&nbsp;<span class="string" id="6635807">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="6635827">}</span><span class="op" id="6635828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635835">for</span>&nbsp;<span class="ident" id="6635839">_</span><span class="op" id="6635840">,</span>&nbsp;<span class="ident" id="6635842">test</span>&nbsp;<span class="op" id="6635847">:=</span>&nbsp;<span class="keyword" id="6635850">range</span>&nbsp;<span class="ident" id="6635856">tests</span>&nbsp;<span class="op" id="6635862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635866">esc</span>&nbsp;<span class="op" id="6635870">:=</span>&nbsp;<span class="ident" id="6635873">jsStrEscaper</span><span class="op" id="6635885">(</span><span class="ident" id="6635886">test</span><span class="op" id="6635890">.</span><span class="ident" id="6635891">x</span><span class="op" id="6635892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6635896">if</span>&nbsp;<span class="ident" id="6635899">esc</span>&nbsp;<span class="op" id="6635903">!=</span>&nbsp;<span class="ident" id="6635906">test</span><span class="op" id="6635910">.</span><span class="ident" id="6635911">esc</span>&nbsp;<span class="op" id="6635915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635920">t</span><span class="op" id="6635921">.</span><span class="ident" id="6635922">Errorf</span><span class="op" id="6635928">(</span><span class="string" id="6635929">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6635949">,</span>&nbsp;<span class="ident" id="6635951">test</span><span class="op" id="6635955">.</span><span class="ident" id="6635956">x</span><span class="op" id="6635957">,</span>&nbsp;<span class="ident" id="6635959">test</span><span class="op" id="6635963">.</span><span class="ident" id="6635964">esc</span><span class="op" id="6635967">,</span>&nbsp;<span class="ident" id="6635969">esc</span><span class="op" id="6635972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635976">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6635979">}</span><br>
<span class="lineno"></span><span class="op" id="6635981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6635984">func</span>&nbsp;<span class="ident" id="6635989">TestJSRegexpEscaper</span><span class="op" id="6636008">(</span><span class="ident" id="6636009">t</span>&nbsp;<span class="op" id="6636011">*</span><span class="ident" id="6636012">testing</span><span class="op" id="6636019">.</span><span class="ident" id="6636020">T</span><span class="op" id="6636021">)</span>&nbsp;<span class="op" id="6636023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636026">tests</span>&nbsp;<span class="op" id="6636032">:=</span>&nbsp;<span class="op" id="6636035">[</span><span class="op" id="6636036">]</span><span class="keyword" id="6636037">struct</span>&nbsp;<span class="op" id="6636044">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636048">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636052">interface</span><span class="op" id="6636061">{</span><span class="op" id="6636062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636066">esc</span>&nbsp;<span class="builtintype" id="6636070">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636078">}</span><span class="op" id="6636079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636083">{</span><span class="string" id="6636084">&#34;&#34;</span><span class="op" id="6636086">,</span>&nbsp;<span class="string" id="6636088">`(?:)`</span><span class="op" id="6636094">}</span><span class="op" id="6636095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636099">{</span><span class="string" id="6636100">&#34;foo&#34;</span><span class="op" id="6636105">,</span>&nbsp;<span class="string" id="6636107">`foo`</span><span class="op" id="6636112">}</span><span class="op" id="6636113">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636117">{</span><span class="string" id="6636118">&#34;\u0000&#34;</span><span class="op" id="6636126">,</span>&nbsp;<span class="string" id="6636128">`\0`</span><span class="op" id="6636132">}</span><span class="op" id="6636133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636137">{</span><span class="string" id="6636138">&#34;\t&#34;</span><span class="op" id="6636142">,</span>&nbsp;<span class="string" id="6636144">`\t`</span><span class="op" id="6636148">}</span><span class="op" id="6636149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636153">{</span><span class="string" id="6636154">&#34;\n&#34;</span><span class="op" id="6636158">,</span>&nbsp;<span class="string" id="6636160">`\n`</span><span class="op" id="6636164">}</span><span class="op" id="6636165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636169">{</span><span class="string" id="6636170">&#34;\r&#34;</span><span class="op" id="6636174">,</span>&nbsp;<span class="string" id="6636176">`\r`</span><span class="op" id="6636180">}</span><span class="op" id="6636181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636185">{</span><span class="string" id="6636186">&#34;\u2028&#34;</span><span class="op" id="6636194">,</span>&nbsp;<span class="string" id="6636196">`\u2028`</span><span class="op" id="6636204">}</span><span class="op" id="6636205">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636209">{</span><span class="string" id="6636210">&#34;\u2029&#34;</span><span class="op" id="6636218">,</span>&nbsp;<span class="string" id="6636220">`\u2029`</span><span class="op" id="6636228">}</span><span class="op" id="6636229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636233">{</span><span class="string" id="6636234">&#34;\\&#34;</span><span class="op" id="6636238">,</span>&nbsp;<span class="string" id="6636240">`\\`</span><span class="op" id="6636244">}</span><span class="op" id="6636245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636249">{</span><span class="string" id="6636250">&#34;\\n&#34;</span><span class="op" id="6636255">,</span>&nbsp;<span class="string" id="6636257">`\\n`</span><span class="op" id="6636262">}</span><span class="op" id="6636263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636267">{</span><span class="string" id="6636268">&#34;foo\r\nbar&#34;</span><span class="op" id="6636280">,</span>&nbsp;<span class="string" id="6636282">`foo\r\nbar`</span><span class="op" id="6636294">}</span><span class="op" id="6636295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6636299">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636335">{</span><span class="string" id="6636336">`&#34;`</span><span class="op" id="6636339">,</span>&nbsp;<span class="string" id="6636341">`\x22`</span><span class="op" id="6636347">}</span><span class="op" id="6636348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636352">{</span><span class="string" id="6636353">`&#39;`</span><span class="op" id="6636356">,</span>&nbsp;<span class="string" id="6636358">`\x27`</span><span class="op" id="6636364">}</span><span class="op" id="6636365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6636369">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636424">{</span><span class="string" id="6636425">`&amp;amp;`</span><span class="op" id="6636432">,</span>&nbsp;<span class="string" id="6636434">`\x26amp;`</span><span class="op" id="6636444">}</span><span class="op" id="6636445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6636449">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636512">{</span><span class="string" id="6636513">&#34;&lt;/script&gt;&#34;</span><span class="op" id="6636524">,</span>&nbsp;<span class="string" id="6636526">`\x3c\/script\x3e`</span><span class="op" id="6636544">}</span><span class="op" id="6636545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636549">{</span><span class="string" id="6636550">&#34;&lt;![CDATA[&#34;</span><span class="op" id="6636561">,</span>&nbsp;<span class="string" id="6636563">`\x3c!\[CDATA\[`</span><span class="op" id="6636579">}</span><span class="op" id="6636580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636584">{</span><span class="string" id="6636585">&#34;]]&gt;&#34;</span><span class="op" id="6636590">,</span>&nbsp;<span class="string" id="6636592">`\]\]\x3e`</span><span class="op" id="6636602">}</span><span class="op" id="6636603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6636607">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636633">{</span><span class="string" id="6636634">&#34;&lt;!--&#34;</span><span class="op" id="6636640">,</span>&nbsp;<span class="string" id="6636642">`\x3c!\-\-`</span><span class="op" id="6636653">}</span><span class="op" id="6636654">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636658">{</span><span class="string" id="6636659">&#34;--&gt;&#34;</span><span class="op" id="6636664">,</span>&nbsp;<span class="string" id="6636666">`\-\-\x3e`</span><span class="op" id="6636676">}</span><span class="op" id="6636677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636681">{</span><span class="string" id="6636682">&#34;*&#34;</span><span class="op" id="6636685">,</span>&nbsp;<span class="string" id="6636687">`\*`</span><span class="op" id="6636691">}</span><span class="op" id="6636692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636696">{</span><span class="string" id="6636697">&#34;+&#34;</span><span class="op" id="6636700">,</span>&nbsp;<span class="string" id="6636702">`\x2b`</span><span class="op" id="6636708">}</span><span class="op" id="6636709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636713">{</span><span class="string" id="6636714">&#34;?&#34;</span><span class="op" id="6636717">,</span>&nbsp;<span class="string" id="6636719">`\?`</span><span class="op" id="6636723">}</span><span class="op" id="6636724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636728">{</span><span class="string" id="6636729">&#34;[](){}&#34;</span><span class="op" id="6636737">,</span>&nbsp;<span class="string" id="6636739">`\[\]\(\)\{\}`</span><span class="op" id="6636753">}</span><span class="op" id="6636754">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636758">{</span><span class="string" id="6636759">&#34;$foo|x.y&#34;</span><span class="op" id="6636769">,</span>&nbsp;<span class="string" id="6636771">`\$foo\|x\.y`</span><span class="op" id="6636784">}</span><span class="op" id="6636785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636789">{</span><span class="string" id="6636790">&#34;x^y&#34;</span><span class="op" id="6636795">,</span>&nbsp;<span class="string" id="6636797">`x\^y`</span><span class="op" id="6636803">}</span><span class="op" id="6636804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636811">for</span>&nbsp;<span class="ident" id="6636815">_</span><span class="op" id="6636816">,</span>&nbsp;<span class="ident" id="6636818">test</span>&nbsp;<span class="op" id="6636823">:=</span>&nbsp;<span class="keyword" id="6636826">range</span>&nbsp;<span class="ident" id="6636832">tests</span>&nbsp;<span class="op" id="6636838">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636842">esc</span>&nbsp;<span class="op" id="6636846">:=</span>&nbsp;<span class="ident" id="6636849">jsRegexpEscaper</span><span class="op" id="6636864">(</span><span class="ident" id="6636865">test</span><span class="op" id="6636869">.</span><span class="ident" id="6636870">x</span><span class="op" id="6636871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6636875">if</span>&nbsp;<span class="ident" id="6636878">esc</span>&nbsp;<span class="op" id="6636882">!=</span>&nbsp;<span class="ident" id="6636885">test</span><span class="op" id="6636889">.</span><span class="ident" id="6636890">esc</span>&nbsp;<span class="op" id="6636894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6636899">t</span><span class="op" id="6636900">.</span><span class="ident" id="6636901">Errorf</span><span class="op" id="6636907">(</span><span class="string" id="6636908">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6636928">,</span>&nbsp;<span class="ident" id="6636930">test</span><span class="op" id="6636934">.</span><span class="ident" id="6636935">x</span><span class="op" id="6636936">,</span>&nbsp;<span class="ident" id="6636938">test</span><span class="op" id="6636942">.</span><span class="ident" id="6636943">esc</span><span class="op" id="6636946">,</span>&nbsp;<span class="ident" id="6636948">esc</span><span class="op" id="6636951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6636958">}</span><br>
<span class="lineno">265</span><span class="op" id="6636960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6636963">func</span>&nbsp;<span class="ident" id="6636968">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="6637011">(</span><span class="ident" id="6637012">t</span>&nbsp;<span class="op" id="6637014">*</span><span class="ident" id="6637015">testing</span><span class="op" id="6637022">.</span><span class="ident" id="6637023">T</span><span class="op" id="6637024">)</span>&nbsp;<span class="op" id="6637026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637029">input</span>&nbsp;<span class="op" id="6637035">:=</span>&nbsp;<span class="op" id="6637038">(</span><span class="string" id="6637039">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="6637100">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637104">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6637171">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637175">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="6637194">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637198">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="6637217">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637221">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6637240">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637244">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="6637263">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637267">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6637286">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637290">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6637312">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637316">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6637358">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637362">tests</span>&nbsp;<span class="op" id="6637368">:=</span>&nbsp;<span class="op" id="6637371">[</span><span class="op" id="6637372">]</span><span class="keyword" id="6637373">struct</span>&nbsp;<span class="op" id="6637380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637384">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6637392">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637401">escaper</span>&nbsp;<span class="keyword" id="6637409">func</span><span class="op" id="6637413">(</span><span class="op" id="6637414">...</span><span class="keyword" id="6637417">interface</span><span class="op" id="6637426">{</span><span class="op" id="6637427">}</span><span class="op" id="6637428">)</span>&nbsp;<span class="builtintype" id="6637430">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637439">escaped</span>&nbsp;<span class="builtintype" id="6637447">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637455">}</span><span class="op" id="6637456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637465">&#34;jsStrEscaper&#34;</span><span class="op" id="6637479">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637484">jsStrEscaper</span><span class="op" id="6637496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637501">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6637535">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637541">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6637573">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637579">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6637614">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637620">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6637655">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637661">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="6637693">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637699">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="6637724">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637730">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6637749">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637755">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="6637775">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637781">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6637800">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637806">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="6637828">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637834">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6637878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637882">}</span><span class="op" id="6637883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6637887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637892">&#34;jsRegexpEscaper&#34;</span><span class="op" id="6637909">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6637914">jsRegexpEscaper</span><span class="op" id="6637929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637934">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="6637968">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6637974">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="6638006">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638012">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="6638047">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638053">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="6638088">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638094">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="6638132">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638138">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="6638164">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638170">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="6638189">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638195">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="6638218">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638224">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="6638243">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638249">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="6638270">+</span>&nbsp;<span class="string" id="6638272">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="6638281">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6638287">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="6638331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638335">}</span><span class="op" id="6638336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638343">for</span>&nbsp;<span class="ident" id="6638347">_</span><span class="op" id="6638348">,</span>&nbsp;<span class="ident" id="6638350">test</span>&nbsp;<span class="op" id="6638355">:=</span>&nbsp;<span class="keyword" id="6638358">range</span>&nbsp;<span class="ident" id="6638364">tests</span>&nbsp;<span class="op" id="6638370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638374">if</span>&nbsp;<span class="ident" id="6638377">s</span>&nbsp;<span class="op" id="6638379">:=</span>&nbsp;<span class="ident" id="6638382">test</span><span class="op" id="6638386">.</span><span class="ident" id="6638387">escaper</span><span class="op" id="6638394">(</span><span class="ident" id="6638395">input</span><span class="op" id="6638400">)</span><span class="op" id="6638401">;</span>&nbsp;<span class="ident" id="6638403">s</span>&nbsp;<span class="op" id="6638405">!=</span>&nbsp;<span class="ident" id="6638408">test</span><span class="op" id="6638412">.</span><span class="ident" id="6638413">escaped</span>&nbsp;<span class="op" id="6638421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638426">t</span><span class="op" id="6638427">.</span><span class="ident" id="6638428">Errorf</span><span class="op" id="6638434">(</span><span class="string" id="6638435">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6638467">,</span>&nbsp;<span class="ident" id="6638469">test</span><span class="op" id="6638473">.</span><span class="ident" id="6638474">name</span><span class="op" id="6638478">,</span>&nbsp;<span class="ident" id="6638480">test</span><span class="op" id="6638484">.</span><span class="ident" id="6638485">escaped</span><span class="op" id="6638492">,</span>&nbsp;<span class="ident" id="6638494">s</span><span class="op" id="6638495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638500">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638511">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6638516">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6638566">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638615">var</span>&nbsp;<span class="ident" id="6638619">buf</span>&nbsp;<span class="ident" id="6638623">bytes</span><span class="op" id="6638628">.</span><span class="ident" id="6638629">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638638">for</span>&nbsp;<span class="ident" id="6638642">_</span><span class="op" id="6638643">,</span>&nbsp;<span class="ident" id="6638645">c</span>&nbsp;<span class="op" id="6638647">:=</span>&nbsp;<span class="keyword" id="6638650">range</span>&nbsp;<span class="ident" id="6638656">input</span>&nbsp;<span class="op" id="6638662">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638667">buf</span><span class="op" id="6638670">.</span><span class="ident" id="6638671">WriteString</span><span class="op" id="6638682">(</span><span class="ident" id="6638683">test</span><span class="op" id="6638687">.</span><span class="ident" id="6638688">escaper</span><span class="op" id="6638695">(</span><span class="builtintype" id="6638696">string</span><span class="op" id="6638702">(</span><span class="ident" id="6638703">c</span><span class="op" id="6638704">)</span><span class="op" id="6638705">)</span><span class="op" id="6638706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638715">if</span>&nbsp;<span class="ident" id="6638718">s</span>&nbsp;<span class="op" id="6638720">:=</span>&nbsp;<span class="ident" id="6638723">buf</span><span class="op" id="6638726">.</span><span class="ident" id="6638727">String</span><span class="op" id="6638733">(</span><span class="op" id="6638734">)</span><span class="op" id="6638735">;</span>&nbsp;<span class="ident" id="6638737">s</span>&nbsp;<span class="op" id="6638739">!=</span>&nbsp;<span class="ident" id="6638742">test</span><span class="op" id="6638746">.</span><span class="ident" id="6638747">escaped</span>&nbsp;<span class="op" id="6638755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638760">t</span><span class="op" id="6638761">.</span><span class="ident" id="6638762">Errorf</span><span class="op" id="6638768">(</span><span class="string" id="6638769">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="6638806">,</span>&nbsp;<span class="ident" id="6638808">test</span><span class="op" id="6638812">.</span><span class="ident" id="6638813">name</span><span class="op" id="6638817">,</span>&nbsp;<span class="ident" id="6638819">test</span><span class="op" id="6638823">.</span><span class="ident" id="6638824">escaped</span><span class="op" id="6638831">,</span>&nbsp;<span class="ident" id="6638833">s</span><span class="op" id="6638834">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638839">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638853">}</span><br>
<span class="lineno"></span><span class="op" id="6638855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="6638858">func</span>&nbsp;<span class="ident" id="6638863">BenchmarkJSValEscaperWithNum</span><span class="op" id="6638891">(</span><span class="ident" id="6638892">b</span>&nbsp;<span class="op" id="6638894">*</span><span class="ident" id="6638895">testing</span><span class="op" id="6638902">.</span><span class="ident" id="6638903">B</span><span class="op" id="6638904">)</span>&nbsp;<span class="op" id="6638906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6638909">for</span>&nbsp;<span class="ident" id="6638913">i</span>&nbsp;<span class="op" id="6638915">:=</span>&nbsp;<span class="num" id="6638918">0</span><span class="op" id="6638919">;</span>&nbsp;<span class="ident" id="6638921">i</span>&nbsp;<span class="op" id="6638923">&lt;</span>&nbsp;<span class="ident" id="6638925">b</span><span class="op" id="6638926">.</span><span class="ident" id="6638927">N</span><span class="op" id="6638928">;</span>&nbsp;<span class="ident" id="6638930">i</span><span class="op" id="6638931">++</span>&nbsp;<span class="op" id="6638934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6638938">jsValEscaper</span><span class="op" id="6638950">(</span><span class="num" id="6638951">3.141592654</span><span class="op" id="6638962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6638965">}</span><br>
<span class="lineno"></span><span class="op" id="6638967">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="6638970">func</span>&nbsp;<span class="ident" id="6638975">BenchmarkJSValEscaperWithStr</span><span class="op" id="6639003">(</span><span class="ident" id="6639004">b</span>&nbsp;<span class="op" id="6639006">*</span><span class="ident" id="6639007">testing</span><span class="op" id="6639014">.</span><span class="ident" id="6639015">B</span><span class="op" id="6639016">)</span>&nbsp;<span class="op" id="6639018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639021">for</span>&nbsp;<span class="ident" id="6639025">i</span>&nbsp;<span class="op" id="6639027">:=</span>&nbsp;<span class="num" id="6639030">0</span><span class="op" id="6639031">;</span>&nbsp;<span class="ident" id="6639033">i</span>&nbsp;<span class="op" id="6639035">&lt;</span>&nbsp;<span class="ident" id="6639037">b</span><span class="op" id="6639038">.</span><span class="ident" id="6639039">N</span><span class="op" id="6639040">;</span>&nbsp;<span class="ident" id="6639042">i</span><span class="op" id="6639043">++</span>&nbsp;<span class="op" id="6639046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639050">jsValEscaper</span><span class="op" id="6639062">(</span><span class="string" id="6639063">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6639184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639187">}</span><br>
<span class="lineno">345</span><span class="op" id="6639189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6639192">func</span>&nbsp;<span class="ident" id="6639197">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="6639235">(</span><span class="ident" id="6639236">b</span>&nbsp;<span class="op" id="6639238">*</span><span class="ident" id="6639239">testing</span><span class="op" id="6639246">.</span><span class="ident" id="6639247">B</span><span class="op" id="6639248">)</span>&nbsp;<span class="op" id="6639250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639253">for</span>&nbsp;<span class="ident" id="6639257">i</span>&nbsp;<span class="op" id="6639259">:=</span>&nbsp;<span class="num" id="6639262">0</span><span class="op" id="6639263">;</span>&nbsp;<span class="ident" id="6639265">i</span>&nbsp;<span class="op" id="6639267">&lt;</span>&nbsp;<span class="ident" id="6639269">b</span><span class="op" id="6639270">.</span><span class="ident" id="6639271">N</span><span class="op" id="6639272">;</span>&nbsp;<span class="ident" id="6639274">i</span><span class="op" id="6639275">++</span>&nbsp;<span class="op" id="6639278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639282">jsValEscaper</span><span class="op" id="6639294">(</span><span class="string" id="6639295">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6639341">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639344">}</span><br>
<span class="lineno"></span><span class="op" id="6639346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6639349">func</span>&nbsp;<span class="ident" id="6639354">BenchmarkJSValEscaperWithObj</span><span class="op" id="6639382">(</span><span class="ident" id="6639383">b</span>&nbsp;<span class="op" id="6639385">*</span><span class="ident" id="6639386">testing</span><span class="op" id="6639393">.</span><span class="ident" id="6639394">B</span><span class="op" id="6639395">)</span>&nbsp;<span class="op" id="6639397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639400">o</span>&nbsp;<span class="op" id="6639402">:=</span>&nbsp;<span class="keyword" id="6639405">struct</span>&nbsp;<span class="op" id="6639412">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639416">S</span>&nbsp;<span class="builtintype" id="6639418">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639427">N</span>&nbsp;<span class="builtintype" id="6639429">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639434">}</span><span class="op" id="6639435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639439">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="6639566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6639570">42</span><span class="op" id="6639572">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639578">for</span>&nbsp;<span class="ident" id="6639582">i</span>&nbsp;<span class="op" id="6639584">:=</span>&nbsp;<span class="num" id="6639587">0</span><span class="op" id="6639588">;</span>&nbsp;<span class="ident" id="6639590">i</span>&nbsp;<span class="op" id="6639592">&lt;</span>&nbsp;<span class="ident" id="6639594">b</span><span class="op" id="6639595">.</span><span class="ident" id="6639596">N</span><span class="op" id="6639597">;</span>&nbsp;<span class="ident" id="6639599">i</span><span class="op" id="6639600">++</span>&nbsp;<span class="op" id="6639603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639607">jsValEscaper</span><span class="op" id="6639619">(</span><span class="ident" id="6639620">o</span><span class="op" id="6639621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639624">}</span><br>
<span class="lineno"></span><span class="op" id="6639626">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="6639629">func</span>&nbsp;<span class="ident" id="6639634">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="6639672">(</span><span class="ident" id="6639673">b</span>&nbsp;<span class="op" id="6639675">*</span><span class="ident" id="6639676">testing</span><span class="op" id="6639683">.</span><span class="ident" id="6639684">B</span><span class="op" id="6639685">)</span>&nbsp;<span class="op" id="6639687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639690">o</span>&nbsp;<span class="op" id="6639692">:=</span>&nbsp;<span class="keyword" id="6639695">struct</span>&nbsp;<span class="op" id="6639702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639706">S</span>&nbsp;<span class="builtintype" id="6639708">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639717">N</span>&nbsp;<span class="builtintype" id="6639719">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639724">}</span><span class="op" id="6639725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6639729">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6639775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6639779">42</span><span class="op" id="6639781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639787">for</span>&nbsp;<span class="ident" id="6639791">i</span>&nbsp;<span class="op" id="6639793">:=</span>&nbsp;<span class="num" id="6639796">0</span><span class="op" id="6639797">;</span>&nbsp;<span class="ident" id="6639799">i</span>&nbsp;<span class="op" id="6639801">&lt;</span>&nbsp;<span class="ident" id="6639803">b</span><span class="op" id="6639804">.</span><span class="ident" id="6639805">N</span><span class="op" id="6639806">;</span>&nbsp;<span class="ident" id="6639808">i</span><span class="op" id="6639809">++</span>&nbsp;<span class="op" id="6639812">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639816">jsValEscaper</span><span class="op" id="6639828">(</span><span class="ident" id="6639829">o</span><span class="op" id="6639830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639833">}</span><br>
<span class="lineno"></span><span class="op" id="6639835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6639838">func</span>&nbsp;<span class="ident" id="6639843">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="6639874">(</span><span class="ident" id="6639875">b</span>&nbsp;<span class="op" id="6639877">*</span><span class="ident" id="6639878">testing</span><span class="op" id="6639885">.</span><span class="ident" id="6639886">B</span><span class="op" id="6639887">)</span>&nbsp;<span class="op" id="6639889">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6639892">for</span>&nbsp;<span class="ident" id="6639896">i</span>&nbsp;<span class="op" id="6639898">:=</span>&nbsp;<span class="num" id="6639901">0</span><span class="op" id="6639902">;</span>&nbsp;<span class="ident" id="6639904">i</span>&nbsp;<span class="op" id="6639906">&lt;</span>&nbsp;<span class="ident" id="6639908">b</span><span class="op" id="6639909">.</span><span class="ident" id="6639910">N</span><span class="op" id="6639911">;</span>&nbsp;<span class="ident" id="6639913">i</span><span class="op" id="6639914">++</span>&nbsp;<span class="op" id="6639917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6639921">jsStrEscaper</span><span class="op" id="6639933">(</span><span class="string" id="6639934">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="6639981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6639984">}</span><br>
<span class="lineno"></span><span class="op" id="6639986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="6639989">func</span>&nbsp;<span class="ident" id="6639994">BenchmarkJSStrEscaper</span><span class="op" id="6640015">(</span><span class="ident" id="6640016">b</span>&nbsp;<span class="op" id="6640018">*</span><span class="ident" id="6640019">testing</span><span class="op" id="6640026">.</span><span class="ident" id="6640027">B</span><span class="op" id="6640028">)</span>&nbsp;<span class="op" id="6640030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640033">for</span>&nbsp;<span class="ident" id="6640037">i</span>&nbsp;<span class="op" id="6640039">:=</span>&nbsp;<span class="num" id="6640042">0</span><span class="op" id="6640043">;</span>&nbsp;<span class="ident" id="6640045">i</span>&nbsp;<span class="op" id="6640047">&lt;</span>&nbsp;<span class="ident" id="6640049">b</span><span class="op" id="6640050">.</span><span class="ident" id="6640051">N</span><span class="op" id="6640052">;</span>&nbsp;<span class="ident" id="6640054">i</span><span class="op" id="6640055">++</span>&nbsp;<span class="op" id="6640058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640062">jsStrEscaper</span><span class="op" id="6640074">(</span><span class="string" id="6640075">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6640196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640199">}</span><br>
<span class="lineno"></span><span class="op" id="6640201">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="6640204">func</span>&nbsp;<span class="ident" id="6640209">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="6640243">(</span><span class="ident" id="6640244">b</span>&nbsp;<span class="op" id="6640246">*</span><span class="ident" id="6640247">testing</span><span class="op" id="6640254">.</span><span class="ident" id="6640255">B</span><span class="op" id="6640256">)</span>&nbsp;<span class="op" id="6640258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640261">for</span>&nbsp;<span class="ident" id="6640265">i</span>&nbsp;<span class="op" id="6640267">:=</span>&nbsp;<span class="num" id="6640270">0</span><span class="op" id="6640271">;</span>&nbsp;<span class="ident" id="6640273">i</span>&nbsp;<span class="op" id="6640275">&lt;</span>&nbsp;<span class="ident" id="6640277">b</span><span class="op" id="6640278">.</span><span class="ident" id="6640279">N</span><span class="op" id="6640280">;</span>&nbsp;<span class="ident" id="6640282">i</span><span class="op" id="6640283">++</span>&nbsp;<span class="op" id="6640286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640290">jsRegexpEscaper</span><span class="op" id="6640305">(</span><span class="string" id="6640306">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="6640352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640355">}</span><br>
<span class="lineno">395</span><span class="op" id="6640357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6640360">func</span>&nbsp;<span class="ident" id="6640365">BenchmarkJSRegexpEscaper</span><span class="op" id="6640389">(</span><span class="ident" id="6640390">b</span>&nbsp;<span class="op" id="6640392">*</span><span class="ident" id="6640393">testing</span><span class="op" id="6640400">.</span><span class="ident" id="6640401">B</span><span class="op" id="6640402">)</span>&nbsp;<span class="op" id="6640404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6640407">for</span>&nbsp;<span class="ident" id="6640411">i</span>&nbsp;<span class="op" id="6640413">:=</span>&nbsp;<span class="num" id="6640416">0</span><span class="op" id="6640417">;</span>&nbsp;<span class="ident" id="6640419">i</span>&nbsp;<span class="op" id="6640421">&lt;</span>&nbsp;<span class="ident" id="6640423">b</span><span class="op" id="6640424">.</span><span class="ident" id="6640425">N</span><span class="op" id="6640426">;</span>&nbsp;<span class="ident" id="6640428">i</span><span class="op" id="6640429">++</span>&nbsp;<span class="op" id="6640432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640436">jsRegexpEscaper</span><span class="op" id="6640451">(</span><span class="string" id="6640452">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="6640573">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6640576">}</span><br>
<span class="lineno"></span><span class="op" id="6640578">}</span>
</div>
</body>
</html>
