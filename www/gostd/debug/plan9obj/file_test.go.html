<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html" class="current">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6480588">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6480644">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6480698">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6480749">package</span>&nbsp;<span class="ident" id="6480757">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6480767">import</span>&nbsp;<span class="op" id="6480774">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6480777">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6480788">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6480798">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6480801">type</span>&nbsp;<span class="ident" id="6480806">fileTest</span>&nbsp;<span class="keyword" id="6480815">struct</span>&nbsp;<span class="op" id="6480822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6480825">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6480834">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6480842">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6480851">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6480863">sections</span>&nbsp;<span class="op" id="6480872">[</span><span class="op" id="6480873">]</span><span class="op" id="6480874">*</span><span class="ident" id="6480875">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="6480889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6480892">var</span>&nbsp;<span class="ident" id="6480896">fileTests</span>&nbsp;<span class="op" id="6480906">=</span>&nbsp;<span class="op" id="6480908">[</span><span class="op" id="6480909">]</span><span class="ident" id="6480910">fileTest</span><span class="op" id="6480918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6480921">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6480925">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="6480950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6480954">FileHeader</span><span class="op" id="6480964">{</span><span class="ident" id="6480965">Magic386</span><span class="op" id="6480973">,</span>&nbsp;<span class="num" id="6480975">0x324</span><span class="op" id="6480980">,</span>&nbsp;<span class="num" id="6480982">0x14</span><span class="op" id="6480986">,</span>&nbsp;<span class="num" id="6480988">4</span><span class="op" id="6480989">,</span>&nbsp;<span class="num" id="6480991">0x1000</span><span class="op" id="6480997">,</span>&nbsp;<span class="num" id="6480999">32</span><span class="op" id="6481001">}</span><span class="op" id="6481002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481006">[</span><span class="op" id="6481007">]</span><span class="op" id="6481008">*</span><span class="ident" id="6481009">SectionHeader</span><span class="op" id="6481022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481027">{</span><span class="string" id="6481028">&#34;text&#34;</span><span class="op" id="6481034">,</span>&nbsp;<span class="num" id="6481036">0x4c5f</span><span class="op" id="6481042">,</span>&nbsp;<span class="num" id="6481044">0x20</span><span class="op" id="6481048">}</span><span class="op" id="6481049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481054">{</span><span class="string" id="6481055">&#34;data&#34;</span><span class="op" id="6481061">,</span>&nbsp;<span class="num" id="6481063">0x94c</span><span class="op" id="6481068">,</span>&nbsp;<span class="num" id="6481070">0x4c7f</span><span class="op" id="6481076">}</span><span class="op" id="6481077">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481082">{</span><span class="string" id="6481083">&#34;syms&#34;</span><span class="op" id="6481089">,</span>&nbsp;<span class="num" id="6481091">0x2c2b</span><span class="op" id="6481097">,</span>&nbsp;<span class="num" id="6481099">0x55cb</span><span class="op" id="6481105">}</span><span class="op" id="6481106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481111">{</span><span class="string" id="6481112">&#34;spsz&#34;</span><span class="op" id="6481118">,</span>&nbsp;<span class="num" id="6481120">0x0</span><span class="op" id="6481123">,</span>&nbsp;<span class="num" id="6481125">0x81f6</span><span class="op" id="6481131">}</span><span class="op" id="6481132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481137">{</span><span class="string" id="6481138">&#34;pcsz&#34;</span><span class="op" id="6481144">,</span>&nbsp;<span class="num" id="6481146">0xf7a</span><span class="op" id="6481151">,</span>&nbsp;<span class="num" id="6481153">0x81f6</span><span class="op" id="6481159">}</span><span class="op" id="6481160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481164">}</span><span class="op" id="6481165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481168">}</span><span class="op" id="6481169">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6481176">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="6481203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481207">FileHeader</span><span class="op" id="6481217">{</span><span class="ident" id="6481218">MagicAMD64</span><span class="op" id="6481228">,</span>&nbsp;<span class="num" id="6481230">0x618</span><span class="op" id="6481235">,</span>&nbsp;<span class="num" id="6481237">0x13</span><span class="op" id="6481241">,</span>&nbsp;<span class="num" id="6481243">8</span><span class="op" id="6481244">,</span>&nbsp;<span class="num" id="6481246">0x200000</span><span class="op" id="6481254">,</span>&nbsp;<span class="num" id="6481256">40</span><span class="op" id="6481258">}</span><span class="op" id="6481259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481263">[</span><span class="op" id="6481264">]</span><span class="op" id="6481265">*</span><span class="ident" id="6481266">SectionHeader</span><span class="op" id="6481279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481284">{</span><span class="string" id="6481285">&#34;text&#34;</span><span class="op" id="6481291">,</span>&nbsp;<span class="num" id="6481293">0x4213</span><span class="op" id="6481299">,</span>&nbsp;<span class="num" id="6481301">0x28</span><span class="op" id="6481305">}</span><span class="op" id="6481306">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481311">{</span><span class="string" id="6481312">&#34;data&#34;</span><span class="op" id="6481318">,</span>&nbsp;<span class="num" id="6481320">0xa80</span><span class="op" id="6481325">,</span>&nbsp;<span class="num" id="6481327">0x423b</span><span class="op" id="6481333">}</span><span class="op" id="6481334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481339">{</span><span class="string" id="6481340">&#34;syms&#34;</span><span class="op" id="6481346">,</span>&nbsp;<span class="num" id="6481348">0x2c8c</span><span class="op" id="6481354">,</span>&nbsp;<span class="num" id="6481356">0x4cbb</span><span class="op" id="6481362">}</span><span class="op" id="6481363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481368">{</span><span class="string" id="6481369">&#34;spsz&#34;</span><span class="op" id="6481375">,</span>&nbsp;<span class="num" id="6481377">0x0</span><span class="op" id="6481380">,</span>&nbsp;<span class="num" id="6481382">0x7947</span><span class="op" id="6481388">}</span><span class="op" id="6481389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481394">{</span><span class="string" id="6481395">&#34;pcsz&#34;</span><span class="op" id="6481401">,</span>&nbsp;<span class="num" id="6481403">0xca0</span><span class="op" id="6481408">,</span>&nbsp;<span class="num" id="6481410">0x7947</span><span class="op" id="6481416">}</span><span class="op" id="6481417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481421">}</span><span class="op" id="6481422">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481425">}</span><span class="op" id="6481426">,</span><br>
<span class="lineno"></span><span class="op" id="6481428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6481431">func</span>&nbsp;<span class="ident" id="6481436">TestOpen</span><span class="op" id="6481444">(</span><span class="ident" id="6481445">t</span>&nbsp;<span class="op" id="6481447">*</span><span class="ident" id="6481448">testing</span><span class="op" id="6481455">.</span><span class="ident" id="6481456">T</span><span class="op" id="6481457">)</span>&nbsp;<span class="op" id="6481459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481462">for</span>&nbsp;<span class="ident" id="6481466">i</span>&nbsp;<span class="op" id="6481468">:=</span>&nbsp;<span class="keyword" id="6481471">range</span>&nbsp;<span class="ident" id="6481477">fileTests</span>&nbsp;<span class="op" id="6481487">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481491">tt</span>&nbsp;<span class="op" id="6481494">:=</span>&nbsp;<span class="op" id="6481497">&amp;</span><span class="ident" id="6481498">fileTests</span><span class="op" id="6481507">[</span><span class="ident" id="6481508">i</span><span class="op" id="6481509">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481514">f</span><span class="op" id="6481515">,</span>&nbsp;<span class="ident" id="6481517">err</span>&nbsp;<span class="op" id="6481521">:=</span>&nbsp;<span class="ident" id="6481524">Open</span><span class="op" id="6481528">(</span><span class="ident" id="6481529">tt</span><span class="op" id="6481531">.</span><span class="ident" id="6481532">file</span><span class="op" id="6481536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481540">if</span>&nbsp;<span class="ident" id="6481543">err</span>&nbsp;<span class="op" id="6481547">!=</span>&nbsp;<span class="ident" id="6481550">nil</span>&nbsp;<span class="op" id="6481554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481559">t</span><span class="op" id="6481560">.</span><span class="ident" id="6481561">Error</span><span class="op" id="6481566">(</span><span class="ident" id="6481567">err</span><span class="op" id="6481570">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481575">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481590">if</span>&nbsp;<span class="op" id="6481593">!</span><span class="ident" id="6481594">reflect</span><span class="op" id="6481601">.</span><span class="ident" id="6481602">DeepEqual</span><span class="op" id="6481611">(</span><span class="ident" id="6481612">f</span><span class="op" id="6481613">.</span><span class="ident" id="6481614">FileHeader</span><span class="op" id="6481624">,</span>&nbsp;<span class="ident" id="6481626">tt</span><span class="op" id="6481628">.</span><span class="ident" id="6481629">hdr</span><span class="op" id="6481632">)</span>&nbsp;<span class="op" id="6481634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481639">t</span><span class="op" id="6481640">.</span><span class="ident" id="6481641">Errorf</span><span class="op" id="6481647">(</span><span class="string" id="6481648">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="6481684">,</span>&nbsp;<span class="ident" id="6481686">tt</span><span class="op" id="6481688">.</span><span class="ident" id="6481689">file</span><span class="op" id="6481693">,</span>&nbsp;<span class="ident" id="6481695">f</span><span class="op" id="6481696">.</span><span class="ident" id="6481697">FileHeader</span><span class="op" id="6481707">,</span>&nbsp;<span class="ident" id="6481709">tt</span><span class="op" id="6481711">.</span><span class="ident" id="6481712">hdr</span><span class="op" id="6481715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481720">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481736">for</span>&nbsp;<span class="ident" id="6481740">i</span><span class="op" id="6481741">,</span>&nbsp;<span class="ident" id="6481743">sh</span>&nbsp;<span class="op" id="6481746">:=</span>&nbsp;<span class="keyword" id="6481749">range</span>&nbsp;<span class="ident" id="6481755">f</span><span class="op" id="6481756">.</span><span class="ident" id="6481757">Sections</span>&nbsp;<span class="op" id="6481766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481771">if</span>&nbsp;<span class="ident" id="6481774">i</span>&nbsp;<span class="op" id="6481776">&gt;=</span>&nbsp;<span class="builtinfunc" id="6481779">len</span><span class="op" id="6481782">(</span><span class="ident" id="6481783">tt</span><span class="op" id="6481785">.</span><span class="ident" id="6481786">sections</span><span class="op" id="6481794">)</span>&nbsp;<span class="op" id="6481796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481802">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481816">have</span>&nbsp;<span class="op" id="6481821">:=</span>&nbsp;<span class="op" id="6481824">&amp;</span><span class="ident" id="6481825">sh</span><span class="op" id="6481827">.</span><span class="ident" id="6481828">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481845">want</span>&nbsp;<span class="op" id="6481850">:=</span>&nbsp;<span class="ident" id="6481853">tt</span><span class="op" id="6481855">.</span><span class="ident" id="6481856">sections</span><span class="op" id="6481864">[</span><span class="ident" id="6481865">i</span><span class="op" id="6481866">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6481871">if</span>&nbsp;<span class="op" id="6481874">!</span><span class="ident" id="6481875">reflect</span><span class="op" id="6481882">.</span><span class="ident" id="6481883">DeepEqual</span><span class="op" id="6481892">(</span><span class="ident" id="6481893">have</span><span class="op" id="6481897">,</span>&nbsp;<span class="ident" id="6481899">want</span><span class="op" id="6481903">)</span>&nbsp;<span class="op" id="6481905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6481911">t</span><span class="op" id="6481912">.</span><span class="ident" id="6481913">Errorf</span><span class="op" id="6481919">(</span><span class="string" id="6481920">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="6481968">,</span>&nbsp;<span class="ident" id="6481970">tt</span><span class="op" id="6481972">.</span><span class="ident" id="6481973">file</span><span class="op" id="6481977">,</span>&nbsp;<span class="ident" id="6481979">i</span><span class="op" id="6481980">,</span>&nbsp;<span class="ident" id="6481982">have</span><span class="op" id="6481986">,</span>&nbsp;<span class="ident" id="6481988">want</span><span class="op" id="6481992">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6481997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6482001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482005">tn</span>&nbsp;<span class="op" id="6482008">:=</span>&nbsp;<span class="builtinfunc" id="6482011">len</span><span class="op" id="6482014">(</span><span class="ident" id="6482015">tt</span><span class="op" id="6482017">.</span><span class="ident" id="6482018">sections</span><span class="op" id="6482026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482030">fn</span>&nbsp;<span class="op" id="6482033">:=</span>&nbsp;<span class="builtinfunc" id="6482036">len</span><span class="op" id="6482039">(</span><span class="ident" id="6482040">f</span><span class="op" id="6482041">.</span><span class="ident" id="6482042">Sections</span><span class="op" id="6482050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6482054">if</span>&nbsp;<span class="ident" id="6482057">tn</span>&nbsp;<span class="op" id="6482060">!=</span>&nbsp;<span class="ident" id="6482063">fn</span>&nbsp;<span class="op" id="6482066">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482071">t</span><span class="op" id="6482072">.</span><span class="ident" id="6482073">Errorf</span><span class="op" id="6482079">(</span><span class="string" id="6482080">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6482118">,</span>&nbsp;<span class="ident" id="6482120">tt</span><span class="op" id="6482122">.</span><span class="ident" id="6482123">file</span><span class="op" id="6482127">,</span>&nbsp;<span class="ident" id="6482129">fn</span><span class="op" id="6482131">,</span>&nbsp;<span class="ident" id="6482133">tn</span><span class="op" id="6482135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6482139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6482142">}</span><br>
<span class="lineno"></span><span class="op" id="6482144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6482147">func</span>&nbsp;<span class="ident" id="6482152">TestOpenFailure</span><span class="op" id="6482167">(</span><span class="ident" id="6482168">t</span>&nbsp;<span class="op" id="6482170">*</span><span class="ident" id="6482171">testing</span><span class="op" id="6482178">.</span><span class="ident" id="6482179">T</span><span class="op" id="6482180">)</span>&nbsp;<span class="op" id="6482182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482185">filename</span>&nbsp;<span class="op" id="6482194">:=</span>&nbsp;<span class="string" id="6482197">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6482210">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482238">_</span><span class="op" id="6482239">,</span>&nbsp;<span class="ident" id="6482241">err</span>&nbsp;<span class="op" id="6482245">:=</span>&nbsp;<span class="ident" id="6482248">Open</span><span class="op" id="6482252">(</span><span class="ident" id="6482253">filename</span><span class="op" id="6482261">)</span>&nbsp;<span class="comment" id="6482263">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6482279">if</span>&nbsp;<span class="ident" id="6482282">err</span>&nbsp;<span class="op" id="6482286">==</span>&nbsp;<span class="ident" id="6482289">nil</span>&nbsp;<span class="op" id="6482293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6482297">t</span><span class="op" id="6482298">.</span><span class="ident" id="6482299">Errorf</span><span class="op" id="6482305">(</span><span class="string" id="6482306">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="6482339">,</span>&nbsp;<span class="ident" id="6482341">filename</span><span class="op" id="6482349">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6482352">}</span><br>
<span class="lineno"></span><span class="op" id="6482354">}</span>
</div>
</body>
</html>
