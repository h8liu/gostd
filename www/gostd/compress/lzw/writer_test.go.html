<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8218888">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8218943">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8218997">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8219048">package</span>&nbsp;<span class="ident" id="8219056">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8219061">import</span>&nbsp;<span class="op" id="8219068">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219071">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219077">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219090">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219096">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219107">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8219117">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8219120">var</span>&nbsp;<span class="ident" id="8219124">filenames</span>&nbsp;<span class="op" id="8219134">=</span>&nbsp;<span class="op" id="8219136">[</span><span class="op" id="8219137">]</span><span class="builtintype" id="8219138">string</span><span class="op" id="8219144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219147">&#34;../testdata/e.txt&#34;</span><span class="op" id="8219166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8219169">&#34;../testdata/pi.txt&#34;</span><span class="op" id="8219189">,</span><br>
<span class="lineno"></span><span class="op" id="8219191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8219194">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="8219272">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="8219339">func</span>&nbsp;<span class="ident" id="8219344">testFile</span><span class="op" id="8219352">(</span><span class="ident" id="8219353">t</span>&nbsp;<span class="op" id="8219355">*</span><span class="ident" id="8219356">testing</span><span class="op" id="8219363">.</span><span class="ident" id="8219364">T</span><span class="op" id="8219365">,</span>&nbsp;<span class="ident" id="8219367">fn</span>&nbsp;<span class="builtintype" id="8219370">string</span><span class="op" id="8219376">,</span>&nbsp;<span class="ident" id="8219378">order</span>&nbsp;<span class="ident" id="8219384">Order</span><span class="op" id="8219389">,</span>&nbsp;<span class="ident" id="8219391">litWidth</span>&nbsp;<span class="builtintype" id="8219400">int</span><span class="op" id="8219403">)</span>&nbsp;<span class="op" id="8219405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8219408">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219445">golden</span><span class="op" id="8219451">,</span>&nbsp;<span class="ident" id="8219453">err</span>&nbsp;<span class="op" id="8219457">:=</span>&nbsp;<span class="ident" id="8219460">os</span><span class="op" id="8219462">.</span><span class="ident" id="8219463">Open</span><span class="op" id="8219467">(</span><span class="ident" id="8219468">fn</span><span class="op" id="8219470">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219473">if</span>&nbsp;<span class="ident" id="8219476">err</span>&nbsp;<span class="op" id="8219480">!=</span>&nbsp;<span class="ident" id="8219483">nil</span>&nbsp;<span class="op" id="8219487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219491">t</span><span class="op" id="8219492">.</span><span class="ident" id="8219493">Errorf</span><span class="op" id="8219499">(</span><span class="string" id="8219500">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8219531">,</span>&nbsp;<span class="ident" id="8219533">fn</span><span class="op" id="8219535">,</span>&nbsp;<span class="ident" id="8219537">order</span><span class="op" id="8219542">,</span>&nbsp;<span class="ident" id="8219544">litWidth</span><span class="op" id="8219552">,</span>&nbsp;<span class="ident" id="8219554">err</span><span class="op" id="8219557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219561">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8219569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219572">defer</span>&nbsp;<span class="ident" id="8219578">golden</span><span class="op" id="8219584">.</span><span class="ident" id="8219585">Close</span><span class="op" id="8219590">(</span><span class="op" id="8219591">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8219595">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219715">raw</span><span class="op" id="8219718">,</span>&nbsp;<span class="ident" id="8219720">err</span>&nbsp;<span class="op" id="8219724">:=</span>&nbsp;<span class="ident" id="8219727">os</span><span class="op" id="8219729">.</span><span class="ident" id="8219730">Open</span><span class="op" id="8219734">(</span><span class="ident" id="8219735">fn</span><span class="op" id="8219737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219740">if</span>&nbsp;<span class="ident" id="8219743">err</span>&nbsp;<span class="op" id="8219747">!=</span>&nbsp;<span class="ident" id="8219750">nil</span>&nbsp;<span class="op" id="8219754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219758">t</span><span class="op" id="8219759">.</span><span class="ident" id="8219760">Errorf</span><span class="op" id="8219766">(</span><span class="string" id="8219767">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8219798">,</span>&nbsp;<span class="ident" id="8219800">fn</span><span class="op" id="8219802">,</span>&nbsp;<span class="ident" id="8219804">order</span><span class="op" id="8219809">,</span>&nbsp;<span class="ident" id="8219811">litWidth</span><span class="op" id="8219819">,</span>&nbsp;<span class="ident" id="8219821">err</span><span class="op" id="8219824">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219828">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8219836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219840">piper</span><span class="op" id="8219845">,</span>&nbsp;<span class="ident" id="8219847">pipew</span>&nbsp;<span class="op" id="8219853">:=</span>&nbsp;<span class="ident" id="8219856">io</span><span class="op" id="8219858">.</span><span class="ident" id="8219859">Pipe</span><span class="op" id="8219863">(</span><span class="op" id="8219864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219867">defer</span>&nbsp;<span class="ident" id="8219873">piper</span><span class="op" id="8219878">.</span><span class="ident" id="8219879">Close</span><span class="op" id="8219884">(</span><span class="op" id="8219885">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219888">go</span>&nbsp;<span class="keyword" id="8219891">func</span><span class="op" id="8219895">(</span><span class="op" id="8219896">)</span>&nbsp;<span class="op" id="8219898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219902">defer</span>&nbsp;<span class="ident" id="8219908">raw</span><span class="op" id="8219911">.</span><span class="ident" id="8219912">Close</span><span class="op" id="8219917">(</span><span class="op" id="8219918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219922">defer</span>&nbsp;<span class="ident" id="8219928">pipew</span><span class="op" id="8219933">.</span><span class="ident" id="8219934">Close</span><span class="op" id="8219939">(</span><span class="op" id="8219940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8219944">lzww</span>&nbsp;<span class="op" id="8219949">:=</span>&nbsp;<span class="ident" id="8219952">NewWriter</span><span class="op" id="8219961">(</span><span class="ident" id="8219962">pipew</span><span class="op" id="8219967">,</span>&nbsp;<span class="ident" id="8219969">order</span><span class="op" id="8219974">,</span>&nbsp;<span class="ident" id="8219976">litWidth</span><span class="op" id="8219984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8219988">defer</span>&nbsp;<span class="ident" id="8219994">lzww</span><span class="op" id="8219998">.</span><span class="ident" id="8219999">Close</span><span class="op" id="8220004">(</span><span class="op" id="8220005">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220009">var</span>&nbsp;<span class="ident" id="8220013">b</span>&nbsp;<span class="op" id="8220015">[</span><span class="num" id="8220016">4096</span><span class="op" id="8220020">]</span><span class="builtintype" id="8220021">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220028">for</span>&nbsp;<span class="op" id="8220032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220037">n</span><span class="op" id="8220038">,</span>&nbsp;<span class="ident" id="8220040">err0</span>&nbsp;<span class="op" id="8220045">:=</span>&nbsp;<span class="ident" id="8220048">raw</span><span class="op" id="8220051">.</span><span class="ident" id="8220052">Read</span><span class="op" id="8220056">(</span><span class="ident" id="8220057">b</span><span class="op" id="8220058">[</span><span class="op" id="8220059">:</span><span class="op" id="8220060">]</span><span class="op" id="8220061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220066">if</span>&nbsp;<span class="ident" id="8220069">err0</span>&nbsp;<span class="op" id="8220074">!=</span>&nbsp;<span class="ident" id="8220077">nil</span>&nbsp;<span class="op" id="8220081">&amp;&amp;</span>&nbsp;<span class="ident" id="8220084">err0</span>&nbsp;<span class="op" id="8220089">!=</span>&nbsp;<span class="ident" id="8220092">io</span><span class="op" id="8220094">.</span><span class="ident" id="8220095">EOF</span>&nbsp;<span class="op" id="8220099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220105">t</span><span class="op" id="8220106">.</span><span class="ident" id="8220107">Errorf</span><span class="op" id="8220113">(</span><span class="string" id="8220114">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8220145">,</span>&nbsp;<span class="ident" id="8220147">fn</span><span class="op" id="8220149">,</span>&nbsp;<span class="ident" id="8220151">order</span><span class="op" id="8220156">,</span>&nbsp;<span class="ident" id="8220158">litWidth</span><span class="op" id="8220166">,</span>&nbsp;<span class="ident" id="8220168">err0</span><span class="op" id="8220172">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220178">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220193">_</span><span class="op" id="8220194">,</span>&nbsp;<span class="ident" id="8220196">err1</span>&nbsp;<span class="op" id="8220201">:=</span>&nbsp;<span class="ident" id="8220204">lzww</span><span class="op" id="8220208">.</span><span class="ident" id="8220209">Write</span><span class="op" id="8220214">(</span><span class="ident" id="8220215">b</span><span class="op" id="8220216">[</span><span class="op" id="8220217">:</span><span class="ident" id="8220218">n</span><span class="op" id="8220219">]</span><span class="op" id="8220220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220225">if</span>&nbsp;<span class="ident" id="8220228">err1</span>&nbsp;<span class="op" id="8220233">!=</span>&nbsp;<span class="ident" id="8220236">nil</span>&nbsp;<span class="op" id="8220240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220246">t</span><span class="op" id="8220247">.</span><span class="ident" id="8220248">Errorf</span><span class="op" id="8220254">(</span><span class="string" id="8220255">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8220286">,</span>&nbsp;<span class="ident" id="8220288">fn</span><span class="op" id="8220290">,</span>&nbsp;<span class="ident" id="8220292">order</span><span class="op" id="8220297">,</span>&nbsp;<span class="ident" id="8220299">litWidth</span><span class="op" id="8220307">,</span>&nbsp;<span class="ident" id="8220309">err1</span><span class="op" id="8220313">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220319">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220334">if</span>&nbsp;<span class="ident" id="8220337">err0</span>&nbsp;<span class="op" id="8220342">==</span>&nbsp;<span class="ident" id="8220345">io</span><span class="op" id="8220347">.</span><span class="ident" id="8220348">EOF</span>&nbsp;<span class="op" id="8220352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220358">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220367">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220374">}</span><span class="op" id="8220375">(</span><span class="op" id="8220376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220379">lzwr</span>&nbsp;<span class="op" id="8220384">:=</span>&nbsp;<span class="ident" id="8220387">NewReader</span><span class="op" id="8220396">(</span><span class="ident" id="8220397">piper</span><span class="op" id="8220402">,</span>&nbsp;<span class="ident" id="8220404">order</span><span class="op" id="8220409">,</span>&nbsp;<span class="ident" id="8220411">litWidth</span><span class="op" id="8220419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220422">defer</span>&nbsp;<span class="ident" id="8220428">lzwr</span><span class="op" id="8220432">.</span><span class="ident" id="8220433">Close</span><span class="op" id="8220438">(</span><span class="op" id="8220439">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8220443">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220464">b0</span><span class="op" id="8220466">,</span>&nbsp;<span class="ident" id="8220468">err0</span>&nbsp;<span class="op" id="8220473">:=</span>&nbsp;<span class="ident" id="8220476">ioutil</span><span class="op" id="8220482">.</span><span class="ident" id="8220483">ReadAll</span><span class="op" id="8220490">(</span><span class="ident" id="8220491">golden</span><span class="op" id="8220497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220500">b1</span><span class="op" id="8220502">,</span>&nbsp;<span class="ident" id="8220504">err1</span>&nbsp;<span class="op" id="8220509">:=</span>&nbsp;<span class="ident" id="8220512">ioutil</span><span class="op" id="8220518">.</span><span class="ident" id="8220519">ReadAll</span><span class="op" id="8220526">(</span><span class="ident" id="8220527">lzwr</span><span class="op" id="8220531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220534">if</span>&nbsp;<span class="ident" id="8220537">err0</span>&nbsp;<span class="op" id="8220542">!=</span>&nbsp;<span class="ident" id="8220545">nil</span>&nbsp;<span class="op" id="8220549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220553">t</span><span class="op" id="8220554">.</span><span class="ident" id="8220555">Errorf</span><span class="op" id="8220561">(</span><span class="string" id="8220562">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8220593">,</span>&nbsp;<span class="ident" id="8220595">fn</span><span class="op" id="8220597">,</span>&nbsp;<span class="ident" id="8220599">order</span><span class="op" id="8220604">,</span>&nbsp;<span class="ident" id="8220606">litWidth</span><span class="op" id="8220614">,</span>&nbsp;<span class="ident" id="8220616">err0</span><span class="op" id="8220620">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220624">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220635">if</span>&nbsp;<span class="ident" id="8220638">err1</span>&nbsp;<span class="op" id="8220643">!=</span>&nbsp;<span class="ident" id="8220646">nil</span>&nbsp;<span class="op" id="8220650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220654">t</span><span class="op" id="8220655">.</span><span class="ident" id="8220656">Errorf</span><span class="op" id="8220662">(</span><span class="string" id="8220663">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8220694">,</span>&nbsp;<span class="ident" id="8220696">fn</span><span class="op" id="8220698">,</span>&nbsp;<span class="ident" id="8220700">order</span><span class="op" id="8220705">,</span>&nbsp;<span class="ident" id="8220707">litWidth</span><span class="op" id="8220715">,</span>&nbsp;<span class="ident" id="8220717">err1</span><span class="op" id="8220721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220725">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220736">if</span>&nbsp;<span class="builtinfunc" id="8220739">len</span><span class="op" id="8220742">(</span><span class="ident" id="8220743">b1</span><span class="op" id="8220745">)</span>&nbsp;<span class="op" id="8220747">!=</span>&nbsp;<span class="builtinfunc" id="8220750">len</span><span class="op" id="8220753">(</span><span class="ident" id="8220754">b0</span><span class="op" id="8220756">)</span>&nbsp;<span class="op" id="8220758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220762">t</span><span class="op" id="8220763">.</span><span class="ident" id="8220764">Errorf</span><span class="op" id="8220770">(</span><span class="string" id="8220771">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="8220824">,</span>&nbsp;<span class="ident" id="8220826">fn</span><span class="op" id="8220828">,</span>&nbsp;<span class="ident" id="8220830">order</span><span class="op" id="8220835">,</span>&nbsp;<span class="ident" id="8220837">litWidth</span><span class="op" id="8220845">,</span>&nbsp;<span class="builtinfunc" id="8220847">len</span><span class="op" id="8220850">(</span><span class="ident" id="8220851">b1</span><span class="op" id="8220853">)</span><span class="op" id="8220854">,</span>&nbsp;<span class="builtinfunc" id="8220856">len</span><span class="op" id="8220859">(</span><span class="ident" id="8220860">b0</span><span class="op" id="8220862">)</span><span class="op" id="8220863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8220875">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220878">for</span>&nbsp;<span class="ident" id="8220882">i</span>&nbsp;<span class="op" id="8220884">:=</span>&nbsp;<span class="num" id="8220887">0</span><span class="op" id="8220888">;</span>&nbsp;<span class="ident" id="8220890">i</span>&nbsp;<span class="op" id="8220892">&lt;</span>&nbsp;<span class="builtinfunc" id="8220894">len</span><span class="op" id="8220897">(</span><span class="ident" id="8220898">b0</span><span class="op" id="8220900">)</span><span class="op" id="8220901">;</span>&nbsp;<span class="ident" id="8220903">i</span><span class="op" id="8220904">++</span>&nbsp;<span class="op" id="8220907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8220911">if</span>&nbsp;<span class="ident" id="8220914">b1</span><span class="op" id="8220916">[</span><span class="ident" id="8220917">i</span><span class="op" id="8220918">]</span>&nbsp;<span class="op" id="8220920">!=</span>&nbsp;<span class="ident" id="8220923">b0</span><span class="op" id="8220925">[</span><span class="ident" id="8220926">i</span><span class="op" id="8220927">]</span>&nbsp;<span class="op" id="8220929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8220934">t</span><span class="op" id="8220935">.</span><span class="ident" id="8220936">Errorf</span><span class="op" id="8220942">(</span><span class="string" id="8220943">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="8221006">,</span>&nbsp;<span class="ident" id="8221008">fn</span><span class="op" id="8221010">,</span>&nbsp;<span class="ident" id="8221012">order</span><span class="op" id="8221017">,</span>&nbsp;<span class="ident" id="8221019">litWidth</span><span class="op" id="8221027">,</span>&nbsp;<span class="ident" id="8221029">i</span><span class="op" id="8221030">,</span>&nbsp;<span class="ident" id="8221032">b1</span><span class="op" id="8221034">[</span><span class="ident" id="8221035">i</span><span class="op" id="8221036">]</span><span class="op" id="8221037">,</span>&nbsp;<span class="ident" id="8221039">b0</span><span class="op" id="8221041">[</span><span class="ident" id="8221042">i</span><span class="op" id="8221043">]</span><span class="op" id="8221044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221049">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221058">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221061">}</span><br>
<span class="lineno"></span><span class="op" id="8221063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8221066">func</span>&nbsp;<span class="ident" id="8221071">TestWriter</span><span class="op" id="8221081">(</span><span class="ident" id="8221082">t</span>&nbsp;<span class="op" id="8221084">*</span><span class="ident" id="8221085">testing</span><span class="op" id="8221092">.</span><span class="ident" id="8221093">T</span><span class="op" id="8221094">)</span>&nbsp;<span class="op" id="8221096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221099">for</span>&nbsp;<span class="ident" id="8221103">_</span><span class="op" id="8221104">,</span>&nbsp;<span class="ident" id="8221106">filename</span>&nbsp;<span class="op" id="8221115">:=</span>&nbsp;<span class="keyword" id="8221118">range</span>&nbsp;<span class="ident" id="8221124">filenames</span>&nbsp;<span class="op" id="8221134">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221138">for</span>&nbsp;<span class="ident" id="8221142">_</span><span class="op" id="8221143">,</span>&nbsp;<span class="ident" id="8221145">order</span>&nbsp;<span class="op" id="8221151">:=</span>&nbsp;<span class="keyword" id="8221154">range</span>&nbsp;<span class="op" id="8221160">[</span><span class="op" id="8221161">...</span><span class="op" id="8221164">]</span><span class="ident" id="8221165">Order</span><span class="op" id="8221170">{</span><span class="ident" id="8221171">LSB</span><span class="op" id="8221174">,</span>&nbsp;<span class="ident" id="8221176">MSB</span><span class="op" id="8221179">}</span>&nbsp;<span class="op" id="8221181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8221186">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221266">for</span>&nbsp;<span class="ident" id="8221270">_</span><span class="op" id="8221271">,</span>&nbsp;<span class="ident" id="8221273">litWidth</span>&nbsp;<span class="op" id="8221282">:=</span>&nbsp;<span class="keyword" id="8221285">range</span>&nbsp;<span class="op" id="8221291">[</span><span class="op" id="8221292">...</span><span class="op" id="8221295">]</span><span class="builtintype" id="8221296">int</span><span class="op" id="8221299">{</span><span class="num" id="8221300">6</span><span class="op" id="8221301">,</span>&nbsp;<span class="num" id="8221303">7</span><span class="op" id="8221304">,</span>&nbsp;<span class="num" id="8221306">8</span><span class="op" id="8221307">}</span>&nbsp;<span class="op" id="8221309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221315">testFile</span><span class="op" id="8221323">(</span><span class="ident" id="8221324">t</span><span class="op" id="8221325">,</span>&nbsp;<span class="ident" id="8221327">filename</span><span class="op" id="8221335">,</span>&nbsp;<span class="ident" id="8221337">order</span><span class="op" id="8221342">,</span>&nbsp;<span class="ident" id="8221344">litWidth</span><span class="op" id="8221352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221357">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221364">}</span><br>
<span class="lineno"></span><span class="op" id="8221366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8221369">func</span>&nbsp;<span class="ident" id="8221374">TestWriterReturnValues</span><span class="op" id="8221396">(</span><span class="ident" id="8221397">t</span>&nbsp;<span class="op" id="8221399">*</span><span class="ident" id="8221400">testing</span><span class="op" id="8221407">.</span><span class="ident" id="8221408">T</span><span class="op" id="8221409">)</span>&nbsp;<span class="op" id="8221411">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221414">w</span>&nbsp;<span class="op" id="8221416">:=</span>&nbsp;<span class="ident" id="8221419">NewWriter</span><span class="op" id="8221428">(</span><span class="ident" id="8221429">ioutil</span><span class="op" id="8221435">.</span><span class="ident" id="8221436">Discard</span><span class="op" id="8221443">,</span>&nbsp;<span class="ident" id="8221445">LSB</span><span class="op" id="8221448">,</span>&nbsp;<span class="num" id="8221450">8</span><span class="op" id="8221451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221454">n</span><span class="op" id="8221455">,</span>&nbsp;<span class="ident" id="8221457">err</span>&nbsp;<span class="op" id="8221461">:=</span>&nbsp;<span class="ident" id="8221464">w</span><span class="op" id="8221465">.</span><span class="ident" id="8221466">Write</span><span class="op" id="8221471">(</span><span class="op" id="8221472">[</span><span class="op" id="8221473">]</span><span class="builtintype" id="8221474">byte</span><span class="op" id="8221478">(</span><span class="string" id="8221479">&#34;asdf&#34;</span><span class="op" id="8221485">)</span><span class="op" id="8221486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221489">if</span>&nbsp;<span class="ident" id="8221492">n</span>&nbsp;<span class="op" id="8221494">!=</span>&nbsp;<span class="num" id="8221497">4</span>&nbsp;<span class="op" id="8221499">||</span>&nbsp;<span class="ident" id="8221502">err</span>&nbsp;<span class="op" id="8221506">!=</span>&nbsp;<span class="ident" id="8221509">nil</span>&nbsp;<span class="op" id="8221513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221517">t</span><span class="op" id="8221518">.</span><span class="ident" id="8221519">Errorf</span><span class="op" id="8221525">(</span><span class="string" id="8221526">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="8221551">,</span>&nbsp;<span class="ident" id="8221553">n</span><span class="op" id="8221554">,</span>&nbsp;<span class="ident" id="8221556">err</span><span class="op" id="8221559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221562">}</span><br>
<span class="lineno">105</span><span class="op" id="8221564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8221567">func</span>&nbsp;<span class="ident" id="8221572">benchmarkEncoder</span><span class="op" id="8221588">(</span><span class="ident" id="8221589">b</span>&nbsp;<span class="op" id="8221591">*</span><span class="ident" id="8221592">testing</span><span class="op" id="8221599">.</span><span class="ident" id="8221600">B</span><span class="op" id="8221601">,</span>&nbsp;<span class="ident" id="8221603">n</span>&nbsp;<span class="builtintype" id="8221605">int</span><span class="op" id="8221608">)</span>&nbsp;<span class="op" id="8221610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221613">b</span><span class="op" id="8221614">.</span><span class="ident" id="8221615">StopTimer</span><span class="op" id="8221624">(</span><span class="op" id="8221625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221628">b</span><span class="op" id="8221629">.</span><span class="ident" id="8221630">SetBytes</span><span class="op" id="8221638">(</span><span class="ident" id="8221639">int64</span><span class="op" id="8221644">(</span><span class="ident" id="8221645">n</span><span class="op" id="8221646">)</span><span class="op" id="8221647">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221650">buf0</span><span class="op" id="8221654">,</span>&nbsp;<span class="ident" id="8221656">err</span>&nbsp;<span class="op" id="8221660">:=</span>&nbsp;<span class="ident" id="8221663">ioutil</span><span class="op" id="8221669">.</span><span class="ident" id="8221670">ReadFile</span><span class="op" id="8221678">(</span><span class="string" id="8221679">&#34;../testdata/e.txt&#34;</span><span class="op" id="8221698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221701">if</span>&nbsp;<span class="ident" id="8221704">err</span>&nbsp;<span class="op" id="8221708">!=</span>&nbsp;<span class="ident" id="8221711">nil</span>&nbsp;<span class="op" id="8221715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221719">b</span><span class="op" id="8221720">.</span><span class="ident" id="8221721">Fatal</span><span class="op" id="8221726">(</span><span class="ident" id="8221727">err</span><span class="op" id="8221730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221736">if</span>&nbsp;<span class="builtinfunc" id="8221739">len</span><span class="op" id="8221742">(</span><span class="ident" id="8221743">buf0</span><span class="op" id="8221747">)</span>&nbsp;<span class="op" id="8221749">==</span>&nbsp;<span class="num" id="8221752">0</span>&nbsp;<span class="op" id="8221754">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221758">b</span><span class="op" id="8221759">.</span><span class="ident" id="8221760">Fatalf</span><span class="op" id="8221766">(</span><span class="string" id="8221767">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="8221790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221796">buf1</span>&nbsp;<span class="op" id="8221801">:=</span>&nbsp;<span class="builtinfunc" id="8221804">make</span><span class="op" id="8221808">(</span><span class="op" id="8221809">[</span><span class="op" id="8221810">]</span><span class="builtintype" id="8221811">byte</span><span class="op" id="8221815">,</span>&nbsp;<span class="ident" id="8221817">n</span><span class="op" id="8221818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221821">for</span>&nbsp;<span class="ident" id="8221825">i</span>&nbsp;<span class="op" id="8221827">:=</span>&nbsp;<span class="num" id="8221830">0</span><span class="op" id="8221831">;</span>&nbsp;<span class="ident" id="8221833">i</span>&nbsp;<span class="op" id="8221835">&lt;</span>&nbsp;<span class="ident" id="8221837">n</span><span class="op" id="8221838">;</span>&nbsp;<span class="ident" id="8221840">i</span>&nbsp;<span class="op" id="8221842">+=</span>&nbsp;<span class="builtinfunc" id="8221845">len</span><span class="op" id="8221848">(</span><span class="ident" id="8221849">buf0</span><span class="op" id="8221853">)</span>&nbsp;<span class="op" id="8221855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221859">if</span>&nbsp;<span class="builtinfunc" id="8221862">len</span><span class="op" id="8221865">(</span><span class="ident" id="8221866">buf0</span><span class="op" id="8221870">)</span>&nbsp;<span class="op" id="8221872">&gt;</span>&nbsp;<span class="ident" id="8221874">n</span><span class="op" id="8221875">-</span><span class="ident" id="8221876">i</span>&nbsp;<span class="op" id="8221878">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221883">buf0</span>&nbsp;<span class="op" id="8221888">=</span>&nbsp;<span class="ident" id="8221890">buf0</span><span class="op" id="8221894">[</span><span class="op" id="8221895">:</span><span class="ident" id="8221896">n</span><span class="op" id="8221897">-</span><span class="ident" id="8221898">i</span><span class="op" id="8221899">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8221907">copy</span><span class="op" id="8221911">(</span><span class="ident" id="8221912">buf1</span><span class="op" id="8221916">[</span><span class="ident" id="8221917">i</span><span class="op" id="8221918">:</span><span class="op" id="8221919">]</span><span class="op" id="8221920">,</span>&nbsp;<span class="ident" id="8221922">buf0</span><span class="op" id="8221926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8221929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221932">buf0</span>&nbsp;<span class="op" id="8221937">=</span>&nbsp;<span class="ident" id="8221939">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221944">runtime</span><span class="op" id="8221951">.</span><span class="ident" id="8221952">GC</span><span class="op" id="8221954">(</span><span class="op" id="8221955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8221958">b</span><span class="op" id="8221959">.</span><span class="ident" id="8221960">StartTimer</span><span class="op" id="8221970">(</span><span class="op" id="8221971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8221974">for</span>&nbsp;<span class="ident" id="8221978">i</span>&nbsp;<span class="op" id="8221980">:=</span>&nbsp;<span class="num" id="8221983">0</span><span class="op" id="8221984">;</span>&nbsp;<span class="ident" id="8221986">i</span>&nbsp;<span class="op" id="8221988">&lt;</span>&nbsp;<span class="ident" id="8221990">b</span><span class="op" id="8221991">.</span><span class="ident" id="8221992">N</span><span class="op" id="8221993">;</span>&nbsp;<span class="ident" id="8221995">i</span><span class="op" id="8221996">++</span>&nbsp;<span class="op" id="8221999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222003">w</span>&nbsp;<span class="op" id="8222005">:=</span>&nbsp;<span class="ident" id="8222008">NewWriter</span><span class="op" id="8222017">(</span><span class="ident" id="8222018">ioutil</span><span class="op" id="8222024">.</span><span class="ident" id="8222025">Discard</span><span class="op" id="8222032">,</span>&nbsp;<span class="ident" id="8222034">LSB</span><span class="op" id="8222037">,</span>&nbsp;<span class="num" id="8222039">8</span><span class="op" id="8222040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222044">w</span><span class="op" id="8222045">.</span><span class="ident" id="8222046">Write</span><span class="op" id="8222051">(</span><span class="ident" id="8222052">buf1</span><span class="op" id="8222056">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222060">w</span><span class="op" id="8222061">.</span><span class="ident" id="8222062">Close</span><span class="op" id="8222067">(</span><span class="op" id="8222068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8222071">}</span><br>
<span class="lineno"></span><span class="op" id="8222073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8222076">func</span>&nbsp;<span class="ident" id="8222081">BenchmarkEncoder1e4</span><span class="op" id="8222100">(</span><span class="ident" id="8222101">b</span>&nbsp;<span class="op" id="8222103">*</span><span class="ident" id="8222104">testing</span><span class="op" id="8222111">.</span><span class="ident" id="8222112">B</span><span class="op" id="8222113">)</span>&nbsp;<span class="op" id="8222115">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222118">benchmarkEncoder</span><span class="op" id="8222134">(</span><span class="ident" id="8222135">b</span><span class="op" id="8222136">,</span>&nbsp;<span class="num" id="8222138">1e4</span><span class="op" id="8222141">)</span><br>
<span class="lineno"></span><span class="op" id="8222143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8222146">func</span>&nbsp;<span class="ident" id="8222151">BenchmarkEncoder1e5</span><span class="op" id="8222170">(</span><span class="ident" id="8222171">b</span>&nbsp;<span class="op" id="8222173">*</span><span class="ident" id="8222174">testing</span><span class="op" id="8222181">.</span><span class="ident" id="8222182">B</span><span class="op" id="8222183">)</span>&nbsp;<span class="op" id="8222185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222188">benchmarkEncoder</span><span class="op" id="8222204">(</span><span class="ident" id="8222205">b</span><span class="op" id="8222206">,</span>&nbsp;<span class="num" id="8222208">1e5</span><span class="op" id="8222211">)</span><br>
<span class="lineno">140</span><span class="op" id="8222213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8222216">func</span>&nbsp;<span class="ident" id="8222221">BenchmarkEncoder1e6</span><span class="op" id="8222240">(</span><span class="ident" id="8222241">b</span>&nbsp;<span class="op" id="8222243">*</span><span class="ident" id="8222244">testing</span><span class="op" id="8222251">.</span><span class="ident" id="8222252">B</span><span class="op" id="8222253">)</span>&nbsp;<span class="op" id="8222255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8222258">benchmarkEncoder</span><span class="op" id="8222274">(</span><span class="ident" id="8222275">b</span><span class="op" id="8222276">,</span>&nbsp;<span class="num" id="8222278">1e6</span><span class="op" id="8222281">)</span><br>
<span class="lineno"></span><span class="op" id="8222283">}</span>
</div>
</body>
</html>
