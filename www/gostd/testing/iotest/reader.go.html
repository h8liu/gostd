<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6215352">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6215407">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6215461">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6215512">//&nbsp;Package&nbsp;iotest&nbsp;implements&nbsp;Readers&nbsp;and&nbsp;Writers&nbsp;useful&nbsp;mainly&nbsp;for&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="6215588">package</span>&nbsp;<span class="ident" id="6215596">iotest</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6215604">import</span>&nbsp;<span class="op" id="6215611">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6215614">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6215624">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6215629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6215632">//&nbsp;OneByteReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="6215682">//&nbsp;each&nbsp;non-empty&nbsp;Read&nbsp;by&nbsp;reading&nbsp;one&nbsp;byte&nbsp;from&nbsp;r.</span><br>
<span class="lineno">15</span><span class="keyword" id="6215733">func</span>&nbsp;<span class="ident" id="6215738">OneByteReader</span><span class="op" id="6215751">(</span><span class="ident" id="6215752">r</span>&nbsp;<span class="ident" id="6215754">io</span><span class="op" id="6215756">.</span><span class="ident" id="6215757">Reader</span><span class="op" id="6215763">)</span>&nbsp;<span class="ident" id="6215765">io</span><span class="op" id="6215767">.</span><span class="ident" id="6215768">Reader</span>&nbsp;<span class="op" id="6215775">{</span>&nbsp;<span class="keyword" id="6215777">return</span>&nbsp;<span class="op" id="6215784">&amp;</span><span class="ident" id="6215785">oneByteReader</span><span class="op" id="6215798">{</span><span class="ident" id="6215799">r</span><span class="op" id="6215800">}</span>&nbsp;<span class="op" id="6215802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6215805">type</span>&nbsp;<span class="ident" id="6215810">oneByteReader</span>&nbsp;<span class="keyword" id="6215824">struct</span>&nbsp;<span class="op" id="6215831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6215834">r</span>&nbsp;<span class="ident" id="6215836">io</span><span class="op" id="6215838">.</span><span class="ident" id="6215839">Reader</span><br>
<span class="lineno"></span><span class="op" id="6215846">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6215849">func</span>&nbsp;<span class="op" id="6215854">(</span><span class="ident" id="6215855">r</span>&nbsp;<span class="op" id="6215857">*</span><span class="ident" id="6215858">oneByteReader</span><span class="op" id="6215871">)</span>&nbsp;<span class="ident" id="6215873">Read</span><span class="op" id="6215877">(</span><span class="ident" id="6215878">p</span>&nbsp;<span class="op" id="6215880">[</span><span class="op" id="6215881">]</span><span class="builtintype" id="6215882">byte</span><span class="op" id="6215886">)</span>&nbsp;<span class="op" id="6215888">(</span><span class="builtintype" id="6215889">int</span><span class="op" id="6215892">,</span>&nbsp;<span class="builtintype" id="6215894">error</span><span class="op" id="6215899">)</span>&nbsp;<span class="op" id="6215901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215904">if</span>&nbsp;<span class="builtinfunc" id="6215907">len</span><span class="op" id="6215910">(</span><span class="ident" id="6215911">p</span><span class="op" id="6215912">)</span>&nbsp;<span class="op" id="6215914">==</span>&nbsp;<span class="num" id="6215917">0</span>&nbsp;<span class="op" id="6215919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215923">return</span>&nbsp;<span class="num" id="6215930">0</span><span class="op" id="6215931">,</span>&nbsp;<span class="ident" id="6215933">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6215938">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215941">return</span>&nbsp;<span class="ident" id="6215948">r</span><span class="op" id="6215949">.</span><span class="ident" id="6215950">r</span><span class="op" id="6215951">.</span><span class="ident" id="6215952">Read</span><span class="op" id="6215956">(</span><span class="ident" id="6215957">p</span><span class="op" id="6215958">[</span><span class="num" id="6215959">0</span><span class="op" id="6215960">:</span><span class="num" id="6215961">1</span><span class="op" id="6215962">]</span><span class="op" id="6215963">)</span><br>
<span class="lineno"></span><span class="op" id="6215965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6215968">//&nbsp;HalfReader&nbsp;returns&nbsp;a&nbsp;Reader&nbsp;that&nbsp;implements&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="6216020">//&nbsp;by&nbsp;reading&nbsp;half&nbsp;as&nbsp;many&nbsp;requested&nbsp;bytes&nbsp;from&nbsp;r.</span><br>
<span class="lineno">30</span><span class="keyword" id="6216071">func</span>&nbsp;<span class="ident" id="6216076">HalfReader</span><span class="op" id="6216086">(</span><span class="ident" id="6216087">r</span>&nbsp;<span class="ident" id="6216089">io</span><span class="op" id="6216091">.</span><span class="ident" id="6216092">Reader</span><span class="op" id="6216098">)</span>&nbsp;<span class="ident" id="6216100">io</span><span class="op" id="6216102">.</span><span class="ident" id="6216103">Reader</span>&nbsp;<span class="op" id="6216110">{</span>&nbsp;<span class="keyword" id="6216112">return</span>&nbsp;<span class="op" id="6216119">&amp;</span><span class="ident" id="6216120">halfReader</span><span class="op" id="6216130">{</span><span class="ident" id="6216131">r</span><span class="op" id="6216132">}</span>&nbsp;<span class="op" id="6216134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6216137">type</span>&nbsp;<span class="ident" id="6216142">halfReader</span>&nbsp;<span class="keyword" id="6216153">struct</span>&nbsp;<span class="op" id="6216160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6216163">r</span>&nbsp;<span class="ident" id="6216165">io</span><span class="op" id="6216167">.</span><span class="ident" id="6216168">Reader</span><br>
<span class="lineno"></span><span class="op" id="6216175">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6216178">func</span>&nbsp;<span class="op" id="6216183">(</span><span class="ident" id="6216184">r</span>&nbsp;<span class="op" id="6216186">*</span><span class="ident" id="6216187">halfReader</span><span class="op" id="6216197">)</span>&nbsp;<span class="ident" id="6216199">Read</span><span class="op" id="6216203">(</span><span class="ident" id="6216204">p</span>&nbsp;<span class="op" id="6216206">[</span><span class="op" id="6216207">]</span><span class="builtintype" id="6216208">byte</span><span class="op" id="6216212">)</span>&nbsp;<span class="op" id="6216214">(</span><span class="builtintype" id="6216215">int</span><span class="op" id="6216218">,</span>&nbsp;<span class="builtintype" id="6216220">error</span><span class="op" id="6216225">)</span>&nbsp;<span class="op" id="6216227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6216230">return</span>&nbsp;<span class="ident" id="6216237">r</span><span class="op" id="6216238">.</span><span class="ident" id="6216239">r</span><span class="op" id="6216240">.</span><span class="ident" id="6216241">Read</span><span class="op" id="6216245">(</span><span class="ident" id="6216246">p</span><span class="op" id="6216247">[</span><span class="num" id="6216248">0</span>&nbsp;<span class="op" id="6216250">:</span>&nbsp;<span class="op" id="6216252">(</span><span class="builtinfunc" id="6216253">len</span><span class="op" id="6216256">(</span><span class="ident" id="6216257">p</span><span class="op" id="6216258">)</span><span class="op" id="6216259">+</span><span class="num" id="6216260">1</span><span class="op" id="6216261">)</span><span class="op" id="6216262">/</span><span class="num" id="6216263">2</span><span class="op" id="6216264">]</span><span class="op" id="6216265">)</span><br>
<span class="lineno"></span><span class="op" id="6216267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="6216270">//&nbsp;DataErrReader&nbsp;changes&nbsp;the&nbsp;way&nbsp;errors&nbsp;are&nbsp;handled&nbsp;by&nbsp;a&nbsp;Reader.&nbsp;Normally,&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6216347">//&nbsp;Reader&nbsp;returns&nbsp;an&nbsp;error&nbsp;(typically&nbsp;EOF)&nbsp;from&nbsp;the&nbsp;first&nbsp;Read&nbsp;call&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6216425">//&nbsp;last&nbsp;piece&nbsp;of&nbsp;data&nbsp;is&nbsp;read.&nbsp;DataErrReader&nbsp;wraps&nbsp;a&nbsp;Reader&nbsp;and&nbsp;changes&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6216501">//&nbsp;behavior&nbsp;so&nbsp;the&nbsp;final&nbsp;error&nbsp;is&nbsp;returned&nbsp;along&nbsp;with&nbsp;the&nbsp;final&nbsp;data,&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="6216579">//&nbsp;of&nbsp;in&nbsp;the&nbsp;first&nbsp;call&nbsp;after&nbsp;the&nbsp;final&nbsp;data.</span><br>
<span class="lineno">45</span><span class="keyword" id="6216625">func</span>&nbsp;<span class="ident" id="6216630">DataErrReader</span><span class="op" id="6216643">(</span><span class="ident" id="6216644">r</span>&nbsp;<span class="ident" id="6216646">io</span><span class="op" id="6216648">.</span><span class="ident" id="6216649">Reader</span><span class="op" id="6216655">)</span>&nbsp;<span class="ident" id="6216657">io</span><span class="op" id="6216659">.</span><span class="ident" id="6216660">Reader</span>&nbsp;<span class="op" id="6216667">{</span>&nbsp;<span class="keyword" id="6216669">return</span>&nbsp;<span class="op" id="6216676">&amp;</span><span class="ident" id="6216677">dataErrReader</span><span class="op" id="6216690">{</span><span class="ident" id="6216691">r</span><span class="op" id="6216692">,</span>&nbsp;<span class="ident" id="6216694">nil</span><span class="op" id="6216697">,</span>&nbsp;<span class="builtinfunc" id="6216699">make</span><span class="op" id="6216703">(</span><span class="op" id="6216704">[</span><span class="op" id="6216705">]</span><span class="builtintype" id="6216706">byte</span><span class="op" id="6216710">,</span>&nbsp;<span class="num" id="6216712">1024</span><span class="op" id="6216716">)</span><span class="op" id="6216717">}</span>&nbsp;<span class="op" id="6216719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6216722">type</span>&nbsp;<span class="ident" id="6216727">dataErrReader</span>&nbsp;<span class="keyword" id="6216741">struct</span>&nbsp;<span class="op" id="6216748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6216751">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216758">io</span><span class="op" id="6216760">.</span><span class="ident" id="6216761">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6216769">unread</span>&nbsp;<span class="op" id="6216776">[</span><span class="op" id="6216777">]</span><span class="builtintype" id="6216778">byte</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6216784">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6216791">[</span><span class="op" id="6216792">]</span><span class="builtintype" id="6216793">byte</span><br>
<span class="lineno"></span><span class="op" id="6216798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6216801">func</span>&nbsp;<span class="op" id="6216806">(</span><span class="ident" id="6216807">r</span>&nbsp;<span class="op" id="6216809">*</span><span class="ident" id="6216810">dataErrReader</span><span class="op" id="6216823">)</span>&nbsp;<span class="ident" id="6216825">Read</span><span class="op" id="6216829">(</span><span class="ident" id="6216830">p</span>&nbsp;<span class="op" id="6216832">[</span><span class="op" id="6216833">]</span><span class="builtintype" id="6216834">byte</span><span class="op" id="6216838">)</span>&nbsp;<span class="op" id="6216840">(</span><span class="ident" id="6216841">n</span>&nbsp;<span class="builtintype" id="6216843">int</span><span class="op" id="6216846">,</span>&nbsp;<span class="ident" id="6216848">err</span>&nbsp;<span class="builtintype" id="6216852">error</span><span class="op" id="6216857">)</span>&nbsp;<span class="op" id="6216859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6216862">//&nbsp;loop&nbsp;because&nbsp;first&nbsp;call&nbsp;needs&nbsp;two&nbsp;reads:</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6216907">//&nbsp;one&nbsp;to&nbsp;get&nbsp;data&nbsp;and&nbsp;a&nbsp;second&nbsp;to&nbsp;look&nbsp;for&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6216962">for</span>&nbsp;<span class="op" id="6216966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6216970">if</span>&nbsp;<span class="builtinfunc" id="6216973">len</span><span class="op" id="6216976">(</span><span class="ident" id="6216977">r</span><span class="op" id="6216978">.</span><span class="ident" id="6216979">unread</span><span class="op" id="6216985">)</span>&nbsp;<span class="op" id="6216987">==</span>&nbsp;<span class="num" id="6216990">0</span>&nbsp;<span class="op" id="6216992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6216997">n1</span><span class="op" id="6216999">,</span>&nbsp;<span class="ident" id="6217001">err1</span>&nbsp;<span class="op" id="6217006">:=</span>&nbsp;<span class="ident" id="6217009">r</span><span class="op" id="6217010">.</span><span class="ident" id="6217011">r</span><span class="op" id="6217012">.</span><span class="ident" id="6217013">Read</span><span class="op" id="6217017">(</span><span class="ident" id="6217018">r</span><span class="op" id="6217019">.</span><span class="ident" id="6217020">data</span><span class="op" id="6217024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217029">r</span><span class="op" id="6217030">.</span><span class="ident" id="6217031">unread</span>&nbsp;<span class="op" id="6217038">=</span>&nbsp;<span class="ident" id="6217040">r</span><span class="op" id="6217041">.</span><span class="ident" id="6217042">data</span><span class="op" id="6217046">[</span><span class="num" id="6217047">0</span><span class="op" id="6217048">:</span><span class="ident" id="6217049">n1</span><span class="op" id="6217051">]</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217056">err</span>&nbsp;<span class="op" id="6217060">=</span>&nbsp;<span class="ident" id="6217062">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6217069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217073">if</span>&nbsp;<span class="ident" id="6217076">n</span>&nbsp;<span class="op" id="6217078">&gt;</span>&nbsp;<span class="num" id="6217080">0</span>&nbsp;<span class="op" id="6217082">||</span>&nbsp;<span class="ident" id="6217085">err</span>&nbsp;<span class="op" id="6217089">!=</span>&nbsp;<span class="ident" id="6217092">nil</span>&nbsp;<span class="op" id="6217096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217101">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6217109">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217113">n</span>&nbsp;<span class="op" id="6217115">=</span>&nbsp;<span class="builtinfunc" id="6217117">copy</span><span class="op" id="6217121">(</span><span class="ident" id="6217122">p</span><span class="op" id="6217123">,</span>&nbsp;<span class="ident" id="6217125">r</span><span class="op" id="6217126">.</span><span class="ident" id="6217127">unread</span><span class="op" id="6217133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217137">r</span><span class="op" id="6217138">.</span><span class="ident" id="6217139">unread</span>&nbsp;<span class="op" id="6217146">=</span>&nbsp;<span class="ident" id="6217148">r</span><span class="op" id="6217149">.</span><span class="ident" id="6217150">unread</span><span class="op" id="6217156">[</span><span class="ident" id="6217157">n</span><span class="op" id="6217158">:</span><span class="op" id="6217159">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6217162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217165">return</span><br>
<span class="lineno"></span><span class="op" id="6217172">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="6217175">var</span>&nbsp;<span class="ident" id="6217179">ErrTimeout</span>&nbsp;<span class="op" id="6217190">=</span>&nbsp;<span class="ident" id="6217192">errors</span><span class="op" id="6217198">.</span><span class="ident" id="6217199">New</span><span class="op" id="6217202">(</span><span class="string" id="6217203">&#34;timeout&#34;</span><span class="op" id="6217212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6217215">//&nbsp;TimeoutReader&nbsp;returns&nbsp;ErrTimeout&nbsp;on&nbsp;the&nbsp;second&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="6217270">//&nbsp;with&nbsp;no&nbsp;data.&nbsp;&nbsp;Subsequent&nbsp;calls&nbsp;to&nbsp;read&nbsp;succeed.</span><br>
<span class="lineno">75</span><span class="keyword" id="6217322">func</span>&nbsp;<span class="ident" id="6217327">TimeoutReader</span><span class="op" id="6217340">(</span><span class="ident" id="6217341">r</span>&nbsp;<span class="ident" id="6217343">io</span><span class="op" id="6217345">.</span><span class="ident" id="6217346">Reader</span><span class="op" id="6217352">)</span>&nbsp;<span class="ident" id="6217354">io</span><span class="op" id="6217356">.</span><span class="ident" id="6217357">Reader</span>&nbsp;<span class="op" id="6217364">{</span>&nbsp;<span class="keyword" id="6217366">return</span>&nbsp;<span class="op" id="6217373">&amp;</span><span class="ident" id="6217374">timeoutReader</span><span class="op" id="6217387">{</span><span class="ident" id="6217388">r</span><span class="op" id="6217389">,</span>&nbsp;<span class="num" id="6217391">0</span><span class="op" id="6217392">}</span>&nbsp;<span class="op" id="6217394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6217397">type</span>&nbsp;<span class="ident" id="6217402">timeoutReader</span>&nbsp;<span class="keyword" id="6217416">struct</span>&nbsp;<span class="op" id="6217423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217426">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217432">io</span><span class="op" id="6217434">.</span><span class="ident" id="6217435">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217443">count</span>&nbsp;<span class="builtintype" id="6217449">int</span><br>
<span class="lineno">80</span><span class="op" id="6217453">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6217456">func</span>&nbsp;<span class="op" id="6217461">(</span><span class="ident" id="6217462">r</span>&nbsp;<span class="op" id="6217464">*</span><span class="ident" id="6217465">timeoutReader</span><span class="op" id="6217478">)</span>&nbsp;<span class="ident" id="6217480">Read</span><span class="op" id="6217484">(</span><span class="ident" id="6217485">p</span>&nbsp;<span class="op" id="6217487">[</span><span class="op" id="6217488">]</span><span class="builtintype" id="6217489">byte</span><span class="op" id="6217493">)</span>&nbsp;<span class="op" id="6217495">(</span><span class="builtintype" id="6217496">int</span><span class="op" id="6217499">,</span>&nbsp;<span class="builtintype" id="6217501">error</span><span class="op" id="6217506">)</span>&nbsp;<span class="op" id="6217508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6217511">r</span><span class="op" id="6217512">.</span><span class="ident" id="6217513">count</span><span class="op" id="6217518">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217522">if</span>&nbsp;<span class="ident" id="6217525">r</span><span class="op" id="6217526">.</span><span class="ident" id="6217527">count</span>&nbsp;<span class="op" id="6217533">==</span>&nbsp;<span class="num" id="6217536">2</span>&nbsp;<span class="op" id="6217538">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217542">return</span>&nbsp;<span class="num" id="6217549">0</span><span class="op" id="6217550">,</span>&nbsp;<span class="ident" id="6217552">ErrTimeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6217564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6217567">return</span>&nbsp;<span class="ident" id="6217574">r</span><span class="op" id="6217575">.</span><span class="ident" id="6217576">r</span><span class="op" id="6217577">.</span><span class="ident" id="6217578">Read</span><span class="op" id="6217582">(</span><span class="ident" id="6217583">p</span><span class="op" id="6217584">)</span><br>
<span class="lineno"></span><span class="op" id="6217586">}</span>
</div>
</body>
</html>
