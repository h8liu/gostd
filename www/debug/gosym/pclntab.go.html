<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5643135">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5643191">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5643245">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5643296">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5643319">package</span>&nbsp;<span class="ident" id="5643327">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5643334">import</span>&nbsp;<span class="op" id="5643341">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5643344">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5643363">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5643370">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5643373">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="5643450">//</span><br>
<span class="lineno"></span><span class="comment" id="5643453">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="5643540">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="5643618">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5643696">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5643768">//</span><br>
<span class="lineno"></span><span class="comment" id="5643771">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="5643852">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="5643931">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5643984">//</span><br>
<span class="lineno"></span><span class="comment" id="5643987">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="5644062">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5644137">type</span>&nbsp;<span class="ident" id="5644142">LineTable</span>&nbsp;<span class="keyword" id="5644152">struct</span>&nbsp;<span class="op" id="5644159">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644162">Data</span>&nbsp;<span class="op" id="5644167">[</span><span class="op" id="5644168">]</span><span class="builtintype" id="5644169">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644175">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5644180">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644188">Line</span>&nbsp;<span class="builtintype" id="5644193">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5644199">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644216">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5644225">sync</span><span class="op" id="5644229">.</span><span class="ident" id="5644230">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644237">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5644246">int</span>&nbsp;<span class="comment" id="5644250">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644304">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5644313">binary</span><span class="op" id="5644319">.</span><span class="ident" id="5644320">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644331">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="5644340">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644348">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="5644357">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644365">functab</span>&nbsp;&nbsp;<span class="op" id="5644374">[</span><span class="op" id="5644375">]</span><span class="builtintype" id="5644376">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644382">nfunctab</span>&nbsp;<span class="builtintype" id="5644391">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644399">filetab</span>&nbsp;&nbsp;<span class="op" id="5644408">[</span><span class="op" id="5644409">]</span><span class="builtintype" id="5644410">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644416">nfiletab</span>&nbsp;<span class="builtintype" id="5644425">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644433">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="5644442">map</span><span class="op" id="5644445">[</span><span class="builtintype" id="5644446">string</span><span class="op" id="5644452">]</span><span class="builtintype" id="5644453">uint32</span><br>
<span class="lineno">45</span><span class="op" id="5644460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5644463">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="5644534">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="5644599">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="5644673">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="5644684">const</span>&nbsp;<span class="ident" id="5644690">oldQuantum</span>&nbsp;<span class="op" id="5644701">=</span>&nbsp;<span class="num" id="5644703">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5644706">func</span>&nbsp;<span class="op" id="5644711">(</span><span class="ident" id="5644712">t</span>&nbsp;<span class="op" id="5644714">*</span><span class="ident" id="5644715">LineTable</span><span class="op" id="5644724">)</span>&nbsp;<span class="ident" id="5644726">parse</span><span class="op" id="5644731">(</span><span class="ident" id="5644732">targetPC</span>&nbsp;<span class="ident" id="5644741">uint64</span><span class="op" id="5644747">,</span>&nbsp;<span class="ident" id="5644749">targetLine</span>&nbsp;<span class="builtintype" id="5644760">int</span><span class="op" id="5644763">)</span>&nbsp;<span class="op" id="5644765">(</span><span class="ident" id="5644766">b</span>&nbsp;<span class="op" id="5644768">[</span><span class="op" id="5644769">]</span><span class="builtintype" id="5644770">byte</span><span class="op" id="5644774">,</span>&nbsp;<span class="ident" id="5644776">pc</span>&nbsp;<span class="ident" id="5644779">uint64</span><span class="op" id="5644785">,</span>&nbsp;<span class="ident" id="5644787">line</span>&nbsp;<span class="builtintype" id="5644792">int</span><span class="op" id="5644795">)</span>&nbsp;<span class="op" id="5644797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5644800">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5644857">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5644889">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5644951">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5645008">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5645047">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5645051">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5645114">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645171">b</span><span class="op" id="5645172">,</span>&nbsp;<span class="ident" id="5645174">pc</span><span class="op" id="5645176">,</span>&nbsp;<span class="ident" id="5645178">line</span>&nbsp;<span class="op" id="5645183">=</span>&nbsp;<span class="ident" id="5645185">t</span><span class="op" id="5645186">.</span><span class="ident" id="5645187">Data</span><span class="op" id="5645191">,</span>&nbsp;<span class="ident" id="5645193">t</span><span class="op" id="5645194">.</span><span class="ident" id="5645195">PC</span><span class="op" id="5645197">,</span>&nbsp;<span class="ident" id="5645199">t</span><span class="op" id="5645200">.</span><span class="ident" id="5645201">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645207">for</span>&nbsp;<span class="ident" id="5645211">pc</span>&nbsp;<span class="op" id="5645214">&lt;=</span>&nbsp;<span class="ident" id="5645217">targetPC</span>&nbsp;<span class="op" id="5645226">&amp;&amp;</span>&nbsp;<span class="ident" id="5645229">line</span>&nbsp;<span class="op" id="5645234">!=</span>&nbsp;<span class="ident" id="5645237">targetLine</span>&nbsp;<span class="op" id="5645248">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5645251">len</span><span class="op" id="5645254">(</span><span class="ident" id="5645255">b</span><span class="op" id="5645256">)</span>&nbsp;<span class="op" id="5645258">&gt;</span>&nbsp;<span class="num" id="5645260">0</span>&nbsp;<span class="op" id="5645262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645266">code</span>&nbsp;<span class="op" id="5645271">:=</span>&nbsp;<span class="ident" id="5645274">b</span><span class="op" id="5645275">[</span><span class="num" id="5645276">0</span><span class="op" id="5645277">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645281">b</span>&nbsp;<span class="op" id="5645283">=</span>&nbsp;<span class="ident" id="5645285">b</span><span class="op" id="5645286">[</span><span class="num" id="5645287">1</span><span class="op" id="5645288">:</span><span class="op" id="5645289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645293">switch</span>&nbsp;<span class="op" id="5645300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645304">case</span>&nbsp;<span class="ident" id="5645309">code</span>&nbsp;<span class="op" id="5645314">==</span>&nbsp;<span class="num" id="5645317">0</span><span class="op" id="5645318">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645323">if</span>&nbsp;<span class="builtinfunc" id="5645326">len</span><span class="op" id="5645329">(</span><span class="ident" id="5645330">b</span><span class="op" id="5645331">)</span>&nbsp;<span class="op" id="5645333">&lt;</span>&nbsp;<span class="num" id="5645335">4</span>&nbsp;<span class="op" id="5645337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645343">b</span>&nbsp;<span class="op" id="5645345">=</span>&nbsp;<span class="ident" id="5645347">b</span><span class="op" id="5645348">[</span><span class="num" id="5645349">0</span><span class="op" id="5645350">:</span><span class="num" id="5645351">0</span><span class="op" id="5645352">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645358">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645372">val</span>&nbsp;<span class="op" id="5645376">:=</span>&nbsp;<span class="ident" id="5645379">binary</span><span class="op" id="5645385">.</span><span class="ident" id="5645386">BigEndian</span><span class="op" id="5645395">.</span><span class="ident" id="5645396">Uint32</span><span class="op" id="5645402">(</span><span class="ident" id="5645403">b</span><span class="op" id="5645404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645409">b</span>&nbsp;<span class="op" id="5645411">=</span>&nbsp;<span class="ident" id="5645413">b</span><span class="op" id="5645414">[</span><span class="num" id="5645415">4</span><span class="op" id="5645416">:</span><span class="op" id="5645417">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645422">line</span>&nbsp;<span class="op" id="5645427">+=</span>&nbsp;<span class="builtintype" id="5645430">int</span><span class="op" id="5645433">(</span><span class="ident" id="5645434">val</span><span class="op" id="5645437">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645441">case</span>&nbsp;<span class="ident" id="5645446">code</span>&nbsp;<span class="op" id="5645451">&lt;=</span>&nbsp;<span class="num" id="5645454">64</span><span class="op" id="5645456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645461">line</span>&nbsp;<span class="op" id="5645466">+=</span>&nbsp;<span class="builtintype" id="5645469">int</span><span class="op" id="5645472">(</span><span class="ident" id="5645473">code</span><span class="op" id="5645477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645481">case</span>&nbsp;<span class="ident" id="5645486">code</span>&nbsp;<span class="op" id="5645491">&lt;=</span>&nbsp;<span class="num" id="5645494">128</span><span class="op" id="5645497">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645502">line</span>&nbsp;<span class="op" id="5645507">-=</span>&nbsp;<span class="builtintype" id="5645510">int</span><span class="op" id="5645513">(</span><span class="ident" id="5645514">code</span>&nbsp;<span class="op" id="5645519">-</span>&nbsp;<span class="num" id="5645521">64</span><span class="op" id="5645523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645527">default</span><span class="op" id="5645534">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645539">pc</span>&nbsp;<span class="op" id="5645542">+=</span>&nbsp;<span class="ident" id="5645545">oldQuantum</span>&nbsp;<span class="op" id="5645556">*</span>&nbsp;<span class="ident" id="5645558">uint64</span><span class="op" id="5645564">(</span><span class="ident" id="5645565">code</span><span class="op" id="5645569">-</span><span class="num" id="5645570">128</span><span class="op" id="5645573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645578">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645593">pc</span>&nbsp;<span class="op" id="5645596">+=</span>&nbsp;<span class="ident" id="5645599">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645611">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645614">return</span>&nbsp;<span class="ident" id="5645621">b</span><span class="op" id="5645622">,</span>&nbsp;<span class="ident" id="5645624">pc</span><span class="op" id="5645626">,</span>&nbsp;<span class="ident" id="5645628">line</span><br>
<span class="lineno"></span><span class="op" id="5645633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5645636">func</span>&nbsp;<span class="op" id="5645641">(</span><span class="ident" id="5645642">t</span>&nbsp;<span class="op" id="5645644">*</span><span class="ident" id="5645645">LineTable</span><span class="op" id="5645654">)</span>&nbsp;<span class="ident" id="5645656">slice</span><span class="op" id="5645661">(</span><span class="ident" id="5645662">pc</span>&nbsp;<span class="ident" id="5645665">uint64</span><span class="op" id="5645671">)</span>&nbsp;<span class="op" id="5645673">*</span><span class="ident" id="5645674">LineTable</span>&nbsp;<span class="op" id="5645684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645687">data</span><span class="op" id="5645691">,</span>&nbsp;<span class="ident" id="5645693">pc</span><span class="op" id="5645695">,</span>&nbsp;<span class="ident" id="5645697">line</span>&nbsp;<span class="op" id="5645702">:=</span>&nbsp;<span class="ident" id="5645705">t</span><span class="op" id="5645706">.</span><span class="ident" id="5645707">parse</span><span class="op" id="5645712">(</span><span class="ident" id="5645713">pc</span><span class="op" id="5645715">,</span>&nbsp;<span class="op" id="5645717">-</span><span class="num" id="5645718">1</span><span class="op" id="5645719">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645722">return</span>&nbsp;<span class="op" id="5645729">&amp;</span><span class="ident" id="5645730">LineTable</span><span class="op" id="5645739">{</span><span class="ident" id="5645740">Data</span><span class="op" id="5645744">:</span>&nbsp;<span class="ident" id="5645746">data</span><span class="op" id="5645750">,</span>&nbsp;<span class="ident" id="5645752">PC</span><span class="op" id="5645754">:</span>&nbsp;<span class="ident" id="5645756">pc</span><span class="op" id="5645758">,</span>&nbsp;<span class="ident" id="5645760">Line</span><span class="op" id="5645764">:</span>&nbsp;<span class="ident" id="5645766">line</span><span class="op" id="5645770">}</span><br>
<span class="lineno"></span><span class="op" id="5645772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5645775">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="5645842">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="5645897">func</span>&nbsp;<span class="op" id="5645902">(</span><span class="ident" id="5645903">t</span>&nbsp;<span class="op" id="5645905">*</span><span class="ident" id="5645906">LineTable</span><span class="op" id="5645915">)</span>&nbsp;<span class="ident" id="5645917">PCToLine</span><span class="op" id="5645925">(</span><span class="ident" id="5645926">pc</span>&nbsp;<span class="ident" id="5645929">uint64</span><span class="op" id="5645935">)</span>&nbsp;<span class="builtintype" id="5645937">int</span>&nbsp;<span class="op" id="5645941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645944">if</span>&nbsp;<span class="ident" id="5645947">t</span><span class="op" id="5645948">.</span><span class="ident" id="5645949">isGo12</span><span class="op" id="5645955">(</span><span class="op" id="5645956">)</span>&nbsp;<span class="op" id="5645958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645962">return</span>&nbsp;<span class="ident" id="5645969">t</span><span class="op" id="5645970">.</span><span class="ident" id="5645971">go12PCToLine</span><span class="op" id="5645983">(</span><span class="ident" id="5645984">pc</span><span class="op" id="5645986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645992">_</span><span class="op" id="5645993">,</span>&nbsp;<span class="ident" id="5645995">_</span><span class="op" id="5645996">,</span>&nbsp;<span class="ident" id="5645998">line</span>&nbsp;<span class="op" id="5646003">:=</span>&nbsp;<span class="ident" id="5646006">t</span><span class="op" id="5646007">.</span><span class="ident" id="5646008">parse</span><span class="op" id="5646013">(</span><span class="ident" id="5646014">pc</span><span class="op" id="5646016">,</span>&nbsp;<span class="op" id="5646018">-</span><span class="num" id="5646019">1</span><span class="op" id="5646020">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646023">return</span>&nbsp;<span class="ident" id="5646030">line</span><br>
<span class="lineno"></span><span class="op" id="5646035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5646038">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="5646105">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="5646156">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="5646211">func</span>&nbsp;<span class="op" id="5646216">(</span><span class="ident" id="5646217">t</span>&nbsp;<span class="op" id="5646219">*</span><span class="ident" id="5646220">LineTable</span><span class="op" id="5646229">)</span>&nbsp;<span class="ident" id="5646231">LineToPC</span><span class="op" id="5646239">(</span><span class="ident" id="5646240">line</span>&nbsp;<span class="builtintype" id="5646245">int</span><span class="op" id="5646248">,</span>&nbsp;<span class="ident" id="5646250">maxpc</span>&nbsp;<span class="ident" id="5646256">uint64</span><span class="op" id="5646262">)</span>&nbsp;<span class="ident" id="5646264">uint64</span>&nbsp;<span class="op" id="5646271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646274">if</span>&nbsp;<span class="ident" id="5646277">t</span><span class="op" id="5646278">.</span><span class="ident" id="5646279">isGo12</span><span class="op" id="5646285">(</span><span class="op" id="5646286">)</span>&nbsp;<span class="op" id="5646288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646292">return</span>&nbsp;<span class="num" id="5646299">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646302">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646305">_</span><span class="op" id="5646306">,</span>&nbsp;<span class="ident" id="5646308">pc</span><span class="op" id="5646310">,</span>&nbsp;<span class="ident" id="5646312">line1</span>&nbsp;<span class="op" id="5646318">:=</span>&nbsp;<span class="ident" id="5646321">t</span><span class="op" id="5646322">.</span><span class="ident" id="5646323">parse</span><span class="op" id="5646328">(</span><span class="ident" id="5646329">maxpc</span><span class="op" id="5646334">,</span>&nbsp;<span class="ident" id="5646336">line</span><span class="op" id="5646340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646343">if</span>&nbsp;<span class="ident" id="5646346">line1</span>&nbsp;<span class="op" id="5646352">!=</span>&nbsp;<span class="ident" id="5646355">line</span>&nbsp;<span class="op" id="5646360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646364">return</span>&nbsp;<span class="num" id="5646371">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5646377">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646441">return</span>&nbsp;<span class="ident" id="5646448">pc</span>&nbsp;<span class="op" id="5646451">-</span>&nbsp;<span class="ident" id="5646453">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="5646464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5646467">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="5646511">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="5646549">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5646590">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="5646621">func</span>&nbsp;<span class="ident" id="5646626">NewLineTable</span><span class="op" id="5646638">(</span><span class="ident" id="5646639">data</span>&nbsp;<span class="op" id="5646644">[</span><span class="op" id="5646645">]</span><span class="builtintype" id="5646646">byte</span><span class="op" id="5646650">,</span>&nbsp;<span class="ident" id="5646652">text</span>&nbsp;<span class="ident" id="5646657">uint64</span><span class="op" id="5646663">)</span>&nbsp;<span class="op" id="5646665">*</span><span class="ident" id="5646666">LineTable</span>&nbsp;<span class="op" id="5646676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646679">return</span>&nbsp;<span class="op" id="5646686">&amp;</span><span class="ident" id="5646687">LineTable</span><span class="op" id="5646696">{</span><span class="ident" id="5646697">Data</span><span class="op" id="5646701">:</span>&nbsp;<span class="ident" id="5646703">data</span><span class="op" id="5646707">,</span>&nbsp;<span class="ident" id="5646709">PC</span><span class="op" id="5646711">:</span>&nbsp;<span class="ident" id="5646713">text</span><span class="op" id="5646717">,</span>&nbsp;<span class="ident" id="5646719">Line</span><span class="op" id="5646723">:</span>&nbsp;<span class="num" id="5646725">0</span><span class="op" id="5646726">}</span><br>
<span class="lineno"></span><span class="op" id="5646728">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5646731">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="5646762">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="5646794">//</span><br>
<span class="lineno"></span><span class="comment" id="5646797">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="5646864">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5646932">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="5647006">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5647030">//</span><br>
<span class="lineno"></span><span class="comment" id="5647033">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="5647103">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5647149">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5647217">func</span>&nbsp;<span class="op" id="5647222">(</span><span class="ident" id="5647223">t</span>&nbsp;<span class="op" id="5647225">*</span><span class="ident" id="5647226">LineTable</span><span class="op" id="5647235">)</span>&nbsp;<span class="ident" id="5647237">isGo12</span><span class="op" id="5647243">(</span><span class="op" id="5647244">)</span>&nbsp;<span class="builtintype" id="5647246">bool</span>&nbsp;<span class="op" id="5647251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647254">t</span><span class="op" id="5647255">.</span><span class="ident" id="5647256">go12Init</span><span class="op" id="5647264">(</span><span class="op" id="5647265">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647268">return</span>&nbsp;<span class="ident" id="5647275">t</span><span class="op" id="5647276">.</span><span class="ident" id="5647277">go12</span>&nbsp;<span class="op" id="5647282">==</span>&nbsp;<span class="num" id="5647285">1</span><br>
<span class="lineno"></span><span class="op" id="5647287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5647290">const</span>&nbsp;<span class="ident" id="5647296">go12magic</span>&nbsp;<span class="op" id="5647306">=</span>&nbsp;<span class="num" id="5647308">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="5647320">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="5647377">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="5647434">func</span>&nbsp;<span class="op" id="5647439">(</span><span class="ident" id="5647440">t</span>&nbsp;<span class="op" id="5647442">*</span><span class="ident" id="5647443">LineTable</span><span class="op" id="5647452">)</span>&nbsp;<span class="builtintype" id="5647454">uintptr</span><span class="op" id="5647461">(</span><span class="ident" id="5647462">b</span>&nbsp;<span class="op" id="5647464">[</span><span class="op" id="5647465">]</span><span class="builtintype" id="5647466">byte</span><span class="op" id="5647470">)</span>&nbsp;<span class="ident" id="5647472">uint64</span>&nbsp;<span class="op" id="5647479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647482">if</span>&nbsp;<span class="ident" id="5647485">t</span><span class="op" id="5647486">.</span><span class="ident" id="5647487">ptrsize</span>&nbsp;<span class="op" id="5647495">==</span>&nbsp;<span class="num" id="5647498">4</span>&nbsp;<span class="op" id="5647500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647504">return</span>&nbsp;<span class="ident" id="5647511">uint64</span><span class="op" id="5647517">(</span><span class="ident" id="5647518">t</span><span class="op" id="5647519">.</span><span class="ident" id="5647520">binary</span><span class="op" id="5647526">.</span><span class="ident" id="5647527">Uint32</span><span class="op" id="5647533">(</span><span class="ident" id="5647534">b</span><span class="op" id="5647535">)</span><span class="op" id="5647536">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647542">return</span>&nbsp;<span class="ident" id="5647549">t</span><span class="op" id="5647550">.</span><span class="ident" id="5647551">binary</span><span class="op" id="5647557">.</span><span class="ident" id="5647558">Uint64</span><span class="op" id="5647564">(</span><span class="ident" id="5647565">b</span><span class="op" id="5647566">)</span><br>
<span class="lineno"></span><span class="op" id="5647568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5647571">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="5647646">func</span>&nbsp;<span class="op" id="5647651">(</span><span class="ident" id="5647652">t</span>&nbsp;<span class="op" id="5647654">*</span><span class="ident" id="5647655">LineTable</span><span class="op" id="5647664">)</span>&nbsp;<span class="ident" id="5647666">go12Init</span><span class="op" id="5647674">(</span><span class="op" id="5647675">)</span>&nbsp;<span class="op" id="5647677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647680">t</span><span class="op" id="5647681">.</span><span class="ident" id="5647682">mu</span><span class="op" id="5647684">.</span><span class="ident" id="5647685">Lock</span><span class="op" id="5647689">(</span><span class="op" id="5647690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647693">defer</span>&nbsp;<span class="ident" id="5647699">t</span><span class="op" id="5647700">.</span><span class="ident" id="5647701">mu</span><span class="op" id="5647703">.</span><span class="ident" id="5647704">Unlock</span><span class="op" id="5647710">(</span><span class="op" id="5647711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647714">if</span>&nbsp;<span class="ident" id="5647717">t</span><span class="op" id="5647718">.</span><span class="ident" id="5647719">go12</span>&nbsp;<span class="op" id="5647724">!=</span>&nbsp;<span class="num" id="5647727">0</span>&nbsp;<span class="op" id="5647729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647733">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647745">defer</span>&nbsp;<span class="keyword" id="5647751">func</span><span class="op" id="5647755">(</span><span class="op" id="5647756">)</span>&nbsp;<span class="op" id="5647758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5647762">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5647827">recover</span><span class="op" id="5647834">(</span><span class="op" id="5647835">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647838">}</span><span class="op" id="5647839">(</span><span class="op" id="5647840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5647844">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647913">t</span><span class="op" id="5647914">.</span><span class="ident" id="5647915">go12</span>&nbsp;<span class="op" id="5647920">=</span>&nbsp;<span class="op" id="5647922">-</span><span class="num" id="5647923">1</span>&nbsp;<span class="comment" id="5647925">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647963">if</span>&nbsp;<span class="builtinfunc" id="5647966">len</span><span class="op" id="5647969">(</span><span class="ident" id="5647970">t</span><span class="op" id="5647971">.</span><span class="ident" id="5647972">Data</span><span class="op" id="5647976">)</span>&nbsp;<span class="op" id="5647978">&lt;</span>&nbsp;<span class="num" id="5647980">16</span>&nbsp;<span class="op" id="5647983">||</span>&nbsp;<span class="ident" id="5647986">t</span><span class="op" id="5647987">.</span><span class="ident" id="5647988">Data</span><span class="op" id="5647992">[</span><span class="num" id="5647993">4</span><span class="op" id="5647994">]</span>&nbsp;<span class="op" id="5647996">!=</span>&nbsp;<span class="num" id="5647999">0</span>&nbsp;<span class="op" id="5648001">||</span>&nbsp;<span class="ident" id="5648004">t</span><span class="op" id="5648005">.</span><span class="ident" id="5648006">Data</span><span class="op" id="5648010">[</span><span class="num" id="5648011">5</span><span class="op" id="5648012">]</span>&nbsp;<span class="op" id="5648014">!=</span>&nbsp;<span class="num" id="5648017">0</span>&nbsp;<span class="op" id="5648019">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648024">(</span><span class="ident" id="5648025">t</span><span class="op" id="5648026">.</span><span class="ident" id="5648027">Data</span><span class="op" id="5648031">[</span><span class="num" id="5648032">6</span><span class="op" id="5648033">]</span>&nbsp;<span class="op" id="5648035">!=</span>&nbsp;<span class="num" id="5648038">1</span>&nbsp;<span class="op" id="5648040">&amp;&amp;</span>&nbsp;<span class="ident" id="5648043">t</span><span class="op" id="5648044">.</span><span class="ident" id="5648045">Data</span><span class="op" id="5648049">[</span><span class="num" id="5648050">6</span><span class="op" id="5648051">]</span>&nbsp;<span class="op" id="5648053">!=</span>&nbsp;<span class="num" id="5648056">4</span><span class="op" id="5648057">)</span>&nbsp;<span class="op" id="5648059">||</span>&nbsp;<span class="comment" id="5648062">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648078">(</span><span class="ident" id="5648079">t</span><span class="op" id="5648080">.</span><span class="ident" id="5648081">Data</span><span class="op" id="5648085">[</span><span class="num" id="5648086">7</span><span class="op" id="5648087">]</span>&nbsp;<span class="op" id="5648089">!=</span>&nbsp;<span class="num" id="5648092">4</span>&nbsp;<span class="op" id="5648094">&amp;&amp;</span>&nbsp;<span class="ident" id="5648097">t</span><span class="op" id="5648098">.</span><span class="ident" id="5648099">Data</span><span class="op" id="5648103">[</span><span class="num" id="5648104">7</span><span class="op" id="5648105">]</span>&nbsp;<span class="op" id="5648107">!=</span>&nbsp;<span class="num" id="5648110">8</span><span class="op" id="5648111">)</span>&nbsp;<span class="op" id="5648113">{</span>&nbsp;<span class="comment" id="5648115">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648145">switch</span>&nbsp;<span class="builtintype" id="5648152">uint32</span><span class="op" id="5648158">(</span><span class="ident" id="5648159">go12magic</span><span class="op" id="5648168">)</span>&nbsp;<span class="op" id="5648170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648173">case</span>&nbsp;<span class="ident" id="5648178">binary</span><span class="op" id="5648184">.</span><span class="ident" id="5648185">LittleEndian</span><span class="op" id="5648197">.</span><span class="ident" id="5648198">Uint32</span><span class="op" id="5648204">(</span><span class="ident" id="5648205">t</span><span class="op" id="5648206">.</span><span class="ident" id="5648207">Data</span><span class="op" id="5648211">)</span><span class="op" id="5648212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648216">t</span><span class="op" id="5648217">.</span><span class="ident" id="5648218">binary</span>&nbsp;<span class="op" id="5648225">=</span>&nbsp;<span class="ident" id="5648227">binary</span><span class="op" id="5648233">.</span><span class="ident" id="5648234">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648248">case</span>&nbsp;<span class="ident" id="5648253">binary</span><span class="op" id="5648259">.</span><span class="ident" id="5648260">BigEndian</span><span class="op" id="5648269">.</span><span class="ident" id="5648270">Uint32</span><span class="op" id="5648276">(</span><span class="ident" id="5648277">t</span><span class="op" id="5648278">.</span><span class="ident" id="5648279">Data</span><span class="op" id="5648283">)</span><span class="op" id="5648284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648288">t</span><span class="op" id="5648289">.</span><span class="ident" id="5648290">binary</span>&nbsp;<span class="op" id="5648297">=</span>&nbsp;<span class="ident" id="5648299">binary</span><span class="op" id="5648305">.</span><span class="ident" id="5648306">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648317">default</span><span class="op" id="5648324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648328">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648340">t</span><span class="op" id="5648341">.</span><span class="ident" id="5648342">quantum</span>&nbsp;<span class="op" id="5648350">=</span>&nbsp;<span class="builtintype" id="5648352">uint32</span><span class="op" id="5648358">(</span><span class="ident" id="5648359">t</span><span class="op" id="5648360">.</span><span class="ident" id="5648361">Data</span><span class="op" id="5648365">[</span><span class="num" id="5648366">6</span><span class="op" id="5648367">]</span><span class="op" id="5648368">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648371">t</span><span class="op" id="5648372">.</span><span class="ident" id="5648373">ptrsize</span>&nbsp;<span class="op" id="5648381">=</span>&nbsp;<span class="builtintype" id="5648383">uint32</span><span class="op" id="5648389">(</span><span class="ident" id="5648390">t</span><span class="op" id="5648391">.</span><span class="ident" id="5648392">Data</span><span class="op" id="5648396">[</span><span class="num" id="5648397">7</span><span class="op" id="5648398">]</span><span class="op" id="5648399">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648403">t</span><span class="op" id="5648404">.</span><span class="ident" id="5648405">nfunctab</span>&nbsp;<span class="op" id="5648414">=</span>&nbsp;<span class="builtintype" id="5648416">uint32</span><span class="op" id="5648422">(</span><span class="ident" id="5648423">t</span><span class="op" id="5648424">.</span><span class="builtintype" id="5648425">uintptr</span><span class="op" id="5648432">(</span><span class="ident" id="5648433">t</span><span class="op" id="5648434">.</span><span class="ident" id="5648435">Data</span><span class="op" id="5648439">[</span><span class="num" id="5648440">8</span><span class="op" id="5648441">:</span><span class="op" id="5648442">]</span><span class="op" id="5648443">)</span><span class="op" id="5648444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648447">t</span><span class="op" id="5648448">.</span><span class="ident" id="5648449">functab</span>&nbsp;<span class="op" id="5648457">=</span>&nbsp;<span class="ident" id="5648459">t</span><span class="op" id="5648460">.</span><span class="ident" id="5648461">Data</span><span class="op" id="5648465">[</span><span class="num" id="5648466">8</span><span class="op" id="5648467">+</span><span class="ident" id="5648468">t</span><span class="op" id="5648469">.</span><span class="ident" id="5648470">ptrsize</span><span class="op" id="5648477">:</span><span class="op" id="5648478">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648481">functabsize</span>&nbsp;<span class="op" id="5648493">:=</span>&nbsp;<span class="ident" id="5648496">t</span><span class="op" id="5648497">.</span><span class="ident" id="5648498">nfunctab</span><span class="op" id="5648506">*</span><span class="num" id="5648507">2</span><span class="op" id="5648508">*</span><span class="ident" id="5648509">t</span><span class="op" id="5648510">.</span><span class="ident" id="5648511">ptrsize</span>&nbsp;<span class="op" id="5648519">+</span>&nbsp;<span class="ident" id="5648521">t</span><span class="op" id="5648522">.</span><span class="ident" id="5648523">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648532">fileoff</span>&nbsp;<span class="op" id="5648540">:=</span>&nbsp;<span class="ident" id="5648543">t</span><span class="op" id="5648544">.</span><span class="ident" id="5648545">binary</span><span class="op" id="5648551">.</span><span class="ident" id="5648552">Uint32</span><span class="op" id="5648558">(</span><span class="ident" id="5648559">t</span><span class="op" id="5648560">.</span><span class="ident" id="5648561">functab</span><span class="op" id="5648568">[</span><span class="ident" id="5648569">functabsize</span><span class="op" id="5648580">:</span><span class="op" id="5648581">]</span><span class="op" id="5648582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648585">t</span><span class="op" id="5648586">.</span><span class="ident" id="5648587">functab</span>&nbsp;<span class="op" id="5648595">=</span>&nbsp;<span class="ident" id="5648597">t</span><span class="op" id="5648598">.</span><span class="ident" id="5648599">functab</span><span class="op" id="5648606">[</span><span class="op" id="5648607">:</span><span class="ident" id="5648608">functabsize</span><span class="op" id="5648619">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648622">t</span><span class="op" id="5648623">.</span><span class="ident" id="5648624">filetab</span>&nbsp;<span class="op" id="5648632">=</span>&nbsp;<span class="ident" id="5648634">t</span><span class="op" id="5648635">.</span><span class="ident" id="5648636">Data</span><span class="op" id="5648640">[</span><span class="ident" id="5648641">fileoff</span><span class="op" id="5648648">:</span><span class="op" id="5648649">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648652">t</span><span class="op" id="5648653">.</span><span class="ident" id="5648654">nfiletab</span>&nbsp;<span class="op" id="5648663">=</span>&nbsp;<span class="ident" id="5648665">t</span><span class="op" id="5648666">.</span><span class="ident" id="5648667">binary</span><span class="op" id="5648673">.</span><span class="ident" id="5648674">Uint32</span><span class="op" id="5648680">(</span><span class="ident" id="5648681">t</span><span class="op" id="5648682">.</span><span class="ident" id="5648683">filetab</span><span class="op" id="5648690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648693">t</span><span class="op" id="5648694">.</span><span class="ident" id="5648695">filetab</span>&nbsp;<span class="op" id="5648703">=</span>&nbsp;<span class="ident" id="5648705">t</span><span class="op" id="5648706">.</span><span class="ident" id="5648707">filetab</span><span class="op" id="5648714">[</span><span class="op" id="5648715">:</span><span class="ident" id="5648716">t</span><span class="op" id="5648717">.</span><span class="ident" id="5648718">nfiletab</span><span class="op" id="5648726">*</span><span class="num" id="5648727">4</span><span class="op" id="5648728">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648732">t</span><span class="op" id="5648733">.</span><span class="ident" id="5648734">go12</span>&nbsp;<span class="op" id="5648739">=</span>&nbsp;<span class="num" id="5648741">1</span>&nbsp;<span class="comment" id="5648743">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="5648761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5648764">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="5648838">func</span>&nbsp;<span class="op" id="5648843">(</span><span class="ident" id="5648844">t</span>&nbsp;<span class="op" id="5648846">*</span><span class="ident" id="5648847">LineTable</span><span class="op" id="5648856">)</span>&nbsp;<span class="ident" id="5648858">go12Funcs</span><span class="op" id="5648867">(</span><span class="op" id="5648868">)</span>&nbsp;<span class="op" id="5648870">[</span><span class="op" id="5648871">]</span><span class="ident" id="5648872">Func</span>&nbsp;<span class="op" id="5648877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5648880">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648932">defer</span>&nbsp;<span class="keyword" id="5648938">func</span><span class="op" id="5648942">(</span><span class="op" id="5648943">)</span>&nbsp;<span class="op" id="5648945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5648949">recover</span><span class="op" id="5648956">(</span><span class="op" id="5648957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648960">}</span><span class="op" id="5648961">(</span><span class="op" id="5648962">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648966">n</span>&nbsp;<span class="op" id="5648968">:=</span>&nbsp;<span class="builtinfunc" id="5648971">len</span><span class="op" id="5648974">(</span><span class="ident" id="5648975">t</span><span class="op" id="5648976">.</span><span class="ident" id="5648977">functab</span><span class="op" id="5648984">)</span>&nbsp;<span class="op" id="5648986">/</span>&nbsp;<span class="builtintype" id="5648988">int</span><span class="op" id="5648991">(</span><span class="ident" id="5648992">t</span><span class="op" id="5648993">.</span><span class="ident" id="5648994">ptrsize</span><span class="op" id="5649001">)</span>&nbsp;<span class="op" id="5649003">/</span>&nbsp;<span class="num" id="5649005">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649008">funcs</span>&nbsp;<span class="op" id="5649014">:=</span>&nbsp;<span class="builtinfunc" id="5649017">make</span><span class="op" id="5649021">(</span><span class="op" id="5649022">[</span><span class="op" id="5649023">]</span><span class="ident" id="5649024">Func</span><span class="op" id="5649028">,</span>&nbsp;<span class="ident" id="5649030">n</span><span class="op" id="5649031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649034">for</span>&nbsp;<span class="ident" id="5649038">i</span>&nbsp;<span class="op" id="5649040">:=</span>&nbsp;<span class="keyword" id="5649043">range</span>&nbsp;<span class="ident" id="5649049">funcs</span>&nbsp;<span class="op" id="5649055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649059">f</span>&nbsp;<span class="op" id="5649061">:=</span>&nbsp;<span class="op" id="5649064">&amp;</span><span class="ident" id="5649065">funcs</span><span class="op" id="5649070">[</span><span class="ident" id="5649071">i</span><span class="op" id="5649072">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649076">f</span><span class="op" id="5649077">.</span><span class="ident" id="5649078">Entry</span>&nbsp;<span class="op" id="5649084">=</span>&nbsp;<span class="ident" id="5649086">uint64</span><span class="op" id="5649092">(</span><span class="ident" id="5649093">t</span><span class="op" id="5649094">.</span><span class="builtintype" id="5649095">uintptr</span><span class="op" id="5649102">(</span><span class="ident" id="5649103">t</span><span class="op" id="5649104">.</span><span class="ident" id="5649105">functab</span><span class="op" id="5649112">[</span><span class="num" id="5649113">2</span><span class="op" id="5649114">*</span><span class="ident" id="5649115">i</span><span class="op" id="5649116">*</span><span class="builtintype" id="5649117">int</span><span class="op" id="5649120">(</span><span class="ident" id="5649121">t</span><span class="op" id="5649122">.</span><span class="ident" id="5649123">ptrsize</span><span class="op" id="5649130">)</span><span class="op" id="5649131">:</span><span class="op" id="5649132">]</span><span class="op" id="5649133">)</span><span class="op" id="5649134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649138">f</span><span class="op" id="5649139">.</span><span class="ident" id="5649140">End</span>&nbsp;<span class="op" id="5649144">=</span>&nbsp;<span class="ident" id="5649146">uint64</span><span class="op" id="5649152">(</span><span class="ident" id="5649153">t</span><span class="op" id="5649154">.</span><span class="builtintype" id="5649155">uintptr</span><span class="op" id="5649162">(</span><span class="ident" id="5649163">t</span><span class="op" id="5649164">.</span><span class="ident" id="5649165">functab</span><span class="op" id="5649172">[</span><span class="op" id="5649173">(</span><span class="num" id="5649174">2</span><span class="op" id="5649175">*</span><span class="ident" id="5649176">i</span><span class="op" id="5649177">+</span><span class="num" id="5649178">2</span><span class="op" id="5649179">)</span><span class="op" id="5649180">*</span><span class="builtintype" id="5649181">int</span><span class="op" id="5649184">(</span><span class="ident" id="5649185">t</span><span class="op" id="5649186">.</span><span class="ident" id="5649187">ptrsize</span><span class="op" id="5649194">)</span><span class="op" id="5649195">:</span><span class="op" id="5649196">]</span><span class="op" id="5649197">)</span><span class="op" id="5649198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649202">info</span>&nbsp;<span class="op" id="5649207">:=</span>&nbsp;<span class="ident" id="5649210">t</span><span class="op" id="5649211">.</span><span class="ident" id="5649212">Data</span><span class="op" id="5649216">[</span><span class="ident" id="5649217">t</span><span class="op" id="5649218">.</span><span class="builtintype" id="5649219">uintptr</span><span class="op" id="5649226">(</span><span class="ident" id="5649227">t</span><span class="op" id="5649228">.</span><span class="ident" id="5649229">functab</span><span class="op" id="5649236">[</span><span class="op" id="5649237">(</span><span class="num" id="5649238">2</span><span class="op" id="5649239">*</span><span class="ident" id="5649240">i</span><span class="op" id="5649241">+</span><span class="num" id="5649242">1</span><span class="op" id="5649243">)</span><span class="op" id="5649244">*</span><span class="builtintype" id="5649245">int</span><span class="op" id="5649248">(</span><span class="ident" id="5649249">t</span><span class="op" id="5649250">.</span><span class="ident" id="5649251">ptrsize</span><span class="op" id="5649258">)</span><span class="op" id="5649259">:</span><span class="op" id="5649260">]</span><span class="op" id="5649261">)</span><span class="op" id="5649262">:</span><span class="op" id="5649263">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649267">f</span><span class="op" id="5649268">.</span><span class="ident" id="5649269">LineTable</span>&nbsp;<span class="op" id="5649279">=</span>&nbsp;<span class="ident" id="5649281">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649285">f</span><span class="op" id="5649286">.</span><span class="ident" id="5649287">FrameSize</span>&nbsp;<span class="op" id="5649297">=</span>&nbsp;<span class="builtintype" id="5649299">int</span><span class="op" id="5649302">(</span><span class="ident" id="5649303">t</span><span class="op" id="5649304">.</span><span class="ident" id="5649305">binary</span><span class="op" id="5649311">.</span><span class="ident" id="5649312">Uint32</span><span class="op" id="5649318">(</span><span class="ident" id="5649319">info</span><span class="op" id="5649323">[</span><span class="ident" id="5649324">t</span><span class="op" id="5649325">.</span><span class="ident" id="5649326">ptrsize</span><span class="op" id="5649333">+</span><span class="num" id="5649334">2</span><span class="op" id="5649335">*</span><span class="num" id="5649336">4</span><span class="op" id="5649337">:</span><span class="op" id="5649338">]</span><span class="op" id="5649339">)</span><span class="op" id="5649340">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649344">f</span><span class="op" id="5649345">.</span><span class="ident" id="5649346">Sym</span>&nbsp;<span class="op" id="5649350">=</span>&nbsp;<span class="op" id="5649352">&amp;</span><span class="ident" id="5649353">Sym</span><span class="op" id="5649356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649361">Value</span><span class="op" id="5649366">:</span>&nbsp;&nbsp;<span class="ident" id="5649369">f</span><span class="op" id="5649370">.</span><span class="ident" id="5649371">Entry</span><span class="op" id="5649376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649381">Type</span><span class="op" id="5649385">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="5649389">&#39;T&#39;</span><span class="op" id="5649392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649397">Name</span><span class="op" id="5649401">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5649405">t</span><span class="op" id="5649406">.</span><span class="builtintype" id="5649407">string</span><span class="op" id="5649413">(</span><span class="ident" id="5649414">t</span><span class="op" id="5649415">.</span><span class="ident" id="5649416">binary</span><span class="op" id="5649422">.</span><span class="ident" id="5649423">Uint32</span><span class="op" id="5649429">(</span><span class="ident" id="5649430">info</span><span class="op" id="5649434">[</span><span class="ident" id="5649435">t</span><span class="op" id="5649436">.</span><span class="ident" id="5649437">ptrsize</span><span class="op" id="5649444">:</span><span class="op" id="5649445">]</span><span class="op" id="5649446">)</span><span class="op" id="5649447">)</span><span class="op" id="5649448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649453">GoType</span><span class="op" id="5649459">:</span>&nbsp;<span class="num" id="5649461">0</span><span class="op" id="5649462">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649467">Func</span><span class="op" id="5649471">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5649475">f</span><span class="op" id="5649476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649486">return</span>&nbsp;<span class="ident" id="5649493">funcs</span><br>
<span class="lineno"></span><span class="op" id="5649499">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="5649502">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="5649575">func</span>&nbsp;<span class="op" id="5649580">(</span><span class="ident" id="5649581">t</span>&nbsp;<span class="op" id="5649583">*</span><span class="ident" id="5649584">LineTable</span><span class="op" id="5649593">)</span>&nbsp;<span class="ident" id="5649595">findFunc</span><span class="op" id="5649603">(</span><span class="ident" id="5649604">pc</span>&nbsp;<span class="ident" id="5649607">uint64</span><span class="op" id="5649613">)</span>&nbsp;<span class="op" id="5649615">[</span><span class="op" id="5649616">]</span><span class="builtintype" id="5649617">byte</span>&nbsp;<span class="op" id="5649622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649625">if</span>&nbsp;<span class="ident" id="5649628">pc</span>&nbsp;<span class="op" id="5649631">&lt;</span>&nbsp;<span class="ident" id="5649633">t</span><span class="op" id="5649634">.</span><span class="builtintype" id="5649635">uintptr</span><span class="op" id="5649642">(</span><span class="ident" id="5649643">t</span><span class="op" id="5649644">.</span><span class="ident" id="5649645">functab</span><span class="op" id="5649652">)</span>&nbsp;<span class="op" id="5649654">||</span>&nbsp;<span class="ident" id="5649657">pc</span>&nbsp;<span class="op" id="5649660">&gt;=</span>&nbsp;<span class="ident" id="5649663">t</span><span class="op" id="5649664">.</span><span class="builtintype" id="5649665">uintptr</span><span class="op" id="5649672">(</span><span class="ident" id="5649673">t</span><span class="op" id="5649674">.</span><span class="ident" id="5649675">functab</span><span class="op" id="5649682">[</span><span class="builtinfunc" id="5649683">len</span><span class="op" id="5649686">(</span><span class="ident" id="5649687">t</span><span class="op" id="5649688">.</span><span class="ident" id="5649689">functab</span><span class="op" id="5649696">)</span><span class="op" id="5649697">-</span><span class="builtintype" id="5649698">int</span><span class="op" id="5649701">(</span><span class="ident" id="5649702">t</span><span class="op" id="5649703">.</span><span class="ident" id="5649704">ptrsize</span><span class="op" id="5649711">)</span><span class="op" id="5649712">:</span><span class="op" id="5649713">]</span><span class="op" id="5649714">)</span>&nbsp;<span class="op" id="5649716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649720">return</span>&nbsp;<span class="ident" id="5649727">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5649736">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5649795">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649860">f</span>&nbsp;<span class="op" id="5649862">:=</span>&nbsp;<span class="ident" id="5649865">t</span><span class="op" id="5649866">.</span><span class="ident" id="5649867">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649876">nf</span>&nbsp;<span class="op" id="5649879">:=</span>&nbsp;<span class="ident" id="5649882">t</span><span class="op" id="5649883">.</span><span class="ident" id="5649884">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649894">for</span>&nbsp;<span class="ident" id="5649898">nf</span>&nbsp;<span class="op" id="5649901">&gt;</span>&nbsp;<span class="num" id="5649903">0</span>&nbsp;<span class="op" id="5649905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649909">m</span>&nbsp;<span class="op" id="5649911">:=</span>&nbsp;<span class="ident" id="5649914">nf</span>&nbsp;<span class="op" id="5649917">/</span>&nbsp;<span class="num" id="5649919">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649923">fm</span>&nbsp;<span class="op" id="5649926">:=</span>&nbsp;<span class="ident" id="5649929">f</span><span class="op" id="5649930">[</span><span class="num" id="5649931">2</span><span class="op" id="5649932">*</span><span class="ident" id="5649933">t</span><span class="op" id="5649934">.</span><span class="ident" id="5649935">ptrsize</span><span class="op" id="5649942">*</span><span class="ident" id="5649943">m</span><span class="op" id="5649944">:</span><span class="op" id="5649945">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649949">if</span>&nbsp;<span class="ident" id="5649952">t</span><span class="op" id="5649953">.</span><span class="builtintype" id="5649954">uintptr</span><span class="op" id="5649961">(</span><span class="ident" id="5649962">fm</span><span class="op" id="5649964">)</span>&nbsp;<span class="op" id="5649966">&lt;=</span>&nbsp;<span class="ident" id="5649969">pc</span>&nbsp;<span class="op" id="5649972">&amp;&amp;</span>&nbsp;<span class="ident" id="5649975">pc</span>&nbsp;<span class="op" id="5649978">&lt;</span>&nbsp;<span class="ident" id="5649980">t</span><span class="op" id="5649981">.</span><span class="builtintype" id="5649982">uintptr</span><span class="op" id="5649989">(</span><span class="ident" id="5649990">fm</span><span class="op" id="5649992">[</span><span class="num" id="5649993">2</span><span class="op" id="5649994">*</span><span class="ident" id="5649995">t</span><span class="op" id="5649996">.</span><span class="ident" id="5649997">ptrsize</span><span class="op" id="5650004">:</span><span class="op" id="5650005">]</span><span class="op" id="5650006">)</span>&nbsp;<span class="op" id="5650008">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650013">return</span>&nbsp;<span class="ident" id="5650020">t</span><span class="op" id="5650021">.</span><span class="ident" id="5650022">Data</span><span class="op" id="5650026">[</span><span class="ident" id="5650027">t</span><span class="op" id="5650028">.</span><span class="builtintype" id="5650029">uintptr</span><span class="op" id="5650036">(</span><span class="ident" id="5650037">fm</span><span class="op" id="5650039">[</span><span class="ident" id="5650040">t</span><span class="op" id="5650041">.</span><span class="ident" id="5650042">ptrsize</span><span class="op" id="5650049">:</span><span class="op" id="5650050">]</span><span class="op" id="5650051">)</span><span class="op" id="5650052">:</span><span class="op" id="5650053">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650057">}</span>&nbsp;<span class="keyword" id="5650059">else</span>&nbsp;<span class="keyword" id="5650064">if</span>&nbsp;<span class="ident" id="5650067">pc</span>&nbsp;<span class="op" id="5650070">&lt;</span>&nbsp;<span class="ident" id="5650072">t</span><span class="op" id="5650073">.</span><span class="builtintype" id="5650074">uintptr</span><span class="op" id="5650081">(</span><span class="ident" id="5650082">fm</span><span class="op" id="5650084">)</span>&nbsp;<span class="op" id="5650086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650091">nf</span>&nbsp;<span class="op" id="5650094">=</span>&nbsp;<span class="ident" id="5650096">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650100">}</span>&nbsp;<span class="keyword" id="5650102">else</span>&nbsp;<span class="op" id="5650107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650112">f</span>&nbsp;<span class="op" id="5650114">=</span>&nbsp;<span class="ident" id="5650116">f</span><span class="op" id="5650117">[</span><span class="op" id="5650118">(</span><span class="ident" id="5650119">m</span><span class="op" id="5650120">+</span><span class="num" id="5650121">1</span><span class="op" id="5650122">)</span><span class="op" id="5650123">*</span><span class="num" id="5650124">2</span><span class="op" id="5650125">*</span><span class="ident" id="5650126">t</span><span class="op" id="5650127">.</span><span class="ident" id="5650128">ptrsize</span><span class="op" id="5650135">:</span><span class="op" id="5650136">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650141">nf</span>&nbsp;<span class="op" id="5650144">-=</span>&nbsp;<span class="ident" id="5650147">m</span>&nbsp;<span class="op" id="5650149">+</span>&nbsp;<span class="num" id="5650151">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650161">return</span>&nbsp;<span class="ident" id="5650168">nil</span><br>
<span class="lineno"></span><span class="op" id="5650172">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="5650175">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="5650236">func</span>&nbsp;<span class="op" id="5650241">(</span><span class="ident" id="5650242">t</span>&nbsp;<span class="op" id="5650244">*</span><span class="ident" id="5650245">LineTable</span><span class="op" id="5650254">)</span>&nbsp;<span class="ident" id="5650256">readvarint</span><span class="op" id="5650266">(</span><span class="ident" id="5650267">pp</span>&nbsp;<span class="op" id="5650270">*</span><span class="op" id="5650271">[</span><span class="op" id="5650272">]</span><span class="builtintype" id="5650273">byte</span><span class="op" id="5650277">)</span>&nbsp;<span class="builtintype" id="5650279">uint32</span>&nbsp;<span class="op" id="5650286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650289">var</span>&nbsp;<span class="ident" id="5650293">v</span><span class="op" id="5650294">,</span>&nbsp;<span class="ident" id="5650296">shift</span>&nbsp;<span class="builtintype" id="5650302">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650310">p</span>&nbsp;<span class="op" id="5650312">:=</span>&nbsp;<span class="op" id="5650315">*</span><span class="ident" id="5650316">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650320">for</span>&nbsp;<span class="ident" id="5650324">shift</span>&nbsp;<span class="op" id="5650330">=</span>&nbsp;<span class="num" id="5650332">0</span><span class="op" id="5650333">;</span>&nbsp;<span class="op" id="5650335">;</span>&nbsp;<span class="ident" id="5650337">shift</span>&nbsp;<span class="op" id="5650343">+=</span>&nbsp;<span class="num" id="5650346">7</span>&nbsp;<span class="op" id="5650348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650352">b</span>&nbsp;<span class="op" id="5650354">:=</span>&nbsp;<span class="ident" id="5650357">p</span><span class="op" id="5650358">[</span><span class="num" id="5650359">0</span><span class="op" id="5650360">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650364">p</span>&nbsp;<span class="op" id="5650366">=</span>&nbsp;<span class="ident" id="5650368">p</span><span class="op" id="5650369">[</span><span class="num" id="5650370">1</span><span class="op" id="5650371">:</span><span class="op" id="5650372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650376">v</span>&nbsp;<span class="op" id="5650378">|=</span>&nbsp;<span class="op" id="5650381">(</span><span class="builtintype" id="5650382">uint32</span><span class="op" id="5650388">(</span><span class="ident" id="5650389">b</span><span class="op" id="5650390">)</span>&nbsp;<span class="op" id="5650392">&amp;</span>&nbsp;<span class="num" id="5650394">0x7F</span><span class="op" id="5650398">)</span>&nbsp;<span class="op" id="5650400">&lt;&lt;</span>&nbsp;<span class="ident" id="5650403">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650411">if</span>&nbsp;<span class="ident" id="5650414">b</span><span class="op" id="5650415">&amp;</span><span class="num" id="5650416">0x80</span>&nbsp;<span class="op" id="5650421">==</span>&nbsp;<span class="num" id="5650424">0</span>&nbsp;<span class="op" id="5650426">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650431">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650445">*</span><span class="ident" id="5650446">pp</span>&nbsp;<span class="op" id="5650449">=</span>&nbsp;<span class="ident" id="5650451">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650454">return</span>&nbsp;<span class="ident" id="5650461">v</span><br>
<span class="lineno">265</span><span class="op" id="5650463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650466">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="5650510">func</span>&nbsp;<span class="op" id="5650515">(</span><span class="ident" id="5650516">t</span>&nbsp;<span class="op" id="5650518">*</span><span class="ident" id="5650519">LineTable</span><span class="op" id="5650528">)</span>&nbsp;<span class="builtintype" id="5650530">string</span><span class="op" id="5650536">(</span><span class="ident" id="5650537">off</span>&nbsp;<span class="builtintype" id="5650541">uint32</span><span class="op" id="5650547">)</span>&nbsp;<span class="builtintype" id="5650549">string</span>&nbsp;<span class="op" id="5650556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650559">for</span>&nbsp;<span class="ident" id="5650563">i</span>&nbsp;<span class="op" id="5650565">:=</span>&nbsp;<span class="ident" id="5650568">off</span><span class="op" id="5650571">;</span>&nbsp;<span class="op" id="5650573">;</span>&nbsp;<span class="ident" id="5650575">i</span><span class="op" id="5650576">++</span>&nbsp;<span class="op" id="5650579">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650583">if</span>&nbsp;<span class="ident" id="5650586">t</span><span class="op" id="5650587">.</span><span class="ident" id="5650588">Data</span><span class="op" id="5650592">[</span><span class="ident" id="5650593">i</span><span class="op" id="5650594">]</span>&nbsp;<span class="op" id="5650596">==</span>&nbsp;<span class="num" id="5650599">0</span>&nbsp;<span class="op" id="5650601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650606">return</span>&nbsp;<span class="builtintype" id="5650613">string</span><span class="op" id="5650619">(</span><span class="ident" id="5650620">t</span><span class="op" id="5650621">.</span><span class="ident" id="5650622">Data</span><span class="op" id="5650626">[</span><span class="ident" id="5650627">off</span><span class="op" id="5650630">:</span><span class="ident" id="5650631">i</span><span class="op" id="5650632">]</span><span class="op" id="5650633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650640">}</span><br>
<span class="lineno"></span><span class="op" id="5650642">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="5650645">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5650711">func</span>&nbsp;<span class="op" id="5650716">(</span><span class="ident" id="5650717">t</span>&nbsp;<span class="op" id="5650719">*</span><span class="ident" id="5650720">LineTable</span><span class="op" id="5650729">)</span>&nbsp;<span class="ident" id="5650731">step</span><span class="op" id="5650735">(</span><span class="ident" id="5650736">p</span>&nbsp;<span class="op" id="5650738">*</span><span class="op" id="5650739">[</span><span class="op" id="5650740">]</span><span class="builtintype" id="5650741">byte</span><span class="op" id="5650745">,</span>&nbsp;<span class="ident" id="5650747">pc</span>&nbsp;<span class="op" id="5650750">*</span><span class="ident" id="5650751">uint64</span><span class="op" id="5650757">,</span>&nbsp;<span class="ident" id="5650759">val</span>&nbsp;<span class="op" id="5650763">*</span><span class="builtintype" id="5650764">int32</span><span class="op" id="5650769">,</span>&nbsp;<span class="ident" id="5650771">first</span>&nbsp;<span class="builtintype" id="5650777">bool</span><span class="op" id="5650781">)</span>&nbsp;<span class="builtintype" id="5650783">bool</span>&nbsp;<span class="op" id="5650788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650791">uvdelta</span>&nbsp;<span class="op" id="5650799">:=</span>&nbsp;<span class="ident" id="5650802">t</span><span class="op" id="5650803">.</span><span class="ident" id="5650804">readvarint</span><span class="op" id="5650814">(</span><span class="ident" id="5650815">p</span><span class="op" id="5650816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650819">if</span>&nbsp;<span class="ident" id="5650822">uvdelta</span>&nbsp;<span class="op" id="5650830">==</span>&nbsp;<span class="num" id="5650833">0</span>&nbsp;<span class="op" id="5650835">&amp;&amp;</span>&nbsp;<span class="op" id="5650838">!</span><span class="ident" id="5650839">first</span>&nbsp;<span class="op" id="5650845">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650849">return</span>&nbsp;<span class="ident" id="5650856">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650866">if</span>&nbsp;<span class="ident" id="5650869">uvdelta</span><span class="op" id="5650876">&amp;</span><span class="num" id="5650877">1</span>&nbsp;<span class="op" id="5650879">!=</span>&nbsp;<span class="num" id="5650882">0</span>&nbsp;<span class="op" id="5650884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650888">uvdelta</span>&nbsp;<span class="op" id="5650896">=</span>&nbsp;<span class="op" id="5650898">^</span><span class="op" id="5650899">(</span><span class="ident" id="5650900">uvdelta</span>&nbsp;<span class="op" id="5650908">&gt;&gt;</span>&nbsp;<span class="num" id="5650911">1</span><span class="op" id="5650912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650915">}</span>&nbsp;<span class="keyword" id="5650917">else</span>&nbsp;<span class="op" id="5650922">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650926">uvdelta</span>&nbsp;<span class="op" id="5650934">&gt;&gt;=</span>&nbsp;<span class="num" id="5650938">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650944">vdelta</span>&nbsp;<span class="op" id="5650951">:=</span>&nbsp;<span class="builtintype" id="5650954">int32</span><span class="op" id="5650959">(</span><span class="ident" id="5650960">uvdelta</span><span class="op" id="5650967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650970">pcdelta</span>&nbsp;<span class="op" id="5650978">:=</span>&nbsp;<span class="ident" id="5650981">t</span><span class="op" id="5650982">.</span><span class="ident" id="5650983">readvarint</span><span class="op" id="5650993">(</span><span class="ident" id="5650994">p</span><span class="op" id="5650995">)</span>&nbsp;<span class="op" id="5650997">*</span>&nbsp;<span class="ident" id="5650999">t</span><span class="op" id="5651000">.</span><span class="ident" id="5651001">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651010">*</span><span class="ident" id="5651011">pc</span>&nbsp;<span class="op" id="5651014">+=</span>&nbsp;<span class="ident" id="5651017">uint64</span><span class="op" id="5651023">(</span><span class="ident" id="5651024">pcdelta</span><span class="op" id="5651031">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651034">*</span><span class="ident" id="5651035">val</span>&nbsp;<span class="op" id="5651039">+=</span>&nbsp;<span class="ident" id="5651042">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651050">return</span>&nbsp;<span class="ident" id="5651057">true</span><br>
<span class="lineno"></span><span class="op" id="5651062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5651065">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="5651125">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="5651186">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5651247">func</span>&nbsp;<span class="op" id="5651252">(</span><span class="ident" id="5651253">t</span>&nbsp;<span class="op" id="5651255">*</span><span class="ident" id="5651256">LineTable</span><span class="op" id="5651265">)</span>&nbsp;<span class="ident" id="5651267">pcvalue</span><span class="op" id="5651274">(</span><span class="ident" id="5651275">off</span>&nbsp;<span class="builtintype" id="5651279">uint32</span><span class="op" id="5651285">,</span>&nbsp;<span class="ident" id="5651287">entry</span><span class="op" id="5651292">,</span>&nbsp;<span class="ident" id="5651294">targetpc</span>&nbsp;<span class="ident" id="5651303">uint64</span><span class="op" id="5651309">)</span>&nbsp;<span class="builtintype" id="5651311">int32</span>&nbsp;<span class="op" id="5651317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651320">if</span>&nbsp;<span class="ident" id="5651323">off</span>&nbsp;<span class="op" id="5651327">==</span>&nbsp;<span class="num" id="5651330">0</span>&nbsp;<span class="op" id="5651332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651336">return</span>&nbsp;<span class="op" id="5651343">-</span><span class="num" id="5651344">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651350">p</span>&nbsp;<span class="op" id="5651352">:=</span>&nbsp;<span class="ident" id="5651355">t</span><span class="op" id="5651356">.</span><span class="ident" id="5651357">Data</span><span class="op" id="5651361">[</span><span class="ident" id="5651362">off</span><span class="op" id="5651365">:</span><span class="op" id="5651366">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651370">val</span>&nbsp;<span class="op" id="5651374">:=</span>&nbsp;<span class="builtintype" id="5651377">int32</span><span class="op" id="5651382">(</span><span class="op" id="5651383">-</span><span class="num" id="5651384">1</span><span class="op" id="5651385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651388">pc</span>&nbsp;<span class="op" id="5651391">:=</span>&nbsp;<span class="ident" id="5651394">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651401">for</span>&nbsp;<span class="ident" id="5651405">t</span><span class="op" id="5651406">.</span><span class="ident" id="5651407">step</span><span class="op" id="5651411">(</span><span class="op" id="5651412">&amp;</span><span class="ident" id="5651413">p</span><span class="op" id="5651414">,</span>&nbsp;<span class="op" id="5651416">&amp;</span><span class="ident" id="5651417">pc</span><span class="op" id="5651419">,</span>&nbsp;<span class="op" id="5651421">&amp;</span><span class="ident" id="5651422">val</span><span class="op" id="5651425">,</span>&nbsp;<span class="ident" id="5651427">pc</span>&nbsp;<span class="op" id="5651430">==</span>&nbsp;<span class="ident" id="5651433">entry</span><span class="op" id="5651438">)</span>&nbsp;<span class="op" id="5651440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651444">if</span>&nbsp;<span class="ident" id="5651447">targetpc</span>&nbsp;<span class="op" id="5651456">&lt;</span>&nbsp;<span class="ident" id="5651458">pc</span>&nbsp;<span class="op" id="5651461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651466">return</span>&nbsp;<span class="ident" id="5651473">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651482">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651485">return</span>&nbsp;<span class="op" id="5651492">-</span><span class="num" id="5651493">1</span><br>
<span class="lineno"></span><span class="op" id="5651495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5651498">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5651561">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="5651617">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="5651686">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5651757">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5651832">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="5651909">func</span>&nbsp;<span class="op" id="5651914">(</span><span class="ident" id="5651915">t</span>&nbsp;<span class="op" id="5651917">*</span><span class="ident" id="5651918">LineTable</span><span class="op" id="5651927">)</span>&nbsp;<span class="ident" id="5651929">findFileLine</span><span class="op" id="5651941">(</span><span class="ident" id="5651942">entry</span>&nbsp;<span class="ident" id="5651948">uint64</span><span class="op" id="5651954">,</span>&nbsp;<span class="ident" id="5651956">filetab</span><span class="op" id="5651963">,</span>&nbsp;<span class="ident" id="5651965">linetab</span>&nbsp;<span class="builtintype" id="5651973">uint32</span><span class="op" id="5651979">,</span>&nbsp;<span class="ident" id="5651981">filenum</span><span class="op" id="5651988">,</span>&nbsp;<span class="ident" id="5651990">line</span>&nbsp;<span class="builtintype" id="5651995">int32</span><span class="op" id="5652000">)</span>&nbsp;<span class="ident" id="5652002">uint64</span>&nbsp;<span class="op" id="5652009">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652012">if</span>&nbsp;<span class="ident" id="5652015">filetab</span>&nbsp;<span class="op" id="5652023">==</span>&nbsp;<span class="num" id="5652026">0</span>&nbsp;<span class="op" id="5652028">||</span>&nbsp;<span class="ident" id="5652031">linetab</span>&nbsp;<span class="op" id="5652039">==</span>&nbsp;<span class="num" id="5652042">0</span>&nbsp;<span class="op" id="5652044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652048">return</span>&nbsp;<span class="num" id="5652055">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652062">fp</span>&nbsp;<span class="op" id="5652065">:=</span>&nbsp;<span class="ident" id="5652068">t</span><span class="op" id="5652069">.</span><span class="ident" id="5652070">Data</span><span class="op" id="5652074">[</span><span class="ident" id="5652075">filetab</span><span class="op" id="5652082">:</span><span class="op" id="5652083">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652086">fl</span>&nbsp;<span class="op" id="5652089">:=</span>&nbsp;<span class="ident" id="5652092">t</span><span class="op" id="5652093">.</span><span class="ident" id="5652094">Data</span><span class="op" id="5652098">[</span><span class="ident" id="5652099">linetab</span><span class="op" id="5652106">:</span><span class="op" id="5652107">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652110">fileVal</span>&nbsp;<span class="op" id="5652118">:=</span>&nbsp;<span class="builtintype" id="5652121">int32</span><span class="op" id="5652126">(</span><span class="op" id="5652127">-</span><span class="num" id="5652128">1</span><span class="op" id="5652129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652132">filePC</span>&nbsp;<span class="op" id="5652139">:=</span>&nbsp;<span class="ident" id="5652142">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652149">lineVal</span>&nbsp;<span class="op" id="5652157">:=</span>&nbsp;<span class="builtintype" id="5652160">int32</span><span class="op" id="5652165">(</span><span class="op" id="5652166">-</span><span class="num" id="5652167">1</span><span class="op" id="5652168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652171">linePC</span>&nbsp;<span class="op" id="5652178">:=</span>&nbsp;<span class="ident" id="5652181">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652188">fileStartPC</span>&nbsp;<span class="op" id="5652200">:=</span>&nbsp;<span class="ident" id="5652203">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652211">for</span>&nbsp;<span class="ident" id="5652215">t</span><span class="op" id="5652216">.</span><span class="ident" id="5652217">step</span><span class="op" id="5652221">(</span><span class="op" id="5652222">&amp;</span><span class="ident" id="5652223">fp</span><span class="op" id="5652225">,</span>&nbsp;<span class="op" id="5652227">&amp;</span><span class="ident" id="5652228">filePC</span><span class="op" id="5652234">,</span>&nbsp;<span class="op" id="5652236">&amp;</span><span class="ident" id="5652237">fileVal</span><span class="op" id="5652244">,</span>&nbsp;<span class="ident" id="5652246">filePC</span>&nbsp;<span class="op" id="5652253">==</span>&nbsp;<span class="ident" id="5652256">entry</span><span class="op" id="5652261">)</span>&nbsp;<span class="op" id="5652263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652267">if</span>&nbsp;<span class="ident" id="5652270">fileVal</span>&nbsp;<span class="op" id="5652278">==</span>&nbsp;<span class="ident" id="5652281">filenum</span>&nbsp;<span class="op" id="5652289">&amp;&amp;</span>&nbsp;<span class="ident" id="5652292">fileStartPC</span>&nbsp;<span class="op" id="5652304">&lt;</span>&nbsp;<span class="ident" id="5652306">filePC</span>&nbsp;<span class="op" id="5652313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652318">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652375">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652434">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652492">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652524">lineStartPC</span>&nbsp;<span class="op" id="5652536">:=</span>&nbsp;<span class="ident" id="5652539">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652549">for</span>&nbsp;<span class="ident" id="5652553">linePC</span>&nbsp;<span class="op" id="5652560">&lt;</span>&nbsp;<span class="ident" id="5652562">filePC</span>&nbsp;<span class="op" id="5652569">&amp;&amp;</span>&nbsp;<span class="ident" id="5652572">t</span><span class="op" id="5652573">.</span><span class="ident" id="5652574">step</span><span class="op" id="5652578">(</span><span class="op" id="5652579">&amp;</span><span class="ident" id="5652580">fl</span><span class="op" id="5652582">,</span>&nbsp;<span class="op" id="5652584">&amp;</span><span class="ident" id="5652585">linePC</span><span class="op" id="5652591">,</span>&nbsp;<span class="op" id="5652593">&amp;</span><span class="ident" id="5652594">lineVal</span><span class="op" id="5652601">,</span>&nbsp;<span class="ident" id="5652603">linePC</span>&nbsp;<span class="op" id="5652610">==</span>&nbsp;<span class="ident" id="5652613">entry</span><span class="op" id="5652618">)</span>&nbsp;<span class="op" id="5652620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5652626">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652694">if</span>&nbsp;<span class="ident" id="5652697">lineVal</span>&nbsp;<span class="op" id="5652705">==</span>&nbsp;<span class="ident" id="5652708">line</span>&nbsp;<span class="op" id="5652713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652720">if</span>&nbsp;<span class="ident" id="5652723">fileStartPC</span>&nbsp;<span class="op" id="5652735">&lt;=</span>&nbsp;<span class="ident" id="5652738">lineStartPC</span>&nbsp;<span class="op" id="5652750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652758">return</span>&nbsp;<span class="ident" id="5652765">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652789">if</span>&nbsp;<span class="ident" id="5652792">fileStartPC</span>&nbsp;<span class="op" id="5652804">&lt;</span>&nbsp;<span class="ident" id="5652806">linePC</span>&nbsp;<span class="op" id="5652813">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652821">return</span>&nbsp;<span class="ident" id="5652828">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652857">lineStartPC</span>&nbsp;<span class="op" id="5652869">=</span>&nbsp;<span class="ident" id="5652871">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652881">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5652889">fileStartPC</span>&nbsp;<span class="op" id="5652901">=</span>&nbsp;<span class="ident" id="5652903">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5652911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5652914">return</span>&nbsp;<span class="num" id="5652921">0</span><br>
<span class="lineno"></span><span class="op" id="5652923">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="5652926">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5653005">func</span>&nbsp;<span class="op" id="5653010">(</span><span class="ident" id="5653011">t</span>&nbsp;<span class="op" id="5653013">*</span><span class="ident" id="5653014">LineTable</span><span class="op" id="5653023">)</span>&nbsp;<span class="ident" id="5653025">go12PCToLine</span><span class="op" id="5653037">(</span><span class="ident" id="5653038">pc</span>&nbsp;<span class="ident" id="5653041">uint64</span><span class="op" id="5653047">)</span>&nbsp;<span class="op" id="5653049">(</span><span class="ident" id="5653050">line</span>&nbsp;<span class="builtintype" id="5653055">int</span><span class="op" id="5653058">)</span>&nbsp;<span class="op" id="5653060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653063">defer</span>&nbsp;<span class="keyword" id="5653069">func</span><span class="op" id="5653073">(</span><span class="op" id="5653074">)</span>&nbsp;<span class="op" id="5653076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653080">if</span>&nbsp;<span class="builtinfunc" id="5653083">recover</span><span class="op" id="5653090">(</span><span class="op" id="5653091">)</span>&nbsp;<span class="op" id="5653093">!=</span>&nbsp;<span class="ident" id="5653096">nil</span>&nbsp;<span class="op" id="5653100">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653105">line</span>&nbsp;<span class="op" id="5653110">=</span>&nbsp;<span class="op" id="5653112">-</span><span class="num" id="5653113">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653120">}</span><span class="op" id="5653121">(</span><span class="op" id="5653122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653126">f</span>&nbsp;<span class="op" id="5653128">:=</span>&nbsp;<span class="ident" id="5653131">t</span><span class="op" id="5653132">.</span><span class="ident" id="5653133">findFunc</span><span class="op" id="5653141">(</span><span class="ident" id="5653142">pc</span><span class="op" id="5653144">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653147">if</span>&nbsp;<span class="ident" id="5653150">f</span>&nbsp;<span class="op" id="5653152">==</span>&nbsp;<span class="ident" id="5653155">nil</span>&nbsp;<span class="op" id="5653159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653163">return</span>&nbsp;<span class="op" id="5653170">-</span><span class="num" id="5653171">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653177">entry</span>&nbsp;<span class="op" id="5653183">:=</span>&nbsp;<span class="ident" id="5653186">t</span><span class="op" id="5653187">.</span><span class="builtintype" id="5653188">uintptr</span><span class="op" id="5653195">(</span><span class="ident" id="5653196">f</span><span class="op" id="5653197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653200">linetab</span>&nbsp;<span class="op" id="5653208">:=</span>&nbsp;<span class="ident" id="5653211">t</span><span class="op" id="5653212">.</span><span class="ident" id="5653213">binary</span><span class="op" id="5653219">.</span><span class="ident" id="5653220">Uint32</span><span class="op" id="5653226">(</span><span class="ident" id="5653227">f</span><span class="op" id="5653228">[</span><span class="ident" id="5653229">t</span><span class="op" id="5653230">.</span><span class="ident" id="5653231">ptrsize</span><span class="op" id="5653238">+</span><span class="num" id="5653239">5</span><span class="op" id="5653240">*</span><span class="num" id="5653241">4</span><span class="op" id="5653242">:</span><span class="op" id="5653243">]</span><span class="op" id="5653244">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653247">return</span>&nbsp;<span class="builtintype" id="5653254">int</span><span class="op" id="5653257">(</span><span class="ident" id="5653258">t</span><span class="op" id="5653259">.</span><span class="ident" id="5653260">pcvalue</span><span class="op" id="5653267">(</span><span class="ident" id="5653268">linetab</span><span class="op" id="5653275">,</span>&nbsp;<span class="ident" id="5653277">entry</span><span class="op" id="5653282">,</span>&nbsp;<span class="ident" id="5653284">pc</span><span class="op" id="5653286">)</span><span class="op" id="5653287">)</span><br>
<span class="lineno"></span><span class="op" id="5653289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5653292">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="5653369">func</span>&nbsp;<span class="op" id="5653374">(</span><span class="ident" id="5653375">t</span>&nbsp;<span class="op" id="5653377">*</span><span class="ident" id="5653378">LineTable</span><span class="op" id="5653387">)</span>&nbsp;<span class="ident" id="5653389">go12PCToFile</span><span class="op" id="5653401">(</span><span class="ident" id="5653402">pc</span>&nbsp;<span class="ident" id="5653405">uint64</span><span class="op" id="5653411">)</span>&nbsp;<span class="op" id="5653413">(</span><span class="ident" id="5653414">file</span>&nbsp;<span class="builtintype" id="5653419">string</span><span class="op" id="5653425">)</span>&nbsp;<span class="op" id="5653427">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653430">defer</span>&nbsp;<span class="keyword" id="5653436">func</span><span class="op" id="5653440">(</span><span class="op" id="5653441">)</span>&nbsp;<span class="op" id="5653443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653447">if</span>&nbsp;<span class="builtinfunc" id="5653450">recover</span><span class="op" id="5653457">(</span><span class="op" id="5653458">)</span>&nbsp;<span class="op" id="5653460">!=</span>&nbsp;<span class="ident" id="5653463">nil</span>&nbsp;<span class="op" id="5653467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653472">file</span>&nbsp;<span class="op" id="5653477">=</span>&nbsp;<span class="string" id="5653479">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653487">}</span><span class="op" id="5653488">(</span><span class="op" id="5653489">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653493">f</span>&nbsp;<span class="op" id="5653495">:=</span>&nbsp;<span class="ident" id="5653498">t</span><span class="op" id="5653499">.</span><span class="ident" id="5653500">findFunc</span><span class="op" id="5653508">(</span><span class="ident" id="5653509">pc</span><span class="op" id="5653511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653514">if</span>&nbsp;<span class="ident" id="5653517">f</span>&nbsp;<span class="op" id="5653519">==</span>&nbsp;<span class="ident" id="5653522">nil</span>&nbsp;<span class="op" id="5653526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653530">return</span>&nbsp;<span class="string" id="5653537">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653541">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653544">entry</span>&nbsp;<span class="op" id="5653550">:=</span>&nbsp;<span class="ident" id="5653553">t</span><span class="op" id="5653554">.</span><span class="builtintype" id="5653555">uintptr</span><span class="op" id="5653562">(</span><span class="ident" id="5653563">f</span><span class="op" id="5653564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653567">filetab</span>&nbsp;<span class="op" id="5653575">:=</span>&nbsp;<span class="ident" id="5653578">t</span><span class="op" id="5653579">.</span><span class="ident" id="5653580">binary</span><span class="op" id="5653586">.</span><span class="ident" id="5653587">Uint32</span><span class="op" id="5653593">(</span><span class="ident" id="5653594">f</span><span class="op" id="5653595">[</span><span class="ident" id="5653596">t</span><span class="op" id="5653597">.</span><span class="ident" id="5653598">ptrsize</span><span class="op" id="5653605">+</span><span class="num" id="5653606">4</span><span class="op" id="5653607">*</span><span class="num" id="5653608">4</span><span class="op" id="5653609">:</span><span class="op" id="5653610">]</span><span class="op" id="5653611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653614">fno</span>&nbsp;<span class="op" id="5653618">:=</span>&nbsp;<span class="ident" id="5653621">t</span><span class="op" id="5653622">.</span><span class="ident" id="5653623">pcvalue</span><span class="op" id="5653630">(</span><span class="ident" id="5653631">filetab</span><span class="op" id="5653638">,</span>&nbsp;<span class="ident" id="5653640">entry</span><span class="op" id="5653645">,</span>&nbsp;<span class="ident" id="5653647">pc</span><span class="op" id="5653649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653652">if</span>&nbsp;<span class="ident" id="5653655">fno</span>&nbsp;<span class="op" id="5653659">&lt;=</span>&nbsp;<span class="num" id="5653662">0</span>&nbsp;<span class="op" id="5653664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653668">return</span>&nbsp;<span class="string" id="5653675">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653682">return</span>&nbsp;<span class="ident" id="5653689">t</span><span class="op" id="5653690">.</span><span class="builtintype" id="5653691">string</span><span class="op" id="5653697">(</span><span class="ident" id="5653698">t</span><span class="op" id="5653699">.</span><span class="ident" id="5653700">binary</span><span class="op" id="5653706">.</span><span class="ident" id="5653707">Uint32</span><span class="op" id="5653713">(</span><span class="ident" id="5653714">t</span><span class="op" id="5653715">.</span><span class="ident" id="5653716">filetab</span><span class="op" id="5653723">[</span><span class="num" id="5653724">4</span><span class="op" id="5653725">*</span><span class="ident" id="5653726">fno</span><span class="op" id="5653729">:</span><span class="op" id="5653730">]</span><span class="op" id="5653731">)</span><span class="op" id="5653732">)</span><br>
<span class="lineno"></span><span class="op" id="5653734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5653737">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="5653826">func</span>&nbsp;<span class="op" id="5653831">(</span><span class="ident" id="5653832">t</span>&nbsp;<span class="op" id="5653834">*</span><span class="ident" id="5653835">LineTable</span><span class="op" id="5653844">)</span>&nbsp;<span class="ident" id="5653846">go12LineToPC</span><span class="op" id="5653858">(</span><span class="ident" id="5653859">file</span>&nbsp;<span class="builtintype" id="5653864">string</span><span class="op" id="5653870">,</span>&nbsp;<span class="ident" id="5653872">line</span>&nbsp;<span class="builtintype" id="5653877">int</span><span class="op" id="5653880">)</span>&nbsp;<span class="op" id="5653882">(</span><span class="ident" id="5653883">pc</span>&nbsp;<span class="ident" id="5653886">uint64</span><span class="op" id="5653892">)</span>&nbsp;<span class="op" id="5653894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653897">defer</span>&nbsp;<span class="keyword" id="5653903">func</span><span class="op" id="5653907">(</span><span class="op" id="5653908">)</span>&nbsp;<span class="op" id="5653910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5653914">if</span>&nbsp;<span class="builtinfunc" id="5653917">recover</span><span class="op" id="5653924">(</span><span class="op" id="5653925">)</span>&nbsp;<span class="op" id="5653927">!=</span>&nbsp;<span class="ident" id="5653930">nil</span>&nbsp;<span class="op" id="5653934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653939">pc</span>&nbsp;<span class="op" id="5653942">=</span>&nbsp;<span class="num" id="5653944">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653948">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5653951">}</span><span class="op" id="5653952">(</span><span class="op" id="5653953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653957">t</span><span class="op" id="5653958">.</span><span class="ident" id="5653959">initFileMap</span><span class="op" id="5653970">(</span><span class="op" id="5653971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5653974">filenum</span>&nbsp;<span class="op" id="5653982">:=</span>&nbsp;<span class="ident" id="5653985">t</span><span class="op" id="5653986">.</span><span class="ident" id="5653987">fileMap</span><span class="op" id="5653994">[</span><span class="ident" id="5653995">file</span><span class="op" id="5653999">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654002">if</span>&nbsp;<span class="ident" id="5654005">filenum</span>&nbsp;<span class="op" id="5654013">==</span>&nbsp;<span class="num" id="5654016">0</span>&nbsp;<span class="op" id="5654018">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654022">return</span>&nbsp;<span class="num" id="5654029">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5654032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5654036">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5654060">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5654137">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654210">for</span>&nbsp;<span class="ident" id="5654214">i</span>&nbsp;<span class="op" id="5654216">:=</span>&nbsp;<span class="builtintype" id="5654219">uint32</span><span class="op" id="5654225">(</span><span class="num" id="5654226">0</span><span class="op" id="5654227">)</span><span class="op" id="5654228">;</span>&nbsp;<span class="ident" id="5654230">i</span>&nbsp;<span class="op" id="5654232">&lt;</span>&nbsp;<span class="ident" id="5654234">t</span><span class="op" id="5654235">.</span><span class="ident" id="5654236">nfunctab</span><span class="op" id="5654244">;</span>&nbsp;<span class="ident" id="5654246">i</span><span class="op" id="5654247">++</span>&nbsp;<span class="op" id="5654250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654254">f</span>&nbsp;<span class="op" id="5654256">:=</span>&nbsp;<span class="ident" id="5654259">t</span><span class="op" id="5654260">.</span><span class="ident" id="5654261">Data</span><span class="op" id="5654265">[</span><span class="ident" id="5654266">t</span><span class="op" id="5654267">.</span><span class="builtintype" id="5654268">uintptr</span><span class="op" id="5654275">(</span><span class="ident" id="5654276">t</span><span class="op" id="5654277">.</span><span class="ident" id="5654278">functab</span><span class="op" id="5654285">[</span><span class="num" id="5654286">2</span><span class="op" id="5654287">*</span><span class="ident" id="5654288">t</span><span class="op" id="5654289">.</span><span class="ident" id="5654290">ptrsize</span><span class="op" id="5654297">*</span><span class="ident" id="5654298">i</span><span class="op" id="5654299">+</span><span class="ident" id="5654300">t</span><span class="op" id="5654301">.</span><span class="ident" id="5654302">ptrsize</span><span class="op" id="5654309">:</span><span class="op" id="5654310">]</span><span class="op" id="5654311">)</span><span class="op" id="5654312">:</span><span class="op" id="5654313">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654317">entry</span>&nbsp;<span class="op" id="5654323">:=</span>&nbsp;<span class="ident" id="5654326">t</span><span class="op" id="5654327">.</span><span class="builtintype" id="5654328">uintptr</span><span class="op" id="5654335">(</span><span class="ident" id="5654336">f</span><span class="op" id="5654337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654341">filetab</span>&nbsp;<span class="op" id="5654349">:=</span>&nbsp;<span class="ident" id="5654352">t</span><span class="op" id="5654353">.</span><span class="ident" id="5654354">binary</span><span class="op" id="5654360">.</span><span class="ident" id="5654361">Uint32</span><span class="op" id="5654367">(</span><span class="ident" id="5654368">f</span><span class="op" id="5654369">[</span><span class="ident" id="5654370">t</span><span class="op" id="5654371">.</span><span class="ident" id="5654372">ptrsize</span><span class="op" id="5654379">+</span><span class="num" id="5654380">4</span><span class="op" id="5654381">*</span><span class="num" id="5654382">4</span><span class="op" id="5654383">:</span><span class="op" id="5654384">]</span><span class="op" id="5654385">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654389">linetab</span>&nbsp;<span class="op" id="5654397">:=</span>&nbsp;<span class="ident" id="5654400">t</span><span class="op" id="5654401">.</span><span class="ident" id="5654402">binary</span><span class="op" id="5654408">.</span><span class="ident" id="5654409">Uint32</span><span class="op" id="5654415">(</span><span class="ident" id="5654416">f</span><span class="op" id="5654417">[</span><span class="ident" id="5654418">t</span><span class="op" id="5654419">.</span><span class="ident" id="5654420">ptrsize</span><span class="op" id="5654427">+</span><span class="num" id="5654428">5</span><span class="op" id="5654429">*</span><span class="num" id="5654430">4</span><span class="op" id="5654431">:</span><span class="op" id="5654432">]</span><span class="op" id="5654433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654437">pc</span>&nbsp;<span class="op" id="5654440">:=</span>&nbsp;<span class="ident" id="5654443">t</span><span class="op" id="5654444">.</span><span class="ident" id="5654445">findFileLine</span><span class="op" id="5654457">(</span><span class="ident" id="5654458">entry</span><span class="op" id="5654463">,</span>&nbsp;<span class="ident" id="5654465">filetab</span><span class="op" id="5654472">,</span>&nbsp;<span class="ident" id="5654474">linetab</span><span class="op" id="5654481">,</span>&nbsp;<span class="builtintype" id="5654483">int32</span><span class="op" id="5654488">(</span><span class="ident" id="5654489">filenum</span><span class="op" id="5654496">)</span><span class="op" id="5654497">,</span>&nbsp;<span class="builtintype" id="5654499">int32</span><span class="op" id="5654504">(</span><span class="ident" id="5654505">line</span><span class="op" id="5654509">)</span><span class="op" id="5654510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654514">if</span>&nbsp;<span class="ident" id="5654517">pc</span>&nbsp;<span class="op" id="5654520">!=</span>&nbsp;<span class="num" id="5654523">0</span>&nbsp;<span class="op" id="5654525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654530">return</span>&nbsp;<span class="ident" id="5654537">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5654542">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5654545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654548">return</span>&nbsp;<span class="num" id="5654555">0</span><br>
<span class="lineno"></span><span class="op" id="5654557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5654560">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="5654626">func</span>&nbsp;<span class="op" id="5654631">(</span><span class="ident" id="5654632">t</span>&nbsp;<span class="op" id="5654634">*</span><span class="ident" id="5654635">LineTable</span><span class="op" id="5654644">)</span>&nbsp;<span class="ident" id="5654646">initFileMap</span><span class="op" id="5654657">(</span><span class="op" id="5654658">)</span>&nbsp;<span class="op" id="5654660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654663">t</span><span class="op" id="5654664">.</span><span class="ident" id="5654665">mu</span><span class="op" id="5654667">.</span><span class="ident" id="5654668">Lock</span><span class="op" id="5654672">(</span><span class="op" id="5654673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654676">defer</span>&nbsp;<span class="ident" id="5654682">t</span><span class="op" id="5654683">.</span><span class="ident" id="5654684">mu</span><span class="op" id="5654686">.</span><span class="ident" id="5654687">Unlock</span><span class="op" id="5654693">(</span><span class="op" id="5654694">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654698">if</span>&nbsp;<span class="ident" id="5654701">t</span><span class="op" id="5654702">.</span><span class="ident" id="5654703">fileMap</span>&nbsp;<span class="op" id="5654711">!=</span>&nbsp;<span class="ident" id="5654714">nil</span>&nbsp;<span class="op" id="5654718">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654722">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5654730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654733">m</span>&nbsp;<span class="op" id="5654735">:=</span>&nbsp;<span class="builtinfunc" id="5654738">make</span><span class="op" id="5654742">(</span><span class="keyword" id="5654743">map</span><span class="op" id="5654746">[</span><span class="builtintype" id="5654747">string</span><span class="op" id="5654753">]</span><span class="builtintype" id="5654754">uint32</span><span class="op" id="5654760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5654764">for</span>&nbsp;<span class="ident" id="5654768">i</span>&nbsp;<span class="op" id="5654770">:=</span>&nbsp;<span class="builtintype" id="5654773">uint32</span><span class="op" id="5654779">(</span><span class="num" id="5654780">1</span><span class="op" id="5654781">)</span><span class="op" id="5654782">;</span>&nbsp;<span class="ident" id="5654784">i</span>&nbsp;<span class="op" id="5654786">&lt;</span>&nbsp;<span class="ident" id="5654788">t</span><span class="op" id="5654789">.</span><span class="ident" id="5654790">nfiletab</span><span class="op" id="5654798">;</span>&nbsp;<span class="ident" id="5654800">i</span><span class="op" id="5654801">++</span>&nbsp;<span class="op" id="5654804">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654808">s</span>&nbsp;<span class="op" id="5654810">:=</span>&nbsp;<span class="ident" id="5654813">t</span><span class="op" id="5654814">.</span><span class="builtintype" id="5654815">string</span><span class="op" id="5654821">(</span><span class="ident" id="5654822">t</span><span class="op" id="5654823">.</span><span class="ident" id="5654824">binary</span><span class="op" id="5654830">.</span><span class="ident" id="5654831">Uint32</span><span class="op" id="5654837">(</span><span class="ident" id="5654838">t</span><span class="op" id="5654839">.</span><span class="ident" id="5654840">filetab</span><span class="op" id="5654847">[</span><span class="num" id="5654848">4</span><span class="op" id="5654849">*</span><span class="ident" id="5654850">i</span><span class="op" id="5654851">:</span><span class="op" id="5654852">]</span><span class="op" id="5654853">)</span><span class="op" id="5654854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654858">m</span><span class="op" id="5654859">[</span><span class="ident" id="5654860">s</span><span class="op" id="5654861">]</span>&nbsp;<span class="op" id="5654863">=</span>&nbsp;<span class="ident" id="5654865">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5654868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5654871">t</span><span class="op" id="5654872">.</span><span class="ident" id="5654873">fileMap</span>&nbsp;<span class="op" id="5654881">=</span>&nbsp;<span class="ident" id="5654883">m</span><br>
<span class="lineno"></span><span class="op" id="5654885">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5654888">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="5654960">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="5655037">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="5655102">func</span>&nbsp;<span class="op" id="5655107">(</span><span class="ident" id="5655108">t</span>&nbsp;<span class="op" id="5655110">*</span><span class="ident" id="5655111">LineTable</span><span class="op" id="5655120">)</span>&nbsp;<span class="ident" id="5655122">go12MapFiles</span><span class="op" id="5655134">(</span><span class="ident" id="5655135">m</span>&nbsp;<span class="keyword" id="5655137">map</span><span class="op" id="5655140">[</span><span class="builtintype" id="5655141">string</span><span class="op" id="5655147">]</span><span class="op" id="5655148">*</span><span class="ident" id="5655149">Obj</span><span class="op" id="5655152">,</span>&nbsp;<span class="ident" id="5655154">obj</span>&nbsp;<span class="op" id="5655158">*</span><span class="ident" id="5655159">Obj</span><span class="op" id="5655162">)</span>&nbsp;<span class="op" id="5655164">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5655167">defer</span>&nbsp;<span class="keyword" id="5655173">func</span><span class="op" id="5655177">(</span><span class="op" id="5655178">)</span>&nbsp;<span class="op" id="5655180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5655184">recover</span><span class="op" id="5655191">(</span><span class="op" id="5655192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5655195">}</span><span class="op" id="5655196">(</span><span class="op" id="5655197">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5655201">t</span><span class="op" id="5655202">.</span><span class="ident" id="5655203">initFileMap</span><span class="op" id="5655214">(</span><span class="op" id="5655215">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5655218">for</span>&nbsp;<span class="ident" id="5655222">file</span>&nbsp;<span class="op" id="5655227">:=</span>&nbsp;<span class="keyword" id="5655230">range</span>&nbsp;<span class="ident" id="5655236">t</span><span class="op" id="5655237">.</span><span class="ident" id="5655238">fileMap</span>&nbsp;<span class="op" id="5655246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5655250">m</span><span class="op" id="5655251">[</span><span class="ident" id="5655252">file</span><span class="op" id="5655256">]</span>&nbsp;<span class="op" id="5655258">=</span>&nbsp;<span class="ident" id="5655260">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5655265">}</span><br>
<span class="lineno"></span><span class="op" id="5655267">}</span>
</div>
</body>
</html>
