<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7720565">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7720620">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7720674">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7720725">package</span>&nbsp;<span class="ident" id="7720733">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720738">import</span>&nbsp;<span class="op" id="7720745">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720748">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720758">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720765">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720772">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720783">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7720794">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7720804">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7720807">type</span>&nbsp;<span class="ident" id="7720812">shutdownCodec</span>&nbsp;<span class="keyword" id="7720826">struct</span>&nbsp;<span class="op" id="7720833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720836">responded</span>&nbsp;<span class="keyword" id="7720846">chan</span>&nbsp;<span class="builtintype" id="7720851">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720856">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7720866">bool</span><br>
<span class="lineno"></span><span class="op" id="7720871">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7720874">func</span>&nbsp;<span class="op" id="7720879">(</span><span class="ident" id="7720880">c</span>&nbsp;<span class="op" id="7720882">*</span><span class="ident" id="7720883">shutdownCodec</span><span class="op" id="7720896">)</span>&nbsp;<span class="ident" id="7720898">WriteRequest</span><span class="op" id="7720910">(</span><span class="op" id="7720911">*</span><span class="ident" id="7720912">Request</span><span class="op" id="7720919">,</span>&nbsp;<span class="keyword" id="7720921">interface</span><span class="op" id="7720930">{</span><span class="op" id="7720931">}</span><span class="op" id="7720932">)</span>&nbsp;<span class="builtintype" id="7720934">error</span>&nbsp;<span class="op" id="7720940">{</span>&nbsp;<span class="keyword" id="7720942">return</span>&nbsp;<span class="ident" id="7720949">nil</span>&nbsp;<span class="op" id="7720953">}</span><br>
<span class="lineno"></span><span class="keyword" id="7720955">func</span>&nbsp;<span class="op" id="7720960">(</span><span class="ident" id="7720961">c</span>&nbsp;<span class="op" id="7720963">*</span><span class="ident" id="7720964">shutdownCodec</span><span class="op" id="7720977">)</span>&nbsp;<span class="ident" id="7720979">ReadResponseBody</span><span class="op" id="7720995">(</span><span class="keyword" id="7720996">interface</span><span class="op" id="7721005">{</span><span class="op" id="7721006">}</span><span class="op" id="7721007">)</span>&nbsp;<span class="builtintype" id="7721009">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7721021">{</span>&nbsp;<span class="keyword" id="7721023">return</span>&nbsp;<span class="ident" id="7721030">nil</span>&nbsp;<span class="op" id="7721034">}</span><br>
<span class="lineno"></span><span class="keyword" id="7721036">func</span>&nbsp;<span class="op" id="7721041">(</span><span class="ident" id="7721042">c</span>&nbsp;<span class="op" id="7721044">*</span><span class="ident" id="7721045">shutdownCodec</span><span class="op" id="7721058">)</span>&nbsp;<span class="ident" id="7721060">ReadResponseHeader</span><span class="op" id="7721078">(</span><span class="op" id="7721079">*</span><span class="ident" id="7721080">Response</span><span class="op" id="7721088">)</span>&nbsp;<span class="builtintype" id="7721090">error</span>&nbsp;<span class="op" id="7721096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721099">c</span><span class="op" id="7721100">.</span><span class="ident" id="7721101">responded</span>&nbsp;<span class="op" id="7721111">&lt;-</span>&nbsp;<span class="num" id="7721114">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721117">return</span>&nbsp;<span class="ident" id="7721124">errors</span><span class="op" id="7721130">.</span><span class="ident" id="7721131">New</span><span class="op" id="7721134">(</span><span class="string" id="7721135">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="7721169">)</span><br>
<span class="lineno"></span><span class="op" id="7721171">}</span><br>
<span class="lineno"></span><span class="keyword" id="7721173">func</span>&nbsp;<span class="op" id="7721178">(</span><span class="ident" id="7721179">c</span>&nbsp;<span class="op" id="7721181">*</span><span class="ident" id="7721182">shutdownCodec</span><span class="op" id="7721195">)</span>&nbsp;<span class="ident" id="7721197">Close</span><span class="op" id="7721202">(</span><span class="op" id="7721203">)</span>&nbsp;<span class="builtintype" id="7721205">error</span>&nbsp;<span class="op" id="7721211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721214">c</span><span class="op" id="7721215">.</span><span class="ident" id="7721216">closed</span>&nbsp;<span class="op" id="7721223">=</span>&nbsp;<span class="builtintype" id="7721225">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721231">return</span>&nbsp;<span class="ident" id="7721238">nil</span><br>
<span class="lineno">30</span><span class="op" id="7721242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721245">func</span>&nbsp;<span class="ident" id="7721250">TestCloseCodec</span><span class="op" id="7721264">(</span><span class="ident" id="7721265">t</span>&nbsp;<span class="op" id="7721267">*</span><span class="ident" id="7721268">testing</span><span class="op" id="7721275">.</span><span class="ident" id="7721276">T</span><span class="op" id="7721277">)</span>&nbsp;<span class="op" id="7721279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721282">codec</span>&nbsp;<span class="op" id="7721288">:=</span>&nbsp;<span class="op" id="7721291">&amp;</span><span class="ident" id="7721292">shutdownCodec</span><span class="op" id="7721305">{</span><span class="ident" id="7721306">responded</span><span class="op" id="7721315">:</span>&nbsp;<span class="builtinfunc" id="7721317">make</span><span class="op" id="7721321">(</span><span class="keyword" id="7721322">chan</span>&nbsp;<span class="builtintype" id="7721327">int</span><span class="op" id="7721330">)</span><span class="op" id="7721331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721334">client</span>&nbsp;<span class="op" id="7721341">:=</span>&nbsp;<span class="ident" id="7721344">NewClientWithCodec</span><span class="op" id="7721362">(</span><span class="ident" id="7721363">codec</span><span class="op" id="7721368">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721371">&lt;-</span><span class="ident" id="7721373">codec</span><span class="op" id="7721378">.</span><span class="ident" id="7721379">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721390">client</span><span class="op" id="7721396">.</span><span class="ident" id="7721397">Close</span><span class="op" id="7721402">(</span><span class="op" id="7721403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721406">if</span>&nbsp;<span class="op" id="7721409">!</span><span class="ident" id="7721410">codec</span><span class="op" id="7721415">.</span><span class="ident" id="7721416">closed</span>&nbsp;<span class="op" id="7721423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721427">t</span><span class="op" id="7721428">.</span><span class="ident" id="7721429">Error</span><span class="op" id="7721434">(</span><span class="string" id="7721435">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="7721469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721472">}</span><br>
<span class="lineno">40</span><span class="op" id="7721474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7721477">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721543">type</span>&nbsp;<span class="ident" id="7721548">R</span>&nbsp;<span class="keyword" id="7721550">struct</span>&nbsp;<span class="op" id="7721557">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721560">msg</span>&nbsp;<span class="op" id="7721564">[</span><span class="op" id="7721565">]</span><span class="builtintype" id="7721566">byte</span>&nbsp;<span class="comment" id="7721571">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="7721617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721620">type</span>&nbsp;<span class="ident" id="7721625">S</span>&nbsp;<span class="keyword" id="7721627">struct</span><span class="op" id="7721633">{</span><span class="op" id="7721634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7721637">func</span>&nbsp;<span class="op" id="7721642">(</span><span class="ident" id="7721643">s</span>&nbsp;<span class="op" id="7721645">*</span><span class="ident" id="7721646">S</span><span class="op" id="7721647">)</span>&nbsp;<span class="ident" id="7721649">Recv</span><span class="op" id="7721653">(</span><span class="ident" id="7721654">nul</span>&nbsp;<span class="op" id="7721658">*</span><span class="keyword" id="7721659">struct</span><span class="op" id="7721665">{</span><span class="op" id="7721666">}</span><span class="op" id="7721667">,</span>&nbsp;<span class="ident" id="7721669">reply</span>&nbsp;<span class="op" id="7721675">*</span><span class="ident" id="7721676">R</span><span class="op" id="7721677">)</span>&nbsp;<span class="builtintype" id="7721679">error</span>&nbsp;<span class="op" id="7721685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721688">*</span><span class="ident" id="7721689">reply</span>&nbsp;<span class="op" id="7721695">=</span>&nbsp;<span class="ident" id="7721697">R</span><span class="op" id="7721698">{</span><span class="op" id="7721699">[</span><span class="op" id="7721700">]</span><span class="builtintype" id="7721701">byte</span><span class="op" id="7721705">(</span><span class="string" id="7721706">&#34;foo&#34;</span><span class="op" id="7721711">)</span><span class="op" id="7721712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721715">return</span>&nbsp;<span class="ident" id="7721722">nil</span><br>
<span class="lineno"></span><span class="op" id="7721726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="7721729">func</span>&nbsp;<span class="ident" id="7721734">TestGobError</span><span class="op" id="7721746">(</span><span class="ident" id="7721747">t</span>&nbsp;<span class="op" id="7721749">*</span><span class="ident" id="7721750">testing</span><span class="op" id="7721757">.</span><span class="ident" id="7721758">T</span><span class="op" id="7721759">)</span>&nbsp;<span class="op" id="7721761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721764">if</span>&nbsp;<span class="ident" id="7721767">runtime</span><span class="op" id="7721774">.</span><span class="ident" id="7721775">GOOS</span>&nbsp;<span class="op" id="7721780">==</span>&nbsp;<span class="string" id="7721783">&#34;plan9&#34;</span>&nbsp;<span class="op" id="7721791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721795">t</span><span class="op" id="7721796">.</span><span class="ident" id="7721797">Skip</span><span class="op" id="7721801">(</span><span class="string" id="7721802">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="7721851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721857">defer</span>&nbsp;<span class="keyword" id="7721863">func</span><span class="op" id="7721867">(</span><span class="op" id="7721868">)</span>&nbsp;<span class="op" id="7721870">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721874">err</span>&nbsp;<span class="op" id="7721878">:=</span>&nbsp;<span class="builtinfunc" id="7721881">recover</span><span class="op" id="7721888">(</span><span class="op" id="7721889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721893">if</span>&nbsp;<span class="ident" id="7721896">err</span>&nbsp;<span class="op" id="7721900">==</span>&nbsp;<span class="ident" id="7721903">nil</span>&nbsp;<span class="op" id="7721907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721912">t</span><span class="op" id="7721913">.</span><span class="ident" id="7721914">Fatal</span><span class="op" id="7721919">(</span><span class="string" id="7721920">&#34;no&nbsp;error&#34;</span><span class="op" id="7721930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721938">if</span>&nbsp;<span class="op" id="7721941">!</span><span class="ident" id="7721942">strings</span><span class="op" id="7721949">.</span><span class="ident" id="7721950">Contains</span><span class="op" id="7721958">(</span><span class="string" id="7721959">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="7721977">,</span>&nbsp;<span class="ident" id="7721979">err</span><span class="op" id="7721982">.</span><span class="op" id="7721983">(</span><span class="builtintype" id="7721984">error</span><span class="op" id="7721989">)</span><span class="op" id="7721990">.</span><span class="ident" id="7721991">Error</span><span class="op" id="7721996">(</span><span class="op" id="7721997">)</span><span class="op" id="7721998">)</span>&nbsp;<span class="op" id="7722000">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722005">t</span><span class="op" id="7722006">.</span><span class="ident" id="7722007">Fatal</span><span class="op" id="7722012">(</span><span class="string" id="7722013">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="7722047">,</span>&nbsp;<span class="ident" id="7722049">err</span><span class="op" id="7722052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722059">}</span><span class="op" id="7722060">(</span><span class="op" id="7722061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722064">Register</span><span class="op" id="7722072">(</span><span class="builtinfunc" id="7722073">new</span><span class="op" id="7722076">(</span><span class="ident" id="7722077">S</span><span class="op" id="7722078">)</span><span class="op" id="7722079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722083">listen</span><span class="op" id="7722089">,</span>&nbsp;<span class="ident" id="7722091">err</span>&nbsp;<span class="op" id="7722095">:=</span>&nbsp;<span class="ident" id="7722098">net</span><span class="op" id="7722101">.</span><span class="ident" id="7722102">Listen</span><span class="op" id="7722108">(</span><span class="string" id="7722109">&#34;tcp&#34;</span><span class="op" id="7722114">,</span>&nbsp;<span class="string" id="7722116">&#34;127.0.0.1:0&#34;</span><span class="op" id="7722129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722132">if</span>&nbsp;<span class="ident" id="7722135">err</span>&nbsp;<span class="op" id="7722139">!=</span>&nbsp;<span class="ident" id="7722142">nil</span>&nbsp;<span class="op" id="7722146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7722150">panic</span><span class="op" id="7722155">(</span><span class="ident" id="7722156">err</span><span class="op" id="7722159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722165">go</span>&nbsp;<span class="ident" id="7722168">Accept</span><span class="op" id="7722174">(</span><span class="ident" id="7722175">listen</span><span class="op" id="7722181">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722185">client</span><span class="op" id="7722191">,</span>&nbsp;<span class="ident" id="7722193">err</span>&nbsp;<span class="op" id="7722197">:=</span>&nbsp;<span class="ident" id="7722200">Dial</span><span class="op" id="7722204">(</span><span class="string" id="7722205">&#34;tcp&#34;</span><span class="op" id="7722210">,</span>&nbsp;<span class="ident" id="7722212">listen</span><span class="op" id="7722218">.</span><span class="ident" id="7722219">Addr</span><span class="op" id="7722223">(</span><span class="op" id="7722224">)</span><span class="op" id="7722225">.</span><span class="ident" id="7722226">String</span><span class="op" id="7722232">(</span><span class="op" id="7722233">)</span><span class="op" id="7722234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722237">if</span>&nbsp;<span class="ident" id="7722240">err</span>&nbsp;<span class="op" id="7722244">!=</span>&nbsp;<span class="ident" id="7722247">nil</span>&nbsp;<span class="op" id="7722251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7722255">panic</span><span class="op" id="7722260">(</span><span class="ident" id="7722261">err</span><span class="op" id="7722264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722267">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722271">var</span>&nbsp;<span class="ident" id="7722275">reply</span>&nbsp;<span class="ident" id="7722281">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722288">err</span>&nbsp;<span class="op" id="7722292">=</span>&nbsp;<span class="ident" id="7722294">client</span><span class="op" id="7722300">.</span><span class="ident" id="7722301">Call</span><span class="op" id="7722305">(</span><span class="string" id="7722306">&#34;S.Recv&#34;</span><span class="op" id="7722314">,</span>&nbsp;<span class="op" id="7722316">&amp;</span><span class="keyword" id="7722317">struct</span><span class="op" id="7722323">{</span><span class="op" id="7722324">}</span><span class="op" id="7722325">{</span><span class="op" id="7722326">}</span><span class="op" id="7722327">,</span>&nbsp;<span class="op" id="7722329">&amp;</span><span class="ident" id="7722330">reply</span><span class="op" id="7722335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722338">if</span>&nbsp;<span class="ident" id="7722341">err</span>&nbsp;<span class="op" id="7722345">!=</span>&nbsp;<span class="ident" id="7722348">nil</span>&nbsp;<span class="op" id="7722352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7722356">panic</span><span class="op" id="7722361">(</span><span class="ident" id="7722362">err</span><span class="op" id="7722365">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722372">fmt</span><span class="op" id="7722375">.</span><span class="ident" id="7722376">Printf</span><span class="op" id="7722382">(</span><span class="string" id="7722383">&#34;%#v\n&#34;</span><span class="op" id="7722390">,</span>&nbsp;<span class="ident" id="7722392">reply</span><span class="op" id="7722397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722400">client</span><span class="op" id="7722406">.</span><span class="ident" id="7722407">Close</span><span class="op" id="7722412">(</span><span class="op" id="7722413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722417">listen</span><span class="op" id="7722423">.</span><span class="ident" id="7722424">Close</span><span class="op" id="7722429">(</span><span class="op" id="7722430">)</span><br>
<span class="lineno"></span><span class="op" id="7722432">}</span>
</div>
</body>
</html>
