<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4149845">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4149900">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4149954">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4150005">package</span>&nbsp;<span class="ident" id="4150013">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4150019">import</span>&nbsp;<span class="op" id="4150026">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4150029">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4150039">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4150050">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4150065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4150068">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="4150129">var</span>&nbsp;<span class="ident" id="4150133">ErrBadPattern</span>&nbsp;<span class="op" id="4150147">=</span>&nbsp;<span class="ident" id="4150149">errors</span><span class="op" id="4150155">.</span><span class="ident" id="4150156">New</span><span class="op" id="4150159">(</span><span class="string" id="4150160">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="4150185">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4150188">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="4150255">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="4150281">//</span><br>
<span class="lineno"></span><span class="comment" id="4150284">//&nbsp;&nbsp;&nbsp;&nbsp;pattern:</span><br>
<span class="lineno">20</span><span class="comment" id="4150296">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="4150309">//&nbsp;&nbsp;&nbsp;&nbsp;term:</span><br>
<span class="lineno"></span><span class="comment" id="4150318">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="4150375">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="4150426">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="4150466">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="4150518">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4150581">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="4150617">//</span><br>
<span class="lineno"></span><span class="comment" id="4150620">//&nbsp;&nbsp;&nbsp;&nbsp;character-range:</span><br>
<span class="lineno">30</span><span class="comment" id="4150640">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="4150698">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="4150734">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="4150788">//</span><br>
<span class="lineno"></span><span class="comment" id="4150791">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="4150861">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="4150928">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="4150945">//</span><br>
<span class="lineno"></span><span class="keyword" id="4150948">func</span>&nbsp;<span class="ident" id="4150953">Match</span><span class="op" id="4150958">(</span><span class="ident" id="4150959">pattern</span><span class="op" id="4150966">,</span>&nbsp;<span class="ident" id="4150968">name</span>&nbsp;<span class="builtintype" id="4150973">string</span><span class="op" id="4150979">)</span>&nbsp;<span class="op" id="4150981">(</span><span class="ident" id="4150982">matched</span>&nbsp;<span class="builtintype" id="4150990">bool</span><span class="op" id="4150994">,</span>&nbsp;<span class="ident" id="4150996">err</span>&nbsp;<span class="builtintype" id="4151000">error</span><span class="op" id="4151005">)</span>&nbsp;<span class="op" id="4151007">{</span><br>
<span class="lineno"></span><span class="ident" id="4151009">Pattern</span><span class="op" id="4151016">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151019">for</span>&nbsp;<span class="builtinfunc" id="4151023">len</span><span class="op" id="4151026">(</span><span class="ident" id="4151027">pattern</span><span class="op" id="4151034">)</span>&nbsp;<span class="op" id="4151036">&gt;</span>&nbsp;<span class="num" id="4151038">0</span>&nbsp;<span class="op" id="4151040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151044">var</span>&nbsp;<span class="ident" id="4151048">star</span>&nbsp;<span class="builtintype" id="4151053">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151060">var</span>&nbsp;<span class="ident" id="4151064">chunk</span>&nbsp;<span class="builtintype" id="4151070">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151079">star</span><span class="op" id="4151083">,</span>&nbsp;<span class="ident" id="4151085">chunk</span><span class="op" id="4151090">,</span>&nbsp;<span class="ident" id="4151092">pattern</span>&nbsp;<span class="op" id="4151100">=</span>&nbsp;<span class="ident" id="4151102">scanChunk</span><span class="op" id="4151111">(</span><span class="ident" id="4151112">pattern</span><span class="op" id="4151119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151123">if</span>&nbsp;<span class="ident" id="4151126">star</span>&nbsp;<span class="op" id="4151131">&amp;&amp;</span>&nbsp;<span class="ident" id="4151134">chunk</span>&nbsp;<span class="op" id="4151140">==</span>&nbsp;<span class="string" id="4151143">&#34;&#34;</span>&nbsp;<span class="op" id="4151146">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151151">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151210">return</span>&nbsp;<span class="ident" id="4151217">strings</span><span class="op" id="4151224">.</span><span class="ident" id="4151225">Index</span><span class="op" id="4151230">(</span><span class="ident" id="4151231">name</span><span class="op" id="4151235">,</span>&nbsp;<span class="string" id="4151237">&#34;/&#34;</span><span class="op" id="4151240">)</span>&nbsp;<span class="op" id="4151242">&lt;</span>&nbsp;<span class="num" id="4151244">0</span><span class="op" id="4151245">,</span>&nbsp;<span class="builtintype" id="4151247">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151257">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151298">t</span><span class="op" id="4151299">,</span>&nbsp;<span class="ident" id="4151301">ok</span><span class="op" id="4151303">,</span>&nbsp;<span class="ident" id="4151305">err</span>&nbsp;<span class="op" id="4151309">:=</span>&nbsp;<span class="ident" id="4151312">matchChunk</span><span class="op" id="4151322">(</span><span class="ident" id="4151323">chunk</span><span class="op" id="4151328">,</span>&nbsp;<span class="ident" id="4151330">name</span><span class="op" id="4151334">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151338">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151403">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151473">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151493">if</span>&nbsp;<span class="ident" id="4151496">ok</span>&nbsp;<span class="op" id="4151499">&amp;&amp;</span>&nbsp;<span class="op" id="4151502">(</span><span class="builtinfunc" id="4151503">len</span><span class="op" id="4151506">(</span><span class="ident" id="4151507">t</span><span class="op" id="4151508">)</span>&nbsp;<span class="op" id="4151510">==</span>&nbsp;<span class="num" id="4151513">0</span>&nbsp;<span class="op" id="4151515">||</span>&nbsp;<span class="builtinfunc" id="4151518">len</span><span class="op" id="4151521">(</span><span class="ident" id="4151522">pattern</span><span class="op" id="4151529">)</span>&nbsp;<span class="op" id="4151531">&gt;</span>&nbsp;<span class="num" id="4151533">0</span><span class="op" id="4151534">)</span>&nbsp;<span class="op" id="4151536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151541">name</span>&nbsp;<span class="op" id="4151546">=</span>&nbsp;<span class="ident" id="4151548">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151553">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151568">if</span>&nbsp;<span class="ident" id="4151571">err</span>&nbsp;<span class="op" id="4151575">!=</span>&nbsp;<span class="builtintype" id="4151578">nil</span>&nbsp;<span class="op" id="4151582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151587">return</span>&nbsp;<span class="builtintype" id="4151594">false</span><span class="op" id="4151599">,</span>&nbsp;<span class="ident" id="4151601">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151607">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151611">if</span>&nbsp;<span class="ident" id="4151614">star</span>&nbsp;<span class="op" id="4151619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151624">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151665">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151686">for</span>&nbsp;<span class="ident" id="4151690">i</span>&nbsp;<span class="op" id="4151692">:=</span>&nbsp;<span class="num" id="4151695">0</span><span class="op" id="4151696">;</span>&nbsp;<span class="ident" id="4151698">i</span>&nbsp;<span class="op" id="4151700">&lt;</span>&nbsp;<span class="builtinfunc" id="4151702">len</span><span class="op" id="4151705">(</span><span class="ident" id="4151706">name</span><span class="op" id="4151710">)</span>&nbsp;<span class="op" id="4151712">&amp;&amp;</span>&nbsp;<span class="ident" id="4151715">name</span><span class="op" id="4151719">[</span><span class="ident" id="4151720">i</span><span class="op" id="4151721">]</span>&nbsp;<span class="op" id="4151723">!=</span>&nbsp;<span class="string" id="4151726">&#39;/&#39;</span><span class="op" id="4151729">;</span>&nbsp;<span class="ident" id="4151731">i</span><span class="op" id="4151732">++</span>&nbsp;<span class="op" id="4151735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151741">t</span><span class="op" id="4151742">,</span>&nbsp;<span class="ident" id="4151744">ok</span><span class="op" id="4151746">,</span>&nbsp;<span class="ident" id="4151748">err</span>&nbsp;<span class="op" id="4151752">:=</span>&nbsp;<span class="ident" id="4151755">matchChunk</span><span class="op" id="4151765">(</span><span class="ident" id="4151766">chunk</span><span class="op" id="4151771">,</span>&nbsp;<span class="ident" id="4151773">name</span><span class="op" id="4151777">[</span><span class="ident" id="4151778">i</span><span class="op" id="4151779">+</span><span class="num" id="4151780">1</span><span class="op" id="4151781">:</span><span class="op" id="4151782">]</span><span class="op" id="4151783">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151789">if</span>&nbsp;<span class="ident" id="4151792">ok</span>&nbsp;<span class="op" id="4151795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4151802">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151867">if</span>&nbsp;<span class="builtinfunc" id="4151870">len</span><span class="op" id="4151873">(</span><span class="ident" id="4151874">pattern</span><span class="op" id="4151881">)</span>&nbsp;<span class="op" id="4151883">==</span>&nbsp;<span class="num" id="4151886">0</span>&nbsp;<span class="op" id="4151888">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4151891">len</span><span class="op" id="4151894">(</span><span class="ident" id="4151895">t</span><span class="op" id="4151896">)</span>&nbsp;<span class="op" id="4151898">&gt;</span>&nbsp;<span class="num" id="4151900">0</span>&nbsp;<span class="op" id="4151902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151910">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151924">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4151931">name</span>&nbsp;<span class="op" id="4151936">=</span>&nbsp;<span class="ident" id="4151938">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151945">continue</span>&nbsp;<span class="ident" id="4151954">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4151966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151972">if</span>&nbsp;<span class="ident" id="4151975">err</span>&nbsp;<span class="op" id="4151979">!=</span>&nbsp;<span class="builtintype" id="4151982">nil</span>&nbsp;<span class="op" id="4151986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4151993">return</span>&nbsp;<span class="builtintype" id="4152000">false</span><span class="op" id="4152005">,</span>&nbsp;<span class="ident" id="4152007">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152028">return</span>&nbsp;<span class="builtintype" id="4152035">false</span><span class="op" id="4152040">,</span>&nbsp;<span class="builtintype" id="4152042">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152047">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152050">return</span>&nbsp;<span class="builtinfunc" id="4152057">len</span><span class="op" id="4152060">(</span><span class="ident" id="4152061">name</span><span class="op" id="4152065">)</span>&nbsp;<span class="op" id="4152067">==</span>&nbsp;<span class="num" id="4152070">0</span><span class="op" id="4152071">,</span>&nbsp;<span class="builtintype" id="4152073">nil</span><br>
<span class="lineno"></span><span class="op" id="4152077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4152080">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="4152154">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="4152186">func</span>&nbsp;<span class="ident" id="4152191">scanChunk</span><span class="op" id="4152200">(</span><span class="ident" id="4152201">pattern</span>&nbsp;<span class="builtintype" id="4152209">string</span><span class="op" id="4152215">)</span>&nbsp;<span class="op" id="4152217">(</span><span class="ident" id="4152218">star</span>&nbsp;<span class="builtintype" id="4152223">bool</span><span class="op" id="4152227">,</span>&nbsp;<span class="ident" id="4152229">chunk</span><span class="op" id="4152234">,</span>&nbsp;<span class="ident" id="4152236">rest</span>&nbsp;<span class="builtintype" id="4152241">string</span><span class="op" id="4152247">)</span>&nbsp;<span class="op" id="4152249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152252">for</span>&nbsp;<span class="builtinfunc" id="4152256">len</span><span class="op" id="4152259">(</span><span class="ident" id="4152260">pattern</span><span class="op" id="4152267">)</span>&nbsp;<span class="op" id="4152269">&gt;</span>&nbsp;<span class="num" id="4152271">0</span>&nbsp;<span class="op" id="4152273">&amp;&amp;</span>&nbsp;<span class="ident" id="4152276">pattern</span><span class="op" id="4152283">[</span><span class="num" id="4152284">0</span><span class="op" id="4152285">]</span>&nbsp;<span class="op" id="4152287">==</span>&nbsp;<span class="string" id="4152290">&#39;*&#39;</span>&nbsp;<span class="op" id="4152294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152298">pattern</span>&nbsp;<span class="op" id="4152306">=</span>&nbsp;<span class="ident" id="4152308">pattern</span><span class="op" id="4152315">[</span><span class="num" id="4152316">1</span><span class="op" id="4152317">:</span><span class="op" id="4152318">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152322">star</span>&nbsp;<span class="op" id="4152327">=</span>&nbsp;<span class="builtintype" id="4152329">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152335">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152338">inrange</span>&nbsp;<span class="op" id="4152346">:=</span>&nbsp;<span class="builtintype" id="4152349">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152356">var</span>&nbsp;<span class="ident" id="4152360">i</span>&nbsp;<span class="builtintype" id="4152362">int</span><br>
<span class="lineno"></span><span class="ident" id="4152366">Scan</span><span class="op" id="4152370">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152373">for</span>&nbsp;<span class="ident" id="4152377">i</span>&nbsp;<span class="op" id="4152379">=</span>&nbsp;<span class="num" id="4152381">0</span><span class="op" id="4152382">;</span>&nbsp;<span class="ident" id="4152384">i</span>&nbsp;<span class="op" id="4152386">&lt;</span>&nbsp;<span class="builtinfunc" id="4152388">len</span><span class="op" id="4152391">(</span><span class="ident" id="4152392">pattern</span><span class="op" id="4152399">)</span><span class="op" id="4152400">;</span>&nbsp;<span class="ident" id="4152402">i</span><span class="op" id="4152403">++</span>&nbsp;<span class="op" id="4152406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152410">switch</span>&nbsp;<span class="ident" id="4152417">pattern</span><span class="op" id="4152424">[</span><span class="ident" id="4152425">i</span><span class="op" id="4152426">]</span>&nbsp;<span class="op" id="4152428">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152432">case</span>&nbsp;<span class="string" id="4152437">&#39;\\&#39;</span><span class="op" id="4152441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4152446">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152500">if</span>&nbsp;<span class="ident" id="4152503">i</span><span class="op" id="4152504">+</span><span class="num" id="4152505">1</span>&nbsp;<span class="op" id="4152507">&lt;</span>&nbsp;<span class="builtinfunc" id="4152509">len</span><span class="op" id="4152512">(</span><span class="ident" id="4152513">pattern</span><span class="op" id="4152520">)</span>&nbsp;<span class="op" id="4152522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152528">i</span><span class="op" id="4152529">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152535">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152539">case</span>&nbsp;<span class="string" id="4152544">&#39;[&#39;</span><span class="op" id="4152547">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152552">inrange</span>&nbsp;<span class="op" id="4152560">=</span>&nbsp;<span class="builtintype" id="4152562">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152569">case</span>&nbsp;<span class="string" id="4152574">&#39;]&#39;</span><span class="op" id="4152577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4152582">inrange</span>&nbsp;<span class="op" id="4152590">=</span>&nbsp;<span class="builtintype" id="4152592">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152600">case</span>&nbsp;<span class="string" id="4152605">&#39;*&#39;</span><span class="op" id="4152608">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152613">if</span>&nbsp;<span class="op" id="4152616">!</span><span class="ident" id="4152617">inrange</span>&nbsp;<span class="op" id="4152625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152631">break</span>&nbsp;<span class="ident" id="4152637">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4152652">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152655">return</span>&nbsp;<span class="ident" id="4152662">star</span><span class="op" id="4152666">,</span>&nbsp;<span class="ident" id="4152668">pattern</span><span class="op" id="4152675">[</span><span class="num" id="4152676">0</span><span class="op" id="4152677">:</span><span class="ident" id="4152678">i</span><span class="op" id="4152679">]</span><span class="op" id="4152680">,</span>&nbsp;<span class="ident" id="4152682">pattern</span><span class="op" id="4152689">[</span><span class="ident" id="4152690">i</span><span class="op" id="4152691">:</span><span class="op" id="4152692">]</span><br>
<span class="lineno"></span><span class="op" id="4152694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4152697">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="4152760">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="4152819">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="4152894">func</span>&nbsp;<span class="ident" id="4152899">matchChunk</span><span class="op" id="4152909">(</span><span class="ident" id="4152910">chunk</span><span class="op" id="4152915">,</span>&nbsp;<span class="ident" id="4152917">s</span>&nbsp;<span class="builtintype" id="4152919">string</span><span class="op" id="4152925">)</span>&nbsp;<span class="op" id="4152927">(</span><span class="ident" id="4152928">rest</span>&nbsp;<span class="builtintype" id="4152933">string</span><span class="op" id="4152939">,</span>&nbsp;<span class="ident" id="4152941">ok</span>&nbsp;<span class="builtintype" id="4152944">bool</span><span class="op" id="4152948">,</span>&nbsp;<span class="ident" id="4152950">err</span>&nbsp;<span class="builtintype" id="4152954">error</span><span class="op" id="4152959">)</span>&nbsp;<span class="op" id="4152961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152964">for</span>&nbsp;<span class="builtinfunc" id="4152968">len</span><span class="op" id="4152971">(</span><span class="ident" id="4152972">chunk</span><span class="op" id="4152977">)</span>&nbsp;<span class="op" id="4152979">&gt;</span>&nbsp;<span class="num" id="4152981">0</span>&nbsp;<span class="op" id="4152983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4152987">if</span>&nbsp;<span class="builtinfunc" id="4152990">len</span><span class="op" id="4152993">(</span><span class="ident" id="4152994">s</span><span class="op" id="4152995">)</span>&nbsp;<span class="op" id="4152997">==</span>&nbsp;<span class="num" id="4153000">0</span>&nbsp;<span class="op" id="4153002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153007">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153020">switch</span>&nbsp;<span class="ident" id="4153027">chunk</span><span class="op" id="4153032">[</span><span class="num" id="4153033">0</span><span class="op" id="4153034">]</span>&nbsp;<span class="op" id="4153036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153040">case</span>&nbsp;<span class="string" id="4153045">&#39;[&#39;</span><span class="op" id="4153048">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153053">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153075">r</span><span class="op" id="4153076">,</span>&nbsp;<span class="ident" id="4153078">n</span>&nbsp;<span class="op" id="4153080">:=</span>&nbsp;<span class="ident" id="4153083">utf8</span><span class="op" id="4153087">.</span><span class="ident" id="4153088">DecodeRuneInString</span><span class="op" id="4153106">(</span><span class="ident" id="4153107">s</span><span class="op" id="4153108">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153113">s</span>&nbsp;<span class="op" id="4153115">=</span>&nbsp;<span class="ident" id="4153117">s</span><span class="op" id="4153118">[</span><span class="ident" id="4153119">n</span><span class="op" id="4153120">:</span><span class="op" id="4153121">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153126">chunk</span>&nbsp;<span class="op" id="4153132">=</span>&nbsp;<span class="ident" id="4153134">chunk</span><span class="op" id="4153139">[</span><span class="num" id="4153140">1</span><span class="op" id="4153141">:</span><span class="op" id="4153142">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153147">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153170">notNegated</span>&nbsp;<span class="op" id="4153181">:=</span>&nbsp;<span class="builtintype" id="4153184">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153192">if</span>&nbsp;<span class="builtinfunc" id="4153195">len</span><span class="op" id="4153198">(</span><span class="ident" id="4153199">chunk</span><span class="op" id="4153204">)</span>&nbsp;<span class="op" id="4153206">&gt;</span>&nbsp;<span class="num" id="4153208">0</span>&nbsp;<span class="op" id="4153210">&amp;&amp;</span>&nbsp;<span class="ident" id="4153213">chunk</span><span class="op" id="4153218">[</span><span class="num" id="4153219">0</span><span class="op" id="4153220">]</span>&nbsp;<span class="op" id="4153222">==</span>&nbsp;<span class="string" id="4153225">&#39;^&#39;</span>&nbsp;<span class="op" id="4153229">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153235">notNegated</span>&nbsp;<span class="op" id="4153246">=</span>&nbsp;<span class="builtintype" id="4153248">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153258">chunk</span>&nbsp;<span class="op" id="4153264">=</span>&nbsp;<span class="ident" id="4153266">chunk</span><span class="op" id="4153271">[</span><span class="num" id="4153272">1</span><span class="op" id="4153273">:</span><span class="op" id="4153274">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4153284">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153307">match</span>&nbsp;<span class="op" id="4153313">:=</span>&nbsp;<span class="builtintype" id="4153316">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153325">nrange</span>&nbsp;<span class="op" id="4153332">:=</span>&nbsp;<span class="num" id="4153335">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153340">for</span>&nbsp;<span class="op" id="4153344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153350">if</span>&nbsp;<span class="builtinfunc" id="4153353">len</span><span class="op" id="4153356">(</span><span class="ident" id="4153357">chunk</span><span class="op" id="4153362">)</span>&nbsp;<span class="op" id="4153364">&gt;</span>&nbsp;<span class="num" id="4153366">0</span>&nbsp;<span class="op" id="4153368">&amp;&amp;</span>&nbsp;<span class="ident" id="4153371">chunk</span><span class="op" id="4153376">[</span><span class="num" id="4153377">0</span><span class="op" id="4153378">]</span>&nbsp;<span class="op" id="4153380">==</span>&nbsp;<span class="string" id="4153383">&#39;]&#39;</span>&nbsp;<span class="op" id="4153387">&amp;&amp;</span>&nbsp;<span class="ident" id="4153390">nrange</span>&nbsp;<span class="op" id="4153397">&gt;</span>&nbsp;<span class="num" id="4153399">0</span>&nbsp;<span class="op" id="4153401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153408">chunk</span>&nbsp;<span class="op" id="4153414">=</span>&nbsp;<span class="ident" id="4153416">chunk</span><span class="op" id="4153421">[</span><span class="num" id="4153422">1</span><span class="op" id="4153423">:</span><span class="op" id="4153424">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153431">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153447">var</span>&nbsp;<span class="ident" id="4153451">lo</span><span class="op" id="4153453">,</span>&nbsp;<span class="ident" id="4153455">hi</span>&nbsp;<span class="builtintype" id="4153458">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153467">if</span>&nbsp;<span class="ident" id="4153470">lo</span><span class="op" id="4153472">,</span>&nbsp;<span class="ident" id="4153474">chunk</span><span class="op" id="4153479">,</span>&nbsp;<span class="ident" id="4153481">err</span>&nbsp;<span class="op" id="4153485">=</span>&nbsp;<span class="ident" id="4153487">getEsc</span><span class="op" id="4153493">(</span><span class="ident" id="4153494">chunk</span><span class="op" id="4153499">)</span><span class="op" id="4153500">;</span>&nbsp;<span class="ident" id="4153502">err</span>&nbsp;<span class="op" id="4153506">!=</span>&nbsp;<span class="builtintype" id="4153509">nil</span>&nbsp;<span class="op" id="4153513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153520">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153531">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153537">hi</span>&nbsp;<span class="op" id="4153540">=</span>&nbsp;<span class="ident" id="4153542">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153549">if</span>&nbsp;<span class="ident" id="4153552">chunk</span><span class="op" id="4153557">[</span><span class="num" id="4153558">0</span><span class="op" id="4153559">]</span>&nbsp;<span class="op" id="4153561">==</span>&nbsp;<span class="string" id="4153564">&#39;-&#39;</span>&nbsp;<span class="op" id="4153568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153575">if</span>&nbsp;<span class="ident" id="4153578">hi</span><span class="op" id="4153580">,</span>&nbsp;<span class="ident" id="4153582">chunk</span><span class="op" id="4153587">,</span>&nbsp;<span class="ident" id="4153589">err</span>&nbsp;<span class="op" id="4153593">=</span>&nbsp;<span class="ident" id="4153595">getEsc</span><span class="op" id="4153601">(</span><span class="ident" id="4153602">chunk</span><span class="op" id="4153607">[</span><span class="num" id="4153608">1</span><span class="op" id="4153609">:</span><span class="op" id="4153610">]</span><span class="op" id="4153611">)</span><span class="op" id="4153612">;</span>&nbsp;<span class="ident" id="4153614">err</span>&nbsp;<span class="op" id="4153618">!=</span>&nbsp;<span class="builtintype" id="4153621">nil</span>&nbsp;<span class="op" id="4153625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153633">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153645">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153657">if</span>&nbsp;<span class="ident" id="4153660">lo</span>&nbsp;<span class="op" id="4153663">&lt;=</span>&nbsp;<span class="ident" id="4153666">r</span>&nbsp;<span class="op" id="4153668">&amp;&amp;</span>&nbsp;<span class="ident" id="4153671">r</span>&nbsp;<span class="op" id="4153673">&lt;=</span>&nbsp;<span class="ident" id="4153676">hi</span>&nbsp;<span class="op" id="4153679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153686">match</span>&nbsp;<span class="op" id="4153692">=</span>&nbsp;<span class="builtintype" id="4153694">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153709">nrange</span><span class="op" id="4153715">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153726">if</span>&nbsp;<span class="ident" id="4153729">match</span>&nbsp;<span class="op" id="4153735">!=</span>&nbsp;<span class="ident" id="4153738">notNegated</span>&nbsp;<span class="op" id="4153749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153755">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153770">case</span>&nbsp;<span class="string" id="4153775">&#39;?&#39;</span><span class="op" id="4153778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153783">if</span>&nbsp;<span class="ident" id="4153786">s</span><span class="op" id="4153787">[</span><span class="num" id="4153788">0</span><span class="op" id="4153789">]</span>&nbsp;<span class="op" id="4153791">==</span>&nbsp;<span class="string" id="4153794">&#39;/&#39;</span>&nbsp;<span class="op" id="4153798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153804">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153819">_</span><span class="op" id="4153820">,</span>&nbsp;<span class="ident" id="4153822">n</span>&nbsp;<span class="op" id="4153824">:=</span>&nbsp;<span class="ident" id="4153827">utf8</span><span class="op" id="4153831">.</span><span class="ident" id="4153832">DecodeRuneInString</span><span class="op" id="4153850">(</span><span class="ident" id="4153851">s</span><span class="op" id="4153852">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153857">s</span>&nbsp;<span class="op" id="4153859">=</span>&nbsp;<span class="ident" id="4153861">s</span><span class="op" id="4153862">[</span><span class="ident" id="4153863">n</span><span class="op" id="4153864">:</span><span class="op" id="4153865">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153870">chunk</span>&nbsp;<span class="op" id="4153876">=</span>&nbsp;<span class="ident" id="4153878">chunk</span><span class="op" id="4153883">[</span><span class="num" id="4153884">1</span><span class="op" id="4153885">:</span><span class="op" id="4153886">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153891">case</span>&nbsp;<span class="string" id="4153896">&#39;\\&#39;</span><span class="op" id="4153900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153905">chunk</span>&nbsp;<span class="op" id="4153911">=</span>&nbsp;<span class="ident" id="4153913">chunk</span><span class="op" id="4153918">[</span><span class="num" id="4153919">1</span><span class="op" id="4153920">:</span><span class="op" id="4153921">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153926">if</span>&nbsp;<span class="builtinfunc" id="4153929">len</span><span class="op" id="4153932">(</span><span class="ident" id="4153933">chunk</span><span class="op" id="4153938">)</span>&nbsp;<span class="op" id="4153940">==</span>&nbsp;<span class="num" id="4153943">0</span>&nbsp;<span class="op" id="4153945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4153951">err</span>&nbsp;<span class="op" id="4153955">=</span>&nbsp;<span class="ident" id="4153957">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153975">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4153985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4153990">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154005">default</span><span class="op" id="4154012">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154017">if</span>&nbsp;<span class="ident" id="4154020">chunk</span><span class="op" id="4154025">[</span><span class="num" id="4154026">0</span><span class="op" id="4154027">]</span>&nbsp;<span class="op" id="4154029">!=</span>&nbsp;<span class="ident" id="4154032">s</span><span class="op" id="4154033">[</span><span class="num" id="4154034">0</span><span class="op" id="4154035">]</span>&nbsp;<span class="op" id="4154037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154043">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154053">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154058">s</span>&nbsp;<span class="op" id="4154060">=</span>&nbsp;<span class="ident" id="4154062">s</span><span class="op" id="4154063">[</span><span class="num" id="4154064">1</span><span class="op" id="4154065">:</span><span class="op" id="4154066">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154071">chunk</span>&nbsp;<span class="op" id="4154077">=</span>&nbsp;<span class="ident" id="4154079">chunk</span><span class="op" id="4154084">[</span><span class="num" id="4154085">1</span><span class="op" id="4154086">:</span><span class="op" id="4154087">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154097">return</span>&nbsp;<span class="ident" id="4154104">s</span><span class="op" id="4154105">,</span>&nbsp;<span class="builtintype" id="4154107">true</span><span class="op" id="4154111">,</span>&nbsp;<span class="builtintype" id="4154113">nil</span><br>
<span class="lineno">185</span><span class="op" id="4154117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4154120">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="4154199">func</span>&nbsp;<span class="ident" id="4154204">getEsc</span><span class="op" id="4154210">(</span><span class="ident" id="4154211">chunk</span>&nbsp;<span class="builtintype" id="4154217">string</span><span class="op" id="4154223">)</span>&nbsp;<span class="op" id="4154225">(</span><span class="ident" id="4154226">r</span>&nbsp;<span class="builtintype" id="4154228">rune</span><span class="op" id="4154232">,</span>&nbsp;<span class="ident" id="4154234">nchunk</span>&nbsp;<span class="builtintype" id="4154241">string</span><span class="op" id="4154247">,</span>&nbsp;<span class="ident" id="4154249">err</span>&nbsp;<span class="builtintype" id="4154253">error</span><span class="op" id="4154258">)</span>&nbsp;<span class="op" id="4154260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154263">if</span>&nbsp;<span class="builtinfunc" id="4154266">len</span><span class="op" id="4154269">(</span><span class="ident" id="4154270">chunk</span><span class="op" id="4154275">)</span>&nbsp;<span class="op" id="4154277">==</span>&nbsp;<span class="num" id="4154280">0</span>&nbsp;<span class="op" id="4154282">||</span>&nbsp;<span class="ident" id="4154285">chunk</span><span class="op" id="4154290">[</span><span class="num" id="4154291">0</span><span class="op" id="4154292">]</span>&nbsp;<span class="op" id="4154294">==</span>&nbsp;<span class="string" id="4154297">&#39;-&#39;</span>&nbsp;<span class="op" id="4154301">||</span>&nbsp;<span class="ident" id="4154304">chunk</span><span class="op" id="4154309">[</span><span class="num" id="4154310">0</span><span class="op" id="4154311">]</span>&nbsp;<span class="op" id="4154313">==</span>&nbsp;<span class="string" id="4154316">&#39;]&#39;</span>&nbsp;<span class="op" id="4154320">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154324">err</span>&nbsp;<span class="op" id="4154328">=</span>&nbsp;<span class="ident" id="4154330">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154346">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154357">if</span>&nbsp;<span class="ident" id="4154360">chunk</span><span class="op" id="4154365">[</span><span class="num" id="4154366">0</span><span class="op" id="4154367">]</span>&nbsp;<span class="op" id="4154369">==</span>&nbsp;<span class="string" id="4154372">&#39;\\&#39;</span>&nbsp;<span class="op" id="4154377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154381">chunk</span>&nbsp;<span class="op" id="4154387">=</span>&nbsp;<span class="ident" id="4154389">chunk</span><span class="op" id="4154394">[</span><span class="num" id="4154395">1</span><span class="op" id="4154396">:</span><span class="op" id="4154397">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154401">if</span>&nbsp;<span class="builtinfunc" id="4154404">len</span><span class="op" id="4154407">(</span><span class="ident" id="4154408">chunk</span><span class="op" id="4154413">)</span>&nbsp;<span class="op" id="4154415">==</span>&nbsp;<span class="num" id="4154418">0</span>&nbsp;<span class="op" id="4154420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154425">err</span>&nbsp;<span class="op" id="4154429">=</span>&nbsp;<span class="ident" id="4154431">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154448">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154460">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154463">r</span><span class="op" id="4154464">,</span>&nbsp;<span class="ident" id="4154466">n</span>&nbsp;<span class="op" id="4154468">:=</span>&nbsp;<span class="ident" id="4154471">utf8</span><span class="op" id="4154475">.</span><span class="ident" id="4154476">DecodeRuneInString</span><span class="op" id="4154494">(</span><span class="ident" id="4154495">chunk</span><span class="op" id="4154500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154503">if</span>&nbsp;<span class="ident" id="4154506">r</span>&nbsp;<span class="op" id="4154508">==</span>&nbsp;<span class="ident" id="4154511">utf8</span><span class="op" id="4154515">.</span><span class="ident" id="4154516">RuneError</span>&nbsp;<span class="op" id="4154526">&amp;&amp;</span>&nbsp;<span class="ident" id="4154529">n</span>&nbsp;<span class="op" id="4154531">==</span>&nbsp;<span class="num" id="4154534">1</span>&nbsp;<span class="op" id="4154536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154540">err</span>&nbsp;<span class="op" id="4154544">=</span>&nbsp;<span class="ident" id="4154546">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154564">nchunk</span>&nbsp;<span class="op" id="4154571">=</span>&nbsp;<span class="ident" id="4154573">chunk</span><span class="op" id="4154578">[</span><span class="ident" id="4154579">n</span><span class="op" id="4154580">:</span><span class="op" id="4154581">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154584">if</span>&nbsp;<span class="builtinfunc" id="4154587">len</span><span class="op" id="4154590">(</span><span class="ident" id="4154591">nchunk</span><span class="op" id="4154597">)</span>&nbsp;<span class="op" id="4154599">==</span>&nbsp;<span class="num" id="4154602">0</span>&nbsp;<span class="op" id="4154604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4154608">err</span>&nbsp;<span class="op" id="4154612">=</span>&nbsp;<span class="ident" id="4154614">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4154629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4154632">return</span><br>
<span class="lineno"></span><span class="op" id="4154639">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
