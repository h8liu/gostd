<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8385660">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8385715">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8385769">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8385820">package</span>&nbsp;<span class="ident" id="8385828">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8385833">import</span>&nbsp;<span class="op" id="8385840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385843">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8385851">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8385861">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8385864">type</span>&nbsp;<span class="ident" id="8385869">hostTest</span>&nbsp;<span class="keyword" id="8385878">struct</span>&nbsp;<span class="op" id="8385885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385888">host</span>&nbsp;<span class="builtintype" id="8385893">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385901">ips</span>&nbsp;&nbsp;<span class="op" id="8385906">[</span><span class="op" id="8385907">]</span><span class="ident" id="8385908">IP</span><br>
<span class="lineno">15</span><span class="op" id="8385911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8385914">var</span>&nbsp;<span class="ident" id="8385918">hosttests</span>&nbsp;<span class="op" id="8385928">=</span>&nbsp;<span class="op" id="8385930">[</span><span class="op" id="8385931">]</span><span class="ident" id="8385932">hostTest</span><span class="op" id="8385940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8385943">{</span><span class="string" id="8385944">&#34;odin&#34;</span><span class="op" id="8385950">,</span>&nbsp;<span class="op" id="8385952">[</span><span class="op" id="8385953">]</span><span class="ident" id="8385954">IP</span><span class="op" id="8385956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385960">IPv4</span><span class="op" id="8385964">(</span><span class="num" id="8385965">127</span><span class="op" id="8385968">,</span>&nbsp;<span class="num" id="8385970">0</span><span class="op" id="8385971">,</span>&nbsp;<span class="num" id="8385973">0</span><span class="op" id="8385974">,</span>&nbsp;<span class="num" id="8385976">2</span><span class="op" id="8385977">)</span><span class="op" id="8385978">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8385982">IPv4</span><span class="op" id="8385986">(</span><span class="num" id="8385987">127</span><span class="op" id="8385990">,</span>&nbsp;<span class="num" id="8385992">0</span><span class="op" id="8385993">,</span>&nbsp;<span class="num" id="8385995">0</span><span class="op" id="8385996">,</span>&nbsp;<span class="num" id="8385998">3</span><span class="op" id="8385999">)</span><span class="op" id="8386000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386004">ParseIP</span><span class="op" id="8386011">(</span><span class="string" id="8386012">&#34;::2&#34;</span><span class="op" id="8386017">)</span><span class="op" id="8386018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386021">}</span><span class="op" id="8386022">}</span><span class="op" id="8386023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386026">{</span><span class="string" id="8386027">&#34;thor&#34;</span><span class="op" id="8386033">,</span>&nbsp;<span class="op" id="8386035">[</span><span class="op" id="8386036">]</span><span class="ident" id="8386037">IP</span><span class="op" id="8386039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386043">IPv4</span><span class="op" id="8386047">(</span><span class="num" id="8386048">127</span><span class="op" id="8386051">,</span>&nbsp;<span class="num" id="8386053">1</span><span class="op" id="8386054">,</span>&nbsp;<span class="num" id="8386056">1</span><span class="op" id="8386057">,</span>&nbsp;<span class="num" id="8386059">1</span><span class="op" id="8386060">)</span><span class="op" id="8386061">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386064">}</span><span class="op" id="8386065">}</span><span class="op" id="8386066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386069">{</span><span class="string" id="8386070">&#34;loki&#34;</span><span class="op" id="8386076">,</span>&nbsp;<span class="op" id="8386078">[</span><span class="op" id="8386079">]</span><span class="ident" id="8386080">IP</span><span class="op" id="8386082">{</span><span class="op" id="8386083">}</span><span class="op" id="8386084">}</span><span class="op" id="8386085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386088">{</span><span class="string" id="8386089">&#34;ullr&#34;</span><span class="op" id="8386095">,</span>&nbsp;<span class="op" id="8386097">[</span><span class="op" id="8386098">]</span><span class="ident" id="8386099">IP</span><span class="op" id="8386101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386105">IPv4</span><span class="op" id="8386109">(</span><span class="num" id="8386110">127</span><span class="op" id="8386113">,</span>&nbsp;<span class="num" id="8386115">1</span><span class="op" id="8386116">,</span>&nbsp;<span class="num" id="8386118">1</span><span class="op" id="8386119">,</span>&nbsp;<span class="num" id="8386121">2</span><span class="op" id="8386122">)</span><span class="op" id="8386123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386126">}</span><span class="op" id="8386127">}</span><span class="op" id="8386128">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386131">{</span><span class="string" id="8386132">&#34;ullrhost&#34;</span><span class="op" id="8386142">,</span>&nbsp;<span class="op" id="8386144">[</span><span class="op" id="8386145">]</span><span class="ident" id="8386146">IP</span><span class="op" id="8386148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386152">IPv4</span><span class="op" id="8386156">(</span><span class="num" id="8386157">127</span><span class="op" id="8386160">,</span>&nbsp;<span class="num" id="8386162">1</span><span class="op" id="8386163">,</span>&nbsp;<span class="num" id="8386165">1</span><span class="op" id="8386166">,</span>&nbsp;<span class="num" id="8386168">2</span><span class="op" id="8386169">)</span><span class="op" id="8386170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386173">}</span><span class="op" id="8386174">}</span><span class="op" id="8386175">,</span><br>
<span class="lineno"></span><span class="op" id="8386177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="8386180">func</span>&nbsp;<span class="ident" id="8386185">TestLookupStaticHost</span><span class="op" id="8386205">(</span><span class="ident" id="8386206">t</span>&nbsp;<span class="op" id="8386208">*</span><span class="ident" id="8386209">testing</span><span class="op" id="8386216">.</span><span class="ident" id="8386217">T</span><span class="op" id="8386218">)</span>&nbsp;<span class="op" id="8386220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386223">p</span>&nbsp;<span class="op" id="8386225">:=</span>&nbsp;<span class="ident" id="8386228">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386239">hostsPath</span>&nbsp;<span class="op" id="8386249">=</span>&nbsp;<span class="string" id="8386251">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386269">for</span>&nbsp;<span class="ident" id="8386273">i</span>&nbsp;<span class="op" id="8386275">:=</span>&nbsp;<span class="num" id="8386278">0</span><span class="op" id="8386279">;</span>&nbsp;<span class="ident" id="8386281">i</span>&nbsp;<span class="op" id="8386283">&lt;</span>&nbsp;<span class="builtinfunc" id="8386285">len</span><span class="op" id="8386288">(</span><span class="ident" id="8386289">hosttests</span><span class="op" id="8386298">)</span><span class="op" id="8386299">;</span>&nbsp;<span class="ident" id="8386301">i</span><span class="op" id="8386302">++</span>&nbsp;<span class="op" id="8386305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386309">tt</span>&nbsp;<span class="op" id="8386312">:=</span>&nbsp;<span class="ident" id="8386315">hosttests</span><span class="op" id="8386324">[</span><span class="ident" id="8386325">i</span><span class="op" id="8386326">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386330">ips</span>&nbsp;<span class="op" id="8386334">:=</span>&nbsp;<span class="ident" id="8386337">lookupStaticHost</span><span class="op" id="8386353">(</span><span class="ident" id="8386354">tt</span><span class="op" id="8386356">.</span><span class="ident" id="8386357">host</span><span class="op" id="8386361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386365">if</span>&nbsp;<span class="builtinfunc" id="8386368">len</span><span class="op" id="8386371">(</span><span class="ident" id="8386372">ips</span><span class="op" id="8386375">)</span>&nbsp;<span class="op" id="8386377">!=</span>&nbsp;<span class="builtinfunc" id="8386380">len</span><span class="op" id="8386383">(</span><span class="ident" id="8386384">tt</span><span class="op" id="8386386">.</span><span class="ident" id="8386387">ips</span><span class="op" id="8386390">)</span>&nbsp;<span class="op" id="8386392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386397">t</span><span class="op" id="8386398">.</span><span class="ident" id="8386399">Errorf</span><span class="op" id="8386405">(</span><span class="string" id="8386406">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8386432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8386438">len</span><span class="op" id="8386441">(</span><span class="ident" id="8386442">ips</span><span class="op" id="8386445">)</span><span class="op" id="8386446">,</span>&nbsp;<span class="builtinfunc" id="8386448">len</span><span class="op" id="8386451">(</span><span class="ident" id="8386452">tt</span><span class="op" id="8386454">.</span><span class="ident" id="8386455">ips</span><span class="op" id="8386458">)</span><span class="op" id="8386459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386464">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386479">for</span>&nbsp;<span class="ident" id="8386483">k</span><span class="op" id="8386484">,</span>&nbsp;<span class="ident" id="8386486">v</span>&nbsp;<span class="op" id="8386488">:=</span>&nbsp;<span class="keyword" id="8386491">range</span>&nbsp;<span class="ident" id="8386497">ips</span>&nbsp;<span class="op" id="8386501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386506">if</span>&nbsp;<span class="ident" id="8386509">tt</span><span class="op" id="8386511">.</span><span class="ident" id="8386512">ips</span><span class="op" id="8386515">[</span><span class="ident" id="8386516">k</span><span class="op" id="8386517">]</span><span class="op" id="8386518">.</span><span class="ident" id="8386519">String</span><span class="op" id="8386525">(</span><span class="op" id="8386526">)</span>&nbsp;<span class="op" id="8386528">!=</span>&nbsp;<span class="ident" id="8386531">v</span>&nbsp;<span class="op" id="8386533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386539">t</span><span class="op" id="8386540">.</span><span class="ident" id="8386541">Errorf</span><span class="op" id="8386547">(</span><span class="string" id="8386548">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8386584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386591">tt</span><span class="op" id="8386593">.</span><span class="ident" id="8386594">host</span><span class="op" id="8386598">,</span>&nbsp;<span class="ident" id="8386600">v</span><span class="op" id="8386601">,</span>&nbsp;<span class="ident" id="8386603">tt</span><span class="op" id="8386605">.</span><span class="ident" id="8386606">ips</span><span class="op" id="8386609">[</span><span class="ident" id="8386610">k</span><span class="op" id="8386611">]</span><span class="op" id="8386612">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386627">hostsPath</span>&nbsp;<span class="op" id="8386637">=</span>&nbsp;<span class="ident" id="8386639">p</span><br>
<span class="lineno"></span><span class="op" id="8386641">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="8386644">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="8386698">func</span>&nbsp;<span class="ident" id="8386703">TestSingleLineHostsFile</span><span class="op" id="8386726">(</span><span class="ident" id="8386727">t</span>&nbsp;<span class="op" id="8386729">*</span><span class="ident" id="8386730">testing</span><span class="op" id="8386737">.</span><span class="ident" id="8386738">T</span><span class="op" id="8386739">)</span>&nbsp;<span class="op" id="8386741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386744">p</span>&nbsp;<span class="op" id="8386746">:=</span>&nbsp;<span class="ident" id="8386749">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386760">hostsPath</span>&nbsp;<span class="op" id="8386770">=</span>&nbsp;<span class="string" id="8386772">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386802">ips</span>&nbsp;<span class="op" id="8386806">:=</span>&nbsp;<span class="ident" id="8386809">lookupStaticHost</span><span class="op" id="8386825">(</span><span class="string" id="8386826">&#34;odin&#34;</span><span class="op" id="8386832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8386835">if</span>&nbsp;<span class="builtinfunc" id="8386838">len</span><span class="op" id="8386841">(</span><span class="ident" id="8386842">ips</span><span class="op" id="8386845">)</span>&nbsp;<span class="op" id="8386847">!=</span>&nbsp;<span class="num" id="8386850">1</span>&nbsp;<span class="op" id="8386852">||</span>&nbsp;<span class="ident" id="8386855">ips</span><span class="op" id="8386858">[</span><span class="num" id="8386859">0</span><span class="op" id="8386860">]</span>&nbsp;<span class="op" id="8386862">!=</span>&nbsp;<span class="string" id="8386865">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="8386877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386881">t</span><span class="op" id="8386882">.</span><span class="ident" id="8386883">Errorf</span><span class="op" id="8386889">(</span><span class="string" id="8386890">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8386922">,</span>&nbsp;<span class="ident" id="8386924">ips</span><span class="op" id="8386927">,</span>&nbsp;<span class="op" id="8386929">[</span><span class="op" id="8386930">]</span><span class="builtintype" id="8386931">string</span><span class="op" id="8386937">{</span><span class="string" id="8386938">&#34;127.0.0.2&#34;</span><span class="op" id="8386949">}</span><span class="op" id="8386950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8386953">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8386957">hostsPath</span>&nbsp;<span class="op" id="8386967">=</span>&nbsp;<span class="ident" id="8386969">p</span><br>
<span class="lineno"></span><span class="op" id="8386971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8386974">func</span>&nbsp;<span class="ident" id="8386979">TestLookupHost</span><span class="op" id="8386993">(</span><span class="ident" id="8386994">t</span>&nbsp;<span class="op" id="8386996">*</span><span class="ident" id="8386997">testing</span><span class="op" id="8387004">.</span><span class="ident" id="8387005">T</span><span class="op" id="8387006">)</span>&nbsp;<span class="op" id="8387008">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387011">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387070">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387128">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8387181">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387205">addrs</span><span class="op" id="8387210">,</span>&nbsp;<span class="ident" id="8387212">_</span>&nbsp;<span class="op" id="8387214">:=</span>&nbsp;<span class="ident" id="8387217">LookupHost</span><span class="op" id="8387227">(</span><span class="string" id="8387228">&#34;localhost&#34;</span><span class="op" id="8387239">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387242">sort</span><span class="op" id="8387246">.</span><span class="ident" id="8387247">Strings</span><span class="op" id="8387254">(</span><span class="ident" id="8387255">addrs</span><span class="op" id="8387260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387263">for</span>&nbsp;<span class="ident" id="8387267">i</span>&nbsp;<span class="op" id="8387269">:=</span>&nbsp;<span class="num" id="8387272">0</span><span class="op" id="8387273">;</span>&nbsp;<span class="ident" id="8387275">i</span><span class="op" id="8387276">+</span><span class="num" id="8387277">1</span>&nbsp;<span class="op" id="8387279">&lt;</span>&nbsp;<span class="builtinfunc" id="8387281">len</span><span class="op" id="8387284">(</span><span class="ident" id="8387285">addrs</span><span class="op" id="8387290">)</span><span class="op" id="8387291">;</span>&nbsp;<span class="ident" id="8387293">i</span><span class="op" id="8387294">++</span>&nbsp;<span class="op" id="8387297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8387301">if</span>&nbsp;<span class="ident" id="8387304">addrs</span><span class="op" id="8387309">[</span><span class="ident" id="8387310">i</span><span class="op" id="8387311">]</span>&nbsp;<span class="op" id="8387313">==</span>&nbsp;<span class="ident" id="8387316">addrs</span><span class="op" id="8387321">[</span><span class="ident" id="8387322">i</span><span class="op" id="8387323">+</span><span class="num" id="8387324">1</span><span class="op" id="8387325">]</span>&nbsp;<span class="op" id="8387327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8387332">t</span><span class="op" id="8387333">.</span><span class="ident" id="8387334">Fatalf</span><span class="op" id="8387340">(</span><span class="string" id="8387341">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="8387398">,</span>&nbsp;<span class="ident" id="8387400">addrs</span><span class="op" id="8387405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387409">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8387412">}</span><br>
<span class="lineno"></span><span class="op" id="8387414">}</span>
</div>
</body>
</html>
