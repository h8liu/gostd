<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7780357">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7780413">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7780467">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7780518">package</span>&nbsp;<span class="ident" id="7780526">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7780534">import</span>&nbsp;<span class="op" id="7780541">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7780544">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7780553">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7780560">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7780571">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="7780581">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7780584">type</span>&nbsp;<span class="ident" id="7780589">parseTest</span>&nbsp;<span class="keyword" id="7780599">struct</span>&nbsp;<span class="op" id="7780606">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7780609">Regexp</span>&nbsp;<span class="builtintype" id="7780616">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7780624">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7780631">string</span><br>
<span class="lineno"></span><span class="op" id="7780638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7780641">var</span>&nbsp;<span class="ident" id="7780645">parseTests</span>&nbsp;<span class="op" id="7780656">=</span>&nbsp;<span class="op" id="7780658">[</span><span class="op" id="7780659">]</span><span class="ident" id="7780660">parseTest</span><span class="op" id="7780669">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7780672">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780687">{</span><span class="string" id="7780688">`a`</span><span class="op" id="7780691">,</span>&nbsp;<span class="string" id="7780693">`lit{a}`</span><span class="op" id="7780701">}</span><span class="op" id="7780702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780705">{</span><span class="string" id="7780706">`a.`</span><span class="op" id="7780710">,</span>&nbsp;<span class="string" id="7780712">`cat{lit{a}dot{}}`</span><span class="op" id="7780730">}</span><span class="op" id="7780731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780734">{</span><span class="string" id="7780735">`a.b`</span><span class="op" id="7780740">,</span>&nbsp;<span class="string" id="7780742">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="7780766">}</span><span class="op" id="7780767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780770">{</span><span class="string" id="7780771">`ab`</span><span class="op" id="7780775">,</span>&nbsp;<span class="string" id="7780777">`str{ab}`</span><span class="op" id="7780786">}</span><span class="op" id="7780787">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780790">{</span><span class="string" id="7780791">`a.b.c`</span><span class="op" id="7780798">,</span>&nbsp;<span class="string" id="7780800">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="7780835">}</span><span class="op" id="7780836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780839">{</span><span class="string" id="7780840">`abc`</span><span class="op" id="7780845">,</span>&nbsp;<span class="string" id="7780847">`str{abc}`</span><span class="op" id="7780857">}</span><span class="op" id="7780858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780861">{</span><span class="string" id="7780862">`a|^`</span><span class="op" id="7780867">,</span>&nbsp;<span class="string" id="7780869">`alt{lit{a}bol{}}`</span><span class="op" id="7780887">}</span><span class="op" id="7780888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780891">{</span><span class="string" id="7780892">`a|b`</span><span class="op" id="7780897">,</span>&nbsp;<span class="string" id="7780899">`cc{0x61-0x62}`</span><span class="op" id="7780914">}</span><span class="op" id="7780915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780918">{</span><span class="string" id="7780919">`(a)`</span><span class="op" id="7780924">,</span>&nbsp;<span class="string" id="7780926">`cap{lit{a}}`</span><span class="op" id="7780939">}</span><span class="op" id="7780940">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780943">{</span><span class="string" id="7780944">`(a)|b`</span><span class="op" id="7780951">,</span>&nbsp;<span class="string" id="7780953">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="7780977">}</span><span class="op" id="7780978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7780981">{</span><span class="string" id="7780982">`a*`</span><span class="op" id="7780986">,</span>&nbsp;<span class="string" id="7780988">`star{lit{a}}`</span><span class="op" id="7781002">}</span><span class="op" id="7781003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781006">{</span><span class="string" id="7781007">`a+`</span><span class="op" id="7781011">,</span>&nbsp;<span class="string" id="7781013">`plus{lit{a}}`</span><span class="op" id="7781027">}</span><span class="op" id="7781028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781031">{</span><span class="string" id="7781032">`a?`</span><span class="op" id="7781036">,</span>&nbsp;<span class="string" id="7781038">`que{lit{a}}`</span><span class="op" id="7781051">}</span><span class="op" id="7781052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781055">{</span><span class="string" id="7781056">`a{2}`</span><span class="op" id="7781062">,</span>&nbsp;<span class="string" id="7781064">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="7781081">}</span><span class="op" id="7781082">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781085">{</span><span class="string" id="7781086">`a{2,3}`</span><span class="op" id="7781094">,</span>&nbsp;<span class="string" id="7781096">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="7781113">}</span><span class="op" id="7781114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781117">{</span><span class="string" id="7781118">`a{2,}`</span><span class="op" id="7781125">,</span>&nbsp;<span class="string" id="7781127">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7781145">}</span><span class="op" id="7781146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781149">{</span><span class="string" id="7781150">`a*?`</span><span class="op" id="7781155">,</span>&nbsp;<span class="string" id="7781157">`nstar{lit{a}}`</span><span class="op" id="7781172">}</span><span class="op" id="7781173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781176">{</span><span class="string" id="7781177">`a+?`</span><span class="op" id="7781182">,</span>&nbsp;<span class="string" id="7781184">`nplus{lit{a}}`</span><span class="op" id="7781199">}</span><span class="op" id="7781200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781203">{</span><span class="string" id="7781204">`a??`</span><span class="op" id="7781209">,</span>&nbsp;<span class="string" id="7781211">`nque{lit{a}}`</span><span class="op" id="7781225">}</span><span class="op" id="7781226">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781229">{</span><span class="string" id="7781230">`a{2}?`</span><span class="op" id="7781237">,</span>&nbsp;<span class="string" id="7781239">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="7781257">}</span><span class="op" id="7781258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781261">{</span><span class="string" id="7781262">`a{2,3}?`</span><span class="op" id="7781271">,</span>&nbsp;<span class="string" id="7781273">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="7781291">}</span><span class="op" id="7781292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781295">{</span><span class="string" id="7781296">`a{2,}?`</span><span class="op" id="7781304">,</span>&nbsp;<span class="string" id="7781306">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7781325">}</span><span class="op" id="7781326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7781329">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781372">{</span><span class="string" id="7781373">`x{1001`</span><span class="op" id="7781381">,</span>&nbsp;<span class="string" id="7781383">`str{x{1001}`</span><span class="op" id="7781396">}</span><span class="op" id="7781397">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781400">{</span><span class="string" id="7781401">`x{9876543210`</span><span class="op" id="7781415">,</span>&nbsp;<span class="string" id="7781417">`str{x{9876543210}`</span><span class="op" id="7781436">}</span><span class="op" id="7781437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781440">{</span><span class="string" id="7781441">`x{9876543210,`</span><span class="op" id="7781456">,</span>&nbsp;<span class="string" id="7781458">`str{x{9876543210,}`</span><span class="op" id="7781478">}</span><span class="op" id="7781479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781482">{</span><span class="string" id="7781483">`x{2,1`</span><span class="op" id="7781490">,</span>&nbsp;<span class="string" id="7781492">`str{x{2,1}`</span><span class="op" id="7781504">}</span><span class="op" id="7781505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781508">{</span><span class="string" id="7781509">`x{1,9876543210`</span><span class="op" id="7781525">,</span>&nbsp;<span class="string" id="7781527">`str{x{1,9876543210}`</span><span class="op" id="7781548">}</span><span class="op" id="7781549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781552">{</span><span class="string" id="7781553">``</span><span class="op" id="7781555">,</span>&nbsp;<span class="string" id="7781557">`emp{}`</span><span class="op" id="7781564">}</span><span class="op" id="7781565">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781568">{</span><span class="string" id="7781569">`|`</span><span class="op" id="7781572">,</span>&nbsp;<span class="string" id="7781574">`emp{}`</span><span class="op" id="7781581">}</span><span class="op" id="7781582">,</span>&nbsp;<span class="comment" id="7781584">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781621">{</span><span class="string" id="7781622">`|x|`</span><span class="op" id="7781627">,</span>&nbsp;<span class="string" id="7781629">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="7781652">}</span><span class="op" id="7781653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781656">{</span><span class="string" id="7781657">`.`</span><span class="op" id="7781660">,</span>&nbsp;<span class="string" id="7781662">`dot{}`</span><span class="op" id="7781669">}</span><span class="op" id="7781670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781673">{</span><span class="string" id="7781674">`^`</span><span class="op" id="7781677">,</span>&nbsp;<span class="string" id="7781679">`bol{}`</span><span class="op" id="7781686">}</span><span class="op" id="7781687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781690">{</span><span class="string" id="7781691">`$`</span><span class="op" id="7781694">,</span>&nbsp;<span class="string" id="7781696">`eol{}`</span><span class="op" id="7781703">}</span><span class="op" id="7781704">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781707">{</span><span class="string" id="7781708">`\|`</span><span class="op" id="7781712">,</span>&nbsp;<span class="string" id="7781714">`lit{|}`</span><span class="op" id="7781722">}</span><span class="op" id="7781723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781726">{</span><span class="string" id="7781727">`\(`</span><span class="op" id="7781731">,</span>&nbsp;<span class="string" id="7781733">`lit{(}`</span><span class="op" id="7781741">}</span><span class="op" id="7781742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781745">{</span><span class="string" id="7781746">`\)`</span><span class="op" id="7781750">,</span>&nbsp;<span class="string" id="7781752">`lit{)}`</span><span class="op" id="7781760">}</span><span class="op" id="7781761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781764">{</span><span class="string" id="7781765">`\*`</span><span class="op" id="7781769">,</span>&nbsp;<span class="string" id="7781771">`lit{*}`</span><span class="op" id="7781779">}</span><span class="op" id="7781780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781783">{</span><span class="string" id="7781784">`\+`</span><span class="op" id="7781788">,</span>&nbsp;<span class="string" id="7781790">`lit{+}`</span><span class="op" id="7781798">}</span><span class="op" id="7781799">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781802">{</span><span class="string" id="7781803">`\?`</span><span class="op" id="7781807">,</span>&nbsp;<span class="string" id="7781809">`lit{?}`</span><span class="op" id="7781817">}</span><span class="op" id="7781818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781821">{</span><span class="string" id="7781822">`{`</span><span class="op" id="7781825">,</span>&nbsp;<span class="string" id="7781827">`lit{{}`</span><span class="op" id="7781835">}</span><span class="op" id="7781836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781839">{</span><span class="string" id="7781840">`}`</span><span class="op" id="7781843">,</span>&nbsp;<span class="string" id="7781845">`lit{}}`</span><span class="op" id="7781853">}</span><span class="op" id="7781854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781857">{</span><span class="string" id="7781858">`\.`</span><span class="op" id="7781862">,</span>&nbsp;<span class="string" id="7781864">`lit{.}`</span><span class="op" id="7781872">}</span><span class="op" id="7781873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781876">{</span><span class="string" id="7781877">`\^`</span><span class="op" id="7781881">,</span>&nbsp;<span class="string" id="7781883">`lit{^}`</span><span class="op" id="7781891">}</span><span class="op" id="7781892">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781895">{</span><span class="string" id="7781896">`\$`</span><span class="op" id="7781900">,</span>&nbsp;<span class="string" id="7781902">`lit{$}`</span><span class="op" id="7781910">}</span><span class="op" id="7781911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781914">{</span><span class="string" id="7781915">`\\`</span><span class="op" id="7781919">,</span>&nbsp;<span class="string" id="7781921">`lit{\}`</span><span class="op" id="7781929">}</span><span class="op" id="7781930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781933">{</span><span class="string" id="7781934">`[ace]`</span><span class="op" id="7781941">,</span>&nbsp;<span class="string" id="7781943">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="7781963">}</span><span class="op" id="7781964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781967">{</span><span class="string" id="7781968">`[abc]`</span><span class="op" id="7781975">,</span>&nbsp;<span class="string" id="7781977">`cc{0x61-0x63}`</span><span class="op" id="7781992">}</span><span class="op" id="7781993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7781996">{</span><span class="string" id="7781997">`[a-z]`</span><span class="op" id="7782004">,</span>&nbsp;<span class="string" id="7782006">`cc{0x61-0x7a}`</span><span class="op" id="7782021">}</span><span class="op" id="7782022">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782025">{</span><span class="string" id="7782026">`[a]`</span><span class="op" id="7782031">,</span>&nbsp;<span class="string" id="7782033">`lit{a}`</span><span class="op" id="7782041">}</span><span class="op" id="7782042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782045">{</span><span class="string" id="7782046">`\-`</span><span class="op" id="7782050">,</span>&nbsp;<span class="string" id="7782052">`lit{-}`</span><span class="op" id="7782060">}</span><span class="op" id="7782061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782064">{</span><span class="string" id="7782065">`-`</span><span class="op" id="7782068">,</span>&nbsp;<span class="string" id="7782070">`lit{-}`</span><span class="op" id="7782078">}</span><span class="op" id="7782079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782082">{</span><span class="string" id="7782083">`\_`</span><span class="op" id="7782087">,</span>&nbsp;<span class="string" id="7782089">`lit{_}`</span><span class="op" id="7782097">}</span><span class="op" id="7782098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782101">{</span><span class="string" id="7782102">`abc`</span><span class="op" id="7782107">,</span>&nbsp;<span class="string" id="7782109">`str{abc}`</span><span class="op" id="7782119">}</span><span class="op" id="7782120">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782123">{</span><span class="string" id="7782124">`abc|def`</span><span class="op" id="7782133">,</span>&nbsp;<span class="string" id="7782135">`alt{str{abc}str{def}}`</span><span class="op" id="7782158">}</span><span class="op" id="7782159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782162">{</span><span class="string" id="7782163">`abc|def|ghi`</span><span class="op" id="7782176">,</span>&nbsp;<span class="string" id="7782178">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="7782209">}</span><span class="op" id="7782210">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7782214">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782244">{</span><span class="string" id="7782245">`[[:lower:]]`</span><span class="op" id="7782258">,</span>&nbsp;<span class="string" id="7782260">`cc{0x61-0x7a}`</span><span class="op" id="7782275">}</span><span class="op" id="7782276">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782279">{</span><span class="string" id="7782280">`[a-z]`</span><span class="op" id="7782287">,</span>&nbsp;<span class="string" id="7782289">`cc{0x61-0x7a}`</span><span class="op" id="7782304">}</span><span class="op" id="7782305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782308">{</span><span class="string" id="7782309">`[^[:lower:]]`</span><span class="op" id="7782323">,</span>&nbsp;<span class="string" id="7782325">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7782353">}</span><span class="op" id="7782354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782357">{</span><span class="string" id="7782358">`[[:^lower:]]`</span><span class="op" id="7782372">,</span>&nbsp;<span class="string" id="7782374">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7782402">}</span><span class="op" id="7782403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782406">{</span><span class="string" id="7782407">`(?i)[[:lower:]]`</span><span class="op" id="7782424">,</span>&nbsp;<span class="string" id="7782426">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7782464">}</span><span class="op" id="7782465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782468">{</span><span class="string" id="7782469">`(?i)[a-z]`</span><span class="op" id="7782480">,</span>&nbsp;<span class="string" id="7782482">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7782520">}</span><span class="op" id="7782521">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782524">{</span><span class="string" id="7782525">`(?i)[^[:lower:]]`</span><span class="op" id="7782543">,</span>&nbsp;<span class="string" id="7782545">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7782609">}</span><span class="op" id="7782610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782613">{</span><span class="string" id="7782614">`(?i)[[:^lower:]]`</span><span class="op" id="7782632">,</span>&nbsp;<span class="string" id="7782634">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7782698">}</span><span class="op" id="7782699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782702">{</span><span class="string" id="7782703">`\d`</span><span class="op" id="7782707">,</span>&nbsp;<span class="string" id="7782709">`cc{0x30-0x39}`</span><span class="op" id="7782724">}</span><span class="op" id="7782725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782728">{</span><span class="string" id="7782729">`\D`</span><span class="op" id="7782733">,</span>&nbsp;<span class="string" id="7782735">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="7782763">}</span><span class="op" id="7782764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782767">{</span><span class="string" id="7782768">`\s`</span><span class="op" id="7782772">,</span>&nbsp;<span class="string" id="7782774">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="7782800">}</span><span class="op" id="7782801">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782804">{</span><span class="string" id="7782805">`\S`</span><span class="op" id="7782809">,</span>&nbsp;<span class="string" id="7782811">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="7782851">}</span><span class="op" id="7782852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782855">{</span><span class="string" id="7782856">`\w`</span><span class="op" id="7782860">,</span>&nbsp;<span class="string" id="7782862">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="7782902">}</span><span class="op" id="7782903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782906">{</span><span class="string" id="7782907">`\W`</span><span class="op" id="7782911">,</span>&nbsp;<span class="string" id="7782913">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7782966">}</span><span class="op" id="7782967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7782970">{</span><span class="string" id="7782971">`(?i)\w`</span><span class="op" id="7782979">,</span>&nbsp;<span class="string" id="7782981">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7783034">}</span><span class="op" id="7783035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783038">{</span><span class="string" id="7783039">`(?i)\W`</span><span class="op" id="7783047">,</span>&nbsp;<span class="string" id="7783049">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7783128">}</span><span class="op" id="7783129">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783132">{</span><span class="string" id="7783133">`[^\\]`</span><span class="op" id="7783140">,</span>&nbsp;<span class="string" id="7783142">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="7783170">}</span><span class="op" id="7783171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7783174">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7783218">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783265">{</span><span class="string" id="7783266">`\p{Braille}`</span><span class="op" id="7783279">,</span>&nbsp;<span class="string" id="7783281">`cc{0x2800-0x28ff}`</span><span class="op" id="7783300">}</span><span class="op" id="7783301">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783304">{</span><span class="string" id="7783305">`\P{Braille}`</span><span class="op" id="7783318">,</span>&nbsp;<span class="string" id="7783320">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7783352">}</span><span class="op" id="7783353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783356">{</span><span class="string" id="7783357">`\p{^Braille}`</span><span class="op" id="7783371">,</span>&nbsp;<span class="string" id="7783373">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7783405">}</span><span class="op" id="7783406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783409">{</span><span class="string" id="7783410">`\P{^Braille}`</span><span class="op" id="7783424">,</span>&nbsp;<span class="string" id="7783426">`cc{0x2800-0x28ff}`</span><span class="op" id="7783445">}</span><span class="op" id="7783446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783449">{</span><span class="string" id="7783450">`\pZ`</span><span class="op" id="7783455">,</span>&nbsp;<span class="string" id="7783457">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7783528">}</span><span class="op" id="7783529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783532">{</span><span class="string" id="7783533">`[\p{Braille}]`</span><span class="op" id="7783548">,</span>&nbsp;<span class="string" id="7783550">`cc{0x2800-0x28ff}`</span><span class="op" id="7783569">}</span><span class="op" id="7783570">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783573">{</span><span class="string" id="7783574">`[\P{Braille}]`</span><span class="op" id="7783589">,</span>&nbsp;<span class="string" id="7783591">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7783623">}</span><span class="op" id="7783624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783627">{</span><span class="string" id="7783628">`[\p{^Braille}]`</span><span class="op" id="7783644">,</span>&nbsp;<span class="string" id="7783646">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7783678">}</span><span class="op" id="7783679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783682">{</span><span class="string" id="7783683">`[\P{^Braille}]`</span><span class="op" id="7783699">,</span>&nbsp;<span class="string" id="7783701">`cc{0x2800-0x28ff}`</span><span class="op" id="7783720">}</span><span class="op" id="7783721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783724">{</span><span class="string" id="7783725">`[\pZ]`</span><span class="op" id="7783732">,</span>&nbsp;<span class="string" id="7783734">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7783805">}</span><span class="op" id="7783806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783809">{</span><span class="string" id="7783810">`\p{Lu}`</span><span class="op" id="7783818">,</span>&nbsp;<span class="ident" id="7783820">mkCharClass</span><span class="op" id="7783831">(</span><span class="ident" id="7783832">unicode</span><span class="op" id="7783839">.</span><span class="ident" id="7783840">IsUpper</span><span class="op" id="7783847">)</span><span class="op" id="7783848">}</span><span class="op" id="7783849">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783852">{</span><span class="string" id="7783853">`[\p{Lu}]`</span><span class="op" id="7783863">,</span>&nbsp;<span class="ident" id="7783865">mkCharClass</span><span class="op" id="7783876">(</span><span class="ident" id="7783877">unicode</span><span class="op" id="7783884">.</span><span class="ident" id="7783885">IsUpper</span><span class="op" id="7783892">)</span><span class="op" id="7783893">}</span><span class="op" id="7783894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783897">{</span><span class="string" id="7783898">`(?i)[\p{Lu}]`</span><span class="op" id="7783912">,</span>&nbsp;<span class="ident" id="7783914">mkCharClass</span><span class="op" id="7783925">(</span><span class="ident" id="7783926">isUpperFold</span><span class="op" id="7783937">)</span><span class="op" id="7783938">}</span><span class="op" id="7783939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783942">{</span><span class="string" id="7783943">`\p{Any}`</span><span class="op" id="7783952">,</span>&nbsp;<span class="string" id="7783954">`dot{}`</span><span class="op" id="7783961">}</span><span class="op" id="7783962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7783965">{</span><span class="string" id="7783966">`\p{^Any}`</span><span class="op" id="7783976">,</span>&nbsp;<span class="string" id="7783978">`cc{}`</span><span class="op" id="7783984">}</span><span class="op" id="7783985">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7783989">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784005">{</span><span class="string" id="7784006">`[\012-\234]\141`</span><span class="op" id="7784023">,</span>&nbsp;<span class="string" id="7784025">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="7784050">}</span><span class="op" id="7784051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784054">{</span><span class="string" id="7784055">`[\x{41}-\x7a]\x61`</span><span class="op" id="7784074">,</span>&nbsp;<span class="string" id="7784076">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="7784102">}</span><span class="op" id="7784103">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7784107">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784149">{</span><span class="string" id="7784150">`a{,2}`</span><span class="op" id="7784157">,</span>&nbsp;<span class="string" id="7784159">`str{a{,2}}`</span><span class="op" id="7784171">}</span><span class="op" id="7784172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784175">{</span><span class="string" id="7784176">`\.\^\$\\`</span><span class="op" id="7784186">,</span>&nbsp;<span class="string" id="7784188">`str{.^$\}`</span><span class="op" id="7784199">}</span><span class="op" id="7784200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784203">{</span><span class="string" id="7784204">`[a-zABC]`</span><span class="op" id="7784214">,</span>&nbsp;<span class="string" id="7784216">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="7784241">}</span><span class="op" id="7784242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784245">{</span><span class="string" id="7784246">`[^a]`</span><span class="op" id="7784252">,</span>&nbsp;<span class="string" id="7784254">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7784282">}</span><span class="op" id="7784283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784286">{</span><span class="string" id="7784287">`[α-ε☺]`</span><span class="op" id="7784299">,</span>&nbsp;<span class="string" id="7784301">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="7784325">}</span><span class="op" id="7784326">,</span>&nbsp;<span class="comment" id="7784328">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784338">{</span><span class="string" id="7784339">`a*{`</span><span class="op" id="7784344">,</span>&nbsp;<span class="string" id="7784346">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="7784371">}</span><span class="op" id="7784372">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7784376">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784397">{</span><span class="string" id="7784398">`(?:ab)*`</span><span class="op" id="7784407">,</span>&nbsp;<span class="string" id="7784409">`star{str{ab}}`</span><span class="op" id="7784424">}</span><span class="op" id="7784425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784428">{</span><span class="string" id="7784429">`(ab)*`</span><span class="op" id="7784436">,</span>&nbsp;<span class="string" id="7784438">`star{cap{str{ab}}}`</span><span class="op" id="7784458">}</span><span class="op" id="7784459">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784462">{</span><span class="string" id="7784463">`ab|cd`</span><span class="op" id="7784470">,</span>&nbsp;<span class="string" id="7784472">`alt{str{ab}str{cd}}`</span><span class="op" id="7784493">}</span><span class="op" id="7784494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784497">{</span><span class="string" id="7784498">`a(b|c)d`</span><span class="op" id="7784507">,</span>&nbsp;<span class="string" id="7784509">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="7784546">}</span><span class="op" id="7784547">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7784551">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784572">{</span><span class="string" id="7784573">`(?:a)`</span><span class="op" id="7784580">,</span>&nbsp;<span class="string" id="7784582">`lit{a}`</span><span class="op" id="7784590">}</span><span class="op" id="7784591">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784594">{</span><span class="string" id="7784595">`(?:ab)(?:cd)`</span><span class="op" id="7784609">,</span>&nbsp;<span class="string" id="7784611">`str{abcd}`</span><span class="op" id="7784622">}</span><span class="op" id="7784623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784626">{</span><span class="string" id="7784627">`(?:a+b+)(?:c+d+)`</span><span class="op" id="7784645">,</span>&nbsp;<span class="string" id="7784647">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7784702">}</span><span class="op" id="7784703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784706">{</span><span class="string" id="7784707">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="7784728">,</span>&nbsp;<span class="string" id="7784730">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7784785">}</span><span class="op" id="7784786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784789">{</span><span class="string" id="7784790">`(?:a|b)|(?:c|d)`</span><span class="op" id="7784807">,</span>&nbsp;<span class="string" id="7784809">`cc{0x61-0x64}`</span><span class="op" id="7784824">}</span><span class="op" id="7784825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784828">{</span><span class="string" id="7784829">`a|.`</span><span class="op" id="7784834">,</span>&nbsp;<span class="string" id="7784836">`dot{}`</span><span class="op" id="7784843">}</span><span class="op" id="7784844">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784847">{</span><span class="string" id="7784848">`.|a`</span><span class="op" id="7784853">,</span>&nbsp;<span class="string" id="7784855">`dot{}`</span><span class="op" id="7784862">}</span><span class="op" id="7784863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784866">{</span><span class="string" id="7784867">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="7784894">,</span>&nbsp;<span class="string" id="7784896">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="7784946">}</span><span class="op" id="7784947">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7784950">{</span><span class="string" id="7784951">`(?:[abc]|A|Z)`</span><span class="op" id="7784966">,</span>&nbsp;<span class="string" id="7784968">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="7784993">}</span><span class="op" id="7784994">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7784998">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785028">{</span><span class="string" id="7785029">`\Q+|*?{[\E`</span><span class="op" id="7785041">,</span>&nbsp;<span class="string" id="7785043">`str{+|*?{[}`</span><span class="op" id="7785056">}</span><span class="op" id="7785057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785060">{</span><span class="string" id="7785061">`\Q+\E+`</span><span class="op" id="7785069">,</span>&nbsp;<span class="string" id="7785071">`plus{lit{+}}`</span><span class="op" id="7785085">}</span><span class="op" id="7785086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785089">{</span><span class="string" id="7785090">`\Q\\E`</span><span class="op" id="7785097">,</span>&nbsp;<span class="string" id="7785099">`lit{\}`</span><span class="op" id="7785107">}</span><span class="op" id="7785108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785111">{</span><span class="string" id="7785112">`\Q\\\E`</span><span class="op" id="7785120">,</span>&nbsp;<span class="string" id="7785122">`str{\\}`</span><span class="op" id="7785131">}</span><span class="op" id="7785132">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785136">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785160">{</span><span class="string" id="7785161">`(?m)^`</span><span class="op" id="7785168">,</span>&nbsp;<span class="string" id="7785170">`bol{}`</span><span class="op" id="7785177">}</span><span class="op" id="7785178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785181">{</span><span class="string" id="7785182">`(?m)$`</span><span class="op" id="7785189">,</span>&nbsp;<span class="string" id="7785191">`eol{}`</span><span class="op" id="7785198">}</span><span class="op" id="7785199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785202">{</span><span class="string" id="7785203">`(?-m)^`</span><span class="op" id="7785211">,</span>&nbsp;<span class="string" id="7785213">`bot{}`</span><span class="op" id="7785220">}</span><span class="op" id="7785221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785224">{</span><span class="string" id="7785225">`(?-m)$`</span><span class="op" id="7785233">,</span>&nbsp;<span class="string" id="7785235">`eot{}`</span><span class="op" id="7785242">}</span><span class="op" id="7785243">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785246">{</span><span class="string" id="7785247">`(?m)\A`</span><span class="op" id="7785255">,</span>&nbsp;<span class="string" id="7785257">`bot{}`</span><span class="op" id="7785264">}</span><span class="op" id="7785265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785268">{</span><span class="string" id="7785269">`(?m)\z`</span><span class="op" id="7785277">,</span>&nbsp;<span class="string" id="7785279">`eot{\z}`</span><span class="op" id="7785288">}</span><span class="op" id="7785289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785292">{</span><span class="string" id="7785293">`(?-m)\A`</span><span class="op" id="7785302">,</span>&nbsp;<span class="string" id="7785304">`bot{}`</span><span class="op" id="7785311">}</span><span class="op" id="7785312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785315">{</span><span class="string" id="7785316">`(?-m)\z`</span><span class="op" id="7785325">,</span>&nbsp;<span class="string" id="7785327">`eot{\z}`</span><span class="op" id="7785336">}</span><span class="op" id="7785337">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785341">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785365">{</span><span class="string" id="7785366">`(?P&lt;name&gt;a)`</span><span class="op" id="7785379">,</span>&nbsp;<span class="string" id="7785381">`cap{name:lit{a}}`</span><span class="op" id="7785399">}</span><span class="op" id="7785400">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785404">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785429">{</span><span class="string" id="7785430">`[Aa]`</span><span class="op" id="7785436">,</span>&nbsp;<span class="string" id="7785438">`litfold{A}`</span><span class="op" id="7785450">}</span><span class="op" id="7785451">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785454">{</span><span class="string" id="7785455">`[\x{100}\x{101}]`</span><span class="op" id="7785473">,</span>&nbsp;<span class="string" id="7785475">`litfold{Ā}`</span><span class="op" id="7785488">}</span><span class="op" id="7785489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785492">{</span><span class="string" id="7785493">`[Δδ]`</span><span class="op" id="7785501">,</span>&nbsp;<span class="string" id="7785503">`litfold{Δ}`</span><span class="op" id="7785516">}</span><span class="op" id="7785517">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785521">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785533">{</span><span class="string" id="7785534">`abcde`</span><span class="op" id="7785541">,</span>&nbsp;<span class="string" id="7785543">`str{abcde}`</span><span class="op" id="7785555">}</span><span class="op" id="7785556">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785559">{</span><span class="string" id="7785560">`[Aa][Bb]cd`</span><span class="op" id="7785572">,</span>&nbsp;<span class="string" id="7785574">`cat{strfold{AB}str{cd}}`</span><span class="op" id="7785599">}</span><span class="op" id="7785600">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785604">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785619">{</span><span class="string" id="7785620">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7785641">,</span>&nbsp;<span class="string" id="7785643">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7785722">}</span><span class="op" id="7785723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785726">{</span><span class="string" id="7785727">`ax+y|ax+z|ay+w`</span><span class="op" id="7785743">,</span>&nbsp;<span class="string" id="7785745">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="7785816">}</span><span class="op" id="7785817">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7785821">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785836">{</span><span class="string" id="7785837">`(?:.)`</span><span class="op" id="7785844">,</span>&nbsp;<span class="string" id="7785846">`dot{}`</span><span class="op" id="7785853">}</span><span class="op" id="7785854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785857">{</span><span class="string" id="7785858">`(?:x|(?:xa))`</span><span class="op" id="7785872">,</span>&nbsp;<span class="string" id="7785874">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="7785903">}</span><span class="op" id="7785904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785907">{</span><span class="string" id="7785908">`(?:.|(?:.a))`</span><span class="op" id="7785922">,</span>&nbsp;<span class="string" id="7785924">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="7785952">}</span><span class="op" id="7785953">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7785956">{</span><span class="string" id="7785957">`(?:A(?:A|a))`</span><span class="op" id="7785971">,</span>&nbsp;<span class="string" id="7785973">`cat{lit{A}litfold{A}}`</span><span class="op" id="7785996">}</span><span class="op" id="7785997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786000">{</span><span class="string" id="7786001">`(?:A|a)`</span><span class="op" id="7786010">,</span>&nbsp;<span class="string" id="7786012">`litfold{A}`</span><span class="op" id="7786024">}</span><span class="op" id="7786025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786028">{</span><span class="string" id="7786029">`A|(?:A|a)`</span><span class="op" id="7786040">,</span>&nbsp;<span class="string" id="7786042">`litfold{A}`</span><span class="op" id="7786054">}</span><span class="op" id="7786055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786058">{</span><span class="string" id="7786059">`(?s).`</span><span class="op" id="7786066">,</span>&nbsp;<span class="string" id="7786068">`dot{}`</span><span class="op" id="7786075">}</span><span class="op" id="7786076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786079">{</span><span class="string" id="7786080">`(?-s).`</span><span class="op" id="7786088">,</span>&nbsp;<span class="string" id="7786090">`dnl{}`</span><span class="op" id="7786097">}</span><span class="op" id="7786098">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786101">{</span><span class="string" id="7786102">`(?:(?:^).)`</span><span class="op" id="7786114">,</span>&nbsp;<span class="string" id="7786116">`cat{bol{}dot{}}`</span><span class="op" id="7786133">}</span><span class="op" id="7786134">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786137">{</span><span class="string" id="7786138">`(?-s)(?:(?:^).)`</span><span class="op" id="7786155">,</span>&nbsp;<span class="string" id="7786157">`cat{bol{}dnl{}}`</span><span class="op" id="7786174">}</span><span class="op" id="7786175">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7786179">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786200">{</span><span class="string" id="7786201">`abc|abd`</span><span class="op" id="7786210">,</span>&nbsp;<span class="string" id="7786212">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7786239">}</span><span class="op" id="7786240">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786243">{</span><span class="string" id="7786244">`a(?:b)c|abd`</span><span class="op" id="7786257">,</span>&nbsp;<span class="string" id="7786259">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7786286">}</span><span class="op" id="7786287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786290">{</span><span class="string" id="7786291">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7786312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786316">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="7786370">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786375">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7786403">}</span><span class="op" id="7786404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786407">{</span><span class="string" id="7786408">`abc|x|abd`</span><span class="op" id="7786419">,</span>&nbsp;<span class="string" id="7786421">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="7786450">}</span><span class="op" id="7786451">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786454">{</span><span class="string" id="7786455">`(?i)abc|ABD`</span><span class="op" id="7786468">,</span>&nbsp;<span class="string" id="7786470">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="7786511">}</span><span class="op" id="7786512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786515">{</span><span class="string" id="7786516">`[ab]c|[ab]d`</span><span class="op" id="7786529">,</span>&nbsp;<span class="string" id="7786531">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="7786564">}</span><span class="op" id="7786565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786568">{</span><span class="string" id="7786569">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="7786592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786596">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="7786635">}</span><span class="op" id="7786636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786639">{</span><span class="string" id="7786640">`x{2}|x{2}[0-9]`</span><span class="op" id="7786656">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786660">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="7786705">}</span><span class="op" id="7786706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786709">{</span><span class="string" id="7786710">`x{2}y|x{2}[0-9]y`</span><span class="op" id="7786728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7786732">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="7786789">}</span><span class="op" id="7786790">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7786794">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786817">{</span><span class="string" id="7786818">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="7786868">,</span>&nbsp;<span class="string" id="7786870">``</span><span class="op" id="7786872">}</span><span class="op" id="7786873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7786876">{</span><span class="string" id="7786877">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="7786930">,</span>&nbsp;<span class="string" id="7786932">``</span><span class="op" id="7786934">}</span><span class="op" id="7786935">,</span><br>
<span class="lineno"></span><span class="op" id="7786937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7786940">const</span>&nbsp;<span class="ident" id="7786946">testFlags</span>&nbsp;<span class="op" id="7786956">=</span>&nbsp;<span class="ident" id="7786958">MatchNL</span>&nbsp;<span class="op" id="7786966">|</span>&nbsp;<span class="ident" id="7786968">PerlX</span>&nbsp;<span class="op" id="7786974">|</span>&nbsp;<span class="ident" id="7786976">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="7786991">func</span>&nbsp;<span class="ident" id="7786996">TestParseSimple</span><span class="op" id="7787011">(</span><span class="ident" id="7787012">t</span>&nbsp;<span class="op" id="7787014">*</span><span class="ident" id="7787015">testing</span><span class="op" id="7787022">.</span><span class="ident" id="7787023">T</span><span class="op" id="7787024">)</span>&nbsp;<span class="op" id="7787026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787029">testParseDump</span><span class="op" id="7787042">(</span><span class="ident" id="7787043">t</span><span class="op" id="7787044">,</span>&nbsp;<span class="ident" id="7787046">parseTests</span><span class="op" id="7787056">,</span>&nbsp;<span class="ident" id="7787058">testFlags</span><span class="op" id="7787067">)</span><br>
<span class="lineno"></span><span class="op" id="7787069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7787072">var</span>&nbsp;<span class="ident" id="7787076">foldcaseTests</span>&nbsp;<span class="op" id="7787090">=</span>&nbsp;<span class="op" id="7787092">[</span><span class="op" id="7787093">]</span><span class="ident" id="7787094">parseTest</span><span class="op" id="7787103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787106">{</span><span class="string" id="7787107">`AbCdE`</span><span class="op" id="7787114">,</span>&nbsp;<span class="string" id="7787116">`strfold{ABCDE}`</span><span class="op" id="7787132">}</span><span class="op" id="7787133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787136">{</span><span class="string" id="7787137">`[Aa]`</span><span class="op" id="7787143">,</span>&nbsp;<span class="string" id="7787145">`litfold{A}`</span><span class="op" id="7787157">}</span><span class="op" id="7787158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787161">{</span><span class="string" id="7787162">`a`</span><span class="op" id="7787165">,</span>&nbsp;<span class="string" id="7787167">`litfold{A}`</span><span class="op" id="7787179">}</span><span class="op" id="7787180">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7787184">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7787253">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787301">{</span><span class="string" id="7787302">`A[F-g]`</span><span class="op" id="7787310">,</span>&nbsp;<span class="string" id="7787312">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="7787355">}</span><span class="op" id="7787356">,</span>&nbsp;<span class="comment" id="7787358">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787375">{</span><span class="string" id="7787376">`[[:upper:]]`</span><span class="op" id="7787389">,</span>&nbsp;<span class="string" id="7787391">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7787429">}</span><span class="op" id="7787430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787433">{</span><span class="string" id="7787434">`[[:lower:]]`</span><span class="op" id="7787447">,</span>&nbsp;<span class="string" id="7787449">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7787487">}</span><span class="op" id="7787488">,</span><br>
<span class="lineno">225</span><span class="op" id="7787490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7787493">func</span>&nbsp;<span class="ident" id="7787498">TestParseFoldCase</span><span class="op" id="7787515">(</span><span class="ident" id="7787516">t</span>&nbsp;<span class="op" id="7787518">*</span><span class="ident" id="7787519">testing</span><span class="op" id="7787526">.</span><span class="ident" id="7787527">T</span><span class="op" id="7787528">)</span>&nbsp;<span class="op" id="7787530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787533">testParseDump</span><span class="op" id="7787546">(</span><span class="ident" id="7787547">t</span><span class="op" id="7787548">,</span>&nbsp;<span class="ident" id="7787550">foldcaseTests</span><span class="op" id="7787563">,</span>&nbsp;<span class="ident" id="7787565">FoldCase</span><span class="op" id="7787573">)</span><br>
<span class="lineno"></span><span class="op" id="7787575">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7787578">var</span>&nbsp;<span class="ident" id="7787582">literalTests</span>&nbsp;<span class="op" id="7787595">=</span>&nbsp;<span class="op" id="7787597">[</span><span class="op" id="7787598">]</span><span class="ident" id="7787599">parseTest</span><span class="op" id="7787608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787611">{</span><span class="string" id="7787612">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="7787634">,</span>&nbsp;<span class="string" id="7787636">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="7787663">}</span><span class="op" id="7787664">,</span><br>
<span class="lineno"></span><span class="op" id="7787666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7787669">func</span>&nbsp;<span class="ident" id="7787674">TestParseLiteral</span><span class="op" id="7787690">(</span><span class="ident" id="7787691">t</span>&nbsp;<span class="op" id="7787693">*</span><span class="ident" id="7787694">testing</span><span class="op" id="7787701">.</span><span class="ident" id="7787702">T</span><span class="op" id="7787703">)</span>&nbsp;<span class="op" id="7787705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787708">testParseDump</span><span class="op" id="7787721">(</span><span class="ident" id="7787722">t</span><span class="op" id="7787723">,</span>&nbsp;<span class="ident" id="7787725">literalTests</span><span class="op" id="7787737">,</span>&nbsp;<span class="ident" id="7787739">Literal</span><span class="op" id="7787746">)</span><br>
<span class="lineno"></span><span class="op" id="7787748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7787751">var</span>&nbsp;<span class="ident" id="7787755">matchnlTests</span>&nbsp;<span class="op" id="7787768">=</span>&nbsp;<span class="op" id="7787770">[</span><span class="op" id="7787771">]</span><span class="ident" id="7787772">parseTest</span><span class="op" id="7787781">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787784">{</span><span class="string" id="7787785">`.`</span><span class="op" id="7787788">,</span>&nbsp;<span class="string" id="7787790">`dot{}`</span><span class="op" id="7787797">}</span><span class="op" id="7787798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787801">{</span><span class="string" id="7787802">&#34;\n&#34;</span><span class="op" id="7787806">,</span>&nbsp;<span class="string" id="7787808">&#34;lit{\n}&#34;</span><span class="op" id="7787817">}</span><span class="op" id="7787818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787821">{</span><span class="string" id="7787822">`[^a]`</span><span class="op" id="7787828">,</span>&nbsp;<span class="string" id="7787830">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7787858">}</span><span class="op" id="7787859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7787862">{</span><span class="string" id="7787863">`[a\n]`</span><span class="op" id="7787870">,</span>&nbsp;<span class="string" id="7787872">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7787886">}</span><span class="op" id="7787887">,</span><br>
<span class="lineno"></span><span class="op" id="7787889">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="7787892">func</span>&nbsp;<span class="ident" id="7787897">TestParseMatchNL</span><span class="op" id="7787913">(</span><span class="ident" id="7787914">t</span>&nbsp;<span class="op" id="7787916">*</span><span class="ident" id="7787917">testing</span><span class="op" id="7787924">.</span><span class="ident" id="7787925">T</span><span class="op" id="7787926">)</span>&nbsp;<span class="op" id="7787928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7787931">testParseDump</span><span class="op" id="7787944">(</span><span class="ident" id="7787945">t</span><span class="op" id="7787946">,</span>&nbsp;<span class="ident" id="7787948">matchnlTests</span><span class="op" id="7787960">,</span>&nbsp;<span class="ident" id="7787962">MatchNL</span><span class="op" id="7787969">)</span><br>
<span class="lineno"></span><span class="op" id="7787971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7787974">var</span>&nbsp;<span class="ident" id="7787978">nomatchnlTests</span>&nbsp;<span class="op" id="7787993">=</span>&nbsp;<span class="op" id="7787995">[</span><span class="op" id="7787996">]</span><span class="ident" id="7787997">parseTest</span><span class="op" id="7788006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788009">{</span><span class="string" id="7788010">`.`</span><span class="op" id="7788013">,</span>&nbsp;<span class="string" id="7788015">`dnl{}`</span><span class="op" id="7788022">}</span><span class="op" id="7788023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788026">{</span><span class="string" id="7788027">&#34;\n&#34;</span><span class="op" id="7788031">,</span>&nbsp;<span class="string" id="7788033">&#34;lit{\n}&#34;</span><span class="op" id="7788042">}</span><span class="op" id="7788043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788046">{</span><span class="string" id="7788047">`[^a]`</span><span class="op" id="7788053">,</span>&nbsp;<span class="string" id="7788055">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7788091">}</span><span class="op" id="7788092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788095">{</span><span class="string" id="7788096">`[a\n]`</span><span class="op" id="7788103">,</span>&nbsp;<span class="string" id="7788105">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7788119">}</span><span class="op" id="7788120">,</span><br>
<span class="lineno">255</span><span class="op" id="7788122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7788125">func</span>&nbsp;<span class="ident" id="7788130">TestParseNoMatchNL</span><span class="op" id="7788148">(</span><span class="ident" id="7788149">t</span>&nbsp;<span class="op" id="7788151">*</span><span class="ident" id="7788152">testing</span><span class="op" id="7788159">.</span><span class="ident" id="7788160">T</span><span class="op" id="7788161">)</span>&nbsp;<span class="op" id="7788163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788166">testParseDump</span><span class="op" id="7788179">(</span><span class="ident" id="7788180">t</span><span class="op" id="7788181">,</span>&nbsp;<span class="ident" id="7788183">nomatchnlTests</span><span class="op" id="7788197">,</span>&nbsp;<span class="num" id="7788199">0</span><span class="op" id="7788200">)</span><br>
<span class="lineno"></span><span class="op" id="7788202">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="7788205">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="7788228">func</span>&nbsp;<span class="ident" id="7788233">testParseDump</span><span class="op" id="7788246">(</span><span class="ident" id="7788247">t</span>&nbsp;<span class="op" id="7788249">*</span><span class="ident" id="7788250">testing</span><span class="op" id="7788257">.</span><span class="ident" id="7788258">T</span><span class="op" id="7788259">,</span>&nbsp;<span class="ident" id="7788261">tests</span>&nbsp;<span class="op" id="7788267">[</span><span class="op" id="7788268">]</span><span class="ident" id="7788269">parseTest</span><span class="op" id="7788278">,</span>&nbsp;<span class="ident" id="7788280">flags</span>&nbsp;<span class="ident" id="7788286">Flags</span><span class="op" id="7788291">)</span>&nbsp;<span class="op" id="7788293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788296">for</span>&nbsp;<span class="ident" id="7788300">_</span><span class="op" id="7788301">,</span>&nbsp;<span class="ident" id="7788303">tt</span>&nbsp;<span class="op" id="7788306">:=</span>&nbsp;<span class="keyword" id="7788309">range</span>&nbsp;<span class="ident" id="7788315">tests</span>&nbsp;<span class="op" id="7788321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788325">re</span><span class="op" id="7788327">,</span>&nbsp;<span class="ident" id="7788329">err</span>&nbsp;<span class="op" id="7788333">:=</span>&nbsp;<span class="ident" id="7788336">Parse</span><span class="op" id="7788341">(</span><span class="ident" id="7788342">tt</span><span class="op" id="7788344">.</span><span class="ident" id="7788345">Regexp</span><span class="op" id="7788351">,</span>&nbsp;<span class="ident" id="7788353">flags</span><span class="op" id="7788358">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788362">if</span>&nbsp;<span class="ident" id="7788365">err</span>&nbsp;<span class="op" id="7788369">!=</span>&nbsp;<span class="ident" id="7788372">nil</span>&nbsp;<span class="op" id="7788376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788381">t</span><span class="op" id="7788382">.</span><span class="ident" id="7788383">Errorf</span><span class="op" id="7788389">(</span><span class="string" id="7788390">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7788406">,</span>&nbsp;<span class="ident" id="7788408">tt</span><span class="op" id="7788410">.</span><span class="ident" id="7788411">Regexp</span><span class="op" id="7788417">,</span>&nbsp;<span class="ident" id="7788419">err</span><span class="op" id="7788422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788427">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788442">if</span>&nbsp;<span class="ident" id="7788445">tt</span><span class="op" id="7788447">.</span><span class="ident" id="7788448">Dump</span>&nbsp;<span class="op" id="7788453">==</span>&nbsp;<span class="string" id="7788456">&#34;&#34;</span>&nbsp;<span class="op" id="7788459">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7788464">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788507">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788522">d</span>&nbsp;<span class="op" id="7788524">:=</span>&nbsp;<span class="ident" id="7788527">dump</span><span class="op" id="7788531">(</span><span class="ident" id="7788532">re</span><span class="op" id="7788534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788538">if</span>&nbsp;<span class="ident" id="7788541">d</span>&nbsp;<span class="op" id="7788543">!=</span>&nbsp;<span class="ident" id="7788546">tt</span><span class="op" id="7788548">.</span><span class="ident" id="7788549">Dump</span>&nbsp;<span class="op" id="7788554">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788559">t</span><span class="op" id="7788560">.</span><span class="ident" id="7788561">Errorf</span><span class="op" id="7788567">(</span><span class="string" id="7788568">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7788602">,</span>&nbsp;<span class="ident" id="7788604">tt</span><span class="op" id="7788606">.</span><span class="ident" id="7788607">Regexp</span><span class="op" id="7788613">,</span>&nbsp;<span class="ident" id="7788615">d</span><span class="op" id="7788616">,</span>&nbsp;<span class="ident" id="7788618">tt</span><span class="op" id="7788620">.</span><span class="ident" id="7788621">Dump</span><span class="op" id="7788625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7788632">}</span><br>
<span class="lineno"></span><span class="op" id="7788634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="7788637">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="7788698">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="7788727">func</span>&nbsp;<span class="ident" id="7788732">dump</span><span class="op" id="7788736">(</span><span class="ident" id="7788737">re</span>&nbsp;<span class="op" id="7788740">*</span><span class="ident" id="7788741">Regexp</span><span class="op" id="7788747">)</span>&nbsp;<span class="builtintype" id="7788749">string</span>&nbsp;<span class="op" id="7788756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788759">var</span>&nbsp;<span class="ident" id="7788763">b</span>&nbsp;<span class="ident" id="7788765">bytes</span><span class="op" id="7788770">.</span><span class="ident" id="7788771">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788779">dumpRegexp</span><span class="op" id="7788789">(</span><span class="op" id="7788790">&amp;</span><span class="ident" id="7788791">b</span><span class="op" id="7788792">,</span>&nbsp;<span class="ident" id="7788794">re</span><span class="op" id="7788796">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7788799">return</span>&nbsp;<span class="ident" id="7788806">b</span><span class="op" id="7788807">.</span><span class="ident" id="7788808">String</span><span class="op" id="7788814">(</span><span class="op" id="7788815">)</span><br>
<span class="lineno"></span><span class="op" id="7788817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7788820">var</span>&nbsp;<span class="ident" id="7788824">opNames</span>&nbsp;<span class="op" id="7788832">=</span>&nbsp;<span class="op" id="7788834">[</span><span class="op" id="7788835">]</span><span class="builtintype" id="7788836">string</span><span class="op" id="7788842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788845">OpNoMatch</span><span class="op" id="7788854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7788863">&#34;no&#34;</span><span class="op" id="7788867">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788870">OpEmptyMatch</span><span class="op" id="7788882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7788888">&#34;emp&#34;</span><span class="op" id="7788893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788896">OpLiteral</span><span class="op" id="7788905">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7788914">&#34;lit&#34;</span><span class="op" id="7788919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788922">OpCharClass</span><span class="op" id="7788933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7788940">&#34;cc&#34;</span><span class="op" id="7788944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788947">OpAnyCharNotNL</span><span class="op" id="7788961">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7788965">&#34;dnl&#34;</span><span class="op" id="7788970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788973">OpAnyChar</span><span class="op" id="7788982">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7788991">&#34;dot&#34;</span><span class="op" id="7788996">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7788999">OpBeginLine</span><span class="op" id="7789010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789017">&#34;bol&#34;</span><span class="op" id="7789022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789025">OpEndLine</span><span class="op" id="7789034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789043">&#34;eol&#34;</span><span class="op" id="7789048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789051">OpBeginText</span><span class="op" id="7789062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789069">&#34;bot&#34;</span><span class="op" id="7789074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789077">OpEndText</span><span class="op" id="7789086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789095">&#34;eot&#34;</span><span class="op" id="7789100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789103">OpWordBoundary</span><span class="op" id="7789117">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7789121">&#34;wb&#34;</span><span class="op" id="7789125">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789128">OpNoWordBoundary</span><span class="op" id="7789144">:</span>&nbsp;<span class="string" id="7789146">&#34;nwb&#34;</span><span class="op" id="7789151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789154">OpCapture</span><span class="op" id="7789163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789172">&#34;cap&#34;</span><span class="op" id="7789177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789180">OpStar</span><span class="op" id="7789186">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789198">&#34;star&#34;</span><span class="op" id="7789204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789207">OpPlus</span><span class="op" id="7789213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789225">&#34;plus&#34;</span><span class="op" id="7789231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789234">OpQuest</span><span class="op" id="7789241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789252">&#34;que&#34;</span><span class="op" id="7789257">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789260">OpRepeat</span><span class="op" id="7789268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789278">&#34;rep&#34;</span><span class="op" id="7789283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789286">OpConcat</span><span class="op" id="7789294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789304">&#34;cat&#34;</span><span class="op" id="7789309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789312">OpAlternate</span><span class="op" id="7789323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7789330">&#34;alt&#34;</span><span class="op" id="7789335">,</span><br>
<span class="lineno"></span><span class="op" id="7789337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="7789340">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="7789416">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="7789492">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="7789530">func</span>&nbsp;<span class="ident" id="7789535">dumpRegexp</span><span class="op" id="7789545">(</span><span class="ident" id="7789546">b</span>&nbsp;<span class="op" id="7789548">*</span><span class="ident" id="7789549">bytes</span><span class="op" id="7789554">.</span><span class="ident" id="7789555">Buffer</span><span class="op" id="7789561">,</span>&nbsp;<span class="ident" id="7789563">re</span>&nbsp;<span class="op" id="7789566">*</span><span class="ident" id="7789567">Regexp</span><span class="op" id="7789573">)</span>&nbsp;<span class="op" id="7789575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789578">if</span>&nbsp;<span class="builtintype" id="7789581">int</span><span class="op" id="7789584">(</span><span class="ident" id="7789585">re</span><span class="op" id="7789587">.</span><span class="ident" id="7789588">Op</span><span class="op" id="7789590">)</span>&nbsp;<span class="op" id="7789592">&gt;=</span>&nbsp;<span class="builtinfunc" id="7789595">len</span><span class="op" id="7789598">(</span><span class="ident" id="7789599">opNames</span><span class="op" id="7789606">)</span>&nbsp;<span class="op" id="7789608">||</span>&nbsp;<span class="ident" id="7789611">opNames</span><span class="op" id="7789618">[</span><span class="ident" id="7789619">re</span><span class="op" id="7789621">.</span><span class="ident" id="7789622">Op</span><span class="op" id="7789624">]</span>&nbsp;<span class="op" id="7789626">==</span>&nbsp;<span class="string" id="7789629">&#34;&#34;</span>&nbsp;<span class="op" id="7789632">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789636">fmt</span><span class="op" id="7789639">.</span><span class="ident" id="7789640">Fprintf</span><span class="op" id="7789647">(</span><span class="ident" id="7789648">b</span><span class="op" id="7789649">,</span>&nbsp;<span class="string" id="7789651">&#34;op%d&#34;</span><span class="op" id="7789657">,</span>&nbsp;<span class="ident" id="7789659">re</span><span class="op" id="7789661">.</span><span class="ident" id="7789662">Op</span><span class="op" id="7789664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789667">}</span>&nbsp;<span class="keyword" id="7789669">else</span>&nbsp;<span class="op" id="7789674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789678">switch</span>&nbsp;<span class="ident" id="7789685">re</span><span class="op" id="7789687">.</span><span class="ident" id="7789688">Op</span>&nbsp;<span class="op" id="7789691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789695">default</span><span class="op" id="7789702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789707">b</span><span class="op" id="7789708">.</span><span class="ident" id="7789709">WriteString</span><span class="op" id="7789720">(</span><span class="ident" id="7789721">opNames</span><span class="op" id="7789728">[</span><span class="ident" id="7789729">re</span><span class="op" id="7789731">.</span><span class="ident" id="7789732">Op</span><span class="op" id="7789734">]</span><span class="op" id="7789735">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789739">case</span>&nbsp;<span class="ident" id="7789744">OpStar</span><span class="op" id="7789750">,</span>&nbsp;<span class="ident" id="7789752">OpPlus</span><span class="op" id="7789758">,</span>&nbsp;<span class="ident" id="7789760">OpQuest</span><span class="op" id="7789767">,</span>&nbsp;<span class="ident" id="7789769">OpRepeat</span><span class="op" id="7789777">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789782">if</span>&nbsp;<span class="ident" id="7789785">re</span><span class="op" id="7789787">.</span><span class="ident" id="7789788">Flags</span><span class="op" id="7789793">&amp;</span><span class="ident" id="7789794">NonGreedy</span>&nbsp;<span class="op" id="7789804">!=</span>&nbsp;<span class="num" id="7789807">0</span>&nbsp;<span class="op" id="7789809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789815">b</span><span class="op" id="7789816">.</span><span class="ident" id="7789817">WriteByte</span><span class="op" id="7789826">(</span><span class="string" id="7789827">&#39;n&#39;</span><span class="op" id="7789830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789840">b</span><span class="op" id="7789841">.</span><span class="ident" id="7789842">WriteString</span><span class="op" id="7789853">(</span><span class="ident" id="7789854">opNames</span><span class="op" id="7789861">[</span><span class="ident" id="7789862">re</span><span class="op" id="7789864">.</span><span class="ident" id="7789865">Op</span><span class="op" id="7789867">]</span><span class="op" id="7789868">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789872">case</span>&nbsp;<span class="ident" id="7789877">OpLiteral</span><span class="op" id="7789886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789891">if</span>&nbsp;<span class="builtinfunc" id="7789894">len</span><span class="op" id="7789897">(</span><span class="ident" id="7789898">re</span><span class="op" id="7789900">.</span><span class="ident" id="7789901">Rune</span><span class="op" id="7789905">)</span>&nbsp;<span class="op" id="7789907">&gt;</span>&nbsp;<span class="num" id="7789909">1</span>&nbsp;<span class="op" id="7789911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789917">b</span><span class="op" id="7789918">.</span><span class="ident" id="7789919">WriteString</span><span class="op" id="7789930">(</span><span class="string" id="7789931">&#34;str&#34;</span><span class="op" id="7789936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789941">}</span>&nbsp;<span class="keyword" id="7789943">else</span>&nbsp;<span class="op" id="7789948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7789954">b</span><span class="op" id="7789955">.</span><span class="ident" id="7789956">WriteString</span><span class="op" id="7789967">(</span><span class="string" id="7789968">&#34;lit&#34;</span><span class="op" id="7789973">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7789978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7789983">if</span>&nbsp;<span class="ident" id="7789986">re</span><span class="op" id="7789988">.</span><span class="ident" id="7789989">Flags</span><span class="op" id="7789994">&amp;</span><span class="ident" id="7789995">FoldCase</span>&nbsp;<span class="op" id="7790004">!=</span>&nbsp;<span class="num" id="7790007">0</span>&nbsp;<span class="op" id="7790009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790015">for</span>&nbsp;<span class="ident" id="7790019">_</span><span class="op" id="7790020">,</span>&nbsp;<span class="ident" id="7790022">r</span>&nbsp;<span class="op" id="7790024">:=</span>&nbsp;<span class="keyword" id="7790027">range</span>&nbsp;<span class="ident" id="7790033">re</span><span class="op" id="7790035">.</span><span class="ident" id="7790036">Rune</span>&nbsp;<span class="op" id="7790041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790048">if</span>&nbsp;<span class="ident" id="7790051">unicode</span><span class="op" id="7790058">.</span><span class="ident" id="7790059">SimpleFold</span><span class="op" id="7790069">(</span><span class="ident" id="7790070">r</span><span class="op" id="7790071">)</span>&nbsp;<span class="op" id="7790073">!=</span>&nbsp;<span class="ident" id="7790076">r</span>&nbsp;<span class="op" id="7790078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790086">b</span><span class="op" id="7790087">.</span><span class="ident" id="7790088">WriteString</span><span class="op" id="7790099">(</span><span class="string" id="7790100">&#34;fold&#34;</span><span class="op" id="7790106">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790114">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790140">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790146">b</span><span class="op" id="7790147">.</span><span class="ident" id="7790148">WriteByte</span><span class="op" id="7790157">(</span><span class="string" id="7790158">&#39;{&#39;</span><span class="op" id="7790161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790164">switch</span>&nbsp;<span class="ident" id="7790171">re</span><span class="op" id="7790173">.</span><span class="ident" id="7790174">Op</span>&nbsp;<span class="op" id="7790177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790180">case</span>&nbsp;<span class="ident" id="7790185">OpEndText</span><span class="op" id="7790194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790198">if</span>&nbsp;<span class="ident" id="7790201">re</span><span class="op" id="7790203">.</span><span class="ident" id="7790204">Flags</span><span class="op" id="7790209">&amp;</span><span class="ident" id="7790210">WasDollar</span>&nbsp;<span class="op" id="7790220">==</span>&nbsp;<span class="num" id="7790223">0</span>&nbsp;<span class="op" id="7790225">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790230">b</span><span class="op" id="7790231">.</span><span class="ident" id="7790232">WriteString</span><span class="op" id="7790243">(</span><span class="string" id="7790244">`\z`</span><span class="op" id="7790248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790255">case</span>&nbsp;<span class="ident" id="7790260">OpLiteral</span><span class="op" id="7790269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790273">for</span>&nbsp;<span class="ident" id="7790277">_</span><span class="op" id="7790278">,</span>&nbsp;<span class="ident" id="7790280">r</span>&nbsp;<span class="op" id="7790282">:=</span>&nbsp;<span class="keyword" id="7790285">range</span>&nbsp;<span class="ident" id="7790291">re</span><span class="op" id="7790293">.</span><span class="ident" id="7790294">Rune</span>&nbsp;<span class="op" id="7790299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790304">b</span><span class="op" id="7790305">.</span><span class="ident" id="7790306">WriteRune</span><span class="op" id="7790315">(</span><span class="ident" id="7790316">r</span><span class="op" id="7790317">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790324">case</span>&nbsp;<span class="ident" id="7790329">OpConcat</span><span class="op" id="7790337">,</span>&nbsp;<span class="ident" id="7790339">OpAlternate</span><span class="op" id="7790350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790354">for</span>&nbsp;<span class="ident" id="7790358">_</span><span class="op" id="7790359">,</span>&nbsp;<span class="ident" id="7790361">sub</span>&nbsp;<span class="op" id="7790365">:=</span>&nbsp;<span class="keyword" id="7790368">range</span>&nbsp;<span class="ident" id="7790374">re</span><span class="op" id="7790376">.</span><span class="ident" id="7790377">Sub</span>&nbsp;<span class="op" id="7790381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790386">dumpRegexp</span><span class="op" id="7790396">(</span><span class="ident" id="7790397">b</span><span class="op" id="7790398">,</span>&nbsp;<span class="ident" id="7790400">sub</span><span class="op" id="7790403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790407">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790410">case</span>&nbsp;<span class="ident" id="7790415">OpStar</span><span class="op" id="7790421">,</span>&nbsp;<span class="ident" id="7790423">OpPlus</span><span class="op" id="7790429">,</span>&nbsp;<span class="ident" id="7790431">OpQuest</span><span class="op" id="7790438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790442">dumpRegexp</span><span class="op" id="7790452">(</span><span class="ident" id="7790453">b</span><span class="op" id="7790454">,</span>&nbsp;<span class="ident" id="7790456">re</span><span class="op" id="7790458">.</span><span class="ident" id="7790459">Sub</span><span class="op" id="7790462">[</span><span class="num" id="7790463">0</span><span class="op" id="7790464">]</span><span class="op" id="7790465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790468">case</span>&nbsp;<span class="ident" id="7790473">OpRepeat</span><span class="op" id="7790481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790485">fmt</span><span class="op" id="7790488">.</span><span class="ident" id="7790489">Fprintf</span><span class="op" id="7790496">(</span><span class="ident" id="7790497">b</span><span class="op" id="7790498">,</span>&nbsp;<span class="string" id="7790500">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="7790508">,</span>&nbsp;<span class="ident" id="7790510">re</span><span class="op" id="7790512">.</span><span class="ident" id="7790513">Min</span><span class="op" id="7790516">,</span>&nbsp;<span class="ident" id="7790518">re</span><span class="op" id="7790520">.</span><span class="ident" id="7790521">Max</span><span class="op" id="7790524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790528">dumpRegexp</span><span class="op" id="7790538">(</span><span class="ident" id="7790539">b</span><span class="op" id="7790540">,</span>&nbsp;<span class="ident" id="7790542">re</span><span class="op" id="7790544">.</span><span class="ident" id="7790545">Sub</span><span class="op" id="7790548">[</span><span class="num" id="7790549">0</span><span class="op" id="7790550">]</span><span class="op" id="7790551">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790554">case</span>&nbsp;<span class="ident" id="7790559">OpCapture</span><span class="op" id="7790568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790572">if</span>&nbsp;<span class="ident" id="7790575">re</span><span class="op" id="7790577">.</span><span class="ident" id="7790578">Name</span>&nbsp;<span class="op" id="7790583">!=</span>&nbsp;<span class="string" id="7790586">&#34;&#34;</span>&nbsp;<span class="op" id="7790589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790594">b</span><span class="op" id="7790595">.</span><span class="ident" id="7790596">WriteString</span><span class="op" id="7790607">(</span><span class="ident" id="7790608">re</span><span class="op" id="7790610">.</span><span class="ident" id="7790611">Name</span><span class="op" id="7790615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790620">b</span><span class="op" id="7790621">.</span><span class="ident" id="7790622">WriteByte</span><span class="op" id="7790631">(</span><span class="string" id="7790632">&#39;:&#39;</span><span class="op" id="7790635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790639">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790643">dumpRegexp</span><span class="op" id="7790653">(</span><span class="ident" id="7790654">b</span><span class="op" id="7790655">,</span>&nbsp;<span class="ident" id="7790657">re</span><span class="op" id="7790659">.</span><span class="ident" id="7790660">Sub</span><span class="op" id="7790663">[</span><span class="num" id="7790664">0</span><span class="op" id="7790665">]</span><span class="op" id="7790666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790669">case</span>&nbsp;<span class="ident" id="7790674">OpCharClass</span><span class="op" id="7790685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790689">sep</span>&nbsp;<span class="op" id="7790693">:=</span>&nbsp;<span class="string" id="7790696">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790701">for</span>&nbsp;<span class="ident" id="7790705">i</span>&nbsp;<span class="op" id="7790707">:=</span>&nbsp;<span class="num" id="7790710">0</span><span class="op" id="7790711">;</span>&nbsp;<span class="ident" id="7790713">i</span>&nbsp;<span class="op" id="7790715">&lt;</span>&nbsp;<span class="builtinfunc" id="7790717">len</span><span class="op" id="7790720">(</span><span class="ident" id="7790721">re</span><span class="op" id="7790723">.</span><span class="ident" id="7790724">Rune</span><span class="op" id="7790728">)</span><span class="op" id="7790729">;</span>&nbsp;<span class="ident" id="7790731">i</span>&nbsp;<span class="op" id="7790733">+=</span>&nbsp;<span class="num" id="7790736">2</span>&nbsp;<span class="op" id="7790738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790743">b</span><span class="op" id="7790744">.</span><span class="ident" id="7790745">WriteString</span><span class="op" id="7790756">(</span><span class="ident" id="7790757">sep</span><span class="op" id="7790760">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790765">sep</span>&nbsp;<span class="op" id="7790769">=</span>&nbsp;<span class="string" id="7790771">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790778">lo</span><span class="op" id="7790780">,</span>&nbsp;<span class="ident" id="7790782">hi</span>&nbsp;<span class="op" id="7790785">:=</span>&nbsp;<span class="ident" id="7790788">re</span><span class="op" id="7790790">.</span><span class="ident" id="7790791">Rune</span><span class="op" id="7790795">[</span><span class="ident" id="7790796">i</span><span class="op" id="7790797">]</span><span class="op" id="7790798">,</span>&nbsp;<span class="ident" id="7790800">re</span><span class="op" id="7790802">.</span><span class="ident" id="7790803">Rune</span><span class="op" id="7790807">[</span><span class="ident" id="7790808">i</span><span class="op" id="7790809">+</span><span class="num" id="7790810">1</span><span class="op" id="7790811">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790816">if</span>&nbsp;<span class="ident" id="7790819">lo</span>&nbsp;<span class="op" id="7790822">==</span>&nbsp;<span class="ident" id="7790825">hi</span>&nbsp;<span class="op" id="7790828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790834">fmt</span><span class="op" id="7790837">.</span><span class="ident" id="7790838">Fprintf</span><span class="op" id="7790845">(</span><span class="ident" id="7790846">b</span><span class="op" id="7790847">,</span>&nbsp;<span class="string" id="7790849">&#34;%#x&#34;</span><span class="op" id="7790854">,</span>&nbsp;<span class="ident" id="7790856">lo</span><span class="op" id="7790858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790863">}</span>&nbsp;<span class="keyword" id="7790865">else</span>&nbsp;<span class="op" id="7790870">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790876">fmt</span><span class="op" id="7790879">.</span><span class="ident" id="7790880">Fprintf</span><span class="op" id="7790887">(</span><span class="ident" id="7790888">b</span><span class="op" id="7790889">,</span>&nbsp;<span class="string" id="7790891">&#34;%#x-%#x&#34;</span><span class="op" id="7790900">,</span>&nbsp;<span class="ident" id="7790902">lo</span><span class="op" id="7790904">,</span>&nbsp;<span class="ident" id="7790906">hi</span><span class="op" id="7790908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790923">b</span><span class="op" id="7790924">.</span><span class="ident" id="7790925">WriteByte</span><span class="op" id="7790934">(</span><span class="string" id="7790935">&#39;}&#39;</span><span class="op" id="7790938">)</span><br>
<span class="lineno">380</span><span class="op" id="7790940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790943">func</span>&nbsp;<span class="ident" id="7790948">mkCharClass</span><span class="op" id="7790959">(</span><span class="ident" id="7790960">f</span>&nbsp;<span class="keyword" id="7790962">func</span><span class="op" id="7790966">(</span><span class="builtintype" id="7790967">rune</span><span class="op" id="7790971">)</span>&nbsp;<span class="builtintype" id="7790973">bool</span><span class="op" id="7790977">)</span>&nbsp;<span class="builtintype" id="7790979">string</span>&nbsp;<span class="op" id="7790986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790989">re</span>&nbsp;<span class="op" id="7790992">:=</span>&nbsp;<span class="op" id="7790995">&amp;</span><span class="ident" id="7790996">Regexp</span><span class="op" id="7791002">{</span><span class="ident" id="7791003">Op</span><span class="op" id="7791005">:</span>&nbsp;<span class="ident" id="7791007">OpCharClass</span><span class="op" id="7791018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791021">lo</span>&nbsp;<span class="op" id="7791024">:=</span>&nbsp;<span class="builtintype" id="7791027">rune</span><span class="op" id="7791031">(</span><span class="op" id="7791032">-</span><span class="num" id="7791033">1</span><span class="op" id="7791034">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791037">for</span>&nbsp;<span class="ident" id="7791041">i</span>&nbsp;<span class="op" id="7791043">:=</span>&nbsp;<span class="builtintype" id="7791046">rune</span><span class="op" id="7791050">(</span><span class="num" id="7791051">0</span><span class="op" id="7791052">)</span><span class="op" id="7791053">;</span>&nbsp;<span class="ident" id="7791055">i</span>&nbsp;<span class="op" id="7791057">&lt;=</span>&nbsp;<span class="ident" id="7791060">unicode</span><span class="op" id="7791067">.</span><span class="ident" id="7791068">MaxRune</span><span class="op" id="7791075">;</span>&nbsp;<span class="ident" id="7791077">i</span><span class="op" id="7791078">++</span>&nbsp;<span class="op" id="7791081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791085">if</span>&nbsp;<span class="ident" id="7791088">f</span><span class="op" id="7791089">(</span><span class="ident" id="7791090">i</span><span class="op" id="7791091">)</span>&nbsp;<span class="op" id="7791093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791098">if</span>&nbsp;<span class="ident" id="7791101">lo</span>&nbsp;<span class="op" id="7791104">&lt;</span>&nbsp;<span class="num" id="7791106">0</span>&nbsp;<span class="op" id="7791108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791114">lo</span>&nbsp;<span class="op" id="7791117">=</span>&nbsp;<span class="ident" id="7791119">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791124">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791128">}</span>&nbsp;<span class="keyword" id="7791130">else</span>&nbsp;<span class="op" id="7791135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791140">if</span>&nbsp;<span class="ident" id="7791143">lo</span>&nbsp;<span class="op" id="7791146">&gt;=</span>&nbsp;<span class="num" id="7791149">0</span>&nbsp;<span class="op" id="7791151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791157">re</span><span class="op" id="7791159">.</span><span class="ident" id="7791160">Rune</span>&nbsp;<span class="op" id="7791165">=</span>&nbsp;<span class="builtinfunc" id="7791167">append</span><span class="op" id="7791173">(</span><span class="ident" id="7791174">re</span><span class="op" id="7791176">.</span><span class="ident" id="7791177">Rune</span><span class="op" id="7791181">,</span>&nbsp;<span class="ident" id="7791183">lo</span><span class="op" id="7791185">,</span>&nbsp;<span class="ident" id="7791187">i</span><span class="op" id="7791188">-</span><span class="num" id="7791189">1</span><span class="op" id="7791190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791196">lo</span>&nbsp;<span class="op" id="7791199">=</span>&nbsp;<span class="op" id="7791201">-</span><span class="num" id="7791202">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791207">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791217">if</span>&nbsp;<span class="ident" id="7791220">lo</span>&nbsp;<span class="op" id="7791223">&gt;=</span>&nbsp;<span class="num" id="7791226">0</span>&nbsp;<span class="op" id="7791228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791232">re</span><span class="op" id="7791234">.</span><span class="ident" id="7791235">Rune</span>&nbsp;<span class="op" id="7791240">=</span>&nbsp;<span class="builtinfunc" id="7791242">append</span><span class="op" id="7791248">(</span><span class="ident" id="7791249">re</span><span class="op" id="7791251">.</span><span class="ident" id="7791252">Rune</span><span class="op" id="7791256">,</span>&nbsp;<span class="ident" id="7791258">lo</span><span class="op" id="7791260">,</span>&nbsp;<span class="ident" id="7791262">unicode</span><span class="op" id="7791269">.</span><span class="ident" id="7791270">MaxRune</span><span class="op" id="7791277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791280">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791283">return</span>&nbsp;<span class="ident" id="7791290">dump</span><span class="op" id="7791294">(</span><span class="ident" id="7791295">re</span><span class="op" id="7791297">)</span><br>
<span class="lineno"></span><span class="op" id="7791299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791302">func</span>&nbsp;<span class="ident" id="7791307">isUpperFold</span><span class="op" id="7791318">(</span><span class="ident" id="7791319">r</span>&nbsp;<span class="builtintype" id="7791321">rune</span><span class="op" id="7791325">)</span>&nbsp;<span class="builtintype" id="7791327">bool</span>&nbsp;<span class="op" id="7791332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791335">if</span>&nbsp;<span class="ident" id="7791338">unicode</span><span class="op" id="7791345">.</span><span class="ident" id="7791346">IsUpper</span><span class="op" id="7791353">(</span><span class="ident" id="7791354">r</span><span class="op" id="7791355">)</span>&nbsp;<span class="op" id="7791357">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791361">return</span>&nbsp;<span class="ident" id="7791368">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791377">c</span>&nbsp;<span class="op" id="7791379">:=</span>&nbsp;<span class="ident" id="7791382">unicode</span><span class="op" id="7791389">.</span><span class="ident" id="7791390">SimpleFold</span><span class="op" id="7791400">(</span><span class="ident" id="7791401">r</span><span class="op" id="7791402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791405">for</span>&nbsp;<span class="ident" id="7791409">c</span>&nbsp;<span class="op" id="7791411">!=</span>&nbsp;<span class="ident" id="7791414">r</span>&nbsp;<span class="op" id="7791416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791420">if</span>&nbsp;<span class="ident" id="7791423">unicode</span><span class="op" id="7791430">.</span><span class="ident" id="7791431">IsUpper</span><span class="op" id="7791438">(</span><span class="ident" id="7791439">c</span><span class="op" id="7791440">)</span>&nbsp;<span class="op" id="7791442">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791447">return</span>&nbsp;<span class="ident" id="7791454">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791465">c</span>&nbsp;<span class="op" id="7791467">=</span>&nbsp;<span class="ident" id="7791469">unicode</span><span class="op" id="7791476">.</span><span class="ident" id="7791477">SimpleFold</span><span class="op" id="7791487">(</span><span class="ident" id="7791488">c</span><span class="op" id="7791489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791495">return</span>&nbsp;<span class="ident" id="7791502">false</span><br>
<span class="lineno">415</span><span class="op" id="7791508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791511">func</span>&nbsp;<span class="ident" id="7791516">TestFoldConstants</span><span class="op" id="7791533">(</span><span class="ident" id="7791534">t</span>&nbsp;<span class="op" id="7791536">*</span><span class="ident" id="7791537">testing</span><span class="op" id="7791544">.</span><span class="ident" id="7791545">T</span><span class="op" id="7791546">)</span>&nbsp;<span class="op" id="7791548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791551">last</span>&nbsp;<span class="op" id="7791556">:=</span>&nbsp;<span class="builtintype" id="7791559">rune</span><span class="op" id="7791563">(</span><span class="op" id="7791564">-</span><span class="num" id="7791565">1</span><span class="op" id="7791566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791569">for</span>&nbsp;<span class="ident" id="7791573">i</span>&nbsp;<span class="op" id="7791575">:=</span>&nbsp;<span class="builtintype" id="7791578">rune</span><span class="op" id="7791582">(</span><span class="num" id="7791583">0</span><span class="op" id="7791584">)</span><span class="op" id="7791585">;</span>&nbsp;<span class="ident" id="7791587">i</span>&nbsp;<span class="op" id="7791589">&lt;=</span>&nbsp;<span class="ident" id="7791592">unicode</span><span class="op" id="7791599">.</span><span class="ident" id="7791600">MaxRune</span><span class="op" id="7791607">;</span>&nbsp;<span class="ident" id="7791609">i</span><span class="op" id="7791610">++</span>&nbsp;<span class="op" id="7791613">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791617">if</span>&nbsp;<span class="ident" id="7791620">unicode</span><span class="op" id="7791627">.</span><span class="ident" id="7791628">SimpleFold</span><span class="op" id="7791638">(</span><span class="ident" id="7791639">i</span><span class="op" id="7791640">)</span>&nbsp;<span class="op" id="7791642">==</span>&nbsp;<span class="ident" id="7791645">i</span>&nbsp;<span class="op" id="7791647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791667">if</span>&nbsp;<span class="ident" id="7791670">last</span>&nbsp;<span class="op" id="7791675">==</span>&nbsp;<span class="op" id="7791678">-</span><span class="num" id="7791679">1</span>&nbsp;<span class="op" id="7791681">&amp;&amp;</span>&nbsp;<span class="ident" id="7791684">minFold</span>&nbsp;<span class="op" id="7791692">!=</span>&nbsp;<span class="ident" id="7791695">i</span>&nbsp;<span class="op" id="7791697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791702">t</span><span class="op" id="7791703">.</span><span class="ident" id="7791704">Errorf</span><span class="op" id="7791710">(</span><span class="string" id="7791711">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7791738">,</span>&nbsp;<span class="ident" id="7791740">minFold</span><span class="op" id="7791747">,</span>&nbsp;<span class="ident" id="7791749">i</span><span class="op" id="7791750">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791758">last</span>&nbsp;<span class="op" id="7791763">=</span>&nbsp;<span class="ident" id="7791765">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791771">if</span>&nbsp;<span class="ident" id="7791774">maxFold</span>&nbsp;<span class="op" id="7791782">!=</span>&nbsp;<span class="ident" id="7791785">last</span>&nbsp;<span class="op" id="7791790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791794">t</span><span class="op" id="7791795">.</span><span class="ident" id="7791796">Errorf</span><span class="op" id="7791802">(</span><span class="string" id="7791803">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7791830">,</span>&nbsp;<span class="ident" id="7791832">maxFold</span><span class="op" id="7791839">,</span>&nbsp;<span class="ident" id="7791841">last</span><span class="op" id="7791845">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791848">}</span><br>
<span class="lineno"></span><span class="op" id="7791850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791853">func</span>&nbsp;<span class="ident" id="7791858">TestAppendRangeCollapse</span><span class="op" id="7791881">(</span><span class="ident" id="7791882">t</span>&nbsp;<span class="op" id="7791884">*</span><span class="ident" id="7791885">testing</span><span class="op" id="7791892">.</span><span class="ident" id="7791893">T</span><span class="op" id="7791894">)</span>&nbsp;<span class="op" id="7791896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791899">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791954">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7792016">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7792054">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792099">var</span>&nbsp;<span class="ident" id="7792103">r</span>&nbsp;<span class="op" id="7792105">[</span><span class="op" id="7792106">]</span><span class="builtintype" id="7792107">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792113">for</span>&nbsp;<span class="ident" id="7792117">i</span>&nbsp;<span class="op" id="7792119">:=</span>&nbsp;<span class="builtintype" id="7792122">rune</span><span class="op" id="7792126">(</span><span class="string" id="7792127">&#39;A&#39;</span><span class="op" id="7792130">)</span><span class="op" id="7792131">;</span>&nbsp;<span class="ident" id="7792133">i</span>&nbsp;<span class="op" id="7792135">&lt;=</span>&nbsp;<span class="string" id="7792138">&#39;Z&#39;</span><span class="op" id="7792141">;</span>&nbsp;<span class="ident" id="7792143">i</span><span class="op" id="7792144">++</span>&nbsp;<span class="op" id="7792147">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792151">r</span>&nbsp;<span class="op" id="7792153">=</span>&nbsp;<span class="ident" id="7792155">appendRange</span><span class="op" id="7792166">(</span><span class="ident" id="7792167">r</span><span class="op" id="7792168">,</span>&nbsp;<span class="ident" id="7792170">i</span><span class="op" id="7792171">,</span>&nbsp;<span class="ident" id="7792173">i</span><span class="op" id="7792174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792178">r</span>&nbsp;<span class="op" id="7792180">=</span>&nbsp;<span class="ident" id="7792182">appendRange</span><span class="op" id="7792193">(</span><span class="ident" id="7792194">r</span><span class="op" id="7792195">,</span>&nbsp;<span class="ident" id="7792197">i</span><span class="op" id="7792198">+</span><span class="string" id="7792199">&#39;a&#39;</span><span class="op" id="7792202">-</span><span class="string" id="7792203">&#39;A&#39;</span><span class="op" id="7792206">,</span>&nbsp;<span class="ident" id="7792208">i</span><span class="op" id="7792209">+</span><span class="string" id="7792210">&#39;a&#39;</span><span class="op" id="7792213">-</span><span class="string" id="7792214">&#39;A&#39;</span><span class="op" id="7792217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792223">if</span>&nbsp;<span class="builtintype" id="7792226">string</span><span class="op" id="7792232">(</span><span class="ident" id="7792233">r</span><span class="op" id="7792234">)</span>&nbsp;<span class="op" id="7792236">!=</span>&nbsp;<span class="string" id="7792239">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="7792246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792250">t</span><span class="op" id="7792251">.</span><span class="ident" id="7792252">Errorf</span><span class="op" id="7792258">(</span><span class="string" id="7792259">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="7792307">,</span>&nbsp;<span class="builtintype" id="7792309">string</span><span class="op" id="7792315">(</span><span class="ident" id="7792316">r</span><span class="op" id="7792317">)</span><span class="op" id="7792318">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792321">}</span><br>
<span class="lineno"></span><span class="op" id="7792323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792326">var</span>&nbsp;<span class="ident" id="7792330">invalidRegexps</span>&nbsp;<span class="op" id="7792345">=</span>&nbsp;<span class="op" id="7792347">[</span><span class="op" id="7792348">]</span><span class="builtintype" id="7792349">string</span><span class="op" id="7792355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792358">`(`</span><span class="op" id="7792361">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792364">`)`</span><span class="op" id="7792367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792370">`(a`</span><span class="op" id="7792374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792377">`a)`</span><span class="op" id="7792381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792384">`(a))`</span><span class="op" id="7792390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792393">`(a|b|`</span><span class="op" id="7792400">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792403">`a|b|)`</span><span class="op" id="7792410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792413">`(a|b|))`</span><span class="op" id="7792422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792425">`(a|b`</span><span class="op" id="7792431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792434">`a|b)`</span><span class="op" id="7792440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792443">`(a|b))`</span><span class="op" id="7792451">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792454">`[a-z`</span><span class="op" id="7792460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792463">`([a-z)`</span><span class="op" id="7792471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792474">`[a-z)`</span><span class="op" id="7792481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792484">`([a-z]))`</span><span class="op" id="7792494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792497">`x{1001}`</span><span class="op" id="7792506">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792509">`x{9876543210}`</span><span class="op" id="7792524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792527">`x{2,1}`</span><span class="op" id="7792535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792538">`x{1,9876543210}`</span><span class="op" id="7792555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792558">&#34;\xff&#34;</span><span class="op" id="7792564">,</span>&nbsp;<span class="comment" id="7792566">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792584">&#34;[\xff]&#34;</span><span class="op" id="7792592">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792595">&#34;[\\\xff]&#34;</span><span class="op" id="7792605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792608">&#34;\\\xff&#34;</span><span class="op" id="7792616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792619">`(?P&lt;name&gt;a`</span><span class="op" id="7792631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792634">`(?P&lt;name&gt;`</span><span class="op" id="7792645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792648">`(?P&lt;name`</span><span class="op" id="7792658">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792661">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="7792673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792676">`(?P&lt;&gt;a)`</span><span class="op" id="7792685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792688">`[a-Z]`</span><span class="op" id="7792695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792698">`(?i)[a-Z]`</span><span class="op" id="7792709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792712">`a{100000}`</span><span class="op" id="7792723">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792726">`a{100000,}`</span><span class="op" id="7792738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792741">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="7792794">,</span><br>
<span class="lineno"></span><span class="op" id="7792796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792799">var</span>&nbsp;<span class="ident" id="7792803">onlyPerl</span>&nbsp;<span class="op" id="7792812">=</span>&nbsp;<span class="op" id="7792814">[</span><span class="op" id="7792815">]</span><span class="builtintype" id="7792816">string</span><span class="op" id="7792822">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792825">`[a-b-c]`</span><span class="op" id="7792834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792837">`\Qabc\E`</span><span class="op" id="7792846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792849">`\Q*+?{[\E`</span><span class="op" id="7792860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792863">`\Q\\E`</span><span class="op" id="7792870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792873">`\Q\\\E`</span><span class="op" id="7792881">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792884">`\Q\\\\E`</span><span class="op" id="7792893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792896">`\Q\\\\\E`</span><span class="op" id="7792906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792909">`(?:a)`</span><span class="op" id="7792916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792919">`(?P&lt;name&gt;a)`</span><span class="op" id="7792932">,</span><br>
<span class="lineno"></span><span class="op" id="7792934">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="7792937">var</span>&nbsp;<span class="ident" id="7792941">onlyPOSIX</span>&nbsp;<span class="op" id="7792951">=</span>&nbsp;<span class="op" id="7792953">[</span><span class="op" id="7792954">]</span><span class="builtintype" id="7792955">string</span><span class="op" id="7792961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792964">&#34;a++&#34;</span><span class="op" id="7792969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792972">&#34;a**&#34;</span><span class="op" id="7792977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792980">&#34;a?*&#34;</span><span class="op" id="7792985">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792988">&#34;a+*&#34;</span><span class="op" id="7792993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7792996">&#34;a{1}*&#34;</span><span class="op" id="7793003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7793006">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="7793019">,</span><br>
<span class="lineno"></span><span class="op" id="7793021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="7793024">func</span>&nbsp;<span class="ident" id="7793029">TestParseInvalidRegexps</span><span class="op" id="7793052">(</span><span class="ident" id="7793053">t</span>&nbsp;<span class="op" id="7793055">*</span><span class="ident" id="7793056">testing</span><span class="op" id="7793063">.</span><span class="ident" id="7793064">T</span><span class="op" id="7793065">)</span>&nbsp;<span class="op" id="7793067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793070">for</span>&nbsp;<span class="ident" id="7793074">_</span><span class="op" id="7793075">,</span>&nbsp;<span class="ident" id="7793077">regexp</span>&nbsp;<span class="op" id="7793084">:=</span>&nbsp;<span class="keyword" id="7793087">range</span>&nbsp;<span class="ident" id="7793093">invalidRegexps</span>&nbsp;<span class="op" id="7793108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793112">if</span>&nbsp;<span class="ident" id="7793115">re</span><span class="op" id="7793117">,</span>&nbsp;<span class="ident" id="7793119">err</span>&nbsp;<span class="op" id="7793123">:=</span>&nbsp;<span class="ident" id="7793126">Parse</span><span class="op" id="7793131">(</span><span class="ident" id="7793132">regexp</span><span class="op" id="7793138">,</span>&nbsp;<span class="ident" id="7793140">Perl</span><span class="op" id="7793144">)</span><span class="op" id="7793145">;</span>&nbsp;<span class="ident" id="7793147">err</span>&nbsp;<span class="op" id="7793151">==</span>&nbsp;<span class="ident" id="7793154">nil</span>&nbsp;<span class="op" id="7793158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793163">t</span><span class="op" id="7793164">.</span><span class="ident" id="7793165">Errorf</span><span class="op" id="7793171">(</span><span class="string" id="7793172">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7793215">,</span>&nbsp;<span class="ident" id="7793217">regexp</span><span class="op" id="7793223">,</span>&nbsp;<span class="ident" id="7793225">dump</span><span class="op" id="7793229">(</span><span class="ident" id="7793230">re</span><span class="op" id="7793232">)</span><span class="op" id="7793233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793237">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793241">if</span>&nbsp;<span class="ident" id="7793244">re</span><span class="op" id="7793246">,</span>&nbsp;<span class="ident" id="7793248">err</span>&nbsp;<span class="op" id="7793252">:=</span>&nbsp;<span class="ident" id="7793255">Parse</span><span class="op" id="7793260">(</span><span class="ident" id="7793261">regexp</span><span class="op" id="7793267">,</span>&nbsp;<span class="ident" id="7793269">POSIX</span><span class="op" id="7793274">)</span><span class="op" id="7793275">;</span>&nbsp;<span class="ident" id="7793277">err</span>&nbsp;<span class="op" id="7793281">==</span>&nbsp;<span class="ident" id="7793284">nil</span>&nbsp;<span class="op" id="7793288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793293">t</span><span class="op" id="7793294">.</span><span class="ident" id="7793295">Errorf</span><span class="op" id="7793301">(</span><span class="string" id="7793302">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7793346">,</span>&nbsp;<span class="ident" id="7793348">regexp</span><span class="op" id="7793354">,</span>&nbsp;<span class="ident" id="7793356">dump</span><span class="op" id="7793360">(</span><span class="ident" id="7793361">re</span><span class="op" id="7793363">)</span><span class="op" id="7793364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793374">for</span>&nbsp;<span class="ident" id="7793378">_</span><span class="op" id="7793379">,</span>&nbsp;<span class="ident" id="7793381">regexp</span>&nbsp;<span class="op" id="7793388">:=</span>&nbsp;<span class="keyword" id="7793391">range</span>&nbsp;<span class="ident" id="7793397">onlyPerl</span>&nbsp;<span class="op" id="7793406">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793410">if</span>&nbsp;<span class="ident" id="7793413">_</span><span class="op" id="7793414">,</span>&nbsp;<span class="ident" id="7793416">err</span>&nbsp;<span class="op" id="7793420">:=</span>&nbsp;<span class="ident" id="7793423">Parse</span><span class="op" id="7793428">(</span><span class="ident" id="7793429">regexp</span><span class="op" id="7793435">,</span>&nbsp;<span class="ident" id="7793437">Perl</span><span class="op" id="7793441">)</span><span class="op" id="7793442">;</span>&nbsp;<span class="ident" id="7793444">err</span>&nbsp;<span class="op" id="7793448">!=</span>&nbsp;<span class="ident" id="7793451">nil</span>&nbsp;<span class="op" id="7793455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793460">t</span><span class="op" id="7793461">.</span><span class="ident" id="7793462">Errorf</span><span class="op" id="7793468">(</span><span class="string" id="7793469">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="7793491">,</span>&nbsp;<span class="ident" id="7793493">regexp</span><span class="op" id="7793499">,</span>&nbsp;<span class="ident" id="7793501">err</span><span class="op" id="7793504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793512">if</span>&nbsp;<span class="ident" id="7793515">re</span><span class="op" id="7793517">,</span>&nbsp;<span class="ident" id="7793519">err</span>&nbsp;<span class="op" id="7793523">:=</span>&nbsp;<span class="ident" id="7793526">Parse</span><span class="op" id="7793531">(</span><span class="ident" id="7793532">regexp</span><span class="op" id="7793538">,</span>&nbsp;<span class="ident" id="7793540">POSIX</span><span class="op" id="7793545">)</span><span class="op" id="7793546">;</span>&nbsp;<span class="ident" id="7793548">err</span>&nbsp;<span class="op" id="7793552">==</span>&nbsp;<span class="ident" id="7793555">nil</span>&nbsp;<span class="op" id="7793559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793564">t</span><span class="op" id="7793565">.</span><span class="ident" id="7793566">Errorf</span><span class="op" id="7793572">(</span><span class="string" id="7793573">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7793617">,</span>&nbsp;<span class="ident" id="7793619">regexp</span><span class="op" id="7793625">,</span>&nbsp;<span class="ident" id="7793627">dump</span><span class="op" id="7793631">(</span><span class="ident" id="7793632">re</span><span class="op" id="7793634">)</span><span class="op" id="7793635">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793645">for</span>&nbsp;<span class="ident" id="7793649">_</span><span class="op" id="7793650">,</span>&nbsp;<span class="ident" id="7793652">regexp</span>&nbsp;<span class="op" id="7793659">:=</span>&nbsp;<span class="keyword" id="7793662">range</span>&nbsp;<span class="ident" id="7793668">onlyPOSIX</span>&nbsp;<span class="op" id="7793678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793682">if</span>&nbsp;<span class="ident" id="7793685">re</span><span class="op" id="7793687">,</span>&nbsp;<span class="ident" id="7793689">err</span>&nbsp;<span class="op" id="7793693">:=</span>&nbsp;<span class="ident" id="7793696">Parse</span><span class="op" id="7793701">(</span><span class="ident" id="7793702">regexp</span><span class="op" id="7793708">,</span>&nbsp;<span class="ident" id="7793710">Perl</span><span class="op" id="7793714">)</span><span class="op" id="7793715">;</span>&nbsp;<span class="ident" id="7793717">err</span>&nbsp;<span class="op" id="7793721">==</span>&nbsp;<span class="ident" id="7793724">nil</span>&nbsp;<span class="op" id="7793728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793733">t</span><span class="op" id="7793734">.</span><span class="ident" id="7793735">Errorf</span><span class="op" id="7793741">(</span><span class="string" id="7793742">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7793785">,</span>&nbsp;<span class="ident" id="7793787">regexp</span><span class="op" id="7793793">,</span>&nbsp;<span class="ident" id="7793795">dump</span><span class="op" id="7793799">(</span><span class="ident" id="7793800">re</span><span class="op" id="7793802">)</span><span class="op" id="7793803">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793811">if</span>&nbsp;<span class="ident" id="7793814">_</span><span class="op" id="7793815">,</span>&nbsp;<span class="ident" id="7793817">err</span>&nbsp;<span class="op" id="7793821">:=</span>&nbsp;<span class="ident" id="7793824">Parse</span><span class="op" id="7793829">(</span><span class="ident" id="7793830">regexp</span><span class="op" id="7793836">,</span>&nbsp;<span class="ident" id="7793838">POSIX</span><span class="op" id="7793843">)</span><span class="op" id="7793844">;</span>&nbsp;<span class="ident" id="7793846">err</span>&nbsp;<span class="op" id="7793850">!=</span>&nbsp;<span class="ident" id="7793853">nil</span>&nbsp;<span class="op" id="7793857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793862">t</span><span class="op" id="7793863">.</span><span class="ident" id="7793864">Errorf</span><span class="op" id="7793870">(</span><span class="string" id="7793871">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="7793894">,</span>&nbsp;<span class="ident" id="7793896">regexp</span><span class="op" id="7793902">,</span>&nbsp;<span class="ident" id="7793904">err</span><span class="op" id="7793907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793914">}</span><br>
<span class="lineno">530</span><span class="op" id="7793916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793919">func</span>&nbsp;<span class="ident" id="7793924">TestToStringEquivalentParse</span><span class="op" id="7793951">(</span><span class="ident" id="7793952">t</span>&nbsp;<span class="op" id="7793954">*</span><span class="ident" id="7793955">testing</span><span class="op" id="7793962">.</span><span class="ident" id="7793963">T</span><span class="op" id="7793964">)</span>&nbsp;<span class="op" id="7793966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793969">for</span>&nbsp;<span class="ident" id="7793973">_</span><span class="op" id="7793974">,</span>&nbsp;<span class="ident" id="7793976">tt</span>&nbsp;<span class="op" id="7793979">:=</span>&nbsp;<span class="keyword" id="7793982">range</span>&nbsp;<span class="ident" id="7793988">parseTests</span>&nbsp;<span class="op" id="7793999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794003">re</span><span class="op" id="7794005">,</span>&nbsp;<span class="ident" id="7794007">err</span>&nbsp;<span class="op" id="7794011">:=</span>&nbsp;<span class="ident" id="7794014">Parse</span><span class="op" id="7794019">(</span><span class="ident" id="7794020">tt</span><span class="op" id="7794022">.</span><span class="ident" id="7794023">Regexp</span><span class="op" id="7794029">,</span>&nbsp;<span class="ident" id="7794031">testFlags</span><span class="op" id="7794040">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794044">if</span>&nbsp;<span class="ident" id="7794047">err</span>&nbsp;<span class="op" id="7794051">!=</span>&nbsp;<span class="ident" id="7794054">nil</span>&nbsp;<span class="op" id="7794058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794063">t</span><span class="op" id="7794064">.</span><span class="ident" id="7794065">Errorf</span><span class="op" id="7794071">(</span><span class="string" id="7794072">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7794088">,</span>&nbsp;<span class="ident" id="7794090">tt</span><span class="op" id="7794092">.</span><span class="ident" id="7794093">Regexp</span><span class="op" id="7794099">,</span>&nbsp;<span class="ident" id="7794101">err</span><span class="op" id="7794104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794109">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794124">if</span>&nbsp;<span class="ident" id="7794127">tt</span><span class="op" id="7794129">.</span><span class="ident" id="7794130">Dump</span>&nbsp;<span class="op" id="7794135">==</span>&nbsp;<span class="string" id="7794138">&#34;&#34;</span>&nbsp;<span class="op" id="7794141">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794146">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794189">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794204">d</span>&nbsp;<span class="op" id="7794206">:=</span>&nbsp;<span class="ident" id="7794209">dump</span><span class="op" id="7794213">(</span><span class="ident" id="7794214">re</span><span class="op" id="7794216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794220">if</span>&nbsp;<span class="ident" id="7794223">d</span>&nbsp;<span class="op" id="7794225">!=</span>&nbsp;<span class="ident" id="7794228">tt</span><span class="op" id="7794230">.</span><span class="ident" id="7794231">Dump</span>&nbsp;<span class="op" id="7794236">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794241">t</span><span class="op" id="7794242">.</span><span class="ident" id="7794243">Errorf</span><span class="op" id="7794249">(</span><span class="string" id="7794250">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7794284">,</span>&nbsp;<span class="ident" id="7794286">tt</span><span class="op" id="7794288">.</span><span class="ident" id="7794289">Regexp</span><span class="op" id="7794295">,</span>&nbsp;<span class="ident" id="7794297">d</span><span class="op" id="7794298">,</span>&nbsp;<span class="ident" id="7794300">tt</span><span class="op" id="7794302">.</span><span class="ident" id="7794303">Dump</span><span class="op" id="7794307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794328">s</span>&nbsp;<span class="op" id="7794330">:=</span>&nbsp;<span class="ident" id="7794333">re</span><span class="op" id="7794335">.</span><span class="ident" id="7794336">String</span><span class="op" id="7794342">(</span><span class="op" id="7794343">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794347">if</span>&nbsp;<span class="ident" id="7794350">s</span>&nbsp;<span class="op" id="7794352">!=</span>&nbsp;<span class="ident" id="7794355">tt</span><span class="op" id="7794357">.</span><span class="ident" id="7794358">Regexp</span>&nbsp;<span class="op" id="7794365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794370">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794423">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794471">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794531">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7794582">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794638">nre</span><span class="op" id="7794641">,</span>&nbsp;<span class="ident" id="7794643">err</span>&nbsp;<span class="op" id="7794647">:=</span>&nbsp;<span class="ident" id="7794650">Parse</span><span class="op" id="7794655">(</span><span class="ident" id="7794656">s</span><span class="op" id="7794657">,</span>&nbsp;<span class="ident" id="7794659">testFlags</span><span class="op" id="7794668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794673">if</span>&nbsp;<span class="ident" id="7794676">err</span>&nbsp;<span class="op" id="7794680">!=</span>&nbsp;<span class="ident" id="7794683">nil</span>&nbsp;<span class="op" id="7794687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794693">t</span><span class="op" id="7794694">.</span><span class="ident" id="7794695">Errorf</span><span class="op" id="7794701">(</span><span class="string" id="7794702">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="7794733">,</span>&nbsp;<span class="ident" id="7794735">tt</span><span class="op" id="7794737">.</span><span class="ident" id="7794738">Regexp</span><span class="op" id="7794744">,</span>&nbsp;<span class="ident" id="7794746">s</span><span class="op" id="7794747">,</span>&nbsp;<span class="ident" id="7794749">err</span><span class="op" id="7794752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794758">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794775">nd</span>&nbsp;<span class="op" id="7794778">:=</span>&nbsp;<span class="ident" id="7794781">dump</span><span class="op" id="7794785">(</span><span class="ident" id="7794786">nre</span><span class="op" id="7794789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794794">if</span>&nbsp;<span class="ident" id="7794797">d</span>&nbsp;<span class="op" id="7794799">!=</span>&nbsp;<span class="ident" id="7794802">nd</span>&nbsp;<span class="op" id="7794805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794811">t</span><span class="op" id="7794812">.</span><span class="ident" id="7794813">Errorf</span><span class="op" id="7794819">(</span><span class="string" id="7794820">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="7794851">,</span>&nbsp;<span class="ident" id="7794853">tt</span><span class="op" id="7794855">.</span><span class="ident" id="7794856">Regexp</span><span class="op" id="7794862">,</span>&nbsp;<span class="ident" id="7794864">s</span><span class="op" id="7794865">,</span>&nbsp;<span class="ident" id="7794867">d</span><span class="op" id="7794868">,</span>&nbsp;<span class="ident" id="7794870">nd</span><span class="op" id="7794872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794877">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794883">ns</span>&nbsp;<span class="op" id="7794886">:=</span>&nbsp;<span class="ident" id="7794889">nre</span><span class="op" id="7794892">.</span><span class="ident" id="7794893">String</span><span class="op" id="7794899">(</span><span class="op" id="7794900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7794905">if</span>&nbsp;<span class="ident" id="7794908">s</span>&nbsp;<span class="op" id="7794910">!=</span>&nbsp;<span class="ident" id="7794913">ns</span>&nbsp;<span class="op" id="7794916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794922">t</span><span class="op" id="7794923">.</span><span class="ident" id="7794924">Errorf</span><span class="op" id="7794930">(</span><span class="string" id="7794931">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="7794957">,</span>&nbsp;<span class="ident" id="7794959">tt</span><span class="op" id="7794961">.</span><span class="ident" id="7794962">Regexp</span><span class="op" id="7794968">,</span>&nbsp;<span class="ident" id="7794970">s</span><span class="op" id="7794971">,</span>&nbsp;<span class="ident" id="7794973">ns</span><span class="op" id="7794975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794980">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794987">}</span><br>
<span class="lineno"></span><span class="op" id="7794989">}</span>
</div>
</body>
</html>
