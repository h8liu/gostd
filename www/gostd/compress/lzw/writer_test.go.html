<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7779240">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7779295">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7779349">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7779400">package</span>&nbsp;<span class="ident" id="7779408">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7779413">import</span>&nbsp;<span class="op" id="7779420">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779423">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779429">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779442">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779448">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779459">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7779469">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7779472">var</span>&nbsp;<span class="ident" id="7779476">filenames</span>&nbsp;<span class="op" id="7779486">=</span>&nbsp;<span class="op" id="7779488">[</span><span class="op" id="7779489">]</span><span class="builtintype" id="7779490">string</span><span class="op" id="7779496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779499">&#34;../testdata/e.txt&#34;</span><span class="op" id="7779518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7779521">&#34;../testdata/pi.txt&#34;</span><span class="op" id="7779541">,</span><br>
<span class="lineno"></span><span class="op" id="7779543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7779546">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="7779624">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7779691">func</span>&nbsp;<span class="ident" id="7779696">testFile</span><span class="op" id="7779704">(</span><span class="ident" id="7779705">t</span>&nbsp;<span class="op" id="7779707">*</span><span class="ident" id="7779708"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7779715">.</span><span class="ident" id="7779716"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7779717">,</span>&nbsp;<span class="ident" id="7779719">fn</span>&nbsp;<span class="builtintype" id="7779722">string</span><span class="op" id="7779728">,</span>&nbsp;<span class="ident" id="7779730">order</span>&nbsp;<span class="ident" id="7779736"><a href="/gostd/compress/lzw/reader.go.html#5734288">Order</a></span><span class="op" id="7779741">,</span>&nbsp;<span class="ident" id="7779743">litWidth</span>&nbsp;<span class="builtintype" id="7779752">int</span><span class="op" id="7779755">)</span>&nbsp;<span class="op" id="7779757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7779760">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7779797">golden</span><span class="op" id="7779803">,</span>&nbsp;<span class="ident" id="7779805">err</span>&nbsp;<span class="op" id="7779809">:=</span>&nbsp;<span class="ident" id="7779812"><a href="/gostd/compress/lzw/writer_test.go.html#7779442">os</a></span><span class="op" id="7779814">.</span><span class="ident" id="7779815"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="7779819">(</span><span class="ident" id="7779820"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7779822">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7779825">if</span>&nbsp;<span class="ident" id="7779828"><a href="/gostd/compress/lzw/writer_test.go.html#7779805">err</a></span>&nbsp;<span class="op" id="7779832">!=</span>&nbsp;<span class="builtintype" id="7779835">nil</span>&nbsp;<span class="op" id="7779839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7779843"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7779844">.</span><span class="ident" id="7779845"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7779851">(</span><span class="string" id="7779852">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7779883">,</span>&nbsp;<span class="ident" id="7779885"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7779887">,</span>&nbsp;<span class="ident" id="7779889"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7779894">,</span>&nbsp;<span class="ident" id="7779896"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7779904">,</span>&nbsp;<span class="ident" id="7779906"><a href="/gostd/compress/lzw/writer_test.go.html#7779805">err</a></span><span class="op" id="7779909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7779913">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7779921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7779924">defer</span>&nbsp;<span class="ident" id="7779930"><a href="/gostd/compress/lzw/writer_test.go.html#7779797">golden</a></span><span class="op" id="7779936">.</span><span class="ident" id="7779937"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7779942">(</span><span class="op" id="7779943">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7779947">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780067">raw</span><span class="op" id="7780070">,</span>&nbsp;<span class="ident" id="7780072"><a href="/gostd/compress/lzw/writer_test.go.html#7779805">err</a></span>&nbsp;<span class="op" id="7780076">:=</span>&nbsp;<span class="ident" id="7780079"><a href="/gostd/compress/lzw/writer_test.go.html#7779442">os</a></span><span class="op" id="7780081">.</span><span class="ident" id="7780082"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="7780086">(</span><span class="ident" id="7780087"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7780089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780092">if</span>&nbsp;<span class="ident" id="7780095"><a href="/gostd/compress/lzw/writer_test.go.html#7779805">err</a></span>&nbsp;<span class="op" id="7780099">!=</span>&nbsp;<span class="builtintype" id="7780102">nil</span>&nbsp;<span class="op" id="7780106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780110"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7780111">.</span><span class="ident" id="7780112"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7780118">(</span><span class="string" id="7780119">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7780150">,</span>&nbsp;<span class="ident" id="7780152"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7780154">,</span>&nbsp;<span class="ident" id="7780156"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780161">,</span>&nbsp;<span class="ident" id="7780163"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780171">,</span>&nbsp;<span class="ident" id="7780173"><a href="/gostd/compress/lzw/writer_test.go.html#7779805">err</a></span><span class="op" id="7780176">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780180">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780192">piper</span><span class="op" id="7780197">,</span>&nbsp;<span class="ident" id="7780199">pipew</span>&nbsp;<span class="op" id="7780205">:=</span>&nbsp;<span class="ident" id="7780208"><a href="/gostd/compress/lzw/writer_test.go.html#7779423">io</a></span><span class="op" id="7780210">.</span><span class="ident" id="7780211"><a href="/gostd/io/pipe.go.html#1440333">Pipe</a></span><span class="op" id="7780215">(</span><span class="op" id="7780216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780219">defer</span>&nbsp;<span class="ident" id="7780225"><a href="/gostd/compress/lzw/writer_test.go.html#7780192">piper</a></span><span class="op" id="7780230">.</span><span class="ident" id="7780231"><a href="/gostd/io/pipe.go.html#1438720">Close</a></span><span class="op" id="7780236">(</span><span class="op" id="7780237">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780240">go</span>&nbsp;<span class="keyword" id="7780243">func</span><span class="op" id="7780247">(</span><span class="op" id="7780248">)</span>&nbsp;<span class="op" id="7780250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780254">defer</span>&nbsp;<span class="ident" id="7780260"><a href="/gostd/compress/lzw/writer_test.go.html#7780067">raw</a></span><span class="op" id="7780263">.</span><span class="ident" id="7780264"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7780269">(</span><span class="op" id="7780270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780274">defer</span>&nbsp;<span class="ident" id="7780280"><a href="/gostd/compress/lzw/writer_test.go.html#7780199">pipew</a></span><span class="op" id="7780285">.</span><span class="ident" id="7780286"><a href="/gostd/io/pipe.go.html#1439540">Close</a></span><span class="op" id="7780291">(</span><span class="op" id="7780292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780296">lzww</span>&nbsp;<span class="op" id="7780301">:=</span>&nbsp;<span class="ident" id="7780304"><a href="/gostd/compress/lzw/writer.go.html#5746657">NewWriter</a></span><span class="op" id="7780313">(</span><span class="ident" id="7780314"><a href="/gostd/compress/lzw/writer_test.go.html#7780199">pipew</a></span><span class="op" id="7780319">,</span>&nbsp;<span class="ident" id="7780321"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780326">,</span>&nbsp;<span class="ident" id="7780328"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780340">defer</span>&nbsp;<span class="ident" id="7780346"><a href="/gostd/compress/lzw/writer_test.go.html#7780296">lzww</a></span><span class="op" id="7780350">.</span><span class="ident" id="7780351"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7780356">(</span><span class="op" id="7780357">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780361">var</span>&nbsp;<span class="ident" id="7780365">b</span>&nbsp;<span class="op" id="7780367">[</span><span class="num" id="7780368">4096</span><span class="op" id="7780372">]</span><span class="builtintype" id="7780373">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780380">for</span>&nbsp;<span class="op" id="7780384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780389">n</span><span class="op" id="7780390">,</span>&nbsp;<span class="ident" id="7780392">err0</span>&nbsp;<span class="op" id="7780397">:=</span>&nbsp;<span class="ident" id="7780400"><a href="/gostd/compress/lzw/writer_test.go.html#7780067">raw</a></span><span class="op" id="7780403">.</span><span class="ident" id="7780404"><a href="/gostd/os/file.go.html#2443268">Read</a></span><span class="op" id="7780408">(</span><span class="ident" id="7780409"><a href="/gostd/compress/lzw/writer_test.go.html#7780365">b</a></span><span class="op" id="7780410">[</span><span class="op" id="7780411">:</span><span class="op" id="7780412">]</span><span class="op" id="7780413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780418">if</span>&nbsp;<span class="ident" id="7780421"><a href="/gostd/compress/lzw/writer_test.go.html#7780392">err0</a></span>&nbsp;<span class="op" id="7780426">!=</span>&nbsp;<span class="builtintype" id="7780429">nil</span>&nbsp;<span class="op" id="7780433">&amp;&amp;</span>&nbsp;<span class="ident" id="7780436"><a href="/gostd/compress/lzw/writer_test.go.html#7780392">err0</a></span>&nbsp;<span class="op" id="7780441">!=</span>&nbsp;<span class="ident" id="7780444"><a href="/gostd/compress/lzw/writer_test.go.html#7779423">io</a></span><span class="op" id="7780446">.</span><span class="ident" id="7780447"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7780451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780457"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7780458">.</span><span class="ident" id="7780459"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7780465">(</span><span class="string" id="7780466">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7780497">,</span>&nbsp;<span class="ident" id="7780499"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7780501">,</span>&nbsp;<span class="ident" id="7780503"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780508">,</span>&nbsp;<span class="ident" id="7780510"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780518">,</span>&nbsp;<span class="ident" id="7780520"><a href="/gostd/compress/lzw/writer_test.go.html#7780392">err0</a></span><span class="op" id="7780524">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780530">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780545">_</span><span class="op" id="7780546">,</span>&nbsp;<span class="ident" id="7780548">err1</span>&nbsp;<span class="op" id="7780553">:=</span>&nbsp;<span class="ident" id="7780556"><a href="/gostd/compress/lzw/writer_test.go.html#7780296">lzww</a></span><span class="op" id="7780560">.</span><span class="ident" id="7780561"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7780566">(</span><span class="ident" id="7780567"><a href="/gostd/compress/lzw/writer_test.go.html#7780365">b</a></span><span class="op" id="7780568">[</span><span class="op" id="7780569">:</span><span class="ident" id="7780570"><a href="/gostd/compress/lzw/writer_test.go.html#7780389">n</a></span><span class="op" id="7780571">]</span><span class="op" id="7780572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780577">if</span>&nbsp;<span class="ident" id="7780580"><a href="/gostd/compress/lzw/writer_test.go.html#7780548">err1</a></span>&nbsp;<span class="op" id="7780585">!=</span>&nbsp;<span class="builtintype" id="7780588">nil</span>&nbsp;<span class="op" id="7780592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780598"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7780599">.</span><span class="ident" id="7780600"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7780606">(</span><span class="string" id="7780607">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7780638">,</span>&nbsp;<span class="ident" id="7780640"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7780642">,</span>&nbsp;<span class="ident" id="7780644"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780649">,</span>&nbsp;<span class="ident" id="7780651"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780659">,</span>&nbsp;<span class="ident" id="7780661"><a href="/gostd/compress/lzw/writer_test.go.html#7780548">err1</a></span><span class="op" id="7780665">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780671">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780686">if</span>&nbsp;<span class="ident" id="7780689"><a href="/gostd/compress/lzw/writer_test.go.html#7780392">err0</a></span>&nbsp;<span class="op" id="7780694">==</span>&nbsp;<span class="ident" id="7780697"><a href="/gostd/compress/lzw/writer_test.go.html#7779423">io</a></span><span class="op" id="7780699">.</span><span class="ident" id="7780700"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7780704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780710">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780719">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780726">}</span><span class="op" id="7780727">(</span><span class="op" id="7780728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780731">lzwr</span>&nbsp;<span class="op" id="7780736">:=</span>&nbsp;<span class="ident" id="7780739"><a href="/gostd/compress/lzw/reader.go.html#5739741">NewReader</a></span><span class="op" id="7780748">(</span><span class="ident" id="7780749"><a href="/gostd/compress/lzw/writer_test.go.html#7780192">piper</a></span><span class="op" id="7780754">,</span>&nbsp;<span class="ident" id="7780756"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780761">,</span>&nbsp;<span class="ident" id="7780763"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780774">defer</span>&nbsp;<span class="ident" id="7780780"><a href="/gostd/compress/lzw/writer_test.go.html#7780731">lzwr</a></span><span class="op" id="7780784">.</span><span class="ident" id="7780785"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7780790">(</span><span class="op" id="7780791">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7780795">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780816">b0</span><span class="op" id="7780818">,</span>&nbsp;<span class="ident" id="7780820">err0</span>&nbsp;<span class="op" id="7780825">:=</span>&nbsp;<span class="ident" id="7780828"><a href="/gostd/compress/lzw/writer_test.go.html#7779429">ioutil</a></span><span class="op" id="7780834">.</span><span class="ident" id="7780835"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7780842">(</span><span class="ident" id="7780843"><a href="/gostd/compress/lzw/writer_test.go.html#7779797">golden</a></span><span class="op" id="7780849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780852">b1</span><span class="op" id="7780854">,</span>&nbsp;<span class="ident" id="7780856">err1</span>&nbsp;<span class="op" id="7780861">:=</span>&nbsp;<span class="ident" id="7780864"><a href="/gostd/compress/lzw/writer_test.go.html#7779429">ioutil</a></span><span class="op" id="7780870">.</span><span class="ident" id="7780871"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7780878">(</span><span class="ident" id="7780879"><a href="/gostd/compress/lzw/writer_test.go.html#7780731">lzwr</a></span><span class="op" id="7780883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780886">if</span>&nbsp;<span class="ident" id="7780889"><a href="/gostd/compress/lzw/writer_test.go.html#7780820">err0</a></span>&nbsp;<span class="op" id="7780894">!=</span>&nbsp;<span class="builtintype" id="7780897">nil</span>&nbsp;<span class="op" id="7780901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7780905"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7780906">.</span><span class="ident" id="7780907"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7780913">(</span><span class="string" id="7780914">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7780945">,</span>&nbsp;<span class="ident" id="7780947"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7780949">,</span>&nbsp;<span class="ident" id="7780951"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7780956">,</span>&nbsp;<span class="ident" id="7780958"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7780966">,</span>&nbsp;<span class="ident" id="7780968"><a href="/gostd/compress/lzw/writer_test.go.html#7780820">err0</a></span><span class="op" id="7780972">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780976">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7780984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7780987">if</span>&nbsp;<span class="ident" id="7780990"><a href="/gostd/compress/lzw/writer_test.go.html#7780856">err1</a></span>&nbsp;<span class="op" id="7780995">!=</span>&nbsp;<span class="builtintype" id="7780998">nil</span>&nbsp;<span class="op" id="7781002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781006"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7781007">.</span><span class="ident" id="7781008"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7781014">(</span><span class="string" id="7781015">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7781046">,</span>&nbsp;<span class="ident" id="7781048"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7781050">,</span>&nbsp;<span class="ident" id="7781052"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7781057">,</span>&nbsp;<span class="ident" id="7781059"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7781067">,</span>&nbsp;<span class="ident" id="7781069"><a href="/gostd/compress/lzw/writer_test.go.html#7780856">err1</a></span><span class="op" id="7781073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781077">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781088">if</span>&nbsp;<span class="builtinfunc" id="7781091">len</span><span class="op" id="7781094">(</span><span class="ident" id="7781095"><a href="/gostd/compress/lzw/writer_test.go.html#7780852">b1</a></span><span class="op" id="7781097">)</span>&nbsp;<span class="op" id="7781099">!=</span>&nbsp;<span class="builtinfunc" id="7781102">len</span><span class="op" id="7781105">(</span><span class="ident" id="7781106"><a href="/gostd/compress/lzw/writer_test.go.html#7780816">b0</a></span><span class="op" id="7781108">)</span>&nbsp;<span class="op" id="7781110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781114"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7781115">.</span><span class="ident" id="7781116"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7781122">(</span><span class="string" id="7781123">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="7781176">,</span>&nbsp;<span class="ident" id="7781178"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7781180">,</span>&nbsp;<span class="ident" id="7781182"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7781187">,</span>&nbsp;<span class="ident" id="7781189"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7781197">,</span>&nbsp;<span class="builtinfunc" id="7781199">len</span><span class="op" id="7781202">(</span><span class="ident" id="7781203"><a href="/gostd/compress/lzw/writer_test.go.html#7780852">b1</a></span><span class="op" id="7781205">)</span><span class="op" id="7781206">,</span>&nbsp;<span class="builtinfunc" id="7781208">len</span><span class="op" id="7781211">(</span><span class="ident" id="7781212"><a href="/gostd/compress/lzw/writer_test.go.html#7780816">b0</a></span><span class="op" id="7781214">)</span><span class="op" id="7781215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781219">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781227">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781230">for</span>&nbsp;<span class="ident" id="7781234">i</span>&nbsp;<span class="op" id="7781236">:=</span>&nbsp;<span class="num" id="7781239">0</span><span class="op" id="7781240">;</span>&nbsp;<span class="ident" id="7781242"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span>&nbsp;<span class="op" id="7781244">&lt;</span>&nbsp;<span class="builtinfunc" id="7781246">len</span><span class="op" id="7781249">(</span><span class="ident" id="7781250"><a href="/gostd/compress/lzw/writer_test.go.html#7780816">b0</a></span><span class="op" id="7781252">)</span><span class="op" id="7781253">;</span>&nbsp;<span class="ident" id="7781255"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781256">++</span>&nbsp;<span class="op" id="7781259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781263">if</span>&nbsp;<span class="ident" id="7781266"><a href="/gostd/compress/lzw/writer_test.go.html#7780852">b1</a></span><span class="op" id="7781268">[</span><span class="ident" id="7781269"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781270">]</span>&nbsp;<span class="op" id="7781272">!=</span>&nbsp;<span class="ident" id="7781275"><a href="/gostd/compress/lzw/writer_test.go.html#7780816">b0</a></span><span class="op" id="7781277">[</span><span class="ident" id="7781278"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781279">]</span>&nbsp;<span class="op" id="7781281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781286"><a href="/gostd/compress/lzw/writer_test.go.html#7779705">t</a></span><span class="op" id="7781287">.</span><span class="ident" id="7781288"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7781294">(</span><span class="string" id="7781295">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="7781358">,</span>&nbsp;<span class="ident" id="7781360"><a href="/gostd/compress/lzw/writer_test.go.html#7779719">fn</a></span><span class="op" id="7781362">,</span>&nbsp;<span class="ident" id="7781364"><a href="/gostd/compress/lzw/writer_test.go.html#7779730">order</a></span><span class="op" id="7781369">,</span>&nbsp;<span class="ident" id="7781371"><a href="/gostd/compress/lzw/writer_test.go.html#7779743">litWidth</a></span><span class="op" id="7781379">,</span>&nbsp;<span class="ident" id="7781381"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781382">,</span>&nbsp;<span class="ident" id="7781384"><a href="/gostd/compress/lzw/writer_test.go.html#7780852">b1</a></span><span class="op" id="7781386">[</span><span class="ident" id="7781387"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781388">]</span><span class="op" id="7781389">,</span>&nbsp;<span class="ident" id="7781391"><a href="/gostd/compress/lzw/writer_test.go.html#7780816">b0</a></span><span class="op" id="7781393">[</span><span class="ident" id="7781394"><a href="/gostd/compress/lzw/writer_test.go.html#7781234">i</a></span><span class="op" id="7781395">]</span><span class="op" id="7781396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781401">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781410">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781413">}</span><br>
<span class="lineno"></span><span class="op" id="7781415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7781418">func</span>&nbsp;<span class="ident" id="7781423">TestWriter</span><span class="op" id="7781433">(</span><span class="ident" id="7781434">t</span>&nbsp;<span class="op" id="7781436">*</span><span class="ident" id="7781437"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7781444">.</span><span class="ident" id="7781445"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7781446">)</span>&nbsp;<span class="op" id="7781448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781451">for</span>&nbsp;<span class="ident" id="7781455">_</span><span class="op" id="7781456">,</span>&nbsp;<span class="ident" id="7781458">filename</span>&nbsp;<span class="op" id="7781467">:=</span>&nbsp;<span class="keyword" id="7781470">range</span>&nbsp;<span class="ident" id="7781476"><a href="/gostd/compress/lzw/writer_test.go.html#7779476">filenames</a></span>&nbsp;<span class="op" id="7781486">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781490">for</span>&nbsp;<span class="ident" id="7781494">_</span><span class="op" id="7781495">,</span>&nbsp;<span class="ident" id="7781497">order</span>&nbsp;<span class="op" id="7781503">:=</span>&nbsp;<span class="keyword" id="7781506">range</span>&nbsp;<span class="op" id="7781512">[</span><span class="op" id="7781513">...</span><span class="op" id="7781516">]</span><span class="ident" id="7781517"><a href="/gostd/compress/lzw/reader.go.html#5734288">Order</a></span><span class="op" id="7781522">{</span><span class="ident" id="7781523"><a href="/gostd/compress/lzw/reader.go.html#5734384">LSB</a></span><span class="op" id="7781526">,</span>&nbsp;<span class="ident" id="7781528"><a href="/gostd/compress/lzw/reader.go.html#5734491">MSB</a></span><span class="op" id="7781531">}</span>&nbsp;<span class="op" id="7781533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7781538">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781618">for</span>&nbsp;<span class="ident" id="7781622">_</span><span class="op" id="7781623">,</span>&nbsp;<span class="ident" id="7781625">litWidth</span>&nbsp;<span class="op" id="7781634">:=</span>&nbsp;<span class="keyword" id="7781637">range</span>&nbsp;<span class="op" id="7781643">[</span><span class="op" id="7781644">...</span><span class="op" id="7781647">]</span><span class="builtintype" id="7781648">int</span><span class="op" id="7781651">{</span><span class="num" id="7781652">6</span><span class="op" id="7781653">,</span>&nbsp;<span class="num" id="7781655">7</span><span class="op" id="7781656">,</span>&nbsp;<span class="num" id="7781658">8</span><span class="op" id="7781659">}</span>&nbsp;<span class="op" id="7781661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781667"><a href="/gostd/compress/lzw/writer_test.go.html#7779696">testFile</a></span><span class="op" id="7781675">(</span><span class="ident" id="7781676"><a href="/gostd/compress/lzw/writer_test.go.html#7781434">t</a></span><span class="op" id="7781677">,</span>&nbsp;<span class="ident" id="7781679"><a href="/gostd/compress/lzw/writer_test.go.html#7781458">filename</a></span><span class="op" id="7781687">,</span>&nbsp;<span class="ident" id="7781689"><a href="/gostd/compress/lzw/writer_test.go.html#7781497">order</a></span><span class="op" id="7781694">,</span>&nbsp;<span class="ident" id="7781696"><a href="/gostd/compress/lzw/writer_test.go.html#7781625">litWidth</a></span><span class="op" id="7781704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781709">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781716">}</span><br>
<span class="lineno"></span><span class="op" id="7781718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7781721">func</span>&nbsp;<span class="ident" id="7781726">TestWriterReturnValues</span><span class="op" id="7781748">(</span><span class="ident" id="7781749">t</span>&nbsp;<span class="op" id="7781751">*</span><span class="ident" id="7781752"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7781759">.</span><span class="ident" id="7781760"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7781761">)</span>&nbsp;<span class="op" id="7781763">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781766">w</span>&nbsp;<span class="op" id="7781768">:=</span>&nbsp;<span class="ident" id="7781771"><a href="/gostd/compress/lzw/writer.go.html#5746657">NewWriter</a></span><span class="op" id="7781780">(</span><span class="ident" id="7781781"><a href="/gostd/compress/lzw/writer_test.go.html#7779429">ioutil</a></span><span class="op" id="7781787">.</span><span class="ident" id="7781788"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7781795">,</span>&nbsp;<span class="ident" id="7781797"><a href="/gostd/compress/lzw/reader.go.html#5734384">LSB</a></span><span class="op" id="7781800">,</span>&nbsp;<span class="num" id="7781802">8</span><span class="op" id="7781803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781806">n</span><span class="op" id="7781807">,</span>&nbsp;<span class="ident" id="7781809">err</span>&nbsp;<span class="op" id="7781813">:=</span>&nbsp;<span class="ident" id="7781816"><a href="/gostd/compress/lzw/writer_test.go.html#7781766">w</a></span><span class="op" id="7781817">.</span><span class="ident" id="7781818"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7781823">(</span><span class="op" id="7781824">[</span><span class="op" id="7781825">]</span><span class="builtintype" id="7781826">byte</span><span class="op" id="7781830">(</span><span class="string" id="7781831">&#34;asdf&#34;</span><span class="op" id="7781837">)</span><span class="op" id="7781838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7781841">if</span>&nbsp;<span class="ident" id="7781844"><a href="/gostd/compress/lzw/writer_test.go.html#7781806">n</a></span>&nbsp;<span class="op" id="7781846">!=</span>&nbsp;<span class="num" id="7781849">4</span>&nbsp;<span class="op" id="7781851">||</span>&nbsp;<span class="ident" id="7781854"><a href="/gostd/compress/lzw/writer_test.go.html#7781809">err</a></span>&nbsp;<span class="op" id="7781858">!=</span>&nbsp;<span class="builtintype" id="7781861">nil</span>&nbsp;<span class="op" id="7781865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781869"><a href="/gostd/compress/lzw/writer_test.go.html#7781749">t</a></span><span class="op" id="7781870">.</span><span class="ident" id="7781871"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7781877">(</span><span class="string" id="7781878">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="7781903">,</span>&nbsp;<span class="ident" id="7781905"><a href="/gostd/compress/lzw/writer_test.go.html#7781806">n</a></span><span class="op" id="7781906">,</span>&nbsp;<span class="ident" id="7781908"><a href="/gostd/compress/lzw/writer_test.go.html#7781809">err</a></span><span class="op" id="7781911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7781914">}</span><br>
<span class="lineno">105</span><span class="op" id="7781916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7781919">func</span>&nbsp;<span class="ident" id="7781924">benchmarkEncoder</span><span class="op" id="7781940">(</span><span class="ident" id="7781941">b</span>&nbsp;<span class="op" id="7781943">*</span><span class="ident" id="7781944"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7781951">.</span><span class="ident" id="7781952"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7781953">,</span>&nbsp;<span class="ident" id="7781955">n</span>&nbsp;<span class="builtintype" id="7781957">int</span><span class="op" id="7781960">)</span>&nbsp;<span class="op" id="7781962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781965"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7781966">.</span><span class="ident" id="7781967"><a href="/gostd/testing/benchmark.go.html#5452096">StopTimer</a></span><span class="op" id="7781976">(</span><span class="op" id="7781977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7781980"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7781981">.</span><span class="ident" id="7781982"><a href="/gostd/testing/benchmark.go.html#5452834">SetBytes</a></span><span class="op" id="7781990">(</span><span class="builtintype" id="7781991">int64</span><span class="op" id="7781996">(</span><span class="ident" id="7781997"><a href="/gostd/compress/lzw/writer_test.go.html#7781955">n</a></span><span class="op" id="7781998">)</span><span class="op" id="7781999">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782002">buf0</span><span class="op" id="7782006">,</span>&nbsp;<span class="ident" id="7782008">err</span>&nbsp;<span class="op" id="7782012">:=</span>&nbsp;<span class="ident" id="7782015"><a href="/gostd/compress/lzw/writer_test.go.html#7779429">ioutil</a></span><span class="op" id="7782021">.</span><span class="ident" id="7782022"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="7782030">(</span><span class="string" id="7782031">&#34;../testdata/e.txt&#34;</span><span class="op" id="7782050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7782053">if</span>&nbsp;<span class="ident" id="7782056"><a href="/gostd/compress/lzw/writer_test.go.html#7782008">err</a></span>&nbsp;<span class="op" id="7782060">!=</span>&nbsp;<span class="builtintype" id="7782063">nil</span>&nbsp;<span class="op" id="7782067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782071"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7782072">.</span><span class="ident" id="7782073"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7782078">(</span><span class="ident" id="7782079"><a href="/gostd/compress/lzw/writer_test.go.html#7782008">err</a></span><span class="op" id="7782082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7782085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7782088">if</span>&nbsp;<span class="builtinfunc" id="7782091">len</span><span class="op" id="7782094">(</span><span class="ident" id="7782095"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span><span class="op" id="7782099">)</span>&nbsp;<span class="op" id="7782101">==</span>&nbsp;<span class="num" id="7782104">0</span>&nbsp;<span class="op" id="7782106">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782110"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7782111">.</span><span class="ident" id="7782112"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7782118">(</span><span class="string" id="7782119">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="7782142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7782145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782148">buf1</span>&nbsp;<span class="op" id="7782153">:=</span>&nbsp;<span class="builtinfunc" id="7782156">make</span><span class="op" id="7782160">(</span><span class="op" id="7782161">[</span><span class="op" id="7782162">]</span><span class="builtintype" id="7782163">byte</span><span class="op" id="7782167">,</span>&nbsp;<span class="ident" id="7782169"><a href="/gostd/compress/lzw/writer_test.go.html#7781955">n</a></span><span class="op" id="7782170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7782173">for</span>&nbsp;<span class="ident" id="7782177">i</span>&nbsp;<span class="op" id="7782179">:=</span>&nbsp;<span class="num" id="7782182">0</span><span class="op" id="7782183">;</span>&nbsp;<span class="ident" id="7782185"><a href="/gostd/compress/lzw/writer_test.go.html#7782177">i</a></span>&nbsp;<span class="op" id="7782187">&lt;</span>&nbsp;<span class="ident" id="7782189"><a href="/gostd/compress/lzw/writer_test.go.html#7781955">n</a></span><span class="op" id="7782190">;</span>&nbsp;<span class="ident" id="7782192"><a href="/gostd/compress/lzw/writer_test.go.html#7782177">i</a></span>&nbsp;<span class="op" id="7782194">+=</span>&nbsp;<span class="builtinfunc" id="7782197">len</span><span class="op" id="7782200">(</span><span class="ident" id="7782201"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span><span class="op" id="7782205">)</span>&nbsp;<span class="op" id="7782207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7782211">if</span>&nbsp;<span class="builtinfunc" id="7782214">len</span><span class="op" id="7782217">(</span><span class="ident" id="7782218"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span><span class="op" id="7782222">)</span>&nbsp;<span class="op" id="7782224">&gt;</span>&nbsp;<span class="ident" id="7782226"><a href="/gostd/compress/lzw/writer_test.go.html#7781955">n</a></span><span class="op" id="7782227">-</span><span class="ident" id="7782228"><a href="/gostd/compress/lzw/writer_test.go.html#7782177">i</a></span>&nbsp;<span class="op" id="7782230">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782235"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span>&nbsp;<span class="op" id="7782240">=</span>&nbsp;<span class="ident" id="7782242"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span><span class="op" id="7782246">[</span><span class="op" id="7782247">:</span><span class="ident" id="7782248"><a href="/gostd/compress/lzw/writer_test.go.html#7781955">n</a></span><span class="op" id="7782249">-</span><span class="ident" id="7782250"><a href="/gostd/compress/lzw/writer_test.go.html#7782177">i</a></span><span class="op" id="7782251">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7782255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7782259">copy</span><span class="op" id="7782263">(</span><span class="ident" id="7782264"><a href="/gostd/compress/lzw/writer_test.go.html#7782148">buf1</a></span><span class="op" id="7782268">[</span><span class="ident" id="7782269"><a href="/gostd/compress/lzw/writer_test.go.html#7782177">i</a></span><span class="op" id="7782270">:</span><span class="op" id="7782271">]</span><span class="op" id="7782272">,</span>&nbsp;<span class="ident" id="7782274"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span><span class="op" id="7782278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7782281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782284"><a href="/gostd/compress/lzw/writer_test.go.html#7782002">buf0</a></span>&nbsp;<span class="op" id="7782289">=</span>&nbsp;<span class="builtintype" id="7782291">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782296"><a href="/gostd/compress/lzw/writer_test.go.html#7779448">runtime</a></span><span class="op" id="7782303">.</span><span class="ident" id="7782304"><a href="/gostd/runtime/malloc.go.html#1602269">GC</a></span><span class="op" id="7782306">(</span><span class="op" id="7782307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782310"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7782311">.</span><span class="ident" id="7782312"><a href="/gostd/testing/benchmark.go.html#5451749">StartTimer</a></span><span class="op" id="7782322">(</span><span class="op" id="7782323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7782326">for</span>&nbsp;<span class="ident" id="7782330">i</span>&nbsp;<span class="op" id="7782332">:=</span>&nbsp;<span class="num" id="7782335">0</span><span class="op" id="7782336">;</span>&nbsp;<span class="ident" id="7782338"><a href="/gostd/compress/lzw/writer_test.go.html#7782330">i</a></span>&nbsp;<span class="op" id="7782340">&lt;</span>&nbsp;<span class="ident" id="7782342"><a href="/gostd/compress/lzw/writer_test.go.html#7781941">b</a></span><span class="op" id="7782343">.</span><span class="ident" id="7782344"><a href="/gostd/testing/benchmark.go.html#5450983">N</a></span><span class="op" id="7782345">;</span>&nbsp;<span class="ident" id="7782347"><a href="/gostd/compress/lzw/writer_test.go.html#7782330">i</a></span><span class="op" id="7782348">++</span>&nbsp;<span class="op" id="7782351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782355">w</span>&nbsp;<span class="op" id="7782357">:=</span>&nbsp;<span class="ident" id="7782360"><a href="/gostd/compress/lzw/writer.go.html#5746657">NewWriter</a></span><span class="op" id="7782369">(</span><span class="ident" id="7782370"><a href="/gostd/compress/lzw/writer_test.go.html#7779429">ioutil</a></span><span class="op" id="7782376">.</span><span class="ident" id="7782377"><a href="/gostd/io/ioutil/ioutil.go.html#3768458">Discard</a></span><span class="op" id="7782384">,</span>&nbsp;<span class="ident" id="7782386"><a href="/gostd/compress/lzw/reader.go.html#5734384">LSB</a></span><span class="op" id="7782389">,</span>&nbsp;<span class="num" id="7782391">8</span><span class="op" id="7782392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782396"><a href="/gostd/compress/lzw/writer_test.go.html#7782355">w</a></span><span class="op" id="7782397">.</span><span class="ident" id="7782398"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7782403">(</span><span class="ident" id="7782404"><a href="/gostd/compress/lzw/writer_test.go.html#7782148">buf1</a></span><span class="op" id="7782408">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782412"><a href="/gostd/compress/lzw/writer_test.go.html#7782355">w</a></span><span class="op" id="7782413">.</span><span class="ident" id="7782414"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7782419">(</span><span class="op" id="7782420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7782423">}</span><br>
<span class="lineno"></span><span class="op" id="7782425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7782428">func</span>&nbsp;<span class="ident" id="7782433">BenchmarkEncoder1e4</span><span class="op" id="7782452">(</span><span class="ident" id="7782453">b</span>&nbsp;<span class="op" id="7782455">*</span><span class="ident" id="7782456"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7782463">.</span><span class="ident" id="7782464"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7782465">)</span>&nbsp;<span class="op" id="7782467">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782470"><a href="/gostd/compress/lzw/writer_test.go.html#7781924">benchmarkEncoder</a></span><span class="op" id="7782486">(</span><span class="ident" id="7782487"><a href="/gostd/compress/lzw/writer_test.go.html#7782453">b</a></span><span class="op" id="7782488">,</span>&nbsp;<span class="num" id="7782490">1e4</span><span class="op" id="7782493">)</span><br>
<span class="lineno"></span><span class="op" id="7782495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7782498">func</span>&nbsp;<span class="ident" id="7782503">BenchmarkEncoder1e5</span><span class="op" id="7782522">(</span><span class="ident" id="7782523">b</span>&nbsp;<span class="op" id="7782525">*</span><span class="ident" id="7782526"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7782533">.</span><span class="ident" id="7782534"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7782535">)</span>&nbsp;<span class="op" id="7782537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782540"><a href="/gostd/compress/lzw/writer_test.go.html#7781924">benchmarkEncoder</a></span><span class="op" id="7782556">(</span><span class="ident" id="7782557"><a href="/gostd/compress/lzw/writer_test.go.html#7782523">b</a></span><span class="op" id="7782558">,</span>&nbsp;<span class="num" id="7782560">1e5</span><span class="op" id="7782563">)</span><br>
<span class="lineno">140</span><span class="op" id="7782565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7782568">func</span>&nbsp;<span class="ident" id="7782573">BenchmarkEncoder1e6</span><span class="op" id="7782592">(</span><span class="ident" id="7782593">b</span>&nbsp;<span class="op" id="7782595">*</span><span class="ident" id="7782596"><a href="/gostd/compress/lzw/writer_test.go.html#7779459">testing</a></span><span class="op" id="7782603">.</span><span class="ident" id="7782604"><a href="/gostd/testing/benchmark.go.html#5450963">B</a></span><span class="op" id="7782605">)</span>&nbsp;<span class="op" id="7782607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7782610"><a href="/gostd/compress/lzw/writer_test.go.html#7781924">benchmarkEncoder</a></span><span class="op" id="7782626">(</span><span class="ident" id="7782627"><a href="/gostd/compress/lzw/writer_test.go.html#7782593">b</a></span><span class="op" id="7782628">,</span>&nbsp;<span class="num" id="7782630">1e6</span><span class="op" id="7782633">)</span><br>
<span class="lineno"></span><span class="op" id="7782635">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
