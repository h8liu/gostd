<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log</h2>
<ul>
<li><a href="/gostd/log/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/log/log.go.html">log.go</a></li>
<li><a href="/gostd/log/log_test.go.html" class="current">log_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8398325">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8398380">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8398434">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8398485">package</span>&nbsp;<span class="ident" id="8398493">log</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8398498">//&nbsp;These&nbsp;tests&nbsp;are&nbsp;too&nbsp;simple.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8398530">import</span>&nbsp;<span class="op" id="8398537">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8398540">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8398549">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8398555">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8398565">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8398575">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8398578">const</span>&nbsp;<span class="op" id="8398584">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398587">Rdate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8398601">=</span>&nbsp;<span class="string" id="8398603">`[0-9][0-9][0-9][0-9]/[0-9][0-9]/[0-9][0-9]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398649">Rtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8398663">=</span>&nbsp;<span class="string" id="8398665">`[0-9][0-9]:[0-9][0-9]:[0-9][0-9]`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398701">Rmicroseconds</span>&nbsp;<span class="op" id="8398715">=</span>&nbsp;<span class="string" id="8398717">`\.[0-9][0-9][0-9][0-9][0-9][0-9]`</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398753">Rline</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8398767">=</span>&nbsp;<span class="string" id="8398769">`(54|56):`</span>&nbsp;<span class="comment" id="8398780">//&nbsp;must&nbsp;update&nbsp;if&nbsp;the&nbsp;calls&nbsp;to&nbsp;l.Printf&nbsp;/&nbsp;l.Print&nbsp;below&nbsp;move</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398842">Rlongfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8398856">=</span>&nbsp;<span class="string" id="8398858">`.*/[A-Za-z0-9_\-]+\.go:`</span>&nbsp;<span class="op" id="8398884">+</span>&nbsp;<span class="ident" id="8398886">Rline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398893">Rshortfile</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8398907">=</span>&nbsp;<span class="string" id="8398909">`[A-Za-z0-9_\-]+\.go:`</span>&nbsp;<span class="op" id="8398932">+</span>&nbsp;<span class="ident" id="8398934">Rline</span><br>
<span class="lineno"></span><span class="op" id="8398940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8398943">type</span>&nbsp;<span class="ident" id="8398948">tester</span>&nbsp;<span class="keyword" id="8398955">struct</span>&nbsp;<span class="op" id="8398962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398965">flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8398973">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398978">prefix</span>&nbsp;&nbsp;<span class="builtintype" id="8398986">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8398994">pattern</span>&nbsp;<span class="builtintype" id="8399002">string</span>&nbsp;<span class="comment" id="8399009">//&nbsp;regexp&nbsp;that&nbsp;log&nbsp;output&nbsp;must&nbsp;match;&nbsp;we&nbsp;add&nbsp;^&nbsp;and&nbsp;expected_text$&nbsp;always</span><br>
<span class="lineno"></span><span class="op" id="8399082">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="8399085">var</span>&nbsp;<span class="ident" id="8399089">tests</span>&nbsp;<span class="op" id="8399095">=</span>&nbsp;<span class="op" id="8399097">[</span><span class="op" id="8399098">]</span><span class="ident" id="8399099">tester</span><span class="op" id="8399105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8399108">//&nbsp;individual&nbsp;pieces:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399131">{</span><span class="num" id="8399132">0</span><span class="op" id="8399133">,</span>&nbsp;<span class="string" id="8399135">&#34;&#34;</span><span class="op" id="8399137">,</span>&nbsp;<span class="string" id="8399139">&#34;&#34;</span><span class="op" id="8399141">}</span><span class="op" id="8399142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399145">{</span><span class="num" id="8399146">0</span><span class="op" id="8399147">,</span>&nbsp;<span class="string" id="8399149">&#34;XXX&#34;</span><span class="op" id="8399154">,</span>&nbsp;<span class="string" id="8399156">&#34;XXX&#34;</span><span class="op" id="8399161">}</span><span class="op" id="8399162">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399165">{</span><span class="ident" id="8399166">Ldate</span><span class="op" id="8399171">,</span>&nbsp;<span class="string" id="8399173">&#34;&#34;</span><span class="op" id="8399175">,</span>&nbsp;<span class="ident" id="8399177">Rdate</span>&nbsp;<span class="op" id="8399183">+</span>&nbsp;<span class="string" id="8399185">&#34;&nbsp;&#34;</span><span class="op" id="8399188">}</span><span class="op" id="8399189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399192">{</span><span class="ident" id="8399193">Ltime</span><span class="op" id="8399198">,</span>&nbsp;<span class="string" id="8399200">&#34;&#34;</span><span class="op" id="8399202">,</span>&nbsp;<span class="ident" id="8399204">Rtime</span>&nbsp;<span class="op" id="8399210">+</span>&nbsp;<span class="string" id="8399212">&#34;&nbsp;&#34;</span><span class="op" id="8399215">}</span><span class="op" id="8399216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399219">{</span><span class="ident" id="8399220">Ltime</span>&nbsp;<span class="op" id="8399226">|</span>&nbsp;<span class="ident" id="8399228">Lmicroseconds</span><span class="op" id="8399241">,</span>&nbsp;<span class="string" id="8399243">&#34;&#34;</span><span class="op" id="8399245">,</span>&nbsp;<span class="ident" id="8399247">Rtime</span>&nbsp;<span class="op" id="8399253">+</span>&nbsp;<span class="ident" id="8399255">Rmicroseconds</span>&nbsp;<span class="op" id="8399269">+</span>&nbsp;<span class="string" id="8399271">&#34;&nbsp;&#34;</span><span class="op" id="8399274">}</span><span class="op" id="8399275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399278">{</span><span class="ident" id="8399279">Lmicroseconds</span><span class="op" id="8399292">,</span>&nbsp;<span class="string" id="8399294">&#34;&#34;</span><span class="op" id="8399296">,</span>&nbsp;<span class="ident" id="8399298">Rtime</span>&nbsp;<span class="op" id="8399304">+</span>&nbsp;<span class="ident" id="8399306">Rmicroseconds</span>&nbsp;<span class="op" id="8399320">+</span>&nbsp;<span class="string" id="8399322">&#34;&nbsp;&#34;</span><span class="op" id="8399325">}</span><span class="op" id="8399326">,</span>&nbsp;<span class="comment" id="8399328">//&nbsp;microsec&nbsp;implies&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399354">{</span><span class="ident" id="8399355">Llongfile</span><span class="op" id="8399364">,</span>&nbsp;<span class="string" id="8399366">&#34;&#34;</span><span class="op" id="8399368">,</span>&nbsp;<span class="ident" id="8399370">Rlongfile</span>&nbsp;<span class="op" id="8399380">+</span>&nbsp;<span class="string" id="8399382">&#34;&nbsp;&#34;</span><span class="op" id="8399385">}</span><span class="op" id="8399386">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399389">{</span><span class="ident" id="8399390">Lshortfile</span><span class="op" id="8399400">,</span>&nbsp;<span class="string" id="8399402">&#34;&#34;</span><span class="op" id="8399404">,</span>&nbsp;<span class="ident" id="8399406">Rshortfile</span>&nbsp;<span class="op" id="8399417">+</span>&nbsp;<span class="string" id="8399419">&#34;&nbsp;&#34;</span><span class="op" id="8399422">}</span><span class="op" id="8399423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399426">{</span><span class="ident" id="8399427">Llongfile</span>&nbsp;<span class="op" id="8399437">|</span>&nbsp;<span class="ident" id="8399439">Lshortfile</span><span class="op" id="8399449">,</span>&nbsp;<span class="string" id="8399451">&#34;&#34;</span><span class="op" id="8399453">,</span>&nbsp;<span class="ident" id="8399455">Rshortfile</span>&nbsp;<span class="op" id="8399466">+</span>&nbsp;<span class="string" id="8399468">&#34;&nbsp;&#34;</span><span class="op" id="8399471">}</span><span class="op" id="8399472">,</span>&nbsp;<span class="comment" id="8399474">//&nbsp;shortfile&nbsp;overrides&nbsp;longfile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8399507">//&nbsp;everything&nbsp;at&nbsp;once:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399531">{</span><span class="ident" id="8399532">Ldate</span>&nbsp;<span class="op" id="8399538">|</span>&nbsp;<span class="ident" id="8399540">Ltime</span>&nbsp;<span class="op" id="8399546">|</span>&nbsp;<span class="ident" id="8399548">Lmicroseconds</span>&nbsp;<span class="op" id="8399562">|</span>&nbsp;<span class="ident" id="8399564">Llongfile</span><span class="op" id="8399573">,</span>&nbsp;<span class="string" id="8399575">&#34;XXX&#34;</span><span class="op" id="8399580">,</span>&nbsp;<span class="string" id="8399582">&#34;XXX&#34;</span>&nbsp;<span class="op" id="8399588">+</span>&nbsp;<span class="ident" id="8399590">Rdate</span>&nbsp;<span class="op" id="8399596">+</span>&nbsp;<span class="string" id="8399598">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="8399602">+</span>&nbsp;<span class="ident" id="8399604">Rtime</span>&nbsp;<span class="op" id="8399610">+</span>&nbsp;<span class="ident" id="8399612">Rmicroseconds</span>&nbsp;<span class="op" id="8399626">+</span>&nbsp;<span class="string" id="8399628">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="8399632">+</span>&nbsp;<span class="ident" id="8399634">Rlongfile</span>&nbsp;<span class="op" id="8399644">+</span>&nbsp;<span class="string" id="8399646">&#34;&nbsp;&#34;</span><span class="op" id="8399649">}</span><span class="op" id="8399650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8399653">{</span><span class="ident" id="8399654">Ldate</span>&nbsp;<span class="op" id="8399660">|</span>&nbsp;<span class="ident" id="8399662">Ltime</span>&nbsp;<span class="op" id="8399668">|</span>&nbsp;<span class="ident" id="8399670">Lmicroseconds</span>&nbsp;<span class="op" id="8399684">|</span>&nbsp;<span class="ident" id="8399686">Lshortfile</span><span class="op" id="8399696">,</span>&nbsp;<span class="string" id="8399698">&#34;XXX&#34;</span><span class="op" id="8399703">,</span>&nbsp;<span class="string" id="8399705">&#34;XXX&#34;</span>&nbsp;<span class="op" id="8399711">+</span>&nbsp;<span class="ident" id="8399713">Rdate</span>&nbsp;<span class="op" id="8399719">+</span>&nbsp;<span class="string" id="8399721">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="8399725">+</span>&nbsp;<span class="ident" id="8399727">Rtime</span>&nbsp;<span class="op" id="8399733">+</span>&nbsp;<span class="ident" id="8399735">Rmicroseconds</span>&nbsp;<span class="op" id="8399749">+</span>&nbsp;<span class="string" id="8399751">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="8399755">+</span>&nbsp;<span class="ident" id="8399757">Rshortfile</span>&nbsp;<span class="op" id="8399768">+</span>&nbsp;<span class="string" id="8399770">&#34;&nbsp;&#34;</span><span class="op" id="8399773">}</span><span class="op" id="8399774">,</span><br>
<span class="lineno">45</span><span class="op" id="8399776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8399779">//&nbsp;Test&nbsp;using&nbsp;Println(&#34;hello&#34;,&nbsp;23,&nbsp;&#34;world&#34;)&nbsp;or&nbsp;using&nbsp;Printf(&#34;hello&nbsp;%d&nbsp;world&#34;,&nbsp;23)</span><br>
<span class="lineno"></span><span class="keyword" id="8399861">func</span>&nbsp;<span class="ident" id="8399866">testPrint</span><span class="op" id="8399875">(</span><span class="ident" id="8399876">t</span>&nbsp;<span class="op" id="8399878">*</span><span class="ident" id="8399879">testing</span><span class="op" id="8399886">.</span><span class="ident" id="8399887">T</span><span class="op" id="8399888">,</span>&nbsp;<span class="ident" id="8399890">flag</span>&nbsp;<span class="builtintype" id="8399895">int</span><span class="op" id="8399898">,</span>&nbsp;<span class="ident" id="8399900">prefix</span>&nbsp;<span class="builtintype" id="8399907">string</span><span class="op" id="8399913">,</span>&nbsp;<span class="ident" id="8399915">pattern</span>&nbsp;<span class="builtintype" id="8399923">string</span><span class="op" id="8399929">,</span>&nbsp;<span class="ident" id="8399931">useFormat</span>&nbsp;<span class="builtintype" id="8399941">bool</span><span class="op" id="8399945">)</span>&nbsp;<span class="op" id="8399947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8399950">buf</span>&nbsp;<span class="op" id="8399954">:=</span>&nbsp;<span class="builtinfunc" id="8399957">new</span><span class="op" id="8399960">(</span><span class="ident" id="8399961">bytes</span><span class="op" id="8399966">.</span><span class="ident" id="8399967">Buffer</span><span class="op" id="8399973">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8399976">SetOutput</span><span class="op" id="8399985">(</span><span class="ident" id="8399986">buf</span><span class="op" id="8399989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8399992">SetFlags</span><span class="op" id="8400000">(</span><span class="ident" id="8400001">flag</span><span class="op" id="8400005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400008">SetPrefix</span><span class="op" id="8400017">(</span><span class="ident" id="8400018">prefix</span><span class="op" id="8400024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400027">if</span>&nbsp;<span class="ident" id="8400030">useFormat</span>&nbsp;<span class="op" id="8400040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400044">Printf</span><span class="op" id="8400050">(</span><span class="string" id="8400051">&#34;hello&nbsp;%d&nbsp;world&#34;</span><span class="op" id="8400067">,</span>&nbsp;<span class="num" id="8400069">23</span><span class="op" id="8400071">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400074">}</span>&nbsp;<span class="keyword" id="8400076">else</span>&nbsp;<span class="op" id="8400081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400085">Println</span><span class="op" id="8400092">(</span><span class="string" id="8400093">&#34;hello&#34;</span><span class="op" id="8400100">,</span>&nbsp;<span class="num" id="8400102">23</span><span class="op" id="8400104">,</span>&nbsp;<span class="string" id="8400106">&#34;world&#34;</span><span class="op" id="8400113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400119">line</span>&nbsp;<span class="op" id="8400124">:=</span>&nbsp;<span class="ident" id="8400127">buf</span><span class="op" id="8400130">.</span><span class="ident" id="8400131">String</span><span class="op" id="8400137">(</span><span class="op" id="8400138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400141">line</span>&nbsp;<span class="op" id="8400146">=</span>&nbsp;<span class="ident" id="8400148">line</span><span class="op" id="8400152">[</span><span class="num" id="8400153">0</span>&nbsp;<span class="op" id="8400155">:</span>&nbsp;<span class="builtinfunc" id="8400157">len</span><span class="op" id="8400160">(</span><span class="ident" id="8400161">line</span><span class="op" id="8400165">)</span><span class="op" id="8400166">-</span><span class="num" id="8400167">1</span><span class="op" id="8400168">]</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400171">pattern</span>&nbsp;<span class="op" id="8400179">=</span>&nbsp;<span class="string" id="8400181">&#34;^&#34;</span>&nbsp;<span class="op" id="8400185">+</span>&nbsp;<span class="ident" id="8400187">pattern</span>&nbsp;<span class="op" id="8400195">+</span>&nbsp;<span class="string" id="8400197">&#34;hello&nbsp;23&nbsp;world$&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400216">matched</span><span class="op" id="8400223">,</span>&nbsp;<span class="ident" id="8400225">err4</span>&nbsp;<span class="op" id="8400230">:=</span>&nbsp;<span class="ident" id="8400233">regexp</span><span class="op" id="8400239">.</span><span class="ident" id="8400240">MatchString</span><span class="op" id="8400251">(</span><span class="ident" id="8400252">pattern</span><span class="op" id="8400259">,</span>&nbsp;<span class="ident" id="8400261">line</span><span class="op" id="8400265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400268">if</span>&nbsp;<span class="ident" id="8400271">err4</span>&nbsp;<span class="op" id="8400276">!=</span>&nbsp;<span class="builtintype" id="8400279">nil</span>&nbsp;<span class="op" id="8400283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400287">t</span><span class="op" id="8400288">.</span><span class="ident" id="8400289">Fatal</span><span class="op" id="8400294">(</span><span class="string" id="8400295">&#34;pattern&nbsp;did&nbsp;not&nbsp;compile:&#34;</span><span class="op" id="8400321">,</span>&nbsp;<span class="ident" id="8400323">err4</span><span class="op" id="8400327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400330">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400333">if</span>&nbsp;<span class="op" id="8400336">!</span><span class="ident" id="8400337">matched</span>&nbsp;<span class="op" id="8400345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400349">t</span><span class="op" id="8400350">.</span><span class="ident" id="8400351">Errorf</span><span class="op" id="8400357">(</span><span class="string" id="8400358">&#34;log&nbsp;output&nbsp;should&nbsp;match&nbsp;%q&nbsp;is&nbsp;%q&#34;</span><span class="op" id="8400392">,</span>&nbsp;<span class="ident" id="8400394">pattern</span><span class="op" id="8400401">,</span>&nbsp;<span class="ident" id="8400403">line</span><span class="op" id="8400407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400413">SetOutput</span><span class="op" id="8400422">(</span><span class="ident" id="8400423">os</span><span class="op" id="8400425">.</span><span class="ident" id="8400426">Stderr</span><span class="op" id="8400432">)</span><br>
<span class="lineno"></span><span class="op" id="8400434">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="8400437">func</span>&nbsp;<span class="ident" id="8400442">TestAll</span><span class="op" id="8400449">(</span><span class="ident" id="8400450">t</span>&nbsp;<span class="op" id="8400452">*</span><span class="ident" id="8400453">testing</span><span class="op" id="8400460">.</span><span class="ident" id="8400461">T</span><span class="op" id="8400462">)</span>&nbsp;<span class="op" id="8400464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400467">for</span>&nbsp;<span class="ident" id="8400471">_</span><span class="op" id="8400472">,</span>&nbsp;<span class="ident" id="8400474">testcase</span>&nbsp;<span class="op" id="8400483">:=</span>&nbsp;<span class="keyword" id="8400486">range</span>&nbsp;<span class="ident" id="8400492">tests</span>&nbsp;<span class="op" id="8400498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400502">testPrint</span><span class="op" id="8400511">(</span><span class="ident" id="8400512">t</span><span class="op" id="8400513">,</span>&nbsp;<span class="ident" id="8400515">testcase</span><span class="op" id="8400523">.</span><span class="ident" id="8400524">flag</span><span class="op" id="8400528">,</span>&nbsp;<span class="ident" id="8400530">testcase</span><span class="op" id="8400538">.</span><span class="ident" id="8400539">prefix</span><span class="op" id="8400545">,</span>&nbsp;<span class="ident" id="8400547">testcase</span><span class="op" id="8400555">.</span><span class="ident" id="8400556">pattern</span><span class="op" id="8400563">,</span>&nbsp;<span class="builtintype" id="8400565">false</span><span class="op" id="8400570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400574">testPrint</span><span class="op" id="8400583">(</span><span class="ident" id="8400584">t</span><span class="op" id="8400585">,</span>&nbsp;<span class="ident" id="8400587">testcase</span><span class="op" id="8400595">.</span><span class="ident" id="8400596">flag</span><span class="op" id="8400600">,</span>&nbsp;<span class="ident" id="8400602">testcase</span><span class="op" id="8400610">.</span><span class="ident" id="8400611">prefix</span><span class="op" id="8400617">,</span>&nbsp;<span class="ident" id="8400619">testcase</span><span class="op" id="8400627">.</span><span class="ident" id="8400628">pattern</span><span class="op" id="8400635">,</span>&nbsp;<span class="builtintype" id="8400637">true</span><span class="op" id="8400641">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400644">}</span><br>
<span class="lineno"></span><span class="op" id="8400646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8400649">func</span>&nbsp;<span class="ident" id="8400654">TestOutput</span><span class="op" id="8400664">(</span><span class="ident" id="8400665">t</span>&nbsp;<span class="op" id="8400667">*</span><span class="ident" id="8400668">testing</span><span class="op" id="8400675">.</span><span class="ident" id="8400676">T</span><span class="op" id="8400677">)</span>&nbsp;<span class="op" id="8400679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400682">const</span>&nbsp;<span class="ident" id="8400688">testString</span>&nbsp;<span class="op" id="8400699">=</span>&nbsp;<span class="string" id="8400701">&#34;test&#34;</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400709">var</span>&nbsp;<span class="ident" id="8400713">b</span>&nbsp;<span class="ident" id="8400715">bytes</span><span class="op" id="8400720">.</span><span class="ident" id="8400721">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400729">l</span>&nbsp;<span class="op" id="8400731">:=</span>&nbsp;<span class="ident" id="8400734">New</span><span class="op" id="8400737">(</span><span class="op" id="8400738">&amp;</span><span class="ident" id="8400739">b</span><span class="op" id="8400740">,</span>&nbsp;<span class="string" id="8400742">&#34;&#34;</span><span class="op" id="8400744">,</span>&nbsp;<span class="num" id="8400746">0</span><span class="op" id="8400747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400750">l</span><span class="op" id="8400751">.</span><span class="ident" id="8400752">Println</span><span class="op" id="8400759">(</span><span class="ident" id="8400760">testString</span><span class="op" id="8400770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400773">if</span>&nbsp;<span class="ident" id="8400776">expect</span>&nbsp;<span class="op" id="8400783">:=</span>&nbsp;<span class="ident" id="8400786">testString</span>&nbsp;<span class="op" id="8400797">+</span>&nbsp;<span class="string" id="8400799">&#34;\n&#34;</span><span class="op" id="8400803">;</span>&nbsp;<span class="ident" id="8400805">b</span><span class="op" id="8400806">.</span><span class="ident" id="8400807">String</span><span class="op" id="8400813">(</span><span class="op" id="8400814">)</span>&nbsp;<span class="op" id="8400816">!=</span>&nbsp;<span class="ident" id="8400819">expect</span>&nbsp;<span class="op" id="8400826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400830">t</span><span class="op" id="8400831">.</span><span class="ident" id="8400832">Errorf</span><span class="op" id="8400838">(</span><span class="string" id="8400839">&#34;log&nbsp;output&nbsp;should&nbsp;match&nbsp;%q&nbsp;is&nbsp;%q&#34;</span><span class="op" id="8400873">,</span>&nbsp;<span class="ident" id="8400875">expect</span><span class="op" id="8400881">,</span>&nbsp;<span class="ident" id="8400883">b</span><span class="op" id="8400884">.</span><span class="ident" id="8400885">String</span><span class="op" id="8400891">(</span><span class="op" id="8400892">)</span><span class="op" id="8400893">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8400896">}</span><br>
<span class="lineno"></span><span class="op" id="8400898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8400901">func</span>&nbsp;<span class="ident" id="8400906">TestFlagAndPrefixSetting</span><span class="op" id="8400930">(</span><span class="ident" id="8400931">t</span>&nbsp;<span class="op" id="8400933">*</span><span class="ident" id="8400934">testing</span><span class="op" id="8400941">.</span><span class="ident" id="8400942">T</span><span class="op" id="8400943">)</span>&nbsp;<span class="op" id="8400945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8400948">var</span>&nbsp;<span class="ident" id="8400952">b</span>&nbsp;<span class="ident" id="8400954">bytes</span><span class="op" id="8400959">.</span><span class="ident" id="8400960">Buffer</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8400968">l</span>&nbsp;<span class="op" id="8400970">:=</span>&nbsp;<span class="ident" id="8400973">New</span><span class="op" id="8400976">(</span><span class="op" id="8400977">&amp;</span><span class="ident" id="8400978">b</span><span class="op" id="8400979">,</span>&nbsp;<span class="string" id="8400981">&#34;Test:&#34;</span><span class="op" id="8400988">,</span>&nbsp;<span class="ident" id="8400990">LstdFlags</span><span class="op" id="8400999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401002">f</span>&nbsp;<span class="op" id="8401004">:=</span>&nbsp;<span class="ident" id="8401007">l</span><span class="op" id="8401008">.</span><span class="ident" id="8401009">Flags</span><span class="op" id="8401014">(</span><span class="op" id="8401015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401018">if</span>&nbsp;<span class="ident" id="8401021">f</span>&nbsp;<span class="op" id="8401023">!=</span>&nbsp;<span class="ident" id="8401026">LstdFlags</span>&nbsp;<span class="op" id="8401036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401040">t</span><span class="op" id="8401041">.</span><span class="ident" id="8401042">Errorf</span><span class="op" id="8401048">(</span><span class="string" id="8401049">&#34;Flags&nbsp;1:&nbsp;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8401078">,</span>&nbsp;<span class="ident" id="8401080">LstdFlags</span><span class="op" id="8401089">,</span>&nbsp;<span class="ident" id="8401091">f</span><span class="op" id="8401092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401095">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401098">l</span><span class="op" id="8401099">.</span><span class="ident" id="8401100">SetFlags</span><span class="op" id="8401108">(</span><span class="ident" id="8401109">f</span>&nbsp;<span class="op" id="8401111">|</span>&nbsp;<span class="ident" id="8401113">Lmicroseconds</span><span class="op" id="8401126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401129">f</span>&nbsp;<span class="op" id="8401131">=</span>&nbsp;<span class="ident" id="8401133">l</span><span class="op" id="8401134">.</span><span class="ident" id="8401135">Flags</span><span class="op" id="8401140">(</span><span class="op" id="8401141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401144">if</span>&nbsp;<span class="ident" id="8401147">f</span>&nbsp;<span class="op" id="8401149">!=</span>&nbsp;<span class="ident" id="8401152">LstdFlags</span><span class="op" id="8401161">|</span><span class="ident" id="8401162">Lmicroseconds</span>&nbsp;<span class="op" id="8401176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401180">t</span><span class="op" id="8401181">.</span><span class="ident" id="8401182">Errorf</span><span class="op" id="8401188">(</span><span class="string" id="8401189">&#34;Flags&nbsp;2:&nbsp;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8401218">,</span>&nbsp;<span class="ident" id="8401220">LstdFlags</span><span class="op" id="8401229">|</span><span class="ident" id="8401230">Lmicroseconds</span><span class="op" id="8401243">,</span>&nbsp;<span class="ident" id="8401245">f</span><span class="op" id="8401246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401249">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401252">p</span>&nbsp;<span class="op" id="8401254">:=</span>&nbsp;<span class="ident" id="8401257">l</span><span class="op" id="8401258">.</span><span class="ident" id="8401259">Prefix</span><span class="op" id="8401265">(</span><span class="op" id="8401266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401269">if</span>&nbsp;<span class="ident" id="8401272">p</span>&nbsp;<span class="op" id="8401274">!=</span>&nbsp;<span class="string" id="8401277">&#34;Test:&#34;</span>&nbsp;<span class="op" id="8401285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401289">t</span><span class="op" id="8401290">.</span><span class="ident" id="8401291">Errorf</span><span class="op" id="8401297">(</span><span class="string" id="8401298">`Prefix:&nbsp;expected&nbsp;&#34;Test:&#34;&nbsp;got&nbsp;%q`</span><span class="op" id="8401331">,</span>&nbsp;<span class="ident" id="8401333">p</span><span class="op" id="8401334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401340">l</span><span class="op" id="8401341">.</span><span class="ident" id="8401342">SetPrefix</span><span class="op" id="8401351">(</span><span class="string" id="8401352">&#34;Reality:&#34;</span><span class="op" id="8401362">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401365">p</span>&nbsp;<span class="op" id="8401367">=</span>&nbsp;<span class="ident" id="8401369">l</span><span class="op" id="8401370">.</span><span class="ident" id="8401371">Prefix</span><span class="op" id="8401377">(</span><span class="op" id="8401378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401381">if</span>&nbsp;<span class="ident" id="8401384">p</span>&nbsp;<span class="op" id="8401386">!=</span>&nbsp;<span class="string" id="8401389">&#34;Reality:&#34;</span>&nbsp;<span class="op" id="8401400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401404">t</span><span class="op" id="8401405">.</span><span class="ident" id="8401406">Errorf</span><span class="op" id="8401412">(</span><span class="string" id="8401413">`Prefix:&nbsp;expected&nbsp;&#34;Reality:&#34;&nbsp;got&nbsp;%q`</span><span class="op" id="8401449">,</span>&nbsp;<span class="ident" id="8401451">p</span><span class="op" id="8401452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8401458">//&nbsp;Verify&nbsp;a&nbsp;log&nbsp;message&nbsp;looks&nbsp;right,&nbsp;with&nbsp;our&nbsp;prefix&nbsp;and&nbsp;microseconds&nbsp;present.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401538">l</span><span class="op" id="8401539">.</span><span class="ident" id="8401540">Print</span><span class="op" id="8401545">(</span><span class="string" id="8401546">&#34;hello&#34;</span><span class="op" id="8401553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401556">pattern</span>&nbsp;<span class="op" id="8401564">:=</span>&nbsp;<span class="string" id="8401567">&#34;^Reality:&#34;</span>&nbsp;<span class="op" id="8401579">+</span>&nbsp;<span class="ident" id="8401581">Rdate</span>&nbsp;<span class="op" id="8401587">+</span>&nbsp;<span class="string" id="8401589">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="8401593">+</span>&nbsp;<span class="ident" id="8401595">Rtime</span>&nbsp;<span class="op" id="8401601">+</span>&nbsp;<span class="ident" id="8401603">Rmicroseconds</span>&nbsp;<span class="op" id="8401617">+</span>&nbsp;<span class="string" id="8401619">&#34;&nbsp;hello\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401631">matched</span><span class="op" id="8401638">,</span>&nbsp;<span class="ident" id="8401640">err</span>&nbsp;<span class="op" id="8401644">:=</span>&nbsp;<span class="ident" id="8401647">regexp</span><span class="op" id="8401653">.</span><span class="ident" id="8401654">Match</span><span class="op" id="8401659">(</span><span class="ident" id="8401660">pattern</span><span class="op" id="8401667">,</span>&nbsp;<span class="ident" id="8401669">b</span><span class="op" id="8401670">.</span><span class="ident" id="8401671">Bytes</span><span class="op" id="8401676">(</span><span class="op" id="8401677">)</span><span class="op" id="8401678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401681">if</span>&nbsp;<span class="ident" id="8401684">err</span>&nbsp;<span class="op" id="8401688">!=</span>&nbsp;<span class="builtintype" id="8401691">nil</span>&nbsp;<span class="op" id="8401695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401699">t</span><span class="op" id="8401700">.</span><span class="ident" id="8401701">Fatalf</span><span class="op" id="8401707">(</span><span class="string" id="8401708">&#34;pattern&nbsp;%q&nbsp;did&nbsp;not&nbsp;compile:&nbsp;%s&#34;</span><span class="op" id="8401740">,</span>&nbsp;<span class="ident" id="8401742">pattern</span><span class="op" id="8401749">,</span>&nbsp;<span class="ident" id="8401751">err</span><span class="op" id="8401754">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8401760">if</span>&nbsp;<span class="op" id="8401763">!</span><span class="ident" id="8401764">matched</span>&nbsp;<span class="op" id="8401772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8401776">t</span><span class="op" id="8401777">.</span><span class="ident" id="8401778">Error</span><span class="op" id="8401783">(</span><span class="string" id="8401784">&#34;message&nbsp;did&nbsp;not&nbsp;match&nbsp;pattern&#34;</span><span class="op" id="8401815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8401818">}</span><br>
<span class="lineno"></span><span class="op" id="8401820">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
