<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3344722">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3344777">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3344831">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3344882">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3344959">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3344969">package</span>&nbsp;<span class="ident" id="3344977">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3344983">import</span>&nbsp;<span class="op" id="3344990">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3344993">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3345003">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3345006">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3345056">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3345114">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3345180">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3345237">type</span>&nbsp;<span class="ident" id="3345242">lazybuf</span>&nbsp;<span class="keyword" id="3345250">struct</span>&nbsp;<span class="op" id="3345257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345260">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3345264">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345272">buf</span>&nbsp;<span class="op" id="3345276">[</span><span class="op" id="3345277">]</span><span class="builtintype" id="3345278">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345284">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3345288">int</span><br>
<span class="lineno"></span><span class="op" id="3345292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3345295">func</span>&nbsp;<span class="op" id="3345300">(</span><span class="ident" id="3345301">b</span>&nbsp;<span class="op" id="3345303">*</span><span class="ident" id="3345304">lazybuf</span><span class="op" id="3345311">)</span>&nbsp;<span class="ident" id="3345313">index</span><span class="op" id="3345318">(</span><span class="ident" id="3345319">i</span>&nbsp;<span class="builtintype" id="3345321">int</span><span class="op" id="3345324">)</span>&nbsp;<span class="builtintype" id="3345326">byte</span>&nbsp;<span class="op" id="3345331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345334">if</span>&nbsp;<span class="ident" id="3345337">b</span><span class="op" id="3345338">.</span><span class="ident" id="3345339">buf</span>&nbsp;<span class="op" id="3345343">!=</span>&nbsp;<span class="ident" id="3345346">nil</span>&nbsp;<span class="op" id="3345350">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345354">return</span>&nbsp;<span class="ident" id="3345361">b</span><span class="op" id="3345362">.</span><span class="ident" id="3345363">buf</span><span class="op" id="3345366">[</span><span class="ident" id="3345367">i</span><span class="op" id="3345368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345374">return</span>&nbsp;<span class="ident" id="3345381">b</span><span class="op" id="3345382">.</span><span class="ident" id="3345383">s</span><span class="op" id="3345384">[</span><span class="ident" id="3345385">i</span><span class="op" id="3345386">]</span><br>
<span class="lineno"></span><span class="op" id="3345388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3345391">func</span>&nbsp;<span class="op" id="3345396">(</span><span class="ident" id="3345397">b</span>&nbsp;<span class="op" id="3345399">*</span><span class="ident" id="3345400">lazybuf</span><span class="op" id="3345407">)</span>&nbsp;<span class="builtinfunc" id="3345409">append</span><span class="op" id="3345415">(</span><span class="ident" id="3345416">c</span>&nbsp;<span class="builtintype" id="3345418">byte</span><span class="op" id="3345422">)</span>&nbsp;<span class="op" id="3345424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345427">if</span>&nbsp;<span class="ident" id="3345430">b</span><span class="op" id="3345431">.</span><span class="ident" id="3345432">buf</span>&nbsp;<span class="op" id="3345436">==</span>&nbsp;<span class="ident" id="3345439">nil</span>&nbsp;<span class="op" id="3345443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345447">if</span>&nbsp;<span class="ident" id="3345450">b</span><span class="op" id="3345451">.</span><span class="ident" id="3345452">w</span>&nbsp;<span class="op" id="3345454">&lt;</span>&nbsp;<span class="builtinfunc" id="3345456">len</span><span class="op" id="3345459">(</span><span class="ident" id="3345460">b</span><span class="op" id="3345461">.</span><span class="ident" id="3345462">s</span><span class="op" id="3345463">)</span>&nbsp;<span class="op" id="3345465">&amp;&amp;</span>&nbsp;<span class="ident" id="3345468">b</span><span class="op" id="3345469">.</span><span class="ident" id="3345470">s</span><span class="op" id="3345471">[</span><span class="ident" id="3345472">b</span><span class="op" id="3345473">.</span><span class="ident" id="3345474">w</span><span class="op" id="3345475">]</span>&nbsp;<span class="op" id="3345477">==</span>&nbsp;<span class="ident" id="3345480">c</span>&nbsp;<span class="op" id="3345482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345487">b</span><span class="op" id="3345488">.</span><span class="ident" id="3345489">w</span><span class="op" id="3345490">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345496">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345509">b</span><span class="op" id="3345510">.</span><span class="ident" id="3345511">buf</span>&nbsp;<span class="op" id="3345515">=</span>&nbsp;<span class="builtinfunc" id="3345517">make</span><span class="op" id="3345521">(</span><span class="op" id="3345522">[</span><span class="op" id="3345523">]</span><span class="builtintype" id="3345524">byte</span><span class="op" id="3345528">,</span>&nbsp;<span class="builtinfunc" id="3345530">len</span><span class="op" id="3345533">(</span><span class="ident" id="3345534">b</span><span class="op" id="3345535">.</span><span class="ident" id="3345536">s</span><span class="op" id="3345537">)</span><span class="op" id="3345538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3345542">copy</span><span class="op" id="3345546">(</span><span class="ident" id="3345547">b</span><span class="op" id="3345548">.</span><span class="ident" id="3345549">buf</span><span class="op" id="3345552">,</span>&nbsp;<span class="ident" id="3345554">b</span><span class="op" id="3345555">.</span><span class="ident" id="3345556">s</span><span class="op" id="3345557">[</span><span class="op" id="3345558">:</span><span class="ident" id="3345559">b</span><span class="op" id="3345560">.</span><span class="ident" id="3345561">w</span><span class="op" id="3345562">]</span><span class="op" id="3345563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345569">b</span><span class="op" id="3345570">.</span><span class="ident" id="3345571">buf</span><span class="op" id="3345574">[</span><span class="ident" id="3345575">b</span><span class="op" id="3345576">.</span><span class="ident" id="3345577">w</span><span class="op" id="3345578">]</span>&nbsp;<span class="op" id="3345580">=</span>&nbsp;<span class="ident" id="3345582">c</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3345585">b</span><span class="op" id="3345586">.</span><span class="ident" id="3345587">w</span><span class="op" id="3345588">++</span><br>
<span class="lineno"></span><span class="op" id="3345591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3345594">func</span>&nbsp;<span class="op" id="3345599">(</span><span class="ident" id="3345600">b</span>&nbsp;<span class="op" id="3345602">*</span><span class="ident" id="3345603">lazybuf</span><span class="op" id="3345610">)</span>&nbsp;<span class="builtintype" id="3345612">string</span><span class="op" id="3345618">(</span><span class="op" id="3345619">)</span>&nbsp;<span class="builtintype" id="3345621">string</span>&nbsp;<span class="op" id="3345628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345631">if</span>&nbsp;<span class="ident" id="3345634">b</span><span class="op" id="3345635">.</span><span class="ident" id="3345636">buf</span>&nbsp;<span class="op" id="3345640">==</span>&nbsp;<span class="ident" id="3345643">nil</span>&nbsp;<span class="op" id="3345647">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345651">return</span>&nbsp;<span class="ident" id="3345658">b</span><span class="op" id="3345659">.</span><span class="ident" id="3345660">s</span><span class="op" id="3345661">[</span><span class="op" id="3345662">:</span><span class="ident" id="3345663">b</span><span class="op" id="3345664">.</span><span class="ident" id="3345665">w</span><span class="op" id="3345666">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3345669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3345672">return</span>&nbsp;<span class="builtintype" id="3345679">string</span><span class="op" id="3345685">(</span><span class="ident" id="3345686">b</span><span class="op" id="3345687">.</span><span class="ident" id="3345688">buf</span><span class="op" id="3345691">[</span><span class="op" id="3345692">:</span><span class="ident" id="3345693">b</span><span class="op" id="3345694">.</span><span class="ident" id="3345695">w</span><span class="op" id="3345696">]</span><span class="op" id="3345697">)</span><br>
<span class="lineno"></span><span class="op" id="3345699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3345702">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3345761">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3345826">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3345882">//</span><br>
<span class="lineno"></span><span class="comment" id="3345885">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3345937">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3346003">//&nbsp;&nbsp;&nbsp;&nbsp3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3346074">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3346128">//&nbsp;&nbsp;&nbsp;&nbsp4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3346182">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3346246">//</span><br>
<span class="lineno"></span><span class="comment" id="3346249">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3346314">//</span><br>
<span class="lineno"></span><span class="comment" id="3346317">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3346376">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3346403">//</span><br>
<span class="lineno"></span><span class="comment" id="3346406">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3346462">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3346490">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3346542">func</span>&nbsp;<span class="ident" id="3346547">Clean</span><span class="op" id="3346552">(</span><span class="ident" id="3346553">path</span>&nbsp;<span class="builtintype" id="3346558">string</span><span class="op" id="3346564">)</span>&nbsp;<span class="builtintype" id="3346566">string</span>&nbsp;<span class="op" id="3346573">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346576">if</span>&nbsp;<span class="ident" id="3346579">path</span>&nbsp;<span class="op" id="3346584">==</span>&nbsp;<span class="string" id="3346587">&#34;&#34;</span>&nbsp;<span class="op" id="3346590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346594">return</span>&nbsp;<span class="string" id="3346601">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3346606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346610">rooted</span>&nbsp;<span class="op" id="3346617">:=</span>&nbsp;<span class="ident" id="3346620">path</span><span class="op" id="3346624">[</span><span class="num" id="3346625">0</span><span class="op" id="3346626">]</span>&nbsp;<span class="op" id="3346628">==</span>&nbsp;<span class="string" id="3346631">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346636">n</span>&nbsp;<span class="op" id="3346638">:=</span>&nbsp;<span class="builtinfunc" id="3346641">len</span><span class="op" id="3346644">(</span><span class="ident" id="3346645">path</span><span class="op" id="3346649">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346653">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346669">//&nbsp;&nbsp;&nbsp;&nbspreading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346728">//&nbsp;&nbsp;&nbsp;&nbspwriting&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346782">//&nbsp;&nbsp;&nbsp;&nbspdotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3346844">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspit&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346909">out</span>&nbsp;<span class="op" id="3346913">:=</span>&nbsp;<span class="ident" id="3346916">lazybuf</span><span class="op" id="3346923">{</span><span class="ident" id="3346924">s</span><span class="op" id="3346925">:</span>&nbsp;<span class="ident" id="3346927">path</span><span class="op" id="3346931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346934">r</span><span class="op" id="3346935">,</span>&nbsp;<span class="ident" id="3346937">dotdot</span>&nbsp;<span class="op" id="3346944">:=</span>&nbsp;<span class="num" id="3346947">0</span><span class="op" id="3346948">,</span>&nbsp;<span class="num" id="3346950">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3346953">if</span>&nbsp;<span class="ident" id="3346956">rooted</span>&nbsp;<span class="op" id="3346963">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346967">out</span><span class="op" id="3346970">.</span><span class="builtinfunc" id="3346971">append</span><span class="op" id="3346977">(</span><span class="string" id="3346978">&#39;/&#39;</span><span class="op" id="3346981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3346985">r</span><span class="op" id="3346986">,</span>&nbsp;<span class="ident" id="3346988">dotdot</span>&nbsp;<span class="op" id="3346995">=</span>&nbsp;<span class="num" id="3346997">1</span><span class="op" id="3346998">,</span>&nbsp;<span class="num" id="3347000">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347007">for</span>&nbsp;<span class="ident" id="3347011">r</span>&nbsp;<span class="op" id="3347013">&lt;</span>&nbsp;<span class="ident" id="3347015">n</span>&nbsp;<span class="op" id="3347017">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347021">switch</span>&nbsp;<span class="op" id="3347028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347032">case</span>&nbsp;<span class="ident" id="3347037">path</span><span class="op" id="3347041">[</span><span class="ident" id="3347042">r</span><span class="op" id="3347043">]</span>&nbsp;<span class="op" id="3347045">==</span>&nbsp;<span class="string" id="3347048">&#39;/&#39;</span><span class="op" id="3347051">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347056">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347081">r</span><span class="op" id="3347082">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347087">case</span>&nbsp;<span class="ident" id="3347092">path</span><span class="op" id="3347096">[</span><span class="ident" id="3347097">r</span><span class="op" id="3347098">]</span>&nbsp;<span class="op" id="3347100">==</span>&nbsp;<span class="string" id="3347103">&#39;.&#39;</span>&nbsp;<span class="op" id="3347107">&amp;&amp;</span>&nbsp;<span class="op" id="3347110">(</span><span class="ident" id="3347111">r</span><span class="op" id="3347112">+</span><span class="num" id="3347113">1</span>&nbsp;<span class="op" id="3347115">==</span>&nbsp;<span class="ident" id="3347118">n</span>&nbsp;<span class="op" id="3347120">||</span>&nbsp;<span class="ident" id="3347123">path</span><span class="op" id="3347127">[</span><span class="ident" id="3347128">r</span><span class="op" id="3347129">+</span><span class="num" id="3347130">1</span><span class="op" id="3347131">]</span>&nbsp;<span class="op" id="3347133">==</span>&nbsp;<span class="string" id="3347136">&#39;/&#39;</span><span class="op" id="3347139">)</span><span class="op" id="3347140">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347145">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347161">r</span><span class="op" id="3347162">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347167">case</span>&nbsp;<span class="ident" id="3347172">path</span><span class="op" id="3347176">[</span><span class="ident" id="3347177">r</span><span class="op" id="3347178">]</span>&nbsp;<span class="op" id="3347180">==</span>&nbsp;<span class="string" id="3347183">&#39;.&#39;</span>&nbsp;<span class="op" id="3347187">&amp;&amp;</span>&nbsp;<span class="ident" id="3347190">path</span><span class="op" id="3347194">[</span><span class="ident" id="3347195">r</span><span class="op" id="3347196">+</span><span class="num" id="3347197">1</span><span class="op" id="3347198">]</span>&nbsp;<span class="op" id="3347200">==</span>&nbsp;<span class="string" id="3347203">&#39;.&#39;</span>&nbsp;<span class="op" id="3347207">&amp;&amp;</span>&nbsp;<span class="op" id="3347210">(</span><span class="ident" id="3347211">r</span><span class="op" id="3347212">+</span><span class="num" id="3347213">2</span>&nbsp;<span class="op" id="3347215">==</span>&nbsp;<span class="ident" id="3347218">n</span>&nbsp;<span class="op" id="3347220">||</span>&nbsp;<span class="ident" id="3347223">path</span><span class="op" id="3347227">[</span><span class="ident" id="3347228">r</span><span class="op" id="3347229">+</span><span class="num" id="3347230">2</span><span class="op" id="3347231">]</span>&nbsp;<span class="op" id="3347233">==</span>&nbsp;<span class="string" id="3347236">&#39;/&#39;</span><span class="op" id="3347239">)</span><span class="op" id="3347240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347245">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347280">r</span>&nbsp;<span class="op" id="3347282">+=</span>&nbsp;<span class="num" id="3347285">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347290">switch</span>&nbsp;<span class="op" id="3347297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347302">case</span>&nbsp;<span class="ident" id="3347307">out</span><span class="op" id="3347310">.</span><span class="ident" id="3347311">w</span>&nbsp;<span class="op" id="3347313">&gt;</span>&nbsp;<span class="ident" id="3347315">dotdot</span><span class="op" id="3347321">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347327">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347348">out</span><span class="op" id="3347351">.</span><span class="ident" id="3347352">w</span><span class="op" id="3347353">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347360">for</span>&nbsp;<span class="ident" id="3347364">out</span><span class="op" id="3347367">.</span><span class="ident" id="3347368">w</span>&nbsp;<span class="op" id="3347370">&gt;</span>&nbsp;<span class="ident" id="3347372">dotdot</span>&nbsp;<span class="op" id="3347379">&amp;&amp;</span>&nbsp;<span class="ident" id="3347382">out</span><span class="op" id="3347385">.</span><span class="ident" id="3347386">index</span><span class="op" id="3347391">(</span><span class="ident" id="3347392">out</span><span class="op" id="3347395">.</span><span class="ident" id="3347396">w</span><span class="op" id="3347397">)</span>&nbsp;<span class="op" id="3347399">!=</span>&nbsp;<span class="string" id="3347402">&#39;/&#39;</span>&nbsp;<span class="op" id="3347406">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347413">out</span><span class="op" id="3347416">.</span><span class="ident" id="3347417">w</span><span class="op" id="3347418">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347430">case</span>&nbsp;<span class="op" id="3347435">!</span><span class="ident" id="3347436">rooted</span><span class="op" id="3347442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347448">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347511">if</span>&nbsp;<span class="ident" id="3347514">out</span><span class="op" id="3347517">.</span><span class="ident" id="3347518">w</span>&nbsp;<span class="op" id="3347520">&gt;</span>&nbsp;<span class="num" id="3347522">0</span>&nbsp;<span class="op" id="3347524">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347531">out</span><span class="op" id="3347534">.</span><span class="builtinfunc" id="3347535">append</span><span class="op" id="3347541">(</span><span class="string" id="3347542">&#39;/&#39;</span><span class="op" id="3347545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347557">out</span><span class="op" id="3347560">.</span><span class="builtinfunc" id="3347561">append</span><span class="op" id="3347567">(</span><span class="string" id="3347568">&#39;.&#39;</span><span class="op" id="3347571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347577">out</span><span class="op" id="3347580">.</span><span class="builtinfunc" id="3347581">append</span><span class="op" id="3347587">(</span><span class="string" id="3347588">&#39;.&#39;</span><span class="op" id="3347591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347597">dotdot</span>&nbsp;<span class="op" id="3347604">=</span>&nbsp;<span class="ident" id="3347606">out</span><span class="op" id="3347609">.</span><span class="ident" id="3347610">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347619">default</span><span class="op" id="3347626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347631">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347656">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347682">if</span>&nbsp;<span class="ident" id="3347685">rooted</span>&nbsp;<span class="op" id="3347692">&amp;&amp;</span>&nbsp;<span class="ident" id="3347695">out</span><span class="op" id="3347698">.</span><span class="ident" id="3347699">w</span>&nbsp;<span class="op" id="3347701">!=</span>&nbsp;<span class="num" id="3347704">1</span>&nbsp;<span class="op" id="3347706">||</span>&nbsp;<span class="op" id="3347709">!</span><span class="ident" id="3347710">rooted</span>&nbsp;<span class="op" id="3347717">&amp;&amp;</span>&nbsp;<span class="ident" id="3347720">out</span><span class="op" id="3347723">.</span><span class="ident" id="3347724">w</span>&nbsp;<span class="op" id="3347726">!=</span>&nbsp;<span class="num" id="3347729">0</span>&nbsp;<span class="op" id="3347731">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347737">out</span><span class="op" id="3347740">.</span><span class="builtinfunc" id="3347741">append</span><span class="op" id="3347747">(</span><span class="string" id="3347748">&#39;/&#39;</span><span class="op" id="3347751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347761">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347780">for</span>&nbsp;<span class="op" id="3347784">;</span>&nbsp;<span class="ident" id="3347786">r</span>&nbsp;<span class="op" id="3347788">&lt;</span>&nbsp;<span class="ident" id="3347790">n</span>&nbsp;<span class="op" id="3347792">&amp;&amp;</span>&nbsp;<span class="ident" id="3347795">path</span><span class="op" id="3347799">[</span><span class="ident" id="3347800">r</span><span class="op" id="3347801">]</span>&nbsp;<span class="op" id="3347803">!=</span>&nbsp;<span class="string" id="3347806">&#39;/&#39;</span><span class="op" id="3347809">;</span>&nbsp;<span class="ident" id="3347811">r</span><span class="op" id="3347812">++</span>&nbsp;<span class="op" id="3347815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3347821">out</span><span class="op" id="3347824">.</span><span class="builtinfunc" id="3347825">append</span><span class="op" id="3347831">(</span><span class="ident" id="3347832">path</span><span class="op" id="3347836">[</span><span class="ident" id="3347837">r</span><span class="op" id="3347838">]</span><span class="op" id="3347839">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3347855">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347886">if</span>&nbsp;<span class="ident" id="3347889">out</span><span class="op" id="3347892">.</span><span class="ident" id="3347893">w</span>&nbsp;<span class="op" id="3347895">==</span>&nbsp;<span class="num" id="3347898">0</span>&nbsp;<span class="op" id="3347900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347904">return</span>&nbsp;<span class="string" id="3347911">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3347916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3347920">return</span>&nbsp;<span class="ident" id="3347927">out</span><span class="op" id="3347930">.</span><span class="builtintype" id="3347931">string</span><span class="op" id="3347937">(</span><span class="op" id="3347938">)</span><br>
<span class="lineno">135</span><span class="op" id="3347940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3347943">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3348003">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3348062">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3348123">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3348144">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3348207">func</span>&nbsp;<span class="ident" id="3348212">Split</span><span class="op" id="3348217">(</span><span class="ident" id="3348218">path</span>&nbsp;<span class="builtintype" id="3348223">string</span><span class="op" id="3348229">)</span>&nbsp;<span class="op" id="3348231">(</span><span class="ident" id="3348232">dir</span><span class="op" id="3348235">,</span>&nbsp;<span class="ident" id="3348237">file</span>&nbsp;<span class="builtintype" id="3348242">string</span><span class="op" id="3348248">)</span>&nbsp;<span class="op" id="3348250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3348253">i</span>&nbsp;<span class="op" id="3348255">:=</span>&nbsp;<span class="ident" id="3348258">strings</span><span class="op" id="3348265">.</span><span class="ident" id="3348266">LastIndex</span><span class="op" id="3348275">(</span><span class="ident" id="3348276">path</span><span class="op" id="3348280">,</span>&nbsp;<span class="string" id="3348282">&#34;/&#34;</span><span class="op" id="3348285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348288">return</span>&nbsp;<span class="ident" id="3348295">path</span><span class="op" id="3348299">[</span><span class="op" id="3348300">:</span><span class="ident" id="3348301">i</span><span class="op" id="3348302">+</span><span class="num" id="3348303">1</span><span class="op" id="3348304">]</span><span class="op" id="3348305">,</span>&nbsp;<span class="ident" id="3348307">path</span><span class="op" id="3348311">[</span><span class="ident" id="3348312">i</span><span class="op" id="3348313">+</span><span class="num" id="3348314">1</span><span class="op" id="3348315">:</span><span class="op" id="3348316">]</span><br>
<span class="lineno">145</span><span class="op" id="3348318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348321">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3348392">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3348464">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3348498">func</span>&nbsp;<span class="ident" id="3348503">Join</span><span class="op" id="3348507">(</span><span class="ident" id="3348508">elem</span>&nbsp;<span class="op" id="3348513">...</span><span class="builtintype" id="3348516">string</span><span class="op" id="3348522">)</span>&nbsp;<span class="builtintype" id="3348524">string</span>&nbsp;<span class="op" id="3348531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348534">for</span>&nbsp;<span class="ident" id="3348538">i</span><span class="op" id="3348539">,</span>&nbsp;<span class="ident" id="3348541">e</span>&nbsp;<span class="op" id="3348543">:=</span>&nbsp;<span class="keyword" id="3348546">range</span>&nbsp;<span class="ident" id="3348552">elem</span>&nbsp;<span class="op" id="3348557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348561">if</span>&nbsp;<span class="ident" id="3348564">e</span>&nbsp;<span class="op" id="3348566">!=</span>&nbsp;<span class="string" id="3348569">&#34;&#34;</span>&nbsp;<span class="op" id="3348572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348577">return</span>&nbsp;<span class="ident" id="3348584">Clean</span><span class="op" id="3348589">(</span><span class="ident" id="3348590">strings</span><span class="op" id="3348597">.</span><span class="ident" id="3348598">Join</span><span class="op" id="3348602">(</span><span class="ident" id="3348603">elem</span><span class="op" id="3348607">[</span><span class="ident" id="3348608">i</span><span class="op" id="3348609">:</span><span class="op" id="3348610">]</span><span class="op" id="3348611">,</span>&nbsp;<span class="string" id="3348613">&#34;/&#34;</span><span class="op" id="3348616">)</span><span class="op" id="3348617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348621">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348627">return</span>&nbsp;<span class="string" id="3348634">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3348637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348640">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3348693">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3348751">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3348800">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3348835">func</span>&nbsp;<span class="ident" id="3348840">Ext</span><span class="op" id="3348843">(</span><span class="ident" id="3348844">path</span>&nbsp;<span class="builtintype" id="3348849">string</span><span class="op" id="3348855">)</span>&nbsp;<span class="builtintype" id="3348857">string</span>&nbsp;<span class="op" id="3348864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348867">for</span>&nbsp;<span class="ident" id="3348871">i</span>&nbsp;<span class="op" id="3348873">:=</span>&nbsp;<span class="builtinfunc" id="3348876">len</span><span class="op" id="3348879">(</span><span class="ident" id="3348880">path</span><span class="op" id="3348884">)</span>&nbsp;<span class="op" id="3348886">-</span>&nbsp;<span class="num" id="3348888">1</span><span class="op" id="3348889">;</span>&nbsp;<span class="ident" id="3348891">i</span>&nbsp;<span class="op" id="3348893">&gt;=</span>&nbsp;<span class="num" id="3348896">0</span>&nbsp;<span class="op" id="3348898">&amp;&amp;</span>&nbsp;<span class="ident" id="3348901">path</span><span class="op" id="3348905">[</span><span class="ident" id="3348906">i</span><span class="op" id="3348907">]</span>&nbsp;<span class="op" id="3348909">!=</span>&nbsp;<span class="string" id="3348912">&#39;/&#39;</span><span class="op" id="3348915">;</span>&nbsp;<span class="ident" id="3348917">i</span><span class="op" id="3348918">--</span>&nbsp;<span class="op" id="3348921">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348925">if</span>&nbsp;<span class="ident" id="3348928">path</span><span class="op" id="3348932">[</span><span class="ident" id="3348933">i</span><span class="op" id="3348934">]</span>&nbsp;<span class="op" id="3348936">==</span>&nbsp;<span class="string" id="3348939">&#39;.&#39;</span>&nbsp;<span class="op" id="3348943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348948">return</span>&nbsp;<span class="ident" id="3348955">path</span><span class="op" id="3348959">[</span><span class="ident" id="3348960">i</span><span class="op" id="3348961">:</span><span class="op" id="3348962">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3348969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3348972">return</span>&nbsp;<span class="string" id="3348979">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3348982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3348985">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3349027">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3349095">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3349138">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3349201">func</span>&nbsp;<span class="ident" id="3349206">Base</span><span class="op" id="3349210">(</span><span class="ident" id="3349211">path</span>&nbsp;<span class="builtintype" id="3349216">string</span><span class="op" id="3349222">)</span>&nbsp;<span class="builtintype" id="3349224">string</span>&nbsp;<span class="op" id="3349231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349234">if</span>&nbsp;<span class="ident" id="3349237">path</span>&nbsp;<span class="op" id="3349242">==</span>&nbsp;<span class="string" id="3349245">&#34;&#34;</span>&nbsp;<span class="op" id="3349248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349252">return</span>&nbsp;<span class="string" id="3349259">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349264">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3349267">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349295">for</span>&nbsp;<span class="builtinfunc" id="3349299">len</span><span class="op" id="3349302">(</span><span class="ident" id="3349303">path</span><span class="op" id="3349307">)</span>&nbsp;<span class="op" id="3349309">&gt;</span>&nbsp;<span class="num" id="3349311">0</span>&nbsp;<span class="op" id="3349313">&amp;&amp;</span>&nbsp;<span class="ident" id="3349316">path</span><span class="op" id="3349320">[</span><span class="builtinfunc" id="3349321">len</span><span class="op" id="3349324">(</span><span class="ident" id="3349325">path</span><span class="op" id="3349329">)</span><span class="op" id="3349330">-</span><span class="num" id="3349331">1</span><span class="op" id="3349332">]</span>&nbsp;<span class="op" id="3349334">==</span>&nbsp;<span class="string" id="3349337">&#39;/&#39;</span>&nbsp;<span class="op" id="3349341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349345">path</span>&nbsp;<span class="op" id="3349350">=</span>&nbsp;<span class="ident" id="3349352">path</span><span class="op" id="3349356">[</span><span class="num" id="3349357">0</span>&nbsp;<span class="op" id="3349359">:</span>&nbsp;<span class="builtinfunc" id="3349361">len</span><span class="op" id="3349364">(</span><span class="ident" id="3349365">path</span><span class="op" id="3349369">)</span><span class="op" id="3349370">-</span><span class="num" id="3349371">1</span><span class="op" id="3349372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3349378">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349404">if</span>&nbsp;<span class="ident" id="3349407">i</span>&nbsp;<span class="op" id="3349409">:=</span>&nbsp;<span class="ident" id="3349412">strings</span><span class="op" id="3349419">.</span><span class="ident" id="3349420">LastIndex</span><span class="op" id="3349429">(</span><span class="ident" id="3349430">path</span><span class="op" id="3349434">,</span>&nbsp;<span class="string" id="3349436">&#34;/&#34;</span><span class="op" id="3349439">)</span><span class="op" id="3349440">;</span>&nbsp;<span class="ident" id="3349442">i</span>&nbsp;<span class="op" id="3349444">&gt;=</span>&nbsp;<span class="num" id="3349447">0</span>&nbsp;<span class="op" id="3349449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3349453">path</span>&nbsp;<span class="op" id="3349458">=</span>&nbsp;<span class="ident" id="3349460">path</span><span class="op" id="3349464">[</span><span class="ident" id="3349465">i</span><span class="op" id="3349466">+</span><span class="num" id="3349467">1</span><span class="op" id="3349468">:</span><span class="op" id="3349469">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3349475">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349514">if</span>&nbsp;<span class="ident" id="3349517">path</span>&nbsp;<span class="op" id="3349522">==</span>&nbsp;<span class="string" id="3349525">&#34;&#34;</span>&nbsp;<span class="op" id="3349528">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349532">return</span>&nbsp;<span class="string" id="3349539">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3349544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349547">return</span>&nbsp;<span class="ident" id="3349554">path</span><br>
<span class="lineno"></span><span class="op" id="3349559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3349562">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3349609">func</span>&nbsp;<span class="ident" id="3349614">IsAbs</span><span class="op" id="3349619">(</span><span class="ident" id="3349620">path</span>&nbsp;<span class="builtintype" id="3349625">string</span><span class="op" id="3349631">)</span>&nbsp;<span class="builtintype" id="3349633">bool</span>&nbsp;<span class="op" id="3349638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3349641">return</span>&nbsp;<span class="builtinfunc" id="3349648">len</span><span class="op" id="3349651">(</span><span class="ident" id="3349652">path</span><span class="op" id="3349656">)</span>&nbsp;<span class="op" id="3349658">&gt;</span>&nbsp;<span class="num" id="3349660">0</span>&nbsp;<span class="op" id="3349662">&amp;&amp;</span>&nbsp;<span class="ident" id="3349665">path</span><span class="op" id="3349669">[</span><span class="num" id="3349670">0</span><span class="op" id="3349671">]</span>&nbsp;<span class="op" id="3349673">==</span>&nbsp;<span class="string" id="3349676">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3349680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3349683">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3349764">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3349846">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3349870">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3349912">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3349989">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3350071">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3350081">func</span>&nbsp;<span class="ident" id="3350086">Dir</span><span class="op" id="3350089">(</span><span class="ident" id="3350090">path</span>&nbsp;<span class="builtintype" id="3350095">string</span><span class="op" id="3350101">)</span>&nbsp;<span class="builtintype" id="3350103">string</span>&nbsp;<span class="op" id="3350110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3350113">dir</span><span class="op" id="3350116">,</span>&nbsp;<span class="ident" id="3350118">_</span>&nbsp;<span class="op" id="3350120">:=</span>&nbsp;<span class="ident" id="3350123">Split</span><span class="op" id="3350128">(</span><span class="ident" id="3350129">path</span><span class="op" id="3350133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3350136">return</span>&nbsp;<span class="ident" id="3350143">Clean</span><span class="op" id="3350148">(</span><span class="ident" id="3350149">dir</span><span class="op" id="3350152">)</span><br>
<span class="lineno">210</span><span class="op" id="3350154">}</span>
</div>
</body>
</html>
