<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7868155">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7868210">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7868264">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7868315">package</span>&nbsp;<span class="ident" id="7868323">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7868328">import</span>&nbsp;<span class="op" id="7868335">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7868338">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7868346">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7868356">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7868359">type</span>&nbsp;<span class="ident" id="7868364">hostTest</span>&nbsp;<span class="keyword" id="7868373">struct</span>&nbsp;<span class="op" id="7868380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868383">host</span>&nbsp;<span class="builtintype" id="7868388">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868396">ips</span>&nbsp;&nbsp;<span class="op" id="7868401">[</span><span class="op" id="7868402">]</span><span class="ident" id="7868403">IP</span><br>
<span class="lineno">15</span><span class="op" id="7868406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7868409">var</span>&nbsp;<span class="ident" id="7868413">hosttests</span>&nbsp;<span class="op" id="7868423">=</span>&nbsp;<span class="op" id="7868425">[</span><span class="op" id="7868426">]</span><span class="ident" id="7868427">hostTest</span><span class="op" id="7868435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868438">{</span><span class="string" id="7868439">&#34;odin&#34;</span><span class="op" id="7868445">,</span>&nbsp;<span class="op" id="7868447">[</span><span class="op" id="7868448">]</span><span class="ident" id="7868449">IP</span><span class="op" id="7868451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868455">IPv4</span><span class="op" id="7868459">(</span><span class="num" id="7868460">127</span><span class="op" id="7868463">,</span>&nbsp;<span class="num" id="7868465">0</span><span class="op" id="7868466">,</span>&nbsp;<span class="num" id="7868468">0</span><span class="op" id="7868469">,</span>&nbsp;<span class="num" id="7868471">2</span><span class="op" id="7868472">)</span><span class="op" id="7868473">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868477">IPv4</span><span class="op" id="7868481">(</span><span class="num" id="7868482">127</span><span class="op" id="7868485">,</span>&nbsp;<span class="num" id="7868487">0</span><span class="op" id="7868488">,</span>&nbsp;<span class="num" id="7868490">0</span><span class="op" id="7868491">,</span>&nbsp;<span class="num" id="7868493">3</span><span class="op" id="7868494">)</span><span class="op" id="7868495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868499">ParseIP</span><span class="op" id="7868506">(</span><span class="string" id="7868507">&#34;::2&#34;</span><span class="op" id="7868512">)</span><span class="op" id="7868513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868516">}</span><span class="op" id="7868517">}</span><span class="op" id="7868518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868521">{</span><span class="string" id="7868522">&#34;thor&#34;</span><span class="op" id="7868528">,</span>&nbsp;<span class="op" id="7868530">[</span><span class="op" id="7868531">]</span><span class="ident" id="7868532">IP</span><span class="op" id="7868534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868538">IPv4</span><span class="op" id="7868542">(</span><span class="num" id="7868543">127</span><span class="op" id="7868546">,</span>&nbsp;<span class="num" id="7868548">1</span><span class="op" id="7868549">,</span>&nbsp;<span class="num" id="7868551">1</span><span class="op" id="7868552">,</span>&nbsp;<span class="num" id="7868554">1</span><span class="op" id="7868555">)</span><span class="op" id="7868556">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868559">}</span><span class="op" id="7868560">}</span><span class="op" id="7868561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868564">{</span><span class="string" id="7868565">&#34;loki&#34;</span><span class="op" id="7868571">,</span>&nbsp;<span class="op" id="7868573">[</span><span class="op" id="7868574">]</span><span class="ident" id="7868575">IP</span><span class="op" id="7868577">{</span><span class="op" id="7868578">}</span><span class="op" id="7868579">}</span><span class="op" id="7868580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868583">{</span><span class="string" id="7868584">&#34;ullr&#34;</span><span class="op" id="7868590">,</span>&nbsp;<span class="op" id="7868592">[</span><span class="op" id="7868593">]</span><span class="ident" id="7868594">IP</span><span class="op" id="7868596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868600">IPv4</span><span class="op" id="7868604">(</span><span class="num" id="7868605">127</span><span class="op" id="7868608">,</span>&nbsp;<span class="num" id="7868610">1</span><span class="op" id="7868611">,</span>&nbsp;<span class="num" id="7868613">1</span><span class="op" id="7868614">,</span>&nbsp;<span class="num" id="7868616">2</span><span class="op" id="7868617">)</span><span class="op" id="7868618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868621">}</span><span class="op" id="7868622">}</span><span class="op" id="7868623">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868626">{</span><span class="string" id="7868627">&#34;ullrhost&#34;</span><span class="op" id="7868637">,</span>&nbsp;<span class="op" id="7868639">[</span><span class="op" id="7868640">]</span><span class="ident" id="7868641">IP</span><span class="op" id="7868643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868647">IPv4</span><span class="op" id="7868651">(</span><span class="num" id="7868652">127</span><span class="op" id="7868655">,</span>&nbsp;<span class="num" id="7868657">1</span><span class="op" id="7868658">,</span>&nbsp;<span class="num" id="7868660">1</span><span class="op" id="7868661">,</span>&nbsp;<span class="num" id="7868663">2</span><span class="op" id="7868664">)</span><span class="op" id="7868665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868668">}</span><span class="op" id="7868669">}</span><span class="op" id="7868670">,</span><br>
<span class="lineno"></span><span class="op" id="7868672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7868675">func</span>&nbsp;<span class="ident" id="7868680">TestLookupStaticHost</span><span class="op" id="7868700">(</span><span class="ident" id="7868701">t</span>&nbsp;<span class="op" id="7868703">*</span><span class="ident" id="7868704">testing</span><span class="op" id="7868711">.</span><span class="ident" id="7868712">T</span><span class="op" id="7868713">)</span>&nbsp;<span class="op" id="7868715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868718">p</span>&nbsp;<span class="op" id="7868720">:=</span>&nbsp;<span class="ident" id="7868723">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868734">hostsPath</span>&nbsp;<span class="op" id="7868744">=</span>&nbsp;<span class="string" id="7868746">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868764">for</span>&nbsp;<span class="ident" id="7868768">i</span>&nbsp;<span class="op" id="7868770">:=</span>&nbsp;<span class="num" id="7868773">0</span><span class="op" id="7868774">;</span>&nbsp;<span class="ident" id="7868776">i</span>&nbsp;<span class="op" id="7868778">&lt;</span>&nbsp;<span class="builtinfunc" id="7868780">len</span><span class="op" id="7868783">(</span><span class="ident" id="7868784">hosttests</span><span class="op" id="7868793">)</span><span class="op" id="7868794">;</span>&nbsp;<span class="ident" id="7868796">i</span><span class="op" id="7868797">++</span>&nbsp;<span class="op" id="7868800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868804">tt</span>&nbsp;<span class="op" id="7868807">:=</span>&nbsp;<span class="ident" id="7868810">hosttests</span><span class="op" id="7868819">[</span><span class="ident" id="7868820">i</span><span class="op" id="7868821">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868825">ips</span>&nbsp;<span class="op" id="7868829">:=</span>&nbsp;<span class="ident" id="7868832">lookupStaticHost</span><span class="op" id="7868848">(</span><span class="ident" id="7868849">tt</span><span class="op" id="7868851">.</span><span class="ident" id="7868852">host</span><span class="op" id="7868856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868860">if</span>&nbsp;<span class="builtinfunc" id="7868863">len</span><span class="op" id="7868866">(</span><span class="ident" id="7868867">ips</span><span class="op" id="7868870">)</span>&nbsp;<span class="op" id="7868872">!=</span>&nbsp;<span class="builtinfunc" id="7868875">len</span><span class="op" id="7868878">(</span><span class="ident" id="7868879">tt</span><span class="op" id="7868881">.</span><span class="ident" id="7868882">ips</span><span class="op" id="7868885">)</span>&nbsp;<span class="op" id="7868887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868892">t</span><span class="op" id="7868893">.</span><span class="ident" id="7868894">Errorf</span><span class="op" id="7868900">(</span><span class="string" id="7868901">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7868927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7868933">len</span><span class="op" id="7868936">(</span><span class="ident" id="7868937">ips</span><span class="op" id="7868940">)</span><span class="op" id="7868941">,</span>&nbsp;<span class="builtinfunc" id="7868943">len</span><span class="op" id="7868946">(</span><span class="ident" id="7868947">tt</span><span class="op" id="7868949">.</span><span class="ident" id="7868950">ips</span><span class="op" id="7868953">)</span><span class="op" id="7868954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868959">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868974">for</span>&nbsp;<span class="ident" id="7868978">k</span><span class="op" id="7868979">,</span>&nbsp;<span class="ident" id="7868981">v</span>&nbsp;<span class="op" id="7868983">:=</span>&nbsp;<span class="keyword" id="7868986">range</span>&nbsp;<span class="ident" id="7868992">ips</span>&nbsp;<span class="op" id="7868996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869001">if</span>&nbsp;<span class="ident" id="7869004">tt</span><span class="op" id="7869006">.</span><span class="ident" id="7869007">ips</span><span class="op" id="7869010">[</span><span class="ident" id="7869011">k</span><span class="op" id="7869012">]</span><span class="op" id="7869013">.</span><span class="ident" id="7869014">String</span><span class="op" id="7869020">(</span><span class="op" id="7869021">)</span>&nbsp;<span class="op" id="7869023">!=</span>&nbsp;<span class="ident" id="7869026">v</span>&nbsp;<span class="op" id="7869028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869034">t</span><span class="op" id="7869035">.</span><span class="ident" id="7869036">Errorf</span><span class="op" id="7869042">(</span><span class="string" id="7869043">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7869079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869086">tt</span><span class="op" id="7869088">.</span><span class="ident" id="7869089">host</span><span class="op" id="7869093">,</span>&nbsp;<span class="ident" id="7869095">v</span><span class="op" id="7869096">,</span>&nbsp;<span class="ident" id="7869098">tt</span><span class="op" id="7869100">.</span><span class="ident" id="7869101">ips</span><span class="op" id="7869104">[</span><span class="ident" id="7869105">k</span><span class="op" id="7869106">]</span><span class="op" id="7869107">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869122">hostsPath</span>&nbsp;<span class="op" id="7869132">=</span>&nbsp;<span class="ident" id="7869134">p</span><br>
<span class="lineno"></span><span class="op" id="7869136">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="7869139">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="7869193">func</span>&nbsp;<span class="ident" id="7869198">TestSingleLineHostsFile</span><span class="op" id="7869221">(</span><span class="ident" id="7869222">t</span>&nbsp;<span class="op" id="7869224">*</span><span class="ident" id="7869225">testing</span><span class="op" id="7869232">.</span><span class="ident" id="7869233">T</span><span class="op" id="7869234">)</span>&nbsp;<span class="op" id="7869236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869239">p</span>&nbsp;<span class="op" id="7869241">:=</span>&nbsp;<span class="ident" id="7869244">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869255">hostsPath</span>&nbsp;<span class="op" id="7869265">=</span>&nbsp;<span class="string" id="7869267">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869297">ips</span>&nbsp;<span class="op" id="7869301">:=</span>&nbsp;<span class="ident" id="7869304">lookupStaticHost</span><span class="op" id="7869320">(</span><span class="string" id="7869321">&#34;odin&#34;</span><span class="op" id="7869327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869330">if</span>&nbsp;<span class="builtinfunc" id="7869333">len</span><span class="op" id="7869336">(</span><span class="ident" id="7869337">ips</span><span class="op" id="7869340">)</span>&nbsp;<span class="op" id="7869342">!=</span>&nbsp;<span class="num" id="7869345">1</span>&nbsp;<span class="op" id="7869347">||</span>&nbsp;<span class="ident" id="7869350">ips</span><span class="op" id="7869353">[</span><span class="num" id="7869354">0</span><span class="op" id="7869355">]</span>&nbsp;<span class="op" id="7869357">!=</span>&nbsp;<span class="string" id="7869360">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="7869372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869376">t</span><span class="op" id="7869377">.</span><span class="ident" id="7869378">Errorf</span><span class="op" id="7869384">(</span><span class="string" id="7869385">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7869417">,</span>&nbsp;<span class="ident" id="7869419">ips</span><span class="op" id="7869422">,</span>&nbsp;<span class="op" id="7869424">[</span><span class="op" id="7869425">]</span><span class="builtintype" id="7869426">string</span><span class="op" id="7869432">{</span><span class="string" id="7869433">&#34;127.0.0.2&#34;</span><span class="op" id="7869444">}</span><span class="op" id="7869445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869448">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869452">hostsPath</span>&nbsp;<span class="op" id="7869462">=</span>&nbsp;<span class="ident" id="7869464">p</span><br>
<span class="lineno"></span><span class="op" id="7869466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7869469">func</span>&nbsp;<span class="ident" id="7869474">TestLookupHost</span><span class="op" id="7869488">(</span><span class="ident" id="7869489">t</span>&nbsp;<span class="op" id="7869491">*</span><span class="ident" id="7869492">testing</span><span class="op" id="7869499">.</span><span class="ident" id="7869500">T</span><span class="op" id="7869501">)</span>&nbsp;<span class="op" id="7869503">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869506">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869565">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869623">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7869676">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869700">addrs</span><span class="op" id="7869705">,</span>&nbsp;<span class="ident" id="7869707">_</span>&nbsp;<span class="op" id="7869709">:=</span>&nbsp;<span class="ident" id="7869712">LookupHost</span><span class="op" id="7869722">(</span><span class="string" id="7869723">&#34;localhost&#34;</span><span class="op" id="7869734">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869737">sort</span><span class="op" id="7869741">.</span><span class="ident" id="7869742">Strings</span><span class="op" id="7869749">(</span><span class="ident" id="7869750">addrs</span><span class="op" id="7869755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869758">for</span>&nbsp;<span class="ident" id="7869762">i</span>&nbsp;<span class="op" id="7869764">:=</span>&nbsp;<span class="num" id="7869767">0</span><span class="op" id="7869768">;</span>&nbsp;<span class="ident" id="7869770">i</span><span class="op" id="7869771">+</span><span class="num" id="7869772">1</span>&nbsp;<span class="op" id="7869774">&lt;</span>&nbsp;<span class="builtinfunc" id="7869776">len</span><span class="op" id="7869779">(</span><span class="ident" id="7869780">addrs</span><span class="op" id="7869785">)</span><span class="op" id="7869786">;</span>&nbsp;<span class="ident" id="7869788">i</span><span class="op" id="7869789">++</span>&nbsp;<span class="op" id="7869792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869796">if</span>&nbsp;<span class="ident" id="7869799">addrs</span><span class="op" id="7869804">[</span><span class="ident" id="7869805">i</span><span class="op" id="7869806">]</span>&nbsp;<span class="op" id="7869808">==</span>&nbsp;<span class="ident" id="7869811">addrs</span><span class="op" id="7869816">[</span><span class="ident" id="7869817">i</span><span class="op" id="7869818">+</span><span class="num" id="7869819">1</span><span class="op" id="7869820">]</span>&nbsp;<span class="op" id="7869822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869827">t</span><span class="op" id="7869828">.</span><span class="ident" id="7869829">Fatalf</span><span class="op" id="7869835">(</span><span class="string" id="7869836">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="7869893">,</span>&nbsp;<span class="ident" id="7869895">addrs</span><span class="op" id="7869900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869904">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869907">}</span><br>
<span class="lineno"></span><span class="op" id="7869909">}</span>
</div>
</body>
</html>
