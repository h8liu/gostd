<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="6761556">package</span>&nbsp;<span class="ident" id="6761564">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6761571">import</span>&nbsp;<span class="op" id="6761578">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6761581">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="6761591">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6761594">func</span>&nbsp;<span class="ident" id="6761599">TestVirtMemory</span><span class="op" id="6761613">(</span><span class="ident" id="6761614">t</span>&nbsp;<span class="op" id="6761616">*</span><span class="ident" id="6761617">testing</span><span class="op" id="6761624">.</span><span class="ident" id="6761625">T</span><span class="op" id="6761626">)</span>&nbsp;<span class="op" id="6761628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761631">as</span>&nbsp;<span class="op" id="6761634">:=</span>&nbsp;<span class="keyword" id="6761637">func</span><span class="op" id="6761641">(</span><span class="ident" id="6761642">cond</span>&nbsp;<span class="builtintype" id="6761647">bool</span><span class="op" id="6761651">,</span>&nbsp;<span class="ident" id="6761653">s</span>&nbsp;<span class="builtintype" id="6761655">string</span><span class="op" id="6761661">,</span>&nbsp;<span class="ident" id="6761663">args</span>&nbsp;<span class="op" id="6761668">...</span><span class="keyword" id="6761671">interface</span><span class="op" id="6761680">{</span><span class="op" id="6761681">}</span><span class="op" id="6761682">)</span>&nbsp;<span class="op" id="6761684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6761688">if</span>&nbsp;<span class="op" id="6761691">!</span><span class="ident" id="6761692">cond</span>&nbsp;<span class="op" id="6761697">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761702">t</span><span class="op" id="6761703">.</span><span class="ident" id="6761704">Fatalf</span><span class="op" id="6761710">(</span><span class="ident" id="6761711">s</span><span class="op" id="6761712">,</span>&nbsp;<span class="ident" id="6761714">args</span><span class="op" id="6761718">...</span><span class="op" id="6761721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6761725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6761728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761732">eo</span>&nbsp;<span class="op" id="6761735">:=</span>&nbsp;<span class="keyword" id="6761738">func</span><span class="op" id="6761742">(</span><span class="ident" id="6761743">cond</span>&nbsp;<span class="builtintype" id="6761748">bool</span><span class="op" id="6761752">,</span>&nbsp;<span class="ident" id="6761754">s</span>&nbsp;<span class="builtintype" id="6761756">string</span><span class="op" id="6761762">,</span>&nbsp;<span class="ident" id="6761764">args</span>&nbsp;<span class="op" id="6761769">...</span><span class="keyword" id="6761772">interface</span><span class="op" id="6761781">{</span><span class="op" id="6761782">}</span><span class="op" id="6761783">)</span>&nbsp;<span class="op" id="6761785">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6761789">if</span>&nbsp;<span class="ident" id="6761792">cond</span>&nbsp;<span class="op" id="6761797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761802">t</span><span class="op" id="6761803">.</span><span class="ident" id="6761804">Fatalf</span><span class="op" id="6761810">(</span><span class="ident" id="6761811">s</span><span class="op" id="6761812">,</span>&nbsp;<span class="ident" id="6761814">args</span><span class="op" id="6761818">...</span><span class="op" id="6761821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6761825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6761828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761832">m</span>&nbsp;<span class="op" id="6761834">:=</span>&nbsp;<span class="ident" id="6761837">newPhyMemory</span><span class="op" id="6761849">(</span><span class="num" id="6761850">8</span>&nbsp;<span class="op" id="6761852">*</span>&nbsp;<span class="ident" id="6761854">PageSize</span><span class="op" id="6761862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761865">p1</span>&nbsp;<span class="op" id="6761868">:=</span>&nbsp;<span class="ident" id="6761871">m</span><span class="op" id="6761872">.</span><span class="ident" id="6761873">Page</span><span class="op" id="6761877">(</span><span class="num" id="6761878">1</span><span class="op" id="6761879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761882">p2</span>&nbsp;<span class="op" id="6761885">:=</span>&nbsp;<span class="ident" id="6761888">m</span><span class="op" id="6761889">.</span><span class="ident" id="6761890">Page</span><span class="op" id="6761894">(</span><span class="num" id="6761895">2</span><span class="op" id="6761896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761899">p3</span>&nbsp;<span class="op" id="6761902">:=</span>&nbsp;<span class="ident" id="6761905">m</span><span class="op" id="6761906">.</span><span class="ident" id="6761907">Page</span><span class="op" id="6761911">(</span><span class="num" id="6761912">3</span><span class="op" id="6761913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761917">pte1</span>&nbsp;<span class="op" id="6761922">:=</span>&nbsp;<span class="ident" id="6761925">ptEntry</span><span class="op" id="6761932">(</span><span class="num" id="6761933">2</span>&nbsp;<span class="op" id="6761935">*</span>&nbsp;<span class="ident" id="6761937">PageSize</span><span class="op" id="6761945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761948">pte1</span><span class="op" id="6761952">.</span><span class="ident" id="6761953">setBit</span><span class="op" id="6761959">(</span><span class="ident" id="6761960">pteValid</span><span class="op" id="6761968">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6761972">p1</span><span class="op" id="6761974">.</span><span class="ident" id="6761975">WriteWord</span><span class="op" id="6761984">(</span><span class="num" id="6761985">0</span><span class="op" id="6761986">,</span>&nbsp;<span class="builtintype" id="6761988">uint32</span><span class="op" id="6761994">(</span><span class="ident" id="6761995">pte1</span><span class="op" id="6761999">)</span><span class="op" id="6762000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762003">pte1</span>&nbsp;<span class="op" id="6762008">+=</span>&nbsp;<span class="ident" id="6762011">PageSize</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762021">p1</span><span class="op" id="6762023">.</span><span class="ident" id="6762024">WriteWord</span><span class="op" id="6762033">(</span><span class="num" id="6762034">4</span><span class="op" id="6762035">*</span><span class="num" id="6762036">10</span><span class="op" id="6762038">,</span>&nbsp;<span class="builtintype" id="6762040">uint32</span><span class="op" id="6762046">(</span><span class="ident" id="6762047">pte1</span><span class="op" id="6762051">)</span><span class="op" id="6762052">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6762056">for</span>&nbsp;<span class="ident" id="6762060">i</span>&nbsp;<span class="op" id="6762062">:=</span>&nbsp;<span class="builtintype" id="6762065">uint32</span><span class="op" id="6762071">(</span><span class="num" id="6762072">0</span><span class="op" id="6762073">)</span><span class="op" id="6762074">;</span>&nbsp;<span class="ident" id="6762076">i</span>&nbsp;<span class="op" id="6762078">&lt;</span>&nbsp;<span class="num" id="6762080">4</span><span class="op" id="6762081">;</span>&nbsp;<span class="ident" id="6762083">i</span><span class="op" id="6762084">++</span>&nbsp;<span class="op" id="6762087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762091">pte</span>&nbsp;<span class="op" id="6762095">:=</span>&nbsp;<span class="ident" id="6762098">ptEntry</span><span class="op" id="6762105">(</span><span class="op" id="6762106">(</span><span class="ident" id="6762107">i</span>&nbsp;<span class="op" id="6762109">+</span>&nbsp;<span class="num" id="6762111">4</span><span class="op" id="6762112">)</span>&nbsp;<span class="op" id="6762114">*</span>&nbsp;<span class="ident" id="6762116">PageSize</span><span class="op" id="6762124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762128">pte</span><span class="op" id="6762131">.</span><span class="ident" id="6762132">setBit</span><span class="op" id="6762138">(</span><span class="ident" id="6762139">pteValid</span><span class="op" id="6762147">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762151">p2</span><span class="op" id="6762153">.</span><span class="ident" id="6762154">WriteWord</span><span class="op" id="6762163">(</span><span class="num" id="6762164">4</span><span class="op" id="6762165">*</span><span class="ident" id="6762166">i</span><span class="op" id="6762167">,</span>&nbsp;<span class="builtintype" id="6762169">uint32</span><span class="op" id="6762175">(</span><span class="ident" id="6762176">pte</span><span class="op" id="6762179">)</span><span class="op" id="6762180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762184">p3</span><span class="op" id="6762186">.</span><span class="ident" id="6762187">WriteWord</span><span class="op" id="6762196">(</span><span class="num" id="6762197">4</span><span class="op" id="6762198">*</span><span class="op" id="6762199">(</span><span class="num" id="6762200">3</span><span class="op" id="6762201">-</span><span class="ident" id="6762202">i</span><span class="op" id="6762203">)</span><span class="op" id="6762204">,</span>&nbsp;<span class="builtintype" id="6762206">uint32</span><span class="op" id="6762212">(</span><span class="ident" id="6762213">pte</span><span class="op" id="6762216">)</span><span class="op" id="6762217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6762220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762224">vm</span>&nbsp;<span class="op" id="6762227">:=</span>&nbsp;<span class="ident" id="6762230">newVirtMemory</span><span class="op" id="6762243">(</span><span class="ident" id="6762244">m</span><span class="op" id="6762245">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762248">vm</span><span class="op" id="6762250">.</span><span class="ident" id="6762251">SetTable</span><span class="op" id="6762259">(</span><span class="ident" id="6762260">PageSize</span><span class="op" id="6762268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6762272">//&nbsp;page&nbsp;0,&nbsp;1,&nbsp;2,&nbsp;3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;4,&nbsp;5,&nbsp;6,&nbsp;7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6762316">//&nbsp;page&nbsp;B+0,&nbsp;B+1,&nbsp;B+2,&nbsp;B+3&nbsp;is&nbsp;mapped&nbsp;to&nbsp;7,&nbsp;6,&nbsp;5,&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6762368">//&nbsp;where&nbsp;B&nbsp;=&nbsp;10&nbsp;*&nbsp;1024</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762392">w</span>&nbsp;<span class="op" id="6762394">:=</span>&nbsp;<span class="builtintype" id="6762397">uint32</span><span class="op" id="6762403">(</span><span class="num" id="6762404">0x37215a40</span><span class="op" id="6762414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762417">off</span>&nbsp;<span class="op" id="6762421">:=</span>&nbsp;<span class="builtintype" id="6762424">uint32</span><span class="op" id="6762430">(</span><span class="num" id="6762431">324</span><span class="op" id="6762434">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6762438">for</span>&nbsp;<span class="ident" id="6762442">i</span>&nbsp;<span class="op" id="6762444">:=</span>&nbsp;<span class="builtintype" id="6762447">uint32</span><span class="op" id="6762453">(</span><span class="num" id="6762454">0</span><span class="op" id="6762455">)</span><span class="op" id="6762456">;</span>&nbsp;<span class="ident" id="6762458">i</span>&nbsp;<span class="op" id="6762460">&lt;</span>&nbsp;<span class="num" id="6762462">4</span><span class="op" id="6762463">;</span>&nbsp;<span class="ident" id="6762465">i</span><span class="op" id="6762466">++</span>&nbsp;<span class="op" id="6762469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762473">wd</span>&nbsp;<span class="op" id="6762476">:=</span>&nbsp;<span class="ident" id="6762479">w</span>&nbsp;<span class="op" id="6762481">+</span>&nbsp;<span class="ident" id="6762483">i</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762487">e</span>&nbsp;<span class="op" id="6762489">:=</span>&nbsp;<span class="ident" id="6762492">vm</span><span class="op" id="6762494">.</span><span class="ident" id="6762495">WriteWord</span><span class="op" id="6762504">(</span><span class="ident" id="6762505">off</span><span class="op" id="6762508">+</span><span class="ident" id="6762509">i</span><span class="op" id="6762510">*</span><span class="ident" id="6762511">PageSize</span><span class="op" id="6762519">,</span>&nbsp;<span class="num" id="6762521">0</span><span class="op" id="6762522">,</span>&nbsp;<span class="ident" id="6762524">wd</span><span class="op" id="6762526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762530">as</span><span class="op" id="6762532">(</span><span class="ident" id="6762533">e</span>&nbsp;<span class="op" id="6762535">==</span>&nbsp;<span class="ident" id="6762538">nil</span><span class="op" id="6762541">,</span>&nbsp;<span class="string" id="6762543">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6762560">,</span>&nbsp;<span class="ident" id="6762562">e</span><span class="op" id="6762563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762567">w2</span><span class="op" id="6762569">,</span>&nbsp;<span class="ident" id="6762571">e</span>&nbsp;<span class="op" id="6762573">:=</span>&nbsp;<span class="ident" id="6762576">vm</span><span class="op" id="6762578">.</span><span class="ident" id="6762579">ReadWord</span><span class="op" id="6762587">(</span><span class="op" id="6762588">(</span><span class="num" id="6762589">10</span><span class="op" id="6762591">*</span><span class="num" id="6762592">1024</span><span class="op" id="6762596">+</span><span class="op" id="6762597">(</span><span class="num" id="6762598">3</span><span class="op" id="6762599">-</span><span class="ident" id="6762600">i</span><span class="op" id="6762601">)</span><span class="op" id="6762602">)</span><span class="op" id="6762603">*</span><span class="ident" id="6762604">PageSize</span><span class="op" id="6762612">+</span><span class="ident" id="6762613">off</span><span class="op" id="6762616">,</span>&nbsp;<span class="num" id="6762618">0</span><span class="op" id="6762619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762623">as</span><span class="op" id="6762625">(</span><span class="ident" id="6762626">e</span>&nbsp;<span class="op" id="6762628">==</span>&nbsp;<span class="ident" id="6762631">nil</span><span class="op" id="6762634">,</span>&nbsp;<span class="string" id="6762636">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6762652">,</span>&nbsp;<span class="ident" id="6762654">e</span><span class="op" id="6762655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762659">eo</span><span class="op" id="6762661">(</span><span class="ident" id="6762662">w2</span>&nbsp;<span class="op" id="6762665">!=</span>&nbsp;<span class="ident" id="6762668">wd</span><span class="op" id="6762670">,</span>&nbsp;<span class="string" id="6762672">&#34;expect&nbsp;0x%08x,&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="6762699">,</span>&nbsp;<span class="ident" id="6762701">wd</span><span class="op" id="6762703">,</span>&nbsp;<span class="ident" id="6762705">w2</span><span class="op" id="6762707">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6762710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762714">b</span>&nbsp;<span class="op" id="6762716">:=</span>&nbsp;<span class="builtintype" id="6762719">byte</span><span class="op" id="6762723">(</span><span class="num" id="6762724">0x54</span><span class="op" id="6762728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762731">off</span>&nbsp;<span class="op" id="6762735">=</span>&nbsp;<span class="num" id="6762737">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6762742">for</span>&nbsp;<span class="ident" id="6762746">i</span>&nbsp;<span class="op" id="6762748">:=</span>&nbsp;<span class="builtintype" id="6762751">uint32</span><span class="op" id="6762757">(</span><span class="num" id="6762758">0</span><span class="op" id="6762759">)</span><span class="op" id="6762760">;</span>&nbsp;<span class="ident" id="6762762">i</span>&nbsp;<span class="op" id="6762764">&lt;</span>&nbsp;<span class="num" id="6762766">4</span><span class="op" id="6762767">;</span>&nbsp;<span class="ident" id="6762769">i</span><span class="op" id="6762770">++</span>&nbsp;<span class="op" id="6762773">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762777">bt</span>&nbsp;<span class="op" id="6762780">:=</span>&nbsp;<span class="ident" id="6762783">b</span>&nbsp;<span class="op" id="6762785">+</span>&nbsp;<span class="builtintype" id="6762787">byte</span><span class="op" id="6762791">(</span><span class="ident" id="6762792">i</span><span class="op" id="6762793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762797">e</span>&nbsp;<span class="op" id="6762799">:=</span>&nbsp;<span class="ident" id="6762802">vm</span><span class="op" id="6762804">.</span><span class="ident" id="6762805">WriteByte</span><span class="op" id="6762814">(</span><span class="ident" id="6762815">off</span><span class="op" id="6762818">+</span><span class="ident" id="6762819">i</span><span class="op" id="6762820">*</span><span class="ident" id="6762821">PageSize</span><span class="op" id="6762829">,</span>&nbsp;<span class="num" id="6762831">0</span><span class="op" id="6762832">,</span>&nbsp;<span class="ident" id="6762834">bt</span><span class="op" id="6762836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762840">as</span><span class="op" id="6762842">(</span><span class="ident" id="6762843">e</span>&nbsp;<span class="op" id="6762845">==</span>&nbsp;<span class="ident" id="6762848">nil</span><span class="op" id="6762851">,</span>&nbsp;<span class="string" id="6762853">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6762870">,</span>&nbsp;<span class="ident" id="6762872">e</span><span class="op" id="6762873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762877">b2</span><span class="op" id="6762879">,</span>&nbsp;<span class="ident" id="6762881">e</span>&nbsp;<span class="op" id="6762883">:=</span>&nbsp;<span class="ident" id="6762886">vm</span><span class="op" id="6762888">.</span><span class="ident" id="6762889">ReadByte</span><span class="op" id="6762897">(</span><span class="op" id="6762898">(</span><span class="num" id="6762899">10</span><span class="op" id="6762901">*</span><span class="num" id="6762902">1024</span><span class="op" id="6762906">+</span><span class="op" id="6762907">(</span><span class="num" id="6762908">3</span><span class="op" id="6762909">-</span><span class="ident" id="6762910">i</span><span class="op" id="6762911">)</span><span class="op" id="6762912">)</span><span class="op" id="6762913">*</span><span class="ident" id="6762914">PageSize</span><span class="op" id="6762922">+</span><span class="ident" id="6762923">off</span><span class="op" id="6762926">,</span>&nbsp;<span class="num" id="6762928">0</span><span class="op" id="6762929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762933">as</span><span class="op" id="6762935">(</span><span class="ident" id="6762936">e</span>&nbsp;<span class="op" id="6762938">==</span>&nbsp;<span class="ident" id="6762941">nil</span><span class="op" id="6762944">,</span>&nbsp;<span class="string" id="6762946">&#34;read&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6762962">,</span>&nbsp;<span class="ident" id="6762964">e</span><span class="op" id="6762965">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6762969">eo</span><span class="op" id="6762971">(</span><span class="ident" id="6762972">b2</span>&nbsp;<span class="op" id="6762975">!=</span>&nbsp;<span class="ident" id="6762978">bt</span><span class="op" id="6762980">,</span>&nbsp;<span class="string" id="6762982">&#34;expect&nbsp;0x%02x,&nbsp;got&nbsp;0x%02x&#34;</span><span class="op" id="6763009">,</span>&nbsp;<span class="ident" id="6763011">bt</span><span class="op" id="6763013">,</span>&nbsp;<span class="ident" id="6763015">b2</span><span class="op" id="6763017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6763020">}</span><br>
<span class="lineno"></span><span class="op" id="6763022">}</span>
</div>
</body>
</html>
