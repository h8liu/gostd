<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1968708">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1968763">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1968817">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1968868">package</span>&nbsp;<span class="ident" id="1968876">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1968882">//&nbsp;Atan2&nbsp;returns&nbsp;the&nbsp;arc&nbsp;tangent&nbsp;of&nbsp;y/x,&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="1968929">//&nbsp;the&nbsp;signs&nbsp;of&nbsp;the&nbsp;two&nbsp;to&nbsp;determine&nbsp;the&nbsp;quadrant</span><br>
<span class="lineno"></span><span class="comment" id="1968979">//&nbsp;of&nbsp;the&nbsp;return&nbsp;value.</span><br>
<span class="lineno">10</span><span class="comment" id="1969003">//</span><br>
<span class="lineno"></span><span class="comment" id="1969006">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="1969039">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1969062">//&nbsp;&nbsp;&nbsp;&nbspAtan2(NaN,&nbsp;x)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="1969085">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+0,&nbsp;x&gt;=0)&nbsp;=&nbsp;+0</span><br>
<span class="lineno">15</span><span class="comment" id="1969109">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-0,&nbsp;x&gt;=0)&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span><span class="comment" id="1969133">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+0,&nbsp;x&lt;=-0)&nbsp;=&nbsp;+Pi</span><br>
<span class="lineno"></span><span class="comment" id="1969159">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-0,&nbsp;x&lt;=-0)&nbsp;=&nbsp;-Pi</span><br>
<span class="lineno"></span><span class="comment" id="1969185">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&gt;0,&nbsp;0)&nbsp;=&nbsp;+Pi/2</span><br>
<span class="lineno"></span><span class="comment" id="1969210">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&lt;0,&nbsp;0)&nbsp;=&nbsp;-Pi/2</span><br>
<span class="lineno">20</span><span class="comment" id="1969235">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;+Inf)&nbsp;=&nbsp;+Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1969264">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;+Inf)&nbsp;=&nbsp;-Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1969293">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;-Inf)&nbsp;=&nbsp;3Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1969322">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;-Inf)&nbsp;=&nbsp;-3Pi/4</span><br>
<span class="lineno"></span><span class="comment" id="1969352">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y,&nbsp;+Inf)&nbsp;=&nbsp;0</span><br>
<span class="lineno">25</span><span class="comment" id="1969374">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&gt;0,&nbsp;-Inf)&nbsp;=&nbsp;+Pi</span><br>
<span class="lineno"></span><span class="comment" id="1969400">//&nbsp;&nbsp;&nbsp;&nbspAtan2(y&lt;0,&nbsp;-Inf)&nbsp;=&nbsp;-Pi</span><br>
<span class="lineno"></span><span class="comment" id="1969426">//&nbsp;&nbsp;&nbsp;&nbspAtan2(+Inf,&nbsp;x)&nbsp;=&nbsp;+Pi/2</span><br>
<span class="lineno"></span><span class="comment" id="1969452">//&nbsp;&nbsp;&nbsp;&nbspAtan2(-Inf,&nbsp;x)&nbsp;=&nbsp;-Pi/2</span><br>
<span class="lineno"></span><span class="keyword" id="1969478">func</span>&nbsp;<span class="ident" id="1969483">Atan2</span><span class="op" id="1969488">(</span><span class="ident" id="1969489">y</span><span class="op" id="1969490">,</span>&nbsp;<span class="ident" id="1969492">x</span>&nbsp;<span class="builtintype" id="1969494">float64</span><span class="op" id="1969501">)</span>&nbsp;<span class="builtintype" id="1969503">float64</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="1969512">func</span>&nbsp;<span class="ident" id="1969517">atan2</span><span class="op" id="1969522">(</span><span class="ident" id="1969523">y</span><span class="op" id="1969524">,</span>&nbsp;<span class="ident" id="1969526">x</span>&nbsp;<span class="builtintype" id="1969528">float64</span><span class="op" id="1969535">)</span>&nbsp;<span class="builtintype" id="1969537">float64</span>&nbsp;<span class="op" id="1969545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1969548">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969566">switch</span>&nbsp;<span class="op" id="1969573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969576">case</span>&nbsp;<span class="ident" id="1969581">IsNaN</span><span class="op" id="1969586">(</span><span class="ident" id="1969587">y</span><span class="op" id="1969588">)</span>&nbsp;<span class="op" id="1969590">||</span>&nbsp;<span class="ident" id="1969593">IsNaN</span><span class="op" id="1969598">(</span><span class="ident" id="1969599">x</span><span class="op" id="1969600">)</span><span class="op" id="1969601">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969605">return</span>&nbsp;<span class="ident" id="1969612">NaN</span><span class="op" id="1969615">(</span><span class="op" id="1969616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969619">case</span>&nbsp;<span class="ident" id="1969624">y</span>&nbsp;<span class="op" id="1969626">==</span>&nbsp;<span class="num" id="1969629">0</span><span class="op" id="1969630">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969634">if</span>&nbsp;<span class="ident" id="1969637">x</span>&nbsp;<span class="op" id="1969639">&gt;=</span>&nbsp;<span class="num" id="1969642">0</span>&nbsp;<span class="op" id="1969644">&amp;&amp;</span>&nbsp;<span class="op" id="1969647">!</span><span class="ident" id="1969648">Signbit</span><span class="op" id="1969655">(</span><span class="ident" id="1969656">x</span><span class="op" id="1969657">)</span>&nbsp;<span class="op" id="1969659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969664">return</span>&nbsp;<span class="ident" id="1969671">Copysign</span><span class="op" id="1969679">(</span><span class="num" id="1969680">0</span><span class="op" id="1969681">,</span>&nbsp;<span class="ident" id="1969683">y</span><span class="op" id="1969684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1969688">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969692">return</span>&nbsp;<span class="ident" id="1969699">Copysign</span><span class="op" id="1969707">(</span><span class="ident" id="1969708">Pi</span><span class="op" id="1969710">,</span>&nbsp;<span class="ident" id="1969712">y</span><span class="op" id="1969713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969716">case</span>&nbsp;<span class="ident" id="1969721">x</span>&nbsp;<span class="op" id="1969723">==</span>&nbsp;<span class="num" id="1969726">0</span><span class="op" id="1969727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969731">return</span>&nbsp;<span class="ident" id="1969738">Copysign</span><span class="op" id="1969746">(</span><span class="ident" id="1969747">Pi</span><span class="op" id="1969749">/</span><span class="num" id="1969750">2</span><span class="op" id="1969751">,</span>&nbsp;<span class="ident" id="1969753">y</span><span class="op" id="1969754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969757">case</span>&nbsp;<span class="ident" id="1969762">IsInf</span><span class="op" id="1969767">(</span><span class="ident" id="1969768">x</span><span class="op" id="1969769">,</span>&nbsp;<span class="num" id="1969771">0</span><span class="op" id="1969772">)</span><span class="op" id="1969773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969777">if</span>&nbsp;<span class="ident" id="1969780">IsInf</span><span class="op" id="1969785">(</span><span class="ident" id="1969786">x</span><span class="op" id="1969787">,</span>&nbsp;<span class="num" id="1969789">1</span><span class="op" id="1969790">)</span>&nbsp;<span class="op" id="1969792">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969797">switch</span>&nbsp;<span class="op" id="1969804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969809">case</span>&nbsp;<span class="ident" id="1969814">IsInf</span><span class="op" id="1969819">(</span><span class="ident" id="1969820">y</span><span class="op" id="1969821">,</span>&nbsp;<span class="num" id="1969823">0</span><span class="op" id="1969824">)</span><span class="op" id="1969825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969831">return</span>&nbsp;<span class="ident" id="1969838">Copysign</span><span class="op" id="1969846">(</span><span class="ident" id="1969847">Pi</span><span class="op" id="1969849">/</span><span class="num" id="1969850">4</span><span class="op" id="1969851">,</span>&nbsp;<span class="ident" id="1969853">y</span><span class="op" id="1969854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969859">default</span><span class="op" id="1969866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969872">return</span>&nbsp;<span class="ident" id="1969879">Copysign</span><span class="op" id="1969887">(</span><span class="num" id="1969888">0</span><span class="op" id="1969889">,</span>&nbsp;<span class="ident" id="1969891">y</span><span class="op" id="1969892">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1969897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1969901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969905">switch</span>&nbsp;<span class="op" id="1969912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969916">case</span>&nbsp;<span class="ident" id="1969921">IsInf</span><span class="op" id="1969926">(</span><span class="ident" id="1969927">y</span><span class="op" id="1969928">,</span>&nbsp;<span class="num" id="1969930">0</span><span class="op" id="1969931">)</span><span class="op" id="1969932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969937">return</span>&nbsp;<span class="ident" id="1969944">Copysign</span><span class="op" id="1969952">(</span><span class="num" id="1969953">3</span><span class="op" id="1969954">*</span><span class="ident" id="1969955">Pi</span><span class="op" id="1969957">/</span><span class="num" id="1969958">4</span><span class="op" id="1969959">,</span>&nbsp;<span class="ident" id="1969961">y</span><span class="op" id="1969962">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969966">default</span><span class="op" id="1969973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1969978">return</span>&nbsp;<span class="ident" id="1969985">Copysign</span><span class="op" id="1969993">(</span><span class="ident" id="1969994">Pi</span><span class="op" id="1969996">,</span>&nbsp;<span class="ident" id="1969998">y</span><span class="op" id="1969999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1970003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970006">case</span>&nbsp;<span class="ident" id="1970011">IsInf</span><span class="op" id="1970016">(</span><span class="ident" id="1970017">y</span><span class="op" id="1970018">,</span>&nbsp;<span class="num" id="1970020">0</span><span class="op" id="1970021">)</span><span class="op" id="1970022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970026">return</span>&nbsp;<span class="ident" id="1970033">Copysign</span><span class="op" id="1970041">(</span><span class="ident" id="1970042">Pi</span><span class="op" id="1970044">/</span><span class="num" id="1970045">2</span><span class="op" id="1970046">,</span>&nbsp;<span class="ident" id="1970048">y</span><span class="op" id="1970049">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1970052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1970056">//&nbsp;Call&nbsp;atan&nbsp;and&nbsp;determine&nbsp;the&nbsp;quadrant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1970098">q</span>&nbsp;<span class="op" id="1970100">:=</span>&nbsp;<span class="ident" id="1970103">Atan</span><span class="op" id="1970107">(</span><span class="ident" id="1970108">y</span>&nbsp;<span class="op" id="1970110">/</span>&nbsp;<span class="ident" id="1970112">x</span><span class="op" id="1970113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970116">if</span>&nbsp;<span class="ident" id="1970119">x</span>&nbsp;<span class="op" id="1970121">&lt;</span>&nbsp;<span class="num" id="1970123">0</span>&nbsp;<span class="op" id="1970125">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970129">if</span>&nbsp;<span class="ident" id="1970132">q</span>&nbsp;<span class="op" id="1970134">&lt;=</span>&nbsp;<span class="num" id="1970137">0</span>&nbsp;<span class="op" id="1970139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970144">return</span>&nbsp;<span class="ident" id="1970151">q</span>&nbsp;<span class="op" id="1970153">+</span>&nbsp;<span class="ident" id="1970155">Pi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1970160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970164">return</span>&nbsp;<span class="ident" id="1970171">q</span>&nbsp;<span class="op" id="1970173">-</span>&nbsp;<span class="ident" id="1970175">Pi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1970179">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1970182">return</span>&nbsp;<span class="ident" id="1970189">q</span><br>
<span class="lineno"></span><span class="op" id="1970191">}</span>
</div>
</body>
</html>
