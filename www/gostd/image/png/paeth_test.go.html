<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6543780">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6543835">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6543889">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6543940">package</span>&nbsp;<span class="ident" id="6543948">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543953">import</span>&nbsp;<span class="op" id="6543960">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6543963">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6543972">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6543985">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6543995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543998">func</span>&nbsp;<span class="ident" id="6544003">slowAbs</span><span class="op" id="6544010">(</span><span class="ident" id="6544011">x</span>&nbsp;<span class="builtintype" id="6544013">int</span><span class="op" id="6544016">)</span>&nbsp;<span class="builtintype" id="6544018">int</span>&nbsp;<span class="op" id="6544022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544025">if</span>&nbsp;<span class="ident" id="6544028">x</span>&nbsp;<span class="op" id="6544030">&lt;</span>&nbsp;<span class="num" id="6544032">0</span>&nbsp;<span class="op" id="6544034">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544038">return</span>&nbsp;<span class="op" id="6544045">-</span><span class="ident" id="6544046">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544052">return</span>&nbsp;<span class="ident" id="6544059">x</span><br>
<span class="lineno"></span><span class="op" id="6544061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6544064">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="6544136">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="6544210">func</span>&nbsp;<span class="ident" id="6544215">slowPaeth</span><span class="op" id="6544224">(</span><span class="ident" id="6544225">a</span><span class="op" id="6544226">,</span>&nbsp;<span class="ident" id="6544228">b</span><span class="op" id="6544229">,</span>&nbsp;<span class="ident" id="6544231">c</span>&nbsp;<span class="builtintype" id="6544233">uint8</span><span class="op" id="6544238">)</span>&nbsp;<span class="builtintype" id="6544240">uint8</span>&nbsp;<span class="op" id="6544246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544249">p</span>&nbsp;<span class="op" id="6544251">:=</span>&nbsp;<span class="builtintype" id="6544254">int</span><span class="op" id="6544257">(</span><span class="ident" id="6544258">a</span><span class="op" id="6544259">)</span>&nbsp;<span class="op" id="6544261">+</span>&nbsp;<span class="builtintype" id="6544263">int</span><span class="op" id="6544266">(</span><span class="ident" id="6544267">b</span><span class="op" id="6544268">)</span>&nbsp;<span class="op" id="6544270">-</span>&nbsp;<span class="builtintype" id="6544272">int</span><span class="op" id="6544275">(</span><span class="ident" id="6544276">c</span><span class="op" id="6544277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544280">pa</span>&nbsp;<span class="op" id="6544283">:=</span>&nbsp;<span class="ident" id="6544286">slowAbs</span><span class="op" id="6544293">(</span><span class="ident" id="6544294">p</span>&nbsp;<span class="op" id="6544296">-</span>&nbsp;<span class="builtintype" id="6544298">int</span><span class="op" id="6544301">(</span><span class="ident" id="6544302">a</span><span class="op" id="6544303">)</span><span class="op" id="6544304">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544307">pb</span>&nbsp;<span class="op" id="6544310">:=</span>&nbsp;<span class="ident" id="6544313">slowAbs</span><span class="op" id="6544320">(</span><span class="ident" id="6544321">p</span>&nbsp;<span class="op" id="6544323">-</span>&nbsp;<span class="builtintype" id="6544325">int</span><span class="op" id="6544328">(</span><span class="ident" id="6544329">b</span><span class="op" id="6544330">)</span><span class="op" id="6544331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544334">pc</span>&nbsp;<span class="op" id="6544337">:=</span>&nbsp;<span class="ident" id="6544340">slowAbs</span><span class="op" id="6544347">(</span><span class="ident" id="6544348">p</span>&nbsp;<span class="op" id="6544350">-</span>&nbsp;<span class="builtintype" id="6544352">int</span><span class="op" id="6544355">(</span><span class="ident" id="6544356">c</span><span class="op" id="6544357">)</span><span class="op" id="6544358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544361">if</span>&nbsp;<span class="ident" id="6544364">pa</span>&nbsp;<span class="op" id="6544367">&lt;=</span>&nbsp;<span class="ident" id="6544370">pb</span>&nbsp;<span class="op" id="6544373">&amp;&amp;</span>&nbsp;<span class="ident" id="6544376">pa</span>&nbsp;<span class="op" id="6544379">&lt;=</span>&nbsp;<span class="ident" id="6544382">pc</span>&nbsp;<span class="op" id="6544385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544389">return</span>&nbsp;<span class="ident" id="6544396">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544399">}</span>&nbsp;<span class="keyword" id="6544401">else</span>&nbsp;<span class="keyword" id="6544406">if</span>&nbsp;<span class="ident" id="6544409">pb</span>&nbsp;<span class="op" id="6544412">&lt;=</span>&nbsp;<span class="ident" id="6544415">pc</span>&nbsp;<span class="op" id="6544418">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544422">return</span>&nbsp;<span class="ident" id="6544429">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544435">return</span>&nbsp;<span class="ident" id="6544442">c</span><br>
<span class="lineno"></span><span class="op" id="6544444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="6544447">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="6544523">func</span>&nbsp;<span class="ident" id="6544528">slowFilterPaeth</span><span class="op" id="6544543">(</span><span class="ident" id="6544544">cdat</span><span class="op" id="6544548">,</span>&nbsp;<span class="ident" id="6544550">pdat</span>&nbsp;<span class="op" id="6544555">[</span><span class="op" id="6544556">]</span><span class="builtintype" id="6544557">byte</span><span class="op" id="6544561">,</span>&nbsp;<span class="ident" id="6544563">bytesPerPixel</span>&nbsp;<span class="builtintype" id="6544577">int</span><span class="op" id="6544580">)</span>&nbsp;<span class="op" id="6544582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544585">for</span>&nbsp;<span class="ident" id="6544589">i</span>&nbsp;<span class="op" id="6544591">:=</span>&nbsp;<span class="num" id="6544594">0</span><span class="op" id="6544595">;</span>&nbsp;<span class="ident" id="6544597">i</span>&nbsp;<span class="op" id="6544599">&lt;</span>&nbsp;<span class="ident" id="6544601">bytesPerPixel</span><span class="op" id="6544614">;</span>&nbsp;<span class="ident" id="6544616">i</span><span class="op" id="6544617">++</span>&nbsp;<span class="op" id="6544620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544624">cdat</span><span class="op" id="6544628">[</span><span class="ident" id="6544629">i</span><span class="op" id="6544630">]</span>&nbsp;<span class="op" id="6544632">+=</span>&nbsp;<span class="ident" id="6544635">paeth</span><span class="op" id="6544640">(</span><span class="num" id="6544641">0</span><span class="op" id="6544642">,</span>&nbsp;<span class="ident" id="6544644">pdat</span><span class="op" id="6544648">[</span><span class="ident" id="6544649">i</span><span class="op" id="6544650">]</span><span class="op" id="6544651">,</span>&nbsp;<span class="num" id="6544653">0</span><span class="op" id="6544654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544657">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544660">for</span>&nbsp;<span class="ident" id="6544664">i</span>&nbsp;<span class="op" id="6544666">:=</span>&nbsp;<span class="ident" id="6544669">bytesPerPixel</span><span class="op" id="6544682">;</span>&nbsp;<span class="ident" id="6544684">i</span>&nbsp;<span class="op" id="6544686">&lt;</span>&nbsp;<span class="builtinfunc" id="6544688">len</span><span class="op" id="6544691">(</span><span class="ident" id="6544692">cdat</span><span class="op" id="6544696">)</span><span class="op" id="6544697">;</span>&nbsp;<span class="ident" id="6544699">i</span><span class="op" id="6544700">++</span>&nbsp;<span class="op" id="6544703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544707">cdat</span><span class="op" id="6544711">[</span><span class="ident" id="6544712">i</span><span class="op" id="6544713">]</span>&nbsp;<span class="op" id="6544715">+=</span>&nbsp;<span class="ident" id="6544718">paeth</span><span class="op" id="6544723">(</span><span class="ident" id="6544724">cdat</span><span class="op" id="6544728">[</span><span class="ident" id="6544729">i</span><span class="op" id="6544730">-</span><span class="ident" id="6544731">bytesPerPixel</span><span class="op" id="6544744">]</span><span class="op" id="6544745">,</span>&nbsp;<span class="ident" id="6544747">pdat</span><span class="op" id="6544751">[</span><span class="ident" id="6544752">i</span><span class="op" id="6544753">]</span><span class="op" id="6544754">,</span>&nbsp;<span class="ident" id="6544756">pdat</span><span class="op" id="6544760">[</span><span class="ident" id="6544761">i</span><span class="op" id="6544762">-</span><span class="ident" id="6544763">bytesPerPixel</span><span class="op" id="6544776">]</span><span class="op" id="6544777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544780">}</span><br>
<span class="lineno"></span><span class="op" id="6544782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6544785">func</span>&nbsp;<span class="ident" id="6544790">TestPaeth</span><span class="op" id="6544799">(</span><span class="ident" id="6544800">t</span>&nbsp;<span class="op" id="6544802">*</span><span class="ident" id="6544803">testing</span><span class="op" id="6544810">.</span><span class="ident" id="6544811">T</span><span class="op" id="6544812">)</span>&nbsp;<span class="op" id="6544814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544817">for</span>&nbsp;<span class="ident" id="6544821">a</span>&nbsp;<span class="op" id="6544823">:=</span>&nbsp;<span class="num" id="6544826">0</span><span class="op" id="6544827">;</span>&nbsp;<span class="ident" id="6544829">a</span>&nbsp;<span class="op" id="6544831">&lt;</span>&nbsp;<span class="num" id="6544833">256</span><span class="op" id="6544836">;</span>&nbsp;<span class="ident" id="6544838">a</span>&nbsp;<span class="op" id="6544840">+=</span>&nbsp;<span class="num" id="6544843">15</span>&nbsp;<span class="op" id="6544846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544850">for</span>&nbsp;<span class="ident" id="6544854">b</span>&nbsp;<span class="op" id="6544856">:=</span>&nbsp;<span class="num" id="6544859">0</span><span class="op" id="6544860">;</span>&nbsp;<span class="ident" id="6544862">b</span>&nbsp;<span class="op" id="6544864">&lt;</span>&nbsp;<span class="num" id="6544866">256</span><span class="op" id="6544869">;</span>&nbsp;<span class="ident" id="6544871">b</span>&nbsp;<span class="op" id="6544873">+=</span>&nbsp;<span class="num" id="6544876">15</span>&nbsp;<span class="op" id="6544879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544884">for</span>&nbsp;<span class="ident" id="6544888">c</span>&nbsp;<span class="op" id="6544890">:=</span>&nbsp;<span class="num" id="6544893">0</span><span class="op" id="6544894">;</span>&nbsp;<span class="ident" id="6544896">c</span>&nbsp;<span class="op" id="6544898">&lt;</span>&nbsp;<span class="num" id="6544900">256</span><span class="op" id="6544903">;</span>&nbsp;<span class="ident" id="6544905">c</span>&nbsp;<span class="op" id="6544907">+=</span>&nbsp;<span class="num" id="6544910">15</span>&nbsp;<span class="op" id="6544913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544919">got</span>&nbsp;<span class="op" id="6544923">:=</span>&nbsp;<span class="ident" id="6544926">paeth</span><span class="op" id="6544931">(</span><span class="builtintype" id="6544932">uint8</span><span class="op" id="6544937">(</span><span class="ident" id="6544938">a</span><span class="op" id="6544939">)</span><span class="op" id="6544940">,</span>&nbsp;<span class="builtintype" id="6544942">uint8</span><span class="op" id="6544947">(</span><span class="ident" id="6544948">b</span><span class="op" id="6544949">)</span><span class="op" id="6544950">,</span>&nbsp;<span class="builtintype" id="6544952">uint8</span><span class="op" id="6544957">(</span><span class="ident" id="6544958">c</span><span class="op" id="6544959">)</span><span class="op" id="6544960">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544966">want</span>&nbsp;<span class="op" id="6544971">:=</span>&nbsp;<span class="ident" id="6544974">slowPaeth</span><span class="op" id="6544983">(</span><span class="builtintype" id="6544984">uint8</span><span class="op" id="6544989">(</span><span class="ident" id="6544990">a</span><span class="op" id="6544991">)</span><span class="op" id="6544992">,</span>&nbsp;<span class="builtintype" id="6544994">uint8</span><span class="op" id="6544999">(</span><span class="ident" id="6545000">b</span><span class="op" id="6545001">)</span><span class="op" id="6545002">,</span>&nbsp;<span class="builtintype" id="6545004">uint8</span><span class="op" id="6545009">(</span><span class="ident" id="6545010">c</span><span class="op" id="6545011">)</span><span class="op" id="6545012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545018">if</span>&nbsp;<span class="ident" id="6545021">got</span>&nbsp;<span class="op" id="6545025">!=</span>&nbsp;<span class="ident" id="6545028">want</span>&nbsp;<span class="op" id="6545033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545040">t</span><span class="op" id="6545041">.</span><span class="ident" id="6545042">Errorf</span><span class="op" id="6545048">(</span><span class="string" id="6545049">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6545088">,</span>&nbsp;<span class="ident" id="6545090">a</span><span class="op" id="6545091">,</span>&nbsp;<span class="ident" id="6545093">b</span><span class="op" id="6545094">,</span>&nbsp;<span class="ident" id="6545096">c</span><span class="op" id="6545097">,</span>&nbsp;<span class="ident" id="6545099">got</span><span class="op" id="6545102">,</span>&nbsp;<span class="ident" id="6545104">want</span><span class="op" id="6545108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545119">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545126">}</span><br>
<span class="lineno"></span><span class="op" id="6545128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6545131">func</span>&nbsp;<span class="ident" id="6545136">BenchmarkPaeth</span><span class="op" id="6545150">(</span><span class="ident" id="6545151">b</span>&nbsp;<span class="op" id="6545153">*</span><span class="ident" id="6545154">testing</span><span class="op" id="6545161">.</span><span class="ident" id="6545162">B</span><span class="op" id="6545163">)</span>&nbsp;<span class="op" id="6545165">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545168">for</span>&nbsp;<span class="ident" id="6545172">i</span>&nbsp;<span class="op" id="6545174">:=</span>&nbsp;<span class="num" id="6545177">0</span><span class="op" id="6545178">;</span>&nbsp;<span class="ident" id="6545180">i</span>&nbsp;<span class="op" id="6545182">&lt;</span>&nbsp;<span class="ident" id="6545184">b</span><span class="op" id="6545185">.</span><span class="ident" id="6545186">N</span><span class="op" id="6545187">;</span>&nbsp;<span class="ident" id="6545189">i</span><span class="op" id="6545190">++</span>&nbsp;<span class="op" id="6545193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545197">paeth</span><span class="op" id="6545202">(</span><span class="builtintype" id="6545203">uint8</span><span class="op" id="6545208">(</span><span class="ident" id="6545209">i</span><span class="op" id="6545210">&gt;&gt;</span><span class="num" id="6545212">16</span><span class="op" id="6545214">)</span><span class="op" id="6545215">,</span>&nbsp;<span class="builtintype" id="6545217">uint8</span><span class="op" id="6545222">(</span><span class="ident" id="6545223">i</span><span class="op" id="6545224">&gt;&gt;</span><span class="num" id="6545226">8</span><span class="op" id="6545227">)</span><span class="op" id="6545228">,</span>&nbsp;<span class="builtintype" id="6545230">uint8</span><span class="op" id="6545235">(</span><span class="ident" id="6545236">i</span><span class="op" id="6545237">)</span><span class="op" id="6545238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545241">}</span><br>
<span class="lineno"></span><span class="op" id="6545243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6545246">func</span>&nbsp;<span class="ident" id="6545251">TestPaethDecode</span><span class="op" id="6545266">(</span><span class="ident" id="6545267">t</span>&nbsp;<span class="op" id="6545269">*</span><span class="ident" id="6545270">testing</span><span class="op" id="6545277">.</span><span class="ident" id="6545278">T</span><span class="op" id="6545279">)</span>&nbsp;<span class="op" id="6545281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545284">pdat0</span>&nbsp;<span class="op" id="6545290">:=</span>&nbsp;<span class="builtinfunc" id="6545293">make</span><span class="op" id="6545297">(</span><span class="op" id="6545298">[</span><span class="op" id="6545299">]</span><span class="builtintype" id="6545300">byte</span><span class="op" id="6545304">,</span>&nbsp;<span class="num" id="6545306">32</span><span class="op" id="6545308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545311">pdat1</span>&nbsp;<span class="op" id="6545317">:=</span>&nbsp;<span class="builtinfunc" id="6545320">make</span><span class="op" id="6545324">(</span><span class="op" id="6545325">[</span><span class="op" id="6545326">]</span><span class="builtintype" id="6545327">byte</span><span class="op" id="6545331">,</span>&nbsp;<span class="num" id="6545333">32</span><span class="op" id="6545335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545338">pdat2</span>&nbsp;<span class="op" id="6545344">:=</span>&nbsp;<span class="builtinfunc" id="6545347">make</span><span class="op" id="6545351">(</span><span class="op" id="6545352">[</span><span class="op" id="6545353">]</span><span class="builtintype" id="6545354">byte</span><span class="op" id="6545358">,</span>&nbsp;<span class="num" id="6545360">32</span><span class="op" id="6545362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545365">cdat0</span>&nbsp;<span class="op" id="6545371">:=</span>&nbsp;<span class="builtinfunc" id="6545374">make</span><span class="op" id="6545378">(</span><span class="op" id="6545379">[</span><span class="op" id="6545380">]</span><span class="builtintype" id="6545381">byte</span><span class="op" id="6545385">,</span>&nbsp;<span class="num" id="6545387">32</span><span class="op" id="6545389">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545392">cdat1</span>&nbsp;<span class="op" id="6545398">:=</span>&nbsp;<span class="builtinfunc" id="6545401">make</span><span class="op" id="6545405">(</span><span class="op" id="6545406">[</span><span class="op" id="6545407">]</span><span class="builtintype" id="6545408">byte</span><span class="op" id="6545412">,</span>&nbsp;<span class="num" id="6545414">32</span><span class="op" id="6545416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545419">cdat2</span>&nbsp;<span class="op" id="6545425">:=</span>&nbsp;<span class="builtinfunc" id="6545428">make</span><span class="op" id="6545432">(</span><span class="op" id="6545433">[</span><span class="op" id="6545434">]</span><span class="builtintype" id="6545435">byte</span><span class="op" id="6545439">,</span>&nbsp;<span class="num" id="6545441">32</span><span class="op" id="6545443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545446">r</span>&nbsp;<span class="op" id="6545448">:=</span>&nbsp;<span class="ident" id="6545451">rand</span><span class="op" id="6545455">.</span><span class="ident" id="6545456">New</span><span class="op" id="6545459">(</span><span class="ident" id="6545460">rand</span><span class="op" id="6545464">.</span><span class="ident" id="6545465">NewSource</span><span class="op" id="6545474">(</span><span class="num" id="6545475">1</span><span class="op" id="6545476">)</span><span class="op" id="6545477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545480">for</span>&nbsp;<span class="ident" id="6545484">bytesPerPixel</span>&nbsp;<span class="op" id="6545498">:=</span>&nbsp;<span class="num" id="6545501">1</span><span class="op" id="6545502">;</span>&nbsp;<span class="ident" id="6545504">bytesPerPixel</span>&nbsp;<span class="op" id="6545518">&lt;=</span>&nbsp;<span class="num" id="6545521">8</span><span class="op" id="6545522">;</span>&nbsp;<span class="ident" id="6545524">bytesPerPixel</span><span class="op" id="6545537">++</span>&nbsp;<span class="op" id="6545540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545544">for</span>&nbsp;<span class="ident" id="6545548">i</span>&nbsp;<span class="op" id="6545550">:=</span>&nbsp;<span class="num" id="6545553">0</span><span class="op" id="6545554">;</span>&nbsp;<span class="ident" id="6545556">i</span>&nbsp;<span class="op" id="6545558">&lt;</span>&nbsp;<span class="num" id="6545560">100</span><span class="op" id="6545563">;</span>&nbsp;<span class="ident" id="6545565">i</span><span class="op" id="6545566">++</span>&nbsp;<span class="op" id="6545569">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545574">for</span>&nbsp;<span class="ident" id="6545578">j</span>&nbsp;<span class="op" id="6545580">:=</span>&nbsp;<span class="keyword" id="6545583">range</span>&nbsp;<span class="ident" id="6545589">pdat0</span>&nbsp;<span class="op" id="6545595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545601">pdat0</span><span class="op" id="6545606">[</span><span class="ident" id="6545607">j</span><span class="op" id="6545608">]</span>&nbsp;<span class="op" id="6545610">=</span>&nbsp;<span class="builtintype" id="6545612">uint8</span><span class="op" id="6545617">(</span><span class="ident" id="6545618">r</span><span class="op" id="6545619">.</span><span class="ident" id="6545620">Uint32</span><span class="op" id="6545626">(</span><span class="op" id="6545627">)</span><span class="op" id="6545628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545634">cdat0</span><span class="op" id="6545639">[</span><span class="ident" id="6545640">j</span><span class="op" id="6545641">]</span>&nbsp;<span class="op" id="6545643">=</span>&nbsp;<span class="builtintype" id="6545645">uint8</span><span class="op" id="6545650">(</span><span class="ident" id="6545651">r</span><span class="op" id="6545652">.</span><span class="ident" id="6545653">Uint32</span><span class="op" id="6545659">(</span><span class="op" id="6545660">)</span><span class="op" id="6545661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6545666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6545671">copy</span><span class="op" id="6545675">(</span><span class="ident" id="6545676">pdat1</span><span class="op" id="6545681">,</span>&nbsp;<span class="ident" id="6545683">pdat0</span><span class="op" id="6545688">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6545693">copy</span><span class="op" id="6545697">(</span><span class="ident" id="6545698">pdat2</span><span class="op" id="6545703">,</span>&nbsp;<span class="ident" id="6545705">pdat0</span><span class="op" id="6545710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6545715">copy</span><span class="op" id="6545719">(</span><span class="ident" id="6545720">cdat1</span><span class="op" id="6545725">,</span>&nbsp;<span class="ident" id="6545727">cdat0</span><span class="op" id="6545732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6545737">copy</span><span class="op" id="6545741">(</span><span class="ident" id="6545742">cdat2</span><span class="op" id="6545747">,</span>&nbsp;<span class="ident" id="6545749">cdat0</span><span class="op" id="6545754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545759">filterPaeth</span><span class="op" id="6545770">(</span><span class="ident" id="6545771">cdat1</span><span class="op" id="6545776">,</span>&nbsp;<span class="ident" id="6545778">pdat1</span><span class="op" id="6545783">,</span>&nbsp;<span class="ident" id="6545785">bytesPerPixel</span><span class="op" id="6545798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545803">slowFilterPaeth</span><span class="op" id="6545818">(</span><span class="ident" id="6545819">cdat2</span><span class="op" id="6545824">,</span>&nbsp;<span class="ident" id="6545826">pdat2</span><span class="op" id="6545831">,</span>&nbsp;<span class="ident" id="6545833">bytesPerPixel</span><span class="op" id="6545846">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6545851">if</span>&nbsp;<span class="op" id="6545854">!</span><span class="ident" id="6545855">bytes</span><span class="op" id="6545860">.</span><span class="ident" id="6545861">Equal</span><span class="op" id="6545866">(</span><span class="ident" id="6545867">cdat1</span><span class="op" id="6545872">,</span>&nbsp;<span class="ident" id="6545874">cdat2</span><span class="op" id="6545879">)</span>&nbsp;<span class="op" id="6545881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6545887">t</span><span class="op" id="6545888">.</span><span class="ident" id="6545889">Errorf</span><span class="op" id="6545895">(</span><span class="string" id="6545896">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="6545963">,</span>&nbsp;<span class="ident" id="6545965">bytesPerPixel</span><span class="op" id="6545978">,</span>&nbsp;<span class="ident" id="6545980">pdat0</span><span class="op" id="6545985">,</span>&nbsp;<span class="ident" id="6545987">cdat0</span><span class="op" id="6545992">,</span>&nbsp;<span class="ident" id="6545994">cdat1</span><span class="op" id="6545999">,</span>&nbsp;<span class="ident" id="6546001">cdat2</span><span class="op" id="6546006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6546012">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6546021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6546025">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6546028">}</span><br>
<span class="lineno"></span><span class="op" id="6546030">}</span>
</div>
</body>
</html>
