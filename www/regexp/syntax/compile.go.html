<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5436176">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5436231">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5436285">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5436336">package</span>&nbsp;<span class="ident" id="5436344">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5436352">import</span>&nbsp;<span class="string" id="5436359">&#34;unicode&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5436370">//&nbsp;A&nbsp;patchList&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;instruction&nbsp;pointers&nbsp;that&nbsp;need&nbsp;to&nbsp;be&nbsp;filled&nbsp;in&nbsp;(patched).</span><br>
<span class="lineno">10</span><span class="comment" id="5436456">//&nbsp;Because&nbsp;the&nbsp;pointers&nbsp;haven&#39;t&nbsp;been&nbsp;filled&nbsp;in&nbsp;yet,&nbsp;we&nbsp;can&nbsp;reuse&nbsp;their&nbsp;storage</span><br>
<span class="lineno"></span><span class="comment" id="5436535">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;list.&nbsp;&nbsp;It&#39;s&nbsp;kind&nbsp;of&nbsp;sleazy,&nbsp;but&nbsp;works&nbsp;well&nbsp;in&nbsp;practice.</span><br>
<span class="lineno"></span><span class="comment" id="5436606">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp1.html&nbsp;for&nbsp;inspiration.</span><br>
<span class="lineno"></span><span class="comment" id="5436672">//</span><br>
<span class="lineno"></span><span class="comment" id="5436675">//&nbsp;These&nbsp;aren&#39;t&nbsp;really&nbsp;pointers:&nbsp;they&#39;re&nbsp;integers,&nbsp;so&nbsp;we&nbsp;can&nbsp;reinterpret&nbsp;them</span><br>
<span class="lineno">15</span><span class="comment" id="5436753">//&nbsp;this&nbsp;way&nbsp;without&nbsp;using&nbsp;package&nbsp;unsafe.&nbsp;&nbsp;A&nbsp;value&nbsp;l&nbsp;denotes</span><br>
<span class="lineno"></span><span class="comment" id="5436814">//&nbsp;p.inst[l&gt;&gt;1].Out&nbsp;(l&amp;1==0)&nbsp;or&nbsp;.Arg&nbsp;(l&amp;1==1).</span><br>
<span class="lineno"></span><span class="comment" id="5436861">//&nbsp;l&nbsp;==&nbsp;0&nbsp;denotes&nbsp;the&nbsp;empty&nbsp;list,&nbsp;okay&nbsp;because&nbsp;we&nbsp;start&nbsp;every&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="5436931">//&nbsp;with&nbsp;a&nbsp;fail&nbsp;instruction,&nbsp;so&nbsp;we&#39;ll&nbsp;never&nbsp;want&nbsp;to&nbsp;point&nbsp;at&nbsp;its&nbsp;output&nbsp;link.</span><br>
<span class="lineno"></span><span class="keyword" id="5437008">type</span>&nbsp;<span class="ident" id="5437013">patchList</span>&nbsp;<span class="builtintype" id="5437023">uint32</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="5437031">func</span>&nbsp;<span class="op" id="5437036">(</span><span class="ident" id="5437037">l</span>&nbsp;<span class="ident" id="5437039"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437048">)</span>&nbsp;<span class="ident" id="5437050">next</span><span class="op" id="5437054">(</span><span class="ident" id="5437055">p</span>&nbsp;<span class="op" id="5437057">*</span><span class="ident" id="5437058"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><span class="op" id="5437062">)</span>&nbsp;<span class="ident" id="5437064"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span>&nbsp;<span class="op" id="5437074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437077">i</span>&nbsp;<span class="op" id="5437079">:=</span>&nbsp;<span class="op" id="5437082">&amp;</span><span class="ident" id="5437083"><a href="/regexp/syntax/compile.go.html#5437055">p</a></span><span class="op" id="5437084">.</span><span class="ident" id="5437085">Inst</span><span class="op" id="5437089">[</span><span class="ident" id="5437090"><a href="/regexp/syntax/compile.go.html#5437037">l</a></span><span class="op" id="5437091">&gt;&gt;</span><span class="num" id="5437093">1</span><span class="op" id="5437094">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437097">if</span>&nbsp;<span class="ident" id="5437100"><a href="/regexp/syntax/compile.go.html#5437037">l</a></span><span class="op" id="5437101">&amp;</span><span class="num" id="5437102">1</span>&nbsp;<span class="op" id="5437104">==</span>&nbsp;<span class="num" id="5437107">0</span>&nbsp;<span class="op" id="5437109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437113">return</span>&nbsp;<span class="ident" id="5437120"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437129">(</span><span class="ident" id="5437130"><a href="/regexp/syntax/compile.go.html#5437077">i</a></span><span class="op" id="5437131">.</span><span class="ident" id="5437132">Out</span><span class="op" id="5437135">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437141">return</span>&nbsp;<span class="ident" id="5437148"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437157">(</span><span class="ident" id="5437158"><a href="/regexp/syntax/compile.go.html#5437077">i</a></span><span class="op" id="5437159">.</span><span class="ident" id="5437160">Arg</span><span class="op" id="5437163">)</span><br>
<span class="lineno"></span><span class="op" id="5437165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5437168">func</span>&nbsp;<span class="op" id="5437173">(</span><span class="ident" id="5437174">l</span>&nbsp;<span class="ident" id="5437176"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437185">)</span>&nbsp;<span class="ident" id="5437187">patch</span><span class="op" id="5437192">(</span><span class="ident" id="5437193">p</span>&nbsp;<span class="op" id="5437195">*</span><span class="ident" id="5437196"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><span class="op" id="5437200">,</span>&nbsp;<span class="ident" id="5437202">val</span>&nbsp;<span class="builtintype" id="5437206">uint32</span><span class="op" id="5437212">)</span>&nbsp;<span class="op" id="5437214">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437217">for</span>&nbsp;<span class="ident" id="5437221"><a href="/regexp/syntax/compile.go.html#5437174">l</a></span>&nbsp;<span class="op" id="5437223">!=</span>&nbsp;<span class="num" id="5437226">0</span>&nbsp;<span class="op" id="5437228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437232">i</span>&nbsp;<span class="op" id="5437234">:=</span>&nbsp;<span class="op" id="5437237">&amp;</span><span class="ident" id="5437238"><a href="/regexp/syntax/compile.go.html#5437193">p</a></span><span class="op" id="5437239">.</span><span class="ident" id="5437240">Inst</span><span class="op" id="5437244">[</span><span class="ident" id="5437245"><a href="/regexp/syntax/compile.go.html#5437174">l</a></span><span class="op" id="5437246">&gt;&gt;</span><span class="num" id="5437248">1</span><span class="op" id="5437249">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437253">if</span>&nbsp;<span class="ident" id="5437256"><a href="/regexp/syntax/compile.go.html#5437174">l</a></span><span class="op" id="5437257">&amp;</span><span class="num" id="5437258">1</span>&nbsp;<span class="op" id="5437260">==</span>&nbsp;<span class="num" id="5437263">0</span>&nbsp;<span class="op" id="5437265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437270"><a href="/regexp/syntax/compile.go.html#5437174">l</a></span>&nbsp;<span class="op" id="5437272">=</span>&nbsp;<span class="ident" id="5437274"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437283">(</span><span class="ident" id="5437284"><a href="/regexp/syntax/compile.go.html#5437232">i</a></span><span class="op" id="5437285">.</span><span class="ident" id="5437286">Out</span><span class="op" id="5437289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437294"><a href="/regexp/syntax/compile.go.html#5437232">i</a></span><span class="op" id="5437295">.</span><span class="ident" id="5437296">Out</span>&nbsp;<span class="op" id="5437300">=</span>&nbsp;<span class="ident" id="5437302"><a href="/regexp/syntax/compile.go.html#5437202">val</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437308">}</span>&nbsp;<span class="keyword" id="5437310">else</span>&nbsp;<span class="op" id="5437315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437320"><a href="/regexp/syntax/compile.go.html#5437174">l</a></span>&nbsp;<span class="op" id="5437322">=</span>&nbsp;<span class="ident" id="5437324"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437333">(</span><span class="ident" id="5437334"><a href="/regexp/syntax/compile.go.html#5437232">i</a></span><span class="op" id="5437335">.</span><span class="ident" id="5437336">Arg</span><span class="op" id="5437339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437344"><a href="/regexp/syntax/compile.go.html#5437232">i</a></span><span class="op" id="5437345">.</span><span class="ident" id="5437346">Arg</span>&nbsp;<span class="op" id="5437350">=</span>&nbsp;<span class="ident" id="5437352"><a href="/regexp/syntax/compile.go.html#5437202">val</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437361">}</span><br>
<span class="lineno">40</span><span class="op" id="5437363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5437366">func</span>&nbsp;<span class="op" id="5437371">(</span><span class="ident" id="5437372">l1</span>&nbsp;<span class="ident" id="5437375"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437384">)</span>&nbsp;<span class="builtinfunc" id="5437386">append</span><span class="op" id="5437392">(</span><span class="ident" id="5437393">p</span>&nbsp;<span class="op" id="5437395">*</span><span class="ident" id="5437396"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><span class="op" id="5437400">,</span>&nbsp;<span class="ident" id="5437402">l2</span>&nbsp;<span class="ident" id="5437405"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5437414">)</span>&nbsp;<span class="ident" id="5437416"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span>&nbsp;<span class="op" id="5437426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437429">if</span>&nbsp;<span class="ident" id="5437432"><a href="/regexp/syntax/compile.go.html#5437372">l1</a></span>&nbsp;<span class="op" id="5437435">==</span>&nbsp;<span class="num" id="5437438">0</span>&nbsp;<span class="op" id="5437440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437444">return</span>&nbsp;<span class="ident" id="5437451"><a href="/regexp/syntax/compile.go.html#5437402">l2</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437458">if</span>&nbsp;<span class="ident" id="5437461"><a href="/regexp/syntax/compile.go.html#5437402">l2</a></span>&nbsp;<span class="op" id="5437464">==</span>&nbsp;<span class="num" id="5437467">0</span>&nbsp;<span class="op" id="5437469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437473">return</span>&nbsp;<span class="ident" id="5437480"><a href="/regexp/syntax/compile.go.html#5437372">l1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437488">last</span>&nbsp;<span class="op" id="5437493">:=</span>&nbsp;<span class="ident" id="5437496"><a href="/regexp/syntax/compile.go.html#5437372">l1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437500">for</span>&nbsp;<span class="op" id="5437504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437508">next</span>&nbsp;<span class="op" id="5437513">:=</span>&nbsp;<span class="ident" id="5437516"><a href="/regexp/syntax/compile.go.html#5437488">last</a></span><span class="op" id="5437520">.</span><span class="ident" id="5437521">next</span><span class="op" id="5437525">(</span><span class="ident" id="5437526"><a href="/regexp/syntax/compile.go.html#5437393">p</a></span><span class="op" id="5437527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437531">if</span>&nbsp;<span class="ident" id="5437534"><a href="/regexp/syntax/compile.go.html#5437508">next</a></span>&nbsp;<span class="op" id="5437539">==</span>&nbsp;<span class="num" id="5437542">0</span>&nbsp;<span class="op" id="5437544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437549">break</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437561"><a href="/regexp/syntax/compile.go.html#5437488">last</a></span>&nbsp;<span class="op" id="5437566">=</span>&nbsp;<span class="ident" id="5437568"><a href="/regexp/syntax/compile.go.html#5437508">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437578">i</span>&nbsp;<span class="op" id="5437580">:=</span>&nbsp;<span class="op" id="5437583">&amp;</span><span class="ident" id="5437584"><a href="/regexp/syntax/compile.go.html#5437393">p</a></span><span class="op" id="5437585">.</span><span class="ident" id="5437586">Inst</span><span class="op" id="5437590">[</span><span class="ident" id="5437591"><a href="/regexp/syntax/compile.go.html#5437488">last</a></span><span class="op" id="5437595">&gt;&gt;</span><span class="num" id="5437597">1</span><span class="op" id="5437598">]</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437601">if</span>&nbsp;<span class="ident" id="5437604"><a href="/regexp/syntax/compile.go.html#5437488">last</a></span><span class="op" id="5437608">&amp;</span><span class="num" id="5437609">1</span>&nbsp;<span class="op" id="5437611">==</span>&nbsp;<span class="num" id="5437614">0</span>&nbsp;<span class="op" id="5437616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437620"><a href="/regexp/syntax/compile.go.html#5437578">i</a></span><span class="op" id="5437621">.</span><span class="ident" id="5437622">Out</span>&nbsp;<span class="op" id="5437626">=</span>&nbsp;<span class="builtintype" id="5437628">uint32</span><span class="op" id="5437634">(</span><span class="ident" id="5437635"><a href="/regexp/syntax/compile.go.html#5437402">l2</a></span><span class="op" id="5437637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437640">}</span>&nbsp;<span class="keyword" id="5437642">else</span>&nbsp;<span class="op" id="5437647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437651"><a href="/regexp/syntax/compile.go.html#5437578">i</a></span><span class="op" id="5437652">.</span><span class="ident" id="5437653">Arg</span>&nbsp;<span class="op" id="5437657">=</span>&nbsp;<span class="builtintype" id="5437659">uint32</span><span class="op" id="5437665">(</span><span class="ident" id="5437666"><a href="/regexp/syntax/compile.go.html#5437402">l2</a></span><span class="op" id="5437668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5437671">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5437674">return</span>&nbsp;<span class="ident" id="5437681"><a href="/regexp/syntax/compile.go.html#5437372">l1</a></span><br>
<span class="lineno"></span><span class="op" id="5437684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5437687">//&nbsp;A&nbsp;frag&nbsp;represents&nbsp;a&nbsp;compiled&nbsp;program&nbsp;fragment.</span><br>
<span class="lineno"></span><span class="keyword" id="5437737">type</span>&nbsp;<span class="ident" id="5437742">frag</span>&nbsp;<span class="keyword" id="5437747">struct</span>&nbsp;<span class="op" id="5437754">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437757">i</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5437761">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5437771">//&nbsp;index&nbsp;of&nbsp;first&nbsp;instruction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437802">out</span>&nbsp;<span class="ident" id="5437806"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span>&nbsp;<span class="comment" id="5437816">//&nbsp;where&nbsp;to&nbsp;record&nbsp;end&nbsp;instruction</span><br>
<span class="lineno"></span><span class="op" id="5437851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5437854">type</span>&nbsp;<span class="ident" id="5437859">compiler</span>&nbsp;<span class="keyword" id="5437868">struct</span>&nbsp;<span class="op" id="5437875">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5437878">p</span>&nbsp;<span class="op" id="5437880">*</span><span class="ident" id="5437881"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><br>
<span class="lineno"></span><span class="op" id="5437886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5437889">//&nbsp;Compile&nbsp;compiles&nbsp;the&nbsp;regexp&nbsp;into&nbsp;a&nbsp;program&nbsp;to&nbsp;be&nbsp;executed.</span><br>
<span class="lineno"></span><span class="comment" id="5437951">//&nbsp;The&nbsp;regexp&nbsp;should&nbsp;have&nbsp;been&nbsp;simplified&nbsp;already&nbsp;(returned&nbsp;from&nbsp;re.Simplify).</span><br>
<span class="lineno">80</span><span class="keyword" id="5438030">func</span>&nbsp;<span class="ident" id="5438035">Compile</span><span class="op" id="5438042">(</span><span class="ident" id="5438043">re</span>&nbsp;<span class="op" id="5438046">*</span><span class="ident" id="5438047"><a href="/regexp/syntax/regexp.go.html#5505274">Regexp</a></span><span class="op" id="5438053">)</span>&nbsp;<span class="op" id="5438055">(</span><span class="op" id="5438056">*</span><span class="ident" id="5438057"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><span class="op" id="5438061">,</span>&nbsp;<span class="builtintype" id="5438063">error</span><span class="op" id="5438068">)</span>&nbsp;<span class="op" id="5438070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438073">var</span>&nbsp;<span class="ident" id="5438077">c</span>&nbsp;<span class="ident" id="5438079"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438089"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438090">.</span><span class="ident" id="5438091">init</span><span class="op" id="5438095">(</span><span class="op" id="5438096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438099">f</span>&nbsp;<span class="op" id="5438101">:=</span>&nbsp;<span class="ident" id="5438104"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438105">.</span><span class="ident" id="5438106">compile</span><span class="op" id="5438113">(</span><span class="ident" id="5438114"><a href="/regexp/syntax/compile.go.html#5438043">re</a></span><span class="op" id="5438116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438119"><a href="/regexp/syntax/compile.go.html#5438099">f</a></span><span class="op" id="5438120">.</span><span class="ident" id="5438121">out</span><span class="op" id="5438124">.</span><span class="ident" id="5438125">patch</span><span class="op" id="5438130">(</span><span class="ident" id="5438131"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438132">.</span><span class="ident" id="5438133">p</span><span class="op" id="5438134">,</span>&nbsp;<span class="ident" id="5438136"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438137">.</span><span class="ident" id="5438138">inst</span><span class="op" id="5438142">(</span><span class="ident" id="5438143"><a href="/regexp/syntax/prog.go.html#5497669">InstMatch</a></span><span class="op" id="5438152">)</span><span class="op" id="5438153">.</span><span class="ident" id="5438154">i</span><span class="op" id="5438155">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438158"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438159">.</span><span class="ident" id="5438160">p</span><span class="op" id="5438161">.</span><span class="ident" id="5438162">Start</span>&nbsp;<span class="op" id="5438168">=</span>&nbsp;<span class="builtintype" id="5438170">int</span><span class="op" id="5438173">(</span><span class="ident" id="5438174"><a href="/regexp/syntax/compile.go.html#5438099">f</a></span><span class="op" id="5438175">.</span><span class="ident" id="5438176">i</span><span class="op" id="5438177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438180">return</span>&nbsp;<span class="ident" id="5438187"><a href="/regexp/syntax/compile.go.html#5438077">c</a></span><span class="op" id="5438188">.</span><span class="ident" id="5438189">p</span><span class="op" id="5438190">,</span>&nbsp;<span class="ident" id="5438192">nil</span><br>
<span class="lineno"></span><span class="op" id="5438196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5438199">func</span>&nbsp;<span class="op" id="5438204">(</span><span class="ident" id="5438205">c</span>&nbsp;<span class="op" id="5438207">*</span><span class="ident" id="5438208"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5438216">)</span>&nbsp;<span class="ident" id="5438218">init</span><span class="op" id="5438222">(</span><span class="op" id="5438223">)</span>&nbsp;<span class="op" id="5438225">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438228"><a href="/regexp/syntax/compile.go.html#5438205">c</a></span><span class="op" id="5438229">.</span><span class="ident" id="5438230">p</span>&nbsp;<span class="op" id="5438232">=</span>&nbsp;<span class="builtinfunc" id="5438234">new</span><span class="op" id="5438237">(</span><span class="ident" id="5438238"><a href="/regexp/syntax/prog.go.html#5497413">Prog</a></span><span class="op" id="5438242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438245"><a href="/regexp/syntax/compile.go.html#5438205">c</a></span><span class="op" id="5438246">.</span><span class="ident" id="5438247">p</span><span class="op" id="5438248">.</span><span class="ident" id="5438249">NumCap</span>&nbsp;<span class="op" id="5438256">=</span>&nbsp;<span class="num" id="5438258">2</span>&nbsp;<span class="comment" id="5438260">//&nbsp;implicit&nbsp;(&nbsp;and&nbsp;)&nbsp;for&nbsp;whole&nbsp;match&nbsp;$0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438300"><a href="/regexp/syntax/compile.go.html#5438205">c</a></span><span class="op" id="5438301">.</span><span class="ident" id="5438302">inst</span><span class="op" id="5438306">(</span><span class="ident" id="5438307"><a href="/regexp/syntax/prog.go.html#5497680">InstFail</a></span><span class="op" id="5438315">)</span><br>
<span class="lineno"></span><span class="op" id="5438317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="5438320">var</span>&nbsp;<span class="ident" id="5438324">anyRuneNotNL</span>&nbsp;<span class="op" id="5438337">=</span>&nbsp;<span class="op" id="5438339">[</span><span class="op" id="5438340">]</span><span class="builtintype" id="5438341">rune</span><span class="op" id="5438345">{</span><span class="num" id="5438346">0</span><span class="op" id="5438347">,</span>&nbsp;<span class="string" id="5438349">&#39;\n&#39;</span>&nbsp;<span class="op" id="5438354">-</span>&nbsp;<span class="num" id="5438356">1</span><span class="op" id="5438357">,</span>&nbsp;<span class="string" id="5438359">&#39;\n&#39;</span>&nbsp;<span class="op" id="5438364">+</span>&nbsp;<span class="num" id="5438366">1</span><span class="op" id="5438367">,</span>&nbsp;<span class="ident" id="5438369"><a href="/regexp/syntax/compile.go.html#5436359">unicode</a></span><span class="op" id="5438376">.</span><span class="ident" id="5438377">MaxRune</span><span class="op" id="5438384">}</span><br>
<span class="lineno"></span><span class="keyword" id="5438386">var</span>&nbsp;<span class="ident" id="5438390">anyRune</span>&nbsp;<span class="op" id="5438398">=</span>&nbsp;<span class="op" id="5438400">[</span><span class="op" id="5438401">]</span><span class="builtintype" id="5438402">rune</span><span class="op" id="5438406">{</span><span class="num" id="5438407">0</span><span class="op" id="5438408">,</span>&nbsp;<span class="ident" id="5438410"><a href="/regexp/syntax/compile.go.html#5436359">unicode</a></span><span class="op" id="5438417">.</span><span class="ident" id="5438418">MaxRune</span><span class="op" id="5438425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5438428">func</span>&nbsp;<span class="op" id="5438433">(</span><span class="ident" id="5438434">c</span>&nbsp;<span class="op" id="5438436">*</span><span class="ident" id="5438437"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5438445">)</span>&nbsp;<span class="ident" id="5438447">compile</span><span class="op" id="5438454">(</span><span class="ident" id="5438455">re</span>&nbsp;<span class="op" id="5438458">*</span><span class="ident" id="5438459"><a href="/regexp/syntax/regexp.go.html#5505274">Regexp</a></span><span class="op" id="5438465">)</span>&nbsp;<span class="ident" id="5438467"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5438472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438475">switch</span>&nbsp;<span class="ident" id="5438482"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438484">.</span><span class="ident" id="5438485">Op</span>&nbsp;<span class="op" id="5438488">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438491">case</span>&nbsp;<span class="ident" id="5438496"><a href="/regexp/syntax/regexp.go.html#5505965">OpNoMatch</a></span><span class="op" id="5438505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438509">return</span>&nbsp;<span class="ident" id="5438516"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438517">.</span><span class="ident" id="5438518">fail</span><span class="op" id="5438522">(</span><span class="op" id="5438523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438526">case</span>&nbsp;<span class="ident" id="5438531"><a href="/regexp/syntax/regexp.go.html#5506019">OpEmptyMatch</a></span><span class="op" id="5438543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438547">return</span>&nbsp;<span class="ident" id="5438554"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438555">.</span><span class="ident" id="5438556">nop</span><span class="op" id="5438559">(</span><span class="op" id="5438560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438563">case</span>&nbsp;<span class="ident" id="5438568"><a href="/regexp/syntax/regexp.go.html#5506075">OpLiteral</a></span><span class="op" id="5438577">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438581">if</span>&nbsp;<span class="builtinfunc" id="5438584">len</span><span class="op" id="5438587">(</span><span class="ident" id="5438588"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438590">.</span><span class="ident" id="5438591">Rune</span><span class="op" id="5438595">)</span>&nbsp;<span class="op" id="5438597">==</span>&nbsp;<span class="num" id="5438600">0</span>&nbsp;<span class="op" id="5438602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438607">return</span>&nbsp;<span class="ident" id="5438614"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438615">.</span><span class="ident" id="5438616">nop</span><span class="op" id="5438619">(</span><span class="op" id="5438620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438628">var</span>&nbsp;<span class="ident" id="5438632">f</span>&nbsp;<span class="ident" id="5438634"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438641">for</span>&nbsp;<span class="ident" id="5438645">j</span>&nbsp;<span class="op" id="5438647">:=</span>&nbsp;<span class="keyword" id="5438650">range</span>&nbsp;<span class="ident" id="5438656"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438658">.</span><span class="ident" id="5438659">Rune</span>&nbsp;<span class="op" id="5438664">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438669">f1</span>&nbsp;<span class="op" id="5438672">:=</span>&nbsp;<span class="ident" id="5438675"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438676">.</span><span class="builtintype" id="5438677">rune</span><span class="op" id="5438681">(</span><span class="ident" id="5438682"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438684">.</span><span class="ident" id="5438685">Rune</span><span class="op" id="5438689">[</span><span class="ident" id="5438690"><a href="/regexp/syntax/compile.go.html#5438645">j</a></span><span class="op" id="5438691">:</span><span class="ident" id="5438692"><a href="/regexp/syntax/compile.go.html#5438645">j</a></span><span class="op" id="5438693">+</span><span class="num" id="5438694">1</span><span class="op" id="5438695">]</span><span class="op" id="5438696">,</span>&nbsp;<span class="ident" id="5438698"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438700">.</span><span class="ident" id="5438701">Flags</span><span class="op" id="5438706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438711">if</span>&nbsp;<span class="ident" id="5438714"><a href="/regexp/syntax/compile.go.html#5438645">j</a></span>&nbsp;<span class="op" id="5438716">==</span>&nbsp;<span class="num" id="5438719">0</span>&nbsp;<span class="op" id="5438721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438727"><a href="/regexp/syntax/compile.go.html#5438632">f</a></span>&nbsp;<span class="op" id="5438729">=</span>&nbsp;<span class="ident" id="5438731"><a href="/regexp/syntax/compile.go.html#5438669">f1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438737">}</span>&nbsp;<span class="keyword" id="5438739">else</span>&nbsp;<span class="op" id="5438744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5438750"><a href="/regexp/syntax/compile.go.html#5438632">f</a></span>&nbsp;<span class="op" id="5438752">=</span>&nbsp;<span class="ident" id="5438754"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438755">.</span><span class="ident" id="5438756">cat</span><span class="op" id="5438759">(</span><span class="ident" id="5438760"><a href="/regexp/syntax/compile.go.html#5438632">f</a></span><span class="op" id="5438761">,</span>&nbsp;<span class="ident" id="5438763"><a href="/regexp/syntax/compile.go.html#5438669">f1</a></span><span class="op" id="5438765">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5438774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438778">return</span>&nbsp;<span class="ident" id="5438785"><a href="/regexp/syntax/compile.go.html#5438632">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438788">case</span>&nbsp;<span class="ident" id="5438793"><a href="/regexp/syntax/regexp.go.html#5506133">OpCharClass</a></span><span class="op" id="5438804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438808">return</span>&nbsp;<span class="ident" id="5438815"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438816">.</span><span class="builtintype" id="5438817">rune</span><span class="op" id="5438821">(</span><span class="ident" id="5438822"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438824">.</span><span class="ident" id="5438825">Rune</span><span class="op" id="5438829">,</span>&nbsp;<span class="ident" id="5438831"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5438833">.</span><span class="ident" id="5438834">Flags</span><span class="op" id="5438839">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438842">case</span>&nbsp;<span class="ident" id="5438847"><a href="/regexp/syntax/regexp.go.html#5506213">OpAnyCharNotNL</a></span><span class="op" id="5438861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438865">return</span>&nbsp;<span class="ident" id="5438872"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438873">.</span><span class="builtintype" id="5438874">rune</span><span class="op" id="5438878">(</span><span class="ident" id="5438879"><a href="/regexp/syntax/compile.go.html#5438324">anyRuneNotNL</a></span><span class="op" id="5438891">,</span>&nbsp;<span class="num" id="5438893">0</span><span class="op" id="5438894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438897">case</span>&nbsp;<span class="ident" id="5438902"><a href="/regexp/syntax/regexp.go.html#5506285">OpAnyChar</a></span><span class="op" id="5438911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438915">return</span>&nbsp;<span class="ident" id="5438922"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438923">.</span><span class="builtintype" id="5438924">rune</span><span class="op" id="5438928">(</span><span class="ident" id="5438929"><a href="/regexp/syntax/compile.go.html#5438390">anyRune</a></span><span class="op" id="5438936">,</span>&nbsp;<span class="num" id="5438938">0</span><span class="op" id="5438939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438942">case</span>&nbsp;<span class="ident" id="5438947"><a href="/regexp/syntax/regexp.go.html#5506342">OpBeginLine</a></span><span class="op" id="5438958">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438962">return</span>&nbsp;<span class="ident" id="5438969"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5438970">.</span><span class="ident" id="5438971">empty</span><span class="op" id="5438976">(</span><span class="ident" id="5438977"><a href="/regexp/syntax/prog.go.html#5498163">EmptyBeginLine</a></span><span class="op" id="5438991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5438994">case</span>&nbsp;<span class="ident" id="5438999"><a href="/regexp/syntax/regexp.go.html#5506419">OpEndLine</a></span><span class="op" id="5439008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439012">return</span>&nbsp;<span class="ident" id="5439019"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439020">.</span><span class="ident" id="5439021">empty</span><span class="op" id="5439026">(</span><span class="ident" id="5439027"><a href="/regexp/syntax/prog.go.html#5498199">EmptyEndLine</a></span><span class="op" id="5439039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439042">case</span>&nbsp;<span class="ident" id="5439047"><a href="/regexp/syntax/regexp.go.html#5506490">OpBeginText</a></span><span class="op" id="5439058">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439062">return</span>&nbsp;<span class="ident" id="5439069"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439070">.</span><span class="ident" id="5439071">empty</span><span class="op" id="5439076">(</span><span class="ident" id="5439077"><a href="/regexp/syntax/prog.go.html#5498213">EmptyBeginText</a></span><span class="op" id="5439091">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439094">case</span>&nbsp;<span class="ident" id="5439099"><a href="/regexp/syntax/regexp.go.html#5506567">OpEndText</a></span><span class="op" id="5439108">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439112">return</span>&nbsp;<span class="ident" id="5439119"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439120">.</span><span class="ident" id="5439121">empty</span><span class="op" id="5439126">(</span><span class="ident" id="5439127"><a href="/regexp/syntax/prog.go.html#5498229">EmptyEndText</a></span><span class="op" id="5439139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439142">case</span>&nbsp;<span class="ident" id="5439147"><a href="/regexp/syntax/regexp.go.html#5506638">OpWordBoundary</a></span><span class="op" id="5439161">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439165">return</span>&nbsp;<span class="ident" id="5439172"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439173">.</span><span class="ident" id="5439174">empty</span><span class="op" id="5439179">(</span><span class="ident" id="5439180"><a href="/regexp/syntax/prog.go.html#5498243">EmptyWordBoundary</a></span><span class="op" id="5439197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439200">case</span>&nbsp;<span class="ident" id="5439205"><a href="/regexp/syntax/regexp.go.html#5506700">OpNoWordBoundary</a></span><span class="op" id="5439221">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439225">return</span>&nbsp;<span class="ident" id="5439232"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439233">.</span><span class="ident" id="5439234">empty</span><span class="op" id="5439239">(</span><span class="ident" id="5439240"><a href="/regexp/syntax/prog.go.html#5498262">EmptyNoWordBoundary</a></span><span class="op" id="5439259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439262">case</span>&nbsp;<span class="ident" id="5439267"><a href="/regexp/syntax/regexp.go.html#5506766">OpCapture</a></span><span class="op" id="5439276">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439280">bra</span>&nbsp;<span class="op" id="5439284">:=</span>&nbsp;<span class="ident" id="5439287"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439288">.</span><span class="builtinfunc" id="5439289">cap</span><span class="op" id="5439292">(</span><span class="builtintype" id="5439293">uint32</span><span class="op" id="5439299">(</span><span class="ident" id="5439300"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439302">.</span><span class="ident" id="5439303">Cap</span>&nbsp;<span class="op" id="5439307">&lt;&lt;</span>&nbsp;<span class="num" id="5439310">1</span><span class="op" id="5439311">)</span><span class="op" id="5439312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439316">sub</span>&nbsp;<span class="op" id="5439320">:=</span>&nbsp;<span class="ident" id="5439323"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439324">.</span><span class="ident" id="5439325">compile</span><span class="op" id="5439332">(</span><span class="ident" id="5439333"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439335">.</span><span class="ident" id="5439336">Sub</span><span class="op" id="5439339">[</span><span class="num" id="5439340">0</span><span class="op" id="5439341">]</span><span class="op" id="5439342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439346">ket</span>&nbsp;<span class="op" id="5439350">:=</span>&nbsp;<span class="ident" id="5439353"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439354">.</span><span class="builtinfunc" id="5439355">cap</span><span class="op" id="5439358">(</span><span class="builtintype" id="5439359">uint32</span><span class="op" id="5439365">(</span><span class="ident" id="5439366"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439368">.</span><span class="ident" id="5439369">Cap</span><span class="op" id="5439372">&lt;&lt;</span><span class="num" id="5439374">1</span>&nbsp;<span class="op" id="5439376">|</span>&nbsp;<span class="num" id="5439378">1</span><span class="op" id="5439379">)</span><span class="op" id="5439380">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439384">return</span>&nbsp;<span class="ident" id="5439391"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439392">.</span><span class="ident" id="5439393">cat</span><span class="op" id="5439396">(</span><span class="ident" id="5439397"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439398">.</span><span class="ident" id="5439399">cat</span><span class="op" id="5439402">(</span><span class="ident" id="5439403"><a href="/regexp/syntax/compile.go.html#5439280">bra</a></span><span class="op" id="5439406">,</span>&nbsp;<span class="ident" id="5439408"><a href="/regexp/syntax/compile.go.html#5439316">sub</a></span><span class="op" id="5439411">)</span><span class="op" id="5439412">,</span>&nbsp;<span class="ident" id="5439414"><a href="/regexp/syntax/compile.go.html#5439346">ket</a></span><span class="op" id="5439417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439420">case</span>&nbsp;<span class="ident" id="5439425"><a href="/regexp/syntax/regexp.go.html#5506860">OpStar</a></span><span class="op" id="5439431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439435">return</span>&nbsp;<span class="ident" id="5439442"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439443">.</span><span class="ident" id="5439444">star</span><span class="op" id="5439448">(</span><span class="ident" id="5439449"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439450">.</span><span class="ident" id="5439451">compile</span><span class="op" id="5439458">(</span><span class="ident" id="5439459"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439461">.</span><span class="ident" id="5439462">Sub</span><span class="op" id="5439465">[</span><span class="num" id="5439466">0</span><span class="op" id="5439467">]</span><span class="op" id="5439468">)</span><span class="op" id="5439469">,</span>&nbsp;<span class="ident" id="5439471"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439473">.</span><span class="ident" id="5439474">Flags</span><span class="op" id="5439479">&amp;</span><span class="ident" id="5439480"><a href="/regexp/syntax/parse.go.html#5449964">NonGreedy</a></span>&nbsp;<span class="op" id="5439490">!=</span>&nbsp;<span class="num" id="5439493">0</span><span class="op" id="5439494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439497">case</span>&nbsp;<span class="ident" id="5439502"><a href="/regexp/syntax/regexp.go.html#5506929">OpPlus</a></span><span class="op" id="5439508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439512">return</span>&nbsp;<span class="ident" id="5439519"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439520">.</span><span class="ident" id="5439521">plus</span><span class="op" id="5439525">(</span><span class="ident" id="5439526"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439527">.</span><span class="ident" id="5439528">compile</span><span class="op" id="5439535">(</span><span class="ident" id="5439536"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439538">.</span><span class="ident" id="5439539">Sub</span><span class="op" id="5439542">[</span><span class="num" id="5439543">0</span><span class="op" id="5439544">]</span><span class="op" id="5439545">)</span><span class="op" id="5439546">,</span>&nbsp;<span class="ident" id="5439548"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439550">.</span><span class="ident" id="5439551">Flags</span><span class="op" id="5439556">&amp;</span><span class="ident" id="5439557"><a href="/regexp/syntax/parse.go.html#5449964">NonGreedy</a></span>&nbsp;<span class="op" id="5439567">!=</span>&nbsp;<span class="num" id="5439570">0</span><span class="op" id="5439571">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439574">case</span>&nbsp;<span class="ident" id="5439579"><a href="/regexp/syntax/regexp.go.html#5506997">OpQuest</a></span><span class="op" id="5439586">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439590">return</span>&nbsp;<span class="ident" id="5439597"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439598">.</span><span class="ident" id="5439599">quest</span><span class="op" id="5439604">(</span><span class="ident" id="5439605"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439606">.</span><span class="ident" id="5439607">compile</span><span class="op" id="5439614">(</span><span class="ident" id="5439615"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439617">.</span><span class="ident" id="5439618">Sub</span><span class="op" id="5439621">[</span><span class="num" id="5439622">0</span><span class="op" id="5439623">]</span><span class="op" id="5439624">)</span><span class="op" id="5439625">,</span>&nbsp;<span class="ident" id="5439627"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439629">.</span><span class="ident" id="5439630">Flags</span><span class="op" id="5439635">&amp;</span><span class="ident" id="5439636"><a href="/regexp/syntax/parse.go.html#5449964">NonGreedy</a></span>&nbsp;<span class="op" id="5439646">!=</span>&nbsp;<span class="num" id="5439649">0</span><span class="op" id="5439650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439653">case</span>&nbsp;<span class="ident" id="5439658"><a href="/regexp/syntax/regexp.go.html#5507171">OpConcat</a></span><span class="op" id="5439666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439670">if</span>&nbsp;<span class="builtinfunc" id="5439673">len</span><span class="op" id="5439676">(</span><span class="ident" id="5439677"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439679">.</span><span class="ident" id="5439680">Sub</span><span class="op" id="5439683">)</span>&nbsp;<span class="op" id="5439685">==</span>&nbsp;<span class="num" id="5439688">0</span>&nbsp;<span class="op" id="5439690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439695">return</span>&nbsp;<span class="ident" id="5439702"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439703">.</span><span class="ident" id="5439704">nop</span><span class="op" id="5439707">(</span><span class="op" id="5439708">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439716">var</span>&nbsp;<span class="ident" id="5439720">f</span>&nbsp;<span class="ident" id="5439722"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439729">for</span>&nbsp;<span class="ident" id="5439733">i</span><span class="op" id="5439734">,</span>&nbsp;<span class="ident" id="5439736">sub</span>&nbsp;<span class="op" id="5439740">:=</span>&nbsp;<span class="keyword" id="5439743">range</span>&nbsp;<span class="ident" id="5439749"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439751">.</span><span class="ident" id="5439752">Sub</span>&nbsp;<span class="op" id="5439756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439761">if</span>&nbsp;<span class="ident" id="5439764"><a href="/regexp/syntax/compile.go.html#5439733">i</a></span>&nbsp;<span class="op" id="5439766">==</span>&nbsp;<span class="num" id="5439769">0</span>&nbsp;<span class="op" id="5439771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439777"><a href="/regexp/syntax/compile.go.html#5439720">f</a></span>&nbsp;<span class="op" id="5439779">=</span>&nbsp;<span class="ident" id="5439781"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439782">.</span><span class="ident" id="5439783">compile</span><span class="op" id="5439790">(</span><span class="ident" id="5439791"><a href="/regexp/syntax/compile.go.html#5439736">sub</a></span><span class="op" id="5439794">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439799">}</span>&nbsp;<span class="keyword" id="5439801">else</span>&nbsp;<span class="op" id="5439806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439812"><a href="/regexp/syntax/compile.go.html#5439720">f</a></span>&nbsp;<span class="op" id="5439814">=</span>&nbsp;<span class="ident" id="5439816"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439817">.</span><span class="ident" id="5439818">cat</span><span class="op" id="5439821">(</span><span class="ident" id="5439822"><a href="/regexp/syntax/compile.go.html#5439720">f</a></span><span class="op" id="5439823">,</span>&nbsp;<span class="ident" id="5439825"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439826">.</span><span class="ident" id="5439827">compile</span><span class="op" id="5439834">(</span><span class="ident" id="5439835"><a href="/regexp/syntax/compile.go.html#5439736">sub</a></span><span class="op" id="5439838">)</span><span class="op" id="5439839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439852">return</span>&nbsp;<span class="ident" id="5439859"><a href="/regexp/syntax/compile.go.html#5439720">f</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439862">case</span>&nbsp;<span class="ident" id="5439867"><a href="/regexp/syntax/regexp.go.html#5507236">OpAlternate</a></span><span class="op" id="5439878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439882">var</span>&nbsp;<span class="ident" id="5439886">f</span>&nbsp;<span class="ident" id="5439888"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439895">for</span>&nbsp;<span class="ident" id="5439899">_</span><span class="op" id="5439900">,</span>&nbsp;<span class="ident" id="5439902">sub</span>&nbsp;<span class="op" id="5439906">:=</span>&nbsp;<span class="keyword" id="5439909">range</span>&nbsp;<span class="ident" id="5439915"><a href="/regexp/syntax/compile.go.html#5438455">re</a></span><span class="op" id="5439917">.</span><span class="ident" id="5439918">Sub</span>&nbsp;<span class="op" id="5439922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5439927"><a href="/regexp/syntax/compile.go.html#5439886">f</a></span>&nbsp;<span class="op" id="5439929">=</span>&nbsp;<span class="ident" id="5439931"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439932">.</span><span class="ident" id="5439933">alt</span><span class="op" id="5439936">(</span><span class="ident" id="5439937"><a href="/regexp/syntax/compile.go.html#5439886">f</a></span><span class="op" id="5439938">,</span>&nbsp;<span class="ident" id="5439940"><a href="/regexp/syntax/compile.go.html#5438434">c</a></span><span class="op" id="5439941">.</span><span class="ident" id="5439942">compile</span><span class="op" id="5439949">(</span><span class="ident" id="5439950"><a href="/regexp/syntax/compile.go.html#5439902">sub</a></span><span class="op" id="5439953">)</span><span class="op" id="5439954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439958">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5439962">return</span>&nbsp;<span class="ident" id="5439969"><a href="/regexp/syntax/compile.go.html#5439886">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5439972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5439975">panic</span><span class="op" id="5439980">(</span><span class="string" id="5439981">&#34;regexp:&nbsp;unhandled&nbsp;case&nbsp;in&nbsp;compile&#34;</span><span class="op" id="5440016">)</span><br>
<span class="lineno"></span><span class="op" id="5440018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="5440021">func</span>&nbsp;<span class="op" id="5440026">(</span><span class="ident" id="5440027">c</span>&nbsp;<span class="op" id="5440029">*</span><span class="ident" id="5440030"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440038">)</span>&nbsp;<span class="ident" id="5440040">inst</span><span class="op" id="5440044">(</span><span class="ident" id="5440045">op</span>&nbsp;<span class="ident" id="5440048"><a href="/regexp/syntax/prog.go.html#5497580">InstOp</a></span><span class="op" id="5440054">)</span>&nbsp;<span class="ident" id="5440056"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5440064">//&nbsp;TODO:&nbsp;impose&nbsp;length&nbsp;limit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440094">f</span>&nbsp;<span class="op" id="5440096">:=</span>&nbsp;<span class="ident" id="5440099"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440103">{</span><span class="ident" id="5440104">i</span><span class="op" id="5440105">:</span>&nbsp;<span class="builtintype" id="5440107">uint32</span><span class="op" id="5440113">(</span><span class="builtinfunc" id="5440114">len</span><span class="op" id="5440117">(</span><span class="ident" id="5440118"><a href="/regexp/syntax/compile.go.html#5440027">c</a></span><span class="op" id="5440119">.</span><span class="ident" id="5440120">p</span><span class="op" id="5440121">.</span><span class="ident" id="5440122">Inst</span><span class="op" id="5440126">)</span><span class="op" id="5440127">)</span><span class="op" id="5440128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440131"><a href="/regexp/syntax/compile.go.html#5440027">c</a></span><span class="op" id="5440132">.</span><span class="ident" id="5440133">p</span><span class="op" id="5440134">.</span><span class="ident" id="5440135">Inst</span>&nbsp;<span class="op" id="5440140">=</span>&nbsp;<span class="builtinfunc" id="5440142">append</span><span class="op" id="5440148">(</span><span class="ident" id="5440149"><a href="/regexp/syntax/compile.go.html#5440027">c</a></span><span class="op" id="5440150">.</span><span class="ident" id="5440151">p</span><span class="op" id="5440152">.</span><span class="ident" id="5440153">Inst</span><span class="op" id="5440157">,</span>&nbsp;<span class="ident" id="5440159"><a href="/regexp/syntax/prog.go.html#5499465">Inst</a></span><span class="op" id="5440163">{</span><span class="ident" id="5440164">Op</span><span class="op" id="5440166">:</span>&nbsp;<span class="ident" id="5440168"><a href="/regexp/syntax/compile.go.html#5440045">op</a></span><span class="op" id="5440170">}</span><span class="op" id="5440171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440174">return</span>&nbsp;<span class="ident" id="5440181"><a href="/regexp/syntax/compile.go.html#5440094">f</a></span><br>
<span class="lineno">175</span><span class="op" id="5440183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5440186">func</span>&nbsp;<span class="op" id="5440191">(</span><span class="ident" id="5440192">c</span>&nbsp;<span class="op" id="5440194">*</span><span class="ident" id="5440195"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440203">)</span>&nbsp;<span class="ident" id="5440205">nop</span><span class="op" id="5440208">(</span><span class="op" id="5440209">)</span>&nbsp;<span class="ident" id="5440211"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440219">f</span>&nbsp;<span class="op" id="5440221">:=</span>&nbsp;<span class="ident" id="5440224"><a href="/regexp/syntax/compile.go.html#5440192">c</a></span><span class="op" id="5440225">.</span><span class="ident" id="5440226">inst</span><span class="op" id="5440230">(</span><span class="ident" id="5440231"><a href="/regexp/syntax/prog.go.html#5497690">InstNop</a></span><span class="op" id="5440238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440241"><a href="/regexp/syntax/compile.go.html#5440219">f</a></span><span class="op" id="5440242">.</span><span class="ident" id="5440243">out</span>&nbsp;<span class="op" id="5440247">=</span>&nbsp;<span class="ident" id="5440249"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5440258">(</span><span class="ident" id="5440259"><a href="/regexp/syntax/compile.go.html#5440219">f</a></span><span class="op" id="5440260">.</span><span class="ident" id="5440261">i</span>&nbsp;<span class="op" id="5440263">&lt;&lt;</span>&nbsp;<span class="num" id="5440266">1</span><span class="op" id="5440267">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440270">return</span>&nbsp;<span class="ident" id="5440277"><a href="/regexp/syntax/compile.go.html#5440219">f</a></span><br>
<span class="lineno"></span><span class="op" id="5440279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5440282">func</span>&nbsp;<span class="op" id="5440287">(</span><span class="ident" id="5440288">c</span>&nbsp;<span class="op" id="5440290">*</span><span class="ident" id="5440291"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440299">)</span>&nbsp;<span class="ident" id="5440301">fail</span><span class="op" id="5440305">(</span><span class="op" id="5440306">)</span>&nbsp;<span class="ident" id="5440308"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440316">return</span>&nbsp;<span class="ident" id="5440323"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440327">{</span><span class="op" id="5440328">}</span><br>
<span class="lineno">185</span><span class="op" id="5440330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5440333">func</span>&nbsp;<span class="op" id="5440338">(</span><span class="ident" id="5440339">c</span>&nbsp;<span class="op" id="5440341">*</span><span class="ident" id="5440342"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440350">)</span>&nbsp;<span class="builtinfunc" id="5440352">cap</span><span class="op" id="5440355">(</span><span class="ident" id="5440356">arg</span>&nbsp;<span class="builtintype" id="5440360">uint32</span><span class="op" id="5440366">)</span>&nbsp;<span class="ident" id="5440368"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440376">f</span>&nbsp;<span class="op" id="5440378">:=</span>&nbsp;<span class="ident" id="5440381"><a href="/regexp/syntax/compile.go.html#5440339">c</a></span><span class="op" id="5440382">.</span><span class="ident" id="5440383">inst</span><span class="op" id="5440387">(</span><span class="ident" id="5440388"><a href="/regexp/syntax/prog.go.html#5497640">InstCapture</a></span><span class="op" id="5440399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440402"><a href="/regexp/syntax/compile.go.html#5440376">f</a></span><span class="op" id="5440403">.</span><span class="ident" id="5440404">out</span>&nbsp;<span class="op" id="5440408">=</span>&nbsp;<span class="ident" id="5440410"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5440419">(</span><span class="ident" id="5440420"><a href="/regexp/syntax/compile.go.html#5440376">f</a></span><span class="op" id="5440421">.</span><span class="ident" id="5440422">i</span>&nbsp;<span class="op" id="5440424">&lt;&lt;</span>&nbsp;<span class="num" id="5440427">1</span><span class="op" id="5440428">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440431"><a href="/regexp/syntax/compile.go.html#5440339">c</a></span><span class="op" id="5440432">.</span><span class="ident" id="5440433">p</span><span class="op" id="5440434">.</span><span class="ident" id="5440435">Inst</span><span class="op" id="5440439">[</span><span class="ident" id="5440440"><a href="/regexp/syntax/compile.go.html#5440376">f</a></span><span class="op" id="5440441">.</span><span class="ident" id="5440442">i</span><span class="op" id="5440443">]</span><span class="op" id="5440444">.</span><span class="ident" id="5440445">Arg</span>&nbsp;<span class="op" id="5440449">=</span>&nbsp;<span class="ident" id="5440451"><a href="/regexp/syntax/compile.go.html#5440356">arg</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440457">if</span>&nbsp;<span class="ident" id="5440460"><a href="/regexp/syntax/compile.go.html#5440339">c</a></span><span class="op" id="5440461">.</span><span class="ident" id="5440462">p</span><span class="op" id="5440463">.</span><span class="ident" id="5440464">NumCap</span>&nbsp;<span class="op" id="5440471">&lt;</span>&nbsp;<span class="builtintype" id="5440473">int</span><span class="op" id="5440476">(</span><span class="ident" id="5440477"><a href="/regexp/syntax/compile.go.html#5440356">arg</a></span><span class="op" id="5440480">)</span><span class="op" id="5440481">+</span><span class="num" id="5440482">1</span>&nbsp;<span class="op" id="5440484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440488"><a href="/regexp/syntax/compile.go.html#5440339">c</a></span><span class="op" id="5440489">.</span><span class="ident" id="5440490">p</span><span class="op" id="5440491">.</span><span class="ident" id="5440492">NumCap</span>&nbsp;<span class="op" id="5440499">=</span>&nbsp;<span class="builtintype" id="5440501">int</span><span class="op" id="5440504">(</span><span class="ident" id="5440505"><a href="/regexp/syntax/compile.go.html#5440356">arg</a></span><span class="op" id="5440508">)</span>&nbsp;<span class="op" id="5440510">+</span>&nbsp;<span class="num" id="5440512">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5440515">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440518">return</span>&nbsp;<span class="ident" id="5440525"><a href="/regexp/syntax/compile.go.html#5440376">f</a></span><br>
<span class="lineno"></span><span class="op" id="5440527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5440530">func</span>&nbsp;<span class="op" id="5440535">(</span><span class="ident" id="5440536">c</span>&nbsp;<span class="op" id="5440538">*</span><span class="ident" id="5440539"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440547">)</span>&nbsp;<span class="ident" id="5440549">cat</span><span class="op" id="5440552">(</span><span class="ident" id="5440553">f1</span><span class="op" id="5440555">,</span>&nbsp;<span class="ident" id="5440557">f2</span>&nbsp;<span class="ident" id="5440560"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440564">)</span>&nbsp;<span class="ident" id="5440566"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5440574">//&nbsp;concat&nbsp;of&nbsp;failure&nbsp;is&nbsp;failure</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440607">if</span>&nbsp;<span class="ident" id="5440610"><a href="/regexp/syntax/compile.go.html#5440553">f1</a></span><span class="op" id="5440612">.</span><span class="ident" id="5440613">i</span>&nbsp;<span class="op" id="5440615">==</span>&nbsp;<span class="num" id="5440618">0</span>&nbsp;<span class="op" id="5440620">||</span>&nbsp;<span class="ident" id="5440623"><a href="/regexp/syntax/compile.go.html#5440557">f2</a></span><span class="op" id="5440625">.</span><span class="ident" id="5440626">i</span>&nbsp;<span class="op" id="5440628">==</span>&nbsp;<span class="num" id="5440631">0</span>&nbsp;<span class="op" id="5440633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440637">return</span>&nbsp;<span class="ident" id="5440644"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440648">{</span><span class="op" id="5440649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5440652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5440656">//&nbsp;TODO:&nbsp;elide&nbsp;nop</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440677"><a href="/regexp/syntax/compile.go.html#5440553">f1</a></span><span class="op" id="5440679">.</span><span class="ident" id="5440680">out</span><span class="op" id="5440683">.</span><span class="ident" id="5440684">patch</span><span class="op" id="5440689">(</span><span class="ident" id="5440690"><a href="/regexp/syntax/compile.go.html#5440536">c</a></span><span class="op" id="5440691">.</span><span class="ident" id="5440692">p</span><span class="op" id="5440693">,</span>&nbsp;<span class="ident" id="5440695"><a href="/regexp/syntax/compile.go.html#5440557">f2</a></span><span class="op" id="5440697">.</span><span class="ident" id="5440698">i</span><span class="op" id="5440699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440702">return</span>&nbsp;<span class="ident" id="5440709"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440713">{</span><span class="ident" id="5440714"><a href="/regexp/syntax/compile.go.html#5440553">f1</a></span><span class="op" id="5440716">.</span><span class="ident" id="5440717">i</span><span class="op" id="5440718">,</span>&nbsp;<span class="ident" id="5440720"><a href="/regexp/syntax/compile.go.html#5440557">f2</a></span><span class="op" id="5440722">.</span><span class="ident" id="5440723">out</span><span class="op" id="5440726">}</span><br>
<span class="lineno"></span><span class="op" id="5440728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="5440731">func</span>&nbsp;<span class="op" id="5440736">(</span><span class="ident" id="5440737">c</span>&nbsp;<span class="op" id="5440739">*</span><span class="ident" id="5440740"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5440748">)</span>&nbsp;<span class="ident" id="5440750">alt</span><span class="op" id="5440753">(</span><span class="ident" id="5440754">f1</span><span class="op" id="5440756">,</span>&nbsp;<span class="ident" id="5440758">f2</span>&nbsp;<span class="ident" id="5440761"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5440765">)</span>&nbsp;<span class="ident" id="5440767"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5440772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5440775">//&nbsp;alt&nbsp;of&nbsp;failure&nbsp;is&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440803">if</span>&nbsp;<span class="ident" id="5440806"><a href="/regexp/syntax/compile.go.html#5440754">f1</a></span><span class="op" id="5440808">.</span><span class="ident" id="5440809">i</span>&nbsp;<span class="op" id="5440811">==</span>&nbsp;<span class="num" id="5440814">0</span>&nbsp;<span class="op" id="5440816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440820">return</span>&nbsp;<span class="ident" id="5440827"><a href="/regexp/syntax/compile.go.html#5440758">f2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5440831">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440834">if</span>&nbsp;<span class="ident" id="5440837"><a href="/regexp/syntax/compile.go.html#5440758">f2</a></span><span class="op" id="5440839">.</span><span class="ident" id="5440840">i</span>&nbsp;<span class="op" id="5440842">==</span>&nbsp;<span class="num" id="5440845">0</span>&nbsp;<span class="op" id="5440847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440851">return</span>&nbsp;<span class="ident" id="5440858"><a href="/regexp/syntax/compile.go.html#5440754">f1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5440862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440866">f</span>&nbsp;<span class="op" id="5440868">:=</span>&nbsp;<span class="ident" id="5440871"><a href="/regexp/syntax/compile.go.html#5440737">c</a></span><span class="op" id="5440872">.</span><span class="ident" id="5440873">inst</span><span class="op" id="5440877">(</span><span class="ident" id="5440878"><a href="/regexp/syntax/prog.go.html#5497603">InstAlt</a></span><span class="op" id="5440885">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440888">i</span>&nbsp;<span class="op" id="5440890">:=</span>&nbsp;<span class="op" id="5440893">&amp;</span><span class="ident" id="5440894"><a href="/regexp/syntax/compile.go.html#5440737">c</a></span><span class="op" id="5440895">.</span><span class="ident" id="5440896">p</span><span class="op" id="5440897">.</span><span class="ident" id="5440898">Inst</span><span class="op" id="5440902">[</span><span class="ident" id="5440903"><a href="/regexp/syntax/compile.go.html#5440866">f</a></span><span class="op" id="5440904">.</span><span class="ident" id="5440905">i</span><span class="op" id="5440906">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440909"><a href="/regexp/syntax/compile.go.html#5440888">i</a></span><span class="op" id="5440910">.</span><span class="ident" id="5440911">Out</span>&nbsp;<span class="op" id="5440915">=</span>&nbsp;<span class="ident" id="5440917"><a href="/regexp/syntax/compile.go.html#5440754">f1</a></span><span class="op" id="5440919">.</span><span class="ident" id="5440920">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440923"><a href="/regexp/syntax/compile.go.html#5440888">i</a></span><span class="op" id="5440924">.</span><span class="ident" id="5440925">Arg</span>&nbsp;<span class="op" id="5440929">=</span>&nbsp;<span class="ident" id="5440931"><a href="/regexp/syntax/compile.go.html#5440758">f2</a></span><span class="op" id="5440933">.</span><span class="ident" id="5440934">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5440937"><a href="/regexp/syntax/compile.go.html#5440866">f</a></span><span class="op" id="5440938">.</span><span class="ident" id="5440939">out</span>&nbsp;<span class="op" id="5440943">=</span>&nbsp;<span class="ident" id="5440945"><a href="/regexp/syntax/compile.go.html#5440754">f1</a></span><span class="op" id="5440947">.</span><span class="ident" id="5440948">out</span><span class="op" id="5440951">.</span><span class="builtinfunc" id="5440952">append</span><span class="op" id="5440958">(</span><span class="ident" id="5440959"><a href="/regexp/syntax/compile.go.html#5440737">c</a></span><span class="op" id="5440960">.</span><span class="ident" id="5440961">p</span><span class="op" id="5440962">,</span>&nbsp;<span class="ident" id="5440964"><a href="/regexp/syntax/compile.go.html#5440758">f2</a></span><span class="op" id="5440966">.</span><span class="ident" id="5440967">out</span><span class="op" id="5440970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5440973">return</span>&nbsp;<span class="ident" id="5440980"><a href="/regexp/syntax/compile.go.html#5440866">f</a></span><br>
<span class="lineno">225</span><span class="op" id="5440982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5440985">func</span>&nbsp;<span class="op" id="5440990">(</span><span class="ident" id="5440991">c</span>&nbsp;<span class="op" id="5440993">*</span><span class="ident" id="5440994"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5441002">)</span>&nbsp;<span class="ident" id="5441004">quest</span><span class="op" id="5441009">(</span><span class="ident" id="5441010">f1</span>&nbsp;<span class="ident" id="5441013"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5441017">,</span>&nbsp;<span class="ident" id="5441019">nongreedy</span>&nbsp;<span class="builtintype" id="5441029">bool</span><span class="op" id="5441033">)</span>&nbsp;<span class="ident" id="5441035"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5441040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441043">f</span>&nbsp;<span class="op" id="5441045">:=</span>&nbsp;<span class="ident" id="5441048"><a href="/regexp/syntax/compile.go.html#5440991">c</a></span><span class="op" id="5441049">.</span><span class="ident" id="5441050">inst</span><span class="op" id="5441054">(</span><span class="ident" id="5441055"><a href="/regexp/syntax/prog.go.html#5497603">InstAlt</a></span><span class="op" id="5441062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441065">i</span>&nbsp;<span class="op" id="5441067">:=</span>&nbsp;<span class="op" id="5441070">&amp;</span><span class="ident" id="5441071"><a href="/regexp/syntax/compile.go.html#5440991">c</a></span><span class="op" id="5441072">.</span><span class="ident" id="5441073">p</span><span class="op" id="5441074">.</span><span class="ident" id="5441075">Inst</span><span class="op" id="5441079">[</span><span class="ident" id="5441080"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441081">.</span><span class="ident" id="5441082">i</span><span class="op" id="5441083">]</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441086">if</span>&nbsp;<span class="ident" id="5441089"><a href="/regexp/syntax/compile.go.html#5441019">nongreedy</a></span>&nbsp;<span class="op" id="5441099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441103"><a href="/regexp/syntax/compile.go.html#5441065">i</a></span><span class="op" id="5441104">.</span><span class="ident" id="5441105">Arg</span>&nbsp;<span class="op" id="5441109">=</span>&nbsp;<span class="ident" id="5441111"><a href="/regexp/syntax/compile.go.html#5441010">f1</a></span><span class="op" id="5441113">.</span><span class="ident" id="5441114">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441118"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441119">.</span><span class="ident" id="5441120">out</span>&nbsp;<span class="op" id="5441124">=</span>&nbsp;<span class="ident" id="5441126"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5441135">(</span><span class="ident" id="5441136"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441137">.</span><span class="ident" id="5441138">i</span>&nbsp;<span class="op" id="5441140">&lt;&lt;</span>&nbsp;<span class="num" id="5441143">1</span><span class="op" id="5441144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5441147">}</span>&nbsp;<span class="keyword" id="5441149">else</span>&nbsp;<span class="op" id="5441154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441158"><a href="/regexp/syntax/compile.go.html#5441065">i</a></span><span class="op" id="5441159">.</span><span class="ident" id="5441160">Out</span>&nbsp;<span class="op" id="5441164">=</span>&nbsp;<span class="ident" id="5441166"><a href="/regexp/syntax/compile.go.html#5441010">f1</a></span><span class="op" id="5441168">.</span><span class="ident" id="5441169">i</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441173"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441174">.</span><span class="ident" id="5441175">out</span>&nbsp;<span class="op" id="5441179">=</span>&nbsp;<span class="ident" id="5441181"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5441190">(</span><span class="ident" id="5441191"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441192">.</span><span class="ident" id="5441193">i</span><span class="op" id="5441194">&lt;&lt;</span><span class="num" id="5441196">1</span>&nbsp;<span class="op" id="5441198">|</span>&nbsp;<span class="num" id="5441200">1</span><span class="op" id="5441201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5441204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441207"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441208">.</span><span class="ident" id="5441209">out</span>&nbsp;<span class="op" id="5441213">=</span>&nbsp;<span class="ident" id="5441215"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><span class="op" id="5441216">.</span><span class="ident" id="5441217">out</span><span class="op" id="5441220">.</span><span class="builtinfunc" id="5441221">append</span><span class="op" id="5441227">(</span><span class="ident" id="5441228"><a href="/regexp/syntax/compile.go.html#5440991">c</a></span><span class="op" id="5441229">.</span><span class="ident" id="5441230">p</span><span class="op" id="5441231">,</span>&nbsp;<span class="ident" id="5441233"><a href="/regexp/syntax/compile.go.html#5441010">f1</a></span><span class="op" id="5441235">.</span><span class="ident" id="5441236">out</span><span class="op" id="5441239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441242">return</span>&nbsp;<span class="ident" id="5441249"><a href="/regexp/syntax/compile.go.html#5441043">f</a></span><br>
<span class="lineno"></span><span class="op" id="5441251">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="5441254">func</span>&nbsp;<span class="op" id="5441259">(</span><span class="ident" id="5441260">c</span>&nbsp;<span class="op" id="5441262">*</span><span class="ident" id="5441263"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5441271">)</span>&nbsp;<span class="ident" id="5441273">star</span><span class="op" id="5441277">(</span><span class="ident" id="5441278">f1</span>&nbsp;<span class="ident" id="5441281"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5441285">,</span>&nbsp;<span class="ident" id="5441287">nongreedy</span>&nbsp;<span class="builtintype" id="5441297">bool</span><span class="op" id="5441301">)</span>&nbsp;<span class="ident" id="5441303"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5441308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441311">f</span>&nbsp;<span class="op" id="5441313">:=</span>&nbsp;<span class="ident" id="5441316"><a href="/regexp/syntax/compile.go.html#5441260">c</a></span><span class="op" id="5441317">.</span><span class="ident" id="5441318">inst</span><span class="op" id="5441322">(</span><span class="ident" id="5441323"><a href="/regexp/syntax/prog.go.html#5497603">InstAlt</a></span><span class="op" id="5441330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441333">i</span>&nbsp;<span class="op" id="5441335">:=</span>&nbsp;<span class="op" id="5441338">&amp;</span><span class="ident" id="5441339"><a href="/regexp/syntax/compile.go.html#5441260">c</a></span><span class="op" id="5441340">.</span><span class="ident" id="5441341">p</span><span class="op" id="5441342">.</span><span class="ident" id="5441343">Inst</span><span class="op" id="5441347">[</span><span class="ident" id="5441348"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441349">.</span><span class="ident" id="5441350">i</span><span class="op" id="5441351">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441354">if</span>&nbsp;<span class="ident" id="5441357"><a href="/regexp/syntax/compile.go.html#5441287">nongreedy</a></span>&nbsp;<span class="op" id="5441367">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441371"><a href="/regexp/syntax/compile.go.html#5441333">i</a></span><span class="op" id="5441372">.</span><span class="ident" id="5441373">Arg</span>&nbsp;<span class="op" id="5441377">=</span>&nbsp;<span class="ident" id="5441379"><a href="/regexp/syntax/compile.go.html#5441278">f1</a></span><span class="op" id="5441381">.</span><span class="ident" id="5441382">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441386"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441387">.</span><span class="ident" id="5441388">out</span>&nbsp;<span class="op" id="5441392">=</span>&nbsp;<span class="ident" id="5441394"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5441403">(</span><span class="ident" id="5441404"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441405">.</span><span class="ident" id="5441406">i</span>&nbsp;<span class="op" id="5441408">&lt;&lt;</span>&nbsp;<span class="num" id="5441411">1</span><span class="op" id="5441412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5441415">}</span>&nbsp;<span class="keyword" id="5441417">else</span>&nbsp;<span class="op" id="5441422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441426"><a href="/regexp/syntax/compile.go.html#5441333">i</a></span><span class="op" id="5441427">.</span><span class="ident" id="5441428">Out</span>&nbsp;<span class="op" id="5441432">=</span>&nbsp;<span class="ident" id="5441434"><a href="/regexp/syntax/compile.go.html#5441278">f1</a></span><span class="op" id="5441436">.</span><span class="ident" id="5441437">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441441"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441442">.</span><span class="ident" id="5441443">out</span>&nbsp;<span class="op" id="5441447">=</span>&nbsp;<span class="ident" id="5441449"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5441458">(</span><span class="ident" id="5441459"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441460">.</span><span class="ident" id="5441461">i</span><span class="op" id="5441462">&lt;&lt;</span><span class="num" id="5441464">1</span>&nbsp;<span class="op" id="5441466">|</span>&nbsp;<span class="num" id="5441468">1</span><span class="op" id="5441469">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5441472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441475"><a href="/regexp/syntax/compile.go.html#5441278">f1</a></span><span class="op" id="5441477">.</span><span class="ident" id="5441478">out</span><span class="op" id="5441481">.</span><span class="ident" id="5441482">patch</span><span class="op" id="5441487">(</span><span class="ident" id="5441488"><a href="/regexp/syntax/compile.go.html#5441260">c</a></span><span class="op" id="5441489">.</span><span class="ident" id="5441490">p</span><span class="op" id="5441491">,</span>&nbsp;<span class="ident" id="5441493"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><span class="op" id="5441494">.</span><span class="ident" id="5441495">i</span><span class="op" id="5441496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441499">return</span>&nbsp;<span class="ident" id="5441506"><a href="/regexp/syntax/compile.go.html#5441311">f</a></span><br>
<span class="lineno"></span><span class="op" id="5441508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="5441511">func</span>&nbsp;<span class="op" id="5441516">(</span><span class="ident" id="5441517">c</span>&nbsp;<span class="op" id="5441519">*</span><span class="ident" id="5441520"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5441528">)</span>&nbsp;<span class="ident" id="5441530">plus</span><span class="op" id="5441534">(</span><span class="ident" id="5441535">f1</span>&nbsp;<span class="ident" id="5441538"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5441542">,</span>&nbsp;<span class="ident" id="5441544">nongreedy</span>&nbsp;<span class="builtintype" id="5441554">bool</span><span class="op" id="5441558">)</span>&nbsp;<span class="ident" id="5441560"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5441565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441568">return</span>&nbsp;<span class="ident" id="5441575"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span><span class="op" id="5441579">{</span><span class="ident" id="5441580"><a href="/regexp/syntax/compile.go.html#5441535">f1</a></span><span class="op" id="5441582">.</span><span class="ident" id="5441583">i</span><span class="op" id="5441584">,</span>&nbsp;<span class="ident" id="5441586"><a href="/regexp/syntax/compile.go.html#5441517">c</a></span><span class="op" id="5441587">.</span><span class="ident" id="5441588">star</span><span class="op" id="5441592">(</span><span class="ident" id="5441593"><a href="/regexp/syntax/compile.go.html#5441535">f1</a></span><span class="op" id="5441595">,</span>&nbsp;<span class="ident" id="5441597"><a href="/regexp/syntax/compile.go.html#5441544">nongreedy</a></span><span class="op" id="5441606">)</span><span class="op" id="5441607">.</span><span class="ident" id="5441608">out</span><span class="op" id="5441611">}</span><br>
<span class="lineno"></span><span class="op" id="5441613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5441616">func</span>&nbsp;<span class="op" id="5441621">(</span><span class="ident" id="5441622">c</span>&nbsp;<span class="op" id="5441624">*</span><span class="ident" id="5441625"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5441633">)</span>&nbsp;<span class="ident" id="5441635">empty</span><span class="op" id="5441640">(</span><span class="ident" id="5441641">op</span>&nbsp;<span class="ident" id="5441644"><a href="/regexp/syntax/prog.go.html#5498139">EmptyOp</a></span><span class="op" id="5441651">)</span>&nbsp;<span class="ident" id="5441653"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5441658">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441661">f</span>&nbsp;<span class="op" id="5441663">:=</span>&nbsp;<span class="ident" id="5441666"><a href="/regexp/syntax/compile.go.html#5441622">c</a></span><span class="op" id="5441667">.</span><span class="ident" id="5441668">inst</span><span class="op" id="5441672">(</span><span class="ident" id="5441673"><a href="/regexp/syntax/prog.go.html#5497653">InstEmptyWidth</a></span><span class="op" id="5441687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441690"><a href="/regexp/syntax/compile.go.html#5441622">c</a></span><span class="op" id="5441691">.</span><span class="ident" id="5441692">p</span><span class="op" id="5441693">.</span><span class="ident" id="5441694">Inst</span><span class="op" id="5441698">[</span><span class="ident" id="5441699"><a href="/regexp/syntax/compile.go.html#5441661">f</a></span><span class="op" id="5441700">.</span><span class="ident" id="5441701">i</span><span class="op" id="5441702">]</span><span class="op" id="5441703">.</span><span class="ident" id="5441704">Arg</span>&nbsp;<span class="op" id="5441708">=</span>&nbsp;<span class="builtintype" id="5441710">uint32</span><span class="op" id="5441716">(</span><span class="ident" id="5441717"><a href="/regexp/syntax/compile.go.html#5441641">op</a></span><span class="op" id="5441719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441722"><a href="/regexp/syntax/compile.go.html#5441661">f</a></span><span class="op" id="5441723">.</span><span class="ident" id="5441724">out</span>&nbsp;<span class="op" id="5441728">=</span>&nbsp;<span class="ident" id="5441730"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5441739">(</span><span class="ident" id="5441740"><a href="/regexp/syntax/compile.go.html#5441661">f</a></span><span class="op" id="5441741">.</span><span class="ident" id="5441742">i</span>&nbsp;<span class="op" id="5441744">&lt;&lt;</span>&nbsp;<span class="num" id="5441747">1</span><span class="op" id="5441748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441751">return</span>&nbsp;<span class="ident" id="5441758"><a href="/regexp/syntax/compile.go.html#5441661">f</a></span><br>
<span class="lineno"></span><span class="op" id="5441760">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="5441763">func</span>&nbsp;<span class="op" id="5441768">(</span><span class="ident" id="5441769">c</span>&nbsp;<span class="op" id="5441771">*</span><span class="ident" id="5441772"><a href="/regexp/syntax/compile.go.html#5437859">compiler</a></span><span class="op" id="5441780">)</span>&nbsp;<span class="builtintype" id="5441782">rune</span><span class="op" id="5441786">(</span><span class="ident" id="5441787">r</span>&nbsp;<span class="op" id="5441789">[</span><span class="op" id="5441790">]</span><span class="builtintype" id="5441791">rune</span><span class="op" id="5441795">,</span>&nbsp;<span class="ident" id="5441797">flags</span>&nbsp;<span class="ident" id="5441803"><a href="/regexp/syntax/parse.go.html#5449552">Flags</a></span><span class="op" id="5441808">)</span>&nbsp;<span class="ident" id="5441810"><a href="/regexp/syntax/compile.go.html#5437742">frag</a></span>&nbsp;<span class="op" id="5441815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441818">f</span>&nbsp;<span class="op" id="5441820">:=</span>&nbsp;<span class="ident" id="5441823"><a href="/regexp/syntax/compile.go.html#5441769">c</a></span><span class="op" id="5441824">.</span><span class="ident" id="5441825">inst</span><span class="op" id="5441829">(</span><span class="ident" id="5441830"><a href="/regexp/syntax/prog.go.html#5497699">InstRune</a></span><span class="op" id="5441838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441841">i</span>&nbsp;<span class="op" id="5441843">:=</span>&nbsp;<span class="op" id="5441846">&amp;</span><span class="ident" id="5441847"><a href="/regexp/syntax/compile.go.html#5441769">c</a></span><span class="op" id="5441848">.</span><span class="ident" id="5441849">p</span><span class="op" id="5441850">.</span><span class="ident" id="5441851">Inst</span><span class="op" id="5441855">[</span><span class="ident" id="5441856"><a href="/regexp/syntax/compile.go.html#5441818">f</a></span><span class="op" id="5441857">.</span><span class="ident" id="5441858">i</span><span class="op" id="5441859">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441862"><a href="/regexp/syntax/compile.go.html#5441841">i</a></span><span class="op" id="5441863">.</span><span class="ident" id="5441864">Rune</span>&nbsp;<span class="op" id="5441869">=</span>&nbsp;<span class="ident" id="5441871"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5441874"><a href="/regexp/syntax/compile.go.html#5441797">flags</a></span>&nbsp;<span class="op" id="5441880">&amp;=</span>&nbsp;<span class="ident" id="5441883"><a href="/regexp/syntax/parse.go.html#5449575">FoldCase</a></span>&nbsp;<span class="comment" id="5441892">//&nbsp;only&nbsp;relevant&nbsp;flag&nbsp;is&nbsp;FoldCase</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5441927">if</span>&nbsp;<span class="builtinfunc" id="5441930">len</span><span class="op" id="5441933">(</span><span class="ident" id="5441934"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5441935">)</span>&nbsp;<span class="op" id="5441937">!=</span>&nbsp;<span class="num" id="5441940">1</span>&nbsp;<span class="op" id="5441942">||</span>&nbsp;<span class="ident" id="5441945"><a href="/regexp/syntax/compile.go.html#5436359">unicode</a></span><span class="op" id="5441952">.</span><span class="ident" id="5441953">SimpleFold</span><span class="op" id="5441963">(</span><span class="ident" id="5441964"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5441965">[</span><span class="num" id="5441966">0</span><span class="op" id="5441967">]</span><span class="op" id="5441968">)</span>&nbsp;<span class="op" id="5441970">==</span>&nbsp;<span class="ident" id="5441973"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5441974">[</span><span class="num" id="5441975">0</span><span class="op" id="5441976">]</span>&nbsp;<span class="op" id="5441978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5441982">//&nbsp;and&nbsp;sometimes&nbsp;not&nbsp;even&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442015"><a href="/regexp/syntax/compile.go.html#5441797">flags</a></span>&nbsp;<span class="op" id="5442021">&amp;^=</span>&nbsp;<span class="ident" id="5442025"><a href="/regexp/syntax/parse.go.html#5449575">FoldCase</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5442035">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442038"><a href="/regexp/syntax/compile.go.html#5441841">i</a></span><span class="op" id="5442039">.</span><span class="ident" id="5442040">Arg</span>&nbsp;<span class="op" id="5442044">=</span>&nbsp;<span class="builtintype" id="5442046">uint32</span><span class="op" id="5442052">(</span><span class="ident" id="5442053"><a href="/regexp/syntax/compile.go.html#5441797">flags</a></span><span class="op" id="5442058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442061"><a href="/regexp/syntax/compile.go.html#5441818">f</a></span><span class="op" id="5442062">.</span><span class="ident" id="5442063">out</span>&nbsp;<span class="op" id="5442067">=</span>&nbsp;<span class="ident" id="5442069"><a href="/regexp/syntax/compile.go.html#5437013">patchList</a></span><span class="op" id="5442078">(</span><span class="ident" id="5442079"><a href="/regexp/syntax/compile.go.html#5441818">f</a></span><span class="op" id="5442080">.</span><span class="ident" id="5442081">i</span>&nbsp;<span class="op" id="5442083">&lt;&lt;</span>&nbsp;<span class="num" id="5442086">1</span><span class="op" id="5442087">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5442091">//&nbsp;Special&nbsp;cases&nbsp;for&nbsp;exec&nbsp;machine.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5442127">switch</span>&nbsp;<span class="op" id="5442134">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5442137">case</span>&nbsp;<span class="ident" id="5442142"><a href="/regexp/syntax/compile.go.html#5441797">flags</a></span><span class="op" id="5442147">&amp;</span><span class="ident" id="5442148"><a href="/regexp/syntax/parse.go.html#5449575">FoldCase</a></span>&nbsp;<span class="op" id="5442157">==</span>&nbsp;<span class="num" id="5442160">0</span>&nbsp;<span class="op" id="5442162">&amp;&amp;</span>&nbsp;<span class="op" id="5442165">(</span><span class="builtinfunc" id="5442166">len</span><span class="op" id="5442169">(</span><span class="ident" id="5442170"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442171">)</span>&nbsp;<span class="op" id="5442173">==</span>&nbsp;<span class="num" id="5442176">1</span>&nbsp;<span class="op" id="5442178">||</span>&nbsp;<span class="builtinfunc" id="5442181">len</span><span class="op" id="5442184">(</span><span class="ident" id="5442185"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442186">)</span>&nbsp;<span class="op" id="5442188">==</span>&nbsp;<span class="num" id="5442191">2</span>&nbsp;<span class="op" id="5442193">&amp;&amp;</span>&nbsp;<span class="ident" id="5442196"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442197">[</span><span class="num" id="5442198">0</span><span class="op" id="5442199">]</span>&nbsp;<span class="op" id="5442201">==</span>&nbsp;<span class="ident" id="5442204"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442205">[</span><span class="num" id="5442206">1</span><span class="op" id="5442207">]</span><span class="op" id="5442208">)</span><span class="op" id="5442209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442213"><a href="/regexp/syntax/compile.go.html#5441841">i</a></span><span class="op" id="5442214">.</span><span class="ident" id="5442215">Op</span>&nbsp;<span class="op" id="5442218">=</span>&nbsp;<span class="ident" id="5442220"><a href="/regexp/syntax/prog.go.html#5497709">InstRune1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5442231">case</span>&nbsp;<span class="builtinfunc" id="5442236">len</span><span class="op" id="5442239">(</span><span class="ident" id="5442240"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442241">)</span>&nbsp;<span class="op" id="5442243">==</span>&nbsp;<span class="num" id="5442246">2</span>&nbsp;<span class="op" id="5442248">&amp;&amp;</span>&nbsp;<span class="ident" id="5442251"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442252">[</span><span class="num" id="5442253">0</span><span class="op" id="5442254">]</span>&nbsp;<span class="op" id="5442256">==</span>&nbsp;<span class="num" id="5442259">0</span>&nbsp;<span class="op" id="5442261">&amp;&amp;</span>&nbsp;<span class="ident" id="5442264"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442265">[</span><span class="num" id="5442266">1</span><span class="op" id="5442267">]</span>&nbsp;<span class="op" id="5442269">==</span>&nbsp;<span class="ident" id="5442272"><a href="/regexp/syntax/compile.go.html#5436359">unicode</a></span><span class="op" id="5442279">.</span><span class="ident" id="5442280">MaxRune</span><span class="op" id="5442287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442291"><a href="/regexp/syntax/compile.go.html#5441841">i</a></span><span class="op" id="5442292">.</span><span class="ident" id="5442293">Op</span>&nbsp;<span class="op" id="5442296">=</span>&nbsp;<span class="ident" id="5442298"><a href="/regexp/syntax/prog.go.html#5497720">InstRuneAny</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5442311">case</span>&nbsp;<span class="builtinfunc" id="5442316">len</span><span class="op" id="5442319">(</span><span class="ident" id="5442320"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442321">)</span>&nbsp;<span class="op" id="5442323">==</span>&nbsp;<span class="num" id="5442326">4</span>&nbsp;<span class="op" id="5442328">&amp;&amp;</span>&nbsp;<span class="ident" id="5442331"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442332">[</span><span class="num" id="5442333">0</span><span class="op" id="5442334">]</span>&nbsp;<span class="op" id="5442336">==</span>&nbsp;<span class="num" id="5442339">0</span>&nbsp;<span class="op" id="5442341">&amp;&amp;</span>&nbsp;<span class="ident" id="5442344"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442345">[</span><span class="num" id="5442346">1</span><span class="op" id="5442347">]</span>&nbsp;<span class="op" id="5442349">==</span>&nbsp;<span class="string" id="5442352">&#39;\n&#39;</span><span class="op" id="5442356">-</span><span class="num" id="5442357">1</span>&nbsp;<span class="op" id="5442359">&amp;&amp;</span>&nbsp;<span class="ident" id="5442362"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442363">[</span><span class="num" id="5442364">2</span><span class="op" id="5442365">]</span>&nbsp;<span class="op" id="5442367">==</span>&nbsp;<span class="string" id="5442370">&#39;\n&#39;</span><span class="op" id="5442374">+</span><span class="num" id="5442375">1</span>&nbsp;<span class="op" id="5442377">&amp;&amp;</span>&nbsp;<span class="ident" id="5442380"><a href="/regexp/syntax/compile.go.html#5441787">r</a></span><span class="op" id="5442381">[</span><span class="num" id="5442382">3</span><span class="op" id="5442383">]</span>&nbsp;<span class="op" id="5442385">==</span>&nbsp;<span class="ident" id="5442388"><a href="/regexp/syntax/compile.go.html#5436359">unicode</a></span><span class="op" id="5442395">.</span><span class="ident" id="5442396">MaxRune</span><span class="op" id="5442403">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5442407"><a href="/regexp/syntax/compile.go.html#5441841">i</a></span><span class="op" id="5442408">.</span><span class="ident" id="5442409">Op</span>&nbsp;<span class="op" id="5442412">=</span>&nbsp;<span class="ident" id="5442414"><a href="/regexp/syntax/prog.go.html#5497733">InstRuneAnyNotNL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5442432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5442436">return</span>&nbsp;<span class="ident" id="5442443"><a href="/regexp/syntax/compile.go.html#5441818">f</a></span><br>
<span class="lineno"></span><span class="op" id="5442445">}</span>
</div>
</body>
</html>
