<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7518008">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7518063">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7518117">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7518168">package</span>&nbsp;<span class="ident" id="7518176">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7518185">func</span>&nbsp;<span class="op" id="7518190">(</span><span class="ident" id="7518191">r</span>&nbsp;<span class="op" id="7518193">*</span><span class="ident" id="7518194">Replacer</span><span class="op" id="7518202">)</span>&nbsp;<span class="ident" id="7518204">Replacer</span><span class="op" id="7518212">(</span><span class="op" id="7518213">)</span>&nbsp;<span class="keyword" id="7518215">interface</span><span class="op" id="7518224">{</span><span class="op" id="7518225">}</span>&nbsp;<span class="op" id="7518227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518230">return</span>&nbsp;<span class="ident" id="7518237">r</span><span class="op" id="7518238">.</span><span class="ident" id="7518239">r</span><br>
<span class="lineno"></span><span class="op" id="7518241">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="7518244">func</span>&nbsp;<span class="op" id="7518249">(</span><span class="ident" id="7518250">r</span>&nbsp;<span class="op" id="7518252">*</span><span class="ident" id="7518253">Replacer</span><span class="op" id="7518261">)</span>&nbsp;<span class="ident" id="7518263">PrintTrie</span><span class="op" id="7518272">(</span><span class="op" id="7518273">)</span>&nbsp;<span class="builtintype" id="7518275">string</span>&nbsp;<span class="op" id="7518282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518285">gen</span>&nbsp;<span class="op" id="7518289">:=</span>&nbsp;<span class="ident" id="7518292">r</span><span class="op" id="7518293">.</span><span class="ident" id="7518294">r</span><span class="op" id="7518295">.</span><span class="op" id="7518296">(</span><span class="op" id="7518297">*</span><span class="ident" id="7518298">genericReplacer</span><span class="op" id="7518313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518316">return</span>&nbsp;<span class="ident" id="7518323">gen</span><span class="op" id="7518326">.</span><span class="ident" id="7518327">printNode</span><span class="op" id="7518336">(</span><span class="op" id="7518337">&amp;</span><span class="ident" id="7518338">gen</span><span class="op" id="7518341">.</span><span class="ident" id="7518342">root</span><span class="op" id="7518346">,</span>&nbsp;<span class="num" id="7518348">0</span><span class="op" id="7518349">)</span><br>
<span class="lineno"></span><span class="op" id="7518351">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7518354">func</span>&nbsp;<span class="op" id="7518359">(</span><span class="ident" id="7518360">r</span>&nbsp;<span class="op" id="7518362">*</span><span class="ident" id="7518363">genericReplacer</span><span class="op" id="7518378">)</span>&nbsp;<span class="ident" id="7518380">printNode</span><span class="op" id="7518389">(</span><span class="ident" id="7518390">t</span>&nbsp;<span class="op" id="7518392">*</span><span class="ident" id="7518393">trieNode</span><span class="op" id="7518401">,</span>&nbsp;<span class="ident" id="7518403">depth</span>&nbsp;<span class="builtintype" id="7518409">int</span><span class="op" id="7518412">)</span>&nbsp;<span class="op" id="7518414">(</span><span class="ident" id="7518415">s</span>&nbsp;<span class="builtintype" id="7518417">string</span><span class="op" id="7518423">)</span>&nbsp;<span class="op" id="7518425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518428">if</span>&nbsp;<span class="ident" id="7518431">t</span><span class="op" id="7518432">.</span><span class="ident" id="7518433">priority</span>&nbsp;<span class="op" id="7518442">&gt;</span>&nbsp;<span class="num" id="7518444">0</span>&nbsp;<span class="op" id="7518446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518450">s</span>&nbsp;<span class="op" id="7518452">+=</span>&nbsp;<span class="string" id="7518455">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518460">}</span>&nbsp;<span class="keyword" id="7518462">else</span>&nbsp;<span class="op" id="7518467">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518471">s</span>&nbsp;<span class="op" id="7518473">+=</span>&nbsp;<span class="string" id="7518476">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518484">s</span>&nbsp;<span class="op" id="7518486">+=</span>&nbsp;<span class="string" id="7518489">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518496">if</span>&nbsp;<span class="ident" id="7518499">t</span><span class="op" id="7518500">.</span><span class="ident" id="7518501">prefix</span>&nbsp;<span class="op" id="7518508">!=</span>&nbsp;<span class="string" id="7518511">&#34;&#34;</span>&nbsp;<span class="op" id="7518514">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518518">s</span>&nbsp;<span class="op" id="7518520">+=</span>&nbsp;<span class="ident" id="7518523">Repeat</span><span class="op" id="7518529">(</span><span class="string" id="7518530">&#34;.&#34;</span><span class="op" id="7518533">,</span>&nbsp;<span class="ident" id="7518535">depth</span><span class="op" id="7518540">)</span>&nbsp;<span class="op" id="7518542">+</span>&nbsp;<span class="ident" id="7518544">t</span><span class="op" id="7518545">.</span><span class="ident" id="7518546">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518555">s</span>&nbsp;<span class="op" id="7518557">+=</span>&nbsp;<span class="ident" id="7518560">r</span><span class="op" id="7518561">.</span><span class="ident" id="7518562">printNode</span><span class="op" id="7518571">(</span><span class="ident" id="7518572">t</span><span class="op" id="7518573">.</span><span class="ident" id="7518574">next</span><span class="op" id="7518578">,</span>&nbsp;<span class="ident" id="7518580">depth</span><span class="op" id="7518585">+</span><span class="builtinfunc" id="7518586">len</span><span class="op" id="7518589">(</span><span class="ident" id="7518590">t</span><span class="op" id="7518591">.</span><span class="ident" id="7518592">prefix</span><span class="op" id="7518598">)</span><span class="op" id="7518599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518602">}</span>&nbsp;<span class="keyword" id="7518604">else</span>&nbsp;<span class="keyword" id="7518609">if</span>&nbsp;<span class="ident" id="7518612">t</span><span class="op" id="7518613">.</span><span class="ident" id="7518614">table</span>&nbsp;<span class="op" id="7518620">!=</span>&nbsp;<span class="ident" id="7518623">nil</span>&nbsp;<span class="op" id="7518627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518631">for</span>&nbsp;<span class="ident" id="7518635">b</span><span class="op" id="7518636">,</span>&nbsp;<span class="ident" id="7518638">m</span>&nbsp;<span class="op" id="7518640">:=</span>&nbsp;<span class="keyword" id="7518643">range</span>&nbsp;<span class="ident" id="7518649">r</span><span class="op" id="7518650">.</span><span class="ident" id="7518651">mapping</span>&nbsp;<span class="op" id="7518659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518664">if</span>&nbsp;<span class="builtintype" id="7518667">int</span><span class="op" id="7518670">(</span><span class="ident" id="7518671">m</span><span class="op" id="7518672">)</span>&nbsp;<span class="op" id="7518674">!=</span>&nbsp;<span class="ident" id="7518677">r</span><span class="op" id="7518678">.</span><span class="ident" id="7518679">tableSize</span>&nbsp;<span class="op" id="7518689">&amp;&amp;</span>&nbsp;<span class="ident" id="7518692">t</span><span class="op" id="7518693">.</span><span class="ident" id="7518694">table</span><span class="op" id="7518699">[</span><span class="ident" id="7518700">m</span><span class="op" id="7518701">]</span>&nbsp;<span class="op" id="7518703">!=</span>&nbsp;<span class="ident" id="7518706">nil</span>&nbsp;<span class="op" id="7518710">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518716">s</span>&nbsp;<span class="op" id="7518718">+=</span>&nbsp;<span class="ident" id="7518721">Repeat</span><span class="op" id="7518727">(</span><span class="string" id="7518728">&#34;.&#34;</span><span class="op" id="7518731">,</span>&nbsp;<span class="ident" id="7518733">depth</span><span class="op" id="7518738">)</span>&nbsp;<span class="op" id="7518740">+</span>&nbsp;<span class="builtintype" id="7518742">string</span><span class="op" id="7518748">(</span><span class="op" id="7518749">[</span><span class="op" id="7518750">]</span><span class="builtintype" id="7518751">byte</span><span class="op" id="7518755">{</span><span class="builtintype" id="7518756">byte</span><span class="op" id="7518760">(</span><span class="ident" id="7518761">b</span><span class="op" id="7518762">)</span><span class="op" id="7518763">}</span><span class="op" id="7518764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518770">s</span>&nbsp;<span class="op" id="7518772">+=</span>&nbsp;<span class="ident" id="7518775">r</span><span class="op" id="7518776">.</span><span class="ident" id="7518777">printNode</span><span class="op" id="7518786">(</span><span class="ident" id="7518787">t</span><span class="op" id="7518788">.</span><span class="ident" id="7518789">table</span><span class="op" id="7518794">[</span><span class="ident" id="7518795">m</span><span class="op" id="7518796">]</span><span class="op" id="7518797">,</span>&nbsp;<span class="ident" id="7518799">depth</span><span class="op" id="7518804">+</span><span class="num" id="7518805">1</span><span class="op" id="7518806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7518818">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518821">return</span><br>
<span class="lineno"></span><span class="op" id="7518828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7518831">func</span>&nbsp;<span class="ident" id="7518836">StringFind</span><span class="op" id="7518846">(</span><span class="ident" id="7518847">pattern</span><span class="op" id="7518854">,</span>&nbsp;<span class="ident" id="7518856">text</span>&nbsp;<span class="builtintype" id="7518861">string</span><span class="op" id="7518867">)</span>&nbsp;<span class="builtintype" id="7518869">int</span>&nbsp;<span class="op" id="7518873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7518876">return</span>&nbsp;<span class="ident" id="7518883">makeStringFinder</span><span class="op" id="7518899">(</span><span class="ident" id="7518900">pattern</span><span class="op" id="7518907">)</span><span class="op" id="7518908">.</span><span class="ident" id="7518909">next</span><span class="op" id="7518913">(</span><span class="ident" id="7518914">text</span><span class="op" id="7518918">)</span><br>
<span class="lineno">40</span><span class="op" id="7518920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7518923">func</span>&nbsp;<span class="ident" id="7518928">DumpTables</span><span class="op" id="7518938">(</span><span class="ident" id="7518939">pattern</span>&nbsp;<span class="builtintype" id="7518947">string</span><span class="op" id="7518953">)</span>&nbsp;<span class="op" id="7518955">(</span><span class="op" id="7518956">[</span><span class="op" id="7518957">]</span><span class="builtintype" id="7518958">int</span><span class="op" id="7518961">,</span>&nbsp;<span class="op" id="7518963">[</span><span class="op" id="7518964">]</span><span class="builtintype" id="7518965">int</span><span class="op" id="7518968">)</span>&nbsp;<span class="op" id="7518970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7518973">finder</span>&nbsp;<span class="op" id="7518980">:=</span>&nbsp;<span class="ident" id="7518983">makeStringFinder</span><span class="op" id="7518999">(</span><span class="ident" id="7519000">pattern</span><span class="op" id="7519007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7519010">return</span>&nbsp;<span class="ident" id="7519017">finder</span><span class="op" id="7519023">.</span><span class="ident" id="7519024">badCharSkip</span><span class="op" id="7519035">[</span><span class="op" id="7519036">:</span><span class="op" id="7519037">]</span><span class="op" id="7519038">,</span>&nbsp;<span class="ident" id="7519040">finder</span><span class="op" id="7519046">.</span><span class="ident" id="7519047">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="7519062">}</span>
</div>
</body>
</html>
