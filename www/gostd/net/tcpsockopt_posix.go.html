<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3408978">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3409034">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3409088">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3409139">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3409212">package</span>&nbsp;<span class="ident" id="3409220">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3409225">import</span>&nbsp;<span class="op" id="3409232">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3409235">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3409241">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3409251">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3409254">func</span>&nbsp;<span class="ident" id="3409259">setNoDelay</span><span class="op" id="3409269">(</span><span class="ident" id="3409270">fd</span>&nbsp;<span class="op" id="3409273">*</span><span class="ident" id="3409274">netFD</span><span class="op" id="3409279">,</span>&nbsp;<span class="ident" id="3409281">noDelay</span>&nbsp;<span class="builtintype" id="3409289">bool</span><span class="op" id="3409293">)</span>&nbsp;<span class="builtintype" id="3409295">error</span>&nbsp;<span class="op" id="3409301">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3409304">if</span>&nbsp;<span class="ident" id="3409307">err</span>&nbsp;<span class="op" id="3409311">:=</span>&nbsp;<span class="ident" id="3409314">fd</span><span class="op" id="3409316">.</span><span class="ident" id="3409317">incref</span><span class="op" id="3409323">(</span><span class="op" id="3409324">)</span><span class="op" id="3409325">;</span>&nbsp;<span class="ident" id="3409327">err</span>&nbsp;<span class="op" id="3409331">!=</span>&nbsp;<span class="ident" id="3409334">nil</span>&nbsp;<span class="op" id="3409338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3409342">return</span>&nbsp;<span class="ident" id="3409349">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3409354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3409357">defer</span>&nbsp;<span class="ident" id="3409363">fd</span><span class="op" id="3409365">.</span><span class="ident" id="3409366">decref</span><span class="op" id="3409372">(</span><span class="op" id="3409373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3409376">return</span>&nbsp;<span class="ident" id="3409383">os</span><span class="op" id="3409385">.</span><span class="ident" id="3409386">NewSyscallError</span><span class="op" id="3409401">(</span><span class="string" id="3409402">&#34;setsockopt&#34;</span><span class="op" id="3409414">,</span>&nbsp;<span class="ident" id="3409416">syscall</span><span class="op" id="3409423">.</span><span class="ident" id="3409424">SetsockoptInt</span><span class="op" id="3409437">(</span><span class="ident" id="3409438">fd</span><span class="op" id="3409440">.</span><span class="ident" id="3409441">sysfd</span><span class="op" id="3409446">,</span>&nbsp;<span class="ident" id="3409448">syscall</span><span class="op" id="3409455">.</span><span class="ident" id="3409456">IPPROTO_TCP</span><span class="op" id="3409467">,</span>&nbsp;<span class="ident" id="3409469">syscall</span><span class="op" id="3409476">.</span><span class="ident" id="3409477">TCP_NODELAY</span><span class="op" id="3409488">,</span>&nbsp;<span class="ident" id="3409490">boolint</span><span class="op" id="3409497">(</span><span class="ident" id="3409498">noDelay</span><span class="op" id="3409505">)</span><span class="op" id="3409506">)</span><span class="op" id="3409507">)</span><br>
<span class="lineno">20</span><span class="op" id="3409509">}</span>
</div>
</body>
</html>
