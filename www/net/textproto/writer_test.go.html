<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7671449">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7671505">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7671559">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7671610">package</span>&nbsp;<span class="ident" id="7671618">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671629">import</span>&nbsp;<span class="op" id="7671636">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671639">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671648">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7671657">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7671667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671670">func</span>&nbsp;<span class="ident" id="7671675">TestPrintfLine</span><span class="op" id="7671689">(</span><span class="ident" id="7671690">t</span>&nbsp;<span class="op" id="7671692">*</span><span class="ident" id="7671693"><a href="/net/textproto/writer_test.go.html#7671657">testing</a></span><span class="op" id="7671700">.</span><span class="ident" id="7671701">T</span><span class="op" id="7671702">)</span>&nbsp;<span class="op" id="7671704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671707">var</span>&nbsp;<span class="ident" id="7671711">buf</span>&nbsp;<span class="ident" id="7671715"><a href="/net/textproto/writer_test.go.html#7671648">bytes</a></span><span class="op" id="7671720">.</span><span class="ident" id="7671721">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671729">w</span>&nbsp;<span class="op" id="7671731">:=</span>&nbsp;<span class="ident" id="7671734"><a href="/net/textproto/writer.go.html#3650479">NewWriter</a></span><span class="op" id="7671743">(</span><span class="ident" id="7671744"><a href="/net/textproto/writer_test.go.html#7671639">bufio</a></span><span class="op" id="7671749">.</span><span class="ident" id="7671750">NewWriter</span><span class="op" id="7671759">(</span><span class="op" id="7671760">&amp;</span><span class="ident" id="7671761"><a href="/net/textproto/writer_test.go.html#7671711">buf</a></span><span class="op" id="7671764">)</span><span class="op" id="7671765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671768">err</span>&nbsp;<span class="op" id="7671772">:=</span>&nbsp;<span class="ident" id="7671775"><a href="/net/textproto/writer_test.go.html#7671729">w</a></span><span class="op" id="7671776">.</span><span class="ident" id="7671777">PrintfLine</span><span class="op" id="7671787">(</span><span class="string" id="7671788">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7671796">,</span>&nbsp;<span class="num" id="7671798">123</span><span class="op" id="7671801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671804">if</span>&nbsp;<span class="ident" id="7671807">s</span>&nbsp;<span class="op" id="7671809">:=</span>&nbsp;<span class="ident" id="7671812"><a href="/net/textproto/writer_test.go.html#7671711">buf</a></span><span class="op" id="7671815">.</span><span class="ident" id="7671816">String</span><span class="op" id="7671822">(</span><span class="op" id="7671823">)</span><span class="op" id="7671824">;</span>&nbsp;<span class="ident" id="7671826"><a href="/net/textproto/writer_test.go.html#7671807">s</a></span>&nbsp;<span class="op" id="7671828">!=</span>&nbsp;<span class="string" id="7671831">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7671845">||</span>&nbsp;<span class="ident" id="7671848"><a href="/net/textproto/writer_test.go.html#7671768">err</a></span>&nbsp;<span class="op" id="7671852">!=</span>&nbsp;<span class="ident" id="7671855">nil</span>&nbsp;<span class="op" id="7671859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671863"><a href="/net/textproto/writer_test.go.html#7671690">t</a></span><span class="op" id="7671864">.</span><span class="ident" id="7671865">Fatalf</span><span class="op" id="7671871">(</span><span class="string" id="7671872">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7671886">,</span>&nbsp;<span class="ident" id="7671888"><a href="/net/textproto/writer_test.go.html#7671807">s</a></span><span class="op" id="7671889">,</span>&nbsp;<span class="ident" id="7671891"><a href="/net/textproto/writer_test.go.html#7671768">err</a></span><span class="op" id="7671894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671897">}</span><br>
<span class="lineno">20</span><span class="op" id="7671899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671902">func</span>&nbsp;<span class="ident" id="7671907">TestDotWriter</span><span class="op" id="7671920">(</span><span class="ident" id="7671921">t</span>&nbsp;<span class="op" id="7671923">*</span><span class="ident" id="7671924"><a href="/net/textproto/writer_test.go.html#7671657">testing</a></span><span class="op" id="7671931">.</span><span class="ident" id="7671932">T</span><span class="op" id="7671933">)</span>&nbsp;<span class="op" id="7671935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671938">var</span>&nbsp;<span class="ident" id="7671942">buf</span>&nbsp;<span class="ident" id="7671946"><a href="/net/textproto/writer_test.go.html#7671648">bytes</a></span><span class="op" id="7671951">.</span><span class="ident" id="7671952">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671960">w</span>&nbsp;<span class="op" id="7671962">:=</span>&nbsp;<span class="ident" id="7671965"><a href="/net/textproto/writer.go.html#3650479">NewWriter</a></span><span class="op" id="7671974">(</span><span class="ident" id="7671975"><a href="/net/textproto/writer_test.go.html#7671639">bufio</a></span><span class="op" id="7671980">.</span><span class="ident" id="7671981">NewWriter</span><span class="op" id="7671990">(</span><span class="op" id="7671991">&amp;</span><span class="ident" id="7671992"><a href="/net/textproto/writer_test.go.html#7671942">buf</a></span><span class="op" id="7671995">)</span><span class="op" id="7671996">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671999">d</span>&nbsp;<span class="op" id="7672001">:=</span>&nbsp;<span class="ident" id="7672004"><a href="/net/textproto/writer_test.go.html#7671960">w</a></span><span class="op" id="7672005">.</span><span class="ident" id="7672006">DotWriter</span><span class="op" id="7672015">(</span><span class="op" id="7672016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672019">n</span><span class="op" id="7672020">,</span>&nbsp;<span class="ident" id="7672022">err</span>&nbsp;<span class="op" id="7672026">:=</span>&nbsp;<span class="ident" id="7672029"><a href="/net/textproto/writer_test.go.html#7671999">d</a></span><span class="op" id="7672030">.</span><span class="ident" id="7672031">Write</span><span class="op" id="7672036">(</span><span class="op" id="7672037">[</span><span class="op" id="7672038">]</span><span class="builtintype" id="7672039">byte</span><span class="op" id="7672043">(</span><span class="string" id="7672044">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7672071">)</span><span class="op" id="7672072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672075">if</span>&nbsp;<span class="ident" id="7672078"><a href="/net/textproto/writer_test.go.html#7672019">n</a></span>&nbsp;<span class="op" id="7672080">!=</span>&nbsp;<span class="num" id="7672083">21</span>&nbsp;<span class="op" id="7672086">||</span>&nbsp;<span class="ident" id="7672089"><a href="/net/textproto/writer_test.go.html#7672022">err</a></span>&nbsp;<span class="op" id="7672093">!=</span>&nbsp;<span class="ident" id="7672096">nil</span>&nbsp;<span class="op" id="7672100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672104"><a href="/net/textproto/writer_test.go.html#7671921">t</a></span><span class="op" id="7672105">.</span><span class="ident" id="7672106">Fatalf</span><span class="op" id="7672112">(</span><span class="string" id="7672113">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7672128">,</span>&nbsp;<span class="ident" id="7672130"><a href="/net/textproto/writer_test.go.html#7672019">n</a></span><span class="op" id="7672131">,</span>&nbsp;<span class="ident" id="7672133"><a href="/net/textproto/writer_test.go.html#7672022">err</a></span><span class="op" id="7672136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672139">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672142"><a href="/net/textproto/writer_test.go.html#7671999">d</a></span><span class="op" id="7672143">.</span><span class="ident" id="7672144">Close</span><span class="op" id="7672149">(</span><span class="op" id="7672150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672153">want</span>&nbsp;<span class="op" id="7672158">:=</span>&nbsp;<span class="string" id="7672161">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672211">if</span>&nbsp;<span class="ident" id="7672214">s</span>&nbsp;<span class="op" id="7672216">:=</span>&nbsp;<span class="ident" id="7672219"><a href="/net/textproto/writer_test.go.html#7671942">buf</a></span><span class="op" id="7672222">.</span><span class="ident" id="7672223">String</span><span class="op" id="7672229">(</span><span class="op" id="7672230">)</span><span class="op" id="7672231">;</span>&nbsp;<span class="ident" id="7672233"><a href="/net/textproto/writer_test.go.html#7672214">s</a></span>&nbsp;<span class="op" id="7672235">!=</span>&nbsp;<span class="ident" id="7672238"><a href="/net/textproto/writer_test.go.html#7672153">want</a></span>&nbsp;<span class="op" id="7672243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672247"><a href="/net/textproto/writer_test.go.html#7671921">t</a></span><span class="op" id="7672248">.</span><span class="ident" id="7672249">Fatalf</span><span class="op" id="7672255">(</span><span class="string" id="7672256">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7672266">,</span>&nbsp;<span class="ident" id="7672268"><a href="/net/textproto/writer_test.go.html#7672214">s</a></span><span class="op" id="7672269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672272">}</span><br>
<span class="lineno">35</span><span class="op" id="7672274">}</span>
</div>
</body>
</html>
