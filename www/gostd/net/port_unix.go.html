<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3711281">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3711336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3711390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3711441">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711506">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3711555">package</span>&nbsp;<span class="ident" id="3711563">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="3711568">import</span>&nbsp;<span class="string" id="3711575">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711583">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="3711653">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="3711726">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="3711753">var</span>&nbsp;<span class="ident" id="3711757">services</span>&nbsp;<span class="op" id="3711766">=</span>&nbsp;<span class="keyword" id="3711768">map</span><span class="op" id="3711771">[</span><span class="builtintype" id="3711772">string</span><span class="op" id="3711778">]</span><span class="keyword" id="3711779">map</span><span class="op" id="3711782">[</span><span class="builtintype" id="3711783">string</span><span class="op" id="3711789">]</span><span class="builtintype" id="3711790">int</span><span class="op" id="3711793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3711796">&#34;tcp&#34;</span><span class="op" id="3711801">:</span>&nbsp;<span class="op" id="3711803">{</span><span class="string" id="3711804">&#34;http&#34;</span><span class="op" id="3711810">:</span>&nbsp;<span class="num" id="3711812">80</span><span class="op" id="3711814">}</span><span class="op" id="3711815">,</span><br>
<span class="lineno"></span><span class="op" id="3711817">}</span><br>
<span class="lineno"></span><span class="keyword" id="3711819">var</span>&nbsp;<span class="ident" id="3711823">servicesError</span>&nbsp;<span class="builtintype" id="3711837">error</span><br>
<span class="lineno">20</span><span class="keyword" id="3711843">var</span>&nbsp;<span class="ident" id="3711847">onceReadServices</span>&nbsp;<span class="ident" id="3711864">sync</span><span class="op" id="3711868">.</span><span class="ident" id="3711869">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3711875">func</span>&nbsp;<span class="ident" id="3711880">readServices</span><span class="op" id="3711892">(</span><span class="op" id="3711893">)</span>&nbsp;<span class="op" id="3711895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711898">var</span>&nbsp;<span class="ident" id="3711902">file</span>&nbsp;<span class="op" id="3711907">*</span><span class="ident" id="3711908">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711914">if</span>&nbsp;<span class="ident" id="3711917">file</span><span class="op" id="3711921">,</span>&nbsp;<span class="ident" id="3711923">servicesError</span>&nbsp;<span class="op" id="3711937">=</span>&nbsp;<span class="ident" id="3711939">open</span><span class="op" id="3711943">(</span><span class="string" id="3711944">&#34;/etc/services&#34;</span><span class="op" id="3711959">)</span><span class="op" id="3711960">;</span>&nbsp;<span class="ident" id="3711962">servicesError</span>&nbsp;<span class="op" id="3711976">!=</span>&nbsp;<span class="ident" id="3711979">nil</span>&nbsp;<span class="op" id="3711983">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711987">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711998">for</span>&nbsp;<span class="ident" id="3712002">line</span><span class="op" id="3712006">,</span>&nbsp;<span class="ident" id="3712008">ok</span>&nbsp;<span class="op" id="3712011">:=</span>&nbsp;<span class="ident" id="3712014">file</span><span class="op" id="3712018">.</span><span class="ident" id="3712019">readLine</span><span class="op" id="3712027">(</span><span class="op" id="3712028">)</span><span class="op" id="3712029">;</span>&nbsp;<span class="ident" id="3712031">ok</span><span class="op" id="3712033">;</span>&nbsp;<span class="ident" id="3712035">line</span><span class="op" id="3712039">,</span>&nbsp;<span class="ident" id="3712041">ok</span>&nbsp;<span class="op" id="3712044">=</span>&nbsp;<span class="ident" id="3712046">file</span><span class="op" id="3712050">.</span><span class="ident" id="3712051">readLine</span><span class="op" id="3712059">(</span><span class="op" id="3712060">)</span>&nbsp;<span class="op" id="3712062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3712066">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712120">if</span>&nbsp;<span class="ident" id="3712123">i</span>&nbsp;<span class="op" id="3712125">:=</span>&nbsp;<span class="ident" id="3712128">byteIndex</span><span class="op" id="3712137">(</span><span class="ident" id="3712138">line</span><span class="op" id="3712142">,</span>&nbsp;<span class="string" id="3712144">&#39;#&#39;</span><span class="op" id="3712147">)</span><span class="op" id="3712148">;</span>&nbsp;<span class="ident" id="3712150">i</span>&nbsp;<span class="op" id="3712152">&gt;=</span>&nbsp;<span class="num" id="3712155">0</span>&nbsp;<span class="op" id="3712157">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712162">line</span>&nbsp;<span class="op" id="3712167">=</span>&nbsp;<span class="ident" id="3712169">line</span><span class="op" id="3712173">[</span><span class="num" id="3712174">0</span><span class="op" id="3712175">:</span><span class="ident" id="3712176">i</span><span class="op" id="3712177">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712185">f</span>&nbsp;<span class="op" id="3712187">:=</span>&nbsp;<span class="ident" id="3712190">getFields</span><span class="op" id="3712199">(</span><span class="ident" id="3712200">line</span><span class="op" id="3712204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712208">if</span>&nbsp;<span class="builtinfunc" id="3712211">len</span><span class="op" id="3712214">(</span><span class="ident" id="3712215">f</span><span class="op" id="3712216">)</span>&nbsp;<span class="op" id="3712218">&lt;</span>&nbsp;<span class="num" id="3712220">2</span>&nbsp;<span class="op" id="3712222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712227">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712242">portnet</span>&nbsp;<span class="op" id="3712250">:=</span>&nbsp;<span class="ident" id="3712253">f</span><span class="op" id="3712254">[</span><span class="num" id="3712255">1</span><span class="op" id="3712256">]</span>&nbsp;<span class="comment" id="3712258">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712272">port</span><span class="op" id="3712276">,</span>&nbsp;<span class="ident" id="3712278">j</span><span class="op" id="3712279">,</span>&nbsp;<span class="ident" id="3712281">ok</span>&nbsp;<span class="op" id="3712284">:=</span>&nbsp;<span class="ident" id="3712287">dtoi</span><span class="op" id="3712291">(</span><span class="ident" id="3712292">portnet</span><span class="op" id="3712299">,</span>&nbsp;<span class="num" id="3712301">0</span><span class="op" id="3712302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712306">if</span>&nbsp;<span class="op" id="3712309">!</span><span class="ident" id="3712310">ok</span>&nbsp;<span class="op" id="3712313">||</span>&nbsp;<span class="ident" id="3712316">port</span>&nbsp;<span class="op" id="3712321">&lt;=</span>&nbsp;<span class="num" id="3712324">0</span>&nbsp;<span class="op" id="3712326">||</span>&nbsp;<span class="ident" id="3712329">j</span>&nbsp;<span class="op" id="3712331">&gt;=</span>&nbsp;<span class="builtinfunc" id="3712334">len</span><span class="op" id="3712337">(</span><span class="ident" id="3712338">portnet</span><span class="op" id="3712345">)</span>&nbsp;<span class="op" id="3712347">||</span>&nbsp;<span class="ident" id="3712350">portnet</span><span class="op" id="3712357">[</span><span class="ident" id="3712358">j</span><span class="op" id="3712359">]</span>&nbsp;<span class="op" id="3712361">!=</span>&nbsp;<span class="string" id="3712364">&#39;/&#39;</span>&nbsp;<span class="op" id="3712368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712373">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712388">netw</span>&nbsp;<span class="op" id="3712393">:=</span>&nbsp;<span class="ident" id="3712396">portnet</span><span class="op" id="3712403">[</span><span class="ident" id="3712404">j</span><span class="op" id="3712405">+</span><span class="num" id="3712406">1</span><span class="op" id="3712407">:</span><span class="op" id="3712408">]</span>&nbsp;<span class="comment" id="3712410">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712421">m</span><span class="op" id="3712422">,</span>&nbsp;<span class="ident" id="3712424">ok1</span>&nbsp;<span class="op" id="3712428">:=</span>&nbsp;<span class="ident" id="3712431">services</span><span class="op" id="3712439">[</span><span class="ident" id="3712440">netw</span><span class="op" id="3712444">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712448">if</span>&nbsp;<span class="op" id="3712451">!</span><span class="ident" id="3712452">ok1</span>&nbsp;<span class="op" id="3712456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712461">m</span>&nbsp;<span class="op" id="3712463">=</span>&nbsp;<span class="builtinfunc" id="3712465">make</span><span class="op" id="3712469">(</span><span class="keyword" id="3712470">map</span><span class="op" id="3712473">[</span><span class="builtintype" id="3712474">string</span><span class="op" id="3712480">]</span><span class="builtintype" id="3712481">int</span><span class="op" id="3712484">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712489">services</span><span class="op" id="3712497">[</span><span class="ident" id="3712498">netw</span><span class="op" id="3712502">]</span>&nbsp;<span class="op" id="3712504">=</span>&nbsp;<span class="ident" id="3712506">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712514">for</span>&nbsp;<span class="ident" id="3712518">i</span>&nbsp;<span class="op" id="3712520">:=</span>&nbsp;<span class="num" id="3712523">0</span><span class="op" id="3712524">;</span>&nbsp;<span class="ident" id="3712526">i</span>&nbsp;<span class="op" id="3712528">&lt;</span>&nbsp;<span class="builtinfunc" id="3712530">len</span><span class="op" id="3712533">(</span><span class="ident" id="3712534">f</span><span class="op" id="3712535">)</span><span class="op" id="3712536">;</span>&nbsp;<span class="ident" id="3712538">i</span><span class="op" id="3712539">++</span>&nbsp;<span class="op" id="3712542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712547">if</span>&nbsp;<span class="ident" id="3712550">i</span>&nbsp;<span class="op" id="3712552">!=</span>&nbsp;<span class="num" id="3712555">1</span>&nbsp;<span class="op" id="3712557">{</span>&nbsp;<span class="comment" id="3712559">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712584">m</span><span class="op" id="3712585">[</span><span class="ident" id="3712586">f</span><span class="op" id="3712587">[</span><span class="ident" id="3712588">i</span><span class="op" id="3712589">]</span><span class="op" id="3712590">]</span>&nbsp;<span class="op" id="3712592">=</span>&nbsp;<span class="ident" id="3712594">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712612">file</span><span class="op" id="3712616">.</span><span class="builtinfunc" id="3712617">close</span><span class="op" id="3712622">(</span><span class="op" id="3712623">)</span><br>
<span class="lineno"></span><span class="op" id="3712625">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3712628">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="3712691">func</span>&nbsp;<span class="ident" id="3712696">goLookupPort</span><span class="op" id="3712708">(</span><span class="ident" id="3712709">network</span><span class="op" id="3712716">,</span>&nbsp;<span class="ident" id="3712718">service</span>&nbsp;<span class="builtintype" id="3712726">string</span><span class="op" id="3712732">)</span>&nbsp;<span class="op" id="3712734">(</span><span class="ident" id="3712735">port</span>&nbsp;<span class="builtintype" id="3712740">int</span><span class="op" id="3712743">,</span>&nbsp;<span class="ident" id="3712745">err</span>&nbsp;<span class="builtintype" id="3712749">error</span><span class="op" id="3712754">)</span>&nbsp;<span class="op" id="3712756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712759">onceReadServices</span><span class="op" id="3712775">.</span><span class="ident" id="3712776">Do</span><span class="op" id="3712778">(</span><span class="ident" id="3712779">readServices</span><span class="op" id="3712791">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712795">switch</span>&nbsp;<span class="ident" id="3712802">network</span>&nbsp;<span class="op" id="3712810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712813">case</span>&nbsp;<span class="string" id="3712818">&#34;tcp4&#34;</span><span class="op" id="3712824">,</span>&nbsp;<span class="string" id="3712826">&#34;tcp6&#34;</span><span class="op" id="3712832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712836">network</span>&nbsp;<span class="op" id="3712844">=</span>&nbsp;<span class="string" id="3712846">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712853">case</span>&nbsp;<span class="string" id="3712858">&#34;udp4&#34;</span><span class="op" id="3712864">,</span>&nbsp;<span class="string" id="3712866">&#34;udp6&#34;</span><span class="op" id="3712872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712876">network</span>&nbsp;<span class="op" id="3712884">=</span>&nbsp;<span class="string" id="3712886">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712897">if</span>&nbsp;<span class="ident" id="3712900">m</span><span class="op" id="3712901">,</span>&nbsp;<span class="ident" id="3712903">ok</span>&nbsp;<span class="op" id="3712906">:=</span>&nbsp;<span class="ident" id="3712909">services</span><span class="op" id="3712917">[</span><span class="ident" id="3712918">network</span><span class="op" id="3712925">]</span><span class="op" id="3712926">;</span>&nbsp;<span class="ident" id="3712928">ok</span>&nbsp;<span class="op" id="3712931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712935">if</span>&nbsp;<span class="ident" id="3712938">port</span><span class="op" id="3712942">,</span>&nbsp;<span class="ident" id="3712944">ok</span>&nbsp;<span class="op" id="3712947">=</span>&nbsp;<span class="ident" id="3712949">m</span><span class="op" id="3712950">[</span><span class="ident" id="3712951">service</span><span class="op" id="3712958">]</span><span class="op" id="3712959">;</span>&nbsp;<span class="ident" id="3712961">ok</span>&nbsp;<span class="op" id="3712964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712969">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712984">return</span>&nbsp;<span class="num" id="3712991">0</span><span class="op" id="3712992">,</span>&nbsp;<span class="op" id="3712994">&amp;</span><span class="ident" id="3712995">AddrError</span><span class="op" id="3713004">{</span><span class="string" id="3713005">&#34;unknown&nbsp;port&#34;</span><span class="op" id="3713019">,</span>&nbsp;<span class="ident" id="3713021">network</span>&nbsp;<span class="op" id="3713029">+</span>&nbsp;<span class="string" id="3713031">&#34;/&#34;</span>&nbsp;<span class="op" id="3713035">+</span>&nbsp;<span class="ident" id="3713037">service</span><span class="op" id="3713044">}</span><br>
<span class="lineno"></span><span class="op" id="3713046">}</span>
</div>
</body>
</html>
