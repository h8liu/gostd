<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html" class="current">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6615753">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6615809">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6615863">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6615914">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6615993">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616002">package</span>&nbsp;<span class="ident" id="6616010">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6616015">import</span>&nbsp;<span class="op" id="6616022">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6616025">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6616031">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6616042">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6616053">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6616060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6616063">var</span>&nbsp;<span class="ident" id="6616067">connTests</span>&nbsp;<span class="op" id="6616077">=</span>&nbsp;<span class="op" id="6616079">[</span><span class="op" id="6616080">]</span><span class="keyword" id="6616081">struct</span>&nbsp;<span class="op" id="6616088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616091">net</span>&nbsp;&nbsp;<span class="builtintype" id="6616096">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616104">addr</span>&nbsp;<span class="builtintype" id="6616109">string</span><br>
<span class="lineno">20</span><span class="op" id="6616116">}</span><span class="op" id="6616117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616120">{</span><span class="string" id="6616121">&#34;tcp&#34;</span><span class="op" id="6616126">,</span>&nbsp;<span class="string" id="6616128">&#34;127.0.0.1:0&#34;</span><span class="op" id="6616141">}</span><span class="op" id="6616142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616145">{</span><span class="string" id="6616146">&#34;unix&#34;</span><span class="op" id="6616152">,</span>&nbsp;<span class="ident" id="6616154">testUnixAddr</span><span class="op" id="6616166">(</span><span class="op" id="6616167">)</span><span class="op" id="6616168">}</span><span class="op" id="6616169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616172">{</span><span class="string" id="6616173">&#34;unixpacket&#34;</span><span class="op" id="6616185">,</span>&nbsp;<span class="ident" id="6616187">testUnixAddr</span><span class="op" id="6616199">(</span><span class="op" id="6616200">)</span><span class="op" id="6616201">}</span><span class="op" id="6616202">,</span><br>
<span class="lineno"></span><span class="op" id="6616204">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6616207">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6616273">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6616336">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6616384">const</span>&nbsp;<span class="ident" id="6616390">someTimeout</span>&nbsp;<span class="op" id="6616402">=</span>&nbsp;<span class="num" id="6616404">10</span>&nbsp;<span class="op" id="6616407">*</span>&nbsp;<span class="ident" id="6616409">time</span><span class="op" id="6616413">.</span><span class="ident" id="6616414">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6616422">func</span>&nbsp;<span class="ident" id="6616427">TestConnAndListener</span><span class="op" id="6616446">(</span><span class="ident" id="6616447">t</span>&nbsp;<span class="op" id="6616449">*</span><span class="ident" id="6616450">testing</span><span class="op" id="6616457">.</span><span class="ident" id="6616458">T</span><span class="op" id="6616459">)</span>&nbsp;<span class="op" id="6616461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616464">for</span>&nbsp;<span class="ident" id="6616468">_</span><span class="op" id="6616469">,</span>&nbsp;<span class="ident" id="6616471">tt</span>&nbsp;<span class="op" id="6616474">:=</span>&nbsp;<span class="keyword" id="6616477">range</span>&nbsp;<span class="ident" id="6616483">connTests</span>&nbsp;<span class="op" id="6616493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616497">switch</span>&nbsp;<span class="ident" id="6616504">tt</span><span class="op" id="6616506">.</span><span class="ident" id="6616507">net</span>&nbsp;<span class="op" id="6616511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616515">case</span>&nbsp;<span class="string" id="6616520">&#34;unix&#34;</span><span class="op" id="6616526">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616531">switch</span>&nbsp;<span class="ident" id="6616538">runtime</span><span class="op" id="6616545">.</span><span class="ident" id="6616546">GOOS</span>&nbsp;<span class="op" id="6616551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616556">case</span>&nbsp;<span class="string" id="6616561">&#34;nacl&#34;</span><span class="op" id="6616567">,</span>&nbsp;<span class="string" id="6616569">&#34;plan9&#34;</span><span class="op" id="6616576">,</span>&nbsp;<span class="string" id="6616578">&#34;windows&#34;</span><span class="op" id="6616587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616593">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616609">case</span>&nbsp;<span class="string" id="6616614">&#34;unixpacket&#34;</span><span class="op" id="6616626">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616631">switch</span>&nbsp;<span class="ident" id="6616638">runtime</span><span class="op" id="6616645">.</span><span class="ident" id="6616646">GOOS</span>&nbsp;<span class="op" id="6616651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616656">case</span>&nbsp;<span class="string" id="6616661">&#34;android&#34;</span><span class="op" id="6616670">,</span>&nbsp;<span class="string" id="6616672">&#34;darwin&#34;</span><span class="op" id="6616680">,</span>&nbsp;<span class="string" id="6616682">&#34;nacl&#34;</span><span class="op" id="6616688">,</span>&nbsp;<span class="string" id="6616690">&#34;openbsd&#34;</span><span class="op" id="6616699">,</span>&nbsp;<span class="string" id="6616701">&#34;plan9&#34;</span><span class="op" id="6616708">,</span>&nbsp;<span class="string" id="6616710">&#34;windows&#34;</span><span class="op" id="6616719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616725">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616737">case</span>&nbsp;<span class="string" id="6616742">&#34;freebsd&#34;</span><span class="op" id="6616751">:</span>&nbsp;<span class="comment" id="6616753">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616797">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616818">ln</span><span class="op" id="6616820">,</span>&nbsp;<span class="ident" id="6616822">err</span>&nbsp;<span class="op" id="6616826">:=</span>&nbsp;<span class="ident" id="6616829">Listen</span><span class="op" id="6616835">(</span><span class="ident" id="6616836">tt</span><span class="op" id="6616838">.</span><span class="ident" id="6616839">net</span><span class="op" id="6616842">,</span>&nbsp;<span class="ident" id="6616844">tt</span><span class="op" id="6616846">.</span><span class="ident" id="6616847">addr</span><span class="op" id="6616851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616855">if</span>&nbsp;<span class="ident" id="6616858">err</span>&nbsp;<span class="op" id="6616862">!=</span>&nbsp;<span class="builtintype" id="6616865">nil</span>&nbsp;<span class="op" id="6616869">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616874">t</span><span class="op" id="6616875">.</span><span class="ident" id="6616876">Fatalf</span><span class="op" id="6616882">(</span><span class="string" id="6616883">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6616902">,</span>&nbsp;<span class="ident" id="6616904">err</span><span class="op" id="6616907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6616911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616915">defer</span>&nbsp;<span class="keyword" id="6616921">func</span><span class="op" id="6616925">(</span><span class="ident" id="6616926">ln</span>&nbsp;<span class="ident" id="6616929">Listener</span><span class="op" id="6616937">,</span>&nbsp;<span class="ident" id="6616939">net</span><span class="op" id="6616942">,</span>&nbsp;<span class="ident" id="6616944">addr</span>&nbsp;<span class="builtintype" id="6616949">string</span><span class="op" id="6616955">)</span>&nbsp;<span class="op" id="6616957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6616962">ln</span><span class="op" id="6616964">.</span><span class="ident" id="6616965">Close</span><span class="op" id="6616970">(</span><span class="op" id="6616971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616976">switch</span>&nbsp;<span class="ident" id="6616983">net</span>&nbsp;<span class="op" id="6616987">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6616992">case</span>&nbsp;<span class="string" id="6616997">&#34;unix&#34;</span><span class="op" id="6617003">,</span>&nbsp;<span class="string" id="6617005">&#34;unixpacket&#34;</span><span class="op" id="6617017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617023">os</span><span class="op" id="6617025">.</span><span class="ident" id="6617026">Remove</span><span class="op" id="6617032">(</span><span class="ident" id="6617033">addr</span><span class="op" id="6617037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617046">}</span><span class="op" id="6617047">(</span><span class="ident" id="6617048">ln</span><span class="op" id="6617050">,</span>&nbsp;<span class="ident" id="6617052">tt</span><span class="op" id="6617054">.</span><span class="ident" id="6617055">net</span><span class="op" id="6617058">,</span>&nbsp;<span class="ident" id="6617060">tt</span><span class="op" id="6617062">.</span><span class="ident" id="6617063">addr</span><span class="op" id="6617067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617071">if</span>&nbsp;<span class="ident" id="6617074">ln</span><span class="op" id="6617076">.</span><span class="ident" id="6617077">Addr</span><span class="op" id="6617081">(</span><span class="op" id="6617082">)</span><span class="op" id="6617083">.</span><span class="ident" id="6617084">Network</span><span class="op" id="6617091">(</span><span class="op" id="6617092">)</span>&nbsp;<span class="op" id="6617094">!=</span>&nbsp;<span class="ident" id="6617097">tt</span><span class="op" id="6617099">.</span><span class="ident" id="6617100">net</span>&nbsp;<span class="op" id="6617104">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617109">t</span><span class="op" id="6617110">.</span><span class="ident" id="6617111">Fatalf</span><span class="op" id="6617117">(</span><span class="string" id="6617118">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6617139">,</span>&nbsp;<span class="ident" id="6617141">ln</span><span class="op" id="6617143">.</span><span class="ident" id="6617144">Addr</span><span class="op" id="6617148">(</span><span class="op" id="6617149">)</span><span class="op" id="6617150">.</span><span class="ident" id="6617151">Network</span><span class="op" id="6617158">(</span><span class="op" id="6617159">)</span><span class="op" id="6617160">,</span>&nbsp;<span class="ident" id="6617162">tt</span><span class="op" id="6617164">.</span><span class="ident" id="6617165">net</span><span class="op" id="6617168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617177">done</span>&nbsp;<span class="op" id="6617182">:=</span>&nbsp;<span class="builtinfunc" id="6617185">make</span><span class="op" id="6617189">(</span><span class="keyword" id="6617190">chan</span>&nbsp;<span class="builtintype" id="6617195">int</span><span class="op" id="6617198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617202">go</span>&nbsp;<span class="ident" id="6617205">transponder</span><span class="op" id="6617216">(</span><span class="ident" id="6617217">t</span><span class="op" id="6617218">,</span>&nbsp;<span class="ident" id="6617220">ln</span><span class="op" id="6617222">,</span>&nbsp;<span class="ident" id="6617224">done</span><span class="op" id="6617228">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617233">c</span><span class="op" id="6617234">,</span>&nbsp;<span class="ident" id="6617236">err</span>&nbsp;<span class="op" id="6617240">:=</span>&nbsp;<span class="ident" id="6617243">Dial</span><span class="op" id="6617247">(</span><span class="ident" id="6617248">tt</span><span class="op" id="6617250">.</span><span class="ident" id="6617251">net</span><span class="op" id="6617254">,</span>&nbsp;<span class="ident" id="6617256">ln</span><span class="op" id="6617258">.</span><span class="ident" id="6617259">Addr</span><span class="op" id="6617263">(</span><span class="op" id="6617264">)</span><span class="op" id="6617265">.</span><span class="ident" id="6617266">String</span><span class="op" id="6617272">(</span><span class="op" id="6617273">)</span><span class="op" id="6617274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617278">if</span>&nbsp;<span class="ident" id="6617281">err</span>&nbsp;<span class="op" id="6617285">!=</span>&nbsp;<span class="builtintype" id="6617288">nil</span>&nbsp;<span class="op" id="6617292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617297">t</span><span class="op" id="6617298">.</span><span class="ident" id="6617299">Fatalf</span><span class="op" id="6617305">(</span><span class="string" id="6617306">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6617323">,</span>&nbsp;<span class="ident" id="6617325">err</span><span class="op" id="6617328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617332">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617336">defer</span>&nbsp;<span class="ident" id="6617342">c</span><span class="op" id="6617343">.</span><span class="ident" id="6617344">Close</span><span class="op" id="6617349">(</span><span class="op" id="6617350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617354">if</span>&nbsp;<span class="ident" id="6617357">c</span><span class="op" id="6617358">.</span><span class="ident" id="6617359">LocalAddr</span><span class="op" id="6617368">(</span><span class="op" id="6617369">)</span><span class="op" id="6617370">.</span><span class="ident" id="6617371">Network</span><span class="op" id="6617378">(</span><span class="op" id="6617379">)</span>&nbsp;<span class="op" id="6617381">!=</span>&nbsp;<span class="ident" id="6617384">tt</span><span class="op" id="6617386">.</span><span class="ident" id="6617387">net</span>&nbsp;<span class="op" id="6617391">||</span>&nbsp;<span class="ident" id="6617394">c</span><span class="op" id="6617395">.</span><span class="ident" id="6617396">LocalAddr</span><span class="op" id="6617405">(</span><span class="op" id="6617406">)</span><span class="op" id="6617407">.</span><span class="ident" id="6617408">Network</span><span class="op" id="6617415">(</span><span class="op" id="6617416">)</span>&nbsp;<span class="op" id="6617418">!=</span>&nbsp;<span class="ident" id="6617421">tt</span><span class="op" id="6617423">.</span><span class="ident" id="6617424">net</span>&nbsp;<span class="op" id="6617428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617433">t</span><span class="op" id="6617434">.</span><span class="ident" id="6617435">Fatalf</span><span class="op" id="6617441">(</span><span class="string" id="6617442">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6617471">,</span>&nbsp;<span class="ident" id="6617473">c</span><span class="op" id="6617474">.</span><span class="ident" id="6617475">LocalAddr</span><span class="op" id="6617484">(</span><span class="op" id="6617485">)</span><span class="op" id="6617486">.</span><span class="ident" id="6617487">Network</span><span class="op" id="6617494">(</span><span class="op" id="6617495">)</span><span class="op" id="6617496">,</span>&nbsp;<span class="ident" id="6617498">c</span><span class="op" id="6617499">.</span><span class="ident" id="6617500">RemoteAddr</span><span class="op" id="6617510">(</span><span class="op" id="6617511">)</span><span class="op" id="6617512">.</span><span class="ident" id="6617513">Network</span><span class="op" id="6617520">(</span><span class="op" id="6617521">)</span><span class="op" id="6617522">,</span>&nbsp;<span class="ident" id="6617524">tt</span><span class="op" id="6617526">.</span><span class="ident" id="6617527">net</span><span class="op" id="6617530">,</span>&nbsp;<span class="ident" id="6617532">tt</span><span class="op" id="6617534">.</span><span class="ident" id="6617535">net</span><span class="op" id="6617538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617546">c</span><span class="op" id="6617547">.</span><span class="ident" id="6617548">SetDeadline</span><span class="op" id="6617559">(</span><span class="ident" id="6617560">time</span><span class="op" id="6617564">.</span><span class="ident" id="6617565">Now</span><span class="op" id="6617568">(</span><span class="op" id="6617569">)</span><span class="op" id="6617570">.</span><span class="ident" id="6617571">Add</span><span class="op" id="6617574">(</span><span class="ident" id="6617575">someTimeout</span><span class="op" id="6617586">)</span><span class="op" id="6617587">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617591">c</span><span class="op" id="6617592">.</span><span class="ident" id="6617593">SetReadDeadline</span><span class="op" id="6617608">(</span><span class="ident" id="6617609">time</span><span class="op" id="6617613">.</span><span class="ident" id="6617614">Now</span><span class="op" id="6617617">(</span><span class="op" id="6617618">)</span><span class="op" id="6617619">.</span><span class="ident" id="6617620">Add</span><span class="op" id="6617623">(</span><span class="ident" id="6617624">someTimeout</span><span class="op" id="6617635">)</span><span class="op" id="6617636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617640">c</span><span class="op" id="6617641">.</span><span class="ident" id="6617642">SetWriteDeadline</span><span class="op" id="6617658">(</span><span class="ident" id="6617659">time</span><span class="op" id="6617663">.</span><span class="ident" id="6617664">Now</span><span class="op" id="6617667">(</span><span class="op" id="6617668">)</span><span class="op" id="6617669">.</span><span class="ident" id="6617670">Add</span><span class="op" id="6617673">(</span><span class="ident" id="6617674">someTimeout</span><span class="op" id="6617685">)</span><span class="op" id="6617686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617691">if</span>&nbsp;<span class="ident" id="6617694">_</span><span class="op" id="6617695">,</span>&nbsp;<span class="ident" id="6617697">err</span>&nbsp;<span class="op" id="6617701">:=</span>&nbsp;<span class="ident" id="6617704">c</span><span class="op" id="6617705">.</span><span class="ident" id="6617706">Write</span><span class="op" id="6617711">(</span><span class="op" id="6617712">[</span><span class="op" id="6617713">]</span><span class="builtintype" id="6617714">byte</span><span class="op" id="6617718">(</span><span class="string" id="6617719">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6617730">)</span><span class="op" id="6617731">)</span><span class="op" id="6617732">;</span>&nbsp;<span class="ident" id="6617734">err</span>&nbsp;<span class="op" id="6617738">!=</span>&nbsp;<span class="builtintype" id="6617741">nil</span>&nbsp;<span class="op" id="6617745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617750">t</span><span class="op" id="6617751">.</span><span class="ident" id="6617752">Fatalf</span><span class="op" id="6617758">(</span><span class="string" id="6617759">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6617782">,</span>&nbsp;<span class="ident" id="6617784">err</span><span class="op" id="6617787">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617795">rb</span>&nbsp;<span class="op" id="6617798">:=</span>&nbsp;<span class="builtinfunc" id="6617801">make</span><span class="op" id="6617805">(</span><span class="op" id="6617806">[</span><span class="op" id="6617807">]</span><span class="builtintype" id="6617808">byte</span><span class="op" id="6617812">,</span>&nbsp;<span class="num" id="6617814">128</span><span class="op" id="6617817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617821">if</span>&nbsp;<span class="ident" id="6617824">_</span><span class="op" id="6617825">,</span>&nbsp;<span class="ident" id="6617827">err</span>&nbsp;<span class="op" id="6617831">:=</span>&nbsp;<span class="ident" id="6617834">c</span><span class="op" id="6617835">.</span><span class="ident" id="6617836">Read</span><span class="op" id="6617840">(</span><span class="ident" id="6617841">rb</span><span class="op" id="6617843">)</span><span class="op" id="6617844">;</span>&nbsp;<span class="ident" id="6617846">err</span>&nbsp;<span class="op" id="6617850">!=</span>&nbsp;<span class="builtintype" id="6617853">nil</span>&nbsp;<span class="op" id="6617857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6617862">t</span><span class="op" id="6617863">.</span><span class="ident" id="6617864">Fatalf</span><span class="op" id="6617870">(</span><span class="string" id="6617871">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6617893">,</span>&nbsp;<span class="ident" id="6617895">err</span><span class="op" id="6617898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617902">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617907">&lt;-</span><span class="ident" id="6617909">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6617915">}</span><br>
<span class="lineno"></span><span class="op" id="6617917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6617920">func</span>&nbsp;<span class="ident" id="6617925">transponder</span><span class="op" id="6617936">(</span><span class="ident" id="6617937">t</span>&nbsp;<span class="op" id="6617939">*</span><span class="ident" id="6617940">testing</span><span class="op" id="6617947">.</span><span class="ident" id="6617948">T</span><span class="op" id="6617949">,</span>&nbsp;<span class="ident" id="6617951">ln</span>&nbsp;<span class="ident" id="6617954">Listener</span><span class="op" id="6617962">,</span>&nbsp;<span class="ident" id="6617964">done</span>&nbsp;<span class="keyword" id="6617969">chan</span><span class="op" id="6617973">&lt;-</span>&nbsp;<span class="builtintype" id="6617976">int</span><span class="op" id="6617979">)</span>&nbsp;<span class="op" id="6617981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6617984">defer</span>&nbsp;<span class="keyword" id="6617990">func</span><span class="op" id="6617994">(</span><span class="op" id="6617995">)</span>&nbsp;<span class="op" id="6617997">{</span>&nbsp;<span class="ident" id="6617999">done</span>&nbsp;<span class="op" id="6618004">&lt;-</span>&nbsp;<span class="num" id="6618007">1</span>&nbsp;<span class="op" id="6618009">}</span><span class="op" id="6618010">(</span><span class="op" id="6618011">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618015">switch</span>&nbsp;<span class="ident" id="6618022">ln</span>&nbsp;<span class="op" id="6618025">:=</span>&nbsp;<span class="ident" id="6618028">ln</span><span class="op" id="6618030">.</span><span class="op" id="6618031">(</span><span class="keyword" id="6618032">type</span><span class="op" id="6618036">)</span>&nbsp;<span class="op" id="6618038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618041">case</span>&nbsp;<span class="op" id="6618046">*</span><span class="ident" id="6618047">TCPListener</span><span class="op" id="6618058">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618062">ln</span><span class="op" id="6618064">.</span><span class="ident" id="6618065">SetDeadline</span><span class="op" id="6618076">(</span><span class="ident" id="6618077">time</span><span class="op" id="6618081">.</span><span class="ident" id="6618082">Now</span><span class="op" id="6618085">(</span><span class="op" id="6618086">)</span><span class="op" id="6618087">.</span><span class="ident" id="6618088">Add</span><span class="op" id="6618091">(</span><span class="ident" id="6618092">someTimeout</span><span class="op" id="6618103">)</span><span class="op" id="6618104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618107">case</span>&nbsp;<span class="op" id="6618112">*</span><span class="ident" id="6618113">UnixListener</span><span class="op" id="6618125">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618129">ln</span><span class="op" id="6618131">.</span><span class="ident" id="6618132">SetDeadline</span><span class="op" id="6618143">(</span><span class="ident" id="6618144">time</span><span class="op" id="6618148">.</span><span class="ident" id="6618149">Now</span><span class="op" id="6618152">(</span><span class="op" id="6618153">)</span><span class="op" id="6618154">.</span><span class="ident" id="6618155">Add</span><span class="op" id="6618158">(</span><span class="ident" id="6618159">someTimeout</span><span class="op" id="6618170">)</span><span class="op" id="6618171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618177">c</span><span class="op" id="6618178">,</span>&nbsp;<span class="ident" id="6618180">err</span>&nbsp;<span class="op" id="6618184">:=</span>&nbsp;<span class="ident" id="6618187">ln</span><span class="op" id="6618189">.</span><span class="ident" id="6618190">Accept</span><span class="op" id="6618196">(</span><span class="op" id="6618197">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618200">if</span>&nbsp;<span class="ident" id="6618203">err</span>&nbsp;<span class="op" id="6618207">!=</span>&nbsp;<span class="builtintype" id="6618210">nil</span>&nbsp;<span class="op" id="6618214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618218">t</span><span class="op" id="6618219">.</span><span class="ident" id="6618220">Errorf</span><span class="op" id="6618226">(</span><span class="string" id="6618227">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6618255">,</span>&nbsp;<span class="ident" id="6618257">err</span><span class="op" id="6618260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618264">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618275">defer</span>&nbsp;<span class="ident" id="6618281">c</span><span class="op" id="6618282">.</span><span class="ident" id="6618283">Close</span><span class="op" id="6618288">(</span><span class="op" id="6618289">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618292">network</span>&nbsp;<span class="op" id="6618300">:=</span>&nbsp;<span class="ident" id="6618303">ln</span><span class="op" id="6618305">.</span><span class="ident" id="6618306">Addr</span><span class="op" id="6618310">(</span><span class="op" id="6618311">)</span><span class="op" id="6618312">.</span><span class="ident" id="6618313">Network</span><span class="op" id="6618320">(</span><span class="op" id="6618321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618324">if</span>&nbsp;<span class="ident" id="6618327">c</span><span class="op" id="6618328">.</span><span class="ident" id="6618329">LocalAddr</span><span class="op" id="6618338">(</span><span class="op" id="6618339">)</span><span class="op" id="6618340">.</span><span class="ident" id="6618341">Network</span><span class="op" id="6618348">(</span><span class="op" id="6618349">)</span>&nbsp;<span class="op" id="6618351">!=</span>&nbsp;<span class="ident" id="6618354">network</span>&nbsp;<span class="op" id="6618362">||</span>&nbsp;<span class="ident" id="6618365">c</span><span class="op" id="6618366">.</span><span class="ident" id="6618367">LocalAddr</span><span class="op" id="6618376">(</span><span class="op" id="6618377">)</span><span class="op" id="6618378">.</span><span class="ident" id="6618379">Network</span><span class="op" id="6618386">(</span><span class="op" id="6618387">)</span>&nbsp;<span class="op" id="6618389">!=</span>&nbsp;<span class="ident" id="6618392">network</span>&nbsp;<span class="op" id="6618400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618404">t</span><span class="op" id="6618405">.</span><span class="ident" id="6618406">Errorf</span><span class="op" id="6618412">(</span><span class="string" id="6618413">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6618442">,</span>&nbsp;<span class="ident" id="6618444">c</span><span class="op" id="6618445">.</span><span class="ident" id="6618446">LocalAddr</span><span class="op" id="6618455">(</span><span class="op" id="6618456">)</span><span class="op" id="6618457">.</span><span class="ident" id="6618458">Network</span><span class="op" id="6618465">(</span><span class="op" id="6618466">)</span><span class="op" id="6618467">,</span>&nbsp;<span class="ident" id="6618469">c</span><span class="op" id="6618470">.</span><span class="ident" id="6618471">RemoteAddr</span><span class="op" id="6618481">(</span><span class="op" id="6618482">)</span><span class="op" id="6618483">.</span><span class="ident" id="6618484">Network</span><span class="op" id="6618491">(</span><span class="op" id="6618492">)</span><span class="op" id="6618493">,</span>&nbsp;<span class="ident" id="6618495">network</span><span class="op" id="6618502">,</span>&nbsp;<span class="ident" id="6618504">network</span><span class="op" id="6618511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618515">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618523">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618526">c</span><span class="op" id="6618527">.</span><span class="ident" id="6618528">SetDeadline</span><span class="op" id="6618539">(</span><span class="ident" id="6618540">time</span><span class="op" id="6618544">.</span><span class="ident" id="6618545">Now</span><span class="op" id="6618548">(</span><span class="op" id="6618549">)</span><span class="op" id="6618550">.</span><span class="ident" id="6618551">Add</span><span class="op" id="6618554">(</span><span class="ident" id="6618555">someTimeout</span><span class="op" id="6618566">)</span><span class="op" id="6618567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618570">c</span><span class="op" id="6618571">.</span><span class="ident" id="6618572">SetReadDeadline</span><span class="op" id="6618587">(</span><span class="ident" id="6618588">time</span><span class="op" id="6618592">.</span><span class="ident" id="6618593">Now</span><span class="op" id="6618596">(</span><span class="op" id="6618597">)</span><span class="op" id="6618598">.</span><span class="ident" id="6618599">Add</span><span class="op" id="6618602">(</span><span class="ident" id="6618603">someTimeout</span><span class="op" id="6618614">)</span><span class="op" id="6618615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618618">c</span><span class="op" id="6618619">.</span><span class="ident" id="6618620">SetWriteDeadline</span><span class="op" id="6618636">(</span><span class="ident" id="6618637">time</span><span class="op" id="6618641">.</span><span class="ident" id="6618642">Now</span><span class="op" id="6618645">(</span><span class="op" id="6618646">)</span><span class="op" id="6618647">.</span><span class="ident" id="6618648">Add</span><span class="op" id="6618651">(</span><span class="ident" id="6618652">someTimeout</span><span class="op" id="6618663">)</span><span class="op" id="6618664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618668">b</span>&nbsp;<span class="op" id="6618670">:=</span>&nbsp;<span class="builtinfunc" id="6618673">make</span><span class="op" id="6618677">(</span><span class="op" id="6618678">[</span><span class="op" id="6618679">]</span><span class="builtintype" id="6618680">byte</span><span class="op" id="6618684">,</span>&nbsp;<span class="num" id="6618686">128</span><span class="op" id="6618689">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618692">n</span><span class="op" id="6618693">,</span>&nbsp;<span class="ident" id="6618695">err</span>&nbsp;<span class="op" id="6618699">:=</span>&nbsp;<span class="ident" id="6618702">c</span><span class="op" id="6618703">.</span><span class="ident" id="6618704">Read</span><span class="op" id="6618708">(</span><span class="ident" id="6618709">b</span><span class="op" id="6618710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618713">if</span>&nbsp;<span class="ident" id="6618716">err</span>&nbsp;<span class="op" id="6618720">!=</span>&nbsp;<span class="builtintype" id="6618723">nil</span>&nbsp;<span class="op" id="6618727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618731">t</span><span class="op" id="6618732">.</span><span class="ident" id="6618733">Errorf</span><span class="op" id="6618739">(</span><span class="string" id="6618740">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6618762">,</span>&nbsp;<span class="ident" id="6618764">err</span><span class="op" id="6618767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618771">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618779">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618782">if</span>&nbsp;<span class="ident" id="6618785">_</span><span class="op" id="6618786">,</span>&nbsp;<span class="ident" id="6618788">err</span>&nbsp;<span class="op" id="6618792">:=</span>&nbsp;<span class="ident" id="6618795">c</span><span class="op" id="6618796">.</span><span class="ident" id="6618797">Write</span><span class="op" id="6618802">(</span><span class="ident" id="6618803">b</span><span class="op" id="6618804">[</span><span class="op" id="6618805">:</span><span class="ident" id="6618806">n</span><span class="op" id="6618807">]</span><span class="op" id="6618808">)</span><span class="op" id="6618809">;</span>&nbsp;<span class="ident" id="6618811">err</span>&nbsp;<span class="op" id="6618815">!=</span>&nbsp;<span class="builtintype" id="6618818">nil</span>&nbsp;<span class="op" id="6618822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618826">t</span><span class="op" id="6618827">.</span><span class="ident" id="6618828">Errorf</span><span class="op" id="6618834">(</span><span class="string" id="6618835">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6618858">,</span>&nbsp;<span class="ident" id="6618860">err</span><span class="op" id="6618863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618867">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618875">}</span><br>
<span class="lineno"></span><span class="op" id="6618877">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
