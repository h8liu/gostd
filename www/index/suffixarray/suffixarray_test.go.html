<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7016297">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7016352">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7016406">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7016457">package</span>&nbsp;<span class="ident" id="7016465">suffixarray</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016478">import</span>&nbsp;<span class="op" id="7016485">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016488">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016497">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016510">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016520">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016528">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016539">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7016549">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7016552">type</span>&nbsp;<span class="ident" id="7016557">testCase</span>&nbsp;<span class="keyword" id="7016566">struct</span>&nbsp;<span class="op" id="7016573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016576">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7016585">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7016594">//&nbsp;name&nbsp;of&nbsp;test&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016616">source</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7016625">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7016634">//&nbsp;source&nbsp;to&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7016654">patterns</span>&nbsp;<span class="op" id="7016663">[</span><span class="op" id="7016664">]</span><span class="builtintype" id="7016665">string</span>&nbsp;<span class="comment" id="7016672">//&nbsp;patterns&nbsp;to&nbsp;lookup</span><br>
<span class="lineno">20</span><span class="op" id="7016694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7016697">var</span>&nbsp;<span class="ident" id="7016701">testCases</span>&nbsp;<span class="op" id="7016711">=</span>&nbsp;<span class="op" id="7016713">[</span><span class="op" id="7016714">]</span><span class="ident" id="7016715"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7016723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016730">&#34;empty&nbsp;string&#34;</span><span class="op" id="7016744">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016748">&#34;&#34;</span><span class="op" id="7016750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016754">[</span><span class="op" id="7016755">]</span><span class="builtintype" id="7016756">string</span><span class="op" id="7016762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016767">&#34;&#34;</span><span class="op" id="7016769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016774">&#34;foo&#34;</span><span class="op" id="7016779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016784">&#34;(foo)&#34;</span><span class="op" id="7016791">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016796">&#34;.*&#34;</span><span class="op" id="7016800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016805">&#34;a*&#34;</span><span class="op" id="7016809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016813">}</span><span class="op" id="7016814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016817">}</span><span class="op" id="7016818">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016826">&#34;all&nbsp;a&#39;s&#34;</span><span class="op" id="7016835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016839">&#34;aaaaaaaaaa&#34;</span><span class="op" id="7016851">,</span>&nbsp;<span class="comment" id="7016853">//&nbsp;10&nbsp;a&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7016865">[</span><span class="op" id="7016866">]</span><span class="builtintype" id="7016867">string</span><span class="op" id="7016873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016878">&#34;&#34;</span><span class="op" id="7016880">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016885">&#34;a&#34;</span><span class="op" id="7016888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016893">&#34;aa&#34;</span><span class="op" id="7016897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016902">&#34;aaa&#34;</span><span class="op" id="7016907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016912">&#34;aaaa&#34;</span><span class="op" id="7016918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016923">&#34;aaaaa&#34;</span><span class="op" id="7016930">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016935">&#34;aaaaaa&#34;</span><span class="op" id="7016943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016948">&#34;aaaaaaa&#34;</span><span class="op" id="7016957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016962">&#34;aaaaaaaa&#34;</span><span class="op" id="7016972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016977">&#34;aaaaaaaaa&#34;</span><span class="op" id="7016988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7016993">&#34;aaaaaaaaaa&#34;</span><span class="op" id="7017005">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017010">&#34;aaaaaaaaaaa&#34;</span><span class="op" id="7017023">,</span>&nbsp;<span class="comment" id="7017025">//&nbsp;11&nbsp;a&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017038">&#34;.&#34;</span><span class="op" id="7017041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017046">&#34;.*&#34;</span><span class="op" id="7017050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017055">&#34;a+&#34;</span><span class="op" id="7017059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017064">&#34;aa+&#34;</span><span class="op" id="7017069">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017074">&#34;aaaa[b]?&#34;</span><span class="op" id="7017084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017089">&#34;aaa*&#34;</span><span class="op" id="7017095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017099">}</span><span class="op" id="7017100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017103">}</span><span class="op" id="7017104">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017112">&#34;abc&#34;</span><span class="op" id="7017117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017121">&#34;abc&#34;</span><span class="op" id="7017126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017130">[</span><span class="op" id="7017131">]</span><span class="builtintype" id="7017132">string</span><span class="op" id="7017138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017143">&#34;a&#34;</span><span class="op" id="7017146">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017151">&#34;b&#34;</span><span class="op" id="7017154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017159">&#34;c&#34;</span><span class="op" id="7017162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017167">&#34;ab&#34;</span><span class="op" id="7017171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017176">&#34;bc&#34;</span><span class="op" id="7017180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017185">&#34;abc&#34;</span><span class="op" id="7017190">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017195">&#34;a.c&#34;</span><span class="op" id="7017200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017205">&#34;a(b|c)&#34;</span><span class="op" id="7017213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017218">&#34;abc?&#34;</span><span class="op" id="7017224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017228">}</span><span class="op" id="7017229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017232">}</span><span class="op" id="7017233">,</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017241">&#34;barbara*3&#34;</span><span class="op" id="7017252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017256">&#34;barbarabarbarabarbara&#34;</span><span class="op" id="7017279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017283">[</span><span class="op" id="7017284">]</span><span class="builtintype" id="7017285">string</span><span class="op" id="7017291">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017296">&#34;a&#34;</span><span class="op" id="7017299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017304">&#34;bar&#34;</span><span class="op" id="7017309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017314">&#34;rab&#34;</span><span class="op" id="7017319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017324">&#34;arab&#34;</span><span class="op" id="7017330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017335">&#34;barbar&#34;</span><span class="op" id="7017343">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017348">&#34;bara?bar&#34;</span><span class="op" id="7017358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017362">}</span><span class="op" id="7017363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017366">}</span><span class="op" id="7017367">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017371">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017375">&#34;typing&nbsp;drill&#34;</span><span class="op" id="7017389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017393">&#34;Now&nbsp;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&nbsp;country.&#34;</span><span class="op" id="7017464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017468">[</span><span class="op" id="7017469">]</span><span class="builtintype" id="7017470">string</span><span class="op" id="7017476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017481">&#34;Now&#34;</span><span class="op" id="7017486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017491">&#34;the&nbsp;time&#34;</span><span class="op" id="7017501">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017506">&#34;to&nbsp;come&nbsp;the&nbsp;aid&#34;</span><span class="op" id="7017523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017528">&#34;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&#34;</span><span class="op" id="7017586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017591">&#34;to&nbsp;(come|the)?&#34;</span><span class="op" id="7017607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017611">}</span><span class="op" id="7017612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017615">}</span><span class="op" id="7017616">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017624">&#34;godoc&nbsp;simulation&#34;</span><span class="op" id="7017642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7017646">&#34;package&nbsp;main\n\nimport(\n&nbsp;&nbsp;&nbsp;&nbsp;\&#34;rand\&#34;\n&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="7017691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017695">[</span><span class="op" id="7017696">]</span><span class="builtintype" id="7017697">string</span><span class="op" id="7017703">{</span><span class="op" id="7017704">}</span><span class="op" id="7017705">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7017708">}</span><span class="op" id="7017709">,</span><br>
<span class="lineno"></span><span class="op" id="7017711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7017714">//&nbsp;find&nbsp;all&nbsp;occurrences&nbsp;of&nbsp;s&nbsp;in&nbsp;source;&nbsp;report&nbsp;at&nbsp;most&nbsp;n&nbsp;occurrences</span><br>
<span class="lineno"></span><span class="keyword" id="7017783">func</span>&nbsp;<span class="ident" id="7017788">find</span><span class="op" id="7017792">(</span><span class="ident" id="7017793">src</span><span class="op" id="7017796">,</span>&nbsp;<span class="ident" id="7017798">s</span>&nbsp;<span class="builtintype" id="7017800">string</span><span class="op" id="7017806">,</span>&nbsp;<span class="ident" id="7017808">n</span>&nbsp;<span class="builtintype" id="7017810">int</span><span class="op" id="7017813">)</span>&nbsp;<span class="op" id="7017815">[</span><span class="op" id="7017816">]</span><span class="builtintype" id="7017817">int</span>&nbsp;<span class="op" id="7017821">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017824">var</span>&nbsp;<span class="ident" id="7017828">res</span>&nbsp;<span class="op" id="7017832">[</span><span class="op" id="7017833">]</span><span class="builtintype" id="7017834">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017839">if</span>&nbsp;<span class="ident" id="7017842"><a href="/index/suffixarray/suffixarray_test.go.html#7017798">s</a></span>&nbsp;<span class="op" id="7017844">!=</span>&nbsp;<span class="string" id="7017847">&#34;&#34;</span>&nbsp;<span class="op" id="7017850">&amp;&amp;</span>&nbsp;<span class="ident" id="7017853"><a href="/index/suffixarray/suffixarray_test.go.html#7017808">n</a></span>&nbsp;<span class="op" id="7017855">!=</span>&nbsp;<span class="num" id="7017858">0</span>&nbsp;<span class="op" id="7017860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7017864">//&nbsp;find&nbsp;at&nbsp;most&nbsp;n&nbsp;occurrences&nbsp;of&nbsp;s&nbsp;in&nbsp;src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017908">for</span>&nbsp;<span class="ident" id="7017912">i</span>&nbsp;<span class="op" id="7017914">:=</span>&nbsp;<span class="op" id="7017917">-</span><span class="num" id="7017918">1</span><span class="op" id="7017919">;</span>&nbsp;<span class="ident" id="7017921"><a href="/index/suffixarray/suffixarray_test.go.html#7017808">n</a></span>&nbsp;<span class="op" id="7017923">&lt;</span>&nbsp;<span class="num" id="7017925">0</span>&nbsp;<span class="op" id="7017927">||</span>&nbsp;<span class="builtinfunc" id="7017930">len</span><span class="op" id="7017933">(</span><span class="ident" id="7017934"><a href="/index/suffixarray/suffixarray_test.go.html#7017828">res</a></span><span class="op" id="7017937">)</span>&nbsp;<span class="op" id="7017939">&lt;</span>&nbsp;<span class="ident" id="7017941"><a href="/index/suffixarray/suffixarray_test.go.html#7017808">n</a></span><span class="op" id="7017942">;</span>&nbsp;<span class="op" id="7017944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7017949">j</span>&nbsp;<span class="op" id="7017951">:=</span>&nbsp;<span class="ident" id="7017954"><a href="/index/suffixarray/suffixarray_test.go.html#7016528">strings</a></span><span class="op" id="7017961">.</span><span class="ident" id="7017962">Index</span><span class="op" id="7017967">(</span><span class="ident" id="7017968"><a href="/index/suffixarray/suffixarray_test.go.html#7017793">src</a></span><span class="op" id="7017971">[</span><span class="ident" id="7017972"><a href="/index/suffixarray/suffixarray_test.go.html#7017912">i</a></span><span class="op" id="7017973">+</span><span class="num" id="7017974">1</span><span class="op" id="7017975">:</span><span class="op" id="7017976">]</span><span class="op" id="7017977">,</span>&nbsp;<span class="ident" id="7017979"><a href="/index/suffixarray/suffixarray_test.go.html#7017798">s</a></span><span class="op" id="7017980">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7017985">if</span>&nbsp;<span class="ident" id="7017988"><a href="/index/suffixarray/suffixarray_test.go.html#7017949">j</a></span>&nbsp;<span class="op" id="7017990">&lt;</span>&nbsp;<span class="num" id="7017992">0</span>&nbsp;<span class="op" id="7017994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7018000">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7018009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018014"><a href="/index/suffixarray/suffixarray_test.go.html#7017912">i</a></span>&nbsp;<span class="op" id="7018016">+=</span>&nbsp;<span class="ident" id="7018019"><a href="/index/suffixarray/suffixarray_test.go.html#7017949">j</a></span>&nbsp;<span class="op" id="7018021">+</span>&nbsp;<span class="num" id="7018023">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018028"><a href="/index/suffixarray/suffixarray_test.go.html#7017828">res</a></span>&nbsp;<span class="op" id="7018032">=</span>&nbsp;<span class="builtinfunc" id="7018034">append</span><span class="op" id="7018040">(</span><span class="ident" id="7018041"><a href="/index/suffixarray/suffixarray_test.go.html#7017828">res</a></span><span class="op" id="7018044">,</span>&nbsp;<span class="ident" id="7018046"><a href="/index/suffixarray/suffixarray_test.go.html#7017912">i</a></span><span class="op" id="7018047">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7018051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7018054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7018057">return</span>&nbsp;<span class="ident" id="7018064"><a href="/index/suffixarray/suffixarray_test.go.html#7017828">res</a></span><br>
<span class="lineno"></span><span class="op" id="7018068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7018071">func</span>&nbsp;<span class="ident" id="7018076">testLookup</span><span class="op" id="7018086">(</span><span class="ident" id="7018087">t</span>&nbsp;<span class="op" id="7018089">*</span><span class="ident" id="7018090"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7018097">.</span><span class="ident" id="7018098">T</span><span class="op" id="7018099">,</span>&nbsp;<span class="ident" id="7018101">tc</span>&nbsp;<span class="op" id="7018104">*</span><span class="ident" id="7018105"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7018113">,</span>&nbsp;<span class="ident" id="7018115">x</span>&nbsp;<span class="op" id="7018117">*</span><span class="ident" id="7018118"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7018123">,</span>&nbsp;<span class="ident" id="7018125">s</span>&nbsp;<span class="builtintype" id="7018127">string</span><span class="op" id="7018133">,</span>&nbsp;<span class="ident" id="7018135">n</span>&nbsp;<span class="builtintype" id="7018137">int</span><span class="op" id="7018140">)</span>&nbsp;<span class="op" id="7018142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018145">res</span>&nbsp;<span class="op" id="7018149">:=</span>&nbsp;<span class="ident" id="7018152"><a href="/index/suffixarray/suffixarray_test.go.html#7018115">x</a></span><span class="op" id="7018153">.</span><span class="ident" id="7018154">Lookup</span><span class="op" id="7018160">(</span><span class="op" id="7018161">[</span><span class="op" id="7018162">]</span><span class="builtintype" id="7018163">byte</span><span class="op" id="7018167">(</span><span class="ident" id="7018168"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7018169">)</span><span class="op" id="7018170">,</span>&nbsp;<span class="ident" id="7018172"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7018173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018176">exp</span>&nbsp;<span class="op" id="7018180">:=</span>&nbsp;<span class="ident" id="7018183"><a href="/index/suffixarray/suffixarray_test.go.html#7017788">find</a></span><span class="op" id="7018187">(</span><span class="ident" id="7018188"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018190">.</span><span class="ident" id="7018191">source</span><span class="op" id="7018197">,</span>&nbsp;<span class="ident" id="7018199"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7018200">,</span>&nbsp;<span class="ident" id="7018202"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7018203">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018207">//&nbsp;check&nbsp;that&nbsp;the&nbsp;lengths&nbsp;match</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7018240">if</span>&nbsp;<span class="builtinfunc" id="7018243">len</span><span class="op" id="7018246">(</span><span class="ident" id="7018247"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span><span class="op" id="7018250">)</span>&nbsp;<span class="op" id="7018252">!=</span>&nbsp;<span class="builtinfunc" id="7018255">len</span><span class="op" id="7018258">(</span><span class="ident" id="7018259"><a href="/index/suffixarray/suffixarray_test.go.html#7018176">exp</a></span><span class="op" id="7018262">)</span>&nbsp;<span class="op" id="7018264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018268"><a href="/index/suffixarray/suffixarray_test.go.html#7018087">t</a></span><span class="op" id="7018269">.</span><span class="ident" id="7018270">Errorf</span><span class="op" id="7018276">(</span><span class="string" id="7018277">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;expected&nbsp;%d&nbsp;results;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7018335">,</span>&nbsp;<span class="ident" id="7018337"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018339">.</span><span class="ident" id="7018340">name</span><span class="op" id="7018344">,</span>&nbsp;<span class="ident" id="7018346"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7018347">,</span>&nbsp;<span class="ident" id="7018349"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7018350">,</span>&nbsp;<span class="builtinfunc" id="7018352">len</span><span class="op" id="7018355">(</span><span class="ident" id="7018356"><a href="/index/suffixarray/suffixarray_test.go.html#7018176">exp</a></span><span class="op" id="7018359">)</span><span class="op" id="7018360">,</span>&nbsp;<span class="builtinfunc" id="7018362">len</span><span class="op" id="7018365">(</span><span class="ident" id="7018366"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span><span class="op" id="7018369">)</span><span class="op" id="7018370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7018373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018377">//&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0&nbsp;the&nbsp;number&nbsp;of&nbsp;results&nbsp;is&nbsp;limited&nbsp;---&nbsp;unless&nbsp;n&nbsp;&gt;=&nbsp;all&nbsp;results,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018453">//&nbsp;we&nbsp;may&nbsp;obtain&nbsp;different&nbsp;positions&nbsp;from&nbsp;the&nbsp;Index&nbsp;and&nbsp;from&nbsp;find&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018529">//&nbsp;Index&nbsp;may&nbsp;not&nbsp;find&nbsp;the&nbsp;results&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;find)&nbsp;=&gt;&nbsp;in&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018605">//&nbsp;we&nbsp;cannot&nbsp;simply&nbsp;check&nbsp;that&nbsp;the&nbsp;res&nbsp;and&nbsp;exp&nbsp;lists&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7018670">//&nbsp;check&nbsp;that&nbsp;each&nbsp;result&nbsp;is&nbsp;in&nbsp;fact&nbsp;a&nbsp;correct&nbsp;match&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;duplicates</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018752"><a href="/index/suffixarray/suffixarray_test.go.html#7016520">sort</a></span><span class="op" id="7018756">.</span><span class="ident" id="7018757">Ints</span><span class="op" id="7018761">(</span><span class="ident" id="7018762"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span><span class="op" id="7018765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7018768">for</span>&nbsp;<span class="ident" id="7018772">i</span><span class="op" id="7018773">,</span>&nbsp;<span class="ident" id="7018775">r</span>&nbsp;<span class="op" id="7018777">:=</span>&nbsp;<span class="keyword" id="7018780">range</span>&nbsp;<span class="ident" id="7018786"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span>&nbsp;<span class="op" id="7018790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7018794">if</span>&nbsp;<span class="ident" id="7018797"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span>&nbsp;<span class="op" id="7018799">&lt;</span>&nbsp;<span class="num" id="7018801">0</span>&nbsp;<span class="op" id="7018803">||</span>&nbsp;<span class="builtinfunc" id="7018806">len</span><span class="op" id="7018809">(</span><span class="ident" id="7018810"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018812">.</span><span class="ident" id="7018813">source</span><span class="op" id="7018819">)</span>&nbsp;<span class="op" id="7018821">&lt;=</span>&nbsp;<span class="ident" id="7018824"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span>&nbsp;<span class="op" id="7018826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7018831"><a href="/index/suffixarray/suffixarray_test.go.html#7018087">t</a></span><span class="op" id="7018832">.</span><span class="ident" id="7018833">Errorf</span><span class="op" id="7018839">(</span><span class="string" id="7018840">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;index&nbsp;%d&nbsp;out&nbsp;of&nbsp;range&nbsp;[0,&nbsp;%d[&#34;</span><span class="op" id="7018911">,</span>&nbsp;<span class="ident" id="7018913"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018915">.</span><span class="ident" id="7018916">name</span><span class="op" id="7018920">,</span>&nbsp;<span class="ident" id="7018922"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7018923">,</span>&nbsp;<span class="ident" id="7018925"><a href="/index/suffixarray/suffixarray_test.go.html#7018772">i</a></span><span class="op" id="7018926">,</span>&nbsp;<span class="ident" id="7018928"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7018929">,</span>&nbsp;<span class="ident" id="7018931"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span><span class="op" id="7018932">,</span>&nbsp;<span class="builtinfunc" id="7018934">len</span><span class="op" id="7018937">(</span><span class="ident" id="7018938"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018940">.</span><span class="ident" id="7018941">source</span><span class="op" id="7018947">)</span><span class="op" id="7018948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7018952">}</span>&nbsp;<span class="keyword" id="7018954">else</span>&nbsp;<span class="keyword" id="7018959">if</span>&nbsp;<span class="op" id="7018962">!</span><span class="ident" id="7018963"><a href="/index/suffixarray/suffixarray_test.go.html#7016528">strings</a></span><span class="op" id="7018970">.</span><span class="ident" id="7018971">HasPrefix</span><span class="op" id="7018980">(</span><span class="ident" id="7018981"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7018983">.</span><span class="ident" id="7018984">source</span><span class="op" id="7018990">[</span><span class="ident" id="7018991"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span><span class="op" id="7018992">:</span><span class="op" id="7018993">]</span><span class="op" id="7018994">,</span>&nbsp;<span class="ident" id="7018996"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7018997">)</span>&nbsp;<span class="op" id="7018999">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019004"><a href="/index/suffixarray/suffixarray_test.go.html#7018087">t</a></span><span class="op" id="7019005">.</span><span class="ident" id="7019006">Errorf</span><span class="op" id="7019012">(</span><span class="string" id="7019013">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;index&nbsp;%d&nbsp;not&nbsp;a&nbsp;match&#34;</span><span class="op" id="7019075">,</span>&nbsp;<span class="ident" id="7019077"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7019079">.</span><span class="ident" id="7019080">name</span><span class="op" id="7019084">,</span>&nbsp;<span class="ident" id="7019086"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7019087">,</span>&nbsp;<span class="ident" id="7019089"><a href="/index/suffixarray/suffixarray_test.go.html#7018772">i</a></span><span class="op" id="7019090">,</span>&nbsp;<span class="ident" id="7019092"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7019093">,</span>&nbsp;<span class="ident" id="7019095"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span><span class="op" id="7019096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7019104">if</span>&nbsp;<span class="ident" id="7019107"><a href="/index/suffixarray/suffixarray_test.go.html#7018772">i</a></span>&nbsp;<span class="op" id="7019109">&gt;</span>&nbsp;<span class="num" id="7019111">0</span>&nbsp;<span class="op" id="7019113">&amp;&amp;</span>&nbsp;<span class="ident" id="7019116"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span><span class="op" id="7019119">[</span><span class="ident" id="7019120"><a href="/index/suffixarray/suffixarray_test.go.html#7018772">i</a></span><span class="op" id="7019121">-</span><span class="num" id="7019122">1</span><span class="op" id="7019123">]</span>&nbsp;<span class="op" id="7019125">==</span>&nbsp;<span class="ident" id="7019128"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span>&nbsp;<span class="op" id="7019130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019135"><a href="/index/suffixarray/suffixarray_test.go.html#7018087">t</a></span><span class="op" id="7019136">.</span><span class="ident" id="7019137">Errorf</span><span class="op" id="7019143">(</span><span class="string" id="7019144">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;found&nbsp;duplicate&nbsp;index&nbsp;%d&#34;</span><span class="op" id="7019210">,</span>&nbsp;<span class="ident" id="7019212"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7019214">.</span><span class="ident" id="7019215">name</span><span class="op" id="7019219">,</span>&nbsp;<span class="ident" id="7019221"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7019222">,</span>&nbsp;<span class="ident" id="7019224"><a href="/index/suffixarray/suffixarray_test.go.html#7018772">i</a></span><span class="op" id="7019225">,</span>&nbsp;<span class="ident" id="7019227"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span><span class="op" id="7019228">,</span>&nbsp;<span class="ident" id="7019230"><a href="/index/suffixarray/suffixarray_test.go.html#7018775">r</a></span><span class="op" id="7019231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019235">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7019242">if</span>&nbsp;<span class="ident" id="7019245"><a href="/index/suffixarray/suffixarray_test.go.html#7018135">n</a></span>&nbsp;<span class="op" id="7019247">&lt;</span>&nbsp;<span class="num" id="7019249">0</span>&nbsp;<span class="op" id="7019251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7019255">//&nbsp;all&nbsp;results&nbsp;computed&nbsp;-&nbsp;sorted&nbsp;res&nbsp;and&nbsp;exp&nbsp;must&nbsp;be&nbsp;equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7019316">for</span>&nbsp;<span class="ident" id="7019320">i</span><span class="op" id="7019321">,</span>&nbsp;<span class="ident" id="7019323">r</span>&nbsp;<span class="op" id="7019325">:=</span>&nbsp;<span class="keyword" id="7019328">range</span>&nbsp;<span class="ident" id="7019334"><a href="/index/suffixarray/suffixarray_test.go.html#7018145">res</a></span>&nbsp;<span class="op" id="7019338">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019343">e</span>&nbsp;<span class="op" id="7019345">:=</span>&nbsp;<span class="ident" id="7019348"><a href="/index/suffixarray/suffixarray_test.go.html#7018176">exp</a></span><span class="op" id="7019351">[</span><span class="ident" id="7019352"><a href="/index/suffixarray/suffixarray_test.go.html#7019320">i</a></span><span class="op" id="7019353">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7019358">if</span>&nbsp;<span class="ident" id="7019361"><a href="/index/suffixarray/suffixarray_test.go.html#7019323">r</a></span>&nbsp;<span class="op" id="7019363">!=</span>&nbsp;<span class="ident" id="7019366"><a href="/index/suffixarray/suffixarray_test.go.html#7019343">e</a></span>&nbsp;<span class="op" id="7019368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019374"><a href="/index/suffixarray/suffixarray_test.go.html#7018087">t</a></span><span class="op" id="7019375">.</span><span class="ident" id="7019376">Errorf</span><span class="op" id="7019382">(</span><span class="string" id="7019383">&#34;test&nbsp;%q,&nbsp;lookup&nbsp;%q,&nbsp;result&nbsp;%d:&nbsp;expected&nbsp;index&nbsp;%d;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7019441">,</span>&nbsp;<span class="ident" id="7019443"><a href="/index/suffixarray/suffixarray_test.go.html#7018101">tc</a></span><span class="op" id="7019445">.</span><span class="ident" id="7019446">name</span><span class="op" id="7019450">,</span>&nbsp;<span class="ident" id="7019452"><a href="/index/suffixarray/suffixarray_test.go.html#7018125">s</a></span><span class="op" id="7019453">,</span>&nbsp;<span class="ident" id="7019455"><a href="/index/suffixarray/suffixarray_test.go.html#7019320">i</a></span><span class="op" id="7019456">,</span>&nbsp;<span class="ident" id="7019458"><a href="/index/suffixarray/suffixarray_test.go.html#7019343">e</a></span><span class="op" id="7019459">,</span>&nbsp;<span class="ident" id="7019461"><a href="/index/suffixarray/suffixarray_test.go.html#7019323">r</a></span><span class="op" id="7019462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019471">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019474">}</span><br>
<span class="lineno"></span><span class="op" id="7019476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7019479">func</span>&nbsp;<span class="ident" id="7019484">testFindAllIndex</span><span class="op" id="7019500">(</span><span class="ident" id="7019501">t</span>&nbsp;<span class="op" id="7019503">*</span><span class="ident" id="7019504"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7019511">.</span><span class="ident" id="7019512">T</span><span class="op" id="7019513">,</span>&nbsp;<span class="ident" id="7019515">tc</span>&nbsp;<span class="op" id="7019518">*</span><span class="ident" id="7019519"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7019527">,</span>&nbsp;<span class="ident" id="7019529">x</span>&nbsp;<span class="op" id="7019531">*</span><span class="ident" id="7019532"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7019537">,</span>&nbsp;<span class="ident" id="7019539">rx</span>&nbsp;<span class="op" id="7019542">*</span><span class="ident" id="7019543"><a href="/index/suffixarray/suffixarray_test.go.html#7016510">regexp</a></span><span class="op" id="7019549">.</span><span class="ident" id="7019550">Regexp</span><span class="op" id="7019556">,</span>&nbsp;<span class="ident" id="7019558">n</span>&nbsp;<span class="builtintype" id="7019560">int</span><span class="op" id="7019563">)</span>&nbsp;<span class="op" id="7019565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019568">res</span>&nbsp;<span class="op" id="7019572">:=</span>&nbsp;<span class="ident" id="7019575"><a href="/index/suffixarray/suffixarray_test.go.html#7019529">x</a></span><span class="op" id="7019576">.</span><span class="ident" id="7019577">FindAllIndex</span><span class="op" id="7019589">(</span><span class="ident" id="7019590"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7019592">,</span>&nbsp;<span class="ident" id="7019594"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span><span class="op" id="7019595">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019598">exp</span>&nbsp;<span class="op" id="7019602">:=</span>&nbsp;<span class="ident" id="7019605"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7019607">.</span><span class="ident" id="7019608">FindAllStringIndex</span><span class="op" id="7019626">(</span><span class="ident" id="7019627"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7019629">.</span><span class="ident" id="7019630">source</span><span class="op" id="7019636">,</span>&nbsp;<span class="ident" id="7019638"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span><span class="op" id="7019639">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7019643">//&nbsp;check&nbsp;that&nbsp;the&nbsp;lengths&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7019676">if</span>&nbsp;<span class="builtinfunc" id="7019679">len</span><span class="op" id="7019682">(</span><span class="ident" id="7019683"><a href="/index/suffixarray/suffixarray_test.go.html#7019568">res</a></span><span class="op" id="7019686">)</span>&nbsp;<span class="op" id="7019688">!=</span>&nbsp;<span class="builtinfunc" id="7019691">len</span><span class="op" id="7019694">(</span><span class="ident" id="7019695"><a href="/index/suffixarray/suffixarray_test.go.html#7019598">exp</a></span><span class="op" id="7019698">)</span>&nbsp;<span class="op" id="7019700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7019704"><a href="/index/suffixarray/suffixarray_test.go.html#7019501">t</a></span><span class="op" id="7019705">.</span><span class="ident" id="7019706">Errorf</span><span class="op" id="7019712">(</span><span class="string" id="7019713">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;expected&nbsp;%d&nbsp;results;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7019777">,</span>&nbsp;<span class="ident" id="7019779"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7019781">.</span><span class="ident" id="7019782">name</span><span class="op" id="7019786">,</span>&nbsp;<span class="ident" id="7019788"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7019790">,</span>&nbsp;<span class="ident" id="7019792"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span><span class="op" id="7019793">,</span>&nbsp;<span class="builtinfunc" id="7019795">len</span><span class="op" id="7019798">(</span><span class="ident" id="7019799"><a href="/index/suffixarray/suffixarray_test.go.html#7019598">exp</a></span><span class="op" id="7019802">)</span><span class="op" id="7019803">,</span>&nbsp;<span class="builtinfunc" id="7019805">len</span><span class="op" id="7019808">(</span><span class="ident" id="7019809"><a href="/index/suffixarray/suffixarray_test.go.html#7019568">res</a></span><span class="op" id="7019812">)</span><span class="op" id="7019813">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7019816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7019820">//&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0&nbsp;the&nbsp;number&nbsp;of&nbsp;results&nbsp;is&nbsp;limited&nbsp;---&nbsp;unless&nbsp;n&nbsp;&gt;=&nbsp;all&nbsp;results,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7019896">//&nbsp;we&nbsp;may&nbsp;obtain&nbsp;different&nbsp;positions&nbsp;from&nbsp;the&nbsp;Index&nbsp;and&nbsp;from&nbsp;regexp&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7019974">//&nbsp;Index&nbsp;may&nbsp;not&nbsp;find&nbsp;the&nbsp;results&nbsp;in&nbsp;the&nbsp;same&nbsp;order&nbsp;as&nbsp;regexp)&nbsp;=&gt;&nbsp;in&nbsp;general</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7020052">//&nbsp;we&nbsp;cannot&nbsp;simply&nbsp;check&nbsp;that&nbsp;the&nbsp;res&nbsp;and&nbsp;exp&nbsp;lists&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7020117">//&nbsp;check&nbsp;that&nbsp;each&nbsp;result&nbsp;is&nbsp;in&nbsp;fact&nbsp;a&nbsp;correct&nbsp;match&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;sorted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020196">for</span>&nbsp;<span class="ident" id="7020200">i</span><span class="op" id="7020201">,</span>&nbsp;<span class="ident" id="7020203">r</span>&nbsp;<span class="op" id="7020205">:=</span>&nbsp;<span class="keyword" id="7020208">range</span>&nbsp;<span class="ident" id="7020214"><a href="/index/suffixarray/suffixarray_test.go.html#7019568">res</a></span>&nbsp;<span class="op" id="7020218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020222">if</span>&nbsp;<span class="ident" id="7020225"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020226">[</span><span class="num" id="7020227">0</span><span class="op" id="7020228">]</span>&nbsp;<span class="op" id="7020230">&lt;</span>&nbsp;<span class="num" id="7020232">0</span>&nbsp;<span class="op" id="7020234">||</span>&nbsp;<span class="ident" id="7020237"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020238">[</span><span class="num" id="7020239">0</span><span class="op" id="7020240">]</span>&nbsp;<span class="op" id="7020242">&gt;</span>&nbsp;<span class="ident" id="7020244"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020245">[</span><span class="num" id="7020246">1</span><span class="op" id="7020247">]</span>&nbsp;<span class="op" id="7020249">||</span>&nbsp;<span class="builtinfunc" id="7020252">len</span><span class="op" id="7020255">(</span><span class="ident" id="7020256"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7020258">.</span><span class="ident" id="7020259">source</span><span class="op" id="7020265">)</span>&nbsp;<span class="op" id="7020267">&lt;</span>&nbsp;<span class="ident" id="7020269"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020270">[</span><span class="num" id="7020271">1</span><span class="op" id="7020272">]</span>&nbsp;<span class="op" id="7020274">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020279"><a href="/index/suffixarray/suffixarray_test.go.html#7019501">t</a></span><span class="op" id="7020280">.</span><span class="ident" id="7020281">Errorf</span><span class="op" id="7020287">(</span><span class="string" id="7020288">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;==&nbsp;%d):&nbsp;illegal&nbsp;match&nbsp;[%d,&nbsp;%d]&#34;</span><span class="op" id="7020359">,</span>&nbsp;<span class="ident" id="7020361"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7020363">.</span><span class="ident" id="7020364">name</span><span class="op" id="7020368">,</span>&nbsp;<span class="ident" id="7020370"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7020372">,</span>&nbsp;<span class="ident" id="7020374"><a href="/index/suffixarray/suffixarray_test.go.html#7020200">i</a></span><span class="op" id="7020375">,</span>&nbsp;<span class="ident" id="7020377"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span><span class="op" id="7020378">,</span>&nbsp;<span class="ident" id="7020380"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020381">[</span><span class="num" id="7020382">0</span><span class="op" id="7020383">]</span><span class="op" id="7020384">,</span>&nbsp;<span class="ident" id="7020386"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020387">[</span><span class="num" id="7020388">1</span><span class="op" id="7020389">]</span><span class="op" id="7020390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020394">}</span>&nbsp;<span class="keyword" id="7020396">else</span>&nbsp;<span class="keyword" id="7020401">if</span>&nbsp;<span class="op" id="7020404">!</span><span class="ident" id="7020405"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7020407">.</span><span class="ident" id="7020408">MatchString</span><span class="op" id="7020419">(</span><span class="ident" id="7020420"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7020422">.</span><span class="ident" id="7020423">source</span><span class="op" id="7020429">[</span><span class="ident" id="7020430"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020431">[</span><span class="num" id="7020432">0</span><span class="op" id="7020433">]</span><span class="op" id="7020434">:</span><span class="ident" id="7020435"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020436">[</span><span class="num" id="7020437">1</span><span class="op" id="7020438">]</span><span class="op" id="7020439">]</span><span class="op" id="7020440">)</span>&nbsp;<span class="op" id="7020442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020447"><a href="/index/suffixarray/suffixarray_test.go.html#7019501">t</a></span><span class="op" id="7020448">.</span><span class="ident" id="7020449">Errorf</span><span class="op" id="7020455">(</span><span class="string" id="7020456">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d&nbsp;(n&nbsp;=&nbsp;%d):&nbsp;[%d,&nbsp;%d]&nbsp;not&nbsp;a&nbsp;match&#34;</span><span class="op" id="7020524">,</span>&nbsp;<span class="ident" id="7020526"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7020528">.</span><span class="ident" id="7020529">name</span><span class="op" id="7020533">,</span>&nbsp;<span class="ident" id="7020535"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7020537">,</span>&nbsp;<span class="ident" id="7020539"><a href="/index/suffixarray/suffixarray_test.go.html#7020200">i</a></span><span class="op" id="7020540">,</span>&nbsp;<span class="ident" id="7020542"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span><span class="op" id="7020543">,</span>&nbsp;<span class="ident" id="7020545"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020546">[</span><span class="num" id="7020547">0</span><span class="op" id="7020548">]</span><span class="op" id="7020549">,</span>&nbsp;<span class="ident" id="7020551"><a href="/index/suffixarray/suffixarray_test.go.html#7020203">r</a></span><span class="op" id="7020552">[</span><span class="num" id="7020553">1</span><span class="op" id="7020554">]</span><span class="op" id="7020555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020562">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020566">if</span>&nbsp;<span class="ident" id="7020569"><a href="/index/suffixarray/suffixarray_test.go.html#7019558">n</a></span>&nbsp;<span class="op" id="7020571">&lt;</span>&nbsp;<span class="num" id="7020573">0</span>&nbsp;<span class="op" id="7020575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7020579">//&nbsp;all&nbsp;results&nbsp;computed&nbsp;-&nbsp;sorted&nbsp;res&nbsp;and&nbsp;exp&nbsp;must&nbsp;be&nbsp;equal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020640">for</span>&nbsp;<span class="ident" id="7020644">i</span><span class="op" id="7020645">,</span>&nbsp;<span class="ident" id="7020647">r</span>&nbsp;<span class="op" id="7020649">:=</span>&nbsp;<span class="keyword" id="7020652">range</span>&nbsp;<span class="ident" id="7020658"><a href="/index/suffixarray/suffixarray_test.go.html#7019568">res</a></span>&nbsp;<span class="op" id="7020662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020667">e</span>&nbsp;<span class="op" id="7020669">:=</span>&nbsp;<span class="ident" id="7020672"><a href="/index/suffixarray/suffixarray_test.go.html#7019598">exp</a></span><span class="op" id="7020675">[</span><span class="ident" id="7020676"><a href="/index/suffixarray/suffixarray_test.go.html#7020644">i</a></span><span class="op" id="7020677">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020682">if</span>&nbsp;<span class="ident" id="7020685"><a href="/index/suffixarray/suffixarray_test.go.html#7020647">r</a></span><span class="op" id="7020686">[</span><span class="num" id="7020687">0</span><span class="op" id="7020688">]</span>&nbsp;<span class="op" id="7020690">!=</span>&nbsp;<span class="ident" id="7020693"><a href="/index/suffixarray/suffixarray_test.go.html#7020667">e</a></span><span class="op" id="7020694">[</span><span class="num" id="7020695">0</span><span class="op" id="7020696">]</span>&nbsp;<span class="op" id="7020698">||</span>&nbsp;<span class="ident" id="7020701"><a href="/index/suffixarray/suffixarray_test.go.html#7020647">r</a></span><span class="op" id="7020702">[</span><span class="num" id="7020703">1</span><span class="op" id="7020704">]</span>&nbsp;<span class="op" id="7020706">!=</span>&nbsp;<span class="ident" id="7020709"><a href="/index/suffixarray/suffixarray_test.go.html#7020667">e</a></span><span class="op" id="7020710">[</span><span class="num" id="7020711">1</span><span class="op" id="7020712">]</span>&nbsp;<span class="op" id="7020714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020720"><a href="/index/suffixarray/suffixarray_test.go.html#7019501">t</a></span><span class="op" id="7020721">.</span><span class="ident" id="7020722">Errorf</span><span class="op" id="7020728">(</span><span class="string" id="7020729">&#34;test&nbsp;%q,&nbsp;FindAllIndex&nbsp;%q,&nbsp;result&nbsp;%d:&nbsp;expected&nbsp;match&nbsp;[%d,&nbsp;%d];&nbsp;got&nbsp;[%d,&nbsp;%d]&#34;</span><span class="op" id="7020805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020812"><a href="/index/suffixarray/suffixarray_test.go.html#7019515">tc</a></span><span class="op" id="7020814">.</span><span class="ident" id="7020815">name</span><span class="op" id="7020819">,</span>&nbsp;<span class="ident" id="7020821"><a href="/index/suffixarray/suffixarray_test.go.html#7019539">rx</a></span><span class="op" id="7020823">,</span>&nbsp;<span class="ident" id="7020825"><a href="/index/suffixarray/suffixarray_test.go.html#7020644">i</a></span><span class="op" id="7020826">,</span>&nbsp;<span class="ident" id="7020828"><a href="/index/suffixarray/suffixarray_test.go.html#7020667">e</a></span><span class="op" id="7020829">[</span><span class="num" id="7020830">0</span><span class="op" id="7020831">]</span><span class="op" id="7020832">,</span>&nbsp;<span class="ident" id="7020834"><a href="/index/suffixarray/suffixarray_test.go.html#7020667">e</a></span><span class="op" id="7020835">[</span><span class="num" id="7020836">1</span><span class="op" id="7020837">]</span><span class="op" id="7020838">,</span>&nbsp;<span class="ident" id="7020840"><a href="/index/suffixarray/suffixarray_test.go.html#7020647">r</a></span><span class="op" id="7020841">[</span><span class="num" id="7020842">0</span><span class="op" id="7020843">]</span><span class="op" id="7020844">,</span>&nbsp;<span class="ident" id="7020846"><a href="/index/suffixarray/suffixarray_test.go.html#7020647">r</a></span><span class="op" id="7020847">[</span><span class="num" id="7020848">1</span><span class="op" id="7020849">]</span><span class="op" id="7020850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020859">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7020862">}</span><br>
<span class="lineno"></span><span class="op" id="7020864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7020867">func</span>&nbsp;<span class="ident" id="7020872">testLookups</span><span class="op" id="7020883">(</span><span class="ident" id="7020884">t</span>&nbsp;<span class="op" id="7020886">*</span><span class="ident" id="7020887"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7020894">.</span><span class="ident" id="7020895">T</span><span class="op" id="7020896">,</span>&nbsp;<span class="ident" id="7020898">tc</span>&nbsp;<span class="op" id="7020901">*</span><span class="ident" id="7020902"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7020910">,</span>&nbsp;<span class="ident" id="7020912">x</span>&nbsp;<span class="op" id="7020914">*</span><span class="ident" id="7020915"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7020920">,</span>&nbsp;<span class="ident" id="7020922">n</span>&nbsp;<span class="builtintype" id="7020924">int</span><span class="op" id="7020927">)</span>&nbsp;<span class="op" id="7020929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020932">for</span>&nbsp;<span class="ident" id="7020936">_</span><span class="op" id="7020937">,</span>&nbsp;<span class="ident" id="7020939">pat</span>&nbsp;<span class="op" id="7020943">:=</span>&nbsp;<span class="keyword" id="7020946">range</span>&nbsp;<span class="ident" id="7020952"><a href="/index/suffixarray/suffixarray_test.go.html#7020898">tc</a></span><span class="op" id="7020954">.</span><span class="ident" id="7020955">patterns</span>&nbsp;<span class="op" id="7020964">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7020968"><a href="/index/suffixarray/suffixarray_test.go.html#7018076">testLookup</a></span><span class="op" id="7020978">(</span><span class="ident" id="7020979"><a href="/index/suffixarray/suffixarray_test.go.html#7020884">t</a></span><span class="op" id="7020980">,</span>&nbsp;<span class="ident" id="7020982"><a href="/index/suffixarray/suffixarray_test.go.html#7020898">tc</a></span><span class="op" id="7020984">,</span>&nbsp;<span class="ident" id="7020986"><a href="/index/suffixarray/suffixarray_test.go.html#7020912">x</a></span><span class="op" id="7020987">,</span>&nbsp;<span class="ident" id="7020989"><a href="/index/suffixarray/suffixarray_test.go.html#7020939">pat</a></span><span class="op" id="7020992">,</span>&nbsp;<span class="ident" id="7020994"><a href="/index/suffixarray/suffixarray_test.go.html#7020922">n</a></span><span class="op" id="7020995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7020999">if</span>&nbsp;<span class="ident" id="7021002">rx</span><span class="op" id="7021004">,</span>&nbsp;<span class="ident" id="7021006">err</span>&nbsp;<span class="op" id="7021010">:=</span>&nbsp;<span class="ident" id="7021013"><a href="/index/suffixarray/suffixarray_test.go.html#7016510">regexp</a></span><span class="op" id="7021019">.</span><span class="ident" id="7021020">Compile</span><span class="op" id="7021027">(</span><span class="ident" id="7021028"><a href="/index/suffixarray/suffixarray_test.go.html#7020939">pat</a></span><span class="op" id="7021031">)</span><span class="op" id="7021032">;</span>&nbsp;<span class="ident" id="7021034"><a href="/index/suffixarray/suffixarray_test.go.html#7021006">err</a></span>&nbsp;<span class="op" id="7021038">==</span>&nbsp;<span class="ident" id="7021041">nil</span>&nbsp;<span class="op" id="7021045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7021050"><a href="/index/suffixarray/suffixarray_test.go.html#7019484">testFindAllIndex</a></span><span class="op" id="7021066">(</span><span class="ident" id="7021067"><a href="/index/suffixarray/suffixarray_test.go.html#7020884">t</a></span><span class="op" id="7021068">,</span>&nbsp;<span class="ident" id="7021070"><a href="/index/suffixarray/suffixarray_test.go.html#7020898">tc</a></span><span class="op" id="7021072">,</span>&nbsp;<span class="ident" id="7021074"><a href="/index/suffixarray/suffixarray_test.go.html#7020912">x</a></span><span class="op" id="7021075">,</span>&nbsp;<span class="ident" id="7021077"><a href="/index/suffixarray/suffixarray_test.go.html#7021002">rx</a></span><span class="op" id="7021079">,</span>&nbsp;<span class="ident" id="7021081"><a href="/index/suffixarray/suffixarray_test.go.html#7020922">n</a></span><span class="op" id="7021082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021089">}</span><br>
<span class="lineno">205</span><span class="op" id="7021091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7021094">//&nbsp;index&nbsp;is&nbsp;used&nbsp;to&nbsp;hide&nbsp;the&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="keyword" id="7021138">type</span>&nbsp;<span class="ident" id="7021143">index</span>&nbsp;<span class="ident" id="7021149"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="7021156">func</span>&nbsp;<span class="op" id="7021161">(</span><span class="ident" id="7021162">x</span>&nbsp;<span class="op" id="7021164">*</span><span class="ident" id="7021165"><a href="/index/suffixarray/suffixarray_test.go.html#7021143">index</a></span><span class="op" id="7021170">)</span>&nbsp;<span class="ident" id="7021172">Len</span><span class="op" id="7021175">(</span><span class="op" id="7021176">)</span>&nbsp;<span class="builtintype" id="7021178">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021192">{</span>&nbsp;<span class="keyword" id="7021194">return</span>&nbsp;<span class="builtinfunc" id="7021201">len</span><span class="op" id="7021204">(</span><span class="ident" id="7021205"><a href="/index/suffixarray/suffixarray_test.go.html#7021162">x</a></span><span class="op" id="7021206">.</span><span class="ident" id="7021207">sa</span><span class="op" id="7021209">)</span>&nbsp;<span class="op" id="7021211">}</span><br>
<span class="lineno"></span><span class="keyword" id="7021213">func</span>&nbsp;<span class="op" id="7021218">(</span><span class="ident" id="7021219">x</span>&nbsp;<span class="op" id="7021221">*</span><span class="ident" id="7021222"><a href="/index/suffixarray/suffixarray_test.go.html#7021143">index</a></span><span class="op" id="7021227">)</span>&nbsp;<span class="ident" id="7021229">Less</span><span class="op" id="7021233">(</span><span class="ident" id="7021234">i</span><span class="op" id="7021235">,</span>&nbsp;<span class="ident" id="7021237">j</span>&nbsp;<span class="builtintype" id="7021239">int</span><span class="op" id="7021242">)</span>&nbsp;<span class="builtintype" id="7021244">bool</span>&nbsp;<span class="op" id="7021249">{</span>&nbsp;<span class="keyword" id="7021251">return</span>&nbsp;<span class="ident" id="7021258"><a href="/index/suffixarray/suffixarray_test.go.html#7016488">bytes</a></span><span class="op" id="7021263">.</span><span class="ident" id="7021264">Compare</span><span class="op" id="7021271">(</span><span class="ident" id="7021272"><a href="/index/suffixarray/suffixarray_test.go.html#7021219">x</a></span><span class="op" id="7021273">.</span><span class="ident" id="7021274">at</span><span class="op" id="7021276">(</span><span class="ident" id="7021277"><a href="/index/suffixarray/suffixarray_test.go.html#7021234">i</a></span><span class="op" id="7021278">)</span><span class="op" id="7021279">,</span>&nbsp;<span class="ident" id="7021281"><a href="/index/suffixarray/suffixarray_test.go.html#7021219">x</a></span><span class="op" id="7021282">.</span><span class="ident" id="7021283">at</span><span class="op" id="7021285">(</span><span class="ident" id="7021286"><a href="/index/suffixarray/suffixarray_test.go.html#7021237">j</a></span><span class="op" id="7021287">)</span><span class="op" id="7021288">)</span>&nbsp;<span class="op" id="7021290">&lt;</span>&nbsp;<span class="num" id="7021292">0</span>&nbsp;<span class="op" id="7021294">}</span><br>
<span class="lineno"></span><span class="keyword" id="7021296">func</span>&nbsp;<span class="op" id="7021301">(</span><span class="ident" id="7021302">x</span>&nbsp;<span class="op" id="7021304">*</span><span class="ident" id="7021305"><a href="/index/suffixarray/suffixarray_test.go.html#7021143">index</a></span><span class="op" id="7021310">)</span>&nbsp;<span class="ident" id="7021312">Swap</span><span class="op" id="7021316">(</span><span class="ident" id="7021317">i</span><span class="op" id="7021318">,</span>&nbsp;<span class="ident" id="7021320">j</span>&nbsp;<span class="builtintype" id="7021322">int</span><span class="op" id="7021325">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021332">{</span>&nbsp;<span class="ident" id="7021334"><a href="/index/suffixarray/suffixarray_test.go.html#7021302">x</a></span><span class="op" id="7021335">.</span><span class="ident" id="7021336">sa</span><span class="op" id="7021338">[</span><span class="ident" id="7021339"><a href="/index/suffixarray/suffixarray_test.go.html#7021317">i</a></span><span class="op" id="7021340">]</span><span class="op" id="7021341">,</span>&nbsp;<span class="ident" id="7021343"><a href="/index/suffixarray/suffixarray_test.go.html#7021302">x</a></span><span class="op" id="7021344">.</span><span class="ident" id="7021345">sa</span><span class="op" id="7021347">[</span><span class="ident" id="7021348"><a href="/index/suffixarray/suffixarray_test.go.html#7021320">j</a></span><span class="op" id="7021349">]</span>&nbsp;<span class="op" id="7021351">=</span>&nbsp;<span class="ident" id="7021353"><a href="/index/suffixarray/suffixarray_test.go.html#7021302">x</a></span><span class="op" id="7021354">.</span><span class="ident" id="7021355">sa</span><span class="op" id="7021357">[</span><span class="ident" id="7021358"><a href="/index/suffixarray/suffixarray_test.go.html#7021320">j</a></span><span class="op" id="7021359">]</span><span class="op" id="7021360">,</span>&nbsp;<span class="ident" id="7021362"><a href="/index/suffixarray/suffixarray_test.go.html#7021302">x</a></span><span class="op" id="7021363">.</span><span class="ident" id="7021364">sa</span><span class="op" id="7021366">[</span><span class="ident" id="7021367"><a href="/index/suffixarray/suffixarray_test.go.html#7021317">i</a></span><span class="op" id="7021368">]</span>&nbsp;<span class="op" id="7021370">}</span><br>
<span class="lineno"></span><span class="keyword" id="7021372">func</span>&nbsp;<span class="op" id="7021377">(</span><span class="ident" id="7021378">a</span>&nbsp;<span class="op" id="7021380">*</span><span class="ident" id="7021381"><a href="/index/suffixarray/suffixarray_test.go.html#7021143">index</a></span><span class="op" id="7021386">)</span>&nbsp;<span class="ident" id="7021388">at</span><span class="op" id="7021390">(</span><span class="ident" id="7021391">i</span>&nbsp;<span class="builtintype" id="7021393">int</span><span class="op" id="7021396">)</span>&nbsp;<span class="op" id="7021398">[</span><span class="op" id="7021399">]</span><span class="builtintype" id="7021400">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7021408">{</span>&nbsp;<span class="keyword" id="7021410">return</span>&nbsp;<span class="ident" id="7021417"><a href="/index/suffixarray/suffixarray_test.go.html#7021378">a</a></span><span class="op" id="7021418">.</span><span class="ident" id="7021419">data</span><span class="op" id="7021423">[</span><span class="ident" id="7021424"><a href="/index/suffixarray/suffixarray_test.go.html#7021378">a</a></span><span class="op" id="7021425">.</span><span class="ident" id="7021426">sa</span><span class="op" id="7021428">[</span><span class="ident" id="7021429"><a href="/index/suffixarray/suffixarray_test.go.html#7021391">i</a></span><span class="op" id="7021430">]</span><span class="op" id="7021431">:</span><span class="op" id="7021432">]</span>&nbsp;<span class="op" id="7021434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7021437">func</span>&nbsp;<span class="ident" id="7021442">testConstruction</span><span class="op" id="7021458">(</span><span class="ident" id="7021459">t</span>&nbsp;<span class="op" id="7021461">*</span><span class="ident" id="7021462"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7021469">.</span><span class="ident" id="7021470">T</span><span class="op" id="7021471">,</span>&nbsp;<span class="ident" id="7021473">tc</span>&nbsp;<span class="op" id="7021476">*</span><span class="ident" id="7021477"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7021485">,</span>&nbsp;<span class="ident" id="7021487">x</span>&nbsp;<span class="op" id="7021489">*</span><span class="ident" id="7021490"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7021495">)</span>&nbsp;<span class="op" id="7021497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021500">if</span>&nbsp;<span class="op" id="7021503">!</span><span class="ident" id="7021504"><a href="/index/suffixarray/suffixarray_test.go.html#7016520">sort</a></span><span class="op" id="7021508">.</span><span class="ident" id="7021509">IsSorted</span><span class="op" id="7021517">(</span><span class="op" id="7021518">(</span><span class="op" id="7021519">*</span><span class="ident" id="7021520"><a href="/index/suffixarray/suffixarray_test.go.html#7021143">index</a></span><span class="op" id="7021525">)</span><span class="op" id="7021526">(</span><span class="ident" id="7021527"><a href="/index/suffixarray/suffixarray_test.go.html#7021487">x</a></span><span class="op" id="7021528">)</span><span class="op" id="7021529">)</span>&nbsp;<span class="op" id="7021531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7021535"><a href="/index/suffixarray/suffixarray_test.go.html#7021459">t</a></span><span class="op" id="7021536">.</span><span class="ident" id="7021537">Errorf</span><span class="op" id="7021543">(</span><span class="string" id="7021544">&#34;failed&nbsp;testConstruction&nbsp;%s&#34;</span><span class="op" id="7021572">,</span>&nbsp;<span class="ident" id="7021574"><a href="/index/suffixarray/suffixarray_test.go.html#7021473">tc</a></span><span class="op" id="7021576">.</span><span class="ident" id="7021577">name</span><span class="op" id="7021581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021584">}</span><br>
<span class="lineno"></span><span class="op" id="7021586">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="7021589">func</span>&nbsp;<span class="ident" id="7021594">equal</span><span class="op" id="7021599">(</span><span class="ident" id="7021600">x</span><span class="op" id="7021601">,</span>&nbsp;<span class="ident" id="7021603">y</span>&nbsp;<span class="op" id="7021605">*</span><span class="ident" id="7021606"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7021611">)</span>&nbsp;<span class="builtintype" id="7021613">bool</span>&nbsp;<span class="op" id="7021618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021621">if</span>&nbsp;<span class="op" id="7021624">!</span><span class="ident" id="7021625"><a href="/index/suffixarray/suffixarray_test.go.html#7016488">bytes</a></span><span class="op" id="7021630">.</span><span class="ident" id="7021631">Equal</span><span class="op" id="7021636">(</span><span class="ident" id="7021637"><a href="/index/suffixarray/suffixarray_test.go.html#7021600">x</a></span><span class="op" id="7021638">.</span><span class="ident" id="7021639">data</span><span class="op" id="7021643">,</span>&nbsp;<span class="ident" id="7021645"><a href="/index/suffixarray/suffixarray_test.go.html#7021603">y</a></span><span class="op" id="7021646">.</span><span class="ident" id="7021647">data</span><span class="op" id="7021651">)</span>&nbsp;<span class="op" id="7021653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021657">return</span>&nbsp;<span class="ident" id="7021664">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021671">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021674">for</span>&nbsp;<span class="ident" id="7021678">i</span><span class="op" id="7021679">,</span>&nbsp;<span class="ident" id="7021681">j</span>&nbsp;<span class="op" id="7021683">:=</span>&nbsp;<span class="keyword" id="7021686">range</span>&nbsp;<span class="ident" id="7021692"><a href="/index/suffixarray/suffixarray_test.go.html#7021600">x</a></span><span class="op" id="7021693">.</span><span class="ident" id="7021694">sa</span>&nbsp;<span class="op" id="7021697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021701">if</span>&nbsp;<span class="ident" id="7021704"><a href="/index/suffixarray/suffixarray_test.go.html#7021681">j</a></span>&nbsp;<span class="op" id="7021706">!=</span>&nbsp;<span class="ident" id="7021709"><a href="/index/suffixarray/suffixarray_test.go.html#7021603">y</a></span><span class="op" id="7021710">.</span><span class="ident" id="7021711">sa</span><span class="op" id="7021713">[</span><span class="ident" id="7021714"><a href="/index/suffixarray/suffixarray_test.go.html#7021678">i</a></span><span class="op" id="7021715">]</span>&nbsp;<span class="op" id="7021717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021722">return</span>&nbsp;<span class="ident" id="7021729">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021740">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021743">return</span>&nbsp;<span class="ident" id="7021750">true</span><br>
<span class="lineno"></span><span class="op" id="7021755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7021758">//&nbsp;returns&nbsp;the&nbsp;serialized&nbsp;index&nbsp;size</span><br>
<span class="lineno"></span><span class="keyword" id="7021795">func</span>&nbsp;<span class="ident" id="7021800">testSaveRestore</span><span class="op" id="7021815">(</span><span class="ident" id="7021816">t</span>&nbsp;<span class="op" id="7021818">*</span><span class="ident" id="7021819"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7021826">.</span><span class="ident" id="7021827">T</span><span class="op" id="7021828">,</span>&nbsp;<span class="ident" id="7021830">tc</span>&nbsp;<span class="op" id="7021833">*</span><span class="ident" id="7021834"><a href="/index/suffixarray/suffixarray_test.go.html#7016557">testCase</a></span><span class="op" id="7021842">,</span>&nbsp;<span class="ident" id="7021844">x</span>&nbsp;<span class="op" id="7021846">*</span><span class="ident" id="7021847"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><span class="op" id="7021852">)</span>&nbsp;<span class="builtintype" id="7021854">int</span>&nbsp;<span class="op" id="7021858">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021861">var</span>&nbsp;<span class="ident" id="7021865">buf</span>&nbsp;<span class="ident" id="7021869"><a href="/index/suffixarray/suffixarray_test.go.html#7016488">bytes</a></span><span class="op" id="7021874">.</span><span class="ident" id="7021875">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7021883">if</span>&nbsp;<span class="ident" id="7021886">err</span>&nbsp;<span class="op" id="7021890">:=</span>&nbsp;<span class="ident" id="7021893"><a href="/index/suffixarray/suffixarray_test.go.html#7021844">x</a></span><span class="op" id="7021894">.</span><span class="ident" id="7021895">Write</span><span class="op" id="7021900">(</span><span class="op" id="7021901">&amp;</span><span class="ident" id="7021902"><a href="/index/suffixarray/suffixarray_test.go.html#7021865">buf</a></span><span class="op" id="7021905">)</span><span class="op" id="7021906">;</span>&nbsp;<span class="ident" id="7021908"><a href="/index/suffixarray/suffixarray_test.go.html#7021886">err</a></span>&nbsp;<span class="op" id="7021912">!=</span>&nbsp;<span class="ident" id="7021915">nil</span>&nbsp;<span class="op" id="7021919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7021923"><a href="/index/suffixarray/suffixarray_test.go.html#7021816">t</a></span><span class="op" id="7021924">.</span><span class="ident" id="7021925">Errorf</span><span class="op" id="7021931">(</span><span class="string" id="7021932">&#34;failed&nbsp;writing&nbsp;index&nbsp;%s&nbsp;(%s)&#34;</span><span class="op" id="7021962">,</span>&nbsp;<span class="ident" id="7021964"><a href="/index/suffixarray/suffixarray_test.go.html#7021830">tc</a></span><span class="op" id="7021966">.</span><span class="ident" id="7021967">name</span><span class="op" id="7021971">,</span>&nbsp;<span class="ident" id="7021973"><a href="/index/suffixarray/suffixarray_test.go.html#7021886">err</a></span><span class="op" id="7021976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7021979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7021982">size</span>&nbsp;<span class="op" id="7021987">:=</span>&nbsp;<span class="ident" id="7021990"><a href="/index/suffixarray/suffixarray_test.go.html#7021865">buf</a></span><span class="op" id="7021993">.</span><span class="ident" id="7021994">Len</span><span class="op" id="7021997">(</span><span class="op" id="7021998">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022001">var</span>&nbsp;<span class="ident" id="7022005">y</span>&nbsp;<span class="ident" id="7022007"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022014">if</span>&nbsp;<span class="ident" id="7022017">err</span>&nbsp;<span class="op" id="7022021">:=</span>&nbsp;<span class="ident" id="7022024"><a href="/index/suffixarray/suffixarray_test.go.html#7022005">y</a></span><span class="op" id="7022025">.</span><span class="ident" id="7022026">Read</span><span class="op" id="7022030">(</span><span class="op" id="7022031">&amp;</span><span class="ident" id="7022032"><a href="/index/suffixarray/suffixarray_test.go.html#7021865">buf</a></span><span class="op" id="7022035">)</span><span class="op" id="7022036">;</span>&nbsp;<span class="ident" id="7022038"><a href="/index/suffixarray/suffixarray_test.go.html#7022017">err</a></span>&nbsp;<span class="op" id="7022042">!=</span>&nbsp;<span class="ident" id="7022045">nil</span>&nbsp;<span class="op" id="7022049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022053"><a href="/index/suffixarray/suffixarray_test.go.html#7021816">t</a></span><span class="op" id="7022054">.</span><span class="ident" id="7022055">Errorf</span><span class="op" id="7022061">(</span><span class="string" id="7022062">&#34;failed&nbsp;reading&nbsp;index&nbsp;%s&nbsp;(%s)&#34;</span><span class="op" id="7022092">,</span>&nbsp;<span class="ident" id="7022094"><a href="/index/suffixarray/suffixarray_test.go.html#7021830">tc</a></span><span class="op" id="7022096">.</span><span class="ident" id="7022097">name</span><span class="op" id="7022101">,</span>&nbsp;<span class="ident" id="7022103"><a href="/index/suffixarray/suffixarray_test.go.html#7022017">err</a></span><span class="op" id="7022106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022112">if</span>&nbsp;<span class="op" id="7022115">!</span><span class="ident" id="7022116"><a href="/index/suffixarray/suffixarray_test.go.html#7021594">equal</a></span><span class="op" id="7022121">(</span><span class="ident" id="7022122"><a href="/index/suffixarray/suffixarray_test.go.html#7021844">x</a></span><span class="op" id="7022123">,</span>&nbsp;<span class="op" id="7022125">&amp;</span><span class="ident" id="7022126"><a href="/index/suffixarray/suffixarray_test.go.html#7022005">y</a></span><span class="op" id="7022127">)</span>&nbsp;<span class="op" id="7022129">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022133"><a href="/index/suffixarray/suffixarray_test.go.html#7021816">t</a></span><span class="op" id="7022134">.</span><span class="ident" id="7022135">Errorf</span><span class="op" id="7022141">(</span><span class="string" id="7022142">&#34;restored&nbsp;index&nbsp;doesn&#39;t&nbsp;match&nbsp;saved&nbsp;index&nbsp;%s&#34;</span><span class="op" id="7022187">,</span>&nbsp;<span class="ident" id="7022189"><a href="/index/suffixarray/suffixarray_test.go.html#7021830">tc</a></span><span class="op" id="7022191">.</span><span class="ident" id="7022192">name</span><span class="op" id="7022196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022202">return</span>&nbsp;<span class="ident" id="7022209"><a href="/index/suffixarray/suffixarray_test.go.html#7021982">size</a></span><br>
<span class="lineno"></span><span class="op" id="7022214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7022217">func</span>&nbsp;<span class="ident" id="7022222">TestIndex</span><span class="op" id="7022231">(</span><span class="ident" id="7022232">t</span>&nbsp;<span class="op" id="7022234">*</span><span class="ident" id="7022235"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7022242">.</span><span class="ident" id="7022243">T</span><span class="op" id="7022244">)</span>&nbsp;<span class="op" id="7022246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022249">for</span>&nbsp;<span class="ident" id="7022253">_</span><span class="op" id="7022254">,</span>&nbsp;<span class="ident" id="7022256">tc</span>&nbsp;<span class="op" id="7022259">:=</span>&nbsp;<span class="keyword" id="7022262">range</span>&nbsp;<span class="ident" id="7022268"><a href="/index/suffixarray/suffixarray_test.go.html#7016701">testCases</a></span>&nbsp;<span class="op" id="7022278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022282">x</span>&nbsp;<span class="op" id="7022284">:=</span>&nbsp;<span class="ident" id="7022287"><a href="/index/suffixarray/suffixarray.go.html#4662672">New</a></span><span class="op" id="7022290">(</span><span class="op" id="7022291">[</span><span class="op" id="7022292">]</span><span class="builtintype" id="7022293">byte</span><span class="op" id="7022297">(</span><span class="ident" id="7022298"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022300">.</span><span class="ident" id="7022301">source</span><span class="op" id="7022307">)</span><span class="op" id="7022308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022312"><a href="/index/suffixarray/suffixarray_test.go.html#7021442">testConstruction</a></span><span class="op" id="7022328">(</span><span class="ident" id="7022329"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022330">,</span>&nbsp;<span class="op" id="7022332">&amp;</span><span class="ident" id="7022333"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022335">,</span>&nbsp;<span class="ident" id="7022337"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022342"><a href="/index/suffixarray/suffixarray_test.go.html#7021800">testSaveRestore</a></span><span class="op" id="7022357">(</span><span class="ident" id="7022358"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022359">,</span>&nbsp;<span class="op" id="7022361">&amp;</span><span class="ident" id="7022362"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022364">,</span>&nbsp;<span class="ident" id="7022366"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022367">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022371"><a href="/index/suffixarray/suffixarray_test.go.html#7020872">testLookups</a></span><span class="op" id="7022382">(</span><span class="ident" id="7022383"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022384">,</span>&nbsp;<span class="op" id="7022386">&amp;</span><span class="ident" id="7022387"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022389">,</span>&nbsp;<span class="ident" id="7022391"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022392">,</span>&nbsp;<span class="num" id="7022394">0</span><span class="op" id="7022395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022399"><a href="/index/suffixarray/suffixarray_test.go.html#7020872">testLookups</a></span><span class="op" id="7022410">(</span><span class="ident" id="7022411"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022412">,</span>&nbsp;<span class="op" id="7022414">&amp;</span><span class="ident" id="7022415"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022417">,</span>&nbsp;<span class="ident" id="7022419"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022420">,</span>&nbsp;<span class="num" id="7022422">1</span><span class="op" id="7022423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022427"><a href="/index/suffixarray/suffixarray_test.go.html#7020872">testLookups</a></span><span class="op" id="7022438">(</span><span class="ident" id="7022439"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022440">,</span>&nbsp;<span class="op" id="7022442">&amp;</span><span class="ident" id="7022443"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022445">,</span>&nbsp;<span class="ident" id="7022447"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022448">,</span>&nbsp;<span class="num" id="7022450">10</span><span class="op" id="7022452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022456"><a href="/index/suffixarray/suffixarray_test.go.html#7020872">testLookups</a></span><span class="op" id="7022467">(</span><span class="ident" id="7022468"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022469">,</span>&nbsp;<span class="op" id="7022471">&amp;</span><span class="ident" id="7022472"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022474">,</span>&nbsp;<span class="ident" id="7022476"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022477">,</span>&nbsp;<span class="num" id="7022479">2e9</span><span class="op" id="7022482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022486"><a href="/index/suffixarray/suffixarray_test.go.html#7020872">testLookups</a></span><span class="op" id="7022497">(</span><span class="ident" id="7022498"><a href="/index/suffixarray/suffixarray_test.go.html#7022232">t</a></span><span class="op" id="7022499">,</span>&nbsp;<span class="op" id="7022501">&amp;</span><span class="ident" id="7022502"><a href="/index/suffixarray/suffixarray_test.go.html#7022256">tc</a></span><span class="op" id="7022504">,</span>&nbsp;<span class="ident" id="7022506"><a href="/index/suffixarray/suffixarray_test.go.html#7022282">x</a></span><span class="op" id="7022507">,</span>&nbsp;<span class="op" id="7022509">-</span><span class="num" id="7022510">1</span><span class="op" id="7022511">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022514">}</span><br>
<span class="lineno"></span><span class="op" id="7022516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7022519">//&nbsp;Of&nbsp;all&nbsp;possible&nbsp;inputs,&nbsp;the&nbsp;random&nbsp;bytes&nbsp;have&nbsp;the&nbsp;least&nbsp;amount&nbsp;of&nbsp;substring</span><br>
<span class="lineno"></span><span class="comment" id="7022598">//&nbsp;repetition,&nbsp;and&nbsp;the&nbsp;repeated&nbsp;bytes&nbsp;have&nbsp;the&nbsp;most.&nbsp;For&nbsp;most&nbsp;algorithms,</span><br>
<span class="lineno">265</span><span class="comment" id="7022672">//&nbsp;the&nbsp;running&nbsp;time&nbsp;of&nbsp;every&nbsp;input&nbsp;will&nbsp;be&nbsp;between&nbsp;these&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="7022734">func</span>&nbsp;<span class="ident" id="7022739">benchmarkNew</span><span class="op" id="7022751">(</span><span class="ident" id="7022752">b</span>&nbsp;<span class="op" id="7022754">*</span><span class="ident" id="7022755"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7022762">.</span><span class="ident" id="7022763">B</span><span class="op" id="7022764">,</span>&nbsp;<span class="ident" id="7022766">random</span>&nbsp;<span class="builtintype" id="7022773">bool</span><span class="op" id="7022777">)</span>&nbsp;<span class="op" id="7022779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022782"><a href="/index/suffixarray/suffixarray_test.go.html#7022752">b</a></span><span class="op" id="7022783">.</span><span class="ident" id="7022784">StopTimer</span><span class="op" id="7022793">(</span><span class="op" id="7022794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022797">data</span>&nbsp;<span class="op" id="7022802">:=</span>&nbsp;<span class="builtinfunc" id="7022805">make</span><span class="op" id="7022809">(</span><span class="op" id="7022810">[</span><span class="op" id="7022811">]</span><span class="builtintype" id="7022812">byte</span><span class="op" id="7022816">,</span>&nbsp;<span class="num" id="7022818">1e6</span><span class="op" id="7022821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022824">if</span>&nbsp;<span class="ident" id="7022827"><a href="/index/suffixarray/suffixarray_test.go.html#7022766">random</a></span>&nbsp;<span class="op" id="7022834">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022838">for</span>&nbsp;<span class="ident" id="7022842">i</span>&nbsp;<span class="op" id="7022844">:=</span>&nbsp;<span class="keyword" id="7022847">range</span>&nbsp;<span class="ident" id="7022853"><a href="/index/suffixarray/suffixarray_test.go.html#7022797">data</a></span>&nbsp;<span class="op" id="7022858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022863"><a href="/index/suffixarray/suffixarray_test.go.html#7022797">data</a></span><span class="op" id="7022867">[</span><span class="ident" id="7022868"><a href="/index/suffixarray/suffixarray_test.go.html#7022842">i</a></span><span class="op" id="7022869">]</span>&nbsp;<span class="op" id="7022871">=</span>&nbsp;<span class="builtintype" id="7022873">byte</span><span class="op" id="7022877">(</span><span class="ident" id="7022878"><a href="/index/suffixarray/suffixarray_test.go.html#7016497">rand</a></span><span class="op" id="7022882">.</span><span class="ident" id="7022883">Intn</span><span class="op" id="7022887">(</span><span class="num" id="7022888">256</span><span class="op" id="7022891">)</span><span class="op" id="7022892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022902"><a href="/index/suffixarray/suffixarray_test.go.html#7022752">b</a></span><span class="op" id="7022903">.</span><span class="ident" id="7022904">StartTimer</span><span class="op" id="7022914">(</span><span class="op" id="7022915">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7022918">for</span>&nbsp;<span class="ident" id="7022922">i</span>&nbsp;<span class="op" id="7022924">:=</span>&nbsp;<span class="num" id="7022927">0</span><span class="op" id="7022928">;</span>&nbsp;<span class="ident" id="7022930"><a href="/index/suffixarray/suffixarray_test.go.html#7022922">i</a></span>&nbsp;<span class="op" id="7022932">&lt;</span>&nbsp;<span class="ident" id="7022934"><a href="/index/suffixarray/suffixarray_test.go.html#7022752">b</a></span><span class="op" id="7022935">.</span><span class="ident" id="7022936">N</span><span class="op" id="7022937">;</span>&nbsp;<span class="ident" id="7022939"><a href="/index/suffixarray/suffixarray_test.go.html#7022922">i</a></span><span class="op" id="7022940">++</span>&nbsp;<span class="op" id="7022943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7022947"><a href="/index/suffixarray/suffixarray.go.html#4662672">New</a></span><span class="op" id="7022950">(</span><span class="ident" id="7022951"><a href="/index/suffixarray/suffixarray_test.go.html#7022797">data</a></span><span class="op" id="7022955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7022958">}</span><br>
<span class="lineno"></span><span class="op" id="7022960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="keyword" id="7022963">func</span>&nbsp;<span class="ident" id="7022968">BenchmarkNewIndexRandom</span><span class="op" id="7022991">(</span><span class="ident" id="7022992">b</span>&nbsp;<span class="op" id="7022994">*</span><span class="ident" id="7022995"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7023002">.</span><span class="ident" id="7023003">B</span><span class="op" id="7023004">)</span>&nbsp;<span class="op" id="7023006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023009"><a href="/index/suffixarray/suffixarray_test.go.html#7022739">benchmarkNew</a></span><span class="op" id="7023021">(</span><span class="ident" id="7023022"><a href="/index/suffixarray/suffixarray_test.go.html#7022992">b</a></span><span class="op" id="7023023">,</span>&nbsp;<span class="ident" id="7023025">true</span><span class="op" id="7023029">)</span><br>
<span class="lineno"></span><span class="op" id="7023031">}</span><br>
<span class="lineno"></span><span class="keyword" id="7023033">func</span>&nbsp;<span class="ident" id="7023038">BenchmarkNewIndexRepeat</span><span class="op" id="7023061">(</span><span class="ident" id="7023062">b</span>&nbsp;<span class="op" id="7023064">*</span><span class="ident" id="7023065"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7023072">.</span><span class="ident" id="7023073">B</span><span class="op" id="7023074">)</span>&nbsp;<span class="op" id="7023076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023079"><a href="/index/suffixarray/suffixarray_test.go.html#7022739">benchmarkNew</a></span><span class="op" id="7023091">(</span><span class="ident" id="7023092"><a href="/index/suffixarray/suffixarray_test.go.html#7023062">b</a></span><span class="op" id="7023093">,</span>&nbsp;<span class="ident" id="7023095">false</span><span class="op" id="7023100">)</span><br>
<span class="lineno">285</span><span class="op" id="7023102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7023105">func</span>&nbsp;<span class="ident" id="7023110">BenchmarkSaveRestore</span><span class="op" id="7023130">(</span><span class="ident" id="7023131">b</span>&nbsp;<span class="op" id="7023133">*</span><span class="ident" id="7023134"><a href="/index/suffixarray/suffixarray_test.go.html#7016539">testing</a></span><span class="op" id="7023141">.</span><span class="ident" id="7023142">B</span><span class="op" id="7023143">)</span>&nbsp;<span class="op" id="7023145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023148"><a href="/index/suffixarray/suffixarray_test.go.html#7023131">b</a></span><span class="op" id="7023149">.</span><span class="ident" id="7023150">StopTimer</span><span class="op" id="7023159">(</span><span class="op" id="7023160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023163">r</span>&nbsp;<span class="op" id="7023165">:=</span>&nbsp;<span class="ident" id="7023168"><a href="/index/suffixarray/suffixarray_test.go.html#7016497">rand</a></span><span class="op" id="7023172">.</span><span class="ident" id="7023173">New</span><span class="op" id="7023176">(</span><span class="ident" id="7023177"><a href="/index/suffixarray/suffixarray_test.go.html#7016497">rand</a></span><span class="op" id="7023181">.</span><span class="ident" id="7023182">NewSource</span><span class="op" id="7023191">(</span><span class="num" id="7023192">0x5a77a1</span><span class="op" id="7023200">)</span><span class="op" id="7023201">)</span>&nbsp;<span class="comment" id="7023203">//&nbsp;guarantee&nbsp;always&nbsp;same&nbsp;sequence</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023238">data</span>&nbsp;<span class="op" id="7023243">:=</span>&nbsp;<span class="builtinfunc" id="7023246">make</span><span class="op" id="7023250">(</span><span class="op" id="7023251">[</span><span class="op" id="7023252">]</span><span class="builtintype" id="7023253">byte</span><span class="op" id="7023257">,</span>&nbsp;<span class="num" id="7023259">1</span><span class="op" id="7023260">&lt;&lt;</span><span class="num" id="7023262">20</span><span class="op" id="7023264">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7023278">//&nbsp;1MB&nbsp;of&nbsp;data&nbsp;to&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7023303">for</span>&nbsp;<span class="ident" id="7023307">i</span>&nbsp;<span class="op" id="7023309">:=</span>&nbsp;<span class="keyword" id="7023312">range</span>&nbsp;<span class="ident" id="7023318"><a href="/index/suffixarray/suffixarray_test.go.html#7023238">data</a></span>&nbsp;<span class="op" id="7023323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023327"><a href="/index/suffixarray/suffixarray_test.go.html#7023238">data</a></span><span class="op" id="7023331">[</span><span class="ident" id="7023332"><a href="/index/suffixarray/suffixarray_test.go.html#7023307">i</a></span><span class="op" id="7023333">]</span>&nbsp;<span class="op" id="7023335">=</span>&nbsp;<span class="builtintype" id="7023337">byte</span><span class="op" id="7023341">(</span><span class="ident" id="7023342"><a href="/index/suffixarray/suffixarray_test.go.html#7023163">r</a></span><span class="op" id="7023343">.</span><span class="ident" id="7023344">Intn</span><span class="op" id="7023348">(</span><span class="num" id="7023349">256</span><span class="op" id="7023352">)</span><span class="op" id="7023353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7023356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023359">x</span>&nbsp;<span class="op" id="7023361">:=</span>&nbsp;<span class="ident" id="7023364"><a href="/index/suffixarray/suffixarray.go.html#4662672">New</a></span><span class="op" id="7023367">(</span><span class="ident" id="7023368"><a href="/index/suffixarray/suffixarray_test.go.html#7023238">data</a></span><span class="op" id="7023372">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023375">size</span>&nbsp;<span class="op" id="7023380">:=</span>&nbsp;<span class="ident" id="7023383"><a href="/index/suffixarray/suffixarray_test.go.html#7021800">testSaveRestore</a></span><span class="op" id="7023398">(</span><span class="ident" id="7023399">nil</span><span class="op" id="7023402">,</span>&nbsp;<span class="ident" id="7023404">nil</span><span class="op" id="7023407">,</span>&nbsp;<span class="ident" id="7023409"><a href="/index/suffixarray/suffixarray_test.go.html#7023359">x</a></span><span class="op" id="7023410">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7023418">//&nbsp;verify&nbsp;correctness</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023441">buf</span>&nbsp;<span class="op" id="7023445">:=</span>&nbsp;<span class="ident" id="7023448"><a href="/index/suffixarray/suffixarray_test.go.html#7016488">bytes</a></span><span class="op" id="7023453">.</span><span class="ident" id="7023454">NewBuffer</span><span class="op" id="7023463">(</span><span class="builtinfunc" id="7023464">make</span><span class="op" id="7023468">(</span><span class="op" id="7023469">[</span><span class="op" id="7023470">]</span><span class="builtintype" id="7023471">byte</span><span class="op" id="7023475">,</span>&nbsp;<span class="ident" id="7023477"><a href="/index/suffixarray/suffixarray_test.go.html#7023375">size</a></span><span class="op" id="7023481">)</span><span class="op" id="7023482">)</span>&nbsp;<span class="comment" id="7023484">//&nbsp;avoid&nbsp;growing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023502"><a href="/index/suffixarray/suffixarray_test.go.html#7023131">b</a></span><span class="op" id="7023503">.</span><span class="ident" id="7023504">SetBytes</span><span class="op" id="7023512">(</span><span class="ident" id="7023513">int64</span><span class="op" id="7023518">(</span><span class="ident" id="7023519"><a href="/index/suffixarray/suffixarray_test.go.html#7023375">size</a></span><span class="op" id="7023523">)</span><span class="op" id="7023524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023527"><a href="/index/suffixarray/suffixarray_test.go.html#7023131">b</a></span><span class="op" id="7023528">.</span><span class="ident" id="7023529">StartTimer</span><span class="op" id="7023539">(</span><span class="op" id="7023540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7023543">for</span>&nbsp;<span class="ident" id="7023547">i</span>&nbsp;<span class="op" id="7023549">:=</span>&nbsp;<span class="num" id="7023552">0</span><span class="op" id="7023553">;</span>&nbsp;<span class="ident" id="7023555"><a href="/index/suffixarray/suffixarray_test.go.html#7023547">i</a></span>&nbsp;<span class="op" id="7023557">&lt;</span>&nbsp;<span class="ident" id="7023559"><a href="/index/suffixarray/suffixarray_test.go.html#7023131">b</a></span><span class="op" id="7023560">.</span><span class="ident" id="7023561">N</span><span class="op" id="7023562">;</span>&nbsp;<span class="ident" id="7023564"><a href="/index/suffixarray/suffixarray_test.go.html#7023547">i</a></span><span class="op" id="7023565">++</span>&nbsp;<span class="op" id="7023568">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023572"><a href="/index/suffixarray/suffixarray_test.go.html#7023359">x</a></span><span class="op" id="7023573">.</span><span class="ident" id="7023574">Write</span><span class="op" id="7023579">(</span><span class="ident" id="7023580"><a href="/index/suffixarray/suffixarray_test.go.html#7023441">buf</a></span><span class="op" id="7023583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7023587">var</span>&nbsp;<span class="ident" id="7023591">y</span>&nbsp;<span class="ident" id="7023593"><a href="/index/suffixarray/suffixarray.go.html#4662483">Index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7023601"><a href="/index/suffixarray/suffixarray_test.go.html#7023591">y</a></span><span class="op" id="7023602">.</span><span class="ident" id="7023603">Read</span><span class="op" id="7023607">(</span><span class="ident" id="7023608"><a href="/index/suffixarray/suffixarray_test.go.html#7023441">buf</a></span><span class="op" id="7023611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7023614">}</span><br>
<span class="lineno"></span><span class="op" id="7023616">}</span>
</div>
</body>
</html>
