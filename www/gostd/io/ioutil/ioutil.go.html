<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3006762">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3006817">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3006871">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3006922">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3006979">package</span>&nbsp;<span class="ident" id="3006987">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3006995">import</span>&nbsp;<span class="op" id="3007002">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3007005">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3007014">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3007020">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3007026">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3007034">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3007041">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3007044">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3007119">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3007184">func</span>&nbsp;<span class="ident" id="3007189">readAll</span><span class="op" id="3007196">(</span><span class="ident" id="3007197">r</span>&nbsp;<span class="ident" id="3007199">io</span><span class="op" id="3007201">.</span><span class="ident" id="3007202">Reader</span><span class="op" id="3007208">,</span>&nbsp;<span class="ident" id="3007210">capacity</span>&nbsp;<span class="ident" id="3007219">int64</span><span class="op" id="3007224">)</span>&nbsp;<span class="op" id="3007226">(</span><span class="ident" id="3007227">b</span>&nbsp;<span class="op" id="3007229">[</span><span class="op" id="3007230">]</span><span class="builtintype" id="3007231">byte</span><span class="op" id="3007235">,</span>&nbsp;<span class="ident" id="3007237">err</span>&nbsp;<span class="builtintype" id="3007241">error</span><span class="op" id="3007246">)</span>&nbsp;<span class="op" id="3007248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007251">buf</span>&nbsp;<span class="op" id="3007255">:=</span>&nbsp;<span class="ident" id="3007258">bytes</span><span class="op" id="3007263">.</span><span class="ident" id="3007264">NewBuffer</span><span class="op" id="3007273">(</span><span class="builtinfunc" id="3007274">make</span><span class="op" id="3007278">(</span><span class="op" id="3007279">[</span><span class="op" id="3007280">]</span><span class="builtintype" id="3007281">byte</span><span class="op" id="3007285">,</span>&nbsp;<span class="num" id="3007287">0</span><span class="op" id="3007288">,</span>&nbsp;<span class="ident" id="3007290">capacity</span><span class="op" id="3007298">)</span><span class="op" id="3007299">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3007302">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3007362">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007416">defer</span>&nbsp;<span class="keyword" id="3007422">func</span><span class="op" id="3007426">(</span><span class="op" id="3007427">)</span>&nbsp;<span class="op" id="3007429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007433">e</span>&nbsp;<span class="op" id="3007435">:=</span>&nbsp;<span class="builtinfunc" id="3007438">recover</span><span class="op" id="3007445">(</span><span class="op" id="3007446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007450">if</span>&nbsp;<span class="ident" id="3007453">e</span>&nbsp;<span class="op" id="3007455">==</span>&nbsp;<span class="ident" id="3007458">nil</span>&nbsp;<span class="op" id="3007462">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007467">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007480">if</span>&nbsp;<span class="ident" id="3007483">panicErr</span><span class="op" id="3007491">,</span>&nbsp;<span class="ident" id="3007493">ok</span>&nbsp;<span class="op" id="3007496">:=</span>&nbsp;<span class="ident" id="3007499">e</span><span class="op" id="3007500">.</span><span class="op" id="3007501">(</span><span class="builtintype" id="3007502">error</span><span class="op" id="3007507">)</span><span class="op" id="3007508">;</span>&nbsp;<span class="ident" id="3007510">ok</span>&nbsp;<span class="op" id="3007513">&amp;&amp;</span>&nbsp;<span class="ident" id="3007516">panicErr</span>&nbsp;<span class="op" id="3007525">==</span>&nbsp;<span class="ident" id="3007528">bytes</span><span class="op" id="3007533">.</span><span class="ident" id="3007534">ErrTooLarge</span>&nbsp;<span class="op" id="3007546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007551">err</span>&nbsp;<span class="op" id="3007555">=</span>&nbsp;<span class="ident" id="3007557">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007568">}</span>&nbsp;<span class="keyword" id="3007570">else</span>&nbsp;<span class="op" id="3007575">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3007580">panic</span><span class="op" id="3007585">(</span><span class="ident" id="3007586">e</span><span class="op" id="3007587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3007594">}</span><span class="op" id="3007595">(</span><span class="op" id="3007596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3007599">_</span><span class="op" id="3007600">,</span>&nbsp;<span class="ident" id="3007602">err</span>&nbsp;<span class="op" id="3007606">=</span>&nbsp;<span class="ident" id="3007608">buf</span><span class="op" id="3007611">.</span><span class="ident" id="3007612">ReadFrom</span><span class="op" id="3007620">(</span><span class="ident" id="3007621">r</span><span class="op" id="3007622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007625">return</span>&nbsp;<span class="ident" id="3007632">buf</span><span class="op" id="3007635">.</span><span class="ident" id="3007636">Bytes</span><span class="op" id="3007641">(</span><span class="op" id="3007642">)</span><span class="op" id="3007643">,</span>&nbsp;<span class="ident" id="3007645">err</span><br>
<span class="lineno">35</span><span class="op" id="3007649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3007652">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3007728">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3007804">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3007878">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3007909">func</span>&nbsp;<span class="ident" id="3007914">ReadAll</span><span class="op" id="3007921">(</span><span class="ident" id="3007922">r</span>&nbsp;<span class="ident" id="3007924">io</span><span class="op" id="3007926">.</span><span class="ident" id="3007927">Reader</span><span class="op" id="3007933">)</span>&nbsp;<span class="op" id="3007935">(</span><span class="op" id="3007936">[</span><span class="op" id="3007937">]</span><span class="builtintype" id="3007938">byte</span><span class="op" id="3007942">,</span>&nbsp;<span class="builtintype" id="3007944">error</span><span class="op" id="3007949">)</span>&nbsp;<span class="op" id="3007951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3007954">return</span>&nbsp;<span class="ident" id="3007961">readAll</span><span class="op" id="3007968">(</span><span class="ident" id="3007969">r</span><span class="op" id="3007970">,</span>&nbsp;<span class="ident" id="3007972">bytes</span><span class="op" id="3007977">.</span><span class="ident" id="3007978">MinRead</span><span class="op" id="3007985">)</span><br>
<span class="lineno"></span><span class="op" id="3007987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3007990">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3008061">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3008135">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3008207">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3008226">func</span>&nbsp;<span class="ident" id="3008231">ReadFile</span><span class="op" id="3008239">(</span><span class="ident" id="3008240">filename</span>&nbsp;<span class="builtintype" id="3008249">string</span><span class="op" id="3008255">)</span>&nbsp;<span class="op" id="3008257">(</span><span class="op" id="3008258">[</span><span class="op" id="3008259">]</span><span class="builtintype" id="3008260">byte</span><span class="op" id="3008264">,</span>&nbsp;<span class="builtintype" id="3008266">error</span><span class="op" id="3008271">)</span>&nbsp;<span class="op" id="3008273">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3008276">f</span><span class="op" id="3008277">,</span>&nbsp;<span class="ident" id="3008279">err</span>&nbsp;<span class="op" id="3008283">:=</span>&nbsp;<span class="ident" id="3008286">os</span><span class="op" id="3008288">.</span><span class="ident" id="3008289">Open</span><span class="op" id="3008293">(</span><span class="ident" id="3008294">filename</span><span class="op" id="3008302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008305">if</span>&nbsp;<span class="ident" id="3008308">err</span>&nbsp;<span class="op" id="3008312">!=</span>&nbsp;<span class="ident" id="3008315">nil</span>&nbsp;<span class="op" id="3008319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008323">return</span>&nbsp;<span class="ident" id="3008330">nil</span><span class="op" id="3008333">,</span>&nbsp;<span class="ident" id="3008335">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3008340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008343">defer</span>&nbsp;<span class="ident" id="3008349">f</span><span class="op" id="3008350">.</span><span class="ident" id="3008351">Close</span><span class="op" id="3008356">(</span><span class="op" id="3008357">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008360">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008443">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008513">var</span>&nbsp;<span class="ident" id="3008517">n</span>&nbsp;<span class="ident" id="3008519">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008527">if</span>&nbsp;<span class="ident" id="3008530">fi</span><span class="op" id="3008532">,</span>&nbsp;<span class="ident" id="3008534">err</span>&nbsp;<span class="op" id="3008538">:=</span>&nbsp;<span class="ident" id="3008541">f</span><span class="op" id="3008542">.</span><span class="ident" id="3008543">Stat</span><span class="op" id="3008547">(</span><span class="op" id="3008548">)</span><span class="op" id="3008549">;</span>&nbsp;<span class="ident" id="3008551">err</span>&nbsp;<span class="op" id="3008555">==</span>&nbsp;<span class="ident" id="3008558">nil</span>&nbsp;<span class="op" id="3008562">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008566">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3008618">if</span>&nbsp;<span class="ident" id="3008621">size</span>&nbsp;<span class="op" id="3008626">:=</span>&nbsp;<span class="ident" id="3008629">fi</span><span class="op" id="3008631">.</span><span class="ident" id="3008632">Size</span><span class="op" id="3008636">(</span><span class="op" id="3008637">)</span><span class="op" id="3008638">;</span>&nbsp;<span class="ident" id="3008640">size</span>&nbsp;<span class="op" id="3008645">&lt;</span>&nbsp;<span class="num" id="3008647">1e9</span>&nbsp;<span class="op" id="3008651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3008656">n</span>&nbsp;<span class="op" id="3008658">=</span>&nbsp;<span class="ident" id="3008660">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3008667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3008670">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008673">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008755">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008838">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3008918">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3009000">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009063">return</span>&nbsp;<span class="ident" id="3009070">readAll</span><span class="op" id="3009077">(</span><span class="ident" id="3009078">f</span><span class="op" id="3009079">,</span>&nbsp;<span class="ident" id="3009081">n</span><span class="op" id="3009082">+</span><span class="ident" id="3009083">bytes</span><span class="op" id="3009088">.</span><span class="ident" id="3009089">MinRead</span><span class="op" id="3009096">)</span><br>
<span class="lineno"></span><span class="op" id="3009098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3009101">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3009155">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3009230">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3009282">func</span>&nbsp;<span class="ident" id="3009287">WriteFile</span><span class="op" id="3009296">(</span><span class="ident" id="3009297">filename</span>&nbsp;<span class="builtintype" id="3009306">string</span><span class="op" id="3009312">,</span>&nbsp;<span class="ident" id="3009314">data</span>&nbsp;<span class="op" id="3009319">[</span><span class="op" id="3009320">]</span><span class="builtintype" id="3009321">byte</span><span class="op" id="3009325">,</span>&nbsp;<span class="ident" id="3009327">perm</span>&nbsp;<span class="ident" id="3009332">os</span><span class="op" id="3009334">.</span><span class="ident" id="3009335">FileMode</span><span class="op" id="3009343">)</span>&nbsp;<span class="builtintype" id="3009345">error</span>&nbsp;<span class="op" id="3009351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009354">f</span><span class="op" id="3009355">,</span>&nbsp;<span class="ident" id="3009357">err</span>&nbsp;<span class="op" id="3009361">:=</span>&nbsp;<span class="ident" id="3009364">os</span><span class="op" id="3009366">.</span><span class="ident" id="3009367">OpenFile</span><span class="op" id="3009375">(</span><span class="ident" id="3009376">filename</span><span class="op" id="3009384">,</span>&nbsp;<span class="ident" id="3009386">os</span><span class="op" id="3009388">.</span><span class="ident" id="3009389">O_WRONLY</span><span class="op" id="3009397">|</span><span class="ident" id="3009398">os</span><span class="op" id="3009400">.</span><span class="ident" id="3009401">O_CREATE</span><span class="op" id="3009409">|</span><span class="ident" id="3009410">os</span><span class="op" id="3009412">.</span><span class="ident" id="3009413">O_TRUNC</span><span class="op" id="3009420">,</span>&nbsp;<span class="ident" id="3009422">perm</span><span class="op" id="3009426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009429">if</span>&nbsp;<span class="ident" id="3009432">err</span>&nbsp;<span class="op" id="3009436">!=</span>&nbsp;<span class="ident" id="3009439">nil</span>&nbsp;<span class="op" id="3009443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009447">return</span>&nbsp;<span class="ident" id="3009454">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009462">n</span><span class="op" id="3009463">,</span>&nbsp;<span class="ident" id="3009465">err</span>&nbsp;<span class="op" id="3009469">:=</span>&nbsp;<span class="ident" id="3009472">f</span><span class="op" id="3009473">.</span><span class="ident" id="3009474">Write</span><span class="op" id="3009479">(</span><span class="ident" id="3009480">data</span><span class="op" id="3009484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009487">if</span>&nbsp;<span class="ident" id="3009490">err</span>&nbsp;<span class="op" id="3009494">==</span>&nbsp;<span class="ident" id="3009497">nil</span>&nbsp;<span class="op" id="3009501">&amp;&amp;</span>&nbsp;<span class="ident" id="3009504">n</span>&nbsp;<span class="op" id="3009506">&lt;</span>&nbsp;<span class="builtinfunc" id="3009508">len</span><span class="op" id="3009511">(</span><span class="ident" id="3009512">data</span><span class="op" id="3009516">)</span>&nbsp;<span class="op" id="3009518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009522">err</span>&nbsp;<span class="op" id="3009526">=</span>&nbsp;<span class="ident" id="3009528">io</span><span class="op" id="3009530">.</span><span class="ident" id="3009531">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009546">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009549">if</span>&nbsp;<span class="ident" id="3009552">err1</span>&nbsp;<span class="op" id="3009557">:=</span>&nbsp;<span class="ident" id="3009560">f</span><span class="op" id="3009561">.</span><span class="ident" id="3009562">Close</span><span class="op" id="3009567">(</span><span class="op" id="3009568">)</span><span class="op" id="3009569">;</span>&nbsp;<span class="ident" id="3009571">err</span>&nbsp;<span class="op" id="3009575">==</span>&nbsp;<span class="ident" id="3009578">nil</span>&nbsp;<span class="op" id="3009582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3009586">err</span>&nbsp;<span class="op" id="3009590">=</span>&nbsp;<span class="ident" id="3009592">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3009598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3009601">return</span>&nbsp;<span class="ident" id="3009608">err</span><br>
<span class="lineno"></span><span class="op" id="3009612">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3009615">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3009652">type</span>&nbsp;<span class="ident" id="3009657">byName</span>&nbsp;<span class="op" id="3009664">[</span><span class="op" id="3009665">]</span><span class="ident" id="3009666">os</span><span class="op" id="3009668">.</span><span class="ident" id="3009669">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3009679">func</span>&nbsp;<span class="op" id="3009684">(</span><span class="ident" id="3009685">f</span>&nbsp;<span class="ident" id="3009687">byName</span><span class="op" id="3009693">)</span>&nbsp;<span class="ident" id="3009695">Len</span><span class="op" id="3009698">(</span><span class="op" id="3009699">)</span>&nbsp;<span class="builtintype" id="3009701">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3009715">{</span>&nbsp;<span class="keyword" id="3009717">return</span>&nbsp;<span class="builtinfunc" id="3009724">len</span><span class="op" id="3009727">(</span><span class="ident" id="3009728">f</span><span class="op" id="3009729">)</span>&nbsp;<span class="op" id="3009731">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3009733">func</span>&nbsp;<span class="op" id="3009738">(</span><span class="ident" id="3009739">f</span>&nbsp;<span class="ident" id="3009741">byName</span><span class="op" id="3009747">)</span>&nbsp;<span class="ident" id="3009749">Less</span><span class="op" id="3009753">(</span><span class="ident" id="3009754">i</span><span class="op" id="3009755">,</span>&nbsp;<span class="ident" id="3009757">j</span>&nbsp;<span class="builtintype" id="3009759">int</span><span class="op" id="3009762">)</span>&nbsp;<span class="builtintype" id="3009764">bool</span>&nbsp;<span class="op" id="3009769">{</span>&nbsp;<span class="keyword" id="3009771">return</span>&nbsp;<span class="ident" id="3009778">f</span><span class="op" id="3009779">[</span><span class="ident" id="3009780">i</span><span class="op" id="3009781">]</span><span class="op" id="3009782">.</span><span class="ident" id="3009783">Name</span><span class="op" id="3009787">(</span><span class="op" id="3009788">)</span>&nbsp;<span class="op" id="3009790">&lt;</span>&nbsp;<span class="ident" id="3009792">f</span><span class="op" id="3009793">[</span><span class="ident" id="3009794">j</span><span class="op" id="3009795">]</span><span class="op" id="3009796">.</span><span class="ident" id="3009797">Name</span><span class="op" id="3009801">(</span><span class="op" id="3009802">)</span>&nbsp;<span class="op" id="3009804">}</span><br>
<span class="lineno"></span><span class="keyword" id="3009806">func</span>&nbsp;<span class="op" id="3009811">(</span><span class="ident" id="3009812">f</span>&nbsp;<span class="ident" id="3009814">byName</span><span class="op" id="3009820">)</span>&nbsp;<span class="ident" id="3009822">Swap</span><span class="op" id="3009826">(</span><span class="ident" id="3009827">i</span><span class="op" id="3009828">,</span>&nbsp;<span class="ident" id="3009830">j</span>&nbsp;<span class="builtintype" id="3009832">int</span><span class="op" id="3009835">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3009842">{</span>&nbsp;<span class="ident" id="3009844">f</span><span class="op" id="3009845">[</span><span class="ident" id="3009846">i</span><span class="op" id="3009847">]</span><span class="op" id="3009848">,</span>&nbsp;<span class="ident" id="3009850">f</span><span class="op" id="3009851">[</span><span class="ident" id="3009852">j</span><span class="op" id="3009853">]</span>&nbsp;<span class="op" id="3009855">=</span>&nbsp;<span class="ident" id="3009857">f</span><span class="op" id="3009858">[</span><span class="ident" id="3009859">j</span><span class="op" id="3009860">]</span><span class="op" id="3009861">,</span>&nbsp;<span class="ident" id="3009863">f</span><span class="op" id="3009864">[</span><span class="ident" id="3009865">i</span><span class="op" id="3009866">]</span>&nbsp;<span class="op" id="3009868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3009871">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3009931">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3009970">func</span>&nbsp;<span class="ident" id="3009975">ReadDir</span><span class="op" id="3009982">(</span><span class="ident" id="3009983">dirname</span>&nbsp;<span class="builtintype" id="3009991">string</span><span class="op" id="3009997">)</span>&nbsp;<span class="op" id="3009999">(</span><span class="op" id="3010000">[</span><span class="op" id="3010001">]</span><span class="ident" id="3010002">os</span><span class="op" id="3010004">.</span><span class="ident" id="3010005">FileInfo</span><span class="op" id="3010013">,</span>&nbsp;<span class="builtintype" id="3010015">error</span><span class="op" id="3010020">)</span>&nbsp;<span class="op" id="3010022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010025">f</span><span class="op" id="3010026">,</span>&nbsp;<span class="ident" id="3010028">err</span>&nbsp;<span class="op" id="3010032">:=</span>&nbsp;<span class="ident" id="3010035">os</span><span class="op" id="3010037">.</span><span class="ident" id="3010038">Open</span><span class="op" id="3010042">(</span><span class="ident" id="3010043">dirname</span><span class="op" id="3010050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010053">if</span>&nbsp;<span class="ident" id="3010056">err</span>&nbsp;<span class="op" id="3010060">!=</span>&nbsp;<span class="ident" id="3010063">nil</span>&nbsp;<span class="op" id="3010067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010071">return</span>&nbsp;<span class="ident" id="3010078">nil</span><span class="op" id="3010081">,</span>&nbsp;<span class="ident" id="3010083">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010088">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010091">list</span><span class="op" id="3010095">,</span>&nbsp;<span class="ident" id="3010097">err</span>&nbsp;<span class="op" id="3010101">:=</span>&nbsp;<span class="ident" id="3010104">f</span><span class="op" id="3010105">.</span><span class="ident" id="3010106">Readdir</span><span class="op" id="3010113">(</span><span class="op" id="3010114">-</span><span class="num" id="3010115">1</span><span class="op" id="3010116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010119">f</span><span class="op" id="3010120">.</span><span class="ident" id="3010121">Close</span><span class="op" id="3010126">(</span><span class="op" id="3010127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010130">if</span>&nbsp;<span class="ident" id="3010133">err</span>&nbsp;<span class="op" id="3010137">!=</span>&nbsp;<span class="ident" id="3010140">nil</span>&nbsp;<span class="op" id="3010144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010148">return</span>&nbsp;<span class="ident" id="3010155">nil</span><span class="op" id="3010158">,</span>&nbsp;<span class="ident" id="3010160">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010165">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010168">sort</span><span class="op" id="3010172">.</span><span class="ident" id="3010173">Sort</span><span class="op" id="3010177">(</span><span class="ident" id="3010178">byName</span><span class="op" id="3010184">(</span><span class="ident" id="3010185">list</span><span class="op" id="3010189">)</span><span class="op" id="3010190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010193">return</span>&nbsp;<span class="ident" id="3010200">list</span><span class="op" id="3010204">,</span>&nbsp;<span class="ident" id="3010206">nil</span><br>
<span class="lineno"></span><span class="op" id="3010210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3010213">type</span>&nbsp;<span class="ident" id="3010218">nopCloser</span>&nbsp;<span class="keyword" id="3010228">struct</span>&nbsp;<span class="op" id="3010235">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010238">io</span><span class="op" id="3010240">.</span><span class="ident" id="3010241">Reader</span><br>
<span class="lineno"></span><span class="op" id="3010248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3010251">func</span>&nbsp;<span class="op" id="3010256">(</span><span class="ident" id="3010257">nopCloser</span><span class="op" id="3010266">)</span>&nbsp;<span class="ident" id="3010268">Close</span><span class="op" id="3010273">(</span><span class="op" id="3010274">)</span>&nbsp;<span class="builtintype" id="3010276">error</span>&nbsp;<span class="op" id="3010282">{</span>&nbsp;<span class="keyword" id="3010284">return</span>&nbsp;<span class="ident" id="3010291">nil</span>&nbsp;<span class="op" id="3010295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3010298">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3010367">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3010393">func</span>&nbsp;<span class="ident" id="3010398">NopCloser</span><span class="op" id="3010407">(</span><span class="ident" id="3010408">r</span>&nbsp;<span class="ident" id="3010410">io</span><span class="op" id="3010412">.</span><span class="ident" id="3010413">Reader</span><span class="op" id="3010419">)</span>&nbsp;<span class="ident" id="3010421">io</span><span class="op" id="3010423">.</span><span class="ident" id="3010424">ReadCloser</span>&nbsp;<span class="op" id="3010435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010438">return</span>&nbsp;<span class="ident" id="3010445">nopCloser</span><span class="op" id="3010454">{</span><span class="ident" id="3010455">r</span><span class="op" id="3010456">}</span><br>
<span class="lineno"></span><span class="op" id="3010458">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3010461">type</span>&nbsp;<span class="ident" id="3010466">devNull</span>&nbsp;<span class="builtintype" id="3010474">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3010479">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3010545">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3010597">var</span>&nbsp;<span class="ident" id="3010601">_</span>&nbsp;<span class="ident" id="3010603">io</span><span class="op" id="3010605">.</span><span class="ident" id="3010606">ReaderFrom</span>&nbsp;<span class="op" id="3010617">=</span>&nbsp;<span class="ident" id="3010619">devNull</span><span class="op" id="3010626">(</span><span class="num" id="3010627">0</span><span class="op" id="3010628">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3010631">func</span>&nbsp;<span class="op" id="3010636">(</span><span class="ident" id="3010637">devNull</span><span class="op" id="3010644">)</span>&nbsp;<span class="ident" id="3010646">Write</span><span class="op" id="3010651">(</span><span class="ident" id="3010652">p</span>&nbsp;<span class="op" id="3010654">[</span><span class="op" id="3010655">]</span><span class="builtintype" id="3010656">byte</span><span class="op" id="3010660">)</span>&nbsp;<span class="op" id="3010662">(</span><span class="builtintype" id="3010663">int</span><span class="op" id="3010666">,</span>&nbsp;<span class="builtintype" id="3010668">error</span><span class="op" id="3010673">)</span>&nbsp;<span class="op" id="3010675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010678">return</span>&nbsp;<span class="builtinfunc" id="3010685">len</span><span class="op" id="3010688">(</span><span class="ident" id="3010689">p</span><span class="op" id="3010690">)</span><span class="op" id="3010691">,</span>&nbsp;<span class="ident" id="3010693">nil</span><br>
<span class="lineno"></span><span class="op" id="3010697">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3010700">func</span>&nbsp;<span class="op" id="3010705">(</span><span class="ident" id="3010706">devNull</span><span class="op" id="3010713">)</span>&nbsp;<span class="ident" id="3010715">WriteString</span><span class="op" id="3010726">(</span><span class="ident" id="3010727">s</span>&nbsp;<span class="builtintype" id="3010729">string</span><span class="op" id="3010735">)</span>&nbsp;<span class="op" id="3010737">(</span><span class="builtintype" id="3010738">int</span><span class="op" id="3010741">,</span>&nbsp;<span class="builtintype" id="3010743">error</span><span class="op" id="3010748">)</span>&nbsp;<span class="op" id="3010750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010753">return</span>&nbsp;<span class="builtinfunc" id="3010760">len</span><span class="op" id="3010763">(</span><span class="ident" id="3010764">s</span><span class="op" id="3010765">)</span><span class="op" id="3010766">,</span>&nbsp;<span class="ident" id="3010768">nil</span><br>
<span class="lineno"></span><span class="op" id="3010772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3010775">var</span>&nbsp;<span class="ident" id="3010779">blackHolePool</span>&nbsp;<span class="op" id="3010793">=</span>&nbsp;<span class="ident" id="3010795">sync</span><span class="op" id="3010799">.</span><span class="ident" id="3010800">Pool</span><span class="op" id="3010804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010807">New</span><span class="op" id="3010810">:</span>&nbsp;<span class="keyword" id="3010812">func</span><span class="op" id="3010816">(</span><span class="op" id="3010817">)</span>&nbsp;<span class="keyword" id="3010819">interface</span><span class="op" id="3010828">{</span><span class="op" id="3010829">}</span>&nbsp;<span class="op" id="3010831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010835">b</span>&nbsp;<span class="op" id="3010837">:=</span>&nbsp;<span class="builtinfunc" id="3010840">make</span><span class="op" id="3010844">(</span><span class="op" id="3010845">[</span><span class="op" id="3010846">]</span><span class="builtintype" id="3010847">byte</span><span class="op" id="3010851">,</span>&nbsp;<span class="num" id="3010853">8192</span><span class="op" id="3010857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010861">return</span>&nbsp;<span class="op" id="3010868">&amp;</span><span class="ident" id="3010869">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3010872">}</span><span class="op" id="3010873">,</span><br>
<span class="lineno">145</span><span class="op" id="3010875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3010878">func</span>&nbsp;<span class="op" id="3010883">(</span><span class="ident" id="3010884">devNull</span><span class="op" id="3010891">)</span>&nbsp;<span class="ident" id="3010893">ReadFrom</span><span class="op" id="3010901">(</span><span class="ident" id="3010902">r</span>&nbsp;<span class="ident" id="3010904">io</span><span class="op" id="3010906">.</span><span class="ident" id="3010907">Reader</span><span class="op" id="3010913">)</span>&nbsp;<span class="op" id="3010915">(</span><span class="ident" id="3010916">n</span>&nbsp;<span class="ident" id="3010918">int64</span><span class="op" id="3010923">,</span>&nbsp;<span class="ident" id="3010925">err</span>&nbsp;<span class="builtintype" id="3010929">error</span><span class="op" id="3010934">)</span>&nbsp;<span class="op" id="3010936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010939">bufp</span>&nbsp;<span class="op" id="3010944">:=</span>&nbsp;<span class="ident" id="3010947">blackHolePool</span><span class="op" id="3010960">.</span><span class="ident" id="3010961">Get</span><span class="op" id="3010964">(</span><span class="op" id="3010965">)</span><span class="op" id="3010966">.</span><span class="op" id="3010967">(</span><span class="op" id="3010968">*</span><span class="op" id="3010969">[</span><span class="op" id="3010970">]</span><span class="builtintype" id="3010971">byte</span><span class="op" id="3010975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3010978">readSize</span>&nbsp;<span class="op" id="3010987">:=</span>&nbsp;<span class="num" id="3010990">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3010993">for</span>&nbsp;<span class="op" id="3010997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011001">readSize</span><span class="op" id="3011009">,</span>&nbsp;<span class="ident" id="3011011">err</span>&nbsp;<span class="op" id="3011015">=</span>&nbsp;<span class="ident" id="3011017">r</span><span class="op" id="3011018">.</span><span class="ident" id="3011019">Read</span><span class="op" id="3011023">(</span><span class="op" id="3011024">*</span><span class="ident" id="3011025">bufp</span><span class="op" id="3011029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011033">n</span>&nbsp;<span class="op" id="3011035">+=</span>&nbsp;<span class="ident" id="3011038">int64</span><span class="op" id="3011043">(</span><span class="ident" id="3011044">readSize</span><span class="op" id="3011052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011056">if</span>&nbsp;<span class="ident" id="3011059">err</span>&nbsp;<span class="op" id="3011063">!=</span>&nbsp;<span class="ident" id="3011066">nil</span>&nbsp;<span class="op" id="3011070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3011075">blackHolePool</span><span class="op" id="3011088">.</span><span class="ident" id="3011089">Put</span><span class="op" id="3011092">(</span><span class="ident" id="3011093">bufp</span><span class="op" id="3011097">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011102">if</span>&nbsp;<span class="ident" id="3011105">err</span>&nbsp;<span class="op" id="3011109">==</span>&nbsp;<span class="ident" id="3011112">io</span><span class="op" id="3011114">.</span><span class="ident" id="3011115">EOF</span>&nbsp;<span class="op" id="3011119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011125">return</span>&nbsp;<span class="ident" id="3011132">n</span><span class="op" id="3011133">,</span>&nbsp;<span class="ident" id="3011135">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3011147">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011156">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3011159">}</span><br>
<span class="lineno"></span><span class="op" id="3011161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3011164">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3011224">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3011251">var</span>&nbsp;<span class="ident" id="3011255">Discard</span>&nbsp;<span class="ident" id="3011263">io</span><span class="op" id="3011265">.</span><span class="ident" id="3011266">Writer</span>&nbsp;<span class="op" id="3011273">=</span>&nbsp;<span class="ident" id="3011275">devNull</span><span class="op" id="3011282">(</span><span class="num" id="3011283">0</span><span class="op" id="3011284">)</span>
</div>
</body>
</html>
