<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html" class="current">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7912143">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7912199">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7912253">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7912304">package</span>&nbsp;<span class="ident" id="7912312">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912319">import</span>&nbsp;<span class="op" id="7912326">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7912329">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7912340">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7912350">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912353">var</span>&nbsp;<span class="op" id="7912357">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912360">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7912370">=</span>&nbsp;<span class="ident" id="7912372">runtime</span><span class="op" id="7912379">.</span><span class="ident" id="7912380">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912386">thisArch</span>&nbsp;&nbsp;<span class="op" id="7912396">=</span>&nbsp;<span class="ident" id="7912398">runtime</span><span class="op" id="7912405">.</span><span class="ident" id="7912406">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912414">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7912424">=</span>&nbsp;<span class="ident" id="7912426">anotherOS</span><span class="op" id="7912435">(</span><span class="op" id="7912436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912439">otherArch</span>&nbsp;<span class="op" id="7912449">=</span>&nbsp;<span class="ident" id="7912451">anotherArch</span><span class="op" id="7912462">(</span><span class="op" id="7912463">)</span><br>
<span class="lineno"></span><span class="op" id="7912465">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912468">func</span>&nbsp;<span class="ident" id="7912473">anotherOS</span><span class="op" id="7912482">(</span><span class="op" id="7912483">)</span>&nbsp;<span class="builtintype" id="7912485">string</span>&nbsp;<span class="op" id="7912492">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912495">if</span>&nbsp;<span class="ident" id="7912498">thisOS</span>&nbsp;<span class="op" id="7912505">!=</span>&nbsp;<span class="string" id="7912508">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7912517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912521">return</span>&nbsp;<span class="string" id="7912528">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912541">return</span>&nbsp;<span class="string" id="7912548">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7912556">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7912559">func</span>&nbsp;<span class="ident" id="7912564">anotherArch</span><span class="op" id="7912575">(</span><span class="op" id="7912576">)</span>&nbsp;<span class="builtintype" id="7912578">string</span>&nbsp;<span class="op" id="7912585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912588">if</span>&nbsp;<span class="ident" id="7912591">thisArch</span>&nbsp;<span class="op" id="7912600">!=</span>&nbsp;<span class="string" id="7912603">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7912611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912615">return</span>&nbsp;<span class="string" id="7912622">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912631">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7912634">return</span>&nbsp;<span class="string" id="7912641">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7912647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912650">type</span>&nbsp;<span class="ident" id="7912655">GoodFileTest</span>&nbsp;<span class="keyword" id="7912668">struct</span>&nbsp;<span class="op" id="7912675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912678">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7912685">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912693">result</span>&nbsp;<span class="builtintype" id="7912700">bool</span><br>
<span class="lineno"></span><span class="op" id="7912705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912708">var</span>&nbsp;<span class="ident" id="7912712">tests</span>&nbsp;<span class="op" id="7912718">=</span>&nbsp;<span class="op" id="7912720">[</span><span class="op" id="7912721">]</span><span class="ident" id="7912722">GoodFileTest</span><span class="op" id="7912734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912737">{</span><span class="string" id="7912738">&#34;file.go&#34;</span><span class="op" id="7912747">,</span>&nbsp;<span class="builtintype" id="7912749">true</span><span class="op" id="7912753">}</span><span class="op" id="7912754">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912757">{</span><span class="string" id="7912758">&#34;file.c&#34;</span><span class="op" id="7912766">,</span>&nbsp;<span class="builtintype" id="7912768">true</span><span class="op" id="7912772">}</span><span class="op" id="7912773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912776">{</span><span class="string" id="7912777">&#34;file_foo.go&#34;</span><span class="op" id="7912790">,</span>&nbsp;<span class="builtintype" id="7912792">true</span><span class="op" id="7912796">}</span><span class="op" id="7912797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912800">{</span><span class="string" id="7912801">&#34;file_&#34;</span>&nbsp;<span class="op" id="7912809">+</span>&nbsp;<span class="ident" id="7912811">thisArch</span>&nbsp;<span class="op" id="7912820">+</span>&nbsp;<span class="string" id="7912822">&#34;.go&#34;</span><span class="op" id="7912827">,</span>&nbsp;<span class="builtintype" id="7912829">true</span><span class="op" id="7912833">}</span><span class="op" id="7912834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912837">{</span><span class="string" id="7912838">&#34;file_&#34;</span>&nbsp;<span class="op" id="7912846">+</span>&nbsp;<span class="ident" id="7912848">otherArch</span>&nbsp;<span class="op" id="7912858">+</span>&nbsp;<span class="string" id="7912860">&#34;.go&#34;</span><span class="op" id="7912865">,</span>&nbsp;<span class="builtintype" id="7912867">false</span><span class="op" id="7912872">}</span><span class="op" id="7912873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912876">{</span><span class="string" id="7912877">&#34;file_&#34;</span>&nbsp;<span class="op" id="7912885">+</span>&nbsp;<span class="ident" id="7912887">thisOS</span>&nbsp;<span class="op" id="7912894">+</span>&nbsp;<span class="string" id="7912896">&#34;.go&#34;</span><span class="op" id="7912901">,</span>&nbsp;<span class="builtintype" id="7912903">true</span><span class="op" id="7912907">}</span><span class="op" id="7912908">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912911">{</span><span class="string" id="7912912">&#34;file_&#34;</span>&nbsp;<span class="op" id="7912920">+</span>&nbsp;<span class="ident" id="7912922">otherOS</span>&nbsp;<span class="op" id="7912930">+</span>&nbsp;<span class="string" id="7912932">&#34;.go&#34;</span><span class="op" id="7912937">,</span>&nbsp;<span class="builtintype" id="7912939">false</span><span class="op" id="7912944">}</span><span class="op" id="7912945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7912948">{</span><span class="string" id="7912949">&#34;file_&#34;</span>&nbsp;<span class="op" id="7912957">+</span>&nbsp;<span class="ident" id="7912959">thisOS</span>&nbsp;<span class="op" id="7912966">+</span>&nbsp;<span class="string" id="7912968">&#34;_&#34;</span>&nbsp;<span class="op" id="7912972">+</span>&nbsp;<span class="ident" id="7912974">thisArch</span>&nbsp;<span class="op" id="7912983">+</span>&nbsp;<span class="string" id="7912985">&#34;.go&#34;</span><span class="op" id="7912990">,</span>&nbsp;<span class="builtintype" id="7912992">true</span><span class="op" id="7912996">}</span><span class="op" id="7912997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913000">{</span><span class="string" id="7913001">&#34;file_&#34;</span>&nbsp;<span class="op" id="7913009">+</span>&nbsp;<span class="ident" id="7913011">otherOS</span>&nbsp;<span class="op" id="7913019">+</span>&nbsp;<span class="string" id="7913021">&#34;_&#34;</span>&nbsp;<span class="op" id="7913025">+</span>&nbsp;<span class="ident" id="7913027">thisArch</span>&nbsp;<span class="op" id="7913036">+</span>&nbsp;<span class="string" id="7913038">&#34;.go&#34;</span><span class="op" id="7913043">,</span>&nbsp;<span class="builtintype" id="7913045">false</span><span class="op" id="7913050">}</span><span class="op" id="7913051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913054">{</span><span class="string" id="7913055">&#34;file_&#34;</span>&nbsp;<span class="op" id="7913063">+</span>&nbsp;<span class="ident" id="7913065">thisOS</span>&nbsp;<span class="op" id="7913072">+</span>&nbsp;<span class="string" id="7913074">&#34;_&#34;</span>&nbsp;<span class="op" id="7913078">+</span>&nbsp;<span class="ident" id="7913080">otherArch</span>&nbsp;<span class="op" id="7913090">+</span>&nbsp;<span class="string" id="7913092">&#34;.go&#34;</span><span class="op" id="7913097">,</span>&nbsp;<span class="builtintype" id="7913099">false</span><span class="op" id="7913104">}</span><span class="op" id="7913105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913108">{</span><span class="string" id="7913109">&#34;file_&#34;</span>&nbsp;<span class="op" id="7913117">+</span>&nbsp;<span class="ident" id="7913119">otherOS</span>&nbsp;<span class="op" id="7913127">+</span>&nbsp;<span class="string" id="7913129">&#34;_&#34;</span>&nbsp;<span class="op" id="7913133">+</span>&nbsp;<span class="ident" id="7913135">otherArch</span>&nbsp;<span class="op" id="7913145">+</span>&nbsp;<span class="string" id="7913147">&#34;.go&#34;</span><span class="op" id="7913152">,</span>&nbsp;<span class="builtintype" id="7913154">false</span><span class="op" id="7913159">}</span><span class="op" id="7913160">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913163">{</span><span class="string" id="7913164">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7913176">+</span>&nbsp;<span class="ident" id="7913178">thisArch</span>&nbsp;<span class="op" id="7913187">+</span>&nbsp;<span class="string" id="7913189">&#34;.go&#34;</span><span class="op" id="7913194">,</span>&nbsp;<span class="builtintype" id="7913196">true</span><span class="op" id="7913200">}</span><span class="op" id="7913201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913204">{</span><span class="string" id="7913205">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7913217">+</span>&nbsp;<span class="ident" id="7913219">otherArch</span>&nbsp;<span class="op" id="7913229">+</span>&nbsp;<span class="string" id="7913231">&#34;.go&#34;</span><span class="op" id="7913236">,</span>&nbsp;<span class="builtintype" id="7913238">false</span><span class="op" id="7913243">}</span><span class="op" id="7913244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913247">{</span><span class="string" id="7913248">&#34;file_&#34;</span>&nbsp;<span class="op" id="7913256">+</span>&nbsp;<span class="ident" id="7913258">thisOS</span>&nbsp;<span class="op" id="7913265">+</span>&nbsp;<span class="string" id="7913267">&#34;.c&#34;</span><span class="op" id="7913271">,</span>&nbsp;<span class="builtintype" id="7913273">true</span><span class="op" id="7913277">}</span><span class="op" id="7913278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913281">{</span><span class="string" id="7913282">&#34;file_&#34;</span>&nbsp;<span class="op" id="7913290">+</span>&nbsp;<span class="ident" id="7913292">otherOS</span>&nbsp;<span class="op" id="7913300">+</span>&nbsp;<span class="string" id="7913302">&#34;.c&#34;</span><span class="op" id="7913306">,</span>&nbsp;<span class="builtintype" id="7913308">false</span><span class="op" id="7913313">}</span><span class="op" id="7913314">,</span><br>
<span class="lineno"></span><span class="op" id="7913316">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7913319">func</span>&nbsp;<span class="ident" id="7913324">TestGoodOSArch</span><span class="op" id="7913338">(</span><span class="ident" id="7913339">t</span>&nbsp;<span class="op" id="7913341">*</span><span class="ident" id="7913342">testing</span><span class="op" id="7913349">.</span><span class="ident" id="7913350">T</span><span class="op" id="7913351">)</span>&nbsp;<span class="op" id="7913353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913356">for</span>&nbsp;<span class="ident" id="7913360">_</span><span class="op" id="7913361">,</span>&nbsp;<span class="ident" id="7913363">test</span>&nbsp;<span class="op" id="7913368">:=</span>&nbsp;<span class="keyword" id="7913371">range</span>&nbsp;<span class="ident" id="7913377">tests</span>&nbsp;<span class="op" id="7913383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913387">if</span>&nbsp;<span class="ident" id="7913390">Default</span><span class="op" id="7913397">.</span><span class="ident" id="7913398">goodOSArchFile</span><span class="op" id="7913412">(</span><span class="ident" id="7913413">test</span><span class="op" id="7913417">.</span><span class="ident" id="7913418">name</span><span class="op" id="7913422">,</span>&nbsp;<span class="builtinfunc" id="7913424">make</span><span class="op" id="7913428">(</span><span class="keyword" id="7913429">map</span><span class="op" id="7913432">[</span><span class="builtintype" id="7913433">string</span><span class="op" id="7913439">]</span><span class="builtintype" id="7913440">bool</span><span class="op" id="7913444">)</span><span class="op" id="7913445">)</span>&nbsp;<span class="op" id="7913447">!=</span>&nbsp;<span class="ident" id="7913450">test</span><span class="op" id="7913454">.</span><span class="ident" id="7913455">result</span>&nbsp;<span class="op" id="7913462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913467">t</span><span class="op" id="7913468">.</span><span class="ident" id="7913469">Fatalf</span><span class="op" id="7913475">(</span><span class="string" id="7913476">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7913502">,</span>&nbsp;<span class="ident" id="7913504">test</span><span class="op" id="7913508">.</span><span class="ident" id="7913509">name</span><span class="op" id="7913513">,</span>&nbsp;<span class="ident" id="7913515">test</span><span class="op" id="7913519">.</span><span class="ident" id="7913520">result</span><span class="op" id="7913526">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913533">}</span><br>
<span class="lineno"></span><span class="op" id="7913535">}</span>
</div>
</body>
</html>
