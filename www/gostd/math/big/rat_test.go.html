<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7691000">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7691055">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7691109">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7691160">package</span>&nbsp;<span class="ident" id="7691168">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7691173">import</span>&nbsp;<span class="op" id="7691180">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691183">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691192">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691208">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691225">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691241">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691248">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691256">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691267">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691278">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7691288">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7691291">func</span>&nbsp;<span class="ident" id="7691296">TestZeroRat</span><span class="op" id="7691307">(</span><span class="ident" id="7691308">t</span>&nbsp;<span class="op" id="7691310">*</span><span class="ident" id="7691311">testing</span><span class="op" id="7691318">.</span><span class="ident" id="7691319">T</span><span class="op" id="7691320">)</span>&nbsp;<span class="op" id="7691322">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691325">var</span>&nbsp;<span class="ident" id="7691329">x</span><span class="op" id="7691330">,</span>&nbsp;<span class="ident" id="7691332">y</span><span class="op" id="7691333">,</span>&nbsp;<span class="ident" id="7691335">z</span>&nbsp;<span class="ident" id="7691337">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691342">y</span><span class="op" id="7691343">.</span><span class="ident" id="7691344">SetFrac64</span><span class="op" id="7691353">(</span><span class="num" id="7691354">0</span><span class="op" id="7691355">,</span>&nbsp;<span class="num" id="7691357">42</span><span class="op" id="7691359">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691363">if</span>&nbsp;<span class="ident" id="7691366">x</span><span class="op" id="7691367">.</span><span class="ident" id="7691368">Cmp</span><span class="op" id="7691371">(</span><span class="op" id="7691372">&amp;</span><span class="ident" id="7691373">y</span><span class="op" id="7691374">)</span>&nbsp;<span class="op" id="7691376">!=</span>&nbsp;<span class="num" id="7691379">0</span>&nbsp;<span class="op" id="7691381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691385">t</span><span class="op" id="7691386">.</span><span class="ident" id="7691387">Errorf</span><span class="op" id="7691393">(</span><span class="string" id="7691394">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7691433">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691440">if</span>&nbsp;<span class="ident" id="7691443">s</span>&nbsp;<span class="op" id="7691445">:=</span>&nbsp;<span class="ident" id="7691448">x</span><span class="op" id="7691449">.</span><span class="ident" id="7691450">String</span><span class="op" id="7691456">(</span><span class="op" id="7691457">)</span><span class="op" id="7691458">;</span>&nbsp;<span class="ident" id="7691460">s</span>&nbsp;<span class="op" id="7691462">!=</span>&nbsp;<span class="string" id="7691465">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7691471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691475">t</span><span class="op" id="7691476">.</span><span class="ident" id="7691477">Errorf</span><span class="op" id="7691483">(</span><span class="string" id="7691484">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7691506">,</span>&nbsp;<span class="ident" id="7691508">s</span><span class="op" id="7691509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691512">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691516">if</span>&nbsp;<span class="ident" id="7691519">s</span>&nbsp;<span class="op" id="7691521">:=</span>&nbsp;<span class="ident" id="7691524">x</span><span class="op" id="7691525">.</span><span class="ident" id="7691526">RatString</span><span class="op" id="7691535">(</span><span class="op" id="7691536">)</span><span class="op" id="7691537">;</span>&nbsp;<span class="ident" id="7691539">s</span>&nbsp;<span class="op" id="7691541">!=</span>&nbsp;<span class="string" id="7691544">&#34;0&#34;</span>&nbsp;<span class="op" id="7691548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691552">t</span><span class="op" id="7691553">.</span><span class="ident" id="7691554">Errorf</span><span class="op" id="7691560">(</span><span class="string" id="7691561">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7691581">,</span>&nbsp;<span class="ident" id="7691583">s</span><span class="op" id="7691584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691591">z</span><span class="op" id="7691592">.</span><span class="ident" id="7691593">Add</span><span class="op" id="7691596">(</span><span class="op" id="7691597">&amp;</span><span class="ident" id="7691598">x</span><span class="op" id="7691599">,</span>&nbsp;<span class="op" id="7691601">&amp;</span><span class="ident" id="7691602">y</span><span class="op" id="7691603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691606">if</span>&nbsp;<span class="ident" id="7691609">s</span>&nbsp;<span class="op" id="7691611">:=</span>&nbsp;<span class="ident" id="7691614">z</span><span class="op" id="7691615">.</span><span class="ident" id="7691616">RatString</span><span class="op" id="7691625">(</span><span class="op" id="7691626">)</span><span class="op" id="7691627">;</span>&nbsp;<span class="ident" id="7691629">s</span>&nbsp;<span class="op" id="7691631">!=</span>&nbsp;<span class="string" id="7691634">&#34;0&#34;</span>&nbsp;<span class="op" id="7691638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691642">t</span><span class="op" id="7691643">.</span><span class="ident" id="7691644">Errorf</span><span class="op" id="7691650">(</span><span class="string" id="7691651">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7691673">,</span>&nbsp;<span class="ident" id="7691675">s</span><span class="op" id="7691676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691683">z</span><span class="op" id="7691684">.</span><span class="ident" id="7691685">Sub</span><span class="op" id="7691688">(</span><span class="op" id="7691689">&amp;</span><span class="ident" id="7691690">x</span><span class="op" id="7691691">,</span>&nbsp;<span class="op" id="7691693">&amp;</span><span class="ident" id="7691694">y</span><span class="op" id="7691695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691698">if</span>&nbsp;<span class="ident" id="7691701">s</span>&nbsp;<span class="op" id="7691703">:=</span>&nbsp;<span class="ident" id="7691706">z</span><span class="op" id="7691707">.</span><span class="ident" id="7691708">RatString</span><span class="op" id="7691717">(</span><span class="op" id="7691718">)</span><span class="op" id="7691719">;</span>&nbsp;<span class="ident" id="7691721">s</span>&nbsp;<span class="op" id="7691723">!=</span>&nbsp;<span class="string" id="7691726">&#34;0&#34;</span>&nbsp;<span class="op" id="7691730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691734">t</span><span class="op" id="7691735">.</span><span class="ident" id="7691736">Errorf</span><span class="op" id="7691742">(</span><span class="string" id="7691743">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7691765">,</span>&nbsp;<span class="ident" id="7691767">s</span><span class="op" id="7691768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691775">z</span><span class="op" id="7691776">.</span><span class="ident" id="7691777">Mul</span><span class="op" id="7691780">(</span><span class="op" id="7691781">&amp;</span><span class="ident" id="7691782">x</span><span class="op" id="7691783">,</span>&nbsp;<span class="op" id="7691785">&amp;</span><span class="ident" id="7691786">y</span><span class="op" id="7691787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691790">if</span>&nbsp;<span class="ident" id="7691793">s</span>&nbsp;<span class="op" id="7691795">:=</span>&nbsp;<span class="ident" id="7691798">z</span><span class="op" id="7691799">.</span><span class="ident" id="7691800">RatString</span><span class="op" id="7691809">(</span><span class="op" id="7691810">)</span><span class="op" id="7691811">;</span>&nbsp;<span class="ident" id="7691813">s</span>&nbsp;<span class="op" id="7691815">!=</span>&nbsp;<span class="string" id="7691818">&#34;0&#34;</span>&nbsp;<span class="op" id="7691822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7691826">t</span><span class="op" id="7691827">.</span><span class="ident" id="7691828">Errorf</span><span class="op" id="7691834">(</span><span class="string" id="7691835">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7691857">,</span>&nbsp;<span class="ident" id="7691859">s</span><span class="op" id="7691860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7691867">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691898">defer</span>&nbsp;<span class="keyword" id="7691904">func</span><span class="op" id="7691908">(</span><span class="op" id="7691909">)</span>&nbsp;<span class="op" id="7691911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7691915">if</span>&nbsp;<span class="ident" id="7691918">s</span>&nbsp;<span class="op" id="7691920">:=</span>&nbsp;<span class="builtinfunc" id="7691923">recover</span><span class="op" id="7691930">(</span><span class="op" id="7691931">)</span><span class="op" id="7691932">;</span>&nbsp;<span class="ident" id="7691934">s</span>&nbsp;<span class="op" id="7691936">==</span>&nbsp;<span class="builtintype" id="7691939">nil</span>&nbsp;<span class="op" id="7691943">||</span>&nbsp;<span class="ident" id="7691946">s</span><span class="op" id="7691947">.</span><span class="op" id="7691948">(</span><span class="builtintype" id="7691949">string</span><span class="op" id="7691955">)</span>&nbsp;<span class="op" id="7691957">!=</span>&nbsp;<span class="string" id="7691960">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7691979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7691984">panic</span><span class="op" id="7691989">(</span><span class="ident" id="7691990">s</span><span class="op" id="7691991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691995">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691998">}</span><span class="op" id="7691999">(</span><span class="op" id="7692000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7692003">z</span><span class="op" id="7692004">.</span><span class="ident" id="7692005">Quo</span><span class="op" id="7692008">(</span><span class="op" id="7692009">&amp;</span><span class="ident" id="7692010">x</span><span class="op" id="7692011">,</span>&nbsp;<span class="op" id="7692013">&amp;</span><span class="ident" id="7692014">y</span><span class="op" id="7692015">)</span><br>
<span class="lineno"></span><span class="op" id="7692017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7692020">var</span>&nbsp;<span class="ident" id="7692024">setStringTests</span>&nbsp;<span class="op" id="7692039">=</span>&nbsp;<span class="op" id="7692041">[</span><span class="op" id="7692042">]</span><span class="keyword" id="7692043">struct</span>&nbsp;<span class="op" id="7692050">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7692053">in</span><span class="op" id="7692055">,</span>&nbsp;<span class="ident" id="7692057">out</span>&nbsp;<span class="builtintype" id="7692061">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7692069">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7692077">bool</span><br>
<span class="lineno"></span><span class="op" id="7692082">}</span><span class="op" id="7692083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692086">{</span><span class="string" id="7692087">&#34;0&#34;</span><span class="op" id="7692090">,</span>&nbsp;<span class="string" id="7692092">&#34;0&#34;</span><span class="op" id="7692095">,</span>&nbsp;<span class="builtintype" id="7692097">true</span><span class="op" id="7692101">}</span><span class="op" id="7692102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692105">{</span><span class="string" id="7692106">&#34;-0&#34;</span><span class="op" id="7692110">,</span>&nbsp;<span class="string" id="7692112">&#34;0&#34;</span><span class="op" id="7692115">,</span>&nbsp;<span class="builtintype" id="7692117">true</span><span class="op" id="7692121">}</span><span class="op" id="7692122">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692125">{</span><span class="string" id="7692126">&#34;1&#34;</span><span class="op" id="7692129">,</span>&nbsp;<span class="string" id="7692131">&#34;1&#34;</span><span class="op" id="7692134">,</span>&nbsp;<span class="builtintype" id="7692136">true</span><span class="op" id="7692140">}</span><span class="op" id="7692141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692144">{</span><span class="string" id="7692145">&#34;-1&#34;</span><span class="op" id="7692149">,</span>&nbsp;<span class="string" id="7692151">&#34;-1&#34;</span><span class="op" id="7692155">,</span>&nbsp;<span class="builtintype" id="7692157">true</span><span class="op" id="7692161">}</span><span class="op" id="7692162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692165">{</span><span class="string" id="7692166">&#34;1.&#34;</span><span class="op" id="7692170">,</span>&nbsp;<span class="string" id="7692172">&#34;1&#34;</span><span class="op" id="7692175">,</span>&nbsp;<span class="builtintype" id="7692177">true</span><span class="op" id="7692181">}</span><span class="op" id="7692182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692185">{</span><span class="string" id="7692186">&#34;1e0&#34;</span><span class="op" id="7692191">,</span>&nbsp;<span class="string" id="7692193">&#34;1&#34;</span><span class="op" id="7692196">,</span>&nbsp;<span class="builtintype" id="7692198">true</span><span class="op" id="7692202">}</span><span class="op" id="7692203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692206">{</span><span class="string" id="7692207">&#34;1.e1&#34;</span><span class="op" id="7692213">,</span>&nbsp;<span class="string" id="7692215">&#34;10&#34;</span><span class="op" id="7692219">,</span>&nbsp;<span class="builtintype" id="7692221">true</span><span class="op" id="7692225">}</span><span class="op" id="7692226">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692229">{</span><span class="ident" id="7692230">in</span><span class="op" id="7692232">:</span>&nbsp;<span class="string" id="7692234">&#34;1e&#34;</span><span class="op" id="7692238">,</span>&nbsp;<span class="ident" id="7692240">ok</span><span class="op" id="7692242">:</span>&nbsp;<span class="builtintype" id="7692244">false</span><span class="op" id="7692249">}</span><span class="op" id="7692250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692253">{</span><span class="ident" id="7692254">in</span><span class="op" id="7692256">:</span>&nbsp;<span class="string" id="7692258">&#34;1.e&#34;</span><span class="op" id="7692263">,</span>&nbsp;<span class="ident" id="7692265">ok</span><span class="op" id="7692267">:</span>&nbsp;<span class="builtintype" id="7692269">false</span><span class="op" id="7692274">}</span><span class="op" id="7692275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692278">{</span><span class="ident" id="7692279">in</span><span class="op" id="7692281">:</span>&nbsp;<span class="string" id="7692283">&#34;1e+14e-5&#34;</span><span class="op" id="7692293">,</span>&nbsp;<span class="ident" id="7692295">ok</span><span class="op" id="7692297">:</span>&nbsp;<span class="builtintype" id="7692299">false</span><span class="op" id="7692304">}</span><span class="op" id="7692305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692308">{</span><span class="ident" id="7692309">in</span><span class="op" id="7692311">:</span>&nbsp;<span class="string" id="7692313">&#34;1e4.5&#34;</span><span class="op" id="7692320">,</span>&nbsp;<span class="ident" id="7692322">ok</span><span class="op" id="7692324">:</span>&nbsp;<span class="builtintype" id="7692326">false</span><span class="op" id="7692331">}</span><span class="op" id="7692332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692335">{</span><span class="ident" id="7692336">in</span><span class="op" id="7692338">:</span>&nbsp;<span class="string" id="7692340">&#34;r&#34;</span><span class="op" id="7692343">,</span>&nbsp;<span class="ident" id="7692345">ok</span><span class="op" id="7692347">:</span>&nbsp;<span class="builtintype" id="7692349">false</span><span class="op" id="7692354">}</span><span class="op" id="7692355">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692358">{</span><span class="ident" id="7692359">in</span><span class="op" id="7692361">:</span>&nbsp;<span class="string" id="7692363">&#34;a/b&#34;</span><span class="op" id="7692368">,</span>&nbsp;<span class="ident" id="7692370">ok</span><span class="op" id="7692372">:</span>&nbsp;<span class="builtintype" id="7692374">false</span><span class="op" id="7692379">}</span><span class="op" id="7692380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692383">{</span><span class="ident" id="7692384">in</span><span class="op" id="7692386">:</span>&nbsp;<span class="string" id="7692388">&#34;a.b&#34;</span><span class="op" id="7692393">,</span>&nbsp;<span class="ident" id="7692395">ok</span><span class="op" id="7692397">:</span>&nbsp;<span class="builtintype" id="7692399">false</span><span class="op" id="7692404">}</span><span class="op" id="7692405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692408">{</span><span class="string" id="7692409">&#34;-0.1&#34;</span><span class="op" id="7692415">,</span>&nbsp;<span class="string" id="7692417">&#34;-1/10&#34;</span><span class="op" id="7692424">,</span>&nbsp;<span class="builtintype" id="7692426">true</span><span class="op" id="7692430">}</span><span class="op" id="7692431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692434">{</span><span class="string" id="7692435">&#34;-.1&#34;</span><span class="op" id="7692440">,</span>&nbsp;<span class="string" id="7692442">&#34;-1/10&#34;</span><span class="op" id="7692449">,</span>&nbsp;<span class="builtintype" id="7692451">true</span><span class="op" id="7692455">}</span><span class="op" id="7692456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692459">{</span><span class="string" id="7692460">&#34;2/4&#34;</span><span class="op" id="7692465">,</span>&nbsp;<span class="string" id="7692467">&#34;1/2&#34;</span><span class="op" id="7692472">,</span>&nbsp;<span class="builtintype" id="7692474">true</span><span class="op" id="7692478">}</span><span class="op" id="7692479">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692482">{</span><span class="string" id="7692483">&#34;.25&#34;</span><span class="op" id="7692488">,</span>&nbsp;<span class="string" id="7692490">&#34;1/4&#34;</span><span class="op" id="7692495">,</span>&nbsp;<span class="builtintype" id="7692497">true</span><span class="op" id="7692501">}</span><span class="op" id="7692502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692505">{</span><span class="string" id="7692506">&#34;-1/5&#34;</span><span class="op" id="7692512">,</span>&nbsp;<span class="string" id="7692514">&#34;-1/5&#34;</span><span class="op" id="7692520">,</span>&nbsp;<span class="builtintype" id="7692522">true</span><span class="op" id="7692526">}</span><span class="op" id="7692527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692530">{</span><span class="string" id="7692531">&#34;8129567.7690E14&#34;</span><span class="op" id="7692548">,</span>&nbsp;<span class="string" id="7692550">&#34;812956776900000000000&#34;</span><span class="op" id="7692573">,</span>&nbsp;<span class="builtintype" id="7692575">true</span><span class="op" id="7692579">}</span><span class="op" id="7692580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692583">{</span><span class="string" id="7692584">&#34;78189e+4&#34;</span><span class="op" id="7692594">,</span>&nbsp;<span class="string" id="7692596">&#34;781890000&#34;</span><span class="op" id="7692607">,</span>&nbsp;<span class="builtintype" id="7692609">true</span><span class="op" id="7692613">}</span><span class="op" id="7692614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692617">{</span><span class="string" id="7692618">&#34;553019.8935e+8&#34;</span><span class="op" id="7692634">,</span>&nbsp;<span class="string" id="7692636">&#34;55301989350000&#34;</span><span class="op" id="7692652">,</span>&nbsp;<span class="builtintype" id="7692654">true</span><span class="op" id="7692658">}</span><span class="op" id="7692659">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692662">{</span><span class="string" id="7692663">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7692698">,</span>&nbsp;<span class="string" id="7692700">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7692743">,</span>&nbsp;<span class="builtintype" id="7692745">true</span><span class="op" id="7692749">}</span><span class="op" id="7692750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692753">{</span><span class="string" id="7692754">&#34;9877861857500000E-7&#34;</span><span class="op" id="7692775">,</span>&nbsp;<span class="string" id="7692777">&#34;3951144743/4&#34;</span><span class="op" id="7692791">,</span>&nbsp;<span class="builtintype" id="7692793">true</span><span class="op" id="7692797">}</span><span class="op" id="7692798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692801">{</span><span class="string" id="7692802">&#34;2169378.417e-3&#34;</span><span class="op" id="7692818">,</span>&nbsp;<span class="string" id="7692820">&#34;2169378417/1000000&#34;</span><span class="op" id="7692840">,</span>&nbsp;<span class="builtintype" id="7692842">true</span><span class="op" id="7692846">}</span><span class="op" id="7692847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692850">{</span><span class="string" id="7692851">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7692889">,</span>&nbsp;<span class="string" id="7692891">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7692929">,</span>&nbsp;<span class="builtintype" id="7692931">true</span><span class="op" id="7692935">}</span><span class="op" id="7692936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692939">{</span><span class="string" id="7692940">&#34;53/70893980658822810696&#34;</span><span class="op" id="7692965">,</span>&nbsp;<span class="string" id="7692967">&#34;53/70893980658822810696&#34;</span><span class="op" id="7692992">,</span>&nbsp;<span class="builtintype" id="7692994">true</span><span class="op" id="7692998">}</span><span class="op" id="7692999">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693002">{</span><span class="string" id="7693003">&#34;106/141787961317645621392&#34;</span><span class="op" id="7693030">,</span>&nbsp;<span class="string" id="7693032">&#34;53/70893980658822810696&#34;</span><span class="op" id="7693057">,</span>&nbsp;<span class="builtintype" id="7693059">true</span><span class="op" id="7693063">}</span><span class="op" id="7693064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693067">{</span><span class="string" id="7693068">&#34;204211327800791583.81095&#34;</span><span class="op" id="7693094">,</span>&nbsp;<span class="string" id="7693096">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7693126">,</span>&nbsp;<span class="builtintype" id="7693128">true</span><span class="op" id="7693132">}</span><span class="op" id="7693133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693136">{</span><span class="ident" id="7693137">in</span><span class="op" id="7693139">:</span>&nbsp;<span class="string" id="7693141">&#34;1/0&#34;</span><span class="op" id="7693146">,</span>&nbsp;<span class="ident" id="7693148">ok</span><span class="op" id="7693150">:</span>&nbsp;<span class="builtintype" id="7693152">false</span><span class="op" id="7693157">}</span><span class="op" id="7693158">,</span><br>
<span class="lineno"></span><span class="op" id="7693160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7693163">func</span>&nbsp;<span class="ident" id="7693168">TestRatSetString</span><span class="op" id="7693184">(</span><span class="ident" id="7693185">t</span>&nbsp;<span class="op" id="7693187">*</span><span class="ident" id="7693188">testing</span><span class="op" id="7693195">.</span><span class="ident" id="7693196">T</span><span class="op" id="7693197">)</span>&nbsp;<span class="op" id="7693199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693202">for</span>&nbsp;<span class="ident" id="7693206">i</span><span class="op" id="7693207">,</span>&nbsp;<span class="ident" id="7693209">test</span>&nbsp;<span class="op" id="7693214">:=</span>&nbsp;<span class="keyword" id="7693217">range</span>&nbsp;<span class="ident" id="7693223">setStringTests</span>&nbsp;<span class="op" id="7693238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693242">x</span><span class="op" id="7693243">,</span>&nbsp;<span class="ident" id="7693245">ok</span>&nbsp;<span class="op" id="7693248">:=</span>&nbsp;<span class="builtinfunc" id="7693251">new</span><span class="op" id="7693254">(</span><span class="ident" id="7693255">Rat</span><span class="op" id="7693258">)</span><span class="op" id="7693259">.</span><span class="ident" id="7693260">SetString</span><span class="op" id="7693269">(</span><span class="ident" id="7693270">test</span><span class="op" id="7693274">.</span><span class="ident" id="7693275">in</span><span class="op" id="7693277">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693282">if</span>&nbsp;<span class="ident" id="7693285">ok</span>&nbsp;<span class="op" id="7693288">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693293">if</span>&nbsp;<span class="op" id="7693296">!</span><span class="ident" id="7693297">test</span><span class="op" id="7693301">.</span><span class="ident" id="7693302">ok</span>&nbsp;<span class="op" id="7693305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693311">t</span><span class="op" id="7693312">.</span><span class="ident" id="7693313">Errorf</span><span class="op" id="7693319">(</span><span class="string" id="7693320">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7693356">,</span>&nbsp;<span class="ident" id="7693358">i</span><span class="op" id="7693359">,</span>&nbsp;<span class="ident" id="7693361">test</span><span class="op" id="7693365">.</span><span class="ident" id="7693366">in</span><span class="op" id="7693368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693373">}</span>&nbsp;<span class="keyword" id="7693375">else</span>&nbsp;<span class="keyword" id="7693380">if</span>&nbsp;<span class="ident" id="7693383">x</span><span class="op" id="7693384">.</span><span class="ident" id="7693385">RatString</span><span class="op" id="7693394">(</span><span class="op" id="7693395">)</span>&nbsp;<span class="op" id="7693397">!=</span>&nbsp;<span class="ident" id="7693400">test</span><span class="op" id="7693404">.</span><span class="ident" id="7693405">out</span>&nbsp;<span class="op" id="7693409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693415">t</span><span class="op" id="7693416">.</span><span class="ident" id="7693417">Errorf</span><span class="op" id="7693423">(</span><span class="string" id="7693424">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7693458">,</span>&nbsp;<span class="ident" id="7693460">i</span><span class="op" id="7693461">,</span>&nbsp;<span class="ident" id="7693463">test</span><span class="op" id="7693467">.</span><span class="ident" id="7693468">in</span><span class="op" id="7693470">,</span>&nbsp;<span class="ident" id="7693472">x</span><span class="op" id="7693473">.</span><span class="ident" id="7693474">RatString</span><span class="op" id="7693483">(</span><span class="op" id="7693484">)</span><span class="op" id="7693485">,</span>&nbsp;<span class="ident" id="7693487">test</span><span class="op" id="7693491">.</span><span class="ident" id="7693492">out</span><span class="op" id="7693495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693500">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693504">}</span>&nbsp;<span class="keyword" id="7693506">else</span>&nbsp;<span class="keyword" id="7693511">if</span>&nbsp;<span class="ident" id="7693514">x</span>&nbsp;<span class="op" id="7693516">!=</span>&nbsp;<span class="builtintype" id="7693519">nil</span>&nbsp;<span class="op" id="7693523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693528">t</span><span class="op" id="7693529">.</span><span class="ident" id="7693530">Errorf</span><span class="op" id="7693536">(</span><span class="string" id="7693537">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7693572">,</span>&nbsp;<span class="ident" id="7693574">i</span><span class="op" id="7693575">,</span>&nbsp;<span class="ident" id="7693577">test</span><span class="op" id="7693581">.</span><span class="ident" id="7693582">in</span><span class="op" id="7693584">,</span>&nbsp;<span class="ident" id="7693586">x</span><span class="op" id="7693587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693594">}</span><br>
<span class="lineno"></span><span class="op" id="7693596">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7693599">func</span>&nbsp;<span class="ident" id="7693604">TestRatScan</span><span class="op" id="7693615">(</span><span class="ident" id="7693616">t</span>&nbsp;<span class="op" id="7693618">*</span><span class="ident" id="7693619">testing</span><span class="op" id="7693626">.</span><span class="ident" id="7693627">T</span><span class="op" id="7693628">)</span>&nbsp;<span class="op" id="7693630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693633">var</span>&nbsp;<span class="ident" id="7693637">buf</span>&nbsp;<span class="ident" id="7693641">bytes</span><span class="op" id="7693646">.</span><span class="ident" id="7693647">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693655">for</span>&nbsp;<span class="ident" id="7693659">i</span><span class="op" id="7693660">,</span>&nbsp;<span class="ident" id="7693662">test</span>&nbsp;<span class="op" id="7693667">:=</span>&nbsp;<span class="keyword" id="7693670">range</span>&nbsp;<span class="ident" id="7693676">setStringTests</span>&nbsp;<span class="op" id="7693691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693695">x</span>&nbsp;<span class="op" id="7693697">:=</span>&nbsp;<span class="builtinfunc" id="7693700">new</span><span class="op" id="7693703">(</span><span class="ident" id="7693704">Rat</span><span class="op" id="7693707">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693711">buf</span><span class="op" id="7693714">.</span><span class="ident" id="7693715">Reset</span><span class="op" id="7693720">(</span><span class="op" id="7693721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693725">buf</span><span class="op" id="7693728">.</span><span class="ident" id="7693729">WriteString</span><span class="op" id="7693740">(</span><span class="ident" id="7693741">test</span><span class="op" id="7693745">.</span><span class="ident" id="7693746">in</span><span class="op" id="7693748">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693753">_</span><span class="op" id="7693754">,</span>&nbsp;<span class="ident" id="7693756">err</span>&nbsp;<span class="op" id="7693760">:=</span>&nbsp;<span class="ident" id="7693763">fmt</span><span class="op" id="7693766">.</span><span class="ident" id="7693767">Fscanf</span><span class="op" id="7693773">(</span><span class="op" id="7693774">&amp;</span><span class="ident" id="7693775">buf</span><span class="op" id="7693778">,</span>&nbsp;<span class="string" id="7693780">&#34;%v&#34;</span><span class="op" id="7693784">,</span>&nbsp;<span class="ident" id="7693786">x</span><span class="op" id="7693787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693791">if</span>&nbsp;<span class="ident" id="7693794">err</span>&nbsp;<span class="op" id="7693798">==</span>&nbsp;<span class="builtintype" id="7693801">nil</span>&nbsp;<span class="op" id="7693805">!=</span>&nbsp;<span class="ident" id="7693808">test</span><span class="op" id="7693812">.</span><span class="ident" id="7693813">ok</span>&nbsp;<span class="op" id="7693816">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693821">if</span>&nbsp;<span class="ident" id="7693824">test</span><span class="op" id="7693828">.</span><span class="ident" id="7693829">ok</span>&nbsp;<span class="op" id="7693832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693838">t</span><span class="op" id="7693839">.</span><span class="ident" id="7693840">Errorf</span><span class="op" id="7693846">(</span><span class="string" id="7693847">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7693862">,</span>&nbsp;<span class="ident" id="7693864">i</span><span class="op" id="7693865">,</span>&nbsp;<span class="ident" id="7693867">err</span><span class="op" id="7693870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693875">}</span>&nbsp;<span class="keyword" id="7693877">else</span>&nbsp;<span class="op" id="7693882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693888">t</span><span class="op" id="7693889">.</span><span class="ident" id="7693890">Errorf</span><span class="op" id="7693896">(</span><span class="string" id="7693897">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7693917">,</span>&nbsp;<span class="ident" id="7693919">i</span><span class="op" id="7693920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693925">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693930">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7693941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7693945">if</span>&nbsp;<span class="ident" id="7693948">err</span>&nbsp;<span class="op" id="7693952">==</span>&nbsp;<span class="builtintype" id="7693955">nil</span>&nbsp;<span class="op" id="7693959">&amp;&amp;</span>&nbsp;<span class="ident" id="7693962">x</span><span class="op" id="7693963">.</span><span class="ident" id="7693964">RatString</span><span class="op" id="7693973">(</span><span class="op" id="7693974">)</span>&nbsp;<span class="op" id="7693976">!=</span>&nbsp;<span class="ident" id="7693979">test</span><span class="op" id="7693983">.</span><span class="ident" id="7693984">out</span>&nbsp;<span class="op" id="7693988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693993">t</span><span class="op" id="7693994">.</span><span class="ident" id="7693995">Errorf</span><span class="op" id="7694001">(</span><span class="string" id="7694002">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7694022">,</span>&nbsp;<span class="ident" id="7694024">i</span><span class="op" id="7694025">,</span>&nbsp;<span class="ident" id="7694027">x</span><span class="op" id="7694028">.</span><span class="ident" id="7694029">RatString</span><span class="op" id="7694038">(</span><span class="op" id="7694039">)</span><span class="op" id="7694040">,</span>&nbsp;<span class="ident" id="7694042">test</span><span class="op" id="7694046">.</span><span class="ident" id="7694047">out</span><span class="op" id="7694050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694054">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694057">}</span><br>
<span class="lineno"></span><span class="op" id="7694059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7694062">var</span>&nbsp;<span class="ident" id="7694066">floatStringTests</span>&nbsp;<span class="op" id="7694083">=</span>&nbsp;<span class="op" id="7694085">[</span><span class="op" id="7694086">]</span><span class="keyword" id="7694087">struct</span>&nbsp;<span class="op" id="7694094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694097">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7694102">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694110">prec</span>&nbsp;<span class="builtintype" id="7694115">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694120">out</span>&nbsp;&nbsp;<span class="builtintype" id="7694125">string</span><br>
<span class="lineno"></span><span class="op" id="7694132">}</span><span class="op" id="7694133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694136">{</span><span class="string" id="7694137">&#34;0&#34;</span><span class="op" id="7694140">,</span>&nbsp;<span class="num" id="7694142">0</span><span class="op" id="7694143">,</span>&nbsp;<span class="string" id="7694145">&#34;0&#34;</span><span class="op" id="7694148">}</span><span class="op" id="7694149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694152">{</span><span class="string" id="7694153">&#34;0&#34;</span><span class="op" id="7694156">,</span>&nbsp;<span class="num" id="7694158">4</span><span class="op" id="7694159">,</span>&nbsp;<span class="string" id="7694161">&#34;0.0000&#34;</span><span class="op" id="7694169">}</span><span class="op" id="7694170">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694173">{</span><span class="string" id="7694174">&#34;1&#34;</span><span class="op" id="7694177">,</span>&nbsp;<span class="num" id="7694179">0</span><span class="op" id="7694180">,</span>&nbsp;<span class="string" id="7694182">&#34;1&#34;</span><span class="op" id="7694185">}</span><span class="op" id="7694186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694189">{</span><span class="string" id="7694190">&#34;1&#34;</span><span class="op" id="7694193">,</span>&nbsp;<span class="num" id="7694195">2</span><span class="op" id="7694196">,</span>&nbsp;<span class="string" id="7694198">&#34;1.00&#34;</span><span class="op" id="7694204">}</span><span class="op" id="7694205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694208">{</span><span class="string" id="7694209">&#34;-1&#34;</span><span class="op" id="7694213">,</span>&nbsp;<span class="num" id="7694215">0</span><span class="op" id="7694216">,</span>&nbsp;<span class="string" id="7694218">&#34;-1&#34;</span><span class="op" id="7694222">}</span><span class="op" id="7694223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694226">{</span><span class="string" id="7694227">&#34;.25&#34;</span><span class="op" id="7694232">,</span>&nbsp;<span class="num" id="7694234">2</span><span class="op" id="7694235">,</span>&nbsp;<span class="string" id="7694237">&#34;0.25&#34;</span><span class="op" id="7694243">}</span><span class="op" id="7694244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694247">{</span><span class="string" id="7694248">&#34;.25&#34;</span><span class="op" id="7694253">,</span>&nbsp;<span class="num" id="7694255">1</span><span class="op" id="7694256">,</span>&nbsp;<span class="string" id="7694258">&#34;0.3&#34;</span><span class="op" id="7694263">}</span><span class="op" id="7694264">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694267">{</span><span class="string" id="7694268">&#34;.25&#34;</span><span class="op" id="7694273">,</span>&nbsp;<span class="num" id="7694275">3</span><span class="op" id="7694276">,</span>&nbsp;<span class="string" id="7694278">&#34;0.250&#34;</span><span class="op" id="7694285">}</span><span class="op" id="7694286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694289">{</span><span class="string" id="7694290">&#34;-1/3&#34;</span><span class="op" id="7694296">,</span>&nbsp;<span class="num" id="7694298">3</span><span class="op" id="7694299">,</span>&nbsp;<span class="string" id="7694301">&#34;-0.333&#34;</span><span class="op" id="7694309">}</span><span class="op" id="7694310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694313">{</span><span class="string" id="7694314">&#34;-2/3&#34;</span><span class="op" id="7694320">,</span>&nbsp;<span class="num" id="7694322">4</span><span class="op" id="7694323">,</span>&nbsp;<span class="string" id="7694325">&#34;-0.6667&#34;</span><span class="op" id="7694334">}</span><span class="op" id="7694335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694338">{</span><span class="string" id="7694339">&#34;0.96&#34;</span><span class="op" id="7694345">,</span>&nbsp;<span class="num" id="7694347">1</span><span class="op" id="7694348">,</span>&nbsp;<span class="string" id="7694350">&#34;1.0&#34;</span><span class="op" id="7694355">}</span><span class="op" id="7694356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694359">{</span><span class="string" id="7694360">&#34;0.999&#34;</span><span class="op" id="7694367">,</span>&nbsp;<span class="num" id="7694369">2</span><span class="op" id="7694370">,</span>&nbsp;<span class="string" id="7694372">&#34;1.00&#34;</span><span class="op" id="7694378">}</span><span class="op" id="7694379">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694382">{</span><span class="string" id="7694383">&#34;0.9&#34;</span><span class="op" id="7694388">,</span>&nbsp;<span class="num" id="7694390">0</span><span class="op" id="7694391">,</span>&nbsp;<span class="string" id="7694393">&#34;1&#34;</span><span class="op" id="7694396">}</span><span class="op" id="7694397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694400">{</span><span class="string" id="7694401">&#34;.25&#34;</span><span class="op" id="7694406">,</span>&nbsp;<span class="op" id="7694408">-</span><span class="num" id="7694409">1</span><span class="op" id="7694410">,</span>&nbsp;<span class="string" id="7694412">&#34;0&#34;</span><span class="op" id="7694415">}</span><span class="op" id="7694416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694419">{</span><span class="string" id="7694420">&#34;.55&#34;</span><span class="op" id="7694425">,</span>&nbsp;<span class="op" id="7694427">-</span><span class="num" id="7694428">1</span><span class="op" id="7694429">,</span>&nbsp;<span class="string" id="7694431">&#34;1&#34;</span><span class="op" id="7694434">}</span><span class="op" id="7694435">,</span><br>
<span class="lineno"></span><span class="op" id="7694437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7694440">func</span>&nbsp;<span class="ident" id="7694445">TestFloatString</span><span class="op" id="7694460">(</span><span class="ident" id="7694461">t</span>&nbsp;<span class="op" id="7694463">*</span><span class="ident" id="7694464">testing</span><span class="op" id="7694471">.</span><span class="ident" id="7694472">T</span><span class="op" id="7694473">)</span>&nbsp;<span class="op" id="7694475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694478">for</span>&nbsp;<span class="ident" id="7694482">i</span><span class="op" id="7694483">,</span>&nbsp;<span class="ident" id="7694485">test</span>&nbsp;<span class="op" id="7694490">:=</span>&nbsp;<span class="keyword" id="7694493">range</span>&nbsp;<span class="ident" id="7694499">floatStringTests</span>&nbsp;<span class="op" id="7694516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694520">x</span><span class="op" id="7694521">,</span>&nbsp;<span class="ident" id="7694523">_</span>&nbsp;<span class="op" id="7694525">:=</span>&nbsp;<span class="builtinfunc" id="7694528">new</span><span class="op" id="7694531">(</span><span class="ident" id="7694532">Rat</span><span class="op" id="7694535">)</span><span class="op" id="7694536">.</span><span class="ident" id="7694537">SetString</span><span class="op" id="7694546">(</span><span class="ident" id="7694547">test</span><span class="op" id="7694551">.</span><span class="ident" id="7694552">in</span><span class="op" id="7694554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694559">if</span>&nbsp;<span class="ident" id="7694562">x</span><span class="op" id="7694563">.</span><span class="ident" id="7694564">FloatString</span><span class="op" id="7694575">(</span><span class="ident" id="7694576">test</span><span class="op" id="7694580">.</span><span class="ident" id="7694581">prec</span><span class="op" id="7694585">)</span>&nbsp;<span class="op" id="7694587">!=</span>&nbsp;<span class="ident" id="7694590">test</span><span class="op" id="7694594">.</span><span class="ident" id="7694595">out</span>&nbsp;<span class="op" id="7694599">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694604">t</span><span class="op" id="7694605">.</span><span class="ident" id="7694606">Errorf</span><span class="op" id="7694612">(</span><span class="string" id="7694613">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7694633">,</span>&nbsp;<span class="ident" id="7694635">i</span><span class="op" id="7694636">,</span>&nbsp;<span class="ident" id="7694638">x</span><span class="op" id="7694639">.</span><span class="ident" id="7694640">FloatString</span><span class="op" id="7694651">(</span><span class="ident" id="7694652">test</span><span class="op" id="7694656">.</span><span class="ident" id="7694657">prec</span><span class="op" id="7694661">)</span><span class="op" id="7694662">,</span>&nbsp;<span class="ident" id="7694664">test</span><span class="op" id="7694668">.</span><span class="ident" id="7694669">out</span><span class="op" id="7694672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694679">}</span><br>
<span class="lineno"></span><span class="op" id="7694681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7694684">func</span>&nbsp;<span class="ident" id="7694689">TestRatSign</span><span class="op" id="7694700">(</span><span class="ident" id="7694701">t</span>&nbsp;<span class="op" id="7694703">*</span><span class="ident" id="7694704">testing</span><span class="op" id="7694711">.</span><span class="ident" id="7694712">T</span><span class="op" id="7694713">)</span>&nbsp;<span class="op" id="7694715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694718">zero</span>&nbsp;<span class="op" id="7694723">:=</span>&nbsp;<span class="ident" id="7694726">NewRat</span><span class="op" id="7694732">(</span><span class="num" id="7694733">0</span><span class="op" id="7694734">,</span>&nbsp;<span class="num" id="7694736">1</span><span class="op" id="7694737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694740">for</span>&nbsp;<span class="ident" id="7694744">_</span><span class="op" id="7694745">,</span>&nbsp;<span class="ident" id="7694747">a</span>&nbsp;<span class="op" id="7694749">:=</span>&nbsp;<span class="keyword" id="7694752">range</span>&nbsp;<span class="ident" id="7694758">setStringTests</span>&nbsp;<span class="op" id="7694773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694777">x</span><span class="op" id="7694778">,</span>&nbsp;<span class="ident" id="7694780">ok</span>&nbsp;<span class="op" id="7694783">:=</span>&nbsp;<span class="builtinfunc" id="7694786">new</span><span class="op" id="7694789">(</span><span class="ident" id="7694790">Rat</span><span class="op" id="7694793">)</span><span class="op" id="7694794">.</span><span class="ident" id="7694795">SetString</span><span class="op" id="7694804">(</span><span class="ident" id="7694805">a</span><span class="op" id="7694806">.</span><span class="ident" id="7694807">in</span><span class="op" id="7694809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694813">if</span>&nbsp;<span class="op" id="7694816">!</span><span class="ident" id="7694817">ok</span>&nbsp;<span class="op" id="7694820">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694825">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694840">s</span>&nbsp;<span class="op" id="7694842">:=</span>&nbsp;<span class="ident" id="7694845">x</span><span class="op" id="7694846">.</span><span class="ident" id="7694847">Sign</span><span class="op" id="7694851">(</span><span class="op" id="7694852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694856">e</span>&nbsp;<span class="op" id="7694858">:=</span>&nbsp;<span class="ident" id="7694861">x</span><span class="op" id="7694862">.</span><span class="ident" id="7694863">Cmp</span><span class="op" id="7694866">(</span><span class="ident" id="7694867">zero</span><span class="op" id="7694871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7694875">if</span>&nbsp;<span class="ident" id="7694878">s</span>&nbsp;<span class="op" id="7694880">!=</span>&nbsp;<span class="ident" id="7694883">e</span>&nbsp;<span class="op" id="7694885">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694890">t</span><span class="op" id="7694891">.</span><span class="ident" id="7694892">Errorf</span><span class="op" id="7694898">(</span><span class="string" id="7694899">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7694927">,</span>&nbsp;<span class="ident" id="7694929">s</span><span class="op" id="7694930">,</span>&nbsp;<span class="ident" id="7694932">e</span><span class="op" id="7694933">,</span>&nbsp;<span class="op" id="7694935">&amp;</span><span class="ident" id="7694936">x</span><span class="op" id="7694937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7694944">}</span><br>
<span class="lineno"></span><span class="op" id="7694946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7694949">var</span>&nbsp;<span class="ident" id="7694953">ratCmpTests</span>&nbsp;<span class="op" id="7694965">=</span>&nbsp;<span class="op" id="7694967">[</span><span class="op" id="7694968">]</span><span class="keyword" id="7694969">struct</span>&nbsp;<span class="op" id="7694976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694979">rat1</span><span class="op" id="7694983">,</span>&nbsp;<span class="ident" id="7694985">rat2</span>&nbsp;<span class="builtintype" id="7694990">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7694998">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7695009">int</span><br>
<span class="lineno"></span><span class="op" id="7695013">}</span><span class="op" id="7695014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695017">{</span><span class="string" id="7695018">&#34;0&#34;</span><span class="op" id="7695021">,</span>&nbsp;<span class="string" id="7695023">&#34;0/1&#34;</span><span class="op" id="7695028">,</span>&nbsp;<span class="num" id="7695030">0</span><span class="op" id="7695031">}</span><span class="op" id="7695032">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695035">{</span><span class="string" id="7695036">&#34;1/1&#34;</span><span class="op" id="7695041">,</span>&nbsp;<span class="string" id="7695043">&#34;1&#34;</span><span class="op" id="7695046">,</span>&nbsp;<span class="num" id="7695048">0</span><span class="op" id="7695049">}</span><span class="op" id="7695050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695053">{</span><span class="string" id="7695054">&#34;-1&#34;</span><span class="op" id="7695058">,</span>&nbsp;<span class="string" id="7695060">&#34;-2/2&#34;</span><span class="op" id="7695066">,</span>&nbsp;<span class="num" id="7695068">0</span><span class="op" id="7695069">}</span><span class="op" id="7695070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695073">{</span><span class="string" id="7695074">&#34;1&#34;</span><span class="op" id="7695077">,</span>&nbsp;<span class="string" id="7695079">&#34;0&#34;</span><span class="op" id="7695082">,</span>&nbsp;<span class="num" id="7695084">1</span><span class="op" id="7695085">}</span><span class="op" id="7695086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695089">{</span><span class="string" id="7695090">&#34;0/1&#34;</span><span class="op" id="7695095">,</span>&nbsp;<span class="string" id="7695097">&#34;1/1&#34;</span><span class="op" id="7695102">,</span>&nbsp;<span class="op" id="7695104">-</span><span class="num" id="7695105">1</span><span class="op" id="7695106">}</span><span class="op" id="7695107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695110">{</span><span class="string" id="7695111">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7695138">,</span>&nbsp;<span class="string" id="7695140">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7695167">,</span>&nbsp;<span class="op" id="7695169">-</span><span class="num" id="7695170">1</span><span class="op" id="7695171">}</span><span class="op" id="7695172">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695175">{</span><span class="string" id="7695176">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7695209">,</span>&nbsp;<span class="string" id="7695211">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7695244">,</span>&nbsp;<span class="op" id="7695246">-</span><span class="num" id="7695247">1</span><span class="op" id="7695248">}</span><span class="op" id="7695249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695252">{</span><span class="string" id="7695253">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7695290">,</span>&nbsp;<span class="string" id="7695292">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7695328">,</span>&nbsp;<span class="op" id="7695330">-</span><span class="num" id="7695331">1</span><span class="op" id="7695332">}</span><span class="op" id="7695333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695336">{</span><span class="string" id="7695337">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7695373">,</span>&nbsp;<span class="string" id="7695375">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7695412">,</span>&nbsp;<span class="num" id="7695414">0</span><span class="op" id="7695415">}</span><span class="op" id="7695416">,</span><br>
<span class="lineno"></span><span class="op" id="7695418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7695421">func</span>&nbsp;<span class="ident" id="7695426">TestRatCmp</span><span class="op" id="7695436">(</span><span class="ident" id="7695437">t</span>&nbsp;<span class="op" id="7695439">*</span><span class="ident" id="7695440">testing</span><span class="op" id="7695447">.</span><span class="ident" id="7695448">T</span><span class="op" id="7695449">)</span>&nbsp;<span class="op" id="7695451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695454">for</span>&nbsp;<span class="ident" id="7695458">i</span><span class="op" id="7695459">,</span>&nbsp;<span class="ident" id="7695461">test</span>&nbsp;<span class="op" id="7695466">:=</span>&nbsp;<span class="keyword" id="7695469">range</span>&nbsp;<span class="ident" id="7695475">ratCmpTests</span>&nbsp;<span class="op" id="7695487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695491">x</span><span class="op" id="7695492">,</span>&nbsp;<span class="ident" id="7695494">_</span>&nbsp;<span class="op" id="7695496">:=</span>&nbsp;<span class="builtinfunc" id="7695499">new</span><span class="op" id="7695502">(</span><span class="ident" id="7695503">Rat</span><span class="op" id="7695506">)</span><span class="op" id="7695507">.</span><span class="ident" id="7695508">SetString</span><span class="op" id="7695517">(</span><span class="ident" id="7695518">test</span><span class="op" id="7695522">.</span><span class="ident" id="7695523">rat1</span><span class="op" id="7695527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695531">y</span><span class="op" id="7695532">,</span>&nbsp;<span class="ident" id="7695534">_</span>&nbsp;<span class="op" id="7695536">:=</span>&nbsp;<span class="builtinfunc" id="7695539">new</span><span class="op" id="7695542">(</span><span class="ident" id="7695543">Rat</span><span class="op" id="7695546">)</span><span class="op" id="7695547">.</span><span class="ident" id="7695548">SetString</span><span class="op" id="7695557">(</span><span class="ident" id="7695558">test</span><span class="op" id="7695562">.</span><span class="ident" id="7695563">rat2</span><span class="op" id="7695567">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695572">out</span>&nbsp;<span class="op" id="7695576">:=</span>&nbsp;<span class="ident" id="7695579">x</span><span class="op" id="7695580">.</span><span class="ident" id="7695581">Cmp</span><span class="op" id="7695584">(</span><span class="ident" id="7695585">y</span><span class="op" id="7695586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695590">if</span>&nbsp;<span class="ident" id="7695593">out</span>&nbsp;<span class="op" id="7695597">!=</span>&nbsp;<span class="ident" id="7695600">test</span><span class="op" id="7695604">.</span><span class="ident" id="7695605">out</span>&nbsp;<span class="op" id="7695609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695614">t</span><span class="op" id="7695615">.</span><span class="ident" id="7695616">Errorf</span><span class="op" id="7695622">(</span><span class="string" id="7695623">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7695650">,</span>&nbsp;<span class="ident" id="7695652">i</span><span class="op" id="7695653">,</span>&nbsp;<span class="ident" id="7695655">out</span><span class="op" id="7695658">,</span>&nbsp;<span class="ident" id="7695660">test</span><span class="op" id="7695664">.</span><span class="ident" id="7695665">out</span><span class="op" id="7695668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695675">}</span><br>
<span class="lineno">205</span><span class="op" id="7695677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7695680">func</span>&nbsp;<span class="ident" id="7695685">TestIsInt</span><span class="op" id="7695694">(</span><span class="ident" id="7695695">t</span>&nbsp;<span class="op" id="7695697">*</span><span class="ident" id="7695698">testing</span><span class="op" id="7695705">.</span><span class="ident" id="7695706">T</span><span class="op" id="7695707">)</span>&nbsp;<span class="op" id="7695709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695712">one</span>&nbsp;<span class="op" id="7695716">:=</span>&nbsp;<span class="ident" id="7695719">NewInt</span><span class="op" id="7695725">(</span><span class="num" id="7695726">1</span><span class="op" id="7695727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695730">for</span>&nbsp;<span class="ident" id="7695734">_</span><span class="op" id="7695735">,</span>&nbsp;<span class="ident" id="7695737">a</span>&nbsp;<span class="op" id="7695739">:=</span>&nbsp;<span class="keyword" id="7695742">range</span>&nbsp;<span class="ident" id="7695748">setStringTests</span>&nbsp;<span class="op" id="7695763">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695767">x</span><span class="op" id="7695768">,</span>&nbsp;<span class="ident" id="7695770">ok</span>&nbsp;<span class="op" id="7695773">:=</span>&nbsp;<span class="builtinfunc" id="7695776">new</span><span class="op" id="7695779">(</span><span class="ident" id="7695780">Rat</span><span class="op" id="7695783">)</span><span class="op" id="7695784">.</span><span class="ident" id="7695785">SetString</span><span class="op" id="7695794">(</span><span class="ident" id="7695795">a</span><span class="op" id="7695796">.</span><span class="ident" id="7695797">in</span><span class="op" id="7695799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695803">if</span>&nbsp;<span class="op" id="7695806">!</span><span class="ident" id="7695807">ok</span>&nbsp;<span class="op" id="7695810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695815">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695830">i</span>&nbsp;<span class="op" id="7695832">:=</span>&nbsp;<span class="ident" id="7695835">x</span><span class="op" id="7695836">.</span><span class="ident" id="7695837">IsInt</span><span class="op" id="7695842">(</span><span class="op" id="7695843">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695847">e</span>&nbsp;<span class="op" id="7695849">:=</span>&nbsp;<span class="ident" id="7695852">x</span><span class="op" id="7695853">.</span><span class="ident" id="7695854">Denom</span><span class="op" id="7695859">(</span><span class="op" id="7695860">)</span><span class="op" id="7695861">.</span><span class="ident" id="7695862">Cmp</span><span class="op" id="7695865">(</span><span class="ident" id="7695866">one</span><span class="op" id="7695869">)</span>&nbsp;<span class="op" id="7695871">==</span>&nbsp;<span class="num" id="7695874">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7695878">if</span>&nbsp;<span class="ident" id="7695881">i</span>&nbsp;<span class="op" id="7695883">!=</span>&nbsp;<span class="ident" id="7695886">e</span>&nbsp;<span class="op" id="7695888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695893">t</span><span class="op" id="7695894">.</span><span class="ident" id="7695895">Errorf</span><span class="op" id="7695901">(</span><span class="string" id="7695902">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7695932">,</span>&nbsp;<span class="ident" id="7695934">x</span><span class="op" id="7695935">,</span>&nbsp;<span class="ident" id="7695937">i</span><span class="op" id="7695938">,</span>&nbsp;<span class="ident" id="7695940">e</span><span class="op" id="7695941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7695948">}</span><br>
<span class="lineno">220</span><span class="op" id="7695950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7695953">func</span>&nbsp;<span class="ident" id="7695958">TestRatAbs</span><span class="op" id="7695968">(</span><span class="ident" id="7695969">t</span>&nbsp;<span class="op" id="7695971">*</span><span class="ident" id="7695972">testing</span><span class="op" id="7695979">.</span><span class="ident" id="7695980">T</span><span class="op" id="7695981">)</span>&nbsp;<span class="op" id="7695983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7695986">zero</span>&nbsp;<span class="op" id="7695991">:=</span>&nbsp;<span class="builtinfunc" id="7695994">new</span><span class="op" id="7695997">(</span><span class="ident" id="7695998">Rat</span><span class="op" id="7696001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696004">for</span>&nbsp;<span class="ident" id="7696008">_</span><span class="op" id="7696009">,</span>&nbsp;<span class="ident" id="7696011">a</span>&nbsp;<span class="op" id="7696013">:=</span>&nbsp;<span class="keyword" id="7696016">range</span>&nbsp;<span class="ident" id="7696022">setStringTests</span>&nbsp;<span class="op" id="7696037">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696041">x</span><span class="op" id="7696042">,</span>&nbsp;<span class="ident" id="7696044">ok</span>&nbsp;<span class="op" id="7696047">:=</span>&nbsp;<span class="builtinfunc" id="7696050">new</span><span class="op" id="7696053">(</span><span class="ident" id="7696054">Rat</span><span class="op" id="7696057">)</span><span class="op" id="7696058">.</span><span class="ident" id="7696059">SetString</span><span class="op" id="7696068">(</span><span class="ident" id="7696069">a</span><span class="op" id="7696070">.</span><span class="ident" id="7696071">in</span><span class="op" id="7696073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696077">if</span>&nbsp;<span class="op" id="7696080">!</span><span class="ident" id="7696081">ok</span>&nbsp;<span class="op" id="7696084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696089">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696104">e</span>&nbsp;<span class="op" id="7696106">:=</span>&nbsp;<span class="builtinfunc" id="7696109">new</span><span class="op" id="7696112">(</span><span class="ident" id="7696113">Rat</span><span class="op" id="7696116">)</span><span class="op" id="7696117">.</span><span class="ident" id="7696118">Set</span><span class="op" id="7696121">(</span><span class="ident" id="7696122">x</span><span class="op" id="7696123">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696127">if</span>&nbsp;<span class="ident" id="7696130">e</span><span class="op" id="7696131">.</span><span class="ident" id="7696132">Cmp</span><span class="op" id="7696135">(</span><span class="ident" id="7696136">zero</span><span class="op" id="7696140">)</span>&nbsp;<span class="op" id="7696142">&lt;</span>&nbsp;<span class="num" id="7696144">0</span>&nbsp;<span class="op" id="7696146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696151">e</span><span class="op" id="7696152">.</span><span class="ident" id="7696153">Sub</span><span class="op" id="7696156">(</span><span class="ident" id="7696157">zero</span><span class="op" id="7696161">,</span>&nbsp;<span class="ident" id="7696163">e</span><span class="op" id="7696164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696172">z</span>&nbsp;<span class="op" id="7696174">:=</span>&nbsp;<span class="builtinfunc" id="7696177">new</span><span class="op" id="7696180">(</span><span class="ident" id="7696181">Rat</span><span class="op" id="7696184">)</span><span class="op" id="7696185">.</span><span class="ident" id="7696186">Abs</span><span class="op" id="7696189">(</span><span class="ident" id="7696190">x</span><span class="op" id="7696191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696195">if</span>&nbsp;<span class="ident" id="7696198">z</span><span class="op" id="7696199">.</span><span class="ident" id="7696200">Cmp</span><span class="op" id="7696203">(</span><span class="ident" id="7696204">e</span><span class="op" id="7696205">)</span>&nbsp;<span class="op" id="7696207">!=</span>&nbsp;<span class="num" id="7696210">0</span>&nbsp;<span class="op" id="7696212">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696217">t</span><span class="op" id="7696218">.</span><span class="ident" id="7696219">Errorf</span><span class="op" id="7696225">(</span><span class="string" id="7696226">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7696253">,</span>&nbsp;<span class="ident" id="7696255">x</span><span class="op" id="7696256">,</span>&nbsp;<span class="ident" id="7696258">z</span><span class="op" id="7696259">,</span>&nbsp;<span class="ident" id="7696261">e</span><span class="op" id="7696262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696269">}</span><br>
<span class="lineno"></span><span class="op" id="7696271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7696274">func</span>&nbsp;<span class="ident" id="7696279">TestRatNeg</span><span class="op" id="7696289">(</span><span class="ident" id="7696290">t</span>&nbsp;<span class="op" id="7696292">*</span><span class="ident" id="7696293">testing</span><span class="op" id="7696300">.</span><span class="ident" id="7696301">T</span><span class="op" id="7696302">)</span>&nbsp;<span class="op" id="7696304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696307">zero</span>&nbsp;<span class="op" id="7696312">:=</span>&nbsp;<span class="builtinfunc" id="7696315">new</span><span class="op" id="7696318">(</span><span class="ident" id="7696319">Rat</span><span class="op" id="7696322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696325">for</span>&nbsp;<span class="ident" id="7696329">_</span><span class="op" id="7696330">,</span>&nbsp;<span class="ident" id="7696332">a</span>&nbsp;<span class="op" id="7696334">:=</span>&nbsp;<span class="keyword" id="7696337">range</span>&nbsp;<span class="ident" id="7696343">setStringTests</span>&nbsp;<span class="op" id="7696358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696362">x</span><span class="op" id="7696363">,</span>&nbsp;<span class="ident" id="7696365">ok</span>&nbsp;<span class="op" id="7696368">:=</span>&nbsp;<span class="builtinfunc" id="7696371">new</span><span class="op" id="7696374">(</span><span class="ident" id="7696375">Rat</span><span class="op" id="7696378">)</span><span class="op" id="7696379">.</span><span class="ident" id="7696380">SetString</span><span class="op" id="7696389">(</span><span class="ident" id="7696390">a</span><span class="op" id="7696391">.</span><span class="ident" id="7696392">in</span><span class="op" id="7696394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696398">if</span>&nbsp;<span class="op" id="7696401">!</span><span class="ident" id="7696402">ok</span>&nbsp;<span class="op" id="7696405">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696425">e</span>&nbsp;<span class="op" id="7696427">:=</span>&nbsp;<span class="builtinfunc" id="7696430">new</span><span class="op" id="7696433">(</span><span class="ident" id="7696434">Rat</span><span class="op" id="7696437">)</span><span class="op" id="7696438">.</span><span class="ident" id="7696439">Sub</span><span class="op" id="7696442">(</span><span class="ident" id="7696443">zero</span><span class="op" id="7696447">,</span>&nbsp;<span class="ident" id="7696449">x</span><span class="op" id="7696450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696454">z</span>&nbsp;<span class="op" id="7696456">:=</span>&nbsp;<span class="builtinfunc" id="7696459">new</span><span class="op" id="7696462">(</span><span class="ident" id="7696463">Rat</span><span class="op" id="7696466">)</span><span class="op" id="7696467">.</span><span class="ident" id="7696468">Neg</span><span class="op" id="7696471">(</span><span class="ident" id="7696472">x</span><span class="op" id="7696473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696477">if</span>&nbsp;<span class="ident" id="7696480">z</span><span class="op" id="7696481">.</span><span class="ident" id="7696482">Cmp</span><span class="op" id="7696485">(</span><span class="ident" id="7696486">e</span><span class="op" id="7696487">)</span>&nbsp;<span class="op" id="7696489">!=</span>&nbsp;<span class="num" id="7696492">0</span>&nbsp;<span class="op" id="7696494">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696499">t</span><span class="op" id="7696500">.</span><span class="ident" id="7696501">Errorf</span><span class="op" id="7696507">(</span><span class="string" id="7696508">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7696535">,</span>&nbsp;<span class="ident" id="7696537">x</span><span class="op" id="7696538">,</span>&nbsp;<span class="ident" id="7696540">z</span><span class="op" id="7696541">,</span>&nbsp;<span class="ident" id="7696543">e</span><span class="op" id="7696544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696551">}</span><br>
<span class="lineno"></span><span class="op" id="7696553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7696556">func</span>&nbsp;<span class="ident" id="7696561">TestRatInv</span><span class="op" id="7696571">(</span><span class="ident" id="7696572">t</span>&nbsp;<span class="op" id="7696574">*</span><span class="ident" id="7696575">testing</span><span class="op" id="7696582">.</span><span class="ident" id="7696583">T</span><span class="op" id="7696584">)</span>&nbsp;<span class="op" id="7696586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696589">zero</span>&nbsp;<span class="op" id="7696594">:=</span>&nbsp;<span class="builtinfunc" id="7696597">new</span><span class="op" id="7696600">(</span><span class="ident" id="7696601">Rat</span><span class="op" id="7696604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696607">for</span>&nbsp;<span class="ident" id="7696611">_</span><span class="op" id="7696612">,</span>&nbsp;<span class="ident" id="7696614">a</span>&nbsp;<span class="op" id="7696616">:=</span>&nbsp;<span class="keyword" id="7696619">range</span>&nbsp;<span class="ident" id="7696625">setStringTests</span>&nbsp;<span class="op" id="7696640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696644">x</span><span class="op" id="7696645">,</span>&nbsp;<span class="ident" id="7696647">ok</span>&nbsp;<span class="op" id="7696650">:=</span>&nbsp;<span class="builtinfunc" id="7696653">new</span><span class="op" id="7696656">(</span><span class="ident" id="7696657">Rat</span><span class="op" id="7696660">)</span><span class="op" id="7696661">.</span><span class="ident" id="7696662">SetString</span><span class="op" id="7696671">(</span><span class="ident" id="7696672">a</span><span class="op" id="7696673">.</span><span class="ident" id="7696674">in</span><span class="op" id="7696676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696680">if</span>&nbsp;<span class="op" id="7696683">!</span><span class="ident" id="7696684">ok</span>&nbsp;<span class="op" id="7696687">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696692">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696707">if</span>&nbsp;<span class="ident" id="7696710">x</span><span class="op" id="7696711">.</span><span class="ident" id="7696712">Cmp</span><span class="op" id="7696715">(</span><span class="ident" id="7696716">zero</span><span class="op" id="7696720">)</span>&nbsp;<span class="op" id="7696722">==</span>&nbsp;<span class="num" id="7696725">0</span>&nbsp;<span class="op" id="7696727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696732">continue</span>&nbsp;<span class="comment" id="7696741">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696769">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696773">e</span>&nbsp;<span class="op" id="7696775">:=</span>&nbsp;<span class="builtinfunc" id="7696778">new</span><span class="op" id="7696781">(</span><span class="ident" id="7696782">Rat</span><span class="op" id="7696785">)</span><span class="op" id="7696786">.</span><span class="ident" id="7696787">SetFrac</span><span class="op" id="7696794">(</span><span class="ident" id="7696795">x</span><span class="op" id="7696796">.</span><span class="ident" id="7696797">Denom</span><span class="op" id="7696802">(</span><span class="op" id="7696803">)</span><span class="op" id="7696804">,</span>&nbsp;<span class="ident" id="7696806">x</span><span class="op" id="7696807">.</span><span class="ident" id="7696808">Num</span><span class="op" id="7696811">(</span><span class="op" id="7696812">)</span><span class="op" id="7696813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696817">z</span>&nbsp;<span class="op" id="7696819">:=</span>&nbsp;<span class="builtinfunc" id="7696822">new</span><span class="op" id="7696825">(</span><span class="ident" id="7696826">Rat</span><span class="op" id="7696829">)</span><span class="op" id="7696830">.</span><span class="ident" id="7696831">Inv</span><span class="op" id="7696834">(</span><span class="ident" id="7696835">x</span><span class="op" id="7696836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7696840">if</span>&nbsp;<span class="ident" id="7696843">z</span><span class="op" id="7696844">.</span><span class="ident" id="7696845">Cmp</span><span class="op" id="7696848">(</span><span class="ident" id="7696849">e</span><span class="op" id="7696850">)</span>&nbsp;<span class="op" id="7696852">!=</span>&nbsp;<span class="num" id="7696855">0</span>&nbsp;<span class="op" id="7696857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696862">t</span><span class="op" id="7696863">.</span><span class="ident" id="7696864">Errorf</span><span class="op" id="7696870">(</span><span class="string" id="7696871">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7696898">,</span>&nbsp;<span class="ident" id="7696900">x</span><span class="op" id="7696901">,</span>&nbsp;<span class="ident" id="7696903">z</span><span class="op" id="7696904">,</span>&nbsp;<span class="ident" id="7696906">e</span><span class="op" id="7696907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696911">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7696914">}</span><br>
<span class="lineno"></span><span class="op" id="7696916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696919">type</span>&nbsp;<span class="ident" id="7696924">ratBinFun</span>&nbsp;<span class="keyword" id="7696934">func</span><span class="op" id="7696938">(</span><span class="ident" id="7696939">z</span><span class="op" id="7696940">,</span>&nbsp;<span class="ident" id="7696942">x</span><span class="op" id="7696943">,</span>&nbsp;<span class="ident" id="7696945">y</span>&nbsp;<span class="op" id="7696947">*</span><span class="ident" id="7696948">Rat</span><span class="op" id="7696951">)</span>&nbsp;<span class="op" id="7696953">*</span><span class="ident" id="7696954">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7696958">type</span>&nbsp;<span class="ident" id="7696963">ratBinArg</span>&nbsp;<span class="keyword" id="7696973">struct</span>&nbsp;<span class="op" id="7696980">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7696983">x</span><span class="op" id="7696984">,</span>&nbsp;<span class="ident" id="7696986">y</span><span class="op" id="7696987">,</span>&nbsp;<span class="ident" id="7696989">z</span>&nbsp;<span class="builtintype" id="7696991">string</span><br>
<span class="lineno"></span><span class="op" id="7696998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697001">func</span>&nbsp;<span class="ident" id="7697006">testRatBin</span><span class="op" id="7697016">(</span><span class="ident" id="7697017">t</span>&nbsp;<span class="op" id="7697019">*</span><span class="ident" id="7697020">testing</span><span class="op" id="7697027">.</span><span class="ident" id="7697028">T</span><span class="op" id="7697029">,</span>&nbsp;<span class="ident" id="7697031">i</span>&nbsp;<span class="builtintype" id="7697033">int</span><span class="op" id="7697036">,</span>&nbsp;<span class="ident" id="7697038">name</span>&nbsp;<span class="builtintype" id="7697043">string</span><span class="op" id="7697049">,</span>&nbsp;<span class="ident" id="7697051">f</span>&nbsp;<span class="ident" id="7697053">ratBinFun</span><span class="op" id="7697062">,</span>&nbsp;<span class="ident" id="7697064">a</span>&nbsp;<span class="ident" id="7697066">ratBinArg</span><span class="op" id="7697075">)</span>&nbsp;<span class="op" id="7697077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697080">x</span><span class="op" id="7697081">,</span>&nbsp;<span class="ident" id="7697083">_</span>&nbsp;<span class="op" id="7697085">:=</span>&nbsp;<span class="builtinfunc" id="7697088">new</span><span class="op" id="7697091">(</span><span class="ident" id="7697092">Rat</span><span class="op" id="7697095">)</span><span class="op" id="7697096">.</span><span class="ident" id="7697097">SetString</span><span class="op" id="7697106">(</span><span class="ident" id="7697107">a</span><span class="op" id="7697108">.</span><span class="ident" id="7697109">x</span><span class="op" id="7697110">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697113">y</span><span class="op" id="7697114">,</span>&nbsp;<span class="ident" id="7697116">_</span>&nbsp;<span class="op" id="7697118">:=</span>&nbsp;<span class="builtinfunc" id="7697121">new</span><span class="op" id="7697124">(</span><span class="ident" id="7697125">Rat</span><span class="op" id="7697128">)</span><span class="op" id="7697129">.</span><span class="ident" id="7697130">SetString</span><span class="op" id="7697139">(</span><span class="ident" id="7697140">a</span><span class="op" id="7697141">.</span><span class="ident" id="7697142">y</span><span class="op" id="7697143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697146">z</span><span class="op" id="7697147">,</span>&nbsp;<span class="ident" id="7697149">_</span>&nbsp;<span class="op" id="7697151">:=</span>&nbsp;<span class="builtinfunc" id="7697154">new</span><span class="op" id="7697157">(</span><span class="ident" id="7697158">Rat</span><span class="op" id="7697161">)</span><span class="op" id="7697162">.</span><span class="ident" id="7697163">SetString</span><span class="op" id="7697172">(</span><span class="ident" id="7697173">a</span><span class="op" id="7697174">.</span><span class="ident" id="7697175">z</span><span class="op" id="7697176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697179">out</span>&nbsp;<span class="op" id="7697183">:=</span>&nbsp;<span class="ident" id="7697186">f</span><span class="op" id="7697187">(</span><span class="builtinfunc" id="7697188">new</span><span class="op" id="7697191">(</span><span class="ident" id="7697192">Rat</span><span class="op" id="7697195">)</span><span class="op" id="7697196">,</span>&nbsp;<span class="ident" id="7697198">x</span><span class="op" id="7697199">,</span>&nbsp;<span class="ident" id="7697201">y</span><span class="op" id="7697202">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7697206">if</span>&nbsp;<span class="ident" id="7697209">out</span><span class="op" id="7697212">.</span><span class="ident" id="7697213">Cmp</span><span class="op" id="7697216">(</span><span class="ident" id="7697217">z</span><span class="op" id="7697218">)</span>&nbsp;<span class="op" id="7697220">!=</span>&nbsp;<span class="num" id="7697223">0</span>&nbsp;<span class="op" id="7697225">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697229">t</span><span class="op" id="7697230">.</span><span class="ident" id="7697231">Errorf</span><span class="op" id="7697237">(</span><span class="string" id="7697238">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7697261">,</span>&nbsp;<span class="ident" id="7697263">name</span><span class="op" id="7697267">,</span>&nbsp;<span class="ident" id="7697269">i</span><span class="op" id="7697270">,</span>&nbsp;<span class="ident" id="7697272">out</span><span class="op" id="7697275">,</span>&nbsp;<span class="ident" id="7697277">z</span><span class="op" id="7697278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697281">}</span><br>
<span class="lineno"></span><span class="op" id="7697283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697286">var</span>&nbsp;<span class="ident" id="7697290">ratBinTests</span>&nbsp;<span class="op" id="7697302">=</span>&nbsp;<span class="op" id="7697304">[</span><span class="op" id="7697305">]</span><span class="keyword" id="7697306">struct</span>&nbsp;<span class="op" id="7697313">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697316">x</span><span class="op" id="7697317">,</span>&nbsp;<span class="ident" id="7697319">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7697326">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7697334">sum</span><span class="op" id="7697337">,</span>&nbsp;<span class="ident" id="7697339">prod</span>&nbsp;<span class="builtintype" id="7697344">string</span><br>
<span class="lineno"></span><span class="op" id="7697351">}</span><span class="op" id="7697352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697355">{</span><span class="string" id="7697356">&#34;0&#34;</span><span class="op" id="7697359">,</span>&nbsp;<span class="string" id="7697361">&#34;0&#34;</span><span class="op" id="7697364">,</span>&nbsp;<span class="string" id="7697366">&#34;0&#34;</span><span class="op" id="7697369">,</span>&nbsp;<span class="string" id="7697371">&#34;0&#34;</span><span class="op" id="7697374">}</span><span class="op" id="7697375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697378">{</span><span class="string" id="7697379">&#34;0&#34;</span><span class="op" id="7697382">,</span>&nbsp;<span class="string" id="7697384">&#34;1&#34;</span><span class="op" id="7697387">,</span>&nbsp;<span class="string" id="7697389">&#34;1&#34;</span><span class="op" id="7697392">,</span>&nbsp;<span class="string" id="7697394">&#34;0&#34;</span><span class="op" id="7697397">}</span><span class="op" id="7697398">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697401">{</span><span class="string" id="7697402">&#34;-1&#34;</span><span class="op" id="7697406">,</span>&nbsp;<span class="string" id="7697408">&#34;0&#34;</span><span class="op" id="7697411">,</span>&nbsp;<span class="string" id="7697413">&#34;-1&#34;</span><span class="op" id="7697417">,</span>&nbsp;<span class="string" id="7697419">&#34;0&#34;</span><span class="op" id="7697422">}</span><span class="op" id="7697423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697426">{</span><span class="string" id="7697427">&#34;-1&#34;</span><span class="op" id="7697431">,</span>&nbsp;<span class="string" id="7697433">&#34;1&#34;</span><span class="op" id="7697436">,</span>&nbsp;<span class="string" id="7697438">&#34;0&#34;</span><span class="op" id="7697441">,</span>&nbsp;<span class="string" id="7697443">&#34;-1&#34;</span><span class="op" id="7697447">}</span><span class="op" id="7697448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697451">{</span><span class="string" id="7697452">&#34;1&#34;</span><span class="op" id="7697455">,</span>&nbsp;<span class="string" id="7697457">&#34;1&#34;</span><span class="op" id="7697460">,</span>&nbsp;<span class="string" id="7697462">&#34;2&#34;</span><span class="op" id="7697465">,</span>&nbsp;<span class="string" id="7697467">&#34;1&#34;</span><span class="op" id="7697470">}</span><span class="op" id="7697471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697474">{</span><span class="string" id="7697475">&#34;1/2&#34;</span><span class="op" id="7697480">,</span>&nbsp;<span class="string" id="7697482">&#34;1/2&#34;</span><span class="op" id="7697487">,</span>&nbsp;<span class="string" id="7697489">&#34;1&#34;</span><span class="op" id="7697492">,</span>&nbsp;<span class="string" id="7697494">&#34;1/4&#34;</span><span class="op" id="7697499">}</span><span class="op" id="7697500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697503">{</span><span class="string" id="7697504">&#34;1/4&#34;</span><span class="op" id="7697509">,</span>&nbsp;<span class="string" id="7697511">&#34;1/3&#34;</span><span class="op" id="7697516">,</span>&nbsp;<span class="string" id="7697518">&#34;7/12&#34;</span><span class="op" id="7697524">,</span>&nbsp;<span class="string" id="7697526">&#34;1/12&#34;</span><span class="op" id="7697532">}</span><span class="op" id="7697533">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697536">{</span><span class="string" id="7697537">&#34;2/5&#34;</span><span class="op" id="7697542">,</span>&nbsp;<span class="string" id="7697544">&#34;-14/3&#34;</span><span class="op" id="7697551">,</span>&nbsp;<span class="string" id="7697553">&#34;-64/15&#34;</span><span class="op" id="7697561">,</span>&nbsp;<span class="string" id="7697563">&#34;-28/15&#34;</span><span class="op" id="7697571">}</span><span class="op" id="7697572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697575">{</span><span class="string" id="7697576">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7697603">,</span>&nbsp;<span class="string" id="7697605">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7697633">,</span>&nbsp;<span class="string" id="7697635">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7697701">,</span>&nbsp;<span class="string" id="7697703">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7697753">}</span><span class="op" id="7697754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697757">{</span><span class="string" id="7697758">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7697783">,</span>&nbsp;<span class="string" id="7697785">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7697810">,</span>&nbsp;<span class="string" id="7697812">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7697838">,</span>&nbsp;<span class="string" id="7697840">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7697883">}</span><span class="op" id="7697884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7697887">{</span><span class="string" id="7697888">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7697950">,</span>&nbsp;<span class="string" id="7697952">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7697978">,</span>&nbsp;<span class="string" id="7697980">&#34;-27/133467566250814981&#34;</span><span class="op" id="7698004">,</span>&nbsp;<span class="string" id="7698006">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7698089">}</span><span class="op" id="7698090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698093">{</span><span class="string" id="7698094">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7698153">,</span>&nbsp;<span class="string" id="7698155">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7698188">,</span>&nbsp;<span class="string" id="7698190">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7698224">,</span>&nbsp;<span class="string" id="7698226">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7698313">}</span><span class="op" id="7698314">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698317">{</span><span class="string" id="7698318">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7698343">,</span>&nbsp;<span class="string" id="7698345">&#34;5/2848423294177090248&#34;</span><span class="op" id="7698368">,</span>&nbsp;<span class="string" id="7698370">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7698430">,</span>&nbsp;<span class="string" id="7698432">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7698475">}</span><span class="op" id="7698476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698479">{</span><span class="string" id="7698480">&#34;26946729/330400702820&#34;</span><span class="op" id="7698503">,</span>&nbsp;<span class="string" id="7698505">&#34;41563965/225583428284&#34;</span><span class="op" id="7698528">,</span>&nbsp;<span class="string" id="7698530">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7698574">,</span>&nbsp;<span class="string" id="7698576">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7698617">}</span><span class="op" id="7698618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698621">{</span><span class="string" id="7698622">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7698646">,</span>&nbsp;<span class="string" id="7698648">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7698692">,</span>&nbsp;<span class="string" id="7698694">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7698758">,</span>&nbsp;<span class="string" id="7698760">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7698823">}</span><span class="op" id="7698824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698827">{</span><span class="string" id="7698828">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7698868">,</span>&nbsp;<span class="string" id="7698870">&#34;29/712593081308&#34;</span><span class="op" id="7698887">,</span>&nbsp;<span class="string" id="7698889">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7698952">,</span>&nbsp;<span class="string" id="7698954">&#34;808/45524274987585732633&#34;</span><span class="op" id="7698980">}</span><span class="op" id="7698981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7698984">{</span><span class="string" id="7698985">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7699026">,</span>&nbsp;<span class="string" id="7699028">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7699054">,</span>&nbsp;<span class="string" id="7699056">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7699127">,</span>&nbsp;<span class="string" id="7699129">&#34;8967230/3296219033&#34;</span><span class="op" id="7699149">}</span><span class="op" id="7699150">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7699153">{</span><span class="string" id="7699154">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7699201">,</span>&nbsp;<span class="string" id="7699203">&#34;9381566963714/9633539&#34;</span><span class="op" id="7699226">,</span>&nbsp;<span class="string" id="7699228">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7699297">,</span>&nbsp;<span class="string" id="7699299">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7699326">}</span><span class="op" id="7699327">,</span><br>
<span class="lineno"></span><span class="op" id="7699329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7699332">func</span>&nbsp;<span class="ident" id="7699337">TestRatBin</span><span class="op" id="7699347">(</span><span class="ident" id="7699348">t</span>&nbsp;<span class="op" id="7699350">*</span><span class="ident" id="7699351">testing</span><span class="op" id="7699358">.</span><span class="ident" id="7699359">T</span><span class="op" id="7699360">)</span>&nbsp;<span class="op" id="7699362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7699365">for</span>&nbsp;<span class="ident" id="7699369">i</span><span class="op" id="7699370">,</span>&nbsp;<span class="ident" id="7699372">test</span>&nbsp;<span class="op" id="7699377">:=</span>&nbsp;<span class="keyword" id="7699380">range</span>&nbsp;<span class="ident" id="7699386">ratBinTests</span>&nbsp;<span class="op" id="7699398">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699402">arg</span>&nbsp;<span class="op" id="7699406">:=</span>&nbsp;<span class="ident" id="7699409">ratBinArg</span><span class="op" id="7699418">{</span><span class="ident" id="7699419">test</span><span class="op" id="7699423">.</span><span class="ident" id="7699424">x</span><span class="op" id="7699425">,</span>&nbsp;<span class="ident" id="7699427">test</span><span class="op" id="7699431">.</span><span class="ident" id="7699432">y</span><span class="op" id="7699433">,</span>&nbsp;<span class="ident" id="7699435">test</span><span class="op" id="7699439">.</span><span class="ident" id="7699440">sum</span><span class="op" id="7699443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699447">testRatBin</span><span class="op" id="7699457">(</span><span class="ident" id="7699458">t</span><span class="op" id="7699459">,</span>&nbsp;<span class="ident" id="7699461">i</span><span class="op" id="7699462">,</span>&nbsp;<span class="string" id="7699464">&#34;Add&#34;</span><span class="op" id="7699469">,</span>&nbsp;<span class="op" id="7699471">(</span><span class="op" id="7699472">*</span><span class="ident" id="7699473">Rat</span><span class="op" id="7699476">)</span><span class="op" id="7699477">.</span><span class="ident" id="7699478">Add</span><span class="op" id="7699481">,</span>&nbsp;<span class="ident" id="7699483">arg</span><span class="op" id="7699486">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699491">arg</span>&nbsp;<span class="op" id="7699495">=</span>&nbsp;<span class="ident" id="7699497">ratBinArg</span><span class="op" id="7699506">{</span><span class="ident" id="7699507">test</span><span class="op" id="7699511">.</span><span class="ident" id="7699512">y</span><span class="op" id="7699513">,</span>&nbsp;<span class="ident" id="7699515">test</span><span class="op" id="7699519">.</span><span class="ident" id="7699520">x</span><span class="op" id="7699521">,</span>&nbsp;<span class="ident" id="7699523">test</span><span class="op" id="7699527">.</span><span class="ident" id="7699528">sum</span><span class="op" id="7699531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699535">testRatBin</span><span class="op" id="7699545">(</span><span class="ident" id="7699546">t</span><span class="op" id="7699547">,</span>&nbsp;<span class="ident" id="7699549">i</span><span class="op" id="7699550">,</span>&nbsp;<span class="string" id="7699552">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7699567">,</span>&nbsp;<span class="op" id="7699569">(</span><span class="op" id="7699570">*</span><span class="ident" id="7699571">Rat</span><span class="op" id="7699574">)</span><span class="op" id="7699575">.</span><span class="ident" id="7699576">Add</span><span class="op" id="7699579">,</span>&nbsp;<span class="ident" id="7699581">arg</span><span class="op" id="7699584">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699589">arg</span>&nbsp;<span class="op" id="7699593">=</span>&nbsp;<span class="ident" id="7699595">ratBinArg</span><span class="op" id="7699604">{</span><span class="ident" id="7699605">test</span><span class="op" id="7699609">.</span><span class="ident" id="7699610">sum</span><span class="op" id="7699613">,</span>&nbsp;<span class="ident" id="7699615">test</span><span class="op" id="7699619">.</span><span class="ident" id="7699620">x</span><span class="op" id="7699621">,</span>&nbsp;<span class="ident" id="7699623">test</span><span class="op" id="7699627">.</span><span class="ident" id="7699628">y</span><span class="op" id="7699629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699633">testRatBin</span><span class="op" id="7699643">(</span><span class="ident" id="7699644">t</span><span class="op" id="7699645">,</span>&nbsp;<span class="ident" id="7699647">i</span><span class="op" id="7699648">,</span>&nbsp;<span class="string" id="7699650">&#34;Sub&#34;</span><span class="op" id="7699655">,</span>&nbsp;<span class="op" id="7699657">(</span><span class="op" id="7699658">*</span><span class="ident" id="7699659">Rat</span><span class="op" id="7699662">)</span><span class="op" id="7699663">.</span><span class="ident" id="7699664">Sub</span><span class="op" id="7699667">,</span>&nbsp;<span class="ident" id="7699669">arg</span><span class="op" id="7699672">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699677">arg</span>&nbsp;<span class="op" id="7699681">=</span>&nbsp;<span class="ident" id="7699683">ratBinArg</span><span class="op" id="7699692">{</span><span class="ident" id="7699693">test</span><span class="op" id="7699697">.</span><span class="ident" id="7699698">sum</span><span class="op" id="7699701">,</span>&nbsp;<span class="ident" id="7699703">test</span><span class="op" id="7699707">.</span><span class="ident" id="7699708">y</span><span class="op" id="7699709">,</span>&nbsp;<span class="ident" id="7699711">test</span><span class="op" id="7699715">.</span><span class="ident" id="7699716">x</span><span class="op" id="7699717">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699721">testRatBin</span><span class="op" id="7699731">(</span><span class="ident" id="7699732">t</span><span class="op" id="7699733">,</span>&nbsp;<span class="ident" id="7699735">i</span><span class="op" id="7699736">,</span>&nbsp;<span class="string" id="7699738">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7699753">,</span>&nbsp;<span class="op" id="7699755">(</span><span class="op" id="7699756">*</span><span class="ident" id="7699757">Rat</span><span class="op" id="7699760">)</span><span class="op" id="7699761">.</span><span class="ident" id="7699762">Sub</span><span class="op" id="7699765">,</span>&nbsp;<span class="ident" id="7699767">arg</span><span class="op" id="7699770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699775">arg</span>&nbsp;<span class="op" id="7699779">=</span>&nbsp;<span class="ident" id="7699781">ratBinArg</span><span class="op" id="7699790">{</span><span class="ident" id="7699791">test</span><span class="op" id="7699795">.</span><span class="ident" id="7699796">x</span><span class="op" id="7699797">,</span>&nbsp;<span class="ident" id="7699799">test</span><span class="op" id="7699803">.</span><span class="ident" id="7699804">y</span><span class="op" id="7699805">,</span>&nbsp;<span class="ident" id="7699807">test</span><span class="op" id="7699811">.</span><span class="ident" id="7699812">prod</span><span class="op" id="7699816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699820">testRatBin</span><span class="op" id="7699830">(</span><span class="ident" id="7699831">t</span><span class="op" id="7699832">,</span>&nbsp;<span class="ident" id="7699834">i</span><span class="op" id="7699835">,</span>&nbsp;<span class="string" id="7699837">&#34;Mul&#34;</span><span class="op" id="7699842">,</span>&nbsp;<span class="op" id="7699844">(</span><span class="op" id="7699845">*</span><span class="ident" id="7699846">Rat</span><span class="op" id="7699849">)</span><span class="op" id="7699850">.</span><span class="ident" id="7699851">Mul</span><span class="op" id="7699854">,</span>&nbsp;<span class="ident" id="7699856">arg</span><span class="op" id="7699859">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699864">arg</span>&nbsp;<span class="op" id="7699868">=</span>&nbsp;<span class="ident" id="7699870">ratBinArg</span><span class="op" id="7699879">{</span><span class="ident" id="7699880">test</span><span class="op" id="7699884">.</span><span class="ident" id="7699885">y</span><span class="op" id="7699886">,</span>&nbsp;<span class="ident" id="7699888">test</span><span class="op" id="7699892">.</span><span class="ident" id="7699893">x</span><span class="op" id="7699894">,</span>&nbsp;<span class="ident" id="7699896">test</span><span class="op" id="7699900">.</span><span class="ident" id="7699901">prod</span><span class="op" id="7699905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699909">testRatBin</span><span class="op" id="7699919">(</span><span class="ident" id="7699920">t</span><span class="op" id="7699921">,</span>&nbsp;<span class="ident" id="7699923">i</span><span class="op" id="7699924">,</span>&nbsp;<span class="string" id="7699926">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7699941">,</span>&nbsp;<span class="op" id="7699943">(</span><span class="op" id="7699944">*</span><span class="ident" id="7699945">Rat</span><span class="op" id="7699948">)</span><span class="op" id="7699949">.</span><span class="ident" id="7699950">Mul</span><span class="op" id="7699953">,</span>&nbsp;<span class="ident" id="7699955">arg</span><span class="op" id="7699958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7699963">if</span>&nbsp;<span class="ident" id="7699966">test</span><span class="op" id="7699970">.</span><span class="ident" id="7699971">x</span>&nbsp;<span class="op" id="7699973">!=</span>&nbsp;<span class="string" id="7699976">&#34;0&#34;</span>&nbsp;<span class="op" id="7699980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7699985">arg</span>&nbsp;<span class="op" id="7699989">=</span>&nbsp;<span class="ident" id="7699991">ratBinArg</span><span class="op" id="7700000">{</span><span class="ident" id="7700001">test</span><span class="op" id="7700005">.</span><span class="ident" id="7700006">prod</span><span class="op" id="7700010">,</span>&nbsp;<span class="ident" id="7700012">test</span><span class="op" id="7700016">.</span><span class="ident" id="7700017">x</span><span class="op" id="7700018">,</span>&nbsp;<span class="ident" id="7700020">test</span><span class="op" id="7700024">.</span><span class="ident" id="7700025">y</span><span class="op" id="7700026">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700031">testRatBin</span><span class="op" id="7700041">(</span><span class="ident" id="7700042">t</span><span class="op" id="7700043">,</span>&nbsp;<span class="ident" id="7700045">i</span><span class="op" id="7700046">,</span>&nbsp;<span class="string" id="7700048">&#34;Quo&#34;</span><span class="op" id="7700053">,</span>&nbsp;<span class="op" id="7700055">(</span><span class="op" id="7700056">*</span><span class="ident" id="7700057">Rat</span><span class="op" id="7700060">)</span><span class="op" id="7700061">.</span><span class="ident" id="7700062">Quo</span><span class="op" id="7700065">,</span>&nbsp;<span class="ident" id="7700067">arg</span><span class="op" id="7700070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700079">if</span>&nbsp;<span class="ident" id="7700082">test</span><span class="op" id="7700086">.</span><span class="ident" id="7700087">y</span>&nbsp;<span class="op" id="7700089">!=</span>&nbsp;<span class="string" id="7700092">&#34;0&#34;</span>&nbsp;<span class="op" id="7700096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700101">arg</span>&nbsp;<span class="op" id="7700105">=</span>&nbsp;<span class="ident" id="7700107">ratBinArg</span><span class="op" id="7700116">{</span><span class="ident" id="7700117">test</span><span class="op" id="7700121">.</span><span class="ident" id="7700122">prod</span><span class="op" id="7700126">,</span>&nbsp;<span class="ident" id="7700128">test</span><span class="op" id="7700132">.</span><span class="ident" id="7700133">y</span><span class="op" id="7700134">,</span>&nbsp;<span class="ident" id="7700136">test</span><span class="op" id="7700140">.</span><span class="ident" id="7700141">x</span><span class="op" id="7700142">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700147">testRatBin</span><span class="op" id="7700157">(</span><span class="ident" id="7700158">t</span><span class="op" id="7700159">,</span>&nbsp;<span class="ident" id="7700161">i</span><span class="op" id="7700162">,</span>&nbsp;<span class="string" id="7700164">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7700179">,</span>&nbsp;<span class="op" id="7700181">(</span><span class="op" id="7700182">*</span><span class="ident" id="7700183">Rat</span><span class="op" id="7700186">)</span><span class="op" id="7700187">.</span><span class="ident" id="7700188">Quo</span><span class="op" id="7700191">,</span>&nbsp;<span class="ident" id="7700193">arg</span><span class="op" id="7700196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700203">}</span><br>
<span class="lineno"></span><span class="op" id="7700205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7700208">func</span>&nbsp;<span class="ident" id="7700213">TestIssue820</span><span class="op" id="7700225">(</span><span class="ident" id="7700226">t</span>&nbsp;<span class="op" id="7700228">*</span><span class="ident" id="7700229">testing</span><span class="op" id="7700236">.</span><span class="ident" id="7700237">T</span><span class="op" id="7700238">)</span>&nbsp;<span class="op" id="7700240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700243">x</span>&nbsp;<span class="op" id="7700245">:=</span>&nbsp;<span class="ident" id="7700248">NewRat</span><span class="op" id="7700254">(</span><span class="num" id="7700255">3</span><span class="op" id="7700256">,</span>&nbsp;<span class="num" id="7700258">1</span><span class="op" id="7700259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700262">y</span>&nbsp;<span class="op" id="7700264">:=</span>&nbsp;<span class="ident" id="7700267">NewRat</span><span class="op" id="7700273">(</span><span class="num" id="7700274">2</span><span class="op" id="7700275">,</span>&nbsp;<span class="num" id="7700277">1</span><span class="op" id="7700278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700281">z</span>&nbsp;<span class="op" id="7700283">:=</span>&nbsp;<span class="ident" id="7700286">y</span><span class="op" id="7700287">.</span><span class="ident" id="7700288">Quo</span><span class="op" id="7700291">(</span><span class="ident" id="7700292">x</span><span class="op" id="7700293">,</span>&nbsp;<span class="ident" id="7700295">y</span><span class="op" id="7700296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700299">q</span>&nbsp;<span class="op" id="7700301">:=</span>&nbsp;<span class="ident" id="7700304">NewRat</span><span class="op" id="7700310">(</span><span class="num" id="7700311">3</span><span class="op" id="7700312">,</span>&nbsp;<span class="num" id="7700314">2</span><span class="op" id="7700315">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700318">if</span>&nbsp;<span class="ident" id="7700321">z</span><span class="op" id="7700322">.</span><span class="ident" id="7700323">Cmp</span><span class="op" id="7700326">(</span><span class="ident" id="7700327">q</span><span class="op" id="7700328">)</span>&nbsp;<span class="op" id="7700330">!=</span>&nbsp;<span class="num" id="7700333">0</span>&nbsp;<span class="op" id="7700335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700339">t</span><span class="op" id="7700340">.</span><span class="ident" id="7700341">Errorf</span><span class="op" id="7700347">(</span><span class="string" id="7700348">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7700364">,</span>&nbsp;<span class="ident" id="7700366">z</span><span class="op" id="7700367">,</span>&nbsp;<span class="ident" id="7700369">q</span><span class="op" id="7700370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700377">y</span>&nbsp;<span class="op" id="7700379">=</span>&nbsp;<span class="ident" id="7700381">NewRat</span><span class="op" id="7700387">(</span><span class="num" id="7700388">3</span><span class="op" id="7700389">,</span>&nbsp;<span class="num" id="7700391">1</span><span class="op" id="7700392">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700395">x</span>&nbsp;<span class="op" id="7700397">=</span>&nbsp;<span class="ident" id="7700399">NewRat</span><span class="op" id="7700405">(</span><span class="num" id="7700406">2</span><span class="op" id="7700407">,</span>&nbsp;<span class="num" id="7700409">1</span><span class="op" id="7700410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700413">z</span>&nbsp;<span class="op" id="7700415">=</span>&nbsp;<span class="ident" id="7700417">y</span><span class="op" id="7700418">.</span><span class="ident" id="7700419">Quo</span><span class="op" id="7700422">(</span><span class="ident" id="7700423">x</span><span class="op" id="7700424">,</span>&nbsp;<span class="ident" id="7700426">y</span><span class="op" id="7700427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700430">q</span>&nbsp;<span class="op" id="7700432">=</span>&nbsp;<span class="ident" id="7700434">NewRat</span><span class="op" id="7700440">(</span><span class="num" id="7700441">2</span><span class="op" id="7700442">,</span>&nbsp;<span class="num" id="7700444">3</span><span class="op" id="7700445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700448">if</span>&nbsp;<span class="ident" id="7700451">z</span><span class="op" id="7700452">.</span><span class="ident" id="7700453">Cmp</span><span class="op" id="7700456">(</span><span class="ident" id="7700457">q</span><span class="op" id="7700458">)</span>&nbsp;<span class="op" id="7700460">!=</span>&nbsp;<span class="num" id="7700463">0</span>&nbsp;<span class="op" id="7700465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700469">t</span><span class="op" id="7700470">.</span><span class="ident" id="7700471">Errorf</span><span class="op" id="7700477">(</span><span class="string" id="7700478">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7700494">,</span>&nbsp;<span class="ident" id="7700496">z</span><span class="op" id="7700497">,</span>&nbsp;<span class="ident" id="7700499">q</span><span class="op" id="7700500">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700507">x</span>&nbsp;<span class="op" id="7700509">=</span>&nbsp;<span class="ident" id="7700511">NewRat</span><span class="op" id="7700517">(</span><span class="num" id="7700518">3</span><span class="op" id="7700519">,</span>&nbsp;<span class="num" id="7700521">1</span><span class="op" id="7700522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700525">z</span>&nbsp;<span class="op" id="7700527">=</span>&nbsp;<span class="ident" id="7700529">x</span><span class="op" id="7700530">.</span><span class="ident" id="7700531">Quo</span><span class="op" id="7700534">(</span><span class="ident" id="7700535">x</span><span class="op" id="7700536">,</span>&nbsp;<span class="ident" id="7700538">x</span><span class="op" id="7700539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700542">q</span>&nbsp;<span class="op" id="7700544">=</span>&nbsp;<span class="ident" id="7700546">NewRat</span><span class="op" id="7700552">(</span><span class="num" id="7700553">3</span><span class="op" id="7700554">,</span>&nbsp;<span class="num" id="7700556">3</span><span class="op" id="7700557">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700560">if</span>&nbsp;<span class="ident" id="7700563">z</span><span class="op" id="7700564">.</span><span class="ident" id="7700565">Cmp</span><span class="op" id="7700568">(</span><span class="ident" id="7700569">q</span><span class="op" id="7700570">)</span>&nbsp;<span class="op" id="7700572">!=</span>&nbsp;<span class="num" id="7700575">0</span>&nbsp;<span class="op" id="7700577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700581">t</span><span class="op" id="7700582">.</span><span class="ident" id="7700583">Errorf</span><span class="op" id="7700589">(</span><span class="string" id="7700590">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7700606">,</span>&nbsp;<span class="ident" id="7700608">z</span><span class="op" id="7700609">,</span>&nbsp;<span class="ident" id="7700611">q</span><span class="op" id="7700612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700615">}</span><br>
<span class="lineno"></span><span class="op" id="7700617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7700620">var</span>&nbsp;<span class="ident" id="7700624">setFrac64Tests</span>&nbsp;<span class="op" id="7700639">=</span>&nbsp;<span class="op" id="7700641">[</span><span class="op" id="7700642">]</span><span class="keyword" id="7700643">struct</span>&nbsp;<span class="op" id="7700650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700653">a</span><span class="op" id="7700654">,</span>&nbsp;<span class="ident" id="7700656">b</span>&nbsp;<span class="ident" id="7700658">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700665">out</span>&nbsp;&nbsp;<span class="builtintype" id="7700670">string</span><br>
<span class="lineno"></span><span class="op" id="7700677">}</span><span class="op" id="7700678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700681">{</span><span class="num" id="7700682">0</span><span class="op" id="7700683">,</span>&nbsp;<span class="num" id="7700685">1</span><span class="op" id="7700686">,</span>&nbsp;<span class="string" id="7700688">&#34;0&#34;</span><span class="op" id="7700691">}</span><span class="op" id="7700692">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700695">{</span><span class="num" id="7700696">0</span><span class="op" id="7700697">,</span>&nbsp;<span class="op" id="7700699">-</span><span class="num" id="7700700">1</span><span class="op" id="7700701">,</span>&nbsp;<span class="string" id="7700703">&#34;0&#34;</span><span class="op" id="7700706">}</span><span class="op" id="7700707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700710">{</span><span class="num" id="7700711">1</span><span class="op" id="7700712">,</span>&nbsp;<span class="num" id="7700714">1</span><span class="op" id="7700715">,</span>&nbsp;<span class="string" id="7700717">&#34;1&#34;</span><span class="op" id="7700720">}</span><span class="op" id="7700721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700724">{</span><span class="op" id="7700725">-</span><span class="num" id="7700726">1</span><span class="op" id="7700727">,</span>&nbsp;<span class="num" id="7700729">1</span><span class="op" id="7700730">,</span>&nbsp;<span class="string" id="7700732">&#34;-1&#34;</span><span class="op" id="7700736">}</span><span class="op" id="7700737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700740">{</span><span class="num" id="7700741">1</span><span class="op" id="7700742">,</span>&nbsp;<span class="op" id="7700744">-</span><span class="num" id="7700745">1</span><span class="op" id="7700746">,</span>&nbsp;<span class="string" id="7700748">&#34;-1&#34;</span><span class="op" id="7700752">}</span><span class="op" id="7700753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700756">{</span><span class="op" id="7700757">-</span><span class="num" id="7700758">1</span><span class="op" id="7700759">,</span>&nbsp;<span class="op" id="7700761">-</span><span class="num" id="7700762">1</span><span class="op" id="7700763">,</span>&nbsp;<span class="string" id="7700765">&#34;1&#34;</span><span class="op" id="7700768">}</span><span class="op" id="7700769">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7700772">{</span><span class="op" id="7700773">-</span><span class="num" id="7700774">9223372036854775808</span><span class="op" id="7700793">,</span>&nbsp;<span class="op" id="7700795">-</span><span class="num" id="7700796">9223372036854775808</span><span class="op" id="7700815">,</span>&nbsp;<span class="string" id="7700817">&#34;1&#34;</span><span class="op" id="7700820">}</span><span class="op" id="7700821">,</span><br>
<span class="lineno"></span><span class="op" id="7700823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700826">func</span>&nbsp;<span class="ident" id="7700831">TestRatSetFrac64Rat</span><span class="op" id="7700850">(</span><span class="ident" id="7700851">t</span>&nbsp;<span class="op" id="7700853">*</span><span class="ident" id="7700854">testing</span><span class="op" id="7700861">.</span><span class="ident" id="7700862">T</span><span class="op" id="7700863">)</span>&nbsp;<span class="op" id="7700865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700868">for</span>&nbsp;<span class="ident" id="7700872">i</span><span class="op" id="7700873">,</span>&nbsp;<span class="ident" id="7700875">test</span>&nbsp;<span class="op" id="7700880">:=</span>&nbsp;<span class="keyword" id="7700883">range</span>&nbsp;<span class="ident" id="7700889">setFrac64Tests</span>&nbsp;<span class="op" id="7700904">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700908">x</span>&nbsp;<span class="op" id="7700910">:=</span>&nbsp;<span class="builtinfunc" id="7700913">new</span><span class="op" id="7700916">(</span><span class="ident" id="7700917">Rat</span><span class="op" id="7700920">)</span><span class="op" id="7700921">.</span><span class="ident" id="7700922">SetFrac64</span><span class="op" id="7700931">(</span><span class="ident" id="7700932">test</span><span class="op" id="7700936">.</span><span class="ident" id="7700937">a</span><span class="op" id="7700938">,</span>&nbsp;<span class="ident" id="7700940">test</span><span class="op" id="7700944">.</span><span class="ident" id="7700945">b</span><span class="op" id="7700946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7700950">if</span>&nbsp;<span class="ident" id="7700953">x</span><span class="op" id="7700954">.</span><span class="ident" id="7700955">RatString</span><span class="op" id="7700964">(</span><span class="op" id="7700965">)</span>&nbsp;<span class="op" id="7700967">!=</span>&nbsp;<span class="ident" id="7700970">test</span><span class="op" id="7700974">.</span><span class="ident" id="7700975">out</span>&nbsp;<span class="op" id="7700979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7700984">t</span><span class="op" id="7700985">.</span><span class="ident" id="7700986">Errorf</span><span class="op" id="7700992">(</span><span class="string" id="7700993">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7701013">,</span>&nbsp;<span class="ident" id="7701015">i</span><span class="op" id="7701016">,</span>&nbsp;<span class="ident" id="7701018">x</span><span class="op" id="7701019">.</span><span class="ident" id="7701020">RatString</span><span class="op" id="7701029">(</span><span class="op" id="7701030">)</span><span class="op" id="7701031">,</span>&nbsp;<span class="ident" id="7701033">test</span><span class="op" id="7701037">.</span><span class="ident" id="7701038">out</span><span class="op" id="7701041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701048">}</span><br>
<span class="lineno">390</span><span class="op" id="7701050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7701053">func</span>&nbsp;<span class="ident" id="7701058">TestRatGobEncoding</span><span class="op" id="7701076">(</span><span class="ident" id="7701077">t</span>&nbsp;<span class="op" id="7701079">*</span><span class="ident" id="7701080">testing</span><span class="op" id="7701087">.</span><span class="ident" id="7701088">T</span><span class="op" id="7701089">)</span>&nbsp;<span class="op" id="7701091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701094">var</span>&nbsp;<span class="ident" id="7701098">medium</span>&nbsp;<span class="ident" id="7701105">bytes</span><span class="op" id="7701110">.</span><span class="ident" id="7701111">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701119">enc</span>&nbsp;<span class="op" id="7701123">:=</span>&nbsp;<span class="ident" id="7701126">gob</span><span class="op" id="7701129">.</span><span class="ident" id="7701130">NewEncoder</span><span class="op" id="7701140">(</span><span class="op" id="7701141">&amp;</span><span class="ident" id="7701142">medium</span><span class="op" id="7701148">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701151">dec</span>&nbsp;<span class="op" id="7701155">:=</span>&nbsp;<span class="ident" id="7701158">gob</span><span class="op" id="7701161">.</span><span class="ident" id="7701162">NewDecoder</span><span class="op" id="7701172">(</span><span class="op" id="7701173">&amp;</span><span class="ident" id="7701174">medium</span><span class="op" id="7701180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701183">for</span>&nbsp;<span class="ident" id="7701187">_</span><span class="op" id="7701188">,</span>&nbsp;<span class="ident" id="7701190">test</span>&nbsp;<span class="op" id="7701195">:=</span>&nbsp;<span class="keyword" id="7701198">range</span>&nbsp;<span class="ident" id="7701204">encodingTests</span>&nbsp;<span class="op" id="7701218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701222">medium</span><span class="op" id="7701228">.</span><span class="ident" id="7701229">Reset</span><span class="op" id="7701234">(</span><span class="op" id="7701235">)</span>&nbsp;<span class="comment" id="7701237">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701296">var</span>&nbsp;<span class="ident" id="7701300">tx</span>&nbsp;<span class="ident" id="7701303">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701309">tx</span><span class="op" id="7701311">.</span><span class="ident" id="7701312">SetString</span><span class="op" id="7701321">(</span><span class="ident" id="7701322">test</span>&nbsp;<span class="op" id="7701327">+</span>&nbsp;<span class="string" id="7701329">&#34;.14159265&#34;</span><span class="op" id="7701340">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701344">if</span>&nbsp;<span class="ident" id="7701347">err</span>&nbsp;<span class="op" id="7701351">:=</span>&nbsp;<span class="ident" id="7701354">enc</span><span class="op" id="7701357">.</span><span class="ident" id="7701358">Encode</span><span class="op" id="7701364">(</span><span class="op" id="7701365">&amp;</span><span class="ident" id="7701366">tx</span><span class="op" id="7701368">)</span><span class="op" id="7701369">;</span>&nbsp;<span class="ident" id="7701371">err</span>&nbsp;<span class="op" id="7701375">!=</span>&nbsp;<span class="builtintype" id="7701378">nil</span>&nbsp;<span class="op" id="7701382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701387">t</span><span class="op" id="7701388">.</span><span class="ident" id="7701389">Errorf</span><span class="op" id="7701395">(</span><span class="string" id="7701396">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7701423">,</span>&nbsp;<span class="op" id="7701425">&amp;</span><span class="ident" id="7701426">tx</span><span class="op" id="7701428">,</span>&nbsp;<span class="ident" id="7701430">err</span><span class="op" id="7701433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701441">var</span>&nbsp;<span class="ident" id="7701445">rx</span>&nbsp;<span class="ident" id="7701448">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701454">if</span>&nbsp;<span class="ident" id="7701457">err</span>&nbsp;<span class="op" id="7701461">:=</span>&nbsp;<span class="ident" id="7701464">dec</span><span class="op" id="7701467">.</span><span class="ident" id="7701468">Decode</span><span class="op" id="7701474">(</span><span class="op" id="7701475">&amp;</span><span class="ident" id="7701476">rx</span><span class="op" id="7701478">)</span><span class="op" id="7701479">;</span>&nbsp;<span class="ident" id="7701481">err</span>&nbsp;<span class="op" id="7701485">!=</span>&nbsp;<span class="builtintype" id="7701488">nil</span>&nbsp;<span class="op" id="7701492">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701497">t</span><span class="op" id="7701498">.</span><span class="ident" id="7701499">Errorf</span><span class="op" id="7701505">(</span><span class="string" id="7701506">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7701533">,</span>&nbsp;<span class="op" id="7701535">&amp;</span><span class="ident" id="7701536">tx</span><span class="op" id="7701538">,</span>&nbsp;<span class="ident" id="7701540">err</span><span class="op" id="7701543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701551">if</span>&nbsp;<span class="ident" id="7701554">rx</span><span class="op" id="7701556">.</span><span class="ident" id="7701557">Cmp</span><span class="op" id="7701560">(</span><span class="op" id="7701561">&amp;</span><span class="ident" id="7701562">tx</span><span class="op" id="7701564">)</span>&nbsp;<span class="op" id="7701566">!=</span>&nbsp;<span class="num" id="7701569">0</span>&nbsp;<span class="op" id="7701571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701576">t</span><span class="op" id="7701577">.</span><span class="ident" id="7701578">Errorf</span><span class="op" id="7701584">(</span><span class="string" id="7701585">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7701628">,</span>&nbsp;<span class="op" id="7701630">&amp;</span><span class="ident" id="7701631">tx</span><span class="op" id="7701633">,</span>&nbsp;<span class="op" id="7701635">&amp;</span><span class="ident" id="7701636">rx</span><span class="op" id="7701638">,</span>&nbsp;<span class="op" id="7701640">&amp;</span><span class="ident" id="7701641">tx</span><span class="op" id="7701643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701647">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7701650">}</span><br>
<span class="lineno"></span><span class="op" id="7701652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7701655">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7701750">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7701775">func</span>&nbsp;<span class="ident" id="7701780">TestGobEncodingNilRatInSlice</span><span class="op" id="7701808">(</span><span class="ident" id="7701809">t</span>&nbsp;<span class="op" id="7701811">*</span><span class="ident" id="7701812">testing</span><span class="op" id="7701819">.</span><span class="ident" id="7701820">T</span><span class="op" id="7701821">)</span>&nbsp;<span class="op" id="7701823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701826">buf</span>&nbsp;<span class="op" id="7701830">:=</span>&nbsp;<span class="builtinfunc" id="7701833">new</span><span class="op" id="7701836">(</span><span class="ident" id="7701837">bytes</span><span class="op" id="7701842">.</span><span class="ident" id="7701843">Buffer</span><span class="op" id="7701849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701852">enc</span>&nbsp;<span class="op" id="7701856">:=</span>&nbsp;<span class="ident" id="7701859">gob</span><span class="op" id="7701862">.</span><span class="ident" id="7701863">NewEncoder</span><span class="op" id="7701873">(</span><span class="ident" id="7701874">buf</span><span class="op" id="7701877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701880">dec</span>&nbsp;<span class="op" id="7701884">:=</span>&nbsp;<span class="ident" id="7701887">gob</span><span class="op" id="7701890">.</span><span class="ident" id="7701891">NewDecoder</span><span class="op" id="7701901">(</span><span class="ident" id="7701902">buf</span><span class="op" id="7701905">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701909">var</span>&nbsp;<span class="ident" id="7701913">in</span>&nbsp;<span class="op" id="7701916">=</span>&nbsp;<span class="builtinfunc" id="7701918">make</span><span class="op" id="7701922">(</span><span class="op" id="7701923">[</span><span class="op" id="7701924">]</span><span class="op" id="7701925">*</span><span class="ident" id="7701926">Rat</span><span class="op" id="7701929">,</span>&nbsp;<span class="num" id="7701931">1</span><span class="op" id="7701932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701935">err</span>&nbsp;<span class="op" id="7701939">:=</span>&nbsp;<span class="ident" id="7701942">enc</span><span class="op" id="7701945">.</span><span class="ident" id="7701946">Encode</span><span class="op" id="7701952">(</span><span class="op" id="7701953">&amp;</span><span class="ident" id="7701954">in</span><span class="op" id="7701956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7701959">if</span>&nbsp;<span class="ident" id="7701962">err</span>&nbsp;<span class="op" id="7701966">!=</span>&nbsp;<span class="builtintype" id="7701969">nil</span>&nbsp;<span class="op" id="7701973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7701977">t</span><span class="op" id="7701978">.</span><span class="ident" id="7701979">Errorf</span><span class="op" id="7701985">(</span><span class="string" id="7701986">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7702009">,</span>&nbsp;<span class="ident" id="7702011">err</span><span class="op" id="7702014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702017">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702020">var</span>&nbsp;<span class="ident" id="7702024">out</span>&nbsp;<span class="op" id="7702028">[</span><span class="op" id="7702029">]</span><span class="op" id="7702030">*</span><span class="ident" id="7702031">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702036">err</span>&nbsp;<span class="op" id="7702040">=</span>&nbsp;<span class="ident" id="7702042">dec</span><span class="op" id="7702045">.</span><span class="ident" id="7702046">Decode</span><span class="op" id="7702052">(</span><span class="op" id="7702053">&amp;</span><span class="ident" id="7702054">out</span><span class="op" id="7702057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702060">if</span>&nbsp;<span class="ident" id="7702063">err</span>&nbsp;<span class="op" id="7702067">!=</span>&nbsp;<span class="builtintype" id="7702070">nil</span>&nbsp;<span class="op" id="7702074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702078">t</span><span class="op" id="7702079">.</span><span class="ident" id="7702080">Fatalf</span><span class="op" id="7702086">(</span><span class="string" id="7702087">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7702110">,</span>&nbsp;<span class="ident" id="7702112">err</span><span class="op" id="7702115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702118">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702121">if</span>&nbsp;<span class="builtinfunc" id="7702124">len</span><span class="op" id="7702127">(</span><span class="ident" id="7702128">out</span><span class="op" id="7702131">)</span>&nbsp;<span class="op" id="7702133">!=</span>&nbsp;<span class="num" id="7702136">1</span>&nbsp;<span class="op" id="7702138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702142">t</span><span class="op" id="7702143">.</span><span class="ident" id="7702144">Fatalf</span><span class="op" id="7702150">(</span><span class="string" id="7702151">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7702177">,</span>&nbsp;<span class="builtinfunc" id="7702179">len</span><span class="op" id="7702182">(</span><span class="ident" id="7702183">out</span><span class="op" id="7702186">)</span><span class="op" id="7702187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702193">var</span>&nbsp;<span class="ident" id="7702197">zero</span>&nbsp;<span class="ident" id="7702202">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702207">if</span>&nbsp;<span class="ident" id="7702210">out</span><span class="op" id="7702213">[</span><span class="num" id="7702214">0</span><span class="op" id="7702215">]</span><span class="op" id="7702216">.</span><span class="ident" id="7702217">Cmp</span><span class="op" id="7702220">(</span><span class="op" id="7702221">&amp;</span><span class="ident" id="7702222">zero</span><span class="op" id="7702226">)</span>&nbsp;<span class="op" id="7702228">!=</span>&nbsp;<span class="num" id="7702231">0</span>&nbsp;<span class="op" id="7702233">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702237">t</span><span class="op" id="7702238">.</span><span class="ident" id="7702239">Errorf</span><span class="op" id="7702245">(</span><span class="string" id="7702246">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7702298">,</span>&nbsp;<span class="ident" id="7702300">out</span><span class="op" id="7702303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7702306">}</span><br>
<span class="lineno"></span><span class="op" id="7702308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702311">var</span>&nbsp;<span class="ident" id="7702315">ratNums</span>&nbsp;<span class="op" id="7702323">=</span>&nbsp;<span class="op" id="7702325">[</span><span class="op" id="7702326">]</span><span class="builtintype" id="7702327">string</span><span class="op" id="7702333">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702336">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7702414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702417">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7702460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702463">&#34;-141592653589793&#34;</span><span class="op" id="7702481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702484">&#34;-1&#34;</span><span class="op" id="7702488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702491">&#34;0&#34;</span><span class="op" id="7702494">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702497">&#34;1&#34;</span><span class="op" id="7702500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702503">&#34;141592653589793&#34;</span><span class="op" id="7702520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702523">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7702565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702568">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7702645">,</span><br>
<span class="lineno"></span><span class="op" id="7702647">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7702650">var</span>&nbsp;<span class="ident" id="7702654">ratDenoms</span>&nbsp;<span class="op" id="7702664">=</span>&nbsp;<span class="op" id="7702666">[</span><span class="op" id="7702667">]</span><span class="builtintype" id="7702668">string</span><span class="op" id="7702674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702677">&#34;1&#34;</span><span class="op" id="7702680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702683">&#34;718281828459045&#34;</span><span class="op" id="7702700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702703">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7702745">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7702748">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7702825">,</span><br>
<span class="lineno"></span><span class="op" id="7702827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7702830">func</span>&nbsp;<span class="ident" id="7702835">TestRatJSONEncoding</span><span class="op" id="7702854">(</span><span class="ident" id="7702855">t</span>&nbsp;<span class="op" id="7702857">*</span><span class="ident" id="7702858">testing</span><span class="op" id="7702865">.</span><span class="ident" id="7702866">T</span><span class="op" id="7702867">)</span>&nbsp;<span class="op" id="7702869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702872">for</span>&nbsp;<span class="ident" id="7702876">_</span><span class="op" id="7702877">,</span>&nbsp;<span class="ident" id="7702879">num</span>&nbsp;<span class="op" id="7702883">:=</span>&nbsp;<span class="keyword" id="7702886">range</span>&nbsp;<span class="ident" id="7702892">ratNums</span>&nbsp;<span class="op" id="7702900">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702904">for</span>&nbsp;<span class="ident" id="7702908">_</span><span class="op" id="7702909">,</span>&nbsp;<span class="ident" id="7702911">denom</span>&nbsp;<span class="op" id="7702917">:=</span>&nbsp;<span class="keyword" id="7702920">range</span>&nbsp;<span class="ident" id="7702926">ratDenoms</span>&nbsp;<span class="op" id="7702936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7702941">var</span>&nbsp;<span class="ident" id="7702945">tx</span>&nbsp;<span class="ident" id="7702948">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702955">tx</span><span class="op" id="7702957">.</span><span class="ident" id="7702958">SetString</span><span class="op" id="7702967">(</span><span class="ident" id="7702968">num</span>&nbsp;<span class="op" id="7702972">+</span>&nbsp;<span class="string" id="7702974">&#34;/&#34;</span>&nbsp;<span class="op" id="7702978">+</span>&nbsp;<span class="ident" id="7702980">denom</span><span class="op" id="7702985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7702990">b</span><span class="op" id="7702991">,</span>&nbsp;<span class="ident" id="7702993">err</span>&nbsp;<span class="op" id="7702997">:=</span>&nbsp;<span class="ident" id="7703000">json</span><span class="op" id="7703004">.</span><span class="ident" id="7703005">Marshal</span><span class="op" id="7703012">(</span><span class="op" id="7703013">&amp;</span><span class="ident" id="7703014">tx</span><span class="op" id="7703016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703021">if</span>&nbsp;<span class="ident" id="7703024">err</span>&nbsp;<span class="op" id="7703028">!=</span>&nbsp;<span class="builtintype" id="7703031">nil</span>&nbsp;<span class="op" id="7703035">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703041">t</span><span class="op" id="7703042">.</span><span class="ident" id="7703043">Errorf</span><span class="op" id="7703049">(</span><span class="string" id="7703050">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7703079">,</span>&nbsp;<span class="op" id="7703081">&amp;</span><span class="ident" id="7703082">tx</span><span class="op" id="7703084">,</span>&nbsp;<span class="ident" id="7703086">err</span><span class="op" id="7703089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703095">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703112">var</span>&nbsp;<span class="ident" id="7703116">rx</span>&nbsp;<span class="ident" id="7703119">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703126">if</span>&nbsp;<span class="ident" id="7703129">err</span>&nbsp;<span class="op" id="7703133">:=</span>&nbsp;<span class="ident" id="7703136">json</span><span class="op" id="7703140">.</span><span class="ident" id="7703141">Unmarshal</span><span class="op" id="7703150">(</span><span class="ident" id="7703151">b</span><span class="op" id="7703152">,</span>&nbsp;<span class="op" id="7703154">&amp;</span><span class="ident" id="7703155">rx</span><span class="op" id="7703157">)</span><span class="op" id="7703158">;</span>&nbsp;<span class="ident" id="7703160">err</span>&nbsp;<span class="op" id="7703164">!=</span>&nbsp;<span class="builtintype" id="7703167">nil</span>&nbsp;<span class="op" id="7703171">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703177">t</span><span class="op" id="7703178">.</span><span class="ident" id="7703179">Errorf</span><span class="op" id="7703185">(</span><span class="string" id="7703186">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7703217">,</span>&nbsp;<span class="op" id="7703219">&amp;</span><span class="ident" id="7703220">tx</span><span class="op" id="7703222">,</span>&nbsp;<span class="ident" id="7703224">err</span><span class="op" id="7703227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703233">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703250">if</span>&nbsp;<span class="ident" id="7703253">rx</span><span class="op" id="7703255">.</span><span class="ident" id="7703256">Cmp</span><span class="op" id="7703259">(</span><span class="op" id="7703260">&amp;</span><span class="ident" id="7703261">tx</span><span class="op" id="7703263">)</span>&nbsp;<span class="op" id="7703265">!=</span>&nbsp;<span class="num" id="7703268">0</span>&nbsp;<span class="op" id="7703270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703276">t</span><span class="op" id="7703277">.</span><span class="ident" id="7703278">Errorf</span><span class="op" id="7703284">(</span><span class="string" id="7703285">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7703329">,</span>&nbsp;<span class="op" id="7703331">&amp;</span><span class="ident" id="7703332">tx</span><span class="op" id="7703334">,</span>&nbsp;<span class="op" id="7703336">&amp;</span><span class="ident" id="7703337">rx</span><span class="op" id="7703339">,</span>&nbsp;<span class="op" id="7703341">&amp;</span><span class="ident" id="7703342">tx</span><span class="op" id="7703344">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703356">}</span><br>
<span class="lineno"></span><span class="op" id="7703358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7703361">func</span>&nbsp;<span class="ident" id="7703366">TestRatXMLEncoding</span><span class="op" id="7703384">(</span><span class="ident" id="7703385">t</span>&nbsp;<span class="op" id="7703387">*</span><span class="ident" id="7703388">testing</span><span class="op" id="7703395">.</span><span class="ident" id="7703396">T</span><span class="op" id="7703397">)</span>&nbsp;<span class="op" id="7703399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703402">for</span>&nbsp;<span class="ident" id="7703406">_</span><span class="op" id="7703407">,</span>&nbsp;<span class="ident" id="7703409">num</span>&nbsp;<span class="op" id="7703413">:=</span>&nbsp;<span class="keyword" id="7703416">range</span>&nbsp;<span class="ident" id="7703422">ratNums</span>&nbsp;<span class="op" id="7703430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703434">for</span>&nbsp;<span class="ident" id="7703438">_</span><span class="op" id="7703439">,</span>&nbsp;<span class="ident" id="7703441">denom</span>&nbsp;<span class="op" id="7703447">:=</span>&nbsp;<span class="keyword" id="7703450">range</span>&nbsp;<span class="ident" id="7703456">ratDenoms</span>&nbsp;<span class="op" id="7703466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703471">var</span>&nbsp;<span class="ident" id="7703475">tx</span>&nbsp;<span class="ident" id="7703478">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703485">tx</span><span class="op" id="7703487">.</span><span class="ident" id="7703488">SetString</span><span class="op" id="7703497">(</span><span class="ident" id="7703498">num</span>&nbsp;<span class="op" id="7703502">+</span>&nbsp;<span class="string" id="7703504">&#34;/&#34;</span>&nbsp;<span class="op" id="7703508">+</span>&nbsp;<span class="ident" id="7703510">denom</span><span class="op" id="7703515">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703520">b</span><span class="op" id="7703521">,</span>&nbsp;<span class="ident" id="7703523">err</span>&nbsp;<span class="op" id="7703527">:=</span>&nbsp;<span class="ident" id="7703530">xml</span><span class="op" id="7703533">.</span><span class="ident" id="7703534">Marshal</span><span class="op" id="7703541">(</span><span class="op" id="7703542">&amp;</span><span class="ident" id="7703543">tx</span><span class="op" id="7703545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703550">if</span>&nbsp;<span class="ident" id="7703553">err</span>&nbsp;<span class="op" id="7703557">!=</span>&nbsp;<span class="builtintype" id="7703560">nil</span>&nbsp;<span class="op" id="7703564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703570">t</span><span class="op" id="7703571">.</span><span class="ident" id="7703572">Errorf</span><span class="op" id="7703578">(</span><span class="string" id="7703579">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7703608">,</span>&nbsp;<span class="op" id="7703610">&amp;</span><span class="ident" id="7703611">tx</span><span class="op" id="7703613">,</span>&nbsp;<span class="ident" id="7703615">err</span><span class="op" id="7703618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703624">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703636">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703641">var</span>&nbsp;<span class="ident" id="7703645">rx</span>&nbsp;<span class="ident" id="7703648">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703655">if</span>&nbsp;<span class="ident" id="7703658">err</span>&nbsp;<span class="op" id="7703662">:=</span>&nbsp;<span class="ident" id="7703665">xml</span><span class="op" id="7703668">.</span><span class="ident" id="7703669">Unmarshal</span><span class="op" id="7703678">(</span><span class="ident" id="7703679">b</span><span class="op" id="7703680">,</span>&nbsp;<span class="op" id="7703682">&amp;</span><span class="ident" id="7703683">rx</span><span class="op" id="7703685">)</span><span class="op" id="7703686">;</span>&nbsp;<span class="ident" id="7703688">err</span>&nbsp;<span class="op" id="7703692">!=</span>&nbsp;<span class="builtintype" id="7703695">nil</span>&nbsp;<span class="op" id="7703699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703705">t</span><span class="op" id="7703706">.</span><span class="ident" id="7703707">Errorf</span><span class="op" id="7703713">(</span><span class="string" id="7703714">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7703745">,</span>&nbsp;<span class="op" id="7703747">&amp;</span><span class="ident" id="7703748">tx</span><span class="op" id="7703750">,</span>&nbsp;<span class="ident" id="7703752">err</span><span class="op" id="7703755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703761">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703773">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7703778">if</span>&nbsp;<span class="ident" id="7703781">rx</span><span class="op" id="7703783">.</span><span class="ident" id="7703784">Cmp</span><span class="op" id="7703787">(</span><span class="op" id="7703788">&amp;</span><span class="ident" id="7703789">tx</span><span class="op" id="7703791">)</span>&nbsp;<span class="op" id="7703793">!=</span>&nbsp;<span class="num" id="7703796">0</span>&nbsp;<span class="op" id="7703798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703804">t</span><span class="op" id="7703805">.</span><span class="ident" id="7703806">Errorf</span><span class="op" id="7703812">(</span><span class="string" id="7703813">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7703856">,</span>&nbsp;<span class="op" id="7703858">&amp;</span><span class="ident" id="7703859">tx</span><span class="op" id="7703861">,</span>&nbsp;<span class="op" id="7703863">&amp;</span><span class="ident" id="7703864">rx</span><span class="op" id="7703866">,</span>&nbsp;<span class="op" id="7703868">&amp;</span><span class="ident" id="7703869">tx</span><span class="op" id="7703871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7703883">}</span><br>
<span class="lineno">500</span><span class="op" id="7703885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7703888">func</span>&nbsp;<span class="ident" id="7703893">TestIssue2379</span><span class="op" id="7703906">(</span><span class="ident" id="7703907">t</span>&nbsp;<span class="op" id="7703909">*</span><span class="ident" id="7703910">testing</span><span class="op" id="7703917">.</span><span class="ident" id="7703918">T</span><span class="op" id="7703919">)</span>&nbsp;<span class="op" id="7703921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7703924">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703943">q</span>&nbsp;<span class="op" id="7703945">:=</span>&nbsp;<span class="ident" id="7703948">NewRat</span><span class="op" id="7703954">(</span><span class="num" id="7703955">3</span><span class="op" id="7703956">,</span>&nbsp;<span class="num" id="7703958">2</span><span class="op" id="7703959">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703962">x</span>&nbsp;<span class="op" id="7703964">:=</span>&nbsp;<span class="builtinfunc" id="7703967">new</span><span class="op" id="7703970">(</span><span class="ident" id="7703971">Rat</span><span class="op" id="7703974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7703977">x</span><span class="op" id="7703978">.</span><span class="ident" id="7703979">SetFrac</span><span class="op" id="7703986">(</span><span class="ident" id="7703987">NewInt</span><span class="op" id="7703993">(</span><span class="num" id="7703994">3</span><span class="op" id="7703995">)</span><span class="op" id="7703996">,</span>&nbsp;<span class="ident" id="7703998">NewInt</span><span class="op" id="7704004">(</span><span class="num" id="7704005">2</span><span class="op" id="7704006">)</span><span class="op" id="7704007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704010">if</span>&nbsp;<span class="ident" id="7704013">x</span><span class="op" id="7704014">.</span><span class="ident" id="7704015">Cmp</span><span class="op" id="7704018">(</span><span class="ident" id="7704019">q</span><span class="op" id="7704020">)</span>&nbsp;<span class="op" id="7704022">!=</span>&nbsp;<span class="num" id="7704025">0</span>&nbsp;<span class="op" id="7704027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704031">t</span><span class="op" id="7704032">.</span><span class="ident" id="7704033">Errorf</span><span class="op" id="7704039">(</span><span class="string" id="7704040">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704059">,</span>&nbsp;<span class="ident" id="7704061">x</span><span class="op" id="7704062">,</span>&nbsp;<span class="ident" id="7704064">q</span><span class="op" id="7704065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704068">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704072">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704101">x</span>&nbsp;<span class="op" id="7704103">=</span>&nbsp;<span class="ident" id="7704105">NewRat</span><span class="op" id="7704111">(</span><span class="num" id="7704112">2</span><span class="op" id="7704113">,</span>&nbsp;<span class="num" id="7704115">3</span><span class="op" id="7704116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704119">x</span><span class="op" id="7704120">.</span><span class="ident" id="7704121">SetFrac</span><span class="op" id="7704128">(</span><span class="ident" id="7704129">NewInt</span><span class="op" id="7704135">(</span><span class="num" id="7704136">3</span><span class="op" id="7704137">)</span><span class="op" id="7704138">,</span>&nbsp;<span class="ident" id="7704140">x</span><span class="op" id="7704141">.</span><span class="ident" id="7704142">Num</span><span class="op" id="7704145">(</span><span class="op" id="7704146">)</span><span class="op" id="7704147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704150">if</span>&nbsp;<span class="ident" id="7704153">x</span><span class="op" id="7704154">.</span><span class="ident" id="7704155">Cmp</span><span class="op" id="7704158">(</span><span class="ident" id="7704159">q</span><span class="op" id="7704160">)</span>&nbsp;<span class="op" id="7704162">!=</span>&nbsp;<span class="num" id="7704165">0</span>&nbsp;<span class="op" id="7704167">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704171">t</span><span class="op" id="7704172">.</span><span class="ident" id="7704173">Errorf</span><span class="op" id="7704179">(</span><span class="string" id="7704180">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704199">,</span>&nbsp;<span class="ident" id="7704201">x</span><span class="op" id="7704202">,</span>&nbsp;<span class="ident" id="7704204">q</span><span class="op" id="7704205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704212">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704243">x</span>&nbsp;<span class="op" id="7704245">=</span>&nbsp;<span class="ident" id="7704247">NewRat</span><span class="op" id="7704253">(</span><span class="num" id="7704254">2</span><span class="op" id="7704255">,</span>&nbsp;<span class="num" id="7704257">3</span><span class="op" id="7704258">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704261">x</span><span class="op" id="7704262">.</span><span class="ident" id="7704263">SetFrac</span><span class="op" id="7704270">(</span><span class="ident" id="7704271">x</span><span class="op" id="7704272">.</span><span class="ident" id="7704273">Denom</span><span class="op" id="7704278">(</span><span class="op" id="7704279">)</span><span class="op" id="7704280">,</span>&nbsp;<span class="ident" id="7704282">NewInt</span><span class="op" id="7704288">(</span><span class="num" id="7704289">2</span><span class="op" id="7704290">)</span><span class="op" id="7704291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704294">if</span>&nbsp;<span class="ident" id="7704297">x</span><span class="op" id="7704298">.</span><span class="ident" id="7704299">Cmp</span><span class="op" id="7704302">(</span><span class="ident" id="7704303">q</span><span class="op" id="7704304">)</span>&nbsp;<span class="op" id="7704306">!=</span>&nbsp;<span class="num" id="7704309">0</span>&nbsp;<span class="op" id="7704311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704315">t</span><span class="op" id="7704316">.</span><span class="ident" id="7704317">Errorf</span><span class="op" id="7704323">(</span><span class="string" id="7704324">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704343">,</span>&nbsp;<span class="ident" id="7704345">x</span><span class="op" id="7704346">,</span>&nbsp;<span class="ident" id="7704348">q</span><span class="op" id="7704349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704356">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704401">x</span>&nbsp;<span class="op" id="7704403">=</span>&nbsp;<span class="ident" id="7704405">NewRat</span><span class="op" id="7704411">(</span><span class="num" id="7704412">2</span><span class="op" id="7704413">,</span>&nbsp;<span class="num" id="7704415">3</span><span class="op" id="7704416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704419">x</span><span class="op" id="7704420">.</span><span class="ident" id="7704421">SetFrac</span><span class="op" id="7704428">(</span><span class="ident" id="7704429">x</span><span class="op" id="7704430">.</span><span class="ident" id="7704431">Denom</span><span class="op" id="7704436">(</span><span class="op" id="7704437">)</span><span class="op" id="7704438">,</span>&nbsp;<span class="ident" id="7704440">x</span><span class="op" id="7704441">.</span><span class="ident" id="7704442">Num</span><span class="op" id="7704445">(</span><span class="op" id="7704446">)</span><span class="op" id="7704447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704450">if</span>&nbsp;<span class="ident" id="7704453">x</span><span class="op" id="7704454">.</span><span class="ident" id="7704455">Cmp</span><span class="op" id="7704458">(</span><span class="ident" id="7704459">q</span><span class="op" id="7704460">)</span>&nbsp;<span class="op" id="7704462">!=</span>&nbsp;<span class="num" id="7704465">0</span>&nbsp;<span class="op" id="7704467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704471">t</span><span class="op" id="7704472">.</span><span class="ident" id="7704473">Errorf</span><span class="op" id="7704479">(</span><span class="string" id="7704480">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704499">,</span>&nbsp;<span class="ident" id="7704501">x</span><span class="op" id="7704502">,</span>&nbsp;<span class="ident" id="7704504">q</span><span class="op" id="7704505">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704512">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704558">q</span>&nbsp;<span class="op" id="7704560">=</span>&nbsp;<span class="ident" id="7704562">NewRat</span><span class="op" id="7704568">(</span><span class="num" id="7704569">1</span><span class="op" id="7704570">,</span>&nbsp;<span class="num" id="7704572">1</span><span class="op" id="7704573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704576">x</span>&nbsp;<span class="op" id="7704578">=</span>&nbsp;<span class="builtinfunc" id="7704580">new</span><span class="op" id="7704583">(</span><span class="ident" id="7704584">Rat</span><span class="op" id="7704587">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704590">n</span>&nbsp;<span class="op" id="7704592">:=</span>&nbsp;<span class="ident" id="7704595">NewInt</span><span class="op" id="7704601">(</span><span class="num" id="7704602">7</span><span class="op" id="7704603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704606">x</span><span class="op" id="7704607">.</span><span class="ident" id="7704608">SetFrac</span><span class="op" id="7704615">(</span><span class="ident" id="7704616">n</span><span class="op" id="7704617">,</span>&nbsp;<span class="ident" id="7704619">n</span><span class="op" id="7704620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704623">if</span>&nbsp;<span class="ident" id="7704626">x</span><span class="op" id="7704627">.</span><span class="ident" id="7704628">Cmp</span><span class="op" id="7704631">(</span><span class="ident" id="7704632">q</span><span class="op" id="7704633">)</span>&nbsp;<span class="op" id="7704635">!=</span>&nbsp;<span class="num" id="7704638">0</span>&nbsp;<span class="op" id="7704640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704644">t</span><span class="op" id="7704645">.</span><span class="ident" id="7704646">Errorf</span><span class="op" id="7704652">(</span><span class="string" id="7704653">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704672">,</span>&nbsp;<span class="ident" id="7704674">x</span><span class="op" id="7704675">,</span>&nbsp;<span class="ident" id="7704677">q</span><span class="op" id="7704678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704681">}</span><br>
<span class="lineno">540</span><span class="op" id="7704683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7704686">func</span>&nbsp;<span class="ident" id="7704691">TestIssue3521</span><span class="op" id="7704704">(</span><span class="ident" id="7704705">t</span>&nbsp;<span class="op" id="7704707">*</span><span class="ident" id="7704708">testing</span><span class="op" id="7704715">.</span><span class="ident" id="7704716">T</span><span class="op" id="7704717">)</span>&nbsp;<span class="op" id="7704719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704722">a</span>&nbsp;<span class="op" id="7704724">:=</span>&nbsp;<span class="builtinfunc" id="7704727">new</span><span class="op" id="7704730">(</span><span class="ident" id="7704731">Int</span><span class="op" id="7704734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704737">b</span>&nbsp;<span class="op" id="7704739">:=</span>&nbsp;<span class="builtinfunc" id="7704742">new</span><span class="op" id="7704745">(</span><span class="ident" id="7704746">Int</span><span class="op" id="7704749">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704752">a</span><span class="op" id="7704753">.</span><span class="ident" id="7704754">SetString</span><span class="op" id="7704763">(</span><span class="string" id="7704764">&#34;64375784358435883458348587&#34;</span><span class="op" id="7704792">,</span>&nbsp;<span class="num" id="7704794">0</span><span class="op" id="7704795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704798">b</span><span class="op" id="7704799">.</span><span class="ident" id="7704800">SetString</span><span class="op" id="7704809">(</span><span class="string" id="7704810">&#34;4789759874531&#34;</span><span class="op" id="7704825">,</span>&nbsp;<span class="num" id="7704827">0</span><span class="op" id="7704828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7704832">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704877">zero</span>&nbsp;<span class="op" id="7704882">:=</span>&nbsp;<span class="builtinfunc" id="7704885">new</span><span class="op" id="7704888">(</span><span class="ident" id="7704889">Rat</span><span class="op" id="7704892">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704895">one</span>&nbsp;<span class="op" id="7704899">:=</span>&nbsp;<span class="ident" id="7704902">NewInt</span><span class="op" id="7704908">(</span><span class="num" id="7704909">1</span><span class="op" id="7704910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7704913">if</span>&nbsp;<span class="ident" id="7704916">zero</span><span class="op" id="7704920">.</span><span class="ident" id="7704921">Denom</span><span class="op" id="7704926">(</span><span class="op" id="7704927">)</span><span class="op" id="7704928">.</span><span class="ident" id="7704929">Cmp</span><span class="op" id="7704932">(</span><span class="ident" id="7704933">one</span><span class="op" id="7704936">)</span>&nbsp;<span class="op" id="7704938">!=</span>&nbsp;<span class="num" id="7704941">0</span>&nbsp;<span class="op" id="7704943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7704947">t</span><span class="op" id="7704948">.</span><span class="ident" id="7704949">Errorf</span><span class="op" id="7704955">(</span><span class="string" id="7704956">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7704975">,</span>&nbsp;<span class="ident" id="7704977">zero</span><span class="op" id="7704981">.</span><span class="ident" id="7704982">Denom</span><span class="op" id="7704987">(</span><span class="op" id="7704988">)</span><span class="op" id="7704989">,</span>&nbsp;<span class="ident" id="7704991">one</span><span class="op" id="7704994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7704997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705001">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705062">x</span>&nbsp;<span class="op" id="7705064">:=</span>&nbsp;<span class="builtinfunc" id="7705067">new</span><span class="op" id="7705070">(</span><span class="ident" id="7705071">Rat</span><span class="op" id="7705074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705077">x</span><span class="op" id="7705078">.</span><span class="ident" id="7705079">Denom</span><span class="op" id="7705084">(</span><span class="op" id="7705085">)</span><span class="op" id="7705086">.</span><span class="ident" id="7705087">Set</span><span class="op" id="7705090">(</span><span class="builtinfunc" id="7705091">new</span><span class="op" id="7705094">(</span><span class="ident" id="7705095">Int</span><span class="op" id="7705098">)</span><span class="op" id="7705099">.</span><span class="ident" id="7705100">Neg</span><span class="op" id="7705103">(</span><span class="ident" id="7705104">b</span><span class="op" id="7705105">)</span><span class="op" id="7705106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705109">if</span>&nbsp;<span class="ident" id="7705112">x</span><span class="op" id="7705113">.</span><span class="ident" id="7705114">Cmp</span><span class="op" id="7705117">(</span><span class="ident" id="7705118">zero</span><span class="op" id="7705122">)</span>&nbsp;<span class="op" id="7705124">!=</span>&nbsp;<span class="num" id="7705127">0</span>&nbsp;<span class="op" id="7705129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705133">t</span><span class="op" id="7705134">.</span><span class="ident" id="7705135">Errorf</span><span class="op" id="7705141">(</span><span class="string" id="7705142">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705162">,</span>&nbsp;<span class="ident" id="7705164">x</span><span class="op" id="7705165">,</span>&nbsp;<span class="ident" id="7705167">zero</span><span class="op" id="7705171">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705178">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705236">x</span><span class="op" id="7705237">.</span><span class="ident" id="7705238">Num</span><span class="op" id="7705241">(</span><span class="op" id="7705242">)</span><span class="op" id="7705243">.</span><span class="ident" id="7705244">Set</span><span class="op" id="7705247">(</span><span class="ident" id="7705248">a</span><span class="op" id="7705249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705252">qab</span>&nbsp;<span class="op" id="7705256">:=</span>&nbsp;<span class="builtinfunc" id="7705259">new</span><span class="op" id="7705262">(</span><span class="ident" id="7705263">Rat</span><span class="op" id="7705266">)</span><span class="op" id="7705267">.</span><span class="ident" id="7705268">SetFrac</span><span class="op" id="7705275">(</span><span class="ident" id="7705276">a</span><span class="op" id="7705277">,</span>&nbsp;<span class="ident" id="7705279">b</span><span class="op" id="7705280">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705283">if</span>&nbsp;<span class="ident" id="7705286">x</span><span class="op" id="7705287">.</span><span class="ident" id="7705288">Cmp</span><span class="op" id="7705291">(</span><span class="ident" id="7705292">qab</span><span class="op" id="7705295">)</span>&nbsp;<span class="op" id="7705297">!=</span>&nbsp;<span class="num" id="7705300">0</span>&nbsp;<span class="op" id="7705302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705306">t</span><span class="op" id="7705307">.</span><span class="ident" id="7705308">Errorf</span><span class="op" id="7705314">(</span><span class="string" id="7705315">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705335">,</span>&nbsp;<span class="ident" id="7705337">x</span><span class="op" id="7705338">,</span>&nbsp;<span class="ident" id="7705340">qab</span><span class="op" id="7705343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705350">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705420">x</span><span class="op" id="7705421">.</span><span class="ident" id="7705422">SetFrac64</span><span class="op" id="7705431">(</span><span class="num" id="7705432">10</span><span class="op" id="7705434">,</span>&nbsp;<span class="num" id="7705436">2</span><span class="op" id="7705437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705440">x</span><span class="op" id="7705441">.</span><span class="ident" id="7705442">Denom</span><span class="op" id="7705447">(</span><span class="op" id="7705448">)</span><span class="op" id="7705449">.</span><span class="ident" id="7705450">SetInt64</span><span class="op" id="7705458">(</span><span class="num" id="7705459">3</span><span class="op" id="7705460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705463">q53</span>&nbsp;<span class="op" id="7705467">:=</span>&nbsp;<span class="ident" id="7705470">NewRat</span><span class="op" id="7705476">(</span><span class="num" id="7705477">5</span><span class="op" id="7705478">,</span>&nbsp;<span class="num" id="7705480">3</span><span class="op" id="7705481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705484">if</span>&nbsp;<span class="ident" id="7705487">x</span><span class="op" id="7705488">.</span><span class="ident" id="7705489">Cmp</span><span class="op" id="7705492">(</span><span class="ident" id="7705493">q53</span><span class="op" id="7705496">)</span>&nbsp;<span class="op" id="7705498">!=</span>&nbsp;<span class="num" id="7705501">0</span>&nbsp;<span class="op" id="7705503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705507">t</span><span class="op" id="7705508">.</span><span class="ident" id="7705509">Errorf</span><span class="op" id="7705515">(</span><span class="string" id="7705516">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705536">,</span>&nbsp;<span class="ident" id="7705538">x</span><span class="op" id="7705539">,</span>&nbsp;<span class="ident" id="7705541">q53</span><span class="op" id="7705544">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705551">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705621">x</span>&nbsp;<span class="op" id="7705623">=</span>&nbsp;<span class="ident" id="7705625">NewRat</span><span class="op" id="7705631">(</span><span class="num" id="7705632">10</span><span class="op" id="7705634">,</span>&nbsp;<span class="num" id="7705636">2</span><span class="op" id="7705637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705640">x</span><span class="op" id="7705641">.</span><span class="ident" id="7705642">Denom</span><span class="op" id="7705647">(</span><span class="op" id="7705648">)</span><span class="op" id="7705649">.</span><span class="ident" id="7705650">SetInt64</span><span class="op" id="7705658">(</span><span class="num" id="7705659">3</span><span class="op" id="7705660">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705663">if</span>&nbsp;<span class="ident" id="7705666">x</span><span class="op" id="7705667">.</span><span class="ident" id="7705668">Cmp</span><span class="op" id="7705671">(</span><span class="ident" id="7705672">q53</span><span class="op" id="7705675">)</span>&nbsp;<span class="op" id="7705677">!=</span>&nbsp;<span class="num" id="7705680">0</span>&nbsp;<span class="op" id="7705682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705686">t</span><span class="op" id="7705687">.</span><span class="ident" id="7705688">Errorf</span><span class="op" id="7705694">(</span><span class="string" id="7705695">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705715">,</span>&nbsp;<span class="ident" id="7705717">x</span><span class="op" id="7705718">,</span>&nbsp;<span class="ident" id="7705720">q53</span><span class="op" id="7705723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7705730">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705797">x</span><span class="op" id="7705798">.</span><span class="ident" id="7705799">SetFrac</span><span class="op" id="7705806">(</span><span class="ident" id="7705807">a</span><span class="op" id="7705808">,</span>&nbsp;<span class="ident" id="7705810">b</span><span class="op" id="7705811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705814">a</span>&nbsp;<span class="op" id="7705816">=</span>&nbsp;<span class="ident" id="7705818">x</span><span class="op" id="7705819">.</span><span class="ident" id="7705820">Num</span><span class="op" id="7705823">(</span><span class="op" id="7705824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705827">b</span>&nbsp;<span class="op" id="7705829">=</span>&nbsp;<span class="ident" id="7705831">x</span><span class="op" id="7705832">.</span><span class="ident" id="7705833">Denom</span><span class="op" id="7705838">(</span><span class="op" id="7705839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705842">a</span><span class="op" id="7705843">.</span><span class="ident" id="7705844">SetInt64</span><span class="op" id="7705852">(</span><span class="num" id="7705853">5</span><span class="op" id="7705854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705857">b</span><span class="op" id="7705858">.</span><span class="ident" id="7705859">SetInt64</span><span class="op" id="7705867">(</span><span class="num" id="7705868">3</span><span class="op" id="7705869">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7705872">if</span>&nbsp;<span class="ident" id="7705875">x</span><span class="op" id="7705876">.</span><span class="ident" id="7705877">Cmp</span><span class="op" id="7705880">(</span><span class="ident" id="7705881">q53</span><span class="op" id="7705884">)</span>&nbsp;<span class="op" id="7705886">!=</span>&nbsp;<span class="num" id="7705889">0</span>&nbsp;<span class="op" id="7705891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7705895">t</span><span class="op" id="7705896">.</span><span class="ident" id="7705897">Errorf</span><span class="op" id="7705903">(</span><span class="string" id="7705904">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7705923">,</span>&nbsp;<span class="ident" id="7705925">x</span><span class="op" id="7705926">,</span>&nbsp;<span class="ident" id="7705928">q53</span><span class="op" id="7705931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7705934">}</span><br>
<span class="lineno"></span><span class="op" id="7705936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7705939">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7706008">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7706080">var</span>&nbsp;<span class="ident" id="7706084">float64inputs</span>&nbsp;<span class="op" id="7706098">=</span>&nbsp;<span class="op" id="7706100">[</span><span class="op" id="7706101">]</span><span class="builtintype" id="7706102">string</span><span class="op" id="7706108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7706111">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7706161">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706231">&#34;5e+125&#34;</span><span class="op" id="7706239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706242">&#34;69e+267&#34;</span><span class="op" id="7706251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706254">&#34;999e-026&#34;</span><span class="op" id="7706264">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706267">&#34;7861e-034&#34;</span><span class="op" id="7706278">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706281">&#34;75569e-254&#34;</span><span class="op" id="7706293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706296">&#34;928609e-261&#34;</span><span class="op" id="7706309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706312">&#34;9210917e+080&#34;</span><span class="op" id="7706326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706329">&#34;84863171e+114&#34;</span><span class="op" id="7706344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706347">&#34;653777767e+273&#34;</span><span class="op" id="7706363">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706366">&#34;5232604057e-298&#34;</span><span class="op" id="7706383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706386">&#34;27235667517e-109&#34;</span><span class="op" id="7706404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706407">&#34;653532977297e-123&#34;</span><span class="op" id="7706426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706429">&#34;3142213164987e-294&#34;</span><span class="op" id="7706449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706452">&#34;46202199371337e-072&#34;</span><span class="op" id="7706473">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706476">&#34;231010996856685e-073&#34;</span><span class="op" id="7706498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706501">&#34;9324754620109615e+212&#34;</span><span class="op" id="7706524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706527">&#34;78459735791271921e+049&#34;</span><span class="op" id="7706551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706554">&#34;272104041512242479e+200&#34;</span><span class="op" id="7706579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706582">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7706608">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706611">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7706638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706641">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7706669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706672">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7706701">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7706705">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706775">&#34;9e-265&#34;</span><span class="op" id="7706783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706786">&#34;85e-037&#34;</span><span class="op" id="7706795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706798">&#34;623e+100&#34;</span><span class="op" id="7706808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706811">&#34;3571e+263&#34;</span><span class="op" id="7706822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706825">&#34;81661e+153&#34;</span><span class="op" id="7706837">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706840">&#34;920657e-023&#34;</span><span class="op" id="7706853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706856">&#34;4603285e-024&#34;</span><span class="op" id="7706870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706873">&#34;87575437e-309&#34;</span><span class="op" id="7706888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706891">&#34;245540327e+122&#34;</span><span class="op" id="7706907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706910">&#34;6138508175e+120&#34;</span><span class="op" id="7706927">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706930">&#34;83356057653e+193&#34;</span><span class="op" id="7706948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706951">&#34;619534293513e+124&#34;</span><span class="op" id="7706970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706973">&#34;2335141086879e+218&#34;</span><span class="op" id="7706993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7706996">&#34;36167929443327e-159&#34;</span><span class="op" id="7707017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707020">&#34;609610927149051e-255&#34;</span><span class="op" id="7707042">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707045">&#34;3743626360493413e-165&#34;</span><span class="op" id="7707068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707071">&#34;94080055902682397e-242&#34;</span><span class="op" id="7707095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707098">&#34;899810892172646163e+283&#34;</span><span class="op" id="7707123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707126">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7707152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707155">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7707182">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707185">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7707213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707216">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7707245">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707249">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707319">&#34;5e-20&#34;</span><span class="op" id="7707326">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707329">&#34;67e+14&#34;</span><span class="op" id="7707337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707340">&#34;985e+15&#34;</span><span class="op" id="7707349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707352">&#34;7693e-42&#34;</span><span class="op" id="7707362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707365">&#34;55895e-16&#34;</span><span class="op" id="7707376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707379">&#34;996622e-44&#34;</span><span class="op" id="7707391">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707394">&#34;7038531e-32&#34;</span><span class="op" id="7707407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707410">&#34;60419369e-46&#34;</span><span class="op" id="7707424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707427">&#34;702990899e-20&#34;</span><span class="op" id="7707442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707445">&#34;6930161142e-48&#34;</span><span class="op" id="7707461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707464">&#34;25933168707e+13&#34;</span><span class="op" id="7707481">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707484">&#34;596428896559e+20&#34;</span><span class="op" id="7707502">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707506">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707576">&#34;3e-23&#34;</span><span class="op" id="7707583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707586">&#34;57e+18&#34;</span><span class="op" id="7707594">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707597">&#34;789e-35&#34;</span><span class="op" id="7707606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707609">&#34;2539e-18&#34;</span><span class="op" id="7707619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707622">&#34;76173e+28&#34;</span><span class="op" id="7707633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707636">&#34;887745e-11&#34;</span><span class="op" id="7707648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707651">&#34;5382571e-37&#34;</span><span class="op" id="7707664">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707667">&#34;82381273e-35&#34;</span><span class="op" id="7707681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707684">&#34;750486563e-38&#34;</span><span class="op" id="7707699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707702">&#34;3752432815e-39&#34;</span><span class="op" id="7707718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707721">&#34;75224575729e-45&#34;</span><span class="op" id="7707738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707741">&#34;459926601011e+15&#34;</span><span class="op" id="7707759">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7707763">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707815">&#34;0&#34;</span><span class="op" id="7707818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707821">&#34;1&#34;</span><span class="op" id="7707824">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707827">&#34;+1&#34;</span><span class="op" id="7707831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707834">&#34;1e23&#34;</span><span class="op" id="7707840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707843">&#34;1E23&#34;</span><span class="op" id="7707849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707852">&#34;100000000000000000000000&#34;</span><span class="op" id="7707878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707881">&#34;1e-100&#34;</span><span class="op" id="7707889">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707892">&#34;123456700&#34;</span><span class="op" id="7707903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707906">&#34;99999999999999974834176&#34;</span><span class="op" id="7707931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707934">&#34;100000000000000000000001&#34;</span><span class="op" id="7707960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707963">&#34;100000000000000008388608&#34;</span><span class="op" id="7707989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7707992">&#34;100000000000000016777215&#34;</span><span class="op" id="7708018">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708021">&#34;100000000000000016777216&#34;</span><span class="op" id="7708047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708050">&#34;-1&#34;</span><span class="op" id="7708054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708057">&#34;-0.1&#34;</span><span class="op" id="7708063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708066">&#34;-0&#34;</span><span class="op" id="7708070">,</span>&nbsp;<span class="comment" id="7708072">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708110">&#34;1e-20&#34;</span><span class="op" id="7708117">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708120">&#34;625e-3&#34;</span><span class="op" id="7708128">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708132">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708152">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7708176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708179">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7708204">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708207">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708236">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7708260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708263">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7708288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708291">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708319">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708341">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7708365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708368">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7708393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708396">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708423">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7708449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708452">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7708479">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708483">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708506">&#34;1e308&#34;</span><span class="op" id="7708513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708516">&#34;2e308&#34;</span><span class="op" id="7708523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708526">&#34;1e309&#34;</span><span class="op" id="7708533">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708537">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708555">&#34;1e310&#34;</span><span class="op" id="7708562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708565">&#34;-1e310&#34;</span><span class="op" id="7708573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708576">&#34;1e400&#34;</span><span class="op" id="7708583">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708586">&#34;-1e400&#34;</span><span class="op" id="7708594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708597">&#34;long:1e400000&#34;</span><span class="op" id="7708612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708615">&#34;long:-1e400000&#34;</span><span class="op" id="7708631">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708635">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708652">&#34;1e-305&#34;</span><span class="op" id="7708660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708663">&#34;1e-306&#34;</span><span class="op" id="7708671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708674">&#34;1e-307&#34;</span><span class="op" id="7708682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708685">&#34;1e-308&#34;</span><span class="op" id="7708693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708696">&#34;1e-309&#34;</span><span class="op" id="7708704">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708707">&#34;1e-310&#34;</span><span class="op" id="7708715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708718">&#34;1e-322&#34;</span><span class="op" id="7708726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708729">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708751">&#34;5e-324&#34;</span><span class="op" id="7708759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708762">&#34;4e-324&#34;</span><span class="op" id="7708770">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708773">&#34;3e-324&#34;</span><span class="op" id="7708781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708784">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708798">&#34;2e-324&#34;</span><span class="op" id="7708806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708809">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708827">&#34;1e-350&#34;</span><span class="op" id="7708835">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708838">&#34;long:1e-400000&#34;</span><span class="op" id="7708854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708857">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708885">&#34;-1e-350&#34;</span><span class="op" id="7708894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7708897">&#34;long:-1e-400000&#34;</span><span class="op" id="7708914">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708918">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7708947">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709006">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709027">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709048">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709079">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709111">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709198">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7709223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709226">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709313">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7709338">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709342">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709416">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7709440">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709444">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709487">&#34;22.222222222222222&#34;</span><span class="op" id="7709507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709510">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7709520">+</span>&nbsp;<span class="ident" id="7709522">strings</span><span class="op" id="7709529">.</span><span class="ident" id="7709530">Repeat</span><span class="op" id="7709536">(</span><span class="string" id="7709537">&#34;2&#34;</span><span class="op" id="7709540">,</span>&nbsp;<span class="num" id="7709542">4000</span><span class="op" id="7709546">)</span>&nbsp;<span class="op" id="7709548">+</span>&nbsp;<span class="string" id="7709550">&#34;e+1&#34;</span><span class="op" id="7709555">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709559">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709615">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709641">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7709698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709701">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709739">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7709796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709799">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709830">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7709887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7709890">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7709956">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7710019">+</span>&nbsp;<span class="ident" id="7710021">strings</span><span class="op" id="7710028">.</span><span class="ident" id="7710029">Repeat</span><span class="op" id="7710035">(</span><span class="string" id="7710036">&#34;0&#34;</span><span class="op" id="7710039">,</span>&nbsp;<span class="num" id="7710041">10000</span><span class="op" id="7710046">)</span>&nbsp;<span class="op" id="7710048">+</span>&nbsp;<span class="string" id="7710050">&#34;1&#34;</span><span class="op" id="7710053">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710057">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710093">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7710141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710144">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710188">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7710236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710239">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710298">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710343">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7710391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710394">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7710462">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710507">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7710555">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710559">&#34;1152921504606846975&#34;</span><span class="op" id="7710580">,</span>&nbsp;&nbsp;<span class="comment" id="7710583">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710599">&#34;-1152921504606846975&#34;</span><span class="op" id="7710621">,</span>&nbsp;<span class="comment" id="7710623">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710640">&#34;1152921504606846977&#34;</span><span class="op" id="7710661">,</span>&nbsp;&nbsp;<span class="comment" id="7710664">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710680">&#34;-1152921504606846977&#34;</span><span class="op" id="7710702">,</span>&nbsp;<span class="comment" id="7710704">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7710722">&#34;1/3&#34;</span><span class="op" id="7710727">,</span><br>
<span class="lineno"></span><span class="op" id="7710729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7710732">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7710798">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7710858">func</span>&nbsp;<span class="ident" id="7710863">isFinite</span><span class="op" id="7710871">(</span><span class="ident" id="7710872">f</span>&nbsp;<span class="builtintype" id="7710874">float64</span><span class="op" id="7710881">)</span>&nbsp;<span class="builtintype" id="7710883">bool</span>&nbsp;<span class="op" id="7710888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710891">return</span>&nbsp;<span class="ident" id="7710898">math</span><span class="op" id="7710902">.</span><span class="ident" id="7710903">Abs</span><span class="op" id="7710906">(</span><span class="ident" id="7710907">f</span><span class="op" id="7710908">)</span>&nbsp;<span class="op" id="7710910">&lt;=</span>&nbsp;<span class="ident" id="7710913">math</span><span class="op" id="7710917">.</span><span class="ident" id="7710918">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7710929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710932">func</span>&nbsp;<span class="ident" id="7710937">TestFloat32SpecialCases</span><span class="op" id="7710960">(</span><span class="ident" id="7710961">t</span>&nbsp;<span class="op" id="7710963">*</span><span class="ident" id="7710964">testing</span><span class="op" id="7710971">.</span><span class="ident" id="7710972">T</span><span class="op" id="7710973">)</span>&nbsp;<span class="op" id="7710975">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7710978">for</span>&nbsp;<span class="ident" id="7710982">_</span><span class="op" id="7710983">,</span>&nbsp;<span class="ident" id="7710985">input</span>&nbsp;<span class="op" id="7710991">:=</span>&nbsp;<span class="keyword" id="7710994">range</span>&nbsp;<span class="ident" id="7711000">float64inputs</span>&nbsp;<span class="op" id="7711014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711018">if</span>&nbsp;<span class="ident" id="7711021">strings</span><span class="op" id="7711028">.</span><span class="ident" id="7711029">HasPrefix</span><span class="op" id="7711038">(</span><span class="ident" id="7711039">input</span><span class="op" id="7711044">,</span>&nbsp;<span class="string" id="7711046">&#34;long:&#34;</span><span class="op" id="7711053">)</span>&nbsp;<span class="op" id="7711055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711060">if</span>&nbsp;<span class="ident" id="7711063">testing</span><span class="op" id="7711070">.</span><span class="ident" id="7711071">Short</span><span class="op" id="7711076">(</span><span class="op" id="7711077">)</span>&nbsp;<span class="op" id="7711079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711085">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711097">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711102">input</span>&nbsp;<span class="op" id="7711108">=</span>&nbsp;<span class="ident" id="7711110">input</span><span class="op" id="7711115">[</span><span class="builtinfunc" id="7711116">len</span><span class="op" id="7711119">(</span><span class="string" id="7711120">&#34;long:&#34;</span><span class="op" id="7711127">)</span><span class="op" id="7711128">:</span><span class="op" id="7711129">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711138">r</span><span class="op" id="7711139">,</span>&nbsp;<span class="ident" id="7711141">ok</span>&nbsp;<span class="op" id="7711144">:=</span>&nbsp;<span class="builtinfunc" id="7711147">new</span><span class="op" id="7711150">(</span><span class="ident" id="7711151">Rat</span><span class="op" id="7711154">)</span><span class="op" id="7711155">.</span><span class="ident" id="7711156">SetString</span><span class="op" id="7711165">(</span><span class="ident" id="7711166">input</span><span class="op" id="7711171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711175">if</span>&nbsp;<span class="op" id="7711178">!</span><span class="ident" id="7711179">ok</span>&nbsp;<span class="op" id="7711182">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711187">t</span><span class="op" id="7711188">.</span><span class="ident" id="7711189">Errorf</span><span class="op" id="7711195">(</span><span class="string" id="7711196">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7711222">,</span>&nbsp;<span class="ident" id="7711224">input</span><span class="op" id="7711229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711234">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711249">f</span><span class="op" id="7711250">,</span>&nbsp;<span class="ident" id="7711252">exact</span>&nbsp;<span class="op" id="7711258">:=</span>&nbsp;<span class="ident" id="7711261">r</span><span class="op" id="7711262">.</span><span class="ident" id="7711263">Float32</span><span class="op" id="7711270">(</span><span class="op" id="7711271">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711276">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711331">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711372">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711434">if</span>&nbsp;<span class="op" id="7711437">!</span><span class="ident" id="7711438">strings</span><span class="op" id="7711445">.</span><span class="ident" id="7711446">Contains</span><span class="op" id="7711454">(</span><span class="ident" id="7711455">input</span><span class="op" id="7711460">,</span>&nbsp;<span class="string" id="7711462">&#34;/&#34;</span><span class="op" id="7711465">)</span>&nbsp;<span class="op" id="7711467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711472">e64</span><span class="op" id="7711475">,</span>&nbsp;<span class="ident" id="7711477">_</span>&nbsp;<span class="op" id="7711479">:=</span>&nbsp;<span class="ident" id="7711482">strconv</span><span class="op" id="7711489">.</span><span class="ident" id="7711490">ParseFloat</span><span class="op" id="7711500">(</span><span class="ident" id="7711501">input</span><span class="op" id="7711506">,</span>&nbsp;<span class="num" id="7711508">32</span><span class="op" id="7711510">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711515">e</span>&nbsp;<span class="op" id="7711517">:=</span>&nbsp;<span class="builtintype" id="7711520">float32</span><span class="op" id="7711527">(</span><span class="ident" id="7711528">e64</span><span class="op" id="7711531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711537">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711580">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711630">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711676">switch</span>&nbsp;<span class="op" id="7711683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711688">case</span>&nbsp;<span class="ident" id="7711693">math</span><span class="op" id="7711697">.</span><span class="ident" id="7711698">Float32bits</span><span class="op" id="7711709">(</span><span class="ident" id="7711710">e</span><span class="op" id="7711711">)</span>&nbsp;<span class="op" id="7711713">==</span>&nbsp;<span class="ident" id="7711716">math</span><span class="op" id="7711720">.</span><span class="ident" id="7711721">Float32bits</span><span class="op" id="7711732">(</span><span class="ident" id="7711733">f</span><span class="op" id="7711734">)</span><span class="op" id="7711735">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711741">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711766">case</span>&nbsp;<span class="ident" id="7711771">f</span>&nbsp;<span class="op" id="7711773">==</span>&nbsp;<span class="num" id="7711776">0</span>&nbsp;<span class="op" id="7711778">&amp;&amp;</span>&nbsp;<span class="ident" id="7711781">r</span><span class="op" id="7711782">.</span><span class="ident" id="7711783">Num</span><span class="op" id="7711786">(</span><span class="op" id="7711787">)</span><span class="op" id="7711788">.</span><span class="ident" id="7711789">BitLen</span><span class="op" id="7711795">(</span><span class="op" id="7711796">)</span>&nbsp;<span class="op" id="7711798">==</span>&nbsp;<span class="num" id="7711801">0</span><span class="op" id="7711802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711808">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711863">default</span><span class="op" id="7711870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7711876">t</span><span class="op" id="7711877">.</span><span class="ident" id="7711878">Errorf</span><span class="op" id="7711884">(</span><span class="string" id="7711885">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7711945">,</span>&nbsp;<span class="ident" id="7711947">input</span><span class="op" id="7711952">,</span>&nbsp;<span class="ident" id="7711954">e</span><span class="op" id="7711955">,</span>&nbsp;<span class="ident" id="7711957">e</span><span class="op" id="7711958">,</span>&nbsp;<span class="ident" id="7711960">f</span><span class="op" id="7711961">,</span>&nbsp;<span class="ident" id="7711963">f</span><span class="op" id="7711964">,</span>&nbsp;<span class="ident" id="7711966">f</span><span class="op" id="7711967">-</span><span class="ident" id="7711968">e</span><span class="op" id="7711969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7711978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7711983">if</span>&nbsp;<span class="op" id="7711986">!</span><span class="ident" id="7711987">isFinite</span><span class="op" id="7711995">(</span><span class="builtintype" id="7711996">float64</span><span class="op" id="7712003">(</span><span class="ident" id="7712004">f</span><span class="op" id="7712005">)</span><span class="op" id="7712006">)</span>&nbsp;<span class="op" id="7712008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712013">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712029">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712073">if</span>&nbsp;<span class="op" id="7712076">!</span><span class="ident" id="7712077">checkIsBestApprox32</span><span class="op" id="7712096">(</span><span class="ident" id="7712097">t</span><span class="op" id="7712098">,</span>&nbsp;<span class="ident" id="7712100">f</span><span class="op" id="7712101">,</span>&nbsp;<span class="ident" id="7712103">r</span><span class="op" id="7712104">)</span>&nbsp;<span class="op" id="7712106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712111">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712145">t</span><span class="op" id="7712146">.</span><span class="ident" id="7712147">Errorf</span><span class="op" id="7712153">(</span><span class="string" id="7712154">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7712170">,</span>&nbsp;<span class="ident" id="7712172">input</span><span class="op" id="7712177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712186">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712232">checkNonLossyRoundtrip32</span><span class="op" id="7712256">(</span><span class="ident" id="7712257">t</span><span class="op" id="7712258">,</span>&nbsp;<span class="ident" id="7712260">f</span><span class="op" id="7712261">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712266">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712312">if</span>&nbsp;<span class="ident" id="7712315">wasExact</span>&nbsp;<span class="op" id="7712324">:=</span>&nbsp;<span class="builtinfunc" id="7712327">new</span><span class="op" id="7712330">(</span><span class="ident" id="7712331">Rat</span><span class="op" id="7712334">)</span><span class="op" id="7712335">.</span><span class="ident" id="7712336">SetFloat64</span><span class="op" id="7712346">(</span><span class="builtintype" id="7712347">float64</span><span class="op" id="7712354">(</span><span class="ident" id="7712355">f</span><span class="op" id="7712356">)</span><span class="op" id="7712357">)</span><span class="op" id="7712358">.</span><span class="ident" id="7712359">Cmp</span><span class="op" id="7712362">(</span><span class="ident" id="7712363">r</span><span class="op" id="7712364">)</span>&nbsp;<span class="op" id="7712366">==</span>&nbsp;<span class="num" id="7712369">0</span><span class="op" id="7712370">;</span>&nbsp;<span class="ident" id="7712372">wasExact</span>&nbsp;<span class="op" id="7712381">!=</span>&nbsp;<span class="ident" id="7712384">exact</span>&nbsp;<span class="op" id="7712390">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712395">t</span><span class="op" id="7712396">.</span><span class="ident" id="7712397">Errorf</span><span class="op" id="7712403">(</span><span class="string" id="7712404">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7712453">,</span>&nbsp;<span class="ident" id="7712455">input</span><span class="op" id="7712460">,</span>&nbsp;<span class="ident" id="7712462">exact</span><span class="op" id="7712467">,</span>&nbsp;<span class="ident" id="7712469">wasExact</span><span class="op" id="7712477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712484">}</span><br>
<span class="lineno"></span><span class="op" id="7712486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7712489">func</span>&nbsp;<span class="ident" id="7712494">TestFloat64SpecialCases</span><span class="op" id="7712517">(</span><span class="ident" id="7712518">t</span>&nbsp;<span class="op" id="7712520">*</span><span class="ident" id="7712521">testing</span><span class="op" id="7712528">.</span><span class="ident" id="7712529">T</span><span class="op" id="7712530">)</span>&nbsp;<span class="op" id="7712532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712535">for</span>&nbsp;<span class="ident" id="7712539">_</span><span class="op" id="7712540">,</span>&nbsp;<span class="ident" id="7712542">input</span>&nbsp;<span class="op" id="7712548">:=</span>&nbsp;<span class="keyword" id="7712551">range</span>&nbsp;<span class="ident" id="7712557">float64inputs</span>&nbsp;<span class="op" id="7712571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712575">if</span>&nbsp;<span class="ident" id="7712578">strings</span><span class="op" id="7712585">.</span><span class="ident" id="7712586">HasPrefix</span><span class="op" id="7712595">(</span><span class="ident" id="7712596">input</span><span class="op" id="7712601">,</span>&nbsp;<span class="string" id="7712603">&#34;long:&#34;</span><span class="op" id="7712610">)</span>&nbsp;<span class="op" id="7712612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712617">if</span>&nbsp;<span class="ident" id="7712620">testing</span><span class="op" id="7712627">.</span><span class="ident" id="7712628">Short</span><span class="op" id="7712633">(</span><span class="op" id="7712634">)</span>&nbsp;<span class="op" id="7712636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712642">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712659">input</span>&nbsp;<span class="op" id="7712665">=</span>&nbsp;<span class="ident" id="7712667">input</span><span class="op" id="7712672">[</span><span class="builtinfunc" id="7712673">len</span><span class="op" id="7712676">(</span><span class="string" id="7712677">&#34;long:&#34;</span><span class="op" id="7712684">)</span><span class="op" id="7712685">:</span><span class="op" id="7712686">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712695">r</span><span class="op" id="7712696">,</span>&nbsp;<span class="ident" id="7712698">ok</span>&nbsp;<span class="op" id="7712701">:=</span>&nbsp;<span class="builtinfunc" id="7712704">new</span><span class="op" id="7712707">(</span><span class="ident" id="7712708">Rat</span><span class="op" id="7712711">)</span><span class="op" id="7712712">.</span><span class="ident" id="7712713">SetString</span><span class="op" id="7712722">(</span><span class="ident" id="7712723">input</span><span class="op" id="7712728">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712732">if</span>&nbsp;<span class="op" id="7712735">!</span><span class="ident" id="7712736">ok</span>&nbsp;<span class="op" id="7712739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712744">t</span><span class="op" id="7712745">.</span><span class="ident" id="7712746">Errorf</span><span class="op" id="7712752">(</span><span class="string" id="7712753">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7712779">,</span>&nbsp;<span class="ident" id="7712781">input</span><span class="op" id="7712786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7712802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7712806">f</span><span class="op" id="7712807">,</span>&nbsp;<span class="ident" id="7712809">exact</span>&nbsp;<span class="op" id="7712815">:=</span>&nbsp;<span class="ident" id="7712818">r</span><span class="op" id="7712819">.</span><span class="ident" id="7712820">Float64</span><span class="op" id="7712827">(</span><span class="op" id="7712828">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712833">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712888">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712929">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7712991">if</span>&nbsp;<span class="op" id="7712994">!</span><span class="ident" id="7712995">strings</span><span class="op" id="7713002">.</span><span class="ident" id="7713003">Contains</span><span class="op" id="7713011">(</span><span class="ident" id="7713012">input</span><span class="op" id="7713017">,</span>&nbsp;<span class="string" id="7713019">&#34;/&#34;</span><span class="op" id="7713022">)</span>&nbsp;<span class="op" id="7713024">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713029">e</span><span class="op" id="7713030">,</span>&nbsp;<span class="ident" id="7713032">_</span>&nbsp;<span class="op" id="7713034">:=</span>&nbsp;<span class="ident" id="7713037">strconv</span><span class="op" id="7713044">.</span><span class="ident" id="7713045">ParseFloat</span><span class="op" id="7713055">(</span><span class="ident" id="7713056">input</span><span class="op" id="7713061">,</span>&nbsp;<span class="num" id="7713063">64</span><span class="op" id="7713065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713071">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713114">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713164">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713210">switch</span>&nbsp;<span class="op" id="7713217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713222">case</span>&nbsp;<span class="ident" id="7713227">math</span><span class="op" id="7713231">.</span><span class="ident" id="7713232">Float64bits</span><span class="op" id="7713243">(</span><span class="ident" id="7713244">e</span><span class="op" id="7713245">)</span>&nbsp;<span class="op" id="7713247">==</span>&nbsp;<span class="ident" id="7713250">math</span><span class="op" id="7713254">.</span><span class="ident" id="7713255">Float64bits</span><span class="op" id="7713266">(</span><span class="ident" id="7713267">f</span><span class="op" id="7713268">)</span><span class="op" id="7713269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713275">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713300">case</span>&nbsp;<span class="ident" id="7713305">f</span>&nbsp;<span class="op" id="7713307">==</span>&nbsp;<span class="num" id="7713310">0</span>&nbsp;<span class="op" id="7713312">&amp;&amp;</span>&nbsp;<span class="ident" id="7713315">r</span><span class="op" id="7713316">.</span><span class="ident" id="7713317">Num</span><span class="op" id="7713320">(</span><span class="op" id="7713321">)</span><span class="op" id="7713322">.</span><span class="ident" id="7713323">BitLen</span><span class="op" id="7713329">(</span><span class="op" id="7713330">)</span>&nbsp;<span class="op" id="7713332">==</span>&nbsp;<span class="num" id="7713335">0</span><span class="op" id="7713336">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713342">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713397">default</span><span class="op" id="7713404">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713410">t</span><span class="op" id="7713411">.</span><span class="ident" id="7713412">Errorf</span><span class="op" id="7713418">(</span><span class="string" id="7713419">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7713479">,</span>&nbsp;<span class="ident" id="7713481">input</span><span class="op" id="7713486">,</span>&nbsp;<span class="ident" id="7713488">e</span><span class="op" id="7713489">,</span>&nbsp;<span class="ident" id="7713491">e</span><span class="op" id="7713492">,</span>&nbsp;<span class="ident" id="7713494">f</span><span class="op" id="7713495">,</span>&nbsp;<span class="ident" id="7713497">f</span><span class="op" id="7713498">,</span>&nbsp;<span class="ident" id="7713500">f</span><span class="op" id="7713501">-</span><span class="ident" id="7713502">e</span><span class="op" id="7713503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713517">if</span>&nbsp;<span class="op" id="7713520">!</span><span class="ident" id="7713521">isFinite</span><span class="op" id="7713529">(</span><span class="ident" id="7713530">f</span><span class="op" id="7713531">)</span>&nbsp;<span class="op" id="7713533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713538">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713554">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713598">if</span>&nbsp;<span class="op" id="7713601">!</span><span class="ident" id="7713602">checkIsBestApprox64</span><span class="op" id="7713621">(</span><span class="ident" id="7713622">t</span><span class="op" id="7713623">,</span>&nbsp;<span class="ident" id="7713625">f</span><span class="op" id="7713626">,</span>&nbsp;<span class="ident" id="7713628">r</span><span class="op" id="7713629">)</span>&nbsp;<span class="op" id="7713631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713636">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713670">t</span><span class="op" id="7713671">.</span><span class="ident" id="7713672">Errorf</span><span class="op" id="7713678">(</span><span class="string" id="7713679">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7713695">,</span>&nbsp;<span class="ident" id="7713697">input</span><span class="op" id="7713702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713711">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713757">checkNonLossyRoundtrip64</span><span class="op" id="7713781">(</span><span class="ident" id="7713782">t</span><span class="op" id="7713783">,</span>&nbsp;<span class="ident" id="7713785">f</span><span class="op" id="7713786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7713791">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7713837">if</span>&nbsp;<span class="ident" id="7713840">wasExact</span>&nbsp;<span class="op" id="7713849">:=</span>&nbsp;<span class="builtinfunc" id="7713852">new</span><span class="op" id="7713855">(</span><span class="ident" id="7713856">Rat</span><span class="op" id="7713859">)</span><span class="op" id="7713860">.</span><span class="ident" id="7713861">SetFloat64</span><span class="op" id="7713871">(</span><span class="ident" id="7713872">f</span><span class="op" id="7713873">)</span><span class="op" id="7713874">.</span><span class="ident" id="7713875">Cmp</span><span class="op" id="7713878">(</span><span class="ident" id="7713879">r</span><span class="op" id="7713880">)</span>&nbsp;<span class="op" id="7713882">==</span>&nbsp;<span class="num" id="7713885">0</span><span class="op" id="7713886">;</span>&nbsp;<span class="ident" id="7713888">wasExact</span>&nbsp;<span class="op" id="7713897">!=</span>&nbsp;<span class="ident" id="7713900">exact</span>&nbsp;<span class="op" id="7713906">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7713911">t</span><span class="op" id="7713912">.</span><span class="ident" id="7713913">Errorf</span><span class="op" id="7713919">(</span><span class="string" id="7713920">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7713969">,</span>&nbsp;<span class="ident" id="7713971">input</span><span class="op" id="7713976">,</span>&nbsp;<span class="ident" id="7713978">exact</span><span class="op" id="7713983">,</span>&nbsp;<span class="ident" id="7713985">wasExact</span><span class="op" id="7713993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7713997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714000">}</span><br>
<span class="lineno"></span><span class="op" id="7714002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7714005">func</span>&nbsp;<span class="ident" id="7714010">TestFloat32Distribution</span><span class="op" id="7714033">(</span><span class="ident" id="7714034">t</span>&nbsp;<span class="op" id="7714036">*</span><span class="ident" id="7714037">testing</span><span class="op" id="7714044">.</span><span class="ident" id="7714045">T</span><span class="op" id="7714046">)</span>&nbsp;<span class="op" id="7714048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714051">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714111">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714171">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714223">var</span>&nbsp;<span class="ident" id="7714227">add</span>&nbsp;<span class="op" id="7714231">=</span>&nbsp;<span class="op" id="7714233">[</span><span class="op" id="7714234">]</span><span class="ident" id="7714235">int64</span><span class="op" id="7714240">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714244">0</span><span class="op" id="7714245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714249">1</span><span class="op" id="7714250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714254">3</span><span class="op" id="7714255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714259">5</span><span class="op" id="7714260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714264">7</span><span class="op" id="7714265">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714269">9</span><span class="op" id="7714270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7714274">11</span><span class="op" id="7714276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714282">var</span>&nbsp;<span class="ident" id="7714286">winc</span><span class="op" id="7714290">,</span>&nbsp;<span class="ident" id="7714292">einc</span>&nbsp;<span class="op" id="7714297">=</span>&nbsp;<span class="ident" id="7714299">uint64</span><span class="op" id="7714305">(</span><span class="num" id="7714306">1</span><span class="op" id="7714307">)</span><span class="op" id="7714308">,</span>&nbsp;<span class="num" id="7714310">1</span>&nbsp;<span class="comment" id="7714312">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714344">if</span>&nbsp;<span class="ident" id="7714347">testing</span><span class="op" id="7714354">.</span><span class="ident" id="7714355">Short</span><span class="op" id="7714360">(</span><span class="op" id="7714361">)</span>&nbsp;<span class="op" id="7714363">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714367">winc</span><span class="op" id="7714371">,</span>&nbsp;<span class="ident" id="7714373">einc</span>&nbsp;<span class="op" id="7714378">=</span>&nbsp;<span class="num" id="7714380">5</span><span class="op" id="7714381">,</span>&nbsp;<span class="num" id="7714383">15</span>&nbsp;<span class="comment" id="7714386">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714423">for</span>&nbsp;<span class="ident" id="7714427">_</span><span class="op" id="7714428">,</span>&nbsp;<span class="ident" id="7714430">sign</span>&nbsp;<span class="op" id="7714435">:=</span>&nbsp;<span class="keyword" id="7714438">range</span>&nbsp;<span class="string" id="7714444">&#34;+-&#34;</span>&nbsp;<span class="op" id="7714449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714453">for</span>&nbsp;<span class="ident" id="7714457">_</span><span class="op" id="7714458">,</span>&nbsp;<span class="ident" id="7714460">a</span>&nbsp;<span class="op" id="7714462">:=</span>&nbsp;<span class="keyword" id="7714465">range</span>&nbsp;<span class="ident" id="7714471">add</span>&nbsp;<span class="op" id="7714475">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714480">for</span>&nbsp;<span class="ident" id="7714484">wid</span>&nbsp;<span class="op" id="7714488">:=</span>&nbsp;<span class="ident" id="7714491">uint64</span><span class="op" id="7714497">(</span><span class="num" id="7714498">0</span><span class="op" id="7714499">)</span><span class="op" id="7714500">;</span>&nbsp;<span class="ident" id="7714502">wid</span>&nbsp;<span class="op" id="7714506">&lt;</span>&nbsp;<span class="num" id="7714508">30</span><span class="op" id="7714510">;</span>&nbsp;<span class="ident" id="7714512">wid</span>&nbsp;<span class="op" id="7714516">+=</span>&nbsp;<span class="ident" id="7714519">winc</span>&nbsp;<span class="op" id="7714524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714530">b</span>&nbsp;<span class="op" id="7714532">:=</span>&nbsp;<span class="num" id="7714535">1</span><span class="op" id="7714536">&lt;&lt;</span><span class="ident" id="7714538">wid</span>&nbsp;<span class="op" id="7714542">+</span>&nbsp;<span class="ident" id="7714544">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714550">if</span>&nbsp;<span class="ident" id="7714553">sign</span>&nbsp;<span class="op" id="7714558">==</span>&nbsp;<span class="string" id="7714561">&#39;-&#39;</span>&nbsp;<span class="op" id="7714565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714572">b</span>&nbsp;<span class="op" id="7714574">=</span>&nbsp;<span class="op" id="7714576">-</span><span class="ident" id="7714577">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714583">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714589">for</span>&nbsp;<span class="ident" id="7714593">exp</span>&nbsp;<span class="op" id="7714597">:=</span>&nbsp;<span class="op" id="7714600">-</span><span class="num" id="7714601">150</span><span class="op" id="7714604">;</span>&nbsp;<span class="ident" id="7714606">exp</span>&nbsp;<span class="op" id="7714610">&lt;</span>&nbsp;<span class="num" id="7714612">150</span><span class="op" id="7714615">;</span>&nbsp;<span class="ident" id="7714617">exp</span>&nbsp;<span class="op" id="7714621">+=</span>&nbsp;<span class="ident" id="7714624">einc</span>&nbsp;<span class="op" id="7714629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714636">num</span><span class="op" id="7714639">,</span>&nbsp;<span class="ident" id="7714641">den</span>&nbsp;<span class="op" id="7714645">:=</span>&nbsp;<span class="ident" id="7714648">NewInt</span><span class="op" id="7714654">(</span><span class="ident" id="7714655">b</span><span class="op" id="7714656">)</span><span class="op" id="7714657">,</span>&nbsp;<span class="ident" id="7714659">NewInt</span><span class="op" id="7714665">(</span><span class="num" id="7714666">1</span><span class="op" id="7714667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714674">if</span>&nbsp;<span class="ident" id="7714677">exp</span>&nbsp;<span class="op" id="7714681">&gt;</span>&nbsp;<span class="num" id="7714683">0</span>&nbsp;<span class="op" id="7714685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714693">num</span><span class="op" id="7714696">.</span><span class="ident" id="7714697">Lsh</span><span class="op" id="7714700">(</span><span class="ident" id="7714701">num</span><span class="op" id="7714704">,</span>&nbsp;<span class="builtintype" id="7714706">uint</span><span class="op" id="7714710">(</span><span class="ident" id="7714711">exp</span><span class="op" id="7714714">)</span><span class="op" id="7714715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714722">}</span>&nbsp;<span class="keyword" id="7714724">else</span>&nbsp;<span class="op" id="7714729">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714737">den</span><span class="op" id="7714740">.</span><span class="ident" id="7714741">Lsh</span><span class="op" id="7714744">(</span><span class="ident" id="7714745">den</span><span class="op" id="7714748">,</span>&nbsp;<span class="builtintype" id="7714750">uint</span><span class="op" id="7714754">(</span><span class="op" id="7714755">-</span><span class="ident" id="7714756">exp</span><span class="op" id="7714759">)</span><span class="op" id="7714760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7714767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714774">r</span>&nbsp;<span class="op" id="7714776">:=</span>&nbsp;<span class="builtinfunc" id="7714779">new</span><span class="op" id="7714782">(</span><span class="ident" id="7714783">Rat</span><span class="op" id="7714786">)</span><span class="op" id="7714787">.</span><span class="ident" id="7714788">SetFrac</span><span class="op" id="7714795">(</span><span class="ident" id="7714796">num</span><span class="op" id="7714799">,</span>&nbsp;<span class="ident" id="7714801">den</span><span class="op" id="7714804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714811">f</span><span class="op" id="7714812">,</span>&nbsp;<span class="ident" id="7714814">_</span>&nbsp;<span class="op" id="7714816">:=</span>&nbsp;<span class="ident" id="7714819">r</span><span class="op" id="7714820">.</span><span class="ident" id="7714821">Float32</span><span class="op" id="7714828">(</span><span class="op" id="7714829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7714837">if</span>&nbsp;<span class="op" id="7714840">!</span><span class="ident" id="7714841">checkIsBestApprox32</span><span class="op" id="7714860">(</span><span class="ident" id="7714861">t</span><span class="op" id="7714862">,</span>&nbsp;<span class="ident" id="7714864">f</span><span class="op" id="7714865">,</span>&nbsp;<span class="ident" id="7714867">r</span><span class="op" id="7714868">)</span>&nbsp;<span class="op" id="7714870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7714878">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714915">t</span><span class="op" id="7714916">.</span><span class="ident" id="7714917">Errorf</span><span class="op" id="7714923">(</span><span class="string" id="7714924">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7714987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7714996">b</span><span class="op" id="7714997">,</span>&nbsp;<span class="ident" id="7714999">exp</span><span class="op" id="7715002">,</span>&nbsp;<span class="ident" id="7715004">f</span><span class="op" id="7715005">,</span>&nbsp;<span class="ident" id="7715007">f</span><span class="op" id="7715008">,</span>&nbsp;<span class="ident" id="7715010">math</span><span class="op" id="7715014">.</span><span class="ident" id="7715015">Ldexp</span><span class="op" id="7715020">(</span><span class="builtintype" id="7715021">float64</span><span class="op" id="7715028">(</span><span class="ident" id="7715029">b</span><span class="op" id="7715030">)</span><span class="op" id="7715031">,</span>&nbsp;<span class="ident" id="7715033">exp</span><span class="op" id="7715036">)</span><span class="op" id="7715037">,</span>&nbsp;<span class="ident" id="7715039">r</span><span class="op" id="7715040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715047">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715055">checkNonLossyRoundtrip32</span><span class="op" id="7715079">(</span><span class="ident" id="7715080">t</span><span class="op" id="7715081">,</span>&nbsp;<span class="ident" id="7715083">f</span><span class="op" id="7715084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715099">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715102">}</span><br>
<span class="lineno"></span><span class="op" id="7715104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7715107">func</span>&nbsp;<span class="ident" id="7715112">TestFloat64Distribution</span><span class="op" id="7715135">(</span><span class="ident" id="7715136">t</span>&nbsp;<span class="op" id="7715138">*</span><span class="ident" id="7715139">testing</span><span class="op" id="7715146">.</span><span class="ident" id="7715147">T</span><span class="op" id="7715148">)</span>&nbsp;<span class="op" id="7715150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715153">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715213">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715273">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715325">var</span>&nbsp;<span class="ident" id="7715329">add</span>&nbsp;<span class="op" id="7715333">=</span>&nbsp;<span class="op" id="7715335">[</span><span class="op" id="7715336">]</span><span class="ident" id="7715337">int64</span><span class="op" id="7715342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715346">0</span><span class="op" id="7715347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715351">1</span><span class="op" id="7715352">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715356">3</span><span class="op" id="7715357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715361">5</span><span class="op" id="7715362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715366">7</span><span class="op" id="7715367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715371">9</span><span class="op" id="7715372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7715376">11</span><span class="op" id="7715378">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715384">var</span>&nbsp;<span class="ident" id="7715388">winc</span><span class="op" id="7715392">,</span>&nbsp;<span class="ident" id="7715394">einc</span>&nbsp;<span class="op" id="7715399">=</span>&nbsp;<span class="ident" id="7715401">uint64</span><span class="op" id="7715407">(</span><span class="num" id="7715408">1</span><span class="op" id="7715409">)</span><span class="op" id="7715410">,</span>&nbsp;<span class="num" id="7715412">1</span>&nbsp;<span class="comment" id="7715414">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715445">if</span>&nbsp;<span class="ident" id="7715448">testing</span><span class="op" id="7715455">.</span><span class="ident" id="7715456">Short</span><span class="op" id="7715461">(</span><span class="op" id="7715462">)</span>&nbsp;<span class="op" id="7715464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715468">winc</span><span class="op" id="7715472">,</span>&nbsp;<span class="ident" id="7715474">einc</span>&nbsp;<span class="op" id="7715479">=</span>&nbsp;<span class="num" id="7715481">10</span><span class="op" id="7715483">,</span>&nbsp;<span class="num" id="7715485">500</span>&nbsp;<span class="comment" id="7715489">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715522">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715526">for</span>&nbsp;<span class="ident" id="7715530">_</span><span class="op" id="7715531">,</span>&nbsp;<span class="ident" id="7715533">sign</span>&nbsp;<span class="op" id="7715538">:=</span>&nbsp;<span class="keyword" id="7715541">range</span>&nbsp;<span class="string" id="7715547">&#34;+-&#34;</span>&nbsp;<span class="op" id="7715552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715556">for</span>&nbsp;<span class="ident" id="7715560">_</span><span class="op" id="7715561">,</span>&nbsp;<span class="ident" id="7715563">a</span>&nbsp;<span class="op" id="7715565">:=</span>&nbsp;<span class="keyword" id="7715568">range</span>&nbsp;<span class="ident" id="7715574">add</span>&nbsp;<span class="op" id="7715578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715583">for</span>&nbsp;<span class="ident" id="7715587">wid</span>&nbsp;<span class="op" id="7715591">:=</span>&nbsp;<span class="ident" id="7715594">uint64</span><span class="op" id="7715600">(</span><span class="num" id="7715601">0</span><span class="op" id="7715602">)</span><span class="op" id="7715603">;</span>&nbsp;<span class="ident" id="7715605">wid</span>&nbsp;<span class="op" id="7715609">&lt;</span>&nbsp;<span class="num" id="7715611">60</span><span class="op" id="7715613">;</span>&nbsp;<span class="ident" id="7715615">wid</span>&nbsp;<span class="op" id="7715619">+=</span>&nbsp;<span class="ident" id="7715622">winc</span>&nbsp;<span class="op" id="7715627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715633">b</span>&nbsp;<span class="op" id="7715635">:=</span>&nbsp;<span class="num" id="7715638">1</span><span class="op" id="7715639">&lt;&lt;</span><span class="ident" id="7715641">wid</span>&nbsp;<span class="op" id="7715645">+</span>&nbsp;<span class="ident" id="7715647">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715653">if</span>&nbsp;<span class="ident" id="7715656">sign</span>&nbsp;<span class="op" id="7715661">==</span>&nbsp;<span class="string" id="7715664">&#39;-&#39;</span>&nbsp;<span class="op" id="7715668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715675">b</span>&nbsp;<span class="op" id="7715677">=</span>&nbsp;<span class="op" id="7715679">-</span><span class="ident" id="7715680">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715692">for</span>&nbsp;<span class="ident" id="7715696">exp</span>&nbsp;<span class="op" id="7715700">:=</span>&nbsp;<span class="op" id="7715703">-</span><span class="num" id="7715704">1100</span><span class="op" id="7715708">;</span>&nbsp;<span class="ident" id="7715710">exp</span>&nbsp;<span class="op" id="7715714">&lt;</span>&nbsp;<span class="num" id="7715716">1100</span><span class="op" id="7715720">;</span>&nbsp;<span class="ident" id="7715722">exp</span>&nbsp;<span class="op" id="7715726">+=</span>&nbsp;<span class="ident" id="7715729">einc</span>&nbsp;<span class="op" id="7715734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715741">num</span><span class="op" id="7715744">,</span>&nbsp;<span class="ident" id="7715746">den</span>&nbsp;<span class="op" id="7715750">:=</span>&nbsp;<span class="ident" id="7715753">NewInt</span><span class="op" id="7715759">(</span><span class="ident" id="7715760">b</span><span class="op" id="7715761">)</span><span class="op" id="7715762">,</span>&nbsp;<span class="ident" id="7715764">NewInt</span><span class="op" id="7715770">(</span><span class="num" id="7715771">1</span><span class="op" id="7715772">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715779">if</span>&nbsp;<span class="ident" id="7715782">exp</span>&nbsp;<span class="op" id="7715786">&gt;</span>&nbsp;<span class="num" id="7715788">0</span>&nbsp;<span class="op" id="7715790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715798">num</span><span class="op" id="7715801">.</span><span class="ident" id="7715802">Lsh</span><span class="op" id="7715805">(</span><span class="ident" id="7715806">num</span><span class="op" id="7715809">,</span>&nbsp;<span class="builtintype" id="7715811">uint</span><span class="op" id="7715815">(</span><span class="ident" id="7715816">exp</span><span class="op" id="7715819">)</span><span class="op" id="7715820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715827">}</span>&nbsp;<span class="keyword" id="7715829">else</span>&nbsp;<span class="op" id="7715834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715842">den</span><span class="op" id="7715845">.</span><span class="ident" id="7715846">Lsh</span><span class="op" id="7715849">(</span><span class="ident" id="7715850">den</span><span class="op" id="7715853">,</span>&nbsp;<span class="builtintype" id="7715855">uint</span><span class="op" id="7715859">(</span><span class="op" id="7715860">-</span><span class="ident" id="7715861">exp</span><span class="op" id="7715864">)</span><span class="op" id="7715865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7715872">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715879">r</span>&nbsp;<span class="op" id="7715881">:=</span>&nbsp;<span class="builtinfunc" id="7715884">new</span><span class="op" id="7715887">(</span><span class="ident" id="7715888">Rat</span><span class="op" id="7715891">)</span><span class="op" id="7715892">.</span><span class="ident" id="7715893">SetFrac</span><span class="op" id="7715900">(</span><span class="ident" id="7715901">num</span><span class="op" id="7715904">,</span>&nbsp;<span class="ident" id="7715906">den</span><span class="op" id="7715909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7715916">f</span><span class="op" id="7715917">,</span>&nbsp;<span class="ident" id="7715919">_</span>&nbsp;<span class="op" id="7715921">:=</span>&nbsp;<span class="ident" id="7715924">r</span><span class="op" id="7715925">.</span><span class="ident" id="7715926">Float64</span><span class="op" id="7715933">(</span><span class="op" id="7715934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7715942">if</span>&nbsp;<span class="op" id="7715945">!</span><span class="ident" id="7715946">checkIsBestApprox64</span><span class="op" id="7715965">(</span><span class="ident" id="7715966">t</span><span class="op" id="7715967">,</span>&nbsp;<span class="ident" id="7715969">f</span><span class="op" id="7715970">,</span>&nbsp;<span class="ident" id="7715972">r</span><span class="op" id="7715973">)</span>&nbsp;<span class="op" id="7715975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7715983">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716020">t</span><span class="op" id="7716021">.</span><span class="ident" id="7716022">Errorf</span><span class="op" id="7716028">(</span><span class="string" id="7716029">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7716092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716101">b</span><span class="op" id="7716102">,</span>&nbsp;<span class="ident" id="7716104">exp</span><span class="op" id="7716107">,</span>&nbsp;<span class="ident" id="7716109">f</span><span class="op" id="7716110">,</span>&nbsp;<span class="ident" id="7716112">f</span><span class="op" id="7716113">,</span>&nbsp;<span class="ident" id="7716115">math</span><span class="op" id="7716119">.</span><span class="ident" id="7716120">Ldexp</span><span class="op" id="7716125">(</span><span class="builtintype" id="7716126">float64</span><span class="op" id="7716133">(</span><span class="ident" id="7716134">b</span><span class="op" id="7716135">)</span><span class="op" id="7716136">,</span>&nbsp;<span class="ident" id="7716138">exp</span><span class="op" id="7716141">)</span><span class="op" id="7716142">,</span>&nbsp;<span class="ident" id="7716144">r</span><span class="op" id="7716145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716160">checkNonLossyRoundtrip64</span><span class="op" id="7716184">(</span><span class="ident" id="7716185">t</span><span class="op" id="7716186">,</span>&nbsp;<span class="ident" id="7716188">f</span><span class="op" id="7716189">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716207">}</span><br>
<span class="lineno"></span><span class="op" id="7716209">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7716212">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7716284">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7716300">func</span>&nbsp;<span class="ident" id="7716305">TestSetFloat64NonFinite</span><span class="op" id="7716328">(</span><span class="ident" id="7716329">t</span>&nbsp;<span class="op" id="7716331">*</span><span class="ident" id="7716332">testing</span><span class="op" id="7716339">.</span><span class="ident" id="7716340">T</span><span class="op" id="7716341">)</span>&nbsp;<span class="op" id="7716343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716346">for</span>&nbsp;<span class="ident" id="7716350">_</span><span class="op" id="7716351">,</span>&nbsp;<span class="ident" id="7716353">f</span>&nbsp;<span class="op" id="7716355">:=</span>&nbsp;<span class="keyword" id="7716358">range</span>&nbsp;<span class="op" id="7716364">[</span><span class="op" id="7716365">]</span><span class="builtintype" id="7716366">float64</span><span class="op" id="7716373">{</span><span class="ident" id="7716374">math</span><span class="op" id="7716378">.</span><span class="ident" id="7716379">NaN</span><span class="op" id="7716382">(</span><span class="op" id="7716383">)</span><span class="op" id="7716384">,</span>&nbsp;<span class="ident" id="7716386">math</span><span class="op" id="7716390">.</span><span class="ident" id="7716391">Inf</span><span class="op" id="7716394">(</span><span class="op" id="7716395">+</span><span class="num" id="7716396">1</span><span class="op" id="7716397">)</span><span class="op" id="7716398">,</span>&nbsp;<span class="ident" id="7716400">math</span><span class="op" id="7716404">.</span><span class="ident" id="7716405">Inf</span><span class="op" id="7716408">(</span><span class="op" id="7716409">-</span><span class="num" id="7716410">1</span><span class="op" id="7716411">)</span><span class="op" id="7716412">}</span>&nbsp;<span class="op" id="7716414">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716418">var</span>&nbsp;<span class="ident" id="7716422">r</span>&nbsp;<span class="ident" id="7716424">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716430">if</span>&nbsp;<span class="ident" id="7716433">r2</span>&nbsp;<span class="op" id="7716436">:=</span>&nbsp;<span class="ident" id="7716439">r</span><span class="op" id="7716440">.</span><span class="ident" id="7716441">SetFloat64</span><span class="op" id="7716451">(</span><span class="ident" id="7716452">f</span><span class="op" id="7716453">)</span><span class="op" id="7716454">;</span>&nbsp;<span class="ident" id="7716456">r2</span>&nbsp;<span class="op" id="7716459">!=</span>&nbsp;<span class="builtintype" id="7716462">nil</span>&nbsp;<span class="op" id="7716466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716471">t</span><span class="op" id="7716472">.</span><span class="ident" id="7716473">Errorf</span><span class="op" id="7716479">(</span><span class="string" id="7716480">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7716513">,</span>&nbsp;<span class="ident" id="7716515">f</span><span class="op" id="7716516">,</span>&nbsp;<span class="ident" id="7716518">r2</span><span class="op" id="7716520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716527">}</span><br>
<span class="lineno">1015</span><span class="op" id="7716529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7716532">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7716605">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7716632">func</span>&nbsp;<span class="ident" id="7716637">checkNonLossyRoundtrip32</span><span class="op" id="7716661">(</span><span class="ident" id="7716662">t</span>&nbsp;<span class="op" id="7716664">*</span><span class="ident" id="7716665">testing</span><span class="op" id="7716672">.</span><span class="ident" id="7716673">T</span><span class="op" id="7716674">,</span>&nbsp;<span class="ident" id="7716676">f</span>&nbsp;<span class="builtintype" id="7716678">float32</span><span class="op" id="7716685">)</span>&nbsp;<span class="op" id="7716687">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716690">if</span>&nbsp;<span class="op" id="7716693">!</span><span class="ident" id="7716694">isFinite</span><span class="op" id="7716702">(</span><span class="builtintype" id="7716703">float64</span><span class="op" id="7716710">(</span><span class="ident" id="7716711">f</span><span class="op" id="7716712">)</span><span class="op" id="7716713">)</span>&nbsp;<span class="op" id="7716715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716719">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716730">r</span>&nbsp;<span class="op" id="7716732">:=</span>&nbsp;<span class="builtinfunc" id="7716735">new</span><span class="op" id="7716738">(</span><span class="ident" id="7716739">Rat</span><span class="op" id="7716742">)</span><span class="op" id="7716743">.</span><span class="ident" id="7716744">SetFloat64</span><span class="op" id="7716754">(</span><span class="builtintype" id="7716755">float64</span><span class="op" id="7716762">(</span><span class="ident" id="7716763">f</span><span class="op" id="7716764">)</span><span class="op" id="7716765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716768">if</span>&nbsp;<span class="ident" id="7716771">r</span>&nbsp;<span class="op" id="7716773">==</span>&nbsp;<span class="builtintype" id="7716776">nil</span>&nbsp;<span class="op" id="7716780">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716784">t</span><span class="op" id="7716785">.</span><span class="ident" id="7716786">Errorf</span><span class="op" id="7716792">(</span><span class="string" id="7716793">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7716834">,</span>&nbsp;<span class="ident" id="7716836">f</span><span class="op" id="7716837">,</span>&nbsp;<span class="ident" id="7716839">f</span><span class="op" id="7716840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716844">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7716852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716855">f2</span><span class="op" id="7716857">,</span>&nbsp;<span class="ident" id="7716859">exact</span>&nbsp;<span class="op" id="7716865">:=</span>&nbsp;<span class="ident" id="7716868">r</span><span class="op" id="7716869">.</span><span class="ident" id="7716870">Float32</span><span class="op" id="7716877">(</span><span class="op" id="7716878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7716881">if</span>&nbsp;<span class="ident" id="7716884">f</span>&nbsp;<span class="op" id="7716886">!=</span>&nbsp;<span class="ident" id="7716889">f2</span>&nbsp;<span class="op" id="7716892">||</span>&nbsp;<span class="op" id="7716895">!</span><span class="ident" id="7716896">exact</span>&nbsp;<span class="op" id="7716902">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7716906">t</span><span class="op" id="7716907">.</span><span class="ident" id="7716908">Errorf</span><span class="op" id="7716914">(</span><span class="string" id="7716915">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7716998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717003">f</span><span class="op" id="7717004">,</span>&nbsp;<span class="ident" id="7717006">f2</span><span class="op" id="7717008">,</span>&nbsp;<span class="ident" id="7717010">f2</span><span class="op" id="7717012">,</span>&nbsp;<span class="ident" id="7717014">exact</span><span class="op" id="7717019">,</span>&nbsp;<span class="ident" id="7717021">f</span><span class="op" id="7717022">,</span>&nbsp;<span class="ident" id="7717024">f</span><span class="op" id="7717025">,</span>&nbsp;<span class="builtintype" id="7717027">true</span><span class="op" id="7717031">,</span>&nbsp;<span class="ident" id="7717033">f2</span><span class="op" id="7717035">-</span><span class="ident" id="7717036">f</span><span class="op" id="7717037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717040">}</span><br>
<span class="lineno"></span><span class="op" id="7717042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7717045">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7717118">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7717145">func</span>&nbsp;<span class="ident" id="7717150">checkNonLossyRoundtrip64</span><span class="op" id="7717174">(</span><span class="ident" id="7717175">t</span>&nbsp;<span class="op" id="7717177">*</span><span class="ident" id="7717178">testing</span><span class="op" id="7717185">.</span><span class="ident" id="7717186">T</span><span class="op" id="7717187">,</span>&nbsp;<span class="ident" id="7717189">f</span>&nbsp;<span class="builtintype" id="7717191">float64</span><span class="op" id="7717198">)</span>&nbsp;<span class="op" id="7717200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717203">if</span>&nbsp;<span class="op" id="7717206">!</span><span class="ident" id="7717207">isFinite</span><span class="op" id="7717215">(</span><span class="ident" id="7717216">f</span><span class="op" id="7717217">)</span>&nbsp;<span class="op" id="7717219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717223">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717234">r</span>&nbsp;<span class="op" id="7717236">:=</span>&nbsp;<span class="builtinfunc" id="7717239">new</span><span class="op" id="7717242">(</span><span class="ident" id="7717243">Rat</span><span class="op" id="7717246">)</span><span class="op" id="7717247">.</span><span class="ident" id="7717248">SetFloat64</span><span class="op" id="7717258">(</span><span class="ident" id="7717259">f</span><span class="op" id="7717260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717263">if</span>&nbsp;<span class="ident" id="7717266">r</span>&nbsp;<span class="op" id="7717268">==</span>&nbsp;<span class="builtintype" id="7717271">nil</span>&nbsp;<span class="op" id="7717275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717279">t</span><span class="op" id="7717280">.</span><span class="ident" id="7717281">Errorf</span><span class="op" id="7717287">(</span><span class="string" id="7717288">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7717320">,</span>&nbsp;<span class="ident" id="7717322">f</span><span class="op" id="7717323">,</span>&nbsp;<span class="ident" id="7717325">f</span><span class="op" id="7717326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717330">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717341">f2</span><span class="op" id="7717343">,</span>&nbsp;<span class="ident" id="7717345">exact</span>&nbsp;<span class="op" id="7717351">:=</span>&nbsp;<span class="ident" id="7717354">r</span><span class="op" id="7717355">.</span><span class="ident" id="7717356">Float64</span><span class="op" id="7717363">(</span><span class="op" id="7717364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717367">if</span>&nbsp;<span class="ident" id="7717370">f</span>&nbsp;<span class="op" id="7717372">!=</span>&nbsp;<span class="ident" id="7717375">f2</span>&nbsp;<span class="op" id="7717378">||</span>&nbsp;<span class="op" id="7717381">!</span><span class="ident" id="7717382">exact</span>&nbsp;<span class="op" id="7717388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717392">t</span><span class="op" id="7717393">.</span><span class="ident" id="7717394">Errorf</span><span class="op" id="7717400">(</span><span class="string" id="7717401">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7717475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717480">f</span><span class="op" id="7717481">,</span>&nbsp;<span class="ident" id="7717483">f2</span><span class="op" id="7717485">,</span>&nbsp;<span class="ident" id="7717487">f2</span><span class="op" id="7717489">,</span>&nbsp;<span class="ident" id="7717491">exact</span><span class="op" id="7717496">,</span>&nbsp;<span class="ident" id="7717498">f</span><span class="op" id="7717499">,</span>&nbsp;<span class="ident" id="7717501">f</span><span class="op" id="7717502">,</span>&nbsp;<span class="builtintype" id="7717504">true</span><span class="op" id="7717508">,</span>&nbsp;<span class="ident" id="7717510">f2</span><span class="op" id="7717512">-</span><span class="ident" id="7717513">f</span><span class="op" id="7717514">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7717517">}</span><br>
<span class="lineno"></span><span class="op" id="7717519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7717522">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7717580">func</span>&nbsp;<span class="ident" id="7717585">delta</span><span class="op" id="7717590">(</span><span class="ident" id="7717591">r</span>&nbsp;<span class="op" id="7717593">*</span><span class="ident" id="7717594">Rat</span><span class="op" id="7717597">,</span>&nbsp;<span class="ident" id="7717599">f</span>&nbsp;<span class="builtintype" id="7717601">float64</span><span class="op" id="7717608">)</span>&nbsp;<span class="op" id="7717610">*</span><span class="ident" id="7717611">Rat</span>&nbsp;<span class="op" id="7717615">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7717618">d</span>&nbsp;<span class="op" id="7717620">:=</span>&nbsp;<span class="builtinfunc" id="7717623">new</span><span class="op" id="7717626">(</span><span class="ident" id="7717627">Rat</span><span class="op" id="7717630">)</span><span class="op" id="7717631">.</span><span class="ident" id="7717632">Sub</span><span class="op" id="7717635">(</span><span class="ident" id="7717636">r</span><span class="op" id="7717637">,</span>&nbsp;<span class="builtinfunc" id="7717639">new</span><span class="op" id="7717642">(</span><span class="ident" id="7717643">Rat</span><span class="op" id="7717646">)</span><span class="op" id="7717647">.</span><span class="ident" id="7717648">SetFloat64</span><span class="op" id="7717658">(</span><span class="ident" id="7717659">f</span><span class="op" id="7717660">)</span><span class="op" id="7717661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717664">return</span>&nbsp;<span class="ident" id="7717671">d</span><span class="op" id="7717672">.</span><span class="ident" id="7717673">Abs</span><span class="op" id="7717676">(</span><span class="ident" id="7717677">d</span><span class="op" id="7717678">)</span><br>
<span class="lineno"></span><span class="op" id="7717680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7717683">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7717749">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7717772">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7717800">func</span>&nbsp;<span class="ident" id="7717805">checkIsBestApprox32</span><span class="op" id="7717824">(</span><span class="ident" id="7717825">t</span>&nbsp;<span class="op" id="7717827">*</span><span class="ident" id="7717828">testing</span><span class="op" id="7717835">.</span><span class="ident" id="7717836">T</span><span class="op" id="7717837">,</span>&nbsp;<span class="ident" id="7717839">f</span>&nbsp;<span class="builtintype" id="7717841">float32</span><span class="op" id="7717848">,</span>&nbsp;<span class="ident" id="7717850">r</span>&nbsp;<span class="op" id="7717852">*</span><span class="ident" id="7717853">Rat</span><span class="op" id="7717856">)</span>&nbsp;<span class="builtintype" id="7717858">bool</span>&nbsp;<span class="op" id="7717863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7717866">if</span>&nbsp;<span class="ident" id="7717869">math</span><span class="op" id="7717873">.</span><span class="ident" id="7717874">Abs</span><span class="op" id="7717877">(</span><span class="builtintype" id="7717878">float64</span><span class="op" id="7717885">(</span><span class="ident" id="7717886">f</span><span class="op" id="7717887">)</span><span class="op" id="7717888">)</span>&nbsp;<span class="op" id="7717890">&gt;=</span>&nbsp;<span class="ident" id="7717893">math</span><span class="op" id="7717897">.</span><span class="ident" id="7717898">MaxFloat32</span>&nbsp;<span class="op" id="7717909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7717913">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7717984">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718032">return</span>&nbsp;<span class="builtintype" id="7718039">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7718045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7718049">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718116">f0</span>&nbsp;<span class="op" id="7718119">:=</span>&nbsp;<span class="ident" id="7718122">math</span><span class="op" id="7718126">.</span><span class="ident" id="7718127">Nextafter32</span><span class="op" id="7718138">(</span><span class="ident" id="7718139">f</span><span class="op" id="7718140">,</span>&nbsp;<span class="builtintype" id="7718142">float32</span><span class="op" id="7718149">(</span><span class="ident" id="7718150">math</span><span class="op" id="7718154">.</span><span class="ident" id="7718155">Inf</span><span class="op" id="7718158">(</span><span class="op" id="7718159">-</span><span class="num" id="7718160">1</span><span class="op" id="7718161">)</span><span class="op" id="7718162">)</span><span class="op" id="7718163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718166">f1</span>&nbsp;<span class="op" id="7718169">:=</span>&nbsp;<span class="ident" id="7718172">math</span><span class="op" id="7718176">.</span><span class="ident" id="7718177">Nextafter32</span><span class="op" id="7718188">(</span><span class="ident" id="7718189">f</span><span class="op" id="7718190">,</span>&nbsp;<span class="builtintype" id="7718192">float32</span><span class="op" id="7718199">(</span><span class="ident" id="7718200">math</span><span class="op" id="7718204">.</span><span class="ident" id="7718205">Inf</span><span class="op" id="7718208">(</span><span class="op" id="7718209">+</span><span class="num" id="7718210">1</span><span class="op" id="7718211">)</span><span class="op" id="7718212">)</span><span class="op" id="7718213">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7718217">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718282">df</span>&nbsp;<span class="op" id="7718285">:=</span>&nbsp;<span class="ident" id="7718288">delta</span><span class="op" id="7718293">(</span><span class="ident" id="7718294">r</span><span class="op" id="7718295">,</span>&nbsp;<span class="builtintype" id="7718297">float64</span><span class="op" id="7718304">(</span><span class="ident" id="7718305">f</span><span class="op" id="7718306">)</span><span class="op" id="7718307">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718310">df0</span>&nbsp;<span class="op" id="7718314">:=</span>&nbsp;<span class="ident" id="7718317">delta</span><span class="op" id="7718322">(</span><span class="ident" id="7718323">r</span><span class="op" id="7718324">,</span>&nbsp;<span class="builtintype" id="7718326">float64</span><span class="op" id="7718333">(</span><span class="ident" id="7718334">f0</span><span class="op" id="7718336">)</span><span class="op" id="7718337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718340">df1</span>&nbsp;<span class="op" id="7718344">:=</span>&nbsp;<span class="ident" id="7718347">delta</span><span class="op" id="7718352">(</span><span class="ident" id="7718353">r</span><span class="op" id="7718354">,</span>&nbsp;<span class="builtintype" id="7718356">float64</span><span class="op" id="7718363">(</span><span class="ident" id="7718364">f1</span><span class="op" id="7718366">)</span><span class="op" id="7718367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718370">if</span>&nbsp;<span class="ident" id="7718373">df</span><span class="op" id="7718375">.</span><span class="ident" id="7718376">Cmp</span><span class="op" id="7718379">(</span><span class="ident" id="7718380">df0</span><span class="op" id="7718383">)</span>&nbsp;<span class="op" id="7718385">&gt;</span>&nbsp;<span class="num" id="7718387">0</span>&nbsp;<span class="op" id="7718389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718393">t</span><span class="op" id="7718394">.</span><span class="ident" id="7718395">Errorf</span><span class="op" id="7718401">(</span><span class="string" id="7718402">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7718471">,</span>&nbsp;<span class="ident" id="7718473">r</span><span class="op" id="7718474">,</span>&nbsp;<span class="ident" id="7718476">f</span><span class="op" id="7718477">,</span>&nbsp;<span class="ident" id="7718479">f</span><span class="op" id="7718480">,</span>&nbsp;<span class="ident" id="7718482">f0</span><span class="op" id="7718484">,</span>&nbsp;<span class="ident" id="7718486">f0</span><span class="op" id="7718488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718492">return</span>&nbsp;<span class="builtintype" id="7718499">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7718506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718509">if</span>&nbsp;<span class="ident" id="7718512">df</span><span class="op" id="7718514">.</span><span class="ident" id="7718515">Cmp</span><span class="op" id="7718518">(</span><span class="ident" id="7718519">df1</span><span class="op" id="7718522">)</span>&nbsp;<span class="op" id="7718524">&gt;</span>&nbsp;<span class="num" id="7718526">0</span>&nbsp;<span class="op" id="7718528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718532">t</span><span class="op" id="7718533">.</span><span class="ident" id="7718534">Errorf</span><span class="op" id="7718540">(</span><span class="string" id="7718541">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7718606">,</span>&nbsp;<span class="ident" id="7718608">r</span><span class="op" id="7718609">,</span>&nbsp;<span class="ident" id="7718611">f</span><span class="op" id="7718612">,</span>&nbsp;<span class="ident" id="7718614">f</span><span class="op" id="7718615">,</span>&nbsp;<span class="ident" id="7718617">f1</span><span class="op" id="7718619">,</span>&nbsp;<span class="ident" id="7718621">f1</span><span class="op" id="7718623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718627">return</span>&nbsp;<span class="builtintype" id="7718634">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7718641">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718644">if</span>&nbsp;<span class="ident" id="7718647">df</span><span class="op" id="7718649">.</span><span class="ident" id="7718650">Cmp</span><span class="op" id="7718653">(</span><span class="ident" id="7718654">df0</span><span class="op" id="7718657">)</span>&nbsp;<span class="op" id="7718659">==</span>&nbsp;<span class="num" id="7718662">0</span>&nbsp;<span class="op" id="7718664">&amp;&amp;</span>&nbsp;<span class="op" id="7718667">!</span><span class="ident" id="7718668">isEven32</span><span class="op" id="7718676">(</span><span class="ident" id="7718677">f</span><span class="op" id="7718678">)</span>&nbsp;<span class="op" id="7718680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718684">t</span><span class="op" id="7718685">.</span><span class="ident" id="7718686">Errorf</span><span class="op" id="7718692">(</span><span class="string" id="7718693">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7718770">,</span>&nbsp;<span class="ident" id="7718772">r</span><span class="op" id="7718773">,</span>&nbsp;<span class="ident" id="7718775">f</span><span class="op" id="7718776">,</span>&nbsp;<span class="ident" id="7718778">f</span><span class="op" id="7718779">,</span>&nbsp;<span class="ident" id="7718781">f0</span><span class="op" id="7718783">,</span>&nbsp;<span class="ident" id="7718785">f0</span><span class="op" id="7718787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718791">return</span>&nbsp;<span class="builtintype" id="7718798">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7718805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718808">if</span>&nbsp;<span class="ident" id="7718811">df</span><span class="op" id="7718813">.</span><span class="ident" id="7718814">Cmp</span><span class="op" id="7718817">(</span><span class="ident" id="7718818">df1</span><span class="op" id="7718821">)</span>&nbsp;<span class="op" id="7718823">==</span>&nbsp;<span class="num" id="7718826">0</span>&nbsp;<span class="op" id="7718828">&amp;&amp;</span>&nbsp;<span class="op" id="7718831">!</span><span class="ident" id="7718832">isEven32</span><span class="op" id="7718840">(</span><span class="ident" id="7718841">f</span><span class="op" id="7718842">)</span>&nbsp;<span class="op" id="7718844">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7718848">t</span><span class="op" id="7718849">.</span><span class="ident" id="7718850">Errorf</span><span class="op" id="7718856">(</span><span class="string" id="7718857">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7718934">,</span>&nbsp;<span class="ident" id="7718936">r</span><span class="op" id="7718937">,</span>&nbsp;<span class="ident" id="7718939">f</span><span class="op" id="7718940">,</span>&nbsp;<span class="ident" id="7718942">f</span><span class="op" id="7718943">,</span>&nbsp;<span class="ident" id="7718945">f1</span><span class="op" id="7718947">,</span>&nbsp;<span class="ident" id="7718949">f1</span><span class="op" id="7718951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718955">return</span>&nbsp;<span class="builtintype" id="7718962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7718969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7718972">return</span>&nbsp;<span class="builtintype" id="7718979">true</span><br>
<span class="lineno"></span><span class="op" id="7718984">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7718987">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7719053">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7719076">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7719104">func</span>&nbsp;<span class="ident" id="7719109">checkIsBestApprox64</span><span class="op" id="7719128">(</span><span class="ident" id="7719129">t</span>&nbsp;<span class="op" id="7719131">*</span><span class="ident" id="7719132">testing</span><span class="op" id="7719139">.</span><span class="ident" id="7719140">T</span><span class="op" id="7719141">,</span>&nbsp;<span class="ident" id="7719143">f</span>&nbsp;<span class="builtintype" id="7719145">float64</span><span class="op" id="7719152">,</span>&nbsp;<span class="ident" id="7719154">r</span>&nbsp;<span class="op" id="7719156">*</span><span class="ident" id="7719157">Rat</span><span class="op" id="7719160">)</span>&nbsp;<span class="builtintype" id="7719162">bool</span>&nbsp;<span class="op" id="7719167">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719170">if</span>&nbsp;<span class="ident" id="7719173">math</span><span class="op" id="7719177">.</span><span class="ident" id="7719178">Abs</span><span class="op" id="7719181">(</span><span class="ident" id="7719182">f</span><span class="op" id="7719183">)</span>&nbsp;<span class="op" id="7719185">&gt;=</span>&nbsp;<span class="ident" id="7719188">math</span><span class="op" id="7719192">.</span><span class="ident" id="7719193">MaxFloat64</span>&nbsp;<span class="op" id="7719204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7719208">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7719279">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719327">return</span>&nbsp;<span class="builtintype" id="7719334">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719340">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7719344">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719411">f0</span>&nbsp;<span class="op" id="7719414">:=</span>&nbsp;<span class="ident" id="7719417">math</span><span class="op" id="7719421">.</span><span class="ident" id="7719422">Nextafter</span><span class="op" id="7719431">(</span><span class="ident" id="7719432">f</span><span class="op" id="7719433">,</span>&nbsp;<span class="ident" id="7719435">math</span><span class="op" id="7719439">.</span><span class="ident" id="7719440">Inf</span><span class="op" id="7719443">(</span><span class="op" id="7719444">-</span><span class="num" id="7719445">1</span><span class="op" id="7719446">)</span><span class="op" id="7719447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719450">f1</span>&nbsp;<span class="op" id="7719453">:=</span>&nbsp;<span class="ident" id="7719456">math</span><span class="op" id="7719460">.</span><span class="ident" id="7719461">Nextafter</span><span class="op" id="7719470">(</span><span class="ident" id="7719471">f</span><span class="op" id="7719472">,</span>&nbsp;<span class="ident" id="7719474">math</span><span class="op" id="7719478">.</span><span class="ident" id="7719479">Inf</span><span class="op" id="7719482">(</span><span class="op" id="7719483">+</span><span class="num" id="7719484">1</span><span class="op" id="7719485">)</span><span class="op" id="7719486">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7719490">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719555">df</span>&nbsp;<span class="op" id="7719558">:=</span>&nbsp;<span class="ident" id="7719561">delta</span><span class="op" id="7719566">(</span><span class="ident" id="7719567">r</span><span class="op" id="7719568">,</span>&nbsp;<span class="ident" id="7719570">f</span><span class="op" id="7719571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719574">df0</span>&nbsp;<span class="op" id="7719578">:=</span>&nbsp;<span class="ident" id="7719581">delta</span><span class="op" id="7719586">(</span><span class="ident" id="7719587">r</span><span class="op" id="7719588">,</span>&nbsp;<span class="ident" id="7719590">f0</span><span class="op" id="7719592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719595">df1</span>&nbsp;<span class="op" id="7719599">:=</span>&nbsp;<span class="ident" id="7719602">delta</span><span class="op" id="7719607">(</span><span class="ident" id="7719608">r</span><span class="op" id="7719609">,</span>&nbsp;<span class="ident" id="7719611">f1</span><span class="op" id="7719613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719616">if</span>&nbsp;<span class="ident" id="7719619">df</span><span class="op" id="7719621">.</span><span class="ident" id="7719622">Cmp</span><span class="op" id="7719625">(</span><span class="ident" id="7719626">df0</span><span class="op" id="7719629">)</span>&nbsp;<span class="op" id="7719631">&gt;</span>&nbsp;<span class="num" id="7719633">0</span>&nbsp;<span class="op" id="7719635">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719639">t</span><span class="op" id="7719640">.</span><span class="ident" id="7719641">Errorf</span><span class="op" id="7719647">(</span><span class="string" id="7719648">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7719717">,</span>&nbsp;<span class="ident" id="7719719">r</span><span class="op" id="7719720">,</span>&nbsp;<span class="ident" id="7719722">f</span><span class="op" id="7719723">,</span>&nbsp;<span class="ident" id="7719725">f</span><span class="op" id="7719726">,</span>&nbsp;<span class="ident" id="7719728">f0</span><span class="op" id="7719730">,</span>&nbsp;<span class="ident" id="7719732">f0</span><span class="op" id="7719734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719738">return</span>&nbsp;<span class="builtintype" id="7719745">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719755">if</span>&nbsp;<span class="ident" id="7719758">df</span><span class="op" id="7719760">.</span><span class="ident" id="7719761">Cmp</span><span class="op" id="7719764">(</span><span class="ident" id="7719765">df1</span><span class="op" id="7719768">)</span>&nbsp;<span class="op" id="7719770">&gt;</span>&nbsp;<span class="num" id="7719772">0</span>&nbsp;<span class="op" id="7719774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719778">t</span><span class="op" id="7719779">.</span><span class="ident" id="7719780">Errorf</span><span class="op" id="7719786">(</span><span class="string" id="7719787">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7719852">,</span>&nbsp;<span class="ident" id="7719854">r</span><span class="op" id="7719855">,</span>&nbsp;<span class="ident" id="7719857">f</span><span class="op" id="7719858">,</span>&nbsp;<span class="ident" id="7719860">f</span><span class="op" id="7719861">,</span>&nbsp;<span class="ident" id="7719863">f1</span><span class="op" id="7719865">,</span>&nbsp;<span class="ident" id="7719867">f1</span><span class="op" id="7719869">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719873">return</span>&nbsp;<span class="builtintype" id="7719880">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7719887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7719890">if</span>&nbsp;<span class="ident" id="7719893">df</span><span class="op" id="7719895">.</span><span class="ident" id="7719896">Cmp</span><span class="op" id="7719899">(</span><span class="ident" id="7719900">df0</span><span class="op" id="7719903">)</span>&nbsp;<span class="op" id="7719905">==</span>&nbsp;<span class="num" id="7719908">0</span>&nbsp;<span class="op" id="7719910">&amp;&amp;</span>&nbsp;<span class="op" id="7719913">!</span><span class="ident" id="7719914">isEven64</span><span class="op" id="7719922">(</span><span class="ident" id="7719923">f</span><span class="op" id="7719924">)</span>&nbsp;<span class="op" id="7719926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7719930">t</span><span class="op" id="7719931">.</span><span class="ident" id="7719932">Errorf</span><span class="op" id="7719938">(</span><span class="string" id="7719939">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7720016">,</span>&nbsp;<span class="ident" id="7720018">r</span><span class="op" id="7720019">,</span>&nbsp;<span class="ident" id="7720021">f</span><span class="op" id="7720022">,</span>&nbsp;<span class="ident" id="7720024">f</span><span class="op" id="7720025">,</span>&nbsp;<span class="ident" id="7720027">f0</span><span class="op" id="7720029">,</span>&nbsp;<span class="ident" id="7720031">f0</span><span class="op" id="7720033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720037">return</span>&nbsp;<span class="builtintype" id="7720044">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720054">if</span>&nbsp;<span class="ident" id="7720057">df</span><span class="op" id="7720059">.</span><span class="ident" id="7720060">Cmp</span><span class="op" id="7720063">(</span><span class="ident" id="7720064">df1</span><span class="op" id="7720067">)</span>&nbsp;<span class="op" id="7720069">==</span>&nbsp;<span class="num" id="7720072">0</span>&nbsp;<span class="op" id="7720074">&amp;&amp;</span>&nbsp;<span class="op" id="7720077">!</span><span class="ident" id="7720078">isEven64</span><span class="op" id="7720086">(</span><span class="ident" id="7720087">f</span><span class="op" id="7720088">)</span>&nbsp;<span class="op" id="7720090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720094">t</span><span class="op" id="7720095">.</span><span class="ident" id="7720096">Errorf</span><span class="op" id="7720102">(</span><span class="string" id="7720103">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7720180">,</span>&nbsp;<span class="ident" id="7720182">r</span><span class="op" id="7720183">,</span>&nbsp;<span class="ident" id="7720185">f</span><span class="op" id="7720186">,</span>&nbsp;<span class="ident" id="7720188">f</span><span class="op" id="7720189">,</span>&nbsp;<span class="ident" id="7720191">f1</span><span class="op" id="7720193">,</span>&nbsp;<span class="ident" id="7720195">f1</span><span class="op" id="7720197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720201">return</span>&nbsp;<span class="builtintype" id="7720208">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720215">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720218">return</span>&nbsp;<span class="builtintype" id="7720225">true</span><br>
<span class="lineno"></span><span class="op" id="7720230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720233">func</span>&nbsp;<span class="ident" id="7720238">isEven32</span><span class="op" id="7720246">(</span><span class="ident" id="7720247">f</span>&nbsp;<span class="builtintype" id="7720249">float32</span><span class="op" id="7720256">)</span>&nbsp;<span class="builtintype" id="7720258">bool</span>&nbsp;<span class="op" id="7720263">{</span>&nbsp;<span class="keyword" id="7720265">return</span>&nbsp;<span class="ident" id="7720272">math</span><span class="op" id="7720276">.</span><span class="ident" id="7720277">Float32bits</span><span class="op" id="7720288">(</span><span class="ident" id="7720289">f</span><span class="op" id="7720290">)</span><span class="op" id="7720291">&amp;</span><span class="num" id="7720292">1</span>&nbsp;<span class="op" id="7720294">==</span>&nbsp;<span class="num" id="7720297">0</span>&nbsp;<span class="op" id="7720299">}</span><br>
<span class="lineno"></span><span class="keyword" id="7720301">func</span>&nbsp;<span class="ident" id="7720306">isEven64</span><span class="op" id="7720314">(</span><span class="ident" id="7720315">f</span>&nbsp;<span class="builtintype" id="7720317">float64</span><span class="op" id="7720324">)</span>&nbsp;<span class="builtintype" id="7720326">bool</span>&nbsp;<span class="op" id="7720331">{</span>&nbsp;<span class="keyword" id="7720333">return</span>&nbsp;<span class="ident" id="7720340">math</span><span class="op" id="7720344">.</span><span class="ident" id="7720345">Float64bits</span><span class="op" id="7720356">(</span><span class="ident" id="7720357">f</span><span class="op" id="7720358">)</span><span class="op" id="7720359">&amp;</span><span class="num" id="7720360">1</span>&nbsp;<span class="op" id="7720362">==</span>&nbsp;<span class="num" id="7720365">0</span>&nbsp;<span class="op" id="7720367">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7720370">func</span>&nbsp;<span class="ident" id="7720375">TestIsFinite</span><span class="op" id="7720387">(</span><span class="ident" id="7720388">t</span>&nbsp;<span class="op" id="7720390">*</span><span class="ident" id="7720391">testing</span><span class="op" id="7720398">.</span><span class="ident" id="7720399">T</span><span class="op" id="7720400">)</span>&nbsp;<span class="op" id="7720402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720405">finites</span>&nbsp;<span class="op" id="7720413">:=</span>&nbsp;<span class="op" id="7720416">[</span><span class="op" id="7720417">]</span><span class="builtintype" id="7720418">float64</span><span class="op" id="7720425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720429">1.0</span>&nbsp;<span class="op" id="7720433">/</span>&nbsp;<span class="num" id="7720435">3</span><span class="op" id="7720436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7720440">4891559871276714924261e+222</span><span class="op" id="7720467">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720471">math</span><span class="op" id="7720475">.</span><span class="ident" id="7720476">MaxFloat64</span><span class="op" id="7720486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720490">math</span><span class="op" id="7720494">.</span><span class="ident" id="7720495">SmallestNonzeroFloat64</span><span class="op" id="7720517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720521">-</span><span class="ident" id="7720522">math</span><span class="op" id="7720526">.</span><span class="ident" id="7720527">MaxFloat64</span><span class="op" id="7720537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720541">-</span><span class="ident" id="7720542">math</span><span class="op" id="7720546">.</span><span class="ident" id="7720547">SmallestNonzeroFloat64</span><span class="op" id="7720569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720572">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720575">for</span>&nbsp;<span class="ident" id="7720579">_</span><span class="op" id="7720580">,</span>&nbsp;<span class="ident" id="7720582">f</span>&nbsp;<span class="op" id="7720584">:=</span>&nbsp;<span class="keyword" id="7720587">range</span>&nbsp;<span class="ident" id="7720593">finites</span>&nbsp;<span class="op" id="7720601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720605">if</span>&nbsp;<span class="op" id="7720608">!</span><span class="ident" id="7720609">isFinite</span><span class="op" id="7720617">(</span><span class="ident" id="7720618">f</span><span class="op" id="7720619">)</span>&nbsp;<span class="op" id="7720621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720626">t</span><span class="op" id="7720627">.</span><span class="ident" id="7720628">Errorf</span><span class="op" id="7720634">(</span><span class="string" id="7720635">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7720655">,</span>&nbsp;<span class="ident" id="7720657">f</span><span class="op" id="7720658">,</span>&nbsp;<span class="ident" id="7720660">f</span><span class="op" id="7720661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720668">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720671">nonfinites</span>&nbsp;<span class="op" id="7720682">:=</span>&nbsp;<span class="op" id="7720685">[</span><span class="op" id="7720686">]</span><span class="builtintype" id="7720687">float64</span><span class="op" id="7720694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720698">math</span><span class="op" id="7720702">.</span><span class="ident" id="7720703">NaN</span><span class="op" id="7720706">(</span><span class="op" id="7720707">)</span><span class="op" id="7720708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720712">math</span><span class="op" id="7720716">.</span><span class="ident" id="7720717">Inf</span><span class="op" id="7720720">(</span><span class="op" id="7720721">-</span><span class="num" id="7720722">1</span><span class="op" id="7720723">)</span><span class="op" id="7720724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720728">math</span><span class="op" id="7720732">.</span><span class="ident" id="7720733">Inf</span><span class="op" id="7720736">(</span><span class="op" id="7720737">+</span><span class="num" id="7720738">1</span><span class="op" id="7720739">)</span><span class="op" id="7720740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720743">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720746">for</span>&nbsp;<span class="ident" id="7720750">_</span><span class="op" id="7720751">,</span>&nbsp;<span class="ident" id="7720753">f</span>&nbsp;<span class="op" id="7720755">:=</span>&nbsp;<span class="keyword" id="7720758">range</span>&nbsp;<span class="ident" id="7720764">nonfinites</span>&nbsp;<span class="op" id="7720775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7720779">if</span>&nbsp;<span class="ident" id="7720782">isFinite</span><span class="op" id="7720790">(</span><span class="ident" id="7720791">f</span><span class="op" id="7720792">)</span>&nbsp;<span class="op" id="7720794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7720799">t</span><span class="op" id="7720800">.</span><span class="ident" id="7720801">Errorf</span><span class="op" id="7720807">(</span><span class="string" id="7720808">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7720828">,</span>&nbsp;<span class="ident" id="7720830">f</span><span class="op" id="7720831">,</span>&nbsp;<span class="ident" id="7720833">f</span><span class="op" id="7720834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7720841">}</span><br>
<span class="lineno">1160</span><span class="op" id="7720843">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
