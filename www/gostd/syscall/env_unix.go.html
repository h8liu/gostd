<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>syscall</h2>
<ul>
<li><a href="/gostd/syscall/creds_test.go.html">creds_test.go</a></li>
<li><a href="/gostd/syscall/env_unix.go.html" class="current">env_unix.go</a></li>
<li><a href="/gostd/syscall/exec_linux.go.html">exec_linux.go</a></li>
<li><a href="/gostd/syscall/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/syscall/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/syscall/flock.go.html">flock.go</a></li>
<li><a href="/gostd/syscall/lsf_linux.go.html">lsf_linux.go</a></li>
<li><a href="/gostd/syscall/mmap_unix_test.go.html">mmap_unix_test.go</a></li>
<li><a href="/gostd/syscall/netlink_linux.go.html">netlink_linux.go</a></li>
<li><a href="/gostd/syscall/race0.go.html">race0.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_linux.go.html">sockcmsg_linux.go</a></li>
<li><a href="/gostd/syscall/sockcmsg_unix.go.html">sockcmsg_unix.go</a></li>
<li><a href="/gostd/syscall/str.go.html">str.go</a></li>
<li><a href="/gostd/syscall/syscall.go.html">syscall.go</a></li>
<li><a href="/gostd/syscall/syscall_linux.go.html">syscall_linux.go</a></li>
<li><a href="/gostd/syscall/syscall_linux_amd64.go.html">syscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/syscall_test.go.html">syscall_test.go</a></li>
<li><a href="/gostd/syscall/syscall_unix.go.html">syscall_unix.go</a></li>
<li><a href="/gostd/syscall/syscall_unix_test.go.html">syscall_unix_test.go</a></li>
<li><a href="/gostd/syscall/zerrors_linux_amd64.go.html">zerrors_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsyscall_linux_amd64.go.html">zsyscall_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/zsysnum_linux_amd64.go.html">zsysnum_linux_amd64.go</a></li>
<li><a href="/gostd/syscall/ztypes_linux_amd64.go.html">ztypes_linux_amd64.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2476751">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2476807">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2476861">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2476912">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2476982">//&nbsp;Unix&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2477014">package</span>&nbsp;<span class="ident" id="2477022">syscall</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="2477031">import</span>&nbsp;<span class="string" id="2477038">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2477046">var</span>&nbsp;<span class="op" id="2477050">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477053">//&nbsp;envOnce&nbsp;guards&nbsp;initialization&nbsp;by&nbsp;copyenv,&nbsp;which&nbsp;populates&nbsp;env.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477120">envOnce</span>&nbsp;<span class="ident" id="2477128"><a href="/gostd/syscall/env_unix.go.html#2477038">sync</a></span><span class="op" id="2477132">.</span><span class="ident" id="2477133"><a href="/gostd/sync/once.go.html#1446221">Once</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477140">//&nbsp;envLock&nbsp;guards&nbsp;env&nbsp;and&nbsp;envs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477173">envLock</span>&nbsp;<span class="ident" id="2477181"><a href="/gostd/syscall/env_unix.go.html#2477038">sync</a></span><span class="op" id="2477185">.</span><span class="ident" id="2477186"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477196">//&nbsp;env&nbsp;maps&nbsp;from&nbsp;an&nbsp;environment&nbsp;variable&nbsp;to&nbsp;its&nbsp;first&nbsp;occurrence&nbsp;in&nbsp;envs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477271">env</span>&nbsp;<span class="keyword" id="2477275">map</span><span class="op" id="2477278">[</span><span class="builtintype" id="2477279">string</span><span class="op" id="2477285">]</span><span class="builtintype" id="2477286">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477292">//&nbsp;envs&nbsp;is&nbsp;provided&nbsp;by&nbsp;the&nbsp;runtime.&nbsp;elements&nbsp;are&nbsp;expected&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477354">//&nbsp;be&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.&nbsp;An&nbsp;empty&nbsp;string&nbsp;means&nbsp;deleted</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477416">//&nbsp;(or&nbsp;a&nbsp;duplicate&nbsp;to&nbsp;be&nbsp;ignored).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477452">envs</span>&nbsp;<span class="op" id="2477457">[</span><span class="op" id="2477458">]</span><span class="builtintype" id="2477459">string</span>&nbsp;<span class="op" id="2477466">=</span>&nbsp;<span class="ident" id="2477468"><a href="/gostd/syscall/env_unix.go.html#2477491">runtime_envs</a></span><span class="op" id="2477480">(</span><span class="op" id="2477481">)</span><br>
<span class="lineno"></span><span class="op" id="2477483">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2477486">func</span>&nbsp;<span class="ident" id="2477491">runtime_envs</span><span class="op" id="2477503">(</span><span class="op" id="2477504">)</span>&nbsp;<span class="op" id="2477506">[</span><span class="op" id="2477507">]</span><span class="builtintype" id="2477508">string</span>&nbsp;<span class="comment" id="2477515">//&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="2477538">//&nbsp;setenv_c&nbsp;and&nbsp;unsetenv_c&nbsp;are&nbsp;provided&nbsp;by&nbsp;the&nbsp;runtime&nbsp;but&nbsp;are&nbsp;no-ops</span><br>
<span class="lineno"></span><span class="comment" id="2477608">//&nbsp;if&nbsp;cgo&nbsp;isn&#39;t&nbsp;loaded.</span><br>
<span class="lineno"></span><span class="keyword" id="2477632">func</span>&nbsp;<span class="ident" id="2477637">setenv_c</span><span class="op" id="2477645">(</span><span class="ident" id="2477646">k</span><span class="op" id="2477647">,</span>&nbsp;<span class="ident" id="2477649">v</span>&nbsp;<span class="builtintype" id="2477651">string</span><span class="op" id="2477657">)</span><br>
<span class="lineno"></span><span class="keyword" id="2477659">func</span>&nbsp;<span class="ident" id="2477664">unsetenv_c</span><span class="op" id="2477674">(</span><span class="ident" id="2477675">k</span>&nbsp;<span class="builtintype" id="2477677">string</span><span class="op" id="2477683">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="2477686">func</span>&nbsp;<span class="ident" id="2477691">copyenv</span><span class="op" id="2477698">(</span><span class="op" id="2477699">)</span>&nbsp;<span class="op" id="2477701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477704"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span>&nbsp;<span class="op" id="2477708">=</span>&nbsp;<span class="builtinfunc" id="2477710">make</span><span class="op" id="2477714">(</span><span class="keyword" id="2477715">map</span><span class="op" id="2477718">[</span><span class="builtintype" id="2477719">string</span><span class="op" id="2477725">]</span><span class="builtintype" id="2477726">int</span><span class="op" id="2477729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2477732">for</span>&nbsp;<span class="ident" id="2477736">i</span><span class="op" id="2477737">,</span>&nbsp;<span class="ident" id="2477739">s</span>&nbsp;<span class="op" id="2477741">:=</span>&nbsp;<span class="keyword" id="2477744">range</span>&nbsp;<span class="ident" id="2477750"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span>&nbsp;<span class="op" id="2477755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2477759">for</span>&nbsp;<span class="ident" id="2477763">j</span>&nbsp;<span class="op" id="2477765">:=</span>&nbsp;<span class="num" id="2477768">0</span><span class="op" id="2477769">;</span>&nbsp;<span class="ident" id="2477771"><a href="/gostd/syscall/env_unix.go.html#2477763">j</a></span>&nbsp;<span class="op" id="2477773">&lt;</span>&nbsp;<span class="builtinfunc" id="2477775">len</span><span class="op" id="2477778">(</span><span class="ident" id="2477779"><a href="/gostd/syscall/env_unix.go.html#2477739">s</a></span><span class="op" id="2477780">)</span><span class="op" id="2477781">;</span>&nbsp;<span class="ident" id="2477783"><a href="/gostd/syscall/env_unix.go.html#2477763">j</a></span><span class="op" id="2477784">++</span>&nbsp;<span class="op" id="2477787">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2477792">if</span>&nbsp;<span class="ident" id="2477795"><a href="/gostd/syscall/env_unix.go.html#2477739">s</a></span><span class="op" id="2477796">[</span><span class="ident" id="2477797"><a href="/gostd/syscall/env_unix.go.html#2477763">j</a></span><span class="op" id="2477798">]</span>&nbsp;<span class="op" id="2477800">==</span>&nbsp;<span class="string" id="2477803">&#39;=&#39;</span>&nbsp;<span class="op" id="2477807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477813">key</span>&nbsp;<span class="op" id="2477817">:=</span>&nbsp;<span class="ident" id="2477820"><a href="/gostd/syscall/env_unix.go.html#2477739">s</a></span><span class="op" id="2477821">[</span><span class="op" id="2477822">:</span><span class="ident" id="2477823"><a href="/gostd/syscall/env_unix.go.html#2477763">j</a></span><span class="op" id="2477824">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2477830">if</span>&nbsp;<span class="ident" id="2477833">_</span><span class="op" id="2477834">,</span>&nbsp;<span class="ident" id="2477836">ok</span>&nbsp;<span class="op" id="2477839">:=</span>&nbsp;<span class="ident" id="2477842"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2477845">[</span><span class="ident" id="2477846"><a href="/gostd/syscall/env_unix.go.html#2477813">key</a></span><span class="op" id="2477849">]</span><span class="op" id="2477850">;</span>&nbsp;<span class="op" id="2477852">!</span><span class="ident" id="2477853"><a href="/gostd/syscall/env_unix.go.html#2477836">ok</a></span>&nbsp;<span class="op" id="2477856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2477863"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2477866">[</span><span class="ident" id="2477867"><a href="/gostd/syscall/env_unix.go.html#2477813">key</a></span><span class="op" id="2477870">]</span>&nbsp;<span class="op" id="2477872">=</span>&nbsp;<span class="ident" id="2477874"><a href="/gostd/syscall/env_unix.go.html#2477736">i</a></span>&nbsp;<span class="comment" id="2477876">//&nbsp;first&nbsp;mention&nbsp;of&nbsp;key</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2477904">}</span>&nbsp;<span class="keyword" id="2477906">else</span>&nbsp;<span class="op" id="2477911">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477918">//&nbsp;Clear&nbsp;duplicate&nbsp;keys.&nbsp;This&nbsp;permits&nbsp;Unsetenv&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2477973">//&nbsp;safely&nbsp;delete&nbsp;only&nbsp;the&nbsp;first&nbsp;item&nbsp;without</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2478023">//&nbsp;worrying&nbsp;about&nbsp;unshadowing&nbsp;a&nbsp;later&nbsp;one,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2478071">//&nbsp;which&nbsp;might&nbsp;be&nbsp;a&nbsp;security&nbsp;problem.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478114"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2478118">[</span><span class="ident" id="2478119"><a href="/gostd/syscall/env_unix.go.html#2477736">i</a></span><span class="op" id="2478120">]</span>&nbsp;<span class="op" id="2478122">=</span>&nbsp;<span class="string" id="2478124">&#34;&#34;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478137">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478153">}</span><br>
<span class="lineno">55</span><span class="op" id="2478155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2478158">func</span>&nbsp;<span class="ident" id="2478163">Unsetenv</span><span class="op" id="2478171">(</span><span class="ident" id="2478172">key</span>&nbsp;<span class="builtintype" id="2478176">string</span><span class="op" id="2478182">)</span>&nbsp;<span class="builtintype" id="2478184">error</span>&nbsp;<span class="op" id="2478190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478193"><a href="/gostd/syscall/env_unix.go.html#2477120">envOnce</a></span><span class="op" id="2478200">.</span><span class="ident" id="2478201"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="2478203">(</span><span class="ident" id="2478204"><a href="/gostd/syscall/env_unix.go.html#2477691">copyenv</a></span><span class="op" id="2478211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478215"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478222">.</span><span class="ident" id="2478223"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="2478227">(</span><span class="op" id="2478228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478231">defer</span>&nbsp;<span class="ident" id="2478237"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478244">.</span><span class="ident" id="2478245"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="2478251">(</span><span class="op" id="2478252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478256">if</span>&nbsp;<span class="ident" id="2478259">i</span><span class="op" id="2478260">,</span>&nbsp;<span class="ident" id="2478262">ok</span>&nbsp;<span class="op" id="2478265">:=</span>&nbsp;<span class="ident" id="2478268"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2478271">[</span><span class="ident" id="2478272"><a href="/gostd/syscall/env_unix.go.html#2478172">key</a></span><span class="op" id="2478275">]</span><span class="op" id="2478276">;</span>&nbsp;<span class="ident" id="2478278"><a href="/gostd/syscall/env_unix.go.html#2478262">ok</a></span>&nbsp;<span class="op" id="2478281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478285"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2478289">[</span><span class="ident" id="2478290"><a href="/gostd/syscall/env_unix.go.html#2478259">i</a></span><span class="op" id="2478291">]</span>&nbsp;<span class="op" id="2478293">=</span>&nbsp;<span class="string" id="2478295">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2478300">delete</span><span class="op" id="2478306">(</span><span class="ident" id="2478307"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2478310">,</span>&nbsp;<span class="ident" id="2478312"><a href="/gostd/syscall/env_unix.go.html#2478172">key</a></span><span class="op" id="2478315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478321"><a href="/gostd/syscall/env_unix.go.html#2477664">unsetenv_c</a></span><span class="op" id="2478331">(</span><span class="ident" id="2478332"><a href="/gostd/syscall/env_unix.go.html#2478172">key</a></span><span class="op" id="2478335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478338">return</span>&nbsp;<span class="builtintype" id="2478345">nil</span><br>
<span class="lineno"></span><span class="op" id="2478349">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="2478352">func</span>&nbsp;<span class="ident" id="2478357">Getenv</span><span class="op" id="2478363">(</span><span class="ident" id="2478364">key</span>&nbsp;<span class="builtintype" id="2478368">string</span><span class="op" id="2478374">)</span>&nbsp;<span class="op" id="2478376">(</span><span class="ident" id="2478377">value</span>&nbsp;<span class="builtintype" id="2478383">string</span><span class="op" id="2478389">,</span>&nbsp;<span class="ident" id="2478391">found</span>&nbsp;<span class="builtintype" id="2478397">bool</span><span class="op" id="2478401">)</span>&nbsp;<span class="op" id="2478403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478406"><a href="/gostd/syscall/env_unix.go.html#2477120">envOnce</a></span><span class="op" id="2478413">.</span><span class="ident" id="2478414"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="2478416">(</span><span class="ident" id="2478417"><a href="/gostd/syscall/env_unix.go.html#2477691">copyenv</a></span><span class="op" id="2478424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478427">if</span>&nbsp;<span class="builtinfunc" id="2478430">len</span><span class="op" id="2478433">(</span><span class="ident" id="2478434"><a href="/gostd/syscall/env_unix.go.html#2478364">key</a></span><span class="op" id="2478437">)</span>&nbsp;<span class="op" id="2478439">==</span>&nbsp;<span class="num" id="2478442">0</span>&nbsp;<span class="op" id="2478444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478448">return</span>&nbsp;<span class="string" id="2478455">&#34;&#34;</span><span class="op" id="2478457">,</span>&nbsp;<span class="builtintype" id="2478459">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478470"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478477">.</span><span class="ident" id="2478478"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="2478483">(</span><span class="op" id="2478484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478487">defer</span>&nbsp;<span class="ident" id="2478493"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478500">.</span><span class="ident" id="2478501"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="2478508">(</span><span class="op" id="2478509">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478513">i</span><span class="op" id="2478514">,</span>&nbsp;<span class="ident" id="2478516">ok</span>&nbsp;<span class="op" id="2478519">:=</span>&nbsp;<span class="ident" id="2478522"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2478525">[</span><span class="ident" id="2478526"><a href="/gostd/syscall/env_unix.go.html#2478364">key</a></span><span class="op" id="2478529">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478532">if</span>&nbsp;<span class="op" id="2478535">!</span><span class="ident" id="2478536"><a href="/gostd/syscall/env_unix.go.html#2478516">ok</a></span>&nbsp;<span class="op" id="2478539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478543">return</span>&nbsp;<span class="string" id="2478550">&#34;&#34;</span><span class="op" id="2478552">,</span>&nbsp;<span class="builtintype" id="2478554">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478564">s</span>&nbsp;<span class="op" id="2478566">:=</span>&nbsp;<span class="ident" id="2478569"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2478573">[</span><span class="ident" id="2478574"><a href="/gostd/syscall/env_unix.go.html#2478513">i</a></span><span class="op" id="2478575">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478578">for</span>&nbsp;<span class="ident" id="2478582">i</span>&nbsp;<span class="op" id="2478584">:=</span>&nbsp;<span class="num" id="2478587">0</span><span class="op" id="2478588">;</span>&nbsp;<span class="ident" id="2478590"><a href="/gostd/syscall/env_unix.go.html#2478582">i</a></span>&nbsp;<span class="op" id="2478592">&lt;</span>&nbsp;<span class="builtinfunc" id="2478594">len</span><span class="op" id="2478597">(</span><span class="ident" id="2478598"><a href="/gostd/syscall/env_unix.go.html#2478564">s</a></span><span class="op" id="2478599">)</span><span class="op" id="2478600">;</span>&nbsp;<span class="ident" id="2478602"><a href="/gostd/syscall/env_unix.go.html#2478582">i</a></span><span class="op" id="2478603">++</span>&nbsp;<span class="op" id="2478606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478610">if</span>&nbsp;<span class="ident" id="2478613"><a href="/gostd/syscall/env_unix.go.html#2478564">s</a></span><span class="op" id="2478614">[</span><span class="ident" id="2478615"><a href="/gostd/syscall/env_unix.go.html#2478582">i</a></span><span class="op" id="2478616">]</span>&nbsp;<span class="op" id="2478618">==</span>&nbsp;<span class="string" id="2478621">&#39;=&#39;</span>&nbsp;<span class="op" id="2478625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478630">return</span>&nbsp;<span class="ident" id="2478637"><a href="/gostd/syscall/env_unix.go.html#2478564">s</a></span><span class="op" id="2478638">[</span><span class="ident" id="2478639"><a href="/gostd/syscall/env_unix.go.html#2478582">i</a></span><span class="op" id="2478640">+</span><span class="num" id="2478641">1</span><span class="op" id="2478642">:</span><span class="op" id="2478643">]</span><span class="op" id="2478644">,</span>&nbsp;<span class="builtintype" id="2478646">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478656">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478659">return</span>&nbsp;<span class="string" id="2478666">&#34;&#34;</span><span class="op" id="2478668">,</span>&nbsp;<span class="builtintype" id="2478670">false</span><br>
<span class="lineno"></span><span class="op" id="2478676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2478679">func</span>&nbsp;<span class="ident" id="2478684">Setenv</span><span class="op" id="2478690">(</span><span class="ident" id="2478691">key</span><span class="op" id="2478694">,</span>&nbsp;<span class="ident" id="2478696">value</span>&nbsp;<span class="builtintype" id="2478702">string</span><span class="op" id="2478708">)</span>&nbsp;<span class="builtintype" id="2478710">error</span>&nbsp;<span class="op" id="2478716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478719"><a href="/gostd/syscall/env_unix.go.html#2477120">envOnce</a></span><span class="op" id="2478726">.</span><span class="ident" id="2478727"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="2478729">(</span><span class="ident" id="2478730"><a href="/gostd/syscall/env_unix.go.html#2477691">copyenv</a></span><span class="op" id="2478737">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478740">if</span>&nbsp;<span class="builtinfunc" id="2478743">len</span><span class="op" id="2478746">(</span><span class="ident" id="2478747"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2478750">)</span>&nbsp;<span class="op" id="2478752">==</span>&nbsp;<span class="num" id="2478755">0</span>&nbsp;<span class="op" id="2478757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478761">return</span>&nbsp;<span class="ident" id="2478768"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478779">for</span>&nbsp;<span class="ident" id="2478783">i</span>&nbsp;<span class="op" id="2478785">:=</span>&nbsp;<span class="num" id="2478788">0</span><span class="op" id="2478789">;</span>&nbsp;<span class="ident" id="2478791"><a href="/gostd/syscall/env_unix.go.html#2478783">i</a></span>&nbsp;<span class="op" id="2478793">&lt;</span>&nbsp;<span class="builtinfunc" id="2478795">len</span><span class="op" id="2478798">(</span><span class="ident" id="2478799"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2478802">)</span><span class="op" id="2478803">;</span>&nbsp;<span class="ident" id="2478805"><a href="/gostd/syscall/env_unix.go.html#2478783">i</a></span><span class="op" id="2478806">++</span>&nbsp;<span class="op" id="2478809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478813">if</span>&nbsp;<span class="ident" id="2478816"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2478819">[</span><span class="ident" id="2478820"><a href="/gostd/syscall/env_unix.go.html#2478783">i</a></span><span class="op" id="2478821">]</span>&nbsp;<span class="op" id="2478823">==</span>&nbsp;<span class="string" id="2478826">&#39;=&#39;</span>&nbsp;<span class="op" id="2478830">||</span>&nbsp;<span class="ident" id="2478833"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2478836">[</span><span class="ident" id="2478837"><a href="/gostd/syscall/env_unix.go.html#2478783">i</a></span><span class="op" id="2478838">]</span>&nbsp;<span class="op" id="2478840">==</span>&nbsp;<span class="num" id="2478843">0</span>&nbsp;<span class="op" id="2478845">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478850">return</span>&nbsp;<span class="ident" id="2478857"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478872">for</span>&nbsp;<span class="ident" id="2478876">i</span>&nbsp;<span class="op" id="2478878">:=</span>&nbsp;<span class="num" id="2478881">0</span><span class="op" id="2478882">;</span>&nbsp;<span class="ident" id="2478884"><a href="/gostd/syscall/env_unix.go.html#2478876">i</a></span>&nbsp;<span class="op" id="2478886">&lt;</span>&nbsp;<span class="builtinfunc" id="2478888">len</span><span class="op" id="2478891">(</span><span class="ident" id="2478892"><a href="/gostd/syscall/env_unix.go.html#2478696">value</a></span><span class="op" id="2478897">)</span><span class="op" id="2478898">;</span>&nbsp;<span class="ident" id="2478900"><a href="/gostd/syscall/env_unix.go.html#2478876">i</a></span><span class="op" id="2478901">++</span>&nbsp;<span class="op" id="2478904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478908">if</span>&nbsp;<span class="ident" id="2478911"><a href="/gostd/syscall/env_unix.go.html#2478696">value</a></span><span class="op" id="2478916">[</span><span class="ident" id="2478917"><a href="/gostd/syscall/env_unix.go.html#2478876">i</a></span><span class="op" id="2478918">]</span>&nbsp;<span class="op" id="2478920">==</span>&nbsp;<span class="num" id="2478923">0</span>&nbsp;<span class="op" id="2478925">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478930">return</span>&nbsp;<span class="ident" id="2478937"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2478949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478953"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478960">.</span><span class="ident" id="2478961"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="2478965">(</span><span class="op" id="2478966">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2478969">defer</span>&nbsp;<span class="ident" id="2478975"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2478982">.</span><span class="ident" id="2478983"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="2478989">(</span><span class="op" id="2478990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2478994">i</span><span class="op" id="2478995">,</span>&nbsp;<span class="ident" id="2478997">ok</span>&nbsp;<span class="op" id="2479000">:=</span>&nbsp;<span class="ident" id="2479003"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2479006">[</span><span class="ident" id="2479007"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2479010">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479013">kv</span>&nbsp;<span class="op" id="2479016">:=</span>&nbsp;<span class="ident" id="2479019"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span>&nbsp;<span class="op" id="2479023">+</span>&nbsp;<span class="string" id="2479025">&#34;=&#34;</span>&nbsp;<span class="op" id="2479029">+</span>&nbsp;<span class="ident" id="2479031"><a href="/gostd/syscall/env_unix.go.html#2478696">value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479038">if</span>&nbsp;<span class="ident" id="2479041"><a href="/gostd/syscall/env_unix.go.html#2478997">ok</a></span>&nbsp;<span class="op" id="2479044">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479048"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2479052">[</span><span class="ident" id="2479053"><a href="/gostd/syscall/env_unix.go.html#2478994">i</a></span><span class="op" id="2479054">]</span>&nbsp;<span class="op" id="2479056">=</span>&nbsp;<span class="ident" id="2479058"><a href="/gostd/syscall/env_unix.go.html#2479013">kv</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479062">}</span>&nbsp;<span class="keyword" id="2479064">else</span>&nbsp;<span class="op" id="2479069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479073"><a href="/gostd/syscall/env_unix.go.html#2478994">i</a></span>&nbsp;<span class="op" id="2479075">=</span>&nbsp;<span class="builtinfunc" id="2479077">len</span><span class="op" id="2479080">(</span><span class="ident" id="2479081"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2479085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479089"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span>&nbsp;<span class="op" id="2479094">=</span>&nbsp;<span class="builtinfunc" id="2479096">append</span><span class="op" id="2479102">(</span><span class="ident" id="2479103"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2479107">,</span>&nbsp;<span class="ident" id="2479109"><a href="/gostd/syscall/env_unix.go.html#2479013">kv</a></span><span class="op" id="2479111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479114">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479117"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span><span class="op" id="2479120">[</span><span class="ident" id="2479121"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2479124">]</span>&nbsp;<span class="op" id="2479126">=</span>&nbsp;<span class="ident" id="2479128"><a href="/gostd/syscall/env_unix.go.html#2478994">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479131"><a href="/gostd/syscall/env_unix.go.html#2477637">setenv_c</a></span><span class="op" id="2479139">(</span><span class="ident" id="2479140"><a href="/gostd/syscall/env_unix.go.html#2478691">key</a></span><span class="op" id="2479143">,</span>&nbsp;<span class="ident" id="2479145"><a href="/gostd/syscall/env_unix.go.html#2478696">value</a></span><span class="op" id="2479150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479153">return</span>&nbsp;<span class="builtintype" id="2479160">nil</span><br>
<span class="lineno"></span><span class="op" id="2479164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="2479167">func</span>&nbsp;<span class="ident" id="2479172">Clearenv</span><span class="op" id="2479180">(</span><span class="op" id="2479181">)</span>&nbsp;<span class="op" id="2479183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479186"><a href="/gostd/syscall/env_unix.go.html#2477120">envOnce</a></span><span class="op" id="2479193">.</span><span class="ident" id="2479194"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="2479196">(</span><span class="ident" id="2479197"><a href="/gostd/syscall/env_unix.go.html#2477691">copyenv</a></span><span class="op" id="2479204">)</span>&nbsp;<span class="comment" id="2479206">//&nbsp;prevent&nbsp;copyenv&nbsp;in&nbsp;Getenv/Setenv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479244"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2479251">.</span><span class="ident" id="2479252"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="2479256">(</span><span class="op" id="2479257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479260">defer</span>&nbsp;<span class="ident" id="2479266"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2479273">.</span><span class="ident" id="2479274"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="2479280">(</span><span class="op" id="2479281">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479285">for</span>&nbsp;<span class="ident" id="2479289">k</span>&nbsp;<span class="op" id="2479291">:=</span>&nbsp;<span class="keyword" id="2479294">range</span>&nbsp;<span class="ident" id="2479300"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span>&nbsp;<span class="op" id="2479304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479308"><a href="/gostd/syscall/env_unix.go.html#2477664">unsetenv_c</a></span><span class="op" id="2479318">(</span><span class="ident" id="2479319"><a href="/gostd/syscall/env_unix.go.html#2479289">k</a></span><span class="op" id="2479320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479326"><a href="/gostd/syscall/env_unix.go.html#2477271">env</a></span>&nbsp;<span class="op" id="2479330">=</span>&nbsp;<span class="builtinfunc" id="2479332">make</span><span class="op" id="2479336">(</span><span class="keyword" id="2479337">map</span><span class="op" id="2479340">[</span><span class="builtintype" id="2479341">string</span><span class="op" id="2479347">]</span><span class="builtintype" id="2479348">int</span><span class="op" id="2479351">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479354"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span>&nbsp;<span class="op" id="2479359">=</span>&nbsp;<span class="op" id="2479361">[</span><span class="op" id="2479362">]</span><span class="builtintype" id="2479363">string</span><span class="op" id="2479369">{</span><span class="op" id="2479370">}</span><br>
<span class="lineno"></span><span class="op" id="2479372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2479375">func</span>&nbsp;<span class="ident" id="2479380">Environ</span><span class="op" id="2479387">(</span><span class="op" id="2479388">)</span>&nbsp;<span class="op" id="2479390">[</span><span class="op" id="2479391">]</span><span class="builtintype" id="2479392">string</span>&nbsp;<span class="op" id="2479399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479402"><a href="/gostd/syscall/env_unix.go.html#2477120">envOnce</a></span><span class="op" id="2479409">.</span><span class="ident" id="2479410"><a href="/gostd/sync/once.go.html#1447110">Do</a></span><span class="op" id="2479412">(</span><span class="ident" id="2479413"><a href="/gostd/syscall/env_unix.go.html#2477691">copyenv</a></span><span class="op" id="2479420">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479423"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2479430">.</span><span class="ident" id="2479431"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="2479436">(</span><span class="op" id="2479437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479440">defer</span>&nbsp;<span class="ident" id="2479446"><a href="/gostd/syscall/env_unix.go.html#2477173">envLock</a></span><span class="op" id="2479453">.</span><span class="ident" id="2479454"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="2479461">(</span><span class="op" id="2479462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479465">a</span>&nbsp;<span class="op" id="2479467">:=</span>&nbsp;<span class="builtinfunc" id="2479470">make</span><span class="op" id="2479474">(</span><span class="op" id="2479475">[</span><span class="op" id="2479476">]</span><span class="builtintype" id="2479477">string</span><span class="op" id="2479483">,</span>&nbsp;<span class="num" id="2479485">0</span><span class="op" id="2479486">,</span>&nbsp;<span class="builtinfunc" id="2479488">len</span><span class="op" id="2479491">(</span><span class="ident" id="2479492"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span><span class="op" id="2479496">)</span><span class="op" id="2479497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479500">for</span>&nbsp;<span class="ident" id="2479504">_</span><span class="op" id="2479505">,</span>&nbsp;<span class="ident" id="2479507">env</span>&nbsp;<span class="op" id="2479511">:=</span>&nbsp;<span class="keyword" id="2479514">range</span>&nbsp;<span class="ident" id="2479520"><a href="/gostd/syscall/env_unix.go.html#2477452">envs</a></span>&nbsp;<span class="op" id="2479525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479529">if</span>&nbsp;<span class="ident" id="2479532"><a href="/gostd/syscall/env_unix.go.html#2479507">env</a></span>&nbsp;<span class="op" id="2479536">!=</span>&nbsp;<span class="string" id="2479539">&#34;&#34;</span>&nbsp;<span class="op" id="2479542">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2479547"><a href="/gostd/syscall/env_unix.go.html#2479465">a</a></span>&nbsp;<span class="op" id="2479549">=</span>&nbsp;<span class="builtinfunc" id="2479551">append</span><span class="op" id="2479557">(</span><span class="ident" id="2479558"><a href="/gostd/syscall/env_unix.go.html#2479465">a</a></span><span class="op" id="2479559">,</span>&nbsp;<span class="ident" id="2479561"><a href="/gostd/syscall/env_unix.go.html#2479507">env</a></span><span class="op" id="2479564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2479571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2479574">return</span>&nbsp;<span class="ident" id="2479581"><a href="/gostd/syscall/env_unix.go.html#2479465">a</a></span><br>
<span class="lineno"></span><span class="op" id="2479583">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
