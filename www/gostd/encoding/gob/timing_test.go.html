<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html" class="current">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8323201">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8323256">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8323310">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8323361">package</span>&nbsp;<span class="ident" id="8323369">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8323374">import</span>&nbsp;<span class="op" id="8323381">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8323384">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8323393">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8323399">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8323405">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8323416">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8323426">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8323429">type</span>&nbsp;<span class="ident" id="8323434">Bench</span>&nbsp;<span class="keyword" id="8323440">struct</span>&nbsp;<span class="op" id="8323447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323450">A</span>&nbsp;<span class="builtintype" id="8323452">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323457">B</span>&nbsp;<span class="builtintype" id="8323459">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323468">C</span>&nbsp;<span class="builtintype" id="8323470">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323478">D</span>&nbsp;<span class="op" id="8323480">[</span><span class="op" id="8323481">]</span><span class="builtintype" id="8323482">byte</span><br>
<span class="lineno">20</span><span class="op" id="8323487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8323490">func</span>&nbsp;<span class="ident" id="8323495">benchmarkEndToEnd</span><span class="op" id="8323512">(</span><span class="ident" id="8323513">b</span>&nbsp;<span class="op" id="8323515">*</span><span class="ident" id="8323516">testing</span><span class="op" id="8323523">.</span><span class="ident" id="8323524">B</span><span class="op" id="8323525">,</span>&nbsp;<span class="ident" id="8323527">ctor</span>&nbsp;<span class="keyword" id="8323532">func</span><span class="op" id="8323536">(</span><span class="op" id="8323537">)</span>&nbsp;<span class="keyword" id="8323539">interface</span><span class="op" id="8323548">{</span><span class="op" id="8323549">}</span><span class="op" id="8323550">,</span>&nbsp;<span class="ident" id="8323552">pipe</span>&nbsp;<span class="keyword" id="8323557">func</span><span class="op" id="8323561">(</span><span class="op" id="8323562">)</span>&nbsp;<span class="op" id="8323564">(</span><span class="ident" id="8323565">r</span>&nbsp;<span class="ident" id="8323567">io</span><span class="op" id="8323569">.</span><span class="ident" id="8323570">Reader</span><span class="op" id="8323576">,</span>&nbsp;<span class="ident" id="8323578">w</span>&nbsp;<span class="ident" id="8323580">io</span><span class="op" id="8323582">.</span><span class="ident" id="8323583">Writer</span><span class="op" id="8323589">,</span>&nbsp;<span class="ident" id="8323591">err</span>&nbsp;<span class="builtintype" id="8323595">error</span><span class="op" id="8323600">)</span><span class="op" id="8323601">)</span>&nbsp;<span class="op" id="8323603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323606">b</span><span class="op" id="8323607">.</span><span class="ident" id="8323608">RunParallel</span><span class="op" id="8323619">(</span><span class="keyword" id="8323620">func</span><span class="op" id="8323624">(</span><span class="ident" id="8323625">pb</span>&nbsp;<span class="op" id="8323628">*</span><span class="ident" id="8323629">testing</span><span class="op" id="8323636">.</span><span class="ident" id="8323637">PB</span><span class="op" id="8323639">)</span>&nbsp;<span class="op" id="8323641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323645">r</span><span class="op" id="8323646">,</span>&nbsp;<span class="ident" id="8323648">w</span><span class="op" id="8323649">,</span>&nbsp;<span class="ident" id="8323651">err</span>&nbsp;<span class="op" id="8323655">:=</span>&nbsp;<span class="ident" id="8323658">pipe</span><span class="op" id="8323662">(</span><span class="op" id="8323663">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323667">if</span>&nbsp;<span class="ident" id="8323670">err</span>&nbsp;<span class="op" id="8323674">!=</span>&nbsp;<span class="builtintype" id="8323677">nil</span>&nbsp;<span class="op" id="8323681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323686">b</span><span class="op" id="8323687">.</span><span class="ident" id="8323688">Fatal</span><span class="op" id="8323693">(</span><span class="string" id="8323694">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="8323711">,</span>&nbsp;<span class="ident" id="8323713">err</span><span class="op" id="8323716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323724">v</span>&nbsp;<span class="op" id="8323726">:=</span>&nbsp;<span class="ident" id="8323729">ctor</span><span class="op" id="8323733">(</span><span class="op" id="8323734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323738">enc</span>&nbsp;<span class="op" id="8323742">:=</span>&nbsp;<span class="ident" id="8323745">NewEncoder</span><span class="op" id="8323755">(</span><span class="ident" id="8323756">w</span><span class="op" id="8323757">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323761">dec</span>&nbsp;<span class="op" id="8323765">:=</span>&nbsp;<span class="ident" id="8323768">NewDecoder</span><span class="op" id="8323778">(</span><span class="ident" id="8323779">r</span><span class="op" id="8323780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323784">for</span>&nbsp;<span class="ident" id="8323788">pb</span><span class="op" id="8323790">.</span><span class="ident" id="8323791">Next</span><span class="op" id="8323795">(</span><span class="op" id="8323796">)</span>&nbsp;<span class="op" id="8323798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323803">if</span>&nbsp;<span class="ident" id="8323806">err</span>&nbsp;<span class="op" id="8323810">:=</span>&nbsp;<span class="ident" id="8323813">enc</span><span class="op" id="8323816">.</span><span class="ident" id="8323817">Encode</span><span class="op" id="8323823">(</span><span class="ident" id="8323824">v</span><span class="op" id="8323825">)</span><span class="op" id="8323826">;</span>&nbsp;<span class="ident" id="8323828">err</span>&nbsp;<span class="op" id="8323832">!=</span>&nbsp;<span class="builtintype" id="8323835">nil</span>&nbsp;<span class="op" id="8323839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323845">b</span><span class="op" id="8323846">.</span><span class="ident" id="8323847">Fatal</span><span class="op" id="8323852">(</span><span class="string" id="8323853">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8323868">,</span>&nbsp;<span class="ident" id="8323870">err</span><span class="op" id="8323873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323878">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8323883">if</span>&nbsp;<span class="ident" id="8323886">err</span>&nbsp;<span class="op" id="8323890">:=</span>&nbsp;<span class="ident" id="8323893">dec</span><span class="op" id="8323896">.</span><span class="ident" id="8323897">Decode</span><span class="op" id="8323903">(</span><span class="ident" id="8323904">v</span><span class="op" id="8323905">)</span><span class="op" id="8323906">;</span>&nbsp;<span class="ident" id="8323908">err</span>&nbsp;<span class="op" id="8323912">!=</span>&nbsp;<span class="builtintype" id="8323915">nil</span>&nbsp;<span class="op" id="8323919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8323925">b</span><span class="op" id="8323926">.</span><span class="ident" id="8323927">Fatal</span><span class="op" id="8323932">(</span><span class="string" id="8323933">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8323948">,</span>&nbsp;<span class="ident" id="8323950">err</span><span class="op" id="8323953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8323965">}</span><span class="op" id="8323966">)</span><br>
<span class="lineno">40</span><span class="op" id="8323968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8323971">func</span>&nbsp;<span class="ident" id="8323976">BenchmarkEndToEndPipe</span><span class="op" id="8323997">(</span><span class="ident" id="8323998">b</span>&nbsp;<span class="op" id="8324000">*</span><span class="ident" id="8324001">testing</span><span class="op" id="8324008">.</span><span class="ident" id="8324009">B</span><span class="op" id="8324010">)</span>&nbsp;<span class="op" id="8324012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324015">benchmarkEndToEnd</span><span class="op" id="8324032">(</span><span class="ident" id="8324033">b</span><span class="op" id="8324034">,</span>&nbsp;<span class="keyword" id="8324036">func</span><span class="op" id="8324040">(</span><span class="op" id="8324041">)</span>&nbsp;<span class="keyword" id="8324043">interface</span><span class="op" id="8324052">{</span><span class="op" id="8324053">}</span>&nbsp;<span class="op" id="8324055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324059">return</span>&nbsp;<span class="op" id="8324066">&amp;</span><span class="ident" id="8324067">Bench</span><span class="op" id="8324072">{</span><span class="num" id="8324073">7</span><span class="op" id="8324074">,</span>&nbsp;<span class="num" id="8324076">3.2</span><span class="op" id="8324079">,</span>&nbsp;<span class="string" id="8324081">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8324098">,</span>&nbsp;<span class="ident" id="8324100">bytes</span><span class="op" id="8324105">.</span><span class="ident" id="8324106">Repeat</span><span class="op" id="8324112">(</span><span class="op" id="8324113">[</span><span class="op" id="8324114">]</span><span class="builtintype" id="8324115">byte</span><span class="op" id="8324119">(</span><span class="string" id="8324120">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8324138">)</span><span class="op" id="8324139">,</span>&nbsp;<span class="num" id="8324141">100</span><span class="op" id="8324144">)</span><span class="op" id="8324145">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324148">}</span><span class="op" id="8324149">,</span>&nbsp;<span class="keyword" id="8324151">func</span><span class="op" id="8324155">(</span><span class="op" id="8324156">)</span>&nbsp;<span class="op" id="8324158">(</span><span class="ident" id="8324159">r</span>&nbsp;<span class="ident" id="8324161">io</span><span class="op" id="8324163">.</span><span class="ident" id="8324164">Reader</span><span class="op" id="8324170">,</span>&nbsp;<span class="ident" id="8324172">w</span>&nbsp;<span class="ident" id="8324174">io</span><span class="op" id="8324176">.</span><span class="ident" id="8324177">Writer</span><span class="op" id="8324183">,</span>&nbsp;<span class="ident" id="8324185">err</span>&nbsp;<span class="builtintype" id="8324189">error</span><span class="op" id="8324194">)</span>&nbsp;<span class="op" id="8324196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324200">r</span><span class="op" id="8324201">,</span>&nbsp;<span class="ident" id="8324203">w</span><span class="op" id="8324204">,</span>&nbsp;<span class="ident" id="8324206">err</span>&nbsp;<span class="op" id="8324210">=</span>&nbsp;<span class="ident" id="8324212">os</span><span class="op" id="8324214">.</span><span class="ident" id="8324215">Pipe</span><span class="op" id="8324219">(</span><span class="op" id="8324220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324224">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324232">}</span><span class="op" id="8324233">)</span><br>
<span class="lineno"></span><span class="op" id="8324235">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8324238">func</span>&nbsp;<span class="ident" id="8324243">BenchmarkEndToEndByteBuffer</span><span class="op" id="8324270">(</span><span class="ident" id="8324271">b</span>&nbsp;<span class="op" id="8324273">*</span><span class="ident" id="8324274">testing</span><span class="op" id="8324281">.</span><span class="ident" id="8324282">B</span><span class="op" id="8324283">)</span>&nbsp;<span class="op" id="8324285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324288">benchmarkEndToEnd</span><span class="op" id="8324305">(</span><span class="ident" id="8324306">b</span><span class="op" id="8324307">,</span>&nbsp;<span class="keyword" id="8324309">func</span><span class="op" id="8324313">(</span><span class="op" id="8324314">)</span>&nbsp;<span class="keyword" id="8324316">interface</span><span class="op" id="8324325">{</span><span class="op" id="8324326">}</span>&nbsp;<span class="op" id="8324328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324332">return</span>&nbsp;<span class="op" id="8324339">&amp;</span><span class="ident" id="8324340">Bench</span><span class="op" id="8324345">{</span><span class="num" id="8324346">7</span><span class="op" id="8324347">,</span>&nbsp;<span class="num" id="8324349">3.2</span><span class="op" id="8324352">,</span>&nbsp;<span class="string" id="8324354">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8324371">,</span>&nbsp;<span class="ident" id="8324373">bytes</span><span class="op" id="8324378">.</span><span class="ident" id="8324379">Repeat</span><span class="op" id="8324385">(</span><span class="op" id="8324386">[</span><span class="op" id="8324387">]</span><span class="builtintype" id="8324388">byte</span><span class="op" id="8324392">(</span><span class="string" id="8324393">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8324411">)</span><span class="op" id="8324412">,</span>&nbsp;<span class="num" id="8324414">100</span><span class="op" id="8324417">)</span><span class="op" id="8324418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324421">}</span><span class="op" id="8324422">,</span>&nbsp;<span class="keyword" id="8324424">func</span><span class="op" id="8324428">(</span><span class="op" id="8324429">)</span>&nbsp;<span class="op" id="8324431">(</span><span class="ident" id="8324432">r</span>&nbsp;<span class="ident" id="8324434">io</span><span class="op" id="8324436">.</span><span class="ident" id="8324437">Reader</span><span class="op" id="8324443">,</span>&nbsp;<span class="ident" id="8324445">w</span>&nbsp;<span class="ident" id="8324447">io</span><span class="op" id="8324449">.</span><span class="ident" id="8324450">Writer</span><span class="op" id="8324456">,</span>&nbsp;<span class="ident" id="8324458">err</span>&nbsp;<span class="builtintype" id="8324462">error</span><span class="op" id="8324467">)</span>&nbsp;<span class="op" id="8324469">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324473">var</span>&nbsp;<span class="ident" id="8324477">buf</span>&nbsp;<span class="ident" id="8324481">bytes</span><span class="op" id="8324486">.</span><span class="ident" id="8324487">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324496">return</span>&nbsp;<span class="op" id="8324503">&amp;</span><span class="ident" id="8324504">buf</span><span class="op" id="8324507">,</span>&nbsp;<span class="op" id="8324509">&amp;</span><span class="ident" id="8324510">buf</span><span class="op" id="8324513">,</span>&nbsp;<span class="builtintype" id="8324515">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324520">}</span><span class="op" id="8324521">)</span><br>
<span class="lineno"></span><span class="op" id="8324523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8324526">func</span>&nbsp;<span class="ident" id="8324531">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="8324563">(</span><span class="ident" id="8324564">b</span>&nbsp;<span class="op" id="8324566">*</span><span class="ident" id="8324567">testing</span><span class="op" id="8324574">.</span><span class="ident" id="8324575">B</span><span class="op" id="8324576">)</span>&nbsp;<span class="op" id="8324578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324581">benchmarkEndToEnd</span><span class="op" id="8324598">(</span><span class="ident" id="8324599">b</span><span class="op" id="8324600">,</span>&nbsp;<span class="keyword" id="8324602">func</span><span class="op" id="8324606">(</span><span class="op" id="8324607">)</span>&nbsp;<span class="keyword" id="8324609">interface</span><span class="op" id="8324618">{</span><span class="op" id="8324619">}</span>&nbsp;<span class="op" id="8324621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324625">v</span>&nbsp;<span class="op" id="8324627">:=</span>&nbsp;<span class="op" id="8324630">&amp;</span><span class="ident" id="8324631">Bench</span><span class="op" id="8324636">{</span><span class="num" id="8324637">7</span><span class="op" id="8324638">,</span>&nbsp;<span class="num" id="8324640">3.2</span><span class="op" id="8324643">,</span>&nbsp;<span class="string" id="8324645">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8324662">,</span>&nbsp;<span class="builtintype" id="8324664">nil</span><span class="op" id="8324667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324671">Register</span><span class="op" id="8324679">(</span><span class="ident" id="8324680">v</span><span class="op" id="8324681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324685">arr</span>&nbsp;<span class="op" id="8324689">:=</span>&nbsp;<span class="builtinfunc" id="8324692">make</span><span class="op" id="8324696">(</span><span class="op" id="8324697">[</span><span class="op" id="8324698">]</span><span class="keyword" id="8324699">interface</span><span class="op" id="8324708">{</span><span class="op" id="8324709">}</span><span class="op" id="8324710">,</span>&nbsp;<span class="num" id="8324712">100</span><span class="op" id="8324715">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324719">for</span>&nbsp;<span class="ident" id="8324723">i</span>&nbsp;<span class="op" id="8324725">:=</span>&nbsp;<span class="keyword" id="8324728">range</span>&nbsp;<span class="ident" id="8324734">arr</span>&nbsp;<span class="op" id="8324738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324743">arr</span><span class="op" id="8324746">[</span><span class="ident" id="8324747">i</span><span class="op" id="8324748">]</span>&nbsp;<span class="op" id="8324750">=</span>&nbsp;<span class="ident" id="8324752">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324760">return</span>&nbsp;<span class="op" id="8324767">&amp;</span><span class="ident" id="8324768">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324773">}</span><span class="op" id="8324774">,</span>&nbsp;<span class="keyword" id="8324776">func</span><span class="op" id="8324780">(</span><span class="op" id="8324781">)</span>&nbsp;<span class="op" id="8324783">(</span><span class="ident" id="8324784">r</span>&nbsp;<span class="ident" id="8324786">io</span><span class="op" id="8324788">.</span><span class="ident" id="8324789">Reader</span><span class="op" id="8324795">,</span>&nbsp;<span class="ident" id="8324797">w</span>&nbsp;<span class="ident" id="8324799">io</span><span class="op" id="8324801">.</span><span class="ident" id="8324802">Writer</span><span class="op" id="8324808">,</span>&nbsp;<span class="ident" id="8324810">err</span>&nbsp;<span class="builtintype" id="8324814">error</span><span class="op" id="8324819">)</span>&nbsp;<span class="op" id="8324821">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324825">var</span>&nbsp;<span class="ident" id="8324829">buf</span>&nbsp;<span class="ident" id="8324833">bytes</span><span class="op" id="8324838">.</span><span class="ident" id="8324839">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324848">return</span>&nbsp;<span class="op" id="8324855">&amp;</span><span class="ident" id="8324856">buf</span><span class="op" id="8324859">,</span>&nbsp;<span class="op" id="8324861">&amp;</span><span class="ident" id="8324862">buf</span><span class="op" id="8324865">,</span>&nbsp;<span class="builtintype" id="8324867">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324872">}</span><span class="op" id="8324873">)</span><br>
<span class="lineno"></span><span class="op" id="8324875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8324878">func</span>&nbsp;<span class="ident" id="8324883">TestCountEncodeMallocs</span><span class="op" id="8324905">(</span><span class="ident" id="8324906">t</span>&nbsp;<span class="op" id="8324908">*</span><span class="ident" id="8324909">testing</span><span class="op" id="8324916">.</span><span class="ident" id="8324917">T</span><span class="op" id="8324918">)</span>&nbsp;<span class="op" id="8324920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324923">if</span>&nbsp;<span class="ident" id="8324926">testing</span><span class="op" id="8324933">.</span><span class="ident" id="8324934">Short</span><span class="op" id="8324939">(</span><span class="op" id="8324940">)</span>&nbsp;<span class="op" id="8324942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8324946">t</span><span class="op" id="8324947">.</span><span class="ident" id="8324948">Skip</span><span class="op" id="8324952">(</span><span class="string" id="8324953">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8324990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8324993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8324996">if</span>&nbsp;<span class="ident" id="8324999">runtime</span><span class="op" id="8325006">.</span><span class="ident" id="8325007">GOMAXPROCS</span><span class="op" id="8325017">(</span><span class="num" id="8325018">0</span><span class="op" id="8325019">)</span>&nbsp;<span class="op" id="8325021">&gt;</span>&nbsp;<span class="num" id="8325023">1</span>&nbsp;<span class="op" id="8325025">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325029">t</span><span class="op" id="8325030">.</span><span class="ident" id="8325031">Skip</span><span class="op" id="8325035">(</span><span class="string" id="8325036">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8325060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325067">const</span>&nbsp;<span class="ident" id="8325073">N</span>&nbsp;<span class="op" id="8325075">=</span>&nbsp;<span class="num" id="8325077">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325084">var</span>&nbsp;<span class="ident" id="8325088">buf</span>&nbsp;<span class="ident" id="8325092">bytes</span><span class="op" id="8325097">.</span><span class="ident" id="8325098">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325106">enc</span>&nbsp;<span class="op" id="8325110">:=</span>&nbsp;<span class="ident" id="8325113">NewEncoder</span><span class="op" id="8325123">(</span><span class="op" id="8325124">&amp;</span><span class="ident" id="8325125">buf</span><span class="op" id="8325128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325131">bench</span>&nbsp;<span class="op" id="8325137">:=</span>&nbsp;<span class="op" id="8325140">&amp;</span><span class="ident" id="8325141">Bench</span><span class="op" id="8325146">{</span><span class="num" id="8325147">7</span><span class="op" id="8325148">,</span>&nbsp;<span class="num" id="8325150">3.2</span><span class="op" id="8325153">,</span>&nbsp;<span class="string" id="8325155">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8325172">,</span>&nbsp;<span class="op" id="8325174">[</span><span class="op" id="8325175">]</span><span class="builtintype" id="8325176">byte</span><span class="op" id="8325180">(</span><span class="string" id="8325181">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8325199">)</span><span class="op" id="8325200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325204">allocs</span>&nbsp;<span class="op" id="8325211">:=</span>&nbsp;<span class="ident" id="8325214">testing</span><span class="op" id="8325221">.</span><span class="ident" id="8325222">AllocsPerRun</span><span class="op" id="8325234">(</span><span class="ident" id="8325235">N</span><span class="op" id="8325236">,</span>&nbsp;<span class="keyword" id="8325238">func</span><span class="op" id="8325242">(</span><span class="op" id="8325243">)</span>&nbsp;<span class="op" id="8325245">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325249">err</span>&nbsp;<span class="op" id="8325253">:=</span>&nbsp;<span class="ident" id="8325256">enc</span><span class="op" id="8325259">.</span><span class="ident" id="8325260">Encode</span><span class="op" id="8325266">(</span><span class="ident" id="8325267">bench</span><span class="op" id="8325272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325276">if</span>&nbsp;<span class="ident" id="8325279">err</span>&nbsp;<span class="op" id="8325283">!=</span>&nbsp;<span class="builtintype" id="8325286">nil</span>&nbsp;<span class="op" id="8325290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325295">t</span><span class="op" id="8325296">.</span><span class="ident" id="8325297">Fatal</span><span class="op" id="8325302">(</span><span class="string" id="8325303">&#34;encode:&#34;</span><span class="op" id="8325312">,</span>&nbsp;<span class="ident" id="8325314">err</span><span class="op" id="8325317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325324">}</span><span class="op" id="8325325">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325328">if</span>&nbsp;<span class="ident" id="8325331">allocs</span>&nbsp;<span class="op" id="8325338">!=</span>&nbsp;<span class="num" id="8325341">0</span>&nbsp;<span class="op" id="8325343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325347">t</span><span class="op" id="8325348">.</span><span class="ident" id="8325349">Fatalf</span><span class="op" id="8325355">(</span><span class="string" id="8325356">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="8325406">,</span>&nbsp;<span class="ident" id="8325408">allocs</span><span class="op" id="8325414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325417">}</span><br>
<span class="lineno"></span><span class="op" id="8325419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="8325422">func</span>&nbsp;<span class="ident" id="8325427">TestCountDecodeMallocs</span><span class="op" id="8325449">(</span><span class="ident" id="8325450">t</span>&nbsp;<span class="op" id="8325452">*</span><span class="ident" id="8325453">testing</span><span class="op" id="8325460">.</span><span class="ident" id="8325461">T</span><span class="op" id="8325462">)</span>&nbsp;<span class="op" id="8325464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325467">if</span>&nbsp;<span class="ident" id="8325470">testing</span><span class="op" id="8325477">.</span><span class="ident" id="8325478">Short</span><span class="op" id="8325483">(</span><span class="op" id="8325484">)</span>&nbsp;<span class="op" id="8325486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325490">t</span><span class="op" id="8325491">.</span><span class="ident" id="8325492">Skip</span><span class="op" id="8325496">(</span><span class="string" id="8325497">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8325534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325540">if</span>&nbsp;<span class="ident" id="8325543">runtime</span><span class="op" id="8325550">.</span><span class="ident" id="8325551">GOMAXPROCS</span><span class="op" id="8325561">(</span><span class="num" id="8325562">0</span><span class="op" id="8325563">)</span>&nbsp;<span class="op" id="8325565">&gt;</span>&nbsp;<span class="num" id="8325567">1</span>&nbsp;<span class="op" id="8325569">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325573">t</span><span class="op" id="8325574">.</span><span class="ident" id="8325575">Skip</span><span class="op" id="8325579">(</span><span class="string" id="8325580">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8325604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325611">const</span>&nbsp;<span class="ident" id="8325617">N</span>&nbsp;<span class="op" id="8325619">=</span>&nbsp;<span class="num" id="8325621">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325628">var</span>&nbsp;<span class="ident" id="8325632">buf</span>&nbsp;<span class="ident" id="8325636">bytes</span><span class="op" id="8325641">.</span><span class="ident" id="8325642">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325650">enc</span>&nbsp;<span class="op" id="8325654">:=</span>&nbsp;<span class="ident" id="8325657">NewEncoder</span><span class="op" id="8325667">(</span><span class="op" id="8325668">&amp;</span><span class="ident" id="8325669">buf</span><span class="op" id="8325672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325675">bench</span>&nbsp;<span class="op" id="8325681">:=</span>&nbsp;<span class="op" id="8325684">&amp;</span><span class="ident" id="8325685">Bench</span><span class="op" id="8325690">{</span><span class="num" id="8325691">7</span><span class="op" id="8325692">,</span>&nbsp;<span class="num" id="8325694">3.2</span><span class="op" id="8325697">,</span>&nbsp;<span class="string" id="8325699">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="8325716">,</span>&nbsp;<span class="op" id="8325718">[</span><span class="op" id="8325719">]</span><span class="builtintype" id="8325720">byte</span><span class="op" id="8325724">(</span><span class="string" id="8325725">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8325743">)</span><span class="op" id="8325744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8325748">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325790">testing</span><span class="op" id="8325797">.</span><span class="ident" id="8325798">AllocsPerRun</span><span class="op" id="8325810">(</span><span class="ident" id="8325811">N</span><span class="op" id="8325812">,</span>&nbsp;<span class="keyword" id="8325814">func</span><span class="op" id="8325818">(</span><span class="op" id="8325819">)</span>&nbsp;<span class="op" id="8325821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325825">err</span>&nbsp;<span class="op" id="8325829">:=</span>&nbsp;<span class="ident" id="8325832">enc</span><span class="op" id="8325835">.</span><span class="ident" id="8325836">Encode</span><span class="op" id="8325842">(</span><span class="ident" id="8325843">bench</span><span class="op" id="8325848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8325852">if</span>&nbsp;<span class="ident" id="8325855">err</span>&nbsp;<span class="op" id="8325859">!=</span>&nbsp;<span class="builtintype" id="8325862">nil</span>&nbsp;<span class="op" id="8325866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325871">t</span><span class="op" id="8325872">.</span><span class="ident" id="8325873">Fatal</span><span class="op" id="8325878">(</span><span class="string" id="8325879">&#34;encode:&#34;</span><span class="op" id="8325888">,</span>&nbsp;<span class="ident" id="8325890">err</span><span class="op" id="8325893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325897">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325900">}</span><span class="op" id="8325901">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325905">dec</span>&nbsp;<span class="op" id="8325909">:=</span>&nbsp;<span class="ident" id="8325912">NewDecoder</span><span class="op" id="8325922">(</span><span class="op" id="8325923">&amp;</span><span class="ident" id="8325924">buf</span><span class="op" id="8325927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325930">allocs</span>&nbsp;<span class="op" id="8325937">:=</span>&nbsp;<span class="ident" id="8325940">testing</span><span class="op" id="8325947">.</span><span class="ident" id="8325948">AllocsPerRun</span><span class="op" id="8325960">(</span><span class="ident" id="8325961">N</span><span class="op" id="8325962">,</span>&nbsp;<span class="keyword" id="8325964">func</span><span class="op" id="8325968">(</span><span class="op" id="8325969">)</span>&nbsp;<span class="op" id="8325971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8325975">*</span><span class="ident" id="8325976">bench</span>&nbsp;<span class="op" id="8325982">=</span>&nbsp;<span class="ident" id="8325984">Bench</span><span class="op" id="8325989">{</span><span class="op" id="8325990">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8325994">err</span>&nbsp;<span class="op" id="8325998">:=</span>&nbsp;<span class="ident" id="8326001">dec</span><span class="op" id="8326004">.</span><span class="ident" id="8326005">Decode</span><span class="op" id="8326011">(</span><span class="op" id="8326012">&amp;</span><span class="ident" id="8326013">bench</span><span class="op" id="8326018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326022">if</span>&nbsp;<span class="ident" id="8326025">err</span>&nbsp;<span class="op" id="8326029">!=</span>&nbsp;<span class="builtintype" id="8326032">nil</span>&nbsp;<span class="op" id="8326036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326041">t</span><span class="op" id="8326042">.</span><span class="ident" id="8326043">Fatal</span><span class="op" id="8326048">(</span><span class="string" id="8326049">&#34;decode:&#34;</span><span class="op" id="8326058">,</span>&nbsp;<span class="ident" id="8326060">err</span><span class="op" id="8326063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326070">}</span><span class="op" id="8326071">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326074">if</span>&nbsp;<span class="ident" id="8326077">allocs</span>&nbsp;<span class="op" id="8326084">!=</span>&nbsp;<span class="num" id="8326087">4</span>&nbsp;<span class="op" id="8326089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326093">t</span><span class="op" id="8326094">.</span><span class="ident" id="8326095">Fatalf</span><span class="op" id="8326101">(</span><span class="string" id="8326102">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="8326152">,</span>&nbsp;<span class="ident" id="8326154">allocs</span><span class="op" id="8326160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326163">}</span><br>
<span class="lineno"></span><span class="op" id="8326165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8326168">func</span>&nbsp;<span class="ident" id="8326173">BenchmarkEncodeComplex128Slice</span><span class="op" id="8326203">(</span><span class="ident" id="8326204">b</span>&nbsp;<span class="op" id="8326206">*</span><span class="ident" id="8326207">testing</span><span class="op" id="8326214">.</span><span class="ident" id="8326215">B</span><span class="op" id="8326216">)</span>&nbsp;<span class="op" id="8326218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326221">var</span>&nbsp;<span class="ident" id="8326225">buf</span>&nbsp;<span class="ident" id="8326229">bytes</span><span class="op" id="8326234">.</span><span class="ident" id="8326235">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326243">enc</span>&nbsp;<span class="op" id="8326247">:=</span>&nbsp;<span class="ident" id="8326250">NewEncoder</span><span class="op" id="8326260">(</span><span class="op" id="8326261">&amp;</span><span class="ident" id="8326262">buf</span><span class="op" id="8326265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326268">a</span>&nbsp;<span class="op" id="8326270">:=</span>&nbsp;<span class="builtinfunc" id="8326273">make</span><span class="op" id="8326277">(</span><span class="op" id="8326278">[</span><span class="op" id="8326279">]</span><span class="builtintype" id="8326280">complex128</span><span class="op" id="8326290">,</span>&nbsp;<span class="num" id="8326292">1000</span><span class="op" id="8326296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326299">for</span>&nbsp;<span class="ident" id="8326303">i</span>&nbsp;<span class="op" id="8326305">:=</span>&nbsp;<span class="keyword" id="8326308">range</span>&nbsp;<span class="ident" id="8326314">a</span>&nbsp;<span class="op" id="8326316">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326320">a</span><span class="op" id="8326321">[</span><span class="ident" id="8326322">i</span><span class="op" id="8326323">]</span>&nbsp;<span class="op" id="8326325">=</span>&nbsp;<span class="num" id="8326327">1.2</span>&nbsp;<span class="op" id="8326331">+</span>&nbsp;<span class="num" id="8326333">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326342">b</span><span class="op" id="8326343">.</span><span class="ident" id="8326344">ResetTimer</span><span class="op" id="8326354">(</span><span class="op" id="8326355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326358">for</span>&nbsp;<span class="ident" id="8326362">i</span>&nbsp;<span class="op" id="8326364">:=</span>&nbsp;<span class="num" id="8326367">0</span><span class="op" id="8326368">;</span>&nbsp;<span class="ident" id="8326370">i</span>&nbsp;<span class="op" id="8326372">&lt;</span>&nbsp;<span class="ident" id="8326374">b</span><span class="op" id="8326375">.</span><span class="ident" id="8326376">N</span><span class="op" id="8326377">;</span>&nbsp;<span class="ident" id="8326379">i</span><span class="op" id="8326380">++</span>&nbsp;<span class="op" id="8326383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326387">buf</span><span class="op" id="8326390">.</span><span class="ident" id="8326391">Reset</span><span class="op" id="8326396">(</span><span class="op" id="8326397">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326401">err</span>&nbsp;<span class="op" id="8326405">:=</span>&nbsp;<span class="ident" id="8326408">enc</span><span class="op" id="8326411">.</span><span class="ident" id="8326412">Encode</span><span class="op" id="8326418">(</span><span class="ident" id="8326419">a</span><span class="op" id="8326420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326424">if</span>&nbsp;<span class="ident" id="8326427">err</span>&nbsp;<span class="op" id="8326431">!=</span>&nbsp;<span class="builtintype" id="8326434">nil</span>&nbsp;<span class="op" id="8326438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326443">b</span><span class="op" id="8326444">.</span><span class="ident" id="8326445">Fatal</span><span class="op" id="8326450">(</span><span class="ident" id="8326451">err</span><span class="op" id="8326454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326461">}</span><br>
<span class="lineno">150</span><span class="op" id="8326463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8326466">func</span>&nbsp;<span class="ident" id="8326471">BenchmarkEncodeFloat64Slice</span><span class="op" id="8326498">(</span><span class="ident" id="8326499">b</span>&nbsp;<span class="op" id="8326501">*</span><span class="ident" id="8326502">testing</span><span class="op" id="8326509">.</span><span class="ident" id="8326510">B</span><span class="op" id="8326511">)</span>&nbsp;<span class="op" id="8326513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326516">var</span>&nbsp;<span class="ident" id="8326520">buf</span>&nbsp;<span class="ident" id="8326524">bytes</span><span class="op" id="8326529">.</span><span class="ident" id="8326530">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326538">enc</span>&nbsp;<span class="op" id="8326542">:=</span>&nbsp;<span class="ident" id="8326545">NewEncoder</span><span class="op" id="8326555">(</span><span class="op" id="8326556">&amp;</span><span class="ident" id="8326557">buf</span><span class="op" id="8326560">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326563">a</span>&nbsp;<span class="op" id="8326565">:=</span>&nbsp;<span class="builtinfunc" id="8326568">make</span><span class="op" id="8326572">(</span><span class="op" id="8326573">[</span><span class="op" id="8326574">]</span><span class="builtintype" id="8326575">float64</span><span class="op" id="8326582">,</span>&nbsp;<span class="num" id="8326584">1000</span><span class="op" id="8326588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326591">for</span>&nbsp;<span class="ident" id="8326595">i</span>&nbsp;<span class="op" id="8326597">:=</span>&nbsp;<span class="keyword" id="8326600">range</span>&nbsp;<span class="ident" id="8326606">a</span>&nbsp;<span class="op" id="8326608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326612">a</span><span class="op" id="8326613">[</span><span class="ident" id="8326614">i</span><span class="op" id="8326615">]</span>&nbsp;<span class="op" id="8326617">=</span>&nbsp;<span class="num" id="8326619">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326630">b</span><span class="op" id="8326631">.</span><span class="ident" id="8326632">ResetTimer</span><span class="op" id="8326642">(</span><span class="op" id="8326643">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326646">for</span>&nbsp;<span class="ident" id="8326650">i</span>&nbsp;<span class="op" id="8326652">:=</span>&nbsp;<span class="num" id="8326655">0</span><span class="op" id="8326656">;</span>&nbsp;<span class="ident" id="8326658">i</span>&nbsp;<span class="op" id="8326660">&lt;</span>&nbsp;<span class="ident" id="8326662">b</span><span class="op" id="8326663">.</span><span class="ident" id="8326664">N</span><span class="op" id="8326665">;</span>&nbsp;<span class="ident" id="8326667">i</span><span class="op" id="8326668">++</span>&nbsp;<span class="op" id="8326671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326675">buf</span><span class="op" id="8326678">.</span><span class="ident" id="8326679">Reset</span><span class="op" id="8326684">(</span><span class="op" id="8326685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326689">err</span>&nbsp;<span class="op" id="8326693">:=</span>&nbsp;<span class="ident" id="8326696">enc</span><span class="op" id="8326699">.</span><span class="ident" id="8326700">Encode</span><span class="op" id="8326706">(</span><span class="ident" id="8326707">a</span><span class="op" id="8326708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326712">if</span>&nbsp;<span class="ident" id="8326715">err</span>&nbsp;<span class="op" id="8326719">!=</span>&nbsp;<span class="builtintype" id="8326722">nil</span>&nbsp;<span class="op" id="8326726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326731">b</span><span class="op" id="8326732">.</span><span class="ident" id="8326733">Fatal</span><span class="op" id="8326738">(</span><span class="ident" id="8326739">err</span><span class="op" id="8326742">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326749">}</span><br>
<span class="lineno"></span><span class="op" id="8326751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8326754">func</span>&nbsp;<span class="ident" id="8326759">BenchmarkEncodeInt32Slice</span><span class="op" id="8326784">(</span><span class="ident" id="8326785">b</span>&nbsp;<span class="op" id="8326787">*</span><span class="ident" id="8326788">testing</span><span class="op" id="8326795">.</span><span class="ident" id="8326796">B</span><span class="op" id="8326797">)</span>&nbsp;<span class="op" id="8326799">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326802">var</span>&nbsp;<span class="ident" id="8326806">buf</span>&nbsp;<span class="ident" id="8326810">bytes</span><span class="op" id="8326815">.</span><span class="ident" id="8326816">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326824">enc</span>&nbsp;<span class="op" id="8326828">:=</span>&nbsp;<span class="ident" id="8326831">NewEncoder</span><span class="op" id="8326841">(</span><span class="op" id="8326842">&amp;</span><span class="ident" id="8326843">buf</span><span class="op" id="8326846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326849">a</span>&nbsp;<span class="op" id="8326851">:=</span>&nbsp;<span class="builtinfunc" id="8326854">make</span><span class="op" id="8326858">(</span><span class="op" id="8326859">[</span><span class="op" id="8326860">]</span><span class="builtintype" id="8326861">int32</span><span class="op" id="8326866">,</span>&nbsp;<span class="num" id="8326868">1000</span><span class="op" id="8326872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326875">for</span>&nbsp;<span class="ident" id="8326879">i</span>&nbsp;<span class="op" id="8326881">:=</span>&nbsp;<span class="keyword" id="8326884">range</span>&nbsp;<span class="ident" id="8326890">a</span>&nbsp;<span class="op" id="8326892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326896">a</span><span class="op" id="8326897">[</span><span class="ident" id="8326898">i</span><span class="op" id="8326899">]</span>&nbsp;<span class="op" id="8326901">=</span>&nbsp;<span class="num" id="8326903">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8326909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326912">b</span><span class="op" id="8326913">.</span><span class="ident" id="8326914">ResetTimer</span><span class="op" id="8326924">(</span><span class="op" id="8326925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326928">for</span>&nbsp;<span class="ident" id="8326932">i</span>&nbsp;<span class="op" id="8326934">:=</span>&nbsp;<span class="num" id="8326937">0</span><span class="op" id="8326938">;</span>&nbsp;<span class="ident" id="8326940">i</span>&nbsp;<span class="op" id="8326942">&lt;</span>&nbsp;<span class="ident" id="8326944">b</span><span class="op" id="8326945">.</span><span class="ident" id="8326946">N</span><span class="op" id="8326947">;</span>&nbsp;<span class="ident" id="8326949">i</span><span class="op" id="8326950">++</span>&nbsp;<span class="op" id="8326953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326957">buf</span><span class="op" id="8326960">.</span><span class="ident" id="8326961">Reset</span><span class="op" id="8326966">(</span><span class="op" id="8326967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8326971">err</span>&nbsp;<span class="op" id="8326975">:=</span>&nbsp;<span class="ident" id="8326978">enc</span><span class="op" id="8326981">.</span><span class="ident" id="8326982">Encode</span><span class="op" id="8326988">(</span><span class="ident" id="8326989">a</span><span class="op" id="8326990">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8326994">if</span>&nbsp;<span class="ident" id="8326997">err</span>&nbsp;<span class="op" id="8327001">!=</span>&nbsp;<span class="builtintype" id="8327004">nil</span>&nbsp;<span class="op" id="8327008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327013">b</span><span class="op" id="8327014">.</span><span class="ident" id="8327015">Fatal</span><span class="op" id="8327020">(</span><span class="ident" id="8327021">err</span><span class="op" id="8327024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327031">}</span><br>
<span class="lineno"></span><span class="op" id="8327033">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8327036">func</span>&nbsp;<span class="ident" id="8327041">BenchmarkEncodeStringSlice</span><span class="op" id="8327067">(</span><span class="ident" id="8327068">b</span>&nbsp;<span class="op" id="8327070">*</span><span class="ident" id="8327071">testing</span><span class="op" id="8327078">.</span><span class="ident" id="8327079">B</span><span class="op" id="8327080">)</span>&nbsp;<span class="op" id="8327082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327085">var</span>&nbsp;<span class="ident" id="8327089">buf</span>&nbsp;<span class="ident" id="8327093">bytes</span><span class="op" id="8327098">.</span><span class="ident" id="8327099">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327107">enc</span>&nbsp;<span class="op" id="8327111">:=</span>&nbsp;<span class="ident" id="8327114">NewEncoder</span><span class="op" id="8327124">(</span><span class="op" id="8327125">&amp;</span><span class="ident" id="8327126">buf</span><span class="op" id="8327129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327132">a</span>&nbsp;<span class="op" id="8327134">:=</span>&nbsp;<span class="builtinfunc" id="8327137">make</span><span class="op" id="8327141">(</span><span class="op" id="8327142">[</span><span class="op" id="8327143">]</span><span class="builtintype" id="8327144">string</span><span class="op" id="8327150">,</span>&nbsp;<span class="num" id="8327152">1000</span><span class="op" id="8327156">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327159">for</span>&nbsp;<span class="ident" id="8327163">i</span>&nbsp;<span class="op" id="8327165">:=</span>&nbsp;<span class="keyword" id="8327168">range</span>&nbsp;<span class="ident" id="8327174">a</span>&nbsp;<span class="op" id="8327176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327180">a</span><span class="op" id="8327181">[</span><span class="ident" id="8327182">i</span><span class="op" id="8327183">]</span>&nbsp;<span class="op" id="8327185">=</span>&nbsp;<span class="string" id="8327187">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327209">b</span><span class="op" id="8327210">.</span><span class="ident" id="8327211">ResetTimer</span><span class="op" id="8327221">(</span><span class="op" id="8327222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327225">for</span>&nbsp;<span class="ident" id="8327229">i</span>&nbsp;<span class="op" id="8327231">:=</span>&nbsp;<span class="num" id="8327234">0</span><span class="op" id="8327235">;</span>&nbsp;<span class="ident" id="8327237">i</span>&nbsp;<span class="op" id="8327239">&lt;</span>&nbsp;<span class="ident" id="8327241">b</span><span class="op" id="8327242">.</span><span class="ident" id="8327243">N</span><span class="op" id="8327244">;</span>&nbsp;<span class="ident" id="8327246">i</span><span class="op" id="8327247">++</span>&nbsp;<span class="op" id="8327250">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327254">buf</span><span class="op" id="8327257">.</span><span class="ident" id="8327258">Reset</span><span class="op" id="8327263">(</span><span class="op" id="8327264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327268">err</span>&nbsp;<span class="op" id="8327272">:=</span>&nbsp;<span class="ident" id="8327275">enc</span><span class="op" id="8327278">.</span><span class="ident" id="8327279">Encode</span><span class="op" id="8327285">(</span><span class="ident" id="8327286">a</span><span class="op" id="8327287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327291">if</span>&nbsp;<span class="ident" id="8327294">err</span>&nbsp;<span class="op" id="8327298">!=</span>&nbsp;<span class="builtintype" id="8327301">nil</span>&nbsp;<span class="op" id="8327305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327310">b</span><span class="op" id="8327311">.</span><span class="ident" id="8327312">Fatal</span><span class="op" id="8327317">(</span><span class="ident" id="8327318">err</span><span class="op" id="8327321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327325">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327328">}</span><br>
<span class="lineno"></span><span class="op" id="8327330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8327333">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="8327379">type</span>&nbsp;<span class="ident" id="8327384">benchmarkBuf</span>&nbsp;<span class="keyword" id="8327397">struct</span>&nbsp;<span class="op" id="8327404">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327407">offset</span>&nbsp;<span class="builtintype" id="8327414">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327419">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8327426">[</span><span class="op" id="8327427">]</span><span class="builtintype" id="8327428">byte</span><br>
<span class="lineno"></span><span class="op" id="8327433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8327436">func</span>&nbsp;<span class="op" id="8327441">(</span><span class="ident" id="8327442">b</span>&nbsp;<span class="op" id="8327444">*</span><span class="ident" id="8327445">benchmarkBuf</span><span class="op" id="8327457">)</span>&nbsp;<span class="ident" id="8327459">Read</span><span class="op" id="8327463">(</span><span class="ident" id="8327464">p</span>&nbsp;<span class="op" id="8327466">[</span><span class="op" id="8327467">]</span><span class="builtintype" id="8327468">byte</span><span class="op" id="8327472">)</span>&nbsp;<span class="op" id="8327474">(</span><span class="ident" id="8327475">n</span>&nbsp;<span class="builtintype" id="8327477">int</span><span class="op" id="8327480">,</span>&nbsp;<span class="ident" id="8327482">err</span>&nbsp;<span class="builtintype" id="8327486">error</span><span class="op" id="8327491">)</span>&nbsp;<span class="op" id="8327493">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327496">n</span>&nbsp;<span class="op" id="8327498">=</span>&nbsp;<span class="builtinfunc" id="8327500">copy</span><span class="op" id="8327504">(</span><span class="ident" id="8327505">p</span><span class="op" id="8327506">,</span>&nbsp;<span class="ident" id="8327508">b</span><span class="op" id="8327509">.</span><span class="ident" id="8327510">data</span><span class="op" id="8327514">[</span><span class="ident" id="8327515">b</span><span class="op" id="8327516">.</span><span class="ident" id="8327517">offset</span><span class="op" id="8327523">:</span><span class="op" id="8327524">]</span><span class="op" id="8327525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327528">if</span>&nbsp;<span class="ident" id="8327531">n</span>&nbsp;<span class="op" id="8327533">==</span>&nbsp;<span class="num" id="8327536">0</span>&nbsp;<span class="op" id="8327538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327542">return</span>&nbsp;<span class="num" id="8327549">0</span><span class="op" id="8327550">,</span>&nbsp;<span class="ident" id="8327552">io</span><span class="op" id="8327554">.</span><span class="ident" id="8327555">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327563">b</span><span class="op" id="8327564">.</span><span class="ident" id="8327565">offset</span>&nbsp;<span class="op" id="8327572">+=</span>&nbsp;<span class="ident" id="8327575">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327578">return</span><br>
<span class="lineno"></span><span class="op" id="8327585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8327588">func</span>&nbsp;<span class="op" id="8327593">(</span><span class="ident" id="8327594">b</span>&nbsp;<span class="op" id="8327596">*</span><span class="ident" id="8327597">benchmarkBuf</span><span class="op" id="8327609">)</span>&nbsp;<span class="ident" id="8327611">ReadByte</span><span class="op" id="8327619">(</span><span class="op" id="8327620">)</span>&nbsp;<span class="op" id="8327622">(</span><span class="ident" id="8327623">c</span>&nbsp;<span class="builtintype" id="8327625">byte</span><span class="op" id="8327629">,</span>&nbsp;<span class="ident" id="8327631">err</span>&nbsp;<span class="builtintype" id="8327635">error</span><span class="op" id="8327640">)</span>&nbsp;<span class="op" id="8327642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327645">if</span>&nbsp;<span class="ident" id="8327648">b</span><span class="op" id="8327649">.</span><span class="ident" id="8327650">offset</span>&nbsp;<span class="op" id="8327657">&gt;=</span>&nbsp;<span class="builtinfunc" id="8327660">len</span><span class="op" id="8327663">(</span><span class="ident" id="8327664">b</span><span class="op" id="8327665">.</span><span class="ident" id="8327666">data</span><span class="op" id="8327670">)</span>&nbsp;<span class="op" id="8327672">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327676">return</span>&nbsp;<span class="num" id="8327683">0</span><span class="op" id="8327684">,</span>&nbsp;<span class="ident" id="8327686">io</span><span class="op" id="8327688">.</span><span class="ident" id="8327689">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327697">c</span>&nbsp;<span class="op" id="8327699">=</span>&nbsp;<span class="ident" id="8327701">b</span><span class="op" id="8327702">.</span><span class="ident" id="8327703">data</span><span class="op" id="8327707">[</span><span class="ident" id="8327708">b</span><span class="op" id="8327709">.</span><span class="ident" id="8327710">offset</span><span class="op" id="8327716">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327719">b</span><span class="op" id="8327720">.</span><span class="ident" id="8327721">offset</span><span class="op" id="8327727">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327731">return</span><br>
<span class="lineno">225</span><span class="op" id="8327738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8327741">func</span>&nbsp;<span class="op" id="8327746">(</span><span class="ident" id="8327747">b</span>&nbsp;<span class="op" id="8327749">*</span><span class="ident" id="8327750">benchmarkBuf</span><span class="op" id="8327762">)</span>&nbsp;<span class="ident" id="8327764">reset</span><span class="op" id="8327769">(</span><span class="op" id="8327770">)</span>&nbsp;<span class="op" id="8327772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327775">b</span><span class="op" id="8327776">.</span><span class="ident" id="8327777">offset</span>&nbsp;<span class="op" id="8327784">=</span>&nbsp;<span class="num" id="8327786">0</span><br>
<span class="lineno"></span><span class="op" id="8327788">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="8327791">func</span>&nbsp;<span class="ident" id="8327796">BenchmarkDecodeComplex128Slice</span><span class="op" id="8327826">(</span><span class="ident" id="8327827">b</span>&nbsp;<span class="op" id="8327829">*</span><span class="ident" id="8327830">testing</span><span class="op" id="8327837">.</span><span class="ident" id="8327838">B</span><span class="op" id="8327839">)</span>&nbsp;<span class="op" id="8327841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327844">var</span>&nbsp;<span class="ident" id="8327848">buf</span>&nbsp;<span class="ident" id="8327852">bytes</span><span class="op" id="8327857">.</span><span class="ident" id="8327858">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327866">enc</span>&nbsp;<span class="op" id="8327870">:=</span>&nbsp;<span class="ident" id="8327873">NewEncoder</span><span class="op" id="8327883">(</span><span class="op" id="8327884">&amp;</span><span class="ident" id="8327885">buf</span><span class="op" id="8327888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327891">a</span>&nbsp;<span class="op" id="8327893">:=</span>&nbsp;<span class="builtinfunc" id="8327896">make</span><span class="op" id="8327900">(</span><span class="op" id="8327901">[</span><span class="op" id="8327902">]</span><span class="builtintype" id="8327903">complex128</span><span class="op" id="8327913">,</span>&nbsp;<span class="num" id="8327915">1000</span><span class="op" id="8327919">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327922">for</span>&nbsp;<span class="ident" id="8327926">i</span>&nbsp;<span class="op" id="8327928">:=</span>&nbsp;<span class="keyword" id="8327931">range</span>&nbsp;<span class="ident" id="8327937">a</span>&nbsp;<span class="op" id="8327939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327943">a</span><span class="op" id="8327944">[</span><span class="ident" id="8327945">i</span><span class="op" id="8327946">]</span>&nbsp;<span class="op" id="8327948">=</span>&nbsp;<span class="num" id="8327950">1.2</span>&nbsp;<span class="op" id="8327954">+</span>&nbsp;<span class="num" id="8327956">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8327962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8327965">err</span>&nbsp;<span class="op" id="8327969">:=</span>&nbsp;<span class="ident" id="8327972">enc</span><span class="op" id="8327975">.</span><span class="ident" id="8327976">Encode</span><span class="op" id="8327982">(</span><span class="ident" id="8327983">a</span><span class="op" id="8327984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8327987">if</span>&nbsp;<span class="ident" id="8327990">err</span>&nbsp;<span class="op" id="8327994">!=</span>&nbsp;<span class="builtintype" id="8327997">nil</span>&nbsp;<span class="op" id="8328001">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328005">b</span><span class="op" id="8328006">.</span><span class="ident" id="8328007">Fatal</span><span class="op" id="8328012">(</span><span class="ident" id="8328013">err</span><span class="op" id="8328016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328022">x</span>&nbsp;<span class="op" id="8328024">:=</span>&nbsp;<span class="builtinfunc" id="8328027">make</span><span class="op" id="8328031">(</span><span class="op" id="8328032">[</span><span class="op" id="8328033">]</span><span class="builtintype" id="8328034">complex128</span><span class="op" id="8328044">,</span>&nbsp;<span class="num" id="8328046">1000</span><span class="op" id="8328050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328053">bbuf</span>&nbsp;<span class="op" id="8328058">:=</span>&nbsp;<span class="ident" id="8328061">benchmarkBuf</span><span class="op" id="8328073">{</span><span class="ident" id="8328074">data</span><span class="op" id="8328078">:</span>&nbsp;<span class="ident" id="8328080">buf</span><span class="op" id="8328083">.</span><span class="ident" id="8328084">Bytes</span><span class="op" id="8328089">(</span><span class="op" id="8328090">)</span><span class="op" id="8328091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328094">b</span><span class="op" id="8328095">.</span><span class="ident" id="8328096">ResetTimer</span><span class="op" id="8328106">(</span><span class="op" id="8328107">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328110">for</span>&nbsp;<span class="ident" id="8328114">i</span>&nbsp;<span class="op" id="8328116">:=</span>&nbsp;<span class="num" id="8328119">0</span><span class="op" id="8328120">;</span>&nbsp;<span class="ident" id="8328122">i</span>&nbsp;<span class="op" id="8328124">&lt;</span>&nbsp;<span class="ident" id="8328126">b</span><span class="op" id="8328127">.</span><span class="ident" id="8328128">N</span><span class="op" id="8328129">;</span>&nbsp;<span class="ident" id="8328131">i</span><span class="op" id="8328132">++</span>&nbsp;<span class="op" id="8328135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328139">bbuf</span><span class="op" id="8328143">.</span><span class="ident" id="8328144">reset</span><span class="op" id="8328149">(</span><span class="op" id="8328150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328154">dec</span>&nbsp;<span class="op" id="8328158">:=</span>&nbsp;<span class="ident" id="8328161">NewDecoder</span><span class="op" id="8328171">(</span><span class="op" id="8328172">&amp;</span><span class="ident" id="8328173">bbuf</span><span class="op" id="8328177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328181">err</span>&nbsp;<span class="op" id="8328185">:=</span>&nbsp;<span class="ident" id="8328188">dec</span><span class="op" id="8328191">.</span><span class="ident" id="8328192">Decode</span><span class="op" id="8328198">(</span><span class="op" id="8328199">&amp;</span><span class="ident" id="8328200">x</span><span class="op" id="8328201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328205">if</span>&nbsp;<span class="ident" id="8328208">err</span>&nbsp;<span class="op" id="8328212">!=</span>&nbsp;<span class="builtintype" id="8328215">nil</span>&nbsp;<span class="op" id="8328219">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328224">b</span><span class="op" id="8328225">.</span><span class="ident" id="8328226">Fatal</span><span class="op" id="8328231">(</span><span class="ident" id="8328232">i</span><span class="op" id="8328233">,</span>&nbsp;<span class="ident" id="8328235">err</span><span class="op" id="8328238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328245">}</span><br>
<span class="lineno"></span><span class="op" id="8328247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="8328250">func</span>&nbsp;<span class="ident" id="8328255">BenchmarkDecodeFloat64Slice</span><span class="op" id="8328282">(</span><span class="ident" id="8328283">b</span>&nbsp;<span class="op" id="8328285">*</span><span class="ident" id="8328286">testing</span><span class="op" id="8328293">.</span><span class="ident" id="8328294">B</span><span class="op" id="8328295">)</span>&nbsp;<span class="op" id="8328297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328300">var</span>&nbsp;<span class="ident" id="8328304">buf</span>&nbsp;<span class="ident" id="8328308">bytes</span><span class="op" id="8328313">.</span><span class="ident" id="8328314">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328322">enc</span>&nbsp;<span class="op" id="8328326">:=</span>&nbsp;<span class="ident" id="8328329">NewEncoder</span><span class="op" id="8328339">(</span><span class="op" id="8328340">&amp;</span><span class="ident" id="8328341">buf</span><span class="op" id="8328344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328347">a</span>&nbsp;<span class="op" id="8328349">:=</span>&nbsp;<span class="builtinfunc" id="8328352">make</span><span class="op" id="8328356">(</span><span class="op" id="8328357">[</span><span class="op" id="8328358">]</span><span class="builtintype" id="8328359">float64</span><span class="op" id="8328366">,</span>&nbsp;<span class="num" id="8328368">1000</span><span class="op" id="8328372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328375">for</span>&nbsp;<span class="ident" id="8328379">i</span>&nbsp;<span class="op" id="8328381">:=</span>&nbsp;<span class="keyword" id="8328384">range</span>&nbsp;<span class="ident" id="8328390">a</span>&nbsp;<span class="op" id="8328392">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328396">a</span><span class="op" id="8328397">[</span><span class="ident" id="8328398">i</span><span class="op" id="8328399">]</span>&nbsp;<span class="op" id="8328401">=</span>&nbsp;<span class="num" id="8328403">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328414">err</span>&nbsp;<span class="op" id="8328418">:=</span>&nbsp;<span class="ident" id="8328421">enc</span><span class="op" id="8328424">.</span><span class="ident" id="8328425">Encode</span><span class="op" id="8328431">(</span><span class="ident" id="8328432">a</span><span class="op" id="8328433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328436">if</span>&nbsp;<span class="ident" id="8328439">err</span>&nbsp;<span class="op" id="8328443">!=</span>&nbsp;<span class="builtintype" id="8328446">nil</span>&nbsp;<span class="op" id="8328450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328454">b</span><span class="op" id="8328455">.</span><span class="ident" id="8328456">Fatal</span><span class="op" id="8328461">(</span><span class="ident" id="8328462">err</span><span class="op" id="8328465">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328471">x</span>&nbsp;<span class="op" id="8328473">:=</span>&nbsp;<span class="builtinfunc" id="8328476">make</span><span class="op" id="8328480">(</span><span class="op" id="8328481">[</span><span class="op" id="8328482">]</span><span class="builtintype" id="8328483">float64</span><span class="op" id="8328490">,</span>&nbsp;<span class="num" id="8328492">1000</span><span class="op" id="8328496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328499">bbuf</span>&nbsp;<span class="op" id="8328504">:=</span>&nbsp;<span class="ident" id="8328507">benchmarkBuf</span><span class="op" id="8328519">{</span><span class="ident" id="8328520">data</span><span class="op" id="8328524">:</span>&nbsp;<span class="ident" id="8328526">buf</span><span class="op" id="8328529">.</span><span class="ident" id="8328530">Bytes</span><span class="op" id="8328535">(</span><span class="op" id="8328536">)</span><span class="op" id="8328537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328540">b</span><span class="op" id="8328541">.</span><span class="ident" id="8328542">ResetTimer</span><span class="op" id="8328552">(</span><span class="op" id="8328553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328556">for</span>&nbsp;<span class="ident" id="8328560">i</span>&nbsp;<span class="op" id="8328562">:=</span>&nbsp;<span class="num" id="8328565">0</span><span class="op" id="8328566">;</span>&nbsp;<span class="ident" id="8328568">i</span>&nbsp;<span class="op" id="8328570">&lt;</span>&nbsp;<span class="ident" id="8328572">b</span><span class="op" id="8328573">.</span><span class="ident" id="8328574">N</span><span class="op" id="8328575">;</span>&nbsp;<span class="ident" id="8328577">i</span><span class="op" id="8328578">++</span>&nbsp;<span class="op" id="8328581">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328585">bbuf</span><span class="op" id="8328589">.</span><span class="ident" id="8328590">reset</span><span class="op" id="8328595">(</span><span class="op" id="8328596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328600">dec</span>&nbsp;<span class="op" id="8328604">:=</span>&nbsp;<span class="ident" id="8328607">NewDecoder</span><span class="op" id="8328617">(</span><span class="op" id="8328618">&amp;</span><span class="ident" id="8328619">bbuf</span><span class="op" id="8328623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328627">err</span>&nbsp;<span class="op" id="8328631">:=</span>&nbsp;<span class="ident" id="8328634">dec</span><span class="op" id="8328637">.</span><span class="ident" id="8328638">Decode</span><span class="op" id="8328644">(</span><span class="op" id="8328645">&amp;</span><span class="ident" id="8328646">x</span><span class="op" id="8328647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328651">if</span>&nbsp;<span class="ident" id="8328654">err</span>&nbsp;<span class="op" id="8328658">!=</span>&nbsp;<span class="builtintype" id="8328661">nil</span>&nbsp;<span class="op" id="8328665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328670">b</span><span class="op" id="8328671">.</span><span class="ident" id="8328672">Fatal</span><span class="op" id="8328677">(</span><span class="ident" id="8328678">i</span><span class="op" id="8328679">,</span>&nbsp;<span class="ident" id="8328681">err</span><span class="op" id="8328684">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328691">}</span><br>
<span class="lineno"></span><span class="op" id="8328693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8328696">func</span>&nbsp;<span class="ident" id="8328701">BenchmarkDecodeInt32Slice</span><span class="op" id="8328726">(</span><span class="ident" id="8328727">b</span>&nbsp;<span class="op" id="8328729">*</span><span class="ident" id="8328730">testing</span><span class="op" id="8328737">.</span><span class="ident" id="8328738">B</span><span class="op" id="8328739">)</span>&nbsp;<span class="op" id="8328741">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328744">var</span>&nbsp;<span class="ident" id="8328748">buf</span>&nbsp;<span class="ident" id="8328752">bytes</span><span class="op" id="8328757">.</span><span class="ident" id="8328758">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328766">enc</span>&nbsp;<span class="op" id="8328770">:=</span>&nbsp;<span class="ident" id="8328773">NewEncoder</span><span class="op" id="8328783">(</span><span class="op" id="8328784">&amp;</span><span class="ident" id="8328785">buf</span><span class="op" id="8328788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328791">a</span>&nbsp;<span class="op" id="8328793">:=</span>&nbsp;<span class="builtinfunc" id="8328796">make</span><span class="op" id="8328800">(</span><span class="op" id="8328801">[</span><span class="op" id="8328802">]</span><span class="builtintype" id="8328803">int32</span><span class="op" id="8328808">,</span>&nbsp;<span class="num" id="8328810">1000</span><span class="op" id="8328814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328817">for</span>&nbsp;<span class="ident" id="8328821">i</span>&nbsp;<span class="op" id="8328823">:=</span>&nbsp;<span class="keyword" id="8328826">range</span>&nbsp;<span class="ident" id="8328832">a</span>&nbsp;<span class="op" id="8328834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328838">a</span><span class="op" id="8328839">[</span><span class="ident" id="8328840">i</span><span class="op" id="8328841">]</span>&nbsp;<span class="op" id="8328843">=</span>&nbsp;<span class="num" id="8328845">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328854">err</span>&nbsp;<span class="op" id="8328858">:=</span>&nbsp;<span class="ident" id="8328861">enc</span><span class="op" id="8328864">.</span><span class="ident" id="8328865">Encode</span><span class="op" id="8328871">(</span><span class="ident" id="8328872">a</span><span class="op" id="8328873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328876">if</span>&nbsp;<span class="ident" id="8328879">err</span>&nbsp;<span class="op" id="8328883">!=</span>&nbsp;<span class="builtintype" id="8328886">nil</span>&nbsp;<span class="op" id="8328890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328894">b</span><span class="op" id="8328895">.</span><span class="ident" id="8328896">Fatal</span><span class="op" id="8328901">(</span><span class="ident" id="8328902">err</span><span class="op" id="8328905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8328908">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328911">x</span>&nbsp;<span class="op" id="8328913">:=</span>&nbsp;<span class="builtinfunc" id="8328916">make</span><span class="op" id="8328920">(</span><span class="op" id="8328921">[</span><span class="op" id="8328922">]</span><span class="builtintype" id="8328923">int32</span><span class="op" id="8328928">,</span>&nbsp;<span class="num" id="8328930">1000</span><span class="op" id="8328934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328937">bbuf</span>&nbsp;<span class="op" id="8328942">:=</span>&nbsp;<span class="ident" id="8328945">benchmarkBuf</span><span class="op" id="8328957">{</span><span class="ident" id="8328958">data</span><span class="op" id="8328962">:</span>&nbsp;<span class="ident" id="8328964">buf</span><span class="op" id="8328967">.</span><span class="ident" id="8328968">Bytes</span><span class="op" id="8328973">(</span><span class="op" id="8328974">)</span><span class="op" id="8328975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8328978">b</span><span class="op" id="8328979">.</span><span class="ident" id="8328980">ResetTimer</span><span class="op" id="8328990">(</span><span class="op" id="8328991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8328994">for</span>&nbsp;<span class="ident" id="8328998">i</span>&nbsp;<span class="op" id="8329000">:=</span>&nbsp;<span class="num" id="8329003">0</span><span class="op" id="8329004">;</span>&nbsp;<span class="ident" id="8329006">i</span>&nbsp;<span class="op" id="8329008">&lt;</span>&nbsp;<span class="ident" id="8329010">b</span><span class="op" id="8329011">.</span><span class="ident" id="8329012">N</span><span class="op" id="8329013">;</span>&nbsp;<span class="ident" id="8329015">i</span><span class="op" id="8329016">++</span>&nbsp;<span class="op" id="8329019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329023">bbuf</span><span class="op" id="8329027">.</span><span class="ident" id="8329028">reset</span><span class="op" id="8329033">(</span><span class="op" id="8329034">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329038">dec</span>&nbsp;<span class="op" id="8329042">:=</span>&nbsp;<span class="ident" id="8329045">NewDecoder</span><span class="op" id="8329055">(</span><span class="op" id="8329056">&amp;</span><span class="ident" id="8329057">bbuf</span><span class="op" id="8329061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329065">err</span>&nbsp;<span class="op" id="8329069">:=</span>&nbsp;<span class="ident" id="8329072">dec</span><span class="op" id="8329075">.</span><span class="ident" id="8329076">Decode</span><span class="op" id="8329082">(</span><span class="op" id="8329083">&amp;</span><span class="ident" id="8329084">x</span><span class="op" id="8329085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329089">if</span>&nbsp;<span class="ident" id="8329092">err</span>&nbsp;<span class="op" id="8329096">!=</span>&nbsp;<span class="builtintype" id="8329099">nil</span>&nbsp;<span class="op" id="8329103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329108">b</span><span class="op" id="8329109">.</span><span class="ident" id="8329110">Fatal</span><span class="op" id="8329115">(</span><span class="ident" id="8329116">i</span><span class="op" id="8329117">,</span>&nbsp;<span class="ident" id="8329119">err</span><span class="op" id="8329122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329126">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329129">}</span><br>
<span class="lineno"></span><span class="op" id="8329131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8329134">func</span>&nbsp;<span class="ident" id="8329139">BenchmarkDecodeStringSlice</span><span class="op" id="8329165">(</span><span class="ident" id="8329166">b</span>&nbsp;<span class="op" id="8329168">*</span><span class="ident" id="8329169">testing</span><span class="op" id="8329176">.</span><span class="ident" id="8329177">B</span><span class="op" id="8329178">)</span>&nbsp;<span class="op" id="8329180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329183">var</span>&nbsp;<span class="ident" id="8329187">buf</span>&nbsp;<span class="ident" id="8329191">bytes</span><span class="op" id="8329196">.</span><span class="ident" id="8329197">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329205">enc</span>&nbsp;<span class="op" id="8329209">:=</span>&nbsp;<span class="ident" id="8329212">NewEncoder</span><span class="op" id="8329222">(</span><span class="op" id="8329223">&amp;</span><span class="ident" id="8329224">buf</span><span class="op" id="8329227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329230">a</span>&nbsp;<span class="op" id="8329232">:=</span>&nbsp;<span class="builtinfunc" id="8329235">make</span><span class="op" id="8329239">(</span><span class="op" id="8329240">[</span><span class="op" id="8329241">]</span><span class="builtintype" id="8329242">string</span><span class="op" id="8329248">,</span>&nbsp;<span class="num" id="8329250">1000</span><span class="op" id="8329254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329257">for</span>&nbsp;<span class="ident" id="8329261">i</span>&nbsp;<span class="op" id="8329263">:=</span>&nbsp;<span class="keyword" id="8329266">range</span>&nbsp;<span class="ident" id="8329272">a</span>&nbsp;<span class="op" id="8329274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329278">a</span><span class="op" id="8329279">[</span><span class="ident" id="8329280">i</span><span class="op" id="8329281">]</span>&nbsp;<span class="op" id="8329283">=</span>&nbsp;<span class="string" id="8329285">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329304">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329307">err</span>&nbsp;<span class="op" id="8329311">:=</span>&nbsp;<span class="ident" id="8329314">enc</span><span class="op" id="8329317">.</span><span class="ident" id="8329318">Encode</span><span class="op" id="8329324">(</span><span class="ident" id="8329325">a</span><span class="op" id="8329326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329329">if</span>&nbsp;<span class="ident" id="8329332">err</span>&nbsp;<span class="op" id="8329336">!=</span>&nbsp;<span class="builtintype" id="8329339">nil</span>&nbsp;<span class="op" id="8329343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329347">b</span><span class="op" id="8329348">.</span><span class="ident" id="8329349">Fatal</span><span class="op" id="8329354">(</span><span class="ident" id="8329355">err</span><span class="op" id="8329358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329364">x</span>&nbsp;<span class="op" id="8329366">:=</span>&nbsp;<span class="builtinfunc" id="8329369">make</span><span class="op" id="8329373">(</span><span class="op" id="8329374">[</span><span class="op" id="8329375">]</span><span class="builtintype" id="8329376">string</span><span class="op" id="8329382">,</span>&nbsp;<span class="num" id="8329384">1000</span><span class="op" id="8329388">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329391">bbuf</span>&nbsp;<span class="op" id="8329396">:=</span>&nbsp;<span class="ident" id="8329399">benchmarkBuf</span><span class="op" id="8329411">{</span><span class="ident" id="8329412">data</span><span class="op" id="8329416">:</span>&nbsp;<span class="ident" id="8329418">buf</span><span class="op" id="8329421">.</span><span class="ident" id="8329422">Bytes</span><span class="op" id="8329427">(</span><span class="op" id="8329428">)</span><span class="op" id="8329429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329432">b</span><span class="op" id="8329433">.</span><span class="ident" id="8329434">ResetTimer</span><span class="op" id="8329444">(</span><span class="op" id="8329445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329448">for</span>&nbsp;<span class="ident" id="8329452">i</span>&nbsp;<span class="op" id="8329454">:=</span>&nbsp;<span class="num" id="8329457">0</span><span class="op" id="8329458">;</span>&nbsp;<span class="ident" id="8329460">i</span>&nbsp;<span class="op" id="8329462">&lt;</span>&nbsp;<span class="ident" id="8329464">b</span><span class="op" id="8329465">.</span><span class="ident" id="8329466">N</span><span class="op" id="8329467">;</span>&nbsp;<span class="ident" id="8329469">i</span><span class="op" id="8329470">++</span>&nbsp;<span class="op" id="8329473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329477">bbuf</span><span class="op" id="8329481">.</span><span class="ident" id="8329482">reset</span><span class="op" id="8329487">(</span><span class="op" id="8329488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329492">dec</span>&nbsp;<span class="op" id="8329496">:=</span>&nbsp;<span class="ident" id="8329499">NewDecoder</span><span class="op" id="8329509">(</span><span class="op" id="8329510">&amp;</span><span class="ident" id="8329511">bbuf</span><span class="op" id="8329515">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329519">err</span>&nbsp;<span class="op" id="8329523">:=</span>&nbsp;<span class="ident" id="8329526">dec</span><span class="op" id="8329529">.</span><span class="ident" id="8329530">Decode</span><span class="op" id="8329536">(</span><span class="op" id="8329537">&amp;</span><span class="ident" id="8329538">x</span><span class="op" id="8329539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8329543">if</span>&nbsp;<span class="ident" id="8329546">err</span>&nbsp;<span class="op" id="8329550">!=</span>&nbsp;<span class="builtintype" id="8329553">nil</span>&nbsp;<span class="op" id="8329557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8329562">b</span><span class="op" id="8329563">.</span><span class="ident" id="8329564">Fatal</span><span class="op" id="8329569">(</span><span class="ident" id="8329570">i</span><span class="op" id="8329571">,</span>&nbsp;<span class="ident" id="8329573">err</span><span class="op" id="8329576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8329583">}</span><br>
<span class="lineno">325</span><span class="op" id="8329585">}</span>
</div>
</body>
</html>
