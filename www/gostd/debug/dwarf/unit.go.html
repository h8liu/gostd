<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5603522">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5603578">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5603632">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5603683">package</span>&nbsp;<span class="ident" id="5603691">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5603698">import</span>&nbsp;<span class="string" id="5603705">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5603716">//&nbsp;DWARF&nbsp;debug&nbsp;info&nbsp;is&nbsp;split&nbsp;into&nbsp;a&nbsp;sequence&nbsp;of&nbsp;compilation&nbsp;units.</span><br>
<span class="lineno">10</span><span class="comment" id="5603783">//&nbsp;Each&nbsp;unit&nbsp;has&nbsp;its&nbsp;own&nbsp;abbreviation&nbsp;table&nbsp;and&nbsp;address&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5603846">type</span>&nbsp;<span class="ident" id="5603851">unit</span>&nbsp;<span class="keyword" id="5603856">struct</span>&nbsp;<span class="op" id="5603863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603866">base</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5603873">Offset</span>&nbsp;<span class="comment" id="5603880">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;header&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603932">off</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5603939">Offset</span>&nbsp;<span class="comment" id="5603946">//&nbsp;byte&nbsp;offset&nbsp;of&nbsp;data&nbsp;within&nbsp;the&nbsp;aggregate&nbsp;info</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603996">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5604003">[</span><span class="op" id="5604004">]</span><span class="builtintype" id="5604005">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604011">atable</span>&nbsp;<span class="ident" id="5604018">abbrevTable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604031">asize</span>&nbsp;&nbsp;<span class="builtintype" id="5604038">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604043">vers</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5604050">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604055">is64</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5604062">bool</span>&nbsp;<span class="comment" id="5604067">//&nbsp;True&nbsp;for&nbsp;64-bit&nbsp;DWARF&nbsp;format</span><br>
<span class="lineno">20</span><span class="op" id="5604099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5604102">//&nbsp;Implement&nbsp;the&nbsp;dataFormat&nbsp;interface.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5604142">func</span>&nbsp;<span class="op" id="5604147">(</span><span class="ident" id="5604148">u</span>&nbsp;<span class="op" id="5604150">*</span><span class="ident" id="5604151">unit</span><span class="op" id="5604155">)</span>&nbsp;<span class="ident" id="5604157">version</span><span class="op" id="5604164">(</span><span class="op" id="5604165">)</span>&nbsp;<span class="builtintype" id="5604167">int</span>&nbsp;<span class="op" id="5604171">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604174">return</span>&nbsp;<span class="ident" id="5604181">u</span><span class="op" id="5604182">.</span><span class="ident" id="5604183">vers</span><br>
<span class="lineno"></span><span class="op" id="5604188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5604191">func</span>&nbsp;<span class="op" id="5604196">(</span><span class="ident" id="5604197">u</span>&nbsp;<span class="op" id="5604199">*</span><span class="ident" id="5604200">unit</span><span class="op" id="5604204">)</span>&nbsp;<span class="ident" id="5604206">dwarf64</span><span class="op" id="5604213">(</span><span class="op" id="5604214">)</span>&nbsp;<span class="op" id="5604216">(</span><span class="builtintype" id="5604217">bool</span><span class="op" id="5604221">,</span>&nbsp;<span class="builtintype" id="5604223">bool</span><span class="op" id="5604227">)</span>&nbsp;<span class="op" id="5604229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604232">return</span>&nbsp;<span class="ident" id="5604239">u</span><span class="op" id="5604240">.</span><span class="ident" id="5604241">is64</span><span class="op" id="5604245">,</span>&nbsp;<span class="builtintype" id="5604247">true</span><br>
<span class="lineno">30</span><span class="op" id="5604252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5604255">func</span>&nbsp;<span class="op" id="5604260">(</span><span class="ident" id="5604261">u</span>&nbsp;<span class="op" id="5604263">*</span><span class="ident" id="5604264">unit</span><span class="op" id="5604268">)</span>&nbsp;<span class="ident" id="5604270">addrsize</span><span class="op" id="5604278">(</span><span class="op" id="5604279">)</span>&nbsp;<span class="builtintype" id="5604281">int</span>&nbsp;<span class="op" id="5604285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604288">return</span>&nbsp;<span class="ident" id="5604295">u</span><span class="op" id="5604296">.</span><span class="ident" id="5604297">asize</span><br>
<span class="lineno"></span><span class="op" id="5604303">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5604306">func</span>&nbsp;<span class="op" id="5604311">(</span><span class="ident" id="5604312">d</span>&nbsp;<span class="op" id="5604314">*</span><span class="ident" id="5604315">Data</span><span class="op" id="5604319">)</span>&nbsp;<span class="ident" id="5604321">parseUnits</span><span class="op" id="5604331">(</span><span class="op" id="5604332">)</span>&nbsp;<span class="op" id="5604334">(</span><span class="op" id="5604335">[</span><span class="op" id="5604336">]</span><span class="ident" id="5604337">unit</span><span class="op" id="5604341">,</span>&nbsp;<span class="builtintype" id="5604343">error</span><span class="op" id="5604348">)</span>&nbsp;<span class="op" id="5604350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604353">//&nbsp;Count&nbsp;units.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604370">nunit</span>&nbsp;<span class="op" id="5604376">:=</span>&nbsp;<span class="num" id="5604379">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604382">b</span>&nbsp;<span class="op" id="5604384">:=</span>&nbsp;<span class="ident" id="5604387">makeBuf</span><span class="op" id="5604394">(</span><span class="ident" id="5604395">d</span><span class="op" id="5604396">,</span>&nbsp;<span class="ident" id="5604398">unknownFormat</span><span class="op" id="5604411">{</span><span class="op" id="5604412">}</span><span class="op" id="5604413">,</span>&nbsp;<span class="string" id="5604415">&#34;info&#34;</span><span class="op" id="5604421">,</span>&nbsp;<span class="num" id="5604423">0</span><span class="op" id="5604424">,</span>&nbsp;<span class="ident" id="5604426">d</span><span class="op" id="5604427">.</span><span class="ident" id="5604428">info</span><span class="op" id="5604432">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604435">for</span>&nbsp;<span class="builtinfunc" id="5604439">len</span><span class="op" id="5604442">(</span><span class="ident" id="5604443">b</span><span class="op" id="5604444">.</span><span class="ident" id="5604445">data</span><span class="op" id="5604449">)</span>&nbsp;<span class="op" id="5604451">&gt;</span>&nbsp;<span class="num" id="5604453">0</span>&nbsp;<span class="op" id="5604455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5604459">len</span>&nbsp;<span class="op" id="5604463">:=</span>&nbsp;<span class="ident" id="5604466">b</span><span class="op" id="5604467">.</span><span class="builtintype" id="5604468">uint32</span><span class="op" id="5604474">(</span><span class="op" id="5604475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604479">if</span>&nbsp;<span class="builtinfunc" id="5604482">len</span>&nbsp;<span class="op" id="5604486">==</span>&nbsp;<span class="num" id="5604489">0xffffffff</span>&nbsp;<span class="op" id="5604500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604505">len64</span>&nbsp;<span class="op" id="5604511">:=</span>&nbsp;<span class="ident" id="5604514">b</span><span class="op" id="5604515">.</span><span class="ident" id="5604516">uint64</span><span class="op" id="5604522">(</span><span class="op" id="5604523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604528">if</span>&nbsp;<span class="ident" id="5604531">len64</span>&nbsp;<span class="op" id="5604537">!=</span>&nbsp;<span class="ident" id="5604540">uint64</span><span class="op" id="5604546">(</span><span class="builtintype" id="5604547">uint32</span><span class="op" id="5604553">(</span><span class="ident" id="5604554">len64</span><span class="op" id="5604559">)</span><span class="op" id="5604560">)</span>&nbsp;<span class="op" id="5604562">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604568">b</span><span class="op" id="5604569">.</span><span class="builtintype" id="5604570">error</span><span class="op" id="5604575">(</span><span class="string" id="5604576">&#34;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5604598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604604">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5604618">len</span>&nbsp;<span class="op" id="5604622">=</span>&nbsp;<span class="builtintype" id="5604624">uint32</span><span class="op" id="5604630">(</span><span class="ident" id="5604631">len64</span><span class="op" id="5604636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604640">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604644">b</span><span class="op" id="5604645">.</span><span class="ident" id="5604646">skip</span><span class="op" id="5604650">(</span><span class="builtintype" id="5604651">int</span><span class="op" id="5604654">(</span><span class="builtinfunc" id="5604655">len</span><span class="op" id="5604658">)</span><span class="op" id="5604659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604663">nunit</span><span class="op" id="5604668">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604675">if</span>&nbsp;<span class="ident" id="5604678">b</span><span class="op" id="5604679">.</span><span class="ident" id="5604680">err</span>&nbsp;<span class="op" id="5604684">!=</span>&nbsp;<span class="ident" id="5604687">nil</span>&nbsp;<span class="op" id="5604691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604695">return</span>&nbsp;<span class="ident" id="5604702">nil</span><span class="op" id="5604705">,</span>&nbsp;<span class="ident" id="5604707">b</span><span class="op" id="5604708">.</span><span class="ident" id="5604709">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604718">//&nbsp;Again,&nbsp;this&nbsp;time&nbsp;writing&nbsp;them&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604758">b</span>&nbsp;<span class="op" id="5604760">=</span>&nbsp;<span class="ident" id="5604762">makeBuf</span><span class="op" id="5604769">(</span><span class="ident" id="5604770">d</span><span class="op" id="5604771">,</span>&nbsp;<span class="ident" id="5604773">unknownFormat</span><span class="op" id="5604786">{</span><span class="op" id="5604787">}</span><span class="op" id="5604788">,</span>&nbsp;<span class="string" id="5604790">&#34;info&#34;</span><span class="op" id="5604796">,</span>&nbsp;<span class="num" id="5604798">0</span><span class="op" id="5604799">,</span>&nbsp;<span class="ident" id="5604801">d</span><span class="op" id="5604802">.</span><span class="ident" id="5604803">info</span><span class="op" id="5604807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604810">units</span>&nbsp;<span class="op" id="5604816">:=</span>&nbsp;<span class="builtinfunc" id="5604819">make</span><span class="op" id="5604823">(</span><span class="op" id="5604824">[</span><span class="op" id="5604825">]</span><span class="ident" id="5604826">unit</span><span class="op" id="5604830">,</span>&nbsp;<span class="ident" id="5604832">nunit</span><span class="op" id="5604837">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604840">for</span>&nbsp;<span class="ident" id="5604844">i</span>&nbsp;<span class="op" id="5604846">:=</span>&nbsp;<span class="keyword" id="5604849">range</span>&nbsp;<span class="ident" id="5604855">units</span>&nbsp;<span class="op" id="5604861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604865">u</span>&nbsp;<span class="op" id="5604867">:=</span>&nbsp;<span class="op" id="5604870">&amp;</span><span class="ident" id="5604871">units</span><span class="op" id="5604876">[</span><span class="ident" id="5604877">i</span><span class="op" id="5604878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604882">u</span><span class="op" id="5604883">.</span><span class="ident" id="5604884">base</span>&nbsp;<span class="op" id="5604889">=</span>&nbsp;<span class="ident" id="5604891">b</span><span class="op" id="5604892">.</span><span class="ident" id="5604893">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604899">n</span>&nbsp;<span class="op" id="5604901">:=</span>&nbsp;<span class="ident" id="5604904">b</span><span class="op" id="5604905">.</span><span class="builtintype" id="5604906">uint32</span><span class="op" id="5604912">(</span><span class="op" id="5604913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604917">if</span>&nbsp;<span class="ident" id="5604920">n</span>&nbsp;<span class="op" id="5604922">==</span>&nbsp;<span class="num" id="5604925">0xffffffff</span>&nbsp;<span class="op" id="5604936">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604941">u</span><span class="op" id="5604942">.</span><span class="ident" id="5604943">is64</span>&nbsp;<span class="op" id="5604948">=</span>&nbsp;<span class="builtintype" id="5604950">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604958">n</span>&nbsp;<span class="op" id="5604960">=</span>&nbsp;<span class="builtintype" id="5604962">uint32</span><span class="op" id="5604968">(</span><span class="ident" id="5604969">b</span><span class="op" id="5604970">.</span><span class="ident" id="5604971">uint64</span><span class="op" id="5604977">(</span><span class="op" id="5604978">)</span><span class="op" id="5604979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604987">vers</span>&nbsp;<span class="op" id="5604992">:=</span>&nbsp;<span class="ident" id="5604995">b</span><span class="op" id="5604996">.</span><span class="builtintype" id="5604997">uint16</span><span class="op" id="5605003">(</span><span class="op" id="5605004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605008">if</span>&nbsp;<span class="ident" id="5605011">vers</span>&nbsp;<span class="op" id="5605016">!=</span>&nbsp;<span class="num" id="5605019">2</span>&nbsp;<span class="op" id="5605021">&amp;&amp;</span>&nbsp;<span class="ident" id="5605024">vers</span>&nbsp;<span class="op" id="5605029">!=</span>&nbsp;<span class="num" id="5605032">3</span>&nbsp;<span class="op" id="5605034">&amp;&amp;</span>&nbsp;<span class="ident" id="5605037">vers</span>&nbsp;<span class="op" id="5605042">!=</span>&nbsp;<span class="num" id="5605045">4</span>&nbsp;<span class="op" id="5605047">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605052">b</span><span class="op" id="5605053">.</span><span class="builtintype" id="5605054">error</span><span class="op" id="5605059">(</span><span class="string" id="5605060">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5605089">+</span>&nbsp;<span class="ident" id="5605091">strconv</span><span class="op" id="5605098">.</span><span class="ident" id="5605099">Itoa</span><span class="op" id="5605103">(</span><span class="builtintype" id="5605104">int</span><span class="op" id="5605107">(</span><span class="ident" id="5605108">vers</span><span class="op" id="5605112">)</span><span class="op" id="5605113">)</span><span class="op" id="5605114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605119">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605131">u</span><span class="op" id="5605132">.</span><span class="ident" id="5605133">vers</span>&nbsp;<span class="op" id="5605138">=</span>&nbsp;<span class="builtintype" id="5605140">int</span><span class="op" id="5605143">(</span><span class="ident" id="5605144">vers</span><span class="op" id="5605148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605152">atable</span><span class="op" id="5605158">,</span>&nbsp;<span class="ident" id="5605160">err</span>&nbsp;<span class="op" id="5605164">:=</span>&nbsp;<span class="ident" id="5605167">d</span><span class="op" id="5605168">.</span><span class="ident" id="5605169">parseAbbrev</span><span class="op" id="5605180">(</span><span class="ident" id="5605181">b</span><span class="op" id="5605182">.</span><span class="builtintype" id="5605183">uint32</span><span class="op" id="5605189">(</span><span class="op" id="5605190">)</span><span class="op" id="5605191">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605195">if</span>&nbsp;<span class="ident" id="5605198">err</span>&nbsp;<span class="op" id="5605202">!=</span>&nbsp;<span class="ident" id="5605205">nil</span>&nbsp;<span class="op" id="5605209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605214">if</span>&nbsp;<span class="ident" id="5605217">b</span><span class="op" id="5605218">.</span><span class="ident" id="5605219">err</span>&nbsp;<span class="op" id="5605223">==</span>&nbsp;<span class="ident" id="5605226">nil</span>&nbsp;<span class="op" id="5605230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605236">b</span><span class="op" id="5605237">.</span><span class="ident" id="5605238">err</span>&nbsp;<span class="op" id="5605242">=</span>&nbsp;<span class="ident" id="5605244">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605256">break</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605268">u</span><span class="op" id="5605269">.</span><span class="ident" id="5605270">atable</span>&nbsp;<span class="op" id="5605277">=</span>&nbsp;<span class="ident" id="5605279">atable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605288">u</span><span class="op" id="5605289">.</span><span class="ident" id="5605290">asize</span>&nbsp;<span class="op" id="5605296">=</span>&nbsp;<span class="builtintype" id="5605298">int</span><span class="op" id="5605301">(</span><span class="ident" id="5605302">b</span><span class="op" id="5605303">.</span><span class="builtintype" id="5605304">uint8</span><span class="op" id="5605309">(</span><span class="op" id="5605310">)</span><span class="op" id="5605311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605315">u</span><span class="op" id="5605316">.</span><span class="ident" id="5605317">off</span>&nbsp;<span class="op" id="5605321">=</span>&nbsp;<span class="ident" id="5605323">b</span><span class="op" id="5605324">.</span><span class="ident" id="5605325">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605331">u</span><span class="op" id="5605332">.</span><span class="ident" id="5605333">data</span>&nbsp;<span class="op" id="5605338">=</span>&nbsp;<span class="ident" id="5605340">b</span><span class="op" id="5605341">.</span><span class="ident" id="5605342">bytes</span><span class="op" id="5605347">(</span><span class="builtintype" id="5605348">int</span><span class="op" id="5605351">(</span><span class="ident" id="5605352">n</span>&nbsp;<span class="op" id="5605354">-</span>&nbsp;<span class="op" id="5605356">(</span><span class="num" id="5605357">2</span>&nbsp;<span class="op" id="5605359">+</span>&nbsp;<span class="num" id="5605361">4</span>&nbsp;<span class="op" id="5605363">+</span>&nbsp;<span class="num" id="5605365">1</span><span class="op" id="5605366">)</span><span class="op" id="5605367">)</span><span class="op" id="5605368">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605374">if</span>&nbsp;<span class="ident" id="5605377">b</span><span class="op" id="5605378">.</span><span class="ident" id="5605379">err</span>&nbsp;<span class="op" id="5605383">!=</span>&nbsp;<span class="ident" id="5605386">nil</span>&nbsp;<span class="op" id="5605390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605394">return</span>&nbsp;<span class="ident" id="5605401">nil</span><span class="op" id="5605404">,</span>&nbsp;<span class="ident" id="5605406">b</span><span class="op" id="5605407">.</span><span class="ident" id="5605408">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605416">return</span>&nbsp;<span class="ident" id="5605423">units</span><span class="op" id="5605428">,</span>&nbsp;<span class="ident" id="5605430">nil</span><br>
<span class="lineno">90</span><span class="op" id="5605434">}</span>
</div>
</body>
</html>
