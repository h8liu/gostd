<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5204948">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5205003">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5205057">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5205108">package</span>&nbsp;<span class="ident" id="5205116">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5205127">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5205190">import</span>&nbsp;<span class="op" id="5205197">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5205200">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5205207">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5205218">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5205233">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5205236">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5205290">//</span><br>
<span class="lineno"></span><span class="comment" id="5205293">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5205372">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5205422">const</span>&nbsp;<span class="op" id="5205428">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205431">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205443">int32</span>&nbsp;<span class="op" id="5205449">=</span>&nbsp;<span class="num" id="5205451">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205455">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205467">int32</span>&nbsp;<span class="op" id="5205473">=</span>&nbsp;<span class="num" id="5205475">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205480">initialBias</span>&nbsp;<span class="builtintype" id="5205492">int32</span>&nbsp;<span class="op" id="5205498">=</span>&nbsp;<span class="num" id="5205500">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205504">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205516">int32</span>&nbsp;<span class="op" id="5205522">=</span>&nbsp;<span class="num" id="5205524">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205529">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205541">int32</span>&nbsp;<span class="op" id="5205547">=</span>&nbsp;<span class="num" id="5205549">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205553">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205565">int32</span>&nbsp;<span class="op" id="5205571">=</span>&nbsp;<span class="num" id="5205573">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205577">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5205589">int32</span>&nbsp;<span class="op" id="5205595">=</span>&nbsp;<span class="num" id="5205597">1</span><br>
<span class="lineno"></span><span class="op" id="5205599">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5205602">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5205680">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5205695">//</span><br>
<span class="lineno"></span><span class="comment" id="5205698">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5205770">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5205850">func</span>&nbsp;<span class="ident" id="5205855">encode</span><span class="op" id="5205861">(</span><span class="ident" id="5205862">prefix</span><span class="op" id="5205868">,</span>&nbsp;<span class="ident" id="5205870">s</span>&nbsp;<span class="builtintype" id="5205872">string</span><span class="op" id="5205878">)</span>&nbsp;<span class="op" id="5205880">(</span><span class="builtintype" id="5205881">string</span><span class="op" id="5205887">,</span>&nbsp;<span class="builtintype" id="5205889">error</span><span class="op" id="5205894">)</span>&nbsp;<span class="op" id="5205896">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205899">output</span>&nbsp;<span class="op" id="5205906">:=</span>&nbsp;<span class="builtinfunc" id="5205909">make</span><span class="op" id="5205913">(</span><span class="op" id="5205914">[</span><span class="op" id="5205915">]</span><span class="builtintype" id="5205916">byte</span><span class="op" id="5205920">,</span>&nbsp;<span class="builtinfunc" id="5205922">len</span><span class="op" id="5205925">(</span><span class="ident" id="5205926">prefix</span><span class="op" id="5205932">)</span><span class="op" id="5205933">,</span>&nbsp;<span class="builtinfunc" id="5205935">len</span><span class="op" id="5205938">(</span><span class="ident" id="5205939">prefix</span><span class="op" id="5205945">)</span><span class="op" id="5205946">+</span><span class="num" id="5205947">1</span><span class="op" id="5205948">+</span><span class="num" id="5205949">2</span><span class="op" id="5205950">*</span><span class="builtinfunc" id="5205951">len</span><span class="op" id="5205954">(</span><span class="ident" id="5205955">s</span><span class="op" id="5205956">)</span><span class="op" id="5205957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5205960">copy</span><span class="op" id="5205964">(</span><span class="ident" id="5205965">output</span><span class="op" id="5205971">,</span>&nbsp;<span class="ident" id="5205973">prefix</span><span class="op" id="5205979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5205982">delta</span><span class="op" id="5205987">,</span>&nbsp;<span class="ident" id="5205989">n</span><span class="op" id="5205990">,</span>&nbsp;<span class="ident" id="5205992">bias</span>&nbsp;<span class="op" id="5205997">:=</span>&nbsp;<span class="builtintype" id="5206000">int32</span><span class="op" id="5206005">(</span><span class="num" id="5206006">0</span><span class="op" id="5206007">)</span><span class="op" id="5206008">,</span>&nbsp;<span class="ident" id="5206010">initialN</span><span class="op" id="5206018">,</span>&nbsp;<span class="ident" id="5206020">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206033">b</span><span class="op" id="5206034">,</span>&nbsp;<span class="ident" id="5206036">remaining</span>&nbsp;<span class="op" id="5206046">:=</span>&nbsp;<span class="builtintype" id="5206049">int32</span><span class="op" id="5206054">(</span><span class="num" id="5206055">0</span><span class="op" id="5206056">)</span><span class="op" id="5206057">,</span>&nbsp;<span class="builtintype" id="5206059">int32</span><span class="op" id="5206064">(</span><span class="num" id="5206065">0</span><span class="op" id="5206066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206069">for</span>&nbsp;<span class="ident" id="5206073">_</span><span class="op" id="5206074">,</span>&nbsp;<span class="ident" id="5206076">r</span>&nbsp;<span class="op" id="5206078">:=</span>&nbsp;<span class="keyword" id="5206081">range</span>&nbsp;<span class="ident" id="5206087">s</span>&nbsp;<span class="op" id="5206089">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206093">if</span>&nbsp;<span class="ident" id="5206096">r</span>&nbsp;<span class="op" id="5206098">&lt;</span>&nbsp;<span class="num" id="5206100">0x80</span>&nbsp;<span class="op" id="5206105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206110">b</span><span class="op" id="5206111">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206117">output</span>&nbsp;<span class="op" id="5206124">=</span>&nbsp;<span class="builtinfunc" id="5206126">append</span><span class="op" id="5206132">(</span><span class="ident" id="5206133">output</span><span class="op" id="5206139">,</span>&nbsp;<span class="builtintype" id="5206141">byte</span><span class="op" id="5206145">(</span><span class="ident" id="5206146">r</span><span class="op" id="5206147">)</span><span class="op" id="5206148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206152">}</span>&nbsp;<span class="keyword" id="5206154">else</span>&nbsp;<span class="op" id="5206159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206164">remaining</span><span class="op" id="5206173">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206184">h</span>&nbsp;<span class="op" id="5206186">:=</span>&nbsp;<span class="ident" id="5206189">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206192">if</span>&nbsp;<span class="ident" id="5206195">b</span>&nbsp;<span class="op" id="5206197">&gt;</span>&nbsp;<span class="num" id="5206199">0</span>&nbsp;<span class="op" id="5206201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206205">output</span>&nbsp;<span class="op" id="5206212">=</span>&nbsp;<span class="builtinfunc" id="5206214">append</span><span class="op" id="5206220">(</span><span class="ident" id="5206221">output</span><span class="op" id="5206227">,</span>&nbsp;<span class="string" id="5206229">&#39;-&#39;</span><span class="op" id="5206232">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206238">for</span>&nbsp;<span class="ident" id="5206242">remaining</span>&nbsp;<span class="op" id="5206252">!=</span>&nbsp;<span class="num" id="5206255">0</span>&nbsp;<span class="op" id="5206257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206261">m</span>&nbsp;<span class="op" id="5206263">:=</span>&nbsp;<span class="builtintype" id="5206266">int32</span><span class="op" id="5206271">(</span><span class="num" id="5206272">0x7fffffff</span><span class="op" id="5206282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206286">for</span>&nbsp;<span class="ident" id="5206290">_</span><span class="op" id="5206291">,</span>&nbsp;<span class="ident" id="5206293">r</span>&nbsp;<span class="op" id="5206295">:=</span>&nbsp;<span class="keyword" id="5206298">range</span>&nbsp;<span class="ident" id="5206304">s</span>&nbsp;<span class="op" id="5206306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206311">if</span>&nbsp;<span class="ident" id="5206314">m</span>&nbsp;<span class="op" id="5206316">&gt;</span>&nbsp;<span class="ident" id="5206318">r</span>&nbsp;<span class="op" id="5206320">&amp;&amp;</span>&nbsp;<span class="ident" id="5206323">r</span>&nbsp;<span class="op" id="5206325">&gt;=</span>&nbsp;<span class="ident" id="5206328">n</span>&nbsp;<span class="op" id="5206330">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206336">m</span>&nbsp;<span class="op" id="5206338">=</span>&nbsp;<span class="ident" id="5206340">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206353">delta</span>&nbsp;<span class="op" id="5206359">+=</span>&nbsp;<span class="op" id="5206362">(</span><span class="ident" id="5206363">m</span>&nbsp;<span class="op" id="5206365">-</span>&nbsp;<span class="ident" id="5206367">n</span><span class="op" id="5206368">)</span>&nbsp;<span class="op" id="5206370">*</span>&nbsp;<span class="op" id="5206372">(</span><span class="ident" id="5206373">h</span>&nbsp;<span class="op" id="5206375">+</span>&nbsp;<span class="num" id="5206377">1</span><span class="op" id="5206378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206382">if</span>&nbsp;<span class="ident" id="5206385">delta</span>&nbsp;<span class="op" id="5206391">&lt;</span>&nbsp;<span class="num" id="5206393">0</span>&nbsp;<span class="op" id="5206395">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206400">return</span>&nbsp;<span class="string" id="5206407">&#34;&#34;</span><span class="op" id="5206409">,</span>&nbsp;<span class="ident" id="5206411">fmt</span><span class="op" id="5206414">.</span><span class="ident" id="5206415">Errorf</span><span class="op" id="5206421">(</span><span class="string" id="5206422">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5206451">,</span>&nbsp;<span class="ident" id="5206453">s</span><span class="op" id="5206454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206462">n</span>&nbsp;<span class="op" id="5206464">=</span>&nbsp;<span class="ident" id="5206466">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206470">for</span>&nbsp;<span class="ident" id="5206474">_</span><span class="op" id="5206475">,</span>&nbsp;<span class="ident" id="5206477">r</span>&nbsp;<span class="op" id="5206479">:=</span>&nbsp;<span class="keyword" id="5206482">range</span>&nbsp;<span class="ident" id="5206488">s</span>&nbsp;<span class="op" id="5206490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206495">if</span>&nbsp;<span class="ident" id="5206498">r</span>&nbsp;<span class="op" id="5206500">&lt;</span>&nbsp;<span class="ident" id="5206502">n</span>&nbsp;<span class="op" id="5206504">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206510">delta</span><span class="op" id="5206515">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206522">if</span>&nbsp;<span class="ident" id="5206525">delta</span>&nbsp;<span class="op" id="5206531">&lt;</span>&nbsp;<span class="num" id="5206533">0</span>&nbsp;<span class="op" id="5206535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206542">return</span>&nbsp;<span class="string" id="5206549">&#34;&#34;</span><span class="op" id="5206551">,</span>&nbsp;<span class="ident" id="5206553">fmt</span><span class="op" id="5206556">.</span><span class="ident" id="5206557">Errorf</span><span class="op" id="5206563">(</span><span class="string" id="5206564">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5206593">,</span>&nbsp;<span class="ident" id="5206595">s</span><span class="op" id="5206596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206608">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206625">if</span>&nbsp;<span class="ident" id="5206628">r</span>&nbsp;<span class="op" id="5206630">&gt;</span>&nbsp;<span class="ident" id="5206632">n</span>&nbsp;<span class="op" id="5206634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206640">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206657">q</span>&nbsp;<span class="op" id="5206659">:=</span>&nbsp;<span class="ident" id="5206662">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206671">for</span>&nbsp;<span class="ident" id="5206675">k</span>&nbsp;<span class="op" id="5206677">:=</span>&nbsp;<span class="ident" id="5206680">base</span><span class="op" id="5206684">;</span>&nbsp;<span class="op" id="5206686">;</span>&nbsp;<span class="ident" id="5206688">k</span>&nbsp;<span class="op" id="5206690">+=</span>&nbsp;<span class="ident" id="5206693">base</span>&nbsp;<span class="op" id="5206698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206704">t</span>&nbsp;<span class="op" id="5206706">:=</span>&nbsp;<span class="ident" id="5206709">k</span>&nbsp;<span class="op" id="5206711">-</span>&nbsp;<span class="ident" id="5206713">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206722">if</span>&nbsp;<span class="ident" id="5206725">t</span>&nbsp;<span class="op" id="5206727">&lt;</span>&nbsp;<span class="ident" id="5206729">tmin</span>&nbsp;<span class="op" id="5206734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206741">t</span>&nbsp;<span class="op" id="5206743">=</span>&nbsp;<span class="ident" id="5206745">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206754">}</span>&nbsp;<span class="keyword" id="5206756">else</span>&nbsp;<span class="keyword" id="5206761">if</span>&nbsp;<span class="ident" id="5206764">t</span>&nbsp;<span class="op" id="5206766">&gt;</span>&nbsp;<span class="ident" id="5206768">tmax</span>&nbsp;<span class="op" id="5206773">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206780">t</span>&nbsp;<span class="op" id="5206782">=</span>&nbsp;<span class="ident" id="5206784">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206799">if</span>&nbsp;<span class="ident" id="5206802">q</span>&nbsp;<span class="op" id="5206804">&lt;</span>&nbsp;<span class="ident" id="5206806">t</span>&nbsp;<span class="op" id="5206808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5206815">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206825">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206831">output</span>&nbsp;<span class="op" id="5206838">=</span>&nbsp;<span class="builtinfunc" id="5206840">append</span><span class="op" id="5206846">(</span><span class="ident" id="5206847">output</span><span class="op" id="5206853">,</span>&nbsp;<span class="ident" id="5206855">encodeDigit</span><span class="op" id="5206866">(</span><span class="ident" id="5206867">t</span><span class="op" id="5206868">+</span><span class="op" id="5206869">(</span><span class="ident" id="5206870">q</span><span class="op" id="5206871">-</span><span class="ident" id="5206872">t</span><span class="op" id="5206873">)</span><span class="op" id="5206874">%</span><span class="op" id="5206875">(</span><span class="ident" id="5206876">base</span><span class="op" id="5206880">-</span><span class="ident" id="5206881">t</span><span class="op" id="5206882">)</span><span class="op" id="5206883">)</span><span class="op" id="5206884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206890">q</span>&nbsp;<span class="op" id="5206892">=</span>&nbsp;<span class="op" id="5206894">(</span><span class="ident" id="5206895">q</span>&nbsp;<span class="op" id="5206897">-</span>&nbsp;<span class="ident" id="5206899">t</span><span class="op" id="5206900">)</span>&nbsp;<span class="op" id="5206902">/</span>&nbsp;<span class="op" id="5206904">(</span><span class="ident" id="5206905">base</span>&nbsp;<span class="op" id="5206910">-</span>&nbsp;<span class="ident" id="5206912">t</span><span class="op" id="5206913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5206918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206923">output</span>&nbsp;<span class="op" id="5206930">=</span>&nbsp;<span class="builtinfunc" id="5206932">append</span><span class="op" id="5206938">(</span><span class="ident" id="5206939">output</span><span class="op" id="5206945">,</span>&nbsp;<span class="ident" id="5206947">encodeDigit</span><span class="op" id="5206958">(</span><span class="ident" id="5206959">q</span><span class="op" id="5206960">)</span><span class="op" id="5206961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5206966">bias</span>&nbsp;<span class="op" id="5206971">=</span>&nbsp;<span class="ident" id="5206973">adapt</span><span class="op" id="5206978">(</span><span class="ident" id="5206979">delta</span><span class="op" id="5206984">,</span>&nbsp;<span class="ident" id="5206986">h</span><span class="op" id="5206987">+</span><span class="num" id="5206988">1</span><span class="op" id="5206989">,</span>&nbsp;<span class="ident" id="5206991">h</span>&nbsp;<span class="op" id="5206993">==</span>&nbsp;<span class="ident" id="5206996">b</span><span class="op" id="5206997">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207002">delta</span>&nbsp;<span class="op" id="5207008">=</span>&nbsp;<span class="num" id="5207010">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207015">h</span><span class="op" id="5207016">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207022">remaining</span><span class="op" id="5207031">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207040">delta</span><span class="op" id="5207045">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207050">n</span><span class="op" id="5207051">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207058">return</span>&nbsp;<span class="builtintype" id="5207065">string</span><span class="op" id="5207071">(</span><span class="ident" id="5207072">output</span><span class="op" id="5207078">)</span><span class="op" id="5207079">,</span>&nbsp;<span class="builtintype" id="5207081">nil</span><br>
<span class="lineno"></span><span class="op" id="5207085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5207088">func</span>&nbsp;<span class="ident" id="5207093">encodeDigit</span><span class="op" id="5207104">(</span><span class="ident" id="5207105">digit</span>&nbsp;<span class="builtintype" id="5207111">int32</span><span class="op" id="5207116">)</span>&nbsp;<span class="builtintype" id="5207118">byte</span>&nbsp;<span class="op" id="5207123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207126">switch</span>&nbsp;<span class="op" id="5207133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207136">case</span>&nbsp;<span class="num" id="5207141">0</span>&nbsp;<span class="op" id="5207143">&lt;=</span>&nbsp;<span class="ident" id="5207146">digit</span>&nbsp;<span class="op" id="5207152">&amp;&amp;</span>&nbsp;<span class="ident" id="5207155">digit</span>&nbsp;<span class="op" id="5207161">&lt;</span>&nbsp;<span class="num" id="5207163">26</span><span class="op" id="5207165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207169">return</span>&nbsp;<span class="builtintype" id="5207176">byte</span><span class="op" id="5207180">(</span><span class="ident" id="5207181">digit</span>&nbsp;<span class="op" id="5207187">+</span>&nbsp;<span class="string" id="5207189">&#39;a&#39;</span><span class="op" id="5207192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207195">case</span>&nbsp;<span class="num" id="5207200">26</span>&nbsp;<span class="op" id="5207203">&lt;=</span>&nbsp;<span class="ident" id="5207206">digit</span>&nbsp;<span class="op" id="5207212">&amp;&amp;</span>&nbsp;<span class="ident" id="5207215">digit</span>&nbsp;<span class="op" id="5207221">&lt;</span>&nbsp;<span class="num" id="5207223">36</span><span class="op" id="5207225">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207229">return</span>&nbsp;<span class="builtintype" id="5207236">byte</span><span class="op" id="5207240">(</span><span class="ident" id="5207241">digit</span>&nbsp;<span class="op" id="5207247">+</span>&nbsp;<span class="op" id="5207249">(</span><span class="string" id="5207250">&#39;0&#39;</span>&nbsp;<span class="op" id="5207254">-</span>&nbsp;<span class="num" id="5207256">26</span><span class="op" id="5207258">)</span><span class="op" id="5207259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5207265">panic</span><span class="op" id="5207270">(</span><span class="string" id="5207271">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5207319">)</span><br>
<span class="lineno"></span><span class="op" id="5207321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5207324">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5207391">func</span>&nbsp;<span class="ident" id="5207396">adapt</span><span class="op" id="5207401">(</span><span class="ident" id="5207402">delta</span><span class="op" id="5207407">,</span>&nbsp;<span class="ident" id="5207409">numPoints</span>&nbsp;<span class="builtintype" id="5207419">int32</span><span class="op" id="5207424">,</span>&nbsp;<span class="ident" id="5207426">firstTime</span>&nbsp;<span class="builtintype" id="5207436">bool</span><span class="op" id="5207440">)</span>&nbsp;<span class="builtintype" id="5207442">int32</span>&nbsp;<span class="op" id="5207448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207451">if</span>&nbsp;<span class="ident" id="5207454">firstTime</span>&nbsp;<span class="op" id="5207464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207468">delta</span>&nbsp;<span class="op" id="5207474">/=</span>&nbsp;<span class="ident" id="5207477">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207483">}</span>&nbsp;<span class="keyword" id="5207485">else</span>&nbsp;<span class="op" id="5207490">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207494">delta</span>&nbsp;<span class="op" id="5207500">/=</span>&nbsp;<span class="num" id="5207503">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207509">delta</span>&nbsp;<span class="op" id="5207515">+=</span>&nbsp;<span class="ident" id="5207518">delta</span>&nbsp;<span class="op" id="5207524">/</span>&nbsp;<span class="ident" id="5207526">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207537">k</span>&nbsp;<span class="op" id="5207539">:=</span>&nbsp;<span class="builtintype" id="5207542">int32</span><span class="op" id="5207547">(</span><span class="num" id="5207548">0</span><span class="op" id="5207549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207552">for</span>&nbsp;<span class="ident" id="5207556">delta</span>&nbsp;<span class="op" id="5207562">&gt;</span>&nbsp;<span class="op" id="5207564">(</span><span class="op" id="5207565">(</span><span class="ident" id="5207566">base</span><span class="op" id="5207570">-</span><span class="ident" id="5207571">tmin</span><span class="op" id="5207575">)</span><span class="op" id="5207576">*</span><span class="ident" id="5207577">tmax</span><span class="op" id="5207581">)</span><span class="op" id="5207582">/</span><span class="num" id="5207583">2</span>&nbsp;<span class="op" id="5207585">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207589">delta</span>&nbsp;<span class="op" id="5207595">/=</span>&nbsp;<span class="ident" id="5207598">base</span>&nbsp;<span class="op" id="5207603">-</span>&nbsp;<span class="ident" id="5207605">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5207612">k</span>&nbsp;<span class="op" id="5207614">+=</span>&nbsp;<span class="ident" id="5207617">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5207623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5207626">return</span>&nbsp;<span class="ident" id="5207633">k</span>&nbsp;<span class="op" id="5207635">+</span>&nbsp;<span class="op" id="5207637">(</span><span class="ident" id="5207638">base</span><span class="op" id="5207642">-</span><span class="ident" id="5207643">tmin</span><span class="op" id="5207647">+</span><span class="num" id="5207648">1</span><span class="op" id="5207649">)</span><span class="op" id="5207650">*</span><span class="ident" id="5207651">delta</span><span class="op" id="5207656">/</span><span class="op" id="5207657">(</span><span class="ident" id="5207658">delta</span><span class="op" id="5207663">+</span><span class="ident" id="5207664">skew</span><span class="op" id="5207668">)</span><br>
<span class="lineno"></span><span class="op" id="5207670">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5207673">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5207750">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5207799">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5207853">const</span>&nbsp;<span class="ident" id="5207859">acePrefix</span>&nbsp;<span class="op" id="5207869">=</span>&nbsp;<span class="string" id="5207871">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5207879">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5207956">//&nbsp;toASCII(&#34;b√ºcher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5208026">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5208060">func</span>&nbsp;<span class="ident" id="5208065">toASCII</span><span class="op" id="5208072">(</span><span class="ident" id="5208073">s</span>&nbsp;<span class="builtintype" id="5208075">string</span><span class="op" id="5208081">)</span>&nbsp;<span class="op" id="5208083">(</span><span class="builtintype" id="5208084">string</span><span class="op" id="5208090">,</span>&nbsp;<span class="builtintype" id="5208092">error</span><span class="op" id="5208097">)</span>&nbsp;<span class="op" id="5208099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208102">if</span>&nbsp;<span class="ident" id="5208105">ascii</span><span class="op" id="5208110">(</span><span class="ident" id="5208111">s</span><span class="op" id="5208112">)</span>&nbsp;<span class="op" id="5208114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208118">return</span>&nbsp;<span class="ident" id="5208125">s</span><span class="op" id="5208126">,</span>&nbsp;<span class="builtintype" id="5208128">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5208136">labels</span>&nbsp;<span class="op" id="5208143">:=</span>&nbsp;<span class="ident" id="5208146">strings</span><span class="op" id="5208153">.</span><span class="ident" id="5208154">Split</span><span class="op" id="5208159">(</span><span class="ident" id="5208160">s</span><span class="op" id="5208161">,</span>&nbsp;<span class="string" id="5208163">&#34;.&#34;</span><span class="op" id="5208166">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208169">for</span>&nbsp;<span class="ident" id="5208173">i</span><span class="op" id="5208174">,</span>&nbsp;<span class="ident" id="5208176">label</span>&nbsp;<span class="op" id="5208182">:=</span>&nbsp;<span class="keyword" id="5208185">range</span>&nbsp;<span class="ident" id="5208191">labels</span>&nbsp;<span class="op" id="5208198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208202">if</span>&nbsp;<span class="op" id="5208205">!</span><span class="ident" id="5208206">ascii</span><span class="op" id="5208211">(</span><span class="ident" id="5208212">label</span><span class="op" id="5208217">)</span>&nbsp;<span class="op" id="5208219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5208224">a</span><span class="op" id="5208225">,</span>&nbsp;<span class="ident" id="5208227">err</span>&nbsp;<span class="op" id="5208231">:=</span>&nbsp;<span class="ident" id="5208234">encode</span><span class="op" id="5208240">(</span><span class="ident" id="5208241">acePrefix</span><span class="op" id="5208250">,</span>&nbsp;<span class="ident" id="5208252">label</span><span class="op" id="5208257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208262">if</span>&nbsp;<span class="ident" id="5208265">err</span>&nbsp;<span class="op" id="5208269">!=</span>&nbsp;<span class="builtintype" id="5208272">nil</span>&nbsp;<span class="op" id="5208276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208282">return</span>&nbsp;<span class="string" id="5208289">&#34;&#34;</span><span class="op" id="5208291">,</span>&nbsp;<span class="ident" id="5208293">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5208305">labels</span><span class="op" id="5208311">[</span><span class="ident" id="5208312">i</span><span class="op" id="5208313">]</span>&nbsp;<span class="op" id="5208315">=</span>&nbsp;<span class="ident" id="5208317">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208327">return</span>&nbsp;<span class="ident" id="5208334">strings</span><span class="op" id="5208341">.</span><span class="ident" id="5208342">Join</span><span class="op" id="5208346">(</span><span class="ident" id="5208347">labels</span><span class="op" id="5208353">,</span>&nbsp;<span class="string" id="5208355">&#34;.&#34;</span><span class="op" id="5208358">)</span><span class="op" id="5208359">,</span>&nbsp;<span class="builtintype" id="5208361">nil</span><br>
<span class="lineno">150</span><span class="op" id="5208365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5208368">func</span>&nbsp;<span class="ident" id="5208373">ascii</span><span class="op" id="5208378">(</span><span class="ident" id="5208379">s</span>&nbsp;<span class="builtintype" id="5208381">string</span><span class="op" id="5208387">)</span>&nbsp;<span class="builtintype" id="5208389">bool</span>&nbsp;<span class="op" id="5208394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208397">for</span>&nbsp;<span class="ident" id="5208401">i</span>&nbsp;<span class="op" id="5208403">:=</span>&nbsp;<span class="num" id="5208406">0</span><span class="op" id="5208407">;</span>&nbsp;<span class="ident" id="5208409">i</span>&nbsp;<span class="op" id="5208411">&lt;</span>&nbsp;<span class="builtinfunc" id="5208413">len</span><span class="op" id="5208416">(</span><span class="ident" id="5208417">s</span><span class="op" id="5208418">)</span><span class="op" id="5208419">;</span>&nbsp;<span class="ident" id="5208421">i</span><span class="op" id="5208422">++</span>&nbsp;<span class="op" id="5208425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208429">if</span>&nbsp;<span class="ident" id="5208432">s</span><span class="op" id="5208433">[</span><span class="ident" id="5208434">i</span><span class="op" id="5208435">]</span>&nbsp;<span class="op" id="5208437">&gt;=</span>&nbsp;<span class="ident" id="5208440">utf8</span><span class="op" id="5208444">.</span><span class="ident" id="5208445">RuneSelf</span>&nbsp;<span class="op" id="5208454">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208459">return</span>&nbsp;<span class="builtintype" id="5208466">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5208477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5208480">return</span>&nbsp;<span class="builtintype" id="5208487">true</span><br>
<span class="lineno"></span><span class="op" id="5208492">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
