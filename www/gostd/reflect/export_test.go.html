<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6997437">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6997493">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6997547">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6997598">package</span>&nbsp;<span class="ident" id="6997606">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6997615">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6997674">func</span>&nbsp;<span class="ident" id="6997679">MakeRO</span><span class="op" id="6997685">(</span><span class="ident" id="6997686">v</span>&nbsp;<span class="ident" id="6997688">Value</span><span class="op" id="6997693">)</span>&nbsp;<span class="ident" id="6997695">Value</span>&nbsp;<span class="op" id="6997701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6997704">v</span><span class="op" id="6997705">.</span><span class="ident" id="6997706">flag</span>&nbsp;<span class="op" id="6997711">|=</span>&nbsp;<span class="ident" id="6997714">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6997722">return</span>&nbsp;<span class="ident" id="6997729">v</span><br>
<span class="lineno"></span><span class="op" id="6997731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6997734">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="6997785">func</span>&nbsp;<span class="ident" id="6997790">IsRO</span><span class="op" id="6997794">(</span><span class="ident" id="6997795">v</span>&nbsp;<span class="ident" id="6997797">Value</span><span class="op" id="6997802">)</span>&nbsp;<span class="builtintype" id="6997804">bool</span>&nbsp;<span class="op" id="6997809">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6997812">return</span>&nbsp;<span class="ident" id="6997819">v</span><span class="op" id="6997820">.</span><span class="ident" id="6997821">flag</span><span class="op" id="6997825">&amp;</span><span class="ident" id="6997826">flagRO</span>&nbsp;<span class="op" id="6997833">!=</span>&nbsp;<span class="num" id="6997836">0</span><br>
<span class="lineno"></span><span class="op" id="6997838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6997841">var</span>&nbsp;<span class="ident" id="6997845">ArrayOf</span>&nbsp;<span class="op" id="6997853">=</span>&nbsp;<span class="ident" id="6997855">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="6997863">var</span>&nbsp;<span class="ident" id="6997867">CallGC</span>&nbsp;<span class="op" id="6997874">=</span>&nbsp;<span class="op" id="6997876">&amp;</span><span class="ident" id="6997877">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6997885">const</span>&nbsp;<span class="ident" id="6997891">PtrSize</span>&nbsp;<span class="op" id="6997899">=</span>&nbsp;<span class="ident" id="6997901">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="6997909">const</span>&nbsp;<span class="ident" id="6997915">BitsPointer</span>&nbsp;<span class="op" id="6997927">=</span>&nbsp;<span class="ident" id="6997929">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="6997941">const</span>&nbsp;<span class="ident" id="6997947">BitsScalar</span>&nbsp;<span class="op" id="6997958">=</span>&nbsp;<span class="ident" id="6997960">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6997972">func</span>&nbsp;<span class="ident" id="6997977">FuncLayout</span><span class="op" id="6997987">(</span><span class="ident" id="6997988">t</span>&nbsp;<span class="ident" id="6997990">Type</span><span class="op" id="6997994">,</span>&nbsp;<span class="ident" id="6997996">rcvr</span>&nbsp;<span class="ident" id="6998001">Type</span><span class="op" id="6998005">)</span>&nbsp;<span class="op" id="6998007">(</span><span class="ident" id="6998008">frametype</span>&nbsp;<span class="ident" id="6998018">Type</span><span class="op" id="6998022">,</span>&nbsp;<span class="ident" id="6998024">argSize</span><span class="op" id="6998031">,</span>&nbsp;<span class="ident" id="6998033">retOffset</span>&nbsp;<span class="builtintype" id="6998043">uintptr</span><span class="op" id="6998050">,</span>&nbsp;<span class="ident" id="6998052">stack</span>&nbsp;<span class="op" id="6998058">[</span><span class="op" id="6998059">]</span><span class="builtintype" id="6998060">byte</span><span class="op" id="6998064">)</span>&nbsp;<span class="op" id="6998066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6998069">var</span>&nbsp;<span class="ident" id="6998073">ft</span>&nbsp;<span class="op" id="6998076">*</span><span class="ident" id="6998077">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6998084">var</span>&nbsp;<span class="ident" id="6998088">s</span>&nbsp;<span class="op" id="6998090">*</span><span class="ident" id="6998091">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6998102">if</span>&nbsp;<span class="ident" id="6998105">rcvr</span>&nbsp;<span class="op" id="6998110">!=</span>&nbsp;<span class="ident" id="6998113">nil</span>&nbsp;<span class="op" id="6998117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6998121">ft</span><span class="op" id="6998123">,</span>&nbsp;<span class="ident" id="6998125">argSize</span><span class="op" id="6998132">,</span>&nbsp;<span class="ident" id="6998134">retOffset</span><span class="op" id="6998143">,</span>&nbsp;<span class="ident" id="6998145">s</span>&nbsp;<span class="op" id="6998147">=</span>&nbsp;<span class="ident" id="6998149">funcLayout</span><span class="op" id="6998159">(</span><span class="ident" id="6998160">t</span><span class="op" id="6998161">.</span><span class="op" id="6998162">(</span><span class="op" id="6998163">*</span><span class="ident" id="6998164">rtype</span><span class="op" id="6998169">)</span><span class="op" id="6998170">,</span>&nbsp;<span class="ident" id="6998172">rcvr</span><span class="op" id="6998176">.</span><span class="op" id="6998177">(</span><span class="op" id="6998178">*</span><span class="ident" id="6998179">rtype</span><span class="op" id="6998184">)</span><span class="op" id="6998185">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6998188">}</span>&nbsp;<span class="keyword" id="6998190">else</span>&nbsp;<span class="op" id="6998195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6998199">ft</span><span class="op" id="6998201">,</span>&nbsp;<span class="ident" id="6998203">argSize</span><span class="op" id="6998210">,</span>&nbsp;<span class="ident" id="6998212">retOffset</span><span class="op" id="6998221">,</span>&nbsp;<span class="ident" id="6998223">s</span>&nbsp;<span class="op" id="6998225">=</span>&nbsp;<span class="ident" id="6998227">funcLayout</span><span class="op" id="6998237">(</span><span class="ident" id="6998238">t</span><span class="op" id="6998239">.</span><span class="op" id="6998240">(</span><span class="op" id="6998241">*</span><span class="ident" id="6998242">rtype</span><span class="op" id="6998247">)</span><span class="op" id="6998248">,</span>&nbsp;<span class="ident" id="6998250">nil</span><span class="op" id="6998253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6998256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6998259">frametype</span>&nbsp;<span class="op" id="6998269">=</span>&nbsp;<span class="ident" id="6998271">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6998275">for</span>&nbsp;<span class="ident" id="6998279">i</span>&nbsp;<span class="op" id="6998281">:=</span>&nbsp;<span class="builtintype" id="6998284">uint32</span><span class="op" id="6998290">(</span><span class="num" id="6998291">0</span><span class="op" id="6998292">)</span><span class="op" id="6998293">;</span>&nbsp;<span class="ident" id="6998295">i</span>&nbsp;<span class="op" id="6998297">&lt;</span>&nbsp;<span class="ident" id="6998299">s</span><span class="op" id="6998300">.</span><span class="ident" id="6998301">n</span><span class="op" id="6998302">;</span>&nbsp;<span class="ident" id="6998304">i</span>&nbsp;<span class="op" id="6998306">+=</span>&nbsp;<span class="num" id="6998309">2</span>&nbsp;<span class="op" id="6998311">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6998315">stack</span>&nbsp;<span class="op" id="6998321">=</span>&nbsp;<span class="builtinfunc" id="6998323">append</span><span class="op" id="6998329">(</span><span class="ident" id="6998330">stack</span><span class="op" id="6998335">,</span>&nbsp;<span class="ident" id="6998337">s</span><span class="op" id="6998338">.</span><span class="ident" id="6998339">data</span><span class="op" id="6998343">[</span><span class="ident" id="6998344">i</span><span class="op" id="6998345">/</span><span class="num" id="6998346">8</span><span class="op" id="6998347">]</span><span class="op" id="6998348">&gt;&gt;</span><span class="op" id="6998350">(</span><span class="ident" id="6998351">i</span><span class="op" id="6998352">%</span><span class="num" id="6998353">8</span><span class="op" id="6998354">)</span><span class="op" id="6998355">&amp;</span><span class="num" id="6998356">3</span><span class="op" id="6998357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6998360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6998363">return</span><br>
<span class="lineno"></span><span class="op" id="6998370">}</span>
</div>
</body>
</html>
