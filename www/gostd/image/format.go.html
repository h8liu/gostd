<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4045400">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4045455">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4045509">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4045560">package</span>&nbsp;<span class="ident" id="4045568">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4045575">import</span>&nbsp;<span class="op" id="4045582">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4045585">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4045594">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4045604">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4045609">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4045612">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="4045680">var</span>&nbsp;<span class="ident" id="4045684">ErrFormat</span>&nbsp;<span class="op" id="4045694">=</span>&nbsp;<span class="ident" id="4045696">errors</span><span class="op" id="4045702">.</span><span class="ident" id="4045703">New</span><span class="op" id="4045706">(</span><span class="string" id="4045707">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="4045730">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4045733">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="4045810">type</span>&nbsp;<span class="ident" id="4045815">format</span>&nbsp;<span class="keyword" id="4045822">struct</span>&nbsp;<span class="op" id="4045829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045832">name</span><span class="op" id="4045836">,</span>&nbsp;<span class="ident" id="4045838">magic</span>&nbsp;&nbsp;<span class="builtintype" id="4045845">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045853">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4045866">func</span><span class="op" id="4045870">(</span><span class="ident" id="4045871">io</span><span class="op" id="4045873">.</span><span class="ident" id="4045874">Reader</span><span class="op" id="4045880">)</span>&nbsp;<span class="op" id="4045882">(</span><span class="ident" id="4045883">Image</span><span class="op" id="4045888">,</span>&nbsp;<span class="builtintype" id="4045890">error</span><span class="op" id="4045895">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4045898">decodeConfig</span>&nbsp;<span class="keyword" id="4045911">func</span><span class="op" id="4045915">(</span><span class="ident" id="4045916">io</span><span class="op" id="4045918">.</span><span class="ident" id="4045919">Reader</span><span class="op" id="4045925">)</span>&nbsp;<span class="op" id="4045927">(</span><span class="ident" id="4045928">Config</span><span class="op" id="4045934">,</span>&nbsp;<span class="builtintype" id="4045936">error</span><span class="op" id="4045941">)</span><br>
<span class="lineno"></span><span class="op" id="4045943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4045946">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="4045992">var</span>&nbsp;<span class="ident" id="4045996">formats</span>&nbsp;<span class="op" id="4046004">[</span><span class="op" id="4046005">]</span><span class="ident" id="4046006">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="4046014">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="4046077">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4046134">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="4046212">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="4046278">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="4046336">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="4046405">func</span>&nbsp;<span class="ident" id="4046410">RegisterFormat</span><span class="op" id="4046424">(</span><span class="ident" id="4046425">name</span><span class="op" id="4046429">,</span>&nbsp;<span class="ident" id="4046431">magic</span>&nbsp;<span class="builtintype" id="4046437">string</span><span class="op" id="4046443">,</span>&nbsp;<span class="ident" id="4046445">decode</span>&nbsp;<span class="keyword" id="4046452">func</span><span class="op" id="4046456">(</span><span class="ident" id="4046457">io</span><span class="op" id="4046459">.</span><span class="ident" id="4046460">Reader</span><span class="op" id="4046466">)</span>&nbsp;<span class="op" id="4046468">(</span><span class="ident" id="4046469">Image</span><span class="op" id="4046474">,</span>&nbsp;<span class="builtintype" id="4046476">error</span><span class="op" id="4046481">)</span><span class="op" id="4046482">,</span>&nbsp;<span class="ident" id="4046484">decodeConfig</span>&nbsp;<span class="keyword" id="4046497">func</span><span class="op" id="4046501">(</span><span class="ident" id="4046502">io</span><span class="op" id="4046504">.</span><span class="ident" id="4046505">Reader</span><span class="op" id="4046511">)</span>&nbsp;<span class="op" id="4046513">(</span><span class="ident" id="4046514">Config</span><span class="op" id="4046520">,</span>&nbsp;<span class="builtintype" id="4046522">error</span><span class="op" id="4046527">)</span><span class="op" id="4046528">)</span>&nbsp;<span class="op" id="4046530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046533">formats</span>&nbsp;<span class="op" id="4046541">=</span>&nbsp;<span class="builtinfunc" id="4046543">append</span><span class="op" id="4046549">(</span><span class="ident" id="4046550">formats</span><span class="op" id="4046557">,</span>&nbsp;<span class="ident" id="4046559">format</span><span class="op" id="4046565">{</span><span class="ident" id="4046566">name</span><span class="op" id="4046570">,</span>&nbsp;<span class="ident" id="4046572">magic</span><span class="op" id="4046577">,</span>&nbsp;<span class="ident" id="4046579">decode</span><span class="op" id="4046585">,</span>&nbsp;<span class="ident" id="4046587">decodeConfig</span><span class="op" id="4046599">}</span><span class="op" id="4046600">)</span><br>
<span class="lineno"></span><span class="op" id="4046602">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4046605">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="4046659">type</span>&nbsp;<span class="ident" id="4046664">reader</span>&nbsp;<span class="keyword" id="4046671">interface</span>&nbsp;<span class="op" id="4046681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046684">io</span><span class="op" id="4046686">.</span><span class="ident" id="4046687">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4046695">Peek</span><span class="op" id="4046699">(</span><span class="builtintype" id="4046700">int</span><span class="op" id="4046703">)</span>&nbsp;<span class="op" id="4046705">(</span><span class="op" id="4046706">[</span><span class="op" id="4046707">]</span><span class="builtintype" id="4046708">byte</span><span class="op" id="4046712">,</span>&nbsp;<span class="builtintype" id="4046714">error</span><span class="op" id="4046719">)</span><br>
<span class="lineno">40</span><span class="op" id="4046721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4046724">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="4046771">func</span>&nbsp;<span class="ident" id="4046776">asReader</span><span class="op" id="4046784">(</span><span class="ident" id="4046785">r</span>&nbsp;<span class="ident" id="4046787">io</span><span class="op" id="4046789">.</span><span class="ident" id="4046790">Reader</span><span class="op" id="4046796">)</span>&nbsp;<span class="ident" id="4046798">reader</span>&nbsp;<span class="op" id="4046805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046808">if</span>&nbsp;<span class="ident" id="4046811">rr</span><span class="op" id="4046813">,</span>&nbsp;<span class="ident" id="4046815">ok</span>&nbsp;<span class="op" id="4046818">:=</span>&nbsp;<span class="ident" id="4046821">r</span><span class="op" id="4046822">.</span><span class="op" id="4046823">(</span><span class="ident" id="4046824">reader</span><span class="op" id="4046830">)</span><span class="op" id="4046831">;</span>&nbsp;<span class="ident" id="4046833">ok</span>&nbsp;<span class="op" id="4046836">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046840">return</span>&nbsp;<span class="ident" id="4046847">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4046851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4046854">return</span>&nbsp;<span class="ident" id="4046861">bufio</span><span class="op" id="4046866">.</span><span class="ident" id="4046867">NewReader</span><span class="op" id="4046876">(</span><span class="ident" id="4046877">r</span><span class="op" id="4046878">)</span><br>
<span class="lineno"></span><span class="op" id="4046880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4046883">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="4046958">func</span>&nbsp;<span class="ident" id="4046963">match</span><span class="op" id="4046968">(</span><span class="ident" id="4046969">magic</span>&nbsp;<span class="builtintype" id="4046975">string</span><span class="op" id="4046981">,</span>&nbsp;<span class="ident" id="4046983">b</span>&nbsp;<span class="op" id="4046985">[</span><span class="op" id="4046986">]</span><span class="builtintype" id="4046987">byte</span><span class="op" id="4046991">)</span>&nbsp;<span class="builtintype" id="4046993">bool</span>&nbsp;<span class="op" id="4046998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047001">if</span>&nbsp;<span class="builtinfunc" id="4047004">len</span><span class="op" id="4047007">(</span><span class="ident" id="4047008">magic</span><span class="op" id="4047013">)</span>&nbsp;<span class="op" id="4047015">!=</span>&nbsp;<span class="builtinfunc" id="4047018">len</span><span class="op" id="4047021">(</span><span class="ident" id="4047022">b</span><span class="op" id="4047023">)</span>&nbsp;<span class="op" id="4047025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047029">return</span>&nbsp;<span class="builtintype" id="4047036">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047043">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047046">for</span>&nbsp;<span class="ident" id="4047050">i</span><span class="op" id="4047051">,</span>&nbsp;<span class="ident" id="4047053">c</span>&nbsp;<span class="op" id="4047055">:=</span>&nbsp;<span class="keyword" id="4047058">range</span>&nbsp;<span class="ident" id="4047064">b</span>&nbsp;<span class="op" id="4047066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047070">if</span>&nbsp;<span class="ident" id="4047073">magic</span><span class="op" id="4047078">[</span><span class="ident" id="4047079">i</span><span class="op" id="4047080">]</span>&nbsp;<span class="op" id="4047082">!=</span>&nbsp;<span class="ident" id="4047085">c</span>&nbsp;<span class="op" id="4047087">&amp;&amp;</span>&nbsp;<span class="ident" id="4047090">magic</span><span class="op" id="4047095">[</span><span class="ident" id="4047096">i</span><span class="op" id="4047097">]</span>&nbsp;<span class="op" id="4047099">!=</span>&nbsp;<span class="string" id="4047102">&#39;?&#39;</span>&nbsp;<span class="op" id="4047106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047111">return</span>&nbsp;<span class="builtintype" id="4047118">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047129">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047132">return</span>&nbsp;<span class="builtintype" id="4047139">true</span><br>
<span class="lineno"></span><span class="op" id="4047144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4047147">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="4047191">func</span>&nbsp;<span class="ident" id="4047196">sniff</span><span class="op" id="4047201">(</span><span class="ident" id="4047202">r</span>&nbsp;<span class="ident" id="4047204">reader</span><span class="op" id="4047210">)</span>&nbsp;<span class="ident" id="4047212">format</span>&nbsp;<span class="op" id="4047219">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047222">for</span>&nbsp;<span class="ident" id="4047226">_</span><span class="op" id="4047227">,</span>&nbsp;<span class="ident" id="4047229">f</span>&nbsp;<span class="op" id="4047231">:=</span>&nbsp;<span class="keyword" id="4047234">range</span>&nbsp;<span class="ident" id="4047240">formats</span>&nbsp;<span class="op" id="4047248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047252">b</span><span class="op" id="4047253">,</span>&nbsp;<span class="ident" id="4047255">err</span>&nbsp;<span class="op" id="4047259">:=</span>&nbsp;<span class="ident" id="4047262">r</span><span class="op" id="4047263">.</span><span class="ident" id="4047264">Peek</span><span class="op" id="4047268">(</span><span class="builtinfunc" id="4047269">len</span><span class="op" id="4047272">(</span><span class="ident" id="4047273">f</span><span class="op" id="4047274">.</span><span class="ident" id="4047275">magic</span><span class="op" id="4047280">)</span><span class="op" id="4047281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047285">if</span>&nbsp;<span class="ident" id="4047288">err</span>&nbsp;<span class="op" id="4047292">==</span>&nbsp;<span class="ident" id="4047295">nil</span>&nbsp;<span class="op" id="4047299">&amp;&amp;</span>&nbsp;<span class="ident" id="4047302">match</span><span class="op" id="4047307">(</span><span class="ident" id="4047308">f</span><span class="op" id="4047309">.</span><span class="ident" id="4047310">magic</span><span class="op" id="4047315">,</span>&nbsp;<span class="ident" id="4047317">b</span><span class="op" id="4047318">)</span>&nbsp;<span class="op" id="4047320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047325">return</span>&nbsp;<span class="ident" id="4047332">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047336">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047342">return</span>&nbsp;<span class="ident" id="4047349">format</span><span class="op" id="4047355">{</span><span class="op" id="4047356">}</span><br>
<span class="lineno"></span><span class="op" id="4047358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4047361">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="4047434">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="4047509">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="4047584">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="4047605">func</span>&nbsp;<span class="ident" id="4047610">Decode</span><span class="op" id="4047616">(</span><span class="ident" id="4047617">r</span>&nbsp;<span class="ident" id="4047619">io</span><span class="op" id="4047621">.</span><span class="ident" id="4047622">Reader</span><span class="op" id="4047628">)</span>&nbsp;<span class="op" id="4047630">(</span><span class="ident" id="4047631">Image</span><span class="op" id="4047636">,</span>&nbsp;<span class="builtintype" id="4047638">string</span><span class="op" id="4047644">,</span>&nbsp;<span class="builtintype" id="4047646">error</span><span class="op" id="4047651">)</span>&nbsp;<span class="op" id="4047653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047656">rr</span>&nbsp;<span class="op" id="4047659">:=</span>&nbsp;<span class="ident" id="4047662">asReader</span><span class="op" id="4047670">(</span><span class="ident" id="4047671">r</span><span class="op" id="4047672">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047675">f</span>&nbsp;<span class="op" id="4047677">:=</span>&nbsp;<span class="ident" id="4047680">sniff</span><span class="op" id="4047685">(</span><span class="ident" id="4047686">rr</span><span class="op" id="4047688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047691">if</span>&nbsp;<span class="ident" id="4047694">f</span><span class="op" id="4047695">.</span><span class="ident" id="4047696">decode</span>&nbsp;<span class="op" id="4047703">==</span>&nbsp;<span class="ident" id="4047706">nil</span>&nbsp;<span class="op" id="4047710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047714">return</span>&nbsp;<span class="ident" id="4047721">nil</span><span class="op" id="4047724">,</span>&nbsp;<span class="string" id="4047726">&#34;&#34;</span><span class="op" id="4047728">,</span>&nbsp;<span class="ident" id="4047730">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4047741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4047744">m</span><span class="op" id="4047745">,</span>&nbsp;<span class="ident" id="4047747">err</span>&nbsp;<span class="op" id="4047751">:=</span>&nbsp;<span class="ident" id="4047754">f</span><span class="op" id="4047755">.</span><span class="ident" id="4047756">decode</span><span class="op" id="4047762">(</span><span class="ident" id="4047763">rr</span><span class="op" id="4047765">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4047768">return</span>&nbsp;<span class="ident" id="4047775">m</span><span class="op" id="4047776">,</span>&nbsp;<span class="ident" id="4047778">f</span><span class="op" id="4047779">.</span><span class="ident" id="4047780">name</span><span class="op" id="4047784">,</span>&nbsp;<span class="ident" id="4047786">err</span><br>
<span class="lineno"></span><span class="op" id="4047790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4047793">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="4047869">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="4047948">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4048025">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="4048076">func</span>&nbsp;<span class="ident" id="4048081">DecodeConfig</span><span class="op" id="4048093">(</span><span class="ident" id="4048094">r</span>&nbsp;<span class="ident" id="4048096">io</span><span class="op" id="4048098">.</span><span class="ident" id="4048099">Reader</span><span class="op" id="4048105">)</span>&nbsp;<span class="op" id="4048107">(</span><span class="ident" id="4048108">Config</span><span class="op" id="4048114">,</span>&nbsp;<span class="builtintype" id="4048116">string</span><span class="op" id="4048122">,</span>&nbsp;<span class="builtintype" id="4048124">error</span><span class="op" id="4048129">)</span>&nbsp;<span class="op" id="4048131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048134">rr</span>&nbsp;<span class="op" id="4048137">:=</span>&nbsp;<span class="ident" id="4048140">asReader</span><span class="op" id="4048148">(</span><span class="ident" id="4048149">r</span><span class="op" id="4048150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048153">f</span>&nbsp;<span class="op" id="4048155">:=</span>&nbsp;<span class="ident" id="4048158">sniff</span><span class="op" id="4048163">(</span><span class="ident" id="4048164">rr</span><span class="op" id="4048166">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048169">if</span>&nbsp;<span class="ident" id="4048172">f</span><span class="op" id="4048173">.</span><span class="ident" id="4048174">decodeConfig</span>&nbsp;<span class="op" id="4048187">==</span>&nbsp;<span class="ident" id="4048190">nil</span>&nbsp;<span class="op" id="4048194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048198">return</span>&nbsp;<span class="ident" id="4048205">Config</span><span class="op" id="4048211">{</span><span class="op" id="4048212">}</span><span class="op" id="4048213">,</span>&nbsp;<span class="string" id="4048215">&#34;&#34;</span><span class="op" id="4048217">,</span>&nbsp;<span class="ident" id="4048219">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4048230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4048233">c</span><span class="op" id="4048234">,</span>&nbsp;<span class="ident" id="4048236">err</span>&nbsp;<span class="op" id="4048240">:=</span>&nbsp;<span class="ident" id="4048243">f</span><span class="op" id="4048244">.</span><span class="ident" id="4048245">decodeConfig</span><span class="op" id="4048257">(</span><span class="ident" id="4048258">rr</span><span class="op" id="4048260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4048263">return</span>&nbsp;<span class="ident" id="4048270">c</span><span class="op" id="4048271">,</span>&nbsp;<span class="ident" id="4048273">f</span><span class="op" id="4048274">.</span><span class="ident" id="4048275">name</span><span class="op" id="4048279">,</span>&nbsp;<span class="ident" id="4048281">err</span><br>
<span class="lineno">100</span><span class="op" id="4048285">}</span>
</div>
</body>
</html>
