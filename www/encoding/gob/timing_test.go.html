<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7373866">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7373921">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7373975">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7374026">package</span>&nbsp;<span class="ident" id="7374034">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374039">import</span>&nbsp;<span class="op" id="7374046">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374049">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374058">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374064">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374070">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7374081">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7374091">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7374094">type</span>&nbsp;<span class="ident" id="7374099">Bench</span>&nbsp;<span class="keyword" id="7374105">struct</span>&nbsp;<span class="op" id="7374112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374115">A</span>&nbsp;<span class="builtintype" id="7374117">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374122">B</span>&nbsp;<span class="builtintype" id="7374124">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374133">C</span>&nbsp;<span class="builtintype" id="7374135">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374143">D</span>&nbsp;<span class="op" id="7374145">[</span><span class="op" id="7374146">]</span><span class="builtintype" id="7374147">byte</span><br>
<span class="lineno">20</span><span class="op" id="7374152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374155">func</span>&nbsp;<span class="ident" id="7374160">benchmarkEndToEnd</span><span class="op" id="7374177">(</span><span class="ident" id="7374178">b</span>&nbsp;<span class="op" id="7374180">*</span><span class="ident" id="7374181">testing</span><span class="op" id="7374188">.</span><span class="ident" id="7374189">B</span><span class="op" id="7374190">,</span>&nbsp;<span class="ident" id="7374192">ctor</span>&nbsp;<span class="keyword" id="7374197">func</span><span class="op" id="7374201">(</span><span class="op" id="7374202">)</span>&nbsp;<span class="keyword" id="7374204">interface</span><span class="op" id="7374213">{</span><span class="op" id="7374214">}</span><span class="op" id="7374215">,</span>&nbsp;<span class="ident" id="7374217">pipe</span>&nbsp;<span class="keyword" id="7374222">func</span><span class="op" id="7374226">(</span><span class="op" id="7374227">)</span>&nbsp;<span class="op" id="7374229">(</span><span class="ident" id="7374230">r</span>&nbsp;<span class="ident" id="7374232">io</span><span class="op" id="7374234">.</span><span class="ident" id="7374235">Reader</span><span class="op" id="7374241">,</span>&nbsp;<span class="ident" id="7374243">w</span>&nbsp;<span class="ident" id="7374245">io</span><span class="op" id="7374247">.</span><span class="ident" id="7374248">Writer</span><span class="op" id="7374254">,</span>&nbsp;<span class="ident" id="7374256">err</span>&nbsp;<span class="builtintype" id="7374260">error</span><span class="op" id="7374265">)</span><span class="op" id="7374266">)</span>&nbsp;<span class="op" id="7374268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374271">b</span><span class="op" id="7374272">.</span><span class="ident" id="7374273">RunParallel</span><span class="op" id="7374284">(</span><span class="keyword" id="7374285">func</span><span class="op" id="7374289">(</span><span class="ident" id="7374290">pb</span>&nbsp;<span class="op" id="7374293">*</span><span class="ident" id="7374294">testing</span><span class="op" id="7374301">.</span><span class="ident" id="7374302">PB</span><span class="op" id="7374304">)</span>&nbsp;<span class="op" id="7374306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374310">r</span><span class="op" id="7374311">,</span>&nbsp;<span class="ident" id="7374313">w</span><span class="op" id="7374314">,</span>&nbsp;<span class="ident" id="7374316">err</span>&nbsp;<span class="op" id="7374320">:=</span>&nbsp;<span class="ident" id="7374323">pipe</span><span class="op" id="7374327">(</span><span class="op" id="7374328">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374332">if</span>&nbsp;<span class="ident" id="7374335">err</span>&nbsp;<span class="op" id="7374339">!=</span>&nbsp;<span class="ident" id="7374342">nil</span>&nbsp;<span class="op" id="7374346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374351">b</span><span class="op" id="7374352">.</span><span class="ident" id="7374353">Fatal</span><span class="op" id="7374358">(</span><span class="string" id="7374359">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="7374376">,</span>&nbsp;<span class="ident" id="7374378">err</span><span class="op" id="7374381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374389">v</span>&nbsp;<span class="op" id="7374391">:=</span>&nbsp;<span class="ident" id="7374394">ctor</span><span class="op" id="7374398">(</span><span class="op" id="7374399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374403">enc</span>&nbsp;<span class="op" id="7374407">:=</span>&nbsp;<span class="ident" id="7374410">NewEncoder</span><span class="op" id="7374420">(</span><span class="ident" id="7374421">w</span><span class="op" id="7374422">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374426">dec</span>&nbsp;<span class="op" id="7374430">:=</span>&nbsp;<span class="ident" id="7374433">NewDecoder</span><span class="op" id="7374443">(</span><span class="ident" id="7374444">r</span><span class="op" id="7374445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374449">for</span>&nbsp;<span class="ident" id="7374453">pb</span><span class="op" id="7374455">.</span><span class="ident" id="7374456">Next</span><span class="op" id="7374460">(</span><span class="op" id="7374461">)</span>&nbsp;<span class="op" id="7374463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374468">if</span>&nbsp;<span class="ident" id="7374471">err</span>&nbsp;<span class="op" id="7374475">:=</span>&nbsp;<span class="ident" id="7374478">enc</span><span class="op" id="7374481">.</span><span class="ident" id="7374482">Encode</span><span class="op" id="7374488">(</span><span class="ident" id="7374489">v</span><span class="op" id="7374490">)</span><span class="op" id="7374491">;</span>&nbsp;<span class="ident" id="7374493">err</span>&nbsp;<span class="op" id="7374497">!=</span>&nbsp;<span class="ident" id="7374500">nil</span>&nbsp;<span class="op" id="7374504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374510">b</span><span class="op" id="7374511">.</span><span class="ident" id="7374512">Fatal</span><span class="op" id="7374517">(</span><span class="string" id="7374518">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7374533">,</span>&nbsp;<span class="ident" id="7374535">err</span><span class="op" id="7374538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374543">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374548">if</span>&nbsp;<span class="ident" id="7374551">err</span>&nbsp;<span class="op" id="7374555">:=</span>&nbsp;<span class="ident" id="7374558">dec</span><span class="op" id="7374561">.</span><span class="ident" id="7374562">Decode</span><span class="op" id="7374568">(</span><span class="ident" id="7374569">v</span><span class="op" id="7374570">)</span><span class="op" id="7374571">;</span>&nbsp;<span class="ident" id="7374573">err</span>&nbsp;<span class="op" id="7374577">!=</span>&nbsp;<span class="ident" id="7374580">nil</span>&nbsp;<span class="op" id="7374584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374590">b</span><span class="op" id="7374591">.</span><span class="ident" id="7374592">Fatal</span><span class="op" id="7374597">(</span><span class="string" id="7374598">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7374613">,</span>&nbsp;<span class="ident" id="7374615">err</span><span class="op" id="7374618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374630">}</span><span class="op" id="7374631">)</span><br>
<span class="lineno">40</span><span class="op" id="7374633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374636">func</span>&nbsp;<span class="ident" id="7374641">BenchmarkEndToEndPipe</span><span class="op" id="7374662">(</span><span class="ident" id="7374663">b</span>&nbsp;<span class="op" id="7374665">*</span><span class="ident" id="7374666">testing</span><span class="op" id="7374673">.</span><span class="ident" id="7374674">B</span><span class="op" id="7374675">)</span>&nbsp;<span class="op" id="7374677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374680">benchmarkEndToEnd</span><span class="op" id="7374697">(</span><span class="ident" id="7374698">b</span><span class="op" id="7374699">,</span>&nbsp;<span class="keyword" id="7374701">func</span><span class="op" id="7374705">(</span><span class="op" id="7374706">)</span>&nbsp;<span class="keyword" id="7374708">interface</span><span class="op" id="7374717">{</span><span class="op" id="7374718">}</span>&nbsp;<span class="op" id="7374720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374724">return</span>&nbsp;<span class="op" id="7374731">&amp;</span><span class="ident" id="7374732">Bench</span><span class="op" id="7374737">{</span><span class="num" id="7374738">7</span><span class="op" id="7374739">,</span>&nbsp;<span class="num" id="7374741">3.2</span><span class="op" id="7374744">,</span>&nbsp;<span class="string" id="7374746">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7374763">,</span>&nbsp;<span class="ident" id="7374765">bytes</span><span class="op" id="7374770">.</span><span class="ident" id="7374771">Repeat</span><span class="op" id="7374777">(</span><span class="op" id="7374778">[</span><span class="op" id="7374779">]</span><span class="builtintype" id="7374780">byte</span><span class="op" id="7374784">(</span><span class="string" id="7374785">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7374803">)</span><span class="op" id="7374804">,</span>&nbsp;<span class="num" id="7374806">100</span><span class="op" id="7374809">)</span><span class="op" id="7374810">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374813">}</span><span class="op" id="7374814">,</span>&nbsp;<span class="keyword" id="7374816">func</span><span class="op" id="7374820">(</span><span class="op" id="7374821">)</span>&nbsp;<span class="op" id="7374823">(</span><span class="ident" id="7374824">r</span>&nbsp;<span class="ident" id="7374826">io</span><span class="op" id="7374828">.</span><span class="ident" id="7374829">Reader</span><span class="op" id="7374835">,</span>&nbsp;<span class="ident" id="7374837">w</span>&nbsp;<span class="ident" id="7374839">io</span><span class="op" id="7374841">.</span><span class="ident" id="7374842">Writer</span><span class="op" id="7374848">,</span>&nbsp;<span class="ident" id="7374850">err</span>&nbsp;<span class="builtintype" id="7374854">error</span><span class="op" id="7374859">)</span>&nbsp;<span class="op" id="7374861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374865">r</span><span class="op" id="7374866">,</span>&nbsp;<span class="ident" id="7374868">w</span><span class="op" id="7374869">,</span>&nbsp;<span class="ident" id="7374871">err</span>&nbsp;<span class="op" id="7374875">=</span>&nbsp;<span class="ident" id="7374877">os</span><span class="op" id="7374879">.</span><span class="ident" id="7374880">Pipe</span><span class="op" id="7374884">(</span><span class="op" id="7374885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374889">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374897">}</span><span class="op" id="7374898">)</span><br>
<span class="lineno"></span><span class="op" id="7374900">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="7374903">func</span>&nbsp;<span class="ident" id="7374908">BenchmarkEndToEndByteBuffer</span><span class="op" id="7374935">(</span><span class="ident" id="7374936">b</span>&nbsp;<span class="op" id="7374938">*</span><span class="ident" id="7374939">testing</span><span class="op" id="7374946">.</span><span class="ident" id="7374947">B</span><span class="op" id="7374948">)</span>&nbsp;<span class="op" id="7374950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374953">benchmarkEndToEnd</span><span class="op" id="7374970">(</span><span class="ident" id="7374971">b</span><span class="op" id="7374972">,</span>&nbsp;<span class="keyword" id="7374974">func</span><span class="op" id="7374978">(</span><span class="op" id="7374979">)</span>&nbsp;<span class="keyword" id="7374981">interface</span><span class="op" id="7374990">{</span><span class="op" id="7374991">}</span>&nbsp;<span class="op" id="7374993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374997">return</span>&nbsp;<span class="op" id="7375004">&amp;</span><span class="ident" id="7375005">Bench</span><span class="op" id="7375010">{</span><span class="num" id="7375011">7</span><span class="op" id="7375012">,</span>&nbsp;<span class="num" id="7375014">3.2</span><span class="op" id="7375017">,</span>&nbsp;<span class="string" id="7375019">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7375036">,</span>&nbsp;<span class="ident" id="7375038">bytes</span><span class="op" id="7375043">.</span><span class="ident" id="7375044">Repeat</span><span class="op" id="7375050">(</span><span class="op" id="7375051">[</span><span class="op" id="7375052">]</span><span class="builtintype" id="7375053">byte</span><span class="op" id="7375057">(</span><span class="string" id="7375058">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7375076">)</span><span class="op" id="7375077">,</span>&nbsp;<span class="num" id="7375079">100</span><span class="op" id="7375082">)</span><span class="op" id="7375083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375086">}</span><span class="op" id="7375087">,</span>&nbsp;<span class="keyword" id="7375089">func</span><span class="op" id="7375093">(</span><span class="op" id="7375094">)</span>&nbsp;<span class="op" id="7375096">(</span><span class="ident" id="7375097">r</span>&nbsp;<span class="ident" id="7375099">io</span><span class="op" id="7375101">.</span><span class="ident" id="7375102">Reader</span><span class="op" id="7375108">,</span>&nbsp;<span class="ident" id="7375110">w</span>&nbsp;<span class="ident" id="7375112">io</span><span class="op" id="7375114">.</span><span class="ident" id="7375115">Writer</span><span class="op" id="7375121">,</span>&nbsp;<span class="ident" id="7375123">err</span>&nbsp;<span class="builtintype" id="7375127">error</span><span class="op" id="7375132">)</span>&nbsp;<span class="op" id="7375134">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375138">var</span>&nbsp;<span class="ident" id="7375142">buf</span>&nbsp;<span class="ident" id="7375146">bytes</span><span class="op" id="7375151">.</span><span class="ident" id="7375152">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375161">return</span>&nbsp;<span class="op" id="7375168">&amp;</span><span class="ident" id="7375169">buf</span><span class="op" id="7375172">,</span>&nbsp;<span class="op" id="7375174">&amp;</span><span class="ident" id="7375175">buf</span><span class="op" id="7375178">,</span>&nbsp;<span class="ident" id="7375180">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375185">}</span><span class="op" id="7375186">)</span><br>
<span class="lineno"></span><span class="op" id="7375188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="7375191">func</span>&nbsp;<span class="ident" id="7375196">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="7375228">(</span><span class="ident" id="7375229">b</span>&nbsp;<span class="op" id="7375231">*</span><span class="ident" id="7375232">testing</span><span class="op" id="7375239">.</span><span class="ident" id="7375240">B</span><span class="op" id="7375241">)</span>&nbsp;<span class="op" id="7375243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375246">benchmarkEndToEnd</span><span class="op" id="7375263">(</span><span class="ident" id="7375264">b</span><span class="op" id="7375265">,</span>&nbsp;<span class="keyword" id="7375267">func</span><span class="op" id="7375271">(</span><span class="op" id="7375272">)</span>&nbsp;<span class="keyword" id="7375274">interface</span><span class="op" id="7375283">{</span><span class="op" id="7375284">}</span>&nbsp;<span class="op" id="7375286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375290">v</span>&nbsp;<span class="op" id="7375292">:=</span>&nbsp;<span class="op" id="7375295">&amp;</span><span class="ident" id="7375296">Bench</span><span class="op" id="7375301">{</span><span class="num" id="7375302">7</span><span class="op" id="7375303">,</span>&nbsp;<span class="num" id="7375305">3.2</span><span class="op" id="7375308">,</span>&nbsp;<span class="string" id="7375310">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7375327">,</span>&nbsp;<span class="ident" id="7375329">nil</span><span class="op" id="7375332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375336">Register</span><span class="op" id="7375344">(</span><span class="ident" id="7375345">v</span><span class="op" id="7375346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375350">arr</span>&nbsp;<span class="op" id="7375354">:=</span>&nbsp;<span class="builtinfunc" id="7375357">make</span><span class="op" id="7375361">(</span><span class="op" id="7375362">[</span><span class="op" id="7375363">]</span><span class="keyword" id="7375364">interface</span><span class="op" id="7375373">{</span><span class="op" id="7375374">}</span><span class="op" id="7375375">,</span>&nbsp;<span class="num" id="7375377">100</span><span class="op" id="7375380">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375384">for</span>&nbsp;<span class="ident" id="7375388">i</span>&nbsp;<span class="op" id="7375390">:=</span>&nbsp;<span class="keyword" id="7375393">range</span>&nbsp;<span class="ident" id="7375399">arr</span>&nbsp;<span class="op" id="7375403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375408">arr</span><span class="op" id="7375411">[</span><span class="ident" id="7375412">i</span><span class="op" id="7375413">]</span>&nbsp;<span class="op" id="7375415">=</span>&nbsp;<span class="ident" id="7375417">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375425">return</span>&nbsp;<span class="op" id="7375432">&amp;</span><span class="ident" id="7375433">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375438">}</span><span class="op" id="7375439">,</span>&nbsp;<span class="keyword" id="7375441">func</span><span class="op" id="7375445">(</span><span class="op" id="7375446">)</span>&nbsp;<span class="op" id="7375448">(</span><span class="ident" id="7375449">r</span>&nbsp;<span class="ident" id="7375451">io</span><span class="op" id="7375453">.</span><span class="ident" id="7375454">Reader</span><span class="op" id="7375460">,</span>&nbsp;<span class="ident" id="7375462">w</span>&nbsp;<span class="ident" id="7375464">io</span><span class="op" id="7375466">.</span><span class="ident" id="7375467">Writer</span><span class="op" id="7375473">,</span>&nbsp;<span class="ident" id="7375475">err</span>&nbsp;<span class="builtintype" id="7375479">error</span><span class="op" id="7375484">)</span>&nbsp;<span class="op" id="7375486">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375490">var</span>&nbsp;<span class="ident" id="7375494">buf</span>&nbsp;<span class="ident" id="7375498">bytes</span><span class="op" id="7375503">.</span><span class="ident" id="7375504">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375513">return</span>&nbsp;<span class="op" id="7375520">&amp;</span><span class="ident" id="7375521">buf</span><span class="op" id="7375524">,</span>&nbsp;<span class="op" id="7375526">&amp;</span><span class="ident" id="7375527">buf</span><span class="op" id="7375530">,</span>&nbsp;<span class="ident" id="7375532">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375537">}</span><span class="op" id="7375538">)</span><br>
<span class="lineno"></span><span class="op" id="7375540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7375543">func</span>&nbsp;<span class="ident" id="7375548">TestCountEncodeMallocs</span><span class="op" id="7375570">(</span><span class="ident" id="7375571">t</span>&nbsp;<span class="op" id="7375573">*</span><span class="ident" id="7375574">testing</span><span class="op" id="7375581">.</span><span class="ident" id="7375582">T</span><span class="op" id="7375583">)</span>&nbsp;<span class="op" id="7375585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375588">if</span>&nbsp;<span class="ident" id="7375591">testing</span><span class="op" id="7375598">.</span><span class="ident" id="7375599">Short</span><span class="op" id="7375604">(</span><span class="op" id="7375605">)</span>&nbsp;<span class="op" id="7375607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375611">t</span><span class="op" id="7375612">.</span><span class="ident" id="7375613">Skip</span><span class="op" id="7375617">(</span><span class="string" id="7375618">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7375655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375661">if</span>&nbsp;<span class="ident" id="7375664">runtime</span><span class="op" id="7375671">.</span><span class="ident" id="7375672">GOMAXPROCS</span><span class="op" id="7375682">(</span><span class="num" id="7375683">0</span><span class="op" id="7375684">)</span>&nbsp;<span class="op" id="7375686">&gt;</span>&nbsp;<span class="num" id="7375688">1</span>&nbsp;<span class="op" id="7375690">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375694">t</span><span class="op" id="7375695">.</span><span class="ident" id="7375696">Skip</span><span class="op" id="7375700">(</span><span class="string" id="7375701">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7375725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375732">const</span>&nbsp;<span class="ident" id="7375738">N</span>&nbsp;<span class="op" id="7375740">=</span>&nbsp;<span class="num" id="7375742">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375749">var</span>&nbsp;<span class="ident" id="7375753">buf</span>&nbsp;<span class="ident" id="7375757">bytes</span><span class="op" id="7375762">.</span><span class="ident" id="7375763">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375771">enc</span>&nbsp;<span class="op" id="7375775">:=</span>&nbsp;<span class="ident" id="7375778">NewEncoder</span><span class="op" id="7375788">(</span><span class="op" id="7375789">&amp;</span><span class="ident" id="7375790">buf</span><span class="op" id="7375793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375796">bench</span>&nbsp;<span class="op" id="7375802">:=</span>&nbsp;<span class="op" id="7375805">&amp;</span><span class="ident" id="7375806">Bench</span><span class="op" id="7375811">{</span><span class="num" id="7375812">7</span><span class="op" id="7375813">,</span>&nbsp;<span class="num" id="7375815">3.2</span><span class="op" id="7375818">,</span>&nbsp;<span class="string" id="7375820">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7375837">,</span>&nbsp;<span class="op" id="7375839">[</span><span class="op" id="7375840">]</span><span class="builtintype" id="7375841">byte</span><span class="op" id="7375845">(</span><span class="string" id="7375846">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7375864">)</span><span class="op" id="7375865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375869">allocs</span>&nbsp;<span class="op" id="7375876">:=</span>&nbsp;<span class="ident" id="7375879">testing</span><span class="op" id="7375886">.</span><span class="ident" id="7375887">AllocsPerRun</span><span class="op" id="7375899">(</span><span class="ident" id="7375900">N</span><span class="op" id="7375901">,</span>&nbsp;<span class="keyword" id="7375903">func</span><span class="op" id="7375907">(</span><span class="op" id="7375908">)</span>&nbsp;<span class="op" id="7375910">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375914">err</span>&nbsp;<span class="op" id="7375918">:=</span>&nbsp;<span class="ident" id="7375921">enc</span><span class="op" id="7375924">.</span><span class="ident" id="7375925">Encode</span><span class="op" id="7375931">(</span><span class="ident" id="7375932">bench</span><span class="op" id="7375937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375941">if</span>&nbsp;<span class="ident" id="7375944">err</span>&nbsp;<span class="op" id="7375948">!=</span>&nbsp;<span class="ident" id="7375951">nil</span>&nbsp;<span class="op" id="7375955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375960">t</span><span class="op" id="7375961">.</span><span class="ident" id="7375962">Fatal</span><span class="op" id="7375967">(</span><span class="string" id="7375968">&#34;encode:&#34;</span><span class="op" id="7375977">,</span>&nbsp;<span class="ident" id="7375979">err</span><span class="op" id="7375982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375989">}</span><span class="op" id="7375990">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375993">if</span>&nbsp;<span class="ident" id="7375996">allocs</span>&nbsp;<span class="op" id="7376003">!=</span>&nbsp;<span class="num" id="7376006">0</span>&nbsp;<span class="op" id="7376008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376012">t</span><span class="op" id="7376013">.</span><span class="ident" id="7376014">Fatalf</span><span class="op" id="7376020">(</span><span class="string" id="7376021">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="7376071">,</span>&nbsp;<span class="ident" id="7376073">allocs</span><span class="op" id="7376079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376082">}</span><br>
<span class="lineno"></span><span class="op" id="7376084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="7376087">func</span>&nbsp;<span class="ident" id="7376092">TestCountDecodeMallocs</span><span class="op" id="7376114">(</span><span class="ident" id="7376115">t</span>&nbsp;<span class="op" id="7376117">*</span><span class="ident" id="7376118">testing</span><span class="op" id="7376125">.</span><span class="ident" id="7376126">T</span><span class="op" id="7376127">)</span>&nbsp;<span class="op" id="7376129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376132">if</span>&nbsp;<span class="ident" id="7376135">testing</span><span class="op" id="7376142">.</span><span class="ident" id="7376143">Short</span><span class="op" id="7376148">(</span><span class="op" id="7376149">)</span>&nbsp;<span class="op" id="7376151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376155">t</span><span class="op" id="7376156">.</span><span class="ident" id="7376157">Skip</span><span class="op" id="7376161">(</span><span class="string" id="7376162">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7376199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376205">if</span>&nbsp;<span class="ident" id="7376208">runtime</span><span class="op" id="7376215">.</span><span class="ident" id="7376216">GOMAXPROCS</span><span class="op" id="7376226">(</span><span class="num" id="7376227">0</span><span class="op" id="7376228">)</span>&nbsp;<span class="op" id="7376230">&gt;</span>&nbsp;<span class="num" id="7376232">1</span>&nbsp;<span class="op" id="7376234">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376238">t</span><span class="op" id="7376239">.</span><span class="ident" id="7376240">Skip</span><span class="op" id="7376244">(</span><span class="string" id="7376245">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="7376269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376276">const</span>&nbsp;<span class="ident" id="7376282">N</span>&nbsp;<span class="op" id="7376284">=</span>&nbsp;<span class="num" id="7376286">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376293">var</span>&nbsp;<span class="ident" id="7376297">buf</span>&nbsp;<span class="ident" id="7376301">bytes</span><span class="op" id="7376306">.</span><span class="ident" id="7376307">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376315">enc</span>&nbsp;<span class="op" id="7376319">:=</span>&nbsp;<span class="ident" id="7376322">NewEncoder</span><span class="op" id="7376332">(</span><span class="op" id="7376333">&amp;</span><span class="ident" id="7376334">buf</span><span class="op" id="7376337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376340">bench</span>&nbsp;<span class="op" id="7376346">:=</span>&nbsp;<span class="op" id="7376349">&amp;</span><span class="ident" id="7376350">Bench</span><span class="op" id="7376355">{</span><span class="num" id="7376356">7</span><span class="op" id="7376357">,</span>&nbsp;<span class="num" id="7376359">3.2</span><span class="op" id="7376362">,</span>&nbsp;<span class="string" id="7376364">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="7376381">,</span>&nbsp;<span class="op" id="7376383">[</span><span class="op" id="7376384">]</span><span class="builtintype" id="7376385">byte</span><span class="op" id="7376389">(</span><span class="string" id="7376390">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="7376408">)</span><span class="op" id="7376409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376413">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376455">testing</span><span class="op" id="7376462">.</span><span class="ident" id="7376463">AllocsPerRun</span><span class="op" id="7376475">(</span><span class="ident" id="7376476">N</span><span class="op" id="7376477">,</span>&nbsp;<span class="keyword" id="7376479">func</span><span class="op" id="7376483">(</span><span class="op" id="7376484">)</span>&nbsp;<span class="op" id="7376486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376490">err</span>&nbsp;<span class="op" id="7376494">:=</span>&nbsp;<span class="ident" id="7376497">enc</span><span class="op" id="7376500">.</span><span class="ident" id="7376501">Encode</span><span class="op" id="7376507">(</span><span class="ident" id="7376508">bench</span><span class="op" id="7376513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376517">if</span>&nbsp;<span class="ident" id="7376520">err</span>&nbsp;<span class="op" id="7376524">!=</span>&nbsp;<span class="ident" id="7376527">nil</span>&nbsp;<span class="op" id="7376531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376536">t</span><span class="op" id="7376537">.</span><span class="ident" id="7376538">Fatal</span><span class="op" id="7376543">(</span><span class="string" id="7376544">&#34;encode:&#34;</span><span class="op" id="7376553">,</span>&nbsp;<span class="ident" id="7376555">err</span><span class="op" id="7376558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376562">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376565">}</span><span class="op" id="7376566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376570">dec</span>&nbsp;<span class="op" id="7376574">:=</span>&nbsp;<span class="ident" id="7376577">NewDecoder</span><span class="op" id="7376587">(</span><span class="op" id="7376588">&amp;</span><span class="ident" id="7376589">buf</span><span class="op" id="7376592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376595">allocs</span>&nbsp;<span class="op" id="7376602">:=</span>&nbsp;<span class="ident" id="7376605">testing</span><span class="op" id="7376612">.</span><span class="ident" id="7376613">AllocsPerRun</span><span class="op" id="7376625">(</span><span class="ident" id="7376626">N</span><span class="op" id="7376627">,</span>&nbsp;<span class="keyword" id="7376629">func</span><span class="op" id="7376633">(</span><span class="op" id="7376634">)</span>&nbsp;<span class="op" id="7376636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376640">*</span><span class="ident" id="7376641">bench</span>&nbsp;<span class="op" id="7376647">=</span>&nbsp;<span class="ident" id="7376649">Bench</span><span class="op" id="7376654">{</span><span class="op" id="7376655">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376659">err</span>&nbsp;<span class="op" id="7376663">:=</span>&nbsp;<span class="ident" id="7376666">dec</span><span class="op" id="7376669">.</span><span class="ident" id="7376670">Decode</span><span class="op" id="7376676">(</span><span class="op" id="7376677">&amp;</span><span class="ident" id="7376678">bench</span><span class="op" id="7376683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376687">if</span>&nbsp;<span class="ident" id="7376690">err</span>&nbsp;<span class="op" id="7376694">!=</span>&nbsp;<span class="ident" id="7376697">nil</span>&nbsp;<span class="op" id="7376701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376706">t</span><span class="op" id="7376707">.</span><span class="ident" id="7376708">Fatal</span><span class="op" id="7376713">(</span><span class="string" id="7376714">&#34;decode:&#34;</span><span class="op" id="7376723">,</span>&nbsp;<span class="ident" id="7376725">err</span><span class="op" id="7376728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376735">}</span><span class="op" id="7376736">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376739">if</span>&nbsp;<span class="ident" id="7376742">allocs</span>&nbsp;<span class="op" id="7376749">!=</span>&nbsp;<span class="num" id="7376752">4</span>&nbsp;<span class="op" id="7376754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376758">t</span><span class="op" id="7376759">.</span><span class="ident" id="7376760">Fatalf</span><span class="op" id="7376766">(</span><span class="string" id="7376767">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="7376817">,</span>&nbsp;<span class="ident" id="7376819">allocs</span><span class="op" id="7376825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376828">}</span><br>
<span class="lineno"></span><span class="op" id="7376830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7376833">func</span>&nbsp;<span class="ident" id="7376838">BenchmarkEncodeComplex128Slice</span><span class="op" id="7376868">(</span><span class="ident" id="7376869">b</span>&nbsp;<span class="op" id="7376871">*</span><span class="ident" id="7376872">testing</span><span class="op" id="7376879">.</span><span class="ident" id="7376880">B</span><span class="op" id="7376881">)</span>&nbsp;<span class="op" id="7376883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376886">var</span>&nbsp;<span class="ident" id="7376890">buf</span>&nbsp;<span class="ident" id="7376894">bytes</span><span class="op" id="7376899">.</span><span class="ident" id="7376900">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376908">enc</span>&nbsp;<span class="op" id="7376912">:=</span>&nbsp;<span class="ident" id="7376915">NewEncoder</span><span class="op" id="7376925">(</span><span class="op" id="7376926">&amp;</span><span class="ident" id="7376927">buf</span><span class="op" id="7376930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376933">a</span>&nbsp;<span class="op" id="7376935">:=</span>&nbsp;<span class="builtinfunc" id="7376938">make</span><span class="op" id="7376942">(</span><span class="op" id="7376943">[</span><span class="op" id="7376944">]</span><span class="builtintype" id="7376945">complex128</span><span class="op" id="7376955">,</span>&nbsp;<span class="num" id="7376957">1000</span><span class="op" id="7376961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376964">for</span>&nbsp;<span class="ident" id="7376968">i</span>&nbsp;<span class="op" id="7376970">:=</span>&nbsp;<span class="keyword" id="7376973">range</span>&nbsp;<span class="ident" id="7376979">a</span>&nbsp;<span class="op" id="7376981">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376985">a</span><span class="op" id="7376986">[</span><span class="ident" id="7376987">i</span><span class="op" id="7376988">]</span>&nbsp;<span class="op" id="7376990">=</span>&nbsp;<span class="num" id="7376992">1.2</span>&nbsp;<span class="op" id="7376996">+</span>&nbsp;<span class="num" id="7376998">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377007">b</span><span class="op" id="7377008">.</span><span class="ident" id="7377009">ResetTimer</span><span class="op" id="7377019">(</span><span class="op" id="7377020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377023">for</span>&nbsp;<span class="ident" id="7377027">i</span>&nbsp;<span class="op" id="7377029">:=</span>&nbsp;<span class="num" id="7377032">0</span><span class="op" id="7377033">;</span>&nbsp;<span class="ident" id="7377035">i</span>&nbsp;<span class="op" id="7377037">&lt;</span>&nbsp;<span class="ident" id="7377039">b</span><span class="op" id="7377040">.</span><span class="ident" id="7377041">N</span><span class="op" id="7377042">;</span>&nbsp;<span class="ident" id="7377044">i</span><span class="op" id="7377045">++</span>&nbsp;<span class="op" id="7377048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377052">buf</span><span class="op" id="7377055">.</span><span class="ident" id="7377056">Reset</span><span class="op" id="7377061">(</span><span class="op" id="7377062">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377066">err</span>&nbsp;<span class="op" id="7377070">:=</span>&nbsp;<span class="ident" id="7377073">enc</span><span class="op" id="7377076">.</span><span class="ident" id="7377077">Encode</span><span class="op" id="7377083">(</span><span class="ident" id="7377084">a</span><span class="op" id="7377085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377089">if</span>&nbsp;<span class="ident" id="7377092">err</span>&nbsp;<span class="op" id="7377096">!=</span>&nbsp;<span class="ident" id="7377099">nil</span>&nbsp;<span class="op" id="7377103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377108">b</span><span class="op" id="7377109">.</span><span class="ident" id="7377110">Fatal</span><span class="op" id="7377115">(</span><span class="ident" id="7377116">err</span><span class="op" id="7377119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377126">}</span><br>
<span class="lineno">150</span><span class="op" id="7377128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7377131">func</span>&nbsp;<span class="ident" id="7377136">BenchmarkEncodeFloat64Slice</span><span class="op" id="7377163">(</span><span class="ident" id="7377164">b</span>&nbsp;<span class="op" id="7377166">*</span><span class="ident" id="7377167">testing</span><span class="op" id="7377174">.</span><span class="ident" id="7377175">B</span><span class="op" id="7377176">)</span>&nbsp;<span class="op" id="7377178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377181">var</span>&nbsp;<span class="ident" id="7377185">buf</span>&nbsp;<span class="ident" id="7377189">bytes</span><span class="op" id="7377194">.</span><span class="ident" id="7377195">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377203">enc</span>&nbsp;<span class="op" id="7377207">:=</span>&nbsp;<span class="ident" id="7377210">NewEncoder</span><span class="op" id="7377220">(</span><span class="op" id="7377221">&amp;</span><span class="ident" id="7377222">buf</span><span class="op" id="7377225">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377228">a</span>&nbsp;<span class="op" id="7377230">:=</span>&nbsp;<span class="builtinfunc" id="7377233">make</span><span class="op" id="7377237">(</span><span class="op" id="7377238">[</span><span class="op" id="7377239">]</span><span class="builtintype" id="7377240">float64</span><span class="op" id="7377247">,</span>&nbsp;<span class="num" id="7377249">1000</span><span class="op" id="7377253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377256">for</span>&nbsp;<span class="ident" id="7377260">i</span>&nbsp;<span class="op" id="7377262">:=</span>&nbsp;<span class="keyword" id="7377265">range</span>&nbsp;<span class="ident" id="7377271">a</span>&nbsp;<span class="op" id="7377273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377277">a</span><span class="op" id="7377278">[</span><span class="ident" id="7377279">i</span><span class="op" id="7377280">]</span>&nbsp;<span class="op" id="7377282">=</span>&nbsp;<span class="num" id="7377284">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377295">b</span><span class="op" id="7377296">.</span><span class="ident" id="7377297">ResetTimer</span><span class="op" id="7377307">(</span><span class="op" id="7377308">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377311">for</span>&nbsp;<span class="ident" id="7377315">i</span>&nbsp;<span class="op" id="7377317">:=</span>&nbsp;<span class="num" id="7377320">0</span><span class="op" id="7377321">;</span>&nbsp;<span class="ident" id="7377323">i</span>&nbsp;<span class="op" id="7377325">&lt;</span>&nbsp;<span class="ident" id="7377327">b</span><span class="op" id="7377328">.</span><span class="ident" id="7377329">N</span><span class="op" id="7377330">;</span>&nbsp;<span class="ident" id="7377332">i</span><span class="op" id="7377333">++</span>&nbsp;<span class="op" id="7377336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377340">buf</span><span class="op" id="7377343">.</span><span class="ident" id="7377344">Reset</span><span class="op" id="7377349">(</span><span class="op" id="7377350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377354">err</span>&nbsp;<span class="op" id="7377358">:=</span>&nbsp;<span class="ident" id="7377361">enc</span><span class="op" id="7377364">.</span><span class="ident" id="7377365">Encode</span><span class="op" id="7377371">(</span><span class="ident" id="7377372">a</span><span class="op" id="7377373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377377">if</span>&nbsp;<span class="ident" id="7377380">err</span>&nbsp;<span class="op" id="7377384">!=</span>&nbsp;<span class="ident" id="7377387">nil</span>&nbsp;<span class="op" id="7377391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377396">b</span><span class="op" id="7377397">.</span><span class="ident" id="7377398">Fatal</span><span class="op" id="7377403">(</span><span class="ident" id="7377404">err</span><span class="op" id="7377407">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377414">}</span><br>
<span class="lineno"></span><span class="op" id="7377416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7377419">func</span>&nbsp;<span class="ident" id="7377424">BenchmarkEncodeInt32Slice</span><span class="op" id="7377449">(</span><span class="ident" id="7377450">b</span>&nbsp;<span class="op" id="7377452">*</span><span class="ident" id="7377453">testing</span><span class="op" id="7377460">.</span><span class="ident" id="7377461">B</span><span class="op" id="7377462">)</span>&nbsp;<span class="op" id="7377464">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377467">var</span>&nbsp;<span class="ident" id="7377471">buf</span>&nbsp;<span class="ident" id="7377475">bytes</span><span class="op" id="7377480">.</span><span class="ident" id="7377481">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377489">enc</span>&nbsp;<span class="op" id="7377493">:=</span>&nbsp;<span class="ident" id="7377496">NewEncoder</span><span class="op" id="7377506">(</span><span class="op" id="7377507">&amp;</span><span class="ident" id="7377508">buf</span><span class="op" id="7377511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377514">a</span>&nbsp;<span class="op" id="7377516">:=</span>&nbsp;<span class="builtinfunc" id="7377519">make</span><span class="op" id="7377523">(</span><span class="op" id="7377524">[</span><span class="op" id="7377525">]</span><span class="builtintype" id="7377526">int32</span><span class="op" id="7377531">,</span>&nbsp;<span class="num" id="7377533">1000</span><span class="op" id="7377537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377540">for</span>&nbsp;<span class="ident" id="7377544">i</span>&nbsp;<span class="op" id="7377546">:=</span>&nbsp;<span class="keyword" id="7377549">range</span>&nbsp;<span class="ident" id="7377555">a</span>&nbsp;<span class="op" id="7377557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377561">a</span><span class="op" id="7377562">[</span><span class="ident" id="7377563">i</span><span class="op" id="7377564">]</span>&nbsp;<span class="op" id="7377566">=</span>&nbsp;<span class="num" id="7377568">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377577">b</span><span class="op" id="7377578">.</span><span class="ident" id="7377579">ResetTimer</span><span class="op" id="7377589">(</span><span class="op" id="7377590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377593">for</span>&nbsp;<span class="ident" id="7377597">i</span>&nbsp;<span class="op" id="7377599">:=</span>&nbsp;<span class="num" id="7377602">0</span><span class="op" id="7377603">;</span>&nbsp;<span class="ident" id="7377605">i</span>&nbsp;<span class="op" id="7377607">&lt;</span>&nbsp;<span class="ident" id="7377609">b</span><span class="op" id="7377610">.</span><span class="ident" id="7377611">N</span><span class="op" id="7377612">;</span>&nbsp;<span class="ident" id="7377614">i</span><span class="op" id="7377615">++</span>&nbsp;<span class="op" id="7377618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377622">buf</span><span class="op" id="7377625">.</span><span class="ident" id="7377626">Reset</span><span class="op" id="7377631">(</span><span class="op" id="7377632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377636">err</span>&nbsp;<span class="op" id="7377640">:=</span>&nbsp;<span class="ident" id="7377643">enc</span><span class="op" id="7377646">.</span><span class="ident" id="7377647">Encode</span><span class="op" id="7377653">(</span><span class="ident" id="7377654">a</span><span class="op" id="7377655">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377659">if</span>&nbsp;<span class="ident" id="7377662">err</span>&nbsp;<span class="op" id="7377666">!=</span>&nbsp;<span class="ident" id="7377669">nil</span>&nbsp;<span class="op" id="7377673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377678">b</span><span class="op" id="7377679">.</span><span class="ident" id="7377680">Fatal</span><span class="op" id="7377685">(</span><span class="ident" id="7377686">err</span><span class="op" id="7377689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377696">}</span><br>
<span class="lineno"></span><span class="op" id="7377698">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7377701">func</span>&nbsp;<span class="ident" id="7377706">BenchmarkEncodeStringSlice</span><span class="op" id="7377732">(</span><span class="ident" id="7377733">b</span>&nbsp;<span class="op" id="7377735">*</span><span class="ident" id="7377736">testing</span><span class="op" id="7377743">.</span><span class="ident" id="7377744">B</span><span class="op" id="7377745">)</span>&nbsp;<span class="op" id="7377747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377750">var</span>&nbsp;<span class="ident" id="7377754">buf</span>&nbsp;<span class="ident" id="7377758">bytes</span><span class="op" id="7377763">.</span><span class="ident" id="7377764">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377772">enc</span>&nbsp;<span class="op" id="7377776">:=</span>&nbsp;<span class="ident" id="7377779">NewEncoder</span><span class="op" id="7377789">(</span><span class="op" id="7377790">&amp;</span><span class="ident" id="7377791">buf</span><span class="op" id="7377794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377797">a</span>&nbsp;<span class="op" id="7377799">:=</span>&nbsp;<span class="builtinfunc" id="7377802">make</span><span class="op" id="7377806">(</span><span class="op" id="7377807">[</span><span class="op" id="7377808">]</span><span class="builtintype" id="7377809">string</span><span class="op" id="7377815">,</span>&nbsp;<span class="num" id="7377817">1000</span><span class="op" id="7377821">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377824">for</span>&nbsp;<span class="ident" id="7377828">i</span>&nbsp;<span class="op" id="7377830">:=</span>&nbsp;<span class="keyword" id="7377833">range</span>&nbsp;<span class="ident" id="7377839">a</span>&nbsp;<span class="op" id="7377841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377845">a</span><span class="op" id="7377846">[</span><span class="ident" id="7377847">i</span><span class="op" id="7377848">]</span>&nbsp;<span class="op" id="7377850">=</span>&nbsp;<span class="string" id="7377852">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377874">b</span><span class="op" id="7377875">.</span><span class="ident" id="7377876">ResetTimer</span><span class="op" id="7377886">(</span><span class="op" id="7377887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377890">for</span>&nbsp;<span class="ident" id="7377894">i</span>&nbsp;<span class="op" id="7377896">:=</span>&nbsp;<span class="num" id="7377899">0</span><span class="op" id="7377900">;</span>&nbsp;<span class="ident" id="7377902">i</span>&nbsp;<span class="op" id="7377904">&lt;</span>&nbsp;<span class="ident" id="7377906">b</span><span class="op" id="7377907">.</span><span class="ident" id="7377908">N</span><span class="op" id="7377909">;</span>&nbsp;<span class="ident" id="7377911">i</span><span class="op" id="7377912">++</span>&nbsp;<span class="op" id="7377915">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377919">buf</span><span class="op" id="7377922">.</span><span class="ident" id="7377923">Reset</span><span class="op" id="7377928">(</span><span class="op" id="7377929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377933">err</span>&nbsp;<span class="op" id="7377937">:=</span>&nbsp;<span class="ident" id="7377940">enc</span><span class="op" id="7377943">.</span><span class="ident" id="7377944">Encode</span><span class="op" id="7377950">(</span><span class="ident" id="7377951">a</span><span class="op" id="7377952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377956">if</span>&nbsp;<span class="ident" id="7377959">err</span>&nbsp;<span class="op" id="7377963">!=</span>&nbsp;<span class="ident" id="7377966">nil</span>&nbsp;<span class="op" id="7377970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377975">b</span><span class="op" id="7377976">.</span><span class="ident" id="7377977">Fatal</span><span class="op" id="7377982">(</span><span class="ident" id="7377983">err</span><span class="op" id="7377986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377990">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377993">}</span><br>
<span class="lineno"></span><span class="op" id="7377995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7377998">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="7378044">type</span>&nbsp;<span class="ident" id="7378049">benchmarkBuf</span>&nbsp;<span class="keyword" id="7378062">struct</span>&nbsp;<span class="op" id="7378069">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378072">offset</span>&nbsp;<span class="builtintype" id="7378079">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378084">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7378091">[</span><span class="op" id="7378092">]</span><span class="builtintype" id="7378093">byte</span><br>
<span class="lineno"></span><span class="op" id="7378098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7378101">func</span>&nbsp;<span class="op" id="7378106">(</span><span class="ident" id="7378107">b</span>&nbsp;<span class="op" id="7378109">*</span><span class="ident" id="7378110">benchmarkBuf</span><span class="op" id="7378122">)</span>&nbsp;<span class="ident" id="7378124">Read</span><span class="op" id="7378128">(</span><span class="ident" id="7378129">p</span>&nbsp;<span class="op" id="7378131">[</span><span class="op" id="7378132">]</span><span class="builtintype" id="7378133">byte</span><span class="op" id="7378137">)</span>&nbsp;<span class="op" id="7378139">(</span><span class="ident" id="7378140">n</span>&nbsp;<span class="builtintype" id="7378142">int</span><span class="op" id="7378145">,</span>&nbsp;<span class="ident" id="7378147">err</span>&nbsp;<span class="builtintype" id="7378151">error</span><span class="op" id="7378156">)</span>&nbsp;<span class="op" id="7378158">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378161">n</span>&nbsp;<span class="op" id="7378163">=</span>&nbsp;<span class="builtinfunc" id="7378165">copy</span><span class="op" id="7378169">(</span><span class="ident" id="7378170">p</span><span class="op" id="7378171">,</span>&nbsp;<span class="ident" id="7378173">b</span><span class="op" id="7378174">.</span><span class="ident" id="7378175">data</span><span class="op" id="7378179">[</span><span class="ident" id="7378180">b</span><span class="op" id="7378181">.</span><span class="ident" id="7378182">offset</span><span class="op" id="7378188">:</span><span class="op" id="7378189">]</span><span class="op" id="7378190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378193">if</span>&nbsp;<span class="ident" id="7378196">n</span>&nbsp;<span class="op" id="7378198">==</span>&nbsp;<span class="num" id="7378201">0</span>&nbsp;<span class="op" id="7378203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378207">return</span>&nbsp;<span class="num" id="7378214">0</span><span class="op" id="7378215">,</span>&nbsp;<span class="ident" id="7378217">io</span><span class="op" id="7378219">.</span><span class="ident" id="7378220">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378228">b</span><span class="op" id="7378229">.</span><span class="ident" id="7378230">offset</span>&nbsp;<span class="op" id="7378237">+=</span>&nbsp;<span class="ident" id="7378240">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378243">return</span><br>
<span class="lineno"></span><span class="op" id="7378250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7378253">func</span>&nbsp;<span class="op" id="7378258">(</span><span class="ident" id="7378259">b</span>&nbsp;<span class="op" id="7378261">*</span><span class="ident" id="7378262">benchmarkBuf</span><span class="op" id="7378274">)</span>&nbsp;<span class="ident" id="7378276">ReadByte</span><span class="op" id="7378284">(</span><span class="op" id="7378285">)</span>&nbsp;<span class="op" id="7378287">(</span><span class="ident" id="7378288">c</span>&nbsp;<span class="builtintype" id="7378290">byte</span><span class="op" id="7378294">,</span>&nbsp;<span class="ident" id="7378296">err</span>&nbsp;<span class="builtintype" id="7378300">error</span><span class="op" id="7378305">)</span>&nbsp;<span class="op" id="7378307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378310">if</span>&nbsp;<span class="ident" id="7378313">b</span><span class="op" id="7378314">.</span><span class="ident" id="7378315">offset</span>&nbsp;<span class="op" id="7378322">&gt;=</span>&nbsp;<span class="builtinfunc" id="7378325">len</span><span class="op" id="7378328">(</span><span class="ident" id="7378329">b</span><span class="op" id="7378330">.</span><span class="ident" id="7378331">data</span><span class="op" id="7378335">)</span>&nbsp;<span class="op" id="7378337">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378341">return</span>&nbsp;<span class="num" id="7378348">0</span><span class="op" id="7378349">,</span>&nbsp;<span class="ident" id="7378351">io</span><span class="op" id="7378353">.</span><span class="ident" id="7378354">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378362">c</span>&nbsp;<span class="op" id="7378364">=</span>&nbsp;<span class="ident" id="7378366">b</span><span class="op" id="7378367">.</span><span class="ident" id="7378368">data</span><span class="op" id="7378372">[</span><span class="ident" id="7378373">b</span><span class="op" id="7378374">.</span><span class="ident" id="7378375">offset</span><span class="op" id="7378381">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378384">b</span><span class="op" id="7378385">.</span><span class="ident" id="7378386">offset</span><span class="op" id="7378392">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378396">return</span><br>
<span class="lineno">225</span><span class="op" id="7378403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7378406">func</span>&nbsp;<span class="op" id="7378411">(</span><span class="ident" id="7378412">b</span>&nbsp;<span class="op" id="7378414">*</span><span class="ident" id="7378415">benchmarkBuf</span><span class="op" id="7378427">)</span>&nbsp;<span class="ident" id="7378429">reset</span><span class="op" id="7378434">(</span><span class="op" id="7378435">)</span>&nbsp;<span class="op" id="7378437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378440">b</span><span class="op" id="7378441">.</span><span class="ident" id="7378442">offset</span>&nbsp;<span class="op" id="7378449">=</span>&nbsp;<span class="num" id="7378451">0</span><br>
<span class="lineno"></span><span class="op" id="7378453">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7378456">func</span>&nbsp;<span class="ident" id="7378461">BenchmarkDecodeComplex128Slice</span><span class="op" id="7378491">(</span><span class="ident" id="7378492">b</span>&nbsp;<span class="op" id="7378494">*</span><span class="ident" id="7378495">testing</span><span class="op" id="7378502">.</span><span class="ident" id="7378503">B</span><span class="op" id="7378504">)</span>&nbsp;<span class="op" id="7378506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378509">var</span>&nbsp;<span class="ident" id="7378513">buf</span>&nbsp;<span class="ident" id="7378517">bytes</span><span class="op" id="7378522">.</span><span class="ident" id="7378523">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378531">enc</span>&nbsp;<span class="op" id="7378535">:=</span>&nbsp;<span class="ident" id="7378538">NewEncoder</span><span class="op" id="7378548">(</span><span class="op" id="7378549">&amp;</span><span class="ident" id="7378550">buf</span><span class="op" id="7378553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378556">a</span>&nbsp;<span class="op" id="7378558">:=</span>&nbsp;<span class="builtinfunc" id="7378561">make</span><span class="op" id="7378565">(</span><span class="op" id="7378566">[</span><span class="op" id="7378567">]</span><span class="builtintype" id="7378568">complex128</span><span class="op" id="7378578">,</span>&nbsp;<span class="num" id="7378580">1000</span><span class="op" id="7378584">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378587">for</span>&nbsp;<span class="ident" id="7378591">i</span>&nbsp;<span class="op" id="7378593">:=</span>&nbsp;<span class="keyword" id="7378596">range</span>&nbsp;<span class="ident" id="7378602">a</span>&nbsp;<span class="op" id="7378604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378608">a</span><span class="op" id="7378609">[</span><span class="ident" id="7378610">i</span><span class="op" id="7378611">]</span>&nbsp;<span class="op" id="7378613">=</span>&nbsp;<span class="num" id="7378615">1.2</span>&nbsp;<span class="op" id="7378619">+</span>&nbsp;<span class="num" id="7378621">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378630">err</span>&nbsp;<span class="op" id="7378634">:=</span>&nbsp;<span class="ident" id="7378637">enc</span><span class="op" id="7378640">.</span><span class="ident" id="7378641">Encode</span><span class="op" id="7378647">(</span><span class="ident" id="7378648">a</span><span class="op" id="7378649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378652">if</span>&nbsp;<span class="ident" id="7378655">err</span>&nbsp;<span class="op" id="7378659">!=</span>&nbsp;<span class="ident" id="7378662">nil</span>&nbsp;<span class="op" id="7378666">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378670">b</span><span class="op" id="7378671">.</span><span class="ident" id="7378672">Fatal</span><span class="op" id="7378677">(</span><span class="ident" id="7378678">err</span><span class="op" id="7378681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378687">x</span>&nbsp;<span class="op" id="7378689">:=</span>&nbsp;<span class="builtinfunc" id="7378692">make</span><span class="op" id="7378696">(</span><span class="op" id="7378697">[</span><span class="op" id="7378698">]</span><span class="builtintype" id="7378699">complex128</span><span class="op" id="7378709">,</span>&nbsp;<span class="num" id="7378711">1000</span><span class="op" id="7378715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378718">bbuf</span>&nbsp;<span class="op" id="7378723">:=</span>&nbsp;<span class="ident" id="7378726">benchmarkBuf</span><span class="op" id="7378738">{</span><span class="ident" id="7378739">data</span><span class="op" id="7378743">:</span>&nbsp;<span class="ident" id="7378745">buf</span><span class="op" id="7378748">.</span><span class="ident" id="7378749">Bytes</span><span class="op" id="7378754">(</span><span class="op" id="7378755">)</span><span class="op" id="7378756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378759">b</span><span class="op" id="7378760">.</span><span class="ident" id="7378761">ResetTimer</span><span class="op" id="7378771">(</span><span class="op" id="7378772">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378775">for</span>&nbsp;<span class="ident" id="7378779">i</span>&nbsp;<span class="op" id="7378781">:=</span>&nbsp;<span class="num" id="7378784">0</span><span class="op" id="7378785">;</span>&nbsp;<span class="ident" id="7378787">i</span>&nbsp;<span class="op" id="7378789">&lt;</span>&nbsp;<span class="ident" id="7378791">b</span><span class="op" id="7378792">.</span><span class="ident" id="7378793">N</span><span class="op" id="7378794">;</span>&nbsp;<span class="ident" id="7378796">i</span><span class="op" id="7378797">++</span>&nbsp;<span class="op" id="7378800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378804">bbuf</span><span class="op" id="7378808">.</span><span class="ident" id="7378809">reset</span><span class="op" id="7378814">(</span><span class="op" id="7378815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378819">dec</span>&nbsp;<span class="op" id="7378823">:=</span>&nbsp;<span class="ident" id="7378826">NewDecoder</span><span class="op" id="7378836">(</span><span class="op" id="7378837">&amp;</span><span class="ident" id="7378838">bbuf</span><span class="op" id="7378842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378846">err</span>&nbsp;<span class="op" id="7378850">:=</span>&nbsp;<span class="ident" id="7378853">dec</span><span class="op" id="7378856">.</span><span class="ident" id="7378857">Decode</span><span class="op" id="7378863">(</span><span class="op" id="7378864">&amp;</span><span class="ident" id="7378865">x</span><span class="op" id="7378866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378870">if</span>&nbsp;<span class="ident" id="7378873">err</span>&nbsp;<span class="op" id="7378877">!=</span>&nbsp;<span class="ident" id="7378880">nil</span>&nbsp;<span class="op" id="7378884">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378889">b</span><span class="op" id="7378890">.</span><span class="ident" id="7378891">Fatal</span><span class="op" id="7378896">(</span><span class="ident" id="7378897">i</span><span class="op" id="7378898">,</span>&nbsp;<span class="ident" id="7378900">err</span><span class="op" id="7378903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378910">}</span><br>
<span class="lineno"></span><span class="op" id="7378912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7378915">func</span>&nbsp;<span class="ident" id="7378920">BenchmarkDecodeFloat64Slice</span><span class="op" id="7378947">(</span><span class="ident" id="7378948">b</span>&nbsp;<span class="op" id="7378950">*</span><span class="ident" id="7378951">testing</span><span class="op" id="7378958">.</span><span class="ident" id="7378959">B</span><span class="op" id="7378960">)</span>&nbsp;<span class="op" id="7378962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378965">var</span>&nbsp;<span class="ident" id="7378969">buf</span>&nbsp;<span class="ident" id="7378973">bytes</span><span class="op" id="7378978">.</span><span class="ident" id="7378979">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378987">enc</span>&nbsp;<span class="op" id="7378991">:=</span>&nbsp;<span class="ident" id="7378994">NewEncoder</span><span class="op" id="7379004">(</span><span class="op" id="7379005">&amp;</span><span class="ident" id="7379006">buf</span><span class="op" id="7379009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379012">a</span>&nbsp;<span class="op" id="7379014">:=</span>&nbsp;<span class="builtinfunc" id="7379017">make</span><span class="op" id="7379021">(</span><span class="op" id="7379022">[</span><span class="op" id="7379023">]</span><span class="builtintype" id="7379024">float64</span><span class="op" id="7379031">,</span>&nbsp;<span class="num" id="7379033">1000</span><span class="op" id="7379037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379040">for</span>&nbsp;<span class="ident" id="7379044">i</span>&nbsp;<span class="op" id="7379046">:=</span>&nbsp;<span class="keyword" id="7379049">range</span>&nbsp;<span class="ident" id="7379055">a</span>&nbsp;<span class="op" id="7379057">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379061">a</span><span class="op" id="7379062">[</span><span class="ident" id="7379063">i</span><span class="op" id="7379064">]</span>&nbsp;<span class="op" id="7379066">=</span>&nbsp;<span class="num" id="7379068">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379079">err</span>&nbsp;<span class="op" id="7379083">:=</span>&nbsp;<span class="ident" id="7379086">enc</span><span class="op" id="7379089">.</span><span class="ident" id="7379090">Encode</span><span class="op" id="7379096">(</span><span class="ident" id="7379097">a</span><span class="op" id="7379098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379101">if</span>&nbsp;<span class="ident" id="7379104">err</span>&nbsp;<span class="op" id="7379108">!=</span>&nbsp;<span class="ident" id="7379111">nil</span>&nbsp;<span class="op" id="7379115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379119">b</span><span class="op" id="7379120">.</span><span class="ident" id="7379121">Fatal</span><span class="op" id="7379126">(</span><span class="ident" id="7379127">err</span><span class="op" id="7379130">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379136">x</span>&nbsp;<span class="op" id="7379138">:=</span>&nbsp;<span class="builtinfunc" id="7379141">make</span><span class="op" id="7379145">(</span><span class="op" id="7379146">[</span><span class="op" id="7379147">]</span><span class="builtintype" id="7379148">float64</span><span class="op" id="7379155">,</span>&nbsp;<span class="num" id="7379157">1000</span><span class="op" id="7379161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379164">bbuf</span>&nbsp;<span class="op" id="7379169">:=</span>&nbsp;<span class="ident" id="7379172">benchmarkBuf</span><span class="op" id="7379184">{</span><span class="ident" id="7379185">data</span><span class="op" id="7379189">:</span>&nbsp;<span class="ident" id="7379191">buf</span><span class="op" id="7379194">.</span><span class="ident" id="7379195">Bytes</span><span class="op" id="7379200">(</span><span class="op" id="7379201">)</span><span class="op" id="7379202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379205">b</span><span class="op" id="7379206">.</span><span class="ident" id="7379207">ResetTimer</span><span class="op" id="7379217">(</span><span class="op" id="7379218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379221">for</span>&nbsp;<span class="ident" id="7379225">i</span>&nbsp;<span class="op" id="7379227">:=</span>&nbsp;<span class="num" id="7379230">0</span><span class="op" id="7379231">;</span>&nbsp;<span class="ident" id="7379233">i</span>&nbsp;<span class="op" id="7379235">&lt;</span>&nbsp;<span class="ident" id="7379237">b</span><span class="op" id="7379238">.</span><span class="ident" id="7379239">N</span><span class="op" id="7379240">;</span>&nbsp;<span class="ident" id="7379242">i</span><span class="op" id="7379243">++</span>&nbsp;<span class="op" id="7379246">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379250">bbuf</span><span class="op" id="7379254">.</span><span class="ident" id="7379255">reset</span><span class="op" id="7379260">(</span><span class="op" id="7379261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379265">dec</span>&nbsp;<span class="op" id="7379269">:=</span>&nbsp;<span class="ident" id="7379272">NewDecoder</span><span class="op" id="7379282">(</span><span class="op" id="7379283">&amp;</span><span class="ident" id="7379284">bbuf</span><span class="op" id="7379288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379292">err</span>&nbsp;<span class="op" id="7379296">:=</span>&nbsp;<span class="ident" id="7379299">dec</span><span class="op" id="7379302">.</span><span class="ident" id="7379303">Decode</span><span class="op" id="7379309">(</span><span class="op" id="7379310">&amp;</span><span class="ident" id="7379311">x</span><span class="op" id="7379312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379316">if</span>&nbsp;<span class="ident" id="7379319">err</span>&nbsp;<span class="op" id="7379323">!=</span>&nbsp;<span class="ident" id="7379326">nil</span>&nbsp;<span class="op" id="7379330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379335">b</span><span class="op" id="7379336">.</span><span class="ident" id="7379337">Fatal</span><span class="op" id="7379342">(</span><span class="ident" id="7379343">i</span><span class="op" id="7379344">,</span>&nbsp;<span class="ident" id="7379346">err</span><span class="op" id="7379349">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379356">}</span><br>
<span class="lineno"></span><span class="op" id="7379358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7379361">func</span>&nbsp;<span class="ident" id="7379366">BenchmarkDecodeInt32Slice</span><span class="op" id="7379391">(</span><span class="ident" id="7379392">b</span>&nbsp;<span class="op" id="7379394">*</span><span class="ident" id="7379395">testing</span><span class="op" id="7379402">.</span><span class="ident" id="7379403">B</span><span class="op" id="7379404">)</span>&nbsp;<span class="op" id="7379406">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379409">var</span>&nbsp;<span class="ident" id="7379413">buf</span>&nbsp;<span class="ident" id="7379417">bytes</span><span class="op" id="7379422">.</span><span class="ident" id="7379423">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379431">enc</span>&nbsp;<span class="op" id="7379435">:=</span>&nbsp;<span class="ident" id="7379438">NewEncoder</span><span class="op" id="7379448">(</span><span class="op" id="7379449">&amp;</span><span class="ident" id="7379450">buf</span><span class="op" id="7379453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379456">a</span>&nbsp;<span class="op" id="7379458">:=</span>&nbsp;<span class="builtinfunc" id="7379461">make</span><span class="op" id="7379465">(</span><span class="op" id="7379466">[</span><span class="op" id="7379467">]</span><span class="builtintype" id="7379468">int32</span><span class="op" id="7379473">,</span>&nbsp;<span class="num" id="7379475">1000</span><span class="op" id="7379479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379482">for</span>&nbsp;<span class="ident" id="7379486">i</span>&nbsp;<span class="op" id="7379488">:=</span>&nbsp;<span class="keyword" id="7379491">range</span>&nbsp;<span class="ident" id="7379497">a</span>&nbsp;<span class="op" id="7379499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379503">a</span><span class="op" id="7379504">[</span><span class="ident" id="7379505">i</span><span class="op" id="7379506">]</span>&nbsp;<span class="op" id="7379508">=</span>&nbsp;<span class="num" id="7379510">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379519">err</span>&nbsp;<span class="op" id="7379523">:=</span>&nbsp;<span class="ident" id="7379526">enc</span><span class="op" id="7379529">.</span><span class="ident" id="7379530">Encode</span><span class="op" id="7379536">(</span><span class="ident" id="7379537">a</span><span class="op" id="7379538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379541">if</span>&nbsp;<span class="ident" id="7379544">err</span>&nbsp;<span class="op" id="7379548">!=</span>&nbsp;<span class="ident" id="7379551">nil</span>&nbsp;<span class="op" id="7379555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379559">b</span><span class="op" id="7379560">.</span><span class="ident" id="7379561">Fatal</span><span class="op" id="7379566">(</span><span class="ident" id="7379567">err</span><span class="op" id="7379570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379573">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379576">x</span>&nbsp;<span class="op" id="7379578">:=</span>&nbsp;<span class="builtinfunc" id="7379581">make</span><span class="op" id="7379585">(</span><span class="op" id="7379586">[</span><span class="op" id="7379587">]</span><span class="builtintype" id="7379588">int32</span><span class="op" id="7379593">,</span>&nbsp;<span class="num" id="7379595">1000</span><span class="op" id="7379599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379602">bbuf</span>&nbsp;<span class="op" id="7379607">:=</span>&nbsp;<span class="ident" id="7379610">benchmarkBuf</span><span class="op" id="7379622">{</span><span class="ident" id="7379623">data</span><span class="op" id="7379627">:</span>&nbsp;<span class="ident" id="7379629">buf</span><span class="op" id="7379632">.</span><span class="ident" id="7379633">Bytes</span><span class="op" id="7379638">(</span><span class="op" id="7379639">)</span><span class="op" id="7379640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379643">b</span><span class="op" id="7379644">.</span><span class="ident" id="7379645">ResetTimer</span><span class="op" id="7379655">(</span><span class="op" id="7379656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379659">for</span>&nbsp;<span class="ident" id="7379663">i</span>&nbsp;<span class="op" id="7379665">:=</span>&nbsp;<span class="num" id="7379668">0</span><span class="op" id="7379669">;</span>&nbsp;<span class="ident" id="7379671">i</span>&nbsp;<span class="op" id="7379673">&lt;</span>&nbsp;<span class="ident" id="7379675">b</span><span class="op" id="7379676">.</span><span class="ident" id="7379677">N</span><span class="op" id="7379678">;</span>&nbsp;<span class="ident" id="7379680">i</span><span class="op" id="7379681">++</span>&nbsp;<span class="op" id="7379684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379688">bbuf</span><span class="op" id="7379692">.</span><span class="ident" id="7379693">reset</span><span class="op" id="7379698">(</span><span class="op" id="7379699">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379703">dec</span>&nbsp;<span class="op" id="7379707">:=</span>&nbsp;<span class="ident" id="7379710">NewDecoder</span><span class="op" id="7379720">(</span><span class="op" id="7379721">&amp;</span><span class="ident" id="7379722">bbuf</span><span class="op" id="7379726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379730">err</span>&nbsp;<span class="op" id="7379734">:=</span>&nbsp;<span class="ident" id="7379737">dec</span><span class="op" id="7379740">.</span><span class="ident" id="7379741">Decode</span><span class="op" id="7379747">(</span><span class="op" id="7379748">&amp;</span><span class="ident" id="7379749">x</span><span class="op" id="7379750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379754">if</span>&nbsp;<span class="ident" id="7379757">err</span>&nbsp;<span class="op" id="7379761">!=</span>&nbsp;<span class="ident" id="7379764">nil</span>&nbsp;<span class="op" id="7379768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379773">b</span><span class="op" id="7379774">.</span><span class="ident" id="7379775">Fatal</span><span class="op" id="7379780">(</span><span class="ident" id="7379781">i</span><span class="op" id="7379782">,</span>&nbsp;<span class="ident" id="7379784">err</span><span class="op" id="7379787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379791">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379794">}</span><br>
<span class="lineno"></span><span class="op" id="7379796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7379799">func</span>&nbsp;<span class="ident" id="7379804">BenchmarkDecodeStringSlice</span><span class="op" id="7379830">(</span><span class="ident" id="7379831">b</span>&nbsp;<span class="op" id="7379833">*</span><span class="ident" id="7379834">testing</span><span class="op" id="7379841">.</span><span class="ident" id="7379842">B</span><span class="op" id="7379843">)</span>&nbsp;<span class="op" id="7379845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379848">var</span>&nbsp;<span class="ident" id="7379852">buf</span>&nbsp;<span class="ident" id="7379856">bytes</span><span class="op" id="7379861">.</span><span class="ident" id="7379862">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379870">enc</span>&nbsp;<span class="op" id="7379874">:=</span>&nbsp;<span class="ident" id="7379877">NewEncoder</span><span class="op" id="7379887">(</span><span class="op" id="7379888">&amp;</span><span class="ident" id="7379889">buf</span><span class="op" id="7379892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379895">a</span>&nbsp;<span class="op" id="7379897">:=</span>&nbsp;<span class="builtinfunc" id="7379900">make</span><span class="op" id="7379904">(</span><span class="op" id="7379905">[</span><span class="op" id="7379906">]</span><span class="builtintype" id="7379907">string</span><span class="op" id="7379913">,</span>&nbsp;<span class="num" id="7379915">1000</span><span class="op" id="7379919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379922">for</span>&nbsp;<span class="ident" id="7379926">i</span>&nbsp;<span class="op" id="7379928">:=</span>&nbsp;<span class="keyword" id="7379931">range</span>&nbsp;<span class="ident" id="7379937">a</span>&nbsp;<span class="op" id="7379939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379943">a</span><span class="op" id="7379944">[</span><span class="ident" id="7379945">i</span><span class="op" id="7379946">]</span>&nbsp;<span class="op" id="7379948">=</span>&nbsp;<span class="string" id="7379950">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379969">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379972">err</span>&nbsp;<span class="op" id="7379976">:=</span>&nbsp;<span class="ident" id="7379979">enc</span><span class="op" id="7379982">.</span><span class="ident" id="7379983">Encode</span><span class="op" id="7379989">(</span><span class="ident" id="7379990">a</span><span class="op" id="7379991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379994">if</span>&nbsp;<span class="ident" id="7379997">err</span>&nbsp;<span class="op" id="7380001">!=</span>&nbsp;<span class="ident" id="7380004">nil</span>&nbsp;<span class="op" id="7380008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380012">b</span><span class="op" id="7380013">.</span><span class="ident" id="7380014">Fatal</span><span class="op" id="7380019">(</span><span class="ident" id="7380020">err</span><span class="op" id="7380023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380029">x</span>&nbsp;<span class="op" id="7380031">:=</span>&nbsp;<span class="builtinfunc" id="7380034">make</span><span class="op" id="7380038">(</span><span class="op" id="7380039">[</span><span class="op" id="7380040">]</span><span class="builtintype" id="7380041">string</span><span class="op" id="7380047">,</span>&nbsp;<span class="num" id="7380049">1000</span><span class="op" id="7380053">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380056">bbuf</span>&nbsp;<span class="op" id="7380061">:=</span>&nbsp;<span class="ident" id="7380064">benchmarkBuf</span><span class="op" id="7380076">{</span><span class="ident" id="7380077">data</span><span class="op" id="7380081">:</span>&nbsp;<span class="ident" id="7380083">buf</span><span class="op" id="7380086">.</span><span class="ident" id="7380087">Bytes</span><span class="op" id="7380092">(</span><span class="op" id="7380093">)</span><span class="op" id="7380094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380097">b</span><span class="op" id="7380098">.</span><span class="ident" id="7380099">ResetTimer</span><span class="op" id="7380109">(</span><span class="op" id="7380110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380113">for</span>&nbsp;<span class="ident" id="7380117">i</span>&nbsp;<span class="op" id="7380119">:=</span>&nbsp;<span class="num" id="7380122">0</span><span class="op" id="7380123">;</span>&nbsp;<span class="ident" id="7380125">i</span>&nbsp;<span class="op" id="7380127">&lt;</span>&nbsp;<span class="ident" id="7380129">b</span><span class="op" id="7380130">.</span><span class="ident" id="7380131">N</span><span class="op" id="7380132">;</span>&nbsp;<span class="ident" id="7380134">i</span><span class="op" id="7380135">++</span>&nbsp;<span class="op" id="7380138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380142">bbuf</span><span class="op" id="7380146">.</span><span class="ident" id="7380147">reset</span><span class="op" id="7380152">(</span><span class="op" id="7380153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380157">dec</span>&nbsp;<span class="op" id="7380161">:=</span>&nbsp;<span class="ident" id="7380164">NewDecoder</span><span class="op" id="7380174">(</span><span class="op" id="7380175">&amp;</span><span class="ident" id="7380176">bbuf</span><span class="op" id="7380180">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380184">err</span>&nbsp;<span class="op" id="7380188">:=</span>&nbsp;<span class="ident" id="7380191">dec</span><span class="op" id="7380194">.</span><span class="ident" id="7380195">Decode</span><span class="op" id="7380201">(</span><span class="op" id="7380202">&amp;</span><span class="ident" id="7380203">x</span><span class="op" id="7380204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380208">if</span>&nbsp;<span class="ident" id="7380211">err</span>&nbsp;<span class="op" id="7380215">!=</span>&nbsp;<span class="ident" id="7380218">nil</span>&nbsp;<span class="op" id="7380222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380227">b</span><span class="op" id="7380228">.</span><span class="ident" id="7380229">Fatal</span><span class="op" id="7380234">(</span><span class="ident" id="7380235">i</span><span class="op" id="7380236">,</span>&nbsp;<span class="ident" id="7380238">err</span><span class="op" id="7380241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380248">}</span><br>
<span class="lineno">325</span><span class="op" id="7380250">}</span>
</div>
</body>
</html>
