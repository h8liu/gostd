<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7299807">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7299862">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7299916">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7299967">package</span>&nbsp;<span class="ident" id="7299975">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7299980">import</span>&nbsp;<span class="op" id="7299987">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7299990">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7299999">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300013">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300020">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300026">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300039">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300045">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300056">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300067">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300078">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7300085">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7300088">type</span>&nbsp;<span class="ident" id="7300093">untarTest</span>&nbsp;<span class="keyword" id="7300103">struct</span>&nbsp;<span class="op" id="7300110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300113">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7300121">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300129">headers</span>&nbsp;<span class="op" id="7300137">[</span><span class="op" id="7300138">]</span><span class="op" id="7300139">*</span><span class="ident" id="7300140"><a href="/archive/tar/common.go.html#5196742">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300148">cksums</span>&nbsp;&nbsp;<span class="op" id="7300156">[</span><span class="op" id="7300157">]</span><span class="builtintype" id="7300158">string</span><br>
<span class="lineno"></span><span class="op" id="7300165">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7300168">var</span>&nbsp;<span class="ident" id="7300172">gnuTarTest</span>&nbsp;<span class="op" id="7300183">=</span>&nbsp;<span class="op" id="7300185">&amp;</span><span class="ident" id="7300186"><a href="/archive/tar/reader_test.go.html#7300093">untarTest</a></span><span class="op" id="7300195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300198">file</span><span class="op" id="7300202">:</span>&nbsp;<span class="string" id="7300204">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7300222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300225">headers</span><span class="op" id="7300232">:</span>&nbsp;<span class="op" id="7300234">[</span><span class="op" id="7300235">]</span><span class="op" id="7300236">*</span><span class="ident" id="7300237"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7300243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300247">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300252">Name</span><span class="op" id="7300256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300262">&#34;small.txt&#34;</span><span class="op" id="7300273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300278">Mode</span><span class="op" id="7300282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300288">0640</span><span class="op" id="7300292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300297">Uid</span><span class="op" id="7300300">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300307">73025</span><span class="op" id="7300312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300317">Gid</span><span class="op" id="7300320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300327">5000</span><span class="op" id="7300331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300336">Size</span><span class="op" id="7300340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300346">5</span><span class="op" id="7300347">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300352">ModTime</span><span class="op" id="7300359">:</span>&nbsp;&nbsp;<span class="ident" id="7300362"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7300366">.</span><span class="ident" id="7300367">Unix</span><span class="op" id="7300371">(</span><span class="num" id="7300372">1244428340</span><span class="op" id="7300382">,</span>&nbsp;<span class="num" id="7300384">0</span><span class="op" id="7300385">)</span><span class="op" id="7300386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300391">Typeflag</span><span class="op" id="7300399">:</span>&nbsp;<span class="string" id="7300401">&#39;0&#39;</span><span class="op" id="7300404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300409">Uname</span><span class="op" id="7300414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300419">&#34;dsymonds&#34;</span><span class="op" id="7300429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300434">Gname</span><span class="op" id="7300439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300444">&#34;eng&#34;</span><span class="op" id="7300449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300453">}</span><span class="op" id="7300454">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300463">Name</span><span class="op" id="7300467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300473">&#34;small2.txt&#34;</span><span class="op" id="7300485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300490">Mode</span><span class="op" id="7300494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300500">0640</span><span class="op" id="7300504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300509">Uid</span><span class="op" id="7300512">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300519">73025</span><span class="op" id="7300524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300529">Gid</span><span class="op" id="7300532">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300539">5000</span><span class="op" id="7300543">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300548">Size</span><span class="op" id="7300552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300558">11</span><span class="op" id="7300560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300565">ModTime</span><span class="op" id="7300572">:</span>&nbsp;&nbsp;<span class="ident" id="7300575"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7300579">.</span><span class="ident" id="7300580">Unix</span><span class="op" id="7300584">(</span><span class="num" id="7300585">1244436044</span><span class="op" id="7300595">,</span>&nbsp;<span class="num" id="7300597">0</span><span class="op" id="7300598">)</span><span class="op" id="7300599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300604">Typeflag</span><span class="op" id="7300612">:</span>&nbsp;<span class="string" id="7300614">&#39;0&#39;</span><span class="op" id="7300617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300622">Uname</span><span class="op" id="7300627">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300632">&#34;dsymonds&#34;</span><span class="op" id="7300642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300647">Gname</span><span class="op" id="7300652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300657">&#34;eng&#34;</span><span class="op" id="7300662">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300666">}</span><span class="op" id="7300667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300670">}</span><span class="op" id="7300671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300674">cksums</span><span class="op" id="7300680">:</span>&nbsp;<span class="op" id="7300682">[</span><span class="op" id="7300683">]</span><span class="builtintype" id="7300684">string</span><span class="op" id="7300690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300694">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7300728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7300732">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7300766">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300769">}</span><span class="op" id="7300770">,</span><br>
<span class="lineno"></span><span class="op" id="7300772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7300775">var</span>&nbsp;<span class="ident" id="7300779">sparseTarTest</span>&nbsp;<span class="op" id="7300793">=</span>&nbsp;<span class="op" id="7300795">&amp;</span><span class="ident" id="7300796"><a href="/archive/tar/reader_test.go.html#7300093">untarTest</a></span><span class="op" id="7300805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300808">file</span><span class="op" id="7300812">:</span>&nbsp;<span class="string" id="7300814">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7300843">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300846">headers</span><span class="op" id="7300853">:</span>&nbsp;<span class="op" id="7300855">[</span><span class="op" id="7300856">]</span><span class="op" id="7300857">*</span><span class="ident" id="7300858"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7300864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7300868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300873">Name</span><span class="op" id="7300877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7300883">&#34;sparse-gnu&#34;</span><span class="op" id="7300895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300900">Mode</span><span class="op" id="7300904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300910">420</span><span class="op" id="7300913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300918">Uid</span><span class="op" id="7300921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300928">1000</span><span class="op" id="7300932">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300937">Gid</span><span class="op" id="7300940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300947">1000</span><span class="op" id="7300951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300956">Size</span><span class="op" id="7300960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7300966">200</span><span class="op" id="7300969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7300974">ModTime</span><span class="op" id="7300981">:</span>&nbsp;&nbsp;<span class="ident" id="7300984"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7300988">.</span><span class="ident" id="7300989">Unix</span><span class="op" id="7300993">(</span><span class="num" id="7300994">1392395740</span><span class="op" id="7301004">,</span>&nbsp;<span class="num" id="7301006">0</span><span class="op" id="7301007">)</span><span class="op" id="7301008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301013">Typeflag</span><span class="op" id="7301021">:</span>&nbsp;<span class="num" id="7301023">0x53</span><span class="op" id="7301027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301032">Linkname</span><span class="op" id="7301040">:</span>&nbsp;<span class="string" id="7301042">&#34;&#34;</span><span class="op" id="7301044">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301049">Uname</span><span class="op" id="7301054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301059">&#34;david&#34;</span><span class="op" id="7301066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301071">Gname</span><span class="op" id="7301076">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301081">&#34;david&#34;</span><span class="op" id="7301088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301093">Devmajor</span><span class="op" id="7301101">:</span>&nbsp;<span class="num" id="7301103">0</span><span class="op" id="7301104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301109">Devminor</span><span class="op" id="7301117">:</span>&nbsp;<span class="num" id="7301119">0</span><span class="op" id="7301120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301124">}</span><span class="op" id="7301125">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301134">Name</span><span class="op" id="7301138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301144">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7301162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301167">Mode</span><span class="op" id="7301171">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301177">420</span><span class="op" id="7301180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301185">Uid</span><span class="op" id="7301188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301195">1000</span><span class="op" id="7301199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301204">Gid</span><span class="op" id="7301207">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301214">1000</span><span class="op" id="7301218">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301223">Size</span><span class="op" id="7301227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301233">200</span><span class="op" id="7301236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301241">ModTime</span><span class="op" id="7301248">:</span>&nbsp;&nbsp;<span class="ident" id="7301251"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7301255">.</span><span class="ident" id="7301256">Unix</span><span class="op" id="7301260">(</span><span class="num" id="7301261">1392342187</span><span class="op" id="7301271">,</span>&nbsp;<span class="num" id="7301273">0</span><span class="op" id="7301274">)</span><span class="op" id="7301275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301280">Typeflag</span><span class="op" id="7301288">:</span>&nbsp;<span class="num" id="7301290">0x30</span><span class="op" id="7301294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301299">Linkname</span><span class="op" id="7301307">:</span>&nbsp;<span class="string" id="7301309">&#34;&#34;</span><span class="op" id="7301311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301316">Uname</span><span class="op" id="7301321">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301326">&#34;david&#34;</span><span class="op" id="7301333">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301338">Gname</span><span class="op" id="7301343">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301348">&#34;david&#34;</span><span class="op" id="7301355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301360">Devmajor</span><span class="op" id="7301368">:</span>&nbsp;<span class="num" id="7301370">0</span><span class="op" id="7301371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301376">Devminor</span><span class="op" id="7301384">:</span>&nbsp;<span class="num" id="7301386">0</span><span class="op" id="7301387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301391">}</span><span class="op" id="7301392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301396">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301401">Name</span><span class="op" id="7301405">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301411">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7301429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301434">Mode</span><span class="op" id="7301438">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301444">420</span><span class="op" id="7301447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301452">Uid</span><span class="op" id="7301455">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301462">1000</span><span class="op" id="7301466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301471">Gid</span><span class="op" id="7301474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301481">1000</span><span class="op" id="7301485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301490">Size</span><span class="op" id="7301494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301500">200</span><span class="op" id="7301503">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301508">ModTime</span><span class="op" id="7301515">:</span>&nbsp;&nbsp;<span class="ident" id="7301518"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7301522">.</span><span class="ident" id="7301523">Unix</span><span class="op" id="7301527">(</span><span class="num" id="7301528">1392340456</span><span class="op" id="7301538">,</span>&nbsp;<span class="num" id="7301540">0</span><span class="op" id="7301541">)</span><span class="op" id="7301542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301547">Typeflag</span><span class="op" id="7301555">:</span>&nbsp;<span class="num" id="7301557">0x30</span><span class="op" id="7301561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301566">Linkname</span><span class="op" id="7301574">:</span>&nbsp;<span class="string" id="7301576">&#34;&#34;</span><span class="op" id="7301578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301583">Uname</span><span class="op" id="7301588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301593">&#34;david&#34;</span><span class="op" id="7301600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301605">Gname</span><span class="op" id="7301610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301615">&#34;david&#34;</span><span class="op" id="7301622">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301627">Devmajor</span><span class="op" id="7301635">:</span>&nbsp;<span class="num" id="7301637">0</span><span class="op" id="7301638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301643">Devminor</span><span class="op" id="7301651">:</span>&nbsp;<span class="num" id="7301653">0</span><span class="op" id="7301654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301658">}</span><span class="op" id="7301659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301668">Name</span><span class="op" id="7301672">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301678">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7301696">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301701">Mode</span><span class="op" id="7301705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301711">420</span><span class="op" id="7301714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301719">Uid</span><span class="op" id="7301722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301729">1000</span><span class="op" id="7301733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301738">Gid</span><span class="op" id="7301741">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301748">1000</span><span class="op" id="7301752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301757">Size</span><span class="op" id="7301761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301767">200</span><span class="op" id="7301770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301775">ModTime</span><span class="op" id="7301782">:</span>&nbsp;&nbsp;<span class="ident" id="7301785"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7301789">.</span><span class="ident" id="7301790">Unix</span><span class="op" id="7301794">(</span><span class="num" id="7301795">1392337404</span><span class="op" id="7301805">,</span>&nbsp;<span class="num" id="7301807">0</span><span class="op" id="7301808">)</span><span class="op" id="7301809">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301814">Typeflag</span><span class="op" id="7301822">:</span>&nbsp;<span class="num" id="7301824">0x30</span><span class="op" id="7301828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301833">Linkname</span><span class="op" id="7301841">:</span>&nbsp;<span class="string" id="7301843">&#34;&#34;</span><span class="op" id="7301845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301850">Uname</span><span class="op" id="7301855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301860">&#34;david&#34;</span><span class="op" id="7301867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301872">Gname</span><span class="op" id="7301877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301882">&#34;david&#34;</span><span class="op" id="7301889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301894">Devmajor</span><span class="op" id="7301902">:</span>&nbsp;<span class="num" id="7301904">0</span><span class="op" id="7301905">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301910">Devminor</span><span class="op" id="7301918">:</span>&nbsp;<span class="num" id="7301920">0</span><span class="op" id="7301921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301925">}</span><span class="op" id="7301926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7301930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301935">Name</span><span class="op" id="7301939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7301945">&#34;end&#34;</span><span class="op" id="7301950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301955">Mode</span><span class="op" id="7301959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301965">420</span><span class="op" id="7301968">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301973">Uid</span><span class="op" id="7301976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7301983">1000</span><span class="op" id="7301987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7301992">Gid</span><span class="op" id="7301995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302002">1000</span><span class="op" id="7302006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302011">Size</span><span class="op" id="7302015">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302021">4</span><span class="op" id="7302022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302027">ModTime</span><span class="op" id="7302034">:</span>&nbsp;&nbsp;<span class="ident" id="7302037"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7302041">.</span><span class="ident" id="7302042">Unix</span><span class="op" id="7302046">(</span><span class="num" id="7302047">1392398319</span><span class="op" id="7302057">,</span>&nbsp;<span class="num" id="7302059">0</span><span class="op" id="7302060">)</span><span class="op" id="7302061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302066">Typeflag</span><span class="op" id="7302074">:</span>&nbsp;<span class="num" id="7302076">0x30</span><span class="op" id="7302080">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302085">Linkname</span><span class="op" id="7302093">:</span>&nbsp;<span class="string" id="7302095">&#34;&#34;</span><span class="op" id="7302097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302102">Uname</span><span class="op" id="7302107">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302112">&#34;david&#34;</span><span class="op" id="7302119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302124">Gname</span><span class="op" id="7302129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302134">&#34;david&#34;</span><span class="op" id="7302141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302146">Devmajor</span><span class="op" id="7302154">:</span>&nbsp;<span class="num" id="7302156">0</span><span class="op" id="7302157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302162">Devminor</span><span class="op" id="7302170">:</span>&nbsp;<span class="num" id="7302172">0</span><span class="op" id="7302173">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302177">}</span><span class="op" id="7302178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302181">}</span><span class="op" id="7302182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302185">cksums</span><span class="op" id="7302191">:</span>&nbsp;<span class="op" id="7302193">[</span><span class="op" id="7302194">]</span><span class="builtintype" id="7302195">string</span><span class="op" id="7302201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7302205">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7302239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7302243">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7302277">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7302281">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7302315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7302319">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7302353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7302357">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7302391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302394">}</span><span class="op" id="7302395">,</span><br>
<span class="lineno"></span><span class="op" id="7302397">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7302400">var</span>&nbsp;<span class="ident" id="7302404">untarTests</span>&nbsp;<span class="op" id="7302415">=</span>&nbsp;<span class="op" id="7302417">[</span><span class="op" id="7302418">]</span><span class="op" id="7302419">*</span><span class="ident" id="7302420"><a href="/archive/tar/reader_test.go.html#7300093">untarTest</a></span><span class="op" id="7302429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302432"><a href="/archive/tar/reader_test.go.html#7300172">gnuTarTest</a></span><span class="op" id="7302442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302445"><a href="/archive/tar/reader_test.go.html#7300779">sparseTarTest</a></span><span class="op" id="7302458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302461">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302465">file</span><span class="op" id="7302469">:</span>&nbsp;<span class="string" id="7302471">&#34;testdata/star.tar&#34;</span><span class="op" id="7302490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302494">headers</span><span class="op" id="7302501">:</span>&nbsp;<span class="op" id="7302503">[</span><span class="op" id="7302504">]</span><span class="op" id="7302505">*</span><span class="ident" id="7302506"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7302512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302523">Name</span><span class="op" id="7302527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302535">&#34;small.txt&#34;</span><span class="op" id="7302546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302552">Mode</span><span class="op" id="7302556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302564">0640</span><span class="op" id="7302568">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302574">Uid</span><span class="op" id="7302577">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302586">73025</span><span class="op" id="7302591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302597">Gid</span><span class="op" id="7302600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302609">5000</span><span class="op" id="7302613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302619">Size</span><span class="op" id="7302623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302631">5</span><span class="op" id="7302632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302638">ModTime</span><span class="op" id="7302645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302650"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7302654">.</span><span class="ident" id="7302655">Unix</span><span class="op" id="7302659">(</span><span class="num" id="7302660">1244592783</span><span class="op" id="7302670">,</span>&nbsp;<span class="num" id="7302672">0</span><span class="op" id="7302673">)</span><span class="op" id="7302674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302680">Typeflag</span><span class="op" id="7302688">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7302692">&#39;0&#39;</span><span class="op" id="7302695">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302701">Uname</span><span class="op" id="7302706">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302713">&#34;dsymonds&#34;</span><span class="op" id="7302723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302729">Gname</span><span class="op" id="7302734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302741">&#34;eng&#34;</span><span class="op" id="7302746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302752">AccessTime</span><span class="op" id="7302762">:</span>&nbsp;<span class="ident" id="7302764"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7302768">.</span><span class="ident" id="7302769">Unix</span><span class="op" id="7302773">(</span><span class="num" id="7302774">1244592783</span><span class="op" id="7302784">,</span>&nbsp;<span class="num" id="7302786">0</span><span class="op" id="7302787">)</span><span class="op" id="7302788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302794">ChangeTime</span><span class="op" id="7302804">:</span>&nbsp;<span class="ident" id="7302806"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7302810">.</span><span class="ident" id="7302811">Unix</span><span class="op" id="7302815">(</span><span class="num" id="7302816">1244592783</span><span class="op" id="7302826">,</span>&nbsp;<span class="num" id="7302828">0</span><span class="op" id="7302829">)</span><span class="op" id="7302830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302835">}</span><span class="op" id="7302836">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7302841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302847">Name</span><span class="op" id="7302851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7302859">&#34;small2.txt&#34;</span><span class="op" id="7302871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302877">Mode</span><span class="op" id="7302881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302889">0640</span><span class="op" id="7302893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302899">Uid</span><span class="op" id="7302902">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302911">73025</span><span class="op" id="7302916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302922">Gid</span><span class="op" id="7302925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302934">5000</span><span class="op" id="7302938">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302944">Size</span><span class="op" id="7302948">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7302956">11</span><span class="op" id="7302958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7302964">ModTime</span><span class="op" id="7302971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7302976"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7302980">.</span><span class="ident" id="7302981">Unix</span><span class="op" id="7302985">(</span><span class="num" id="7302986">1244592783</span><span class="op" id="7302996">,</span>&nbsp;<span class="num" id="7302998">0</span><span class="op" id="7302999">)</span><span class="op" id="7303000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303006">Typeflag</span><span class="op" id="7303014">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7303018">&#39;0&#39;</span><span class="op" id="7303021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303027">Uname</span><span class="op" id="7303032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303039">&#34;dsymonds&#34;</span><span class="op" id="7303049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303055">Gname</span><span class="op" id="7303060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303067">&#34;eng&#34;</span><span class="op" id="7303072">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303078">AccessTime</span><span class="op" id="7303088">:</span>&nbsp;<span class="ident" id="7303090"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7303094">.</span><span class="ident" id="7303095">Unix</span><span class="op" id="7303099">(</span><span class="num" id="7303100">1244592783</span><span class="op" id="7303110">,</span>&nbsp;<span class="num" id="7303112">0</span><span class="op" id="7303113">)</span><span class="op" id="7303114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303120">ChangeTime</span><span class="op" id="7303130">:</span>&nbsp;<span class="ident" id="7303132"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7303136">.</span><span class="ident" id="7303137">Unix</span><span class="op" id="7303141">(</span><span class="num" id="7303142">1244592783</span><span class="op" id="7303152">,</span>&nbsp;<span class="num" id="7303154">0</span><span class="op" id="7303155">)</span><span class="op" id="7303156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303161">}</span><span class="op" id="7303162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303166">}</span><span class="op" id="7303167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303170">}</span><span class="op" id="7303171">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303178">file</span><span class="op" id="7303182">:</span>&nbsp;<span class="string" id="7303184">&#34;testdata/v7.tar&#34;</span><span class="op" id="7303201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303205">headers</span><span class="op" id="7303212">:</span>&nbsp;<span class="op" id="7303214">[</span><span class="op" id="7303215">]</span><span class="op" id="7303216">*</span><span class="ident" id="7303217"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7303223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303234">Name</span><span class="op" id="7303238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303244">&#34;small.txt&#34;</span><span class="op" id="7303255">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303261">Mode</span><span class="op" id="7303265">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303271">0444</span><span class="op" id="7303275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303281">Uid</span><span class="op" id="7303284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303291">73025</span><span class="op" id="7303296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303302">Gid</span><span class="op" id="7303305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303312">5000</span><span class="op" id="7303316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303322">Size</span><span class="op" id="7303326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303332">5</span><span class="op" id="7303333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303339">ModTime</span><span class="op" id="7303346">:</span>&nbsp;&nbsp;<span class="ident" id="7303349"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7303353">.</span><span class="ident" id="7303354">Unix</span><span class="op" id="7303358">(</span><span class="num" id="7303359">1244593104</span><span class="op" id="7303369">,</span>&nbsp;<span class="num" id="7303371">0</span><span class="op" id="7303372">)</span><span class="op" id="7303373">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303379">Typeflag</span><span class="op" id="7303387">:</span>&nbsp;<span class="string" id="7303389">&#39;\x00&#39;</span><span class="op" id="7303395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303400">}</span><span class="op" id="7303401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303412">Name</span><span class="op" id="7303416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303422">&#34;small2.txt&#34;</span><span class="op" id="7303434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303440">Mode</span><span class="op" id="7303444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303450">0444</span><span class="op" id="7303454">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303460">Uid</span><span class="op" id="7303463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303470">73025</span><span class="op" id="7303475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303481">Gid</span><span class="op" id="7303484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303491">5000</span><span class="op" id="7303495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303501">Size</span><span class="op" id="7303505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303511">11</span><span class="op" id="7303513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303519">ModTime</span><span class="op" id="7303526">:</span>&nbsp;&nbsp;<span class="ident" id="7303529"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7303533">.</span><span class="ident" id="7303534">Unix</span><span class="op" id="7303538">(</span><span class="num" id="7303539">1244593104</span><span class="op" id="7303549">,</span>&nbsp;<span class="num" id="7303551">0</span><span class="op" id="7303552">)</span><span class="op" id="7303553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303559">Typeflag</span><span class="op" id="7303567">:</span>&nbsp;<span class="string" id="7303569">&#39;\x00&#39;</span><span class="op" id="7303575">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303580">}</span><span class="op" id="7303581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303585">}</span><span class="op" id="7303586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303589">}</span><span class="op" id="7303590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303597">file</span><span class="op" id="7303601">:</span>&nbsp;<span class="string" id="7303603">&#34;testdata/pax.tar&#34;</span><span class="op" id="7303621">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303625">headers</span><span class="op" id="7303632">:</span>&nbsp;<span class="op" id="7303634">[</span><span class="op" id="7303635">]</span><span class="op" id="7303636">*</span><span class="ident" id="7303637"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7303643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7303648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303654">Name</span><span class="op" id="7303658">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303666">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7303862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303868">Mode</span><span class="op" id="7303872">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303880">0664</span><span class="op" id="7303884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303890">Uid</span><span class="op" id="7303893">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303902">1000</span><span class="op" id="7303906">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303912">Gid</span><span class="op" id="7303915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303924">1000</span><span class="op" id="7303928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303934">Uname</span><span class="op" id="7303939">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303946">&#34;shane&#34;</span><span class="op" id="7303953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303959">Gname</span><span class="op" id="7303964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7303971">&#34;shane&#34;</span><span class="op" id="7303978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7303984">Size</span><span class="op" id="7303988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7303996">7</span><span class="op" id="7303997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304003">ModTime</span><span class="op" id="7304010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304015"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304019">.</span><span class="ident" id="7304020">Unix</span><span class="op" id="7304024">(</span><span class="num" id="7304025">1350244992</span><span class="op" id="7304035">,</span>&nbsp;<span class="num" id="7304037">23960108</span><span class="op" id="7304045">)</span><span class="op" id="7304046">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304052">ChangeTime</span><span class="op" id="7304062">:</span>&nbsp;<span class="ident" id="7304064"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304068">.</span><span class="ident" id="7304069">Unix</span><span class="op" id="7304073">(</span><span class="num" id="7304074">1350244992</span><span class="op" id="7304084">,</span>&nbsp;<span class="num" id="7304086">23960108</span><span class="op" id="7304094">)</span><span class="op" id="7304095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304101">AccessTime</span><span class="op" id="7304111">:</span>&nbsp;<span class="ident" id="7304113"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304117">.</span><span class="ident" id="7304118">Unix</span><span class="op" id="7304122">(</span><span class="num" id="7304123">1350244992</span><span class="op" id="7304133">,</span>&nbsp;<span class="num" id="7304135">23960108</span><span class="op" id="7304143">)</span><span class="op" id="7304144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304150">Typeflag</span><span class="op" id="7304158">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7304162"><a href="/archive/tar/common.go.html#5195967">TypeReg</a></span><span class="op" id="7304169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304174">}</span><span class="op" id="7304175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304180">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304186">Name</span><span class="op" id="7304190">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304198">&#34;a/b&#34;</span><span class="op" id="7304203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304209">Mode</span><span class="op" id="7304213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304221">0777</span><span class="op" id="7304225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304231">Uid</span><span class="op" id="7304234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304243">1000</span><span class="op" id="7304247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304253">Gid</span><span class="op" id="7304256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304265">1000</span><span class="op" id="7304269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304275">Uname</span><span class="op" id="7304280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304287">&#34;shane&#34;</span><span class="op" id="7304294">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304300">Gname</span><span class="op" id="7304305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304312">&#34;shane&#34;</span><span class="op" id="7304319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304325">Size</span><span class="op" id="7304329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304337">0</span><span class="op" id="7304338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304344">ModTime</span><span class="op" id="7304351">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7304356"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304360">.</span><span class="ident" id="7304361">Unix</span><span class="op" id="7304365">(</span><span class="num" id="7304366">1350266320</span><span class="op" id="7304376">,</span>&nbsp;<span class="num" id="7304378">910238425</span><span class="op" id="7304387">)</span><span class="op" id="7304388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304394">ChangeTime</span><span class="op" id="7304404">:</span>&nbsp;<span class="ident" id="7304406"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304410">.</span><span class="ident" id="7304411">Unix</span><span class="op" id="7304415">(</span><span class="num" id="7304416">1350266320</span><span class="op" id="7304426">,</span>&nbsp;<span class="num" id="7304428">910238425</span><span class="op" id="7304437">)</span><span class="op" id="7304438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304444">AccessTime</span><span class="op" id="7304454">:</span>&nbsp;<span class="ident" id="7304456"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304460">.</span><span class="ident" id="7304461">Unix</span><span class="op" id="7304465">(</span><span class="num" id="7304466">1350266320</span><span class="op" id="7304476">,</span>&nbsp;<span class="num" id="7304478">910238425</span><span class="op" id="7304487">)</span><span class="op" id="7304488">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304494">Typeflag</span><span class="op" id="7304502">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7304506"><a href="/archive/tar/common.go.html#5196096">TypeSymlink</a></span><span class="op" id="7304517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304523">Linkname</span><span class="op" id="7304531">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7304535">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7304729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304734">}</span><span class="op" id="7304735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304739">}</span><span class="op" id="7304740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304743">}</span><span class="op" id="7304744">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304751">file</span><span class="op" id="7304755">:</span>&nbsp;<span class="string" id="7304757">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7304779">,</span>&nbsp;<span class="comment" id="7304781">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304808">headers</span><span class="op" id="7304815">:</span>&nbsp;<span class="op" id="7304817">[</span><span class="op" id="7304818">]</span><span class="op" id="7304819">*</span><span class="ident" id="7304820"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7304826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7304831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304837">Name</span><span class="op" id="7304841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7304847">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7304865">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304871">Mode</span><span class="op" id="7304875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304881">0664</span><span class="op" id="7304885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304891">Uid</span><span class="op" id="7304894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304901">0</span><span class="op" id="7304902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304908">Gid</span><span class="op" id="7304911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304918">0</span><span class="op" id="7304919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304925">Size</span><span class="op" id="7304929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7304935">14</span><span class="op" id="7304937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304943">ModTime</span><span class="op" id="7304950">:</span>&nbsp;&nbsp;<span class="ident" id="7304953"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7304957">.</span><span class="ident" id="7304958">Unix</span><span class="op" id="7304962">(</span><span class="num" id="7304963">1365454838</span><span class="op" id="7304973">,</span>&nbsp;<span class="num" id="7304975">0</span><span class="op" id="7304976">)</span><span class="op" id="7304977">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7304983">Typeflag</span><span class="op" id="7304991">:</span>&nbsp;<span class="ident" id="7304993"><a href="/archive/tar/common.go.html#5195967">TypeReg</a></span><span class="op" id="7305000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305006">Linkname</span><span class="op" id="7305014">:</span>&nbsp;<span class="string" id="7305016">&#34;&#34;</span><span class="op" id="7305018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305024">Uname</span><span class="op" id="7305029">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305034">&#34;eyefi&#34;</span><span class="op" id="7305041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305047">Gname</span><span class="op" id="7305052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305057">&#34;eyefi&#34;</span><span class="op" id="7305064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305070">Devmajor</span><span class="op" id="7305078">:</span>&nbsp;<span class="num" id="7305080">0</span><span class="op" id="7305081">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305087">Devminor</span><span class="op" id="7305095">:</span>&nbsp;<span class="num" id="7305097">0</span><span class="op" id="7305098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305103">}</span><span class="op" id="7305104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305108">}</span><span class="op" id="7305109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305112">}</span><span class="op" id="7305113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305116">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305120">file</span><span class="op" id="7305124">:</span>&nbsp;<span class="string" id="7305126">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7305147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305151">headers</span><span class="op" id="7305158">:</span>&nbsp;<span class="op" id="7305160">[</span><span class="op" id="7305161">]</span><span class="op" id="7305162">*</span><span class="ident" id="7305163"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7305169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305180">Name</span><span class="op" id="7305184">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305192">&#34;small.txt&#34;</span><span class="op" id="7305203">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305209">Mode</span><span class="op" id="7305213">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305221">0644</span><span class="op" id="7305225">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305231">Uid</span><span class="op" id="7305234">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305243">1000</span><span class="op" id="7305247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305253">Gid</span><span class="op" id="7305256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305265">10</span><span class="op" id="7305267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305273">Size</span><span class="op" id="7305277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305285">5</span><span class="op" id="7305286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305292">ModTime</span><span class="op" id="7305299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305304"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7305308">.</span><span class="ident" id="7305309">Unix</span><span class="op" id="7305313">(</span><span class="num" id="7305314">1386065770</span><span class="op" id="7305324">,</span>&nbsp;<span class="num" id="7305326">448252320</span><span class="op" id="7305335">)</span><span class="op" id="7305336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305342">Typeflag</span><span class="op" id="7305350">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7305354">&#39;0&#39;</span><span class="op" id="7305357">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305363">Uname</span><span class="op" id="7305368">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305375">&#34;alex&#34;</span><span class="op" id="7305381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305387">Gname</span><span class="op" id="7305392">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305399">&#34;wheel&#34;</span><span class="op" id="7305406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305412">AccessTime</span><span class="op" id="7305422">:</span>&nbsp;<span class="ident" id="7305424"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7305428">.</span><span class="ident" id="7305429">Unix</span><span class="op" id="7305433">(</span><span class="num" id="7305434">1389782991</span><span class="op" id="7305444">,</span>&nbsp;<span class="num" id="7305446">419875220</span><span class="op" id="7305455">)</span><span class="op" id="7305456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305462">ChangeTime</span><span class="op" id="7305472">:</span>&nbsp;<span class="ident" id="7305474"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7305478">.</span><span class="ident" id="7305479">Unix</span><span class="op" id="7305483">(</span><span class="num" id="7305484">1389782956</span><span class="op" id="7305494">,</span>&nbsp;<span class="num" id="7305496">794414986</span><span class="op" id="7305505">)</span><span class="op" id="7305506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305512">Xattrs</span><span class="op" id="7305518">:</span>&nbsp;<span class="keyword" id="7305520">map</span><span class="op" id="7305523">[</span><span class="builtintype" id="7305524">string</span><span class="op" id="7305530">]</span><span class="builtintype" id="7305531">string</span><span class="op" id="7305537">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305544">&#34;user.key&#34;</span><span class="op" id="7305554">:</span>&nbsp;&nbsp;<span class="string" id="7305557">&#34;value&#34;</span><span class="op" id="7305564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305571">&#34;user.key2&#34;</span><span class="op" id="7305582">:</span>&nbsp;<span class="string" id="7305584">&#34;value2&#34;</span><span class="op" id="7305592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7305599">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7305676">&#34;security.selinux&#34;</span><span class="op" id="7305694">:</span>&nbsp;<span class="string" id="7305696">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7305736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305742">}</span><span class="op" id="7305743">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305748">}</span><span class="op" id="7305749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7305754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305760">Name</span><span class="op" id="7305764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305772">&#34;small2.txt&#34;</span><span class="op" id="7305784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305790">Mode</span><span class="op" id="7305794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305802">0644</span><span class="op" id="7305806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305812">Uid</span><span class="op" id="7305815">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305824">1000</span><span class="op" id="7305828">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305834">Gid</span><span class="op" id="7305837">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305846">10</span><span class="op" id="7305848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305854">Size</span><span class="op" id="7305858">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7305866">11</span><span class="op" id="7305868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305874">ModTime</span><span class="op" id="7305881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7305886"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7305890">.</span><span class="ident" id="7305891">Unix</span><span class="op" id="7305895">(</span><span class="num" id="7305896">1386065770</span><span class="op" id="7305906">,</span>&nbsp;<span class="num" id="7305908">449252304</span><span class="op" id="7305917">)</span><span class="op" id="7305918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305924">Typeflag</span><span class="op" id="7305932">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7305936">&#39;0&#39;</span><span class="op" id="7305939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305945">Uname</span><span class="op" id="7305950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305957">&#34;alex&#34;</span><span class="op" id="7305963">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305969">Gname</span><span class="op" id="7305974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7305981">&#34;wheel&#34;</span><span class="op" id="7305988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7305994">AccessTime</span><span class="op" id="7306004">:</span>&nbsp;<span class="ident" id="7306006"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7306010">.</span><span class="ident" id="7306011">Unix</span><span class="op" id="7306015">(</span><span class="num" id="7306016">1389782991</span><span class="op" id="7306026">,</span>&nbsp;<span class="num" id="7306028">419875220</span><span class="op" id="7306037">)</span><span class="op" id="7306038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306044">ChangeTime</span><span class="op" id="7306054">:</span>&nbsp;<span class="ident" id="7306056"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7306060">.</span><span class="ident" id="7306061">Unix</span><span class="op" id="7306065">(</span><span class="num" id="7306066">1386065770</span><span class="op" id="7306076">,</span>&nbsp;<span class="num" id="7306078">449252304</span><span class="op" id="7306087">)</span><span class="op" id="7306088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306094">Xattrs</span><span class="op" id="7306100">:</span>&nbsp;<span class="keyword" id="7306102">map</span><span class="op" id="7306105">[</span><span class="builtintype" id="7306106">string</span><span class="op" id="7306112">]</span><span class="builtintype" id="7306113">string</span><span class="op" id="7306119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7306126">&#34;security.selinux&#34;</span><span class="op" id="7306144">:</span>&nbsp;<span class="string" id="7306146">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7306186">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306192">}</span><span class="op" id="7306193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306198">}</span><span class="op" id="7306199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306203">}</span><span class="op" id="7306204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306207">}</span><span class="op" id="7306208">,</span><br>
<span class="lineno"></span><span class="op" id="7306210">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7306213">func</span>&nbsp;<span class="ident" id="7306218">TestReader</span><span class="op" id="7306228">(</span><span class="ident" id="7306229">t</span>&nbsp;<span class="op" id="7306231">*</span><span class="ident" id="7306232"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7306239">.</span><span class="ident" id="7306240">T</span><span class="op" id="7306241">)</span>&nbsp;<span class="op" id="7306243">{</span><br>
<span class="lineno"></span><span class="ident" id="7306245">testLoop</span><span class="op" id="7306253">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306256">for</span>&nbsp;<span class="ident" id="7306260">i</span><span class="op" id="7306261">,</span>&nbsp;<span class="ident" id="7306263">test</span>&nbsp;<span class="op" id="7306268">:=</span>&nbsp;<span class="keyword" id="7306271">range</span>&nbsp;<span class="ident" id="7306277"><a href="/archive/tar/reader_test.go.html#7302404">untarTests</a></span>&nbsp;<span class="op" id="7306288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306292">f</span><span class="op" id="7306293">,</span>&nbsp;<span class="ident" id="7306295">err</span>&nbsp;<span class="op" id="7306299">:=</span>&nbsp;<span class="ident" id="7306302"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7306304">.</span><span class="ident" id="7306305">Open</span><span class="op" id="7306309">(</span><span class="ident" id="7306310"><a href="/archive/tar/reader_test.go.html#7306263">test</a></span><span class="op" id="7306314">.</span><span class="ident" id="7306315">file</span><span class="op" id="7306319">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306323">if</span>&nbsp;<span class="ident" id="7306326"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span>&nbsp;<span class="op" id="7306330">!=</span>&nbsp;<span class="ident" id="7306333">nil</span>&nbsp;<span class="op" id="7306337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306342"><a href="/archive/tar/reader_test.go.html#7306229">t</a></span><span class="op" id="7306343">.</span><span class="ident" id="7306344">Errorf</span><span class="op" id="7306350">(</span><span class="string" id="7306351">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7306382">,</span>&nbsp;<span class="ident" id="7306384"><a href="/archive/tar/reader_test.go.html#7306260">i</a></span><span class="op" id="7306385">,</span>&nbsp;<span class="ident" id="7306387"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span><span class="op" id="7306390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306395">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306410">defer</span>&nbsp;<span class="ident" id="7306416"><a href="/archive/tar/reader_test.go.html#7306292">f</a></span><span class="op" id="7306417">.</span><span class="ident" id="7306418">Close</span><span class="op" id="7306423">(</span><span class="op" id="7306424">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306428">tr</span>&nbsp;<span class="op" id="7306431">:=</span>&nbsp;<span class="ident" id="7306434"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7306443">(</span><span class="ident" id="7306444"><a href="/archive/tar/reader_test.go.html#7306292">f</a></span><span class="op" id="7306445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306449">for</span>&nbsp;<span class="ident" id="7306453">j</span><span class="op" id="7306454">,</span>&nbsp;<span class="ident" id="7306456">header</span>&nbsp;<span class="op" id="7306463">:=</span>&nbsp;<span class="keyword" id="7306466">range</span>&nbsp;<span class="ident" id="7306472"><a href="/archive/tar/reader_test.go.html#7306263">test</a></span><span class="op" id="7306476">.</span><span class="ident" id="7306477">headers</span>&nbsp;<span class="op" id="7306485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306490">hdr</span><span class="op" id="7306493">,</span>&nbsp;<span class="ident" id="7306495">err</span>&nbsp;<span class="op" id="7306499">:=</span>&nbsp;<span class="ident" id="7306502"><a href="/archive/tar/reader_test.go.html#7306428">tr</a></span><span class="op" id="7306504">.</span><span class="ident" id="7306505">Next</span><span class="op" id="7306509">(</span><span class="op" id="7306510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306515">if</span>&nbsp;<span class="ident" id="7306518"><a href="/archive/tar/reader_test.go.html#7306495">err</a></span>&nbsp;<span class="op" id="7306522">!=</span>&nbsp;<span class="ident" id="7306525">nil</span>&nbsp;<span class="op" id="7306529">||</span>&nbsp;<span class="ident" id="7306532"><a href="/archive/tar/reader_test.go.html#7306490">hdr</a></span>&nbsp;<span class="op" id="7306536">==</span>&nbsp;<span class="ident" id="7306539">nil</span>&nbsp;<span class="op" id="7306543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306549"><a href="/archive/tar/reader_test.go.html#7306229">t</a></span><span class="op" id="7306550">.</span><span class="ident" id="7306551">Errorf</span><span class="op" id="7306557">(</span><span class="string" id="7306558">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7306599">,</span>&nbsp;<span class="ident" id="7306601"><a href="/archive/tar/reader_test.go.html#7306260">i</a></span><span class="op" id="7306602">,</span>&nbsp;<span class="ident" id="7306604"><a href="/archive/tar/reader_test.go.html#7306453">j</a></span><span class="op" id="7306605">,</span>&nbsp;<span class="ident" id="7306607"><a href="/archive/tar/reader_test.go.html#7306495">err</a></span><span class="op" id="7306610">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306616"><a href="/archive/tar/reader_test.go.html#7306292">f</a></span><span class="op" id="7306617">.</span><span class="ident" id="7306618">Close</span><span class="op" id="7306623">(</span><span class="op" id="7306624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306630">continue</span>&nbsp;<span class="ident" id="7306639">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306656">if</span>&nbsp;<span class="op" id="7306659">!</span><span class="ident" id="7306660"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7306667">.</span><span class="ident" id="7306668">DeepEqual</span><span class="op" id="7306677">(</span><span class="op" id="7306678">*</span><span class="ident" id="7306679"><a href="/archive/tar/reader_test.go.html#7306490">hdr</a></span><span class="op" id="7306682">,</span>&nbsp;<span class="op" id="7306684">*</span><span class="ident" id="7306685"><a href="/archive/tar/reader_test.go.html#7306456">header</a></span><span class="op" id="7306691">)</span>&nbsp;<span class="op" id="7306693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306699"><a href="/archive/tar/reader_test.go.html#7306229">t</a></span><span class="op" id="7306700">.</span><span class="ident" id="7306701">Errorf</span><span class="op" id="7306707">(</span><span class="string" id="7306708">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7306766">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306773"><a href="/archive/tar/reader_test.go.html#7306260">i</a></span><span class="op" id="7306774">,</span>&nbsp;<span class="ident" id="7306776"><a href="/archive/tar/reader_test.go.html#7306453">j</a></span><span class="op" id="7306777">,</span>&nbsp;<span class="op" id="7306779">*</span><span class="ident" id="7306780"><a href="/archive/tar/reader_test.go.html#7306490">hdr</a></span><span class="op" id="7306783">,</span>&nbsp;<span class="op" id="7306785">*</span><span class="ident" id="7306786"><a href="/archive/tar/reader_test.go.html#7306456">header</a></span><span class="op" id="7306792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306805">hdr</span><span class="op" id="7306808">,</span>&nbsp;<span class="ident" id="7306810"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span>&nbsp;<span class="op" id="7306814">:=</span>&nbsp;<span class="ident" id="7306817"><a href="/archive/tar/reader_test.go.html#7306428">tr</a></span><span class="op" id="7306819">.</span><span class="ident" id="7306820">Next</span><span class="op" id="7306824">(</span><span class="op" id="7306825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306829">if</span>&nbsp;<span class="ident" id="7306832"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span>&nbsp;<span class="op" id="7306836">==</span>&nbsp;<span class="ident" id="7306839"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7306841">.</span><span class="ident" id="7306842">EOF</span>&nbsp;<span class="op" id="7306846">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306851">continue</span>&nbsp;<span class="ident" id="7306860">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7306875">if</span>&nbsp;<span class="ident" id="7306878"><a href="/archive/tar/reader_test.go.html#7306805">hdr</a></span>&nbsp;<span class="op" id="7306882">!=</span>&nbsp;<span class="ident" id="7306885">nil</span>&nbsp;<span class="op" id="7306889">||</span>&nbsp;<span class="ident" id="7306892"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span>&nbsp;<span class="op" id="7306896">!=</span>&nbsp;<span class="ident" id="7306899">nil</span>&nbsp;<span class="op" id="7306903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7306908"><a href="/archive/tar/reader_test.go.html#7306229">t</a></span><span class="op" id="7306909">.</span><span class="ident" id="7306910">Errorf</span><span class="op" id="7306916">(</span><span class="string" id="7306917">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7306968">,</span>&nbsp;<span class="ident" id="7306970"><a href="/archive/tar/reader_test.go.html#7306260">i</a></span><span class="op" id="7306971">,</span>&nbsp;<span class="ident" id="7306973"><a href="/archive/tar/reader_test.go.html#7306805">hdr</a></span><span class="op" id="7306976">,</span>&nbsp;<span class="ident" id="7306978"><a href="/archive/tar/reader_test.go.html#7306295">err</a></span><span class="op" id="7306981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306985">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7306988">}</span><br>
<span class="lineno"></span><span class="op" id="7306990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7306993">func</span>&nbsp;<span class="ident" id="7306998">TestPartialRead</span><span class="op" id="7307013">(</span><span class="ident" id="7307014">t</span>&nbsp;<span class="op" id="7307016">*</span><span class="ident" id="7307017"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7307024">.</span><span class="ident" id="7307025">T</span><span class="op" id="7307026">)</span>&nbsp;<span class="op" id="7307028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307031">f</span><span class="op" id="7307032">,</span>&nbsp;<span class="ident" id="7307034">err</span>&nbsp;<span class="op" id="7307038">:=</span>&nbsp;<span class="ident" id="7307041"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7307043">.</span><span class="ident" id="7307044">Open</span><span class="op" id="7307048">(</span><span class="string" id="7307049">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7307067">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307070">if</span>&nbsp;<span class="ident" id="7307073"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span>&nbsp;<span class="op" id="7307077">!=</span>&nbsp;<span class="ident" id="7307080">nil</span>&nbsp;<span class="op" id="7307084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307088"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307089">.</span><span class="ident" id="7307090">Fatalf</span><span class="op" id="7307096">(</span><span class="string" id="7307097">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7307119">,</span>&nbsp;<span class="ident" id="7307121"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span><span class="op" id="7307124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307130">defer</span>&nbsp;<span class="ident" id="7307136"><a href="/archive/tar/reader_test.go.html#7307031">f</a></span><span class="op" id="7307137">.</span><span class="ident" id="7307138">Close</span><span class="op" id="7307143">(</span><span class="op" id="7307144">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307148">tr</span>&nbsp;<span class="op" id="7307151">:=</span>&nbsp;<span class="ident" id="7307154"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7307163">(</span><span class="ident" id="7307164"><a href="/archive/tar/reader_test.go.html#7307031">f</a></span><span class="op" id="7307165">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7307169">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307234">hdr</span><span class="op" id="7307237">,</span>&nbsp;<span class="ident" id="7307239"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span>&nbsp;<span class="op" id="7307243">:=</span>&nbsp;<span class="ident" id="7307246"><a href="/archive/tar/reader_test.go.html#7307148">tr</a></span><span class="op" id="7307248">.</span><span class="ident" id="7307249">Next</span><span class="op" id="7307253">(</span><span class="op" id="7307254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307257">if</span>&nbsp;<span class="ident" id="7307260"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span>&nbsp;<span class="op" id="7307264">!=</span>&nbsp;<span class="ident" id="7307267">nil</span>&nbsp;<span class="op" id="7307271">||</span>&nbsp;<span class="ident" id="7307274"><a href="/archive/tar/reader_test.go.html#7307234">hdr</a></span>&nbsp;<span class="op" id="7307278">==</span>&nbsp;<span class="ident" id="7307281">nil</span>&nbsp;<span class="op" id="7307285">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307289"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307290">.</span><span class="ident" id="7307291">Fatalf</span><span class="op" id="7307297">(</span><span class="string" id="7307298">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7307325">,</span>&nbsp;<span class="ident" id="7307327"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span><span class="op" id="7307330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307336">buf</span>&nbsp;<span class="op" id="7307340">:=</span>&nbsp;<span class="builtinfunc" id="7307343">make</span><span class="op" id="7307347">(</span><span class="op" id="7307348">[</span><span class="op" id="7307349">]</span><span class="builtintype" id="7307350">byte</span><span class="op" id="7307354">,</span>&nbsp;<span class="num" id="7307356">4</span><span class="op" id="7307357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307360">if</span>&nbsp;<span class="ident" id="7307363">_</span><span class="op" id="7307364">,</span>&nbsp;<span class="ident" id="7307366">err</span>&nbsp;<span class="op" id="7307370">:=</span>&nbsp;<span class="ident" id="7307373"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7307375">.</span><span class="ident" id="7307376">ReadFull</span><span class="op" id="7307384">(</span><span class="ident" id="7307385"><a href="/archive/tar/reader_test.go.html#7307148">tr</a></span><span class="op" id="7307387">,</span>&nbsp;<span class="ident" id="7307389"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307392">)</span><span class="op" id="7307393">;</span>&nbsp;<span class="ident" id="7307395"><a href="/archive/tar/reader_test.go.html#7307366">err</a></span>&nbsp;<span class="op" id="7307399">!=</span>&nbsp;<span class="ident" id="7307402">nil</span>&nbsp;<span class="op" id="7307406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307410"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307411">.</span><span class="ident" id="7307412">Fatalf</span><span class="op" id="7307418">(</span><span class="string" id="7307419">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7307441">,</span>&nbsp;<span class="ident" id="7307443"><a href="/archive/tar/reader_test.go.html#7307366">err</a></span><span class="op" id="7307446">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307452">if</span>&nbsp;<span class="ident" id="7307455">expected</span>&nbsp;<span class="op" id="7307464">:=</span>&nbsp;<span class="op" id="7307467">[</span><span class="op" id="7307468">]</span><span class="builtintype" id="7307469">byte</span><span class="op" id="7307473">(</span><span class="string" id="7307474">&#34;Kilt&#34;</span><span class="op" id="7307480">)</span><span class="op" id="7307481">;</span>&nbsp;<span class="op" id="7307483">!</span><span class="ident" id="7307484"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7307489">.</span><span class="ident" id="7307490">Equal</span><span class="op" id="7307495">(</span><span class="ident" id="7307496"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307499">,</span>&nbsp;<span class="ident" id="7307501"><a href="/archive/tar/reader_test.go.html#7307455">expected</a></span><span class="op" id="7307509">)</span>&nbsp;<span class="op" id="7307511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307515"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307516">.</span><span class="ident" id="7307517">Errorf</span><span class="op" id="7307523">(</span><span class="string" id="7307524">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7307548">,</span>&nbsp;<span class="ident" id="7307550"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307553">,</span>&nbsp;<span class="ident" id="7307555"><a href="/archive/tar/reader_test.go.html#7307455">expected</a></span><span class="op" id="7307563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7307570">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307586"><a href="/archive/tar/reader_test.go.html#7307234">hdr</a></span><span class="op" id="7307589">,</span>&nbsp;<span class="ident" id="7307591"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span>&nbsp;<span class="op" id="7307595">=</span>&nbsp;<span class="ident" id="7307597"><a href="/archive/tar/reader_test.go.html#7307148">tr</a></span><span class="op" id="7307599">.</span><span class="ident" id="7307600">Next</span><span class="op" id="7307604">(</span><span class="op" id="7307605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307608">if</span>&nbsp;<span class="ident" id="7307611"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span>&nbsp;<span class="op" id="7307615">!=</span>&nbsp;<span class="ident" id="7307618">nil</span>&nbsp;<span class="op" id="7307622">||</span>&nbsp;<span class="ident" id="7307625"><a href="/archive/tar/reader_test.go.html#7307234">hdr</a></span>&nbsp;<span class="op" id="7307629">==</span>&nbsp;<span class="ident" id="7307632">nil</span>&nbsp;<span class="op" id="7307636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307640"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307641">.</span><span class="ident" id="7307642">Fatalf</span><span class="op" id="7307648">(</span><span class="string" id="7307649">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7307677">,</span>&nbsp;<span class="ident" id="7307679"><a href="/archive/tar/reader_test.go.html#7307034">err</a></span><span class="op" id="7307682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307685">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307688"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span>&nbsp;<span class="op" id="7307692">=</span>&nbsp;<span class="builtinfunc" id="7307694">make</span><span class="op" id="7307698">(</span><span class="op" id="7307699">[</span><span class="op" id="7307700">]</span><span class="builtintype" id="7307701">byte</span><span class="op" id="7307705">,</span>&nbsp;<span class="num" id="7307707">6</span><span class="op" id="7307708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307711">if</span>&nbsp;<span class="ident" id="7307714">_</span><span class="op" id="7307715">,</span>&nbsp;<span class="ident" id="7307717">err</span>&nbsp;<span class="op" id="7307721">:=</span>&nbsp;<span class="ident" id="7307724"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7307726">.</span><span class="ident" id="7307727">ReadFull</span><span class="op" id="7307735">(</span><span class="ident" id="7307736"><a href="/archive/tar/reader_test.go.html#7307148">tr</a></span><span class="op" id="7307738">,</span>&nbsp;<span class="ident" id="7307740"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307743">)</span><span class="op" id="7307744">;</span>&nbsp;<span class="ident" id="7307746"><a href="/archive/tar/reader_test.go.html#7307717">err</a></span>&nbsp;<span class="op" id="7307750">!=</span>&nbsp;<span class="ident" id="7307753">nil</span>&nbsp;<span class="op" id="7307757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307761"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307762">.</span><span class="ident" id="7307763">Fatalf</span><span class="op" id="7307769">(</span><span class="string" id="7307770">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7307792">,</span>&nbsp;<span class="ident" id="7307794"><a href="/archive/tar/reader_test.go.html#7307717">err</a></span><span class="op" id="7307797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7307803">if</span>&nbsp;<span class="ident" id="7307806">expected</span>&nbsp;<span class="op" id="7307815">:=</span>&nbsp;<span class="op" id="7307818">[</span><span class="op" id="7307819">]</span><span class="builtintype" id="7307820">byte</span><span class="op" id="7307824">(</span><span class="string" id="7307825">&#34;Google&#34;</span><span class="op" id="7307833">)</span><span class="op" id="7307834">;</span>&nbsp;<span class="op" id="7307836">!</span><span class="ident" id="7307837"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7307842">.</span><span class="ident" id="7307843">Equal</span><span class="op" id="7307848">(</span><span class="ident" id="7307849"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307852">,</span>&nbsp;<span class="ident" id="7307854"><a href="/archive/tar/reader_test.go.html#7307806">expected</a></span><span class="op" id="7307862">)</span>&nbsp;<span class="op" id="7307864">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307868"><a href="/archive/tar/reader_test.go.html#7307014">t</a></span><span class="op" id="7307869">.</span><span class="ident" id="7307870">Errorf</span><span class="op" id="7307876">(</span><span class="string" id="7307877">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7307901">,</span>&nbsp;<span class="ident" id="7307903"><a href="/archive/tar/reader_test.go.html#7307336">buf</a></span><span class="op" id="7307906">,</span>&nbsp;<span class="ident" id="7307908"><a href="/archive/tar/reader_test.go.html#7307806">expected</a></span><span class="op" id="7307916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7307919">}</span><br>
<span class="lineno"></span><span class="op" id="7307921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7307924">func</span>&nbsp;<span class="ident" id="7307929">TestIncrementalRead</span><span class="op" id="7307948">(</span><span class="ident" id="7307949">t</span>&nbsp;<span class="op" id="7307951">*</span><span class="ident" id="7307952"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7307959">.</span><span class="ident" id="7307960">T</span><span class="op" id="7307961">)</span>&nbsp;<span class="op" id="7307963">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307966">test</span>&nbsp;<span class="op" id="7307971">:=</span>&nbsp;<span class="ident" id="7307974"><a href="/archive/tar/reader_test.go.html#7300172">gnuTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7307986">f</span><span class="op" id="7307987">,</span>&nbsp;<span class="ident" id="7307989">err</span>&nbsp;<span class="op" id="7307993">:=</span>&nbsp;<span class="ident" id="7307996"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7307998">.</span><span class="ident" id="7307999">Open</span><span class="op" id="7308003">(</span><span class="ident" id="7308004"><a href="/archive/tar/reader_test.go.html#7307966">test</a></span><span class="op" id="7308008">.</span><span class="ident" id="7308009">file</span><span class="op" id="7308013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308016">if</span>&nbsp;<span class="ident" id="7308019"><a href="/archive/tar/reader_test.go.html#7307989">err</a></span>&nbsp;<span class="op" id="7308023">!=</span>&nbsp;<span class="ident" id="7308026">nil</span>&nbsp;<span class="op" id="7308030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308034"><a href="/archive/tar/reader_test.go.html#7307949">t</a></span><span class="op" id="7308035">.</span><span class="ident" id="7308036">Fatalf</span><span class="op" id="7308042">(</span><span class="string" id="7308043">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7308065">,</span>&nbsp;<span class="ident" id="7308067"><a href="/archive/tar/reader_test.go.html#7307989">err</a></span><span class="op" id="7308070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308073">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308076">defer</span>&nbsp;<span class="ident" id="7308082"><a href="/archive/tar/reader_test.go.html#7307986">f</a></span><span class="op" id="7308083">.</span><span class="ident" id="7308084">Close</span><span class="op" id="7308089">(</span><span class="op" id="7308090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308094">tr</span>&nbsp;<span class="op" id="7308097">:=</span>&nbsp;<span class="ident" id="7308100"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7308109">(</span><span class="ident" id="7308110"><a href="/archive/tar/reader_test.go.html#7307986">f</a></span><span class="op" id="7308111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308115">headers</span>&nbsp;<span class="op" id="7308123">:=</span>&nbsp;<span class="ident" id="7308126"><a href="/archive/tar/reader_test.go.html#7307966">test</a></span><span class="op" id="7308130">.</span><span class="ident" id="7308131">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308140">cksums</span>&nbsp;<span class="op" id="7308147">:=</span>&nbsp;<span class="ident" id="7308150"><a href="/archive/tar/reader_test.go.html#7307966">test</a></span><span class="op" id="7308154">.</span><span class="ident" id="7308155">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308163">nread</span>&nbsp;<span class="op" id="7308169">:=</span>&nbsp;<span class="num" id="7308172">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7308176">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308200">for</span>&nbsp;<span class="op" id="7308204">;</span>&nbsp;<span class="op" id="7308206">;</span>&nbsp;<span class="ident" id="7308208"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span><span class="op" id="7308213">++</span>&nbsp;<span class="op" id="7308216">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308220">hdr</span><span class="op" id="7308223">,</span>&nbsp;<span class="ident" id="7308225">err</span>&nbsp;<span class="op" id="7308229">:=</span>&nbsp;<span class="ident" id="7308232"><a href="/archive/tar/reader_test.go.html#7308094">tr</a></span><span class="op" id="7308234">.</span><span class="ident" id="7308235">Next</span><span class="op" id="7308239">(</span><span class="op" id="7308240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308244">if</span>&nbsp;<span class="ident" id="7308247"><a href="/archive/tar/reader_test.go.html#7308220">hdr</a></span>&nbsp;<span class="op" id="7308251">==</span>&nbsp;<span class="ident" id="7308254">nil</span>&nbsp;<span class="op" id="7308258">||</span>&nbsp;<span class="ident" id="7308261"><a href="/archive/tar/reader_test.go.html#7308225">err</a></span>&nbsp;<span class="op" id="7308265">==</span>&nbsp;<span class="ident" id="7308268"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7308270">.</span><span class="ident" id="7308271">EOF</span>&nbsp;<span class="op" id="7308275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308280">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7308293">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308315">if</span>&nbsp;<span class="op" id="7308318">!</span><span class="ident" id="7308319"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7308326">.</span><span class="ident" id="7308327">DeepEqual</span><span class="op" id="7308336">(</span><span class="op" id="7308337">*</span><span class="ident" id="7308338"><a href="/archive/tar/reader_test.go.html#7308220">hdr</a></span><span class="op" id="7308341">,</span>&nbsp;<span class="op" id="7308343">*</span><span class="ident" id="7308344"><a href="/archive/tar/reader_test.go.html#7308115">headers</a></span><span class="op" id="7308351">[</span><span class="ident" id="7308352"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span><span class="op" id="7308357">]</span><span class="op" id="7308358">)</span>&nbsp;<span class="op" id="7308360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308365"><a href="/archive/tar/reader_test.go.html#7307949">t</a></span><span class="op" id="7308366">.</span><span class="ident" id="7308367">Errorf</span><span class="op" id="7308373">(</span><span class="string" id="7308374">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7308413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308419">*</span><span class="ident" id="7308420"><a href="/archive/tar/reader_test.go.html#7308220">hdr</a></span><span class="op" id="7308423">,</span>&nbsp;<span class="ident" id="7308425"><a href="/archive/tar/reader_test.go.html#7308115">headers</a></span><span class="op" id="7308432">[</span><span class="ident" id="7308433"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span><span class="op" id="7308438">]</span><span class="op" id="7308439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308443">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7308448">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7308494">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308524">h</span>&nbsp;<span class="op" id="7308526">:=</span>&nbsp;<span class="ident" id="7308529"><a href="/archive/tar/reader_test.go.html#7299999">md5</a></span><span class="op" id="7308532">.</span><span class="ident" id="7308533">New</span><span class="op" id="7308536">(</span><span class="op" id="7308537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308541">rdbuf</span>&nbsp;<span class="op" id="7308547">:=</span>&nbsp;<span class="builtinfunc" id="7308550">make</span><span class="op" id="7308554">(</span><span class="op" id="7308555">[</span><span class="op" id="7308556">]</span><span class="builtintype" id="7308557">uint8</span><span class="op" id="7308562">,</span>&nbsp;<span class="num" id="7308564">8</span><span class="op" id="7308565">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308569">for</span>&nbsp;<span class="op" id="7308573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308578">nr</span><span class="op" id="7308580">,</span>&nbsp;<span class="ident" id="7308582">err</span>&nbsp;<span class="op" id="7308586">:=</span>&nbsp;<span class="ident" id="7308589"><a href="/archive/tar/reader_test.go.html#7308094">tr</a></span><span class="op" id="7308591">.</span><span class="ident" id="7308592">Read</span><span class="op" id="7308596">(</span><span class="ident" id="7308597"><a href="/archive/tar/reader_test.go.html#7308541">rdbuf</a></span><span class="op" id="7308602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308607">if</span>&nbsp;<span class="ident" id="7308610"><a href="/archive/tar/reader_test.go.html#7308582">err</a></span>&nbsp;<span class="op" id="7308614">==</span>&nbsp;<span class="ident" id="7308617"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7308619">.</span><span class="ident" id="7308620">EOF</span>&nbsp;<span class="op" id="7308624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308630">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308639">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308644">if</span>&nbsp;<span class="ident" id="7308647"><a href="/archive/tar/reader_test.go.html#7308582">err</a></span>&nbsp;<span class="op" id="7308651">!=</span>&nbsp;<span class="ident" id="7308654">nil</span>&nbsp;<span class="op" id="7308658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308664"><a href="/archive/tar/reader_test.go.html#7307949">t</a></span><span class="op" id="7308665">.</span><span class="ident" id="7308666">Errorf</span><span class="op" id="7308672">(</span><span class="string" id="7308673">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7308702">,</span>&nbsp;<span class="ident" id="7308704"><a href="/archive/tar/reader_test.go.html#7308582">err</a></span><span class="op" id="7308707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308713">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308727"><a href="/archive/tar/reader_test.go.html#7308524">h</a></span><span class="op" id="7308728">.</span><span class="ident" id="7308729">Write</span><span class="op" id="7308734">(</span><span class="ident" id="7308735"><a href="/archive/tar/reader_test.go.html#7308541">rdbuf</a></span><span class="op" id="7308740">[</span><span class="num" id="7308741">0</span><span class="op" id="7308742">:</span><span class="ident" id="7308743"><a href="/archive/tar/reader_test.go.html#7308578">nr</a></span><span class="op" id="7308745">]</span><span class="op" id="7308746">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7308754">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308775">have</span>&nbsp;<span class="op" id="7308780">:=</span>&nbsp;<span class="ident" id="7308783"><a href="/archive/tar/reader_test.go.html#7300013">fmt</a></span><span class="op" id="7308786">.</span><span class="ident" id="7308787">Sprintf</span><span class="op" id="7308794">(</span><span class="string" id="7308795">&#34;%x&#34;</span><span class="op" id="7308799">,</span>&nbsp;<span class="ident" id="7308801"><a href="/archive/tar/reader_test.go.html#7308524">h</a></span><span class="op" id="7308802">.</span><span class="ident" id="7308803">Sum</span><span class="op" id="7308806">(</span><span class="ident" id="7308807">nil</span><span class="op" id="7308810">)</span><span class="op" id="7308811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308815">want</span>&nbsp;<span class="op" id="7308820">:=</span>&nbsp;<span class="ident" id="7308823"><a href="/archive/tar/reader_test.go.html#7308140">cksums</a></span><span class="op" id="7308829">[</span><span class="ident" id="7308830"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span><span class="op" id="7308835">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308839">if</span>&nbsp;<span class="ident" id="7308842"><a href="/archive/tar/reader_test.go.html#7308815">want</a></span>&nbsp;<span class="op" id="7308847">!=</span>&nbsp;<span class="ident" id="7308850"><a href="/archive/tar/reader_test.go.html#7308775">have</a></span>&nbsp;<span class="op" id="7308855">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308860"><a href="/archive/tar/reader_test.go.html#7307949">t</a></span><span class="op" id="7308861">.</span><span class="ident" id="7308862">Errorf</span><span class="op" id="7308868">(</span><span class="string" id="7308869">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7308915">,</span>&nbsp;<span class="ident" id="7308917"><a href="/archive/tar/reader_test.go.html#7308220">hdr</a></span><span class="op" id="7308920">.</span><span class="ident" id="7308921">Name</span><span class="op" id="7308925">,</span>&nbsp;<span class="ident" id="7308927"><a href="/archive/tar/reader_test.go.html#7308775">have</a></span><span class="op" id="7308931">,</span>&nbsp;<span class="ident" id="7308933"><a href="/archive/tar/reader_test.go.html#7308815">want</a></span><span class="op" id="7308937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7308944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7308947">if</span>&nbsp;<span class="ident" id="7308950"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span>&nbsp;<span class="op" id="7308956">!=</span>&nbsp;<span class="builtinfunc" id="7308959">len</span><span class="op" id="7308962">(</span><span class="ident" id="7308963"><a href="/archive/tar/reader_test.go.html#7308115">headers</a></span><span class="op" id="7308970">)</span>&nbsp;<span class="op" id="7308972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7308976"><a href="/archive/tar/reader_test.go.html#7307949">t</a></span><span class="op" id="7308977">.</span><span class="ident" id="7308978">Errorf</span><span class="op" id="7308984">(</span><span class="string" id="7308985">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7309041">,</span>&nbsp;<span class="builtinfunc" id="7309043">len</span><span class="op" id="7309046">(</span><span class="ident" id="7309047"><a href="/archive/tar/reader_test.go.html#7308115">headers</a></span><span class="op" id="7309054">)</span><span class="op" id="7309055">,</span>&nbsp;<span class="ident" id="7309057"><a href="/archive/tar/reader_test.go.html#7308163">nread</a></span><span class="op" id="7309062">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309065">}</span><br>
<span class="lineno"></span><span class="op" id="7309067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7309070">func</span>&nbsp;<span class="ident" id="7309075">TestNonSeekable</span><span class="op" id="7309090">(</span><span class="ident" id="7309091">t</span>&nbsp;<span class="op" id="7309093">*</span><span class="ident" id="7309094"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7309101">.</span><span class="ident" id="7309102">T</span><span class="op" id="7309103">)</span>&nbsp;<span class="op" id="7309105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309108">test</span>&nbsp;<span class="op" id="7309113">:=</span>&nbsp;<span class="ident" id="7309116"><a href="/archive/tar/reader_test.go.html#7300172">gnuTarTest</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309128">f</span><span class="op" id="7309129">,</span>&nbsp;<span class="ident" id="7309131">err</span>&nbsp;<span class="op" id="7309135">:=</span>&nbsp;<span class="ident" id="7309138"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7309140">.</span><span class="ident" id="7309141">Open</span><span class="op" id="7309145">(</span><span class="ident" id="7309146"><a href="/archive/tar/reader_test.go.html#7309108">test</a></span><span class="op" id="7309150">.</span><span class="ident" id="7309151">file</span><span class="op" id="7309155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309158">if</span>&nbsp;<span class="ident" id="7309161"><a href="/archive/tar/reader_test.go.html#7309131">err</a></span>&nbsp;<span class="op" id="7309165">!=</span>&nbsp;<span class="ident" id="7309168">nil</span>&nbsp;<span class="op" id="7309172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309176"><a href="/archive/tar/reader_test.go.html#7309091">t</a></span><span class="op" id="7309177">.</span><span class="ident" id="7309178">Fatalf</span><span class="op" id="7309184">(</span><span class="string" id="7309185">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7309207">,</span>&nbsp;<span class="ident" id="7309209"><a href="/archive/tar/reader_test.go.html#7309131">err</a></span><span class="op" id="7309212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309218">defer</span>&nbsp;<span class="ident" id="7309224"><a href="/archive/tar/reader_test.go.html#7309128">f</a></span><span class="op" id="7309225">.</span><span class="ident" id="7309226">Close</span><span class="op" id="7309231">(</span><span class="op" id="7309232">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309236">type</span>&nbsp;<span class="ident" id="7309241">readerOnly</span>&nbsp;<span class="keyword" id="7309252">struct</span>&nbsp;<span class="op" id="7309259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309263"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7309265">.</span><span class="ident" id="7309266">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309277">tr</span>&nbsp;<span class="op" id="7309280">:=</span>&nbsp;<span class="ident" id="7309283"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7309292">(</span><span class="ident" id="7309293"><a href="/archive/tar/reader_test.go.html#7309241">readerOnly</a></span><span class="op" id="7309303">{</span><span class="ident" id="7309304"><a href="/archive/tar/reader_test.go.html#7309128">f</a></span><span class="op" id="7309305">}</span><span class="op" id="7309306">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309309">nread</span>&nbsp;<span class="op" id="7309315">:=</span>&nbsp;<span class="num" id="7309318">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309322">for</span>&nbsp;<span class="op" id="7309326">;</span>&nbsp;<span class="op" id="7309328">;</span>&nbsp;<span class="ident" id="7309330"><a href="/archive/tar/reader_test.go.html#7309309">nread</a></span><span class="op" id="7309335">++</span>&nbsp;<span class="op" id="7309338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309342">_</span><span class="op" id="7309343">,</span>&nbsp;<span class="ident" id="7309345">err</span>&nbsp;<span class="op" id="7309349">:=</span>&nbsp;<span class="ident" id="7309352"><a href="/archive/tar/reader_test.go.html#7309277">tr</a></span><span class="op" id="7309354">.</span><span class="ident" id="7309355">Next</span><span class="op" id="7309359">(</span><span class="op" id="7309360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309364">if</span>&nbsp;<span class="ident" id="7309367"><a href="/archive/tar/reader_test.go.html#7309345">err</a></span>&nbsp;<span class="op" id="7309371">==</span>&nbsp;<span class="ident" id="7309374"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7309376">.</span><span class="ident" id="7309377">EOF</span>&nbsp;<span class="op" id="7309381">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309386">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309398">if</span>&nbsp;<span class="ident" id="7309401"><a href="/archive/tar/reader_test.go.html#7309345">err</a></span>&nbsp;<span class="op" id="7309405">!=</span>&nbsp;<span class="ident" id="7309408">nil</span>&nbsp;<span class="op" id="7309412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309417"><a href="/archive/tar/reader_test.go.html#7309091">t</a></span><span class="op" id="7309418">.</span><span class="ident" id="7309419">Fatalf</span><span class="op" id="7309425">(</span><span class="string" id="7309426">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7309448">,</span>&nbsp;<span class="ident" id="7309450"><a href="/archive/tar/reader_test.go.html#7309345">err</a></span><span class="op" id="7309453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309457">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309464">if</span>&nbsp;<span class="ident" id="7309467"><a href="/archive/tar/reader_test.go.html#7309309">nread</a></span>&nbsp;<span class="op" id="7309473">!=</span>&nbsp;<span class="builtinfunc" id="7309476">len</span><span class="op" id="7309479">(</span><span class="ident" id="7309480"><a href="/archive/tar/reader_test.go.html#7309108">test</a></span><span class="op" id="7309484">.</span><span class="ident" id="7309485">headers</span><span class="op" id="7309492">)</span>&nbsp;<span class="op" id="7309494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309498"><a href="/archive/tar/reader_test.go.html#7309091">t</a></span><span class="op" id="7309499">.</span><span class="ident" id="7309500">Errorf</span><span class="op" id="7309506">(</span><span class="string" id="7309507">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7309563">,</span>&nbsp;<span class="builtinfunc" id="7309565">len</span><span class="op" id="7309568">(</span><span class="ident" id="7309569"><a href="/archive/tar/reader_test.go.html#7309108">test</a></span><span class="op" id="7309573">.</span><span class="ident" id="7309574">headers</span><span class="op" id="7309581">)</span><span class="op" id="7309582">,</span>&nbsp;<span class="ident" id="7309584"><a href="/archive/tar/reader_test.go.html#7309309">nread</a></span><span class="op" id="7309589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309592">}</span><br>
<span class="lineno">440</span><span class="op" id="7309594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7309597">func</span>&nbsp;<span class="ident" id="7309602">TestParsePAXHeader</span><span class="op" id="7309620">(</span><span class="ident" id="7309621">t</span>&nbsp;<span class="op" id="7309623">*</span><span class="ident" id="7309624"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7309631">.</span><span class="ident" id="7309632">T</span><span class="op" id="7309633">)</span>&nbsp;<span class="op" id="7309635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309638">paxTests</span>&nbsp;<span class="op" id="7309647">:=</span>&nbsp;<span class="op" id="7309650">[</span><span class="op" id="7309651">]</span><span class="op" id="7309652">[</span><span class="num" id="7309653">3</span><span class="op" id="7309654">]</span><span class="builtintype" id="7309655">string</span><span class="op" id="7309661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309665">{</span><span class="string" id="7309666">&#34;a&#34;</span><span class="op" id="7309669">,</span>&nbsp;<span class="string" id="7309671">&#34;a=name&#34;</span><span class="op" id="7309679">,</span>&nbsp;<span class="string" id="7309681">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7309694">}</span><span class="op" id="7309695">,</span>&nbsp;<span class="comment" id="7309697">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309750">{</span><span class="string" id="7309751">&#34;a&#34;</span><span class="op" id="7309754">,</span>&nbsp;<span class="string" id="7309756">&#34;a=name&#34;</span><span class="op" id="7309764">,</span>&nbsp;<span class="string" id="7309766">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7309778">}</span><span class="op" id="7309779">,</span>&nbsp;&nbsp;<span class="comment" id="7309782">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309834">{</span><span class="string" id="7309835">&#34;mtime&#34;</span><span class="op" id="7309842">,</span>&nbsp;<span class="string" id="7309844">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7309872">,</span>&nbsp;<span class="string" id="7309874">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7309907">}</span><span class="op" id="7309908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7309911">for</span>&nbsp;<span class="ident" id="7309915">_</span><span class="op" id="7309916">,</span>&nbsp;<span class="ident" id="7309918">test</span>&nbsp;<span class="op" id="7309923">:=</span>&nbsp;<span class="keyword" id="7309926">range</span>&nbsp;<span class="ident" id="7309932"><a href="/archive/tar/reader_test.go.html#7309638">paxTests</a></span>&nbsp;<span class="op" id="7309941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309945">key</span><span class="op" id="7309948">,</span>&nbsp;<span class="ident" id="7309950">expected</span><span class="op" id="7309958">,</span>&nbsp;<span class="ident" id="7309960">raw</span>&nbsp;<span class="op" id="7309964">:=</span>&nbsp;<span class="ident" id="7309967"><a href="/archive/tar/reader_test.go.html#7309918">test</a></span><span class="op" id="7309971">[</span><span class="num" id="7309972">0</span><span class="op" id="7309973">]</span><span class="op" id="7309974">,</span>&nbsp;<span class="ident" id="7309976"><a href="/archive/tar/reader_test.go.html#7309918">test</a></span><span class="op" id="7309980">[</span><span class="num" id="7309981">1</span><span class="op" id="7309982">]</span><span class="op" id="7309983">,</span>&nbsp;<span class="ident" id="7309985"><a href="/archive/tar/reader_test.go.html#7309918">test</a></span><span class="op" id="7309989">[</span><span class="num" id="7309990">2</span><span class="op" id="7309991">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309995">reader</span>&nbsp;<span class="op" id="7310002">:=</span>&nbsp;<span class="ident" id="7310005"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7310010">.</span><span class="ident" id="7310011">NewReader</span><span class="op" id="7310020">(</span><span class="op" id="7310021">[</span><span class="op" id="7310022">]</span><span class="builtintype" id="7310023">byte</span><span class="op" id="7310027">(</span><span class="ident" id="7310028"><a href="/archive/tar/reader_test.go.html#7309960">raw</a></span><span class="op" id="7310031">)</span><span class="op" id="7310032">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310036">headers</span><span class="op" id="7310043">,</span>&nbsp;<span class="ident" id="7310045">err</span>&nbsp;<span class="op" id="7310049">:=</span>&nbsp;<span class="ident" id="7310052"><a href="/archive/tar/reader.go.html#5211638">parsePAX</a></span><span class="op" id="7310060">(</span><span class="ident" id="7310061"><a href="/archive/tar/reader_test.go.html#7309995">reader</a></span><span class="op" id="7310067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310071">if</span>&nbsp;<span class="ident" id="7310074"><a href="/archive/tar/reader_test.go.html#7310045">err</a></span>&nbsp;<span class="op" id="7310078">!=</span>&nbsp;<span class="ident" id="7310081">nil</span>&nbsp;<span class="op" id="7310085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310090"><a href="/archive/tar/reader_test.go.html#7309621">t</a></span><span class="op" id="7310091">.</span><span class="ident" id="7310092">Errorf</span><span class="op" id="7310098">(</span><span class="string" id="7310099">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7310147">,</span>&nbsp;<span class="ident" id="7310149"><a href="/archive/tar/reader_test.go.html#7310045">err</a></span><span class="op" id="7310152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310157">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310168">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310172">if</span>&nbsp;<span class="ident" id="7310175"><a href="/archive/tar/reader_test.go.html#7300056">strings</a></span><span class="op" id="7310182">.</span><span class="ident" id="7310183">EqualFold</span><span class="op" id="7310192">(</span><span class="ident" id="7310193"><a href="/archive/tar/reader_test.go.html#7310036">headers</a></span><span class="op" id="7310200">[</span><span class="ident" id="7310201"><a href="/archive/tar/reader_test.go.html#7309945">key</a></span><span class="op" id="7310204">]</span><span class="op" id="7310205">,</span>&nbsp;<span class="ident" id="7310207"><a href="/archive/tar/reader_test.go.html#7309950">expected</a></span><span class="op" id="7310215">)</span>&nbsp;<span class="op" id="7310217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310222"><a href="/archive/tar/reader_test.go.html#7309621">t</a></span><span class="op" id="7310223">.</span><span class="ident" id="7310224">Errorf</span><span class="op" id="7310230">(</span><span class="string" id="7310231">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7310283">,</span>&nbsp;<span class="ident" id="7310285"><a href="/archive/tar/reader_test.go.html#7310036">headers</a></span><span class="op" id="7310292">[</span><span class="ident" id="7310293"><a href="/archive/tar/reader_test.go.html#7309945">key</a></span><span class="op" id="7310296">]</span><span class="op" id="7310297">,</span>&nbsp;<span class="ident" id="7310299"><a href="/archive/tar/reader_test.go.html#7309950">expected</a></span><span class="op" id="7310307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310327">trailer</span>&nbsp;<span class="op" id="7310335">:=</span>&nbsp;<span class="builtinfunc" id="7310338">make</span><span class="op" id="7310342">(</span><span class="op" id="7310343">[</span><span class="op" id="7310344">]</span><span class="builtintype" id="7310345">byte</span><span class="op" id="7310349">,</span>&nbsp;<span class="num" id="7310351">100</span><span class="op" id="7310354">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310358">n</span><span class="op" id="7310359">,</span>&nbsp;<span class="ident" id="7310361"><a href="/archive/tar/reader_test.go.html#7310045">err</a></span>&nbsp;<span class="op" id="7310365">:=</span>&nbsp;<span class="ident" id="7310368"><a href="/archive/tar/reader_test.go.html#7309995">reader</a></span><span class="op" id="7310374">.</span><span class="ident" id="7310375">Read</span><span class="op" id="7310379">(</span><span class="ident" id="7310380"><a href="/archive/tar/reader_test.go.html#7310327">trailer</a></span><span class="op" id="7310387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310391">if</span>&nbsp;<span class="ident" id="7310394"><a href="/archive/tar/reader_test.go.html#7310045">err</a></span>&nbsp;<span class="op" id="7310398">!=</span>&nbsp;<span class="ident" id="7310401"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7310403">.</span><span class="ident" id="7310404">EOF</span>&nbsp;<span class="op" id="7310408">||</span>&nbsp;<span class="ident" id="7310411"><a href="/archive/tar/reader_test.go.html#7310358">n</a></span>&nbsp;<span class="op" id="7310413">!=</span>&nbsp;<span class="num" id="7310416">0</span>&nbsp;<span class="op" id="7310418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310423"><a href="/archive/tar/reader_test.go.html#7309621">t</a></span><span class="op" id="7310424">.</span><span class="ident" id="7310425">Error</span><span class="op" id="7310430">(</span><span class="string" id="7310431">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7310455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310462">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310465">badHeader</span>&nbsp;<span class="op" id="7310475">:=</span>&nbsp;<span class="ident" id="7310478"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7310483">.</span><span class="ident" id="7310484">NewReader</span><span class="op" id="7310493">(</span><span class="op" id="7310494">[</span><span class="op" id="7310495">]</span><span class="builtintype" id="7310496">byte</span><span class="op" id="7310500">(</span><span class="string" id="7310501">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7310517">)</span><span class="op" id="7310518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310521">if</span>&nbsp;<span class="ident" id="7310524">_</span><span class="op" id="7310525">,</span>&nbsp;<span class="ident" id="7310527">err</span>&nbsp;<span class="op" id="7310531">:=</span>&nbsp;<span class="ident" id="7310534"><a href="/archive/tar/reader.go.html#5211638">parsePAX</a></span><span class="op" id="7310542">(</span><span class="ident" id="7310543"><a href="/archive/tar/reader_test.go.html#7310465">badHeader</a></span><span class="op" id="7310552">)</span><span class="op" id="7310553">;</span>&nbsp;<span class="ident" id="7310555"><a href="/archive/tar/reader_test.go.html#7310527">err</a></span>&nbsp;<span class="op" id="7310559">!=</span>&nbsp;<span class="ident" id="7310562"><a href="/archive/tar/reader.go.html#5203435">ErrHeader</a></span>&nbsp;<span class="op" id="7310572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310576"><a href="/archive/tar/reader_test.go.html#7309621">t</a></span><span class="op" id="7310577">.</span><span class="ident" id="7310578">Fatal</span><span class="op" id="7310583">(</span><span class="string" id="7310584">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7310628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310631">}</span><br>
<span class="lineno"></span><span class="op" id="7310633">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7310636">func</span>&nbsp;<span class="ident" id="7310641">TestParsePAXTime</span><span class="op" id="7310657">(</span><span class="ident" id="7310658">t</span>&nbsp;<span class="op" id="7310660">*</span><span class="ident" id="7310661"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7310668">.</span><span class="ident" id="7310669">T</span><span class="op" id="7310670">)</span>&nbsp;<span class="op" id="7310672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7310675">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310706">timestamps</span>&nbsp;<span class="op" id="7310717">:=</span>&nbsp;<span class="keyword" id="7310720">map</span><span class="op" id="7310723">[</span><span class="builtintype" id="7310724">string</span><span class="op" id="7310730">]</span><span class="ident" id="7310731"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7310735">.</span><span class="ident" id="7310736">Time</span><span class="op" id="7310740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7310744">&#34;1350244992.023960108&#34;</span><span class="op" id="7310766">:</span>&nbsp;&nbsp;<span class="ident" id="7310769"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7310773">.</span><span class="ident" id="7310774">Unix</span><span class="op" id="7310778">(</span><span class="num" id="7310779">1350244992</span><span class="op" id="7310789">,</span>&nbsp;<span class="num" id="7310791">23960108</span><span class="op" id="7310799">)</span><span class="op" id="7310800">,</span>&nbsp;<span class="comment" id="7310802">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7310823">&#34;1350244992.02396010&#34;</span><span class="op" id="7310844">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7310848"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7310852">.</span><span class="ident" id="7310853">Unix</span><span class="op" id="7310857">(</span><span class="num" id="7310858">1350244992</span><span class="op" id="7310868">,</span>&nbsp;<span class="num" id="7310870">23960100</span><span class="op" id="7310878">)</span><span class="op" id="7310879">,</span>&nbsp;<span class="comment" id="7310881">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7310908">&#34;1350244992.0239601089&#34;</span><span class="op" id="7310931">:</span>&nbsp;<span class="ident" id="7310933"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7310937">.</span><span class="ident" id="7310938">Unix</span><span class="op" id="7310942">(</span><span class="num" id="7310943">1350244992</span><span class="op" id="7310953">,</span>&nbsp;<span class="num" id="7310955">23960108</span><span class="op" id="7310963">)</span><span class="op" id="7310964">,</span>&nbsp;<span class="comment" id="7310966">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7310994">&#34;1350244992&#34;</span><span class="op" id="7311006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7311019"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7311023">.</span><span class="ident" id="7311024">Unix</span><span class="op" id="7311028">(</span><span class="num" id="7311029">1350244992</span><span class="op" id="7311039">,</span>&nbsp;<span class="num" id="7311041">0</span><span class="op" id="7311042">)</span><span class="op" id="7311043">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7311052">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311079">for</span>&nbsp;<span class="ident" id="7311083">input</span><span class="op" id="7311088">,</span>&nbsp;<span class="ident" id="7311090">expected</span>&nbsp;<span class="op" id="7311099">:=</span>&nbsp;<span class="keyword" id="7311102">range</span>&nbsp;<span class="ident" id="7311108"><a href="/archive/tar/reader_test.go.html#7310706">timestamps</a></span>&nbsp;<span class="op" id="7311119">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311123">ts</span><span class="op" id="7311125">,</span>&nbsp;<span class="ident" id="7311127">err</span>&nbsp;<span class="op" id="7311131">:=</span>&nbsp;<span class="ident" id="7311134"><a href="/archive/tar/reader.go.html#5210589">parsePAXTime</a></span><span class="op" id="7311146">(</span><span class="ident" id="7311147"><a href="/archive/tar/reader_test.go.html#7311083">input</a></span><span class="op" id="7311152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311156">if</span>&nbsp;<span class="ident" id="7311159"><a href="/archive/tar/reader_test.go.html#7311127">err</a></span>&nbsp;<span class="op" id="7311163">!=</span>&nbsp;<span class="ident" id="7311166">nil</span>&nbsp;<span class="op" id="7311170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311175"><a href="/archive/tar/reader_test.go.html#7310658">t</a></span><span class="op" id="7311176">.</span><span class="ident" id="7311177">Fatal</span><span class="op" id="7311182">(</span><span class="ident" id="7311183"><a href="/archive/tar/reader_test.go.html#7311127">err</a></span><span class="op" id="7311186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311194">if</span>&nbsp;<span class="op" id="7311197">!</span><span class="ident" id="7311198"><a href="/archive/tar/reader_test.go.html#7311123">ts</a></span><span class="op" id="7311200">.</span><span class="ident" id="7311201">Equal</span><span class="op" id="7311206">(</span><span class="ident" id="7311207"><a href="/archive/tar/reader_test.go.html#7311090">expected</a></span><span class="op" id="7311215">)</span>&nbsp;<span class="op" id="7311217">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311222"><a href="/archive/tar/reader_test.go.html#7310658">t</a></span><span class="op" id="7311223">.</span><span class="ident" id="7311224">Fatalf</span><span class="op" id="7311230">(</span><span class="string" id="7311231">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7311259">,</span>&nbsp;<span class="ident" id="7311261"><a href="/archive/tar/reader_test.go.html#7311123">ts</a></span><span class="op" id="7311263">,</span>&nbsp;<span class="ident" id="7311265"><a href="/archive/tar/reader_test.go.html#7311090">expected</a></span><span class="op" id="7311273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311280">}</span><br>
<span class="lineno"></span><span class="op" id="7311282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7311285">func</span>&nbsp;<span class="ident" id="7311290">TestMergePAX</span><span class="op" id="7311302">(</span><span class="ident" id="7311303">t</span>&nbsp;<span class="op" id="7311305">*</span><span class="ident" id="7311306"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7311313">.</span><span class="ident" id="7311314">T</span><span class="op" id="7311315">)</span>&nbsp;<span class="op" id="7311317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311320">hdr</span>&nbsp;<span class="op" id="7311324">:=</span>&nbsp;<span class="builtinfunc" id="7311327">new</span><span class="op" id="7311330">(</span><span class="ident" id="7311331"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7311337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7311340">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311390">headers</span>&nbsp;<span class="op" id="7311398">:=</span>&nbsp;<span class="keyword" id="7311401">map</span><span class="op" id="7311404">[</span><span class="builtintype" id="7311405">string</span><span class="op" id="7311411">]</span><span class="builtintype" id="7311412">string</span><span class="op" id="7311418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7311422">&#34;path&#34;</span><span class="op" id="7311428">:</span>&nbsp;&nbsp;<span class="string" id="7311431">&#34;a/b/c&#34;</span><span class="op" id="7311438">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7311442">&#34;uid&#34;</span><span class="op" id="7311447">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7311451">&#34;1000&#34;</span><span class="op" id="7311457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7311461">&#34;mtime&#34;</span><span class="op" id="7311468">:</span>&nbsp;<span class="string" id="7311470">&#34;1350244992.023960108&#34;</span><span class="op" id="7311492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311498">err</span>&nbsp;<span class="op" id="7311502">:=</span>&nbsp;<span class="ident" id="7311505"><a href="/archive/tar/reader.go.html#5209386">mergePAX</a></span><span class="op" id="7311513">(</span><span class="ident" id="7311514"><a href="/archive/tar/reader_test.go.html#7311320">hdr</a></span><span class="op" id="7311517">,</span>&nbsp;<span class="ident" id="7311519"><a href="/archive/tar/reader_test.go.html#7311390">headers</a></span><span class="op" id="7311526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311529">if</span>&nbsp;<span class="ident" id="7311532"><a href="/archive/tar/reader_test.go.html#7311498">err</a></span>&nbsp;<span class="op" id="7311536">!=</span>&nbsp;<span class="ident" id="7311539">nil</span>&nbsp;<span class="op" id="7311543">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311547"><a href="/archive/tar/reader_test.go.html#7311303">t</a></span><span class="op" id="7311548">.</span><span class="ident" id="7311549">Fatal</span><span class="op" id="7311554">(</span><span class="ident" id="7311555"><a href="/archive/tar/reader_test.go.html#7311498">err</a></span><span class="op" id="7311558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311564">want</span>&nbsp;<span class="op" id="7311569">:=</span>&nbsp;<span class="op" id="7311572">&amp;</span><span class="ident" id="7311573"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="7311579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311583">Name</span><span class="op" id="7311587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7311592">&#34;a/b/c&#34;</span><span class="op" id="7311599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311603">Uid</span><span class="op" id="7311606">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7311612">1000</span><span class="op" id="7311616">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311620">ModTime</span><span class="op" id="7311627">:</span>&nbsp;<span class="ident" id="7311629"><a href="/archive/tar/reader_test.go.html#7300078">time</a></span><span class="op" id="7311633">.</span><span class="ident" id="7311634">Unix</span><span class="op" id="7311638">(</span><span class="num" id="7311639">1350244992</span><span class="op" id="7311649">,</span>&nbsp;<span class="num" id="7311651">23960108</span><span class="op" id="7311659">)</span><span class="op" id="7311660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311666">if</span>&nbsp;<span class="op" id="7311669">!</span><span class="ident" id="7311670"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7311677">.</span><span class="ident" id="7311678">DeepEqual</span><span class="op" id="7311687">(</span><span class="ident" id="7311688"><a href="/archive/tar/reader_test.go.html#7311320">hdr</a></span><span class="op" id="7311691">,</span>&nbsp;<span class="ident" id="7311693"><a href="/archive/tar/reader_test.go.html#7311564">want</a></span><span class="op" id="7311697">)</span>&nbsp;<span class="op" id="7311699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311703"><a href="/archive/tar/reader_test.go.html#7311303">t</a></span><span class="op" id="7311704">.</span><span class="ident" id="7311705">Errorf</span><span class="op" id="7311711">(</span><span class="string" id="7311712">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7311748">,</span>&nbsp;<span class="ident" id="7311750"><a href="/archive/tar/reader_test.go.html#7311320">hdr</a></span><span class="op" id="7311753">,</span>&nbsp;<span class="ident" id="7311755"><a href="/archive/tar/reader_test.go.html#7311564">want</a></span><span class="op" id="7311759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311762">}</span><br>
<span class="lineno">510</span><span class="op" id="7311764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7311767">func</span>&nbsp;<span class="ident" id="7311772">TestSparseEndToEnd</span><span class="op" id="7311790">(</span><span class="ident" id="7311791">t</span>&nbsp;<span class="op" id="7311793">*</span><span class="ident" id="7311794"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7311801">.</span><span class="ident" id="7311802">T</span><span class="op" id="7311803">)</span>&nbsp;<span class="op" id="7311805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311808">test</span>&nbsp;<span class="op" id="7311813">:=</span>&nbsp;<span class="ident" id="7311816"><a href="/archive/tar/reader_test.go.html#7300779">sparseTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311831">f</span><span class="op" id="7311832">,</span>&nbsp;<span class="ident" id="7311834">err</span>&nbsp;<span class="op" id="7311838">:=</span>&nbsp;<span class="ident" id="7311841"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7311843">.</span><span class="ident" id="7311844">Open</span><span class="op" id="7311848">(</span><span class="ident" id="7311849"><a href="/archive/tar/reader_test.go.html#7311808">test</a></span><span class="op" id="7311853">.</span><span class="ident" id="7311854">file</span><span class="op" id="7311858">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311861">if</span>&nbsp;<span class="ident" id="7311864"><a href="/archive/tar/reader_test.go.html#7311834">err</a></span>&nbsp;<span class="op" id="7311868">!=</span>&nbsp;<span class="ident" id="7311871">nil</span>&nbsp;<span class="op" id="7311875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311879"><a href="/archive/tar/reader_test.go.html#7311791">t</a></span><span class="op" id="7311880">.</span><span class="ident" id="7311881">Fatalf</span><span class="op" id="7311887">(</span><span class="string" id="7311888">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7311910">,</span>&nbsp;<span class="ident" id="7311912"><a href="/archive/tar/reader_test.go.html#7311834">err</a></span><span class="op" id="7311915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311921">defer</span>&nbsp;<span class="ident" id="7311927"><a href="/archive/tar/reader_test.go.html#7311831">f</a></span><span class="op" id="7311928">.</span><span class="ident" id="7311929">Close</span><span class="op" id="7311934">(</span><span class="op" id="7311935">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311939">tr</span>&nbsp;<span class="op" id="7311942">:=</span>&nbsp;<span class="ident" id="7311945"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7311954">(</span><span class="ident" id="7311955"><a href="/archive/tar/reader_test.go.html#7311831">f</a></span><span class="op" id="7311956">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311960">headers</span>&nbsp;<span class="op" id="7311968">:=</span>&nbsp;<span class="ident" id="7311971"><a href="/archive/tar/reader_test.go.html#7311808">test</a></span><span class="op" id="7311975">.</span><span class="ident" id="7311976">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311985">cksums</span>&nbsp;<span class="op" id="7311992">:=</span>&nbsp;<span class="ident" id="7311995"><a href="/archive/tar/reader_test.go.html#7311808">test</a></span><span class="op" id="7311999">.</span><span class="ident" id="7312000">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312008">nread</span>&nbsp;<span class="op" id="7312014">:=</span>&nbsp;<span class="num" id="7312017">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7312021">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312045">for</span>&nbsp;<span class="op" id="7312049">;</span>&nbsp;<span class="op" id="7312051">;</span>&nbsp;<span class="ident" id="7312053"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span><span class="op" id="7312058">++</span>&nbsp;<span class="op" id="7312061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312065">hdr</span><span class="op" id="7312068">,</span>&nbsp;<span class="ident" id="7312070">err</span>&nbsp;<span class="op" id="7312074">:=</span>&nbsp;<span class="ident" id="7312077"><a href="/archive/tar/reader_test.go.html#7311939">tr</a></span><span class="op" id="7312079">.</span><span class="ident" id="7312080">Next</span><span class="op" id="7312084">(</span><span class="op" id="7312085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312089">if</span>&nbsp;<span class="ident" id="7312092"><a href="/archive/tar/reader_test.go.html#7312065">hdr</a></span>&nbsp;<span class="op" id="7312096">==</span>&nbsp;<span class="ident" id="7312099">nil</span>&nbsp;<span class="op" id="7312103">||</span>&nbsp;<span class="ident" id="7312106"><a href="/archive/tar/reader_test.go.html#7312070">err</a></span>&nbsp;<span class="op" id="7312110">==</span>&nbsp;<span class="ident" id="7312113"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7312115">.</span><span class="ident" id="7312116">EOF</span>&nbsp;<span class="op" id="7312120">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312125">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7312138">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312160">if</span>&nbsp;<span class="op" id="7312163">!</span><span class="ident" id="7312164"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7312171">.</span><span class="ident" id="7312172">DeepEqual</span><span class="op" id="7312181">(</span><span class="op" id="7312182">*</span><span class="ident" id="7312183"><a href="/archive/tar/reader_test.go.html#7312065">hdr</a></span><span class="op" id="7312186">,</span>&nbsp;<span class="op" id="7312188">*</span><span class="ident" id="7312189"><a href="/archive/tar/reader_test.go.html#7311960">headers</a></span><span class="op" id="7312196">[</span><span class="ident" id="7312197"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span><span class="op" id="7312202">]</span><span class="op" id="7312203">)</span>&nbsp;<span class="op" id="7312205">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312210"><a href="/archive/tar/reader_test.go.html#7311791">t</a></span><span class="op" id="7312211">.</span><span class="ident" id="7312212">Errorf</span><span class="op" id="7312218">(</span><span class="string" id="7312219">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7312258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312264">*</span><span class="ident" id="7312265"><a href="/archive/tar/reader_test.go.html#7312065">hdr</a></span><span class="op" id="7312268">,</span>&nbsp;<span class="ident" id="7312270"><a href="/archive/tar/reader_test.go.html#7311960">headers</a></span><span class="op" id="7312277">[</span><span class="ident" id="7312278"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span><span class="op" id="7312283">]</span><span class="op" id="7312284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7312293">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312330">h</span>&nbsp;<span class="op" id="7312332">:=</span>&nbsp;<span class="ident" id="7312335"><a href="/archive/tar/reader_test.go.html#7299999">md5</a></span><span class="op" id="7312338">.</span><span class="ident" id="7312339">New</span><span class="op" id="7312342">(</span><span class="op" id="7312343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312347">_</span><span class="op" id="7312348">,</span>&nbsp;<span class="ident" id="7312350"><a href="/archive/tar/reader_test.go.html#7312070">err</a></span>&nbsp;<span class="op" id="7312354">=</span>&nbsp;<span class="ident" id="7312356"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7312358">.</span><span class="ident" id="7312359">Copy</span><span class="op" id="7312363">(</span><span class="ident" id="7312364"><a href="/archive/tar/reader_test.go.html#7312330">h</a></span><span class="op" id="7312365">,</span>&nbsp;<span class="ident" id="7312367"><a href="/archive/tar/reader_test.go.html#7311939">tr</a></span><span class="op" id="7312369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312373">if</span>&nbsp;<span class="ident" id="7312376"><a href="/archive/tar/reader_test.go.html#7312070">err</a></span>&nbsp;<span class="op" id="7312380">!=</span>&nbsp;<span class="ident" id="7312383">nil</span>&nbsp;<span class="op" id="7312387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312392"><a href="/archive/tar/reader_test.go.html#7311791">t</a></span><span class="op" id="7312393">.</span><span class="ident" id="7312394">Fatalf</span><span class="op" id="7312400">(</span><span class="string" id="7312401">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7312423">,</span>&nbsp;<span class="ident" id="7312425"><a href="/archive/tar/reader_test.go.html#7312070">err</a></span><span class="op" id="7312428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312432">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7312437">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312458">have</span>&nbsp;<span class="op" id="7312463">:=</span>&nbsp;<span class="ident" id="7312466"><a href="/archive/tar/reader_test.go.html#7300013">fmt</a></span><span class="op" id="7312469">.</span><span class="ident" id="7312470">Sprintf</span><span class="op" id="7312477">(</span><span class="string" id="7312478">&#34;%x&#34;</span><span class="op" id="7312482">,</span>&nbsp;<span class="ident" id="7312484"><a href="/archive/tar/reader_test.go.html#7312330">h</a></span><span class="op" id="7312485">.</span><span class="ident" id="7312486">Sum</span><span class="op" id="7312489">(</span><span class="ident" id="7312490">nil</span><span class="op" id="7312493">)</span><span class="op" id="7312494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312498">want</span>&nbsp;<span class="op" id="7312503">:=</span>&nbsp;<span class="ident" id="7312506"><a href="/archive/tar/reader_test.go.html#7311985">cksums</a></span><span class="op" id="7312512">[</span><span class="ident" id="7312513"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span><span class="op" id="7312518">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312522">if</span>&nbsp;<span class="ident" id="7312525"><a href="/archive/tar/reader_test.go.html#7312498">want</a></span>&nbsp;<span class="op" id="7312530">!=</span>&nbsp;<span class="ident" id="7312533"><a href="/archive/tar/reader_test.go.html#7312458">have</a></span>&nbsp;<span class="op" id="7312538">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312543"><a href="/archive/tar/reader_test.go.html#7311791">t</a></span><span class="op" id="7312544">.</span><span class="ident" id="7312545">Errorf</span><span class="op" id="7312551">(</span><span class="string" id="7312552">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7312598">,</span>&nbsp;<span class="ident" id="7312600"><a href="/archive/tar/reader_test.go.html#7312065">hdr</a></span><span class="op" id="7312603">.</span><span class="ident" id="7312604">Name</span><span class="op" id="7312608">,</span>&nbsp;<span class="ident" id="7312610"><a href="/archive/tar/reader_test.go.html#7312458">have</a></span><span class="op" id="7312614">,</span>&nbsp;<span class="ident" id="7312616"><a href="/archive/tar/reader_test.go.html#7312498">want</a></span><span class="op" id="7312620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7312630">if</span>&nbsp;<span class="ident" id="7312633"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span>&nbsp;<span class="op" id="7312639">!=</span>&nbsp;<span class="builtinfunc" id="7312642">len</span><span class="op" id="7312645">(</span><span class="ident" id="7312646"><a href="/archive/tar/reader_test.go.html#7311960">headers</a></span><span class="op" id="7312653">)</span>&nbsp;<span class="op" id="7312655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312659"><a href="/archive/tar/reader_test.go.html#7311791">t</a></span><span class="op" id="7312660">.</span><span class="ident" id="7312661">Errorf</span><span class="op" id="7312667">(</span><span class="string" id="7312668">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7312724">,</span>&nbsp;<span class="builtinfunc" id="7312726">len</span><span class="op" id="7312729">(</span><span class="ident" id="7312730"><a href="/archive/tar/reader_test.go.html#7311960">headers</a></span><span class="op" id="7312737">)</span><span class="op" id="7312738">,</span>&nbsp;<span class="ident" id="7312740"><a href="/archive/tar/reader_test.go.html#7312008">nread</a></span><span class="op" id="7312745">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312748">}</span><br>
<span class="lineno"></span><span class="op" id="7312750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7312753">type</span>&nbsp;<span class="ident" id="7312758">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7312777">struct</span>&nbsp;<span class="op" id="7312784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312787">sparseData</span>&nbsp;<span class="op" id="7312798">[</span><span class="op" id="7312799">]</span><span class="builtintype" id="7312800">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312806">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7312817">[</span><span class="op" id="7312818">]</span><span class="ident" id="7312819"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312832">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7312843">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312850">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7312861">[</span><span class="op" id="7312862">]</span><span class="builtintype" id="7312863">byte</span><br>
<span class="lineno"></span><span class="op" id="7312868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7312871">var</span>&nbsp;<span class="ident" id="7312875">sparseFileReadTests</span>&nbsp;<span class="op" id="7312895">=</span>&nbsp;<span class="op" id="7312897">[</span><span class="op" id="7312898">]</span><span class="ident" id="7312899"><a href="/archive/tar/reader_test.go.html#7312758">sparseFileReadTest</a></span><span class="op" id="7312917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312924">sparseData</span><span class="op" id="7312934">:</span>&nbsp;<span class="op" id="7312936">[</span><span class="op" id="7312937">]</span><span class="builtintype" id="7312938">byte</span><span class="op" id="7312942">(</span><span class="string" id="7312943">&#34;abcde&#34;</span><span class="op" id="7312950">)</span><span class="op" id="7312951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7312955">sparseMap</span><span class="op" id="7312964">:</span>&nbsp;<span class="op" id="7312966">[</span><span class="op" id="7312967">]</span><span class="ident" id="7312968"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7312979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7312984">{</span><span class="ident" id="7312985">offset</span><span class="op" id="7312991">:</span>&nbsp;<span class="num" id="7312993">0</span><span class="op" id="7312994">,</span>&nbsp;<span class="ident" id="7312996">numBytes</span><span class="op" id="7313004">:</span>&nbsp;<span class="num" id="7313006">2</span><span class="op" id="7313007">}</span><span class="op" id="7313008">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313013">{</span><span class="ident" id="7313014">offset</span><span class="op" id="7313020">:</span>&nbsp;<span class="num" id="7313022">5</span><span class="op" id="7313023">,</span>&nbsp;<span class="ident" id="7313025">numBytes</span><span class="op" id="7313033">:</span>&nbsp;<span class="num" id="7313035">3</span><span class="op" id="7313036">}</span><span class="op" id="7313037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313041">}</span><span class="op" id="7313042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313046">realSize</span><span class="op" id="7313054">:</span>&nbsp;<span class="num" id="7313056">8</span><span class="op" id="7313057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313061">expected</span><span class="op" id="7313069">:</span>&nbsp;<span class="op" id="7313071">[</span><span class="op" id="7313072">]</span><span class="builtintype" id="7313073">byte</span><span class="op" id="7313077">(</span><span class="string" id="7313078">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7313097">)</span><span class="op" id="7313098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313101">}</span><span class="op" id="7313102">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313109">sparseData</span><span class="op" id="7313119">:</span>&nbsp;<span class="op" id="7313121">[</span><span class="op" id="7313122">]</span><span class="builtintype" id="7313123">byte</span><span class="op" id="7313127">(</span><span class="string" id="7313128">&#34;abcde&#34;</span><span class="op" id="7313135">)</span><span class="op" id="7313136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313140">sparseMap</span><span class="op" id="7313149">:</span>&nbsp;<span class="op" id="7313151">[</span><span class="op" id="7313152">]</span><span class="ident" id="7313153"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7313164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313169">{</span><span class="ident" id="7313170">offset</span><span class="op" id="7313176">:</span>&nbsp;<span class="num" id="7313178">0</span><span class="op" id="7313179">,</span>&nbsp;<span class="ident" id="7313181">numBytes</span><span class="op" id="7313189">:</span>&nbsp;<span class="num" id="7313191">2</span><span class="op" id="7313192">}</span><span class="op" id="7313193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313198">{</span><span class="ident" id="7313199">offset</span><span class="op" id="7313205">:</span>&nbsp;<span class="num" id="7313207">5</span><span class="op" id="7313208">,</span>&nbsp;<span class="ident" id="7313210">numBytes</span><span class="op" id="7313218">:</span>&nbsp;<span class="num" id="7313220">3</span><span class="op" id="7313221">}</span><span class="op" id="7313222">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313226">}</span><span class="op" id="7313227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313231">realSize</span><span class="op" id="7313239">:</span>&nbsp;<span class="num" id="7313241">10</span><span class="op" id="7313243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313247">expected</span><span class="op" id="7313255">:</span>&nbsp;<span class="op" id="7313257">[</span><span class="op" id="7313258">]</span><span class="builtintype" id="7313259">byte</span><span class="op" id="7313263">(</span><span class="string" id="7313264">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7313291">)</span><span class="op" id="7313292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313295">}</span><span class="op" id="7313296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313299">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313303">sparseData</span><span class="op" id="7313313">:</span>&nbsp;<span class="op" id="7313315">[</span><span class="op" id="7313316">]</span><span class="builtintype" id="7313317">byte</span><span class="op" id="7313321">(</span><span class="string" id="7313322">&#34;abcde&#34;</span><span class="op" id="7313329">)</span><span class="op" id="7313330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313334">sparseMap</span><span class="op" id="7313343">:</span>&nbsp;<span class="op" id="7313345">[</span><span class="op" id="7313346">]</span><span class="ident" id="7313347"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7313358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313363">{</span><span class="ident" id="7313364">offset</span><span class="op" id="7313370">:</span>&nbsp;<span class="num" id="7313372">1</span><span class="op" id="7313373">,</span>&nbsp;<span class="ident" id="7313375">numBytes</span><span class="op" id="7313383">:</span>&nbsp;<span class="num" id="7313385">3</span><span class="op" id="7313386">}</span><span class="op" id="7313387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313392">{</span><span class="ident" id="7313393">offset</span><span class="op" id="7313399">:</span>&nbsp;<span class="num" id="7313401">6</span><span class="op" id="7313402">,</span>&nbsp;<span class="ident" id="7313404">numBytes</span><span class="op" id="7313412">:</span>&nbsp;<span class="num" id="7313414">2</span><span class="op" id="7313415">}</span><span class="op" id="7313416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313420">}</span><span class="op" id="7313421">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313425">realSize</span><span class="op" id="7313433">:</span>&nbsp;<span class="num" id="7313435">8</span><span class="op" id="7313436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313440">expected</span><span class="op" id="7313448">:</span>&nbsp;<span class="op" id="7313450">[</span><span class="op" id="7313451">]</span><span class="builtintype" id="7313452">byte</span><span class="op" id="7313456">(</span><span class="string" id="7313457">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7313476">)</span><span class="op" id="7313477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313480">}</span><span class="op" id="7313481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313488">sparseData</span><span class="op" id="7313498">:</span>&nbsp;<span class="op" id="7313500">[</span><span class="op" id="7313501">]</span><span class="builtintype" id="7313502">byte</span><span class="op" id="7313506">(</span><span class="string" id="7313507">&#34;abcde&#34;</span><span class="op" id="7313514">)</span><span class="op" id="7313515">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313519">sparseMap</span><span class="op" id="7313528">:</span>&nbsp;<span class="op" id="7313530">[</span><span class="op" id="7313531">]</span><span class="ident" id="7313532"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7313543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313548">{</span><span class="ident" id="7313549">offset</span><span class="op" id="7313555">:</span>&nbsp;<span class="num" id="7313557">1</span><span class="op" id="7313558">,</span>&nbsp;<span class="ident" id="7313560">numBytes</span><span class="op" id="7313568">:</span>&nbsp;<span class="num" id="7313570">3</span><span class="op" id="7313571">}</span><span class="op" id="7313572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313577">{</span><span class="ident" id="7313578">offset</span><span class="op" id="7313584">:</span>&nbsp;<span class="num" id="7313586">6</span><span class="op" id="7313587">,</span>&nbsp;<span class="ident" id="7313589">numBytes</span><span class="op" id="7313597">:</span>&nbsp;<span class="num" id="7313599">2</span><span class="op" id="7313600">}</span><span class="op" id="7313601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313605">}</span><span class="op" id="7313606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313610">realSize</span><span class="op" id="7313618">:</span>&nbsp;<span class="num" id="7313620">10</span><span class="op" id="7313622">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313626">expected</span><span class="op" id="7313634">:</span>&nbsp;<span class="op" id="7313636">[</span><span class="op" id="7313637">]</span><span class="builtintype" id="7313638">byte</span><span class="op" id="7313642">(</span><span class="string" id="7313643">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7313670">)</span><span class="op" id="7313671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313674">}</span><span class="op" id="7313675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313682">sparseData</span><span class="op" id="7313692">:</span>&nbsp;<span class="op" id="7313694">[</span><span class="op" id="7313695">]</span><span class="builtintype" id="7313696">byte</span><span class="op" id="7313700">(</span><span class="string" id="7313701">&#34;&#34;</span><span class="op" id="7313703">)</span><span class="op" id="7313704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313708">sparseMap</span><span class="op" id="7313717">:</span>&nbsp;&nbsp;<span class="ident" id="7313720">nil</span><span class="op" id="7313723">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313727">realSize</span><span class="op" id="7313735">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7313739">2</span><span class="op" id="7313740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313744">expected</span><span class="op" id="7313752">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7313756">[</span><span class="op" id="7313757">]</span><span class="builtintype" id="7313758">byte</span><span class="op" id="7313762">(</span><span class="string" id="7313763">&#34;\x00\x00&#34;</span><span class="op" id="7313773">)</span><span class="op" id="7313774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7313777">}</span><span class="op" id="7313778">,</span><br>
<span class="lineno"></span><span class="op" id="7313780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7313783">func</span>&nbsp;<span class="ident" id="7313788">TestSparseFileReader</span><span class="op" id="7313808">(</span><span class="ident" id="7313809">t</span>&nbsp;<span class="op" id="7313811">*</span><span class="ident" id="7313812"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7313819">.</span><span class="ident" id="7313820">T</span><span class="op" id="7313821">)</span>&nbsp;<span class="op" id="7313823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7313826">for</span>&nbsp;<span class="ident" id="7313830">i</span><span class="op" id="7313831">,</span>&nbsp;<span class="ident" id="7313833">test</span>&nbsp;<span class="op" id="7313838">:=</span>&nbsp;<span class="keyword" id="7313841">range</span>&nbsp;<span class="ident" id="7313847"><a href="/archive/tar/reader_test.go.html#7312875">sparseFileReadTests</a></span>&nbsp;<span class="op" id="7313867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313871">r</span>&nbsp;<span class="op" id="7313873">:=</span>&nbsp;<span class="ident" id="7313876"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7313881">.</span><span class="ident" id="7313882">NewReader</span><span class="op" id="7313891">(</span><span class="ident" id="7313892"><a href="/archive/tar/reader_test.go.html#7313833">test</a></span><span class="op" id="7313896">.</span><span class="ident" id="7313897">sparseData</span><span class="op" id="7313907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313911">nb</span>&nbsp;<span class="op" id="7313914">:=</span>&nbsp;<span class="ident" id="7313917">int64</span><span class="op" id="7313922">(</span><span class="ident" id="7313923"><a href="/archive/tar/reader_test.go.html#7313871">r</a></span><span class="op" id="7313924">.</span><span class="ident" id="7313925">Len</span><span class="op" id="7313928">(</span><span class="op" id="7313929">)</span><span class="op" id="7313930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313934">sfr</span>&nbsp;<span class="op" id="7313938">:=</span>&nbsp;<span class="op" id="7313941">&amp;</span><span class="ident" id="7313942"><a href="/archive/tar/reader.go.html#5204565">sparseFileReader</a></span><span class="op" id="7313958">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7313963">rfr</span><span class="op" id="7313966">:</span>&nbsp;<span class="op" id="7313968">&amp;</span><span class="ident" id="7313969"><a href="/archive/tar/reader.go.html#5204345">regFileReader</a></span><span class="op" id="7313982">{</span><span class="ident" id="7313983">r</span><span class="op" id="7313984">:</span>&nbsp;<span class="ident" id="7313986"><a href="/archive/tar/reader_test.go.html#7313871">r</a></span><span class="op" id="7313987">,</span>&nbsp;<span class="ident" id="7313989">nb</span><span class="op" id="7313991">:</span>&nbsp;<span class="ident" id="7313993"><a href="/archive/tar/reader_test.go.html#7313911">nb</a></span><span class="op" id="7313995">}</span><span class="op" id="7313996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314001">sp</span><span class="op" id="7314003">:</span>&nbsp;&nbsp;<span class="ident" id="7314006"><a href="/archive/tar/reader_test.go.html#7313833">test</a></span><span class="op" id="7314010">.</span><span class="ident" id="7314011">sparseMap</span><span class="op" id="7314020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314025">pos</span><span class="op" id="7314028">:</span>&nbsp;<span class="num" id="7314030">0</span><span class="op" id="7314031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314036">tot</span><span class="op" id="7314039">:</span>&nbsp;<span class="ident" id="7314041"><a href="/archive/tar/reader_test.go.html#7313833">test</a></span><span class="op" id="7314045">.</span><span class="ident" id="7314046">realSize</span><span class="op" id="7314054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314058">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7314062">if</span>&nbsp;<span class="ident" id="7314065"><a href="/archive/tar/reader_test.go.html#7313934">sfr</a></span><span class="op" id="7314068">.</span><span class="ident" id="7314069">numBytes</span><span class="op" id="7314077">(</span><span class="op" id="7314078">)</span>&nbsp;<span class="op" id="7314080">!=</span>&nbsp;<span class="ident" id="7314083"><a href="/archive/tar/reader_test.go.html#7313911">nb</a></span>&nbsp;<span class="op" id="7314086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314091"><a href="/archive/tar/reader_test.go.html#7313809">t</a></span><span class="op" id="7314092">.</span><span class="ident" id="7314093">Errorf</span><span class="op" id="7314099">(</span><span class="string" id="7314100">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7314155">,</span>&nbsp;<span class="ident" id="7314157"><a href="/archive/tar/reader_test.go.html#7313830">i</a></span><span class="op" id="7314158">,</span>&nbsp;<span class="ident" id="7314160"><a href="/archive/tar/reader_test.go.html#7313934">sfr</a></span><span class="op" id="7314163">.</span><span class="ident" id="7314164">numBytes</span><span class="op" id="7314172">(</span><span class="op" id="7314173">)</span><span class="op" id="7314174">,</span>&nbsp;<span class="ident" id="7314176"><a href="/archive/tar/reader_test.go.html#7313911">nb</a></span><span class="op" id="7314178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314186">buf</span><span class="op" id="7314189">,</span>&nbsp;<span class="ident" id="7314191">err</span>&nbsp;<span class="op" id="7314195">:=</span>&nbsp;<span class="ident" id="7314198"><a href="/archive/tar/reader_test.go.html#7300026">ioutil</a></span><span class="op" id="7314204">.</span><span class="ident" id="7314205">ReadAll</span><span class="op" id="7314212">(</span><span class="ident" id="7314213"><a href="/archive/tar/reader_test.go.html#7313934">sfr</a></span><span class="op" id="7314216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7314220">if</span>&nbsp;<span class="ident" id="7314223"><a href="/archive/tar/reader_test.go.html#7314191">err</a></span>&nbsp;<span class="op" id="7314227">!=</span>&nbsp;<span class="ident" id="7314230">nil</span>&nbsp;<span class="op" id="7314234">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314239"><a href="/archive/tar/reader_test.go.html#7313809">t</a></span><span class="op" id="7314240">.</span><span class="ident" id="7314241">Errorf</span><span class="op" id="7314247">(</span><span class="string" id="7314248">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7314279">,</span>&nbsp;<span class="ident" id="7314281"><a href="/archive/tar/reader_test.go.html#7313830">i</a></span><span class="op" id="7314282">,</span>&nbsp;<span class="ident" id="7314284"><a href="/archive/tar/reader_test.go.html#7314191">err</a></span><span class="op" id="7314287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7314295">if</span>&nbsp;<span class="ident" id="7314298">e</span>&nbsp;<span class="op" id="7314300">:=</span>&nbsp;<span class="ident" id="7314303"><a href="/archive/tar/reader_test.go.html#7313833">test</a></span><span class="op" id="7314307">.</span><span class="ident" id="7314308">expected</span><span class="op" id="7314316">;</span>&nbsp;<span class="op" id="7314318">!</span><span class="ident" id="7314319"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7314324">.</span><span class="ident" id="7314325">Equal</span><span class="op" id="7314330">(</span><span class="ident" id="7314331"><a href="/archive/tar/reader_test.go.html#7314186">buf</a></span><span class="op" id="7314334">,</span>&nbsp;<span class="ident" id="7314336"><a href="/archive/tar/reader_test.go.html#7314298">e</a></span><span class="op" id="7314337">)</span>&nbsp;<span class="op" id="7314339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314344"><a href="/archive/tar/reader_test.go.html#7313809">t</a></span><span class="op" id="7314345">.</span><span class="ident" id="7314346">Errorf</span><span class="op" id="7314352">(</span><span class="string" id="7314353">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7314386">,</span>&nbsp;<span class="ident" id="7314388"><a href="/archive/tar/reader_test.go.html#7313830">i</a></span><span class="op" id="7314389">,</span>&nbsp;<span class="ident" id="7314391"><a href="/archive/tar/reader_test.go.html#7314186">buf</a></span><span class="op" id="7314394">,</span>&nbsp;<span class="ident" id="7314396"><a href="/archive/tar/reader_test.go.html#7314298">e</a></span><span class="op" id="7314397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314401">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7314405">if</span>&nbsp;<span class="ident" id="7314408"><a href="/archive/tar/reader_test.go.html#7313934">sfr</a></span><span class="op" id="7314411">.</span><span class="ident" id="7314412">numBytes</span><span class="op" id="7314420">(</span><span class="op" id="7314421">)</span>&nbsp;<span class="op" id="7314423">!=</span>&nbsp;<span class="num" id="7314426">0</span>&nbsp;<span class="op" id="7314428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314433"><a href="/archive/tar/reader_test.go.html#7313809">t</a></span><span class="op" id="7314434">.</span><span class="ident" id="7314435">Errorf</span><span class="op" id="7314441">(</span><span class="string" id="7314442">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7314502">,</span>&nbsp;<span class="ident" id="7314504"><a href="/archive/tar/reader_test.go.html#7313830">i</a></span><span class="op" id="7314505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314512">}</span><br>
<span class="lineno"></span><span class="op" id="7314514">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7314517">func</span>&nbsp;<span class="ident" id="7314522">TestSparseIncrementalRead</span><span class="op" id="7314547">(</span><span class="ident" id="7314548">t</span>&nbsp;<span class="op" id="7314550">*</span><span class="ident" id="7314551"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7314558">.</span><span class="ident" id="7314559">T</span><span class="op" id="7314560">)</span>&nbsp;<span class="op" id="7314562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314565">sparseMap</span>&nbsp;<span class="op" id="7314575">:=</span>&nbsp;<span class="op" id="7314578">[</span><span class="op" id="7314579">]</span><span class="ident" id="7314580"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7314591">{</span><span class="op" id="7314592">{</span><span class="num" id="7314593">10</span><span class="op" id="7314595">,</span>&nbsp;<span class="num" id="7314597">2</span><span class="op" id="7314598">}</span><span class="op" id="7314599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314602">sparseData</span>&nbsp;<span class="op" id="7314613">:=</span>&nbsp;<span class="op" id="7314616">[</span><span class="op" id="7314617">]</span><span class="builtintype" id="7314618">byte</span><span class="op" id="7314622">(</span><span class="string" id="7314623">&#34;Go&#34;</span><span class="op" id="7314627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314630">expected</span>&nbsp;<span class="op" id="7314639">:=</span>&nbsp;<span class="string" id="7314642">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314721">r</span>&nbsp;<span class="op" id="7314723">:=</span>&nbsp;<span class="ident" id="7314726"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7314731">.</span><span class="ident" id="7314732">NewReader</span><span class="op" id="7314741">(</span><span class="ident" id="7314742"><a href="/archive/tar/reader_test.go.html#7314602">sparseData</a></span><span class="op" id="7314752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314755">nb</span>&nbsp;<span class="op" id="7314758">:=</span>&nbsp;<span class="ident" id="7314761">int64</span><span class="op" id="7314766">(</span><span class="ident" id="7314767"><a href="/archive/tar/reader_test.go.html#7314721">r</a></span><span class="op" id="7314768">.</span><span class="ident" id="7314769">Len</span><span class="op" id="7314772">(</span><span class="op" id="7314773">)</span><span class="op" id="7314774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314777">sfr</span>&nbsp;<span class="op" id="7314781">:=</span>&nbsp;<span class="op" id="7314784">&amp;</span><span class="ident" id="7314785"><a href="/archive/tar/reader.go.html#5204565">sparseFileReader</a></span><span class="op" id="7314801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314805">rfr</span><span class="op" id="7314808">:</span>&nbsp;<span class="op" id="7314810">&amp;</span><span class="ident" id="7314811"><a href="/archive/tar/reader.go.html#5204345">regFileReader</a></span><span class="op" id="7314824">{</span><span class="ident" id="7314825">r</span><span class="op" id="7314826">:</span>&nbsp;<span class="ident" id="7314828"><a href="/archive/tar/reader_test.go.html#7314721">r</a></span><span class="op" id="7314829">,</span>&nbsp;<span class="ident" id="7314831">nb</span><span class="op" id="7314833">:</span>&nbsp;<span class="ident" id="7314835"><a href="/archive/tar/reader_test.go.html#7314755">nb</a></span><span class="op" id="7314837">}</span><span class="op" id="7314838">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314842">sp</span><span class="op" id="7314844">:</span>&nbsp;&nbsp;<span class="ident" id="7314847"><a href="/archive/tar/reader_test.go.html#7314565">sparseMap</a></span><span class="op" id="7314856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314860">pos</span><span class="op" id="7314863">:</span>&nbsp;<span class="num" id="7314865">0</span><span class="op" id="7314866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314870">tot</span><span class="op" id="7314873">:</span>&nbsp;<span class="ident" id="7314875">int64</span><span class="op" id="7314880">(</span><span class="builtinfunc" id="7314881">len</span><span class="op" id="7314884">(</span><span class="ident" id="7314885"><a href="/archive/tar/reader_test.go.html#7314630">expected</a></span><span class="op" id="7314893">)</span><span class="op" id="7314894">)</span><span class="op" id="7314895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7314902">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7314971">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315019">var</span>&nbsp;<span class="ident" id="7315023">outputBuf</span>&nbsp;<span class="ident" id="7315033"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7315038">.</span><span class="ident" id="7315039">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315047">buf</span>&nbsp;<span class="op" id="7315051">:=</span>&nbsp;<span class="builtinfunc" id="7315054">make</span><span class="op" id="7315058">(</span><span class="op" id="7315059">[</span><span class="op" id="7315060">]</span><span class="builtintype" id="7315061">byte</span><span class="op" id="7315065">,</span>&nbsp;<span class="num" id="7315067">6</span><span class="op" id="7315068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315071">for</span>&nbsp;<span class="op" id="7315075">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315079">n</span><span class="op" id="7315080">,</span>&nbsp;<span class="ident" id="7315082">err</span>&nbsp;<span class="op" id="7315086">:=</span>&nbsp;<span class="ident" id="7315089"><a href="/archive/tar/reader_test.go.html#7314777">sfr</a></span><span class="op" id="7315092">.</span><span class="ident" id="7315093">Read</span><span class="op" id="7315097">(</span><span class="ident" id="7315098"><a href="/archive/tar/reader_test.go.html#7315047">buf</a></span><span class="op" id="7315101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315105">if</span>&nbsp;<span class="ident" id="7315108"><a href="/archive/tar/reader_test.go.html#7315082">err</a></span>&nbsp;<span class="op" id="7315112">==</span>&nbsp;<span class="ident" id="7315115"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7315117">.</span><span class="ident" id="7315118">EOF</span>&nbsp;<span class="op" id="7315122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315127">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315139">if</span>&nbsp;<span class="ident" id="7315142"><a href="/archive/tar/reader_test.go.html#7315082">err</a></span>&nbsp;<span class="op" id="7315146">!=</span>&nbsp;<span class="ident" id="7315149">nil</span>&nbsp;<span class="op" id="7315153">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315158"><a href="/archive/tar/reader_test.go.html#7314548">t</a></span><span class="op" id="7315159">.</span><span class="ident" id="7315160">Errorf</span><span class="op" id="7315166">(</span><span class="string" id="7315167">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7315196">,</span>&nbsp;<span class="ident" id="7315198"><a href="/archive/tar/reader_test.go.html#7315082">err</a></span><span class="op" id="7315201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315209">if</span>&nbsp;<span class="ident" id="7315212"><a href="/archive/tar/reader_test.go.html#7315079">n</a></span>&nbsp;<span class="op" id="7315214">&gt;</span>&nbsp;<span class="num" id="7315216">0</span>&nbsp;<span class="op" id="7315218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315223">_</span><span class="op" id="7315224">,</span>&nbsp;<span class="ident" id="7315226">err</span>&nbsp;<span class="op" id="7315230">:=</span>&nbsp;<span class="ident" id="7315233"><a href="/archive/tar/reader_test.go.html#7315023">outputBuf</a></span><span class="op" id="7315242">.</span><span class="ident" id="7315243">Write</span><span class="op" id="7315248">(</span><span class="ident" id="7315249"><a href="/archive/tar/reader_test.go.html#7315047">buf</a></span><span class="op" id="7315252">[</span><span class="op" id="7315253">:</span><span class="ident" id="7315254"><a href="/archive/tar/reader_test.go.html#7315079">n</a></span><span class="op" id="7315255">]</span><span class="op" id="7315256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315261">if</span>&nbsp;<span class="ident" id="7315264"><a href="/archive/tar/reader_test.go.html#7315226">err</a></span>&nbsp;<span class="op" id="7315268">!=</span>&nbsp;<span class="ident" id="7315271">nil</span>&nbsp;<span class="op" id="7315275">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315281"><a href="/archive/tar/reader_test.go.html#7314548">t</a></span><span class="op" id="7315282">.</span><span class="ident" id="7315283">Errorf</span><span class="op" id="7315289">(</span><span class="string" id="7315290">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7315320">,</span>&nbsp;<span class="ident" id="7315322"><a href="/archive/tar/reader_test.go.html#7315226">err</a></span><span class="op" id="7315325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315340">got</span>&nbsp;<span class="op" id="7315344">:=</span>&nbsp;<span class="ident" id="7315347"><a href="/archive/tar/reader_test.go.html#7315023">outputBuf</a></span><span class="op" id="7315356">.</span><span class="ident" id="7315357">String</span><span class="op" id="7315363">(</span><span class="op" id="7315364">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315367">if</span>&nbsp;<span class="ident" id="7315370"><a href="/archive/tar/reader_test.go.html#7315340">got</a></span>&nbsp;<span class="op" id="7315374">!=</span>&nbsp;<span class="ident" id="7315377"><a href="/archive/tar/reader_test.go.html#7314630">expected</a></span>&nbsp;<span class="op" id="7315386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315390"><a href="/archive/tar/reader_test.go.html#7314548">t</a></span><span class="op" id="7315391">.</span><span class="ident" id="7315392">Errorf</span><span class="op" id="7315398">(</span><span class="string" id="7315399">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7315423">,</span>&nbsp;<span class="ident" id="7315425"><a href="/archive/tar/reader_test.go.html#7315340">got</a></span><span class="op" id="7315428">,</span>&nbsp;<span class="ident" id="7315430"><a href="/archive/tar/reader_test.go.html#7314630">expected</a></span><span class="op" id="7315438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315441">}</span><br>
<span class="lineno"></span><span class="op" id="7315443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7315446">func</span>&nbsp;<span class="ident" id="7315451">TestReadGNUSparseMap0x1</span><span class="op" id="7315474">(</span><span class="ident" id="7315475">t</span>&nbsp;<span class="op" id="7315477">*</span><span class="ident" id="7315478"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7315485">.</span><span class="ident" id="7315486">T</span><span class="op" id="7315487">)</span>&nbsp;<span class="op" id="7315489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315492">headers</span>&nbsp;<span class="op" id="7315500">:=</span>&nbsp;<span class="keyword" id="7315503">map</span><span class="op" id="7315506">[</span><span class="builtintype" id="7315507">string</span><span class="op" id="7315513">]</span><span class="builtintype" id="7315514">string</span><span class="op" id="7315520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315524"><a href="/archive/tar/reader.go.html#5204868">paxGNUSparseNumBlocks</a></span><span class="op" id="7315545">:</span>&nbsp;<span class="string" id="7315547">&#34;4&#34;</span><span class="op" id="7315550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315554"><a href="/archive/tar/reader.go.html#5205008">paxGNUSparseMap</a></span><span class="op" id="7315569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7315577">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7315597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315600">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315603">expected</span>&nbsp;<span class="op" id="7315612">:=</span>&nbsp;<span class="op" id="7315615">[</span><span class="op" id="7315616">]</span><span class="ident" id="7315617"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7315628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315632">{</span><span class="ident" id="7315633">offset</span><span class="op" id="7315639">:</span>&nbsp;<span class="num" id="7315641">0</span><span class="op" id="7315642">,</span>&nbsp;<span class="ident" id="7315644">numBytes</span><span class="op" id="7315652">:</span>&nbsp;<span class="num" id="7315654">5</span><span class="op" id="7315655">}</span><span class="op" id="7315656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315660">{</span><span class="ident" id="7315661">offset</span><span class="op" id="7315667">:</span>&nbsp;<span class="num" id="7315669">10</span><span class="op" id="7315671">,</span>&nbsp;<span class="ident" id="7315673">numBytes</span><span class="op" id="7315681">:</span>&nbsp;<span class="num" id="7315683">5</span><span class="op" id="7315684">}</span><span class="op" id="7315685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315689">{</span><span class="ident" id="7315690">offset</span><span class="op" id="7315696">:</span>&nbsp;<span class="num" id="7315698">20</span><span class="op" id="7315700">,</span>&nbsp;<span class="ident" id="7315702">numBytes</span><span class="op" id="7315710">:</span>&nbsp;<span class="num" id="7315712">5</span><span class="op" id="7315713">}</span><span class="op" id="7315714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315718">{</span><span class="ident" id="7315719">offset</span><span class="op" id="7315725">:</span>&nbsp;<span class="num" id="7315727">30</span><span class="op" id="7315729">,</span>&nbsp;<span class="ident" id="7315731">numBytes</span><span class="op" id="7315739">:</span>&nbsp;<span class="num" id="7315741">5</span><span class="op" id="7315742">}</span><span class="op" id="7315743">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315750">sp</span><span class="op" id="7315752">,</span>&nbsp;<span class="ident" id="7315754">err</span>&nbsp;<span class="op" id="7315758">:=</span>&nbsp;<span class="ident" id="7315761"><a href="/archive/tar/reader.go.html#5222036">readGNUSparseMap0x1</a></span><span class="op" id="7315780">(</span><span class="ident" id="7315781"><a href="/archive/tar/reader_test.go.html#7315492">headers</a></span><span class="op" id="7315788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315791">if</span>&nbsp;<span class="ident" id="7315794"><a href="/archive/tar/reader_test.go.html#7315754">err</a></span>&nbsp;<span class="op" id="7315798">!=</span>&nbsp;<span class="ident" id="7315801">nil</span>&nbsp;<span class="op" id="7315805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315809"><a href="/archive/tar/reader_test.go.html#7315475">t</a></span><span class="op" id="7315810">.</span><span class="ident" id="7315811">Errorf</span><span class="op" id="7315817">(</span><span class="string" id="7315818">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7315840">,</span>&nbsp;<span class="ident" id="7315842"><a href="/archive/tar/reader_test.go.html#7315754">err</a></span><span class="op" id="7315845">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7315851">if</span>&nbsp;<span class="op" id="7315854">!</span><span class="ident" id="7315855"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7315862">.</span><span class="ident" id="7315863">DeepEqual</span><span class="op" id="7315872">(</span><span class="ident" id="7315873"><a href="/archive/tar/reader_test.go.html#7315750">sp</a></span><span class="op" id="7315875">,</span>&nbsp;<span class="ident" id="7315877"><a href="/archive/tar/reader_test.go.html#7315603">expected</a></span><span class="op" id="7315885">)</span>&nbsp;<span class="op" id="7315887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315891"><a href="/archive/tar/reader_test.go.html#7315475">t</a></span><span class="op" id="7315892">.</span><span class="ident" id="7315893">Errorf</span><span class="op" id="7315899">(</span><span class="string" id="7315900">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7315941">,</span>&nbsp;<span class="ident" id="7315943"><a href="/archive/tar/reader_test.go.html#7315750">sp</a></span><span class="op" id="7315945">,</span>&nbsp;<span class="ident" id="7315947"><a href="/archive/tar/reader_test.go.html#7315603">expected</a></span><span class="op" id="7315955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315958">}</span><br>
<span class="lineno"></span><span class="op" id="7315960">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7315963">func</span>&nbsp;<span class="ident" id="7315968">TestReadGNUSparseMap1x0</span><span class="op" id="7315991">(</span><span class="ident" id="7315992">t</span>&nbsp;<span class="op" id="7315994">*</span><span class="ident" id="7315995"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7316002">.</span><span class="ident" id="7316003">T</span><span class="op" id="7316004">)</span>&nbsp;<span class="op" id="7316006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316009">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316093">numEntries</span>&nbsp;<span class="op" id="7316104">:=</span>&nbsp;<span class="num" id="7316107">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316112">expected</span>&nbsp;<span class="op" id="7316121">:=</span>&nbsp;<span class="builtinfunc" id="7316124">make</span><span class="op" id="7316128">(</span><span class="op" id="7316129">[</span><span class="op" id="7316130">]</span><span class="ident" id="7316131"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7316142">,</span>&nbsp;<span class="num" id="7316144">0</span><span class="op" id="7316145">,</span>&nbsp;<span class="ident" id="7316147"><a href="/archive/tar/reader_test.go.html#7316093">numEntries</a></span><span class="op" id="7316157">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316160">sparseMap</span>&nbsp;<span class="op" id="7316170">:=</span>&nbsp;<span class="builtinfunc" id="7316173">new</span><span class="op" id="7316176">(</span><span class="ident" id="7316177"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7316182">.</span><span class="ident" id="7316183">Buffer</span><span class="op" id="7316189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316193"><a href="/archive/tar/reader_test.go.html#7300013">fmt</a></span><span class="op" id="7316196">.</span><span class="ident" id="7316197">Fprintf</span><span class="op" id="7316204">(</span><span class="ident" id="7316205"><a href="/archive/tar/reader_test.go.html#7316160">sparseMap</a></span><span class="op" id="7316214">,</span>&nbsp;<span class="string" id="7316216">&#34;%d\n&#34;</span><span class="op" id="7316222">,</span>&nbsp;<span class="ident" id="7316224"><a href="/archive/tar/reader_test.go.html#7316093">numEntries</a></span><span class="op" id="7316234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7316237">for</span>&nbsp;<span class="ident" id="7316241">i</span>&nbsp;<span class="op" id="7316243">:=</span>&nbsp;<span class="num" id="7316246">0</span><span class="op" id="7316247">;</span>&nbsp;<span class="ident" id="7316249"><a href="/archive/tar/reader_test.go.html#7316241">i</a></span>&nbsp;<span class="op" id="7316251">&lt;</span>&nbsp;<span class="ident" id="7316253"><a href="/archive/tar/reader_test.go.html#7316093">numEntries</a></span><span class="op" id="7316263">;</span>&nbsp;<span class="ident" id="7316265"><a href="/archive/tar/reader_test.go.html#7316241">i</a></span><span class="op" id="7316266">++</span>&nbsp;<span class="op" id="7316269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316273">offset</span>&nbsp;<span class="op" id="7316280">:=</span>&nbsp;<span class="ident" id="7316283">int64</span><span class="op" id="7316288">(</span><span class="num" id="7316289">2048</span>&nbsp;<span class="op" id="7316294">*</span>&nbsp;<span class="ident" id="7316296"><a href="/archive/tar/reader_test.go.html#7316241">i</a></span><span class="op" id="7316297">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316301">numBytes</span>&nbsp;<span class="op" id="7316310">:=</span>&nbsp;<span class="ident" id="7316313">int64</span><span class="op" id="7316318">(</span><span class="num" id="7316319">1024</span><span class="op" id="7316323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316327"><a href="/archive/tar/reader_test.go.html#7316112">expected</a></span>&nbsp;<span class="op" id="7316336">=</span>&nbsp;<span class="builtinfunc" id="7316338">append</span><span class="op" id="7316344">(</span><span class="ident" id="7316345"><a href="/archive/tar/reader_test.go.html#7316112">expected</a></span><span class="op" id="7316353">,</span>&nbsp;<span class="ident" id="7316355"><a href="/archive/tar/reader.go.html#5217817">sparseEntry</a></span><span class="op" id="7316366">{</span><span class="ident" id="7316367">offset</span><span class="op" id="7316373">:</span>&nbsp;<span class="ident" id="7316375"><a href="/archive/tar/reader_test.go.html#7316273">offset</a></span><span class="op" id="7316381">,</span>&nbsp;<span class="ident" id="7316383">numBytes</span><span class="op" id="7316391">:</span>&nbsp;<span class="ident" id="7316393"><a href="/archive/tar/reader_test.go.html#7316301">numBytes</a></span><span class="op" id="7316401">}</span><span class="op" id="7316402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316406"><a href="/archive/tar/reader_test.go.html#7300013">fmt</a></span><span class="op" id="7316409">.</span><span class="ident" id="7316410">Fprintf</span><span class="op" id="7316417">(</span><span class="ident" id="7316418"><a href="/archive/tar/reader_test.go.html#7316160">sparseMap</a></span><span class="op" id="7316427">,</span>&nbsp;<span class="string" id="7316429">&#34;%d\n%d\n&#34;</span><span class="op" id="7316439">,</span>&nbsp;<span class="ident" id="7316441"><a href="/archive/tar/reader_test.go.html#7316273">offset</a></span><span class="op" id="7316447">,</span>&nbsp;<span class="ident" id="7316449"><a href="/archive/tar/reader_test.go.html#7316301">numBytes</a></span><span class="op" id="7316457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316464">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316543">headerBlocks</span>&nbsp;<span class="op" id="7316556">:=</span>&nbsp;<span class="op" id="7316559">(</span><span class="ident" id="7316560"><a href="/archive/tar/reader_test.go.html#7316160">sparseMap</a></span><span class="op" id="7316569">.</span><span class="ident" id="7316570">Len</span><span class="op" id="7316573">(</span><span class="op" id="7316574">)</span>&nbsp;<span class="op" id="7316576">+</span>&nbsp;<span class="ident" id="7316578"><a href="/archive/tar/common.go.html#5195939">blockSize</a></span>&nbsp;<span class="op" id="7316588">-</span>&nbsp;<span class="num" id="7316590">1</span><span class="op" id="7316591">)</span>&nbsp;<span class="op" id="7316593">/</span>&nbsp;<span class="ident" id="7316595"><a href="/archive/tar/common.go.html#5195939">blockSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316606">bufLen</span>&nbsp;<span class="op" id="7316613">:=</span>&nbsp;<span class="ident" id="7316616"><a href="/archive/tar/common.go.html#5195939">blockSize</a></span>&nbsp;<span class="op" id="7316626">*</span>&nbsp;<span class="ident" id="7316628"><a href="/archive/tar/reader_test.go.html#7316543">headerBlocks</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316642">buf</span>&nbsp;<span class="op" id="7316646">:=</span>&nbsp;<span class="builtinfunc" id="7316649">make</span><span class="op" id="7316653">(</span><span class="op" id="7316654">[</span><span class="op" id="7316655">]</span><span class="builtintype" id="7316656">byte</span><span class="op" id="7316660">,</span>&nbsp;<span class="ident" id="7316662"><a href="/archive/tar/reader_test.go.html#7316606">bufLen</a></span><span class="op" id="7316668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7316671">copy</span><span class="op" id="7316675">(</span><span class="ident" id="7316676"><a href="/archive/tar/reader_test.go.html#7316642">buf</a></span><span class="op" id="7316679">,</span>&nbsp;<span class="ident" id="7316681"><a href="/archive/tar/reader_test.go.html#7316160">sparseMap</a></span><span class="op" id="7316690">.</span><span class="ident" id="7316691">Bytes</span><span class="op" id="7316696">(</span><span class="op" id="7316697">)</span><span class="op" id="7316698">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316702">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316743">r</span>&nbsp;<span class="op" id="7316745">:=</span>&nbsp;<span class="ident" id="7316748"><a href="/archive/tar/reader_test.go.html#7299990">bytes</a></span><span class="op" id="7316753">.</span><span class="ident" id="7316754">NewReader</span><span class="op" id="7316763">(</span><span class="ident" id="7316764"><a href="/archive/tar/reader_test.go.html#7316642">buf</a></span><span class="op" id="7316767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316771">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316795">sp</span><span class="op" id="7316797">,</span>&nbsp;<span class="ident" id="7316799">err</span>&nbsp;<span class="op" id="7316803">:=</span>&nbsp;<span class="ident" id="7316806"><a href="/archive/tar/reader.go.html#5219783">readGNUSparseMap1x0</a></span><span class="op" id="7316825">(</span><span class="ident" id="7316826"><a href="/archive/tar/reader_test.go.html#7316743">r</a></span><span class="op" id="7316827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7316830">if</span>&nbsp;<span class="ident" id="7316833"><a href="/archive/tar/reader_test.go.html#7316799">err</a></span>&nbsp;<span class="op" id="7316837">!=</span>&nbsp;<span class="ident" id="7316840">nil</span>&nbsp;<span class="op" id="7316844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316848"><a href="/archive/tar/reader_test.go.html#7315992">t</a></span><span class="op" id="7316849">.</span><span class="ident" id="7316850">Errorf</span><span class="op" id="7316856">(</span><span class="string" id="7316857">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7316879">,</span>&nbsp;<span class="ident" id="7316881"><a href="/archive/tar/reader_test.go.html#7316799">err</a></span><span class="op" id="7316884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7316890">if</span>&nbsp;<span class="op" id="7316893">!</span><span class="ident" id="7316894"><a href="/archive/tar/reader_test.go.html#7300045">reflect</a></span><span class="op" id="7316901">.</span><span class="ident" id="7316902">DeepEqual</span><span class="op" id="7316911">(</span><span class="ident" id="7316912"><a href="/archive/tar/reader_test.go.html#7316795">sp</a></span><span class="op" id="7316914">,</span>&nbsp;<span class="ident" id="7316916"><a href="/archive/tar/reader_test.go.html#7316112">expected</a></span><span class="op" id="7316924">)</span>&nbsp;<span class="op" id="7316926">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316930"><a href="/archive/tar/reader_test.go.html#7315992">t</a></span><span class="op" id="7316931">.</span><span class="ident" id="7316932">Errorf</span><span class="op" id="7316938">(</span><span class="string" id="7316939">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7316980">,</span>&nbsp;<span class="ident" id="7316982"><a href="/archive/tar/reader_test.go.html#7316795">sp</a></span><span class="op" id="7316984">,</span>&nbsp;<span class="ident" id="7316986"><a href="/archive/tar/reader_test.go.html#7316112">expected</a></span><span class="op" id="7316994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316997">}</span><br>
<span class="lineno"></span><span class="op" id="7316999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7317002">func</span>&nbsp;<span class="ident" id="7317007">TestUninitializedRead</span><span class="op" id="7317028">(</span><span class="ident" id="7317029">t</span>&nbsp;<span class="op" id="7317031">*</span><span class="ident" id="7317032"><a href="/archive/tar/reader_test.go.html#7300067">testing</a></span><span class="op" id="7317039">.</span><span class="ident" id="7317040">T</span><span class="op" id="7317041">)</span>&nbsp;<span class="op" id="7317043">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317046">test</span>&nbsp;<span class="op" id="7317051">:=</span>&nbsp;<span class="ident" id="7317054"><a href="/archive/tar/reader_test.go.html#7300172">gnuTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317066">f</span><span class="op" id="7317067">,</span>&nbsp;<span class="ident" id="7317069">err</span>&nbsp;<span class="op" id="7317073">:=</span>&nbsp;<span class="ident" id="7317076"><a href="/archive/tar/reader_test.go.html#7300039">os</a></span><span class="op" id="7317078">.</span><span class="ident" id="7317079">Open</span><span class="op" id="7317083">(</span><span class="ident" id="7317084"><a href="/archive/tar/reader_test.go.html#7317046">test</a></span><span class="op" id="7317088">.</span><span class="ident" id="7317089">file</span><span class="op" id="7317093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7317096">if</span>&nbsp;<span class="ident" id="7317099"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span>&nbsp;<span class="op" id="7317103">!=</span>&nbsp;<span class="ident" id="7317106">nil</span>&nbsp;<span class="op" id="7317110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317114"><a href="/archive/tar/reader_test.go.html#7317029">t</a></span><span class="op" id="7317115">.</span><span class="ident" id="7317116">Fatalf</span><span class="op" id="7317122">(</span><span class="string" id="7317123">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7317145">,</span>&nbsp;<span class="ident" id="7317147"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span><span class="op" id="7317150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317153">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7317156">defer</span>&nbsp;<span class="ident" id="7317162"><a href="/archive/tar/reader_test.go.html#7317066">f</a></span><span class="op" id="7317163">.</span><span class="ident" id="7317164">Close</span><span class="op" id="7317169">(</span><span class="op" id="7317170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317174">tr</span>&nbsp;<span class="op" id="7317177">:=</span>&nbsp;<span class="ident" id="7317180"><a href="/archive/tar/reader.go.html#5205723">NewReader</a></span><span class="op" id="7317189">(</span><span class="ident" id="7317190"><a href="/archive/tar/reader_test.go.html#7317066">f</a></span><span class="op" id="7317191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317194">_</span><span class="op" id="7317195">,</span>&nbsp;<span class="ident" id="7317197"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span>&nbsp;<span class="op" id="7317201">=</span>&nbsp;<span class="ident" id="7317203"><a href="/archive/tar/reader_test.go.html#7317174">tr</a></span><span class="op" id="7317205">.</span><span class="ident" id="7317206">Read</span><span class="op" id="7317210">(</span><span class="op" id="7317211">[</span><span class="op" id="7317212">]</span><span class="builtintype" id="7317213">byte</span><span class="op" id="7317217">{</span><span class="op" id="7317218">}</span><span class="op" id="7317219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7317222">if</span>&nbsp;<span class="ident" id="7317225"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span>&nbsp;<span class="op" id="7317229">==</span>&nbsp;<span class="ident" id="7317232">nil</span>&nbsp;<span class="op" id="7317236">||</span>&nbsp;<span class="ident" id="7317239"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span>&nbsp;<span class="op" id="7317243">!=</span>&nbsp;<span class="ident" id="7317246"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7317248">.</span><span class="ident" id="7317249">EOF</span>&nbsp;<span class="op" id="7317253">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317257"><a href="/archive/tar/reader_test.go.html#7317029">t</a></span><span class="op" id="7317258">.</span><span class="ident" id="7317259">Errorf</span><span class="op" id="7317265">(</span><span class="string" id="7317266">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7317299">,</span>&nbsp;<span class="ident" id="7317301"><a href="/archive/tar/reader_test.go.html#7317069">err</a></span><span class="op" id="7317304">,</span>&nbsp;<span class="ident" id="7317306"><a href="/archive/tar/reader_test.go.html#7300020">io</a></span><span class="op" id="7317308">.</span><span class="ident" id="7317309">EOF</span><span class="op" id="7317312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7317318">}</span>
</div>
</body>
</html>
