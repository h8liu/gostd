<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6208944">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6209000">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6209054">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6209105">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6209164">package</span>&nbsp;<span class="ident" id="6209172">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209179">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6209231">import</span>&nbsp;<span class="op" id="6209238">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209241">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209250">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209265">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209284">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209291">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6209297">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6209302">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209305">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6209347">type</span>&nbsp;<span class="ident" id="6209352">File</span>&nbsp;<span class="keyword" id="6209357">struct</span>&nbsp;<span class="op" id="6209364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209367">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209379">ByteOrder</span>&nbsp;<span class="ident" id="6209389">binary</span><span class="op" id="6209395">.</span><span class="ident" id="6209396">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209407">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209417">[</span><span class="op" id="6209418">]</span><span class="ident" id="6209419">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209425">Sections</span>&nbsp;&nbsp;<span class="op" id="6209435">[</span><span class="op" id="6209436">]</span><span class="op" id="6209437">*</span><span class="ident" id="6209438">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209448">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6209457">*</span><span class="ident" id="6209458">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209466">Dysymtab</span>&nbsp;<span class="op" id="6209475">*</span><span class="ident" id="6209476">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209487">closer</span>&nbsp;<span class="ident" id="6209494">io</span><span class="op" id="6209496">.</span><span class="ident" id="6209497">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6209504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209507">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6209553">type</span>&nbsp;<span class="ident" id="6209558">Load</span>&nbsp;<span class="keyword" id="6209563">interface</span>&nbsp;<span class="op" id="6209573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209576">Raw</span><span class="op" id="6209579">(</span><span class="op" id="6209580">)</span>&nbsp;<span class="op" id="6209582">[</span><span class="op" id="6209583">]</span><span class="builtintype" id="6209584">byte</span><br>
<span class="lineno">35</span><span class="op" id="6209589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209592">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6209660">type</span>&nbsp;<span class="ident" id="6209665">LoadBytes</span>&nbsp;<span class="op" id="6209675">[</span><span class="op" id="6209676">]</span><span class="builtintype" id="6209677">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6209683">func</span>&nbsp;<span class="op" id="6209688">(</span><span class="ident" id="6209689">b</span>&nbsp;<span class="ident" id="6209691">LoadBytes</span><span class="op" id="6209700">)</span>&nbsp;<span class="ident" id="6209702">Raw</span><span class="op" id="6209705">(</span><span class="op" id="6209706">)</span>&nbsp;<span class="op" id="6209708">[</span><span class="op" id="6209709">]</span><span class="builtintype" id="6209710">byte</span>&nbsp;<span class="op" id="6209715">{</span>&nbsp;<span class="keyword" id="6209717">return</span>&nbsp;<span class="ident" id="6209724">b</span>&nbsp;<span class="op" id="6209726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209729">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6209814">type</span>&nbsp;<span class="ident" id="6209819">SegmentHeader</span>&nbsp;<span class="keyword" id="6209833">struct</span>&nbsp;<span class="op" id="6209840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209843">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209851">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209860">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6209868">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209876">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6209884">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209892">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209900">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209908">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6209916">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209924">Offset</span>&nbsp;&nbsp;<span class="ident" id="6209932">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209940">Filesz</span>&nbsp;&nbsp;<span class="ident" id="6209948">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209956">Maxprot</span>&nbsp;<span class="builtintype" id="6209964">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209972">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6209980">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209988">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6209996">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210004">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6210012">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6210019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210022">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6210094">type</span>&nbsp;<span class="ident" id="6210099">Segment</span>&nbsp;<span class="keyword" id="6210107">struct</span>&nbsp;<span class="op" id="6210114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210117">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210128">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210144">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210182">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210222">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210257">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210305">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210355">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210379">io</span><span class="op" id="6210381">.</span><span class="ident" id="6210382">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210392">sr</span>&nbsp;<span class="op" id="6210395">*</span><span class="ident" id="6210396">io</span><span class="op" id="6210398">.</span><span class="ident" id="6210399">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6210413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210416">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6210471">func</span>&nbsp;<span class="op" id="6210476">(</span><span class="ident" id="6210477">s</span>&nbsp;<span class="op" id="6210479">*</span><span class="ident" id="6210480">Segment</span><span class="op" id="6210487">)</span>&nbsp;<span class="ident" id="6210489">Data</span><span class="op" id="6210493">(</span><span class="op" id="6210494">)</span>&nbsp;<span class="op" id="6210496">(</span><span class="op" id="6210497">[</span><span class="op" id="6210498">]</span><span class="builtintype" id="6210499">byte</span><span class="op" id="6210503">,</span>&nbsp;<span class="builtintype" id="6210505">error</span><span class="op" id="6210510">)</span>&nbsp;<span class="op" id="6210512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210515">dat</span>&nbsp;<span class="op" id="6210519">:=</span>&nbsp;<span class="builtinfunc" id="6210522">make</span><span class="op" id="6210526">(</span><span class="op" id="6210527">[</span><span class="op" id="6210528">]</span><span class="builtintype" id="6210529">byte</span><span class="op" id="6210533">,</span>&nbsp;<span class="ident" id="6210535">s</span><span class="op" id="6210536">.</span><span class="ident" id="6210537">sr</span><span class="op" id="6210539">.</span><span class="ident" id="6210540">Size</span><span class="op" id="6210544">(</span><span class="op" id="6210545">)</span><span class="op" id="6210546">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210549">n</span><span class="op" id="6210550">,</span>&nbsp;<span class="ident" id="6210552">err</span>&nbsp;<span class="op" id="6210556">:=</span>&nbsp;<span class="ident" id="6210559">s</span><span class="op" id="6210560">.</span><span class="ident" id="6210561">sr</span><span class="op" id="6210563">.</span><span class="ident" id="6210564">ReadAt</span><span class="op" id="6210570">(</span><span class="ident" id="6210571">dat</span><span class="op" id="6210574">,</span>&nbsp;<span class="num" id="6210576">0</span><span class="op" id="6210577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210580">if</span>&nbsp;<span class="ident" id="6210583">n</span>&nbsp;<span class="op" id="6210585">==</span>&nbsp;<span class="builtinfunc" id="6210588">len</span><span class="op" id="6210591">(</span><span class="ident" id="6210592">dat</span><span class="op" id="6210595">)</span>&nbsp;<span class="op" id="6210597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210601">err</span>&nbsp;<span class="op" id="6210605">=</span>&nbsp;<span class="builtintype" id="6210607">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6210612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210615">return</span>&nbsp;<span class="ident" id="6210622">dat</span><span class="op" id="6210625">[</span><span class="num" id="6210626">0</span><span class="op" id="6210627">:</span><span class="ident" id="6210628">n</span><span class="op" id="6210629">]</span><span class="op" id="6210630">,</span>&nbsp;<span class="ident" id="6210632">err</span><br>
<span class="lineno">80</span><span class="op" id="6210636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210639">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6210693">func</span>&nbsp;<span class="op" id="6210698">(</span><span class="ident" id="6210699">s</span>&nbsp;<span class="op" id="6210701">*</span><span class="ident" id="6210702">Segment</span><span class="op" id="6210709">)</span>&nbsp;<span class="ident" id="6210711">Open</span><span class="op" id="6210715">(</span><span class="op" id="6210716">)</span>&nbsp;<span class="ident" id="6210718">io</span><span class="op" id="6210720">.</span><span class="ident" id="6210721">ReadSeeker</span>&nbsp;<span class="op" id="6210732">{</span>&nbsp;<span class="keyword" id="6210734">return</span>&nbsp;<span class="ident" id="6210741">io</span><span class="op" id="6210743">.</span><span class="ident" id="6210744">NewSectionReader</span><span class="op" id="6210760">(</span><span class="ident" id="6210761">s</span><span class="op" id="6210762">.</span><span class="ident" id="6210763">sr</span><span class="op" id="6210765">,</span>&nbsp;<span class="num" id="6210767">0</span><span class="op" id="6210768">,</span>&nbsp;<span class="num" id="6210770">1</span><span class="op" id="6210771">&lt;&lt;</span><span class="num" id="6210773">63</span><span class="op" id="6210775">-</span><span class="num" id="6210776">1</span><span class="op" id="6210777">)</span>&nbsp;<span class="op" id="6210779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6210782">type</span>&nbsp;<span class="ident" id="6210787">SectionHeader</span>&nbsp;<span class="keyword" id="6210801">struct</span>&nbsp;<span class="op" id="6210808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210811">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6210818">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210826">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6210833">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210841">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6210848">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210856">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6210863">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210871">Offset</span>&nbsp;<span class="builtintype" id="6210878">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210886">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6210893">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210901">Reloff</span>&nbsp;<span class="builtintype" id="6210908">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210916">Nreloc</span>&nbsp;<span class="builtintype" id="6210923">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210931">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6210938">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6210945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6210948">type</span>&nbsp;<span class="ident" id="6210953">Section</span>&nbsp;<span class="keyword" id="6210961">struct</span>&nbsp;<span class="op" id="6210968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210971">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6210987">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211025">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211065">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211100">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211148">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211198">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211222">io</span><span class="op" id="6211224">.</span><span class="ident" id="6211225">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211235">sr</span>&nbsp;<span class="op" id="6211238">*</span><span class="ident" id="6211239">io</span><span class="op" id="6211241">.</span><span class="ident" id="6211242">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6211256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6211259">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6211321">func</span>&nbsp;<span class="op" id="6211326">(</span><span class="ident" id="6211327">s</span>&nbsp;<span class="op" id="6211329">*</span><span class="ident" id="6211330">Section</span><span class="op" id="6211337">)</span>&nbsp;<span class="ident" id="6211339">Data</span><span class="op" id="6211343">(</span><span class="op" id="6211344">)</span>&nbsp;<span class="op" id="6211346">(</span><span class="op" id="6211347">[</span><span class="op" id="6211348">]</span><span class="builtintype" id="6211349">byte</span><span class="op" id="6211353">,</span>&nbsp;<span class="builtintype" id="6211355">error</span><span class="op" id="6211360">)</span>&nbsp;<span class="op" id="6211362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211365">dat</span>&nbsp;<span class="op" id="6211369">:=</span>&nbsp;<span class="builtinfunc" id="6211372">make</span><span class="op" id="6211376">(</span><span class="op" id="6211377">[</span><span class="op" id="6211378">]</span><span class="builtintype" id="6211379">byte</span><span class="op" id="6211383">,</span>&nbsp;<span class="ident" id="6211385">s</span><span class="op" id="6211386">.</span><span class="ident" id="6211387">sr</span><span class="op" id="6211389">.</span><span class="ident" id="6211390">Size</span><span class="op" id="6211394">(</span><span class="op" id="6211395">)</span><span class="op" id="6211396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211399">n</span><span class="op" id="6211400">,</span>&nbsp;<span class="ident" id="6211402">err</span>&nbsp;<span class="op" id="6211406">:=</span>&nbsp;<span class="ident" id="6211409">s</span><span class="op" id="6211410">.</span><span class="ident" id="6211411">sr</span><span class="op" id="6211413">.</span><span class="ident" id="6211414">ReadAt</span><span class="op" id="6211420">(</span><span class="ident" id="6211421">dat</span><span class="op" id="6211424">,</span>&nbsp;<span class="num" id="6211426">0</span><span class="op" id="6211427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211430">if</span>&nbsp;<span class="ident" id="6211433">n</span>&nbsp;<span class="op" id="6211435">==</span>&nbsp;<span class="builtinfunc" id="6211438">len</span><span class="op" id="6211441">(</span><span class="ident" id="6211442">dat</span><span class="op" id="6211445">)</span>&nbsp;<span class="op" id="6211447">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211451">err</span>&nbsp;<span class="op" id="6211455">=</span>&nbsp;<span class="builtintype" id="6211457">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6211462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211465">return</span>&nbsp;<span class="ident" id="6211472">dat</span><span class="op" id="6211475">[</span><span class="num" id="6211476">0</span><span class="op" id="6211477">:</span><span class="ident" id="6211478">n</span><span class="op" id="6211479">]</span><span class="op" id="6211480">,</span>&nbsp;<span class="ident" id="6211482">err</span><br>
<span class="lineno"></span><span class="op" id="6211486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6211489">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6211550">func</span>&nbsp;<span class="op" id="6211555">(</span><span class="ident" id="6211556">s</span>&nbsp;<span class="op" id="6211558">*</span><span class="ident" id="6211559">Section</span><span class="op" id="6211566">)</span>&nbsp;<span class="ident" id="6211568">Open</span><span class="op" id="6211572">(</span><span class="op" id="6211573">)</span>&nbsp;<span class="ident" id="6211575">io</span><span class="op" id="6211577">.</span><span class="ident" id="6211578">ReadSeeker</span>&nbsp;<span class="op" id="6211589">{</span>&nbsp;<span class="keyword" id="6211591">return</span>&nbsp;<span class="ident" id="6211598">io</span><span class="op" id="6211600">.</span><span class="ident" id="6211601">NewSectionReader</span><span class="op" id="6211617">(</span><span class="ident" id="6211618">s</span><span class="op" id="6211619">.</span><span class="ident" id="6211620">sr</span><span class="op" id="6211622">,</span>&nbsp;<span class="num" id="6211624">0</span><span class="op" id="6211625">,</span>&nbsp;<span class="num" id="6211627">1</span><span class="op" id="6211628">&lt;&lt;</span><span class="num" id="6211630">63</span><span class="op" id="6211632">-</span><span class="num" id="6211633">1</span><span class="op" id="6211634">)</span>&nbsp;<span class="op" id="6211636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6211639">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6211700">type</span>&nbsp;<span class="ident" id="6211705">Dylib</span>&nbsp;<span class="keyword" id="6211711">struct</span>&nbsp;<span class="op" id="6211718">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211721">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211732">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6211747">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211755">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6211770">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211778">CurrentVersion</span>&nbsp;<span class="builtintype" id="6211793">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211801">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6211816">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6211823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6211826">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6211880">type</span>&nbsp;<span class="ident" id="6211885">Symtab</span>&nbsp;<span class="keyword" id="6211892">struct</span>&nbsp;<span class="op" id="6211899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211902">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211913">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6211924">Syms</span>&nbsp;<span class="op" id="6211929">[</span><span class="op" id="6211930">]</span><span class="ident" id="6211931">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6211938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6211941">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6212005">type</span>&nbsp;<span class="ident" id="6212010">Dysymtab</span>&nbsp;<span class="keyword" id="6212019">struct</span>&nbsp;<span class="op" id="6212026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212029">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212040">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212053">IndirectSyms</span>&nbsp;<span class="op" id="6212066">[</span><span class="op" id="6212067">]</span><span class="builtintype" id="6212068">uint32</span>&nbsp;<span class="comment" id="6212075">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6212103">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6212106">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6212131">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6212194">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6212245">type</span>&nbsp;<span class="ident" id="6212250">FormatError</span>&nbsp;<span class="keyword" id="6212262">struct</span>&nbsp;<span class="op" id="6212269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212272">off</span>&nbsp;<span class="ident" id="6212276">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212283">msg</span>&nbsp;<span class="builtintype" id="6212287">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212295">val</span>&nbsp;<span class="keyword" id="6212299">interface</span><span class="op" id="6212308">{</span><span class="op" id="6212309">}</span><br>
<span class="lineno"></span><span class="op" id="6212311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6212314">func</span>&nbsp;<span class="op" id="6212319">(</span><span class="ident" id="6212320">e</span>&nbsp;<span class="op" id="6212322">*</span><span class="ident" id="6212323">FormatError</span><span class="op" id="6212334">)</span>&nbsp;<span class="ident" id="6212336">Error</span><span class="op" id="6212341">(</span><span class="op" id="6212342">)</span>&nbsp;<span class="builtintype" id="6212344">string</span>&nbsp;<span class="op" id="6212351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212354">msg</span>&nbsp;<span class="op" id="6212358">:=</span>&nbsp;<span class="ident" id="6212361">e</span><span class="op" id="6212362">.</span><span class="ident" id="6212363">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212368">if</span>&nbsp;<span class="ident" id="6212371">e</span><span class="op" id="6212372">.</span><span class="ident" id="6212373">val</span>&nbsp;<span class="op" id="6212377">!=</span>&nbsp;<span class="builtintype" id="6212380">nil</span>&nbsp;<span class="op" id="6212384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212388">msg</span>&nbsp;<span class="op" id="6212392">+=</span>&nbsp;<span class="ident" id="6212395">fmt</span><span class="op" id="6212398">.</span><span class="ident" id="6212399">Sprintf</span><span class="op" id="6212406">(</span><span class="string" id="6212407">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6212414">,</span>&nbsp;<span class="ident" id="6212416">e</span><span class="op" id="6212417">.</span><span class="ident" id="6212418">val</span><span class="op" id="6212421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6212424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212427">msg</span>&nbsp;<span class="op" id="6212431">+=</span>&nbsp;<span class="ident" id="6212434">fmt</span><span class="op" id="6212437">.</span><span class="ident" id="6212438">Sprintf</span><span class="op" id="6212445">(</span><span class="string" id="6212446">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6212470">,</span>&nbsp;<span class="ident" id="6212472">e</span><span class="op" id="6212473">.</span><span class="ident" id="6212474">off</span><span class="op" id="6212477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212480">return</span>&nbsp;<span class="ident" id="6212487">msg</span><br>
<span class="lineno">165</span><span class="op" id="6212491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6212494">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6212581">func</span>&nbsp;<span class="ident" id="6212586">Open</span><span class="op" id="6212590">(</span><span class="ident" id="6212591">name</span>&nbsp;<span class="builtintype" id="6212596">string</span><span class="op" id="6212602">)</span>&nbsp;<span class="op" id="6212604">(</span><span class="op" id="6212605">*</span><span class="ident" id="6212606">File</span><span class="op" id="6212610">,</span>&nbsp;<span class="builtintype" id="6212612">error</span><span class="op" id="6212617">)</span>&nbsp;<span class="op" id="6212619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212622">f</span><span class="op" id="6212623">,</span>&nbsp;<span class="ident" id="6212625">err</span>&nbsp;<span class="op" id="6212629">:=</span>&nbsp;<span class="ident" id="6212632">os</span><span class="op" id="6212634">.</span><span class="ident" id="6212635">Open</span><span class="op" id="6212639">(</span><span class="ident" id="6212640">name</span><span class="op" id="6212644">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212647">if</span>&nbsp;<span class="ident" id="6212650">err</span>&nbsp;<span class="op" id="6212654">!=</span>&nbsp;<span class="builtintype" id="6212657">nil</span>&nbsp;<span class="op" id="6212661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212665">return</span>&nbsp;<span class="builtintype" id="6212672">nil</span><span class="op" id="6212675">,</span>&nbsp;<span class="ident" id="6212677">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6212682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212685">ff</span><span class="op" id="6212687">,</span>&nbsp;<span class="ident" id="6212689">err</span>&nbsp;<span class="op" id="6212693">:=</span>&nbsp;<span class="ident" id="6212696">NewFile</span><span class="op" id="6212703">(</span><span class="ident" id="6212704">f</span><span class="op" id="6212705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212708">if</span>&nbsp;<span class="ident" id="6212711">err</span>&nbsp;<span class="op" id="6212715">!=</span>&nbsp;<span class="builtintype" id="6212718">nil</span>&nbsp;<span class="op" id="6212722">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212726">f</span><span class="op" id="6212727">.</span><span class="ident" id="6212728">Close</span><span class="op" id="6212733">(</span><span class="op" id="6212734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212738">return</span>&nbsp;<span class="builtintype" id="6212745">nil</span><span class="op" id="6212748">,</span>&nbsp;<span class="ident" id="6212750">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6212755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212758">ff</span><span class="op" id="6212760">.</span><span class="ident" id="6212761">closer</span>&nbsp;<span class="op" id="6212768">=</span>&nbsp;<span class="ident" id="6212770">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212773">return</span>&nbsp;<span class="ident" id="6212780">ff</span><span class="op" id="6212782">,</span>&nbsp;<span class="builtintype" id="6212784">nil</span><br>
<span class="lineno">180</span><span class="op" id="6212788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6212791">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6212817">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6212884">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6212908">func</span>&nbsp;<span class="op" id="6212913">(</span><span class="ident" id="6212914">f</span>&nbsp;<span class="op" id="6212916">*</span><span class="ident" id="6212917">File</span><span class="op" id="6212921">)</span>&nbsp;<span class="ident" id="6212923">Close</span><span class="op" id="6212928">(</span><span class="op" id="6212929">)</span>&nbsp;<span class="builtintype" id="6212931">error</span>&nbsp;<span class="op" id="6212937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212940">var</span>&nbsp;<span class="ident" id="6212944">err</span>&nbsp;<span class="builtintype" id="6212948">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6212955">if</span>&nbsp;<span class="ident" id="6212958">f</span><span class="op" id="6212959">.</span><span class="ident" id="6212960">closer</span>&nbsp;<span class="op" id="6212967">!=</span>&nbsp;<span class="builtintype" id="6212970">nil</span>&nbsp;<span class="op" id="6212974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6212978">err</span>&nbsp;<span class="op" id="6212982">=</span>&nbsp;<span class="ident" id="6212984">f</span><span class="op" id="6212985">.</span><span class="ident" id="6212986">closer</span><span class="op" id="6212992">.</span><span class="ident" id="6212993">Close</span><span class="op" id="6212998">(</span><span class="op" id="6212999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213003">f</span><span class="op" id="6213004">.</span><span class="ident" id="6213005">closer</span>&nbsp;<span class="op" id="6213012">=</span>&nbsp;<span class="builtintype" id="6213014">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6213019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213022">return</span>&nbsp;<span class="ident" id="6213029">err</span><br>
<span class="lineno"></span><span class="op" id="6213033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6213036">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6213121">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6213194">func</span>&nbsp;<span class="ident" id="6213199">NewFile</span><span class="op" id="6213206">(</span><span class="ident" id="6213207">r</span>&nbsp;<span class="ident" id="6213209">io</span><span class="op" id="6213211">.</span><span class="ident" id="6213212">ReaderAt</span><span class="op" id="6213220">)</span>&nbsp;<span class="op" id="6213222">(</span><span class="op" id="6213223">*</span><span class="ident" id="6213224">File</span><span class="op" id="6213228">,</span>&nbsp;<span class="builtintype" id="6213230">error</span><span class="op" id="6213235">)</span>&nbsp;<span class="op" id="6213237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213240">f</span>&nbsp;<span class="op" id="6213242">:=</span>&nbsp;<span class="builtinfunc" id="6213245">new</span><span class="op" id="6213248">(</span><span class="ident" id="6213249">File</span><span class="op" id="6213253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213256">sr</span>&nbsp;<span class="op" id="6213259">:=</span>&nbsp;<span class="ident" id="6213262">io</span><span class="op" id="6213264">.</span><span class="ident" id="6213265">NewSectionReader</span><span class="op" id="6213281">(</span><span class="ident" id="6213282">r</span><span class="op" id="6213283">,</span>&nbsp;<span class="num" id="6213285">0</span><span class="op" id="6213286">,</span>&nbsp;<span class="num" id="6213288">1</span><span class="op" id="6213289">&lt;&lt;</span><span class="num" id="6213291">63</span><span class="op" id="6213293">-</span><span class="num" id="6213294">1</span><span class="op" id="6213295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213299">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213361">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213416">var</span>&nbsp;<span class="ident" id="6213420">ident</span>&nbsp;<span class="op" id="6213426">[</span><span class="num" id="6213427">4</span><span class="op" id="6213428">]</span><span class="builtintype" id="6213429">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213435">if</span>&nbsp;<span class="ident" id="6213438">_</span><span class="op" id="6213439">,</span>&nbsp;<span class="ident" id="6213441">err</span>&nbsp;<span class="op" id="6213445">:=</span>&nbsp;<span class="ident" id="6213448">r</span><span class="op" id="6213449">.</span><span class="ident" id="6213450">ReadAt</span><span class="op" id="6213456">(</span><span class="ident" id="6213457">ident</span><span class="op" id="6213462">[</span><span class="num" id="6213463">0</span><span class="op" id="6213464">:</span><span class="op" id="6213465">]</span><span class="op" id="6213466">,</span>&nbsp;<span class="num" id="6213468">0</span><span class="op" id="6213469">)</span><span class="op" id="6213470">;</span>&nbsp;<span class="ident" id="6213472">err</span>&nbsp;<span class="op" id="6213476">!=</span>&nbsp;<span class="builtintype" id="6213479">nil</span>&nbsp;<span class="op" id="6213483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213487">return</span>&nbsp;<span class="builtintype" id="6213494">nil</span><span class="op" id="6213497">,</span>&nbsp;<span class="ident" id="6213499">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6213504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213507">be</span>&nbsp;<span class="op" id="6213510">:=</span>&nbsp;<span class="ident" id="6213513">binary</span><span class="op" id="6213519">.</span><span class="ident" id="6213520">BigEndian</span><span class="op" id="6213529">.</span><span class="ident" id="6213530">Uint32</span><span class="op" id="6213536">(</span><span class="ident" id="6213537">ident</span><span class="op" id="6213542">[</span><span class="num" id="6213543">0</span><span class="op" id="6213544">:</span><span class="op" id="6213545">]</span><span class="op" id="6213546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213549">le</span>&nbsp;<span class="op" id="6213552">:=</span>&nbsp;<span class="ident" id="6213555">binary</span><span class="op" id="6213561">.</span><span class="ident" id="6213562">LittleEndian</span><span class="op" id="6213574">.</span><span class="ident" id="6213575">Uint32</span><span class="op" id="6213581">(</span><span class="ident" id="6213582">ident</span><span class="op" id="6213587">[</span><span class="num" id="6213588">0</span><span class="op" id="6213589">:</span><span class="op" id="6213590">]</span><span class="op" id="6213591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213594">switch</span>&nbsp;<span class="ident" id="6213601">Magic32</span>&nbsp;<span class="op" id="6213609">&amp;^</span>&nbsp;<span class="num" id="6213612">1</span>&nbsp;<span class="op" id="6213614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213617">case</span>&nbsp;<span class="ident" id="6213622">be</span>&nbsp;<span class="op" id="6213625">&amp;^</span>&nbsp;<span class="num" id="6213628">1</span><span class="op" id="6213629">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213633">f</span><span class="op" id="6213634">.</span><span class="ident" id="6213635">ByteOrder</span>&nbsp;<span class="op" id="6213645">=</span>&nbsp;<span class="ident" id="6213647">binary</span><span class="op" id="6213653">.</span><span class="ident" id="6213654">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213666">f</span><span class="op" id="6213667">.</span><span class="ident" id="6213668">Magic</span>&nbsp;<span class="op" id="6213674">=</span>&nbsp;<span class="ident" id="6213676">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213680">case</span>&nbsp;<span class="ident" id="6213685">le</span>&nbsp;<span class="op" id="6213688">&amp;^</span>&nbsp;<span class="num" id="6213691">1</span><span class="op" id="6213692">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213696">f</span><span class="op" id="6213697">.</span><span class="ident" id="6213698">ByteOrder</span>&nbsp;<span class="op" id="6213708">=</span>&nbsp;<span class="ident" id="6213710">binary</span><span class="op" id="6213716">.</span><span class="ident" id="6213717">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213732">f</span><span class="op" id="6213733">.</span><span class="ident" id="6213734">Magic</span>&nbsp;<span class="op" id="6213740">=</span>&nbsp;<span class="ident" id="6213742">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213746">default</span><span class="op" id="6213753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213757">return</span>&nbsp;<span class="builtintype" id="6213764">nil</span><span class="op" id="6213767">,</span>&nbsp;<span class="op" id="6213769">&amp;</span><span class="ident" id="6213770">FormatError</span><span class="op" id="6213781">{</span><span class="num" id="6213782">0</span><span class="op" id="6213783">,</span>&nbsp;<span class="string" id="6213785">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6213807">,</span>&nbsp;<span class="builtintype" id="6213809">nil</span><span class="op" id="6213812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6213815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213819">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213848">if</span>&nbsp;<span class="ident" id="6213851">err</span>&nbsp;<span class="op" id="6213855">:=</span>&nbsp;<span class="ident" id="6213858">binary</span><span class="op" id="6213864">.</span><span class="ident" id="6213865">Read</span><span class="op" id="6213869">(</span><span class="ident" id="6213870">sr</span><span class="op" id="6213872">,</span>&nbsp;<span class="ident" id="6213874">f</span><span class="op" id="6213875">.</span><span class="ident" id="6213876">ByteOrder</span><span class="op" id="6213885">,</span>&nbsp;<span class="op" id="6213887">&amp;</span><span class="ident" id="6213888">f</span><span class="op" id="6213889">.</span><span class="ident" id="6213890">FileHeader</span><span class="op" id="6213900">)</span><span class="op" id="6213901">;</span>&nbsp;<span class="ident" id="6213903">err</span>&nbsp;<span class="op" id="6213907">!=</span>&nbsp;<span class="builtintype" id="6213910">nil</span>&nbsp;<span class="op" id="6213914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213918">return</span>&nbsp;<span class="builtintype" id="6213925">nil</span><span class="op" id="6213928">,</span>&nbsp;<span class="ident" id="6213930">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6213935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213939">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213963">offset</span>&nbsp;<span class="op" id="6213970">:=</span>&nbsp;<span class="ident" id="6213973">int64</span><span class="op" id="6213978">(</span><span class="ident" id="6213979">fileHeaderSize32</span><span class="op" id="6213995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6213998">if</span>&nbsp;<span class="ident" id="6214001">f</span><span class="op" id="6214002">.</span><span class="ident" id="6214003">Magic</span>&nbsp;<span class="op" id="6214009">==</span>&nbsp;<span class="ident" id="6214012">Magic64</span>&nbsp;<span class="op" id="6214020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214024">offset</span>&nbsp;<span class="op" id="6214031">=</span>&nbsp;<span class="ident" id="6214033">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6214051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214054">dat</span>&nbsp;<span class="op" id="6214058">:=</span>&nbsp;<span class="builtinfunc" id="6214061">make</span><span class="op" id="6214065">(</span><span class="op" id="6214066">[</span><span class="op" id="6214067">]</span><span class="builtintype" id="6214068">byte</span><span class="op" id="6214072">,</span>&nbsp;<span class="ident" id="6214074">f</span><span class="op" id="6214075">.</span><span class="ident" id="6214076">Cmdsz</span><span class="op" id="6214081">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214084">if</span>&nbsp;<span class="ident" id="6214087">_</span><span class="op" id="6214088">,</span>&nbsp;<span class="ident" id="6214090">err</span>&nbsp;<span class="op" id="6214094">:=</span>&nbsp;<span class="ident" id="6214097">r</span><span class="op" id="6214098">.</span><span class="ident" id="6214099">ReadAt</span><span class="op" id="6214105">(</span><span class="ident" id="6214106">dat</span><span class="op" id="6214109">,</span>&nbsp;<span class="ident" id="6214111">offset</span><span class="op" id="6214117">)</span><span class="op" id="6214118">;</span>&nbsp;<span class="ident" id="6214120">err</span>&nbsp;<span class="op" id="6214124">!=</span>&nbsp;<span class="builtintype" id="6214127">nil</span>&nbsp;<span class="op" id="6214131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214135">return</span>&nbsp;<span class="builtintype" id="6214142">nil</span><span class="op" id="6214145">,</span>&nbsp;<span class="ident" id="6214147">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6214152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214155">f</span><span class="op" id="6214156">.</span><span class="ident" id="6214157">Loads</span>&nbsp;<span class="op" id="6214163">=</span>&nbsp;<span class="builtinfunc" id="6214165">make</span><span class="op" id="6214169">(</span><span class="op" id="6214170">[</span><span class="op" id="6214171">]</span><span class="ident" id="6214172">Load</span><span class="op" id="6214176">,</span>&nbsp;<span class="ident" id="6214178">f</span><span class="op" id="6214179">.</span><span class="ident" id="6214180">Ncmd</span><span class="op" id="6214184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214187">bo</span>&nbsp;<span class="op" id="6214190">:=</span>&nbsp;<span class="ident" id="6214193">f</span><span class="op" id="6214194">.</span><span class="ident" id="6214195">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214206">for</span>&nbsp;<span class="ident" id="6214210">i</span>&nbsp;<span class="op" id="6214212">:=</span>&nbsp;<span class="keyword" id="6214215">range</span>&nbsp;<span class="ident" id="6214221">f</span><span class="op" id="6214222">.</span><span class="ident" id="6214223">Loads</span>&nbsp;<span class="op" id="6214229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6214233">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214295">if</span>&nbsp;<span class="builtinfunc" id="6214298">len</span><span class="op" id="6214301">(</span><span class="ident" id="6214302">dat</span><span class="op" id="6214305">)</span>&nbsp;<span class="op" id="6214307">&lt;</span>&nbsp;<span class="num" id="6214309">8</span>&nbsp;<span class="op" id="6214311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214316">return</span>&nbsp;<span class="builtintype" id="6214323">nil</span><span class="op" id="6214326">,</span>&nbsp;<span class="op" id="6214328">&amp;</span><span class="ident" id="6214329">FormatError</span><span class="op" id="6214340">{</span><span class="ident" id="6214341">offset</span><span class="op" id="6214347">,</span>&nbsp;<span class="string" id="6214349">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6214374">,</span>&nbsp;<span class="builtintype" id="6214376">nil</span><span class="op" id="6214379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6214383">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214387">cmd</span><span class="op" id="6214390">,</span>&nbsp;<span class="ident" id="6214392">siz</span>&nbsp;<span class="op" id="6214396">:=</span>&nbsp;<span class="ident" id="6214399">LoadCmd</span><span class="op" id="6214406">(</span><span class="ident" id="6214407">bo</span><span class="op" id="6214409">.</span><span class="ident" id="6214410">Uint32</span><span class="op" id="6214416">(</span><span class="ident" id="6214417">dat</span><span class="op" id="6214420">[</span><span class="num" id="6214421">0</span><span class="op" id="6214422">:</span><span class="num" id="6214423">4</span><span class="op" id="6214424">]</span><span class="op" id="6214425">)</span><span class="op" id="6214426">)</span><span class="op" id="6214427">,</span>&nbsp;<span class="ident" id="6214429">bo</span><span class="op" id="6214431">.</span><span class="ident" id="6214432">Uint32</span><span class="op" id="6214438">(</span><span class="ident" id="6214439">dat</span><span class="op" id="6214442">[</span><span class="num" id="6214443">4</span><span class="op" id="6214444">:</span><span class="num" id="6214445">8</span><span class="op" id="6214446">]</span><span class="op" id="6214447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214451">if</span>&nbsp;<span class="ident" id="6214454">siz</span>&nbsp;<span class="op" id="6214458">&lt;</span>&nbsp;<span class="num" id="6214460">8</span>&nbsp;<span class="op" id="6214462">||</span>&nbsp;<span class="ident" id="6214465">siz</span>&nbsp;<span class="op" id="6214469">&gt;</span>&nbsp;<span class="builtintype" id="6214471">uint32</span><span class="op" id="6214477">(</span><span class="builtinfunc" id="6214478">len</span><span class="op" id="6214481">(</span><span class="ident" id="6214482">dat</span><span class="op" id="6214485">)</span><span class="op" id="6214486">)</span>&nbsp;<span class="op" id="6214488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214493">return</span>&nbsp;<span class="builtintype" id="6214500">nil</span><span class="op" id="6214503">,</span>&nbsp;<span class="op" id="6214505">&amp;</span><span class="ident" id="6214506">FormatError</span><span class="op" id="6214517">{</span><span class="ident" id="6214518">offset</span><span class="op" id="6214524">,</span>&nbsp;<span class="string" id="6214526">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6214554">,</span>&nbsp;<span class="builtintype" id="6214556">nil</span><span class="op" id="6214559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6214563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214567">var</span>&nbsp;<span class="ident" id="6214571">cmddat</span>&nbsp;<span class="op" id="6214578">[</span><span class="op" id="6214579">]</span><span class="builtintype" id="6214580">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214587">cmddat</span><span class="op" id="6214593">,</span>&nbsp;<span class="ident" id="6214595">dat</span>&nbsp;<span class="op" id="6214599">=</span>&nbsp;<span class="ident" id="6214601">dat</span><span class="op" id="6214604">[</span><span class="num" id="6214605">0</span><span class="op" id="6214606">:</span><span class="ident" id="6214607">siz</span><span class="op" id="6214610">]</span><span class="op" id="6214611">,</span>&nbsp;<span class="ident" id="6214613">dat</span><span class="op" id="6214616">[</span><span class="ident" id="6214617">siz</span><span class="op" id="6214620">:</span><span class="op" id="6214621">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214625">offset</span>&nbsp;<span class="op" id="6214632">+=</span>&nbsp;<span class="ident" id="6214635">int64</span><span class="op" id="6214640">(</span><span class="ident" id="6214641">siz</span><span class="op" id="6214644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214648">var</span>&nbsp;<span class="ident" id="6214652">s</span>&nbsp;<span class="op" id="6214654">*</span><span class="ident" id="6214655">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214665">switch</span>&nbsp;<span class="ident" id="6214672">cmd</span>&nbsp;<span class="op" id="6214676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214680">default</span><span class="op" id="6214687">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214692">f</span><span class="op" id="6214693">.</span><span class="ident" id="6214694">Loads</span><span class="op" id="6214699">[</span><span class="ident" id="6214700">i</span><span class="op" id="6214701">]</span>&nbsp;<span class="op" id="6214703">=</span>&nbsp;<span class="ident" id="6214705">LoadBytes</span><span class="op" id="6214714">(</span><span class="ident" id="6214715">cmddat</span><span class="op" id="6214721">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214726">case</span>&nbsp;<span class="ident" id="6214731">LoadCmdDylib</span><span class="op" id="6214743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214748">var</span>&nbsp;<span class="ident" id="6214752">hdr</span>&nbsp;<span class="ident" id="6214756">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214768">b</span>&nbsp;<span class="op" id="6214770">:=</span>&nbsp;<span class="ident" id="6214773">bytes</span><span class="op" id="6214778">.</span><span class="ident" id="6214779">NewReader</span><span class="op" id="6214788">(</span><span class="ident" id="6214789">cmddat</span><span class="op" id="6214795">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214800">if</span>&nbsp;<span class="ident" id="6214803">err</span>&nbsp;<span class="op" id="6214807">:=</span>&nbsp;<span class="ident" id="6214810">binary</span><span class="op" id="6214816">.</span><span class="ident" id="6214817">Read</span><span class="op" id="6214821">(</span><span class="ident" id="6214822">b</span><span class="op" id="6214823">,</span>&nbsp;<span class="ident" id="6214825">bo</span><span class="op" id="6214827">,</span>&nbsp;<span class="op" id="6214829">&amp;</span><span class="ident" id="6214830">hdr</span><span class="op" id="6214833">)</span><span class="op" id="6214834">;</span>&nbsp;<span class="ident" id="6214836">err</span>&nbsp;<span class="op" id="6214840">!=</span>&nbsp;<span class="builtintype" id="6214843">nil</span>&nbsp;<span class="op" id="6214847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214853">return</span>&nbsp;<span class="builtintype" id="6214860">nil</span><span class="op" id="6214863">,</span>&nbsp;<span class="ident" id="6214865">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6214872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6214877">l</span>&nbsp;<span class="op" id="6214879">:=</span>&nbsp;<span class="builtinfunc" id="6214882">new</span><span class="op" id="6214885">(</span><span class="ident" id="6214886">Dylib</span><span class="op" id="6214891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214896">if</span>&nbsp;<span class="ident" id="6214899">hdr</span><span class="op" id="6214902">.</span><span class="ident" id="6214903">Name</span>&nbsp;<span class="op" id="6214908">&gt;=</span>&nbsp;<span class="builtintype" id="6214911">uint32</span><span class="op" id="6214917">(</span><span class="builtinfunc" id="6214918">len</span><span class="op" id="6214921">(</span><span class="ident" id="6214922">cmddat</span><span class="op" id="6214928">)</span><span class="op" id="6214929">)</span>&nbsp;<span class="op" id="6214931">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6214937">return</span>&nbsp;<span class="builtintype" id="6214944">nil</span><span class="op" id="6214947">,</span>&nbsp;<span class="op" id="6214949">&amp;</span><span class="ident" id="6214950">FormatError</span><span class="op" id="6214961">{</span><span class="ident" id="6214962">offset</span><span class="op" id="6214968">,</span>&nbsp;<span class="string" id="6214970">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6215011">,</span>&nbsp;<span class="ident" id="6215013">hdr</span><span class="op" id="6215016">.</span><span class="ident" id="6215017">Name</span><span class="op" id="6215021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215031">l</span><span class="op" id="6215032">.</span><span class="ident" id="6215033">Name</span>&nbsp;<span class="op" id="6215038">=</span>&nbsp;<span class="ident" id="6215040">cstring</span><span class="op" id="6215047">(</span><span class="ident" id="6215048">cmddat</span><span class="op" id="6215054">[</span><span class="ident" id="6215055">hdr</span><span class="op" id="6215058">.</span><span class="ident" id="6215059">Name</span><span class="op" id="6215063">:</span><span class="op" id="6215064">]</span><span class="op" id="6215065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215070">l</span><span class="op" id="6215071">.</span><span class="ident" id="6215072">Time</span>&nbsp;<span class="op" id="6215077">=</span>&nbsp;<span class="ident" id="6215079">hdr</span><span class="op" id="6215082">.</span><span class="ident" id="6215083">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215091">l</span><span class="op" id="6215092">.</span><span class="ident" id="6215093">CurrentVersion</span>&nbsp;<span class="op" id="6215108">=</span>&nbsp;<span class="ident" id="6215110">hdr</span><span class="op" id="6215113">.</span><span class="ident" id="6215114">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215132">l</span><span class="op" id="6215133">.</span><span class="ident" id="6215134">CompatVersion</span>&nbsp;<span class="op" id="6215148">=</span>&nbsp;<span class="ident" id="6215150">hdr</span><span class="op" id="6215153">.</span><span class="ident" id="6215154">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215171">l</span><span class="op" id="6215172">.</span><span class="ident" id="6215173">LoadBytes</span>&nbsp;<span class="op" id="6215183">=</span>&nbsp;<span class="ident" id="6215185">LoadBytes</span><span class="op" id="6215194">(</span><span class="ident" id="6215195">cmddat</span><span class="op" id="6215201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215206">f</span><span class="op" id="6215207">.</span><span class="ident" id="6215208">Loads</span><span class="op" id="6215213">[</span><span class="ident" id="6215214">i</span><span class="op" id="6215215">]</span>&nbsp;<span class="op" id="6215217">=</span>&nbsp;<span class="ident" id="6215219">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215224">case</span>&nbsp;<span class="ident" id="6215229">LoadCmdSymtab</span><span class="op" id="6215242">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215247">var</span>&nbsp;<span class="ident" id="6215251">hdr</span>&nbsp;<span class="ident" id="6215255">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215268">b</span>&nbsp;<span class="op" id="6215270">:=</span>&nbsp;<span class="ident" id="6215273">bytes</span><span class="op" id="6215278">.</span><span class="ident" id="6215279">NewReader</span><span class="op" id="6215288">(</span><span class="ident" id="6215289">cmddat</span><span class="op" id="6215295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215300">if</span>&nbsp;<span class="ident" id="6215303">err</span>&nbsp;<span class="op" id="6215307">:=</span>&nbsp;<span class="ident" id="6215310">binary</span><span class="op" id="6215316">.</span><span class="ident" id="6215317">Read</span><span class="op" id="6215321">(</span><span class="ident" id="6215322">b</span><span class="op" id="6215323">,</span>&nbsp;<span class="ident" id="6215325">bo</span><span class="op" id="6215327">,</span>&nbsp;<span class="op" id="6215329">&amp;</span><span class="ident" id="6215330">hdr</span><span class="op" id="6215333">)</span><span class="op" id="6215334">;</span>&nbsp;<span class="ident" id="6215336">err</span>&nbsp;<span class="op" id="6215340">!=</span>&nbsp;<span class="builtintype" id="6215343">nil</span>&nbsp;<span class="op" id="6215347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215353">return</span>&nbsp;<span class="builtintype" id="6215360">nil</span><span class="op" id="6215363">,</span>&nbsp;<span class="ident" id="6215365">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215372">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215377">strtab</span>&nbsp;<span class="op" id="6215384">:=</span>&nbsp;<span class="builtinfunc" id="6215387">make</span><span class="op" id="6215391">(</span><span class="op" id="6215392">[</span><span class="op" id="6215393">]</span><span class="builtintype" id="6215394">byte</span><span class="op" id="6215398">,</span>&nbsp;<span class="ident" id="6215400">hdr</span><span class="op" id="6215403">.</span><span class="ident" id="6215404">Strsize</span><span class="op" id="6215411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215416">if</span>&nbsp;<span class="ident" id="6215419">_</span><span class="op" id="6215420">,</span>&nbsp;<span class="ident" id="6215422">err</span>&nbsp;<span class="op" id="6215426">:=</span>&nbsp;<span class="ident" id="6215429">r</span><span class="op" id="6215430">.</span><span class="ident" id="6215431">ReadAt</span><span class="op" id="6215437">(</span><span class="ident" id="6215438">strtab</span><span class="op" id="6215444">,</span>&nbsp;<span class="ident" id="6215446">int64</span><span class="op" id="6215451">(</span><span class="ident" id="6215452">hdr</span><span class="op" id="6215455">.</span><span class="ident" id="6215456">Stroff</span><span class="op" id="6215462">)</span><span class="op" id="6215463">)</span><span class="op" id="6215464">;</span>&nbsp;<span class="ident" id="6215466">err</span>&nbsp;<span class="op" id="6215470">!=</span>&nbsp;<span class="builtintype" id="6215473">nil</span>&nbsp;<span class="op" id="6215477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215483">return</span>&nbsp;<span class="builtintype" id="6215490">nil</span><span class="op" id="6215493">,</span>&nbsp;<span class="ident" id="6215495">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215507">var</span>&nbsp;<span class="ident" id="6215511">symsz</span>&nbsp;<span class="builtintype" id="6215517">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215524">if</span>&nbsp;<span class="ident" id="6215527">f</span><span class="op" id="6215528">.</span><span class="ident" id="6215529">Magic</span>&nbsp;<span class="op" id="6215535">==</span>&nbsp;<span class="ident" id="6215538">Magic64</span>&nbsp;<span class="op" id="6215546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215552">symsz</span>&nbsp;<span class="op" id="6215558">=</span>&nbsp;<span class="num" id="6215560">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215566">}</span>&nbsp;<span class="keyword" id="6215568">else</span>&nbsp;<span class="op" id="6215573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215579">symsz</span>&nbsp;<span class="op" id="6215585">=</span>&nbsp;<span class="num" id="6215587">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215593">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215598">symdat</span>&nbsp;<span class="op" id="6215605">:=</span>&nbsp;<span class="builtinfunc" id="6215608">make</span><span class="op" id="6215612">(</span><span class="op" id="6215613">[</span><span class="op" id="6215614">]</span><span class="builtintype" id="6215615">byte</span><span class="op" id="6215619">,</span>&nbsp;<span class="builtintype" id="6215621">int</span><span class="op" id="6215624">(</span><span class="ident" id="6215625">hdr</span><span class="op" id="6215628">.</span><span class="ident" id="6215629">Nsyms</span><span class="op" id="6215634">)</span><span class="op" id="6215635">*</span><span class="ident" id="6215636">symsz</span><span class="op" id="6215641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215646">if</span>&nbsp;<span class="ident" id="6215649">_</span><span class="op" id="6215650">,</span>&nbsp;<span class="ident" id="6215652">err</span>&nbsp;<span class="op" id="6215656">:=</span>&nbsp;<span class="ident" id="6215659">r</span><span class="op" id="6215660">.</span><span class="ident" id="6215661">ReadAt</span><span class="op" id="6215667">(</span><span class="ident" id="6215668">symdat</span><span class="op" id="6215674">,</span>&nbsp;<span class="ident" id="6215676">int64</span><span class="op" id="6215681">(</span><span class="ident" id="6215682">hdr</span><span class="op" id="6215685">.</span><span class="ident" id="6215686">Symoff</span><span class="op" id="6215692">)</span><span class="op" id="6215693">)</span><span class="op" id="6215694">;</span>&nbsp;<span class="ident" id="6215696">err</span>&nbsp;<span class="op" id="6215700">!=</span>&nbsp;<span class="builtintype" id="6215703">nil</span>&nbsp;<span class="op" id="6215707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215713">return</span>&nbsp;<span class="builtintype" id="6215720">nil</span><span class="op" id="6215723">,</span>&nbsp;<span class="ident" id="6215725">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215737">st</span><span class="op" id="6215739">,</span>&nbsp;<span class="ident" id="6215741">err</span>&nbsp;<span class="op" id="6215745">:=</span>&nbsp;<span class="ident" id="6215748">f</span><span class="op" id="6215749">.</span><span class="ident" id="6215750">parseSymtab</span><span class="op" id="6215761">(</span><span class="ident" id="6215762">symdat</span><span class="op" id="6215768">,</span>&nbsp;<span class="ident" id="6215770">strtab</span><span class="op" id="6215776">,</span>&nbsp;<span class="ident" id="6215778">cmddat</span><span class="op" id="6215784">,</span>&nbsp;<span class="op" id="6215786">&amp;</span><span class="ident" id="6215787">hdr</span><span class="op" id="6215790">,</span>&nbsp;<span class="ident" id="6215792">offset</span><span class="op" id="6215798">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215803">if</span>&nbsp;<span class="ident" id="6215806">err</span>&nbsp;<span class="op" id="6215810">!=</span>&nbsp;<span class="builtintype" id="6215813">nil</span>&nbsp;<span class="op" id="6215817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215823">return</span>&nbsp;<span class="builtintype" id="6215830">nil</span><span class="op" id="6215833">,</span>&nbsp;<span class="ident" id="6215835">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6215842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215847">f</span><span class="op" id="6215848">.</span><span class="ident" id="6215849">Loads</span><span class="op" id="6215854">[</span><span class="ident" id="6215855">i</span><span class="op" id="6215856">]</span>&nbsp;<span class="op" id="6215858">=</span>&nbsp;<span class="ident" id="6215860">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215866">f</span><span class="op" id="6215867">.</span><span class="ident" id="6215868">Symtab</span>&nbsp;<span class="op" id="6215875">=</span>&nbsp;<span class="ident" id="6215877">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215883">case</span>&nbsp;<span class="ident" id="6215888">LoadCmdDysymtab</span><span class="op" id="6215903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215908">var</span>&nbsp;<span class="ident" id="6215912">hdr</span>&nbsp;<span class="ident" id="6215916">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6215931">b</span>&nbsp;<span class="op" id="6215933">:=</span>&nbsp;<span class="ident" id="6215936">bytes</span><span class="op" id="6215941">.</span><span class="ident" id="6215942">NewReader</span><span class="op" id="6215951">(</span><span class="ident" id="6215952">cmddat</span><span class="op" id="6215958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215963">if</span>&nbsp;<span class="ident" id="6215966">err</span>&nbsp;<span class="op" id="6215970">:=</span>&nbsp;<span class="ident" id="6215973">binary</span><span class="op" id="6215979">.</span><span class="ident" id="6215980">Read</span><span class="op" id="6215984">(</span><span class="ident" id="6215985">b</span><span class="op" id="6215986">,</span>&nbsp;<span class="ident" id="6215988">bo</span><span class="op" id="6215990">,</span>&nbsp;<span class="op" id="6215992">&amp;</span><span class="ident" id="6215993">hdr</span><span class="op" id="6215996">)</span><span class="op" id="6215997">;</span>&nbsp;<span class="ident" id="6215999">err</span>&nbsp;<span class="op" id="6216003">!=</span>&nbsp;<span class="builtintype" id="6216006">nil</span>&nbsp;<span class="op" id="6216010">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216016">return</span>&nbsp;<span class="builtintype" id="6216023">nil</span><span class="op" id="6216026">,</span>&nbsp;<span class="ident" id="6216028">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6216035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216040">dat</span>&nbsp;<span class="op" id="6216044">:=</span>&nbsp;<span class="builtinfunc" id="6216047">make</span><span class="op" id="6216051">(</span><span class="op" id="6216052">[</span><span class="op" id="6216053">]</span><span class="builtintype" id="6216054">byte</span><span class="op" id="6216058">,</span>&nbsp;<span class="ident" id="6216060">hdr</span><span class="op" id="6216063">.</span><span class="ident" id="6216064">Nindirectsyms</span><span class="op" id="6216077">*</span><span class="num" id="6216078">4</span><span class="op" id="6216079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216084">if</span>&nbsp;<span class="ident" id="6216087">_</span><span class="op" id="6216088">,</span>&nbsp;<span class="ident" id="6216090">err</span>&nbsp;<span class="op" id="6216094">:=</span>&nbsp;<span class="ident" id="6216097">r</span><span class="op" id="6216098">.</span><span class="ident" id="6216099">ReadAt</span><span class="op" id="6216105">(</span><span class="ident" id="6216106">dat</span><span class="op" id="6216109">,</span>&nbsp;<span class="ident" id="6216111">int64</span><span class="op" id="6216116">(</span><span class="ident" id="6216117">hdr</span><span class="op" id="6216120">.</span><span class="ident" id="6216121">Indirectsymoff</span><span class="op" id="6216135">)</span><span class="op" id="6216136">)</span><span class="op" id="6216137">;</span>&nbsp;<span class="ident" id="6216139">err</span>&nbsp;<span class="op" id="6216143">!=</span>&nbsp;<span class="builtintype" id="6216146">nil</span>&nbsp;<span class="op" id="6216150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216156">return</span>&nbsp;<span class="builtintype" id="6216163">nil</span><span class="op" id="6216166">,</span>&nbsp;<span class="ident" id="6216168">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6216175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216180">x</span>&nbsp;<span class="op" id="6216182">:=</span>&nbsp;<span class="builtinfunc" id="6216185">make</span><span class="op" id="6216189">(</span><span class="op" id="6216190">[</span><span class="op" id="6216191">]</span><span class="builtintype" id="6216192">uint32</span><span class="op" id="6216198">,</span>&nbsp;<span class="ident" id="6216200">hdr</span><span class="op" id="6216203">.</span><span class="ident" id="6216204">Nindirectsyms</span><span class="op" id="6216217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216222">if</span>&nbsp;<span class="ident" id="6216225">err</span>&nbsp;<span class="op" id="6216229">:=</span>&nbsp;<span class="ident" id="6216232">binary</span><span class="op" id="6216238">.</span><span class="ident" id="6216239">Read</span><span class="op" id="6216243">(</span><span class="ident" id="6216244">bytes</span><span class="op" id="6216249">.</span><span class="ident" id="6216250">NewReader</span><span class="op" id="6216259">(</span><span class="ident" id="6216260">dat</span><span class="op" id="6216263">)</span><span class="op" id="6216264">,</span>&nbsp;<span class="ident" id="6216266">bo</span><span class="op" id="6216268">,</span>&nbsp;<span class="ident" id="6216270">x</span><span class="op" id="6216271">)</span><span class="op" id="6216272">;</span>&nbsp;<span class="ident" id="6216274">err</span>&nbsp;<span class="op" id="6216278">!=</span>&nbsp;<span class="builtintype" id="6216281">nil</span>&nbsp;<span class="op" id="6216285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216291">return</span>&nbsp;<span class="builtintype" id="6216298">nil</span><span class="op" id="6216301">,</span>&nbsp;<span class="ident" id="6216303">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6216310">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216315">st</span>&nbsp;<span class="op" id="6216318">:=</span>&nbsp;<span class="builtinfunc" id="6216321">new</span><span class="op" id="6216324">(</span><span class="ident" id="6216325">Dysymtab</span><span class="op" id="6216333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216338">st</span><span class="op" id="6216340">.</span><span class="ident" id="6216341">LoadBytes</span>&nbsp;<span class="op" id="6216351">=</span>&nbsp;<span class="ident" id="6216353">LoadBytes</span><span class="op" id="6216362">(</span><span class="ident" id="6216363">cmddat</span><span class="op" id="6216369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216374">st</span><span class="op" id="6216376">.</span><span class="ident" id="6216377">DysymtabCmd</span>&nbsp;<span class="op" id="6216389">=</span>&nbsp;<span class="ident" id="6216391">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216398">st</span><span class="op" id="6216400">.</span><span class="ident" id="6216401">IndirectSyms</span>&nbsp;<span class="op" id="6216414">=</span>&nbsp;<span class="ident" id="6216416">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216421">f</span><span class="op" id="6216422">.</span><span class="ident" id="6216423">Loads</span><span class="op" id="6216428">[</span><span class="ident" id="6216429">i</span><span class="op" id="6216430">]</span>&nbsp;<span class="op" id="6216432">=</span>&nbsp;<span class="ident" id="6216434">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216440">f</span><span class="op" id="6216441">.</span><span class="ident" id="6216442">Dysymtab</span>&nbsp;<span class="op" id="6216451">=</span>&nbsp;<span class="ident" id="6216453">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216459">case</span>&nbsp;<span class="ident" id="6216464">LoadCmdSegment</span><span class="op" id="6216478">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216483">var</span>&nbsp;<span class="ident" id="6216487">seg32</span>&nbsp;<span class="ident" id="6216493">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216506">b</span>&nbsp;<span class="op" id="6216508">:=</span>&nbsp;<span class="ident" id="6216511">bytes</span><span class="op" id="6216516">.</span><span class="ident" id="6216517">NewReader</span><span class="op" id="6216526">(</span><span class="ident" id="6216527">cmddat</span><span class="op" id="6216533">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216538">if</span>&nbsp;<span class="ident" id="6216541">err</span>&nbsp;<span class="op" id="6216545">:=</span>&nbsp;<span class="ident" id="6216548">binary</span><span class="op" id="6216554">.</span><span class="ident" id="6216555">Read</span><span class="op" id="6216559">(</span><span class="ident" id="6216560">b</span><span class="op" id="6216561">,</span>&nbsp;<span class="ident" id="6216563">bo</span><span class="op" id="6216565">,</span>&nbsp;<span class="op" id="6216567">&amp;</span><span class="ident" id="6216568">seg32</span><span class="op" id="6216573">)</span><span class="op" id="6216574">;</span>&nbsp;<span class="ident" id="6216576">err</span>&nbsp;<span class="op" id="6216580">!=</span>&nbsp;<span class="builtintype" id="6216583">nil</span>&nbsp;<span class="op" id="6216587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216593">return</span>&nbsp;<span class="builtintype" id="6216600">nil</span><span class="op" id="6216603">,</span>&nbsp;<span class="ident" id="6216605">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6216612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216617">s</span>&nbsp;<span class="op" id="6216619">=</span>&nbsp;<span class="builtinfunc" id="6216621">new</span><span class="op" id="6216624">(</span><span class="ident" id="6216625">Segment</span><span class="op" id="6216632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216637">s</span><span class="op" id="6216638">.</span><span class="ident" id="6216639">LoadBytes</span>&nbsp;<span class="op" id="6216649">=</span>&nbsp;<span class="ident" id="6216651">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216661">s</span><span class="op" id="6216662">.</span><span class="ident" id="6216663">Cmd</span>&nbsp;<span class="op" id="6216667">=</span>&nbsp;<span class="ident" id="6216669">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216676">s</span><span class="op" id="6216677">.</span><span class="ident" id="6216678">Len</span>&nbsp;<span class="op" id="6216682">=</span>&nbsp;<span class="ident" id="6216684">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216691">s</span><span class="op" id="6216692">.</span><span class="ident" id="6216693">Name</span>&nbsp;<span class="op" id="6216698">=</span>&nbsp;<span class="ident" id="6216700">cstring</span><span class="op" id="6216707">(</span><span class="ident" id="6216708">seg32</span><span class="op" id="6216713">.</span><span class="ident" id="6216714">Name</span><span class="op" id="6216718">[</span><span class="num" id="6216719">0</span><span class="op" id="6216720">:</span><span class="op" id="6216721">]</span><span class="op" id="6216722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216727">s</span><span class="op" id="6216728">.</span><span class="ident" id="6216729">Addr</span>&nbsp;<span class="op" id="6216734">=</span>&nbsp;<span class="ident" id="6216736">uint64</span><span class="op" id="6216742">(</span><span class="ident" id="6216743">seg32</span><span class="op" id="6216748">.</span><span class="ident" id="6216749">Addr</span><span class="op" id="6216753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216758">s</span><span class="op" id="6216759">.</span><span class="ident" id="6216760">Memsz</span>&nbsp;<span class="op" id="6216766">=</span>&nbsp;<span class="ident" id="6216768">uint64</span><span class="op" id="6216774">(</span><span class="ident" id="6216775">seg32</span><span class="op" id="6216780">.</span><span class="ident" id="6216781">Memsz</span><span class="op" id="6216786">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216791">s</span><span class="op" id="6216792">.</span><span class="ident" id="6216793">Offset</span>&nbsp;<span class="op" id="6216800">=</span>&nbsp;<span class="ident" id="6216802">uint64</span><span class="op" id="6216808">(</span><span class="ident" id="6216809">seg32</span><span class="op" id="6216814">.</span><span class="ident" id="6216815">Offset</span><span class="op" id="6216821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216826">s</span><span class="op" id="6216827">.</span><span class="ident" id="6216828">Filesz</span>&nbsp;<span class="op" id="6216835">=</span>&nbsp;<span class="ident" id="6216837">uint64</span><span class="op" id="6216843">(</span><span class="ident" id="6216844">seg32</span><span class="op" id="6216849">.</span><span class="ident" id="6216850">Filesz</span><span class="op" id="6216856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216861">s</span><span class="op" id="6216862">.</span><span class="ident" id="6216863">Maxprot</span>&nbsp;<span class="op" id="6216871">=</span>&nbsp;<span class="ident" id="6216873">seg32</span><span class="op" id="6216878">.</span><span class="ident" id="6216879">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216890">s</span><span class="op" id="6216891">.</span><span class="ident" id="6216892">Prot</span>&nbsp;<span class="op" id="6216897">=</span>&nbsp;<span class="ident" id="6216899">seg32</span><span class="op" id="6216904">.</span><span class="ident" id="6216905">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216913">s</span><span class="op" id="6216914">.</span><span class="ident" id="6216915">Nsect</span>&nbsp;<span class="op" id="6216921">=</span>&nbsp;<span class="ident" id="6216923">seg32</span><span class="op" id="6216928">.</span><span class="ident" id="6216929">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216938">s</span><span class="op" id="6216939">.</span><span class="ident" id="6216940">Flag</span>&nbsp;<span class="op" id="6216945">=</span>&nbsp;<span class="ident" id="6216947">seg32</span><span class="op" id="6216952">.</span><span class="ident" id="6216953">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6216961">f</span><span class="op" id="6216962">.</span><span class="ident" id="6216963">Loads</span><span class="op" id="6216968">[</span><span class="ident" id="6216969">i</span><span class="op" id="6216970">]</span>&nbsp;<span class="op" id="6216972">=</span>&nbsp;<span class="ident" id="6216974">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6216979">for</span>&nbsp;<span class="ident" id="6216983">i</span>&nbsp;<span class="op" id="6216985">:=</span>&nbsp;<span class="num" id="6216988">0</span><span class="op" id="6216989">;</span>&nbsp;<span class="ident" id="6216991">i</span>&nbsp;<span class="op" id="6216993">&lt;</span>&nbsp;<span class="builtintype" id="6216995">int</span><span class="op" id="6216998">(</span><span class="ident" id="6216999">s</span><span class="op" id="6217000">.</span><span class="ident" id="6217001">Nsect</span><span class="op" id="6217006">)</span><span class="op" id="6217007">;</span>&nbsp;<span class="ident" id="6217009">i</span><span class="op" id="6217010">++</span>&nbsp;<span class="op" id="6217013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217019">var</span>&nbsp;<span class="ident" id="6217023">sh32</span>&nbsp;<span class="ident" id="6217028">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217042">if</span>&nbsp;<span class="ident" id="6217045">err</span>&nbsp;<span class="op" id="6217049">:=</span>&nbsp;<span class="ident" id="6217052">binary</span><span class="op" id="6217058">.</span><span class="ident" id="6217059">Read</span><span class="op" id="6217063">(</span><span class="ident" id="6217064">b</span><span class="op" id="6217065">,</span>&nbsp;<span class="ident" id="6217067">bo</span><span class="op" id="6217069">,</span>&nbsp;<span class="op" id="6217071">&amp;</span><span class="ident" id="6217072">sh32</span><span class="op" id="6217076">)</span><span class="op" id="6217077">;</span>&nbsp;<span class="ident" id="6217079">err</span>&nbsp;<span class="op" id="6217083">!=</span>&nbsp;<span class="builtintype" id="6217086">nil</span>&nbsp;<span class="op" id="6217090">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217097">return</span>&nbsp;<span class="builtintype" id="6217104">nil</span><span class="op" id="6217107">,</span>&nbsp;<span class="ident" id="6217109">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6217117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217123">sh</span>&nbsp;<span class="op" id="6217126">:=</span>&nbsp;<span class="builtinfunc" id="6217129">new</span><span class="op" id="6217132">(</span><span class="ident" id="6217133">Section</span><span class="op" id="6217140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217146">sh</span><span class="op" id="6217148">.</span><span class="ident" id="6217149">Name</span>&nbsp;<span class="op" id="6217154">=</span>&nbsp;<span class="ident" id="6217156">cstring</span><span class="op" id="6217163">(</span><span class="ident" id="6217164">sh32</span><span class="op" id="6217168">.</span><span class="ident" id="6217169">Name</span><span class="op" id="6217173">[</span><span class="num" id="6217174">0</span><span class="op" id="6217175">:</span><span class="op" id="6217176">]</span><span class="op" id="6217177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217183">sh</span><span class="op" id="6217185">.</span><span class="ident" id="6217186">Seg</span>&nbsp;<span class="op" id="6217190">=</span>&nbsp;<span class="ident" id="6217192">cstring</span><span class="op" id="6217199">(</span><span class="ident" id="6217200">sh32</span><span class="op" id="6217204">.</span><span class="ident" id="6217205">Seg</span><span class="op" id="6217208">[</span><span class="num" id="6217209">0</span><span class="op" id="6217210">:</span><span class="op" id="6217211">]</span><span class="op" id="6217212">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217218">sh</span><span class="op" id="6217220">.</span><span class="ident" id="6217221">Addr</span>&nbsp;<span class="op" id="6217226">=</span>&nbsp;<span class="ident" id="6217228">uint64</span><span class="op" id="6217234">(</span><span class="ident" id="6217235">sh32</span><span class="op" id="6217239">.</span><span class="ident" id="6217240">Addr</span><span class="op" id="6217244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217250">sh</span><span class="op" id="6217252">.</span><span class="ident" id="6217253">Size</span>&nbsp;<span class="op" id="6217258">=</span>&nbsp;<span class="ident" id="6217260">uint64</span><span class="op" id="6217266">(</span><span class="ident" id="6217267">sh32</span><span class="op" id="6217271">.</span><span class="ident" id="6217272">Size</span><span class="op" id="6217276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217282">sh</span><span class="op" id="6217284">.</span><span class="ident" id="6217285">Offset</span>&nbsp;<span class="op" id="6217292">=</span>&nbsp;<span class="ident" id="6217294">sh32</span><span class="op" id="6217298">.</span><span class="ident" id="6217299">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217310">sh</span><span class="op" id="6217312">.</span><span class="ident" id="6217313">Align</span>&nbsp;<span class="op" id="6217319">=</span>&nbsp;<span class="ident" id="6217321">sh32</span><span class="op" id="6217325">.</span><span class="ident" id="6217326">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217336">sh</span><span class="op" id="6217338">.</span><span class="ident" id="6217339">Reloff</span>&nbsp;<span class="op" id="6217346">=</span>&nbsp;<span class="ident" id="6217348">sh32</span><span class="op" id="6217352">.</span><span class="ident" id="6217353">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217364">sh</span><span class="op" id="6217366">.</span><span class="ident" id="6217367">Nreloc</span>&nbsp;<span class="op" id="6217374">=</span>&nbsp;<span class="ident" id="6217376">sh32</span><span class="op" id="6217380">.</span><span class="ident" id="6217381">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217392">sh</span><span class="op" id="6217394">.</span><span class="ident" id="6217395">Flags</span>&nbsp;<span class="op" id="6217401">=</span>&nbsp;<span class="ident" id="6217403">sh32</span><span class="op" id="6217407">.</span><span class="ident" id="6217408">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217418">f</span><span class="op" id="6217419">.</span><span class="ident" id="6217420">pushSection</span><span class="op" id="6217431">(</span><span class="ident" id="6217432">sh</span><span class="op" id="6217434">,</span>&nbsp;<span class="ident" id="6217436">r</span><span class="op" id="6217437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6217442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217447">case</span>&nbsp;<span class="ident" id="6217452">LoadCmdSegment64</span><span class="op" id="6217468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217473">var</span>&nbsp;<span class="ident" id="6217477">seg64</span>&nbsp;<span class="ident" id="6217483">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217496">b</span>&nbsp;<span class="op" id="6217498">:=</span>&nbsp;<span class="ident" id="6217501">bytes</span><span class="op" id="6217506">.</span><span class="ident" id="6217507">NewReader</span><span class="op" id="6217516">(</span><span class="ident" id="6217517">cmddat</span><span class="op" id="6217523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217528">if</span>&nbsp;<span class="ident" id="6217531">err</span>&nbsp;<span class="op" id="6217535">:=</span>&nbsp;<span class="ident" id="6217538">binary</span><span class="op" id="6217544">.</span><span class="ident" id="6217545">Read</span><span class="op" id="6217549">(</span><span class="ident" id="6217550">b</span><span class="op" id="6217551">,</span>&nbsp;<span class="ident" id="6217553">bo</span><span class="op" id="6217555">,</span>&nbsp;<span class="op" id="6217557">&amp;</span><span class="ident" id="6217558">seg64</span><span class="op" id="6217563">)</span><span class="op" id="6217564">;</span>&nbsp;<span class="ident" id="6217566">err</span>&nbsp;<span class="op" id="6217570">!=</span>&nbsp;<span class="builtintype" id="6217573">nil</span>&nbsp;<span class="op" id="6217577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217583">return</span>&nbsp;<span class="builtintype" id="6217590">nil</span><span class="op" id="6217593">,</span>&nbsp;<span class="ident" id="6217595">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6217602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217607">s</span>&nbsp;<span class="op" id="6217609">=</span>&nbsp;<span class="builtinfunc" id="6217611">new</span><span class="op" id="6217614">(</span><span class="ident" id="6217615">Segment</span><span class="op" id="6217622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217627">s</span><span class="op" id="6217628">.</span><span class="ident" id="6217629">LoadBytes</span>&nbsp;<span class="op" id="6217639">=</span>&nbsp;<span class="ident" id="6217641">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217651">s</span><span class="op" id="6217652">.</span><span class="ident" id="6217653">Cmd</span>&nbsp;<span class="op" id="6217657">=</span>&nbsp;<span class="ident" id="6217659">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217666">s</span><span class="op" id="6217667">.</span><span class="ident" id="6217668">Len</span>&nbsp;<span class="op" id="6217672">=</span>&nbsp;<span class="ident" id="6217674">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217681">s</span><span class="op" id="6217682">.</span><span class="ident" id="6217683">Name</span>&nbsp;<span class="op" id="6217688">=</span>&nbsp;<span class="ident" id="6217690">cstring</span><span class="op" id="6217697">(</span><span class="ident" id="6217698">seg64</span><span class="op" id="6217703">.</span><span class="ident" id="6217704">Name</span><span class="op" id="6217708">[</span><span class="num" id="6217709">0</span><span class="op" id="6217710">:</span><span class="op" id="6217711">]</span><span class="op" id="6217712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217717">s</span><span class="op" id="6217718">.</span><span class="ident" id="6217719">Addr</span>&nbsp;<span class="op" id="6217724">=</span>&nbsp;<span class="ident" id="6217726">seg64</span><span class="op" id="6217731">.</span><span class="ident" id="6217732">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217740">s</span><span class="op" id="6217741">.</span><span class="ident" id="6217742">Memsz</span>&nbsp;<span class="op" id="6217748">=</span>&nbsp;<span class="ident" id="6217750">seg64</span><span class="op" id="6217755">.</span><span class="ident" id="6217756">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217765">s</span><span class="op" id="6217766">.</span><span class="ident" id="6217767">Offset</span>&nbsp;<span class="op" id="6217774">=</span>&nbsp;<span class="ident" id="6217776">seg64</span><span class="op" id="6217781">.</span><span class="ident" id="6217782">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217792">s</span><span class="op" id="6217793">.</span><span class="ident" id="6217794">Filesz</span>&nbsp;<span class="op" id="6217801">=</span>&nbsp;<span class="ident" id="6217803">seg64</span><span class="op" id="6217808">.</span><span class="ident" id="6217809">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217819">s</span><span class="op" id="6217820">.</span><span class="ident" id="6217821">Maxprot</span>&nbsp;<span class="op" id="6217829">=</span>&nbsp;<span class="ident" id="6217831">seg64</span><span class="op" id="6217836">.</span><span class="ident" id="6217837">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217848">s</span><span class="op" id="6217849">.</span><span class="ident" id="6217850">Prot</span>&nbsp;<span class="op" id="6217855">=</span>&nbsp;<span class="ident" id="6217857">seg64</span><span class="op" id="6217862">.</span><span class="ident" id="6217863">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217871">s</span><span class="op" id="6217872">.</span><span class="ident" id="6217873">Nsect</span>&nbsp;<span class="op" id="6217879">=</span>&nbsp;<span class="ident" id="6217881">seg64</span><span class="op" id="6217886">.</span><span class="ident" id="6217887">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217896">s</span><span class="op" id="6217897">.</span><span class="ident" id="6217898">Flag</span>&nbsp;<span class="op" id="6217903">=</span>&nbsp;<span class="ident" id="6217905">seg64</span><span class="op" id="6217910">.</span><span class="ident" id="6217911">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6217919">f</span><span class="op" id="6217920">.</span><span class="ident" id="6217921">Loads</span><span class="op" id="6217926">[</span><span class="ident" id="6217927">i</span><span class="op" id="6217928">]</span>&nbsp;<span class="op" id="6217930">=</span>&nbsp;<span class="ident" id="6217932">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217937">for</span>&nbsp;<span class="ident" id="6217941">i</span>&nbsp;<span class="op" id="6217943">:=</span>&nbsp;<span class="num" id="6217946">0</span><span class="op" id="6217947">;</span>&nbsp;<span class="ident" id="6217949">i</span>&nbsp;<span class="op" id="6217951">&lt;</span>&nbsp;<span class="builtintype" id="6217953">int</span><span class="op" id="6217956">(</span><span class="ident" id="6217957">s</span><span class="op" id="6217958">.</span><span class="ident" id="6217959">Nsect</span><span class="op" id="6217964">)</span><span class="op" id="6217965">;</span>&nbsp;<span class="ident" id="6217967">i</span><span class="op" id="6217968">++</span>&nbsp;<span class="op" id="6217971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6217977">var</span>&nbsp;<span class="ident" id="6217981">sh64</span>&nbsp;<span class="ident" id="6217986">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218000">if</span>&nbsp;<span class="ident" id="6218003">err</span>&nbsp;<span class="op" id="6218007">:=</span>&nbsp;<span class="ident" id="6218010">binary</span><span class="op" id="6218016">.</span><span class="ident" id="6218017">Read</span><span class="op" id="6218021">(</span><span class="ident" id="6218022">b</span><span class="op" id="6218023">,</span>&nbsp;<span class="ident" id="6218025">bo</span><span class="op" id="6218027">,</span>&nbsp;<span class="op" id="6218029">&amp;</span><span class="ident" id="6218030">sh64</span><span class="op" id="6218034">)</span><span class="op" id="6218035">;</span>&nbsp;<span class="ident" id="6218037">err</span>&nbsp;<span class="op" id="6218041">!=</span>&nbsp;<span class="builtintype" id="6218044">nil</span>&nbsp;<span class="op" id="6218048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218055">return</span>&nbsp;<span class="builtintype" id="6218062">nil</span><span class="op" id="6218065">,</span>&nbsp;<span class="ident" id="6218067">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218075">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218081">sh</span>&nbsp;<span class="op" id="6218084">:=</span>&nbsp;<span class="builtinfunc" id="6218087">new</span><span class="op" id="6218090">(</span><span class="ident" id="6218091">Section</span><span class="op" id="6218098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218104">sh</span><span class="op" id="6218106">.</span><span class="ident" id="6218107">Name</span>&nbsp;<span class="op" id="6218112">=</span>&nbsp;<span class="ident" id="6218114">cstring</span><span class="op" id="6218121">(</span><span class="ident" id="6218122">sh64</span><span class="op" id="6218126">.</span><span class="ident" id="6218127">Name</span><span class="op" id="6218131">[</span><span class="num" id="6218132">0</span><span class="op" id="6218133">:</span><span class="op" id="6218134">]</span><span class="op" id="6218135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218141">sh</span><span class="op" id="6218143">.</span><span class="ident" id="6218144">Seg</span>&nbsp;<span class="op" id="6218148">=</span>&nbsp;<span class="ident" id="6218150">cstring</span><span class="op" id="6218157">(</span><span class="ident" id="6218158">sh64</span><span class="op" id="6218162">.</span><span class="ident" id="6218163">Seg</span><span class="op" id="6218166">[</span><span class="num" id="6218167">0</span><span class="op" id="6218168">:</span><span class="op" id="6218169">]</span><span class="op" id="6218170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218176">sh</span><span class="op" id="6218178">.</span><span class="ident" id="6218179">Addr</span>&nbsp;<span class="op" id="6218184">=</span>&nbsp;<span class="ident" id="6218186">sh64</span><span class="op" id="6218190">.</span><span class="ident" id="6218191">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218200">sh</span><span class="op" id="6218202">.</span><span class="ident" id="6218203">Size</span>&nbsp;<span class="op" id="6218208">=</span>&nbsp;<span class="ident" id="6218210">sh64</span><span class="op" id="6218214">.</span><span class="ident" id="6218215">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218224">sh</span><span class="op" id="6218226">.</span><span class="ident" id="6218227">Offset</span>&nbsp;<span class="op" id="6218234">=</span>&nbsp;<span class="ident" id="6218236">sh64</span><span class="op" id="6218240">.</span><span class="ident" id="6218241">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218252">sh</span><span class="op" id="6218254">.</span><span class="ident" id="6218255">Align</span>&nbsp;<span class="op" id="6218261">=</span>&nbsp;<span class="ident" id="6218263">sh64</span><span class="op" id="6218267">.</span><span class="ident" id="6218268">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218278">sh</span><span class="op" id="6218280">.</span><span class="ident" id="6218281">Reloff</span>&nbsp;<span class="op" id="6218288">=</span>&nbsp;<span class="ident" id="6218290">sh64</span><span class="op" id="6218294">.</span><span class="ident" id="6218295">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218306">sh</span><span class="op" id="6218308">.</span><span class="ident" id="6218309">Nreloc</span>&nbsp;<span class="op" id="6218316">=</span>&nbsp;<span class="ident" id="6218318">sh64</span><span class="op" id="6218322">.</span><span class="ident" id="6218323">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218334">sh</span><span class="op" id="6218336">.</span><span class="ident" id="6218337">Flags</span>&nbsp;<span class="op" id="6218343">=</span>&nbsp;<span class="ident" id="6218345">sh64</span><span class="op" id="6218349">.</span><span class="ident" id="6218350">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218360">f</span><span class="op" id="6218361">.</span><span class="ident" id="6218362">pushSection</span><span class="op" id="6218373">(</span><span class="ident" id="6218374">sh</span><span class="op" id="6218376">,</span>&nbsp;<span class="ident" id="6218378">r</span><span class="op" id="6218379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218392">if</span>&nbsp;<span class="ident" id="6218395">s</span>&nbsp;<span class="op" id="6218397">!=</span>&nbsp;<span class="builtintype" id="6218400">nil</span>&nbsp;<span class="op" id="6218404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218409">s</span><span class="op" id="6218410">.</span><span class="ident" id="6218411">sr</span>&nbsp;<span class="op" id="6218414">=</span>&nbsp;<span class="ident" id="6218416">io</span><span class="op" id="6218418">.</span><span class="ident" id="6218419">NewSectionReader</span><span class="op" id="6218435">(</span><span class="ident" id="6218436">r</span><span class="op" id="6218437">,</span>&nbsp;<span class="ident" id="6218439">int64</span><span class="op" id="6218444">(</span><span class="ident" id="6218445">s</span><span class="op" id="6218446">.</span><span class="ident" id="6218447">Offset</span><span class="op" id="6218453">)</span><span class="op" id="6218454">,</span>&nbsp;<span class="ident" id="6218456">int64</span><span class="op" id="6218461">(</span><span class="ident" id="6218462">s</span><span class="op" id="6218463">.</span><span class="ident" id="6218464">Filesz</span><span class="op" id="6218470">)</span><span class="op" id="6218471">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218476">s</span><span class="op" id="6218477">.</span><span class="ident" id="6218478">ReaderAt</span>&nbsp;<span class="op" id="6218487">=</span>&nbsp;<span class="ident" id="6218489">s</span><span class="op" id="6218490">.</span><span class="ident" id="6218491">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218502">return</span>&nbsp;<span class="ident" id="6218509">f</span><span class="op" id="6218510">,</span>&nbsp;<span class="builtintype" id="6218512">nil</span><br>
<span class="lineno"></span><span class="op" id="6218516">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6218519">func</span>&nbsp;<span class="op" id="6218524">(</span><span class="ident" id="6218525">f</span>&nbsp;<span class="op" id="6218527">*</span><span class="ident" id="6218528">File</span><span class="op" id="6218532">)</span>&nbsp;<span class="ident" id="6218534">parseSymtab</span><span class="op" id="6218545">(</span><span class="ident" id="6218546">symdat</span><span class="op" id="6218552">,</span>&nbsp;<span class="ident" id="6218554">strtab</span><span class="op" id="6218560">,</span>&nbsp;<span class="ident" id="6218562">cmddat</span>&nbsp;<span class="op" id="6218569">[</span><span class="op" id="6218570">]</span><span class="builtintype" id="6218571">byte</span><span class="op" id="6218575">,</span>&nbsp;<span class="ident" id="6218577">hdr</span>&nbsp;<span class="op" id="6218581">*</span><span class="ident" id="6218582">SymtabCmd</span><span class="op" id="6218591">,</span>&nbsp;<span class="ident" id="6218593">offset</span>&nbsp;<span class="ident" id="6218600">int64</span><span class="op" id="6218605">)</span>&nbsp;<span class="op" id="6218607">(</span><span class="op" id="6218608">*</span><span class="ident" id="6218609">Symtab</span><span class="op" id="6218615">,</span>&nbsp;<span class="builtintype" id="6218617">error</span><span class="op" id="6218622">)</span>&nbsp;<span class="op" id="6218624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218627">bo</span>&nbsp;<span class="op" id="6218630">:=</span>&nbsp;<span class="ident" id="6218633">f</span><span class="op" id="6218634">.</span><span class="ident" id="6218635">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218646">symtab</span>&nbsp;<span class="op" id="6218653">:=</span>&nbsp;<span class="builtinfunc" id="6218656">make</span><span class="op" id="6218660">(</span><span class="op" id="6218661">[</span><span class="op" id="6218662">]</span><span class="ident" id="6218663">Symbol</span><span class="op" id="6218669">,</span>&nbsp;<span class="ident" id="6218671">hdr</span><span class="op" id="6218674">.</span><span class="ident" id="6218675">Nsyms</span><span class="op" id="6218680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218683">b</span>&nbsp;<span class="op" id="6218685">:=</span>&nbsp;<span class="ident" id="6218688">bytes</span><span class="op" id="6218693">.</span><span class="ident" id="6218694">NewReader</span><span class="op" id="6218703">(</span><span class="ident" id="6218704">symdat</span><span class="op" id="6218710">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218713">for</span>&nbsp;<span class="ident" id="6218717">i</span>&nbsp;<span class="op" id="6218719">:=</span>&nbsp;<span class="keyword" id="6218722">range</span>&nbsp;<span class="ident" id="6218728">symtab</span>&nbsp;<span class="op" id="6218735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218739">var</span>&nbsp;<span class="ident" id="6218743">n</span>&nbsp;<span class="ident" id="6218745">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218755">if</span>&nbsp;<span class="ident" id="6218758">f</span><span class="op" id="6218759">.</span><span class="ident" id="6218760">Magic</span>&nbsp;<span class="op" id="6218766">==</span>&nbsp;<span class="ident" id="6218769">Magic64</span>&nbsp;<span class="op" id="6218777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218782">if</span>&nbsp;<span class="ident" id="6218785">err</span>&nbsp;<span class="op" id="6218789">:=</span>&nbsp;<span class="ident" id="6218792">binary</span><span class="op" id="6218798">.</span><span class="ident" id="6218799">Read</span><span class="op" id="6218803">(</span><span class="ident" id="6218804">b</span><span class="op" id="6218805">,</span>&nbsp;<span class="ident" id="6218807">bo</span><span class="op" id="6218809">,</span>&nbsp;<span class="op" id="6218811">&amp;</span><span class="ident" id="6218812">n</span><span class="op" id="6218813">)</span><span class="op" id="6218814">;</span>&nbsp;<span class="ident" id="6218816">err</span>&nbsp;<span class="op" id="6218820">!=</span>&nbsp;<span class="builtintype" id="6218823">nil</span>&nbsp;<span class="op" id="6218827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218833">return</span>&nbsp;<span class="builtintype" id="6218840">nil</span><span class="op" id="6218843">,</span>&nbsp;<span class="ident" id="6218845">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218856">}</span>&nbsp;<span class="keyword" id="6218858">else</span>&nbsp;<span class="op" id="6218863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218868">var</span>&nbsp;<span class="ident" id="6218872">n32</span>&nbsp;<span class="ident" id="6218876">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218887">if</span>&nbsp;<span class="ident" id="6218890">err</span>&nbsp;<span class="op" id="6218894">:=</span>&nbsp;<span class="ident" id="6218897">binary</span><span class="op" id="6218903">.</span><span class="ident" id="6218904">Read</span><span class="op" id="6218908">(</span><span class="ident" id="6218909">b</span><span class="op" id="6218910">,</span>&nbsp;<span class="ident" id="6218912">bo</span><span class="op" id="6218914">,</span>&nbsp;<span class="op" id="6218916">&amp;</span><span class="ident" id="6218917">n32</span><span class="op" id="6218920">)</span><span class="op" id="6218921">;</span>&nbsp;<span class="ident" id="6218923">err</span>&nbsp;<span class="op" id="6218927">!=</span>&nbsp;<span class="builtintype" id="6218930">nil</span>&nbsp;<span class="op" id="6218934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6218940">return</span>&nbsp;<span class="builtintype" id="6218947">nil</span><span class="op" id="6218950">,</span>&nbsp;<span class="ident" id="6218952">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6218959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218964">n</span><span class="op" id="6218965">.</span><span class="ident" id="6218966">Name</span>&nbsp;<span class="op" id="6218971">=</span>&nbsp;<span class="ident" id="6218973">n32</span><span class="op" id="6218976">.</span><span class="ident" id="6218977">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6218985">n</span><span class="op" id="6218986">.</span><span class="ident" id="6218987">Type</span>&nbsp;<span class="op" id="6218992">=</span>&nbsp;<span class="ident" id="6218994">n32</span><span class="op" id="6218997">.</span><span class="ident" id="6218998">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219006">n</span><span class="op" id="6219007">.</span><span class="ident" id="6219008">Sect</span>&nbsp;<span class="op" id="6219013">=</span>&nbsp;<span class="ident" id="6219015">n32</span><span class="op" id="6219018">.</span><span class="ident" id="6219019">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219027">n</span><span class="op" id="6219028">.</span><span class="ident" id="6219029">Desc</span>&nbsp;<span class="op" id="6219034">=</span>&nbsp;<span class="ident" id="6219036">n32</span><span class="op" id="6219039">.</span><span class="ident" id="6219040">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219048">n</span><span class="op" id="6219049">.</span><span class="ident" id="6219050">Value</span>&nbsp;<span class="op" id="6219056">=</span>&nbsp;<span class="ident" id="6219058">uint64</span><span class="op" id="6219064">(</span><span class="ident" id="6219065">n32</span><span class="op" id="6219068">.</span><span class="ident" id="6219069">Value</span><span class="op" id="6219074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219082">sym</span>&nbsp;<span class="op" id="6219086">:=</span>&nbsp;<span class="op" id="6219089">&amp;</span><span class="ident" id="6219090">symtab</span><span class="op" id="6219096">[</span><span class="ident" id="6219097">i</span><span class="op" id="6219098">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219102">if</span>&nbsp;<span class="ident" id="6219105">n</span><span class="op" id="6219106">.</span><span class="ident" id="6219107">Name</span>&nbsp;<span class="op" id="6219112">&gt;=</span>&nbsp;<span class="builtintype" id="6219115">uint32</span><span class="op" id="6219121">(</span><span class="builtinfunc" id="6219122">len</span><span class="op" id="6219125">(</span><span class="ident" id="6219126">strtab</span><span class="op" id="6219132">)</span><span class="op" id="6219133">)</span>&nbsp;<span class="op" id="6219135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219140">return</span>&nbsp;<span class="builtintype" id="6219147">nil</span><span class="op" id="6219150">,</span>&nbsp;<span class="op" id="6219152">&amp;</span><span class="ident" id="6219153">FormatError</span><span class="op" id="6219164">{</span><span class="ident" id="6219165">offset</span><span class="op" id="6219171">,</span>&nbsp;<span class="string" id="6219173">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6219203">,</span>&nbsp;<span class="ident" id="6219205">n</span><span class="op" id="6219206">.</span><span class="ident" id="6219207">Name</span><span class="op" id="6219211">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219219">sym</span><span class="op" id="6219222">.</span><span class="ident" id="6219223">Name</span>&nbsp;<span class="op" id="6219228">=</span>&nbsp;<span class="ident" id="6219230">cstring</span><span class="op" id="6219237">(</span><span class="ident" id="6219238">strtab</span><span class="op" id="6219244">[</span><span class="ident" id="6219245">n</span><span class="op" id="6219246">.</span><span class="ident" id="6219247">Name</span><span class="op" id="6219251">:</span><span class="op" id="6219252">]</span><span class="op" id="6219253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219257">sym</span><span class="op" id="6219260">.</span><span class="ident" id="6219261">Type</span>&nbsp;<span class="op" id="6219266">=</span>&nbsp;<span class="ident" id="6219268">n</span><span class="op" id="6219269">.</span><span class="ident" id="6219270">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219277">sym</span><span class="op" id="6219280">.</span><span class="ident" id="6219281">Sect</span>&nbsp;<span class="op" id="6219286">=</span>&nbsp;<span class="ident" id="6219288">n</span><span class="op" id="6219289">.</span><span class="ident" id="6219290">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219297">sym</span><span class="op" id="6219300">.</span><span class="ident" id="6219301">Desc</span>&nbsp;<span class="op" id="6219306">=</span>&nbsp;<span class="ident" id="6219308">n</span><span class="op" id="6219309">.</span><span class="ident" id="6219310">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219317">sym</span><span class="op" id="6219320">.</span><span class="ident" id="6219321">Value</span>&nbsp;<span class="op" id="6219327">=</span>&nbsp;<span class="ident" id="6219329">n</span><span class="op" id="6219330">.</span><span class="ident" id="6219331">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219341">st</span>&nbsp;<span class="op" id="6219344">:=</span>&nbsp;<span class="builtinfunc" id="6219347">new</span><span class="op" id="6219350">(</span><span class="ident" id="6219351">Symtab</span><span class="op" id="6219357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219360">st</span><span class="op" id="6219362">.</span><span class="ident" id="6219363">LoadBytes</span>&nbsp;<span class="op" id="6219373">=</span>&nbsp;<span class="ident" id="6219375">LoadBytes</span><span class="op" id="6219384">(</span><span class="ident" id="6219385">cmddat</span><span class="op" id="6219391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219394">st</span><span class="op" id="6219396">.</span><span class="ident" id="6219397">Syms</span>&nbsp;<span class="op" id="6219402">=</span>&nbsp;<span class="ident" id="6219404">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219412">return</span>&nbsp;<span class="ident" id="6219419">st</span><span class="op" id="6219421">,</span>&nbsp;<span class="builtintype" id="6219423">nil</span><br>
<span class="lineno"></span><span class="op" id="6219427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6219430">func</span>&nbsp;<span class="op" id="6219435">(</span><span class="ident" id="6219436">f</span>&nbsp;<span class="op" id="6219438">*</span><span class="ident" id="6219439">File</span><span class="op" id="6219443">)</span>&nbsp;<span class="ident" id="6219445">pushSection</span><span class="op" id="6219456">(</span><span class="ident" id="6219457">sh</span>&nbsp;<span class="op" id="6219460">*</span><span class="ident" id="6219461">Section</span><span class="op" id="6219468">,</span>&nbsp;<span class="ident" id="6219470">r</span>&nbsp;<span class="ident" id="6219472">io</span><span class="op" id="6219474">.</span><span class="ident" id="6219475">ReaderAt</span><span class="op" id="6219483">)</span>&nbsp;<span class="op" id="6219485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219488">f</span><span class="op" id="6219489">.</span><span class="ident" id="6219490">Sections</span>&nbsp;<span class="op" id="6219499">=</span>&nbsp;<span class="builtinfunc" id="6219501">append</span><span class="op" id="6219507">(</span><span class="ident" id="6219508">f</span><span class="op" id="6219509">.</span><span class="ident" id="6219510">Sections</span><span class="op" id="6219518">,</span>&nbsp;<span class="ident" id="6219520">sh</span><span class="op" id="6219522">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219525">sh</span><span class="op" id="6219527">.</span><span class="ident" id="6219528">sr</span>&nbsp;<span class="op" id="6219531">=</span>&nbsp;<span class="ident" id="6219533">io</span><span class="op" id="6219535">.</span><span class="ident" id="6219536">NewSectionReader</span><span class="op" id="6219552">(</span><span class="ident" id="6219553">r</span><span class="op" id="6219554">,</span>&nbsp;<span class="ident" id="6219556">int64</span><span class="op" id="6219561">(</span><span class="ident" id="6219562">sh</span><span class="op" id="6219564">.</span><span class="ident" id="6219565">Offset</span><span class="op" id="6219571">)</span><span class="op" id="6219572">,</span>&nbsp;<span class="ident" id="6219574">int64</span><span class="op" id="6219579">(</span><span class="ident" id="6219580">sh</span><span class="op" id="6219582">.</span><span class="ident" id="6219583">Size</span><span class="op" id="6219587">)</span><span class="op" id="6219588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6219591">sh</span><span class="op" id="6219593">.</span><span class="ident" id="6219594">ReaderAt</span>&nbsp;<span class="op" id="6219603">=</span>&nbsp;<span class="ident" id="6219605">sh</span><span class="op" id="6219607">.</span><span class="ident" id="6219608">sr</span><br>
<span class="lineno"></span><span class="op" id="6219611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6219614">func</span>&nbsp;<span class="ident" id="6219619">cstring</span><span class="op" id="6219626">(</span><span class="ident" id="6219627">b</span>&nbsp;<span class="op" id="6219629">[</span><span class="op" id="6219630">]</span><span class="builtintype" id="6219631">byte</span><span class="op" id="6219635">)</span>&nbsp;<span class="builtintype" id="6219637">string</span>&nbsp;<span class="op" id="6219644">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219647">var</span>&nbsp;<span class="ident" id="6219651">i</span>&nbsp;<span class="builtintype" id="6219653">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219658">for</span>&nbsp;<span class="ident" id="6219662">i</span>&nbsp;<span class="op" id="6219664">=</span>&nbsp;<span class="num" id="6219666">0</span><span class="op" id="6219667">;</span>&nbsp;<span class="ident" id="6219669">i</span>&nbsp;<span class="op" id="6219671">&lt;</span>&nbsp;<span class="builtinfunc" id="6219673">len</span><span class="op" id="6219676">(</span><span class="ident" id="6219677">b</span><span class="op" id="6219678">)</span>&nbsp;<span class="op" id="6219680">&amp;&amp;</span>&nbsp;<span class="ident" id="6219683">b</span><span class="op" id="6219684">[</span><span class="ident" id="6219685">i</span><span class="op" id="6219686">]</span>&nbsp;<span class="op" id="6219688">!=</span>&nbsp;<span class="num" id="6219691">0</span><span class="op" id="6219692">;</span>&nbsp;<span class="ident" id="6219694">i</span><span class="op" id="6219695">++</span>&nbsp;<span class="op" id="6219698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219704">return</span>&nbsp;<span class="builtintype" id="6219711">string</span><span class="op" id="6219717">(</span><span class="ident" id="6219718">b</span><span class="op" id="6219719">[</span><span class="num" id="6219720">0</span><span class="op" id="6219721">:</span><span class="ident" id="6219722">i</span><span class="op" id="6219723">]</span><span class="op" id="6219724">)</span><br>
<span class="lineno"></span><span class="op" id="6219726">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6219729">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6219821">func</span>&nbsp;<span class="op" id="6219826">(</span><span class="ident" id="6219827">f</span>&nbsp;<span class="op" id="6219829">*</span><span class="ident" id="6219830">File</span><span class="op" id="6219834">)</span>&nbsp;<span class="ident" id="6219836">Segment</span><span class="op" id="6219843">(</span><span class="ident" id="6219844">name</span>&nbsp;<span class="builtintype" id="6219849">string</span><span class="op" id="6219855">)</span>&nbsp;<span class="op" id="6219857">*</span><span class="ident" id="6219858">Segment</span>&nbsp;<span class="op" id="6219866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219869">for</span>&nbsp;<span class="ident" id="6219873">_</span><span class="op" id="6219874">,</span>&nbsp;<span class="ident" id="6219876">l</span>&nbsp;<span class="op" id="6219878">:=</span>&nbsp;<span class="keyword" id="6219881">range</span>&nbsp;<span class="ident" id="6219887">f</span><span class="op" id="6219888">.</span><span class="ident" id="6219889">Loads</span>&nbsp;<span class="op" id="6219895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219899">if</span>&nbsp;<span class="ident" id="6219902">s</span><span class="op" id="6219903">,</span>&nbsp;<span class="ident" id="6219905">ok</span>&nbsp;<span class="op" id="6219908">:=</span>&nbsp;<span class="ident" id="6219911">l</span><span class="op" id="6219912">.</span><span class="op" id="6219913">(</span><span class="op" id="6219914">*</span><span class="ident" id="6219915">Segment</span><span class="op" id="6219922">)</span><span class="op" id="6219923">;</span>&nbsp;<span class="ident" id="6219925">ok</span>&nbsp;<span class="op" id="6219928">&amp;&amp;</span>&nbsp;<span class="ident" id="6219931">s</span><span class="op" id="6219932">.</span><span class="ident" id="6219933">Name</span>&nbsp;<span class="op" id="6219938">==</span>&nbsp;<span class="ident" id="6219941">name</span>&nbsp;<span class="op" id="6219946">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219951">return</span>&nbsp;<span class="ident" id="6219958">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6219965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6219968">return</span>&nbsp;<span class="builtintype" id="6219975">nil</span><br>
<span class="lineno"></span><span class="op" id="6219979">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6219982">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6220058">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6220077">func</span>&nbsp;<span class="op" id="6220082">(</span><span class="ident" id="6220083">f</span>&nbsp;<span class="op" id="6220085">*</span><span class="ident" id="6220086">File</span><span class="op" id="6220090">)</span>&nbsp;<span class="ident" id="6220092">Section</span><span class="op" id="6220099">(</span><span class="ident" id="6220100">name</span>&nbsp;<span class="builtintype" id="6220105">string</span><span class="op" id="6220111">)</span>&nbsp;<span class="op" id="6220113">*</span><span class="ident" id="6220114">Section</span>&nbsp;<span class="op" id="6220122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220125">for</span>&nbsp;<span class="ident" id="6220129">_</span><span class="op" id="6220130">,</span>&nbsp;<span class="ident" id="6220132">s</span>&nbsp;<span class="op" id="6220134">:=</span>&nbsp;<span class="keyword" id="6220137">range</span>&nbsp;<span class="ident" id="6220143">f</span><span class="op" id="6220144">.</span><span class="ident" id="6220145">Sections</span>&nbsp;<span class="op" id="6220154">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220158">if</span>&nbsp;<span class="ident" id="6220161">s</span><span class="op" id="6220162">.</span><span class="ident" id="6220163">Name</span>&nbsp;<span class="op" id="6220168">==</span>&nbsp;<span class="ident" id="6220171">name</span>&nbsp;<span class="op" id="6220176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220181">return</span>&nbsp;<span class="ident" id="6220188">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6220192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6220195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220198">return</span>&nbsp;<span class="builtintype" id="6220205">nil</span><br>
<span class="lineno">470</span><span class="op" id="6220209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6220212">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6220278">func</span>&nbsp;<span class="op" id="6220283">(</span><span class="ident" id="6220284">f</span>&nbsp;<span class="op" id="6220286">*</span><span class="ident" id="6220287">File</span><span class="op" id="6220291">)</span>&nbsp;<span class="ident" id="6220293">DWARF</span><span class="op" id="6220298">(</span><span class="op" id="6220299">)</span>&nbsp;<span class="op" id="6220301">(</span><span class="op" id="6220302">*</span><span class="ident" id="6220303">dwarf</span><span class="op" id="6220308">.</span><span class="ident" id="6220309">Data</span><span class="op" id="6220313">,</span>&nbsp;<span class="builtintype" id="6220315">error</span><span class="op" id="6220320">)</span>&nbsp;<span class="op" id="6220322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6220325">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6220376">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6220431">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220490">var</span>&nbsp;<span class="ident" id="6220494">names</span>&nbsp;<span class="op" id="6220500">=</span>&nbsp;<span class="op" id="6220502">[</span><span class="op" id="6220503">...</span><span class="op" id="6220506">]</span><span class="builtintype" id="6220507">string</span><span class="op" id="6220513">{</span><span class="string" id="6220514">&#34;abbrev&#34;</span><span class="op" id="6220522">,</span>&nbsp;<span class="string" id="6220524">&#34;info&#34;</span><span class="op" id="6220530">,</span>&nbsp;<span class="string" id="6220532">&#34;str&#34;</span><span class="op" id="6220537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220540">var</span>&nbsp;<span class="ident" id="6220544">dat</span>&nbsp;<span class="op" id="6220548">[</span><span class="builtinfunc" id="6220549">len</span><span class="op" id="6220552">(</span><span class="ident" id="6220553">names</span><span class="op" id="6220558">)</span><span class="op" id="6220559">]</span><span class="op" id="6220560">[</span><span class="op" id="6220561">]</span><span class="builtintype" id="6220562">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220568">for</span>&nbsp;<span class="ident" id="6220572">i</span><span class="op" id="6220573">,</span>&nbsp;<span class="ident" id="6220575">name</span>&nbsp;<span class="op" id="6220580">:=</span>&nbsp;<span class="keyword" id="6220583">range</span>&nbsp;<span class="ident" id="6220589">names</span>&nbsp;<span class="op" id="6220595">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6220599">name</span>&nbsp;<span class="op" id="6220604">=</span>&nbsp;<span class="string" id="6220606">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6220617">+</span>&nbsp;<span class="ident" id="6220619">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6220626">s</span>&nbsp;<span class="op" id="6220628">:=</span>&nbsp;<span class="ident" id="6220631">f</span><span class="op" id="6220632">.</span><span class="ident" id="6220633">Section</span><span class="op" id="6220640">(</span><span class="ident" id="6220641">name</span><span class="op" id="6220645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220649">if</span>&nbsp;<span class="ident" id="6220652">s</span>&nbsp;<span class="op" id="6220654">==</span>&nbsp;<span class="builtintype" id="6220657">nil</span>&nbsp;<span class="op" id="6220661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220666">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6220677">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6220681">b</span><span class="op" id="6220682">,</span>&nbsp;<span class="ident" id="6220684">err</span>&nbsp;<span class="op" id="6220688">:=</span>&nbsp;<span class="ident" id="6220691">s</span><span class="op" id="6220692">.</span><span class="ident" id="6220693">Data</span><span class="op" id="6220697">(</span><span class="op" id="6220698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220702">if</span>&nbsp;<span class="ident" id="6220705">err</span>&nbsp;<span class="op" id="6220709">!=</span>&nbsp;<span class="builtintype" id="6220712">nil</span>&nbsp;<span class="op" id="6220716">&amp;&amp;</span>&nbsp;<span class="ident" id="6220719">uint64</span><span class="op" id="6220725">(</span><span class="builtinfunc" id="6220726">len</span><span class="op" id="6220729">(</span><span class="ident" id="6220730">b</span><span class="op" id="6220731">)</span><span class="op" id="6220732">)</span>&nbsp;<span class="op" id="6220734">&lt;</span>&nbsp;<span class="ident" id="6220736">s</span><span class="op" id="6220737">.</span><span class="ident" id="6220738">Size</span>&nbsp;<span class="op" id="6220743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220748">return</span>&nbsp;<span class="builtintype" id="6220755">nil</span><span class="op" id="6220758">,</span>&nbsp;<span class="ident" id="6220760">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6220766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6220770">dat</span><span class="op" id="6220773">[</span><span class="ident" id="6220774">i</span><span class="op" id="6220775">]</span>&nbsp;<span class="op" id="6220777">=</span>&nbsp;<span class="ident" id="6220779">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6220782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6220786">abbrev</span><span class="op" id="6220792">,</span>&nbsp;<span class="ident" id="6220794">info</span><span class="op" id="6220798">,</span>&nbsp;<span class="ident" id="6220800">str</span>&nbsp;<span class="op" id="6220804">:=</span>&nbsp;<span class="ident" id="6220807">dat</span><span class="op" id="6220810">[</span><span class="num" id="6220811">0</span><span class="op" id="6220812">]</span><span class="op" id="6220813">,</span>&nbsp;<span class="ident" id="6220815">dat</span><span class="op" id="6220818">[</span><span class="num" id="6220819">1</span><span class="op" id="6220820">]</span><span class="op" id="6220821">,</span>&nbsp;<span class="ident" id="6220823">dat</span><span class="op" id="6220826">[</span><span class="num" id="6220827">2</span><span class="op" id="6220828">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6220831">return</span>&nbsp;<span class="ident" id="6220838">dwarf</span><span class="op" id="6220843">.</span><span class="ident" id="6220844">New</span><span class="op" id="6220847">(</span><span class="ident" id="6220848">abbrev</span><span class="op" id="6220854">,</span>&nbsp;<span class="builtintype" id="6220856">nil</span><span class="op" id="6220859">,</span>&nbsp;<span class="builtintype" id="6220861">nil</span><span class="op" id="6220864">,</span>&nbsp;<span class="ident" id="6220866">info</span><span class="op" id="6220870">,</span>&nbsp;<span class="builtintype" id="6220872">nil</span><span class="op" id="6220875">,</span>&nbsp;<span class="builtintype" id="6220877">nil</span><span class="op" id="6220880">,</span>&nbsp;<span class="builtintype" id="6220882">nil</span><span class="op" id="6220885">,</span>&nbsp;<span class="ident" id="6220887">str</span><span class="op" id="6220890">)</span><br>
<span class="lineno"></span><span class="op" id="6220892">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6220895">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6220947">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6221002">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6221056">func</span>&nbsp;<span class="op" id="6221061">(</span><span class="ident" id="6221062">f</span>&nbsp;<span class="op" id="6221064">*</span><span class="ident" id="6221065">File</span><span class="op" id="6221069">)</span>&nbsp;<span class="ident" id="6221071">ImportedSymbols</span><span class="op" id="6221086">(</span><span class="op" id="6221087">)</span>&nbsp;<span class="op" id="6221089">(</span><span class="op" id="6221090">[</span><span class="op" id="6221091">]</span><span class="builtintype" id="6221092">string</span><span class="op" id="6221098">,</span>&nbsp;<span class="builtintype" id="6221100">error</span><span class="op" id="6221105">)</span>&nbsp;<span class="op" id="6221107">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221110">if</span>&nbsp;<span class="ident" id="6221113">f</span><span class="op" id="6221114">.</span><span class="ident" id="6221115">Dysymtab</span>&nbsp;<span class="op" id="6221124">==</span>&nbsp;<span class="builtintype" id="6221127">nil</span>&nbsp;<span class="op" id="6221131">||</span>&nbsp;<span class="ident" id="6221134">f</span><span class="op" id="6221135">.</span><span class="ident" id="6221136">Symtab</span>&nbsp;<span class="op" id="6221143">==</span>&nbsp;<span class="builtintype" id="6221146">nil</span>&nbsp;<span class="op" id="6221150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221154">return</span>&nbsp;<span class="builtintype" id="6221161">nil</span><span class="op" id="6221164">,</span>&nbsp;<span class="op" id="6221166">&amp;</span><span class="ident" id="6221167">FormatError</span><span class="op" id="6221178">{</span><span class="num" id="6221179">0</span><span class="op" id="6221180">,</span>&nbsp;<span class="string" id="6221182">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6221204">,</span>&nbsp;<span class="builtintype" id="6221206">nil</span><span class="op" id="6221209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6221212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6221216">st</span>&nbsp;<span class="op" id="6221219">:=</span>&nbsp;<span class="ident" id="6221222">f</span><span class="op" id="6221223">.</span><span class="ident" id="6221224">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6221232">dt</span>&nbsp;<span class="op" id="6221235">:=</span>&nbsp;<span class="ident" id="6221238">f</span><span class="op" id="6221239">.</span><span class="ident" id="6221240">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221250">var</span>&nbsp;<span class="ident" id="6221254">all</span>&nbsp;<span class="op" id="6221258">[</span><span class="op" id="6221259">]</span><span class="builtintype" id="6221260">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221268">for</span>&nbsp;<span class="ident" id="6221272">_</span><span class="op" id="6221273">,</span>&nbsp;<span class="ident" id="6221275">s</span>&nbsp;<span class="op" id="6221277">:=</span>&nbsp;<span class="keyword" id="6221280">range</span>&nbsp;<span class="ident" id="6221286">st</span><span class="op" id="6221288">.</span><span class="ident" id="6221289">Syms</span><span class="op" id="6221293">[</span><span class="ident" id="6221294">dt</span><span class="op" id="6221296">.</span><span class="ident" id="6221297">Iundefsym</span>&nbsp;<span class="op" id="6221307">:</span>&nbsp;<span class="ident" id="6221309">dt</span><span class="op" id="6221311">.</span><span class="ident" id="6221312">Iundefsym</span><span class="op" id="6221321">+</span><span class="ident" id="6221322">dt</span><span class="op" id="6221324">.</span><span class="ident" id="6221325">Nundefsym</span><span class="op" id="6221334">]</span>&nbsp;<span class="op" id="6221336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6221340">all</span>&nbsp;<span class="op" id="6221344">=</span>&nbsp;<span class="builtinfunc" id="6221346">append</span><span class="op" id="6221352">(</span><span class="ident" id="6221353">all</span><span class="op" id="6221356">,</span>&nbsp;<span class="ident" id="6221358">s</span><span class="op" id="6221359">.</span><span class="ident" id="6221360">Name</span><span class="op" id="6221364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6221367">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221370">return</span>&nbsp;<span class="ident" id="6221377">all</span><span class="op" id="6221380">,</span>&nbsp;<span class="builtintype" id="6221382">nil</span><br>
<span class="lineno"></span><span class="op" id="6221386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6221389">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6221445">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6221500">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6221548">func</span>&nbsp;<span class="op" id="6221553">(</span><span class="ident" id="6221554">f</span>&nbsp;<span class="op" id="6221556">*</span><span class="ident" id="6221557">File</span><span class="op" id="6221561">)</span>&nbsp;<span class="ident" id="6221563">ImportedLibraries</span><span class="op" id="6221580">(</span><span class="op" id="6221581">)</span>&nbsp;<span class="op" id="6221583">(</span><span class="op" id="6221584">[</span><span class="op" id="6221585">]</span><span class="builtintype" id="6221586">string</span><span class="op" id="6221592">,</span>&nbsp;<span class="builtintype" id="6221594">error</span><span class="op" id="6221599">)</span>&nbsp;<span class="op" id="6221601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221604">var</span>&nbsp;<span class="ident" id="6221608">all</span>&nbsp;<span class="op" id="6221612">[</span><span class="op" id="6221613">]</span><span class="builtintype" id="6221614">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221622">for</span>&nbsp;<span class="ident" id="6221626">_</span><span class="op" id="6221627">,</span>&nbsp;<span class="ident" id="6221629">l</span>&nbsp;<span class="op" id="6221631">:=</span>&nbsp;<span class="keyword" id="6221634">range</span>&nbsp;<span class="ident" id="6221640">f</span><span class="op" id="6221641">.</span><span class="ident" id="6221642">Loads</span>&nbsp;<span class="op" id="6221648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221652">if</span>&nbsp;<span class="ident" id="6221655">lib</span><span class="op" id="6221658">,</span>&nbsp;<span class="ident" id="6221660">ok</span>&nbsp;<span class="op" id="6221663">:=</span>&nbsp;<span class="ident" id="6221666">l</span><span class="op" id="6221667">.</span><span class="op" id="6221668">(</span><span class="op" id="6221669">*</span><span class="ident" id="6221670">Dylib</span><span class="op" id="6221675">)</span><span class="op" id="6221676">;</span>&nbsp;<span class="ident" id="6221678">ok</span>&nbsp;<span class="op" id="6221681">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6221686">all</span>&nbsp;<span class="op" id="6221690">=</span>&nbsp;<span class="builtinfunc" id="6221692">append</span><span class="op" id="6221698">(</span><span class="ident" id="6221699">all</span><span class="op" id="6221702">,</span>&nbsp;<span class="ident" id="6221704">lib</span><span class="op" id="6221707">.</span><span class="ident" id="6221708">Name</span><span class="op" id="6221712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6221716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6221719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6221722">return</span>&nbsp;<span class="ident" id="6221729">all</span><span class="op" id="6221732">,</span>&nbsp;<span class="builtintype" id="6221734">nil</span><br>
<span class="lineno"></span><span class="op" id="6221738">}</span>
</div>
</body>
</html>
