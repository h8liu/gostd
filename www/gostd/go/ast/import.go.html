<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4946914">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4946969">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4947023">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4947074">package</span>&nbsp;<span class="ident" id="4947082">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4947087">import</span>&nbsp;<span class="op" id="4947094">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4947097">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4947109">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4947117">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="4947127">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4947130">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="4947207">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="4947292">func</span>&nbsp;<span class="ident" id="4947297">SortImports</span><span class="op" id="4947308">(</span><span class="ident" id="4947309">fset</span>&nbsp;<span class="op" id="4947314">*</span><span class="ident" id="4947315">token</span><span class="op" id="4947320">.</span><span class="ident" id="4947321">FileSet</span><span class="op" id="4947328">,</span>&nbsp;<span class="ident" id="4947330">f</span>&nbsp;<span class="op" id="4947332">*</span><span class="ident" id="4947333">File</span><span class="op" id="4947337">)</span>&nbsp;<span class="op" id="4947339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947342">for</span>&nbsp;<span class="ident" id="4947346">_</span><span class="op" id="4947347">,</span>&nbsp;<span class="ident" id="4947349">d</span>&nbsp;<span class="op" id="4947351">:=</span>&nbsp;<span class="keyword" id="4947354">range</span>&nbsp;<span class="ident" id="4947360">f</span><span class="op" id="4947361">.</span><span class="ident" id="4947362">Decls</span>&nbsp;<span class="op" id="4947368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947372">d</span><span class="op" id="4947373">,</span>&nbsp;<span class="ident" id="4947375">ok</span>&nbsp;<span class="op" id="4947378">:=</span>&nbsp;<span class="ident" id="4947381">d</span><span class="op" id="4947382">.</span><span class="op" id="4947383">(</span><span class="op" id="4947384">*</span><span class="ident" id="4947385">GenDecl</span><span class="op" id="4947392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947396">if</span>&nbsp;<span class="op" id="4947399">!</span><span class="ident" id="4947400">ok</span>&nbsp;<span class="op" id="4947403">||</span>&nbsp;<span class="ident" id="4947406">d</span><span class="op" id="4947407">.</span><span class="ident" id="4947408">Tok</span>&nbsp;<span class="op" id="4947412">!=</span>&nbsp;<span class="ident" id="4947415">token</span><span class="op" id="4947420">.</span><span class="ident" id="4947421">IMPORT</span>&nbsp;<span class="op" id="4947428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947433">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947481">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947513">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947526">if</span>&nbsp;<span class="op" id="4947529">!</span><span class="ident" id="4947530">d</span><span class="op" id="4947531">.</span><span class="ident" id="4947532">Lparen</span><span class="op" id="4947538">.</span><span class="ident" id="4947539">IsValid</span><span class="op" id="4947546">(</span><span class="op" id="4947547">)</span>&nbsp;<span class="op" id="4947549">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947554">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947592">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947608">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947666">i</span>&nbsp;<span class="op" id="4947668">:=</span>&nbsp;<span class="num" id="4947671">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947675">specs</span>&nbsp;<span class="op" id="4947681">:=</span>&nbsp;<span class="ident" id="4947684">d</span><span class="op" id="4947685">.</span><span class="ident" id="4947686">Specs</span><span class="op" id="4947691">[</span><span class="op" id="4947692">:</span><span class="num" id="4947693">0</span><span class="op" id="4947694">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947698">for</span>&nbsp;<span class="ident" id="4947702">j</span><span class="op" id="4947703">,</span>&nbsp;<span class="ident" id="4947705">s</span>&nbsp;<span class="op" id="4947707">:=</span>&nbsp;<span class="keyword" id="4947710">range</span>&nbsp;<span class="ident" id="4947716">d</span><span class="op" id="4947717">.</span><span class="ident" id="4947718">Specs</span>&nbsp;<span class="op" id="4947724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4947729">if</span>&nbsp;<span class="ident" id="4947732">j</span>&nbsp;<span class="op" id="4947734">&gt;</span>&nbsp;<span class="ident" id="4947736">i</span>&nbsp;<span class="op" id="4947738">&amp;&amp;</span>&nbsp;<span class="ident" id="4947741">fset</span><span class="op" id="4947745">.</span><span class="ident" id="4947746">Position</span><span class="op" id="4947754">(</span><span class="ident" id="4947755">s</span><span class="op" id="4947756">.</span><span class="ident" id="4947757">Pos</span><span class="op" id="4947760">(</span><span class="op" id="4947761">)</span><span class="op" id="4947762">)</span><span class="op" id="4947763">.</span><span class="ident" id="4947764">Line</span>&nbsp;<span class="op" id="4947769">&gt;</span>&nbsp;<span class="num" id="4947771">1</span><span class="op" id="4947772">+</span><span class="ident" id="4947773">fset</span><span class="op" id="4947777">.</span><span class="ident" id="4947778">Position</span><span class="op" id="4947786">(</span><span class="ident" id="4947787">d</span><span class="op" id="4947788">.</span><span class="ident" id="4947789">Specs</span><span class="op" id="4947794">[</span><span class="ident" id="4947795">j</span><span class="op" id="4947796">-</span><span class="num" id="4947797">1</span><span class="op" id="4947798">]</span><span class="op" id="4947799">.</span><span class="ident" id="4947800">End</span><span class="op" id="4947803">(</span><span class="op" id="4947804">)</span><span class="op" id="4947805">)</span><span class="op" id="4947806">.</span><span class="ident" id="4947807">Line</span>&nbsp;<span class="op" id="4947812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4947818">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947860">specs</span>&nbsp;<span class="op" id="4947866">=</span>&nbsp;<span class="builtinfunc" id="4947868">append</span><span class="op" id="4947874">(</span><span class="ident" id="4947875">specs</span><span class="op" id="4947880">,</span>&nbsp;<span class="ident" id="4947882">sortSpecs</span><span class="op" id="4947891">(</span><span class="ident" id="4947892">fset</span><span class="op" id="4947896">,</span>&nbsp;<span class="ident" id="4947898">f</span><span class="op" id="4947899">,</span>&nbsp;<span class="ident" id="4947901">d</span><span class="op" id="4947902">.</span><span class="ident" id="4947903">Specs</span><span class="op" id="4947908">[</span><span class="ident" id="4947909">i</span><span class="op" id="4947910">:</span><span class="ident" id="4947911">j</span><span class="op" id="4947912">]</span><span class="op" id="4947913">)</span><span class="op" id="4947914">...</span><span class="op" id="4947917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947923">i</span>&nbsp;<span class="op" id="4947925">=</span>&nbsp;<span class="ident" id="4947927">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4947936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4947940">specs</span>&nbsp;<span class="op" id="4947946">=</span>&nbsp;<span class="builtinfunc" id="4947948">append</span><span class="op" id="4947954">(</span><span class="ident" id="4947955">specs</span><span class="op" id="4947960">,</span>&nbsp;<span class="ident" id="4947962">sortSpecs</span><span class="op" id="4947971">(</span><span class="ident" id="4947972">fset</span><span class="op" id="4947976">,</span>&nbsp;<span class="ident" id="4947978">f</span><span class="op" id="4947979">,</span>&nbsp;<span class="ident" id="4947981">d</span><span class="op" id="4947982">.</span><span class="ident" id="4947983">Specs</span><span class="op" id="4947988">[</span><span class="ident" id="4947989">i</span><span class="op" id="4947990">:</span><span class="op" id="4947991">]</span><span class="op" id="4947992">)</span><span class="op" id="4947993">...</span><span class="op" id="4947996">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948000">d</span><span class="op" id="4948001">.</span><span class="ident" id="4948002">Specs</span>&nbsp;<span class="op" id="4948008">=</span>&nbsp;<span class="ident" id="4948010">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4948019">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948090">if</span>&nbsp;<span class="builtinfunc" id="4948093">len</span><span class="op" id="4948096">(</span><span class="ident" id="4948097">d</span><span class="op" id="4948098">.</span><span class="ident" id="4948099">Specs</span><span class="op" id="4948104">)</span>&nbsp;<span class="op" id="4948106">&gt;</span>&nbsp;<span class="num" id="4948108">0</span>&nbsp;<span class="op" id="4948110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948115">lastSpec</span>&nbsp;<span class="op" id="4948124">:=</span>&nbsp;<span class="ident" id="4948127">d</span><span class="op" id="4948128">.</span><span class="ident" id="4948129">Specs</span><span class="op" id="4948134">[</span><span class="builtinfunc" id="4948135">len</span><span class="op" id="4948138">(</span><span class="ident" id="4948139">d</span><span class="op" id="4948140">.</span><span class="ident" id="4948141">Specs</span><span class="op" id="4948146">)</span><span class="op" id="4948147">-</span><span class="num" id="4948148">1</span><span class="op" id="4948149">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948154">lastLine</span>&nbsp;<span class="op" id="4948163">:=</span>&nbsp;<span class="ident" id="4948166">fset</span><span class="op" id="4948170">.</span><span class="ident" id="4948171">Position</span><span class="op" id="4948179">(</span><span class="ident" id="4948180">lastSpec</span><span class="op" id="4948188">.</span><span class="ident" id="4948189">Pos</span><span class="op" id="4948192">(</span><span class="op" id="4948193">)</span><span class="op" id="4948194">)</span><span class="op" id="4948195">.</span><span class="ident" id="4948196">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948204">if</span>&nbsp;<span class="ident" id="4948207">rParenLine</span>&nbsp;<span class="op" id="4948218">:=</span>&nbsp;<span class="ident" id="4948221">fset</span><span class="op" id="4948225">.</span><span class="ident" id="4948226">Position</span><span class="op" id="4948234">(</span><span class="ident" id="4948235">d</span><span class="op" id="4948236">.</span><span class="ident" id="4948237">Rparen</span><span class="op" id="4948243">)</span><span class="op" id="4948244">.</span><span class="ident" id="4948245">Line</span><span class="op" id="4948249">;</span>&nbsp;<span class="ident" id="4948251">rParenLine</span>&nbsp;<span class="op" id="4948262">&gt;</span>&nbsp;<span class="ident" id="4948264">lastLine</span><span class="op" id="4948272">+</span><span class="num" id="4948273">1</span>&nbsp;<span class="op" id="4948275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948281">fset</span><span class="op" id="4948285">.</span><span class="ident" id="4948286">File</span><span class="op" id="4948290">(</span><span class="ident" id="4948291">d</span><span class="op" id="4948292">.</span><span class="ident" id="4948293">Rparen</span><span class="op" id="4948299">)</span><span class="op" id="4948300">.</span><span class="ident" id="4948301">MergeLine</span><span class="op" id="4948310">(</span><span class="ident" id="4948311">rParenLine</span>&nbsp;<span class="op" id="4948322">-</span>&nbsp;<span class="num" id="4948324">1</span><span class="op" id="4948325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948334">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948337">}</span><br>
<span class="lineno"></span><span class="op" id="4948339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4948342">func</span>&nbsp;<span class="ident" id="4948347">importPath</span><span class="op" id="4948357">(</span><span class="ident" id="4948358">s</span>&nbsp;<span class="ident" id="4948360">Spec</span><span class="op" id="4948364">)</span>&nbsp;<span class="builtintype" id="4948366">string</span>&nbsp;<span class="op" id="4948373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948376">t</span><span class="op" id="4948377">,</span>&nbsp;<span class="ident" id="4948379">err</span>&nbsp;<span class="op" id="4948383">:=</span>&nbsp;<span class="ident" id="4948386">strconv</span><span class="op" id="4948393">.</span><span class="ident" id="4948394">Unquote</span><span class="op" id="4948401">(</span><span class="ident" id="4948402">s</span><span class="op" id="4948403">.</span><span class="op" id="4948404">(</span><span class="op" id="4948405">*</span><span class="ident" id="4948406">ImportSpec</span><span class="op" id="4948416">)</span><span class="op" id="4948417">.</span><span class="ident" id="4948418">Path</span><span class="op" id="4948422">.</span><span class="ident" id="4948423">Value</span><span class="op" id="4948428">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948431">if</span>&nbsp;<span class="ident" id="4948434">err</span>&nbsp;<span class="op" id="4948438">==</span>&nbsp;<span class="builtintype" id="4948441">nil</span>&nbsp;<span class="op" id="4948445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948449">return</span>&nbsp;<span class="ident" id="4948456">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948462">return</span>&nbsp;<span class="string" id="4948469">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4948472">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="4948475">func</span>&nbsp;<span class="ident" id="4948480">importName</span><span class="op" id="4948490">(</span><span class="ident" id="4948491">s</span>&nbsp;<span class="ident" id="4948493">Spec</span><span class="op" id="4948497">)</span>&nbsp;<span class="builtintype" id="4948499">string</span>&nbsp;<span class="op" id="4948506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948509">n</span>&nbsp;<span class="op" id="4948511">:=</span>&nbsp;<span class="ident" id="4948514">s</span><span class="op" id="4948515">.</span><span class="op" id="4948516">(</span><span class="op" id="4948517">*</span><span class="ident" id="4948518">ImportSpec</span><span class="op" id="4948528">)</span><span class="op" id="4948529">.</span><span class="ident" id="4948530">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948536">if</span>&nbsp;<span class="ident" id="4948539">n</span>&nbsp;<span class="op" id="4948541">==</span>&nbsp;<span class="builtintype" id="4948544">nil</span>&nbsp;<span class="op" id="4948548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948552">return</span>&nbsp;<span class="string" id="4948559">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948566">return</span>&nbsp;<span class="ident" id="4948573">n</span><span class="op" id="4948574">.</span><span class="ident" id="4948575">Name</span><br>
<span class="lineno"></span><span class="op" id="4948580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4948583">func</span>&nbsp;<span class="ident" id="4948588">importComment</span><span class="op" id="4948601">(</span><span class="ident" id="4948602">s</span>&nbsp;<span class="ident" id="4948604">Spec</span><span class="op" id="4948608">)</span>&nbsp;<span class="builtintype" id="4948610">string</span>&nbsp;<span class="op" id="4948617">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948620">c</span>&nbsp;<span class="op" id="4948622">:=</span>&nbsp;<span class="ident" id="4948625">s</span><span class="op" id="4948626">.</span><span class="op" id="4948627">(</span><span class="op" id="4948628">*</span><span class="ident" id="4948629">ImportSpec</span><span class="op" id="4948639">)</span><span class="op" id="4948640">.</span><span class="ident" id="4948641">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948650">if</span>&nbsp;<span class="ident" id="4948653">c</span>&nbsp;<span class="op" id="4948655">==</span>&nbsp;<span class="builtintype" id="4948658">nil</span>&nbsp;<span class="op" id="4948662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948666">return</span>&nbsp;<span class="string" id="4948673">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948680">return</span>&nbsp;<span class="ident" id="4948687">c</span><span class="op" id="4948688">.</span><span class="ident" id="4948689">Text</span><span class="op" id="4948693">(</span><span class="op" id="4948694">)</span><br>
<span class="lineno">75</span><span class="op" id="4948696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4948699">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4948769">func</span>&nbsp;<span class="ident" id="4948774">collapse</span><span class="op" id="4948782">(</span><span class="ident" id="4948783">prev</span><span class="op" id="4948787">,</span>&nbsp;<span class="ident" id="4948789">next</span>&nbsp;<span class="ident" id="4948794">Spec</span><span class="op" id="4948798">)</span>&nbsp;<span class="builtintype" id="4948800">bool</span>&nbsp;<span class="op" id="4948805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948808">if</span>&nbsp;<span class="ident" id="4948811">importPath</span><span class="op" id="4948821">(</span><span class="ident" id="4948822">next</span><span class="op" id="4948826">)</span>&nbsp;<span class="op" id="4948828">!=</span>&nbsp;<span class="ident" id="4948831">importPath</span><span class="op" id="4948841">(</span><span class="ident" id="4948842">prev</span><span class="op" id="4948846">)</span>&nbsp;<span class="op" id="4948848">||</span>&nbsp;<span class="ident" id="4948851">importName</span><span class="op" id="4948861">(</span><span class="ident" id="4948862">next</span><span class="op" id="4948866">)</span>&nbsp;<span class="op" id="4948868">!=</span>&nbsp;<span class="ident" id="4948871">importName</span><span class="op" id="4948881">(</span><span class="ident" id="4948882">prev</span><span class="op" id="4948886">)</span>&nbsp;<span class="op" id="4948888">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948892">return</span>&nbsp;<span class="builtintype" id="4948899">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4948906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4948909">return</span>&nbsp;<span class="ident" id="4948916">prev</span><span class="op" id="4948920">.</span><span class="op" id="4948921">(</span><span class="op" id="4948922">*</span><span class="ident" id="4948923">ImportSpec</span><span class="op" id="4948933">)</span><span class="op" id="4948934">.</span><span class="ident" id="4948935">Comment</span>&nbsp;<span class="op" id="4948943">==</span>&nbsp;<span class="builtintype" id="4948946">nil</span><br>
<span class="lineno"></span><span class="op" id="4948950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4948953">type</span>&nbsp;<span class="ident" id="4948958">posSpan</span>&nbsp;<span class="keyword" id="4948966">struct</span>&nbsp;<span class="op" id="4948973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948976">Start</span>&nbsp;<span class="ident" id="4948982">token</span><span class="op" id="4948987">.</span><span class="ident" id="4948988">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4948993">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4948999">token</span><span class="op" id="4949004">.</span><span class="ident" id="4949005">Pos</span><br>
<span class="lineno"></span><span class="op" id="4949009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="4949012">func</span>&nbsp;<span class="ident" id="4949017">sortSpecs</span><span class="op" id="4949026">(</span><span class="ident" id="4949027">fset</span>&nbsp;<span class="op" id="4949032">*</span><span class="ident" id="4949033">token</span><span class="op" id="4949038">.</span><span class="ident" id="4949039">FileSet</span><span class="op" id="4949046">,</span>&nbsp;<span class="ident" id="4949048">f</span>&nbsp;<span class="op" id="4949050">*</span><span class="ident" id="4949051">File</span><span class="op" id="4949055">,</span>&nbsp;<span class="ident" id="4949057">specs</span>&nbsp;<span class="op" id="4949063">[</span><span class="op" id="4949064">]</span><span class="ident" id="4949065">Spec</span><span class="op" id="4949069">)</span>&nbsp;<span class="op" id="4949071">[</span><span class="op" id="4949072">]</span><span class="ident" id="4949073">Spec</span>&nbsp;<span class="op" id="4949078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949081">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949144">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949189">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949240">if</span>&nbsp;<span class="builtinfunc" id="4949243">len</span><span class="op" id="4949246">(</span><span class="ident" id="4949247">specs</span><span class="op" id="4949252">)</span>&nbsp;<span class="op" id="4949254">&lt;=</span>&nbsp;<span class="num" id="4949257">1</span>&nbsp;<span class="op" id="4949259">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949263">return</span>&nbsp;<span class="ident" id="4949270">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949281">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949313">pos</span>&nbsp;<span class="op" id="4949317">:=</span>&nbsp;<span class="builtinfunc" id="4949320">make</span><span class="op" id="4949324">(</span><span class="op" id="4949325">[</span><span class="op" id="4949326">]</span><span class="ident" id="4949327">posSpan</span><span class="op" id="4949334">,</span>&nbsp;<span class="builtinfunc" id="4949336">len</span><span class="op" id="4949339">(</span><span class="ident" id="4949340">specs</span><span class="op" id="4949345">)</span><span class="op" id="4949346">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949349">for</span>&nbsp;<span class="ident" id="4949353">i</span><span class="op" id="4949354">,</span>&nbsp;<span class="ident" id="4949356">s</span>&nbsp;<span class="op" id="4949358">:=</span>&nbsp;<span class="keyword" id="4949361">range</span>&nbsp;<span class="ident" id="4949367">specs</span>&nbsp;<span class="op" id="4949373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949377">pos</span><span class="op" id="4949380">[</span><span class="ident" id="4949381">i</span><span class="op" id="4949382">]</span>&nbsp;<span class="op" id="4949384">=</span>&nbsp;<span class="ident" id="4949386">posSpan</span><span class="op" id="4949393">{</span><span class="ident" id="4949394">s</span><span class="op" id="4949395">.</span><span class="ident" id="4949396">Pos</span><span class="op" id="4949399">(</span><span class="op" id="4949400">)</span><span class="op" id="4949401">,</span>&nbsp;<span class="ident" id="4949403">s</span><span class="op" id="4949404">.</span><span class="ident" id="4949405">End</span><span class="op" id="4949408">(</span><span class="op" id="4949409">)</span><span class="op" id="4949410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949417">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949454">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949514">lastLine</span>&nbsp;<span class="op" id="4949523">:=</span>&nbsp;<span class="ident" id="4949526">fset</span><span class="op" id="4949530">.</span><span class="ident" id="4949531">Position</span><span class="op" id="4949539">(</span><span class="ident" id="4949540">pos</span><span class="op" id="4949543">[</span><span class="builtinfunc" id="4949544">len</span><span class="op" id="4949547">(</span><span class="ident" id="4949548">pos</span><span class="op" id="4949551">)</span><span class="op" id="4949552">-</span><span class="num" id="4949553">1</span><span class="op" id="4949554">]</span><span class="op" id="4949555">.</span><span class="ident" id="4949556">End</span><span class="op" id="4949559">)</span><span class="op" id="4949560">.</span><span class="ident" id="4949561">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949567">cstart</span>&nbsp;<span class="op" id="4949574">:=</span>&nbsp;<span class="builtinfunc" id="4949577">len</span><span class="op" id="4949580">(</span><span class="ident" id="4949581">f</span><span class="op" id="4949582">.</span><span class="ident" id="4949583">Comments</span><span class="op" id="4949591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949594">cend</span>&nbsp;<span class="op" id="4949599">:=</span>&nbsp;<span class="builtinfunc" id="4949602">len</span><span class="op" id="4949605">(</span><span class="ident" id="4949606">f</span><span class="op" id="4949607">.</span><span class="ident" id="4949608">Comments</span><span class="op" id="4949616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949619">for</span>&nbsp;<span class="ident" id="4949623">i</span><span class="op" id="4949624">,</span>&nbsp;<span class="ident" id="4949626">g</span>&nbsp;<span class="op" id="4949628">:=</span>&nbsp;<span class="keyword" id="4949631">range</span>&nbsp;<span class="ident" id="4949637">f</span><span class="op" id="4949638">.</span><span class="ident" id="4949639">Comments</span>&nbsp;<span class="op" id="4949648">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949652">if</span>&nbsp;<span class="ident" id="4949655">g</span><span class="op" id="4949656">.</span><span class="ident" id="4949657">Pos</span><span class="op" id="4949660">(</span><span class="op" id="4949661">)</span>&nbsp;<span class="op" id="4949663">&lt;</span>&nbsp;<span class="ident" id="4949665">pos</span><span class="op" id="4949668">[</span><span class="num" id="4949669">0</span><span class="op" id="4949670">]</span><span class="op" id="4949671">.</span><span class="ident" id="4949672">Start</span>&nbsp;<span class="op" id="4949678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949683">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949698">if</span>&nbsp;<span class="ident" id="4949701">i</span>&nbsp;<span class="op" id="4949703">&lt;</span>&nbsp;<span class="ident" id="4949705">cstart</span>&nbsp;<span class="op" id="4949712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949717">cstart</span>&nbsp;<span class="op" id="4949724">=</span>&nbsp;<span class="ident" id="4949726">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949734">if</span>&nbsp;<span class="ident" id="4949737">fset</span><span class="op" id="4949741">.</span><span class="ident" id="4949742">Position</span><span class="op" id="4949750">(</span><span class="ident" id="4949751">g</span><span class="op" id="4949752">.</span><span class="ident" id="4949753">End</span><span class="op" id="4949756">(</span><span class="op" id="4949757">)</span><span class="op" id="4949758">)</span><span class="op" id="4949759">.</span><span class="ident" id="4949760">Line</span>&nbsp;<span class="op" id="4949765">&gt;</span>&nbsp;<span class="ident" id="4949767">lastLine</span>&nbsp;<span class="op" id="4949776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949781">cend</span>&nbsp;<span class="op" id="4949786">=</span>&nbsp;<span class="ident" id="4949788">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949793">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949801">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4949804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949807">comments</span>&nbsp;<span class="op" id="4949816">:=</span>&nbsp;<span class="ident" id="4949819">f</span><span class="op" id="4949820">.</span><span class="ident" id="4949821">Comments</span><span class="op" id="4949829">[</span><span class="ident" id="4949830">cstart</span><span class="op" id="4949836">:</span><span class="ident" id="4949837">cend</span><span class="op" id="4949841">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4949845">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949902">importComment</span>&nbsp;<span class="op" id="4949916">:=</span>&nbsp;<span class="keyword" id="4949919">map</span><span class="op" id="4949922">[</span><span class="op" id="4949923">*</span><span class="ident" id="4949924">ImportSpec</span><span class="op" id="4949934">]</span><span class="op" id="4949935">[</span><span class="op" id="4949936">]</span><span class="op" id="4949937">*</span><span class="ident" id="4949938">CommentGroup</span><span class="op" id="4949950">{</span><span class="op" id="4949951">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4949954">specIndex</span>&nbsp;<span class="op" id="4949964">:=</span>&nbsp;<span class="num" id="4949967">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4949970">for</span>&nbsp;<span class="ident" id="4949974">_</span><span class="op" id="4949975">,</span>&nbsp;<span class="ident" id="4949977">g</span>&nbsp;<span class="op" id="4949979">:=</span>&nbsp;<span class="keyword" id="4949982">range</span>&nbsp;<span class="ident" id="4949988">comments</span>&nbsp;<span class="op" id="4949997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950001">for</span>&nbsp;<span class="ident" id="4950005">specIndex</span><span class="op" id="4950014">+</span><span class="num" id="4950015">1</span>&nbsp;<span class="op" id="4950017">&lt;</span>&nbsp;<span class="builtinfunc" id="4950019">len</span><span class="op" id="4950022">(</span><span class="ident" id="4950023">specs</span><span class="op" id="4950028">)</span>&nbsp;<span class="op" id="4950030">&amp;&amp;</span>&nbsp;<span class="ident" id="4950033">pos</span><span class="op" id="4950036">[</span><span class="ident" id="4950037">specIndex</span><span class="op" id="4950046">+</span><span class="num" id="4950047">1</span><span class="op" id="4950048">]</span><span class="op" id="4950049">.</span><span class="ident" id="4950050">Start</span>&nbsp;<span class="op" id="4950056">&lt;=</span>&nbsp;<span class="ident" id="4950059">g</span><span class="op" id="4950060">.</span><span class="ident" id="4950061">Pos</span><span class="op" id="4950064">(</span><span class="op" id="4950065">)</span>&nbsp;<span class="op" id="4950067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950072">specIndex</span><span class="op" id="4950081">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950086">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950090">s</span>&nbsp;<span class="op" id="4950092">:=</span>&nbsp;<span class="ident" id="4950095">specs</span><span class="op" id="4950100">[</span><span class="ident" id="4950101">specIndex</span><span class="op" id="4950110">]</span><span class="op" id="4950111">.</span><span class="op" id="4950112">(</span><span class="op" id="4950113">*</span><span class="ident" id="4950114">ImportSpec</span><span class="op" id="4950124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950128">importComment</span><span class="op" id="4950141">[</span><span class="ident" id="4950142">s</span><span class="op" id="4950143">]</span>&nbsp;<span class="op" id="4950145">=</span>&nbsp;<span class="builtinfunc" id="4950147">append</span><span class="op" id="4950153">(</span><span class="ident" id="4950154">importComment</span><span class="op" id="4950167">[</span><span class="ident" id="4950168">s</span><span class="op" id="4950169">]</span><span class="op" id="4950170">,</span>&nbsp;<span class="ident" id="4950172">g</span><span class="op" id="4950173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950180">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950222">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950278">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950344">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950399">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950438">sort</span><span class="op" id="4950442">.</span><span class="ident" id="4950443">Sort</span><span class="op" id="4950447">(</span><span class="ident" id="4950448">byImportSpec</span><span class="op" id="4950460">(</span><span class="ident" id="4950461">specs</span><span class="op" id="4950466">)</span><span class="op" id="4950467">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950471">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950526">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950557">deduped</span>&nbsp;<span class="op" id="4950565">:=</span>&nbsp;<span class="ident" id="4950568">specs</span><span class="op" id="4950573">[</span><span class="op" id="4950574">:</span><span class="num" id="4950575">0</span><span class="op" id="4950576">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950579">for</span>&nbsp;<span class="ident" id="4950583">i</span><span class="op" id="4950584">,</span>&nbsp;<span class="ident" id="4950586">s</span>&nbsp;<span class="op" id="4950588">:=</span>&nbsp;<span class="keyword" id="4950591">range</span>&nbsp;<span class="ident" id="4950597">specs</span>&nbsp;<span class="op" id="4950603">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950607">if</span>&nbsp;<span class="ident" id="4950610">i</span>&nbsp;<span class="op" id="4950612">==</span>&nbsp;<span class="builtinfunc" id="4950615">len</span><span class="op" id="4950618">(</span><span class="ident" id="4950619">specs</span><span class="op" id="4950624">)</span><span class="op" id="4950625">-</span><span class="num" id="4950626">1</span>&nbsp;<span class="op" id="4950628">||</span>&nbsp;<span class="op" id="4950631">!</span><span class="ident" id="4950632">collapse</span><span class="op" id="4950640">(</span><span class="ident" id="4950641">s</span><span class="op" id="4950642">,</span>&nbsp;<span class="ident" id="4950644">specs</span><span class="op" id="4950649">[</span><span class="ident" id="4950650">i</span><span class="op" id="4950651">+</span><span class="num" id="4950652">1</span><span class="op" id="4950653">]</span><span class="op" id="4950654">)</span>&nbsp;<span class="op" id="4950656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950661">deduped</span>&nbsp;<span class="op" id="4950669">=</span>&nbsp;<span class="builtinfunc" id="4950671">append</span><span class="op" id="4950677">(</span><span class="ident" id="4950678">deduped</span><span class="op" id="4950685">,</span>&nbsp;<span class="ident" id="4950687">s</span><span class="op" id="4950688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950692">}</span>&nbsp;<span class="keyword" id="4950694">else</span>&nbsp;<span class="op" id="4950699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950704">p</span>&nbsp;<span class="op" id="4950706">:=</span>&nbsp;<span class="ident" id="4950709">s</span><span class="op" id="4950710">.</span><span class="ident" id="4950711">Pos</span><span class="op" id="4950714">(</span><span class="op" id="4950715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950720">fset</span><span class="op" id="4950724">.</span><span class="ident" id="4950725">File</span><span class="op" id="4950729">(</span><span class="ident" id="4950730">p</span><span class="op" id="4950731">)</span><span class="op" id="4950732">.</span><span class="ident" id="4950733">MergeLine</span><span class="op" id="4950742">(</span><span class="ident" id="4950743">fset</span><span class="op" id="4950747">.</span><span class="ident" id="4950748">Position</span><span class="op" id="4950756">(</span><span class="ident" id="4950757">p</span><span class="op" id="4950758">)</span><span class="op" id="4950759">.</span><span class="ident" id="4950760">Line</span><span class="op" id="4950764">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950774">specs</span>&nbsp;<span class="op" id="4950780">=</span>&nbsp;<span class="ident" id="4950782">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4950792">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950821">for</span>&nbsp;<span class="ident" id="4950825">i</span><span class="op" id="4950826">,</span>&nbsp;<span class="ident" id="4950828">s</span>&nbsp;<span class="op" id="4950830">:=</span>&nbsp;<span class="keyword" id="4950833">range</span>&nbsp;<span class="ident" id="4950839">specs</span>&nbsp;<span class="op" id="4950845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950849">s</span>&nbsp;<span class="op" id="4950851">:=</span>&nbsp;<span class="ident" id="4950854">s</span><span class="op" id="4950855">.</span><span class="op" id="4950856">(</span><span class="op" id="4950857">*</span><span class="ident" id="4950858">ImportSpec</span><span class="op" id="4950868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950872">if</span>&nbsp;<span class="ident" id="4950875">s</span><span class="op" id="4950876">.</span><span class="ident" id="4950877">Name</span>&nbsp;<span class="op" id="4950882">!=</span>&nbsp;<span class="builtintype" id="4950885">nil</span>&nbsp;<span class="op" id="4950889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950894">s</span><span class="op" id="4950895">.</span><span class="ident" id="4950896">Name</span><span class="op" id="4950900">.</span><span class="ident" id="4950901">NamePos</span>&nbsp;<span class="op" id="4950909">=</span>&nbsp;<span class="ident" id="4950911">pos</span><span class="op" id="4950914">[</span><span class="ident" id="4950915">i</span><span class="op" id="4950916">]</span><span class="op" id="4950917">.</span><span class="ident" id="4950918">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4950926">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950930">s</span><span class="op" id="4950931">.</span><span class="ident" id="4950932">Path</span><span class="op" id="4950936">.</span><span class="ident" id="4950937">ValuePos</span>&nbsp;<span class="op" id="4950946">=</span>&nbsp;<span class="ident" id="4950948">pos</span><span class="op" id="4950951">[</span><span class="ident" id="4950952">i</span><span class="op" id="4950953">]</span><span class="op" id="4950954">.</span><span class="ident" id="4950955">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4950963">s</span><span class="op" id="4950964">.</span><span class="ident" id="4950965">EndPos</span>&nbsp;<span class="op" id="4950972">=</span>&nbsp;<span class="ident" id="4950974">pos</span><span class="op" id="4950977">[</span><span class="ident" id="4950978">i</span><span class="op" id="4950979">]</span><span class="op" id="4950980">.</span><span class="ident" id="4950981">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4950987">for</span>&nbsp;<span class="ident" id="4950991">_</span><span class="op" id="4950992">,</span>&nbsp;<span class="ident" id="4950994">g</span>&nbsp;<span class="op" id="4950996">:=</span>&nbsp;<span class="keyword" id="4950999">range</span>&nbsp;<span class="ident" id="4951005">importComment</span><span class="op" id="4951018">[</span><span class="ident" id="4951019">s</span><span class="op" id="4951020">]</span>&nbsp;<span class="op" id="4951022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951027">for</span>&nbsp;<span class="ident" id="4951031">_</span><span class="op" id="4951032">,</span>&nbsp;<span class="ident" id="4951034">c</span>&nbsp;<span class="op" id="4951036">:=</span>&nbsp;<span class="keyword" id="4951039">range</span>&nbsp;<span class="ident" id="4951045">g</span><span class="op" id="4951046">.</span><span class="ident" id="4951047">List</span>&nbsp;<span class="op" id="4951052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951058">c</span><span class="op" id="4951059">.</span><span class="ident" id="4951060">Slash</span>&nbsp;<span class="op" id="4951066">=</span>&nbsp;<span class="ident" id="4951068">pos</span><span class="op" id="4951071">[</span><span class="ident" id="4951072">i</span><span class="op" id="4951073">]</span><span class="op" id="4951074">.</span><span class="ident" id="4951075">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951093">sort</span><span class="op" id="4951097">.</span><span class="ident" id="4951098">Sort</span><span class="op" id="4951102">(</span><span class="ident" id="4951103">byCommentPos</span><span class="op" id="4951115">(</span><span class="ident" id="4951116">comments</span><span class="op" id="4951124">)</span><span class="op" id="4951125">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951129">return</span>&nbsp;<span class="ident" id="4951136">specs</span><br>
<span class="lineno"></span><span class="op" id="4951142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4951145">type</span>&nbsp;<span class="ident" id="4951150">byImportSpec</span>&nbsp;<span class="op" id="4951163">[</span><span class="op" id="4951164">]</span><span class="ident" id="4951165">Spec</span>&nbsp;<span class="comment" id="4951170">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="4951195">func</span>&nbsp;<span class="op" id="4951200">(</span><span class="ident" id="4951201">x</span>&nbsp;<span class="ident" id="4951203">byImportSpec</span><span class="op" id="4951215">)</span>&nbsp;<span class="ident" id="4951217">Len</span><span class="op" id="4951220">(</span><span class="op" id="4951221">)</span>&nbsp;<span class="builtintype" id="4951223">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951232">{</span>&nbsp;<span class="keyword" id="4951234">return</span>&nbsp;<span class="builtinfunc" id="4951241">len</span><span class="op" id="4951244">(</span><span class="ident" id="4951245">x</span><span class="op" id="4951246">)</span>&nbsp;<span class="op" id="4951248">}</span><br>
<span class="lineno"></span><span class="keyword" id="4951250">func</span>&nbsp;<span class="op" id="4951255">(</span><span class="ident" id="4951256">x</span>&nbsp;<span class="ident" id="4951258">byImportSpec</span><span class="op" id="4951270">)</span>&nbsp;<span class="ident" id="4951272">Swap</span><span class="op" id="4951276">(</span><span class="ident" id="4951277">i</span><span class="op" id="4951278">,</span>&nbsp;<span class="ident" id="4951280">j</span>&nbsp;<span class="builtintype" id="4951282">int</span><span class="op" id="4951285">)</span>&nbsp;<span class="op" id="4951287">{</span>&nbsp;<span class="ident" id="4951289">x</span><span class="op" id="4951290">[</span><span class="ident" id="4951291">i</span><span class="op" id="4951292">]</span><span class="op" id="4951293">,</span>&nbsp;<span class="ident" id="4951295">x</span><span class="op" id="4951296">[</span><span class="ident" id="4951297">j</span><span class="op" id="4951298">]</span>&nbsp;<span class="op" id="4951300">=</span>&nbsp;<span class="ident" id="4951302">x</span><span class="op" id="4951303">[</span><span class="ident" id="4951304">j</span><span class="op" id="4951305">]</span><span class="op" id="4951306">,</span>&nbsp;<span class="ident" id="4951308">x</span><span class="op" id="4951309">[</span><span class="ident" id="4951310">i</span><span class="op" id="4951311">]</span>&nbsp;<span class="op" id="4951313">}</span><br>
<span class="lineno"></span><span class="keyword" id="4951315">func</span>&nbsp;<span class="op" id="4951320">(</span><span class="ident" id="4951321">x</span>&nbsp;<span class="ident" id="4951323">byImportSpec</span><span class="op" id="4951335">)</span>&nbsp;<span class="ident" id="4951337">Less</span><span class="op" id="4951341">(</span><span class="ident" id="4951342">i</span><span class="op" id="4951343">,</span>&nbsp;<span class="ident" id="4951345">j</span>&nbsp;<span class="builtintype" id="4951347">int</span><span class="op" id="4951350">)</span>&nbsp;<span class="builtintype" id="4951352">bool</span>&nbsp;<span class="op" id="4951357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951360">ipath</span>&nbsp;<span class="op" id="4951366">:=</span>&nbsp;<span class="ident" id="4951369">importPath</span><span class="op" id="4951379">(</span><span class="ident" id="4951380">x</span><span class="op" id="4951381">[</span><span class="ident" id="4951382">i</span><span class="op" id="4951383">]</span><span class="op" id="4951384">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951387">jpath</span>&nbsp;<span class="op" id="4951393">:=</span>&nbsp;<span class="ident" id="4951396">importPath</span><span class="op" id="4951406">(</span><span class="ident" id="4951407">x</span><span class="op" id="4951408">[</span><span class="ident" id="4951409">j</span><span class="op" id="4951410">]</span><span class="op" id="4951411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951414">if</span>&nbsp;<span class="ident" id="4951417">ipath</span>&nbsp;<span class="op" id="4951423">!=</span>&nbsp;<span class="ident" id="4951426">jpath</span>&nbsp;<span class="op" id="4951432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951436">return</span>&nbsp;<span class="ident" id="4951443">ipath</span>&nbsp;<span class="op" id="4951449">&lt;</span>&nbsp;<span class="ident" id="4951451">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951461">iname</span>&nbsp;<span class="op" id="4951467">:=</span>&nbsp;<span class="ident" id="4951470">importName</span><span class="op" id="4951480">(</span><span class="ident" id="4951481">x</span><span class="op" id="4951482">[</span><span class="ident" id="4951483">i</span><span class="op" id="4951484">]</span><span class="op" id="4951485">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4951488">jname</span>&nbsp;<span class="op" id="4951494">:=</span>&nbsp;<span class="ident" id="4951497">importName</span><span class="op" id="4951507">(</span><span class="ident" id="4951508">x</span><span class="op" id="4951509">[</span><span class="ident" id="4951510">j</span><span class="op" id="4951511">]</span><span class="op" id="4951512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951515">if</span>&nbsp;<span class="ident" id="4951518">iname</span>&nbsp;<span class="op" id="4951524">!=</span>&nbsp;<span class="ident" id="4951527">jname</span>&nbsp;<span class="op" id="4951533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951537">return</span>&nbsp;<span class="ident" id="4951544">iname</span>&nbsp;<span class="op" id="4951550">&lt;</span>&nbsp;<span class="ident" id="4951552">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4951562">return</span>&nbsp;<span class="ident" id="4951569">importComment</span><span class="op" id="4951582">(</span><span class="ident" id="4951583">x</span><span class="op" id="4951584">[</span><span class="ident" id="4951585">i</span><span class="op" id="4951586">]</span><span class="op" id="4951587">)</span>&nbsp;<span class="op" id="4951589">&lt;</span>&nbsp;<span class="ident" id="4951591">importComment</span><span class="op" id="4951604">(</span><span class="ident" id="4951605">x</span><span class="op" id="4951606">[</span><span class="ident" id="4951607">j</span><span class="op" id="4951608">]</span><span class="op" id="4951609">)</span><br>
<span class="lineno">190</span><span class="op" id="4951611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4951614">type</span>&nbsp;<span class="ident" id="4951619">byCommentPos</span>&nbsp;<span class="op" id="4951632">[</span><span class="op" id="4951633">]</span><span class="op" id="4951634">*</span><span class="ident" id="4951635">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4951649">func</span>&nbsp;<span class="op" id="4951654">(</span><span class="ident" id="4951655">x</span>&nbsp;<span class="ident" id="4951657">byCommentPos</span><span class="op" id="4951669">)</span>&nbsp;<span class="ident" id="4951671">Len</span><span class="op" id="4951674">(</span><span class="op" id="4951675">)</span>&nbsp;<span class="builtintype" id="4951677">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951691">{</span>&nbsp;<span class="keyword" id="4951693">return</span>&nbsp;<span class="builtinfunc" id="4951700">len</span><span class="op" id="4951703">(</span><span class="ident" id="4951704">x</span><span class="op" id="4951705">)</span>&nbsp;<span class="op" id="4951707">}</span><br>
<span class="lineno">195</span><span class="keyword" id="4951709">func</span>&nbsp;<span class="op" id="4951714">(</span><span class="ident" id="4951715">x</span>&nbsp;<span class="ident" id="4951717">byCommentPos</span><span class="op" id="4951729">)</span>&nbsp;<span class="ident" id="4951731">Swap</span><span class="op" id="4951735">(</span><span class="ident" id="4951736">i</span><span class="op" id="4951737">,</span>&nbsp;<span class="ident" id="4951739">j</span>&nbsp;<span class="builtintype" id="4951741">int</span><span class="op" id="4951744">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4951751">{</span>&nbsp;<span class="ident" id="4951753">x</span><span class="op" id="4951754">[</span><span class="ident" id="4951755">i</span><span class="op" id="4951756">]</span><span class="op" id="4951757">,</span>&nbsp;<span class="ident" id="4951759">x</span><span class="op" id="4951760">[</span><span class="ident" id="4951761">j</span><span class="op" id="4951762">]</span>&nbsp;<span class="op" id="4951764">=</span>&nbsp;<span class="ident" id="4951766">x</span><span class="op" id="4951767">[</span><span class="ident" id="4951768">j</span><span class="op" id="4951769">]</span><span class="op" id="4951770">,</span>&nbsp;<span class="ident" id="4951772">x</span><span class="op" id="4951773">[</span><span class="ident" id="4951774">i</span><span class="op" id="4951775">]</span>&nbsp;<span class="op" id="4951777">}</span><br>
<span class="lineno"></span><span class="keyword" id="4951779">func</span>&nbsp;<span class="op" id="4951784">(</span><span class="ident" id="4951785">x</span>&nbsp;<span class="ident" id="4951787">byCommentPos</span><span class="op" id="4951799">)</span>&nbsp;<span class="ident" id="4951801">Less</span><span class="op" id="4951805">(</span><span class="ident" id="4951806">i</span><span class="op" id="4951807">,</span>&nbsp;<span class="ident" id="4951809">j</span>&nbsp;<span class="builtintype" id="4951811">int</span><span class="op" id="4951814">)</span>&nbsp;<span class="builtintype" id="4951816">bool</span>&nbsp;<span class="op" id="4951821">{</span>&nbsp;<span class="keyword" id="4951823">return</span>&nbsp;<span class="ident" id="4951830">x</span><span class="op" id="4951831">[</span><span class="ident" id="4951832">i</span><span class="op" id="4951833">]</span><span class="op" id="4951834">.</span><span class="ident" id="4951835">Pos</span><span class="op" id="4951838">(</span><span class="op" id="4951839">)</span>&nbsp;<span class="op" id="4951841">&lt;</span>&nbsp;<span class="ident" id="4951843">x</span><span class="op" id="4951844">[</span><span class="ident" id="4951845">j</span><span class="op" id="4951846">]</span><span class="op" id="4951847">.</span><span class="ident" id="4951848">Pos</span><span class="op" id="4951851">(</span><span class="op" id="4951852">)</span>&nbsp;<span class="op" id="4951854">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
