<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3894340">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3894395">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3894449">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3894500">package</span>&nbsp;<span class="ident" id="3894508">driver</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3894516">import</span>&nbsp;<span class="op" id="3894523">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3894526">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3894533">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3894544">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3894555">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3894562">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3894565">//&nbsp;ValueConverter&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;ConvertValue&nbsp;method.</span><br>
<span class="lineno">15</span><span class="comment" id="3894635">//</span><br>
<span class="lineno"></span><span class="comment" id="3894638">//&nbsp;Various&nbsp;implementations&nbsp;of&nbsp;ValueConverter&nbsp;are&nbsp;provided&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3894703">//&nbsp;driver&nbsp;package&nbsp;to&nbsp;provide&nbsp;consistent&nbsp;implementations&nbsp;of&nbsp;conversions</span><br>
<span class="lineno"></span><span class="comment" id="3894774">//&nbsp;between&nbsp;drivers.&nbsp;&nbsp;The&nbsp;ValueConverters&nbsp;have&nbsp;several&nbsp;uses:</span><br>
<span class="lineno"></span><span class="comment" id="3894834">//</span><br>
<span class="lineno">20</span><span class="comment" id="3894837">//&nbsp;&nbsp;*&nbsp;converting&nbsp;from&nbsp;the&nbsp;Value&nbsp;types&nbsp;as&nbsp;provided&nbsp;by&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="3894906">//&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;database&nbsp;table&#39;s&nbsp;specific&nbsp;column&nbsp;type&nbsp;and&nbsp;making&nbsp;sure&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3894976">//&nbsp;&nbsp;&nbsp;&nbsp;fits,&nbsp;such&nbsp;as&nbsp;making&nbsp;sure&nbsp;a&nbsp;particular&nbsp;int64&nbsp;fits&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3895037">//&nbsp;&nbsp;&nbsp;&nbsp;table&#39;s&nbsp;uint16&nbsp;column.</span><br>
<span class="lineno"></span><span class="comment" id="3895066">//</span><br>
<span class="lineno">25</span><span class="comment" id="3895069">//&nbsp;&nbsp;*&nbsp;converting&nbsp;a&nbsp;value&nbsp;as&nbsp;given&nbsp;from&nbsp;the&nbsp;database&nbsp;into&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3895137">//&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;Value&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="3895163">//</span><br>
<span class="lineno"></span><span class="comment" id="3895166">//&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;sql&nbsp;package,&nbsp;for&nbsp;converting&nbsp;from&nbsp;a&nbsp;driver&#39;s&nbsp;Value&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="3895234">//&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;user&#39;s&nbsp;type&nbsp;in&nbsp;a&nbsp;scan.</span><br>
<span class="lineno">30</span><span class="keyword" id="3895268">type</span>&nbsp;<span class="ident" id="3895273">ValueConverter</span>&nbsp;<span class="keyword" id="3895288">interface</span>&nbsp;<span class="op" id="3895298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3895301">//&nbsp;ConvertValue&nbsp;converts&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3895354">ConvertValue</span><span class="op" id="3895366">(</span><span class="ident" id="3895367">v</span>&nbsp;<span class="keyword" id="3895369">interface</span><span class="op" id="3895378">{</span><span class="op" id="3895379">}</span><span class="op" id="3895380">)</span>&nbsp;<span class="op" id="3895382">(</span><span class="ident" id="3895383">Value</span><span class="op" id="3895388">,</span>&nbsp;<span class="builtintype" id="3895390">error</span><span class="op" id="3895395">)</span><br>
<span class="lineno"></span><span class="op" id="3895397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3895400">//&nbsp;Valuer&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;Value&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3895455">//</span><br>
<span class="lineno"></span><span class="comment" id="3895458">//&nbsp;Types&nbsp;implementing&nbsp;Valuer&nbsp;interface&nbsp;are&nbsp;able&nbsp;to&nbsp;convert</span><br>
<span class="lineno"></span><span class="comment" id="3895517">//&nbsp;themselves&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="3895550">type</span>&nbsp;<span class="ident" id="3895555">Valuer</span>&nbsp;<span class="keyword" id="3895562">interface</span>&nbsp;<span class="op" id="3895572">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3895575">//&nbsp;Value&nbsp;returns&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3895609">Value</span><span class="op" id="3895614">(</span><span class="op" id="3895615">)</span>&nbsp;<span class="op" id="3895617">(</span><span class="ident" id="3895618">Value</span><span class="op" id="3895623">,</span>&nbsp;<span class="builtintype" id="3895625">error</span><span class="op" id="3895630">)</span><br>
<span class="lineno"></span><span class="op" id="3895632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3895635">//&nbsp;Bool&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;bools.</span><br>
<span class="lineno">45</span><span class="comment" id="3895700">//</span><br>
<span class="lineno"></span><span class="comment" id="3895703">//&nbsp;The&nbsp;conversion&nbsp;rules&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="3895732">//&nbsp;&nbsp;-&nbsp;booleans&nbsp;are&nbsp;returned&nbsp;unchanged</span><br>
<span class="lineno"></span><span class="comment" id="3895770">//&nbsp;&nbsp;-&nbsp;for&nbsp;integer&nbsp;types,</span><br>
<span class="lineno"></span><span class="comment" id="3895795">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;is&nbsp;true</span><br>
<span class="lineno">50</span><span class="comment" id="3895814">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;is&nbsp;false,</span><br>
<span class="lineno"></span><span class="comment" id="3895835">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;integers&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3895872">//&nbsp;&nbsp;-&nbsp;for&nbsp;strings&nbsp;and&nbsp;[]byte,&nbsp;same&nbsp;rules&nbsp;as&nbsp;strconv.ParseBool</span><br>
<span class="lineno"></span><span class="comment" id="3895934">//&nbsp;&nbsp;-&nbsp;all&nbsp;other&nbsp;types&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="3895969">var</span>&nbsp;<span class="ident" id="3895973">Bool</span>&nbsp;<span class="ident" id="3895978">boolType</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="3895988">type</span>&nbsp;<span class="ident" id="3895993">boolType</span>&nbsp;<span class="keyword" id="3896002">struct</span><span class="op" id="3896008">{</span><span class="op" id="3896009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3896012">var</span>&nbsp;<span class="ident" id="3896016">_</span>&nbsp;<span class="ident" id="3896018">ValueConverter</span>&nbsp;<span class="op" id="3896033">=</span>&nbsp;<span class="ident" id="3896035">boolType</span><span class="op" id="3896043">{</span><span class="op" id="3896044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3896047">func</span>&nbsp;<span class="op" id="3896052">(</span><span class="ident" id="3896053">boolType</span><span class="op" id="3896061">)</span>&nbsp;<span class="ident" id="3896063">String</span><span class="op" id="3896069">(</span><span class="op" id="3896070">)</span>&nbsp;<span class="builtintype" id="3896072">string</span>&nbsp;<span class="op" id="3896079">{</span>&nbsp;<span class="keyword" id="3896081">return</span>&nbsp;<span class="string" id="3896088">&#34;Bool&#34;</span>&nbsp;<span class="op" id="3896095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3896098">func</span>&nbsp;<span class="op" id="3896103">(</span><span class="ident" id="3896104">boolType</span><span class="op" id="3896112">)</span>&nbsp;<span class="ident" id="3896114">ConvertValue</span><span class="op" id="3896126">(</span><span class="ident" id="3896127">src</span>&nbsp;<span class="keyword" id="3896131">interface</span><span class="op" id="3896140">{</span><span class="op" id="3896141">}</span><span class="op" id="3896142">)</span>&nbsp;<span class="op" id="3896144">(</span><span class="ident" id="3896145">Value</span><span class="op" id="3896150">,</span>&nbsp;<span class="builtintype" id="3896152">error</span><span class="op" id="3896157">)</span>&nbsp;<span class="op" id="3896159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896162">switch</span>&nbsp;<span class="ident" id="3896169">s</span>&nbsp;<span class="op" id="3896171">:=</span>&nbsp;<span class="ident" id="3896174">src</span><span class="op" id="3896177">.</span><span class="op" id="3896178">(</span><span class="keyword" id="3896179">type</span><span class="op" id="3896183">)</span>&nbsp;<span class="op" id="3896185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896188">case</span>&nbsp;<span class="builtintype" id="3896193">bool</span><span class="op" id="3896197">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896201">return</span>&nbsp;<span class="ident" id="3896208">s</span><span class="op" id="3896209">,</span>&nbsp;<span class="ident" id="3896211">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896216">case</span>&nbsp;<span class="builtintype" id="3896221">string</span><span class="op" id="3896227">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3896231">b</span><span class="op" id="3896232">,</span>&nbsp;<span class="ident" id="3896234">err</span>&nbsp;<span class="op" id="3896238">:=</span>&nbsp;<span class="ident" id="3896241">strconv</span><span class="op" id="3896248">.</span><span class="ident" id="3896249">ParseBool</span><span class="op" id="3896258">(</span><span class="ident" id="3896259">s</span><span class="op" id="3896260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896264">if</span>&nbsp;<span class="ident" id="3896267">err</span>&nbsp;<span class="op" id="3896271">!=</span>&nbsp;<span class="ident" id="3896274">nil</span>&nbsp;<span class="op" id="3896278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896283">return</span>&nbsp;<span class="ident" id="3896290">nil</span><span class="op" id="3896293">,</span>&nbsp;<span class="ident" id="3896295">fmt</span><span class="op" id="3896298">.</span><span class="ident" id="3896299">Errorf</span><span class="op" id="3896305">(</span><span class="string" id="3896306">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="3896354">,</span>&nbsp;<span class="ident" id="3896356">s</span><span class="op" id="3896357">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3896361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896365">return</span>&nbsp;<span class="ident" id="3896372">b</span><span class="op" id="3896373">,</span>&nbsp;<span class="ident" id="3896375">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896380">case</span>&nbsp;<span class="op" id="3896385">[</span><span class="op" id="3896386">]</span><span class="builtintype" id="3896387">byte</span><span class="op" id="3896391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3896395">b</span><span class="op" id="3896396">,</span>&nbsp;<span class="ident" id="3896398">err</span>&nbsp;<span class="op" id="3896402">:=</span>&nbsp;<span class="ident" id="3896405">strconv</span><span class="op" id="3896412">.</span><span class="ident" id="3896413">ParseBool</span><span class="op" id="3896422">(</span><span class="builtintype" id="3896423">string</span><span class="op" id="3896429">(</span><span class="ident" id="3896430">s</span><span class="op" id="3896431">)</span><span class="op" id="3896432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896436">if</span>&nbsp;<span class="ident" id="3896439">err</span>&nbsp;<span class="op" id="3896443">!=</span>&nbsp;<span class="ident" id="3896446">nil</span>&nbsp;<span class="op" id="3896450">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896455">return</span>&nbsp;<span class="ident" id="3896462">nil</span><span class="op" id="3896465">,</span>&nbsp;<span class="ident" id="3896467">fmt</span><span class="op" id="3896470">.</span><span class="ident" id="3896471">Errorf</span><span class="op" id="3896477">(</span><span class="string" id="3896478">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="3896526">,</span>&nbsp;<span class="ident" id="3896528">s</span><span class="op" id="3896529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3896533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896537">return</span>&nbsp;<span class="ident" id="3896544">b</span><span class="op" id="3896545">,</span>&nbsp;<span class="ident" id="3896547">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3896552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3896556">sv</span>&nbsp;<span class="op" id="3896559">:=</span>&nbsp;<span class="ident" id="3896562">reflect</span><span class="op" id="3896569">.</span><span class="ident" id="3896570">ValueOf</span><span class="op" id="3896577">(</span><span class="ident" id="3896578">src</span><span class="op" id="3896581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896584">switch</span>&nbsp;<span class="ident" id="3896591">sv</span><span class="op" id="3896593">.</span><span class="ident" id="3896594">Kind</span><span class="op" id="3896598">(</span><span class="op" id="3896599">)</span>&nbsp;<span class="op" id="3896601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896604">case</span>&nbsp;<span class="ident" id="3896609">reflect</span><span class="op" id="3896616">.</span><span class="ident" id="3896617">Int</span><span class="op" id="3896620">,</span>&nbsp;<span class="ident" id="3896622">reflect</span><span class="op" id="3896629">.</span><span class="ident" id="3896630">Int8</span><span class="op" id="3896634">,</span>&nbsp;<span class="ident" id="3896636">reflect</span><span class="op" id="3896643">.</span><span class="ident" id="3896644">Int16</span><span class="op" id="3896649">,</span>&nbsp;<span class="ident" id="3896651">reflect</span><span class="op" id="3896658">.</span><span class="ident" id="3896659">Int32</span><span class="op" id="3896664">,</span>&nbsp;<span class="ident" id="3896666">reflect</span><span class="op" id="3896673">.</span><span class="ident" id="3896674">Int64</span><span class="op" id="3896679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3896683">iv</span>&nbsp;<span class="op" id="3896686">:=</span>&nbsp;<span class="ident" id="3896689">sv</span><span class="op" id="3896691">.</span><span class="ident" id="3896692">Int</span><span class="op" id="3896695">(</span><span class="op" id="3896696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896700">if</span>&nbsp;<span class="ident" id="3896703">iv</span>&nbsp;<span class="op" id="3896706">==</span>&nbsp;<span class="num" id="3896709">1</span>&nbsp;<span class="op" id="3896711">||</span>&nbsp;<span class="ident" id="3896714">iv</span>&nbsp;<span class="op" id="3896717">==</span>&nbsp;<span class="num" id="3896720">0</span>&nbsp;<span class="op" id="3896722">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896727">return</span>&nbsp;<span class="ident" id="3896734">iv</span>&nbsp;<span class="op" id="3896737">==</span>&nbsp;<span class="num" id="3896740">1</span><span class="op" id="3896741">,</span>&nbsp;<span class="ident" id="3896743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3896749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896753">return</span>&nbsp;<span class="ident" id="3896760">nil</span><span class="op" id="3896763">,</span>&nbsp;<span class="ident" id="3896765">fmt</span><span class="op" id="3896768">.</span><span class="ident" id="3896769">Errorf</span><span class="op" id="3896775">(</span><span class="string" id="3896776">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="3896824">,</span>&nbsp;<span class="ident" id="3896826">iv</span><span class="op" id="3896828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896831">case</span>&nbsp;<span class="ident" id="3896836">reflect</span><span class="op" id="3896843">.</span><span class="ident" id="3896844">Uint</span><span class="op" id="3896848">,</span>&nbsp;<span class="ident" id="3896850">reflect</span><span class="op" id="3896857">.</span><span class="ident" id="3896858">Uint8</span><span class="op" id="3896863">,</span>&nbsp;<span class="ident" id="3896865">reflect</span><span class="op" id="3896872">.</span><span class="ident" id="3896873">Uint16</span><span class="op" id="3896879">,</span>&nbsp;<span class="ident" id="3896881">reflect</span><span class="op" id="3896888">.</span><span class="ident" id="3896889">Uint32</span><span class="op" id="3896895">,</span>&nbsp;<span class="ident" id="3896897">reflect</span><span class="op" id="3896904">.</span><span class="ident" id="3896905">Uint64</span><span class="op" id="3896911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3896915">uv</span>&nbsp;<span class="op" id="3896918">:=</span>&nbsp;<span class="ident" id="3896921">sv</span><span class="op" id="3896923">.</span><span class="ident" id="3896924">Uint</span><span class="op" id="3896928">(</span><span class="op" id="3896929">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896933">if</span>&nbsp;<span class="ident" id="3896936">uv</span>&nbsp;<span class="op" id="3896939">==</span>&nbsp;<span class="num" id="3896942">1</span>&nbsp;<span class="op" id="3896944">||</span>&nbsp;<span class="ident" id="3896947">uv</span>&nbsp;<span class="op" id="3896950">==</span>&nbsp;<span class="num" id="3896953">0</span>&nbsp;<span class="op" id="3896955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896960">return</span>&nbsp;<span class="ident" id="3896967">uv</span>&nbsp;<span class="op" id="3896970">==</span>&nbsp;<span class="num" id="3896973">1</span><span class="op" id="3896974">,</span>&nbsp;<span class="ident" id="3896976">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3896982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3896986">return</span>&nbsp;<span class="ident" id="3896993">nil</span><span class="op" id="3896996">,</span>&nbsp;<span class="ident" id="3896998">fmt</span><span class="op" id="3897001">.</span><span class="ident" id="3897002">Errorf</span><span class="op" id="3897008">(</span><span class="string" id="3897009">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="3897057">,</span>&nbsp;<span class="ident" id="3897059">uv</span><span class="op" id="3897061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3897064">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897068">return</span>&nbsp;<span class="ident" id="3897075">nil</span><span class="op" id="3897078">,</span>&nbsp;<span class="ident" id="3897080">fmt</span><span class="op" id="3897083">.</span><span class="ident" id="3897084">Errorf</span><span class="op" id="3897090">(</span><span class="string" id="3897091">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%v&nbsp;(%T)&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="3897144">,</span>&nbsp;<span class="ident" id="3897146">src</span><span class="op" id="3897149">,</span>&nbsp;<span class="ident" id="3897151">src</span><span class="op" id="3897154">)</span><br>
<span class="lineno"></span><span class="op" id="3897156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3897159">//&nbsp;Int32&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;int64,</span><br>
<span class="lineno">100</span><span class="comment" id="3897225">//&nbsp;respecting&nbsp;the&nbsp;limits&nbsp;of&nbsp;an&nbsp;int32&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3897269">var</span>&nbsp;<span class="ident" id="3897273">Int32</span>&nbsp;<span class="ident" id="3897279">int32Type</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3897290">type</span>&nbsp;<span class="ident" id="3897295">int32Type</span>&nbsp;<span class="keyword" id="3897305">struct</span><span class="op" id="3897311">{</span><span class="op" id="3897312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="3897315">var</span>&nbsp;<span class="ident" id="3897319">_</span>&nbsp;<span class="ident" id="3897321">ValueConverter</span>&nbsp;<span class="op" id="3897336">=</span>&nbsp;<span class="ident" id="3897338">int32Type</span><span class="op" id="3897347">{</span><span class="op" id="3897348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3897351">func</span>&nbsp;<span class="op" id="3897356">(</span><span class="ident" id="3897357">int32Type</span><span class="op" id="3897366">)</span>&nbsp;<span class="ident" id="3897368">ConvertValue</span><span class="op" id="3897380">(</span><span class="ident" id="3897381">v</span>&nbsp;<span class="keyword" id="3897383">interface</span><span class="op" id="3897392">{</span><span class="op" id="3897393">}</span><span class="op" id="3897394">)</span>&nbsp;<span class="op" id="3897396">(</span><span class="ident" id="3897397">Value</span><span class="op" id="3897402">,</span>&nbsp;<span class="builtintype" id="3897404">error</span><span class="op" id="3897409">)</span>&nbsp;<span class="op" id="3897411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3897414">rv</span>&nbsp;<span class="op" id="3897417">:=</span>&nbsp;<span class="ident" id="3897420">reflect</span><span class="op" id="3897427">.</span><span class="ident" id="3897428">ValueOf</span><span class="op" id="3897435">(</span><span class="ident" id="3897436">v</span><span class="op" id="3897437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897440">switch</span>&nbsp;<span class="ident" id="3897447">rv</span><span class="op" id="3897449">.</span><span class="ident" id="3897450">Kind</span><span class="op" id="3897454">(</span><span class="op" id="3897455">)</span>&nbsp;<span class="op" id="3897457">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897460">case</span>&nbsp;<span class="ident" id="3897465">reflect</span><span class="op" id="3897472">.</span><span class="ident" id="3897473">Int</span><span class="op" id="3897476">,</span>&nbsp;<span class="ident" id="3897478">reflect</span><span class="op" id="3897485">.</span><span class="ident" id="3897486">Int8</span><span class="op" id="3897490">,</span>&nbsp;<span class="ident" id="3897492">reflect</span><span class="op" id="3897499">.</span><span class="ident" id="3897500">Int16</span><span class="op" id="3897505">,</span>&nbsp;<span class="ident" id="3897507">reflect</span><span class="op" id="3897514">.</span><span class="ident" id="3897515">Int32</span><span class="op" id="3897520">,</span>&nbsp;<span class="ident" id="3897522">reflect</span><span class="op" id="3897529">.</span><span class="ident" id="3897530">Int64</span><span class="op" id="3897535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3897539">i64</span>&nbsp;<span class="op" id="3897543">:=</span>&nbsp;<span class="ident" id="3897546">rv</span><span class="op" id="3897548">.</span><span class="ident" id="3897549">Int</span><span class="op" id="3897552">(</span><span class="op" id="3897553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897557">if</span>&nbsp;<span class="ident" id="3897560">i64</span>&nbsp;<span class="op" id="3897564">&gt;</span>&nbsp;<span class="op" id="3897566">(</span><span class="num" id="3897567">1</span><span class="op" id="3897568">&lt;&lt;</span><span class="num" id="3897570">31</span><span class="op" id="3897572">)</span><span class="op" id="3897573">-</span><span class="num" id="3897574">1</span>&nbsp;<span class="op" id="3897576">||</span>&nbsp;<span class="ident" id="3897579">i64</span>&nbsp;<span class="op" id="3897583">&lt;</span>&nbsp;<span class="op" id="3897585">-</span><span class="op" id="3897586">(</span><span class="num" id="3897587">1</span><span class="op" id="3897588">&lt;&lt;</span><span class="num" id="3897590">31</span><span class="op" id="3897592">)</span>&nbsp;<span class="op" id="3897594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897599">return</span>&nbsp;<span class="ident" id="3897606">nil</span><span class="op" id="3897609">,</span>&nbsp;<span class="ident" id="3897611">fmt</span><span class="op" id="3897614">.</span><span class="ident" id="3897615">Errorf</span><span class="op" id="3897621">(</span><span class="string" id="3897622">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="3897660">,</span>&nbsp;<span class="ident" id="3897662">v</span><span class="op" id="3897663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3897667">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897671">return</span>&nbsp;<span class="ident" id="3897678">i64</span><span class="op" id="3897681">,</span>&nbsp;<span class="ident" id="3897683">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897688">case</span>&nbsp;<span class="ident" id="3897693">reflect</span><span class="op" id="3897700">.</span><span class="ident" id="3897701">Uint</span><span class="op" id="3897705">,</span>&nbsp;<span class="ident" id="3897707">reflect</span><span class="op" id="3897714">.</span><span class="ident" id="3897715">Uint8</span><span class="op" id="3897720">,</span>&nbsp;<span class="ident" id="3897722">reflect</span><span class="op" id="3897729">.</span><span class="ident" id="3897730">Uint16</span><span class="op" id="3897736">,</span>&nbsp;<span class="ident" id="3897738">reflect</span><span class="op" id="3897745">.</span><span class="ident" id="3897746">Uint32</span><span class="op" id="3897752">,</span>&nbsp;<span class="ident" id="3897754">reflect</span><span class="op" id="3897761">.</span><span class="ident" id="3897762">Uint64</span><span class="op" id="3897768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3897772">u64</span>&nbsp;<span class="op" id="3897776">:=</span>&nbsp;<span class="ident" id="3897779">rv</span><span class="op" id="3897781">.</span><span class="ident" id="3897782">Uint</span><span class="op" id="3897786">(</span><span class="op" id="3897787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897791">if</span>&nbsp;<span class="ident" id="3897794">u64</span>&nbsp;<span class="op" id="3897798">&gt;</span>&nbsp;<span class="op" id="3897800">(</span><span class="num" id="3897801">1</span><span class="op" id="3897802">&lt;&lt;</span><span class="num" id="3897804">31</span><span class="op" id="3897806">)</span><span class="op" id="3897807">-</span><span class="num" id="3897808">1</span>&nbsp;<span class="op" id="3897810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897815">return</span>&nbsp;<span class="ident" id="3897822">nil</span><span class="op" id="3897825">,</span>&nbsp;<span class="ident" id="3897827">fmt</span><span class="op" id="3897830">.</span><span class="ident" id="3897831">Errorf</span><span class="op" id="3897837">(</span><span class="string" id="3897838">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="3897876">,</span>&nbsp;<span class="ident" id="3897878">v</span><span class="op" id="3897879">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3897883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897887">return</span>&nbsp;<span class="ident" id="3897894">int64</span><span class="op" id="3897899">(</span><span class="ident" id="3897900">u64</span><span class="op" id="3897903">)</span><span class="op" id="3897904">,</span>&nbsp;<span class="ident" id="3897906">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897911">case</span>&nbsp;<span class="ident" id="3897916">reflect</span><span class="op" id="3897923">.</span><span class="ident" id="3897924">String</span><span class="op" id="3897930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3897934">i</span><span class="op" id="3897935">,</span>&nbsp;<span class="ident" id="3897937">err</span>&nbsp;<span class="op" id="3897941">:=</span>&nbsp;<span class="ident" id="3897944">strconv</span><span class="op" id="3897951">.</span><span class="ident" id="3897952">Atoi</span><span class="op" id="3897956">(</span><span class="ident" id="3897957">rv</span><span class="op" id="3897959">.</span><span class="ident" id="3897960">String</span><span class="op" id="3897966">(</span><span class="op" id="3897967">)</span><span class="op" id="3897968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897972">if</span>&nbsp;<span class="ident" id="3897975">err</span>&nbsp;<span class="op" id="3897979">!=</span>&nbsp;<span class="ident" id="3897982">nil</span>&nbsp;<span class="op" id="3897986">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3897991">return</span>&nbsp;<span class="ident" id="3897998">nil</span><span class="op" id="3898001">,</span>&nbsp;<span class="ident" id="3898003">fmt</span><span class="op" id="3898006">.</span><span class="ident" id="3898007">Errorf</span><span class="op" id="3898013">(</span><span class="string" id="3898014">&#34;sql/driver:&nbsp;value&nbsp;%q&nbsp;can&#39;t&nbsp;be&nbsp;converted&nbsp;to&nbsp;int32&#34;</span><span class="op" id="3898064">,</span>&nbsp;<span class="ident" id="3898066">v</span><span class="op" id="3898067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3898071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898075">return</span>&nbsp;<span class="ident" id="3898082">int64</span><span class="op" id="3898087">(</span><span class="ident" id="3898088">i</span><span class="op" id="3898089">)</span><span class="op" id="3898090">,</span>&nbsp;<span class="ident" id="3898092">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3898097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898100">return</span>&nbsp;<span class="ident" id="3898107">nil</span><span class="op" id="3898110">,</span>&nbsp;<span class="ident" id="3898112">fmt</span><span class="op" id="3898115">.</span><span class="ident" id="3898116">Errorf</span><span class="op" id="3898122">(</span><span class="string" id="3898123">&#34;sql/driver:&nbsp;unsupported&nbsp;value&nbsp;%v&nbsp;(type&nbsp;%T)&nbsp;converting&nbsp;to&nbsp;int32&#34;</span><span class="op" id="3898187">,</span>&nbsp;<span class="ident" id="3898189">v</span><span class="op" id="3898190">,</span>&nbsp;<span class="ident" id="3898192">v</span><span class="op" id="3898193">)</span><br>
<span class="lineno">130</span><span class="op" id="3898195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3898198">//&nbsp;String&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;its&nbsp;input&nbsp;to&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3898265">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;already&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte,&nbsp;it&#39;s&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="3898328">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;of&nbsp;another&nbsp;type,&nbsp;conversion&nbsp;to&nbsp;string&nbsp;is&nbsp;done</span><br>
<span class="lineno">135</span><span class="comment" id="3898393">//&nbsp;with&nbsp;fmt.Sprintf(&#34;%v&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="3898423">var</span>&nbsp;<span class="ident" id="3898427">String</span>&nbsp;<span class="ident" id="3898434">stringType</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3898446">type</span>&nbsp;<span class="ident" id="3898451">stringType</span>&nbsp;<span class="keyword" id="3898462">struct</span><span class="op" id="3898468">{</span><span class="op" id="3898469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3898472">func</span>&nbsp;<span class="op" id="3898477">(</span><span class="ident" id="3898478">stringType</span><span class="op" id="3898488">)</span>&nbsp;<span class="ident" id="3898490">ConvertValue</span><span class="op" id="3898502">(</span><span class="ident" id="3898503">v</span>&nbsp;<span class="keyword" id="3898505">interface</span><span class="op" id="3898514">{</span><span class="op" id="3898515">}</span><span class="op" id="3898516">)</span>&nbsp;<span class="op" id="3898518">(</span><span class="ident" id="3898519">Value</span><span class="op" id="3898524">,</span>&nbsp;<span class="builtintype" id="3898526">error</span><span class="op" id="3898531">)</span>&nbsp;<span class="op" id="3898533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898536">switch</span>&nbsp;<span class="ident" id="3898543">v</span><span class="op" id="3898544">.</span><span class="op" id="3898545">(</span><span class="keyword" id="3898546">type</span><span class="op" id="3898550">)</span>&nbsp;<span class="op" id="3898552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898555">case</span>&nbsp;<span class="builtintype" id="3898560">string</span><span class="op" id="3898566">,</span>&nbsp;<span class="op" id="3898568">[</span><span class="op" id="3898569">]</span><span class="builtintype" id="3898570">byte</span><span class="op" id="3898574">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898578">return</span>&nbsp;<span class="ident" id="3898585">v</span><span class="op" id="3898586">,</span>&nbsp;<span class="ident" id="3898588">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3898593">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898596">return</span>&nbsp;<span class="ident" id="3898603">fmt</span><span class="op" id="3898606">.</span><span class="ident" id="3898607">Sprintf</span><span class="op" id="3898614">(</span><span class="string" id="3898615">&#34;%v&#34;</span><span class="op" id="3898619">,</span>&nbsp;<span class="ident" id="3898621">v</span><span class="op" id="3898622">)</span><span class="op" id="3898623">,</span>&nbsp;<span class="ident" id="3898625">nil</span><br>
<span class="lineno"></span><span class="op" id="3898629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3898632">//&nbsp;Null&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;allowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3898697">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno">150</span><span class="keyword" id="3898759">type</span>&nbsp;<span class="ident" id="3898764">Null</span>&nbsp;<span class="keyword" id="3898769">struct</span>&nbsp;<span class="op" id="3898776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3898779">Converter</span>&nbsp;<span class="ident" id="3898789">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="3898804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3898807">func</span>&nbsp;<span class="op" id="3898812">(</span><span class="ident" id="3898813">n</span>&nbsp;<span class="ident" id="3898815">Null</span><span class="op" id="3898819">)</span>&nbsp;<span class="ident" id="3898821">ConvertValue</span><span class="op" id="3898833">(</span><span class="ident" id="3898834">v</span>&nbsp;<span class="keyword" id="3898836">interface</span><span class="op" id="3898845">{</span><span class="op" id="3898846">}</span><span class="op" id="3898847">)</span>&nbsp;<span class="op" id="3898849">(</span><span class="ident" id="3898850">Value</span><span class="op" id="3898855">,</span>&nbsp;<span class="builtintype" id="3898857">error</span><span class="op" id="3898862">)</span>&nbsp;<span class="op" id="3898864">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898867">if</span>&nbsp;<span class="ident" id="3898870">v</span>&nbsp;<span class="op" id="3898872">==</span>&nbsp;<span class="ident" id="3898875">nil</span>&nbsp;<span class="op" id="3898879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898883">return</span>&nbsp;<span class="ident" id="3898890">nil</span><span class="op" id="3898893">,</span>&nbsp;<span class="ident" id="3898895">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3898900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3898903">return</span>&nbsp;<span class="ident" id="3898910">n</span><span class="op" id="3898911">.</span><span class="ident" id="3898912">Converter</span><span class="op" id="3898921">.</span><span class="ident" id="3898922">ConvertValue</span><span class="op" id="3898934">(</span><span class="ident" id="3898935">v</span><span class="op" id="3898936">)</span><br>
<span class="lineno"></span><span class="op" id="3898938">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="3898941">//&nbsp;NotNull&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;disallowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3899012">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno"></span><span class="keyword" id="3899074">type</span>&nbsp;<span class="ident" id="3899079">NotNull</span>&nbsp;<span class="keyword" id="3899087">struct</span>&nbsp;<span class="op" id="3899094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3899097">Converter</span>&nbsp;<span class="ident" id="3899107">ValueConverter</span><br>
<span class="lineno">165</span><span class="op" id="3899122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3899125">func</span>&nbsp;<span class="op" id="3899130">(</span><span class="ident" id="3899131">n</span>&nbsp;<span class="ident" id="3899133">NotNull</span><span class="op" id="3899140">)</span>&nbsp;<span class="ident" id="3899142">ConvertValue</span><span class="op" id="3899154">(</span><span class="ident" id="3899155">v</span>&nbsp;<span class="keyword" id="3899157">interface</span><span class="op" id="3899166">{</span><span class="op" id="3899167">}</span><span class="op" id="3899168">)</span>&nbsp;<span class="op" id="3899170">(</span><span class="ident" id="3899171">Value</span><span class="op" id="3899176">,</span>&nbsp;<span class="builtintype" id="3899178">error</span><span class="op" id="3899183">)</span>&nbsp;<span class="op" id="3899185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899188">if</span>&nbsp;<span class="ident" id="3899191">v</span>&nbsp;<span class="op" id="3899193">==</span>&nbsp;<span class="ident" id="3899196">nil</span>&nbsp;<span class="op" id="3899200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899204">return</span>&nbsp;<span class="ident" id="3899211">nil</span><span class="op" id="3899214">,</span>&nbsp;<span class="ident" id="3899216">fmt</span><span class="op" id="3899219">.</span><span class="ident" id="3899220">Errorf</span><span class="op" id="3899226">(</span><span class="string" id="3899227">&#34;nil&nbsp;value&nbsp;not&nbsp;allowed&#34;</span><span class="op" id="3899250">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3899253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899256">return</span>&nbsp;<span class="ident" id="3899263">n</span><span class="op" id="3899264">.</span><span class="ident" id="3899265">Converter</span><span class="op" id="3899274">.</span><span class="ident" id="3899275">ConvertValue</span><span class="op" id="3899287">(</span><span class="ident" id="3899288">v</span><span class="op" id="3899289">)</span><br>
<span class="lineno"></span><span class="op" id="3899291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3899294">//&nbsp;IsValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;parameter&nbsp;type.</span><br>
<span class="lineno">175</span><span class="comment" id="3899356">//&nbsp;Unlike&nbsp;IsScanValue,&nbsp;IsValue&nbsp;permits&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3899412">func</span>&nbsp;<span class="ident" id="3899417">IsValue</span><span class="op" id="3899424">(</span><span class="ident" id="3899425">v</span>&nbsp;<span class="keyword" id="3899427">interface</span><span class="op" id="3899436">{</span><span class="op" id="3899437">}</span><span class="op" id="3899438">)</span>&nbsp;<span class="builtintype" id="3899440">bool</span>&nbsp;<span class="op" id="3899445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899448">if</span>&nbsp;<span class="ident" id="3899451">IsScanValue</span><span class="op" id="3899462">(</span><span class="ident" id="3899463">v</span><span class="op" id="3899464">)</span>&nbsp;<span class="op" id="3899466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899470">return</span>&nbsp;<span class="builtintype" id="3899477">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3899483">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899486">if</span>&nbsp;<span class="ident" id="3899489">_</span><span class="op" id="3899490">,</span>&nbsp;<span class="ident" id="3899492">ok</span>&nbsp;<span class="op" id="3899495">:=</span>&nbsp;<span class="ident" id="3899498">v</span><span class="op" id="3899499">.</span><span class="op" id="3899500">(</span><span class="builtintype" id="3899501">string</span><span class="op" id="3899507">)</span><span class="op" id="3899508">;</span>&nbsp;<span class="ident" id="3899510">ok</span>&nbsp;<span class="op" id="3899513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899517">return</span>&nbsp;<span class="builtintype" id="3899524">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3899530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899533">return</span>&nbsp;<span class="builtintype" id="3899540">false</span><br>
<span class="lineno"></span><span class="op" id="3899546">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="3899549">//&nbsp;IsScanValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;scan&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="3899610">//&nbsp;Unlike&nbsp;IsValue,&nbsp;IsScanValue&nbsp;does&nbsp;not&nbsp;permit&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3899674">func</span>&nbsp;<span class="ident" id="3899679">IsScanValue</span><span class="op" id="3899690">(</span><span class="ident" id="3899691">v</span>&nbsp;<span class="keyword" id="3899693">interface</span><span class="op" id="3899702">{</span><span class="op" id="3899703">}</span><span class="op" id="3899704">)</span>&nbsp;<span class="builtintype" id="3899706">bool</span>&nbsp;<span class="op" id="3899711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899714">if</span>&nbsp;<span class="ident" id="3899717">v</span>&nbsp;<span class="op" id="3899719">==</span>&nbsp;<span class="ident" id="3899722">nil</span>&nbsp;<span class="op" id="3899726">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899730">return</span>&nbsp;<span class="builtintype" id="3899737">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3899743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899746">switch</span>&nbsp;<span class="ident" id="3899753">v</span><span class="op" id="3899754">.</span><span class="op" id="3899755">(</span><span class="keyword" id="3899756">type</span><span class="op" id="3899760">)</span>&nbsp;<span class="op" id="3899762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899765">case</span>&nbsp;<span class="ident" id="3899770">int64</span><span class="op" id="3899775">,</span>&nbsp;<span class="builtintype" id="3899777">float64</span><span class="op" id="3899784">,</span>&nbsp;<span class="op" id="3899786">[</span><span class="op" id="3899787">]</span><span class="builtintype" id="3899788">byte</span><span class="op" id="3899792">,</span>&nbsp;<span class="builtintype" id="3899794">bool</span><span class="op" id="3899798">,</span>&nbsp;<span class="ident" id="3899800">time</span><span class="op" id="3899804">.</span><span class="ident" id="3899805">Time</span><span class="op" id="3899809">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899813">return</span>&nbsp;<span class="builtintype" id="3899820">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3899826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3899829">return</span>&nbsp;<span class="builtintype" id="3899836">false</span><br>
<span class="lineno"></span><span class="op" id="3899842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3899845">//&nbsp;DefaultParameterConverter&nbsp;is&nbsp;the&nbsp;default&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">200</span><span class="comment" id="3899907">//&nbsp;ValueConverter&nbsp;that&#39;s&nbsp;used&nbsp;when&nbsp;a&nbsp;Stmt&nbsp;doesn&#39;t&nbsp;implement</span><br>
<span class="lineno"></span><span class="comment" id="3899967">//&nbsp;ColumnConverter.</span><br>
<span class="lineno"></span><span class="comment" id="3899987">//</span><br>
<span class="lineno"></span><span class="comment" id="3899990">//&nbsp;DefaultParameterConverter&nbsp;returns&nbsp;the&nbsp;given&nbsp;value&nbsp;directly&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3900055">//&nbsp;IsValue(value).&nbsp;&nbsp;Otherwise&nbsp;integer&nbsp;type&nbsp;are&nbsp;converted&nbsp;to</span><br>
<span class="lineno">205</span><span class="comment" id="3900115">//&nbsp;int64,&nbsp;floats&nbsp;to&nbsp;float64,&nbsp;and&nbsp;strings&nbsp;to&nbsp;[]byte.&nbsp;&nbsp;Other&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3900184">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3900197">var</span>&nbsp;<span class="ident" id="3900201">DefaultParameterConverter</span>&nbsp;<span class="ident" id="3900227">defaultConverter</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3900245">type</span>&nbsp;<span class="ident" id="3900250">defaultConverter</span>&nbsp;<span class="keyword" id="3900267">struct</span><span class="op" id="3900273">{</span><span class="op" id="3900274">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="3900277">var</span>&nbsp;<span class="ident" id="3900281">_</span>&nbsp;<span class="ident" id="3900283">ValueConverter</span>&nbsp;<span class="op" id="3900298">=</span>&nbsp;<span class="ident" id="3900300">defaultConverter</span><span class="op" id="3900316">{</span><span class="op" id="3900317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3900320">func</span>&nbsp;<span class="op" id="3900325">(</span><span class="ident" id="3900326">defaultConverter</span><span class="op" id="3900342">)</span>&nbsp;<span class="ident" id="3900344">ConvertValue</span><span class="op" id="3900356">(</span><span class="ident" id="3900357">v</span>&nbsp;<span class="keyword" id="3900359">interface</span><span class="op" id="3900368">{</span><span class="op" id="3900369">}</span><span class="op" id="3900370">)</span>&nbsp;<span class="op" id="3900372">(</span><span class="ident" id="3900373">Value</span><span class="op" id="3900378">,</span>&nbsp;<span class="builtintype" id="3900380">error</span><span class="op" id="3900385">)</span>&nbsp;<span class="op" id="3900387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900390">if</span>&nbsp;<span class="ident" id="3900393">IsValue</span><span class="op" id="3900400">(</span><span class="ident" id="3900401">v</span><span class="op" id="3900402">)</span>&nbsp;<span class="op" id="3900404">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900408">return</span>&nbsp;<span class="ident" id="3900415">v</span><span class="op" id="3900416">,</span>&nbsp;<span class="ident" id="3900418">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900427">if</span>&nbsp;<span class="ident" id="3900430">svi</span><span class="op" id="3900433">,</span>&nbsp;<span class="ident" id="3900435">ok</span>&nbsp;<span class="op" id="3900438">:=</span>&nbsp;<span class="ident" id="3900441">v</span><span class="op" id="3900442">.</span><span class="op" id="3900443">(</span><span class="ident" id="3900444">Valuer</span><span class="op" id="3900450">)</span><span class="op" id="3900451">;</span>&nbsp;<span class="ident" id="3900453">ok</span>&nbsp;<span class="op" id="3900456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3900460">sv</span><span class="op" id="3900462">,</span>&nbsp;<span class="ident" id="3900464">err</span>&nbsp;<span class="op" id="3900468">:=</span>&nbsp;<span class="ident" id="3900471">svi</span><span class="op" id="3900474">.</span><span class="ident" id="3900475">Value</span><span class="op" id="3900480">(</span><span class="op" id="3900481">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900485">if</span>&nbsp;<span class="ident" id="3900488">err</span>&nbsp;<span class="op" id="3900492">!=</span>&nbsp;<span class="ident" id="3900495">nil</span>&nbsp;<span class="op" id="3900499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900504">return</span>&nbsp;<span class="ident" id="3900511">nil</span><span class="op" id="3900514">,</span>&nbsp;<span class="ident" id="3900516">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900526">if</span>&nbsp;<span class="op" id="3900529">!</span><span class="ident" id="3900530">IsValue</span><span class="op" id="3900537">(</span><span class="ident" id="3900538">sv</span><span class="op" id="3900540">)</span>&nbsp;<span class="op" id="3900542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900547">return</span>&nbsp;<span class="ident" id="3900554">nil</span><span class="op" id="3900557">,</span>&nbsp;<span class="ident" id="3900559">fmt</span><span class="op" id="3900562">.</span><span class="ident" id="3900563">Errorf</span><span class="op" id="3900569">(</span><span class="string" id="3900570">&#34;non-Value&nbsp;type&nbsp;%T&nbsp;returned&nbsp;from&nbsp;Value&#34;</span><span class="op" id="3900609">,</span>&nbsp;<span class="ident" id="3900611">sv</span><span class="op" id="3900613">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900621">return</span>&nbsp;<span class="ident" id="3900628">sv</span><span class="op" id="3900630">,</span>&nbsp;<span class="ident" id="3900632">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3900641">rv</span>&nbsp;<span class="op" id="3900644">:=</span>&nbsp;<span class="ident" id="3900647">reflect</span><span class="op" id="3900654">.</span><span class="ident" id="3900655">ValueOf</span><span class="op" id="3900662">(</span><span class="ident" id="3900663">v</span><span class="op" id="3900664">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900667">switch</span>&nbsp;<span class="ident" id="3900674">rv</span><span class="op" id="3900676">.</span><span class="ident" id="3900677">Kind</span><span class="op" id="3900681">(</span><span class="op" id="3900682">)</span>&nbsp;<span class="op" id="3900684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900687">case</span>&nbsp;<span class="ident" id="3900692">reflect</span><span class="op" id="3900699">.</span><span class="ident" id="3900700">Ptr</span><span class="op" id="3900703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3900707">//&nbsp;indirect&nbsp;pointers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900730">if</span>&nbsp;<span class="ident" id="3900733">rv</span><span class="op" id="3900735">.</span><span class="ident" id="3900736">IsNil</span><span class="op" id="3900741">(</span><span class="op" id="3900742">)</span>&nbsp;<span class="op" id="3900744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900749">return</span>&nbsp;<span class="ident" id="3900756">nil</span><span class="op" id="3900759">,</span>&nbsp;<span class="ident" id="3900761">nil</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900767">}</span>&nbsp;<span class="keyword" id="3900769">else</span>&nbsp;<span class="op" id="3900774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900779">return</span>&nbsp;<span class="ident" id="3900786">defaultConverter</span><span class="op" id="3900802">{</span><span class="op" id="3900803">}</span><span class="op" id="3900804">.</span><span class="ident" id="3900805">ConvertValue</span><span class="op" id="3900817">(</span><span class="ident" id="3900818">rv</span><span class="op" id="3900820">.</span><span class="ident" id="3900821">Elem</span><span class="op" id="3900825">(</span><span class="op" id="3900826">)</span><span class="op" id="3900827">.</span><span class="ident" id="3900828">Interface</span><span class="op" id="3900837">(</span><span class="op" id="3900838">)</span><span class="op" id="3900839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3900843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900846">case</span>&nbsp;<span class="ident" id="3900851">reflect</span><span class="op" id="3900858">.</span><span class="ident" id="3900859">Int</span><span class="op" id="3900862">,</span>&nbsp;<span class="ident" id="3900864">reflect</span><span class="op" id="3900871">.</span><span class="ident" id="3900872">Int8</span><span class="op" id="3900876">,</span>&nbsp;<span class="ident" id="3900878">reflect</span><span class="op" id="3900885">.</span><span class="ident" id="3900886">Int16</span><span class="op" id="3900891">,</span>&nbsp;<span class="ident" id="3900893">reflect</span><span class="op" id="3900900">.</span><span class="ident" id="3900901">Int32</span><span class="op" id="3900906">,</span>&nbsp;<span class="ident" id="3900908">reflect</span><span class="op" id="3900915">.</span><span class="ident" id="3900916">Int64</span><span class="op" id="3900921">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900925">return</span>&nbsp;<span class="ident" id="3900932">rv</span><span class="op" id="3900934">.</span><span class="ident" id="3900935">Int</span><span class="op" id="3900938">(</span><span class="op" id="3900939">)</span><span class="op" id="3900940">,</span>&nbsp;<span class="ident" id="3900942">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3900947">case</span>&nbsp;<span class="ident" id="3900952">reflect</span><span class="op" id="3900959">.</span><span class="ident" id="3900960">Uint</span><span class="op" id="3900964">,</span>&nbsp;<span class="ident" id="3900966">reflect</span><span class="op" id="3900973">.</span><span class="ident" id="3900974">Uint8</span><span class="op" id="3900979">,</span>&nbsp;<span class="ident" id="3900981">reflect</span><span class="op" id="3900988">.</span><span class="ident" id="3900989">Uint16</span><span class="op" id="3900995">,</span>&nbsp;<span class="ident" id="3900997">reflect</span><span class="op" id="3901004">.</span><span class="ident" id="3901005">Uint32</span><span class="op" id="3901011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901015">return</span>&nbsp;<span class="ident" id="3901022">int64</span><span class="op" id="3901027">(</span><span class="ident" id="3901028">rv</span><span class="op" id="3901030">.</span><span class="ident" id="3901031">Uint</span><span class="op" id="3901035">(</span><span class="op" id="3901036">)</span><span class="op" id="3901037">)</span><span class="op" id="3901038">,</span>&nbsp;<span class="ident" id="3901040">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901045">case</span>&nbsp;<span class="ident" id="3901050">reflect</span><span class="op" id="3901057">.</span><span class="ident" id="3901058">Uint64</span><span class="op" id="3901064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3901068">u64</span>&nbsp;<span class="op" id="3901072">:=</span>&nbsp;<span class="ident" id="3901075">rv</span><span class="op" id="3901077">.</span><span class="ident" id="3901078">Uint</span><span class="op" id="3901082">(</span><span class="op" id="3901083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901087">if</span>&nbsp;<span class="ident" id="3901090">u64</span>&nbsp;<span class="op" id="3901094">&gt;=</span>&nbsp;<span class="num" id="3901097">1</span><span class="op" id="3901098">&lt;&lt;</span><span class="num" id="3901100">63</span>&nbsp;<span class="op" id="3901103">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901108">return</span>&nbsp;<span class="ident" id="3901115">nil</span><span class="op" id="3901118">,</span>&nbsp;<span class="ident" id="3901120">fmt</span><span class="op" id="3901123">.</span><span class="ident" id="3901124">Errorf</span><span class="op" id="3901130">(</span><span class="string" id="3901131">&#34;uint64&nbsp;values&nbsp;with&nbsp;high&nbsp;bit&nbsp;set&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="3901182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3901186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901190">return</span>&nbsp;<span class="ident" id="3901197">int64</span><span class="op" id="3901202">(</span><span class="ident" id="3901203">u64</span><span class="op" id="3901206">)</span><span class="op" id="3901207">,</span>&nbsp;<span class="ident" id="3901209">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901214">case</span>&nbsp;<span class="ident" id="3901219">reflect</span><span class="op" id="3901226">.</span><span class="ident" id="3901227">Float32</span><span class="op" id="3901234">,</span>&nbsp;<span class="ident" id="3901236">reflect</span><span class="op" id="3901243">.</span><span class="ident" id="3901244">Float64</span><span class="op" id="3901251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901255">return</span>&nbsp;<span class="ident" id="3901262">rv</span><span class="op" id="3901264">.</span><span class="ident" id="3901265">Float</span><span class="op" id="3901270">(</span><span class="op" id="3901271">)</span><span class="op" id="3901272">,</span>&nbsp;<span class="ident" id="3901274">nil</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3901279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3901282">return</span>&nbsp;<span class="ident" id="3901289">nil</span><span class="op" id="3901292">,</span>&nbsp;<span class="ident" id="3901294">fmt</span><span class="op" id="3901297">.</span><span class="ident" id="3901298">Errorf</span><span class="op" id="3901304">(</span><span class="string" id="3901305">&#34;unsupported&nbsp;type&nbsp;%T,&nbsp;a&nbsp;%s&#34;</span><span class="op" id="3901332">,</span>&nbsp;<span class="ident" id="3901334">v</span><span class="op" id="3901335">,</span>&nbsp;<span class="ident" id="3901337">rv</span><span class="op" id="3901339">.</span><span class="ident" id="3901340">Kind</span><span class="op" id="3901344">(</span><span class="op" id="3901345">)</span><span class="op" id="3901346">)</span><br>
<span class="lineno"></span><span class="op" id="3901348">}</span>
</div>
</body>
</html>
