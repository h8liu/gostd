<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2534439">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2534494">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2534548">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2534599">//&nbsp;Parse&nbsp;&#34;zoneinfo&#34;&nbsp;time&nbsp;zone&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="2534635">//&nbsp;This&nbsp;is&nbsp;a&nbsp;fairly&nbsp;standard&nbsp;file&nbsp;format&nbsp;used&nbsp;on&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;BSD,&nbsp;Sun,&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span><span class="comment" id="2534719">//&nbsp;See&nbsp;tzfile(5),&nbsp;http://en.wikipedia.org/wiki/Zoneinfo,</span><br>
<span class="lineno"></span><span class="comment" id="2534776">//&nbsp;and&nbsp;ftp://munnari.oz.au/pub/oldtz/</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="2534815">package</span>&nbsp;<span class="ident" id="2534823">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2534829">import</span>&nbsp;<span class="string" id="2534836">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2534846">//&nbsp;Simple&nbsp;I/O&nbsp;interface&nbsp;to&nbsp;binary&nbsp;blob&nbsp;of&nbsp;data.</span><br>
<span class="lineno">15</span><span class="keyword" id="2534894">type</span>&nbsp;<span class="ident" id="2534899">data</span>&nbsp;<span class="keyword" id="2534904">struct</span>&nbsp;<span class="op" id="2534911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2534914">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2534920">[</span><span class="op" id="2534921">]</span><span class="builtintype" id="2534922">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2534928">error</span>&nbsp;<span class="builtintype" id="2534934">bool</span><br>
<span class="lineno"></span><span class="op" id="2534939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="2534942">func</span>&nbsp;<span class="op" id="2534947">(</span><span class="ident" id="2534948">d</span>&nbsp;<span class="op" id="2534950">*</span><span class="ident" id="2534951">data</span><span class="op" id="2534955">)</span>&nbsp;<span class="ident" id="2534957">read</span><span class="op" id="2534961">(</span><span class="ident" id="2534962">n</span>&nbsp;<span class="builtintype" id="2534964">int</span><span class="op" id="2534967">)</span>&nbsp;<span class="op" id="2534969">[</span><span class="op" id="2534970">]</span><span class="builtintype" id="2534971">byte</span>&nbsp;<span class="op" id="2534976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2534979">if</span>&nbsp;<span class="builtinfunc" id="2534982">len</span><span class="op" id="2534985">(</span><span class="ident" id="2534986">d</span><span class="op" id="2534987">.</span><span class="ident" id="2534988">p</span><span class="op" id="2534989">)</span>&nbsp;<span class="op" id="2534991">&lt;</span>&nbsp;<span class="ident" id="2534993">n</span>&nbsp;<span class="op" id="2534995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2534999">d</span><span class="op" id="2535000">.</span><span class="ident" id="2535001">p</span>&nbsp;<span class="op" id="2535003">=</span>&nbsp;<span class="ident" id="2535005">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535011">d</span><span class="op" id="2535012">.</span><span class="builtintype" id="2535013">error</span>&nbsp;<span class="op" id="2535019">=</span>&nbsp;<span class="ident" id="2535021">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535028">return</span>&nbsp;<span class="ident" id="2535035">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535043">p</span>&nbsp;<span class="op" id="2535045">:=</span>&nbsp;<span class="ident" id="2535048">d</span><span class="op" id="2535049">.</span><span class="ident" id="2535050">p</span><span class="op" id="2535051">[</span><span class="num" id="2535052">0</span><span class="op" id="2535053">:</span><span class="ident" id="2535054">n</span><span class="op" id="2535055">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535058">d</span><span class="op" id="2535059">.</span><span class="ident" id="2535060">p</span>&nbsp;<span class="op" id="2535062">=</span>&nbsp;<span class="ident" id="2535064">d</span><span class="op" id="2535065">.</span><span class="ident" id="2535066">p</span><span class="op" id="2535067">[</span><span class="ident" id="2535068">n</span><span class="op" id="2535069">:</span><span class="op" id="2535070">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535073">return</span>&nbsp;<span class="ident" id="2535080">p</span><br>
<span class="lineno"></span><span class="op" id="2535082">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="2535085">func</span>&nbsp;<span class="op" id="2535090">(</span><span class="ident" id="2535091">d</span>&nbsp;<span class="op" id="2535093">*</span><span class="ident" id="2535094">data</span><span class="op" id="2535098">)</span>&nbsp;<span class="ident" id="2535100">big4</span><span class="op" id="2535104">(</span><span class="op" id="2535105">)</span>&nbsp;<span class="op" id="2535107">(</span><span class="ident" id="2535108">n</span>&nbsp;<span class="builtintype" id="2535110">uint32</span><span class="op" id="2535116">,</span>&nbsp;<span class="ident" id="2535118">ok</span>&nbsp;<span class="builtintype" id="2535121">bool</span><span class="op" id="2535125">)</span>&nbsp;<span class="op" id="2535127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535130">p</span>&nbsp;<span class="op" id="2535132">:=</span>&nbsp;<span class="ident" id="2535135">d</span><span class="op" id="2535136">.</span><span class="ident" id="2535137">read</span><span class="op" id="2535141">(</span><span class="num" id="2535142">4</span><span class="op" id="2535143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535146">if</span>&nbsp;<span class="builtinfunc" id="2535149">len</span><span class="op" id="2535152">(</span><span class="ident" id="2535153">p</span><span class="op" id="2535154">)</span>&nbsp;<span class="op" id="2535156">&lt;</span>&nbsp;<span class="num" id="2535158">4</span>&nbsp;<span class="op" id="2535160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535164">d</span><span class="op" id="2535165">.</span><span class="builtintype" id="2535166">error</span>&nbsp;<span class="op" id="2535172">=</span>&nbsp;<span class="ident" id="2535174">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535181">return</span>&nbsp;<span class="num" id="2535188">0</span><span class="op" id="2535189">,</span>&nbsp;<span class="ident" id="2535191">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535201">return</span>&nbsp;<span class="builtintype" id="2535208">uint32</span><span class="op" id="2535214">(</span><span class="ident" id="2535215">p</span><span class="op" id="2535216">[</span><span class="num" id="2535217">0</span><span class="op" id="2535218">]</span><span class="op" id="2535219">)</span><span class="op" id="2535220">&lt;&lt;</span><span class="num" id="2535222">24</span>&nbsp;<span class="op" id="2535225">|</span>&nbsp;<span class="builtintype" id="2535227">uint32</span><span class="op" id="2535233">(</span><span class="ident" id="2535234">p</span><span class="op" id="2535235">[</span><span class="num" id="2535236">1</span><span class="op" id="2535237">]</span><span class="op" id="2535238">)</span><span class="op" id="2535239">&lt;&lt;</span><span class="num" id="2535241">16</span>&nbsp;<span class="op" id="2535244">|</span>&nbsp;<span class="builtintype" id="2535246">uint32</span><span class="op" id="2535252">(</span><span class="ident" id="2535253">p</span><span class="op" id="2535254">[</span><span class="num" id="2535255">2</span><span class="op" id="2535256">]</span><span class="op" id="2535257">)</span><span class="op" id="2535258">&lt;&lt;</span><span class="num" id="2535260">8</span>&nbsp;<span class="op" id="2535262">|</span>&nbsp;<span class="builtintype" id="2535264">uint32</span><span class="op" id="2535270">(</span><span class="ident" id="2535271">p</span><span class="op" id="2535272">[</span><span class="num" id="2535273">3</span><span class="op" id="2535274">]</span><span class="op" id="2535275">)</span><span class="op" id="2535276">,</span>&nbsp;<span class="ident" id="2535278">true</span><br>
<span class="lineno"></span><span class="op" id="2535283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="2535286">func</span>&nbsp;<span class="op" id="2535291">(</span><span class="ident" id="2535292">d</span>&nbsp;<span class="op" id="2535294">*</span><span class="ident" id="2535295">data</span><span class="op" id="2535299">)</span>&nbsp;<span class="builtintype" id="2535301">byte</span><span class="op" id="2535305">(</span><span class="op" id="2535306">)</span>&nbsp;<span class="op" id="2535308">(</span><span class="ident" id="2535309">n</span>&nbsp;<span class="builtintype" id="2535311">byte</span><span class="op" id="2535315">,</span>&nbsp;<span class="ident" id="2535317">ok</span>&nbsp;<span class="builtintype" id="2535320">bool</span><span class="op" id="2535324">)</span>&nbsp;<span class="op" id="2535326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535329">p</span>&nbsp;<span class="op" id="2535331">:=</span>&nbsp;<span class="ident" id="2535334">d</span><span class="op" id="2535335">.</span><span class="ident" id="2535336">read</span><span class="op" id="2535340">(</span><span class="num" id="2535341">1</span><span class="op" id="2535342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535345">if</span>&nbsp;<span class="builtinfunc" id="2535348">len</span><span class="op" id="2535351">(</span><span class="ident" id="2535352">p</span><span class="op" id="2535353">)</span>&nbsp;<span class="op" id="2535355">&lt;</span>&nbsp;<span class="num" id="2535357">1</span>&nbsp;<span class="op" id="2535359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535363">d</span><span class="op" id="2535364">.</span><span class="builtintype" id="2535365">error</span>&nbsp;<span class="op" id="2535371">=</span>&nbsp;<span class="ident" id="2535373">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535380">return</span>&nbsp;<span class="num" id="2535387">0</span><span class="op" id="2535388">,</span>&nbsp;<span class="ident" id="2535390">false</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535400">return</span>&nbsp;<span class="ident" id="2535407">p</span><span class="op" id="2535408">[</span><span class="num" id="2535409">0</span><span class="op" id="2535410">]</span><span class="op" id="2535411">,</span>&nbsp;<span class="ident" id="2535413">true</span><br>
<span class="lineno"></span><span class="op" id="2535418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2535421">//&nbsp;Make&nbsp;a&nbsp;string&nbsp;by&nbsp;stopping&nbsp;at&nbsp;the&nbsp;first&nbsp;NUL</span><br>
<span class="lineno">50</span><span class="keyword" id="2535467">func</span>&nbsp;<span class="ident" id="2535472">byteString</span><span class="op" id="2535482">(</span><span class="ident" id="2535483">p</span>&nbsp;<span class="op" id="2535485">[</span><span class="op" id="2535486">]</span><span class="builtintype" id="2535487">byte</span><span class="op" id="2535491">)</span>&nbsp;<span class="builtintype" id="2535493">string</span>&nbsp;<span class="op" id="2535500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535503">for</span>&nbsp;<span class="ident" id="2535507">i</span>&nbsp;<span class="op" id="2535509">:=</span>&nbsp;<span class="num" id="2535512">0</span><span class="op" id="2535513">;</span>&nbsp;<span class="ident" id="2535515">i</span>&nbsp;<span class="op" id="2535517">&lt;</span>&nbsp;<span class="builtinfunc" id="2535519">len</span><span class="op" id="2535522">(</span><span class="ident" id="2535523">p</span><span class="op" id="2535524">)</span><span class="op" id="2535525">;</span>&nbsp;<span class="ident" id="2535527">i</span><span class="op" id="2535528">++</span>&nbsp;<span class="op" id="2535531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535535">if</span>&nbsp;<span class="ident" id="2535538">p</span><span class="op" id="2535539">[</span><span class="ident" id="2535540">i</span><span class="op" id="2535541">]</span>&nbsp;<span class="op" id="2535543">==</span>&nbsp;<span class="num" id="2535546">0</span>&nbsp;<span class="op" id="2535548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535553">return</span>&nbsp;<span class="builtintype" id="2535560">string</span><span class="op" id="2535566">(</span><span class="ident" id="2535567">p</span><span class="op" id="2535568">[</span><span class="num" id="2535569">0</span><span class="op" id="2535570">:</span><span class="ident" id="2535571">i</span><span class="op" id="2535572">]</span><span class="op" id="2535573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535577">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535583">return</span>&nbsp;<span class="builtintype" id="2535590">string</span><span class="op" id="2535596">(</span><span class="ident" id="2535597">p</span><span class="op" id="2535598">)</span><br>
<span class="lineno"></span><span class="op" id="2535600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2535603">var</span>&nbsp;<span class="ident" id="2535607">badData</span>&nbsp;<span class="op" id="2535615">=</span>&nbsp;<span class="ident" id="2535617">errors</span><span class="op" id="2535623">.</span><span class="ident" id="2535624">New</span><span class="op" id="2535627">(</span><span class="string" id="2535628">&#34;malformed&nbsp;time&nbsp;zone&nbsp;information&#34;</span><span class="op" id="2535661">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2535664">func</span>&nbsp;<span class="ident" id="2535669">loadZoneData</span><span class="op" id="2535681">(</span><span class="ident" id="2535682">bytes</span>&nbsp;<span class="op" id="2535688">[</span><span class="op" id="2535689">]</span><span class="builtintype" id="2535690">byte</span><span class="op" id="2535694">)</span>&nbsp;<span class="op" id="2535696">(</span><span class="ident" id="2535697">l</span>&nbsp;<span class="op" id="2535699">*</span><span class="ident" id="2535700">Location</span><span class="op" id="2535708">,</span>&nbsp;<span class="ident" id="2535710">err</span>&nbsp;<span class="builtintype" id="2535714">error</span><span class="op" id="2535719">)</span>&nbsp;<span class="op" id="2535721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2535724">d</span>&nbsp;<span class="op" id="2535726">:=</span>&nbsp;<span class="ident" id="2535729">data</span><span class="op" id="2535733">{</span><span class="ident" id="2535734">bytes</span><span class="op" id="2535739">,</span>&nbsp;<span class="ident" id="2535741">false</span><span class="op" id="2535746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2535750">//&nbsp;4-byte&nbsp;magic&nbsp;&#34;TZif&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535774">if</span>&nbsp;<span class="ident" id="2535777">magic</span>&nbsp;<span class="op" id="2535783">:=</span>&nbsp;<span class="ident" id="2535786">d</span><span class="op" id="2535787">.</span><span class="ident" id="2535788">read</span><span class="op" id="2535792">(</span><span class="num" id="2535793">4</span><span class="op" id="2535794">)</span><span class="op" id="2535795">;</span>&nbsp;<span class="builtintype" id="2535797">string</span><span class="op" id="2535803">(</span><span class="ident" id="2535804">magic</span><span class="op" id="2535809">)</span>&nbsp;<span class="op" id="2535811">!=</span>&nbsp;<span class="string" id="2535814">&#34;TZif&#34;</span>&nbsp;<span class="op" id="2535821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535825">return</span>&nbsp;<span class="ident" id="2535832">nil</span><span class="op" id="2535835">,</span>&nbsp;<span class="ident" id="2535837">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2535846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2535850">//&nbsp;1-byte&nbsp;version,&nbsp;then&nbsp;15&nbsp;bytes&nbsp;of&nbsp;padding</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535895">var</span>&nbsp;<span class="ident" id="2535899">p</span>&nbsp;<span class="op" id="2535901">[</span><span class="op" id="2535902">]</span><span class="builtintype" id="2535903">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535909">if</span>&nbsp;<span class="ident" id="2535912">p</span>&nbsp;<span class="op" id="2535914">=</span>&nbsp;<span class="ident" id="2535916">d</span><span class="op" id="2535917">.</span><span class="ident" id="2535918">read</span><span class="op" id="2535922">(</span><span class="num" id="2535923">16</span><span class="op" id="2535925">)</span><span class="op" id="2535926">;</span>&nbsp;<span class="builtinfunc" id="2535928">len</span><span class="op" id="2535931">(</span><span class="ident" id="2535932">p</span><span class="op" id="2535933">)</span>&nbsp;<span class="op" id="2535935">!=</span>&nbsp;<span class="num" id="2535938">16</span>&nbsp;<span class="op" id="2535941">||</span>&nbsp;<span class="ident" id="2535944">p</span><span class="op" id="2535945">[</span><span class="num" id="2535946">0</span><span class="op" id="2535947">]</span>&nbsp;<span class="op" id="2535949">!=</span>&nbsp;<span class="num" id="2535952">0</span>&nbsp;<span class="op" id="2535954">&amp;&amp;</span>&nbsp;<span class="ident" id="2535957">p</span><span class="op" id="2535958">[</span><span class="num" id="2535959">0</span><span class="op" id="2535960">]</span>&nbsp;<span class="op" id="2535962">!=</span>&nbsp;<span class="string" id="2535965">&#39;2&#39;</span>&nbsp;<span class="op" id="2535969">&amp;&amp;</span>&nbsp;<span class="ident" id="2535972">p</span><span class="op" id="2535973">[</span><span class="num" id="2535974">0</span><span class="op" id="2535975">]</span>&nbsp;<span class="op" id="2535977">!=</span>&nbsp;<span class="string" id="2535980">&#39;3&#39;</span>&nbsp;<span class="op" id="2535984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2535988">return</span>&nbsp;<span class="ident" id="2535995">nil</span><span class="op" id="2535998">,</span>&nbsp;<span class="ident" id="2536000">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2536009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536013">//&nbsp;six&nbsp;big-endian&nbsp;32-bit&nbsp;integers:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536049">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;UTC/local&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536084">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;standard/wall&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536123">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;leap&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536150">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;transition&nbsp;times</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536181">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;local&nbsp;time&nbsp;zones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536212">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;characters&nbsp;of&nbsp;time&nbsp;zone&nbsp;abbrev&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2536265">const</span>&nbsp;<span class="op" id="2536271">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536275">NUTCLocal</span>&nbsp;<span class="op" id="2536285">=</span>&nbsp;<span class="ident" id="2536287">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536294">NStdWall</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536305">NLeap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536313">NTime</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536321">NZone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536329">NChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2536336">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2536339">var</span>&nbsp;<span class="ident" id="2536343">n</span>&nbsp;<span class="op" id="2536345">[</span><span class="num" id="2536346">6</span><span class="op" id="2536347">]</span><span class="builtintype" id="2536348">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2536353">for</span>&nbsp;<span class="ident" id="2536357">i</span>&nbsp;<span class="op" id="2536359">:=</span>&nbsp;<span class="num" id="2536362">0</span><span class="op" id="2536363">;</span>&nbsp;<span class="ident" id="2536365">i</span>&nbsp;<span class="op" id="2536367">&lt;</span>&nbsp;<span class="num" id="2536369">6</span><span class="op" id="2536370">;</span>&nbsp;<span class="ident" id="2536372">i</span><span class="op" id="2536373">++</span>&nbsp;<span class="op" id="2536376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536380">nn</span><span class="op" id="2536382">,</span>&nbsp;<span class="ident" id="2536384">ok</span>&nbsp;<span class="op" id="2536387">:=</span>&nbsp;<span class="ident" id="2536390">d</span><span class="op" id="2536391">.</span><span class="ident" id="2536392">big4</span><span class="op" id="2536396">(</span><span class="op" id="2536397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2536401">if</span>&nbsp;<span class="op" id="2536404">!</span><span class="ident" id="2536405">ok</span>&nbsp;<span class="op" id="2536408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2536413">return</span>&nbsp;<span class="ident" id="2536420">nil</span><span class="op" id="2536423">,</span>&nbsp;<span class="ident" id="2536425">badData</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2536435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536439">n</span><span class="op" id="2536440">[</span><span class="ident" id="2536441">i</span><span class="op" id="2536442">]</span>&nbsp;<span class="op" id="2536444">=</span>&nbsp;<span class="builtintype" id="2536446">int</span><span class="op" id="2536449">(</span><span class="ident" id="2536450">nn</span><span class="op" id="2536452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2536455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536459">//&nbsp;Transition&nbsp;times.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536481">txtimes</span>&nbsp;<span class="op" id="2536489">:=</span>&nbsp;<span class="ident" id="2536492">data</span><span class="op" id="2536496">{</span><span class="ident" id="2536497">d</span><span class="op" id="2536498">.</span><span class="ident" id="2536499">read</span><span class="op" id="2536503">(</span><span class="ident" id="2536504">n</span><span class="op" id="2536505">[</span><span class="ident" id="2536506">NTime</span><span class="op" id="2536511">]</span>&nbsp;<span class="op" id="2536513">*</span>&nbsp;<span class="num" id="2536515">4</span><span class="op" id="2536516">)</span><span class="op" id="2536517">,</span>&nbsp;<span class="ident" id="2536519">false</span><span class="op" id="2536524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536528">//&nbsp;Time&nbsp;zone&nbsp;indices&nbsp;for&nbsp;transition&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536572">txzones</span>&nbsp;<span class="op" id="2536580">:=</span>&nbsp;<span class="ident" id="2536583">d</span><span class="op" id="2536584">.</span><span class="ident" id="2536585">read</span><span class="op" id="2536589">(</span><span class="ident" id="2536590">n</span><span class="op" id="2536591">[</span><span class="ident" id="2536592">NTime</span><span class="op" id="2536597">]</span><span class="op" id="2536598">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536602">//&nbsp;Zone&nbsp;info&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536627">zonedata</span>&nbsp;<span class="op" id="2536636">:=</span>&nbsp;<span class="ident" id="2536639">data</span><span class="op" id="2536643">{</span><span class="ident" id="2536644">d</span><span class="op" id="2536645">.</span><span class="ident" id="2536646">read</span><span class="op" id="2536650">(</span><span class="ident" id="2536651">n</span><span class="op" id="2536652">[</span><span class="ident" id="2536653">NZone</span><span class="op" id="2536658">]</span>&nbsp;<span class="op" id="2536660">*</span>&nbsp;<span class="num" id="2536662">6</span><span class="op" id="2536663">)</span><span class="op" id="2536664">,</span>&nbsp;<span class="ident" id="2536666">false</span><span class="op" id="2536671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536675">//&nbsp;Time&nbsp;zone&nbsp;abbreviations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536704">abbrev</span>&nbsp;<span class="op" id="2536711">:=</span>&nbsp;<span class="ident" id="2536714">d</span><span class="op" id="2536715">.</span><span class="ident" id="2536716">read</span><span class="op" id="2536720">(</span><span class="ident" id="2536721">n</span><span class="op" id="2536722">[</span><span class="ident" id="2536723">NChar</span><span class="op" id="2536728">]</span><span class="op" id="2536729">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536733">//&nbsp;Leap-second&nbsp;time&nbsp;pairs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536760">d</span><span class="op" id="2536761">.</span><span class="ident" id="2536762">read</span><span class="op" id="2536766">(</span><span class="ident" id="2536767">n</span><span class="op" id="2536768">[</span><span class="ident" id="2536769">NLeap</span><span class="op" id="2536774">]</span>&nbsp;<span class="op" id="2536776">*</span>&nbsp;<span class="num" id="2536778">8</span><span class="op" id="2536779">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536783">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536837">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;standard&nbsp;time&nbsp;or&nbsp;wall&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2536886">isstd</span>&nbsp;<span class="op" id="2536892">:=</span>&nbsp;<span class="ident" id="2536895">d</span><span class="op" id="2536896">.</span><span class="ident" id="2536897">read</span><span class="op" id="2536901">(</span><span class="ident" id="2536902">n</span><span class="op" id="2536903">[</span><span class="ident" id="2536904">NStdWall</span><span class="op" id="2536912">]</span><span class="op" id="2536913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536917">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2536971">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;UTC&nbsp;or&nbsp;local&nbsp;time.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537011">isutc</span>&nbsp;<span class="op" id="2537017">:=</span>&nbsp;<span class="ident" id="2537020">d</span><span class="op" id="2537021">.</span><span class="ident" id="2537022">read</span><span class="op" id="2537026">(</span><span class="ident" id="2537027">n</span><span class="op" id="2537028">[</span><span class="ident" id="2537029">NUTCLocal</span><span class="op" id="2537038">]</span><span class="op" id="2537039">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537043">if</span>&nbsp;<span class="ident" id="2537046">d</span><span class="op" id="2537047">.</span><span class="builtintype" id="2537048">error</span>&nbsp;<span class="op" id="2537054">{</span>&nbsp;<span class="comment" id="2537056">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537077">return</span>&nbsp;<span class="ident" id="2537084">nil</span><span class="op" id="2537087">,</span>&nbsp;<span class="ident" id="2537089">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537098">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537102">//&nbsp;If&nbsp;version&nbsp;==&nbsp;2&nbsp;or&nbsp;3,&nbsp;the&nbsp;entire&nbsp;file&nbsp;repeats,&nbsp;this&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537169">//&nbsp;8-byte&nbsp;ints&nbsp;for&nbsp;txtimes&nbsp;and&nbsp;leap&nbsp;seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537215">//&nbsp;We&nbsp;won&#39;t&nbsp;need&nbsp;those&nbsp;until&nbsp;2106.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537252">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;build&nbsp;up&nbsp;a&nbsp;useful&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537301">//&nbsp;First&nbsp;the&nbsp;zone&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537333">//&nbsp;&nbsp;&nbsp;&nbsputcoff[4]&nbsp;isdst[1]&nbsp;nameindex[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537369">zone</span>&nbsp;<span class="op" id="2537374">:=</span>&nbsp;<span class="builtinfunc" id="2537377">make</span><span class="op" id="2537381">(</span><span class="op" id="2537382">[</span><span class="op" id="2537383">]</span><span class="ident" id="2537384">zone</span><span class="op" id="2537388">,</span>&nbsp;<span class="ident" id="2537390">n</span><span class="op" id="2537391">[</span><span class="ident" id="2537392">NZone</span><span class="op" id="2537397">]</span><span class="op" id="2537398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537401">for</span>&nbsp;<span class="ident" id="2537405">i</span>&nbsp;<span class="op" id="2537407">:=</span>&nbsp;<span class="keyword" id="2537410">range</span>&nbsp;<span class="ident" id="2537416">zone</span>&nbsp;<span class="op" id="2537421">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537425">var</span>&nbsp;<span class="ident" id="2537429">ok</span>&nbsp;<span class="builtintype" id="2537432">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537439">var</span>&nbsp;<span class="ident" id="2537443">n</span>&nbsp;<span class="builtintype" id="2537445">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537454">if</span>&nbsp;<span class="ident" id="2537457">n</span><span class="op" id="2537458">,</span>&nbsp;<span class="ident" id="2537460">ok</span>&nbsp;<span class="op" id="2537463">=</span>&nbsp;<span class="ident" id="2537465">zonedata</span><span class="op" id="2537473">.</span><span class="ident" id="2537474">big4</span><span class="op" id="2537478">(</span><span class="op" id="2537479">)</span><span class="op" id="2537480">;</span>&nbsp;<span class="op" id="2537482">!</span><span class="ident" id="2537483">ok</span>&nbsp;<span class="op" id="2537486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537491">return</span>&nbsp;<span class="ident" id="2537498">nil</span><span class="op" id="2537501">,</span>&nbsp;<span class="ident" id="2537503">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537513">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537517">zone</span><span class="op" id="2537521">[</span><span class="ident" id="2537522">i</span><span class="op" id="2537523">]</span><span class="op" id="2537524">.</span><span class="ident" id="2537525">offset</span>&nbsp;<span class="op" id="2537532">=</span>&nbsp;<span class="builtintype" id="2537534">int</span><span class="op" id="2537537">(</span><span class="builtintype" id="2537538">int32</span><span class="op" id="2537543">(</span><span class="ident" id="2537544">n</span><span class="op" id="2537545">)</span><span class="op" id="2537546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537550">var</span>&nbsp;<span class="ident" id="2537554">b</span>&nbsp;<span class="builtintype" id="2537556">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537563">if</span>&nbsp;<span class="ident" id="2537566">b</span><span class="op" id="2537567">,</span>&nbsp;<span class="ident" id="2537569">ok</span>&nbsp;<span class="op" id="2537572">=</span>&nbsp;<span class="ident" id="2537574">zonedata</span><span class="op" id="2537582">.</span><span class="builtintype" id="2537583">byte</span><span class="op" id="2537587">(</span><span class="op" id="2537588">)</span><span class="op" id="2537589">;</span>&nbsp;<span class="op" id="2537591">!</span><span class="ident" id="2537592">ok</span>&nbsp;<span class="op" id="2537595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537600">return</span>&nbsp;<span class="ident" id="2537607">nil</span><span class="op" id="2537610">,</span>&nbsp;<span class="ident" id="2537612">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537622">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537626">zone</span><span class="op" id="2537630">[</span><span class="ident" id="2537631">i</span><span class="op" id="2537632">]</span><span class="op" id="2537633">.</span><span class="ident" id="2537634">isDST</span>&nbsp;<span class="op" id="2537640">=</span>&nbsp;<span class="ident" id="2537642">b</span>&nbsp;<span class="op" id="2537644">!=</span>&nbsp;<span class="num" id="2537647">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537651">if</span>&nbsp;<span class="ident" id="2537654">b</span><span class="op" id="2537655">,</span>&nbsp;<span class="ident" id="2537657">ok</span>&nbsp;<span class="op" id="2537660">=</span>&nbsp;<span class="ident" id="2537662">zonedata</span><span class="op" id="2537670">.</span><span class="builtintype" id="2537671">byte</span><span class="op" id="2537675">(</span><span class="op" id="2537676">)</span><span class="op" id="2537677">;</span>&nbsp;<span class="op" id="2537679">!</span><span class="ident" id="2537680">ok</span>&nbsp;<span class="op" id="2537683">||</span>&nbsp;<span class="builtintype" id="2537686">int</span><span class="op" id="2537689">(</span><span class="ident" id="2537690">b</span><span class="op" id="2537691">)</span>&nbsp;<span class="op" id="2537693">&gt;=</span>&nbsp;<span class="builtinfunc" id="2537696">len</span><span class="op" id="2537699">(</span><span class="ident" id="2537700">abbrev</span><span class="op" id="2537706">)</span>&nbsp;<span class="op" id="2537708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537713">return</span>&nbsp;<span class="ident" id="2537720">nil</span><span class="op" id="2537723">,</span>&nbsp;<span class="ident" id="2537725">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537739">zone</span><span class="op" id="2537743">[</span><span class="ident" id="2537744">i</span><span class="op" id="2537745">]</span><span class="op" id="2537746">.</span><span class="ident" id="2537747">name</span>&nbsp;<span class="op" id="2537752">=</span>&nbsp;<span class="ident" id="2537754">byteString</span><span class="op" id="2537764">(</span><span class="ident" id="2537765">abbrev</span><span class="op" id="2537771">[</span><span class="ident" id="2537772">b</span><span class="op" id="2537773">:</span><span class="op" id="2537774">]</span><span class="op" id="2537775">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2537782">//&nbsp;Now&nbsp;the&nbsp;transition&nbsp;time&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537816">tx</span>&nbsp;<span class="op" id="2537819">:=</span>&nbsp;<span class="builtinfunc" id="2537822">make</span><span class="op" id="2537826">(</span><span class="op" id="2537827">[</span><span class="op" id="2537828">]</span><span class="ident" id="2537829">zoneTrans</span><span class="op" id="2537838">,</span>&nbsp;<span class="ident" id="2537840">n</span><span class="op" id="2537841">[</span><span class="ident" id="2537842">NTime</span><span class="op" id="2537847">]</span><span class="op" id="2537848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537851">for</span>&nbsp;<span class="ident" id="2537855">i</span>&nbsp;<span class="op" id="2537857">:=</span>&nbsp;<span class="keyword" id="2537860">range</span>&nbsp;<span class="ident" id="2537866">tx</span>&nbsp;<span class="op" id="2537869">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537873">var</span>&nbsp;<span class="ident" id="2537877">ok</span>&nbsp;<span class="builtintype" id="2537880">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537887">var</span>&nbsp;<span class="ident" id="2537891">n</span>&nbsp;<span class="builtintype" id="2537893">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537902">if</span>&nbsp;<span class="ident" id="2537905">n</span><span class="op" id="2537906">,</span>&nbsp;<span class="ident" id="2537908">ok</span>&nbsp;<span class="op" id="2537911">=</span>&nbsp;<span class="ident" id="2537913">txtimes</span><span class="op" id="2537920">.</span><span class="ident" id="2537921">big4</span><span class="op" id="2537925">(</span><span class="op" id="2537926">)</span><span class="op" id="2537927">;</span>&nbsp;<span class="op" id="2537929">!</span><span class="ident" id="2537930">ok</span>&nbsp;<span class="op" id="2537933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537938">return</span>&nbsp;<span class="ident" id="2537945">nil</span><span class="op" id="2537948">,</span>&nbsp;<span class="ident" id="2537950">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2537960">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2537964">tx</span><span class="op" id="2537966">[</span><span class="ident" id="2537967">i</span><span class="op" id="2537968">]</span><span class="op" id="2537969">.</span><span class="ident" id="2537970">when</span>&nbsp;<span class="op" id="2537975">=</span>&nbsp;<span class="ident" id="2537977">int64</span><span class="op" id="2537982">(</span><span class="builtintype" id="2537983">int32</span><span class="op" id="2537988">(</span><span class="ident" id="2537989">n</span><span class="op" id="2537990">)</span><span class="op" id="2537991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2537995">if</span>&nbsp;<span class="builtintype" id="2537998">int</span><span class="op" id="2538001">(</span><span class="ident" id="2538002">txzones</span><span class="op" id="2538009">[</span><span class="ident" id="2538010">i</span><span class="op" id="2538011">]</span><span class="op" id="2538012">)</span>&nbsp;<span class="op" id="2538014">&gt;=</span>&nbsp;<span class="builtinfunc" id="2538017">len</span><span class="op" id="2538020">(</span><span class="ident" id="2538021">zone</span><span class="op" id="2538025">)</span>&nbsp;<span class="op" id="2538027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538032">return</span>&nbsp;<span class="ident" id="2538039">nil</span><span class="op" id="2538042">,</span>&nbsp;<span class="ident" id="2538044">badData</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538058">tx</span><span class="op" id="2538060">[</span><span class="ident" id="2538061">i</span><span class="op" id="2538062">]</span><span class="op" id="2538063">.</span><span class="ident" id="2538064">index</span>&nbsp;<span class="op" id="2538070">=</span>&nbsp;<span class="ident" id="2538072">txzones</span><span class="op" id="2538079">[</span><span class="ident" id="2538080">i</span><span class="op" id="2538081">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538085">if</span>&nbsp;<span class="ident" id="2538088">i</span>&nbsp;<span class="op" id="2538090">&lt;</span>&nbsp;<span class="builtinfunc" id="2538092">len</span><span class="op" id="2538095">(</span><span class="ident" id="2538096">isstd</span><span class="op" id="2538101">)</span>&nbsp;<span class="op" id="2538103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538108">tx</span><span class="op" id="2538110">[</span><span class="ident" id="2538111">i</span><span class="op" id="2538112">]</span><span class="op" id="2538113">.</span><span class="ident" id="2538114">isstd</span>&nbsp;<span class="op" id="2538120">=</span>&nbsp;<span class="ident" id="2538122">isstd</span><span class="op" id="2538127">[</span><span class="ident" id="2538128">i</span><span class="op" id="2538129">]</span>&nbsp;<span class="op" id="2538131">!=</span>&nbsp;<span class="num" id="2538134">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538142">if</span>&nbsp;<span class="ident" id="2538145">i</span>&nbsp;<span class="op" id="2538147">&lt;</span>&nbsp;<span class="builtinfunc" id="2538149">len</span><span class="op" id="2538152">(</span><span class="ident" id="2538153">isutc</span><span class="op" id="2538158">)</span>&nbsp;<span class="op" id="2538160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538165">tx</span><span class="op" id="2538167">[</span><span class="ident" id="2538168">i</span><span class="op" id="2538169">]</span><span class="op" id="2538170">.</span><span class="ident" id="2538171">isutc</span>&nbsp;<span class="op" id="2538177">=</span>&nbsp;<span class="ident" id="2538179">isutc</span><span class="op" id="2538184">[</span><span class="ident" id="2538185">i</span><span class="op" id="2538186">]</span>&nbsp;<span class="op" id="2538188">!=</span>&nbsp;<span class="num" id="2538191">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538202">if</span>&nbsp;<span class="builtinfunc" id="2538205">len</span><span class="op" id="2538208">(</span><span class="ident" id="2538209">tx</span><span class="op" id="2538211">)</span>&nbsp;<span class="op" id="2538213">==</span>&nbsp;<span class="num" id="2538216">0</span>&nbsp;<span class="op" id="2538218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2538222">//&nbsp;Build&nbsp;fake&nbsp;transition&nbsp;to&nbsp;cover&nbsp;all&nbsp;time.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2538268">//&nbsp;This&nbsp;happens&nbsp;in&nbsp;fixed&nbsp;locations&nbsp;like&nbsp;&#34;Etc/GMT0&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538322">tx</span>&nbsp;<span class="op" id="2538325">=</span>&nbsp;<span class="builtinfunc" id="2538327">append</span><span class="op" id="2538333">(</span><span class="ident" id="2538334">tx</span><span class="op" id="2538336">,</span>&nbsp;<span class="ident" id="2538338">zoneTrans</span><span class="op" id="2538347">{</span><span class="ident" id="2538348">when</span><span class="op" id="2538352">:</span>&nbsp;<span class="ident" id="2538354">alpha</span><span class="op" id="2538359">,</span>&nbsp;<span class="ident" id="2538361">index</span><span class="op" id="2538366">:</span>&nbsp;<span class="num" id="2538368">0</span><span class="op" id="2538369">}</span><span class="op" id="2538370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2538377">//&nbsp;Committed&nbsp;to&nbsp;succeed.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538403">l</span>&nbsp;<span class="op" id="2538405">=</span>&nbsp;<span class="op" id="2538407">&amp;</span><span class="ident" id="2538408">Location</span><span class="op" id="2538416">{</span><span class="ident" id="2538417">zone</span><span class="op" id="2538421">:</span>&nbsp;<span class="ident" id="2538423">zone</span><span class="op" id="2538427">,</span>&nbsp;<span class="ident" id="2538429">tx</span><span class="op" id="2538431">:</span>&nbsp;<span class="ident" id="2538433">tx</span><span class="op" id="2538435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2538439">//&nbsp;Fill&nbsp;in&nbsp;the&nbsp;cache&nbsp;with&nbsp;information&nbsp;about&nbsp;right&nbsp;now,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2538495">//&nbsp;since&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;common&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538542">sec</span><span class="op" id="2538545">,</span>&nbsp;<span class="ident" id="2538547">_</span>&nbsp;<span class="op" id="2538549">:=</span>&nbsp;<span class="ident" id="2538552">now</span><span class="op" id="2538555">(</span><span class="op" id="2538556">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538559">for</span>&nbsp;<span class="ident" id="2538563">i</span>&nbsp;<span class="op" id="2538565">:=</span>&nbsp;<span class="keyword" id="2538568">range</span>&nbsp;<span class="ident" id="2538574">tx</span>&nbsp;<span class="op" id="2538577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538581">if</span>&nbsp;<span class="ident" id="2538584">tx</span><span class="op" id="2538586">[</span><span class="ident" id="2538587">i</span><span class="op" id="2538588">]</span><span class="op" id="2538589">.</span><span class="ident" id="2538590">when</span>&nbsp;<span class="op" id="2538595">&lt;=</span>&nbsp;<span class="ident" id="2538598">sec</span>&nbsp;<span class="op" id="2538602">&amp;&amp;</span>&nbsp;<span class="op" id="2538605">(</span><span class="ident" id="2538606">i</span><span class="op" id="2538607">+</span><span class="num" id="2538608">1</span>&nbsp;<span class="op" id="2538610">==</span>&nbsp;<span class="builtinfunc" id="2538613">len</span><span class="op" id="2538616">(</span><span class="ident" id="2538617">tx</span><span class="op" id="2538619">)</span>&nbsp;<span class="op" id="2538621">||</span>&nbsp;<span class="ident" id="2538624">sec</span>&nbsp;<span class="op" id="2538628">&lt;</span>&nbsp;<span class="ident" id="2538630">tx</span><span class="op" id="2538632">[</span><span class="ident" id="2538633">i</span><span class="op" id="2538634">+</span><span class="num" id="2538635">1</span><span class="op" id="2538636">]</span><span class="op" id="2538637">.</span><span class="ident" id="2538638">when</span><span class="op" id="2538642">)</span>&nbsp;<span class="op" id="2538644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538649">l</span><span class="op" id="2538650">.</span><span class="ident" id="2538651">cacheStart</span>&nbsp;<span class="op" id="2538662">=</span>&nbsp;<span class="ident" id="2538664">tx</span><span class="op" id="2538666">[</span><span class="ident" id="2538667">i</span><span class="op" id="2538668">]</span><span class="op" id="2538669">.</span><span class="ident" id="2538670">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538678">l</span><span class="op" id="2538679">.</span><span class="ident" id="2538680">cacheEnd</span>&nbsp;<span class="op" id="2538689">=</span>&nbsp;<span class="ident" id="2538691">omega</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538700">if</span>&nbsp;<span class="ident" id="2538703">i</span><span class="op" id="2538704">+</span><span class="num" id="2538705">1</span>&nbsp;<span class="op" id="2538707">&lt;</span>&nbsp;<span class="builtinfunc" id="2538709">len</span><span class="op" id="2538712">(</span><span class="ident" id="2538713">tx</span><span class="op" id="2538715">)</span>&nbsp;<span class="op" id="2538717">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538723">l</span><span class="op" id="2538724">.</span><span class="ident" id="2538725">cacheEnd</span>&nbsp;<span class="op" id="2538734">=</span>&nbsp;<span class="ident" id="2538736">tx</span><span class="op" id="2538738">[</span><span class="ident" id="2538739">i</span><span class="op" id="2538740">+</span><span class="num" id="2538741">1</span><span class="op" id="2538742">]</span><span class="op" id="2538743">.</span><span class="ident" id="2538744">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538757">l</span><span class="op" id="2538758">.</span><span class="ident" id="2538759">cacheZone</span>&nbsp;<span class="op" id="2538769">=</span>&nbsp;<span class="op" id="2538771">&amp;</span><span class="ident" id="2538772">l</span><span class="op" id="2538773">.</span><span class="ident" id="2538774">zone</span><span class="op" id="2538778">[</span><span class="ident" id="2538779">tx</span><span class="op" id="2538781">[</span><span class="ident" id="2538782">i</span><span class="op" id="2538783">]</span><span class="op" id="2538784">.</span><span class="ident" id="2538785">index</span><span class="op" id="2538790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538797">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538801">return</span>&nbsp;<span class="ident" id="2538808">l</span><span class="op" id="2538809">,</span>&nbsp;<span class="ident" id="2538811">nil</span><br>
<span class="lineno"></span><span class="op" id="2538815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2538818">func</span>&nbsp;<span class="ident" id="2538823">loadZoneFile</span><span class="op" id="2538835">(</span><span class="ident" id="2538836">dir</span><span class="op" id="2538839">,</span>&nbsp;<span class="ident" id="2538841">name</span>&nbsp;<span class="builtintype" id="2538846">string</span><span class="op" id="2538852">)</span>&nbsp;<span class="op" id="2538854">(</span><span class="ident" id="2538855">l</span>&nbsp;<span class="op" id="2538857">*</span><span class="ident" id="2538858">Location</span><span class="op" id="2538866">,</span>&nbsp;<span class="ident" id="2538868">err</span>&nbsp;<span class="builtintype" id="2538872">error</span><span class="op" id="2538877">)</span>&nbsp;<span class="op" id="2538879">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538882">if</span>&nbsp;<span class="builtinfunc" id="2538885">len</span><span class="op" id="2538888">(</span><span class="ident" id="2538889">dir</span><span class="op" id="2538892">)</span>&nbsp;<span class="op" id="2538894">&gt;</span>&nbsp;<span class="num" id="2538896">4</span>&nbsp;<span class="op" id="2538898">&amp;&amp;</span>&nbsp;<span class="ident" id="2538901">dir</span><span class="op" id="2538904">[</span><span class="builtinfunc" id="2538905">len</span><span class="op" id="2538908">(</span><span class="ident" id="2538909">dir</span><span class="op" id="2538912">)</span><span class="op" id="2538913">-</span><span class="num" id="2538914">4</span><span class="op" id="2538915">:</span><span class="op" id="2538916">]</span>&nbsp;<span class="op" id="2538918">==</span>&nbsp;<span class="string" id="2538921">&#34;.zip&#34;</span>&nbsp;<span class="op" id="2538928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538932">return</span>&nbsp;<span class="ident" id="2538939">loadZoneZip</span><span class="op" id="2538950">(</span><span class="ident" id="2538951">dir</span><span class="op" id="2538954">,</span>&nbsp;<span class="ident" id="2538956">name</span><span class="op" id="2538960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2538963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2538966">if</span>&nbsp;<span class="ident" id="2538969">dir</span>&nbsp;<span class="op" id="2538973">!=</span>&nbsp;<span class="string" id="2538976">&#34;&#34;</span>&nbsp;<span class="op" id="2538979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2538983">name</span>&nbsp;<span class="op" id="2538988">=</span>&nbsp;<span class="ident" id="2538990">dir</span>&nbsp;<span class="op" id="2538994">+</span>&nbsp;<span class="string" id="2538996">&#34;/&#34;</span>&nbsp;<span class="op" id="2539000">+</span>&nbsp;<span class="ident" id="2539002">name</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539011">buf</span><span class="op" id="2539014">,</span>&nbsp;<span class="ident" id="2539016">err</span>&nbsp;<span class="op" id="2539020">:=</span>&nbsp;<span class="ident" id="2539023">readFile</span><span class="op" id="2539031">(</span><span class="ident" id="2539032">name</span><span class="op" id="2539036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539039">if</span>&nbsp;<span class="ident" id="2539042">err</span>&nbsp;<span class="op" id="2539046">!=</span>&nbsp;<span class="ident" id="2539049">nil</span>&nbsp;<span class="op" id="2539053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539057">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539065">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539068">return</span>&nbsp;<span class="ident" id="2539075">loadZoneData</span><span class="op" id="2539087">(</span><span class="ident" id="2539088">buf</span><span class="op" id="2539091">)</span><br>
<span class="lineno"></span><span class="op" id="2539093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2539096">//&nbsp;There&nbsp;are&nbsp;500+&nbsp;zoneinfo&nbsp;files.&nbsp;&nbsp;Rather&nbsp;than&nbsp;distribute&nbsp;them&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2539163">//&nbsp;individually,&nbsp;we&nbsp;ship&nbsp;them&nbsp;in&nbsp;an&nbsp;uncompressed&nbsp;zip&nbsp;file.</span><br>
<span class="lineno">215</span><span class="comment" id="2539222">//&nbsp;Used&nbsp;this&nbsp;way,&nbsp;the&nbsp;zip&nbsp;file&nbsp;format&nbsp;serves&nbsp;as&nbsp;a&nbsp;commonly&nbsp;readable</span><br>
<span class="lineno"></span><span class="comment" id="2539290">//&nbsp;container&nbsp;for&nbsp;the&nbsp;individual&nbsp;small&nbsp;files.&nbsp;&nbsp;We&nbsp;choose&nbsp;zip&nbsp;over&nbsp;tar</span><br>
<span class="lineno"></span><span class="comment" id="2539359">//&nbsp;because&nbsp;zip&nbsp;files&nbsp;have&nbsp;a&nbsp;contiguous&nbsp;table&nbsp;of&nbsp;contents,&nbsp;making</span><br>
<span class="lineno"></span><span class="comment" id="2539424">//&nbsp;individual&nbsp;file&nbsp;lookups&nbsp;faster,&nbsp;and&nbsp;because&nbsp;the&nbsp;per-file&nbsp;overhead</span><br>
<span class="lineno"></span><span class="comment" id="2539493">//&nbsp;in&nbsp;a&nbsp;zip&nbsp;file&nbsp;is&nbsp;considerably&nbsp;less&nbsp;than&nbsp;tar&#39;s&nbsp;512&nbsp;bytes.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2539554">//&nbsp;get4&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;32-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="2539607">func</span>&nbsp;<span class="ident" id="2539612">get4</span><span class="op" id="2539616">(</span><span class="ident" id="2539617">b</span>&nbsp;<span class="op" id="2539619">[</span><span class="op" id="2539620">]</span><span class="builtintype" id="2539621">byte</span><span class="op" id="2539625">)</span>&nbsp;<span class="builtintype" id="2539627">int</span>&nbsp;<span class="op" id="2539631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539634">if</span>&nbsp;<span class="builtinfunc" id="2539637">len</span><span class="op" id="2539640">(</span><span class="ident" id="2539641">b</span><span class="op" id="2539642">)</span>&nbsp;<span class="op" id="2539644">&lt;</span>&nbsp;<span class="num" id="2539646">4</span>&nbsp;<span class="op" id="2539648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539652">return</span>&nbsp;<span class="num" id="2539659">0</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539665">return</span>&nbsp;<span class="builtintype" id="2539672">int</span><span class="op" id="2539675">(</span><span class="ident" id="2539676">b</span><span class="op" id="2539677">[</span><span class="num" id="2539678">0</span><span class="op" id="2539679">]</span><span class="op" id="2539680">)</span>&nbsp;<span class="op" id="2539682">|</span>&nbsp;<span class="builtintype" id="2539684">int</span><span class="op" id="2539687">(</span><span class="ident" id="2539688">b</span><span class="op" id="2539689">[</span><span class="num" id="2539690">1</span><span class="op" id="2539691">]</span><span class="op" id="2539692">)</span><span class="op" id="2539693">&lt;&lt;</span><span class="num" id="2539695">8</span>&nbsp;<span class="op" id="2539697">|</span>&nbsp;<span class="builtintype" id="2539699">int</span><span class="op" id="2539702">(</span><span class="ident" id="2539703">b</span><span class="op" id="2539704">[</span><span class="num" id="2539705">2</span><span class="op" id="2539706">]</span><span class="op" id="2539707">)</span><span class="op" id="2539708">&lt;&lt;</span><span class="num" id="2539710">16</span>&nbsp;<span class="op" id="2539713">|</span>&nbsp;<span class="builtintype" id="2539715">int</span><span class="op" id="2539718">(</span><span class="ident" id="2539719">b</span><span class="op" id="2539720">[</span><span class="num" id="2539721">3</span><span class="op" id="2539722">]</span><span class="op" id="2539723">)</span><span class="op" id="2539724">&lt;&lt;</span><span class="num" id="2539726">24</span><br>
<span class="lineno"></span><span class="op" id="2539729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2539732">//&nbsp;get2&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;16-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno">230</span><span class="keyword" id="2539785">func</span>&nbsp;<span class="ident" id="2539790">get2</span><span class="op" id="2539794">(</span><span class="ident" id="2539795">b</span>&nbsp;<span class="op" id="2539797">[</span><span class="op" id="2539798">]</span><span class="builtintype" id="2539799">byte</span><span class="op" id="2539803">)</span>&nbsp;<span class="builtintype" id="2539805">int</span>&nbsp;<span class="op" id="2539809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539812">if</span>&nbsp;<span class="builtinfunc" id="2539815">len</span><span class="op" id="2539818">(</span><span class="ident" id="2539819">b</span><span class="op" id="2539820">)</span>&nbsp;<span class="op" id="2539822">&lt;</span>&nbsp;<span class="num" id="2539824">2</span>&nbsp;<span class="op" id="2539826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539830">return</span>&nbsp;<span class="num" id="2539837">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539843">return</span>&nbsp;<span class="builtintype" id="2539850">int</span><span class="op" id="2539853">(</span><span class="ident" id="2539854">b</span><span class="op" id="2539855">[</span><span class="num" id="2539856">0</span><span class="op" id="2539857">]</span><span class="op" id="2539858">)</span>&nbsp;<span class="op" id="2539860">|</span>&nbsp;<span class="builtintype" id="2539862">int</span><span class="op" id="2539865">(</span><span class="ident" id="2539866">b</span><span class="op" id="2539867">[</span><span class="num" id="2539868">1</span><span class="op" id="2539869">]</span><span class="op" id="2539870">)</span><span class="op" id="2539871">&lt;&lt;</span><span class="num" id="2539873">8</span><br>
<span class="lineno">235</span><span class="op" id="2539875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2539878">func</span>&nbsp;<span class="ident" id="2539883">loadZoneZip</span><span class="op" id="2539894">(</span><span class="ident" id="2539895">zipfile</span><span class="op" id="2539902">,</span>&nbsp;<span class="ident" id="2539904">name</span>&nbsp;<span class="builtintype" id="2539909">string</span><span class="op" id="2539915">)</span>&nbsp;<span class="op" id="2539917">(</span><span class="ident" id="2539918">l</span>&nbsp;<span class="op" id="2539920">*</span><span class="ident" id="2539921">Location</span><span class="op" id="2539929">,</span>&nbsp;<span class="ident" id="2539931">err</span>&nbsp;<span class="builtintype" id="2539935">error</span><span class="op" id="2539940">)</span>&nbsp;<span class="op" id="2539942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539945">fd</span><span class="op" id="2539947">,</span>&nbsp;<span class="ident" id="2539949">err</span>&nbsp;<span class="op" id="2539953">:=</span>&nbsp;<span class="ident" id="2539956">open</span><span class="op" id="2539960">(</span><span class="ident" id="2539961">zipfile</span><span class="op" id="2539968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539971">if</span>&nbsp;<span class="ident" id="2539974">err</span>&nbsp;<span class="op" id="2539978">!=</span>&nbsp;<span class="ident" id="2539981">nil</span>&nbsp;<span class="op" id="2539985">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539989">return</span>&nbsp;<span class="ident" id="2539996">nil</span><span class="op" id="2539999">,</span>&nbsp;<span class="ident" id="2540001">errors</span><span class="op" id="2540007">.</span><span class="ident" id="2540008">New</span><span class="op" id="2540011">(</span><span class="string" id="2540012">&#34;open&nbsp;&#34;</span>&nbsp;<span class="op" id="2540020">+</span>&nbsp;<span class="ident" id="2540022">zipfile</span>&nbsp;<span class="op" id="2540030">+</span>&nbsp;<span class="string" id="2540032">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2540037">+</span>&nbsp;<span class="ident" id="2540039">err</span><span class="op" id="2540042">.</span><span class="ident" id="2540043">Error</span><span class="op" id="2540048">(</span><span class="op" id="2540049">)</span><span class="op" id="2540050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540056">defer</span>&nbsp;<span class="ident" id="2540062">closefd</span><span class="op" id="2540069">(</span><span class="ident" id="2540070">fd</span><span class="op" id="2540072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540076">const</span>&nbsp;<span class="op" id="2540082">(</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540086">zecheader</span>&nbsp;<span class="op" id="2540096">=</span>&nbsp;<span class="num" id="2540098">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540111">zcheader</span>&nbsp;&nbsp;<span class="op" id="2540121">=</span>&nbsp;<span class="num" id="2540123">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540136">ztailsize</span>&nbsp;<span class="op" id="2540146">=</span>&nbsp;<span class="num" id="2540148">22</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540154">zheadersize</span>&nbsp;<span class="op" id="2540166">=</span>&nbsp;<span class="num" id="2540168">30</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540173">zheader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2540185">=</span>&nbsp;<span class="num" id="2540187">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540203">buf</span>&nbsp;<span class="op" id="2540207">:=</span>&nbsp;<span class="builtinfunc" id="2540210">make</span><span class="op" id="2540214">(</span><span class="op" id="2540215">[</span><span class="op" id="2540216">]</span><span class="builtintype" id="2540217">byte</span><span class="op" id="2540221">,</span>&nbsp;<span class="ident" id="2540223">ztailsize</span><span class="op" id="2540232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540235">if</span>&nbsp;<span class="ident" id="2540238">err</span>&nbsp;<span class="op" id="2540242">:=</span>&nbsp;<span class="ident" id="2540245">preadn</span><span class="op" id="2540251">(</span><span class="ident" id="2540252">fd</span><span class="op" id="2540254">,</span>&nbsp;<span class="ident" id="2540256">buf</span><span class="op" id="2540259">,</span>&nbsp;<span class="op" id="2540261">-</span><span class="ident" id="2540262">ztailsize</span><span class="op" id="2540271">)</span><span class="op" id="2540272">;</span>&nbsp;<span class="ident" id="2540274">err</span>&nbsp;<span class="op" id="2540278">!=</span>&nbsp;<span class="ident" id="2540281">nil</span>&nbsp;<span class="op" id="2540285">||</span>&nbsp;<span class="ident" id="2540288">get4</span><span class="op" id="2540292">(</span><span class="ident" id="2540293">buf</span><span class="op" id="2540296">)</span>&nbsp;<span class="op" id="2540298">!=</span>&nbsp;<span class="ident" id="2540301">zecheader</span>&nbsp;<span class="op" id="2540311">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540315">return</span>&nbsp;<span class="ident" id="2540322">nil</span><span class="op" id="2540325">,</span>&nbsp;<span class="ident" id="2540327">errors</span><span class="op" id="2540333">.</span><span class="ident" id="2540334">New</span><span class="op" id="2540337">(</span><span class="string" id="2540338">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2540358">+</span>&nbsp;<span class="ident" id="2540360">zipfile</span><span class="op" id="2540367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540373">n</span>&nbsp;<span class="op" id="2540375">:=</span>&nbsp;<span class="ident" id="2540378">get2</span><span class="op" id="2540382">(</span><span class="ident" id="2540383">buf</span><span class="op" id="2540386">[</span><span class="num" id="2540387">10</span><span class="op" id="2540389">:</span><span class="op" id="2540390">]</span><span class="op" id="2540391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540394">size</span>&nbsp;<span class="op" id="2540399">:=</span>&nbsp;<span class="ident" id="2540402">get4</span><span class="op" id="2540406">(</span><span class="ident" id="2540407">buf</span><span class="op" id="2540410">[</span><span class="num" id="2540411">12</span><span class="op" id="2540413">:</span><span class="op" id="2540414">]</span><span class="op" id="2540415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540418">off</span>&nbsp;<span class="op" id="2540422">:=</span>&nbsp;<span class="ident" id="2540425">get4</span><span class="op" id="2540429">(</span><span class="ident" id="2540430">buf</span><span class="op" id="2540433">[</span><span class="num" id="2540434">16</span><span class="op" id="2540436">:</span><span class="op" id="2540437">]</span><span class="op" id="2540438">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540442">buf</span>&nbsp;<span class="op" id="2540446">=</span>&nbsp;<span class="builtinfunc" id="2540448">make</span><span class="op" id="2540452">(</span><span class="op" id="2540453">[</span><span class="op" id="2540454">]</span><span class="builtintype" id="2540455">byte</span><span class="op" id="2540459">,</span>&nbsp;<span class="ident" id="2540461">size</span><span class="op" id="2540465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540468">if</span>&nbsp;<span class="ident" id="2540471">err</span>&nbsp;<span class="op" id="2540475">:=</span>&nbsp;<span class="ident" id="2540478">preadn</span><span class="op" id="2540484">(</span><span class="ident" id="2540485">fd</span><span class="op" id="2540487">,</span>&nbsp;<span class="ident" id="2540489">buf</span><span class="op" id="2540492">,</span>&nbsp;<span class="ident" id="2540494">off</span><span class="op" id="2540497">)</span><span class="op" id="2540498">;</span>&nbsp;<span class="ident" id="2540500">err</span>&nbsp;<span class="op" id="2540504">!=</span>&nbsp;<span class="ident" id="2540507">nil</span>&nbsp;<span class="op" id="2540511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540515">return</span>&nbsp;<span class="ident" id="2540522">nil</span><span class="op" id="2540525">,</span>&nbsp;<span class="ident" id="2540527">errors</span><span class="op" id="2540533">.</span><span class="ident" id="2540534">New</span><span class="op" id="2540537">(</span><span class="string" id="2540538">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2540558">+</span>&nbsp;<span class="ident" id="2540560">zipfile</span><span class="op" id="2540567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540570">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540574">for</span>&nbsp;<span class="ident" id="2540578">i</span>&nbsp;<span class="op" id="2540580">:=</span>&nbsp;<span class="num" id="2540583">0</span><span class="op" id="2540584">;</span>&nbsp;<span class="ident" id="2540586">i</span>&nbsp;<span class="op" id="2540588">&lt;</span>&nbsp;<span class="ident" id="2540590">n</span><span class="op" id="2540591">;</span>&nbsp;<span class="ident" id="2540593">i</span><span class="op" id="2540594">++</span>&nbsp;<span class="op" id="2540597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540601">//&nbsp;zip&nbsp;entry&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540624">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540640">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspmadevers[1]</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540659">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspmadeos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540676">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540694">//&nbsp;&nbsp;&nbsp;&nbsp7&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540710">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540726">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540742">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540761">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540780">//&nbsp;&nbsp;&nbsp;&nbsp16&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540795">//&nbsp;&nbsp;&nbsp;&nbsp20&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540812">//&nbsp;&nbsp;&nbsp;&nbsp24&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540831">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540850">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540866">//&nbsp;&nbsp;&nbsp;&nbsp32&nbsp;&nbsp;&nbsp;&nbspfclen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540883">//&nbsp;&nbsp;&nbsp;&nbsp34&nbsp;&nbsp;&nbsp;&nbspdisknum[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540902">//&nbsp;&nbsp;&nbsp;&nbsp36&nbsp;&nbsp;&nbsp;&nbspiattr[2]</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540919">//&nbsp;&nbsp;&nbsp;&nbsp38&nbsp;&nbsp;&nbsp;&nbspeattr[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540936">//&nbsp;&nbsp;&nbsp;&nbsp42&nbsp;&nbsp;&nbsp;&nbspoff[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540951">//&nbsp;&nbsp;&nbsp;&nbsp46&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540973">//&nbsp;&nbsp;&nbsp;&nbsp46+namelen+xlen+fclen&nbsp;-&nbsp;next&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541014">//</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541019">if</span>&nbsp;<span class="ident" id="2541022">get4</span><span class="op" id="2541026">(</span><span class="ident" id="2541027">buf</span><span class="op" id="2541030">)</span>&nbsp;<span class="op" id="2541032">!=</span>&nbsp;<span class="ident" id="2541035">zcheader</span>&nbsp;<span class="op" id="2541044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541049">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541061">meth</span>&nbsp;<span class="op" id="2541066">:=</span>&nbsp;<span class="ident" id="2541069">get2</span><span class="op" id="2541073">(</span><span class="ident" id="2541074">buf</span><span class="op" id="2541077">[</span><span class="num" id="2541078">10</span><span class="op" id="2541080">:</span><span class="op" id="2541081">]</span><span class="op" id="2541082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541086">size</span>&nbsp;<span class="op" id="2541091">:=</span>&nbsp;<span class="ident" id="2541094">get4</span><span class="op" id="2541098">(</span><span class="ident" id="2541099">buf</span><span class="op" id="2541102">[</span><span class="num" id="2541103">24</span><span class="op" id="2541105">:</span><span class="op" id="2541106">]</span><span class="op" id="2541107">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541111">namelen</span>&nbsp;<span class="op" id="2541119">:=</span>&nbsp;<span class="ident" id="2541122">get2</span><span class="op" id="2541126">(</span><span class="ident" id="2541127">buf</span><span class="op" id="2541130">[</span><span class="num" id="2541131">28</span><span class="op" id="2541133">:</span><span class="op" id="2541134">]</span><span class="op" id="2541135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541139">xlen</span>&nbsp;<span class="op" id="2541144">:=</span>&nbsp;<span class="ident" id="2541147">get2</span><span class="op" id="2541151">(</span><span class="ident" id="2541152">buf</span><span class="op" id="2541155">[</span><span class="num" id="2541156">30</span><span class="op" id="2541158">:</span><span class="op" id="2541159">]</span><span class="op" id="2541160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541164">fclen</span>&nbsp;<span class="op" id="2541170">:=</span>&nbsp;<span class="ident" id="2541173">get2</span><span class="op" id="2541177">(</span><span class="ident" id="2541178">buf</span><span class="op" id="2541181">[</span><span class="num" id="2541182">32</span><span class="op" id="2541184">:</span><span class="op" id="2541185">]</span><span class="op" id="2541186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541190">off</span>&nbsp;<span class="op" id="2541194">:=</span>&nbsp;<span class="ident" id="2541197">get4</span><span class="op" id="2541201">(</span><span class="ident" id="2541202">buf</span><span class="op" id="2541205">[</span><span class="num" id="2541206">42</span><span class="op" id="2541208">:</span><span class="op" id="2541209">]</span><span class="op" id="2541210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541214">zname</span>&nbsp;<span class="op" id="2541220">:=</span>&nbsp;<span class="ident" id="2541223">buf</span><span class="op" id="2541226">[</span><span class="num" id="2541227">46</span>&nbsp;<span class="op" id="2541230">:</span>&nbsp;<span class="num" id="2541232">46</span><span class="op" id="2541234">+</span><span class="ident" id="2541235">namelen</span><span class="op" id="2541242">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541246">buf</span>&nbsp;<span class="op" id="2541250">=</span>&nbsp;<span class="ident" id="2541252">buf</span><span class="op" id="2541255">[</span><span class="num" id="2541256">46</span><span class="op" id="2541258">+</span><span class="ident" id="2541259">namelen</span><span class="op" id="2541266">+</span><span class="ident" id="2541267">xlen</span><span class="op" id="2541271">+</span><span class="ident" id="2541272">fclen</span><span class="op" id="2541277">:</span><span class="op" id="2541278">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541282">if</span>&nbsp;<span class="builtintype" id="2541285">string</span><span class="op" id="2541291">(</span><span class="ident" id="2541292">zname</span><span class="op" id="2541297">)</span>&nbsp;<span class="op" id="2541299">!=</span>&nbsp;<span class="ident" id="2541302">name</span>&nbsp;<span class="op" id="2541307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541327">if</span>&nbsp;<span class="ident" id="2541330">meth</span>&nbsp;<span class="op" id="2541335">!=</span>&nbsp;<span class="num" id="2541338">0</span>&nbsp;<span class="op" id="2541340">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541345">return</span>&nbsp;<span class="ident" id="2541352">nil</span><span class="op" id="2541355">,</span>&nbsp;<span class="ident" id="2541357">errors</span><span class="op" id="2541363">.</span><span class="ident" id="2541364">New</span><span class="op" id="2541367">(</span><span class="string" id="2541368">&#34;unsupported&nbsp;compression&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2541399">+</span>&nbsp;<span class="ident" id="2541401">name</span>&nbsp;<span class="op" id="2541406">+</span>&nbsp;<span class="string" id="2541408">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2541415">+</span>&nbsp;<span class="ident" id="2541417">zipfile</span><span class="op" id="2541424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541433">//&nbsp;zip&nbsp;per-file&nbsp;header&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541466">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541482">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541500">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541516">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541532">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541547">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541566">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541585">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541600">//&nbsp;&nbsp;&nbsp;&nbsp18&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541617">//&nbsp;&nbsp;&nbsp;&nbsp22&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541636">//&nbsp;&nbsp;&nbsp;&nbsp26&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541655">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541671">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541693">//&nbsp;&nbsp;&nbsp;&nbsp30+namelen+xlen&nbsp;-&nbsp;file&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2541726">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541731">buf</span>&nbsp;<span class="op" id="2541735">=</span>&nbsp;<span class="builtinfunc" id="2541737">make</span><span class="op" id="2541741">(</span><span class="op" id="2541742">[</span><span class="op" id="2541743">]</span><span class="builtintype" id="2541744">byte</span><span class="op" id="2541748">,</span>&nbsp;<span class="ident" id="2541750">zheadersize</span><span class="op" id="2541761">+</span><span class="ident" id="2541762">namelen</span><span class="op" id="2541769">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541773">if</span>&nbsp;<span class="ident" id="2541776">err</span>&nbsp;<span class="op" id="2541780">:=</span>&nbsp;<span class="ident" id="2541783">preadn</span><span class="op" id="2541789">(</span><span class="ident" id="2541790">fd</span><span class="op" id="2541792">,</span>&nbsp;<span class="ident" id="2541794">buf</span><span class="op" id="2541797">,</span>&nbsp;<span class="ident" id="2541799">off</span><span class="op" id="2541802">)</span><span class="op" id="2541803">;</span>&nbsp;<span class="ident" id="2541805">err</span>&nbsp;<span class="op" id="2541809">!=</span>&nbsp;<span class="ident" id="2541812">nil</span>&nbsp;<span class="op" id="2541816">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541822">get4</span><span class="op" id="2541826">(</span><span class="ident" id="2541827">buf</span><span class="op" id="2541830">)</span>&nbsp;<span class="op" id="2541832">!=</span>&nbsp;<span class="ident" id="2541835">zheader</span>&nbsp;<span class="op" id="2541843">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541849">get2</span><span class="op" id="2541853">(</span><span class="ident" id="2541854">buf</span><span class="op" id="2541857">[</span><span class="num" id="2541858">8</span><span class="op" id="2541859">:</span><span class="op" id="2541860">]</span><span class="op" id="2541861">)</span>&nbsp;<span class="op" id="2541863">!=</span>&nbsp;<span class="ident" id="2541866">meth</span>&nbsp;<span class="op" id="2541871">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541877">get2</span><span class="op" id="2541881">(</span><span class="ident" id="2541882">buf</span><span class="op" id="2541885">[</span><span class="num" id="2541886">26</span><span class="op" id="2541888">:</span><span class="op" id="2541889">]</span><span class="op" id="2541890">)</span>&nbsp;<span class="op" id="2541892">!=</span>&nbsp;<span class="ident" id="2541895">namelen</span>&nbsp;<span class="op" id="2541903">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="2541909">string</span><span class="op" id="2541915">(</span><span class="ident" id="2541916">buf</span><span class="op" id="2541919">[</span><span class="num" id="2541920">30</span><span class="op" id="2541922">:</span><span class="num" id="2541923">30</span><span class="op" id="2541925">+</span><span class="ident" id="2541926">namelen</span><span class="op" id="2541933">]</span><span class="op" id="2541934">)</span>&nbsp;<span class="op" id="2541936">!=</span>&nbsp;<span class="ident" id="2541939">name</span>&nbsp;<span class="op" id="2541944">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541949">return</span>&nbsp;<span class="ident" id="2541956">nil</span><span class="op" id="2541959">,</span>&nbsp;<span class="ident" id="2541961">errors</span><span class="op" id="2541967">.</span><span class="ident" id="2541968">New</span><span class="op" id="2541971">(</span><span class="string" id="2541972">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2541992">+</span>&nbsp;<span class="ident" id="2541994">zipfile</span><span class="op" id="2542001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2542005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2542009">xlen</span>&nbsp;<span class="op" id="2542014">=</span>&nbsp;<span class="ident" id="2542016">get2</span><span class="op" id="2542020">(</span><span class="ident" id="2542021">buf</span><span class="op" id="2542024">[</span><span class="num" id="2542025">28</span><span class="op" id="2542027">:</span><span class="op" id="2542028">]</span><span class="op" id="2542029">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2542034">buf</span>&nbsp;<span class="op" id="2542038">=</span>&nbsp;<span class="builtinfunc" id="2542040">make</span><span class="op" id="2542044">(</span><span class="op" id="2542045">[</span><span class="op" id="2542046">]</span><span class="builtintype" id="2542047">byte</span><span class="op" id="2542051">,</span>&nbsp;<span class="ident" id="2542053">size</span><span class="op" id="2542057">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2542061">if</span>&nbsp;<span class="ident" id="2542064">err</span>&nbsp;<span class="op" id="2542068">:=</span>&nbsp;<span class="ident" id="2542071">preadn</span><span class="op" id="2542077">(</span><span class="ident" id="2542078">fd</span><span class="op" id="2542080">,</span>&nbsp;<span class="ident" id="2542082">buf</span><span class="op" id="2542085">,</span>&nbsp;<span class="ident" id="2542087">off</span><span class="op" id="2542090">+</span><span class="num" id="2542091">30</span><span class="op" id="2542093">+</span><span class="ident" id="2542094">namelen</span><span class="op" id="2542101">+</span><span class="ident" id="2542102">xlen</span><span class="op" id="2542106">)</span><span class="op" id="2542107">;</span>&nbsp;<span class="ident" id="2542109">err</span>&nbsp;<span class="op" id="2542113">!=</span>&nbsp;<span class="ident" id="2542116">nil</span>&nbsp;<span class="op" id="2542120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2542125">return</span>&nbsp;<span class="ident" id="2542132">nil</span><span class="op" id="2542135">,</span>&nbsp;<span class="ident" id="2542137">errors</span><span class="op" id="2542143">.</span><span class="ident" id="2542144">New</span><span class="op" id="2542147">(</span><span class="string" id="2542148">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2542168">+</span>&nbsp;<span class="ident" id="2542170">zipfile</span><span class="op" id="2542177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2542181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2542186">return</span>&nbsp;<span class="ident" id="2542193">loadZoneData</span><span class="op" id="2542205">(</span><span class="ident" id="2542206">buf</span><span class="op" id="2542209">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2542212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2542216">return</span>&nbsp;<span class="ident" id="2542223">nil</span><span class="op" id="2542226">,</span>&nbsp;<span class="ident" id="2542228">errors</span><span class="op" id="2542234">.</span><span class="ident" id="2542235">New</span><span class="op" id="2542238">(</span><span class="string" id="2542239">&#34;cannot&nbsp;find&nbsp;&#34;</span>&nbsp;<span class="op" id="2542254">+</span>&nbsp;<span class="ident" id="2542256">name</span>&nbsp;<span class="op" id="2542261">+</span>&nbsp;<span class="string" id="2542263">&#34;&nbsp;in&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="2542279">+</span>&nbsp;<span class="ident" id="2542281">zipfile</span><span class="op" id="2542288">)</span><br>
<span class="lineno"></span><span class="op" id="2542290">}</span>
</div>
</body>
</html>
