<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8285580">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8285635">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8285689">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8285740">package</span>&nbsp;<span class="ident" id="8285748">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8285753">import</span>&nbsp;<span class="op" id="8285760">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285763">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285772">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285779">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285785">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285796">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8285807">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8285817">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="8285820">//&nbsp;Test&nbsp;basic&nbsp;operations&nbsp;in&nbsp;a&nbsp;safe&nbsp;manner.</span><br>
<span class="lineno"></span><span class="keyword" id="8285863">func</span>&nbsp;<span class="ident" id="8285868">TestBasicEncoderDecoder</span><span class="op" id="8285891">(</span><span class="ident" id="8285892">t</span>&nbsp;<span class="op" id="8285894">*</span><span class="ident" id="8285895"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8285902">.</span><span class="ident" id="8285903">T</span><span class="op" id="8285904">)</span>&nbsp;<span class="op" id="8285906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8285909">var</span>&nbsp;<span class="ident" id="8285913">values</span>&nbsp;<span class="op" id="8285920">=</span>&nbsp;<span class="op" id="8285922">[</span><span class="op" id="8285923">]</span><span class="keyword" id="8285924">interface</span><span class="op" id="8285933">{</span><span class="op" id="8285934">}</span><span class="op" id="8285935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8285939">true</span><span class="op" id="8285943">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8285947">int</span><span class="op" id="8285950">(</span><span class="num" id="8285951">123</span><span class="op" id="8285954">)</span><span class="op" id="8285955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8285959">int8</span><span class="op" id="8285963">(</span><span class="num" id="8285964">123</span><span class="op" id="8285967">)</span><span class="op" id="8285968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8285972">int16</span><span class="op" id="8285977">(</span><span class="op" id="8285978">-</span><span class="num" id="8285979">12345</span><span class="op" id="8285984">)</span><span class="op" id="8285985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8285989">int32</span><span class="op" id="8285994">(</span><span class="num" id="8285995">123456</span><span class="op" id="8286001">)</span><span class="op" id="8286002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286006">int64</span><span class="op" id="8286011">(</span><span class="op" id="8286012">-</span><span class="num" id="8286013">1234567</span><span class="op" id="8286020">)</span><span class="op" id="8286021">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286025">uint</span><span class="op" id="8286029">(</span><span class="num" id="8286030">123</span><span class="op" id="8286033">)</span><span class="op" id="8286034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286038">uint8</span><span class="op" id="8286043">(</span><span class="num" id="8286044">123</span><span class="op" id="8286047">)</span><span class="op" id="8286048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286052">uint16</span><span class="op" id="8286058">(</span><span class="num" id="8286059">12345</span><span class="op" id="8286064">)</span><span class="op" id="8286065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286069">uint32</span><span class="op" id="8286075">(</span><span class="num" id="8286076">123456</span><span class="op" id="8286082">)</span><span class="op" id="8286083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286087">uint64</span><span class="op" id="8286093">(</span><span class="num" id="8286094">1234567</span><span class="op" id="8286101">)</span><span class="op" id="8286102">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286106">uintptr</span><span class="op" id="8286113">(</span><span class="num" id="8286114">12345678</span><span class="op" id="8286122">)</span><span class="op" id="8286123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286127">float32</span><span class="op" id="8286134">(</span><span class="num" id="8286135">1.2345</span><span class="op" id="8286141">)</span><span class="op" id="8286142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286146">float64</span><span class="op" id="8286153">(</span><span class="num" id="8286154">1.2345678</span><span class="op" id="8286163">)</span><span class="op" id="8286164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286168">complex64</span><span class="op" id="8286177">(</span><span class="num" id="8286178">1.2345</span>&nbsp;<span class="op" id="8286185">+</span>&nbsp;<span class="num" id="8286187">2.3456i</span><span class="op" id="8286194">)</span><span class="op" id="8286195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286199">complex128</span><span class="op" id="8286209">(</span><span class="num" id="8286210">1.2345678</span>&nbsp;<span class="op" id="8286220">+</span>&nbsp;<span class="num" id="8286222">2.3456789i</span><span class="op" id="8286232">)</span><span class="op" id="8286233">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286237">[</span><span class="op" id="8286238">]</span><span class="builtintype" id="8286239">byte</span><span class="op" id="8286243">(</span><span class="string" id="8286244">&#34;hello&#34;</span><span class="op" id="8286251">)</span><span class="op" id="8286252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="8286256">string</span><span class="op" id="8286262">(</span><span class="string" id="8286263">&#34;hello&#34;</span><span class="op" id="8286270">)</span><span class="op" id="8286271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8286277">for</span>&nbsp;<span class="ident" id="8286281">_</span><span class="op" id="8286282">,</span>&nbsp;<span class="ident" id="8286284">value</span>&nbsp;<span class="op" id="8286290">:=</span>&nbsp;<span class="keyword" id="8286293">range</span>&nbsp;<span class="ident" id="8286299"><a href="/encoding/gob/encoder_test.go.html#8285913">values</a></span>&nbsp;<span class="op" id="8286306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286310">b</span>&nbsp;<span class="op" id="8286312">:=</span>&nbsp;<span class="builtinfunc" id="8286315">new</span><span class="op" id="8286318">(</span><span class="ident" id="8286319"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8286324">.</span><span class="ident" id="8286325">Buffer</span><span class="op" id="8286331">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286335">enc</span>&nbsp;<span class="op" id="8286339">:=</span>&nbsp;<span class="ident" id="8286342"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8286352">(</span><span class="ident" id="8286353"><a href="/encoding/gob/encoder_test.go.html#8286310">b</a></span><span class="op" id="8286354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286358">err</span>&nbsp;<span class="op" id="8286362">:=</span>&nbsp;<span class="ident" id="8286365"><a href="/encoding/gob/encoder_test.go.html#8286335">enc</a></span><span class="op" id="8286368">.</span><span class="ident" id="8286369">Encode</span><span class="op" id="8286375">(</span><span class="ident" id="8286376"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8286385">if</span>&nbsp;<span class="ident" id="8286388"><a href="/encoding/gob/encoder_test.go.html#8286358">err</a></span>&nbsp;<span class="op" id="8286392">!=</span>&nbsp;<span class="ident" id="8286395">nil</span>&nbsp;<span class="op" id="8286399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286404"><a href="/encoding/gob/encoder_test.go.html#8285892">t</a></span><span class="op" id="8286405">.</span><span class="ident" id="8286406">Error</span><span class="op" id="8286411">(</span><span class="string" id="8286412">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8286427">,</span>&nbsp;<span class="ident" id="8286429"><a href="/encoding/gob/encoder_test.go.html#8286358">err</a></span><span class="op" id="8286432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286436">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286440">dec</span>&nbsp;<span class="op" id="8286444">:=</span>&nbsp;<span class="ident" id="8286447"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8286457">(</span><span class="ident" id="8286458"><a href="/encoding/gob/encoder_test.go.html#8286310">b</a></span><span class="op" id="8286459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286463">result</span>&nbsp;<span class="op" id="8286470">:=</span>&nbsp;<span class="ident" id="8286473"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8286480">.</span><span class="ident" id="8286481">New</span><span class="op" id="8286484">(</span><span class="ident" id="8286485"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8286492">.</span><span class="ident" id="8286493">TypeOf</span><span class="op" id="8286499">(</span><span class="ident" id="8286500"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286505">)</span><span class="op" id="8286506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286510"><a href="/encoding/gob/encoder_test.go.html#8286358">err</a></span>&nbsp;<span class="op" id="8286514">=</span>&nbsp;<span class="ident" id="8286516"><a href="/encoding/gob/encoder_test.go.html#8286440">dec</a></span><span class="op" id="8286519">.</span><span class="ident" id="8286520">Decode</span><span class="op" id="8286526">(</span><span class="ident" id="8286527"><a href="/encoding/gob/encoder_test.go.html#8286463">result</a></span><span class="op" id="8286533">.</span><span class="ident" id="8286534">Interface</span><span class="op" id="8286543">(</span><span class="op" id="8286544">)</span><span class="op" id="8286545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8286549">if</span>&nbsp;<span class="ident" id="8286552"><a href="/encoding/gob/encoder_test.go.html#8286358">err</a></span>&nbsp;<span class="op" id="8286556">!=</span>&nbsp;<span class="ident" id="8286559">nil</span>&nbsp;<span class="op" id="8286563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286568"><a href="/encoding/gob/encoder_test.go.html#8285892">t</a></span><span class="op" id="8286569">.</span><span class="ident" id="8286570">Fatalf</span><span class="op" id="8286576">(</span><span class="string" id="8286577">&#34;error&nbsp;decoding&nbsp;%T:&nbsp;%v:&#34;</span><span class="op" id="8286601">,</span>&nbsp;<span class="ident" id="8286603"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8286610">.</span><span class="ident" id="8286611">TypeOf</span><span class="op" id="8286617">(</span><span class="ident" id="8286618"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286623">)</span><span class="op" id="8286624">,</span>&nbsp;<span class="ident" id="8286626"><a href="/encoding/gob/encoder_test.go.html#8286358">err</a></span><span class="op" id="8286629">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8286637">if</span>&nbsp;<span class="op" id="8286640">!</span><span class="ident" id="8286641"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8286648">.</span><span class="ident" id="8286649">DeepEqual</span><span class="op" id="8286658">(</span><span class="ident" id="8286659"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286664">,</span>&nbsp;<span class="ident" id="8286666"><a href="/encoding/gob/encoder_test.go.html#8286463">result</a></span><span class="op" id="8286672">.</span><span class="ident" id="8286673">Elem</span><span class="op" id="8286677">(</span><span class="op" id="8286678">)</span><span class="op" id="8286679">.</span><span class="ident" id="8286680">Interface</span><span class="op" id="8286689">(</span><span class="op" id="8286690">)</span><span class="op" id="8286691">)</span>&nbsp;<span class="op" id="8286693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286698"><a href="/encoding/gob/encoder_test.go.html#8285892">t</a></span><span class="op" id="8286699">.</span><span class="ident" id="8286700">Fatalf</span><span class="op" id="8286706">(</span><span class="string" id="8286707">&#34;%T:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8286731">,</span>&nbsp;<span class="ident" id="8286733"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286738">,</span>&nbsp;<span class="ident" id="8286740"><a href="/encoding/gob/encoder_test.go.html#8286284">value</a></span><span class="op" id="8286745">,</span>&nbsp;<span class="ident" id="8286747"><a href="/encoding/gob/encoder_test.go.html#8286463">result</a></span><span class="op" id="8286753">.</span><span class="ident" id="8286754">Elem</span><span class="op" id="8286758">(</span><span class="op" id="8286759">)</span><span class="op" id="8286760">.</span><span class="ident" id="8286761">Interface</span><span class="op" id="8286770">(</span><span class="op" id="8286771">)</span><span class="op" id="8286772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8286779">}</span><br>
<span class="lineno">55</span><span class="op" id="8286781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8286784">type</span>&nbsp;<span class="ident" id="8286789">ET0</span>&nbsp;<span class="keyword" id="8286793">struct</span>&nbsp;<span class="op" id="8286800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286803">A</span>&nbsp;<span class="builtintype" id="8286805">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286810">B</span>&nbsp;<span class="builtintype" id="8286812">string</span><br>
<span class="lineno">60</span><span class="op" id="8286819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8286822">type</span>&nbsp;<span class="ident" id="8286827">ET2</span>&nbsp;<span class="keyword" id="8286831">struct</span>&nbsp;<span class="op" id="8286838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286841">X</span>&nbsp;<span class="builtintype" id="8286843">string</span><br>
<span class="lineno"></span><span class="op" id="8286850">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8286853">type</span>&nbsp;<span class="ident" id="8286858">ET1</span>&nbsp;<span class="keyword" id="8286862">struct</span>&nbsp;<span class="op" id="8286869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286872">A</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8286877">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286882">Et2</span>&nbsp;&nbsp;<span class="op" id="8286887">*</span><span class="ident" id="8286888"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286893">Next</span>&nbsp;<span class="op" id="8286898">*</span><span class="ident" id="8286899"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><br>
<span class="lineno">70</span><span class="op" id="8286903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8286906">//&nbsp;Like&nbsp;ET1&nbsp;but&nbsp;with&nbsp;a&nbsp;different&nbsp;name&nbsp;for&nbsp;a&nbsp;field</span><br>
<span class="lineno"></span><span class="keyword" id="8286956">type</span>&nbsp;<span class="ident" id="8286961">ET3</span>&nbsp;<span class="keyword" id="8286965">struct</span>&nbsp;<span class="op" id="8286972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286975">A</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8286989">int</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8286994">Et2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8287008">*</span><span class="ident" id="8287009"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287014">DifferentNext</span>&nbsp;<span class="op" id="8287028">*</span><span class="ident" id="8287029"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><br>
<span class="lineno"></span><span class="op" id="8287033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8287036">//&nbsp;Like&nbsp;ET1&nbsp;but&nbsp;with&nbsp;a&nbsp;different&nbsp;type&nbsp;for&nbsp;a&nbsp;field</span><br>
<span class="lineno">80</span><span class="keyword" id="8287086">type</span>&nbsp;<span class="ident" id="8287091">ET4</span>&nbsp;<span class="keyword" id="8287095">struct</span>&nbsp;<span class="op" id="8287102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287105">A</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8287110">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287115">Et2</span>&nbsp;&nbsp;<span class="builtintype" id="8287120">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287129">Next</span>&nbsp;<span class="builtintype" id="8287134">int</span><br>
<span class="lineno"></span><span class="op" id="8287138">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="keyword" id="8287141">func</span>&nbsp;<span class="ident" id="8287146">TestEncoderDecoder</span><span class="op" id="8287164">(</span><span class="ident" id="8287165">t</span>&nbsp;<span class="op" id="8287167">*</span><span class="ident" id="8287168"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8287175">.</span><span class="ident" id="8287176">T</span><span class="op" id="8287177">)</span>&nbsp;<span class="op" id="8287179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287182">b</span>&nbsp;<span class="op" id="8287184">:=</span>&nbsp;<span class="builtinfunc" id="8287187">new</span><span class="op" id="8287190">(</span><span class="ident" id="8287191"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8287196">.</span><span class="ident" id="8287197">Buffer</span><span class="op" id="8287203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287206">enc</span>&nbsp;<span class="op" id="8287210">:=</span>&nbsp;<span class="ident" id="8287213"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8287223">(</span><span class="ident" id="8287224"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287228">et0</span>&nbsp;<span class="op" id="8287232">:=</span>&nbsp;<span class="builtinfunc" id="8287235">new</span><span class="op" id="8287238">(</span><span class="ident" id="8287239"><a href="/encoding/gob/encoder_test.go.html#8286789">ET0</a></span><span class="op" id="8287242">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287245"><a href="/encoding/gob/encoder_test.go.html#8287228">et0</a></span><span class="op" id="8287248">.</span><span class="ident" id="8287249">A</span>&nbsp;<span class="op" id="8287251">=</span>&nbsp;<span class="num" id="8287253">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287256"><a href="/encoding/gob/encoder_test.go.html#8287228">et0</a></span><span class="op" id="8287259">.</span><span class="ident" id="8287260">B</span>&nbsp;<span class="op" id="8287262">=</span>&nbsp;<span class="string" id="8287264">&#34;gobs&nbsp;of&nbsp;fun&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287279">err</span>&nbsp;<span class="op" id="8287283">:=</span>&nbsp;<span class="ident" id="8287286"><a href="/encoding/gob/encoder_test.go.html#8287206">enc</a></span><span class="op" id="8287289">.</span><span class="ident" id="8287290">Encode</span><span class="op" id="8287296">(</span><span class="ident" id="8287297"><a href="/encoding/gob/encoder_test.go.html#8287228">et0</a></span><span class="op" id="8287300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287303">if</span>&nbsp;<span class="ident" id="8287306"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287310">!=</span>&nbsp;<span class="ident" id="8287313">nil</span>&nbsp;<span class="op" id="8287317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287321"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287322">.</span><span class="ident" id="8287323">Error</span><span class="op" id="8287328">(</span><span class="string" id="8287329">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8287344">,</span>&nbsp;<span class="ident" id="8287346"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8287349">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8287352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8287355">//fmt.Printf(&#34;%&nbsp;x&nbsp;%q\n&#34;,&nbsp;b,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8287387">//Debug(b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287399">dec</span>&nbsp;<span class="op" id="8287403">:=</span>&nbsp;<span class="ident" id="8287406"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8287416">(</span><span class="ident" id="8287417"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287421">newEt0</span>&nbsp;<span class="op" id="8287428">:=</span>&nbsp;<span class="builtinfunc" id="8287431">new</span><span class="op" id="8287434">(</span><span class="ident" id="8287435"><a href="/encoding/gob/encoder_test.go.html#8286789">ET0</a></span><span class="op" id="8287438">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287441"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287445">=</span>&nbsp;<span class="ident" id="8287447"><a href="/encoding/gob/encoder_test.go.html#8287399">dec</a></span><span class="op" id="8287450">.</span><span class="ident" id="8287451">Decode</span><span class="op" id="8287457">(</span><span class="ident" id="8287458"><a href="/encoding/gob/encoder_test.go.html#8287421">newEt0</a></span><span class="op" id="8287464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287467">if</span>&nbsp;<span class="ident" id="8287470"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287474">!=</span>&nbsp;<span class="ident" id="8287477">nil</span>&nbsp;<span class="op" id="8287481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287485"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287486">.</span><span class="ident" id="8287487">Fatal</span><span class="op" id="8287492">(</span><span class="string" id="8287493">&#34;error&nbsp;decoding&nbsp;ET0:&#34;</span><span class="op" id="8287514">,</span>&nbsp;<span class="ident" id="8287516"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8287519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8287522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287526">if</span>&nbsp;<span class="op" id="8287529">!</span><span class="ident" id="8287530"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8287537">.</span><span class="ident" id="8287538">DeepEqual</span><span class="op" id="8287547">(</span><span class="ident" id="8287548"><a href="/encoding/gob/encoder_test.go.html#8287228">et0</a></span><span class="op" id="8287551">,</span>&nbsp;<span class="ident" id="8287553"><a href="/encoding/gob/encoder_test.go.html#8287421">newEt0</a></span><span class="op" id="8287559">)</span>&nbsp;<span class="op" id="8287561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287565"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287566">.</span><span class="ident" id="8287567">Fatalf</span><span class="op" id="8287573">(</span><span class="string" id="8287574">&#34;invalid&nbsp;data&nbsp;for&nbsp;et0:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="8287619">,</span>&nbsp;<span class="op" id="8287621">*</span><span class="ident" id="8287622"><a href="/encoding/gob/encoder_test.go.html#8287228">et0</a></span><span class="op" id="8287625">,</span>&nbsp;<span class="op" id="8287627">*</span><span class="ident" id="8287628"><a href="/encoding/gob/encoder_test.go.html#8287421">newEt0</a></span><span class="op" id="8287634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8287637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287640">if</span>&nbsp;<span class="ident" id="8287643"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287644">.</span><span class="ident" id="8287645">Len</span><span class="op" id="8287648">(</span><span class="op" id="8287649">)</span>&nbsp;<span class="op" id="8287651">!=</span>&nbsp;<span class="num" id="8287654">0</span>&nbsp;<span class="op" id="8287656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287660"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287661">.</span><span class="ident" id="8287662">Error</span><span class="op" id="8287667">(</span><span class="string" id="8287668">&#34;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="8287681">,</span>&nbsp;<span class="ident" id="8287683"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287684">.</span><span class="ident" id="8287685">Len</span><span class="op" id="8287688">(</span><span class="op" id="8287689">)</span><span class="op" id="8287690">,</span>&nbsp;<span class="string" id="8287692">&#34;bytes&nbsp;left&#34;</span><span class="op" id="8287704">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8287707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8287710">//&nbsp;&nbsp;&nbsp;&nbspt.FailNow()</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287727"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span>&nbsp;<span class="op" id="8287729">=</span>&nbsp;<span class="builtinfunc" id="8287731">new</span><span class="op" id="8287734">(</span><span class="ident" id="8287735"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8287740">.</span><span class="ident" id="8287741">Buffer</span><span class="op" id="8287747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287750"><a href="/encoding/gob/encoder_test.go.html#8287206">enc</a></span>&nbsp;<span class="op" id="8287754">=</span>&nbsp;<span class="ident" id="8287756"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8287766">(</span><span class="ident" id="8287767"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287768">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287771">et1</span>&nbsp;<span class="op" id="8287775">:=</span>&nbsp;<span class="builtinfunc" id="8287778">new</span><span class="op" id="8287781">(</span><span class="ident" id="8287782"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><span class="op" id="8287785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287788"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8287791">.</span><span class="ident" id="8287792">A</span>&nbsp;<span class="op" id="8287794">=</span>&nbsp;<span class="num" id="8287796">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287799"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8287802">.</span><span class="ident" id="8287803">Et2</span>&nbsp;<span class="op" id="8287807">=</span>&nbsp;<span class="builtinfunc" id="8287809">new</span><span class="op" id="8287812">(</span><span class="ident" id="8287813"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><span class="op" id="8287816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287819"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287823">=</span>&nbsp;<span class="ident" id="8287825"><a href="/encoding/gob/encoder_test.go.html#8287206">enc</a></span><span class="op" id="8287828">.</span><span class="ident" id="8287829">Encode</span><span class="op" id="8287835">(</span><span class="ident" id="8287836"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8287839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287842">if</span>&nbsp;<span class="ident" id="8287845"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287849">!=</span>&nbsp;<span class="ident" id="8287852">nil</span>&nbsp;<span class="op" id="8287856">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287860"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287861">.</span><span class="ident" id="8287862">Error</span><span class="op" id="8287867">(</span><span class="string" id="8287868">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8287883">,</span>&nbsp;<span class="ident" id="8287885"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8287888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8287891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287894"><a href="/encoding/gob/encoder_test.go.html#8287399">dec</a></span>&nbsp;<span class="op" id="8287898">=</span>&nbsp;<span class="ident" id="8287900"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8287910">(</span><span class="ident" id="8287911"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8287912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287915">newEt1</span>&nbsp;<span class="op" id="8287922">:=</span>&nbsp;<span class="builtinfunc" id="8287925">new</span><span class="op" id="8287928">(</span><span class="ident" id="8287929"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><span class="op" id="8287932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287935"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287939">=</span>&nbsp;<span class="ident" id="8287941"><a href="/encoding/gob/encoder_test.go.html#8287399">dec</a></span><span class="op" id="8287944">.</span><span class="ident" id="8287945">Decode</span><span class="op" id="8287951">(</span><span class="ident" id="8287952"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8287958">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8287961">if</span>&nbsp;<span class="ident" id="8287964"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8287968">!=</span>&nbsp;<span class="ident" id="8287971">nil</span>&nbsp;<span class="op" id="8287975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8287979"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8287980">.</span><span class="ident" id="8287981">Fatal</span><span class="op" id="8287986">(</span><span class="string" id="8287987">&#34;error&nbsp;decoding&nbsp;ET1:&#34;</span><span class="op" id="8288008">,</span>&nbsp;<span class="ident" id="8288010"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8288013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288020">if</span>&nbsp;<span class="op" id="8288023">!</span><span class="ident" id="8288024"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8288031">.</span><span class="ident" id="8288032">DeepEqual</span><span class="op" id="8288041">(</span><span class="ident" id="8288042"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288045">,</span>&nbsp;<span class="ident" id="8288047"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8288053">)</span>&nbsp;<span class="op" id="8288055">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288059"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288060">.</span><span class="ident" id="8288061">Fatalf</span><span class="op" id="8288067">(</span><span class="string" id="8288068">&#34;invalid&nbsp;data&nbsp;for&nbsp;et1:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="8288113">,</span>&nbsp;<span class="op" id="8288115">*</span><span class="ident" id="8288116"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288119">,</span>&nbsp;<span class="op" id="8288121">*</span><span class="ident" id="8288122"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8288128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288134">if</span>&nbsp;<span class="ident" id="8288137"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8288138">.</span><span class="ident" id="8288139">Len</span><span class="op" id="8288142">(</span><span class="op" id="8288143">)</span>&nbsp;<span class="op" id="8288145">!=</span>&nbsp;<span class="num" id="8288148">0</span>&nbsp;<span class="op" id="8288150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288154"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288155">.</span><span class="ident" id="8288156">Error</span><span class="op" id="8288161">(</span><span class="string" id="8288162">&#34;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="8288175">,</span>&nbsp;<span class="ident" id="8288177"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8288178">.</span><span class="ident" id="8288179">Len</span><span class="op" id="8288182">(</span><span class="op" id="8288183">)</span><span class="op" id="8288184">,</span>&nbsp;<span class="string" id="8288186">&#34;bytes&nbsp;left&#34;</span><span class="op" id="8288198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288201">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288205"><a href="/encoding/gob/encoder_test.go.html#8287206">enc</a></span><span class="op" id="8288208">.</span><span class="ident" id="8288209">Encode</span><span class="op" id="8288215">(</span><span class="ident" id="8288216"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288222"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span>&nbsp;<span class="op" id="8288229">=</span>&nbsp;<span class="builtinfunc" id="8288231">new</span><span class="op" id="8288234">(</span><span class="ident" id="8288235"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><span class="op" id="8288238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288241"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288245">=</span>&nbsp;<span class="ident" id="8288247"><a href="/encoding/gob/encoder_test.go.html#8287399">dec</a></span><span class="op" id="8288250">.</span><span class="ident" id="8288251">Decode</span><span class="op" id="8288257">(</span><span class="ident" id="8288258"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8288264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288267">if</span>&nbsp;<span class="ident" id="8288270"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288274">!=</span>&nbsp;<span class="ident" id="8288277">nil</span>&nbsp;<span class="op" id="8288281">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288285"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288286">.</span><span class="ident" id="8288287">Fatal</span><span class="op" id="8288292">(</span><span class="string" id="8288293">&#34;round&nbsp;2:&nbsp;error&nbsp;decoding&nbsp;ET1:&#34;</span><span class="op" id="8288323">,</span>&nbsp;<span class="ident" id="8288325"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8288328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288334">if</span>&nbsp;<span class="op" id="8288337">!</span><span class="ident" id="8288338"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8288345">.</span><span class="ident" id="8288346">DeepEqual</span><span class="op" id="8288355">(</span><span class="ident" id="8288356"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288359">,</span>&nbsp;<span class="ident" id="8288361"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8288367">)</span>&nbsp;<span class="op" id="8288369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288373"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288374">.</span><span class="ident" id="8288375">Fatalf</span><span class="op" id="8288381">(</span><span class="string" id="8288382">&#34;round&nbsp;2:&nbsp;invalid&nbsp;data&nbsp;for&nbsp;et1:&nbsp;expected&nbsp;%+v;&nbsp;got&nbsp;%+v&#34;</span><span class="op" id="8288436">,</span>&nbsp;<span class="op" id="8288438">*</span><span class="ident" id="8288439"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288442">,</span>&nbsp;<span class="op" id="8288444">*</span><span class="ident" id="8288445"><a href="/encoding/gob/encoder_test.go.html#8287915">newEt1</a></span><span class="op" id="8288451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288454">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288457">if</span>&nbsp;<span class="ident" id="8288460"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8288461">.</span><span class="ident" id="8288462">Len</span><span class="op" id="8288465">(</span><span class="op" id="8288466">)</span>&nbsp;<span class="op" id="8288468">!=</span>&nbsp;<span class="num" id="8288471">0</span>&nbsp;<span class="op" id="8288473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288477"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288478">.</span><span class="ident" id="8288479">Error</span><span class="op" id="8288484">(</span><span class="string" id="8288485">&#34;round&nbsp;2:&nbsp;not&nbsp;at&nbsp;eof;&#34;</span><span class="op" id="8288507">,</span>&nbsp;<span class="ident" id="8288509"><a href="/encoding/gob/encoder_test.go.html#8287182">b</a></span><span class="op" id="8288510">.</span><span class="ident" id="8288511">Len</span><span class="op" id="8288514">(</span><span class="op" id="8288515">)</span><span class="op" id="8288516">,</span>&nbsp;<span class="string" id="8288518">&#34;bytes&nbsp;left&#34;</span><span class="op" id="8288530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8288537">//&nbsp;Now&nbsp;test&nbsp;with&nbsp;a&nbsp;running&nbsp;encoder/decoder&nbsp;pair&nbsp;that&nbsp;we&nbsp;recognize&nbsp;a&nbsp;type&nbsp;mismatch.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288621"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288625">=</span>&nbsp;<span class="ident" id="8288627"><a href="/encoding/gob/encoder_test.go.html#8287206">enc</a></span><span class="op" id="8288630">.</span><span class="ident" id="8288631">Encode</span><span class="op" id="8288637">(</span><span class="ident" id="8288638"><a href="/encoding/gob/encoder_test.go.html#8287771">et1</a></span><span class="op" id="8288641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288644">if</span>&nbsp;<span class="ident" id="8288647"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288651">!=</span>&nbsp;<span class="ident" id="8288654">nil</span>&nbsp;<span class="op" id="8288658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288662"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288663">.</span><span class="ident" id="8288664">Error</span><span class="op" id="8288669">(</span><span class="string" id="8288670">&#34;round&nbsp;3:&nbsp;encoder&nbsp;fail:&#34;</span><span class="op" id="8288694">,</span>&nbsp;<span class="ident" id="8288696"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span><span class="op" id="8288699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288705">newEt2</span>&nbsp;<span class="op" id="8288712">:=</span>&nbsp;<span class="builtinfunc" id="8288715">new</span><span class="op" id="8288718">(</span><span class="ident" id="8288719"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><span class="op" id="8288722">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288725"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288729">=</span>&nbsp;<span class="ident" id="8288731"><a href="/encoding/gob/encoder_test.go.html#8287399">dec</a></span><span class="op" id="8288734">.</span><span class="ident" id="8288735">Decode</span><span class="op" id="8288741">(</span><span class="ident" id="8288742"><a href="/encoding/gob/encoder_test.go.html#8288705">newEt2</a></span><span class="op" id="8288748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8288751">if</span>&nbsp;<span class="ident" id="8288754"><a href="/encoding/gob/encoder_test.go.html#8287279">err</a></span>&nbsp;<span class="op" id="8288758">==</span>&nbsp;<span class="ident" id="8288761">nil</span>&nbsp;<span class="op" id="8288765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8288769"><a href="/encoding/gob/encoder_test.go.html#8287165">t</a></span><span class="op" id="8288770">.</span><span class="ident" id="8288771">Fatal</span><span class="op" id="8288776">(</span><span class="string" id="8288777">&#34;round&nbsp;3:&nbsp;expected&nbsp;`bad&nbsp;type&#39;&nbsp;error&nbsp;decoding&nbsp;ET2&#34;</span><span class="op" id="8288826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8288829">}</span><br>
<span class="lineno"></span><span class="op" id="8288831">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="8288834">//&nbsp;Run&nbsp;one&nbsp;value&nbsp;through&nbsp;the&nbsp;encoder/decoder,&nbsp;but&nbsp;use&nbsp;the&nbsp;wrong&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8288904">//&nbsp;Input&nbsp;is&nbsp;always&nbsp;an&nbsp;ET1;&nbsp;we&nbsp;compare&nbsp;it&nbsp;to&nbsp;whatever&nbsp;is&nbsp;under&nbsp;&#39;e&#39;.</span><br>
<span class="lineno"></span><span class="keyword" id="8288971">func</span>&nbsp;<span class="ident" id="8288976">badTypeCheck</span><span class="op" id="8288988">(</span><span class="ident" id="8288989">e</span>&nbsp;<span class="keyword" id="8288991">interface</span><span class="op" id="8289000">{</span><span class="op" id="8289001">}</span><span class="op" id="8289002">,</span>&nbsp;<span class="ident" id="8289004">shouldFail</span>&nbsp;<span class="builtintype" id="8289015">bool</span><span class="op" id="8289019">,</span>&nbsp;<span class="ident" id="8289021">msg</span>&nbsp;<span class="builtintype" id="8289025">string</span><span class="op" id="8289031">,</span>&nbsp;<span class="ident" id="8289033">t</span>&nbsp;<span class="op" id="8289035">*</span><span class="ident" id="8289036"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8289043">.</span><span class="ident" id="8289044">T</span><span class="op" id="8289045">)</span>&nbsp;<span class="op" id="8289047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289050">b</span>&nbsp;<span class="op" id="8289052">:=</span>&nbsp;<span class="builtinfunc" id="8289055">new</span><span class="op" id="8289058">(</span><span class="ident" id="8289059"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8289064">.</span><span class="ident" id="8289065">Buffer</span><span class="op" id="8289071">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289074">enc</span>&nbsp;<span class="op" id="8289078">:=</span>&nbsp;<span class="ident" id="8289081"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8289091">(</span><span class="ident" id="8289092"><a href="/encoding/gob/encoder_test.go.html#8289050">b</a></span><span class="op" id="8289093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289096">et1</span>&nbsp;<span class="op" id="8289100">:=</span>&nbsp;<span class="builtinfunc" id="8289103">new</span><span class="op" id="8289106">(</span><span class="ident" id="8289107"><a href="/encoding/gob/encoder_test.go.html#8286858">ET1</a></span><span class="op" id="8289110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289113"><a href="/encoding/gob/encoder_test.go.html#8289096">et1</a></span><span class="op" id="8289116">.</span><span class="ident" id="8289117">A</span>&nbsp;<span class="op" id="8289119">=</span>&nbsp;<span class="num" id="8289121">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289124"><a href="/encoding/gob/encoder_test.go.html#8289096">et1</a></span><span class="op" id="8289127">.</span><span class="ident" id="8289128">Et2</span>&nbsp;<span class="op" id="8289132">=</span>&nbsp;<span class="builtinfunc" id="8289134">new</span><span class="op" id="8289137">(</span><span class="ident" id="8289138"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><span class="op" id="8289141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289144">err</span>&nbsp;<span class="op" id="8289148">:=</span>&nbsp;<span class="ident" id="8289151"><a href="/encoding/gob/encoder_test.go.html#8289074">enc</a></span><span class="op" id="8289154">.</span><span class="ident" id="8289155">Encode</span><span class="op" id="8289161">(</span><span class="ident" id="8289162"><a href="/encoding/gob/encoder_test.go.html#8289096">et1</a></span><span class="op" id="8289165">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8289168">if</span>&nbsp;<span class="ident" id="8289171"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span>&nbsp;<span class="op" id="8289175">!=</span>&nbsp;<span class="ident" id="8289178">nil</span>&nbsp;<span class="op" id="8289182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289186"><a href="/encoding/gob/encoder_test.go.html#8289033">t</a></span><span class="op" id="8289187">.</span><span class="ident" id="8289188">Error</span><span class="op" id="8289193">(</span><span class="string" id="8289194">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8289209">,</span>&nbsp;<span class="ident" id="8289211"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span><span class="op" id="8289214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8289217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289220">dec</span>&nbsp;<span class="op" id="8289224">:=</span>&nbsp;<span class="ident" id="8289227"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8289237">(</span><span class="ident" id="8289238"><a href="/encoding/gob/encoder_test.go.html#8289050">b</a></span><span class="op" id="8289239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289242"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span>&nbsp;<span class="op" id="8289246">=</span>&nbsp;<span class="ident" id="8289248"><a href="/encoding/gob/encoder_test.go.html#8289220">dec</a></span><span class="op" id="8289251">.</span><span class="ident" id="8289252">Decode</span><span class="op" id="8289258">(</span><span class="ident" id="8289259"><a href="/encoding/gob/encoder_test.go.html#8288989">e</a></span><span class="op" id="8289260">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8289263">if</span>&nbsp;<span class="ident" id="8289266"><a href="/encoding/gob/encoder_test.go.html#8289004">shouldFail</a></span>&nbsp;<span class="op" id="8289277">&amp;&amp;</span>&nbsp;<span class="ident" id="8289280"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span>&nbsp;<span class="op" id="8289284">==</span>&nbsp;<span class="ident" id="8289287">nil</span>&nbsp;<span class="op" id="8289291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289295"><a href="/encoding/gob/encoder_test.go.html#8289033">t</a></span><span class="op" id="8289296">.</span><span class="ident" id="8289297">Error</span><span class="op" id="8289302">(</span><span class="string" id="8289303">&#34;expected&nbsp;error&nbsp;for&#34;</span><span class="op" id="8289323">,</span>&nbsp;<span class="ident" id="8289325"><a href="/encoding/gob/encoder_test.go.html#8289021">msg</a></span><span class="op" id="8289328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8289331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8289334">if</span>&nbsp;<span class="op" id="8289337">!</span><span class="ident" id="8289338"><a href="/encoding/gob/encoder_test.go.html#8289004">shouldFail</a></span>&nbsp;<span class="op" id="8289349">&amp;&amp;</span>&nbsp;<span class="ident" id="8289352"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span>&nbsp;<span class="op" id="8289356">!=</span>&nbsp;<span class="ident" id="8289359">nil</span>&nbsp;<span class="op" id="8289363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289367"><a href="/encoding/gob/encoder_test.go.html#8289033">t</a></span><span class="op" id="8289368">.</span><span class="ident" id="8289369">Error</span><span class="op" id="8289374">(</span><span class="string" id="8289375">&#34;unexpected&nbsp;error&nbsp;for&#34;</span><span class="op" id="8289397">,</span>&nbsp;<span class="ident" id="8289399"><a href="/encoding/gob/encoder_test.go.html#8289021">msg</a></span><span class="op" id="8289402">,</span>&nbsp;<span class="ident" id="8289404"><a href="/encoding/gob/encoder_test.go.html#8289144">err</a></span><span class="op" id="8289407">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8289410">}</span><br>
<span class="lineno"></span><span class="op" id="8289412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8289415">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;recognize&nbsp;a&nbsp;bad&nbsp;type&nbsp;the&nbsp;first&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="8289468">func</span>&nbsp;<span class="ident" id="8289473">TestWrongTypeDecoder</span><span class="op" id="8289493">(</span><span class="ident" id="8289494">t</span>&nbsp;<span class="op" id="8289496">*</span><span class="ident" id="8289497"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8289504">.</span><span class="ident" id="8289505">T</span><span class="op" id="8289506">)</span>&nbsp;<span class="op" id="8289508">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289511"><a href="/encoding/gob/encoder_test.go.html#8288976">badTypeCheck</a></span><span class="op" id="8289523">(</span><span class="builtinfunc" id="8289524">new</span><span class="op" id="8289527">(</span><span class="ident" id="8289528"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><span class="op" id="8289531">)</span><span class="op" id="8289532">,</span>&nbsp;<span class="ident" id="8289534">true</span><span class="op" id="8289538">,</span>&nbsp;<span class="string" id="8289540">&#34;no&nbsp;fields&nbsp;in&nbsp;common&#34;</span><span class="op" id="8289561">,</span>&nbsp;<span class="ident" id="8289563"><a href="/encoding/gob/encoder_test.go.html#8289494">t</a></span><span class="op" id="8289564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289567"><a href="/encoding/gob/encoder_test.go.html#8288976">badTypeCheck</a></span><span class="op" id="8289579">(</span><span class="builtinfunc" id="8289580">new</span><span class="op" id="8289583">(</span><span class="ident" id="8289584"><a href="/encoding/gob/encoder_test.go.html#8286961">ET3</a></span><span class="op" id="8289587">)</span><span class="op" id="8289588">,</span>&nbsp;<span class="ident" id="8289590">false</span><span class="op" id="8289595">,</span>&nbsp;<span class="string" id="8289597">&#34;different&nbsp;name&nbsp;of&nbsp;field&#34;</span><span class="op" id="8289622">,</span>&nbsp;<span class="ident" id="8289624"><a href="/encoding/gob/encoder_test.go.html#8289494">t</a></span><span class="op" id="8289625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289628"><a href="/encoding/gob/encoder_test.go.html#8288976">badTypeCheck</a></span><span class="op" id="8289640">(</span><span class="builtinfunc" id="8289641">new</span><span class="op" id="8289644">(</span><span class="ident" id="8289645"><a href="/encoding/gob/encoder_test.go.html#8287091">ET4</a></span><span class="op" id="8289648">)</span><span class="op" id="8289649">,</span>&nbsp;<span class="ident" id="8289651">true</span><span class="op" id="8289655">,</span>&nbsp;<span class="string" id="8289657">&#34;different&nbsp;type&nbsp;of&nbsp;field&#34;</span><span class="op" id="8289682">,</span>&nbsp;<span class="ident" id="8289684"><a href="/encoding/gob/encoder_test.go.html#8289494">t</a></span><span class="op" id="8289685">)</span><br>
<span class="lineno"></span><span class="op" id="8289687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="8289690">func</span>&nbsp;<span class="ident" id="8289695">corruptDataCheck</span><span class="op" id="8289711">(</span><span class="ident" id="8289712">s</span>&nbsp;<span class="builtintype" id="8289714">string</span><span class="op" id="8289720">,</span>&nbsp;<span class="ident" id="8289722">err</span>&nbsp;<span class="builtintype" id="8289726">error</span><span class="op" id="8289731">,</span>&nbsp;<span class="ident" id="8289733">t</span>&nbsp;<span class="op" id="8289735">*</span><span class="ident" id="8289736"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8289743">.</span><span class="ident" id="8289744">T</span><span class="op" id="8289745">)</span>&nbsp;<span class="op" id="8289747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289750">b</span>&nbsp;<span class="op" id="8289752">:=</span>&nbsp;<span class="ident" id="8289755"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8289760">.</span><span class="ident" id="8289761">NewBufferString</span><span class="op" id="8289776">(</span><span class="ident" id="8289777"><a href="/encoding/gob/encoder_test.go.html#8289712">s</a></span><span class="op" id="8289778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289781">dec</span>&nbsp;<span class="op" id="8289785">:=</span>&nbsp;<span class="ident" id="8289788"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8289798">(</span><span class="ident" id="8289799"><a href="/encoding/gob/encoder_test.go.html#8289750">b</a></span><span class="op" id="8289800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289803">err1</span>&nbsp;<span class="op" id="8289808">:=</span>&nbsp;<span class="ident" id="8289811"><a href="/encoding/gob/encoder_test.go.html#8289781">dec</a></span><span class="op" id="8289814">.</span><span class="ident" id="8289815">Decode</span><span class="op" id="8289821">(</span><span class="builtinfunc" id="8289822">new</span><span class="op" id="8289825">(</span><span class="ident" id="8289826"><a href="/encoding/gob/encoder_test.go.html#8286827">ET2</a></span><span class="op" id="8289829">)</span><span class="op" id="8289830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8289833">if</span>&nbsp;<span class="ident" id="8289836"><a href="/encoding/gob/encoder_test.go.html#8289803">err1</a></span>&nbsp;<span class="op" id="8289841">!=</span>&nbsp;<span class="ident" id="8289844"><a href="/encoding/gob/encoder_test.go.html#8289722">err</a></span>&nbsp;<span class="op" id="8289848">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289852"><a href="/encoding/gob/encoder_test.go.html#8289733">t</a></span><span class="op" id="8289853">.</span><span class="ident" id="8289854">Errorf</span><span class="op" id="8289860">(</span><span class="string" id="8289861">&#34;from&nbsp;%q&nbsp;expected&nbsp;error&nbsp;%s;&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8289896">,</span>&nbsp;<span class="ident" id="8289898"><a href="/encoding/gob/encoder_test.go.html#8289712">s</a></span><span class="op" id="8289899">,</span>&nbsp;<span class="ident" id="8289901"><a href="/encoding/gob/encoder_test.go.html#8289722">err</a></span><span class="op" id="8289904">,</span>&nbsp;<span class="ident" id="8289906"><a href="/encoding/gob/encoder_test.go.html#8289803">err1</a></span><span class="op" id="8289910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8289913">}</span><br>
<span class="lineno"></span><span class="op" id="8289915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8289918">//&nbsp;Check&nbsp;that&nbsp;we&nbsp;survive&nbsp;bad&nbsp;data.</span><br>
<span class="lineno">200</span><span class="keyword" id="8289953">func</span>&nbsp;<span class="ident" id="8289958">TestBadData</span><span class="op" id="8289969">(</span><span class="ident" id="8289970">t</span>&nbsp;<span class="op" id="8289972">*</span><span class="ident" id="8289973"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8289980">.</span><span class="ident" id="8289981">T</span><span class="op" id="8289982">)</span>&nbsp;<span class="op" id="8289984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8289987"><a href="/encoding/gob/encoder_test.go.html#8289695">corruptDataCheck</a></span><span class="op" id="8290003">(</span><span class="string" id="8290004">&#34;&#34;</span><span class="op" id="8290006">,</span>&nbsp;<span class="ident" id="8290008"><a href="/encoding/gob/encoder_test.go.html#8285779">io</a></span><span class="op" id="8290010">.</span><span class="ident" id="8290011">EOF</span><span class="op" id="8290014">,</span>&nbsp;<span class="ident" id="8290016"><a href="/encoding/gob/encoder_test.go.html#8289970">t</a></span><span class="op" id="8290017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290020"><a href="/encoding/gob/encoder_test.go.html#8289695">corruptDataCheck</a></span><span class="op" id="8290036">(</span><span class="string" id="8290037">&#34;\x7Fhi&#34;</span><span class="op" id="8290045">,</span>&nbsp;<span class="ident" id="8290047"><a href="/encoding/gob/encoder_test.go.html#8285779">io</a></span><span class="op" id="8290049">.</span><span class="ident" id="8290050">ErrUnexpectedEOF</span><span class="op" id="8290066">,</span>&nbsp;<span class="ident" id="8290068"><a href="/encoding/gob/encoder_test.go.html#8289970">t</a></span><span class="op" id="8290069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290072"><a href="/encoding/gob/encoder_test.go.html#8289695">corruptDataCheck</a></span><span class="op" id="8290088">(</span><span class="string" id="8290089">&#34;\x03now&nbsp;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="8290127">,</span>&nbsp;<span class="ident" id="8290129"><a href="/encoding/gob/decode.go.html#5038251">errBadType</a></span><span class="op" id="8290139">,</span>&nbsp;<span class="ident" id="8290141"><a href="/encoding/gob/encoder_test.go.html#8289970">t</a></span><span class="op" id="8290142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8290145">//&nbsp;issue&nbsp;6323.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290161"><a href="/encoding/gob/encoder_test.go.html#8289695">corruptDataCheck</a></span><span class="op" id="8290177">(</span><span class="string" id="8290178">&#34;\x04\x24foo&#34;</span><span class="op" id="8290191">,</span>&nbsp;<span class="ident" id="8290193"><a href="/encoding/gob/decode.go.html#5038318">errRange</a></span><span class="op" id="8290201">,</span>&nbsp;<span class="ident" id="8290203"><a href="/encoding/gob/encoder_test.go.html#8289970">t</a></span><span class="op" id="8290204">)</span><br>
<span class="lineno"></span><span class="op" id="8290206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8290209">//&nbsp;Types&nbsp;not&nbsp;supported&nbsp;at&nbsp;top&nbsp;level&nbsp;by&nbsp;the&nbsp;Encoder.</span><br>
<span class="lineno"></span><span class="keyword" id="8290261">var</span>&nbsp;<span class="ident" id="8290265">unsupportedValues</span>&nbsp;<span class="op" id="8290283">=</span>&nbsp;<span class="op" id="8290285">[</span><span class="op" id="8290286">]</span><span class="keyword" id="8290287">interface</span><span class="op" id="8290296">{</span><span class="op" id="8290297">}</span><span class="op" id="8290298">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8290301">make</span><span class="op" id="8290305">(</span><span class="keyword" id="8290306">chan</span>&nbsp;<span class="builtintype" id="8290311">int</span><span class="op" id="8290314">)</span><span class="op" id="8290315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290318">func</span><span class="op" id="8290322">(</span><span class="ident" id="8290323">a</span>&nbsp;<span class="builtintype" id="8290325">int</span><span class="op" id="8290328">)</span>&nbsp;<span class="builtintype" id="8290330">bool</span>&nbsp;<span class="op" id="8290335">{</span>&nbsp;<span class="keyword" id="8290337">return</span>&nbsp;<span class="ident" id="8290344">true</span>&nbsp;<span class="op" id="8290349">}</span><span class="op" id="8290350">,</span><br>
<span class="lineno"></span><span class="op" id="8290352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8290355">func</span>&nbsp;<span class="ident" id="8290360">TestUnsupported</span><span class="op" id="8290375">(</span><span class="ident" id="8290376">t</span>&nbsp;<span class="op" id="8290378">*</span><span class="ident" id="8290379"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8290386">.</span><span class="ident" id="8290387">T</span><span class="op" id="8290388">)</span>&nbsp;<span class="op" id="8290390">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290393">var</span>&nbsp;<span class="ident" id="8290397">b</span>&nbsp;<span class="ident" id="8290399"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8290404">.</span><span class="ident" id="8290405">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290413">enc</span>&nbsp;<span class="op" id="8290417">:=</span>&nbsp;<span class="ident" id="8290420"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8290430">(</span><span class="op" id="8290431">&amp;</span><span class="ident" id="8290432"><a href="/encoding/gob/encoder_test.go.html#8290397">b</a></span><span class="op" id="8290433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290436">for</span>&nbsp;<span class="ident" id="8290440">_</span><span class="op" id="8290441">,</span>&nbsp;<span class="ident" id="8290443">v</span>&nbsp;<span class="op" id="8290445">:=</span>&nbsp;<span class="keyword" id="8290448">range</span>&nbsp;<span class="ident" id="8290454"><a href="/encoding/gob/encoder_test.go.html#8290265">unsupportedValues</a></span>&nbsp;<span class="op" id="8290472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290476">err</span>&nbsp;<span class="op" id="8290480">:=</span>&nbsp;<span class="ident" id="8290483"><a href="/encoding/gob/encoder_test.go.html#8290413">enc</a></span><span class="op" id="8290486">.</span><span class="ident" id="8290487">Encode</span><span class="op" id="8290493">(</span><span class="ident" id="8290494"><a href="/encoding/gob/encoder_test.go.html#8290443">v</a></span><span class="op" id="8290495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290499">if</span>&nbsp;<span class="ident" id="8290502"><a href="/encoding/gob/encoder_test.go.html#8290476">err</a></span>&nbsp;<span class="op" id="8290506">==</span>&nbsp;<span class="ident" id="8290509">nil</span>&nbsp;<span class="op" id="8290513">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290518"><a href="/encoding/gob/encoder_test.go.html#8290376">t</a></span><span class="op" id="8290519">.</span><span class="ident" id="8290520">Errorf</span><span class="op" id="8290526">(</span><span class="string" id="8290527">&#34;expected&nbsp;error&nbsp;for&nbsp;%T;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8290560">,</span>&nbsp;<span class="ident" id="8290562"><a href="/encoding/gob/encoder_test.go.html#8290443">v</a></span><span class="op" id="8290563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8290567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8290570">}</span><br>
<span class="lineno"></span><span class="op" id="8290572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8290575">func</span>&nbsp;<span class="ident" id="8290580">encAndDec</span><span class="op" id="8290589">(</span><span class="ident" id="8290590">in</span><span class="op" id="8290592">,</span>&nbsp;<span class="ident" id="8290594">out</span>&nbsp;<span class="keyword" id="8290598">interface</span><span class="op" id="8290607">{</span><span class="op" id="8290608">}</span><span class="op" id="8290609">)</span>&nbsp;<span class="builtintype" id="8290611">error</span>&nbsp;<span class="op" id="8290617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290620">b</span>&nbsp;<span class="op" id="8290622">:=</span>&nbsp;<span class="builtinfunc" id="8290625">new</span><span class="op" id="8290628">(</span><span class="ident" id="8290629"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8290634">.</span><span class="ident" id="8290635">Buffer</span><span class="op" id="8290641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290644">enc</span>&nbsp;<span class="op" id="8290648">:=</span>&nbsp;<span class="ident" id="8290651"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8290661">(</span><span class="ident" id="8290662"><a href="/encoding/gob/encoder_test.go.html#8290620">b</a></span><span class="op" id="8290663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290666">err</span>&nbsp;<span class="op" id="8290670">:=</span>&nbsp;<span class="ident" id="8290673"><a href="/encoding/gob/encoder_test.go.html#8290644">enc</a></span><span class="op" id="8290676">.</span><span class="ident" id="8290677">Encode</span><span class="op" id="8290683">(</span><span class="ident" id="8290684"><a href="/encoding/gob/encoder_test.go.html#8290590">in</a></span><span class="op" id="8290686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290689">if</span>&nbsp;<span class="ident" id="8290692"><a href="/encoding/gob/encoder_test.go.html#8290666">err</a></span>&nbsp;<span class="op" id="8290696">!=</span>&nbsp;<span class="ident" id="8290699">nil</span>&nbsp;<span class="op" id="8290703">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290707">return</span>&nbsp;<span class="ident" id="8290714"><a href="/encoding/gob/encoder_test.go.html#8290666">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8290719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290722">dec</span>&nbsp;<span class="op" id="8290726">:=</span>&nbsp;<span class="ident" id="8290729"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8290739">(</span><span class="ident" id="8290740"><a href="/encoding/gob/encoder_test.go.html#8290620">b</a></span><span class="op" id="8290741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290744"><a href="/encoding/gob/encoder_test.go.html#8290666">err</a></span>&nbsp;<span class="op" id="8290748">=</span>&nbsp;<span class="ident" id="8290750"><a href="/encoding/gob/encoder_test.go.html#8290722">dec</a></span><span class="op" id="8290753">.</span><span class="ident" id="8290754">Decode</span><span class="op" id="8290760">(</span><span class="ident" id="8290761"><a href="/encoding/gob/encoder_test.go.html#8290594">out</a></span><span class="op" id="8290764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290767">if</span>&nbsp;<span class="ident" id="8290770"><a href="/encoding/gob/encoder_test.go.html#8290666">err</a></span>&nbsp;<span class="op" id="8290774">!=</span>&nbsp;<span class="ident" id="8290777">nil</span>&nbsp;<span class="op" id="8290781">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290785">return</span>&nbsp;<span class="ident" id="8290792"><a href="/encoding/gob/encoder_test.go.html#8290666">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8290797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290800">return</span>&nbsp;<span class="ident" id="8290807">nil</span><br>
<span class="lineno"></span><span class="op" id="8290811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8290814">func</span>&nbsp;<span class="ident" id="8290819">TestTypeToPtrType</span><span class="op" id="8290836">(</span><span class="ident" id="8290837">t</span>&nbsp;<span class="op" id="8290839">*</span><span class="ident" id="8290840"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8290847">.</span><span class="ident" id="8290848">T</span><span class="op" id="8290849">)</span>&nbsp;<span class="op" id="8290851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8290854">//&nbsp;Encode&nbsp;a&nbsp;T,&nbsp;decode&nbsp;a&nbsp;*T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290882">type</span>&nbsp;<span class="ident" id="8290887">Type0</span>&nbsp;<span class="keyword" id="8290893">struct</span>&nbsp;<span class="op" id="8290900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290904">A</span>&nbsp;<span class="builtintype" id="8290906">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8290911">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290914">t0</span>&nbsp;<span class="op" id="8290917">:=</span>&nbsp;<span class="ident" id="8290920"><a href="/encoding/gob/encoder_test.go.html#8290887">Type0</a></span><span class="op" id="8290925">{</span><span class="num" id="8290926">7</span><span class="op" id="8290927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290930">t0p</span>&nbsp;<span class="op" id="8290934">:=</span>&nbsp;<span class="builtinfunc" id="8290937">new</span><span class="op" id="8290940">(</span><span class="ident" id="8290941"><a href="/encoding/gob/encoder_test.go.html#8290887">Type0</a></span><span class="op" id="8290946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8290949">if</span>&nbsp;<span class="ident" id="8290952">err</span>&nbsp;<span class="op" id="8290956">:=</span>&nbsp;<span class="ident" id="8290959"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8290968">(</span><span class="ident" id="8290969"><a href="/encoding/gob/encoder_test.go.html#8290914">t0</a></span><span class="op" id="8290971">,</span>&nbsp;<span class="ident" id="8290973"><a href="/encoding/gob/encoder_test.go.html#8290930">t0p</a></span><span class="op" id="8290976">)</span><span class="op" id="8290977">;</span>&nbsp;<span class="ident" id="8290979"><a href="/encoding/gob/encoder_test.go.html#8290952">err</a></span>&nbsp;<span class="op" id="8290983">!=</span>&nbsp;<span class="ident" id="8290986">nil</span>&nbsp;<span class="op" id="8290990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8290994"><a href="/encoding/gob/encoder_test.go.html#8290837">t</a></span><span class="op" id="8290995">.</span><span class="ident" id="8290996">Error</span><span class="op" id="8291001">(</span><span class="ident" id="8291002"><a href="/encoding/gob/encoder_test.go.html#8290952">err</a></span><span class="op" id="8291005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291008">}</span><br>
<span class="lineno">250</span><span class="op" id="8291010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8291013">func</span>&nbsp;<span class="ident" id="8291018">TestPtrTypeToType</span><span class="op" id="8291035">(</span><span class="ident" id="8291036">t</span>&nbsp;<span class="op" id="8291038">*</span><span class="ident" id="8291039"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8291046">.</span><span class="ident" id="8291047">T</span><span class="op" id="8291048">)</span>&nbsp;<span class="op" id="8291050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8291053">//&nbsp;Encode&nbsp;a&nbsp;*T,&nbsp;decode&nbsp;a&nbsp;T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291081">type</span>&nbsp;<span class="ident" id="8291086">Type1</span>&nbsp;<span class="keyword" id="8291092">struct</span>&nbsp;<span class="op" id="8291099">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291103">A</span>&nbsp;<span class="builtintype" id="8291105">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291114">t1p</span>&nbsp;<span class="op" id="8291118">:=</span>&nbsp;<span class="op" id="8291121">&amp;</span><span class="ident" id="8291122"><a href="/encoding/gob/encoder_test.go.html#8291086">Type1</a></span><span class="op" id="8291127">{</span><span class="num" id="8291128">17</span><span class="op" id="8291130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291133">var</span>&nbsp;<span class="ident" id="8291137">t1</span>&nbsp;<span class="ident" id="8291140"><a href="/encoding/gob/encoder_test.go.html#8291086">Type1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291147">if</span>&nbsp;<span class="ident" id="8291150">err</span>&nbsp;<span class="op" id="8291154">:=</span>&nbsp;<span class="ident" id="8291157"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8291166">(</span><span class="ident" id="8291167"><a href="/encoding/gob/encoder_test.go.html#8291137">t1</a></span><span class="op" id="8291169">,</span>&nbsp;<span class="ident" id="8291171"><a href="/encoding/gob/encoder_test.go.html#8291114">t1p</a></span><span class="op" id="8291174">)</span><span class="op" id="8291175">;</span>&nbsp;<span class="ident" id="8291177"><a href="/encoding/gob/encoder_test.go.html#8291150">err</a></span>&nbsp;<span class="op" id="8291181">!=</span>&nbsp;<span class="ident" id="8291184">nil</span>&nbsp;<span class="op" id="8291188">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291192"><a href="/encoding/gob/encoder_test.go.html#8291036">t</a></span><span class="op" id="8291193">.</span><span class="ident" id="8291194">Error</span><span class="op" id="8291199">(</span><span class="ident" id="8291200"><a href="/encoding/gob/encoder_test.go.html#8291150">err</a></span><span class="op" id="8291203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291206">}</span><br>
<span class="lineno"></span><span class="op" id="8291208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8291211">func</span>&nbsp;<span class="ident" id="8291216">TestTypeToPtrPtrPtrPtrType</span><span class="op" id="8291242">(</span><span class="ident" id="8291243">t</span>&nbsp;<span class="op" id="8291245">*</span><span class="ident" id="8291246"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8291253">.</span><span class="ident" id="8291254">T</span><span class="op" id="8291255">)</span>&nbsp;<span class="op" id="8291257">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291260">type</span>&nbsp;<span class="ident" id="8291265">Type2</span>&nbsp;<span class="keyword" id="8291271">struct</span>&nbsp;<span class="op" id="8291278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291282">A</span>&nbsp;<span class="op" id="8291284">*</span><span class="op" id="8291285">*</span><span class="op" id="8291286">*</span><span class="op" id="8291287">*</span><span class="builtintype" id="8291288">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291300">t2</span>&nbsp;<span class="op" id="8291303">:=</span>&nbsp;<span class="ident" id="8291306"><a href="/encoding/gob/encoder_test.go.html#8291265">Type2</a></span><span class="op" id="8291311">{</span><span class="op" id="8291312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291315"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291317">.</span><span class="ident" id="8291318">A</span>&nbsp;<span class="op" id="8291320">=</span>&nbsp;<span class="builtinfunc" id="8291322">new</span><span class="op" id="8291325">(</span><span class="op" id="8291326">*</span><span class="op" id="8291327">*</span><span class="op" id="8291328">*</span><span class="builtintype" id="8291329">float64</span><span class="op" id="8291336">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291339">*</span><span class="ident" id="8291340"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291342">.</span><span class="ident" id="8291343">A</span>&nbsp;<span class="op" id="8291345">=</span>&nbsp;<span class="builtinfunc" id="8291347">new</span><span class="op" id="8291350">(</span><span class="op" id="8291351">*</span><span class="op" id="8291352">*</span><span class="builtintype" id="8291353">float64</span><span class="op" id="8291360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291363">*</span><span class="op" id="8291364">*</span><span class="ident" id="8291365"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291367">.</span><span class="ident" id="8291368">A</span>&nbsp;<span class="op" id="8291370">=</span>&nbsp;<span class="builtinfunc" id="8291372">new</span><span class="op" id="8291375">(</span><span class="op" id="8291376">*</span><span class="builtintype" id="8291377">float64</span><span class="op" id="8291384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291387">*</span><span class="op" id="8291388">*</span><span class="op" id="8291389">*</span><span class="ident" id="8291390"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291392">.</span><span class="ident" id="8291393">A</span>&nbsp;<span class="op" id="8291395">=</span>&nbsp;<span class="builtinfunc" id="8291397">new</span><span class="op" id="8291400">(</span><span class="builtintype" id="8291401">float64</span><span class="op" id="8291408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291411">*</span><span class="op" id="8291412">*</span><span class="op" id="8291413">*</span><span class="op" id="8291414">*</span><span class="ident" id="8291415"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291417">.</span><span class="ident" id="8291418">A</span>&nbsp;<span class="op" id="8291420">=</span>&nbsp;<span class="num" id="8291422">27.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291428">t2pppp</span>&nbsp;<span class="op" id="8291435">:=</span>&nbsp;<span class="builtinfunc" id="8291438">new</span><span class="op" id="8291441">(</span><span class="op" id="8291442">*</span><span class="op" id="8291443">*</span><span class="op" id="8291444">*</span><span class="ident" id="8291445"><a href="/encoding/gob/encoder_test.go.html#8291265">Type2</a></span><span class="op" id="8291450">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291453">if</span>&nbsp;<span class="ident" id="8291456">err</span>&nbsp;<span class="op" id="8291460">:=</span>&nbsp;<span class="ident" id="8291463"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8291472">(</span><span class="ident" id="8291473"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291475">,</span>&nbsp;<span class="ident" id="8291477"><a href="/encoding/gob/encoder_test.go.html#8291428">t2pppp</a></span><span class="op" id="8291483">)</span><span class="op" id="8291484">;</span>&nbsp;<span class="ident" id="8291486"><a href="/encoding/gob/encoder_test.go.html#8291456">err</a></span>&nbsp;<span class="op" id="8291490">!=</span>&nbsp;<span class="ident" id="8291493">nil</span>&nbsp;<span class="op" id="8291497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291501"><a href="/encoding/gob/encoder_test.go.html#8291243">t</a></span><span class="op" id="8291502">.</span><span class="ident" id="8291503">Fatal</span><span class="op" id="8291508">(</span><span class="ident" id="8291509"><a href="/encoding/gob/encoder_test.go.html#8291456">err</a></span><span class="op" id="8291512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291518">if</span>&nbsp;<span class="op" id="8291521">*</span><span class="op" id="8291522">*</span><span class="op" id="8291523">*</span><span class="op" id="8291524">*</span><span class="op" id="8291525">(</span><span class="op" id="8291526">*</span><span class="op" id="8291527">*</span><span class="op" id="8291528">*</span><span class="op" id="8291529">*</span><span class="ident" id="8291530"><a href="/encoding/gob/encoder_test.go.html#8291428">t2pppp</a></span><span class="op" id="8291536">)</span><span class="op" id="8291537">.</span><span class="ident" id="8291538">A</span>&nbsp;<span class="op" id="8291540">!=</span>&nbsp;<span class="op" id="8291543">*</span><span class="op" id="8291544">*</span><span class="op" id="8291545">*</span><span class="op" id="8291546">*</span><span class="ident" id="8291547"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291549">.</span><span class="ident" id="8291550">A</span>&nbsp;<span class="op" id="8291552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291556"><a href="/encoding/gob/encoder_test.go.html#8291243">t</a></span><span class="op" id="8291557">.</span><span class="ident" id="8291558">Errorf</span><span class="op" id="8291564">(</span><span class="string" id="8291565">&#34;wrong&nbsp;value&nbsp;after&nbsp;decode:&nbsp;%g&nbsp;not&nbsp;%g&#34;</span><span class="op" id="8291602">,</span>&nbsp;<span class="op" id="8291604">*</span><span class="op" id="8291605">*</span><span class="op" id="8291606">*</span><span class="op" id="8291607">*</span><span class="op" id="8291608">(</span><span class="op" id="8291609">*</span><span class="op" id="8291610">*</span><span class="op" id="8291611">*</span><span class="op" id="8291612">*</span><span class="ident" id="8291613"><a href="/encoding/gob/encoder_test.go.html#8291428">t2pppp</a></span><span class="op" id="8291619">)</span><span class="op" id="8291620">.</span><span class="ident" id="8291621">A</span><span class="op" id="8291622">,</span>&nbsp;<span class="op" id="8291624">*</span><span class="op" id="8291625">*</span><span class="op" id="8291626">*</span><span class="op" id="8291627">*</span><span class="ident" id="8291628"><a href="/encoding/gob/encoder_test.go.html#8291300">t2</a></span><span class="op" id="8291630">.</span><span class="ident" id="8291631">A</span><span class="op" id="8291632">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291635">}</span><br>
<span class="lineno"></span><span class="op" id="8291637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8291640">func</span>&nbsp;<span class="ident" id="8291645">TestSlice</span><span class="op" id="8291654">(</span><span class="ident" id="8291655">t</span>&nbsp;<span class="op" id="8291657">*</span><span class="ident" id="8291658"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8291665">.</span><span class="ident" id="8291666">T</span><span class="op" id="8291667">)</span>&nbsp;<span class="op" id="8291669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291672">type</span>&nbsp;<span class="ident" id="8291677">Type3</span>&nbsp;<span class="keyword" id="8291683">struct</span>&nbsp;<span class="op" id="8291690">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291694">A</span>&nbsp;<span class="op" id="8291696">[</span><span class="op" id="8291697">]</span><span class="builtintype" id="8291698">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291709">t3p</span>&nbsp;<span class="op" id="8291713">:=</span>&nbsp;<span class="op" id="8291716">&amp;</span><span class="ident" id="8291717"><a href="/encoding/gob/encoder_test.go.html#8291677">Type3</a></span><span class="op" id="8291722">{</span><span class="op" id="8291723">[</span><span class="op" id="8291724">]</span><span class="builtintype" id="8291725">string</span><span class="op" id="8291731">{</span><span class="string" id="8291732">&#34;hello&#34;</span><span class="op" id="8291739">,</span>&nbsp;<span class="string" id="8291741">&#34;world&#34;</span><span class="op" id="8291748">}</span><span class="op" id="8291749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291752">var</span>&nbsp;<span class="ident" id="8291756">t3</span>&nbsp;<span class="ident" id="8291759"><a href="/encoding/gob/encoder_test.go.html#8291677">Type3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291766">if</span>&nbsp;<span class="ident" id="8291769">err</span>&nbsp;<span class="op" id="8291773">:=</span>&nbsp;<span class="ident" id="8291776"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8291785">(</span><span class="ident" id="8291786"><a href="/encoding/gob/encoder_test.go.html#8291756">t3</a></span><span class="op" id="8291788">,</span>&nbsp;<span class="ident" id="8291790"><a href="/encoding/gob/encoder_test.go.html#8291709">t3p</a></span><span class="op" id="8291793">)</span><span class="op" id="8291794">;</span>&nbsp;<span class="ident" id="8291796"><a href="/encoding/gob/encoder_test.go.html#8291769">err</a></span>&nbsp;<span class="op" id="8291800">!=</span>&nbsp;<span class="ident" id="8291803">nil</span>&nbsp;<span class="op" id="8291807">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291811"><a href="/encoding/gob/encoder_test.go.html#8291655">t</a></span><span class="op" id="8291812">.</span><span class="ident" id="8291813">Error</span><span class="op" id="8291818">(</span><span class="ident" id="8291819"><a href="/encoding/gob/encoder_test.go.html#8291769">err</a></span><span class="op" id="8291822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291825">}</span><br>
<span class="lineno"></span><span class="op" id="8291827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8291830">func</span>&nbsp;<span class="ident" id="8291835">TestValueError</span><span class="op" id="8291849">(</span><span class="ident" id="8291850">t</span>&nbsp;<span class="op" id="8291852">*</span><span class="ident" id="8291853"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8291860">.</span><span class="ident" id="8291861">T</span><span class="op" id="8291862">)</span>&nbsp;<span class="op" id="8291864">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8291867">//&nbsp;Encode&nbsp;a&nbsp;*T,&nbsp;decode&nbsp;a&nbsp;T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291895">type</span>&nbsp;<span class="ident" id="8291900">Type4</span>&nbsp;<span class="keyword" id="8291906">struct</span>&nbsp;<span class="op" id="8291913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291917">A</span>&nbsp;<span class="builtintype" id="8291919">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8291924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8291927">t4p</span>&nbsp;<span class="op" id="8291931">:=</span>&nbsp;<span class="op" id="8291934">&amp;</span><span class="ident" id="8291935"><a href="/encoding/gob/encoder_test.go.html#8291900">Type4</a></span><span class="op" id="8291940">{</span><span class="num" id="8291941">3</span><span class="op" id="8291942">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291945">var</span>&nbsp;<span class="ident" id="8291949">t4</span>&nbsp;<span class="ident" id="8291952"><a href="/encoding/gob/encoder_test.go.html#8291900">Type4</a></span>&nbsp;<span class="comment" id="8291958">//&nbsp;note:&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8291983">if</span>&nbsp;<span class="ident" id="8291986">err</span>&nbsp;<span class="op" id="8291990">:=</span>&nbsp;<span class="ident" id="8291993"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8292002">(</span><span class="ident" id="8292003"><a href="/encoding/gob/encoder_test.go.html#8291927">t4p</a></span><span class="op" id="8292006">,</span>&nbsp;<span class="ident" id="8292008"><a href="/encoding/gob/encoder_test.go.html#8291949">t4</a></span><span class="op" id="8292010">)</span><span class="op" id="8292011">;</span>&nbsp;<span class="ident" id="8292013"><a href="/encoding/gob/encoder_test.go.html#8291986">err</a></span>&nbsp;<span class="op" id="8292017">==</span>&nbsp;<span class="ident" id="8292020">nil</span>&nbsp;<span class="op" id="8292024">||</span>&nbsp;<span class="ident" id="8292027"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8292034">.</span><span class="ident" id="8292035">Index</span><span class="op" id="8292040">(</span><span class="ident" id="8292041"><a href="/encoding/gob/encoder_test.go.html#8291986">err</a></span><span class="op" id="8292044">.</span><span class="ident" id="8292045">Error</span><span class="op" id="8292050">(</span><span class="op" id="8292051">)</span><span class="op" id="8292052">,</span>&nbsp;<span class="string" id="8292054">&#34;pointer&#34;</span><span class="op" id="8292063">)</span>&nbsp;<span class="op" id="8292065">&lt;</span>&nbsp;<span class="num" id="8292067">0</span>&nbsp;<span class="op" id="8292069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292073"><a href="/encoding/gob/encoder_test.go.html#8291850">t</a></span><span class="op" id="8292074">.</span><span class="ident" id="8292075">Error</span><span class="op" id="8292080">(</span><span class="string" id="8292081">&#34;expected&nbsp;error&nbsp;about&nbsp;pointer;&nbsp;got&#34;</span><span class="op" id="8292116">,</span>&nbsp;<span class="ident" id="8292118"><a href="/encoding/gob/encoder_test.go.html#8291986">err</a></span><span class="op" id="8292121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292124">}</span><br>
<span class="lineno"></span><span class="op" id="8292126">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="8292129">func</span>&nbsp;<span class="ident" id="8292134">TestArray</span><span class="op" id="8292143">(</span><span class="ident" id="8292144">t</span>&nbsp;<span class="op" id="8292146">*</span><span class="ident" id="8292147"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8292154">.</span><span class="ident" id="8292155">T</span><span class="op" id="8292156">)</span>&nbsp;<span class="op" id="8292158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292161">type</span>&nbsp;<span class="ident" id="8292166">Type5</span>&nbsp;<span class="keyword" id="8292172">struct</span>&nbsp;<span class="op" id="8292179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292183">A</span>&nbsp;<span class="op" id="8292185">[</span><span class="num" id="8292186">3</span><span class="op" id="8292187">]</span><span class="builtintype" id="8292188">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292197">B</span>&nbsp;<span class="op" id="8292199">[</span><span class="num" id="8292200">3</span><span class="op" id="8292201">]</span><span class="builtintype" id="8292202">byte</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292211">type</span>&nbsp;<span class="ident" id="8292216">Type6</span>&nbsp;<span class="keyword" id="8292222">struct</span>&nbsp;<span class="op" id="8292229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292233">A</span>&nbsp;<span class="op" id="8292235">[</span><span class="num" id="8292236">2</span><span class="op" id="8292237">]</span><span class="builtintype" id="8292238">string</span>&nbsp;<span class="comment" id="8292245">//&nbsp;can&#39;t&nbsp;hold&nbsp;t5.a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292268">t5</span>&nbsp;<span class="op" id="8292271">:=</span>&nbsp;<span class="ident" id="8292274"><a href="/encoding/gob/encoder_test.go.html#8292166">Type5</a></span><span class="op" id="8292279">{</span><span class="op" id="8292280">[</span><span class="num" id="8292281">3</span><span class="op" id="8292282">]</span><span class="builtintype" id="8292283">string</span><span class="op" id="8292289">{</span><span class="string" id="8292290">&#34;hello&#34;</span><span class="op" id="8292297">,</span>&nbsp;<span class="string" id="8292299">&#34;,&#34;</span><span class="op" id="8292302">,</span>&nbsp;<span class="string" id="8292304">&#34;world&#34;</span><span class="op" id="8292311">}</span><span class="op" id="8292312">,</span>&nbsp;<span class="op" id="8292314">[</span><span class="num" id="8292315">3</span><span class="op" id="8292316">]</span><span class="builtintype" id="8292317">byte</span><span class="op" id="8292321">{</span><span class="num" id="8292322">1</span><span class="op" id="8292323">,</span>&nbsp;<span class="num" id="8292325">2</span><span class="op" id="8292326">,</span>&nbsp;<span class="num" id="8292328">3</span><span class="op" id="8292329">}</span><span class="op" id="8292330">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292333">var</span>&nbsp;<span class="ident" id="8292337">t5p</span>&nbsp;<span class="ident" id="8292341"><a href="/encoding/gob/encoder_test.go.html#8292166">Type5</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292348">if</span>&nbsp;<span class="ident" id="8292351">err</span>&nbsp;<span class="op" id="8292355">:=</span>&nbsp;<span class="ident" id="8292358"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8292367">(</span><span class="ident" id="8292368"><a href="/encoding/gob/encoder_test.go.html#8292268">t5</a></span><span class="op" id="8292370">,</span>&nbsp;<span class="op" id="8292372">&amp;</span><span class="ident" id="8292373"><a href="/encoding/gob/encoder_test.go.html#8292337">t5p</a></span><span class="op" id="8292376">)</span><span class="op" id="8292377">;</span>&nbsp;<span class="ident" id="8292379"><a href="/encoding/gob/encoder_test.go.html#8292351">err</a></span>&nbsp;<span class="op" id="8292383">!=</span>&nbsp;<span class="ident" id="8292386">nil</span>&nbsp;<span class="op" id="8292390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292394"><a href="/encoding/gob/encoder_test.go.html#8292144">t</a></span><span class="op" id="8292395">.</span><span class="ident" id="8292396">Error</span><span class="op" id="8292401">(</span><span class="ident" id="8292402"><a href="/encoding/gob/encoder_test.go.html#8292351">err</a></span><span class="op" id="8292405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292411">var</span>&nbsp;<span class="ident" id="8292415">t6</span>&nbsp;<span class="ident" id="8292418"><a href="/encoding/gob/encoder_test.go.html#8292216">Type6</a></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292425">if</span>&nbsp;<span class="ident" id="8292428">err</span>&nbsp;<span class="op" id="8292432">:=</span>&nbsp;<span class="ident" id="8292435"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8292444">(</span><span class="ident" id="8292445"><a href="/encoding/gob/encoder_test.go.html#8292268">t5</a></span><span class="op" id="8292447">,</span>&nbsp;<span class="op" id="8292449">&amp;</span><span class="ident" id="8292450"><a href="/encoding/gob/encoder_test.go.html#8292415">t6</a></span><span class="op" id="8292452">)</span><span class="op" id="8292453">;</span>&nbsp;<span class="ident" id="8292455"><a href="/encoding/gob/encoder_test.go.html#8292428">err</a></span>&nbsp;<span class="op" id="8292459">==</span>&nbsp;<span class="ident" id="8292462">nil</span>&nbsp;<span class="op" id="8292466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292470"><a href="/encoding/gob/encoder_test.go.html#8292144">t</a></span><span class="op" id="8292471">.</span><span class="ident" id="8292472">Error</span><span class="op" id="8292477">(</span><span class="string" id="8292478">&#34;should&nbsp;fail&nbsp;with&nbsp;mismatched&nbsp;array&nbsp;sizes&#34;</span><span class="op" id="8292519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292522">}</span><br>
<span class="lineno"></span><span class="op" id="8292524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="8292527">func</span>&nbsp;<span class="ident" id="8292532">TestRecursiveMapType</span><span class="op" id="8292552">(</span><span class="ident" id="8292553">t</span>&nbsp;<span class="op" id="8292555">*</span><span class="ident" id="8292556"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8292563">.</span><span class="ident" id="8292564">T</span><span class="op" id="8292565">)</span>&nbsp;<span class="op" id="8292567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292570">type</span>&nbsp;<span class="ident" id="8292575">recursiveMap</span>&nbsp;<span class="keyword" id="8292588">map</span><span class="op" id="8292591">[</span><span class="builtintype" id="8292592">string</span><span class="op" id="8292598">]</span><span class="ident" id="8292599"><a href="/encoding/gob/encoder_test.go.html#8292575">recursiveMap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292613">r1</span>&nbsp;<span class="op" id="8292616">:=</span>&nbsp;<span class="ident" id="8292619"><a href="/encoding/gob/encoder_test.go.html#8292575">recursiveMap</a></span><span class="op" id="8292631">{</span><span class="string" id="8292632">&#34;A&#34;</span><span class="op" id="8292635">:</span>&nbsp;<span class="ident" id="8292637"><a href="/encoding/gob/encoder_test.go.html#8292575">recursiveMap</a></span><span class="op" id="8292649">{</span><span class="string" id="8292650">&#34;B&#34;</span><span class="op" id="8292653">:</span>&nbsp;<span class="ident" id="8292655">nil</span><span class="op" id="8292658">,</span>&nbsp;<span class="string" id="8292660">&#34;C&#34;</span><span class="op" id="8292663">:</span>&nbsp;<span class="ident" id="8292665">nil</span><span class="op" id="8292668">}</span><span class="op" id="8292669">,</span>&nbsp;<span class="string" id="8292671">&#34;D&#34;</span><span class="op" id="8292674">:</span>&nbsp;<span class="ident" id="8292676">nil</span><span class="op" id="8292679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292682">r2</span>&nbsp;<span class="op" id="8292685">:=</span>&nbsp;<span class="builtinfunc" id="8292688">make</span><span class="op" id="8292692">(</span><span class="ident" id="8292693"><a href="/encoding/gob/encoder_test.go.html#8292575">recursiveMap</a></span><span class="op" id="8292705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292708">if</span>&nbsp;<span class="ident" id="8292711">err</span>&nbsp;<span class="op" id="8292715">:=</span>&nbsp;<span class="ident" id="8292718"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8292727">(</span><span class="ident" id="8292728"><a href="/encoding/gob/encoder_test.go.html#8292613">r1</a></span><span class="op" id="8292730">,</span>&nbsp;<span class="op" id="8292732">&amp;</span><span class="ident" id="8292733"><a href="/encoding/gob/encoder_test.go.html#8292682">r2</a></span><span class="op" id="8292735">)</span><span class="op" id="8292736">;</span>&nbsp;<span class="ident" id="8292738"><a href="/encoding/gob/encoder_test.go.html#8292711">err</a></span>&nbsp;<span class="op" id="8292742">!=</span>&nbsp;<span class="ident" id="8292745">nil</span>&nbsp;<span class="op" id="8292749">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292753"><a href="/encoding/gob/encoder_test.go.html#8292553">t</a></span><span class="op" id="8292754">.</span><span class="ident" id="8292755">Error</span><span class="op" id="8292760">(</span><span class="ident" id="8292761"><a href="/encoding/gob/encoder_test.go.html#8292711">err</a></span><span class="op" id="8292764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8292767">}</span><br>
<span class="lineno"></span><span class="op" id="8292769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8292772">func</span>&nbsp;<span class="ident" id="8292777">TestRecursiveSliceType</span><span class="op" id="8292799">(</span><span class="ident" id="8292800">t</span>&nbsp;<span class="op" id="8292802">*</span><span class="ident" id="8292803"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8292810">.</span><span class="ident" id="8292811">T</span><span class="op" id="8292812">)</span>&nbsp;<span class="op" id="8292814">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292817">type</span>&nbsp;<span class="ident" id="8292822">recursiveSlice</span>&nbsp;<span class="op" id="8292837">[</span><span class="op" id="8292838">]</span><span class="ident" id="8292839"><a href="/encoding/gob/encoder_test.go.html#8292822">recursiveSlice</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292855">r1</span>&nbsp;<span class="op" id="8292858">:=</span>&nbsp;<span class="ident" id="8292861"><a href="/encoding/gob/encoder_test.go.html#8292822">recursiveSlice</a></span><span class="op" id="8292875">{</span><span class="num" id="8292876">0</span><span class="op" id="8292877">:</span>&nbsp;<span class="ident" id="8292879"><a href="/encoding/gob/encoder_test.go.html#8292822">recursiveSlice</a></span><span class="op" id="8292893">{</span><span class="num" id="8292894">0</span><span class="op" id="8292895">:</span>&nbsp;<span class="ident" id="8292897">nil</span><span class="op" id="8292900">}</span><span class="op" id="8292901">,</span>&nbsp;<span class="num" id="8292903">1</span><span class="op" id="8292904">:</span>&nbsp;<span class="ident" id="8292906">nil</span><span class="op" id="8292909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292912">r2</span>&nbsp;<span class="op" id="8292915">:=</span>&nbsp;<span class="builtinfunc" id="8292918">make</span><span class="op" id="8292922">(</span><span class="ident" id="8292923"><a href="/encoding/gob/encoder_test.go.html#8292822">recursiveSlice</a></span><span class="op" id="8292937">,</span>&nbsp;<span class="num" id="8292939">0</span><span class="op" id="8292940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8292943">if</span>&nbsp;<span class="ident" id="8292946">err</span>&nbsp;<span class="op" id="8292950">:=</span>&nbsp;<span class="ident" id="8292953"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8292962">(</span><span class="ident" id="8292963"><a href="/encoding/gob/encoder_test.go.html#8292855">r1</a></span><span class="op" id="8292965">,</span>&nbsp;<span class="op" id="8292967">&amp;</span><span class="ident" id="8292968"><a href="/encoding/gob/encoder_test.go.html#8292912">r2</a></span><span class="op" id="8292970">)</span><span class="op" id="8292971">;</span>&nbsp;<span class="ident" id="8292973"><a href="/encoding/gob/encoder_test.go.html#8292946">err</a></span>&nbsp;<span class="op" id="8292977">!=</span>&nbsp;<span class="ident" id="8292980">nil</span>&nbsp;<span class="op" id="8292984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8292988"><a href="/encoding/gob/encoder_test.go.html#8292800">t</a></span><span class="op" id="8292989">.</span><span class="ident" id="8292990">Error</span><span class="op" id="8292995">(</span><span class="ident" id="8292996"><a href="/encoding/gob/encoder_test.go.html#8292946">err</a></span><span class="op" id="8292999">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293002">}</span><br>
<span class="lineno"></span><span class="op" id="8293004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8293007">//&nbsp;Regression&nbsp;test&nbsp;for&nbsp;bug:&nbsp;must&nbsp;send&nbsp;zero&nbsp;values&nbsp;inside&nbsp;arrays</span><br>
<span class="lineno"></span><span class="keyword" id="8293071">func</span>&nbsp;<span class="ident" id="8293076">TestDefaultsInArray</span><span class="op" id="8293095">(</span><span class="ident" id="8293096">t</span>&nbsp;<span class="op" id="8293098">*</span><span class="ident" id="8293099"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8293106">.</span><span class="ident" id="8293107">T</span><span class="op" id="8293108">)</span>&nbsp;<span class="op" id="8293110">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8293113">type</span>&nbsp;<span class="ident" id="8293118">Type7</span>&nbsp;<span class="keyword" id="8293124">struct</span>&nbsp;<span class="op" id="8293131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293135">B</span>&nbsp;<span class="op" id="8293137">[</span><span class="op" id="8293138">]</span><span class="builtintype" id="8293139">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293146">I</span>&nbsp;<span class="op" id="8293148">[</span><span class="op" id="8293149">]</span><span class="builtintype" id="8293150">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293156">S</span>&nbsp;<span class="op" id="8293158">[</span><span class="op" id="8293159">]</span><span class="builtintype" id="8293160">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293169">F</span>&nbsp;<span class="op" id="8293171">[</span><span class="op" id="8293172">]</span><span class="builtintype" id="8293173">float64</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293185">t7</span>&nbsp;<span class="op" id="8293188">:=</span>&nbsp;<span class="ident" id="8293191"><a href="/encoding/gob/encoder_test.go.html#8293118">Type7</a></span><span class="op" id="8293196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293200">[</span><span class="op" id="8293201">]</span><span class="builtintype" id="8293202">bool</span><span class="op" id="8293206">{</span><span class="ident" id="8293207">false</span><span class="op" id="8293212">,</span>&nbsp;<span class="ident" id="8293214">false</span><span class="op" id="8293219">,</span>&nbsp;<span class="ident" id="8293221">true</span><span class="op" id="8293225">}</span><span class="op" id="8293226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293230">[</span><span class="op" id="8293231">]</span><span class="builtintype" id="8293232">int</span><span class="op" id="8293235">{</span><span class="num" id="8293236">0</span><span class="op" id="8293237">,</span>&nbsp;<span class="num" id="8293239">0</span><span class="op" id="8293240">,</span>&nbsp;<span class="num" id="8293242">1</span><span class="op" id="8293243">}</span><span class="op" id="8293244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293248">[</span><span class="op" id="8293249">]</span><span class="builtintype" id="8293250">string</span><span class="op" id="8293256">{</span><span class="string" id="8293257">&#34;hi&#34;</span><span class="op" id="8293261">,</span>&nbsp;<span class="string" id="8293263">&#34;&#34;</span><span class="op" id="8293265">,</span>&nbsp;<span class="string" id="8293267">&#34;there&#34;</span><span class="op" id="8293274">}</span><span class="op" id="8293275">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293279">[</span><span class="op" id="8293280">]</span><span class="builtintype" id="8293281">float64</span><span class="op" id="8293288">{</span><span class="num" id="8293289">0</span><span class="op" id="8293290">,</span>&nbsp;<span class="num" id="8293292">0</span><span class="op" id="8293293">,</span>&nbsp;<span class="num" id="8293295">1</span><span class="op" id="8293296">}</span><span class="op" id="8293297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8293303">var</span>&nbsp;<span class="ident" id="8293307">t7p</span>&nbsp;<span class="ident" id="8293311"><a href="/encoding/gob/encoder_test.go.html#8293118">Type7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8293318">if</span>&nbsp;<span class="ident" id="8293321">err</span>&nbsp;<span class="op" id="8293325">:=</span>&nbsp;<span class="ident" id="8293328"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8293337">(</span><span class="ident" id="8293338"><a href="/encoding/gob/encoder_test.go.html#8293185">t7</a></span><span class="op" id="8293340">,</span>&nbsp;<span class="op" id="8293342">&amp;</span><span class="ident" id="8293343"><a href="/encoding/gob/encoder_test.go.html#8293307">t7p</a></span><span class="op" id="8293346">)</span><span class="op" id="8293347">;</span>&nbsp;<span class="ident" id="8293349"><a href="/encoding/gob/encoder_test.go.html#8293321">err</a></span>&nbsp;<span class="op" id="8293353">!=</span>&nbsp;<span class="ident" id="8293356">nil</span>&nbsp;<span class="op" id="8293360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293364"><a href="/encoding/gob/encoder_test.go.html#8293096">t</a></span><span class="op" id="8293365">.</span><span class="ident" id="8293366">Error</span><span class="op" id="8293371">(</span><span class="ident" id="8293372"><a href="/encoding/gob/encoder_test.go.html#8293321">err</a></span><span class="op" id="8293375">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293378">}</span><br>
<span class="lineno"></span><span class="op" id="8293380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8293383">var</span>&nbsp;<span class="ident" id="8293387">testInt</span>&nbsp;<span class="builtintype" id="8293395">int</span><br>
<span class="lineno"></span><span class="keyword" id="8293399">var</span>&nbsp;<span class="ident" id="8293403">testFloat32</span>&nbsp;<span class="builtintype" id="8293415">float32</span><br>
<span class="lineno">365</span><span class="keyword" id="8293423">var</span>&nbsp;<span class="ident" id="8293427">testString</span>&nbsp;<span class="builtintype" id="8293438">string</span><br>
<span class="lineno"></span><span class="keyword" id="8293445">var</span>&nbsp;<span class="ident" id="8293449">testSlice</span>&nbsp;<span class="op" id="8293459">[</span><span class="op" id="8293460">]</span><span class="builtintype" id="8293461">string</span><br>
<span class="lineno"></span><span class="keyword" id="8293468">var</span>&nbsp;<span class="ident" id="8293472">testMap</span>&nbsp;<span class="keyword" id="8293480">map</span><span class="op" id="8293483">[</span><span class="builtintype" id="8293484">string</span><span class="op" id="8293490">]</span><span class="builtintype" id="8293491">int</span><br>
<span class="lineno"></span><span class="keyword" id="8293495">var</span>&nbsp;<span class="ident" id="8293499">testArray</span>&nbsp;<span class="op" id="8293509">[</span><span class="num" id="8293510">7</span><span class="op" id="8293511">]</span><span class="builtintype" id="8293512">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="8293517">type</span>&nbsp;<span class="ident" id="8293522">SingleTest</span>&nbsp;<span class="keyword" id="8293533">struct</span>&nbsp;<span class="op" id="8293540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293543">in</span>&nbsp;&nbsp;<span class="keyword" id="8293547">interface</span><span class="op" id="8293556">{</span><span class="op" id="8293557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293560">out</span>&nbsp;<span class="keyword" id="8293564">interface</span><span class="op" id="8293573">{</span><span class="op" id="8293574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8293577">err</span>&nbsp;<span class="builtintype" id="8293581">string</span><br>
<span class="lineno"></span><span class="op" id="8293588">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="keyword" id="8293591">var</span>&nbsp;<span class="ident" id="8293595">singleTests</span>&nbsp;<span class="op" id="8293607">=</span>&nbsp;<span class="op" id="8293609">[</span><span class="op" id="8293610">]</span><span class="ident" id="8293611"><a href="/encoding/gob/encoder_test.go.html#8293522">SingleTest</a></span><span class="op" id="8293621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293624">{</span><span class="num" id="8293625">17</span><span class="op" id="8293627">,</span>&nbsp;<span class="op" id="8293629">&amp;</span><span class="ident" id="8293630"><a href="/encoding/gob/encoder_test.go.html#8293387">testInt</a></span><span class="op" id="8293637">,</span>&nbsp;<span class="string" id="8293639">&#34;&#34;</span><span class="op" id="8293641">}</span><span class="op" id="8293642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293645">{</span><span class="builtintype" id="8293646">float32</span><span class="op" id="8293653">(</span><span class="num" id="8293654">17.5</span><span class="op" id="8293658">)</span><span class="op" id="8293659">,</span>&nbsp;<span class="op" id="8293661">&amp;</span><span class="ident" id="8293662"><a href="/encoding/gob/encoder_test.go.html#8293403">testFloat32</a></span><span class="op" id="8293673">,</span>&nbsp;<span class="string" id="8293675">&#34;&#34;</span><span class="op" id="8293677">}</span><span class="op" id="8293678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293681">{</span><span class="string" id="8293682">&#34;bike&nbsp;shed&#34;</span><span class="op" id="8293693">,</span>&nbsp;<span class="op" id="8293695">&amp;</span><span class="ident" id="8293696"><a href="/encoding/gob/encoder_test.go.html#8293427">testString</a></span><span class="op" id="8293706">,</span>&nbsp;<span class="string" id="8293708">&#34;&#34;</span><span class="op" id="8293710">}</span><span class="op" id="8293711">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293714">{</span><span class="op" id="8293715">[</span><span class="op" id="8293716">]</span><span class="builtintype" id="8293717">string</span><span class="op" id="8293723">{</span><span class="string" id="8293724">&#34;bike&#34;</span><span class="op" id="8293730">,</span>&nbsp;<span class="string" id="8293732">&#34;shed&#34;</span><span class="op" id="8293738">,</span>&nbsp;<span class="string" id="8293740">&#34;paint&#34;</span><span class="op" id="8293747">,</span>&nbsp;<span class="string" id="8293749">&#34;color&#34;</span><span class="op" id="8293756">}</span><span class="op" id="8293757">,</span>&nbsp;<span class="op" id="8293759">&amp;</span><span class="ident" id="8293760"><a href="/encoding/gob/encoder_test.go.html#8293449">testSlice</a></span><span class="op" id="8293769">,</span>&nbsp;<span class="string" id="8293771">&#34;&#34;</span><span class="op" id="8293773">}</span><span class="op" id="8293774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293777">{</span><span class="keyword" id="8293778">map</span><span class="op" id="8293781">[</span><span class="builtintype" id="8293782">string</span><span class="op" id="8293788">]</span><span class="builtintype" id="8293789">int</span><span class="op" id="8293792">{</span><span class="string" id="8293793">&#34;seven&#34;</span><span class="op" id="8293800">:</span>&nbsp;<span class="num" id="8293802">7</span><span class="op" id="8293803">,</span>&nbsp;<span class="string" id="8293805">&#34;twelve&#34;</span><span class="op" id="8293813">:</span>&nbsp;<span class="num" id="8293815">12</span><span class="op" id="8293817">}</span><span class="op" id="8293818">,</span>&nbsp;<span class="op" id="8293820">&amp;</span><span class="ident" id="8293821"><a href="/encoding/gob/encoder_test.go.html#8293472">testMap</a></span><span class="op" id="8293828">,</span>&nbsp;<span class="string" id="8293830">&#34;&#34;</span><span class="op" id="8293832">}</span><span class="op" id="8293833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293836">{</span><span class="op" id="8293837">[</span><span class="num" id="8293838">7</span><span class="op" id="8293839">]</span><span class="builtintype" id="8293840">int</span><span class="op" id="8293843">{</span><span class="num" id="8293844">4</span><span class="op" id="8293845">,</span>&nbsp;<span class="num" id="8293847">55</span><span class="op" id="8293849">,</span>&nbsp;<span class="num" id="8293851">0</span><span class="op" id="8293852">,</span>&nbsp;<span class="num" id="8293854">0</span><span class="op" id="8293855">,</span>&nbsp;<span class="num" id="8293857">0</span><span class="op" id="8293858">,</span>&nbsp;<span class="num" id="8293860">0</span><span class="op" id="8293861">,</span>&nbsp;<span class="num" id="8293863">0</span><span class="op" id="8293864">}</span><span class="op" id="8293865">,</span>&nbsp;<span class="op" id="8293867">&amp;</span><span class="ident" id="8293868"><a href="/encoding/gob/encoder_test.go.html#8293499">testArray</a></span><span class="op" id="8293877">,</span>&nbsp;<span class="string" id="8293879">&#34;&#34;</span><span class="op" id="8293881">}</span><span class="op" id="8293882">,</span>&nbsp;<span class="comment" id="8293884">//&nbsp;case&nbsp;that&nbsp;once&nbsp;triggered&nbsp;a&nbsp;bug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293919">{</span><span class="op" id="8293920">[</span><span class="num" id="8293921">7</span><span class="op" id="8293922">]</span><span class="builtintype" id="8293923">int</span><span class="op" id="8293926">{</span><span class="num" id="8293927">4</span><span class="op" id="8293928">,</span>&nbsp;<span class="num" id="8293930">55</span><span class="op" id="8293932">,</span>&nbsp;<span class="num" id="8293934">1</span><span class="op" id="8293935">,</span>&nbsp;<span class="num" id="8293937">44</span><span class="op" id="8293939">,</span>&nbsp;<span class="num" id="8293941">22</span><span class="op" id="8293943">,</span>&nbsp;<span class="num" id="8293945">66</span><span class="op" id="8293947">,</span>&nbsp;<span class="num" id="8293949">1234</span><span class="op" id="8293953">}</span><span class="op" id="8293954">,</span>&nbsp;<span class="op" id="8293956">&amp;</span><span class="ident" id="8293957"><a href="/encoding/gob/encoder_test.go.html#8293499">testArray</a></span><span class="op" id="8293966">,</span>&nbsp;<span class="string" id="8293968">&#34;&#34;</span><span class="op" id="8293970">}</span><span class="op" id="8293971">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8293975">//&nbsp;Decode&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8293993">{</span><span class="num" id="8293994">172</span><span class="op" id="8293997">,</span>&nbsp;<span class="op" id="8293999">&amp;</span><span class="ident" id="8294000"><a href="/encoding/gob/encoder_test.go.html#8293403">testFloat32</a></span><span class="op" id="8294011">,</span>&nbsp;<span class="string" id="8294013">&#34;type&#34;</span><span class="op" id="8294019">}</span><span class="op" id="8294020">,</span><br>
<span class="lineno"></span><span class="op" id="8294022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8294025">func</span>&nbsp;<span class="ident" id="8294030">TestSingletons</span><span class="op" id="8294044">(</span><span class="ident" id="8294045">t</span>&nbsp;<span class="op" id="8294047">*</span><span class="ident" id="8294048"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8294055">.</span><span class="ident" id="8294056">T</span><span class="op" id="8294057">)</span>&nbsp;<span class="op" id="8294059">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294062">b</span>&nbsp;<span class="op" id="8294064">:=</span>&nbsp;<span class="builtinfunc" id="8294067">new</span><span class="op" id="8294070">(</span><span class="ident" id="8294071"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8294076">.</span><span class="ident" id="8294077">Buffer</span><span class="op" id="8294083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294086">enc</span>&nbsp;<span class="op" id="8294090">:=</span>&nbsp;<span class="ident" id="8294093"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8294103">(</span><span class="ident" id="8294104"><a href="/encoding/gob/encoder_test.go.html#8294062">b</a></span><span class="op" id="8294105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294108">dec</span>&nbsp;<span class="op" id="8294112">:=</span>&nbsp;<span class="ident" id="8294115"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8294125">(</span><span class="ident" id="8294126"><a href="/encoding/gob/encoder_test.go.html#8294062">b</a></span><span class="op" id="8294127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294130">for</span>&nbsp;<span class="ident" id="8294134">_</span><span class="op" id="8294135">,</span>&nbsp;<span class="ident" id="8294137">test</span>&nbsp;<span class="op" id="8294142">:=</span>&nbsp;<span class="keyword" id="8294145">range</span>&nbsp;<span class="ident" id="8294151"><a href="/encoding/gob/encoder_test.go.html#8293595">singleTests</a></span>&nbsp;<span class="op" id="8294163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294167"><a href="/encoding/gob/encoder_test.go.html#8294062">b</a></span><span class="op" id="8294168">.</span><span class="ident" id="8294169">Reset</span><span class="op" id="8294174">(</span><span class="op" id="8294175">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294179">err</span>&nbsp;<span class="op" id="8294183">:=</span>&nbsp;<span class="ident" id="8294186"><a href="/encoding/gob/encoder_test.go.html#8294086">enc</a></span><span class="op" id="8294189">.</span><span class="ident" id="8294190">Encode</span><span class="op" id="8294196">(</span><span class="ident" id="8294197"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294201">.</span><span class="ident" id="8294202">in</span><span class="op" id="8294204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294208">if</span>&nbsp;<span class="ident" id="8294211"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span>&nbsp;<span class="op" id="8294215">!=</span>&nbsp;<span class="ident" id="8294218">nil</span>&nbsp;<span class="op" id="8294222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294227"><a href="/encoding/gob/encoder_test.go.html#8294045">t</a></span><span class="op" id="8294228">.</span><span class="ident" id="8294229">Errorf</span><span class="op" id="8294235">(</span><span class="string" id="8294236">&#34;error&nbsp;encoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8294259">,</span>&nbsp;<span class="ident" id="8294261"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294265">.</span><span class="ident" id="8294266">in</span><span class="op" id="8294268">,</span>&nbsp;<span class="ident" id="8294270"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span><span class="op" id="8294273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294278">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8294289">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294293"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span>&nbsp;<span class="op" id="8294297">=</span>&nbsp;<span class="ident" id="8294299"><a href="/encoding/gob/encoder_test.go.html#8294108">dec</a></span><span class="op" id="8294302">.</span><span class="ident" id="8294303">Decode</span><span class="op" id="8294309">(</span><span class="ident" id="8294310"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294314">.</span><span class="ident" id="8294315">out</span><span class="op" id="8294318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294322">switch</span>&nbsp;<span class="op" id="8294329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294333">case</span>&nbsp;<span class="ident" id="8294338"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span>&nbsp;<span class="op" id="8294342">!=</span>&nbsp;<span class="ident" id="8294345">nil</span>&nbsp;<span class="op" id="8294349">&amp;&amp;</span>&nbsp;<span class="ident" id="8294352"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294356">.</span><span class="ident" id="8294357">err</span>&nbsp;<span class="op" id="8294361">==</span>&nbsp;<span class="string" id="8294364">&#34;&#34;</span><span class="op" id="8294366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294371"><a href="/encoding/gob/encoder_test.go.html#8294045">t</a></span><span class="op" id="8294372">.</span><span class="ident" id="8294373">Errorf</span><span class="op" id="8294379">(</span><span class="string" id="8294380">&#34;error&nbsp;decoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8294403">,</span>&nbsp;<span class="ident" id="8294405"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294409">.</span><span class="ident" id="8294410">in</span><span class="op" id="8294412">,</span>&nbsp;<span class="ident" id="8294414"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span><span class="op" id="8294417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294422">continue</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294433">case</span>&nbsp;<span class="ident" id="8294438"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span>&nbsp;<span class="op" id="8294442">==</span>&nbsp;<span class="ident" id="8294445">nil</span>&nbsp;<span class="op" id="8294449">&amp;&amp;</span>&nbsp;<span class="ident" id="8294452"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294456">.</span><span class="ident" id="8294457">err</span>&nbsp;<span class="op" id="8294461">!=</span>&nbsp;<span class="string" id="8294464">&#34;&#34;</span><span class="op" id="8294466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294471"><a href="/encoding/gob/encoder_test.go.html#8294045">t</a></span><span class="op" id="8294472">.</span><span class="ident" id="8294473">Errorf</span><span class="op" id="8294479">(</span><span class="string" id="8294480">&#34;expected&nbsp;error&nbsp;decoding&nbsp;%v:&nbsp;%s&#34;</span><span class="op" id="8294512">,</span>&nbsp;<span class="ident" id="8294514"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294518">.</span><span class="ident" id="8294519">in</span><span class="op" id="8294521">,</span>&nbsp;<span class="ident" id="8294523"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294527">.</span><span class="ident" id="8294528">err</span><span class="op" id="8294531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294536">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294547">case</span>&nbsp;<span class="ident" id="8294552"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span>&nbsp;<span class="op" id="8294556">!=</span>&nbsp;<span class="ident" id="8294559">nil</span>&nbsp;<span class="op" id="8294563">&amp;&amp;</span>&nbsp;<span class="ident" id="8294566"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294570">.</span><span class="ident" id="8294571">err</span>&nbsp;<span class="op" id="8294575">!=</span>&nbsp;<span class="string" id="8294578">&#34;&#34;</span><span class="op" id="8294580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294585">if</span>&nbsp;<span class="ident" id="8294588"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8294595">.</span><span class="ident" id="8294596">Index</span><span class="op" id="8294601">(</span><span class="ident" id="8294602"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span><span class="op" id="8294605">.</span><span class="ident" id="8294606">Error</span><span class="op" id="8294611">(</span><span class="op" id="8294612">)</span><span class="op" id="8294613">,</span>&nbsp;<span class="ident" id="8294615"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294619">.</span><span class="ident" id="8294620">err</span><span class="op" id="8294623">)</span>&nbsp;<span class="op" id="8294625">&lt;</span>&nbsp;<span class="num" id="8294627">0</span>&nbsp;<span class="op" id="8294629">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294635"><a href="/encoding/gob/encoder_test.go.html#8294045">t</a></span><span class="op" id="8294636">.</span><span class="ident" id="8294637">Errorf</span><span class="op" id="8294643">(</span><span class="string" id="8294644">&#34;wrong&nbsp;error&nbsp;decoding&nbsp;%v:&nbsp;wanted&nbsp;%s,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8294688">,</span>&nbsp;<span class="ident" id="8294690"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294694">.</span><span class="ident" id="8294695">in</span><span class="op" id="8294697">,</span>&nbsp;<span class="ident" id="8294699"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294703">.</span><span class="ident" id="8294704">err</span><span class="op" id="8294707">,</span>&nbsp;<span class="ident" id="8294709"><a href="/encoding/gob/encoder_test.go.html#8294179">err</a></span><span class="op" id="8294712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8294717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294722">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8294733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8294737">//&nbsp;Get&nbsp;rid&nbsp;of&nbsp;the&nbsp;pointer&nbsp;in&nbsp;the&nbsp;rhs</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294776">val</span>&nbsp;<span class="op" id="8294780">:=</span>&nbsp;<span class="ident" id="8294783"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8294790">.</span><span class="ident" id="8294791">ValueOf</span><span class="op" id="8294798">(</span><span class="ident" id="8294799"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294803">.</span><span class="ident" id="8294804">out</span><span class="op" id="8294807">)</span><span class="op" id="8294808">.</span><span class="ident" id="8294809">Elem</span><span class="op" id="8294813">(</span><span class="op" id="8294814">)</span><span class="op" id="8294815">.</span><span class="ident" id="8294816">Interface</span><span class="op" id="8294825">(</span><span class="op" id="8294826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294830">if</span>&nbsp;<span class="op" id="8294833">!</span><span class="ident" id="8294834"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8294841">.</span><span class="ident" id="8294842">DeepEqual</span><span class="op" id="8294851">(</span><span class="ident" id="8294852"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294856">.</span><span class="ident" id="8294857">in</span><span class="op" id="8294859">,</span>&nbsp;<span class="ident" id="8294861"><a href="/encoding/gob/encoder_test.go.html#8294776">val</a></span><span class="op" id="8294864">)</span>&nbsp;<span class="op" id="8294866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8294871"><a href="/encoding/gob/encoder_test.go.html#8294045">t</a></span><span class="op" id="8294872">.</span><span class="ident" id="8294873">Errorf</span><span class="op" id="8294879">(</span><span class="string" id="8294880">&#34;decoding&nbsp;singleton:&nbsp;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8294920">,</span>&nbsp;<span class="ident" id="8294922"><a href="/encoding/gob/encoder_test.go.html#8294137">test</a></span><span class="op" id="8294926">.</span><span class="ident" id="8294927">in</span><span class="op" id="8294929">,</span>&nbsp;<span class="ident" id="8294931"><a href="/encoding/gob/encoder_test.go.html#8294776">val</a></span><span class="op" id="8294934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8294938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8294941">}</span><br>
<span class="lineno">420</span><span class="op" id="8294943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8294946">func</span>&nbsp;<span class="ident" id="8294951">TestStructNonStruct</span><span class="op" id="8294970">(</span><span class="ident" id="8294971">t</span>&nbsp;<span class="op" id="8294973">*</span><span class="ident" id="8294974"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8294981">.</span><span class="ident" id="8294982">T</span><span class="op" id="8294983">)</span>&nbsp;<span class="op" id="8294985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8294988">type</span>&nbsp;<span class="ident" id="8294993">Struct</span>&nbsp;<span class="keyword" id="8295000">struct</span>&nbsp;<span class="op" id="8295007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295011">A</span>&nbsp;<span class="builtintype" id="8295013">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295024">type</span>&nbsp;<span class="ident" id="8295029">NonStruct</span>&nbsp;<span class="builtintype" id="8295039">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295047">s</span>&nbsp;<span class="op" id="8295049">:=</span>&nbsp;<span class="ident" id="8295052"><a href="/encoding/gob/encoder_test.go.html#8294993">Struct</a></span><span class="op" id="8295058">{</span><span class="string" id="8295059">&#34;hello&#34;</span><span class="op" id="8295066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295069">var</span>&nbsp;<span class="ident" id="8295073">sp</span>&nbsp;<span class="ident" id="8295076"><a href="/encoding/gob/encoder_test.go.html#8294993">Struct</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295084">if</span>&nbsp;<span class="ident" id="8295087">err</span>&nbsp;<span class="op" id="8295091">:=</span>&nbsp;<span class="ident" id="8295094"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8295103">(</span><span class="ident" id="8295104"><a href="/encoding/gob/encoder_test.go.html#8295047">s</a></span><span class="op" id="8295105">,</span>&nbsp;<span class="op" id="8295107">&amp;</span><span class="ident" id="8295108"><a href="/encoding/gob/encoder_test.go.html#8295073">sp</a></span><span class="op" id="8295110">)</span><span class="op" id="8295111">;</span>&nbsp;<span class="ident" id="8295113"><a href="/encoding/gob/encoder_test.go.html#8295087">err</a></span>&nbsp;<span class="op" id="8295117">!=</span>&nbsp;<span class="ident" id="8295120">nil</span>&nbsp;<span class="op" id="8295124">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295128"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295129">.</span><span class="ident" id="8295130">Error</span><span class="op" id="8295135">(</span><span class="ident" id="8295136"><a href="/encoding/gob/encoder_test.go.html#8295087">err</a></span><span class="op" id="8295139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295145">var</span>&nbsp;<span class="ident" id="8295149">ns</span>&nbsp;<span class="ident" id="8295152"><a href="/encoding/gob/encoder_test.go.html#8295029">NonStruct</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295163">if</span>&nbsp;<span class="ident" id="8295166">err</span>&nbsp;<span class="op" id="8295170">:=</span>&nbsp;<span class="ident" id="8295173"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8295182">(</span><span class="ident" id="8295183"><a href="/encoding/gob/encoder_test.go.html#8295047">s</a></span><span class="op" id="8295184">,</span>&nbsp;<span class="op" id="8295186">&amp;</span><span class="ident" id="8295187"><a href="/encoding/gob/encoder_test.go.html#8295149">ns</a></span><span class="op" id="8295189">)</span><span class="op" id="8295190">;</span>&nbsp;<span class="ident" id="8295192"><a href="/encoding/gob/encoder_test.go.html#8295166">err</a></span>&nbsp;<span class="op" id="8295196">==</span>&nbsp;<span class="ident" id="8295199">nil</span>&nbsp;<span class="op" id="8295203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295207"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295208">.</span><span class="ident" id="8295209">Error</span><span class="op" id="8295214">(</span><span class="string" id="8295215">&#34;should&nbsp;get&nbsp;error&nbsp;for&nbsp;struct/non-struct&#34;</span><span class="op" id="8295255">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295258">}</span>&nbsp;<span class="keyword" id="8295260">else</span>&nbsp;<span class="keyword" id="8295265">if</span>&nbsp;<span class="ident" id="8295268"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8295275">.</span><span class="ident" id="8295276">Index</span><span class="op" id="8295281">(</span><span class="ident" id="8295282"><a href="/encoding/gob/encoder_test.go.html#8295166">err</a></span><span class="op" id="8295285">.</span><span class="ident" id="8295286">Error</span><span class="op" id="8295291">(</span><span class="op" id="8295292">)</span><span class="op" id="8295293">,</span>&nbsp;<span class="string" id="8295295">&#34;type&#34;</span><span class="op" id="8295301">)</span>&nbsp;<span class="op" id="8295303">&lt;</span>&nbsp;<span class="num" id="8295305">0</span>&nbsp;<span class="op" id="8295307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295311"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295312">.</span><span class="ident" id="8295313">Error</span><span class="op" id="8295318">(</span><span class="string" id="8295319">&#34;for&nbsp;struct/non-struct&nbsp;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8295367">,</span>&nbsp;<span class="ident" id="8295369"><a href="/encoding/gob/encoder_test.go.html#8295166">err</a></span><span class="op" id="8295372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8295378">//&nbsp;Now&nbsp;try&nbsp;the&nbsp;other&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295404">var</span>&nbsp;<span class="ident" id="8295408">nsp</span>&nbsp;<span class="ident" id="8295412"><a href="/encoding/gob/encoder_test.go.html#8295029">NonStruct</a></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295423">if</span>&nbsp;<span class="ident" id="8295426">err</span>&nbsp;<span class="op" id="8295430">:=</span>&nbsp;<span class="ident" id="8295433"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8295442">(</span><span class="ident" id="8295443"><a href="/encoding/gob/encoder_test.go.html#8295149">ns</a></span><span class="op" id="8295445">,</span>&nbsp;<span class="op" id="8295447">&amp;</span><span class="ident" id="8295448"><a href="/encoding/gob/encoder_test.go.html#8295408">nsp</a></span><span class="op" id="8295451">)</span><span class="op" id="8295452">;</span>&nbsp;<span class="ident" id="8295454"><a href="/encoding/gob/encoder_test.go.html#8295426">err</a></span>&nbsp;<span class="op" id="8295458">!=</span>&nbsp;<span class="ident" id="8295461">nil</span>&nbsp;<span class="op" id="8295465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295469"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295470">.</span><span class="ident" id="8295471">Error</span><span class="op" id="8295476">(</span><span class="ident" id="8295477"><a href="/encoding/gob/encoder_test.go.html#8295426">err</a></span><span class="op" id="8295480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295486">if</span>&nbsp;<span class="ident" id="8295489">err</span>&nbsp;<span class="op" id="8295493">:=</span>&nbsp;<span class="ident" id="8295496"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8295505">(</span><span class="ident" id="8295506"><a href="/encoding/gob/encoder_test.go.html#8295149">ns</a></span><span class="op" id="8295508">,</span>&nbsp;<span class="op" id="8295510">&amp;</span><span class="ident" id="8295511"><a href="/encoding/gob/encoder_test.go.html#8295047">s</a></span><span class="op" id="8295512">)</span><span class="op" id="8295513">;</span>&nbsp;<span class="ident" id="8295515"><a href="/encoding/gob/encoder_test.go.html#8295489">err</a></span>&nbsp;<span class="op" id="8295519">==</span>&nbsp;<span class="ident" id="8295522">nil</span>&nbsp;<span class="op" id="8295526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295530"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295531">.</span><span class="ident" id="8295532">Error</span><span class="op" id="8295537">(</span><span class="string" id="8295538">&#34;should&nbsp;get&nbsp;error&nbsp;for&nbsp;non-struct/struct&#34;</span><span class="op" id="8295578">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295581">}</span>&nbsp;<span class="keyword" id="8295583">else</span>&nbsp;<span class="keyword" id="8295588">if</span>&nbsp;<span class="ident" id="8295591"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8295598">.</span><span class="ident" id="8295599">Index</span><span class="op" id="8295604">(</span><span class="ident" id="8295605"><a href="/encoding/gob/encoder_test.go.html#8295489">err</a></span><span class="op" id="8295608">.</span><span class="ident" id="8295609">Error</span><span class="op" id="8295614">(</span><span class="op" id="8295615">)</span><span class="op" id="8295616">,</span>&nbsp;<span class="string" id="8295618">&#34;type&#34;</span><span class="op" id="8295624">)</span>&nbsp;<span class="op" id="8295626">&lt;</span>&nbsp;<span class="num" id="8295628">0</span>&nbsp;<span class="op" id="8295630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295634"><a href="/encoding/gob/encoder_test.go.html#8294971">t</a></span><span class="op" id="8295635">.</span><span class="ident" id="8295636">Error</span><span class="op" id="8295641">(</span><span class="string" id="8295642">&#34;for&nbsp;non-struct/struct&nbsp;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8295690">,</span>&nbsp;<span class="ident" id="8295692"><a href="/encoding/gob/encoder_test.go.html#8295489">err</a></span><span class="op" id="8295695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295698">}</span><br>
<span class="lineno"></span><span class="op" id="8295700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span><span class="keyword" id="8295703">type</span>&nbsp;<span class="ident" id="8295708">interfaceIndirectTestI</span>&nbsp;<span class="keyword" id="8295731">interface</span>&nbsp;<span class="op" id="8295741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295744">F</span><span class="op" id="8295745">(</span><span class="op" id="8295746">)</span>&nbsp;<span class="builtintype" id="8295748">bool</span><br>
<span class="lineno"></span><span class="op" id="8295753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295756">type</span>&nbsp;<span class="ident" id="8295761">interfaceIndirectTestT</span>&nbsp;<span class="keyword" id="8295784">struct</span><span class="op" id="8295790">{</span><span class="op" id="8295791">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="keyword" id="8295794">func</span>&nbsp;<span class="op" id="8295799">(</span><span class="ident" id="8295800">this</span>&nbsp;<span class="op" id="8295805">*</span><span class="ident" id="8295806"><a href="/encoding/gob/encoder_test.go.html#8295761">interfaceIndirectTestT</a></span><span class="op" id="8295828">)</span>&nbsp;<span class="ident" id="8295830">F</span><span class="op" id="8295831">(</span><span class="op" id="8295832">)</span>&nbsp;<span class="builtintype" id="8295834">bool</span>&nbsp;<span class="op" id="8295839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295842">return</span>&nbsp;<span class="ident" id="8295849">true</span><br>
<span class="lineno"></span><span class="op" id="8295854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="comment" id="8295857">//&nbsp;A&nbsp;version&nbsp;of&nbsp;a&nbsp;bug&nbsp;reported&nbsp;on&nbsp;golang-nuts.&nbsp;&nbsp;Also&nbsp;tests&nbsp;top-level</span><br>
<span class="lineno"></span><span class="comment" id="8295926">//&nbsp;slice&nbsp;of&nbsp;interfaces.&nbsp;&nbsp;The&nbsp;issue&nbsp;was&nbsp;registering&nbsp;*T&nbsp;caused&nbsp;T&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="8295995">//&nbsp;stored&nbsp;as&nbsp;the&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="8296027">func</span>&nbsp;<span class="ident" id="8296032">TestInterfaceIndirect</span><span class="op" id="8296053">(</span><span class="ident" id="8296054">t</span>&nbsp;<span class="op" id="8296056">*</span><span class="ident" id="8296057"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8296064">.</span><span class="ident" id="8296065">T</span><span class="op" id="8296066">)</span>&nbsp;<span class="op" id="8296068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296071"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8296079">(</span><span class="op" id="8296080">&amp;</span><span class="ident" id="8296081"><a href="/encoding/gob/encoder_test.go.html#8295761">interfaceIndirectTestT</a></span><span class="op" id="8296103">{</span><span class="op" id="8296104">}</span><span class="op" id="8296105">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296108">b</span>&nbsp;<span class="op" id="8296110">:=</span>&nbsp;<span class="builtinfunc" id="8296113">new</span><span class="op" id="8296116">(</span><span class="ident" id="8296117"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8296122">.</span><span class="ident" id="8296123">Buffer</span><span class="op" id="8296129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296132">w</span>&nbsp;<span class="op" id="8296134">:=</span>&nbsp;<span class="op" id="8296137">[</span><span class="op" id="8296138">]</span><span class="ident" id="8296139"><a href="/encoding/gob/encoder_test.go.html#8295708">interfaceIndirectTestI</a></span><span class="op" id="8296161">{</span><span class="op" id="8296162">&amp;</span><span class="ident" id="8296163"><a href="/encoding/gob/encoder_test.go.html#8295761">interfaceIndirectTestT</a></span><span class="op" id="8296185">{</span><span class="op" id="8296186">}</span><span class="op" id="8296187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296190">err</span>&nbsp;<span class="op" id="8296194">:=</span>&nbsp;<span class="ident" id="8296197"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8296207">(</span><span class="ident" id="8296208"><a href="/encoding/gob/encoder_test.go.html#8296108">b</a></span><span class="op" id="8296209">)</span><span class="op" id="8296210">.</span><span class="ident" id="8296211">Encode</span><span class="op" id="8296217">(</span><span class="ident" id="8296218"><a href="/encoding/gob/encoder_test.go.html#8296132">w</a></span><span class="op" id="8296219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296222">if</span>&nbsp;<span class="ident" id="8296225"><a href="/encoding/gob/encoder_test.go.html#8296190">err</a></span>&nbsp;<span class="op" id="8296229">!=</span>&nbsp;<span class="ident" id="8296232">nil</span>&nbsp;<span class="op" id="8296236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296240"><a href="/encoding/gob/encoder_test.go.html#8296054">t</a></span><span class="op" id="8296241">.</span><span class="ident" id="8296242">Fatal</span><span class="op" id="8296247">(</span><span class="string" id="8296248">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8296263">,</span>&nbsp;<span class="ident" id="8296265"><a href="/encoding/gob/encoder_test.go.html#8296190">err</a></span><span class="op" id="8296268">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296275">var</span>&nbsp;<span class="ident" id="8296279">r</span>&nbsp;<span class="op" id="8296281">[</span><span class="op" id="8296282">]</span><span class="ident" id="8296283"><a href="/encoding/gob/encoder_test.go.html#8295708">interfaceIndirectTestI</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296307"><a href="/encoding/gob/encoder_test.go.html#8296190">err</a></span>&nbsp;<span class="op" id="8296311">=</span>&nbsp;<span class="ident" id="8296313"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8296323">(</span><span class="ident" id="8296324"><a href="/encoding/gob/encoder_test.go.html#8296108">b</a></span><span class="op" id="8296325">)</span><span class="op" id="8296326">.</span><span class="ident" id="8296327">Decode</span><span class="op" id="8296333">(</span><span class="op" id="8296334">&amp;</span><span class="ident" id="8296335"><a href="/encoding/gob/encoder_test.go.html#8296279">r</a></span><span class="op" id="8296336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8296339">if</span>&nbsp;<span class="ident" id="8296342"><a href="/encoding/gob/encoder_test.go.html#8296190">err</a></span>&nbsp;<span class="op" id="8296346">!=</span>&nbsp;<span class="ident" id="8296349">nil</span>&nbsp;<span class="op" id="8296353">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296357"><a href="/encoding/gob/encoder_test.go.html#8296054">t</a></span><span class="op" id="8296358">.</span><span class="ident" id="8296359">Fatal</span><span class="op" id="8296364">(</span><span class="string" id="8296365">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8296380">,</span>&nbsp;<span class="ident" id="8296382"><a href="/encoding/gob/encoder_test.go.html#8296190">err</a></span><span class="op" id="8296385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8296388">}</span><br>
<span class="lineno"></span><span class="op" id="8296390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8296393">//&nbsp;Now&nbsp;follow&nbsp;various&nbsp;tests&nbsp;that&nbsp;decode&nbsp;into&nbsp;things&nbsp;that&nbsp;can&#39;t&nbsp;represent&nbsp;the</span><br>
<span class="lineno">480</span><span class="comment" id="8296470">//&nbsp;encoded&nbsp;value,&nbsp;all&nbsp;of&nbsp;which&nbsp;should&nbsp;be&nbsp;legal.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8296519">//&nbsp;Also,&nbsp;when&nbsp;the&nbsp;ignored&nbsp;object&nbsp;contains&nbsp;an&nbsp;interface&nbsp;value,&nbsp;it&nbsp;may&nbsp;define</span><br>
<span class="lineno"></span><span class="comment" id="8296595">//&nbsp;types.&nbsp;Make&nbsp;sure&nbsp;that&nbsp;skipping&nbsp;the&nbsp;value&nbsp;still&nbsp;defines&nbsp;the&nbsp;types&nbsp;by&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="8296672">//&nbsp;the&nbsp;encoder/decoder&nbsp;pair&nbsp;to&nbsp;send&nbsp;a&nbsp;value&nbsp;afterwards.&nbsp;&nbsp;If&nbsp;an&nbsp;interface</span><br>
<span class="lineno">485</span><span class="comment" id="8296745">//&nbsp;is&nbsp;sent,&nbsp;its&nbsp;type&nbsp;in&nbsp;the&nbsp;test&nbsp;is&nbsp;always&nbsp;NewType0,&nbsp;so&nbsp;this&nbsp;checks&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8296822">//&nbsp;encoder&nbsp;and&nbsp;decoder&nbsp;don&#39;t&nbsp;skew&nbsp;with&nbsp;respect&nbsp;to&nbsp;type&nbsp;definitions.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8296891">type</span>&nbsp;<span class="ident" id="8296896">Struct0</span>&nbsp;<span class="keyword" id="8296904">struct</span>&nbsp;<span class="op" id="8296911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296914">I</span>&nbsp;<span class="keyword" id="8296916">interface</span><span class="op" id="8296925">{</span><span class="op" id="8296926">}</span><br>
<span class="lineno">490</span><span class="op" id="8296928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8296931">type</span>&nbsp;<span class="ident" id="8296936">NewType0</span>&nbsp;<span class="keyword" id="8296945">struct</span>&nbsp;<span class="op" id="8296952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296955">S</span>&nbsp;<span class="builtintype" id="8296957">string</span><br>
<span class="lineno"></span><span class="op" id="8296964">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="8296967">type</span>&nbsp;<span class="ident" id="8296972">ignoreTest</span>&nbsp;<span class="keyword" id="8296983">struct</span>&nbsp;<span class="op" id="8296990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8296993">in</span><span class="op" id="8296995">,</span>&nbsp;<span class="ident" id="8296997">out</span>&nbsp;<span class="keyword" id="8297001">interface</span><span class="op" id="8297010">{</span><span class="op" id="8297011">}</span><br>
<span class="lineno"></span><span class="op" id="8297013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="8297016">var</span>&nbsp;<span class="ident" id="8297020">ignoreTests</span>&nbsp;<span class="op" id="8297032">=</span>&nbsp;<span class="op" id="8297034">[</span><span class="op" id="8297035">]</span><span class="ident" id="8297036"><a href="/encoding/gob/encoder_test.go.html#8296972">ignoreTest</a></span><span class="op" id="8297046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297049">//&nbsp;Decode&nbsp;normal&nbsp;struct&nbsp;into&nbsp;an&nbsp;empty&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297095">{</span><span class="op" id="8297096">&amp;</span><span class="keyword" id="8297097">struct</span><span class="op" id="8297103">{</span>&nbsp;<span class="ident" id="8297105">A</span>&nbsp;<span class="builtintype" id="8297107">int</span>&nbsp;<span class="op" id="8297111">}</span><span class="op" id="8297112">{</span><span class="num" id="8297113">23</span><span class="op" id="8297115">}</span><span class="op" id="8297116">,</span>&nbsp;<span class="op" id="8297118">&amp;</span><span class="keyword" id="8297119">struct</span><span class="op" id="8297125">{</span><span class="op" id="8297126">}</span><span class="op" id="8297127">{</span><span class="op" id="8297128">}</span><span class="op" id="8297129">}</span><span class="op" id="8297130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297133">//&nbsp;Decode&nbsp;normal&nbsp;struct&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297170">{</span><span class="op" id="8297171">&amp;</span><span class="keyword" id="8297172">struct</span><span class="op" id="8297178">{</span>&nbsp;<span class="ident" id="8297180">A</span>&nbsp;<span class="builtintype" id="8297182">int</span>&nbsp;<span class="op" id="8297186">}</span><span class="op" id="8297187">{</span><span class="num" id="8297188">23</span><span class="op" id="8297190">}</span><span class="op" id="8297191">,</span>&nbsp;<span class="ident" id="8297193">nil</span><span class="op" id="8297196">}</span><span class="op" id="8297197">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297200">//&nbsp;Decode&nbsp;singleton&nbsp;string&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297240">{</span><span class="string" id="8297241">&#34;hello,&nbsp;world&#34;</span><span class="op" id="8297255">,</span>&nbsp;<span class="ident" id="8297257">nil</span><span class="op" id="8297260">}</span><span class="op" id="8297261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297264">//&nbsp;Decode&nbsp;singleton&nbsp;slice&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297303">{</span><span class="op" id="8297304">[</span><span class="op" id="8297305">]</span><span class="builtintype" id="8297306">int</span><span class="op" id="8297309">{</span><span class="num" id="8297310">1</span><span class="op" id="8297311">,</span>&nbsp;<span class="num" id="8297313">2</span><span class="op" id="8297314">,</span>&nbsp;<span class="num" id="8297316">3</span><span class="op" id="8297317">,</span>&nbsp;<span class="num" id="8297319">4</span><span class="op" id="8297320">}</span><span class="op" id="8297321">,</span>&nbsp;<span class="ident" id="8297323">nil</span><span class="op" id="8297326">}</span><span class="op" id="8297327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297330">//&nbsp;Decode&nbsp;struct&nbsp;containing&nbsp;an&nbsp;interface&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297384">{</span><span class="op" id="8297385">&amp;</span><span class="ident" id="8297386"><a href="/encoding/gob/encoder_test.go.html#8296896">Struct0</a></span><span class="op" id="8297393">{</span><span class="op" id="8297394">&amp;</span><span class="ident" id="8297395"><a href="/encoding/gob/encoder_test.go.html#8296936">NewType0</a></span><span class="op" id="8297403">{</span><span class="string" id="8297404">&#34;value0&#34;</span><span class="op" id="8297412">}</span><span class="op" id="8297413">}</span><span class="op" id="8297414">,</span>&nbsp;<span class="ident" id="8297416">nil</span><span class="op" id="8297419">}</span><span class="op" id="8297420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297423">//&nbsp;Decode&nbsp;singleton&nbsp;slice&nbsp;of&nbsp;interfaces&nbsp;into&nbsp;a&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297476">{</span><span class="op" id="8297477">[</span><span class="op" id="8297478">]</span><span class="keyword" id="8297479">interface</span><span class="op" id="8297488">{</span><span class="op" id="8297489">}</span><span class="op" id="8297490">{</span><span class="string" id="8297491">&#34;hi&#34;</span><span class="op" id="8297495">,</span>&nbsp;<span class="op" id="8297497">&amp;</span><span class="ident" id="8297498"><a href="/encoding/gob/encoder_test.go.html#8296936">NewType0</a></span><span class="op" id="8297506">{</span><span class="string" id="8297507">&#34;value1&#34;</span><span class="op" id="8297515">}</span><span class="op" id="8297516">,</span>&nbsp;<span class="num" id="8297518">23</span><span class="op" id="8297520">}</span><span class="op" id="8297521">,</span>&nbsp;<span class="ident" id="8297523">nil</span><span class="op" id="8297526">}</span><span class="op" id="8297527">,</span><br>
<span class="lineno"></span><span class="op" id="8297529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="8297532">func</span>&nbsp;<span class="ident" id="8297537">TestDecodeIntoNothing</span><span class="op" id="8297558">(</span><span class="ident" id="8297559">t</span>&nbsp;<span class="op" id="8297561">*</span><span class="ident" id="8297562"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8297569">.</span><span class="ident" id="8297570">T</span><span class="op" id="8297571">)</span>&nbsp;<span class="op" id="8297573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297576"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8297584">(</span><span class="builtinfunc" id="8297585">new</span><span class="op" id="8297588">(</span><span class="ident" id="8297589"><a href="/encoding/gob/encoder_test.go.html#8296936">NewType0</a></span><span class="op" id="8297597">)</span><span class="op" id="8297598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297601">for</span>&nbsp;<span class="ident" id="8297605">i</span><span class="op" id="8297606">,</span>&nbsp;<span class="ident" id="8297608">test</span>&nbsp;<span class="op" id="8297613">:=</span>&nbsp;<span class="keyword" id="8297616">range</span>&nbsp;<span class="ident" id="8297622"><a href="/encoding/gob/encoder_test.go.html#8297020">ignoreTests</a></span>&nbsp;<span class="op" id="8297634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297638">b</span>&nbsp;<span class="op" id="8297640">:=</span>&nbsp;<span class="builtinfunc" id="8297643">new</span><span class="op" id="8297646">(</span><span class="ident" id="8297647"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8297652">.</span><span class="ident" id="8297653">Buffer</span><span class="op" id="8297659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297663">enc</span>&nbsp;<span class="op" id="8297667">:=</span>&nbsp;<span class="ident" id="8297670"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8297680">(</span><span class="ident" id="8297681"><a href="/encoding/gob/encoder_test.go.html#8297638">b</a></span><span class="op" id="8297682">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297686">err</span>&nbsp;<span class="op" id="8297690">:=</span>&nbsp;<span class="ident" id="8297693"><a href="/encoding/gob/encoder_test.go.html#8297663">enc</a></span><span class="op" id="8297696">.</span><span class="ident" id="8297697">Encode</span><span class="op" id="8297703">(</span><span class="ident" id="8297704"><a href="/encoding/gob/encoder_test.go.html#8297608">test</a></span><span class="op" id="8297708">.</span><span class="ident" id="8297709">in</span><span class="op" id="8297711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297715">if</span>&nbsp;<span class="ident" id="8297718"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8297722">!=</span>&nbsp;<span class="ident" id="8297725">nil</span>&nbsp;<span class="op" id="8297729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297734"><a href="/encoding/gob/encoder_test.go.html#8297559">t</a></span><span class="op" id="8297735">.</span><span class="ident" id="8297736">Errorf</span><span class="op" id="8297742">(</span><span class="string" id="8297743">&#34;%d:&nbsp;encode&nbsp;error&nbsp;%s:&#34;</span><span class="op" id="8297765">,</span>&nbsp;<span class="ident" id="8297767"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8297768">,</span>&nbsp;<span class="ident" id="8297770"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span><span class="op" id="8297773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297778">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297789">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297793">dec</span>&nbsp;<span class="op" id="8297797">:=</span>&nbsp;<span class="ident" id="8297800"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8297810">(</span><span class="ident" id="8297811"><a href="/encoding/gob/encoder_test.go.html#8297638">b</a></span><span class="op" id="8297812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297816"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8297820">=</span>&nbsp;<span class="ident" id="8297822"><a href="/encoding/gob/encoder_test.go.html#8297793">dec</a></span><span class="op" id="8297825">.</span><span class="ident" id="8297826">Decode</span><span class="op" id="8297832">(</span><span class="ident" id="8297833"><a href="/encoding/gob/encoder_test.go.html#8297608">test</a></span><span class="op" id="8297837">.</span><span class="ident" id="8297838">out</span><span class="op" id="8297841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297845">if</span>&nbsp;<span class="ident" id="8297848"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8297852">!=</span>&nbsp;<span class="ident" id="8297855">nil</span>&nbsp;<span class="op" id="8297859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297864"><a href="/encoding/gob/encoder_test.go.html#8297559">t</a></span><span class="op" id="8297865">.</span><span class="ident" id="8297866">Errorf</span><span class="op" id="8297872">(</span><span class="string" id="8297873">&#34;%d:&nbsp;decode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8297895">,</span>&nbsp;<span class="ident" id="8297897"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8297898">,</span>&nbsp;<span class="ident" id="8297900"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span><span class="op" id="8297903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8297908">continue</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8297919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8297923">//&nbsp;Now&nbsp;see&nbsp;if&nbsp;the&nbsp;encoder&nbsp;and&nbsp;decoder&nbsp;are&nbsp;in&nbsp;a&nbsp;consistent&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8297990">str</span>&nbsp;<span class="op" id="8297994">:=</span>&nbsp;<span class="ident" id="8297997"><a href="/encoding/gob/encoder_test.go.html#8285772">fmt</a></span><span class="op" id="8298000">.</span><span class="ident" id="8298001">Sprintf</span><span class="op" id="8298008">(</span><span class="string" id="8298009">&#34;Value&nbsp;%d&#34;</span><span class="op" id="8298019">,</span>&nbsp;<span class="ident" id="8298021"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8298022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298026"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8298030">=</span>&nbsp;<span class="ident" id="8298032"><a href="/encoding/gob/encoder_test.go.html#8297663">enc</a></span><span class="op" id="8298035">.</span><span class="ident" id="8298036">Encode</span><span class="op" id="8298042">(</span><span class="op" id="8298043">&amp;</span><span class="ident" id="8298044"><a href="/encoding/gob/encoder_test.go.html#8296936">NewType0</a></span><span class="op" id="8298052">{</span><span class="ident" id="8298053"><a href="/encoding/gob/encoder_test.go.html#8297990">str</a></span><span class="op" id="8298056">}</span><span class="op" id="8298057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298061">if</span>&nbsp;<span class="ident" id="8298064"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8298068">!=</span>&nbsp;<span class="ident" id="8298071">nil</span>&nbsp;<span class="op" id="8298075">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298080"><a href="/encoding/gob/encoder_test.go.html#8297559">t</a></span><span class="op" id="8298081">.</span><span class="ident" id="8298082">Fatalf</span><span class="op" id="8298088">(</span><span class="string" id="8298089">&#34;%d:&nbsp;NewType0&nbsp;encode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8298120">,</span>&nbsp;<span class="ident" id="8298122"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8298123">,</span>&nbsp;<span class="ident" id="8298125"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span><span class="op" id="8298128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298136">ns</span>&nbsp;<span class="op" id="8298139">:=</span>&nbsp;<span class="builtinfunc" id="8298142">new</span><span class="op" id="8298145">(</span><span class="ident" id="8298146"><a href="/encoding/gob/encoder_test.go.html#8296936">NewType0</a></span><span class="op" id="8298154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298158"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8298162">=</span>&nbsp;<span class="ident" id="8298164"><a href="/encoding/gob/encoder_test.go.html#8297793">dec</a></span><span class="op" id="8298167">.</span><span class="ident" id="8298168">Decode</span><span class="op" id="8298174">(</span><span class="ident" id="8298175"><a href="/encoding/gob/encoder_test.go.html#8298136">ns</a></span><span class="op" id="8298177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298181">if</span>&nbsp;<span class="ident" id="8298184"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span>&nbsp;<span class="op" id="8298188">!=</span>&nbsp;<span class="ident" id="8298191">nil</span>&nbsp;<span class="op" id="8298195">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298200"><a href="/encoding/gob/encoder_test.go.html#8297559">t</a></span><span class="op" id="8298201">.</span><span class="ident" id="8298202">Fatalf</span><span class="op" id="8298208">(</span><span class="string" id="8298209">&#34;%d:&nbsp;NewType0&nbsp;decode&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="8298240">,</span>&nbsp;<span class="ident" id="8298242"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8298243">,</span>&nbsp;<span class="ident" id="8298245"><a href="/encoding/gob/encoder_test.go.html#8297686">err</a></span><span class="op" id="8298248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298256">if</span>&nbsp;<span class="ident" id="8298259"><a href="/encoding/gob/encoder_test.go.html#8298136">ns</a></span><span class="op" id="8298261">.</span><span class="ident" id="8298262">S</span>&nbsp;<span class="op" id="8298264">!=</span>&nbsp;<span class="ident" id="8298267"><a href="/encoding/gob/encoder_test.go.html#8297990">str</a></span>&nbsp;<span class="op" id="8298271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298276"><a href="/encoding/gob/encoder_test.go.html#8297559">t</a></span><span class="op" id="8298277">.</span><span class="ident" id="8298278">Fatalf</span><span class="op" id="8298284">(</span><span class="string" id="8298285">&#34;%d:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8298309">,</span>&nbsp;<span class="ident" id="8298311"><a href="/encoding/gob/encoder_test.go.html#8297605">i</a></span><span class="op" id="8298312">,</span>&nbsp;<span class="ident" id="8298314"><a href="/encoding/gob/encoder_test.go.html#8297990">str</a></span><span class="op" id="8298317">,</span>&nbsp;<span class="ident" id="8298319"><a href="/encoding/gob/encoder_test.go.html#8298136">ns</a></span><span class="op" id="8298321">.</span><span class="ident" id="8298322">S</span><span class="op" id="8298323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298327">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298330">}</span><br>
<span class="lineno"></span><span class="op" id="8298332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8298335">//&nbsp;Another&nbsp;bug&nbsp;from&nbsp;golang-nuts,&nbsp;involving&nbsp;nested&nbsp;interfaces.</span><br>
<span class="lineno"></span><span class="keyword" id="8298397">type</span>&nbsp;<span class="ident" id="8298402">Bug0Outer</span>&nbsp;<span class="keyword" id="8298412">struct</span>&nbsp;<span class="op" id="8298419">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298422">Bug0Field</span>&nbsp;<span class="keyword" id="8298432">interface</span><span class="op" id="8298441">{</span><span class="op" id="8298442">}</span><br>
<span class="lineno"></span><span class="op" id="8298444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8298447">type</span>&nbsp;<span class="ident" id="8298452">Bug0Inner</span>&nbsp;<span class="keyword" id="8298462">struct</span>&nbsp;<span class="op" id="8298469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298472">A</span>&nbsp;<span class="builtintype" id="8298474">int</span><br>
<span class="lineno">555</span><span class="op" id="8298478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8298481">func</span>&nbsp;<span class="ident" id="8298486">TestNestedInterfaces</span><span class="op" id="8298506">(</span><span class="ident" id="8298507">t</span>&nbsp;<span class="op" id="8298509">*</span><span class="ident" id="8298510"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8298517">.</span><span class="ident" id="8298518">T</span><span class="op" id="8298519">)</span>&nbsp;<span class="op" id="8298521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298524">var</span>&nbsp;<span class="ident" id="8298528">buf</span>&nbsp;<span class="ident" id="8298532"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8298537">.</span><span class="ident" id="8298538">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298546">e</span>&nbsp;<span class="op" id="8298548">:=</span>&nbsp;<span class="ident" id="8298551"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8298561">(</span><span class="op" id="8298562">&amp;</span><span class="ident" id="8298563"><a href="/encoding/gob/encoder_test.go.html#8298528">buf</a></span><span class="op" id="8298566">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298569">d</span>&nbsp;<span class="op" id="8298571">:=</span>&nbsp;<span class="ident" id="8298574"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8298584">(</span><span class="op" id="8298585">&amp;</span><span class="ident" id="8298586"><a href="/encoding/gob/encoder_test.go.html#8298528">buf</a></span><span class="op" id="8298589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298592"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8298600">(</span><span class="builtinfunc" id="8298601">new</span><span class="op" id="8298604">(</span><span class="ident" id="8298605"><a href="/encoding/gob/encoder_test.go.html#8298402">Bug0Outer</a></span><span class="op" id="8298614">)</span><span class="op" id="8298615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298618"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8298626">(</span><span class="builtinfunc" id="8298627">new</span><span class="op" id="8298630">(</span><span class="ident" id="8298631"><a href="/encoding/gob/encoder_test.go.html#8298452">Bug0Inner</a></span><span class="op" id="8298640">)</span><span class="op" id="8298641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298644">f</span>&nbsp;<span class="op" id="8298646">:=</span>&nbsp;<span class="op" id="8298649">&amp;</span><span class="ident" id="8298650"><a href="/encoding/gob/encoder_test.go.html#8298402">Bug0Outer</a></span><span class="op" id="8298659">{</span><span class="op" id="8298660">&amp;</span><span class="ident" id="8298661"><a href="/encoding/gob/encoder_test.go.html#8298402">Bug0Outer</a></span><span class="op" id="8298670">{</span><span class="op" id="8298671">&amp;</span><span class="ident" id="8298672"><a href="/encoding/gob/encoder_test.go.html#8298452">Bug0Inner</a></span><span class="op" id="8298681">{</span><span class="num" id="8298682">7</span><span class="op" id="8298683">}</span><span class="op" id="8298684">}</span><span class="op" id="8298685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298688">var</span>&nbsp;<span class="ident" id="8298692">v</span>&nbsp;<span class="keyword" id="8298694">interface</span><span class="op" id="8298703">{</span><span class="op" id="8298704">}</span>&nbsp;<span class="op" id="8298706">=</span>&nbsp;<span class="ident" id="8298708"><a href="/encoding/gob/encoder_test.go.html#8298644">f</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298711">err</span>&nbsp;<span class="op" id="8298715">:=</span>&nbsp;<span class="ident" id="8298718"><a href="/encoding/gob/encoder_test.go.html#8298546">e</a></span><span class="op" id="8298719">.</span><span class="ident" id="8298720">Encode</span><span class="op" id="8298726">(</span><span class="op" id="8298727">&amp;</span><span class="ident" id="8298728"><a href="/encoding/gob/encoder_test.go.html#8298692">v</a></span><span class="op" id="8298729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298732">if</span>&nbsp;<span class="ident" id="8298735"><a href="/encoding/gob/encoder_test.go.html#8298711">err</a></span>&nbsp;<span class="op" id="8298739">!=</span>&nbsp;<span class="ident" id="8298742">nil</span>&nbsp;<span class="op" id="8298746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298750"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8298751">.</span><span class="ident" id="8298752">Fatal</span><span class="op" id="8298757">(</span><span class="string" id="8298758">&#34;Encode:&#34;</span><span class="op" id="8298767">,</span>&nbsp;<span class="ident" id="8298769"><a href="/encoding/gob/encoder_test.go.html#8298711">err</a></span><span class="op" id="8298772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298778"><a href="/encoding/gob/encoder_test.go.html#8298711">err</a></span>&nbsp;<span class="op" id="8298782">=</span>&nbsp;<span class="ident" id="8298784"><a href="/encoding/gob/encoder_test.go.html#8298569">d</a></span><span class="op" id="8298785">.</span><span class="ident" id="8298786">Decode</span><span class="op" id="8298792">(</span><span class="op" id="8298793">&amp;</span><span class="ident" id="8298794"><a href="/encoding/gob/encoder_test.go.html#8298692">v</a></span><span class="op" id="8298795">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298798">if</span>&nbsp;<span class="ident" id="8298801"><a href="/encoding/gob/encoder_test.go.html#8298711">err</a></span>&nbsp;<span class="op" id="8298805">!=</span>&nbsp;<span class="ident" id="8298808">nil</span>&nbsp;<span class="op" id="8298812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298816"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8298817">.</span><span class="ident" id="8298818">Fatal</span><span class="op" id="8298823">(</span><span class="string" id="8298824">&#34;Decode:&#34;</span><span class="op" id="8298833">,</span>&nbsp;<span class="ident" id="8298835"><a href="/encoding/gob/encoder_test.go.html#8298711">err</a></span><span class="op" id="8298838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8298844">//&nbsp;Make&nbsp;sure&nbsp;it&nbsp;decoded&nbsp;correctly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298880">outer1</span><span class="op" id="8298886">,</span>&nbsp;<span class="ident" id="8298888">ok</span>&nbsp;<span class="op" id="8298891">:=</span>&nbsp;<span class="ident" id="8298894"><a href="/encoding/gob/encoder_test.go.html#8298692">v</a></span><span class="op" id="8298895">.</span><span class="op" id="8298896">(</span><span class="op" id="8298897">*</span><span class="ident" id="8298898"><a href="/encoding/gob/encoder_test.go.html#8298402">Bug0Outer</a></span><span class="op" id="8298907">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8298910">if</span>&nbsp;<span class="op" id="8298913">!</span><span class="ident" id="8298914"><a href="/encoding/gob/encoder_test.go.html#8298888">ok</a></span>&nbsp;<span class="op" id="8298917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298921"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8298922">.</span><span class="ident" id="8298923">Fatalf</span><span class="op" id="8298929">(</span><span class="string" id="8298930">&#34;v&nbsp;not&nbsp;Bug0Outer:&nbsp;%T&#34;</span><span class="op" id="8298951">,</span>&nbsp;<span class="ident" id="8298953"><a href="/encoding/gob/encoder_test.go.html#8298692">v</a></span><span class="op" id="8298954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8298957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8298960">outer2</span><span class="op" id="8298966">,</span>&nbsp;<span class="ident" id="8298968"><a href="/encoding/gob/encoder_test.go.html#8298888">ok</a></span>&nbsp;<span class="op" id="8298971">:=</span>&nbsp;<span class="ident" id="8298974"><a href="/encoding/gob/encoder_test.go.html#8298880">outer1</a></span><span class="op" id="8298980">.</span><span class="ident" id="8298981">Bug0Field</span><span class="op" id="8298990">.</span><span class="op" id="8298991">(</span><span class="op" id="8298992">*</span><span class="ident" id="8298993"><a href="/encoding/gob/encoder_test.go.html#8298402">Bug0Outer</a></span><span class="op" id="8299002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299005">if</span>&nbsp;<span class="op" id="8299008">!</span><span class="ident" id="8299009"><a href="/encoding/gob/encoder_test.go.html#8298888">ok</a></span>&nbsp;<span class="op" id="8299012">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299016"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8299017">.</span><span class="ident" id="8299018">Fatalf</span><span class="op" id="8299024">(</span><span class="string" id="8299025">&#34;v.Bug0Field&nbsp;not&nbsp;Bug0Outer:&nbsp;%T&#34;</span><span class="op" id="8299056">,</span>&nbsp;<span class="ident" id="8299058"><a href="/encoding/gob/encoder_test.go.html#8298880">outer1</a></span><span class="op" id="8299064">.</span><span class="ident" id="8299065">Bug0Field</span><span class="op" id="8299074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299080">inner</span><span class="op" id="8299085">,</span>&nbsp;<span class="ident" id="8299087"><a href="/encoding/gob/encoder_test.go.html#8298888">ok</a></span>&nbsp;<span class="op" id="8299090">:=</span>&nbsp;<span class="ident" id="8299093"><a href="/encoding/gob/encoder_test.go.html#8298960">outer2</a></span><span class="op" id="8299099">.</span><span class="ident" id="8299100">Bug0Field</span><span class="op" id="8299109">.</span><span class="op" id="8299110">(</span><span class="op" id="8299111">*</span><span class="ident" id="8299112"><a href="/encoding/gob/encoder_test.go.html#8298452">Bug0Inner</a></span><span class="op" id="8299121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299124">if</span>&nbsp;<span class="op" id="8299127">!</span><span class="ident" id="8299128"><a href="/encoding/gob/encoder_test.go.html#8298888">ok</a></span>&nbsp;<span class="op" id="8299131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299135"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8299136">.</span><span class="ident" id="8299137">Fatalf</span><span class="op" id="8299143">(</span><span class="string" id="8299144">&#34;v.Bug0Field.Bug0Field&nbsp;not&nbsp;Bug0Inner:&nbsp;%T&#34;</span><span class="op" id="8299185">,</span>&nbsp;<span class="ident" id="8299187"><a href="/encoding/gob/encoder_test.go.html#8298960">outer2</a></span><span class="op" id="8299193">.</span><span class="ident" id="8299194">Bug0Field</span><span class="op" id="8299203">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299209">if</span>&nbsp;<span class="ident" id="8299212"><a href="/encoding/gob/encoder_test.go.html#8299080">inner</a></span><span class="op" id="8299217">.</span><span class="ident" id="8299218">A</span>&nbsp;<span class="op" id="8299220">!=</span>&nbsp;<span class="num" id="8299223">7</span>&nbsp;<span class="op" id="8299225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299229"><a href="/encoding/gob/encoder_test.go.html#8298507">t</a></span><span class="op" id="8299230">.</span><span class="ident" id="8299231">Fatalf</span><span class="op" id="8299237">(</span><span class="string" id="8299238">&#34;final&nbsp;value&nbsp;%d;&nbsp;expected&nbsp;%d&#34;</span><span class="op" id="8299267">,</span>&nbsp;<span class="ident" id="8299269"><a href="/encoding/gob/encoder_test.go.html#8299080">inner</a></span><span class="op" id="8299274">.</span><span class="ident" id="8299275">A</span><span class="op" id="8299276">,</span>&nbsp;<span class="num" id="8299278">7</span><span class="op" id="8299279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299282">}</span><br>
<span class="lineno"></span><span class="op" id="8299284">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="8299287">//&nbsp;The&nbsp;bugs&nbsp;keep&nbsp;coming.&nbsp;We&nbsp;forgot&nbsp;to&nbsp;send&nbsp;map&nbsp;subtypes&nbsp;before&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8299360">type</span>&nbsp;<span class="ident" id="8299365">Bug1Elem</span>&nbsp;<span class="keyword" id="8299374">struct</span>&nbsp;<span class="op" id="8299381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299384">Name</span>&nbsp;<span class="builtintype" id="8299389">string</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299397">Id</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8299402">int</span><br>
<span class="lineno"></span><span class="op" id="8299406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8299409">type</span>&nbsp;<span class="ident" id="8299414">Bug1StructMap</span>&nbsp;<span class="keyword" id="8299428">map</span><span class="op" id="8299431">[</span><span class="builtintype" id="8299432">string</span><span class="op" id="8299438">]</span><span class="ident" id="8299439"><a href="/encoding/gob/encoder_test.go.html#8299365">Bug1Elem</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="keyword" id="8299449">func</span>&nbsp;<span class="ident" id="8299454">bug1EncDec</span><span class="op" id="8299464">(</span><span class="ident" id="8299465">in</span>&nbsp;<span class="ident" id="8299468"><a href="/encoding/gob/encoder_test.go.html#8299414">Bug1StructMap</a></span><span class="op" id="8299481">,</span>&nbsp;<span class="ident" id="8299483">out</span>&nbsp;<span class="op" id="8299487">*</span><span class="ident" id="8299488"><a href="/encoding/gob/encoder_test.go.html#8299414">Bug1StructMap</a></span><span class="op" id="8299501">)</span>&nbsp;<span class="builtintype" id="8299503">error</span>&nbsp;<span class="op" id="8299509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299512">return</span>&nbsp;<span class="ident" id="8299519">nil</span><br>
<span class="lineno"></span><span class="op" id="8299523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8299526">func</span>&nbsp;<span class="ident" id="8299531">TestMapBug1</span><span class="op" id="8299542">(</span><span class="ident" id="8299543">t</span>&nbsp;<span class="op" id="8299545">*</span><span class="ident" id="8299546"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8299553">.</span><span class="ident" id="8299554">T</span><span class="op" id="8299555">)</span>&nbsp;<span class="op" id="8299557">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299560">in</span>&nbsp;<span class="op" id="8299563">:=</span>&nbsp;<span class="builtinfunc" id="8299566">make</span><span class="op" id="8299570">(</span><span class="ident" id="8299571"><a href="/encoding/gob/encoder_test.go.html#8299414">Bug1StructMap</a></span><span class="op" id="8299584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299587"><a href="/encoding/gob/encoder_test.go.html#8299560">in</a></span><span class="op" id="8299589">[</span><span class="string" id="8299590">&#34;val1&#34;</span><span class="op" id="8299596">]</span>&nbsp;<span class="op" id="8299598">=</span>&nbsp;<span class="ident" id="8299600"><a href="/encoding/gob/encoder_test.go.html#8299365">Bug1Elem</a></span><span class="op" id="8299608">{</span><span class="string" id="8299609">&#34;elem1&#34;</span><span class="op" id="8299616">,</span>&nbsp;<span class="num" id="8299618">1</span><span class="op" id="8299619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299622"><a href="/encoding/gob/encoder_test.go.html#8299560">in</a></span><span class="op" id="8299624">[</span><span class="string" id="8299625">&#34;val2&#34;</span><span class="op" id="8299631">]</span>&nbsp;<span class="op" id="8299633">=</span>&nbsp;<span class="ident" id="8299635"><a href="/encoding/gob/encoder_test.go.html#8299365">Bug1Elem</a></span><span class="op" id="8299643">{</span><span class="string" id="8299644">&#34;elem2&#34;</span><span class="op" id="8299651">,</span>&nbsp;<span class="num" id="8299653">2</span><span class="op" id="8299654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299658">b</span>&nbsp;<span class="op" id="8299660">:=</span>&nbsp;<span class="builtinfunc" id="8299663">new</span><span class="op" id="8299666">(</span><span class="ident" id="8299667"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8299672">.</span><span class="ident" id="8299673">Buffer</span><span class="op" id="8299679">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299682">enc</span>&nbsp;<span class="op" id="8299686">:=</span>&nbsp;<span class="ident" id="8299689"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8299699">(</span><span class="ident" id="8299700"><a href="/encoding/gob/encoder_test.go.html#8299658">b</a></span><span class="op" id="8299701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299704">err</span>&nbsp;<span class="op" id="8299708">:=</span>&nbsp;<span class="ident" id="8299711"><a href="/encoding/gob/encoder_test.go.html#8299682">enc</a></span><span class="op" id="8299714">.</span><span class="ident" id="8299715">Encode</span><span class="op" id="8299721">(</span><span class="ident" id="8299722"><a href="/encoding/gob/encoder_test.go.html#8299560">in</a></span><span class="op" id="8299724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299727">if</span>&nbsp;<span class="ident" id="8299730"><a href="/encoding/gob/encoder_test.go.html#8299704">err</a></span>&nbsp;<span class="op" id="8299734">!=</span>&nbsp;<span class="ident" id="8299737">nil</span>&nbsp;<span class="op" id="8299741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299745"><a href="/encoding/gob/encoder_test.go.html#8299543">t</a></span><span class="op" id="8299746">.</span><span class="ident" id="8299747">Fatal</span><span class="op" id="8299752">(</span><span class="string" id="8299753">&#34;encode:&#34;</span><span class="op" id="8299762">,</span>&nbsp;<span class="ident" id="8299764"><a href="/encoding/gob/encoder_test.go.html#8299704">err</a></span><span class="op" id="8299767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299770">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299773">dec</span>&nbsp;<span class="op" id="8299777">:=</span>&nbsp;<span class="ident" id="8299780"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8299790">(</span><span class="ident" id="8299791"><a href="/encoding/gob/encoder_test.go.html#8299658">b</a></span><span class="op" id="8299792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299795">out</span>&nbsp;<span class="op" id="8299799">:=</span>&nbsp;<span class="builtinfunc" id="8299802">make</span><span class="op" id="8299806">(</span><span class="ident" id="8299807"><a href="/encoding/gob/encoder_test.go.html#8299414">Bug1StructMap</a></span><span class="op" id="8299820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299823"><a href="/encoding/gob/encoder_test.go.html#8299704">err</a></span>&nbsp;<span class="op" id="8299827">=</span>&nbsp;<span class="ident" id="8299829"><a href="/encoding/gob/encoder_test.go.html#8299773">dec</a></span><span class="op" id="8299832">.</span><span class="ident" id="8299833">Decode</span><span class="op" id="8299839">(</span><span class="op" id="8299840">&amp;</span><span class="ident" id="8299841"><a href="/encoding/gob/encoder_test.go.html#8299795">out</a></span><span class="op" id="8299844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299847">if</span>&nbsp;<span class="ident" id="8299850"><a href="/encoding/gob/encoder_test.go.html#8299704">err</a></span>&nbsp;<span class="op" id="8299854">!=</span>&nbsp;<span class="ident" id="8299857">nil</span>&nbsp;<span class="op" id="8299861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299865"><a href="/encoding/gob/encoder_test.go.html#8299543">t</a></span><span class="op" id="8299866">.</span><span class="ident" id="8299867">Fatal</span><span class="op" id="8299872">(</span><span class="string" id="8299873">&#34;decode:&#34;</span><span class="op" id="8299882">,</span>&nbsp;<span class="ident" id="8299884"><a href="/encoding/gob/encoder_test.go.html#8299704">err</a></span><span class="op" id="8299887">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8299893">if</span>&nbsp;<span class="op" id="8299896">!</span><span class="ident" id="8299897"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8299904">.</span><span class="ident" id="8299905">DeepEqual</span><span class="op" id="8299914">(</span><span class="ident" id="8299915"><a href="/encoding/gob/encoder_test.go.html#8299560">in</a></span><span class="op" id="8299917">,</span>&nbsp;<span class="ident" id="8299919"><a href="/encoding/gob/encoder_test.go.html#8299795">out</a></span><span class="op" id="8299922">)</span>&nbsp;<span class="op" id="8299924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8299928"><a href="/encoding/gob/encoder_test.go.html#8299543">t</a></span><span class="op" id="8299929">.</span><span class="ident" id="8299930">Errorf</span><span class="op" id="8299936">(</span><span class="string" id="8299937">&#34;mismatch:&nbsp;%v&nbsp;%v&#34;</span><span class="op" id="8299954">,</span>&nbsp;<span class="ident" id="8299956"><a href="/encoding/gob/encoder_test.go.html#8299560">in</a></span><span class="op" id="8299958">,</span>&nbsp;<span class="ident" id="8299960"><a href="/encoding/gob/encoder_test.go.html#8299795">out</a></span><span class="op" id="8299963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8299966">}</span><br>
<span class="lineno"></span><span class="op" id="8299968">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="keyword" id="8299971">func</span>&nbsp;<span class="ident" id="8299976">TestGobMapInterfaceEncode</span><span class="op" id="8300001">(</span><span class="ident" id="8300002">t</span>&nbsp;<span class="op" id="8300004">*</span><span class="ident" id="8300005"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8300012">.</span><span class="ident" id="8300013">T</span><span class="op" id="8300014">)</span>&nbsp;<span class="op" id="8300016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300019">m</span>&nbsp;<span class="op" id="8300021">:=</span>&nbsp;<span class="keyword" id="8300024">map</span><span class="op" id="8300027">[</span><span class="builtintype" id="8300028">string</span><span class="op" id="8300034">]</span><span class="keyword" id="8300035">interface</span><span class="op" id="8300044">{</span><span class="op" id="8300045">}</span><span class="op" id="8300046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300050">&#34;up&#34;</span><span class="op" id="8300054">:</span>&nbsp;<span class="builtintype" id="8300056">uintptr</span><span class="op" id="8300063">(</span><span class="num" id="8300064">0</span><span class="op" id="8300065">)</span><span class="op" id="8300066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300070">&#34;i0&#34;</span><span class="op" id="8300074">:</span>&nbsp;<span class="op" id="8300076">[</span><span class="op" id="8300077">]</span><span class="builtintype" id="8300078">int</span><span class="op" id="8300081">{</span><span class="op" id="8300082">-</span><span class="num" id="8300083">1</span><span class="op" id="8300084">}</span><span class="op" id="8300085">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300089">&#34;i1&#34;</span><span class="op" id="8300093">:</span>&nbsp;<span class="op" id="8300095">[</span><span class="op" id="8300096">]</span><span class="builtintype" id="8300097">int8</span><span class="op" id="8300101">{</span><span class="op" id="8300102">-</span><span class="num" id="8300103">1</span><span class="op" id="8300104">}</span><span class="op" id="8300105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300109">&#34;i2&#34;</span><span class="op" id="8300113">:</span>&nbsp;<span class="op" id="8300115">[</span><span class="op" id="8300116">]</span><span class="builtintype" id="8300117">int16</span><span class="op" id="8300122">{</span><span class="op" id="8300123">-</span><span class="num" id="8300124">1</span><span class="op" id="8300125">}</span><span class="op" id="8300126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300130">&#34;i3&#34;</span><span class="op" id="8300134">:</span>&nbsp;<span class="op" id="8300136">[</span><span class="op" id="8300137">]</span><span class="builtintype" id="8300138">int32</span><span class="op" id="8300143">{</span><span class="op" id="8300144">-</span><span class="num" id="8300145">1</span><span class="op" id="8300146">}</span><span class="op" id="8300147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300151">&#34;i4&#34;</span><span class="op" id="8300155">:</span>&nbsp;<span class="op" id="8300157">[</span><span class="op" id="8300158">]</span><span class="ident" id="8300159">int64</span><span class="op" id="8300164">{</span><span class="op" id="8300165">-</span><span class="num" id="8300166">1</span><span class="op" id="8300167">}</span><span class="op" id="8300168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300172">&#34;u0&#34;</span><span class="op" id="8300176">:</span>&nbsp;<span class="op" id="8300178">[</span><span class="op" id="8300179">]</span><span class="builtintype" id="8300180">uint</span><span class="op" id="8300184">{</span><span class="num" id="8300185">1</span><span class="op" id="8300186">}</span><span class="op" id="8300187">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300191">&#34;u1&#34;</span><span class="op" id="8300195">:</span>&nbsp;<span class="op" id="8300197">[</span><span class="op" id="8300198">]</span><span class="builtintype" id="8300199">uint8</span><span class="op" id="8300204">{</span><span class="num" id="8300205">1</span><span class="op" id="8300206">}</span><span class="op" id="8300207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300211">&#34;u2&#34;</span><span class="op" id="8300215">:</span>&nbsp;<span class="op" id="8300217">[</span><span class="op" id="8300218">]</span><span class="builtintype" id="8300219">uint16</span><span class="op" id="8300225">{</span><span class="num" id="8300226">1</span><span class="op" id="8300227">}</span><span class="op" id="8300228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300232">&#34;u3&#34;</span><span class="op" id="8300236">:</span>&nbsp;<span class="op" id="8300238">[</span><span class="op" id="8300239">]</span><span class="builtintype" id="8300240">uint32</span><span class="op" id="8300246">{</span><span class="num" id="8300247">1</span><span class="op" id="8300248">}</span><span class="op" id="8300249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300253">&#34;u4&#34;</span><span class="op" id="8300257">:</span>&nbsp;<span class="op" id="8300259">[</span><span class="op" id="8300260">]</span><span class="ident" id="8300261">uint64</span><span class="op" id="8300267">{</span><span class="num" id="8300268">1</span><span class="op" id="8300269">}</span><span class="op" id="8300270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300274">&#34;f0&#34;</span><span class="op" id="8300278">:</span>&nbsp;<span class="op" id="8300280">[</span><span class="op" id="8300281">]</span><span class="builtintype" id="8300282">float32</span><span class="op" id="8300289">{</span><span class="num" id="8300290">1</span><span class="op" id="8300291">}</span><span class="op" id="8300292">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300296">&#34;f1&#34;</span><span class="op" id="8300300">:</span>&nbsp;<span class="op" id="8300302">[</span><span class="op" id="8300303">]</span><span class="builtintype" id="8300304">float64</span><span class="op" id="8300311">{</span><span class="num" id="8300312">1</span><span class="op" id="8300313">}</span><span class="op" id="8300314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300318">&#34;c0&#34;</span><span class="op" id="8300322">:</span>&nbsp;<span class="op" id="8300324">[</span><span class="op" id="8300325">]</span><span class="builtintype" id="8300326">complex64</span><span class="op" id="8300335">{</span><span class="builtinfunc" id="8300336">complex</span><span class="op" id="8300343">(</span><span class="num" id="8300344">2</span><span class="op" id="8300345">,</span>&nbsp;<span class="op" id="8300347">-</span><span class="num" id="8300348">2</span><span class="op" id="8300349">)</span><span class="op" id="8300350">}</span><span class="op" id="8300351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300355">&#34;c1&#34;</span><span class="op" id="8300359">:</span>&nbsp;<span class="op" id="8300361">[</span><span class="op" id="8300362">]</span><span class="builtintype" id="8300363">complex128</span><span class="op" id="8300373">{</span><span class="builtinfunc" id="8300374">complex</span><span class="op" id="8300381">(</span><span class="num" id="8300382">2</span><span class="op" id="8300383">,</span>&nbsp;<span class="builtintype" id="8300385">float64</span><span class="op" id="8300392">(</span><span class="op" id="8300393">-</span><span class="num" id="8300394">2</span><span class="op" id="8300395">)</span><span class="op" id="8300396">)</span><span class="op" id="8300397">}</span><span class="op" id="8300398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300402">&#34;us&#34;</span><span class="op" id="8300406">:</span>&nbsp;<span class="op" id="8300408">[</span><span class="op" id="8300409">]</span><span class="builtintype" id="8300410">uintptr</span><span class="op" id="8300417">{</span><span class="num" id="8300418">0</span><span class="op" id="8300419">}</span><span class="op" id="8300420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300424">&#34;bo&#34;</span><span class="op" id="8300428">:</span>&nbsp;<span class="op" id="8300430">[</span><span class="op" id="8300431">]</span><span class="builtintype" id="8300432">bool</span><span class="op" id="8300436">{</span><span class="ident" id="8300437">false</span><span class="op" id="8300442">}</span><span class="op" id="8300443">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8300447">&#34;st&#34;</span><span class="op" id="8300451">:</span>&nbsp;<span class="op" id="8300453">[</span><span class="op" id="8300454">]</span><span class="builtintype" id="8300455">string</span><span class="op" id="8300461">{</span><span class="string" id="8300462">&#34;s&#34;</span><span class="op" id="8300465">}</span><span class="op" id="8300466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300472">enc</span>&nbsp;<span class="op" id="8300476">:=</span>&nbsp;<span class="ident" id="8300479"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8300489">(</span><span class="builtinfunc" id="8300490">new</span><span class="op" id="8300493">(</span><span class="ident" id="8300494"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8300499">.</span><span class="ident" id="8300500">Buffer</span><span class="op" id="8300506">)</span><span class="op" id="8300507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300510">err</span>&nbsp;<span class="op" id="8300514">:=</span>&nbsp;<span class="ident" id="8300517"><a href="/encoding/gob/encoder_test.go.html#8300472">enc</a></span><span class="op" id="8300520">.</span><span class="ident" id="8300521">Encode</span><span class="op" id="8300527">(</span><span class="ident" id="8300528"><a href="/encoding/gob/encoder_test.go.html#8300019">m</a></span><span class="op" id="8300529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300532">if</span>&nbsp;<span class="ident" id="8300535"><a href="/encoding/gob/encoder_test.go.html#8300510">err</a></span>&nbsp;<span class="op" id="8300539">!=</span>&nbsp;<span class="ident" id="8300542">nil</span>&nbsp;<span class="op" id="8300546">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300550"><a href="/encoding/gob/encoder_test.go.html#8300002">t</a></span><span class="op" id="8300551">.</span><span class="ident" id="8300552">Errorf</span><span class="op" id="8300558">(</span><span class="string" id="8300559">&#34;encode&nbsp;map:&nbsp;%s&#34;</span><span class="op" id="8300575">,</span>&nbsp;<span class="ident" id="8300577"><a href="/encoding/gob/encoder_test.go.html#8300510">err</a></span><span class="op" id="8300580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300583">}</span><br>
<span class="lineno"></span><span class="op" id="8300585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8300588">func</span>&nbsp;<span class="ident" id="8300593">TestSliceReusesMemory</span><span class="op" id="8300614">(</span><span class="ident" id="8300615">t</span>&nbsp;<span class="op" id="8300617">*</span><span class="ident" id="8300618"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8300625">.</span><span class="ident" id="8300626">T</span><span class="op" id="8300627">)</span>&nbsp;<span class="op" id="8300629">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300632">buf</span>&nbsp;<span class="op" id="8300636">:=</span>&nbsp;<span class="builtinfunc" id="8300639">new</span><span class="op" id="8300642">(</span><span class="ident" id="8300643"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8300648">.</span><span class="ident" id="8300649">Buffer</span><span class="op" id="8300655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8300658">//&nbsp;Bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300672">x</span>&nbsp;<span class="op" id="8300674">:=</span>&nbsp;<span class="op" id="8300677">[</span><span class="op" id="8300678">]</span><span class="builtintype" id="8300679">byte</span><span class="op" id="8300683">(</span><span class="string" id="8300684">&#34;abcd&#34;</span><span class="op" id="8300690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300694">enc</span>&nbsp;<span class="op" id="8300698">:=</span>&nbsp;<span class="ident" id="8300701"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8300711">(</span><span class="ident" id="8300712"><a href="/encoding/gob/encoder_test.go.html#8300632">buf</a></span><span class="op" id="8300715">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300719">err</span>&nbsp;<span class="op" id="8300723">:=</span>&nbsp;<span class="ident" id="8300726"><a href="/encoding/gob/encoder_test.go.html#8300694">enc</a></span><span class="op" id="8300729">.</span><span class="ident" id="8300730">Encode</span><span class="op" id="8300736">(</span><span class="ident" id="8300737"><a href="/encoding/gob/encoder_test.go.html#8300672">x</a></span><span class="op" id="8300738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300742">if</span>&nbsp;<span class="ident" id="8300745"><a href="/encoding/gob/encoder_test.go.html#8300719">err</a></span>&nbsp;<span class="op" id="8300749">!=</span>&nbsp;<span class="ident" id="8300752">nil</span>&nbsp;<span class="op" id="8300756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300761"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8300762">.</span><span class="ident" id="8300763">Errorf</span><span class="op" id="8300769">(</span><span class="string" id="8300770">&#34;bytes:&nbsp;encode:&nbsp;%s&#34;</span><span class="op" id="8300789">,</span>&nbsp;<span class="ident" id="8300791"><a href="/encoding/gob/encoder_test.go.html#8300719">err</a></span><span class="op" id="8300794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8300802">//&nbsp;Decode&nbsp;into&nbsp;y,&nbsp;which&nbsp;is&nbsp;big&nbsp;enough.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300843">y</span>&nbsp;<span class="op" id="8300845">:=</span>&nbsp;<span class="op" id="8300848">[</span><span class="op" id="8300849">]</span><span class="builtintype" id="8300850">byte</span><span class="op" id="8300854">(</span><span class="string" id="8300855">&#34;ABCDE&#34;</span><span class="op" id="8300862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300866">addr</span>&nbsp;<span class="op" id="8300871">:=</span>&nbsp;<span class="op" id="8300874">&amp;</span><span class="ident" id="8300875"><a href="/encoding/gob/encoder_test.go.html#8300843">y</a></span><span class="op" id="8300876">[</span><span class="num" id="8300877">0</span><span class="op" id="8300878">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300882">dec</span>&nbsp;<span class="op" id="8300886">:=</span>&nbsp;<span class="ident" id="8300889"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8300899">(</span><span class="ident" id="8300900"><a href="/encoding/gob/encoder_test.go.html#8300632">buf</a></span><span class="op" id="8300903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300907"><a href="/encoding/gob/encoder_test.go.html#8300719">err</a></span>&nbsp;<span class="op" id="8300911">=</span>&nbsp;<span class="ident" id="8300913"><a href="/encoding/gob/encoder_test.go.html#8300882">dec</a></span><span class="op" id="8300916">.</span><span class="ident" id="8300917">Decode</span><span class="op" id="8300923">(</span><span class="op" id="8300924">&amp;</span><span class="ident" id="8300925"><a href="/encoding/gob/encoder_test.go.html#8300843">y</a></span><span class="op" id="8300926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300930">if</span>&nbsp;<span class="ident" id="8300933"><a href="/encoding/gob/encoder_test.go.html#8300719">err</a></span>&nbsp;<span class="op" id="8300937">!=</span>&nbsp;<span class="ident" id="8300940">nil</span>&nbsp;<span class="op" id="8300944">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8300949"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8300950">.</span><span class="ident" id="8300951">Fatal</span><span class="op" id="8300956">(</span><span class="string" id="8300957">&#34;bytes:&nbsp;decode:&#34;</span><span class="op" id="8300973">,</span>&nbsp;<span class="ident" id="8300975"><a href="/encoding/gob/encoder_test.go.html#8300719">err</a></span><span class="op" id="8300978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8300982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8300986">if</span>&nbsp;<span class="op" id="8300989">!</span><span class="ident" id="8300990"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8300995">.</span><span class="ident" id="8300996">Equal</span><span class="op" id="8301001">(</span><span class="ident" id="8301002"><a href="/encoding/gob/encoder_test.go.html#8300672">x</a></span><span class="op" id="8301003">,</span>&nbsp;<span class="ident" id="8301005"><a href="/encoding/gob/encoder_test.go.html#8300843">y</a></span><span class="op" id="8301006">)</span>&nbsp;<span class="op" id="8301008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301013"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301014">.</span><span class="ident" id="8301015">Errorf</span><span class="op" id="8301021">(</span><span class="string" id="8301022">&#34;bytes:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q\n&#34;</span><span class="op" id="8301051">,</span>&nbsp;<span class="ident" id="8301053"><a href="/encoding/gob/encoder_test.go.html#8300672">x</a></span><span class="op" id="8301054">,</span>&nbsp;<span class="ident" id="8301056"><a href="/encoding/gob/encoder_test.go.html#8300843">y</a></span><span class="op" id="8301057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301061">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301065">if</span>&nbsp;<span class="ident" id="8301068"><a href="/encoding/gob/encoder_test.go.html#8300866">addr</a></span>&nbsp;<span class="op" id="8301073">!=</span>&nbsp;<span class="op" id="8301076">&amp;</span><span class="ident" id="8301077"><a href="/encoding/gob/encoder_test.go.html#8300843">y</a></span><span class="op" id="8301078">[</span><span class="num" id="8301079">0</span><span class="op" id="8301080">]</span>&nbsp;<span class="op" id="8301082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301087"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301088">.</span><span class="ident" id="8301089">Errorf</span><span class="op" id="8301095">(</span><span class="string" id="8301096">&#34;bytes:&nbsp;unnecessary&nbsp;reallocation&#34;</span><span class="op" id="8301129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301139">//&nbsp;general&nbsp;slice</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301161">x</span>&nbsp;<span class="op" id="8301163">:=</span>&nbsp;<span class="op" id="8301166">[</span><span class="op" id="8301167">]</span><span class="builtintype" id="8301168">rune</span><span class="op" id="8301172">(</span><span class="string" id="8301173">&#34;abcd&#34;</span><span class="op" id="8301179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301183">enc</span>&nbsp;<span class="op" id="8301187">:=</span>&nbsp;<span class="ident" id="8301190"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8301200">(</span><span class="ident" id="8301201"><a href="/encoding/gob/encoder_test.go.html#8300632">buf</a></span><span class="op" id="8301204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301208">err</span>&nbsp;<span class="op" id="8301212">:=</span>&nbsp;<span class="ident" id="8301215"><a href="/encoding/gob/encoder_test.go.html#8301183">enc</a></span><span class="op" id="8301218">.</span><span class="ident" id="8301219">Encode</span><span class="op" id="8301225">(</span><span class="ident" id="8301226"><a href="/encoding/gob/encoder_test.go.html#8301161">x</a></span><span class="op" id="8301227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301231">if</span>&nbsp;<span class="ident" id="8301234"><a href="/encoding/gob/encoder_test.go.html#8301208">err</a></span>&nbsp;<span class="op" id="8301238">!=</span>&nbsp;<span class="ident" id="8301241">nil</span>&nbsp;<span class="op" id="8301245">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301250"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301251">.</span><span class="ident" id="8301252">Errorf</span><span class="op" id="8301258">(</span><span class="string" id="8301259">&#34;ints:&nbsp;encode:&nbsp;%s&#34;</span><span class="op" id="8301277">,</span>&nbsp;<span class="ident" id="8301279"><a href="/encoding/gob/encoder_test.go.html#8301208">err</a></span><span class="op" id="8301282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8301290">//&nbsp;Decode&nbsp;into&nbsp;y,&nbsp;which&nbsp;is&nbsp;big&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301331">y</span>&nbsp;<span class="op" id="8301333">:=</span>&nbsp;<span class="op" id="8301336">[</span><span class="op" id="8301337">]</span><span class="builtintype" id="8301338">rune</span><span class="op" id="8301342">(</span><span class="string" id="8301343">&#34;ABCDE&#34;</span><span class="op" id="8301350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301354">addr</span>&nbsp;<span class="op" id="8301359">:=</span>&nbsp;<span class="op" id="8301362">&amp;</span><span class="ident" id="8301363"><a href="/encoding/gob/encoder_test.go.html#8301331">y</a></span><span class="op" id="8301364">[</span><span class="num" id="8301365">0</span><span class="op" id="8301366">]</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301370">dec</span>&nbsp;<span class="op" id="8301374">:=</span>&nbsp;<span class="ident" id="8301377"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8301387">(</span><span class="ident" id="8301388"><a href="/encoding/gob/encoder_test.go.html#8300632">buf</a></span><span class="op" id="8301391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301395"><a href="/encoding/gob/encoder_test.go.html#8301208">err</a></span>&nbsp;<span class="op" id="8301399">=</span>&nbsp;<span class="ident" id="8301401"><a href="/encoding/gob/encoder_test.go.html#8301370">dec</a></span><span class="op" id="8301404">.</span><span class="ident" id="8301405">Decode</span><span class="op" id="8301411">(</span><span class="op" id="8301412">&amp;</span><span class="ident" id="8301413"><a href="/encoding/gob/encoder_test.go.html#8301331">y</a></span><span class="op" id="8301414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301418">if</span>&nbsp;<span class="ident" id="8301421"><a href="/encoding/gob/encoder_test.go.html#8301208">err</a></span>&nbsp;<span class="op" id="8301425">!=</span>&nbsp;<span class="ident" id="8301428">nil</span>&nbsp;<span class="op" id="8301432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301437"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301438">.</span><span class="ident" id="8301439">Fatal</span><span class="op" id="8301444">(</span><span class="string" id="8301445">&#34;ints:&nbsp;decode:&#34;</span><span class="op" id="8301460">,</span>&nbsp;<span class="ident" id="8301462"><a href="/encoding/gob/encoder_test.go.html#8301208">err</a></span><span class="op" id="8301465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301469">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301473">if</span>&nbsp;<span class="op" id="8301476">!</span><span class="ident" id="8301477"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8301484">.</span><span class="ident" id="8301485">DeepEqual</span><span class="op" id="8301494">(</span><span class="ident" id="8301495"><a href="/encoding/gob/encoder_test.go.html#8301161">x</a></span><span class="op" id="8301496">,</span>&nbsp;<span class="ident" id="8301498"><a href="/encoding/gob/encoder_test.go.html#8301331">y</a></span><span class="op" id="8301499">)</span>&nbsp;<span class="op" id="8301501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301506"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301507">.</span><span class="ident" id="8301508">Errorf</span><span class="op" id="8301514">(</span><span class="string" id="8301515">&#34;ints:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%q\n&#34;</span><span class="op" id="8301543">,</span>&nbsp;<span class="ident" id="8301545"><a href="/encoding/gob/encoder_test.go.html#8301161">x</a></span><span class="op" id="8301546">,</span>&nbsp;<span class="ident" id="8301548"><a href="/encoding/gob/encoder_test.go.html#8301331">y</a></span><span class="op" id="8301549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301557">if</span>&nbsp;<span class="ident" id="8301560"><a href="/encoding/gob/encoder_test.go.html#8301354">addr</a></span>&nbsp;<span class="op" id="8301565">!=</span>&nbsp;<span class="op" id="8301568">&amp;</span><span class="ident" id="8301569"><a href="/encoding/gob/encoder_test.go.html#8301331">y</a></span><span class="op" id="8301570">[</span><span class="num" id="8301571">0</span><span class="op" id="8301572">]</span>&nbsp;<span class="op" id="8301574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301579"><a href="/encoding/gob/encoder_test.go.html#8300615">t</a></span><span class="op" id="8301580">.</span><span class="ident" id="8301581">Errorf</span><span class="op" id="8301587">(</span><span class="string" id="8301588">&#34;ints:&nbsp;unnecessary&nbsp;reallocation&#34;</span><span class="op" id="8301620">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301627">}</span><br>
<span class="lineno"></span><span class="op" id="8301629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8301632">//&nbsp;Used&nbsp;to&nbsp;crash:&nbsp;negative&nbsp;count&nbsp;in&nbsp;recvMessage.</span><br>
<span class="lineno">705</span><span class="keyword" id="8301681">func</span>&nbsp;<span class="ident" id="8301686">TestBadCount</span><span class="op" id="8301698">(</span><span class="ident" id="8301699">t</span>&nbsp;<span class="op" id="8301701">*</span><span class="ident" id="8301702"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8301709">.</span><span class="ident" id="8301710">T</span><span class="op" id="8301711">)</span>&nbsp;<span class="op" id="8301713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301716">b</span>&nbsp;<span class="op" id="8301718">:=</span>&nbsp;<span class="op" id="8301721">[</span><span class="op" id="8301722">]</span><span class="builtintype" id="8301723">byte</span><span class="op" id="8301727">{</span><span class="num" id="8301728">0xfb</span><span class="op" id="8301732">,</span>&nbsp;<span class="num" id="8301734">0xa5</span><span class="op" id="8301738">,</span>&nbsp;<span class="num" id="8301740">0x82</span><span class="op" id="8301744">,</span>&nbsp;<span class="num" id="8301746">0x2f</span><span class="op" id="8301750">,</span>&nbsp;<span class="num" id="8301752">0xca</span><span class="op" id="8301756">,</span>&nbsp;<span class="num" id="8301758">0x1</span><span class="op" id="8301761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8301764">if</span>&nbsp;<span class="ident" id="8301767">err</span>&nbsp;<span class="op" id="8301771">:=</span>&nbsp;<span class="ident" id="8301774"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8301784">(</span><span class="ident" id="8301785"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8301790">.</span><span class="ident" id="8301791">NewReader</span><span class="op" id="8301800">(</span><span class="ident" id="8301801"><a href="/encoding/gob/encoder_test.go.html#8301716">b</a></span><span class="op" id="8301802">)</span><span class="op" id="8301803">)</span><span class="op" id="8301804">.</span><span class="ident" id="8301805">Decode</span><span class="op" id="8301811">(</span><span class="ident" id="8301812">nil</span><span class="op" id="8301815">)</span><span class="op" id="8301816">;</span>&nbsp;<span class="ident" id="8301818"><a href="/encoding/gob/encoder_test.go.html#8301767">err</a></span>&nbsp;<span class="op" id="8301822">==</span>&nbsp;<span class="ident" id="8301825">nil</span>&nbsp;<span class="op" id="8301829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301833"><a href="/encoding/gob/encoder_test.go.html#8301699">t</a></span><span class="op" id="8301834">.</span><span class="ident" id="8301835">Error</span><span class="op" id="8301840">(</span><span class="string" id="8301841">&#34;expected&nbsp;error&nbsp;from&nbsp;bad&nbsp;count&#34;</span><span class="op" id="8301872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301875">}</span>&nbsp;<span class="keyword" id="8301877">else</span>&nbsp;<span class="keyword" id="8301882">if</span>&nbsp;<span class="ident" id="8301885"><a href="/encoding/gob/encoder_test.go.html#8301767">err</a></span><span class="op" id="8301888">.</span><span class="ident" id="8301889">Error</span><span class="op" id="8301894">(</span><span class="op" id="8301895">)</span>&nbsp;<span class="op" id="8301897">!=</span>&nbsp;<span class="ident" id="8301900"><a href="/encoding/gob/decoder.go.html#5078892">errBadCount</a></span><span class="op" id="8301911">.</span><span class="ident" id="8301912">Error</span><span class="op" id="8301917">(</span><span class="op" id="8301918">)</span>&nbsp;<span class="op" id="8301920">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8301924"><a href="/encoding/gob/encoder_test.go.html#8301699">t</a></span><span class="op" id="8301925">.</span><span class="ident" id="8301926">Error</span><span class="op" id="8301931">(</span><span class="string" id="8301932">&#34;expected&nbsp;bad&nbsp;count&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8301963">,</span>&nbsp;<span class="ident" id="8301965"><a href="/encoding/gob/encoder_test.go.html#8301767">err</a></span><span class="op" id="8301968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8301971">}</span><br>
<span class="lineno"></span><span class="op" id="8301973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8301976">//&nbsp;Verify&nbsp;that&nbsp;sequential&nbsp;Decoders&nbsp;built&nbsp;on&nbsp;a&nbsp;single&nbsp;input&nbsp;will</span><br>
<span class="lineno">715</span><span class="comment" id="8302040">//&nbsp;succeed&nbsp;if&nbsp;the&nbsp;input&nbsp;implements&nbsp;ReadByte&nbsp;and&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="8302100">//&nbsp;type&nbsp;information&nbsp;in&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="8302135">func</span>&nbsp;<span class="ident" id="8302140">TestSequentialDecoder</span><span class="op" id="8302161">(</span><span class="ident" id="8302162">t</span>&nbsp;<span class="op" id="8302164">*</span><span class="ident" id="8302165"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8302172">.</span><span class="ident" id="8302173">T</span><span class="op" id="8302174">)</span>&nbsp;<span class="op" id="8302176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302179">b</span>&nbsp;<span class="op" id="8302181">:=</span>&nbsp;<span class="builtinfunc" id="8302184">new</span><span class="op" id="8302187">(</span><span class="ident" id="8302188"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8302193">.</span><span class="ident" id="8302194">Buffer</span><span class="op" id="8302200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302203">enc</span>&nbsp;<span class="op" id="8302207">:=</span>&nbsp;<span class="ident" id="8302210"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8302220">(</span><span class="ident" id="8302221"><a href="/encoding/gob/encoder_test.go.html#8302179">b</a></span><span class="op" id="8302222">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302225">const</span>&nbsp;<span class="ident" id="8302231">count</span>&nbsp;<span class="op" id="8302237">=</span>&nbsp;<span class="num" id="8302239">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302243">for</span>&nbsp;<span class="ident" id="8302247">i</span>&nbsp;<span class="op" id="8302249">:=</span>&nbsp;<span class="num" id="8302252">0</span><span class="op" id="8302253">;</span>&nbsp;<span class="ident" id="8302255"><a href="/encoding/gob/encoder_test.go.html#8302247">i</a></span>&nbsp;<span class="op" id="8302257">&lt;</span>&nbsp;<span class="ident" id="8302259"><a href="/encoding/gob/encoder_test.go.html#8302231">count</a></span><span class="op" id="8302264">;</span>&nbsp;<span class="ident" id="8302266"><a href="/encoding/gob/encoder_test.go.html#8302247">i</a></span><span class="op" id="8302267">++</span>&nbsp;<span class="op" id="8302270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302274">s</span>&nbsp;<span class="op" id="8302276">:=</span>&nbsp;<span class="ident" id="8302279"><a href="/encoding/gob/encoder_test.go.html#8285772">fmt</a></span><span class="op" id="8302282">.</span><span class="ident" id="8302283">Sprintf</span><span class="op" id="8302290">(</span><span class="string" id="8302291">&#34;%d&#34;</span><span class="op" id="8302295">,</span>&nbsp;<span class="ident" id="8302297"><a href="/encoding/gob/encoder_test.go.html#8302247">i</a></span><span class="op" id="8302298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302302">if</span>&nbsp;<span class="ident" id="8302305">err</span>&nbsp;<span class="op" id="8302309">:=</span>&nbsp;<span class="ident" id="8302312"><a href="/encoding/gob/encoder_test.go.html#8302203">enc</a></span><span class="op" id="8302315">.</span><span class="ident" id="8302316">Encode</span><span class="op" id="8302322">(</span><span class="ident" id="8302323"><a href="/encoding/gob/encoder_test.go.html#8302274">s</a></span><span class="op" id="8302324">)</span><span class="op" id="8302325">;</span>&nbsp;<span class="ident" id="8302327"><a href="/encoding/gob/encoder_test.go.html#8302305">err</a></span>&nbsp;<span class="op" id="8302331">!=</span>&nbsp;<span class="ident" id="8302334">nil</span>&nbsp;<span class="op" id="8302338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302343"><a href="/encoding/gob/encoder_test.go.html#8302162">t</a></span><span class="op" id="8302344">.</span><span class="ident" id="8302345">Error</span><span class="op" id="8302350">(</span><span class="string" id="8302351">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8302366">,</span>&nbsp;<span class="ident" id="8302368"><a href="/encoding/gob/encoder_test.go.html#8302305">err</a></span><span class="op" id="8302371">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302381">for</span>&nbsp;<span class="ident" id="8302385">i</span>&nbsp;<span class="op" id="8302387">:=</span>&nbsp;<span class="num" id="8302390">0</span><span class="op" id="8302391">;</span>&nbsp;<span class="ident" id="8302393"><a href="/encoding/gob/encoder_test.go.html#8302385">i</a></span>&nbsp;<span class="op" id="8302395">&lt;</span>&nbsp;<span class="ident" id="8302397"><a href="/encoding/gob/encoder_test.go.html#8302231">count</a></span><span class="op" id="8302402">;</span>&nbsp;<span class="ident" id="8302404"><a href="/encoding/gob/encoder_test.go.html#8302385">i</a></span><span class="op" id="8302405">++</span>&nbsp;<span class="op" id="8302408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302412">dec</span>&nbsp;<span class="op" id="8302416">:=</span>&nbsp;<span class="ident" id="8302419"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8302429">(</span><span class="ident" id="8302430"><a href="/encoding/gob/encoder_test.go.html#8302179">b</a></span><span class="op" id="8302431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302435">var</span>&nbsp;<span class="ident" id="8302439">s</span>&nbsp;<span class="builtintype" id="8302441">string</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302450">if</span>&nbsp;<span class="ident" id="8302453">err</span>&nbsp;<span class="op" id="8302457">:=</span>&nbsp;<span class="ident" id="8302460"><a href="/encoding/gob/encoder_test.go.html#8302412">dec</a></span><span class="op" id="8302463">.</span><span class="ident" id="8302464">Decode</span><span class="op" id="8302470">(</span><span class="op" id="8302471">&amp;</span><span class="ident" id="8302472"><a href="/encoding/gob/encoder_test.go.html#8302439">s</a></span><span class="op" id="8302473">)</span><span class="op" id="8302474">;</span>&nbsp;<span class="ident" id="8302476"><a href="/encoding/gob/encoder_test.go.html#8302453">err</a></span>&nbsp;<span class="op" id="8302480">!=</span>&nbsp;<span class="ident" id="8302483">nil</span>&nbsp;<span class="op" id="8302487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302492"><a href="/encoding/gob/encoder_test.go.html#8302162">t</a></span><span class="op" id="8302493">.</span><span class="ident" id="8302494">Fatal</span><span class="op" id="8302499">(</span><span class="string" id="8302500">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8302515">,</span>&nbsp;<span class="ident" id="8302517"><a href="/encoding/gob/encoder_test.go.html#8302453">err</a></span><span class="op" id="8302520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302528">if</span>&nbsp;<span class="ident" id="8302531"><a href="/encoding/gob/encoder_test.go.html#8302439">s</a></span>&nbsp;<span class="op" id="8302533">!=</span>&nbsp;<span class="ident" id="8302536"><a href="/encoding/gob/encoder_test.go.html#8285772">fmt</a></span><span class="op" id="8302539">.</span><span class="ident" id="8302540">Sprintf</span><span class="op" id="8302547">(</span><span class="string" id="8302548">&#34;%d&#34;</span><span class="op" id="8302552">,</span>&nbsp;<span class="ident" id="8302554"><a href="/encoding/gob/encoder_test.go.html#8302385">i</a></span><span class="op" id="8302555">)</span>&nbsp;<span class="op" id="8302557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302562"><a href="/encoding/gob/encoder_test.go.html#8302162">t</a></span><span class="op" id="8302563">.</span><span class="ident" id="8302564">Fatalf</span><span class="op" id="8302570">(</span><span class="string" id="8302571">&#34;decode&nbsp;expected&nbsp;%d&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8302598">,</span>&nbsp;<span class="ident" id="8302600"><a href="/encoding/gob/encoder_test.go.html#8302385">i</a></span><span class="op" id="8302601">,</span>&nbsp;<span class="ident" id="8302603"><a href="/encoding/gob/encoder_test.go.html#8302439">s</a></span><span class="op" id="8302604">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8302611">}</span><br>
<span class="lineno"></span><span class="op" id="8302613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8302616">//&nbsp;Should&nbsp;be&nbsp;able&nbsp;to&nbsp;have&nbsp;unrepresentable&nbsp;fields&nbsp;(chan,&nbsp;func,&nbsp;*chan&nbsp;etc.);&nbsp;we&nbsp;just&nbsp;ignore&nbsp;them.</span><br>
<span class="lineno">740</span><span class="keyword" id="8302712">type</span>&nbsp;<span class="ident" id="8302717">Bug2</span>&nbsp;<span class="keyword" id="8302722">struct</span>&nbsp;<span class="op" id="8302729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302732">A</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8302736">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302741">C</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8302745">chan</span>&nbsp;<span class="builtintype" id="8302750">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302755">CP</span>&nbsp;&nbsp;<span class="op" id="8302759">*</span><span class="keyword" id="8302760">chan</span>&nbsp;<span class="builtintype" id="8302765">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302770">F</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8302774">func</span><span class="op" id="8302778">(</span><span class="op" id="8302779">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302782">FPP</span>&nbsp;<span class="op" id="8302786">*</span><span class="op" id="8302787">*</span><span class="keyword" id="8302788">func</span><span class="op" id="8302792">(</span><span class="op" id="8302793">)</span><br>
<span class="lineno"></span><span class="op" id="8302795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8302798">func</span>&nbsp;<span class="ident" id="8302803">TestChanFuncIgnored</span><span class="op" id="8302822">(</span><span class="ident" id="8302823">t</span>&nbsp;<span class="op" id="8302825">*</span><span class="ident" id="8302826"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8302833">.</span><span class="ident" id="8302834">T</span><span class="op" id="8302835">)</span>&nbsp;<span class="op" id="8302837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302840">c</span>&nbsp;<span class="op" id="8302842">:=</span>&nbsp;<span class="builtinfunc" id="8302845">make</span><span class="op" id="8302849">(</span><span class="keyword" id="8302850">chan</span>&nbsp;<span class="builtintype" id="8302855">int</span><span class="op" id="8302858">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302861">f</span>&nbsp;<span class="op" id="8302863">:=</span>&nbsp;<span class="keyword" id="8302866">func</span><span class="op" id="8302870">(</span><span class="op" id="8302871">)</span>&nbsp;<span class="op" id="8302873">{</span><span class="op" id="8302874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302877">fp</span>&nbsp;<span class="op" id="8302880">:=</span>&nbsp;<span class="op" id="8302883">&amp;</span><span class="ident" id="8302884"><a href="/encoding/gob/encoder_test.go.html#8302861">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302887">b0</span>&nbsp;<span class="op" id="8302890">:=</span>&nbsp;<span class="ident" id="8302893"><a href="/encoding/gob/encoder_test.go.html#8302717">Bug2</a></span><span class="op" id="8302897">{</span><span class="num" id="8302898">23</span><span class="op" id="8302900">,</span>&nbsp;<span class="ident" id="8302902"><a href="/encoding/gob/encoder_test.go.html#8302840">c</a></span><span class="op" id="8302903">,</span>&nbsp;<span class="op" id="8302905">&amp;</span><span class="ident" id="8302906"><a href="/encoding/gob/encoder_test.go.html#8302840">c</a></span><span class="op" id="8302907">,</span>&nbsp;<span class="ident" id="8302909"><a href="/encoding/gob/encoder_test.go.html#8302861">f</a></span><span class="op" id="8302910">,</span>&nbsp;<span class="op" id="8302912">&amp;</span><span class="ident" id="8302913"><a href="/encoding/gob/encoder_test.go.html#8302877">fp</a></span><span class="op" id="8302915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302918">var</span>&nbsp;<span class="ident" id="8302922">buf</span>&nbsp;<span class="ident" id="8302926"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8302931">.</span><span class="ident" id="8302932">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8302940">enc</span>&nbsp;<span class="op" id="8302944">:=</span>&nbsp;<span class="ident" id="8302947"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8302957">(</span><span class="op" id="8302958">&amp;</span><span class="ident" id="8302959"><a href="/encoding/gob/encoder_test.go.html#8302922">buf</a></span><span class="op" id="8302962">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8302965">if</span>&nbsp;<span class="ident" id="8302968">err</span>&nbsp;<span class="op" id="8302972">:=</span>&nbsp;<span class="ident" id="8302975"><a href="/encoding/gob/encoder_test.go.html#8302940">enc</a></span><span class="op" id="8302978">.</span><span class="ident" id="8302979">Encode</span><span class="op" id="8302985">(</span><span class="ident" id="8302986"><a href="/encoding/gob/encoder_test.go.html#8302887">b0</a></span><span class="op" id="8302988">)</span><span class="op" id="8302989">;</span>&nbsp;<span class="ident" id="8302991"><a href="/encoding/gob/encoder_test.go.html#8302968">err</a></span>&nbsp;<span class="op" id="8302995">!=</span>&nbsp;<span class="ident" id="8302998">nil</span>&nbsp;<span class="op" id="8303002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303006"><a href="/encoding/gob/encoder_test.go.html#8302823">t</a></span><span class="op" id="8303007">.</span><span class="ident" id="8303008">Fatal</span><span class="op" id="8303013">(</span><span class="string" id="8303014">&#34;error&nbsp;encoding:&#34;</span><span class="op" id="8303031">,</span>&nbsp;<span class="ident" id="8303033"><a href="/encoding/gob/encoder_test.go.html#8302968">err</a></span><span class="op" id="8303036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303042">var</span>&nbsp;<span class="ident" id="8303046">b1</span>&nbsp;<span class="ident" id="8303049"><a href="/encoding/gob/encoder_test.go.html#8302717">Bug2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303055">err</span>&nbsp;<span class="op" id="8303059">:=</span>&nbsp;<span class="ident" id="8303062"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8303072">(</span><span class="op" id="8303073">&amp;</span><span class="ident" id="8303074"><a href="/encoding/gob/encoder_test.go.html#8302922">buf</a></span><span class="op" id="8303077">)</span><span class="op" id="8303078">.</span><span class="ident" id="8303079">Decode</span><span class="op" id="8303085">(</span><span class="op" id="8303086">&amp;</span><span class="ident" id="8303087"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303089">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303092">if</span>&nbsp;<span class="ident" id="8303095"><a href="/encoding/gob/encoder_test.go.html#8303055">err</a></span>&nbsp;<span class="op" id="8303099">!=</span>&nbsp;<span class="ident" id="8303102">nil</span>&nbsp;<span class="op" id="8303106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303110"><a href="/encoding/gob/encoder_test.go.html#8302823">t</a></span><span class="op" id="8303111">.</span><span class="ident" id="8303112">Fatal</span><span class="op" id="8303117">(</span><span class="string" id="8303118">&#34;decode:&#34;</span><span class="op" id="8303127">,</span>&nbsp;<span class="ident" id="8303129"><a href="/encoding/gob/encoder_test.go.html#8303055">err</a></span><span class="op" id="8303132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303138">if</span>&nbsp;<span class="ident" id="8303141"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303143">.</span><span class="ident" id="8303144">A</span>&nbsp;<span class="op" id="8303146">!=</span>&nbsp;<span class="ident" id="8303149"><a href="/encoding/gob/encoder_test.go.html#8302887">b0</a></span><span class="op" id="8303151">.</span><span class="ident" id="8303152">A</span>&nbsp;<span class="op" id="8303154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303158"><a href="/encoding/gob/encoder_test.go.html#8302823">t</a></span><span class="op" id="8303159">.</span><span class="ident" id="8303160">Fatalf</span><span class="op" id="8303166">(</span><span class="string" id="8303167">&#34;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8303183">,</span>&nbsp;<span class="ident" id="8303185"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303187">.</span><span class="ident" id="8303188">A</span><span class="op" id="8303189">,</span>&nbsp;<span class="ident" id="8303191"><a href="/encoding/gob/encoder_test.go.html#8302887">b0</a></span><span class="op" id="8303193">.</span><span class="ident" id="8303194">A</span><span class="op" id="8303195">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303201">if</span>&nbsp;<span class="ident" id="8303204"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303206">.</span><span class="ident" id="8303207">C</span>&nbsp;<span class="op" id="8303209">!=</span>&nbsp;<span class="ident" id="8303212">nil</span>&nbsp;<span class="op" id="8303216">||</span>&nbsp;<span class="ident" id="8303219"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303221">.</span><span class="ident" id="8303222">CP</span>&nbsp;<span class="op" id="8303225">!=</span>&nbsp;<span class="ident" id="8303228">nil</span>&nbsp;<span class="op" id="8303232">||</span>&nbsp;<span class="ident" id="8303235"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303237">.</span><span class="ident" id="8303238">F</span>&nbsp;<span class="op" id="8303240">!=</span>&nbsp;<span class="ident" id="8303243">nil</span>&nbsp;<span class="op" id="8303247">||</span>&nbsp;<span class="ident" id="8303250"><a href="/encoding/gob/encoder_test.go.html#8303046">b1</a></span><span class="op" id="8303252">.</span><span class="ident" id="8303253">FPP</span>&nbsp;<span class="op" id="8303257">!=</span>&nbsp;<span class="ident" id="8303260">nil</span>&nbsp;<span class="op" id="8303264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303268"><a href="/encoding/gob/encoder_test.go.html#8302823">t</a></span><span class="op" id="8303269">.</span><span class="ident" id="8303270">Fatal</span><span class="op" id="8303275">(</span><span class="string" id="8303276">&#34;unexpected&nbsp;value&nbsp;for&nbsp;chan&nbsp;or&nbsp;func&#34;</span><span class="op" id="8303311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303314">}</span><br>
<span class="lineno"></span><span class="op" id="8303316">}</span><br>
<span class="lineno">770</span><br>
<span class="lineno"></span><span class="keyword" id="8303319">func</span>&nbsp;<span class="ident" id="8303324">TestSliceIncompatibility</span><span class="op" id="8303348">(</span><span class="ident" id="8303349">t</span>&nbsp;<span class="op" id="8303351">*</span><span class="ident" id="8303352"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8303359">.</span><span class="ident" id="8303360">T</span><span class="op" id="8303361">)</span>&nbsp;<span class="op" id="8303363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303366">var</span>&nbsp;<span class="ident" id="8303370">in</span>&nbsp;<span class="op" id="8303373">=</span>&nbsp;<span class="op" id="8303375">[</span><span class="op" id="8303376">]</span><span class="builtintype" id="8303377">byte</span><span class="op" id="8303381">{</span><span class="num" id="8303382">1</span><span class="op" id="8303383">,</span>&nbsp;<span class="num" id="8303385">2</span><span class="op" id="8303386">,</span>&nbsp;<span class="num" id="8303388">3</span><span class="op" id="8303389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303392">var</span>&nbsp;<span class="ident" id="8303396">out</span>&nbsp;<span class="op" id="8303400">[</span><span class="op" id="8303401">]</span><span class="builtintype" id="8303402">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303407">if</span>&nbsp;<span class="ident" id="8303410">err</span>&nbsp;<span class="op" id="8303414">:=</span>&nbsp;<span class="ident" id="8303417"><a href="/encoding/gob/encoder_test.go.html#8290580">encAndDec</a></span><span class="op" id="8303426">(</span><span class="ident" id="8303427"><a href="/encoding/gob/encoder_test.go.html#8303370">in</a></span><span class="op" id="8303429">,</span>&nbsp;<span class="op" id="8303431">&amp;</span><span class="ident" id="8303432"><a href="/encoding/gob/encoder_test.go.html#8303396">out</a></span><span class="op" id="8303435">)</span><span class="op" id="8303436">;</span>&nbsp;<span class="ident" id="8303438"><a href="/encoding/gob/encoder_test.go.html#8303410">err</a></span>&nbsp;<span class="op" id="8303442">==</span>&nbsp;<span class="ident" id="8303445">nil</span>&nbsp;<span class="op" id="8303449">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303453"><a href="/encoding/gob/encoder_test.go.html#8303349">t</a></span><span class="op" id="8303454">.</span><span class="ident" id="8303455">Error</span><span class="op" id="8303460">(</span><span class="string" id="8303461">&#34;expected&nbsp;compatibility&nbsp;error&#34;</span><span class="op" id="8303491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303494">}</span><br>
<span class="lineno"></span><span class="op" id="8303496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8303499">//&nbsp;Mutually&nbsp;recursive&nbsp;slices&nbsp;of&nbsp;structs&nbsp;caused&nbsp;problems.</span><br>
<span class="lineno">780</span><span class="keyword" id="8303556">type</span>&nbsp;<span class="ident" id="8303561">Bug3</span>&nbsp;<span class="keyword" id="8303566">struct</span>&nbsp;<span class="op" id="8303573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303576">Num</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8303585">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303590">Children</span>&nbsp;<span class="op" id="8303599">[</span><span class="op" id="8303600">]</span><span class="op" id="8303601">*</span><span class="ident" id="8303602"><a href="/encoding/gob/encoder_test.go.html#8303561">Bug3</a></span><br>
<span class="lineno"></span><span class="op" id="8303607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span><span class="keyword" id="8303610">func</span>&nbsp;<span class="ident" id="8303615">TestGobPtrSlices</span><span class="op" id="8303631">(</span><span class="ident" id="8303632">t</span>&nbsp;<span class="op" id="8303634">*</span><span class="ident" id="8303635"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8303642">.</span><span class="ident" id="8303643">T</span><span class="op" id="8303644">)</span>&nbsp;<span class="op" id="8303646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303649">in</span>&nbsp;<span class="op" id="8303652">:=</span>&nbsp;<span class="op" id="8303655">[</span><span class="op" id="8303656">]</span><span class="op" id="8303657">*</span><span class="ident" id="8303658"><a href="/encoding/gob/encoder_test.go.html#8303561">Bug3</a></span><span class="op" id="8303662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303666">{</span><span class="num" id="8303667">1</span><span class="op" id="8303668">,</span>&nbsp;<span class="ident" id="8303670">nil</span><span class="op" id="8303673">}</span><span class="op" id="8303674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303678">{</span><span class="num" id="8303679">2</span><span class="op" id="8303680">,</span>&nbsp;<span class="ident" id="8303682">nil</span><span class="op" id="8303685">}</span><span class="op" id="8303686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303689">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303692">b</span>&nbsp;<span class="op" id="8303694">:=</span>&nbsp;<span class="builtinfunc" id="8303697">new</span><span class="op" id="8303700">(</span><span class="ident" id="8303701"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8303706">.</span><span class="ident" id="8303707">Buffer</span><span class="op" id="8303713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303716">err</span>&nbsp;<span class="op" id="8303720">:=</span>&nbsp;<span class="ident" id="8303723"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8303733">(</span><span class="ident" id="8303734"><a href="/encoding/gob/encoder_test.go.html#8303692">b</a></span><span class="op" id="8303735">)</span><span class="op" id="8303736">.</span><span class="ident" id="8303737">Encode</span><span class="op" id="8303743">(</span><span class="op" id="8303744">&amp;</span><span class="ident" id="8303745"><a href="/encoding/gob/encoder_test.go.html#8303649">in</a></span><span class="op" id="8303747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303750">if</span>&nbsp;<span class="ident" id="8303753"><a href="/encoding/gob/encoder_test.go.html#8303716">err</a></span>&nbsp;<span class="op" id="8303757">!=</span>&nbsp;<span class="ident" id="8303760">nil</span>&nbsp;<span class="op" id="8303764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303768"><a href="/encoding/gob/encoder_test.go.html#8303632">t</a></span><span class="op" id="8303769">.</span><span class="ident" id="8303770">Fatal</span><span class="op" id="8303775">(</span><span class="string" id="8303776">&#34;encode:&#34;</span><span class="op" id="8303785">,</span>&nbsp;<span class="ident" id="8303787"><a href="/encoding/gob/encoder_test.go.html#8303716">err</a></span><span class="op" id="8303790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303793">}</span><br>
<span class="lineno">795</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303797">var</span>&nbsp;<span class="ident" id="8303801">out</span>&nbsp;<span class="op" id="8303805">[</span><span class="op" id="8303806">]</span><span class="op" id="8303807">*</span><span class="ident" id="8303808"><a href="/encoding/gob/encoder_test.go.html#8303561">Bug3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303814"><a href="/encoding/gob/encoder_test.go.html#8303716">err</a></span>&nbsp;<span class="op" id="8303818">=</span>&nbsp;<span class="ident" id="8303820"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8303830">(</span><span class="ident" id="8303831"><a href="/encoding/gob/encoder_test.go.html#8303692">b</a></span><span class="op" id="8303832">)</span><span class="op" id="8303833">.</span><span class="ident" id="8303834">Decode</span><span class="op" id="8303840">(</span><span class="op" id="8303841">&amp;</span><span class="ident" id="8303842"><a href="/encoding/gob/encoder_test.go.html#8303801">out</a></span><span class="op" id="8303845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303848">if</span>&nbsp;<span class="ident" id="8303851"><a href="/encoding/gob/encoder_test.go.html#8303716">err</a></span>&nbsp;<span class="op" id="8303855">!=</span>&nbsp;<span class="ident" id="8303858">nil</span>&nbsp;<span class="op" id="8303862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303866"><a href="/encoding/gob/encoder_test.go.html#8303632">t</a></span><span class="op" id="8303867">.</span><span class="ident" id="8303868">Fatal</span><span class="op" id="8303873">(</span><span class="string" id="8303874">&#34;decode:&#34;</span><span class="op" id="8303883">,</span>&nbsp;<span class="ident" id="8303885"><a href="/encoding/gob/encoder_test.go.html#8303716">err</a></span><span class="op" id="8303888">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303894">if</span>&nbsp;<span class="op" id="8303897">!</span><span class="ident" id="8303898"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8303905">.</span><span class="ident" id="8303906">DeepEqual</span><span class="op" id="8303915">(</span><span class="ident" id="8303916"><a href="/encoding/gob/encoder_test.go.html#8303649">in</a></span><span class="op" id="8303918">,</span>&nbsp;<span class="ident" id="8303920"><a href="/encoding/gob/encoder_test.go.html#8303801">out</a></span><span class="op" id="8303923">)</span>&nbsp;<span class="op" id="8303925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303929"><a href="/encoding/gob/encoder_test.go.html#8303632">t</a></span><span class="op" id="8303930">.</span><span class="ident" id="8303931">Fatalf</span><span class="op" id="8303937">(</span><span class="string" id="8303938">&#34;got&nbsp;%v;&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8303957">,</span>&nbsp;<span class="ident" id="8303959"><a href="/encoding/gob/encoder_test.go.html#8303801">out</a></span><span class="op" id="8303962">,</span>&nbsp;<span class="ident" id="8303964"><a href="/encoding/gob/encoder_test.go.html#8303649">in</a></span><span class="op" id="8303966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303969">}</span><br>
<span class="lineno"></span><span class="op" id="8303971">}</span><br>
<span class="lineno">805</span><br>
<span class="lineno"></span><span class="comment" id="8303974">//&nbsp;getDecEnginePtr&nbsp;cached&nbsp;engine&nbsp;for&nbsp;ut.base&nbsp;instead&nbsp;of&nbsp;ut.user&nbsp;so&nbsp;we&nbsp;passed</span><br>
<span class="lineno"></span><span class="comment" id="8304051">//&nbsp;a&nbsp;*map&nbsp;and&nbsp;then&nbsp;tried&nbsp;to&nbsp;reuse&nbsp;its&nbsp;engine&nbsp;to&nbsp;decode&nbsp;the&nbsp;inner&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="8304121">func</span>&nbsp;<span class="ident" id="8304126">TestPtrToMapOfMap</span><span class="op" id="8304143">(</span><span class="ident" id="8304144">t</span>&nbsp;<span class="op" id="8304146">*</span><span class="ident" id="8304147"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8304154">.</span><span class="ident" id="8304155">T</span><span class="op" id="8304156">)</span>&nbsp;<span class="op" id="8304158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304161"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8304169">(</span><span class="builtinfunc" id="8304170">make</span><span class="op" id="8304174">(</span><span class="keyword" id="8304175">map</span><span class="op" id="8304178">[</span><span class="builtintype" id="8304179">string</span><span class="op" id="8304185">]</span><span class="keyword" id="8304186">interface</span><span class="op" id="8304195">{</span><span class="op" id="8304196">}</span><span class="op" id="8304197">)</span><span class="op" id="8304198">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304201">subdata</span>&nbsp;<span class="op" id="8304209">:=</span>&nbsp;<span class="builtinfunc" id="8304212">make</span><span class="op" id="8304216">(</span><span class="keyword" id="8304217">map</span><span class="op" id="8304220">[</span><span class="builtintype" id="8304221">string</span><span class="op" id="8304227">]</span><span class="keyword" id="8304228">interface</span><span class="op" id="8304237">{</span><span class="op" id="8304238">}</span><span class="op" id="8304239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304242"><a href="/encoding/gob/encoder_test.go.html#8304201">subdata</a></span><span class="op" id="8304249">[</span><span class="string" id="8304250">&#34;bar&#34;</span><span class="op" id="8304255">]</span>&nbsp;<span class="op" id="8304257">=</span>&nbsp;<span class="string" id="8304259">&#34;baz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304266">data</span>&nbsp;<span class="op" id="8304271">:=</span>&nbsp;<span class="builtinfunc" id="8304274">make</span><span class="op" id="8304278">(</span><span class="keyword" id="8304279">map</span><span class="op" id="8304282">[</span><span class="builtintype" id="8304283">string</span><span class="op" id="8304289">]</span><span class="keyword" id="8304290">interface</span><span class="op" id="8304299">{</span><span class="op" id="8304300">}</span><span class="op" id="8304301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304304"><a href="/encoding/gob/encoder_test.go.html#8304266">data</a></span><span class="op" id="8304308">[</span><span class="string" id="8304309">&#34;foo&#34;</span><span class="op" id="8304314">]</span>&nbsp;<span class="op" id="8304316">=</span>&nbsp;<span class="ident" id="8304318"><a href="/encoding/gob/encoder_test.go.html#8304201">subdata</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304328">b</span>&nbsp;<span class="op" id="8304330">:=</span>&nbsp;<span class="builtinfunc" id="8304333">new</span><span class="op" id="8304336">(</span><span class="ident" id="8304337"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8304342">.</span><span class="ident" id="8304343">Buffer</span><span class="op" id="8304349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304352">err</span>&nbsp;<span class="op" id="8304356">:=</span>&nbsp;<span class="ident" id="8304359"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8304369">(</span><span class="ident" id="8304370"><a href="/encoding/gob/encoder_test.go.html#8304328">b</a></span><span class="op" id="8304371">)</span><span class="op" id="8304372">.</span><span class="ident" id="8304373">Encode</span><span class="op" id="8304379">(</span><span class="ident" id="8304380"><a href="/encoding/gob/encoder_test.go.html#8304266">data</a></span><span class="op" id="8304384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304387">if</span>&nbsp;<span class="ident" id="8304390"><a href="/encoding/gob/encoder_test.go.html#8304352">err</a></span>&nbsp;<span class="op" id="8304394">!=</span>&nbsp;<span class="ident" id="8304397">nil</span>&nbsp;<span class="op" id="8304401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304405"><a href="/encoding/gob/encoder_test.go.html#8304144">t</a></span><span class="op" id="8304406">.</span><span class="ident" id="8304407">Fatal</span><span class="op" id="8304412">(</span><span class="string" id="8304413">&#34;encode:&#34;</span><span class="op" id="8304422">,</span>&nbsp;<span class="ident" id="8304424"><a href="/encoding/gob/encoder_test.go.html#8304352">err</a></span><span class="op" id="8304427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304430">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304433">var</span>&nbsp;<span class="ident" id="8304437">newData</span>&nbsp;<span class="keyword" id="8304445">map</span><span class="op" id="8304448">[</span><span class="builtintype" id="8304449">string</span><span class="op" id="8304455">]</span><span class="keyword" id="8304456">interface</span><span class="op" id="8304465">{</span><span class="op" id="8304466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304469"><a href="/encoding/gob/encoder_test.go.html#8304352">err</a></span>&nbsp;<span class="op" id="8304473">=</span>&nbsp;<span class="ident" id="8304475"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8304485">(</span><span class="ident" id="8304486"><a href="/encoding/gob/encoder_test.go.html#8304328">b</a></span><span class="op" id="8304487">)</span><span class="op" id="8304488">.</span><span class="ident" id="8304489">Decode</span><span class="op" id="8304495">(</span><span class="op" id="8304496">&amp;</span><span class="ident" id="8304497"><a href="/encoding/gob/encoder_test.go.html#8304437">newData</a></span><span class="op" id="8304504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304507">if</span>&nbsp;<span class="ident" id="8304510"><a href="/encoding/gob/encoder_test.go.html#8304352">err</a></span>&nbsp;<span class="op" id="8304514">!=</span>&nbsp;<span class="ident" id="8304517">nil</span>&nbsp;<span class="op" id="8304521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304525"><a href="/encoding/gob/encoder_test.go.html#8304144">t</a></span><span class="op" id="8304526">.</span><span class="ident" id="8304527">Fatal</span><span class="op" id="8304532">(</span><span class="string" id="8304533">&#34;decode:&#34;</span><span class="op" id="8304542">,</span>&nbsp;<span class="ident" id="8304544"><a href="/encoding/gob/encoder_test.go.html#8304352">err</a></span><span class="op" id="8304547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304550">}</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304553">if</span>&nbsp;<span class="op" id="8304556">!</span><span class="ident" id="8304557"><a href="/encoding/gob/encoder_test.go.html#8285785">reflect</a></span><span class="op" id="8304564">.</span><span class="ident" id="8304565">DeepEqual</span><span class="op" id="8304574">(</span><span class="ident" id="8304575"><a href="/encoding/gob/encoder_test.go.html#8304266">data</a></span><span class="op" id="8304579">,</span>&nbsp;<span class="ident" id="8304581"><a href="/encoding/gob/encoder_test.go.html#8304437">newData</a></span><span class="op" id="8304588">)</span>&nbsp;<span class="op" id="8304590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304594"><a href="/encoding/gob/encoder_test.go.html#8304144">t</a></span><span class="op" id="8304595">.</span><span class="ident" id="8304596">Fatalf</span><span class="op" id="8304602">(</span><span class="string" id="8304603">&#34;expected&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8304623">,</span>&nbsp;<span class="ident" id="8304625"><a href="/encoding/gob/encoder_test.go.html#8304266">data</a></span><span class="op" id="8304629">,</span>&nbsp;<span class="ident" id="8304631"><a href="/encoding/gob/encoder_test.go.html#8304437">newData</a></span><span class="op" id="8304638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304641">}</span><br>
<span class="lineno"></span><span class="op" id="8304643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="comment" id="8304646">//&nbsp;A&nbsp;top-level&nbsp;nil&nbsp;pointer&nbsp;generates&nbsp;a&nbsp;panic&nbsp;with&nbsp;a&nbsp;helpful&nbsp;string-valued&nbsp;message.</span><br>
<span class="lineno"></span><span class="keyword" id="8304729">func</span>&nbsp;<span class="ident" id="8304734">TestTopLevelNilPointer</span><span class="op" id="8304756">(</span><span class="ident" id="8304757">t</span>&nbsp;<span class="op" id="8304759">*</span><span class="ident" id="8304760"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8304767">.</span><span class="ident" id="8304768">T</span><span class="op" id="8304769">)</span>&nbsp;<span class="op" id="8304771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304774">errMsg</span>&nbsp;<span class="op" id="8304781">:=</span>&nbsp;<span class="ident" id="8304784"><a href="/encoding/gob/encoder_test.go.html#8304987">topLevelNilPanic</a></span><span class="op" id="8304800">(</span><span class="ident" id="8304801"><a href="/encoding/gob/encoder_test.go.html#8304757">t</a></span><span class="op" id="8304802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304805">if</span>&nbsp;<span class="ident" id="8304808"><a href="/encoding/gob/encoder_test.go.html#8304774">errMsg</a></span>&nbsp;<span class="op" id="8304815">==</span>&nbsp;<span class="string" id="8304818">&#34;&#34;</span>&nbsp;<span class="op" id="8304821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304825"><a href="/encoding/gob/encoder_test.go.html#8304757">t</a></span><span class="op" id="8304826">.</span><span class="ident" id="8304827">Fatal</span><span class="op" id="8304832">(</span><span class="string" id="8304833">&#34;top-level&nbsp;nil&nbsp;pointer&nbsp;did&nbsp;not&nbsp;panic&#34;</span><span class="op" id="8304870">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304876">if</span>&nbsp;<span class="op" id="8304879">!</span><span class="ident" id="8304880"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8304887">.</span><span class="ident" id="8304888">Contains</span><span class="op" id="8304896">(</span><span class="ident" id="8304897"><a href="/encoding/gob/encoder_test.go.html#8304774">errMsg</a></span><span class="op" id="8304903">,</span>&nbsp;<span class="string" id="8304905">&#34;nil&nbsp;pointer&#34;</span><span class="op" id="8304918">)</span>&nbsp;<span class="op" id="8304920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304924"><a href="/encoding/gob/encoder_test.go.html#8304757">t</a></span><span class="op" id="8304925">.</span><span class="ident" id="8304926">Fatal</span><span class="op" id="8304931">(</span><span class="string" id="8304932">&#34;expected&nbsp;nil&nbsp;pointer&nbsp;error,&nbsp;got:&#34;</span><span class="op" id="8304966">,</span>&nbsp;<span class="ident" id="8304968"><a href="/encoding/gob/encoder_test.go.html#8304774">errMsg</a></span><span class="op" id="8304974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304977">}</span><br>
<span class="lineno"></span><span class="op" id="8304979">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="8304982">func</span>&nbsp;<span class="ident" id="8304987">topLevelNilPanic</span><span class="op" id="8305003">(</span><span class="ident" id="8305004">t</span>&nbsp;<span class="op" id="8305006">*</span><span class="ident" id="8305007"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8305014">.</span><span class="ident" id="8305015">T</span><span class="op" id="8305016">)</span>&nbsp;<span class="op" id="8305018">(</span><span class="ident" id="8305019">panicErr</span>&nbsp;<span class="builtintype" id="8305028">string</span><span class="op" id="8305034">)</span>&nbsp;<span class="op" id="8305036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305039">defer</span>&nbsp;<span class="keyword" id="8305045">func</span><span class="op" id="8305049">(</span><span class="op" id="8305050">)</span>&nbsp;<span class="op" id="8305052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305056">e</span>&nbsp;<span class="op" id="8305058">:=</span>&nbsp;<span class="builtinfunc" id="8305061">recover</span><span class="op" id="8305068">(</span><span class="op" id="8305069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305073">if</span>&nbsp;<span class="ident" id="8305076">err</span><span class="op" id="8305079">,</span>&nbsp;<span class="ident" id="8305081">ok</span>&nbsp;<span class="op" id="8305084">:=</span>&nbsp;<span class="ident" id="8305087"><a href="/encoding/gob/encoder_test.go.html#8305056">e</a></span><span class="op" id="8305088">.</span><span class="op" id="8305089">(</span><span class="builtintype" id="8305090">string</span><span class="op" id="8305096">)</span><span class="op" id="8305097">;</span>&nbsp;<span class="ident" id="8305099"><a href="/encoding/gob/encoder_test.go.html#8305081">ok</a></span>&nbsp;<span class="op" id="8305102">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305107"><a href="/encoding/gob/encoder_test.go.html#8305019">panicErr</a></span>&nbsp;<span class="op" id="8305116">=</span>&nbsp;<span class="ident" id="8305118"><a href="/encoding/gob/encoder_test.go.html#8305076">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305127">}</span><span class="op" id="8305128">(</span><span class="op" id="8305129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305132">var</span>&nbsp;<span class="ident" id="8305136">ip</span>&nbsp;<span class="op" id="8305139">*</span><span class="builtintype" id="8305140">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305145">buf</span>&nbsp;<span class="op" id="8305149">:=</span>&nbsp;<span class="builtinfunc" id="8305152">new</span><span class="op" id="8305155">(</span><span class="ident" id="8305156"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8305161">.</span><span class="ident" id="8305162">Buffer</span><span class="op" id="8305168">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305171">if</span>&nbsp;<span class="ident" id="8305174">err</span>&nbsp;<span class="op" id="8305178">:=</span>&nbsp;<span class="ident" id="8305181"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8305191">(</span><span class="ident" id="8305192"><a href="/encoding/gob/encoder_test.go.html#8305145">buf</a></span><span class="op" id="8305195">)</span><span class="op" id="8305196">.</span><span class="ident" id="8305197">Encode</span><span class="op" id="8305203">(</span><span class="ident" id="8305204"><a href="/encoding/gob/encoder_test.go.html#8305136">ip</a></span><span class="op" id="8305206">)</span><span class="op" id="8305207">;</span>&nbsp;<span class="ident" id="8305209"><a href="/encoding/gob/encoder_test.go.html#8305174">err</a></span>&nbsp;<span class="op" id="8305213">!=</span>&nbsp;<span class="ident" id="8305216">nil</span>&nbsp;<span class="op" id="8305220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305224"><a href="/encoding/gob/encoder_test.go.html#8305004">t</a></span><span class="op" id="8305225">.</span><span class="ident" id="8305226">Fatal</span><span class="op" id="8305231">(</span><span class="string" id="8305232">&#34;error&nbsp;in&nbsp;encode:&#34;</span><span class="op" id="8305250">,</span>&nbsp;<span class="ident" id="8305252"><a href="/encoding/gob/encoder_test.go.html#8305174">err</a></span><span class="op" id="8305255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305261">return</span><br>
<span class="lineno"></span><span class="op" id="8305268">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span><span class="keyword" id="8305271">func</span>&nbsp;<span class="ident" id="8305276">TestNilPointerInsideInterface</span><span class="op" id="8305305">(</span><span class="ident" id="8305306">t</span>&nbsp;<span class="op" id="8305308">*</span><span class="ident" id="8305309"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8305316">.</span><span class="ident" id="8305317">T</span><span class="op" id="8305318">)</span>&nbsp;<span class="op" id="8305320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305323">var</span>&nbsp;<span class="ident" id="8305327">ip</span>&nbsp;<span class="op" id="8305330">*</span><span class="builtintype" id="8305331">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305336">si</span>&nbsp;<span class="op" id="8305339">:=</span>&nbsp;<span class="keyword" id="8305342">struct</span>&nbsp;<span class="op" id="8305349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305353">I</span>&nbsp;<span class="keyword" id="8305355">interface</span><span class="op" id="8305364">{</span><span class="op" id="8305365">}</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305368">}</span><span class="op" id="8305369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305373">I</span><span class="op" id="8305374">:</span>&nbsp;<span class="ident" id="8305376"><a href="/encoding/gob/encoder_test.go.html#8305327">ip</a></span><span class="op" id="8305378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305384">buf</span>&nbsp;<span class="op" id="8305388">:=</span>&nbsp;<span class="builtinfunc" id="8305391">new</span><span class="op" id="8305394">(</span><span class="ident" id="8305395"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8305400">.</span><span class="ident" id="8305401">Buffer</span><span class="op" id="8305407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305410">err</span>&nbsp;<span class="op" id="8305414">:=</span>&nbsp;<span class="ident" id="8305417"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8305427">(</span><span class="ident" id="8305428"><a href="/encoding/gob/encoder_test.go.html#8305384">buf</a></span><span class="op" id="8305431">)</span><span class="op" id="8305432">.</span><span class="ident" id="8305433">Encode</span><span class="op" id="8305439">(</span><span class="ident" id="8305440"><a href="/encoding/gob/encoder_test.go.html#8305336">si</a></span><span class="op" id="8305442">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305445">if</span>&nbsp;<span class="ident" id="8305448"><a href="/encoding/gob/encoder_test.go.html#8305410">err</a></span>&nbsp;<span class="op" id="8305452">==</span>&nbsp;<span class="ident" id="8305455">nil</span>&nbsp;<span class="op" id="8305459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305463"><a href="/encoding/gob/encoder_test.go.html#8305306">t</a></span><span class="op" id="8305464">.</span><span class="ident" id="8305465">Fatal</span><span class="op" id="8305470">(</span><span class="string" id="8305471">&#34;expected&nbsp;error,&nbsp;got&nbsp;none&#34;</span><span class="op" id="8305497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305503">errMsg</span>&nbsp;<span class="op" id="8305510">:=</span>&nbsp;<span class="ident" id="8305513"><a href="/encoding/gob/encoder_test.go.html#8305410">err</a></span><span class="op" id="8305516">.</span><span class="ident" id="8305517">Error</span><span class="op" id="8305522">(</span><span class="op" id="8305523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8305526">if</span>&nbsp;<span class="op" id="8305529">!</span><span class="ident" id="8305530"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8305537">.</span><span class="ident" id="8305538">Contains</span><span class="op" id="8305546">(</span><span class="ident" id="8305547"><a href="/encoding/gob/encoder_test.go.html#8305503">errMsg</a></span><span class="op" id="8305553">,</span>&nbsp;<span class="string" id="8305555">&#34;nil&nbsp;pointer&#34;</span><span class="op" id="8305568">)</span>&nbsp;<span class="op" id="8305570">||</span>&nbsp;<span class="op" id="8305573">!</span><span class="ident" id="8305574"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8305581">.</span><span class="ident" id="8305582">Contains</span><span class="op" id="8305590">(</span><span class="ident" id="8305591"><a href="/encoding/gob/encoder_test.go.html#8305503">errMsg</a></span><span class="op" id="8305597">,</span>&nbsp;<span class="string" id="8305599">&#34;interface&#34;</span><span class="op" id="8305610">)</span>&nbsp;<span class="op" id="8305612">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305616"><a href="/encoding/gob/encoder_test.go.html#8305306">t</a></span><span class="op" id="8305617">.</span><span class="ident" id="8305618">Fatal</span><span class="op" id="8305623">(</span><span class="string" id="8305624">&#34;expected&nbsp;error&nbsp;about&nbsp;nil&nbsp;pointer&nbsp;and&nbsp;interface,&nbsp;got:&#34;</span><span class="op" id="8305678">,</span>&nbsp;<span class="ident" id="8305680"><a href="/encoding/gob/encoder_test.go.html#8305503">errMsg</a></span><span class="op" id="8305686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8305689">}</span><br>
<span class="lineno"></span><span class="op" id="8305691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305694">type</span>&nbsp;<span class="ident" id="8305699">Bug4Public</span>&nbsp;<span class="keyword" id="8305710">struct</span>&nbsp;<span class="op" id="8305717">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305720">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8305727">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305735">Secret</span>&nbsp;<span class="ident" id="8305742"><a href="/encoding/gob/encoder_test.go.html#8305761">Bug4Secret</a></span><br>
<span class="lineno"></span><span class="op" id="8305753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8305756">type</span>&nbsp;<span class="ident" id="8305761">Bug4Secret</span>&nbsp;<span class="keyword" id="8305772">struct</span>&nbsp;<span class="op" id="8305779">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305782">a</span>&nbsp;<span class="builtintype" id="8305784">int</span>&nbsp;<span class="comment" id="8305788">//&nbsp;error:&nbsp;no&nbsp;exported&nbsp;fields.</span><br>
<span class="lineno"></span><span class="op" id="8305818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8305821">//&nbsp;Test&nbsp;that&nbsp;a&nbsp;failed&nbsp;compilation&nbsp;doesn&#39;t&nbsp;leave&nbsp;around&nbsp;an&nbsp;executable&nbsp;encoder.</span><br>
<span class="lineno"></span><span class="comment" id="8305899">//&nbsp;Issue&nbsp;3273.</span><br>
<span class="lineno">885</span><span class="keyword" id="8305914">func</span>&nbsp;<span class="ident" id="8305919">TestMutipleEncodingsOfBadType</span><span class="op" id="8305948">(</span><span class="ident" id="8305949">t</span>&nbsp;<span class="op" id="8305951">*</span><span class="ident" id="8305952"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8305959">.</span><span class="ident" id="8305960">T</span><span class="op" id="8305961">)</span>&nbsp;<span class="op" id="8305963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305966">x</span>&nbsp;<span class="op" id="8305968">:=</span>&nbsp;<span class="ident" id="8305971"><a href="/encoding/gob/encoder_test.go.html#8305699">Bug4Public</a></span><span class="op" id="8305981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8305985">Name</span><span class="op" id="8305989">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8305993">&#34;name&#34;</span><span class="op" id="8305999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306003">Secret</span><span class="op" id="8306009">:</span>&nbsp;<span class="ident" id="8306011"><a href="/encoding/gob/encoder_test.go.html#8305761">Bug4Secret</a></span><span class="op" id="8306021">{</span><span class="num" id="8306022">1</span><span class="op" id="8306023">}</span><span class="op" id="8306024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306027">}</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306030">buf</span>&nbsp;<span class="op" id="8306034">:=</span>&nbsp;<span class="builtinfunc" id="8306037">new</span><span class="op" id="8306040">(</span><span class="ident" id="8306041"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8306046">.</span><span class="ident" id="8306047">Buffer</span><span class="op" id="8306053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306056">enc</span>&nbsp;<span class="op" id="8306060">:=</span>&nbsp;<span class="ident" id="8306063"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8306073">(</span><span class="ident" id="8306074"><a href="/encoding/gob/encoder_test.go.html#8306030">buf</a></span><span class="op" id="8306077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306080">err</span>&nbsp;<span class="op" id="8306084">:=</span>&nbsp;<span class="ident" id="8306087"><a href="/encoding/gob/encoder_test.go.html#8306056">enc</a></span><span class="op" id="8306090">.</span><span class="ident" id="8306091">Encode</span><span class="op" id="8306097">(</span><span class="ident" id="8306098"><a href="/encoding/gob/encoder_test.go.html#8305966">x</a></span><span class="op" id="8306099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306102">if</span>&nbsp;<span class="ident" id="8306105"><a href="/encoding/gob/encoder_test.go.html#8306080">err</a></span>&nbsp;<span class="op" id="8306109">==</span>&nbsp;<span class="ident" id="8306112">nil</span>&nbsp;<span class="op" id="8306116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306120"><a href="/encoding/gob/encoder_test.go.html#8305949">t</a></span><span class="op" id="8306121">.</span><span class="ident" id="8306122">Fatal</span><span class="op" id="8306127">(</span><span class="string" id="8306128">&#34;first&nbsp;encoding:&nbsp;expected&nbsp;error&#34;</span><span class="op" id="8306160">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306166"><a href="/encoding/gob/encoder_test.go.html#8306030">buf</a></span><span class="op" id="8306169">.</span><span class="ident" id="8306170">Reset</span><span class="op" id="8306175">(</span><span class="op" id="8306176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306179"><a href="/encoding/gob/encoder_test.go.html#8306056">enc</a></span>&nbsp;<span class="op" id="8306183">=</span>&nbsp;<span class="ident" id="8306185"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8306195">(</span><span class="ident" id="8306196"><a href="/encoding/gob/encoder_test.go.html#8306030">buf</a></span><span class="op" id="8306199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306202"><a href="/encoding/gob/encoder_test.go.html#8306080">err</a></span>&nbsp;<span class="op" id="8306206">=</span>&nbsp;<span class="ident" id="8306208"><a href="/encoding/gob/encoder_test.go.html#8306056">enc</a></span><span class="op" id="8306211">.</span><span class="ident" id="8306212">Encode</span><span class="op" id="8306218">(</span><span class="ident" id="8306219"><a href="/encoding/gob/encoder_test.go.html#8305966">x</a></span><span class="op" id="8306220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306223">if</span>&nbsp;<span class="ident" id="8306226"><a href="/encoding/gob/encoder_test.go.html#8306080">err</a></span>&nbsp;<span class="op" id="8306230">==</span>&nbsp;<span class="ident" id="8306233">nil</span>&nbsp;<span class="op" id="8306237">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306241"><a href="/encoding/gob/encoder_test.go.html#8305949">t</a></span><span class="op" id="8306242">.</span><span class="ident" id="8306243">Fatal</span><span class="op" id="8306248">(</span><span class="string" id="8306249">&#34;second&nbsp;encoding:&nbsp;expected&nbsp;error&#34;</span><span class="op" id="8306282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306288">if</span>&nbsp;<span class="op" id="8306291">!</span><span class="ident" id="8306292"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8306299">.</span><span class="ident" id="8306300">Contains</span><span class="op" id="8306308">(</span><span class="ident" id="8306309"><a href="/encoding/gob/encoder_test.go.html#8306080">err</a></span><span class="op" id="8306312">.</span><span class="ident" id="8306313">Error</span><span class="op" id="8306318">(</span><span class="op" id="8306319">)</span><span class="op" id="8306320">,</span>&nbsp;<span class="string" id="8306322">&#34;no&nbsp;exported&nbsp;fields&#34;</span><span class="op" id="8306342">)</span>&nbsp;<span class="op" id="8306344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306348"><a href="/encoding/gob/encoder_test.go.html#8305949">t</a></span><span class="op" id="8306349">.</span><span class="ident" id="8306350">Errorf</span><span class="op" id="8306356">(</span><span class="string" id="8306357">&#34;expected&nbsp;error&nbsp;about&nbsp;no&nbsp;exported&nbsp;fields;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8306406">,</span>&nbsp;<span class="ident" id="8306408"><a href="/encoding/gob/encoder_test.go.html#8306080">err</a></span><span class="op" id="8306411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306414">}</span><br>
<span class="lineno">905</span><span class="op" id="8306416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8306419">//&nbsp;There&nbsp;was&nbsp;an&nbsp;error&nbsp;check&nbsp;comparing&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;input&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8306490">//&nbsp;length&nbsp;of&nbsp;the&nbsp;slice&nbsp;being&nbsp;decoded.&nbsp;It&nbsp;was&nbsp;wrong&nbsp;because&nbsp;the&nbsp;next</span><br>
<span class="lineno"></span><span class="comment" id="8306558">//&nbsp;thing&nbsp;in&nbsp;the&nbsp;input&nbsp;might&nbsp;be&nbsp;a&nbsp;type&nbsp;definition,&nbsp;which&nbsp;would&nbsp;lead&nbsp;to</span><br>
<span class="lineno">910</span><span class="comment" id="8306628">//&nbsp;an&nbsp;incorrect&nbsp;length&nbsp;check.&nbsp;&nbsp;This&nbsp;test&nbsp;reproduces&nbsp;the&nbsp;corner&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8306698">type</span>&nbsp;<span class="ident" id="8306703">Z</span>&nbsp;<span class="keyword" id="8306705">struct</span>&nbsp;<span class="op" id="8306712">{</span><br>
<span class="lineno"></span><span class="op" id="8306714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="keyword" id="8306717">func</span>&nbsp;<span class="ident" id="8306722">Test29ElementSlice</span><span class="op" id="8306740">(</span><span class="ident" id="8306741">t</span>&nbsp;<span class="op" id="8306743">*</span><span class="ident" id="8306744"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8306751">.</span><span class="ident" id="8306752">T</span><span class="op" id="8306753">)</span>&nbsp;<span class="op" id="8306755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306758"><a href="/encoding/gob/type.go.html#5163647">Register</a></span><span class="op" id="8306766">(</span><span class="ident" id="8306767"><a href="/encoding/gob/encoder_test.go.html#8306703">Z</a></span><span class="op" id="8306768">{</span><span class="op" id="8306769">}</span><span class="op" id="8306770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306773">src</span>&nbsp;<span class="op" id="8306777">:=</span>&nbsp;<span class="builtinfunc" id="8306780">make</span><span class="op" id="8306784">(</span><span class="op" id="8306785">[</span><span class="op" id="8306786">]</span><span class="keyword" id="8306787">interface</span><span class="op" id="8306796">{</span><span class="op" id="8306797">}</span><span class="op" id="8306798">,</span>&nbsp;<span class="num" id="8306800">100</span><span class="op" id="8306803">)</span>&nbsp;<span class="comment" id="8306805">//&nbsp;Size&nbsp;needs&nbsp;to&nbsp;be&nbsp;bigger&nbsp;than&nbsp;size&nbsp;of&nbsp;type&nbsp;definition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306863">for</span>&nbsp;<span class="ident" id="8306867">i</span>&nbsp;<span class="op" id="8306869">:=</span>&nbsp;<span class="keyword" id="8306872">range</span>&nbsp;<span class="ident" id="8306878"><a href="/encoding/gob/encoder_test.go.html#8306773">src</a></span>&nbsp;<span class="op" id="8306882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306886"><a href="/encoding/gob/encoder_test.go.html#8306773">src</a></span><span class="op" id="8306889">[</span><span class="ident" id="8306890"><a href="/encoding/gob/encoder_test.go.html#8306867">i</a></span><span class="op" id="8306891">]</span>&nbsp;<span class="op" id="8306893">=</span>&nbsp;<span class="ident" id="8306895"><a href="/encoding/gob/encoder_test.go.html#8306703">Z</a></span><span class="op" id="8306896">{</span><span class="op" id="8306897">}</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8306900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306903">buf</span>&nbsp;<span class="op" id="8306907">:=</span>&nbsp;<span class="builtinfunc" id="8306910">new</span><span class="op" id="8306913">(</span><span class="ident" id="8306914"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8306919">.</span><span class="ident" id="8306920">Buffer</span><span class="op" id="8306926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306929">err</span>&nbsp;<span class="op" id="8306933">:=</span>&nbsp;<span class="ident" id="8306936"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8306946">(</span><span class="ident" id="8306947"><a href="/encoding/gob/encoder_test.go.html#8306903">buf</a></span><span class="op" id="8306950">)</span><span class="op" id="8306951">.</span><span class="ident" id="8306952">Encode</span><span class="op" id="8306958">(</span><span class="ident" id="8306959"><a href="/encoding/gob/encoder_test.go.html#8306773">src</a></span><span class="op" id="8306962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8306965">if</span>&nbsp;<span class="ident" id="8306968"><a href="/encoding/gob/encoder_test.go.html#8306929">err</a></span>&nbsp;<span class="op" id="8306972">!=</span>&nbsp;<span class="ident" id="8306975">nil</span>&nbsp;<span class="op" id="8306979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8306983"><a href="/encoding/gob/encoder_test.go.html#8306741">t</a></span><span class="op" id="8306984">.</span><span class="ident" id="8306985">Fatalf</span><span class="op" id="8306991">(</span><span class="string" id="8306992">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8307004">,</span>&nbsp;<span class="ident" id="8307006"><a href="/encoding/gob/encoder_test.go.html#8306929">err</a></span><span class="op" id="8307009">)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307013">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8307021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307025">var</span>&nbsp;<span class="ident" id="8307029">dst</span>&nbsp;<span class="op" id="8307033">[</span><span class="op" id="8307034">]</span><span class="keyword" id="8307035">interface</span><span class="op" id="8307044">{</span><span class="op" id="8307045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307048"><a href="/encoding/gob/encoder_test.go.html#8306929">err</a></span>&nbsp;<span class="op" id="8307052">=</span>&nbsp;<span class="ident" id="8307054"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8307064">(</span><span class="ident" id="8307065"><a href="/encoding/gob/encoder_test.go.html#8306903">buf</a></span><span class="op" id="8307068">)</span><span class="op" id="8307069">.</span><span class="ident" id="8307070">Decode</span><span class="op" id="8307076">(</span><span class="op" id="8307077">&amp;</span><span class="ident" id="8307078"><a href="/encoding/gob/encoder_test.go.html#8307029">dst</a></span><span class="op" id="8307081">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307084">if</span>&nbsp;<span class="ident" id="8307087"><a href="/encoding/gob/encoder_test.go.html#8306929">err</a></span>&nbsp;<span class="op" id="8307091">!=</span>&nbsp;<span class="ident" id="8307094">nil</span>&nbsp;<span class="op" id="8307098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307102"><a href="/encoding/gob/encoder_test.go.html#8306741">t</a></span><span class="op" id="8307103">.</span><span class="ident" id="8307104">Errorf</span><span class="op" id="8307110">(</span><span class="string" id="8307111">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8307123">,</span>&nbsp;<span class="ident" id="8307125"><a href="/encoding/gob/encoder_test.go.html#8306929">err</a></span><span class="op" id="8307128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307132">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8307140">}</span><br>
<span class="lineno"></span><span class="op" id="8307142">}</span><br>
<span class="lineno">935</span><br>
<span class="lineno"></span><span class="comment" id="8307145">//&nbsp;Don&#39;t&nbsp;crash,&nbsp;just&nbsp;give&nbsp;error&nbsp;when&nbsp;allocating&nbsp;a&nbsp;huge&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="8307207">//&nbsp;Issue&nbsp;8084.</span><br>
<span class="lineno"></span><span class="keyword" id="8307222">func</span>&nbsp;<span class="ident" id="8307227">TestErrorForHugeSlice</span><span class="op" id="8307248">(</span><span class="ident" id="8307249">t</span>&nbsp;<span class="op" id="8307251">*</span><span class="ident" id="8307252"><a href="/encoding/gob/encoder_test.go.html#8285807">testing</a></span><span class="op" id="8307259">.</span><span class="ident" id="8307260">T</span><span class="op" id="8307261">)</span>&nbsp;<span class="op" id="8307263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8307266">//&nbsp;Encode&nbsp;an&nbsp;int&nbsp;slice.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307291">buf</span>&nbsp;<span class="op" id="8307295">:=</span>&nbsp;<span class="builtinfunc" id="8307298">new</span><span class="op" id="8307301">(</span><span class="ident" id="8307302"><a href="/encoding/gob/encoder_test.go.html#8285763">bytes</a></span><span class="op" id="8307307">.</span><span class="ident" id="8307308">Buffer</span><span class="op" id="8307314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307317">slice</span>&nbsp;<span class="op" id="8307323">:=</span>&nbsp;<span class="op" id="8307326">[</span><span class="op" id="8307327">]</span><span class="builtintype" id="8307328">int</span><span class="op" id="8307331">{</span><span class="num" id="8307332">1</span><span class="op" id="8307333">,</span>&nbsp;<span class="num" id="8307335">1</span><span class="op" id="8307336">,</span>&nbsp;<span class="num" id="8307338">1</span><span class="op" id="8307339">,</span>&nbsp;<span class="num" id="8307341">1</span><span class="op" id="8307342">,</span>&nbsp;<span class="num" id="8307344">1</span><span class="op" id="8307345">,</span>&nbsp;<span class="num" id="8307347">1</span><span class="op" id="8307348">,</span>&nbsp;<span class="num" id="8307350">1</span><span class="op" id="8307351">,</span>&nbsp;<span class="num" id="8307353">1</span><span class="op" id="8307354">,</span>&nbsp;<span class="num" id="8307356">1</span><span class="op" id="8307357">,</span>&nbsp;<span class="num" id="8307359">1</span><span class="op" id="8307360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307363">err</span>&nbsp;<span class="op" id="8307367">:=</span>&nbsp;<span class="ident" id="8307370"><a href="/encoding/gob/encoder.go.html#5130396">NewEncoder</a></span><span class="op" id="8307380">(</span><span class="ident" id="8307381"><a href="/encoding/gob/encoder_test.go.html#8307291">buf</a></span><span class="op" id="8307384">)</span><span class="op" id="8307385">.</span><span class="ident" id="8307386">Encode</span><span class="op" id="8307392">(</span><span class="ident" id="8307393"><a href="/encoding/gob/encoder_test.go.html#8307317">slice</a></span><span class="op" id="8307398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307401">if</span>&nbsp;<span class="ident" id="8307404"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span>&nbsp;<span class="op" id="8307408">!=</span>&nbsp;<span class="ident" id="8307411">nil</span>&nbsp;<span class="op" id="8307415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307419"><a href="/encoding/gob/encoder_test.go.html#8307249">t</a></span><span class="op" id="8307420">.</span><span class="ident" id="8307421">Fatal</span><span class="op" id="8307426">(</span><span class="string" id="8307427">&#34;encode:&#34;</span><span class="op" id="8307436">,</span>&nbsp;<span class="ident" id="8307438"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span><span class="op" id="8307441">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8307444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8307447">//&nbsp;Reach&nbsp;into&nbsp;the&nbsp;buffer&nbsp;and&nbsp;smash&nbsp;the&nbsp;count&nbsp;to&nbsp;make&nbsp;the&nbsp;encoded&nbsp;slice&nbsp;very&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307530"><a href="/encoding/gob/encoder_test.go.html#8307291">buf</a></span><span class="op" id="8307533">.</span><span class="ident" id="8307534">Bytes</span><span class="op" id="8307539">(</span><span class="op" id="8307540">)</span><span class="op" id="8307541">[</span><span class="ident" id="8307542"><a href="/encoding/gob/encoder_test.go.html#8307291">buf</a></span><span class="op" id="8307545">.</span><span class="ident" id="8307546">Len</span><span class="op" id="8307549">(</span><span class="op" id="8307550">)</span><span class="op" id="8307551">-</span><span class="builtinfunc" id="8307552">len</span><span class="op" id="8307555">(</span><span class="ident" id="8307556"><a href="/encoding/gob/encoder_test.go.html#8307317">slice</a></span><span class="op" id="8307561">)</span><span class="op" id="8307562">-</span><span class="num" id="8307563">1</span><span class="op" id="8307564">]</span>&nbsp;<span class="op" id="8307566">=</span>&nbsp;<span class="num" id="8307568">0xfa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8307574">//&nbsp;Decode&nbsp;and&nbsp;see&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307600"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span>&nbsp;<span class="op" id="8307604">=</span>&nbsp;<span class="ident" id="8307606"><a href="/encoding/gob/decoder.go.html#5077981">NewDecoder</a></span><span class="op" id="8307616">(</span><span class="ident" id="8307617"><a href="/encoding/gob/encoder_test.go.html#8307291">buf</a></span><span class="op" id="8307620">)</span><span class="op" id="8307621">.</span><span class="ident" id="8307622">Decode</span><span class="op" id="8307628">(</span><span class="op" id="8307629">&amp;</span><span class="ident" id="8307630"><a href="/encoding/gob/encoder_test.go.html#8307317">slice</a></span><span class="op" id="8307635">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307638">if</span>&nbsp;<span class="ident" id="8307641"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span>&nbsp;<span class="op" id="8307645">==</span>&nbsp;<span class="ident" id="8307648">nil</span>&nbsp;<span class="op" id="8307652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307656"><a href="/encoding/gob/encoder_test.go.html#8307249">t</a></span><span class="op" id="8307657">.</span><span class="ident" id="8307658">Fatal</span><span class="op" id="8307663">(</span><span class="string" id="8307664">&#34;decode:&nbsp;no&nbsp;error&#34;</span><span class="op" id="8307682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8307685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8307688">if</span>&nbsp;<span class="op" id="8307691">!</span><span class="ident" id="8307692"><a href="/encoding/gob/encoder_test.go.html#8285796">strings</a></span><span class="op" id="8307699">.</span><span class="ident" id="8307700">Contains</span><span class="op" id="8307708">(</span><span class="ident" id="8307709"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span><span class="op" id="8307712">.</span><span class="ident" id="8307713">Error</span><span class="op" id="8307718">(</span><span class="op" id="8307719">)</span><span class="op" id="8307720">,</span>&nbsp;<span class="string" id="8307722">&#34;slice&nbsp;too&nbsp;big&#34;</span><span class="op" id="8307737">)</span>&nbsp;<span class="op" id="8307739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8307743"><a href="/encoding/gob/encoder_test.go.html#8307249">t</a></span><span class="op" id="8307744">.</span><span class="ident" id="8307745">Fatal</span><span class="op" id="8307750">(</span><span class="string" id="8307751">&#34;decode:&nbsp;expected&nbsp;slice&nbsp;too&nbsp;big&nbsp;error,&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8307797">,</span>&nbsp;<span class="ident" id="8307799"><a href="/encoding/gob/encoder_test.go.html#8307363">err</a></span><span class="op" id="8307802">.</span><span class="ident" id="8307803">Error</span><span class="op" id="8307808">(</span><span class="op" id="8307809">)</span><span class="op" id="8307810">)</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8307813">}</span><br>
<span class="lineno"></span><span class="op" id="8307815">}</span>
</div>
</body>
</html>
