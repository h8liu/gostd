<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6464255">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6464310">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6464364">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6464415">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6464483">//</span><br>
<span class="lineno"></span><span class="comment" id="6464486">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6464564">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6464639">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6464689">//</span><br>
<span class="lineno"></span><span class="comment" id="6464692">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6464716">//</span><br>
<span class="lineno"></span><span class="comment" id="6464719">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6464765">//</span><br>
<span class="lineno">15</span><span class="comment" id="6464768">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6464836">//</span><br>
<span class="lineno"></span><span class="comment" id="6464839">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6464918">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6464983">//</span><br>
<span class="lineno">20</span><span class="comment" id="6464986">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6465055">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6465125">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6465135">//</span><br>
<span class="lineno"></span><span class="comment" id="6465138">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6465153">//</span><br>
<span class="lineno"></span><span class="comment" id="6465156">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6465188">//</span><br>
<span class="lineno"></span><span class="comment" id="6465191">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6465216">//</span><br>
<span class="lineno">30</span><span class="comment" id="6465219">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6465256">//</span><br>
<span class="lineno"></span><span class="comment" id="6465259">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6465329">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6465372">//</span><br>
<span class="lineno">35</span><span class="comment" id="6465375">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6465422">//</span><br>
<span class="lineno"></span><span class="comment" id="6465425">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6465439">//</span><br>
<span class="lineno"></span><span class="comment" id="6465442">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6465488">//</span><br>
<span class="lineno"></span><span class="comment" id="6465491">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6465548">//</span><br>
<span class="lineno"></span><span class="comment" id="6465551">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6465566">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6465589">//</span><br>
<span class="lineno"></span><span class="comment" id="6465592">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6465606">//</span><br>
<span class="lineno"></span><span class="comment" id="6465609">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6465625">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6465650">package</span>&nbsp;<span class="ident" id="6465658">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6465663">import</span>&nbsp;<span class="op" id="6465670">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465673">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465682">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465691">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465701">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465708">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6465714">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6465724">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6465727">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6465775">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6465823">type</span>&nbsp;<span class="ident" id="6465828">ParseError</span>&nbsp;<span class="keyword" id="6465839">struct</span>&nbsp;<span class="op" id="6465846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465849">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6465856">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6465862">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465896">Column</span>&nbsp;<span class="builtintype" id="6465903">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6465909">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6465958">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6465965">error</span>&nbsp;<span class="comment" id="6465971">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6465991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6465994">func</span>&nbsp;<span class="op" id="6465999">(</span><span class="ident" id="6466000">e</span>&nbsp;<span class="op" id="6466002">*</span><span class="ident" id="6466003">ParseError</span><span class="op" id="6466013">)</span>&nbsp;<span class="ident" id="6466015">Error</span><span class="op" id="6466020">(</span><span class="op" id="6466021">)</span>&nbsp;<span class="builtintype" id="6466023">string</span>&nbsp;<span class="op" id="6466030">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6466033">return</span>&nbsp;<span class="ident" id="6466040">fmt</span><span class="op" id="6466043">.</span><span class="ident" id="6466044">Sprintf</span><span class="op" id="6466051">(</span><span class="string" id="6466052">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6466076">,</span>&nbsp;<span class="ident" id="6466078">e</span><span class="op" id="6466079">.</span><span class="ident" id="6466080">Line</span><span class="op" id="6466084">,</span>&nbsp;<span class="ident" id="6466086">e</span><span class="op" id="6466087">.</span><span class="ident" id="6466088">Column</span><span class="op" id="6466094">,</span>&nbsp;<span class="ident" id="6466096">e</span><span class="op" id="6466097">.</span><span class="ident" id="6466098">Err</span><span class="op" id="6466101">)</span><br>
<span class="lineno"></span><span class="op" id="6466103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6466106">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6466171">var</span>&nbsp;<span class="op" id="6466175">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466178">ErrTrailingComma</span>&nbsp;<span class="op" id="6466195">=</span>&nbsp;<span class="ident" id="6466197">errors</span><span class="op" id="6466203">.</span><span class="ident" id="6466204">New</span><span class="op" id="6466207">(</span><span class="string" id="6466208">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6466240">)</span>&nbsp;<span class="comment" id="6466242">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466261">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6466278">=</span>&nbsp;<span class="ident" id="6466280">errors</span><span class="op" id="6466286">.</span><span class="ident" id="6466287">New</span><span class="op" id="6466290">(</span><span class="string" id="6466291">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6466320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466323">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6466340">=</span>&nbsp;<span class="ident" id="6466342">errors</span><span class="op" id="6466348">.</span><span class="ident" id="6466349">New</span><span class="op" id="6466352">(</span><span class="string" id="6466353">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6466377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6466380">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6466397">=</span>&nbsp;<span class="ident" id="6466399">errors</span><span class="op" id="6466405">.</span><span class="ident" id="6466406">New</span><span class="op" id="6466409">(</span><span class="string" id="6466410">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6466442">)</span><br>
<span class="lineno"></span><span class="op" id="6466444">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6466447">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6466498">//</span><br>
<span class="lineno"></span><span class="comment" id="6466501">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6466577">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6466651">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6466685">//</span><br>
<span class="lineno"></span><span class="comment" id="6466688">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6466742">//</span><br>
<span class="lineno"></span><span class="comment" id="6466745">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6466818">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6466852">//</span><br>
<span class="lineno"></span><span class="comment" id="6466855">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6466919">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6466997">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6467070">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6467145">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6467203">//</span><br>
<span class="lineno"></span><span class="comment" id="6467206">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6467278">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6467329">//</span><br>
<span class="lineno"></span><span class="comment" id="6467332">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6467407">type</span>&nbsp;<span class="ident" id="6467412">Reader</span>&nbsp;<span class="keyword" id="6467419">struct</span>&nbsp;<span class="op" id="6467426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467429">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467446">rune</span>&nbsp;<span class="comment" id="6467451">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467497">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467514">rune</span>&nbsp;<span class="comment" id="6467519">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467559">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6467576">int</span>&nbsp;&nbsp;<span class="comment" id="6467581">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467622">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467639">bool</span>&nbsp;<span class="comment" id="6467644">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467666">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467683">bool</span>&nbsp;<span class="comment" id="6467688">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467734">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6467751">bool</span>&nbsp;<span class="comment" id="6467756">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467779">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467796">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467801">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6467818">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467823">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6467840">*</span><span class="ident" id="6467841">bufio</span><span class="op" id="6467846">.</span><span class="ident" id="6467847">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467855">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6467872">bytes</span><span class="op" id="6467877">.</span><span class="ident" id="6467878">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6467885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6467888">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6467941">func</span>&nbsp;<span class="ident" id="6467946">NewReader</span><span class="op" id="6467955">(</span><span class="ident" id="6467956">r</span>&nbsp;<span class="ident" id="6467958">io</span><span class="op" id="6467960">.</span><span class="ident" id="6467961">Reader</span><span class="op" id="6467967">)</span>&nbsp;<span class="op" id="6467969">*</span><span class="ident" id="6467970">Reader</span>&nbsp;<span class="op" id="6467977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6467980">return</span>&nbsp;<span class="op" id="6467987">&amp;</span><span class="ident" id="6467988">Reader</span><span class="op" id="6467994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6467998">Comma</span><span class="op" id="6468003">:</span>&nbsp;<span class="string" id="6468005">&#39;,&#39;</span><span class="op" id="6468008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468012">r</span><span class="op" id="6468013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6468019">bufio</span><span class="op" id="6468024">.</span><span class="ident" id="6468025">NewReader</span><span class="op" id="6468034">(</span><span class="ident" id="6468035">r</span><span class="op" id="6468036">)</span><span class="op" id="6468037">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468040">}</span><br>
<span class="lineno"></span><span class="op" id="6468042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6468045">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6468093">func</span>&nbsp;<span class="op" id="6468098">(</span><span class="ident" id="6468099">r</span>&nbsp;<span class="op" id="6468101">*</span><span class="ident" id="6468102">Reader</span><span class="op" id="6468108">)</span>&nbsp;<span class="builtintype" id="6468110">error</span><span class="op" id="6468115">(</span><span class="ident" id="6468116">err</span>&nbsp;<span class="builtintype" id="6468120">error</span><span class="op" id="6468125">)</span>&nbsp;<span class="builtintype" id="6468127">error</span>&nbsp;<span class="op" id="6468133">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468136">return</span>&nbsp;<span class="op" id="6468143">&amp;</span><span class="ident" id="6468144">ParseError</span><span class="op" id="6468154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468158">Line</span><span class="op" id="6468162">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6468166">r</span><span class="op" id="6468167">.</span><span class="ident" id="6468168">line</span><span class="op" id="6468172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468176">Column</span><span class="op" id="6468182">:</span>&nbsp;<span class="ident" id="6468184">r</span><span class="op" id="6468185">.</span><span class="ident" id="6468186">column</span><span class="op" id="6468192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468196">Err</span><span class="op" id="6468199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6468204">err</span><span class="op" id="6468207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468210">}</span><br>
<span class="lineno">130</span><span class="op" id="6468212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6468215">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6468292">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6468326">func</span>&nbsp;<span class="op" id="6468331">(</span><span class="ident" id="6468332">r</span>&nbsp;<span class="op" id="6468334">*</span><span class="ident" id="6468335">Reader</span><span class="op" id="6468341">)</span>&nbsp;<span class="ident" id="6468343">Read</span><span class="op" id="6468347">(</span><span class="op" id="6468348">)</span>&nbsp;<span class="op" id="6468350">(</span><span class="ident" id="6468351">record</span>&nbsp;<span class="op" id="6468358">[</span><span class="op" id="6468359">]</span><span class="builtintype" id="6468360">string</span><span class="op" id="6468366">,</span>&nbsp;<span class="ident" id="6468368">err</span>&nbsp;<span class="builtintype" id="6468372">error</span><span class="op" id="6468377">)</span>&nbsp;<span class="op" id="6468379">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468382">for</span>&nbsp;<span class="op" id="6468386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468390">record</span><span class="op" id="6468396">,</span>&nbsp;<span class="ident" id="6468398">err</span>&nbsp;<span class="op" id="6468402">=</span>&nbsp;<span class="ident" id="6468404">r</span><span class="op" id="6468405">.</span><span class="ident" id="6468406">parseRecord</span><span class="op" id="6468417">(</span><span class="op" id="6468418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468422">if</span>&nbsp;<span class="ident" id="6468425">record</span>&nbsp;<span class="op" id="6468432">!=</span>&nbsp;<span class="ident" id="6468435">nil</span>&nbsp;<span class="op" id="6468439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468444">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468452">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468456">if</span>&nbsp;<span class="ident" id="6468459">err</span>&nbsp;<span class="op" id="6468463">!=</span>&nbsp;<span class="ident" id="6468466">nil</span>&nbsp;<span class="op" id="6468470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468475">return</span>&nbsp;<span class="ident" id="6468482">nil</span><span class="op" id="6468485">,</span>&nbsp;<span class="ident" id="6468487">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468500">if</span>&nbsp;<span class="ident" id="6468503">r</span><span class="op" id="6468504">.</span><span class="ident" id="6468505">FieldsPerRecord</span>&nbsp;<span class="op" id="6468521">&gt;</span>&nbsp;<span class="num" id="6468523">0</span>&nbsp;<span class="op" id="6468525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468529">if</span>&nbsp;<span class="builtinfunc" id="6468532">len</span><span class="op" id="6468535">(</span><span class="ident" id="6468536">record</span><span class="op" id="6468542">)</span>&nbsp;<span class="op" id="6468544">!=</span>&nbsp;<span class="ident" id="6468547">r</span><span class="op" id="6468548">.</span><span class="ident" id="6468549">FieldsPerRecord</span>&nbsp;<span class="op" id="6468565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468570">r</span><span class="op" id="6468571">.</span><span class="ident" id="6468572">column</span>&nbsp;<span class="op" id="6468579">=</span>&nbsp;<span class="num" id="6468581">0</span>&nbsp;<span class="comment" id="6468583">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468615">return</span>&nbsp;<span class="ident" id="6468622">record</span><span class="op" id="6468628">,</span>&nbsp;<span class="ident" id="6468630">r</span><span class="op" id="6468631">.</span><span class="builtintype" id="6468632">error</span><span class="op" id="6468637">(</span><span class="ident" id="6468638">ErrFieldCount</span><span class="op" id="6468651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468655">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468658">}</span>&nbsp;<span class="keyword" id="6468660">else</span>&nbsp;<span class="keyword" id="6468665">if</span>&nbsp;<span class="ident" id="6468668">r</span><span class="op" id="6468669">.</span><span class="ident" id="6468670">FieldsPerRecord</span>&nbsp;<span class="op" id="6468686">==</span>&nbsp;<span class="num" id="6468689">0</span>&nbsp;<span class="op" id="6468691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6468695">r</span><span class="op" id="6468696">.</span><span class="ident" id="6468697">FieldsPerRecord</span>&nbsp;<span class="op" id="6468713">=</span>&nbsp;<span class="builtinfunc" id="6468715">len</span><span class="op" id="6468718">(</span><span class="ident" id="6468719">record</span><span class="op" id="6468725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6468728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6468731">return</span>&nbsp;<span class="ident" id="6468738">record</span><span class="op" id="6468744">,</span>&nbsp;<span class="ident" id="6468746">nil</span><br>
<span class="lineno"></span><span class="op" id="6468750">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6468753">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6468804">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6468841">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6468917">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6468995">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6469008">func</span>&nbsp;<span class="op" id="6469013">(</span><span class="ident" id="6469014">r</span>&nbsp;<span class="op" id="6469016">*</span><span class="ident" id="6469017">Reader</span><span class="op" id="6469023">)</span>&nbsp;<span class="ident" id="6469025">ReadAll</span><span class="op" id="6469032">(</span><span class="op" id="6469033">)</span>&nbsp;<span class="op" id="6469035">(</span><span class="ident" id="6469036">records</span>&nbsp;<span class="op" id="6469044">[</span><span class="op" id="6469045">]</span><span class="op" id="6469046">[</span><span class="op" id="6469047">]</span><span class="builtintype" id="6469048">string</span><span class="op" id="6469054">,</span>&nbsp;<span class="ident" id="6469056">err</span>&nbsp;<span class="builtintype" id="6469060">error</span><span class="op" id="6469065">)</span>&nbsp;<span class="op" id="6469067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469070">for</span>&nbsp;<span class="op" id="6469074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469078">record</span><span class="op" id="6469084">,</span>&nbsp;<span class="ident" id="6469086">err</span>&nbsp;<span class="op" id="6469090">:=</span>&nbsp;<span class="ident" id="6469093">r</span><span class="op" id="6469094">.</span><span class="ident" id="6469095">Read</span><span class="op" id="6469099">(</span><span class="op" id="6469100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469104">if</span>&nbsp;<span class="ident" id="6469107">err</span>&nbsp;<span class="op" id="6469111">==</span>&nbsp;<span class="ident" id="6469114">io</span><span class="op" id="6469116">.</span><span class="ident" id="6469117">EOF</span>&nbsp;<span class="op" id="6469121">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469126">return</span>&nbsp;<span class="ident" id="6469133">records</span><span class="op" id="6469140">,</span>&nbsp;<span class="ident" id="6469142">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469152">if</span>&nbsp;<span class="ident" id="6469155">err</span>&nbsp;<span class="op" id="6469159">!=</span>&nbsp;<span class="ident" id="6469162">nil</span>&nbsp;<span class="op" id="6469166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469171">return</span>&nbsp;<span class="ident" id="6469178">nil</span><span class="op" id="6469181">,</span>&nbsp;<span class="ident" id="6469183">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469189">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469193">records</span>&nbsp;<span class="op" id="6469201">=</span>&nbsp;<span class="builtinfunc" id="6469203">append</span><span class="op" id="6469209">(</span><span class="ident" id="6469210">records</span><span class="op" id="6469217">,</span>&nbsp;<span class="ident" id="6469219">record</span><span class="op" id="6469225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469228">}</span><br>
<span class="lineno"></span><span class="op" id="6469230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6469233">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6469305">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6469381">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6469424">func</span>&nbsp;<span class="op" id="6469429">(</span><span class="ident" id="6469430">r</span>&nbsp;<span class="op" id="6469432">*</span><span class="ident" id="6469433">Reader</span><span class="op" id="6469439">)</span>&nbsp;<span class="ident" id="6469441">readRune</span><span class="op" id="6469449">(</span><span class="op" id="6469450">)</span>&nbsp;<span class="op" id="6469452">(</span><span class="builtintype" id="6469453">rune</span><span class="op" id="6469457">,</span>&nbsp;<span class="builtintype" id="6469459">error</span><span class="op" id="6469464">)</span>&nbsp;<span class="op" id="6469466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469469">r1</span><span class="op" id="6469471">,</span>&nbsp;<span class="ident" id="6469473">_</span><span class="op" id="6469474">,</span>&nbsp;<span class="ident" id="6469476">err</span>&nbsp;<span class="op" id="6469480">:=</span>&nbsp;<span class="ident" id="6469483">r</span><span class="op" id="6469484">.</span><span class="ident" id="6469485">r</span><span class="op" id="6469486">.</span><span class="ident" id="6469487">ReadRune</span><span class="op" id="6469495">(</span><span class="op" id="6469496">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469500">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469563">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6469625">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469691">if</span>&nbsp;<span class="ident" id="6469694">r1</span>&nbsp;<span class="op" id="6469697">==</span>&nbsp;<span class="string" id="6469700">&#39;\r&#39;</span>&nbsp;<span class="op" id="6469705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469709">r1</span><span class="op" id="6469711">,</span>&nbsp;<span class="ident" id="6469713">_</span><span class="op" id="6469714">,</span>&nbsp;<span class="ident" id="6469716">err</span>&nbsp;<span class="op" id="6469720">=</span>&nbsp;<span class="ident" id="6469722">r</span><span class="op" id="6469723">.</span><span class="ident" id="6469724">r</span><span class="op" id="6469725">.</span><span class="ident" id="6469726">ReadRune</span><span class="op" id="6469734">(</span><span class="op" id="6469735">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469739">if</span>&nbsp;<span class="ident" id="6469742">err</span>&nbsp;<span class="op" id="6469746">==</span>&nbsp;<span class="ident" id="6469749">nil</span>&nbsp;<span class="op" id="6469753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469758">if</span>&nbsp;<span class="ident" id="6469761">r1</span>&nbsp;<span class="op" id="6469764">!=</span>&nbsp;<span class="string" id="6469767">&#39;\n&#39;</span>&nbsp;<span class="op" id="6469772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469778">r</span><span class="op" id="6469779">.</span><span class="ident" id="6469780">r</span><span class="op" id="6469781">.</span><span class="ident" id="6469782">UnreadRune</span><span class="op" id="6469792">(</span><span class="op" id="6469793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469799">r1</span>&nbsp;<span class="op" id="6469802">=</span>&nbsp;<span class="string" id="6469804">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469812">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6469819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469822">r</span><span class="op" id="6469823">.</span><span class="ident" id="6469824">column</span><span class="op" id="6469830">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469834">return</span>&nbsp;<span class="ident" id="6469841">r1</span><span class="op" id="6469843">,</span>&nbsp;<span class="ident" id="6469845">err</span><br>
<span class="lineno"></span><span class="op" id="6469849">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6469852">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6469923">func</span>&nbsp;<span class="op" id="6469928">(</span><span class="ident" id="6469929">r</span>&nbsp;<span class="op" id="6469931">*</span><span class="ident" id="6469932">Reader</span><span class="op" id="6469938">)</span>&nbsp;<span class="ident" id="6469940">skip</span><span class="op" id="6469944">(</span><span class="ident" id="6469945">delim</span>&nbsp;<span class="builtintype" id="6469951">rune</span><span class="op" id="6469955">)</span>&nbsp;<span class="builtintype" id="6469957">error</span>&nbsp;<span class="op" id="6469963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6469966">for</span>&nbsp;<span class="op" id="6469970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6469974">r1</span><span class="op" id="6469976">,</span>&nbsp;<span class="ident" id="6469978">err</span>&nbsp;<span class="op" id="6469982">:=</span>&nbsp;<span class="ident" id="6469985">r</span><span class="op" id="6469986">.</span><span class="ident" id="6469987">readRune</span><span class="op" id="6469995">(</span><span class="op" id="6469996">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470000">if</span>&nbsp;<span class="ident" id="6470003">err</span>&nbsp;<span class="op" id="6470007">!=</span>&nbsp;<span class="ident" id="6470010">nil</span>&nbsp;<span class="op" id="6470014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470019">return</span>&nbsp;<span class="ident" id="6470026">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470036">if</span>&nbsp;<span class="ident" id="6470039">r1</span>&nbsp;<span class="op" id="6470042">==</span>&nbsp;<span class="ident" id="6470045">delim</span>&nbsp;<span class="op" id="6470051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470056">return</span>&nbsp;<span class="ident" id="6470063">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470072">}</span><br>
<span class="lineno"></span><span class="op" id="6470074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6470077">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6470137">func</span>&nbsp;<span class="op" id="6470142">(</span><span class="ident" id="6470143">r</span>&nbsp;<span class="op" id="6470145">*</span><span class="ident" id="6470146">Reader</span><span class="op" id="6470152">)</span>&nbsp;<span class="ident" id="6470154">parseRecord</span><span class="op" id="6470165">(</span><span class="op" id="6470166">)</span>&nbsp;<span class="op" id="6470168">(</span><span class="ident" id="6470169">fields</span>&nbsp;<span class="op" id="6470176">[</span><span class="op" id="6470177">]</span><span class="builtintype" id="6470178">string</span><span class="op" id="6470184">,</span>&nbsp;<span class="ident" id="6470186">err</span>&nbsp;<span class="builtintype" id="6470190">error</span><span class="op" id="6470195">)</span>&nbsp;<span class="op" id="6470197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470200">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470261">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470319">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470390">r</span><span class="op" id="6470391">.</span><span class="ident" id="6470392">line</span><span class="op" id="6470396">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470400">r</span><span class="op" id="6470401">.</span><span class="ident" id="6470402">column</span>&nbsp;<span class="op" id="6470409">=</span>&nbsp;<span class="op" id="6470411">-</span><span class="num" id="6470412">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470416">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470476">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470539">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470574">r1</span><span class="op" id="6470576">,</span>&nbsp;<span class="ident" id="6470578">_</span><span class="op" id="6470579">,</span>&nbsp;<span class="ident" id="6470581">err</span>&nbsp;<span class="op" id="6470585">:=</span>&nbsp;<span class="ident" id="6470588">r</span><span class="op" id="6470589">.</span><span class="ident" id="6470590">r</span><span class="op" id="6470591">.</span><span class="ident" id="6470592">ReadRune</span><span class="op" id="6470600">(</span><span class="op" id="6470601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470604">if</span>&nbsp;<span class="ident" id="6470607">err</span>&nbsp;<span class="op" id="6470611">!=</span>&nbsp;<span class="ident" id="6470614">nil</span>&nbsp;<span class="op" id="6470618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470622">return</span>&nbsp;<span class="ident" id="6470629">nil</span><span class="op" id="6470632">,</span>&nbsp;<span class="ident" id="6470634">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470639">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470643">if</span>&nbsp;<span class="ident" id="6470646">r</span><span class="op" id="6470647">.</span><span class="ident" id="6470648">Comment</span>&nbsp;<span class="op" id="6470656">!=</span>&nbsp;<span class="num" id="6470659">0</span>&nbsp;<span class="op" id="6470661">&amp;&amp;</span>&nbsp;<span class="ident" id="6470664">r1</span>&nbsp;<span class="op" id="6470667">==</span>&nbsp;<span class="ident" id="6470670">r</span><span class="op" id="6470671">.</span><span class="ident" id="6470672">Comment</span>&nbsp;<span class="op" id="6470680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470684">return</span>&nbsp;<span class="ident" id="6470691">nil</span><span class="op" id="6470694">,</span>&nbsp;<span class="ident" id="6470696">r</span><span class="op" id="6470697">.</span><span class="ident" id="6470698">skip</span><span class="op" id="6470702">(</span><span class="string" id="6470703">&#39;\n&#39;</span><span class="op" id="6470707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470713">r</span><span class="op" id="6470714">.</span><span class="ident" id="6470715">r</span><span class="op" id="6470716">.</span><span class="ident" id="6470717">UnreadRune</span><span class="op" id="6470727">(</span><span class="op" id="6470728">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6470732">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470778">for</span>&nbsp;<span class="op" id="6470782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470786">haveField</span><span class="op" id="6470795">,</span>&nbsp;<span class="ident" id="6470797">delim</span><span class="op" id="6470802">,</span>&nbsp;<span class="ident" id="6470804">err</span>&nbsp;<span class="op" id="6470808">:=</span>&nbsp;<span class="ident" id="6470811">r</span><span class="op" id="6470812">.</span><span class="ident" id="6470813">parseField</span><span class="op" id="6470823">(</span><span class="op" id="6470824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470828">if</span>&nbsp;<span class="ident" id="6470831">haveField</span>&nbsp;<span class="op" id="6470841">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6470846">fields</span>&nbsp;<span class="op" id="6470853">=</span>&nbsp;<span class="builtinfunc" id="6470855">append</span><span class="op" id="6470861">(</span><span class="ident" id="6470862">fields</span><span class="op" id="6470868">,</span>&nbsp;<span class="ident" id="6470870">r</span><span class="op" id="6470871">.</span><span class="ident" id="6470872">field</span><span class="op" id="6470877">.</span><span class="ident" id="6470878">String</span><span class="op" id="6470884">(</span><span class="op" id="6470885">)</span><span class="op" id="6470886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470894">if</span>&nbsp;<span class="ident" id="6470897">delim</span>&nbsp;<span class="op" id="6470903">==</span>&nbsp;<span class="string" id="6470906">&#39;\n&#39;</span>&nbsp;<span class="op" id="6470911">||</span>&nbsp;<span class="ident" id="6470914">err</span>&nbsp;<span class="op" id="6470918">==</span>&nbsp;<span class="ident" id="6470921">io</span><span class="op" id="6470923">.</span><span class="ident" id="6470924">EOF</span>&nbsp;<span class="op" id="6470928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470933">return</span>&nbsp;<span class="ident" id="6470940">fields</span><span class="op" id="6470946">,</span>&nbsp;<span class="ident" id="6470948">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470954">}</span>&nbsp;<span class="keyword" id="6470956">else</span>&nbsp;<span class="keyword" id="6470961">if</span>&nbsp;<span class="ident" id="6470964">err</span>&nbsp;<span class="op" id="6470968">!=</span>&nbsp;<span class="ident" id="6470971">nil</span>&nbsp;<span class="op" id="6470975">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6470980">return</span>&nbsp;<span class="ident" id="6470987">nil</span><span class="op" id="6470990">,</span>&nbsp;<span class="ident" id="6470992">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6470998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471001">}</span><br>
<span class="lineno"></span><span class="op" id="6471003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6471006">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6471076">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6471151">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6471173">func</span>&nbsp;<span class="op" id="6471178">(</span><span class="ident" id="6471179">r</span>&nbsp;<span class="op" id="6471181">*</span><span class="ident" id="6471182">Reader</span><span class="op" id="6471188">)</span>&nbsp;<span class="ident" id="6471190">parseField</span><span class="op" id="6471200">(</span><span class="op" id="6471201">)</span>&nbsp;<span class="op" id="6471203">(</span><span class="ident" id="6471204">haveField</span>&nbsp;<span class="builtintype" id="6471214">bool</span><span class="op" id="6471218">,</span>&nbsp;<span class="ident" id="6471220">delim</span>&nbsp;<span class="builtintype" id="6471226">rune</span><span class="op" id="6471230">,</span>&nbsp;<span class="ident" id="6471232">err</span>&nbsp;<span class="builtintype" id="6471236">error</span><span class="op" id="6471241">)</span>&nbsp;<span class="op" id="6471243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471246">r</span><span class="op" id="6471247">.</span><span class="ident" id="6471248">field</span><span class="op" id="6471253">.</span><span class="ident" id="6471254">Reset</span><span class="op" id="6471259">(</span><span class="op" id="6471260">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471264">r1</span><span class="op" id="6471266">,</span>&nbsp;<span class="ident" id="6471268">err</span>&nbsp;<span class="op" id="6471272">:=</span>&nbsp;<span class="ident" id="6471275">r</span><span class="op" id="6471276">.</span><span class="ident" id="6471277">readRune</span><span class="op" id="6471285">(</span><span class="op" id="6471286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471289">for</span>&nbsp;<span class="ident" id="6471293">err</span>&nbsp;<span class="op" id="6471297">==</span>&nbsp;<span class="ident" id="6471300">nil</span>&nbsp;<span class="op" id="6471304">&amp;&amp;</span>&nbsp;<span class="ident" id="6471307">r</span><span class="op" id="6471308">.</span><span class="ident" id="6471309">TrimLeadingSpace</span>&nbsp;<span class="op" id="6471326">&amp;&amp;</span>&nbsp;<span class="ident" id="6471329">r1</span>&nbsp;<span class="op" id="6471332">!=</span>&nbsp;<span class="string" id="6471335">&#39;\n&#39;</span>&nbsp;<span class="op" id="6471340">&amp;&amp;</span>&nbsp;<span class="ident" id="6471343">unicode</span><span class="op" id="6471350">.</span><span class="ident" id="6471351">IsSpace</span><span class="op" id="6471358">(</span><span class="ident" id="6471359">r1</span><span class="op" id="6471361">)</span>&nbsp;<span class="op" id="6471363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471367">r1</span><span class="op" id="6471369">,</span>&nbsp;<span class="ident" id="6471371">err</span>&nbsp;<span class="op" id="6471375">=</span>&nbsp;<span class="ident" id="6471377">r</span><span class="op" id="6471378">.</span><span class="ident" id="6471379">readRune</span><span class="op" id="6471387">(</span><span class="op" id="6471388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471391">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471395">if</span>&nbsp;<span class="ident" id="6471398">err</span>&nbsp;<span class="op" id="6471402">==</span>&nbsp;<span class="ident" id="6471405">io</span><span class="op" id="6471407">.</span><span class="ident" id="6471408">EOF</span>&nbsp;<span class="op" id="6471412">&amp;&amp;</span>&nbsp;<span class="ident" id="6471415">r</span><span class="op" id="6471416">.</span><span class="ident" id="6471417">column</span>&nbsp;<span class="op" id="6471424">!=</span>&nbsp;<span class="num" id="6471427">0</span>&nbsp;<span class="op" id="6471429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471433">return</span>&nbsp;<span class="builtintype" id="6471440">true</span><span class="op" id="6471444">,</span>&nbsp;<span class="num" id="6471446">0</span><span class="op" id="6471447">,</span>&nbsp;<span class="ident" id="6471449">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471457">if</span>&nbsp;<span class="ident" id="6471460">err</span>&nbsp;<span class="op" id="6471464">!=</span>&nbsp;<span class="ident" id="6471467">nil</span>&nbsp;<span class="op" id="6471471">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471475">return</span>&nbsp;<span class="builtintype" id="6471482">false</span><span class="op" id="6471487">,</span>&nbsp;<span class="num" id="6471489">0</span><span class="op" id="6471490">,</span>&nbsp;<span class="ident" id="6471492">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471501">switch</span>&nbsp;<span class="ident" id="6471508">r1</span>&nbsp;<span class="op" id="6471511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471514">case</span>&nbsp;<span class="ident" id="6471519">r</span><span class="op" id="6471520">.</span><span class="ident" id="6471521">Comma</span><span class="op" id="6471526">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471530">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471552">case</span>&nbsp;<span class="string" id="6471557">&#39;\n&#39;</span><span class="op" id="6471561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471565">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471616">if</span>&nbsp;<span class="ident" id="6471619">r</span><span class="op" id="6471620">.</span><span class="ident" id="6471621">column</span>&nbsp;<span class="op" id="6471628">==</span>&nbsp;<span class="num" id="6471631">0</span>&nbsp;<span class="op" id="6471633">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471638">return</span>&nbsp;<span class="builtintype" id="6471645">false</span><span class="op" id="6471650">,</span>&nbsp;<span class="ident" id="6471652">r1</span><span class="op" id="6471654">,</span>&nbsp;<span class="ident" id="6471656">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471666">return</span>&nbsp;<span class="builtintype" id="6471673">true</span><span class="op" id="6471677">,</span>&nbsp;<span class="ident" id="6471679">r1</span><span class="op" id="6471681">,</span>&nbsp;<span class="ident" id="6471683">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471689">case</span>&nbsp;<span class="string" id="6471694">&#39;&#34;&#39;</span><span class="op" id="6471697">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6471701">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471718">Quoted</span><span class="op" id="6471724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471728">for</span>&nbsp;<span class="op" id="6471732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471737">r1</span><span class="op" id="6471739">,</span>&nbsp;<span class="ident" id="6471741">err</span>&nbsp;<span class="op" id="6471745">=</span>&nbsp;<span class="ident" id="6471747">r</span><span class="op" id="6471748">.</span><span class="ident" id="6471749">readRune</span><span class="op" id="6471757">(</span><span class="op" id="6471758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471763">if</span>&nbsp;<span class="ident" id="6471766">err</span>&nbsp;<span class="op" id="6471770">!=</span>&nbsp;<span class="ident" id="6471773">nil</span>&nbsp;<span class="op" id="6471777">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471783">if</span>&nbsp;<span class="ident" id="6471786">err</span>&nbsp;<span class="op" id="6471790">==</span>&nbsp;<span class="ident" id="6471793">io</span><span class="op" id="6471795">.</span><span class="ident" id="6471796">EOF</span>&nbsp;<span class="op" id="6471800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471807">if</span>&nbsp;<span class="ident" id="6471810">r</span><span class="op" id="6471811">.</span><span class="ident" id="6471812">LazyQuotes</span>&nbsp;<span class="op" id="6471823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471831">return</span>&nbsp;<span class="builtintype" id="6471838">true</span><span class="op" id="6471842">,</span>&nbsp;<span class="num" id="6471844">0</span><span class="op" id="6471845">,</span>&nbsp;<span class="ident" id="6471847">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471863">return</span>&nbsp;<span class="builtintype" id="6471870">false</span><span class="op" id="6471875">,</span>&nbsp;<span class="num" id="6471877">0</span><span class="op" id="6471878">,</span>&nbsp;<span class="ident" id="6471880">r</span><span class="op" id="6471881">.</span><span class="builtintype" id="6471882">error</span><span class="op" id="6471887">(</span><span class="ident" id="6471888">ErrQuote</span><span class="op" id="6471896">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471908">return</span>&nbsp;<span class="builtintype" id="6471915">false</span><span class="op" id="6471920">,</span>&nbsp;<span class="num" id="6471922">0</span><span class="op" id="6471923">,</span>&nbsp;<span class="ident" id="6471925">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6471932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471937">switch</span>&nbsp;<span class="ident" id="6471944">r1</span>&nbsp;<span class="op" id="6471947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471952">case</span>&nbsp;<span class="string" id="6471957">&#39;&#34;&#39;</span><span class="op" id="6471960">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6471966">r1</span><span class="op" id="6471968">,</span>&nbsp;<span class="ident" id="6471970">err</span>&nbsp;<span class="op" id="6471974">=</span>&nbsp;<span class="ident" id="6471976">r</span><span class="op" id="6471977">.</span><span class="ident" id="6471978">readRune</span><span class="op" id="6471986">(</span><span class="op" id="6471987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6471993">if</span>&nbsp;<span class="ident" id="6471996">err</span>&nbsp;<span class="op" id="6472000">!=</span>&nbsp;<span class="ident" id="6472003">nil</span>&nbsp;<span class="op" id="6472007">||</span>&nbsp;<span class="ident" id="6472010">r1</span>&nbsp;<span class="op" id="6472013">==</span>&nbsp;<span class="ident" id="6472016">r</span><span class="op" id="6472017">.</span><span class="ident" id="6472018">Comma</span>&nbsp;<span class="op" id="6472024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472031">break</span>&nbsp;<span class="ident" id="6472037">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472054">if</span>&nbsp;<span class="ident" id="6472057">r1</span>&nbsp;<span class="op" id="6472060">==</span>&nbsp;<span class="string" id="6472063">&#39;\n&#39;</span>&nbsp;<span class="op" id="6472068">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472075">return</span>&nbsp;<span class="builtintype" id="6472082">true</span><span class="op" id="6472086">,</span>&nbsp;<span class="ident" id="6472088">r1</span><span class="op" id="6472090">,</span>&nbsp;<span class="ident" id="6472092">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472106">if</span>&nbsp;<span class="ident" id="6472109">r1</span>&nbsp;<span class="op" id="6472112">!=</span>&nbsp;<span class="string" id="6472115">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6472119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472126">if</span>&nbsp;<span class="op" id="6472129">!</span><span class="ident" id="6472130">r</span><span class="op" id="6472131">.</span><span class="ident" id="6472132">LazyQuotes</span>&nbsp;<span class="op" id="6472143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472151">r</span><span class="op" id="6472152">.</span><span class="ident" id="6472153">column</span><span class="op" id="6472159">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472168">return</span>&nbsp;<span class="builtintype" id="6472175">false</span><span class="op" id="6472180">,</span>&nbsp;<span class="num" id="6472182">0</span><span class="op" id="6472183">,</span>&nbsp;<span class="ident" id="6472185">r</span><span class="op" id="6472186">.</span><span class="builtintype" id="6472187">error</span><span class="op" id="6472192">(</span><span class="ident" id="6472193">ErrQuote</span><span class="op" id="6472201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6472215">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472245">r</span><span class="op" id="6472246">.</span><span class="ident" id="6472247">field</span><span class="op" id="6472252">.</span><span class="ident" id="6472253">WriteRune</span><span class="op" id="6472262">(</span><span class="string" id="6472263">&#39;&#34;&#39;</span><span class="op" id="6472266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472272">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472277">case</span>&nbsp;<span class="string" id="6472282">&#39;\n&#39;</span><span class="op" id="6472286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472292">r</span><span class="op" id="6472293">.</span><span class="ident" id="6472294">line</span><span class="op" id="6472298">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472305">r</span><span class="op" id="6472306">.</span><span class="ident" id="6472307">column</span>&nbsp;<span class="op" id="6472314">=</span>&nbsp;<span class="op" id="6472316">-</span><span class="num" id="6472317">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472327">r</span><span class="op" id="6472328">.</span><span class="ident" id="6472329">field</span><span class="op" id="6472334">.</span><span class="ident" id="6472335">WriteRune</span><span class="op" id="6472344">(</span><span class="ident" id="6472345">r1</span><span class="op" id="6472347">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472355">default</span><span class="op" id="6472362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6472366">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472386">for</span>&nbsp;<span class="op" id="6472390">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472395">r</span><span class="op" id="6472396">.</span><span class="ident" id="6472397">field</span><span class="op" id="6472402">.</span><span class="ident" id="6472403">WriteRune</span><span class="op" id="6472412">(</span><span class="ident" id="6472413">r1</span><span class="op" id="6472415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6472420">r1</span><span class="op" id="6472422">,</span>&nbsp;<span class="ident" id="6472424">err</span>&nbsp;<span class="op" id="6472428">=</span>&nbsp;<span class="ident" id="6472430">r</span><span class="op" id="6472431">.</span><span class="ident" id="6472432">readRune</span><span class="op" id="6472440">(</span><span class="op" id="6472441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472446">if</span>&nbsp;<span class="ident" id="6472449">err</span>&nbsp;<span class="op" id="6472453">!=</span>&nbsp;<span class="ident" id="6472456">nil</span>&nbsp;<span class="op" id="6472460">||</span>&nbsp;<span class="ident" id="6472463">r1</span>&nbsp;<span class="op" id="6472466">==</span>&nbsp;<span class="ident" id="6472469">r</span><span class="op" id="6472470">.</span><span class="ident" id="6472471">Comma</span>&nbsp;<span class="op" id="6472477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472483">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472492">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472497">if</span>&nbsp;<span class="ident" id="6472500">r1</span>&nbsp;<span class="op" id="6472503">==</span>&nbsp;<span class="string" id="6472506">&#39;\n&#39;</span>&nbsp;<span class="op" id="6472511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472517">return</span>&nbsp;<span class="builtintype" id="6472524">true</span><span class="op" id="6472528">,</span>&nbsp;<span class="ident" id="6472530">r1</span><span class="op" id="6472532">,</span>&nbsp;<span class="ident" id="6472534">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472546">if</span>&nbsp;<span class="op" id="6472549">!</span><span class="ident" id="6472550">r</span><span class="op" id="6472551">.</span><span class="ident" id="6472552">LazyQuotes</span>&nbsp;<span class="op" id="6472563">&amp;&amp;</span>&nbsp;<span class="ident" id="6472566">r1</span>&nbsp;<span class="op" id="6472569">==</span>&nbsp;<span class="string" id="6472572">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6472576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472582">return</span>&nbsp;<span class="builtintype" id="6472589">false</span><span class="op" id="6472594">,</span>&nbsp;<span class="num" id="6472596">0</span><span class="op" id="6472597">,</span>&nbsp;<span class="ident" id="6472599">r</span><span class="op" id="6472600">.</span><span class="builtintype" id="6472601">error</span><span class="op" id="6472606">(</span><span class="ident" id="6472607">ErrBareQuote</span><span class="op" id="6472619">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472635">if</span>&nbsp;<span class="ident" id="6472638">err</span>&nbsp;<span class="op" id="6472642">!=</span>&nbsp;<span class="ident" id="6472645">nil</span>&nbsp;<span class="op" id="6472649">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472653">if</span>&nbsp;<span class="ident" id="6472656">err</span>&nbsp;<span class="op" id="6472660">==</span>&nbsp;<span class="ident" id="6472663">io</span><span class="op" id="6472665">.</span><span class="ident" id="6472666">EOF</span>&nbsp;<span class="op" id="6472670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472675">return</span>&nbsp;<span class="builtintype" id="6472682">true</span><span class="op" id="6472686">,</span>&nbsp;<span class="num" id="6472688">0</span><span class="op" id="6472689">,</span>&nbsp;<span class="ident" id="6472691">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472701">return</span>&nbsp;<span class="builtintype" id="6472708">false</span><span class="op" id="6472713">,</span>&nbsp;<span class="num" id="6472715">0</span><span class="op" id="6472716">,</span>&nbsp;<span class="ident" id="6472718">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6472723">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6472727">return</span>&nbsp;<span class="builtintype" id="6472734">true</span><span class="op" id="6472738">,</span>&nbsp;<span class="ident" id="6472740">r1</span><span class="op" id="6472742">,</span>&nbsp;<span class="ident" id="6472744">nil</span><br>
<span class="lineno"></span><span class="op" id="6472748">}</span>
</div>
</body>
</html>
