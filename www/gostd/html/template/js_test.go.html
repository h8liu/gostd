<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8105087">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8105142">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8105196">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8105247">package</span>&nbsp;<span class="ident" id="8105255">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8105265">import</span>&nbsp;<span class="op" id="8105272">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8105275">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8105284">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8105292">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8105303">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8105313">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8105316">func</span>&nbsp;<span class="ident" id="8105321">TestNextJsCtx</span><span class="op" id="8105334">(</span><span class="ident" id="8105335">t</span>&nbsp;<span class="op" id="8105337">*</span><span class="ident" id="8105338">testing</span><span class="op" id="8105345">.</span><span class="ident" id="8105346">T</span><span class="op" id="8105347">)</span>&nbsp;<span class="op" id="8105349">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105352">tests</span>&nbsp;<span class="op" id="8105358">:=</span>&nbsp;<span class="op" id="8105361">[</span><span class="op" id="8105362">]</span><span class="keyword" id="8105363">struct</span>&nbsp;<span class="op" id="8105370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105374">jsCtx</span>&nbsp;<span class="ident" id="8105380">jsCtx</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8105388">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8105394">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105402">}</span><span class="op" id="8105403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105407">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105451">{</span><span class="ident" id="8105452">jsCtxRegexp</span><span class="op" id="8105463">,</span>&nbsp;<span class="string" id="8105465">&#34;;&#34;</span><span class="op" id="8105468">}</span><span class="op" id="8105469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105473">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105500">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105553">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105616">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105679">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105702">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105752">{</span><span class="ident" id="8105753">jsCtxRegexp</span><span class="op" id="8105764">,</span>&nbsp;<span class="string" id="8105766">&#34;}&#34;</span><span class="op" id="8105769">}</span><span class="op" id="8105770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105774">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105840">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105862">{</span><span class="ident" id="8105863">jsCtxDivOp</span><span class="op" id="8105873">,</span>&nbsp;<span class="string" id="8105875">&#34;)&#34;</span><span class="op" id="8105878">}</span><span class="op" id="8105879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8105883">{</span><span class="ident" id="8105884">jsCtxDivOp</span><span class="op" id="8105894">,</span>&nbsp;<span class="string" id="8105896">&#34;]&#34;</span><span class="op" id="8105899">}</span><span class="op" id="8105900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105904">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8105968">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106001">{</span><span class="ident" id="8106002">jsCtxRegexp</span><span class="op" id="8106013">,</span>&nbsp;<span class="string" id="8106015">&#34;(&#34;</span><span class="op" id="8106018">}</span><span class="op" id="8106019">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106023">{</span><span class="ident" id="8106024">jsCtxRegexp</span><span class="op" id="8106035">,</span>&nbsp;<span class="string" id="8106037">&#34;[&#34;</span><span class="op" id="8106040">}</span><span class="op" id="8106041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106045">{</span><span class="ident" id="8106046">jsCtxRegexp</span><span class="op" id="8106057">,</span>&nbsp;<span class="string" id="8106059">&#34;{&#34;</span><span class="op" id="8106062">}</span><span class="op" id="8106063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106067">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106131">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106165">{</span><span class="ident" id="8106166">jsCtxRegexp</span><span class="op" id="8106177">,</span>&nbsp;<span class="string" id="8106179">&#34;=&#34;</span><span class="op" id="8106182">}</span><span class="op" id="8106183">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106187">{</span><span class="ident" id="8106188">jsCtxRegexp</span><span class="op" id="8106199">,</span>&nbsp;<span class="string" id="8106201">&#34;+=&#34;</span><span class="op" id="8106205">}</span><span class="op" id="8106206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106210">{</span><span class="ident" id="8106211">jsCtxRegexp</span><span class="op" id="8106222">,</span>&nbsp;<span class="string" id="8106224">&#34;*=&#34;</span><span class="op" id="8106228">}</span><span class="op" id="8106229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106233">{</span><span class="ident" id="8106234">jsCtxRegexp</span><span class="op" id="8106245">,</span>&nbsp;<span class="string" id="8106247">&#34;*&#34;</span><span class="op" id="8106250">}</span><span class="op" id="8106251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106255">{</span><span class="ident" id="8106256">jsCtxRegexp</span><span class="op" id="8106267">,</span>&nbsp;<span class="string" id="8106269">&#34;!&#34;</span><span class="op" id="8106272">}</span><span class="op" id="8106273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106277">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106341">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106354">{</span><span class="ident" id="8106355">jsCtxRegexp</span><span class="op" id="8106366">,</span>&nbsp;<span class="string" id="8106368">&#34;+&#34;</span><span class="op" id="8106371">}</span><span class="op" id="8106372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106376">{</span><span class="ident" id="8106377">jsCtxRegexp</span><span class="op" id="8106388">,</span>&nbsp;<span class="string" id="8106390">&#34;-&#34;</span><span class="op" id="8106393">}</span><span class="op" id="8106394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106398">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106444">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106506">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106570">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106619">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106683">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106696">{</span><span class="ident" id="8106697">jsCtxDivOp</span><span class="op" id="8106707">,</span>&nbsp;<span class="string" id="8106709">&#34;--&#34;</span><span class="op" id="8106713">}</span><span class="op" id="8106714">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106718">{</span><span class="ident" id="8106719">jsCtxDivOp</span><span class="op" id="8106729">,</span>&nbsp;<span class="string" id="8106731">&#34;++&#34;</span><span class="op" id="8106735">}</span><span class="op" id="8106736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106740">{</span><span class="ident" id="8106741">jsCtxDivOp</span><span class="op" id="8106751">,</span>&nbsp;<span class="string" id="8106753">&#34;x--&#34;</span><span class="op" id="8106758">}</span><span class="op" id="8106759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106763">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106826">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8106846">{</span><span class="ident" id="8106847">jsCtxRegexp</span><span class="op" id="8106858">,</span>&nbsp;<span class="string" id="8106860">&#34;x---&#34;</span><span class="op" id="8106866">}</span><span class="op" id="8106867">,</span>&nbsp;<span class="comment" id="8106869">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106897">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8106963">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107030">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107049">{</span><span class="ident" id="8107050">jsCtxRegexp</span><span class="op" id="8107061">,</span>&nbsp;<span class="string" id="8107063">&#34;return&#34;</span><span class="op" id="8107071">}</span><span class="op" id="8107072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107076">{</span><span class="ident" id="8107077">jsCtxRegexp</span><span class="op" id="8107088">,</span>&nbsp;<span class="string" id="8107090">&#34;return&nbsp;&#34;</span><span class="op" id="8107099">}</span><span class="op" id="8107100">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107104">{</span><span class="ident" id="8107105">jsCtxRegexp</span><span class="op" id="8107116">,</span>&nbsp;<span class="string" id="8107118">&#34;return\t&#34;</span><span class="op" id="8107128">}</span><span class="op" id="8107129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107133">{</span><span class="ident" id="8107134">jsCtxRegexp</span><span class="op" id="8107145">,</span>&nbsp;<span class="string" id="8107147">&#34;return\n&#34;</span><span class="op" id="8107157">}</span><span class="op" id="8107158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107162">{</span><span class="ident" id="8107163">jsCtxRegexp</span><span class="op" id="8107174">,</span>&nbsp;<span class="string" id="8107176">&#34;return\u2028&#34;</span><span class="op" id="8107190">}</span><span class="op" id="8107191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107195">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107261">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107323">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107389">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107454">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107520">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107531">{</span><span class="ident" id="8107532">jsCtxDivOp</span><span class="op" id="8107542">,</span>&nbsp;<span class="string" id="8107544">&#34;x&#34;</span><span class="op" id="8107547">}</span><span class="op" id="8107548">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107552">{</span><span class="ident" id="8107553">jsCtxDivOp</span><span class="op" id="8107563">,</span>&nbsp;<span class="string" id="8107565">&#34;x&nbsp;&#34;</span><span class="op" id="8107569">}</span><span class="op" id="8107570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107574">{</span><span class="ident" id="8107575">jsCtxDivOp</span><span class="op" id="8107585">,</span>&nbsp;<span class="string" id="8107587">&#34;x\t&#34;</span><span class="op" id="8107592">}</span><span class="op" id="8107593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107597">{</span><span class="ident" id="8107598">jsCtxDivOp</span><span class="op" id="8107608">,</span>&nbsp;<span class="string" id="8107610">&#34;x\n&#34;</span><span class="op" id="8107615">}</span><span class="op" id="8107616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107620">{</span><span class="ident" id="8107621">jsCtxDivOp</span><span class="op" id="8107631">,</span>&nbsp;<span class="string" id="8107633">&#34;x\u2028&#34;</span><span class="op" id="8107642">}</span><span class="op" id="8107643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107647">{</span><span class="ident" id="8107648">jsCtxDivOp</span><span class="op" id="8107658">,</span>&nbsp;<span class="string" id="8107660">&#34;preturn&#34;</span><span class="op" id="8107669">}</span><span class="op" id="8107670">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107674">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107704">{</span><span class="ident" id="8107705">jsCtxDivOp</span><span class="op" id="8107715">,</span>&nbsp;<span class="string" id="8107717">&#34;0&#34;</span><span class="op" id="8107720">}</span><span class="op" id="8107721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8107725">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107780">{</span><span class="ident" id="8107781">jsCtxDivOp</span><span class="op" id="8107791">,</span>&nbsp;<span class="string" id="8107793">&#34;0.&#34;</span><span class="op" id="8107797">}</span><span class="op" id="8107798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107801">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8107805">for</span>&nbsp;<span class="ident" id="8107809">_</span><span class="op" id="8107810">,</span>&nbsp;<span class="ident" id="8107812">test</span>&nbsp;<span class="op" id="8107817">:=</span>&nbsp;<span class="keyword" id="8107820">range</span>&nbsp;<span class="ident" id="8107826">tests</span>&nbsp;<span class="op" id="8107832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8107836">if</span>&nbsp;<span class="ident" id="8107839">nextJSCtx</span><span class="op" id="8107848">(</span><span class="op" id="8107849">[</span><span class="op" id="8107850">]</span><span class="builtintype" id="8107851">byte</span><span class="op" id="8107855">(</span><span class="ident" id="8107856">test</span><span class="op" id="8107860">.</span><span class="ident" id="8107861">s</span><span class="op" id="8107862">)</span><span class="op" id="8107863">,</span>&nbsp;<span class="ident" id="8107865">jsCtxRegexp</span><span class="op" id="8107876">)</span>&nbsp;<span class="op" id="8107878">!=</span>&nbsp;<span class="ident" id="8107881">test</span><span class="op" id="8107885">.</span><span class="ident" id="8107886">jsCtx</span>&nbsp;<span class="op" id="8107892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8107897">t</span><span class="op" id="8107898">.</span><span class="ident" id="8107899">Errorf</span><span class="op" id="8107905">(</span><span class="string" id="8107906">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8107922">,</span>&nbsp;<span class="ident" id="8107924">test</span><span class="op" id="8107928">.</span><span class="ident" id="8107929">jsCtx</span><span class="op" id="8107934">,</span>&nbsp;<span class="ident" id="8107936">test</span><span class="op" id="8107940">.</span><span class="ident" id="8107941">s</span><span class="op" id="8107942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8107946">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8107950">if</span>&nbsp;<span class="ident" id="8107953">nextJSCtx</span><span class="op" id="8107962">(</span><span class="op" id="8107963">[</span><span class="op" id="8107964">]</span><span class="builtintype" id="8107965">byte</span><span class="op" id="8107969">(</span><span class="ident" id="8107970">test</span><span class="op" id="8107974">.</span><span class="ident" id="8107975">s</span><span class="op" id="8107976">)</span><span class="op" id="8107977">,</span>&nbsp;<span class="ident" id="8107979">jsCtxDivOp</span><span class="op" id="8107989">)</span>&nbsp;<span class="op" id="8107991">!=</span>&nbsp;<span class="ident" id="8107994">test</span><span class="op" id="8107998">.</span><span class="ident" id="8107999">jsCtx</span>&nbsp;<span class="op" id="8108005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108010">t</span><span class="op" id="8108011">.</span><span class="ident" id="8108012">Errorf</span><span class="op" id="8108018">(</span><span class="string" id="8108019">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8108035">,</span>&nbsp;<span class="ident" id="8108037">test</span><span class="op" id="8108041">.</span><span class="ident" id="8108042">jsCtx</span><span class="op" id="8108047">,</span>&nbsp;<span class="ident" id="8108049">test</span><span class="op" id="8108053">.</span><span class="ident" id="8108054">s</span><span class="op" id="8108055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108066">if</span>&nbsp;<span class="ident" id="8108069">nextJSCtx</span><span class="op" id="8108078">(</span><span class="op" id="8108079">[</span><span class="op" id="8108080">]</span><span class="builtintype" id="8108081">byte</span><span class="op" id="8108085">(</span><span class="string" id="8108086">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8108091">)</span><span class="op" id="8108092">,</span>&nbsp;<span class="ident" id="8108094">jsCtxRegexp</span><span class="op" id="8108105">)</span>&nbsp;<span class="op" id="8108107">!=</span>&nbsp;<span class="ident" id="8108110">jsCtxRegexp</span>&nbsp;<span class="op" id="8108122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108126">t</span><span class="op" id="8108127">.</span><span class="ident" id="8108128">Error</span><span class="op" id="8108133">(</span><span class="string" id="8108134">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8108148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8108155">if</span>&nbsp;<span class="ident" id="8108158">nextJSCtx</span><span class="op" id="8108167">(</span><span class="op" id="8108168">[</span><span class="op" id="8108169">]</span><span class="builtintype" id="8108170">byte</span><span class="op" id="8108174">(</span><span class="string" id="8108175">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8108180">)</span><span class="op" id="8108181">,</span>&nbsp;<span class="ident" id="8108183">jsCtxDivOp</span><span class="op" id="8108193">)</span>&nbsp;<span class="op" id="8108195">!=</span>&nbsp;<span class="ident" id="8108198">jsCtxDivOp</span>&nbsp;<span class="op" id="8108209">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108213">t</span><span class="op" id="8108214">.</span><span class="ident" id="8108215">Error</span><span class="op" id="8108220">(</span><span class="string" id="8108221">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8108235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108238">}</span><br>
<span class="lineno"></span><span class="op" id="8108240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8108243">func</span>&nbsp;<span class="ident" id="8108248">TestJSValEscaper</span><span class="op" id="8108264">(</span><span class="ident" id="8108265">t</span>&nbsp;<span class="op" id="8108267">*</span><span class="ident" id="8108268">testing</span><span class="op" id="8108275">.</span><span class="ident" id="8108276">T</span><span class="op" id="8108277">)</span>&nbsp;<span class="op" id="8108279">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108282">tests</span>&nbsp;<span class="op" id="8108288">:=</span>&nbsp;<span class="op" id="8108291">[</span><span class="op" id="8108292">]</span><span class="keyword" id="8108293">struct</span>&nbsp;<span class="op" id="8108300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108304">x</span>&nbsp;&nbsp;<span class="keyword" id="8108307">interface</span><span class="op" id="8108316">{</span><span class="op" id="8108317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8108321">js</span>&nbsp;<span class="builtintype" id="8108324">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108332">}</span><span class="op" id="8108333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108337">{</span><span class="builtintype" id="8108338">int</span><span class="op" id="8108341">(</span><span class="num" id="8108342">42</span><span class="op" id="8108344">)</span><span class="op" id="8108345">,</span>&nbsp;<span class="string" id="8108347">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108353">}</span><span class="op" id="8108354">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108358">{</span><span class="builtintype" id="8108359">uint</span><span class="op" id="8108363">(</span><span class="num" id="8108364">42</span><span class="op" id="8108366">)</span><span class="op" id="8108367">,</span>&nbsp;<span class="string" id="8108369">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108375">}</span><span class="op" id="8108376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108380">{</span><span class="builtintype" id="8108381">int16</span><span class="op" id="8108386">(</span><span class="num" id="8108387">42</span><span class="op" id="8108389">)</span><span class="op" id="8108390">,</span>&nbsp;<span class="string" id="8108392">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108398">}</span><span class="op" id="8108399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108403">{</span><span class="builtintype" id="8108404">uint16</span><span class="op" id="8108410">(</span><span class="num" id="8108411">42</span><span class="op" id="8108413">)</span><span class="op" id="8108414">,</span>&nbsp;<span class="string" id="8108416">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108422">}</span><span class="op" id="8108423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108427">{</span><span class="builtintype" id="8108428">int32</span><span class="op" id="8108433">(</span><span class="op" id="8108434">-</span><span class="num" id="8108435">42</span><span class="op" id="8108437">)</span><span class="op" id="8108438">,</span>&nbsp;<span class="string" id="8108440">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8108447">}</span><span class="op" id="8108448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108452">{</span><span class="builtintype" id="8108453">uint32</span><span class="op" id="8108459">(</span><span class="num" id="8108460">42</span><span class="op" id="8108462">)</span><span class="op" id="8108463">,</span>&nbsp;<span class="string" id="8108465">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108471">}</span><span class="op" id="8108472">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108476">{</span><span class="builtintype" id="8108477">int16</span><span class="op" id="8108482">(</span><span class="op" id="8108483">-</span><span class="num" id="8108484">42</span><span class="op" id="8108486">)</span><span class="op" id="8108487">,</span>&nbsp;<span class="string" id="8108489">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8108496">}</span><span class="op" id="8108497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108501">{</span><span class="builtintype" id="8108502">uint16</span><span class="op" id="8108508">(</span><span class="num" id="8108509">42</span><span class="op" id="8108511">)</span><span class="op" id="8108512">,</span>&nbsp;<span class="string" id="8108514">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108520">}</span><span class="op" id="8108521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108525">{</span><span class="ident" id="8108526">int64</span><span class="op" id="8108531">(</span><span class="op" id="8108532">-</span><span class="num" id="8108533">42</span><span class="op" id="8108535">)</span><span class="op" id="8108536">,</span>&nbsp;<span class="string" id="8108538">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8108545">}</span><span class="op" id="8108546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108550">{</span><span class="ident" id="8108551">uint64</span><span class="op" id="8108557">(</span><span class="num" id="8108558">42</span><span class="op" id="8108560">)</span><span class="op" id="8108561">,</span>&nbsp;<span class="string" id="8108563">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8108569">}</span><span class="op" id="8108570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108574">{</span><span class="ident" id="8108575">uint64</span><span class="op" id="8108581">(</span><span class="num" id="8108582">1</span><span class="op" id="8108583">)</span>&nbsp;<span class="op" id="8108585">&lt;&lt;</span>&nbsp;<span class="num" id="8108588">53</span><span class="op" id="8108590">,</span>&nbsp;<span class="string" id="8108592">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8108612">}</span><span class="op" id="8108613">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8108617">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8108669">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108723">{</span><span class="ident" id="8108724">uint64</span><span class="op" id="8108730">(</span><span class="num" id="8108731">1</span><span class="op" id="8108732">)</span><span class="op" id="8108733">&lt;&lt;</span><span class="num" id="8108735">53</span>&nbsp;<span class="op" id="8108738">+</span>&nbsp;<span class="num" id="8108740">1</span><span class="op" id="8108741">,</span>&nbsp;<span class="string" id="8108743">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8108763">}</span><span class="op" id="8108764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108768">{</span><span class="builtintype" id="8108769">float32</span><span class="op" id="8108776">(</span><span class="num" id="8108777">1.0</span><span class="op" id="8108780">)</span><span class="op" id="8108781">,</span>&nbsp;<span class="string" id="8108783">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8108788">}</span><span class="op" id="8108789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108793">{</span><span class="builtintype" id="8108794">float32</span><span class="op" id="8108801">(</span><span class="op" id="8108802">-</span><span class="num" id="8108803">1.0</span><span class="op" id="8108806">)</span><span class="op" id="8108807">,</span>&nbsp;<span class="string" id="8108809">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8108815">}</span><span class="op" id="8108816">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108820">{</span><span class="builtintype" id="8108821">float32</span><span class="op" id="8108828">(</span><span class="num" id="8108829">0.5</span><span class="op" id="8108832">)</span><span class="op" id="8108833">,</span>&nbsp;<span class="string" id="8108835">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8108842">}</span><span class="op" id="8108843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108847">{</span><span class="builtintype" id="8108848">float32</span><span class="op" id="8108855">(</span><span class="op" id="8108856">-</span><span class="num" id="8108857">0.5</span><span class="op" id="8108860">)</span><span class="op" id="8108861">,</span>&nbsp;<span class="string" id="8108863">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8108871">}</span><span class="op" id="8108872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108876">{</span><span class="builtintype" id="8108877">float32</span><span class="op" id="8108884">(</span><span class="num" id="8108885">1.0</span><span class="op" id="8108888">)</span>&nbsp;<span class="op" id="8108890">/</span>&nbsp;<span class="builtintype" id="8108892">float32</span><span class="op" id="8108899">(</span><span class="num" id="8108900">256</span><span class="op" id="8108903">)</span><span class="op" id="8108904">,</span>&nbsp;<span class="string" id="8108906">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8108920">}</span><span class="op" id="8108921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108925">{</span><span class="builtintype" id="8108926">float32</span><span class="op" id="8108933">(</span><span class="num" id="8108934">0</span><span class="op" id="8108935">)</span><span class="op" id="8108936">,</span>&nbsp;<span class="string" id="8108938">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8108943">}</span><span class="op" id="8108944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108948">{</span><span class="ident" id="8108949">math</span><span class="op" id="8108953">.</span><span class="ident" id="8108954">Copysign</span><span class="op" id="8108962">(</span><span class="num" id="8108963">0</span><span class="op" id="8108964">,</span>&nbsp;<span class="op" id="8108966">-</span><span class="num" id="8108967">1</span><span class="op" id="8108968">)</span><span class="op" id="8108969">,</span>&nbsp;<span class="string" id="8108971">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8108977">}</span><span class="op" id="8108978">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8108982">{</span><span class="builtintype" id="8108983">float64</span><span class="op" id="8108990">(</span><span class="num" id="8108991">1.0</span><span class="op" id="8108994">)</span><span class="op" id="8108995">,</span>&nbsp;<span class="string" id="8108997">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8109002">}</span><span class="op" id="8109003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109007">{</span><span class="builtintype" id="8109008">float64</span><span class="op" id="8109015">(</span><span class="op" id="8109016">-</span><span class="num" id="8109017">1.0</span><span class="op" id="8109020">)</span><span class="op" id="8109021">,</span>&nbsp;<span class="string" id="8109023">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8109029">}</span><span class="op" id="8109030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109034">{</span><span class="builtintype" id="8109035">float64</span><span class="op" id="8109042">(</span><span class="num" id="8109043">0.5</span><span class="op" id="8109046">)</span><span class="op" id="8109047">,</span>&nbsp;<span class="string" id="8109049">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8109056">}</span><span class="op" id="8109057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109061">{</span><span class="builtintype" id="8109062">float64</span><span class="op" id="8109069">(</span><span class="op" id="8109070">-</span><span class="num" id="8109071">0.5</span><span class="op" id="8109074">)</span><span class="op" id="8109075">,</span>&nbsp;<span class="string" id="8109077">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8109085">}</span><span class="op" id="8109086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109090">{</span><span class="builtintype" id="8109091">float64</span><span class="op" id="8109098">(</span><span class="num" id="8109099">0</span><span class="op" id="8109100">)</span><span class="op" id="8109101">,</span>&nbsp;<span class="string" id="8109103">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8109108">}</span><span class="op" id="8109109">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109113">{</span><span class="ident" id="8109114">math</span><span class="op" id="8109118">.</span><span class="ident" id="8109119">Copysign</span><span class="op" id="8109127">(</span><span class="num" id="8109128">0</span><span class="op" id="8109129">,</span>&nbsp;<span class="op" id="8109131">-</span><span class="num" id="8109132">1</span><span class="op" id="8109133">)</span><span class="op" id="8109134">,</span>&nbsp;<span class="string" id="8109136">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8109142">}</span><span class="op" id="8109143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109147">{</span><span class="string" id="8109148">&#34;&#34;</span><span class="op" id="8109150">,</span>&nbsp;<span class="string" id="8109152">`&#34;&#34;`</span><span class="op" id="8109156">}</span><span class="op" id="8109157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109161">{</span><span class="string" id="8109162">&#34;foo&#34;</span><span class="op" id="8109167">,</span>&nbsp;<span class="string" id="8109169">`&#34;foo&#34;`</span><span class="op" id="8109176">}</span><span class="op" id="8109177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8109181">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109196">{</span><span class="string" id="8109197">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8109215">,</span>&nbsp;<span class="string" id="8109217">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8109237">}</span><span class="op" id="8109238">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8109242">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109290">{</span><span class="string" id="8109291">&#34;\t\x0b&#34;</span><span class="op" id="8109299">,</span>&nbsp;<span class="string" id="8109301">`&#34;\t\u000b&#34;`</span><span class="op" id="8109313">}</span><span class="op" id="8109314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109318">{</span><span class="keyword" id="8109319">struct</span><span class="op" id="8109325">{</span>&nbsp;<span class="ident" id="8109327">X</span><span class="op" id="8109328">,</span>&nbsp;<span class="ident" id="8109330">Y</span>&nbsp;<span class="builtintype" id="8109332">int</span>&nbsp;<span class="op" id="8109336">}</span><span class="op" id="8109337">{</span><span class="num" id="8109338">1</span><span class="op" id="8109339">,</span>&nbsp;<span class="num" id="8109341">2</span><span class="op" id="8109342">}</span><span class="op" id="8109343">,</span>&nbsp;<span class="string" id="8109345">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8109360">}</span><span class="op" id="8109361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109365">{</span><span class="op" id="8109366">[</span><span class="op" id="8109367">]</span><span class="keyword" id="8109368">interface</span><span class="op" id="8109377">{</span><span class="op" id="8109378">}</span><span class="op" id="8109379">{</span><span class="op" id="8109380">}</span><span class="op" id="8109381">,</span>&nbsp;<span class="string" id="8109383">&#34;[]&#34;</span><span class="op" id="8109387">}</span><span class="op" id="8109388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109392">{</span><span class="op" id="8109393">[</span><span class="op" id="8109394">]</span><span class="keyword" id="8109395">interface</span><span class="op" id="8109404">{</span><span class="op" id="8109405">}</span><span class="op" id="8109406">{</span><span class="num" id="8109407">42</span><span class="op" id="8109409">,</span>&nbsp;<span class="string" id="8109411">&#34;foo&#34;</span><span class="op" id="8109416">,</span>&nbsp;<span class="ident" id="8109418">nil</span><span class="op" id="8109421">}</span><span class="op" id="8109422">,</span>&nbsp;<span class="string" id="8109424">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8109441">}</span><span class="op" id="8109442">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109446">{</span><span class="op" id="8109447">[</span><span class="op" id="8109448">]</span><span class="builtintype" id="8109449">string</span><span class="op" id="8109455">{</span><span class="string" id="8109456">&#34;&lt;!--&#34;</span><span class="op" id="8109462">,</span>&nbsp;<span class="string" id="8109464">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8109475">,</span>&nbsp;<span class="string" id="8109477">&#34;--&gt;&#34;</span><span class="op" id="8109482">}</span><span class="op" id="8109483">,</span>&nbsp;<span class="string" id="8109485">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8109533">}</span><span class="op" id="8109534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109538">{</span><span class="string" id="8109539">&#34;&lt;!--&#34;</span><span class="op" id="8109545">,</span>&nbsp;<span class="string" id="8109547">`&#34;\u003c!--&#34;`</span><span class="op" id="8109560">}</span><span class="op" id="8109561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109565">{</span><span class="string" id="8109566">&#34;--&gt;&#34;</span><span class="op" id="8109571">,</span>&nbsp;<span class="string" id="8109573">`&#34;--\u003e&#34;`</span><span class="op" id="8109585">}</span><span class="op" id="8109586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109590">{</span><span class="string" id="8109591">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8109602">,</span>&nbsp;<span class="string" id="8109604">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8109622">}</span><span class="op" id="8109623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109627">{</span><span class="string" id="8109628">&#34;]]&gt;&#34;</span><span class="op" id="8109633">,</span>&nbsp;<span class="string" id="8109635">`&#34;]]\u003e&#34;`</span><span class="op" id="8109647">}</span><span class="op" id="8109648">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109652">{</span><span class="string" id="8109653">&#34;&lt;/script&#34;</span><span class="op" id="8109663">,</span>&nbsp;<span class="string" id="8109665">`&#34;\u003c/script&#34;`</span><span class="op" id="8109682">}</span><span class="op" id="8109683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109687">{</span><span class="string" id="8109688">&#34;\U0001D11E&#34;</span><span class="op" id="8109700">,</span>&nbsp;<span class="string" id="8109702">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8109718">}</span><span class="op" id="8109719">,</span>&nbsp;<span class="comment" id="8109721">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8109747">for</span>&nbsp;<span class="ident" id="8109751">_</span><span class="op" id="8109752">,</span>&nbsp;<span class="ident" id="8109754">test</span>&nbsp;<span class="op" id="8109759">:=</span>&nbsp;<span class="keyword" id="8109762">range</span>&nbsp;<span class="ident" id="8109768">tests</span>&nbsp;<span class="op" id="8109774">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8109778">if</span>&nbsp;<span class="ident" id="8109781">js</span>&nbsp;<span class="op" id="8109784">:=</span>&nbsp;<span class="ident" id="8109787">jsValEscaper</span><span class="op" id="8109799">(</span><span class="ident" id="8109800">test</span><span class="op" id="8109804">.</span><span class="ident" id="8109805">x</span><span class="op" id="8109806">)</span><span class="op" id="8109807">;</span>&nbsp;<span class="ident" id="8109809">js</span>&nbsp;<span class="op" id="8109812">!=</span>&nbsp;<span class="ident" id="8109815">test</span><span class="op" id="8109819">.</span><span class="ident" id="8109820">js</span>&nbsp;<span class="op" id="8109823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109828">t</span><span class="op" id="8109829">.</span><span class="ident" id="8109830">Errorf</span><span class="op" id="8109836">(</span><span class="string" id="8109837">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8109865">,</span>&nbsp;<span class="ident" id="8109867">test</span><span class="op" id="8109871">.</span><span class="ident" id="8109872">x</span><span class="op" id="8109873">,</span>&nbsp;<span class="ident" id="8109875">test</span><span class="op" id="8109879">.</span><span class="ident" id="8109880">js</span><span class="op" id="8109882">,</span>&nbsp;<span class="ident" id="8109884">js</span><span class="op" id="8109886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8109890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8109894">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8109951">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109968">a</span>&nbsp;<span class="op" id="8109970">:=</span>&nbsp;<span class="op" id="8109973">[</span><span class="op" id="8109974">]</span><span class="keyword" id="8109975">interface</span><span class="op" id="8109984">{</span><span class="op" id="8109985">}</span><span class="op" id="8109986">{</span><span class="ident" id="8109987">test</span><span class="op" id="8109991">.</span><span class="ident" id="8109992">x</span><span class="op" id="8109993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8109997">want</span>&nbsp;<span class="op" id="8110002">:=</span>&nbsp;<span class="string" id="8110005">&#34;[&#34;</span>&nbsp;<span class="op" id="8110009">+</span>&nbsp;<span class="ident" id="8110011">strings</span><span class="op" id="8110018">.</span><span class="ident" id="8110019">TrimSpace</span><span class="op" id="8110028">(</span><span class="ident" id="8110029">test</span><span class="op" id="8110033">.</span><span class="ident" id="8110034">js</span><span class="op" id="8110036">)</span>&nbsp;<span class="op" id="8110038">+</span>&nbsp;<span class="string" id="8110040">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8110046">if</span>&nbsp;<span class="ident" id="8110049">js</span>&nbsp;<span class="op" id="8110052">:=</span>&nbsp;<span class="ident" id="8110055">jsValEscaper</span><span class="op" id="8110067">(</span><span class="ident" id="8110068">a</span><span class="op" id="8110069">)</span><span class="op" id="8110070">;</span>&nbsp;<span class="ident" id="8110072">js</span>&nbsp;<span class="op" id="8110075">!=</span>&nbsp;<span class="ident" id="8110078">want</span>&nbsp;<span class="op" id="8110083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8110088">t</span><span class="op" id="8110089">.</span><span class="ident" id="8110090">Errorf</span><span class="op" id="8110096">(</span><span class="string" id="8110097">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8110125">,</span>&nbsp;<span class="ident" id="8110127">a</span><span class="op" id="8110128">,</span>&nbsp;<span class="ident" id="8110130">want</span><span class="op" id="8110134">,</span>&nbsp;<span class="ident" id="8110136">js</span><span class="op" id="8110138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110142">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110145">}</span><br>
<span class="lineno"></span><span class="op" id="8110147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8110150">func</span>&nbsp;<span class="ident" id="8110155">TestJSStrEscaper</span><span class="op" id="8110171">(</span><span class="ident" id="8110172">t</span>&nbsp;<span class="op" id="8110174">*</span><span class="ident" id="8110175">testing</span><span class="op" id="8110182">.</span><span class="ident" id="8110183">T</span><span class="op" id="8110184">)</span>&nbsp;<span class="op" id="8110186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8110189">tests</span>&nbsp;<span class="op" id="8110195">:=</span>&nbsp;<span class="op" id="8110198">[</span><span class="op" id="8110199">]</span><span class="keyword" id="8110200">struct</span>&nbsp;<span class="op" id="8110207">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8110211">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110215">interface</span><span class="op" id="8110224">{</span><span class="op" id="8110225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8110229">esc</span>&nbsp;<span class="builtintype" id="8110233">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110241">}</span><span class="op" id="8110242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110246">{</span><span class="string" id="8110247">&#34;&#34;</span><span class="op" id="8110249">,</span>&nbsp;<span class="string" id="8110251">``</span><span class="op" id="8110253">}</span><span class="op" id="8110254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110258">{</span><span class="string" id="8110259">&#34;foo&#34;</span><span class="op" id="8110264">,</span>&nbsp;<span class="string" id="8110266">`foo`</span><span class="op" id="8110271">}</span><span class="op" id="8110272">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110276">{</span><span class="string" id="8110277">&#34;\u0000&#34;</span><span class="op" id="8110285">,</span>&nbsp;<span class="string" id="8110287">`\0`</span><span class="op" id="8110291">}</span><span class="op" id="8110292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110296">{</span><span class="string" id="8110297">&#34;\t&#34;</span><span class="op" id="8110301">,</span>&nbsp;<span class="string" id="8110303">`\t`</span><span class="op" id="8110307">}</span><span class="op" id="8110308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110312">{</span><span class="string" id="8110313">&#34;\n&#34;</span><span class="op" id="8110317">,</span>&nbsp;<span class="string" id="8110319">`\n`</span><span class="op" id="8110323">}</span><span class="op" id="8110324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110328">{</span><span class="string" id="8110329">&#34;\r&#34;</span><span class="op" id="8110333">,</span>&nbsp;<span class="string" id="8110335">`\r`</span><span class="op" id="8110339">}</span><span class="op" id="8110340">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110344">{</span><span class="string" id="8110345">&#34;\u2028&#34;</span><span class="op" id="8110353">,</span>&nbsp;<span class="string" id="8110355">`\u2028`</span><span class="op" id="8110363">}</span><span class="op" id="8110364">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110368">{</span><span class="string" id="8110369">&#34;\u2029&#34;</span><span class="op" id="8110377">,</span>&nbsp;<span class="string" id="8110379">`\u2029`</span><span class="op" id="8110387">}</span><span class="op" id="8110388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110392">{</span><span class="string" id="8110393">&#34;\\&#34;</span><span class="op" id="8110397">,</span>&nbsp;<span class="string" id="8110399">`\\`</span><span class="op" id="8110403">}</span><span class="op" id="8110404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110408">{</span><span class="string" id="8110409">&#34;\\n&#34;</span><span class="op" id="8110414">,</span>&nbsp;<span class="string" id="8110416">`\\n`</span><span class="op" id="8110421">}</span><span class="op" id="8110422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110426">{</span><span class="string" id="8110427">&#34;foo\r\nbar&#34;</span><span class="op" id="8110439">,</span>&nbsp;<span class="string" id="8110441">`foo\r\nbar`</span><span class="op" id="8110453">}</span><span class="op" id="8110454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110458">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110494">{</span><span class="string" id="8110495">`&#34;`</span><span class="op" id="8110498">,</span>&nbsp;<span class="string" id="8110500">`\x22`</span><span class="op" id="8110506">}</span><span class="op" id="8110507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110511">{</span><span class="string" id="8110512">`&#39;`</span><span class="op" id="8110515">,</span>&nbsp;<span class="string" id="8110517">`\x27`</span><span class="op" id="8110523">}</span><span class="op" id="8110524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110528">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110583">{</span><span class="string" id="8110584">`&amp;amp;`</span><span class="op" id="8110591">,</span>&nbsp;<span class="string" id="8110593">`\x26amp;`</span><span class="op" id="8110603">}</span><span class="op" id="8110604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110608">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110671">{</span><span class="string" id="8110672">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8110683">,</span>&nbsp;<span class="string" id="8110685">`\x3c\/script\x3e`</span><span class="op" id="8110703">}</span><span class="op" id="8110704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110708">{</span><span class="string" id="8110709">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8110720">,</span>&nbsp;<span class="string" id="8110722">`\x3c![CDATA[`</span><span class="op" id="8110736">}</span><span class="op" id="8110737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8110741">{</span><span class="string" id="8110742">&#34;]]&gt;&#34;</span><span class="op" id="8110747">,</span>&nbsp;<span class="string" id="8110749">`]]\x3e`</span><span class="op" id="8110757">}</span><span class="op" id="8110758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110762">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110834">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110898">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8110959">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111006">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111070">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111137">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111203">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111263">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111327">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111378">{</span><span class="string" id="8111379">&#34;&lt;!--&#34;</span><span class="op" id="8111385">,</span>&nbsp;<span class="string" id="8111387">`\x3c!--`</span><span class="op" id="8111396">}</span><span class="op" id="8111397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111401">{</span><span class="string" id="8111402">&#34;--&gt;&#34;</span><span class="op" id="8111407">,</span>&nbsp;<span class="string" id="8111409">`--\x3e`</span><span class="op" id="8111417">}</span><span class="op" id="8111418">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111422">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111482">{</span><span class="string" id="8111483">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8111526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8111531">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8111587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111591">}</span><span class="op" id="8111592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111596">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111624">{</span><span class="string" id="8111625">&#34;foo\xA0bar&#34;</span><span class="op" id="8111637">,</span>&nbsp;<span class="string" id="8111639">&#34;foo\xA0bar&#34;</span><span class="op" id="8111651">}</span><span class="op" id="8111652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8111656">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111691">{</span><span class="string" id="8111692">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8111712">,</span>&nbsp;<span class="string" id="8111714">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8111734">}</span><span class="op" id="8111735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8111742">for</span>&nbsp;<span class="ident" id="8111746">_</span><span class="op" id="8111747">,</span>&nbsp;<span class="ident" id="8111749">test</span>&nbsp;<span class="op" id="8111754">:=</span>&nbsp;<span class="keyword" id="8111757">range</span>&nbsp;<span class="ident" id="8111763">tests</span>&nbsp;<span class="op" id="8111769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8111773">esc</span>&nbsp;<span class="op" id="8111777">:=</span>&nbsp;<span class="ident" id="8111780">jsStrEscaper</span><span class="op" id="8111792">(</span><span class="ident" id="8111793">test</span><span class="op" id="8111797">.</span><span class="ident" id="8111798">x</span><span class="op" id="8111799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8111803">if</span>&nbsp;<span class="ident" id="8111806">esc</span>&nbsp;<span class="op" id="8111810">!=</span>&nbsp;<span class="ident" id="8111813">test</span><span class="op" id="8111817">.</span><span class="ident" id="8111818">esc</span>&nbsp;<span class="op" id="8111822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8111827">t</span><span class="op" id="8111828">.</span><span class="ident" id="8111829">Errorf</span><span class="op" id="8111835">(</span><span class="string" id="8111836">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8111856">,</span>&nbsp;<span class="ident" id="8111858">test</span><span class="op" id="8111862">.</span><span class="ident" id="8111863">x</span><span class="op" id="8111864">,</span>&nbsp;<span class="ident" id="8111866">test</span><span class="op" id="8111870">.</span><span class="ident" id="8111871">esc</span><span class="op" id="8111874">,</span>&nbsp;<span class="ident" id="8111876">esc</span><span class="op" id="8111879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111883">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111886">}</span><br>
<span class="lineno"></span><span class="op" id="8111888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8111891">func</span>&nbsp;<span class="ident" id="8111896">TestJSRegexpEscaper</span><span class="op" id="8111915">(</span><span class="ident" id="8111916">t</span>&nbsp;<span class="op" id="8111918">*</span><span class="ident" id="8111919">testing</span><span class="op" id="8111926">.</span><span class="ident" id="8111927">T</span><span class="op" id="8111928">)</span>&nbsp;<span class="op" id="8111930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8111933">tests</span>&nbsp;<span class="op" id="8111939">:=</span>&nbsp;<span class="op" id="8111942">[</span><span class="op" id="8111943">]</span><span class="keyword" id="8111944">struct</span>&nbsp;<span class="op" id="8111951">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8111955">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111959">interface</span><span class="op" id="8111968">{</span><span class="op" id="8111969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8111973">esc</span>&nbsp;<span class="builtintype" id="8111977">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111985">}</span><span class="op" id="8111986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8111990">{</span><span class="string" id="8111991">&#34;&#34;</span><span class="op" id="8111993">,</span>&nbsp;<span class="string" id="8111995">`(?:)`</span><span class="op" id="8112001">}</span><span class="op" id="8112002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112006">{</span><span class="string" id="8112007">&#34;foo&#34;</span><span class="op" id="8112012">,</span>&nbsp;<span class="string" id="8112014">`foo`</span><span class="op" id="8112019">}</span><span class="op" id="8112020">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112024">{</span><span class="string" id="8112025">&#34;\u0000&#34;</span><span class="op" id="8112033">,</span>&nbsp;<span class="string" id="8112035">`\0`</span><span class="op" id="8112039">}</span><span class="op" id="8112040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112044">{</span><span class="string" id="8112045">&#34;\t&#34;</span><span class="op" id="8112049">,</span>&nbsp;<span class="string" id="8112051">`\t`</span><span class="op" id="8112055">}</span><span class="op" id="8112056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112060">{</span><span class="string" id="8112061">&#34;\n&#34;</span><span class="op" id="8112065">,</span>&nbsp;<span class="string" id="8112067">`\n`</span><span class="op" id="8112071">}</span><span class="op" id="8112072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112076">{</span><span class="string" id="8112077">&#34;\r&#34;</span><span class="op" id="8112081">,</span>&nbsp;<span class="string" id="8112083">`\r`</span><span class="op" id="8112087">}</span><span class="op" id="8112088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112092">{</span><span class="string" id="8112093">&#34;\u2028&#34;</span><span class="op" id="8112101">,</span>&nbsp;<span class="string" id="8112103">`\u2028`</span><span class="op" id="8112111">}</span><span class="op" id="8112112">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112116">{</span><span class="string" id="8112117">&#34;\u2029&#34;</span><span class="op" id="8112125">,</span>&nbsp;<span class="string" id="8112127">`\u2029`</span><span class="op" id="8112135">}</span><span class="op" id="8112136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112140">{</span><span class="string" id="8112141">&#34;\\&#34;</span><span class="op" id="8112145">,</span>&nbsp;<span class="string" id="8112147">`\\`</span><span class="op" id="8112151">}</span><span class="op" id="8112152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112156">{</span><span class="string" id="8112157">&#34;\\n&#34;</span><span class="op" id="8112162">,</span>&nbsp;<span class="string" id="8112164">`\\n`</span><span class="op" id="8112169">}</span><span class="op" id="8112170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112174">{</span><span class="string" id="8112175">&#34;foo\r\nbar&#34;</span><span class="op" id="8112187">,</span>&nbsp;<span class="string" id="8112189">`foo\r\nbar`</span><span class="op" id="8112201">}</span><span class="op" id="8112202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8112206">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112242">{</span><span class="string" id="8112243">`&#34;`</span><span class="op" id="8112246">,</span>&nbsp;<span class="string" id="8112248">`\x22`</span><span class="op" id="8112254">}</span><span class="op" id="8112255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112259">{</span><span class="string" id="8112260">`&#39;`</span><span class="op" id="8112263">,</span>&nbsp;<span class="string" id="8112265">`\x27`</span><span class="op" id="8112271">}</span><span class="op" id="8112272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8112276">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112331">{</span><span class="string" id="8112332">`&amp;amp;`</span><span class="op" id="8112339">,</span>&nbsp;<span class="string" id="8112341">`\x26amp;`</span><span class="op" id="8112351">}</span><span class="op" id="8112352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8112356">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112419">{</span><span class="string" id="8112420">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8112431">,</span>&nbsp;<span class="string" id="8112433">`\x3c\/script\x3e`</span><span class="op" id="8112451">}</span><span class="op" id="8112452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112456">{</span><span class="string" id="8112457">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8112468">,</span>&nbsp;<span class="string" id="8112470">`\x3c!\[CDATA\[`</span><span class="op" id="8112486">}</span><span class="op" id="8112487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112491">{</span><span class="string" id="8112492">&#34;]]&gt;&#34;</span><span class="op" id="8112497">,</span>&nbsp;<span class="string" id="8112499">`\]\]\x3e`</span><span class="op" id="8112509">}</span><span class="op" id="8112510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8112514">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112540">{</span><span class="string" id="8112541">&#34;&lt;!--&#34;</span><span class="op" id="8112547">,</span>&nbsp;<span class="string" id="8112549">`\x3c!\-\-`</span><span class="op" id="8112560">}</span><span class="op" id="8112561">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112565">{</span><span class="string" id="8112566">&#34;--&gt;&#34;</span><span class="op" id="8112571">,</span>&nbsp;<span class="string" id="8112573">`\-\-\x3e`</span><span class="op" id="8112583">}</span><span class="op" id="8112584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112588">{</span><span class="string" id="8112589">&#34;*&#34;</span><span class="op" id="8112592">,</span>&nbsp;<span class="string" id="8112594">`\*`</span><span class="op" id="8112598">}</span><span class="op" id="8112599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112603">{</span><span class="string" id="8112604">&#34;+&#34;</span><span class="op" id="8112607">,</span>&nbsp;<span class="string" id="8112609">`\x2b`</span><span class="op" id="8112615">}</span><span class="op" id="8112616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112620">{</span><span class="string" id="8112621">&#34;?&#34;</span><span class="op" id="8112624">,</span>&nbsp;<span class="string" id="8112626">`\?`</span><span class="op" id="8112630">}</span><span class="op" id="8112631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112635">{</span><span class="string" id="8112636">&#34;[](){}&#34;</span><span class="op" id="8112644">,</span>&nbsp;<span class="string" id="8112646">`\[\]\(\)\{\}`</span><span class="op" id="8112660">}</span><span class="op" id="8112661">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112665">{</span><span class="string" id="8112666">&#34;$foo|x.y&#34;</span><span class="op" id="8112676">,</span>&nbsp;<span class="string" id="8112678">`\$foo\|x\.y`</span><span class="op" id="8112691">}</span><span class="op" id="8112692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112696">{</span><span class="string" id="8112697">&#34;x^y&#34;</span><span class="op" id="8112702">,</span>&nbsp;<span class="string" id="8112704">`x\^y`</span><span class="op" id="8112710">}</span><span class="op" id="8112711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8112718">for</span>&nbsp;<span class="ident" id="8112722">_</span><span class="op" id="8112723">,</span>&nbsp;<span class="ident" id="8112725">test</span>&nbsp;<span class="op" id="8112730">:=</span>&nbsp;<span class="keyword" id="8112733">range</span>&nbsp;<span class="ident" id="8112739">tests</span>&nbsp;<span class="op" id="8112745">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8112749">esc</span>&nbsp;<span class="op" id="8112753">:=</span>&nbsp;<span class="ident" id="8112756">jsRegexpEscaper</span><span class="op" id="8112771">(</span><span class="ident" id="8112772">test</span><span class="op" id="8112776">.</span><span class="ident" id="8112777">x</span><span class="op" id="8112778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8112782">if</span>&nbsp;<span class="ident" id="8112785">esc</span>&nbsp;<span class="op" id="8112789">!=</span>&nbsp;<span class="ident" id="8112792">test</span><span class="op" id="8112796">.</span><span class="ident" id="8112797">esc</span>&nbsp;<span class="op" id="8112801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8112806">t</span><span class="op" id="8112807">.</span><span class="ident" id="8112808">Errorf</span><span class="op" id="8112814">(</span><span class="string" id="8112815">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8112835">,</span>&nbsp;<span class="ident" id="8112837">test</span><span class="op" id="8112841">.</span><span class="ident" id="8112842">x</span><span class="op" id="8112843">,</span>&nbsp;<span class="ident" id="8112845">test</span><span class="op" id="8112849">.</span><span class="ident" id="8112850">esc</span><span class="op" id="8112853">,</span>&nbsp;<span class="ident" id="8112855">esc</span><span class="op" id="8112858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8112865">}</span><br>
<span class="lineno">265</span><span class="op" id="8112867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8112870">func</span>&nbsp;<span class="ident" id="8112875">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8112918">(</span><span class="ident" id="8112919">t</span>&nbsp;<span class="op" id="8112921">*</span><span class="ident" id="8112922">testing</span><span class="op" id="8112929">.</span><span class="ident" id="8112930">T</span><span class="op" id="8112931">)</span>&nbsp;<span class="op" id="8112933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8112936">input</span>&nbsp;<span class="op" id="8112942">:=</span>&nbsp;<span class="op" id="8112945">(</span><span class="string" id="8112946">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8113007">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113011">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8113078">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113082">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8113101">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113105">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8113124">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113128">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8113147">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113151">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8113170">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113174">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8113193">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113197">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8113219">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113223">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8113265">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113269">tests</span>&nbsp;<span class="op" id="8113275">:=</span>&nbsp;<span class="op" id="8113278">[</span><span class="op" id="8113279">]</span><span class="keyword" id="8113280">struct</span>&nbsp;<span class="op" id="8113287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113291">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8113299">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113308">escaper</span>&nbsp;<span class="keyword" id="8113316">func</span><span class="op" id="8113320">(</span><span class="op" id="8113321">...</span><span class="keyword" id="8113324">interface</span><span class="op" id="8113333">{</span><span class="op" id="8113334">}</span><span class="op" id="8113335">)</span>&nbsp;<span class="builtintype" id="8113337">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113346">escaped</span>&nbsp;<span class="builtintype" id="8113354">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8113362">}</span><span class="op" id="8113363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8113367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113372">&#34;jsStrEscaper&#34;</span><span class="op" id="8113386">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113391">jsStrEscaper</span><span class="op" id="8113403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113408">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8113442">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113448">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8113480">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113486">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8113521">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113527">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8113562">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113568">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8113600">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113606">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8113631">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113637">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8113656">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113662">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8113682">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113688">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8113707">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113713">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8113735">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113741">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8113785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8113789">}</span><span class="op" id="8113790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8113794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113799">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8113816">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8113821">jsRegexpEscaper</span><span class="op" id="8113836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113841">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8113875">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113881">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8113913">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113919">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8113954">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8113960">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8113995">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114001">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8114039">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114045">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8114071">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114077">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8114096">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114102">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8114125">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114131">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8114150">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114156">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8114177">+</span>&nbsp;<span class="string" id="8114179">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8114188">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8114194">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8114238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114242">}</span><span class="op" id="8114243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114250">for</span>&nbsp;<span class="ident" id="8114254">_</span><span class="op" id="8114255">,</span>&nbsp;<span class="ident" id="8114257">test</span>&nbsp;<span class="op" id="8114262">:=</span>&nbsp;<span class="keyword" id="8114265">range</span>&nbsp;<span class="ident" id="8114271">tests</span>&nbsp;<span class="op" id="8114277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114281">if</span>&nbsp;<span class="ident" id="8114284">s</span>&nbsp;<span class="op" id="8114286">:=</span>&nbsp;<span class="ident" id="8114289">test</span><span class="op" id="8114293">.</span><span class="ident" id="8114294">escaper</span><span class="op" id="8114301">(</span><span class="ident" id="8114302">input</span><span class="op" id="8114307">)</span><span class="op" id="8114308">;</span>&nbsp;<span class="ident" id="8114310">s</span>&nbsp;<span class="op" id="8114312">!=</span>&nbsp;<span class="ident" id="8114315">test</span><span class="op" id="8114319">.</span><span class="ident" id="8114320">escaped</span>&nbsp;<span class="op" id="8114328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8114333">t</span><span class="op" id="8114334">.</span><span class="ident" id="8114335">Errorf</span><span class="op" id="8114341">(</span><span class="string" id="8114342">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8114374">,</span>&nbsp;<span class="ident" id="8114376">test</span><span class="op" id="8114380">.</span><span class="ident" id="8114381">name</span><span class="op" id="8114385">,</span>&nbsp;<span class="ident" id="8114387">test</span><span class="op" id="8114391">.</span><span class="ident" id="8114392">escaped</span><span class="op" id="8114399">,</span>&nbsp;<span class="ident" id="8114401">s</span><span class="op" id="8114402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114418">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8114423">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8114473">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114522">var</span>&nbsp;<span class="ident" id="8114526">buf</span>&nbsp;<span class="ident" id="8114530">bytes</span><span class="op" id="8114535">.</span><span class="ident" id="8114536">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114545">for</span>&nbsp;<span class="ident" id="8114549">_</span><span class="op" id="8114550">,</span>&nbsp;<span class="ident" id="8114552">c</span>&nbsp;<span class="op" id="8114554">:=</span>&nbsp;<span class="keyword" id="8114557">range</span>&nbsp;<span class="ident" id="8114563">input</span>&nbsp;<span class="op" id="8114569">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8114574">buf</span><span class="op" id="8114577">.</span><span class="ident" id="8114578">WriteString</span><span class="op" id="8114589">(</span><span class="ident" id="8114590">test</span><span class="op" id="8114594">.</span><span class="ident" id="8114595">escaper</span><span class="op" id="8114602">(</span><span class="builtintype" id="8114603">string</span><span class="op" id="8114609">(</span><span class="ident" id="8114610">c</span><span class="op" id="8114611">)</span><span class="op" id="8114612">)</span><span class="op" id="8114613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114622">if</span>&nbsp;<span class="ident" id="8114625">s</span>&nbsp;<span class="op" id="8114627">:=</span>&nbsp;<span class="ident" id="8114630">buf</span><span class="op" id="8114633">.</span><span class="ident" id="8114634">String</span><span class="op" id="8114640">(</span><span class="op" id="8114641">)</span><span class="op" id="8114642">;</span>&nbsp;<span class="ident" id="8114644">s</span>&nbsp;<span class="op" id="8114646">!=</span>&nbsp;<span class="ident" id="8114649">test</span><span class="op" id="8114653">.</span><span class="ident" id="8114654">escaped</span>&nbsp;<span class="op" id="8114662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8114667">t</span><span class="op" id="8114668">.</span><span class="ident" id="8114669">Errorf</span><span class="op" id="8114675">(</span><span class="string" id="8114676">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8114713">,</span>&nbsp;<span class="ident" id="8114715">test</span><span class="op" id="8114719">.</span><span class="ident" id="8114720">name</span><span class="op" id="8114724">,</span>&nbsp;<span class="ident" id="8114726">test</span><span class="op" id="8114730">.</span><span class="ident" id="8114731">escaped</span><span class="op" id="8114738">,</span>&nbsp;<span class="ident" id="8114740">s</span><span class="op" id="8114741">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114746">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114760">}</span><br>
<span class="lineno"></span><span class="op" id="8114762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8114765">func</span>&nbsp;<span class="ident" id="8114770">BenchmarkJSValEscaperWithNum</span><span class="op" id="8114798">(</span><span class="ident" id="8114799">b</span>&nbsp;<span class="op" id="8114801">*</span><span class="ident" id="8114802">testing</span><span class="op" id="8114809">.</span><span class="ident" id="8114810">B</span><span class="op" id="8114811">)</span>&nbsp;<span class="op" id="8114813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114816">for</span>&nbsp;<span class="ident" id="8114820">i</span>&nbsp;<span class="op" id="8114822">:=</span>&nbsp;<span class="num" id="8114825">0</span><span class="op" id="8114826">;</span>&nbsp;<span class="ident" id="8114828">i</span>&nbsp;<span class="op" id="8114830">&lt;</span>&nbsp;<span class="ident" id="8114832">b</span><span class="op" id="8114833">.</span><span class="ident" id="8114834">N</span><span class="op" id="8114835">;</span>&nbsp;<span class="ident" id="8114837">i</span><span class="op" id="8114838">++</span>&nbsp;<span class="op" id="8114841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8114845">jsValEscaper</span><span class="op" id="8114857">(</span><span class="num" id="8114858">3.141592654</span><span class="op" id="8114869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8114872">}</span><br>
<span class="lineno"></span><span class="op" id="8114874">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8114877">func</span>&nbsp;<span class="ident" id="8114882">BenchmarkJSValEscaperWithStr</span><span class="op" id="8114910">(</span><span class="ident" id="8114911">b</span>&nbsp;<span class="op" id="8114913">*</span><span class="ident" id="8114914">testing</span><span class="op" id="8114921">.</span><span class="ident" id="8114922">B</span><span class="op" id="8114923">)</span>&nbsp;<span class="op" id="8114925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8114928">for</span>&nbsp;<span class="ident" id="8114932">i</span>&nbsp;<span class="op" id="8114934">:=</span>&nbsp;<span class="num" id="8114937">0</span><span class="op" id="8114938">;</span>&nbsp;<span class="ident" id="8114940">i</span>&nbsp;<span class="op" id="8114942">&lt;</span>&nbsp;<span class="ident" id="8114944">b</span><span class="op" id="8114945">.</span><span class="ident" id="8114946">N</span><span class="op" id="8114947">;</span>&nbsp;<span class="ident" id="8114949">i</span><span class="op" id="8114950">++</span>&nbsp;<span class="op" id="8114953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8114957">jsValEscaper</span><span class="op" id="8114969">(</span><span class="string" id="8114970">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8115091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115094">}</span><br>
<span class="lineno">345</span><span class="op" id="8115096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8115099">func</span>&nbsp;<span class="ident" id="8115104">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8115142">(</span><span class="ident" id="8115143">b</span>&nbsp;<span class="op" id="8115145">*</span><span class="ident" id="8115146">testing</span><span class="op" id="8115153">.</span><span class="ident" id="8115154">B</span><span class="op" id="8115155">)</span>&nbsp;<span class="op" id="8115157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8115160">for</span>&nbsp;<span class="ident" id="8115164">i</span>&nbsp;<span class="op" id="8115166">:=</span>&nbsp;<span class="num" id="8115169">0</span><span class="op" id="8115170">;</span>&nbsp;<span class="ident" id="8115172">i</span>&nbsp;<span class="op" id="8115174">&lt;</span>&nbsp;<span class="ident" id="8115176">b</span><span class="op" id="8115177">.</span><span class="ident" id="8115178">N</span><span class="op" id="8115179">;</span>&nbsp;<span class="ident" id="8115181">i</span><span class="op" id="8115182">++</span>&nbsp;<span class="op" id="8115185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115189">jsValEscaper</span><span class="op" id="8115201">(</span><span class="string" id="8115202">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8115248">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115251">}</span><br>
<span class="lineno"></span><span class="op" id="8115253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8115256">func</span>&nbsp;<span class="ident" id="8115261">BenchmarkJSValEscaperWithObj</span><span class="op" id="8115289">(</span><span class="ident" id="8115290">b</span>&nbsp;<span class="op" id="8115292">*</span><span class="ident" id="8115293">testing</span><span class="op" id="8115300">.</span><span class="ident" id="8115301">B</span><span class="op" id="8115302">)</span>&nbsp;<span class="op" id="8115304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115307">o</span>&nbsp;<span class="op" id="8115309">:=</span>&nbsp;<span class="keyword" id="8115312">struct</span>&nbsp;<span class="op" id="8115319">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115323">S</span>&nbsp;<span class="builtintype" id="8115325">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115334">N</span>&nbsp;<span class="builtintype" id="8115336">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115341">}</span><span class="op" id="8115342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8115346">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8115473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8115477">42</span><span class="op" id="8115479">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8115485">for</span>&nbsp;<span class="ident" id="8115489">i</span>&nbsp;<span class="op" id="8115491">:=</span>&nbsp;<span class="num" id="8115494">0</span><span class="op" id="8115495">;</span>&nbsp;<span class="ident" id="8115497">i</span>&nbsp;<span class="op" id="8115499">&lt;</span>&nbsp;<span class="ident" id="8115501">b</span><span class="op" id="8115502">.</span><span class="ident" id="8115503">N</span><span class="op" id="8115504">;</span>&nbsp;<span class="ident" id="8115506">i</span><span class="op" id="8115507">++</span>&nbsp;<span class="op" id="8115510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115514">jsValEscaper</span><span class="op" id="8115526">(</span><span class="ident" id="8115527">o</span><span class="op" id="8115528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115531">}</span><br>
<span class="lineno"></span><span class="op" id="8115533">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8115536">func</span>&nbsp;<span class="ident" id="8115541">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8115579">(</span><span class="ident" id="8115580">b</span>&nbsp;<span class="op" id="8115582">*</span><span class="ident" id="8115583">testing</span><span class="op" id="8115590">.</span><span class="ident" id="8115591">B</span><span class="op" id="8115592">)</span>&nbsp;<span class="op" id="8115594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115597">o</span>&nbsp;<span class="op" id="8115599">:=</span>&nbsp;<span class="keyword" id="8115602">struct</span>&nbsp;<span class="op" id="8115609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115613">S</span>&nbsp;<span class="builtintype" id="8115615">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115624">N</span>&nbsp;<span class="builtintype" id="8115626">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115631">}</span><span class="op" id="8115632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8115636">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8115682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8115686">42</span><span class="op" id="8115688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8115694">for</span>&nbsp;<span class="ident" id="8115698">i</span>&nbsp;<span class="op" id="8115700">:=</span>&nbsp;<span class="num" id="8115703">0</span><span class="op" id="8115704">;</span>&nbsp;<span class="ident" id="8115706">i</span>&nbsp;<span class="op" id="8115708">&lt;</span>&nbsp;<span class="ident" id="8115710">b</span><span class="op" id="8115711">.</span><span class="ident" id="8115712">N</span><span class="op" id="8115713">;</span>&nbsp;<span class="ident" id="8115715">i</span><span class="op" id="8115716">++</span>&nbsp;<span class="op" id="8115719">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115723">jsValEscaper</span><span class="op" id="8115735">(</span><span class="ident" id="8115736">o</span><span class="op" id="8115737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115740">}</span><br>
<span class="lineno"></span><span class="op" id="8115742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8115745">func</span>&nbsp;<span class="ident" id="8115750">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8115781">(</span><span class="ident" id="8115782">b</span>&nbsp;<span class="op" id="8115784">*</span><span class="ident" id="8115785">testing</span><span class="op" id="8115792">.</span><span class="ident" id="8115793">B</span><span class="op" id="8115794">)</span>&nbsp;<span class="op" id="8115796">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8115799">for</span>&nbsp;<span class="ident" id="8115803">i</span>&nbsp;<span class="op" id="8115805">:=</span>&nbsp;<span class="num" id="8115808">0</span><span class="op" id="8115809">;</span>&nbsp;<span class="ident" id="8115811">i</span>&nbsp;<span class="op" id="8115813">&lt;</span>&nbsp;<span class="ident" id="8115815">b</span><span class="op" id="8115816">.</span><span class="ident" id="8115817">N</span><span class="op" id="8115818">;</span>&nbsp;<span class="ident" id="8115820">i</span><span class="op" id="8115821">++</span>&nbsp;<span class="op" id="8115824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115828">jsStrEscaper</span><span class="op" id="8115840">(</span><span class="string" id="8115841">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8115888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115891">}</span><br>
<span class="lineno"></span><span class="op" id="8115893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8115896">func</span>&nbsp;<span class="ident" id="8115901">BenchmarkJSStrEscaper</span><span class="op" id="8115922">(</span><span class="ident" id="8115923">b</span>&nbsp;<span class="op" id="8115925">*</span><span class="ident" id="8115926">testing</span><span class="op" id="8115933">.</span><span class="ident" id="8115934">B</span><span class="op" id="8115935">)</span>&nbsp;<span class="op" id="8115937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8115940">for</span>&nbsp;<span class="ident" id="8115944">i</span>&nbsp;<span class="op" id="8115946">:=</span>&nbsp;<span class="num" id="8115949">0</span><span class="op" id="8115950">;</span>&nbsp;<span class="ident" id="8115952">i</span>&nbsp;<span class="op" id="8115954">&lt;</span>&nbsp;<span class="ident" id="8115956">b</span><span class="op" id="8115957">.</span><span class="ident" id="8115958">N</span><span class="op" id="8115959">;</span>&nbsp;<span class="ident" id="8115961">i</span><span class="op" id="8115962">++</span>&nbsp;<span class="op" id="8115965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8115969">jsStrEscaper</span><span class="op" id="8115981">(</span><span class="string" id="8115982">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8116103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8116106">}</span><br>
<span class="lineno"></span><span class="op" id="8116108">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8116111">func</span>&nbsp;<span class="ident" id="8116116">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8116150">(</span><span class="ident" id="8116151">b</span>&nbsp;<span class="op" id="8116153">*</span><span class="ident" id="8116154">testing</span><span class="op" id="8116161">.</span><span class="ident" id="8116162">B</span><span class="op" id="8116163">)</span>&nbsp;<span class="op" id="8116165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8116168">for</span>&nbsp;<span class="ident" id="8116172">i</span>&nbsp;<span class="op" id="8116174">:=</span>&nbsp;<span class="num" id="8116177">0</span><span class="op" id="8116178">;</span>&nbsp;<span class="ident" id="8116180">i</span>&nbsp;<span class="op" id="8116182">&lt;</span>&nbsp;<span class="ident" id="8116184">b</span><span class="op" id="8116185">.</span><span class="ident" id="8116186">N</span><span class="op" id="8116187">;</span>&nbsp;<span class="ident" id="8116189">i</span><span class="op" id="8116190">++</span>&nbsp;<span class="op" id="8116193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8116197">jsRegexpEscaper</span><span class="op" id="8116212">(</span><span class="string" id="8116213">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8116259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8116262">}</span><br>
<span class="lineno">395</span><span class="op" id="8116264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8116267">func</span>&nbsp;<span class="ident" id="8116272">BenchmarkJSRegexpEscaper</span><span class="op" id="8116296">(</span><span class="ident" id="8116297">b</span>&nbsp;<span class="op" id="8116299">*</span><span class="ident" id="8116300">testing</span><span class="op" id="8116307">.</span><span class="ident" id="8116308">B</span><span class="op" id="8116309">)</span>&nbsp;<span class="op" id="8116311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8116314">for</span>&nbsp;<span class="ident" id="8116318">i</span>&nbsp;<span class="op" id="8116320">:=</span>&nbsp;<span class="num" id="8116323">0</span><span class="op" id="8116324">;</span>&nbsp;<span class="ident" id="8116326">i</span>&nbsp;<span class="op" id="8116328">&lt;</span>&nbsp;<span class="ident" id="8116330">b</span><span class="op" id="8116331">.</span><span class="ident" id="8116332">N</span><span class="op" id="8116333">;</span>&nbsp;<span class="ident" id="8116335">i</span><span class="op" id="8116336">++</span>&nbsp;<span class="op" id="8116339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8116343">jsRegexpEscaper</span><span class="op" id="8116358">(</span><span class="string" id="8116359">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8116480">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8116483">}</span><br>
<span class="lineno"></span><span class="op" id="8116485">}</span>
</div>
</body>
</html>
