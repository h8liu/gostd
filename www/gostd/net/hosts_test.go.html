<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7789910">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7789965">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7790019">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7790070">package</span>&nbsp;<span class="ident" id="7790078">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790083">import</span>&nbsp;<span class="op" id="7790090">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790093">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7790101">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7790111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790114">type</span>&nbsp;<span class="ident" id="7790119">hostTest</span>&nbsp;<span class="keyword" id="7790128">struct</span>&nbsp;<span class="op" id="7790135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790138">host</span>&nbsp;<span class="builtintype" id="7790143">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790151">ips</span>&nbsp;&nbsp;<span class="op" id="7790156">[</span><span class="op" id="7790157">]</span><span class="ident" id="7790158">IP</span><br>
<span class="lineno">15</span><span class="op" id="7790161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7790164">var</span>&nbsp;<span class="ident" id="7790168">hosttests</span>&nbsp;<span class="op" id="7790178">=</span>&nbsp;<span class="op" id="7790180">[</span><span class="op" id="7790181">]</span><span class="ident" id="7790182">hostTest</span><span class="op" id="7790190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790193">{</span><span class="string" id="7790194">&#34;odin&#34;</span><span class="op" id="7790200">,</span>&nbsp;<span class="op" id="7790202">[</span><span class="op" id="7790203">]</span><span class="ident" id="7790204">IP</span><span class="op" id="7790206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790210">IPv4</span><span class="op" id="7790214">(</span><span class="num" id="7790215">127</span><span class="op" id="7790218">,</span>&nbsp;<span class="num" id="7790220">0</span><span class="op" id="7790221">,</span>&nbsp;<span class="num" id="7790223">0</span><span class="op" id="7790224">,</span>&nbsp;<span class="num" id="7790226">2</span><span class="op" id="7790227">)</span><span class="op" id="7790228">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790232">IPv4</span><span class="op" id="7790236">(</span><span class="num" id="7790237">127</span><span class="op" id="7790240">,</span>&nbsp;<span class="num" id="7790242">0</span><span class="op" id="7790243">,</span>&nbsp;<span class="num" id="7790245">0</span><span class="op" id="7790246">,</span>&nbsp;<span class="num" id="7790248">3</span><span class="op" id="7790249">)</span><span class="op" id="7790250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790254">ParseIP</span><span class="op" id="7790261">(</span><span class="string" id="7790262">&#34;::2&#34;</span><span class="op" id="7790267">)</span><span class="op" id="7790268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790271">}</span><span class="op" id="7790272">}</span><span class="op" id="7790273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790276">{</span><span class="string" id="7790277">&#34;thor&#34;</span><span class="op" id="7790283">,</span>&nbsp;<span class="op" id="7790285">[</span><span class="op" id="7790286">]</span><span class="ident" id="7790287">IP</span><span class="op" id="7790289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790293">IPv4</span><span class="op" id="7790297">(</span><span class="num" id="7790298">127</span><span class="op" id="7790301">,</span>&nbsp;<span class="num" id="7790303">1</span><span class="op" id="7790304">,</span>&nbsp;<span class="num" id="7790306">1</span><span class="op" id="7790307">,</span>&nbsp;<span class="num" id="7790309">1</span><span class="op" id="7790310">)</span><span class="op" id="7790311">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790314">}</span><span class="op" id="7790315">}</span><span class="op" id="7790316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790319">{</span><span class="string" id="7790320">&#34;loki&#34;</span><span class="op" id="7790326">,</span>&nbsp;<span class="op" id="7790328">[</span><span class="op" id="7790329">]</span><span class="ident" id="7790330">IP</span><span class="op" id="7790332">{</span><span class="op" id="7790333">}</span><span class="op" id="7790334">}</span><span class="op" id="7790335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790338">{</span><span class="string" id="7790339">&#34;ullr&#34;</span><span class="op" id="7790345">,</span>&nbsp;<span class="op" id="7790347">[</span><span class="op" id="7790348">]</span><span class="ident" id="7790349">IP</span><span class="op" id="7790351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790355">IPv4</span><span class="op" id="7790359">(</span><span class="num" id="7790360">127</span><span class="op" id="7790363">,</span>&nbsp;<span class="num" id="7790365">1</span><span class="op" id="7790366">,</span>&nbsp;<span class="num" id="7790368">1</span><span class="op" id="7790369">,</span>&nbsp;<span class="num" id="7790371">2</span><span class="op" id="7790372">)</span><span class="op" id="7790373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790376">}</span><span class="op" id="7790377">}</span><span class="op" id="7790378">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790381">{</span><span class="string" id="7790382">&#34;ullrhost&#34;</span><span class="op" id="7790392">,</span>&nbsp;<span class="op" id="7790394">[</span><span class="op" id="7790395">]</span><span class="ident" id="7790396">IP</span><span class="op" id="7790398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790402">IPv4</span><span class="op" id="7790406">(</span><span class="num" id="7790407">127</span><span class="op" id="7790410">,</span>&nbsp;<span class="num" id="7790412">1</span><span class="op" id="7790413">,</span>&nbsp;<span class="num" id="7790415">1</span><span class="op" id="7790416">,</span>&nbsp;<span class="num" id="7790418">2</span><span class="op" id="7790419">)</span><span class="op" id="7790420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790423">}</span><span class="op" id="7790424">}</span><span class="op" id="7790425">,</span><br>
<span class="lineno"></span><span class="op" id="7790427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7790430">func</span>&nbsp;<span class="ident" id="7790435">TestLookupStaticHost</span><span class="op" id="7790455">(</span><span class="ident" id="7790456">t</span>&nbsp;<span class="op" id="7790458">*</span><span class="ident" id="7790459">testing</span><span class="op" id="7790466">.</span><span class="ident" id="7790467">T</span><span class="op" id="7790468">)</span>&nbsp;<span class="op" id="7790470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790473">p</span>&nbsp;<span class="op" id="7790475">:=</span>&nbsp;<span class="ident" id="7790478">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790489">hostsPath</span>&nbsp;<span class="op" id="7790499">=</span>&nbsp;<span class="string" id="7790501">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790519">for</span>&nbsp;<span class="ident" id="7790523">i</span>&nbsp;<span class="op" id="7790525">:=</span>&nbsp;<span class="num" id="7790528">0</span><span class="op" id="7790529">;</span>&nbsp;<span class="ident" id="7790531">i</span>&nbsp;<span class="op" id="7790533">&lt;</span>&nbsp;<span class="builtinfunc" id="7790535">len</span><span class="op" id="7790538">(</span><span class="ident" id="7790539">hosttests</span><span class="op" id="7790548">)</span><span class="op" id="7790549">;</span>&nbsp;<span class="ident" id="7790551">i</span><span class="op" id="7790552">++</span>&nbsp;<span class="op" id="7790555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790559">tt</span>&nbsp;<span class="op" id="7790562">:=</span>&nbsp;<span class="ident" id="7790565">hosttests</span><span class="op" id="7790574">[</span><span class="ident" id="7790575">i</span><span class="op" id="7790576">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790580">ips</span>&nbsp;<span class="op" id="7790584">:=</span>&nbsp;<span class="ident" id="7790587">lookupStaticHost</span><span class="op" id="7790603">(</span><span class="ident" id="7790604">tt</span><span class="op" id="7790606">.</span><span class="ident" id="7790607">host</span><span class="op" id="7790611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790615">if</span>&nbsp;<span class="builtinfunc" id="7790618">len</span><span class="op" id="7790621">(</span><span class="ident" id="7790622">ips</span><span class="op" id="7790625">)</span>&nbsp;<span class="op" id="7790627">!=</span>&nbsp;<span class="builtinfunc" id="7790630">len</span><span class="op" id="7790633">(</span><span class="ident" id="7790634">tt</span><span class="op" id="7790636">.</span><span class="ident" id="7790637">ips</span><span class="op" id="7790640">)</span>&nbsp;<span class="op" id="7790642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790647">t</span><span class="op" id="7790648">.</span><span class="ident" id="7790649">Errorf</span><span class="op" id="7790655">(</span><span class="string" id="7790656">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7790682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7790688">len</span><span class="op" id="7790691">(</span><span class="ident" id="7790692">ips</span><span class="op" id="7790695">)</span><span class="op" id="7790696">,</span>&nbsp;<span class="builtinfunc" id="7790698">len</span><span class="op" id="7790701">(</span><span class="ident" id="7790702">tt</span><span class="op" id="7790704">.</span><span class="ident" id="7790705">ips</span><span class="op" id="7790708">)</span><span class="op" id="7790709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790714">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790729">for</span>&nbsp;<span class="ident" id="7790733">k</span><span class="op" id="7790734">,</span>&nbsp;<span class="ident" id="7790736">v</span>&nbsp;<span class="op" id="7790738">:=</span>&nbsp;<span class="keyword" id="7790741">range</span>&nbsp;<span class="ident" id="7790747">ips</span>&nbsp;<span class="op" id="7790751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7790756">if</span>&nbsp;<span class="ident" id="7790759">tt</span><span class="op" id="7790761">.</span><span class="ident" id="7790762">ips</span><span class="op" id="7790765">[</span><span class="ident" id="7790766">k</span><span class="op" id="7790767">]</span><span class="op" id="7790768">.</span><span class="ident" id="7790769">String</span><span class="op" id="7790775">(</span><span class="op" id="7790776">)</span>&nbsp;<span class="op" id="7790778">!=</span>&nbsp;<span class="ident" id="7790781">v</span>&nbsp;<span class="op" id="7790783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790789">t</span><span class="op" id="7790790">.</span><span class="ident" id="7790791">Errorf</span><span class="op" id="7790797">(</span><span class="string" id="7790798">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7790834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790841">tt</span><span class="op" id="7790843">.</span><span class="ident" id="7790844">host</span><span class="op" id="7790848">,</span>&nbsp;<span class="ident" id="7790850">v</span><span class="op" id="7790851">,</span>&nbsp;<span class="ident" id="7790853">tt</span><span class="op" id="7790855">.</span><span class="ident" id="7790856">ips</span><span class="op" id="7790859">[</span><span class="ident" id="7790860">k</span><span class="op" id="7790861">]</span><span class="op" id="7790862">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7790874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790877">hostsPath</span>&nbsp;<span class="op" id="7790887">=</span>&nbsp;<span class="ident" id="7790889">p</span><br>
<span class="lineno"></span><span class="op" id="7790891">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="7790894">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="7790948">func</span>&nbsp;<span class="ident" id="7790953">TestSingleLineHostsFile</span><span class="op" id="7790976">(</span><span class="ident" id="7790977">t</span>&nbsp;<span class="op" id="7790979">*</span><span class="ident" id="7790980">testing</span><span class="op" id="7790987">.</span><span class="ident" id="7790988">T</span><span class="op" id="7790989">)</span>&nbsp;<span class="op" id="7790991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7790994">p</span>&nbsp;<span class="op" id="7790996">:=</span>&nbsp;<span class="ident" id="7790999">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791010">hostsPath</span>&nbsp;<span class="op" id="7791020">=</span>&nbsp;<span class="string" id="7791022">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791052">ips</span>&nbsp;<span class="op" id="7791056">:=</span>&nbsp;<span class="ident" id="7791059">lookupStaticHost</span><span class="op" id="7791075">(</span><span class="string" id="7791076">&#34;odin&#34;</span><span class="op" id="7791082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791085">if</span>&nbsp;<span class="builtinfunc" id="7791088">len</span><span class="op" id="7791091">(</span><span class="ident" id="7791092">ips</span><span class="op" id="7791095">)</span>&nbsp;<span class="op" id="7791097">!=</span>&nbsp;<span class="num" id="7791100">1</span>&nbsp;<span class="op" id="7791102">||</span>&nbsp;<span class="ident" id="7791105">ips</span><span class="op" id="7791108">[</span><span class="num" id="7791109">0</span><span class="op" id="7791110">]</span>&nbsp;<span class="op" id="7791112">!=</span>&nbsp;<span class="string" id="7791115">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="7791127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791131">t</span><span class="op" id="7791132">.</span><span class="ident" id="7791133">Errorf</span><span class="op" id="7791139">(</span><span class="string" id="7791140">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7791172">,</span>&nbsp;<span class="ident" id="7791174">ips</span><span class="op" id="7791177">,</span>&nbsp;<span class="op" id="7791179">[</span><span class="op" id="7791180">]</span><span class="builtintype" id="7791181">string</span><span class="op" id="7791187">{</span><span class="string" id="7791188">&#34;127.0.0.2&#34;</span><span class="op" id="7791199">}</span><span class="op" id="7791200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791203">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791207">hostsPath</span>&nbsp;<span class="op" id="7791217">=</span>&nbsp;<span class="ident" id="7791219">p</span><br>
<span class="lineno"></span><span class="op" id="7791221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791224">func</span>&nbsp;<span class="ident" id="7791229">TestLookupHost</span><span class="op" id="7791243">(</span><span class="ident" id="7791244">t</span>&nbsp;<span class="op" id="7791246">*</span><span class="ident" id="7791247">testing</span><span class="op" id="7791254">.</span><span class="ident" id="7791255">T</span><span class="op" id="7791256">)</span>&nbsp;<span class="op" id="7791258">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791261">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791320">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791378">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7791431">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791455">addrs</span><span class="op" id="7791460">,</span>&nbsp;<span class="ident" id="7791462">_</span>&nbsp;<span class="op" id="7791464">:=</span>&nbsp;<span class="ident" id="7791467">LookupHost</span><span class="op" id="7791477">(</span><span class="string" id="7791478">&#34;localhost&#34;</span><span class="op" id="7791489">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791492">sort</span><span class="op" id="7791496">.</span><span class="ident" id="7791497">Strings</span><span class="op" id="7791504">(</span><span class="ident" id="7791505">addrs</span><span class="op" id="7791510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791513">for</span>&nbsp;<span class="ident" id="7791517">i</span>&nbsp;<span class="op" id="7791519">:=</span>&nbsp;<span class="num" id="7791522">0</span><span class="op" id="7791523">;</span>&nbsp;<span class="ident" id="7791525">i</span><span class="op" id="7791526">+</span><span class="num" id="7791527">1</span>&nbsp;<span class="op" id="7791529">&lt;</span>&nbsp;<span class="builtinfunc" id="7791531">len</span><span class="op" id="7791534">(</span><span class="ident" id="7791535">addrs</span><span class="op" id="7791540">)</span><span class="op" id="7791541">;</span>&nbsp;<span class="ident" id="7791543">i</span><span class="op" id="7791544">++</span>&nbsp;<span class="op" id="7791547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7791551">if</span>&nbsp;<span class="ident" id="7791554">addrs</span><span class="op" id="7791559">[</span><span class="ident" id="7791560">i</span><span class="op" id="7791561">]</span>&nbsp;<span class="op" id="7791563">==</span>&nbsp;<span class="ident" id="7791566">addrs</span><span class="op" id="7791571">[</span><span class="ident" id="7791572">i</span><span class="op" id="7791573">+</span><span class="num" id="7791574">1</span><span class="op" id="7791575">]</span>&nbsp;<span class="op" id="7791577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791582">t</span><span class="op" id="7791583">.</span><span class="ident" id="7791584">Fatalf</span><span class="op" id="7791590">(</span><span class="string" id="7791591">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="7791648">,</span>&nbsp;<span class="ident" id="7791650">addrs</span><span class="op" id="7791655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791659">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7791662">}</span><br>
<span class="lineno"></span><span class="op" id="7791664">}</span>
</div>
</body>
</html>
