<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strings</h2>
<ul>
<li><a href="/gostd/strings/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/strings/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/strings/reader.go.html">reader.go</a></li>
<li><a href="/gostd/strings/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/strings/replace.go.html">replace.go</a></li>
<li><a href="/gostd/strings/replace_test.go.html">replace_test.go</a></li>
<li><a href="/gostd/strings/search.go.html">search.go</a></li>
<li><a href="/gostd/strings/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/strings/strings.go.html">strings.go</a></li>
<li><a href="/gostd/strings/strings_decl.go.html">strings_decl.go</a></li>
<li><a href="/gostd/strings/strings_test.go.html">strings_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8294939">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8294994">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8295048">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8295099">package</span>&nbsp;<span class="ident" id="8295107">strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295116">func</span>&nbsp;<span class="op" id="8295121">(</span><span class="ident" id="8295122">r</span>&nbsp;<span class="op" id="8295124">*</span><span class="ident" id="8295125">Replacer</span><span class="op" id="8295133">)</span>&nbsp;<span class="ident" id="8295135">Replacer</span><span class="op" id="8295143">(</span><span class="op" id="8295144">)</span>&nbsp;<span class="keyword" id="8295146">interface</span><span class="op" id="8295155">{</span><span class="op" id="8295156">}</span>&nbsp;<span class="op" id="8295158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295161">return</span>&nbsp;<span class="ident" id="8295168">r</span><span class="op" id="8295169">.</span><span class="ident" id="8295170">r</span><br>
<span class="lineno"></span><span class="op" id="8295172">}</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8295175">func</span>&nbsp;<span class="op" id="8295180">(</span><span class="ident" id="8295181">r</span>&nbsp;<span class="op" id="8295183">*</span><span class="ident" id="8295184">Replacer</span><span class="op" id="8295192">)</span>&nbsp;<span class="ident" id="8295194">PrintTrie</span><span class="op" id="8295203">(</span><span class="op" id="8295204">)</span>&nbsp;<span class="builtintype" id="8295206">string</span>&nbsp;<span class="op" id="8295213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295216">gen</span>&nbsp;<span class="op" id="8295220">:=</span>&nbsp;<span class="ident" id="8295223">r</span><span class="op" id="8295224">.</span><span class="ident" id="8295225">r</span><span class="op" id="8295226">.</span><span class="op" id="8295227">(</span><span class="op" id="8295228">*</span><span class="ident" id="8295229">genericReplacer</span><span class="op" id="8295244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295247">return</span>&nbsp;<span class="ident" id="8295254">gen</span><span class="op" id="8295257">.</span><span class="ident" id="8295258">printNode</span><span class="op" id="8295267">(</span><span class="op" id="8295268">&amp;</span><span class="ident" id="8295269">gen</span><span class="op" id="8295272">.</span><span class="ident" id="8295273">root</span><span class="op" id="8295277">,</span>&nbsp;<span class="num" id="8295279">0</span><span class="op" id="8295280">)</span><br>
<span class="lineno"></span><span class="op" id="8295282">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8295285">func</span>&nbsp;<span class="op" id="8295290">(</span><span class="ident" id="8295291">r</span>&nbsp;<span class="op" id="8295293">*</span><span class="ident" id="8295294">genericReplacer</span><span class="op" id="8295309">)</span>&nbsp;<span class="ident" id="8295311">printNode</span><span class="op" id="8295320">(</span><span class="ident" id="8295321">t</span>&nbsp;<span class="op" id="8295323">*</span><span class="ident" id="8295324">trieNode</span><span class="op" id="8295332">,</span>&nbsp;<span class="ident" id="8295334">depth</span>&nbsp;<span class="builtintype" id="8295340">int</span><span class="op" id="8295343">)</span>&nbsp;<span class="op" id="8295345">(</span><span class="ident" id="8295346">s</span>&nbsp;<span class="builtintype" id="8295348">string</span><span class="op" id="8295354">)</span>&nbsp;<span class="op" id="8295356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295359">if</span>&nbsp;<span class="ident" id="8295362">t</span><span class="op" id="8295363">.</span><span class="ident" id="8295364">priority</span>&nbsp;<span class="op" id="8295373">&gt;</span>&nbsp;<span class="num" id="8295375">0</span>&nbsp;<span class="op" id="8295377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295381">s</span>&nbsp;<span class="op" id="8295383">+=</span>&nbsp;<span class="string" id="8295386">&#34;+&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295391">}</span>&nbsp;<span class="keyword" id="8295393">else</span>&nbsp;<span class="op" id="8295398">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295402">s</span>&nbsp;<span class="op" id="8295404">+=</span>&nbsp;<span class="string" id="8295407">&#34;-&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295415">s</span>&nbsp;<span class="op" id="8295417">+=</span>&nbsp;<span class="string" id="8295420">&#34;\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295427">if</span>&nbsp;<span class="ident" id="8295430">t</span><span class="op" id="8295431">.</span><span class="ident" id="8295432">prefix</span>&nbsp;<span class="op" id="8295439">!=</span>&nbsp;<span class="string" id="8295442">&#34;&#34;</span>&nbsp;<span class="op" id="8295445">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295449">s</span>&nbsp;<span class="op" id="8295451">+=</span>&nbsp;<span class="ident" id="8295454">Repeat</span><span class="op" id="8295460">(</span><span class="string" id="8295461">&#34;.&#34;</span><span class="op" id="8295464">,</span>&nbsp;<span class="ident" id="8295466">depth</span><span class="op" id="8295471">)</span>&nbsp;<span class="op" id="8295473">+</span>&nbsp;<span class="ident" id="8295475">t</span><span class="op" id="8295476">.</span><span class="ident" id="8295477">prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295486">s</span>&nbsp;<span class="op" id="8295488">+=</span>&nbsp;<span class="ident" id="8295491">r</span><span class="op" id="8295492">.</span><span class="ident" id="8295493">printNode</span><span class="op" id="8295502">(</span><span class="ident" id="8295503">t</span><span class="op" id="8295504">.</span><span class="ident" id="8295505">next</span><span class="op" id="8295509">,</span>&nbsp;<span class="ident" id="8295511">depth</span><span class="op" id="8295516">+</span><span class="builtinfunc" id="8295517">len</span><span class="op" id="8295520">(</span><span class="ident" id="8295521">t</span><span class="op" id="8295522">.</span><span class="ident" id="8295523">prefix</span><span class="op" id="8295529">)</span><span class="op" id="8295530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295533">}</span>&nbsp;<span class="keyword" id="8295535">else</span>&nbsp;<span class="keyword" id="8295540">if</span>&nbsp;<span class="ident" id="8295543">t</span><span class="op" id="8295544">.</span><span class="ident" id="8295545">table</span>&nbsp;<span class="op" id="8295551">!=</span>&nbsp;<span class="ident" id="8295554">nil</span>&nbsp;<span class="op" id="8295558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295562">for</span>&nbsp;<span class="ident" id="8295566">b</span><span class="op" id="8295567">,</span>&nbsp;<span class="ident" id="8295569">m</span>&nbsp;<span class="op" id="8295571">:=</span>&nbsp;<span class="keyword" id="8295574">range</span>&nbsp;<span class="ident" id="8295580">r</span><span class="op" id="8295581">.</span><span class="ident" id="8295582">mapping</span>&nbsp;<span class="op" id="8295590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295595">if</span>&nbsp;<span class="builtintype" id="8295598">int</span><span class="op" id="8295601">(</span><span class="ident" id="8295602">m</span><span class="op" id="8295603">)</span>&nbsp;<span class="op" id="8295605">!=</span>&nbsp;<span class="ident" id="8295608">r</span><span class="op" id="8295609">.</span><span class="ident" id="8295610">tableSize</span>&nbsp;<span class="op" id="8295620">&amp;&amp;</span>&nbsp;<span class="ident" id="8295623">t</span><span class="op" id="8295624">.</span><span class="ident" id="8295625">table</span><span class="op" id="8295630">[</span><span class="ident" id="8295631">m</span><span class="op" id="8295632">]</span>&nbsp;<span class="op" id="8295634">!=</span>&nbsp;<span class="ident" id="8295637">nil</span>&nbsp;<span class="op" id="8295641">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295647">s</span>&nbsp;<span class="op" id="8295649">+=</span>&nbsp;<span class="ident" id="8295652">Repeat</span><span class="op" id="8295658">(</span><span class="string" id="8295659">&#34;.&#34;</span><span class="op" id="8295662">,</span>&nbsp;<span class="ident" id="8295664">depth</span><span class="op" id="8295669">)</span>&nbsp;<span class="op" id="8295671">+</span>&nbsp;<span class="builtintype" id="8295673">string</span><span class="op" id="8295679">(</span><span class="op" id="8295680">[</span><span class="op" id="8295681">]</span><span class="builtintype" id="8295682">byte</span><span class="op" id="8295686">{</span><span class="builtintype" id="8295687">byte</span><span class="op" id="8295691">(</span><span class="ident" id="8295692">b</span><span class="op" id="8295693">)</span><span class="op" id="8295694">}</span><span class="op" id="8295695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295701">s</span>&nbsp;<span class="op" id="8295703">+=</span>&nbsp;<span class="ident" id="8295706">r</span><span class="op" id="8295707">.</span><span class="ident" id="8295708">printNode</span><span class="op" id="8295717">(</span><span class="ident" id="8295718">t</span><span class="op" id="8295719">.</span><span class="ident" id="8295720">table</span><span class="op" id="8295725">[</span><span class="ident" id="8295726">m</span><span class="op" id="8295727">]</span><span class="op" id="8295728">,</span>&nbsp;<span class="ident" id="8295730">depth</span><span class="op" id="8295735">+</span><span class="num" id="8295736">1</span><span class="op" id="8295737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8295749">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295752">return</span><br>
<span class="lineno"></span><span class="op" id="8295759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295762">func</span>&nbsp;<span class="ident" id="8295767">StringFind</span><span class="op" id="8295777">(</span><span class="ident" id="8295778">pattern</span><span class="op" id="8295785">,</span>&nbsp;<span class="ident" id="8295787">text</span>&nbsp;<span class="builtintype" id="8295792">string</span><span class="op" id="8295798">)</span>&nbsp;<span class="builtintype" id="8295800">int</span>&nbsp;<span class="op" id="8295804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295807">return</span>&nbsp;<span class="ident" id="8295814">makeStringFinder</span><span class="op" id="8295830">(</span><span class="ident" id="8295831">pattern</span><span class="op" id="8295838">)</span><span class="op" id="8295839">.</span><span class="ident" id="8295840">next</span><span class="op" id="8295844">(</span><span class="ident" id="8295845">text</span><span class="op" id="8295849">)</span><br>
<span class="lineno">40</span><span class="op" id="8295851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8295854">func</span>&nbsp;<span class="ident" id="8295859">DumpTables</span><span class="op" id="8295869">(</span><span class="ident" id="8295870">pattern</span>&nbsp;<span class="builtintype" id="8295878">string</span><span class="op" id="8295884">)</span>&nbsp;<span class="op" id="8295886">(</span><span class="op" id="8295887">[</span><span class="op" id="8295888">]</span><span class="builtintype" id="8295889">int</span><span class="op" id="8295892">,</span>&nbsp;<span class="op" id="8295894">[</span><span class="op" id="8295895">]</span><span class="builtintype" id="8295896">int</span><span class="op" id="8295899">)</span>&nbsp;<span class="op" id="8295901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8295904">finder</span>&nbsp;<span class="op" id="8295911">:=</span>&nbsp;<span class="ident" id="8295914">makeStringFinder</span><span class="op" id="8295930">(</span><span class="ident" id="8295931">pattern</span><span class="op" id="8295938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8295941">return</span>&nbsp;<span class="ident" id="8295948">finder</span><span class="op" id="8295954">.</span><span class="ident" id="8295955">badCharSkip</span><span class="op" id="8295966">[</span><span class="op" id="8295967">:</span><span class="op" id="8295968">]</span><span class="op" id="8295969">,</span>&nbsp;<span class="ident" id="8295971">finder</span><span class="op" id="8295977">.</span><span class="ident" id="8295978">goodSuffixSkip</span><br>
<span class="lineno">45</span><span class="op" id="8295993">}</span>
</div>
</body>
</html>
