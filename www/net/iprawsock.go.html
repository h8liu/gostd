<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1431804">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1431860">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1431914">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1431965">package</span>&nbsp;<span class="ident" id="1431973">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1431978">//&nbsp;IPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;an&nbsp;IP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="1432031">type</span>&nbsp;<span class="ident" id="1432036">IPAddr</span>&nbsp;<span class="keyword" id="1432043">struct</span>&nbsp;<span class="op" id="1432050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1432053">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1432058"><a href="/net/ip.go.html#1417189">IP</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1432062">Zone</span>&nbsp;<span class="builtintype" id="1432067">string</span>&nbsp;<span class="comment" id="1432074">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="1432105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1432108">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;ip&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="1432161">func</span>&nbsp;<span class="op" id="1432166">(</span><span class="ident" id="1432167">a</span>&nbsp;<span class="op" id="1432169">*</span><span class="ident" id="1432170"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1432176">)</span>&nbsp;<span class="ident" id="1432178">Network</span><span class="op" id="1432185">(</span><span class="op" id="1432186">)</span>&nbsp;<span class="builtintype" id="1432188">string</span>&nbsp;<span class="op" id="1432195">{</span>&nbsp;<span class="keyword" id="1432197">return</span>&nbsp;<span class="string" id="1432204">&#34;ip&#34;</span>&nbsp;<span class="op" id="1432209">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="1432212">func</span>&nbsp;<span class="op" id="1432217">(</span><span class="ident" id="1432218">a</span>&nbsp;<span class="op" id="1432220">*</span><span class="ident" id="1432221"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1432227">)</span>&nbsp;<span class="ident" id="1432229">String</span><span class="op" id="1432235">(</span><span class="op" id="1432236">)</span>&nbsp;<span class="builtintype" id="1432238">string</span>&nbsp;<span class="op" id="1432245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432248">if</span>&nbsp;<span class="ident" id="1432251"><a href="/net/iprawsock.go.html#1432218">a</a></span>&nbsp;<span class="op" id="1432253">==</span>&nbsp;<span class="ident" id="1432256">nil</span>&nbsp;<span class="op" id="1432260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432264">return</span>&nbsp;<span class="string" id="1432271">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432280">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432283">if</span>&nbsp;<span class="ident" id="1432286"><a href="/net/iprawsock.go.html#1432218">a</a></span><span class="op" id="1432287">.</span><span class="ident" id="1432288">Zone</span>&nbsp;<span class="op" id="1432293">!=</span>&nbsp;<span class="string" id="1432296">&#34;&#34;</span>&nbsp;<span class="op" id="1432299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432303">return</span>&nbsp;<span class="ident" id="1432310"><a href="/net/iprawsock.go.html#1432218">a</a></span><span class="op" id="1432311">.</span><span class="ident" id="1432312">IP</span><span class="op" id="1432314">.</span><span class="ident" id="1432315">String</span><span class="op" id="1432321">(</span><span class="op" id="1432322">)</span>&nbsp;<span class="op" id="1432324">+</span>&nbsp;<span class="string" id="1432326">&#34;%&#34;</span>&nbsp;<span class="op" id="1432330">+</span>&nbsp;<span class="ident" id="1432332"><a href="/net/iprawsock.go.html#1432218">a</a></span><span class="op" id="1432333">.</span><span class="ident" id="1432334">Zone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432343">return</span>&nbsp;<span class="ident" id="1432350"><a href="/net/iprawsock.go.html#1432218">a</a></span><span class="op" id="1432351">.</span><span class="ident" id="1432352">IP</span><span class="op" id="1432354">.</span><span class="ident" id="1432355">String</span><span class="op" id="1432361">(</span><span class="op" id="1432362">)</span><br>
<span class="lineno"></span><span class="op" id="1432364">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="1432367">func</span>&nbsp;<span class="op" id="1432372">(</span><span class="ident" id="1432373">a</span>&nbsp;<span class="op" id="1432375">*</span><span class="ident" id="1432376"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1432382">)</span>&nbsp;<span class="ident" id="1432384">toAddr</span><span class="op" id="1432390">(</span><span class="op" id="1432391">)</span>&nbsp;<span class="ident" id="1432393"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1432398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432401">if</span>&nbsp;<span class="ident" id="1432404"><a href="/net/iprawsock.go.html#1432373">a</a></span>&nbsp;<span class="op" id="1432406">==</span>&nbsp;<span class="ident" id="1432409">nil</span>&nbsp;<span class="op" id="1432413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432417">return</span>&nbsp;<span class="ident" id="1432424">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432429">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432432">return</span>&nbsp;<span class="ident" id="1432439"><a href="/net/iprawsock.go.html#1432373">a</a></span><br>
<span class="lineno"></span><span class="op" id="1432441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1432444">//&nbsp;ResolveIPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;an&nbsp;IP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1432512">//&nbsp;&#34;ipv6-host%zone&#34;&nbsp;and&nbsp;resolves&nbsp;the&nbsp;domain&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,</span><br>
<span class="lineno">35</span><span class="comment" id="1432581">//&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;ip&#34;,&nbsp;&#34;ip4&#34;&nbsp;or&nbsp;&#34;ip6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="1432620">func</span>&nbsp;<span class="ident" id="1432625">ResolveIPAddr</span><span class="op" id="1432638">(</span><span class="ident" id="1432639">net</span><span class="op" id="1432642">,</span>&nbsp;<span class="ident" id="1432644">addr</span>&nbsp;<span class="builtintype" id="1432649">string</span><span class="op" id="1432655">)</span>&nbsp;<span class="op" id="1432657">(</span><span class="op" id="1432658">*</span><span class="ident" id="1432659"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1432665">,</span>&nbsp;<span class="builtintype" id="1432667">error</span><span class="op" id="1432672">)</span>&nbsp;<span class="op" id="1432674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432677">if</span>&nbsp;<span class="ident" id="1432680"><a href="/net/iprawsock.go.html#1432639">net</a></span>&nbsp;<span class="op" id="1432684">==</span>&nbsp;<span class="string" id="1432687">&#34;&#34;</span>&nbsp;<span class="op" id="1432690">{</span>&nbsp;<span class="comment" id="1432692">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1432746"><a href="/net/iprawsock.go.html#1432639">net</a></span>&nbsp;<span class="op" id="1432750">=</span>&nbsp;<span class="string" id="1432752">&#34;ip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432758">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1432761">afnet</span><span class="op" id="1432766">,</span>&nbsp;<span class="ident" id="1432768">_</span><span class="op" id="1432769">,</span>&nbsp;<span class="ident" id="1432771">err</span>&nbsp;<span class="op" id="1432775">:=</span>&nbsp;<span class="ident" id="1432778"><a href="/net/dial.go.html#1332358">parseNetwork</a></span><span class="op" id="1432790">(</span><span class="ident" id="1432791"><a href="/net/iprawsock.go.html#1432639">net</a></span><span class="op" id="1432794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432797">if</span>&nbsp;<span class="ident" id="1432800"><a href="/net/iprawsock.go.html#1432771">err</a></span>&nbsp;<span class="op" id="1432804">!=</span>&nbsp;<span class="ident" id="1432807">nil</span>&nbsp;<span class="op" id="1432811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432815">return</span>&nbsp;<span class="ident" id="1432822">nil</span><span class="op" id="1432825">,</span>&nbsp;<span class="ident" id="1432827"><a href="/net/iprawsock.go.html#1432771">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432835">switch</span>&nbsp;<span class="ident" id="1432842"><a href="/net/iprawsock.go.html#1432761">afnet</a></span>&nbsp;<span class="op" id="1432848">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432851">case</span>&nbsp;<span class="string" id="1432856">&#34;ip&#34;</span><span class="op" id="1432860">,</span>&nbsp;<span class="string" id="1432862">&#34;ip4&#34;</span><span class="op" id="1432867">,</span>&nbsp;<span class="string" id="1432869">&#34;ip6&#34;</span><span class="op" id="1432874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432877">default</span><span class="op" id="1432884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432888">return</span>&nbsp;<span class="ident" id="1432895">nil</span><span class="op" id="1432898">,</span>&nbsp;<span class="ident" id="1432900"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1432919">(</span><span class="ident" id="1432920"><a href="/net/iprawsock.go.html#1432639">net</a></span><span class="op" id="1432923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1432926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1432929">a</span><span class="op" id="1432930">,</span>&nbsp;<span class="ident" id="1432932"><a href="/net/iprawsock.go.html#1432771">err</a></span>&nbsp;<span class="op" id="1432936">:=</span>&nbsp;<span class="ident" id="1432939"><a href="/net/ipsock.go.html#1446593">resolveInternetAddr</a></span><span class="op" id="1432958">(</span><span class="ident" id="1432959"><a href="/net/iprawsock.go.html#1432761">afnet</a></span><span class="op" id="1432964">,</span>&nbsp;<span class="ident" id="1432966"><a href="/net/iprawsock.go.html#1432644">addr</a></span><span class="op" id="1432970">,</span>&nbsp;<span class="ident" id="1432972"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1432982">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1432985">if</span>&nbsp;<span class="ident" id="1432988"><a href="/net/iprawsock.go.html#1432771">err</a></span>&nbsp;<span class="op" id="1432992">!=</span>&nbsp;<span class="ident" id="1432995">nil</span>&nbsp;<span class="op" id="1432999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1433003">return</span>&nbsp;<span class="ident" id="1433010">nil</span><span class="op" id="1433013">,</span>&nbsp;<span class="ident" id="1433015"><a href="/net/iprawsock.go.html#1432771">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1433020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1433023">return</span>&nbsp;<span class="ident" id="1433030"><a href="/net/iprawsock.go.html#1432929">a</a></span><span class="op" id="1433031">.</span><span class="ident" id="1433032">toAddr</span><span class="op" id="1433038">(</span><span class="op" id="1433039">)</span><span class="op" id="1433040">.</span><span class="op" id="1433041">(</span><span class="op" id="1433042">*</span><span class="ident" id="1433043"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1433049">)</span><span class="op" id="1433050">,</span>&nbsp;<span class="ident" id="1433052">nil</span><br>
<span class="lineno"></span><span class="op" id="1433056">}</span>
</div>
</body>
</html>
