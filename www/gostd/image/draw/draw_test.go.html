<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6737893">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6737948">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6738002">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6738053">package</span>&nbsp;<span class="ident" id="6738061">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738067">import</span>&nbsp;<span class="op" id="6738074">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6738077">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6738086">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6738101">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6738114">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6738120">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6738130">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6738133">func</span>&nbsp;<span class="ident" id="6738138">eq</span><span class="op" id="6738140">(</span><span class="ident" id="6738141">c0</span><span class="op" id="6738143">,</span>&nbsp;<span class="ident" id="6738145">c1</span>&nbsp;<span class="ident" id="6738148">color</span><span class="op" id="6738153">.</span><span class="ident" id="6738154">Color</span><span class="op" id="6738159">)</span>&nbsp;<span class="builtintype" id="6738161">bool</span>&nbsp;<span class="op" id="6738166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738169">r0</span><span class="op" id="6738171">,</span>&nbsp;<span class="ident" id="6738173">g0</span><span class="op" id="6738175">,</span>&nbsp;<span class="ident" id="6738177">b0</span><span class="op" id="6738179">,</span>&nbsp;<span class="ident" id="6738181">a0</span>&nbsp;<span class="op" id="6738184">:=</span>&nbsp;<span class="ident" id="6738187">c0</span><span class="op" id="6738189">.</span><span class="ident" id="6738190">RGBA</span><span class="op" id="6738194">(</span><span class="op" id="6738195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738198">r1</span><span class="op" id="6738200">,</span>&nbsp;<span class="ident" id="6738202">g1</span><span class="op" id="6738204">,</span>&nbsp;<span class="ident" id="6738206">b1</span><span class="op" id="6738208">,</span>&nbsp;<span class="ident" id="6738210">a1</span>&nbsp;<span class="op" id="6738213">:=</span>&nbsp;<span class="ident" id="6738216">c1</span><span class="op" id="6738218">.</span><span class="ident" id="6738219">RGBA</span><span class="op" id="6738223">(</span><span class="op" id="6738224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738227">return</span>&nbsp;<span class="ident" id="6738234">r0</span>&nbsp;<span class="op" id="6738237">==</span>&nbsp;<span class="ident" id="6738240">r1</span>&nbsp;<span class="op" id="6738243">&amp;&amp;</span>&nbsp;<span class="ident" id="6738246">g0</span>&nbsp;<span class="op" id="6738249">==</span>&nbsp;<span class="ident" id="6738252">g1</span>&nbsp;<span class="op" id="6738255">&amp;&amp;</span>&nbsp;<span class="ident" id="6738258">b0</span>&nbsp;<span class="op" id="6738261">==</span>&nbsp;<span class="ident" id="6738264">b1</span>&nbsp;<span class="op" id="6738267">&amp;&amp;</span>&nbsp;<span class="ident" id="6738270">a0</span>&nbsp;<span class="op" id="6738273">==</span>&nbsp;<span class="ident" id="6738276">a1</span><br>
<span class="lineno"></span><span class="op" id="6738279">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6738282">func</span>&nbsp;<span class="ident" id="6738287">fillBlue</span><span class="op" id="6738295">(</span><span class="ident" id="6738296">alpha</span>&nbsp;<span class="builtintype" id="6738302">int</span><span class="op" id="6738305">)</span>&nbsp;<span class="ident" id="6738307">image</span><span class="op" id="6738312">.</span><span class="ident" id="6738313">Image</span>&nbsp;<span class="op" id="6738319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738322">return</span>&nbsp;<span class="ident" id="6738329">image</span><span class="op" id="6738334">.</span><span class="ident" id="6738335">NewUniform</span><span class="op" id="6738345">(</span><span class="ident" id="6738346">color</span><span class="op" id="6738351">.</span><span class="ident" id="6738352">RGBA</span><span class="op" id="6738356">{</span><span class="num" id="6738357">0</span><span class="op" id="6738358">,</span>&nbsp;<span class="num" id="6738360">0</span><span class="op" id="6738361">,</span>&nbsp;<span class="builtintype" id="6738363">uint8</span><span class="op" id="6738368">(</span><span class="ident" id="6738369">alpha</span><span class="op" id="6738374">)</span><span class="op" id="6738375">,</span>&nbsp;<span class="builtintype" id="6738377">uint8</span><span class="op" id="6738382">(</span><span class="ident" id="6738383">alpha</span><span class="op" id="6738388">)</span><span class="op" id="6738389">}</span><span class="op" id="6738390">)</span><br>
<span class="lineno"></span><span class="op" id="6738392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6738395">func</span>&nbsp;<span class="ident" id="6738400">fillAlpha</span><span class="op" id="6738409">(</span><span class="ident" id="6738410">alpha</span>&nbsp;<span class="builtintype" id="6738416">int</span><span class="op" id="6738419">)</span>&nbsp;<span class="ident" id="6738421">image</span><span class="op" id="6738426">.</span><span class="ident" id="6738427">Image</span>&nbsp;<span class="op" id="6738433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738436">return</span>&nbsp;<span class="ident" id="6738443">image</span><span class="op" id="6738448">.</span><span class="ident" id="6738449">NewUniform</span><span class="op" id="6738459">(</span><span class="ident" id="6738460">color</span><span class="op" id="6738465">.</span><span class="ident" id="6738466">Alpha</span><span class="op" id="6738471">{</span><span class="builtintype" id="6738472">uint8</span><span class="op" id="6738477">(</span><span class="ident" id="6738478">alpha</span><span class="op" id="6738483">)</span><span class="op" id="6738484">}</span><span class="op" id="6738485">)</span><br>
<span class="lineno"></span><span class="op" id="6738487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738490">func</span>&nbsp;<span class="ident" id="6738495">vgradGreen</span><span class="op" id="6738505">(</span><span class="ident" id="6738506">alpha</span>&nbsp;<span class="builtintype" id="6738512">int</span><span class="op" id="6738515">)</span>&nbsp;<span class="ident" id="6738517">image</span><span class="op" id="6738522">.</span><span class="ident" id="6738523">Image</span>&nbsp;<span class="op" id="6738529">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738532">m</span>&nbsp;<span class="op" id="6738534">:=</span>&nbsp;<span class="ident" id="6738537">image</span><span class="op" id="6738542">.</span><span class="ident" id="6738543">NewRGBA</span><span class="op" id="6738550">(</span><span class="ident" id="6738551">image</span><span class="op" id="6738556">.</span><span class="ident" id="6738557">Rect</span><span class="op" id="6738561">(</span><span class="num" id="6738562">0</span><span class="op" id="6738563">,</span>&nbsp;<span class="num" id="6738565">0</span><span class="op" id="6738566">,</span>&nbsp;<span class="num" id="6738568">16</span><span class="op" id="6738570">,</span>&nbsp;<span class="num" id="6738572">16</span><span class="op" id="6738574">)</span><span class="op" id="6738575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738578">for</span>&nbsp;<span class="ident" id="6738582">y</span>&nbsp;<span class="op" id="6738584">:=</span>&nbsp;<span class="num" id="6738587">0</span><span class="op" id="6738588">;</span>&nbsp;<span class="ident" id="6738590">y</span>&nbsp;<span class="op" id="6738592">&lt;</span>&nbsp;<span class="num" id="6738594">16</span><span class="op" id="6738596">;</span>&nbsp;<span class="ident" id="6738598">y</span><span class="op" id="6738599">++</span>&nbsp;<span class="op" id="6738602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738606">for</span>&nbsp;<span class="ident" id="6738610">x</span>&nbsp;<span class="op" id="6738612">:=</span>&nbsp;<span class="num" id="6738615">0</span><span class="op" id="6738616">;</span>&nbsp;<span class="ident" id="6738618">x</span>&nbsp;<span class="op" id="6738620">&lt;</span>&nbsp;<span class="num" id="6738622">16</span><span class="op" id="6738624">;</span>&nbsp;<span class="ident" id="6738626">x</span><span class="op" id="6738627">++</span>&nbsp;<span class="op" id="6738630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738635">m</span><span class="op" id="6738636">.</span><span class="ident" id="6738637">Set</span><span class="op" id="6738640">(</span><span class="ident" id="6738641">x</span><span class="op" id="6738642">,</span>&nbsp;<span class="ident" id="6738644">y</span><span class="op" id="6738645">,</span>&nbsp;<span class="ident" id="6738647">color</span><span class="op" id="6738652">.</span><span class="ident" id="6738653">RGBA</span><span class="op" id="6738657">{</span><span class="num" id="6738658">0</span><span class="op" id="6738659">,</span>&nbsp;<span class="builtintype" id="6738661">uint8</span><span class="op" id="6738666">(</span><span class="ident" id="6738667">y</span>&nbsp;<span class="op" id="6738669">*</span>&nbsp;<span class="ident" id="6738671">alpha</span>&nbsp;<span class="op" id="6738677">/</span>&nbsp;<span class="num" id="6738679">15</span><span class="op" id="6738681">)</span><span class="op" id="6738682">,</span>&nbsp;<span class="num" id="6738684">0</span><span class="op" id="6738685">,</span>&nbsp;<span class="builtintype" id="6738687">uint8</span><span class="op" id="6738692">(</span><span class="ident" id="6738693">alpha</span><span class="op" id="6738698">)</span><span class="op" id="6738699">}</span><span class="op" id="6738700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6738704">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6738707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738710">return</span>&nbsp;<span class="ident" id="6738717">m</span><br>
<span class="lineno"></span><span class="op" id="6738719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738722">func</span>&nbsp;<span class="ident" id="6738727">vgradAlpha</span><span class="op" id="6738737">(</span><span class="ident" id="6738738">alpha</span>&nbsp;<span class="builtintype" id="6738744">int</span><span class="op" id="6738747">)</span>&nbsp;<span class="ident" id="6738749">image</span><span class="op" id="6738754">.</span><span class="ident" id="6738755">Image</span>&nbsp;<span class="op" id="6738761">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738764">m</span>&nbsp;<span class="op" id="6738766">:=</span>&nbsp;<span class="ident" id="6738769">image</span><span class="op" id="6738774">.</span><span class="ident" id="6738775">NewAlpha</span><span class="op" id="6738783">(</span><span class="ident" id="6738784">image</span><span class="op" id="6738789">.</span><span class="ident" id="6738790">Rect</span><span class="op" id="6738794">(</span><span class="num" id="6738795">0</span><span class="op" id="6738796">,</span>&nbsp;<span class="num" id="6738798">0</span><span class="op" id="6738799">,</span>&nbsp;<span class="num" id="6738801">16</span><span class="op" id="6738803">,</span>&nbsp;<span class="num" id="6738805">16</span><span class="op" id="6738807">)</span><span class="op" id="6738808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738811">for</span>&nbsp;<span class="ident" id="6738815">y</span>&nbsp;<span class="op" id="6738817">:=</span>&nbsp;<span class="num" id="6738820">0</span><span class="op" id="6738821">;</span>&nbsp;<span class="ident" id="6738823">y</span>&nbsp;<span class="op" id="6738825">&lt;</span>&nbsp;<span class="num" id="6738827">16</span><span class="op" id="6738829">;</span>&nbsp;<span class="ident" id="6738831">y</span><span class="op" id="6738832">++</span>&nbsp;<span class="op" id="6738835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738839">for</span>&nbsp;<span class="ident" id="6738843">x</span>&nbsp;<span class="op" id="6738845">:=</span>&nbsp;<span class="num" id="6738848">0</span><span class="op" id="6738849">;</span>&nbsp;<span class="ident" id="6738851">x</span>&nbsp;<span class="op" id="6738853">&lt;</span>&nbsp;<span class="num" id="6738855">16</span><span class="op" id="6738857">;</span>&nbsp;<span class="ident" id="6738859">x</span><span class="op" id="6738860">++</span>&nbsp;<span class="op" id="6738863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738868">m</span><span class="op" id="6738869">.</span><span class="ident" id="6738870">Set</span><span class="op" id="6738873">(</span><span class="ident" id="6738874">x</span><span class="op" id="6738875">,</span>&nbsp;<span class="ident" id="6738877">y</span><span class="op" id="6738878">,</span>&nbsp;<span class="ident" id="6738880">color</span><span class="op" id="6738885">.</span><span class="ident" id="6738886">Alpha</span><span class="op" id="6738891">{</span><span class="builtintype" id="6738892">uint8</span><span class="op" id="6738897">(</span><span class="ident" id="6738898">y</span>&nbsp;<span class="op" id="6738900">*</span>&nbsp;<span class="ident" id="6738902">alpha</span>&nbsp;<span class="op" id="6738908">/</span>&nbsp;<span class="num" id="6738910">15</span><span class="op" id="6738912">)</span><span class="op" id="6738913">}</span><span class="op" id="6738914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6738918">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6738921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6738924">return</span>&nbsp;<span class="ident" id="6738931">m</span><br>
<span class="lineno"></span><span class="op" id="6738933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738936">func</span>&nbsp;<span class="ident" id="6738941">vgradGreenNRGBA</span><span class="op" id="6738956">(</span><span class="ident" id="6738957">alpha</span>&nbsp;<span class="builtintype" id="6738963">int</span><span class="op" id="6738966">)</span>&nbsp;<span class="ident" id="6738968">image</span><span class="op" id="6738973">.</span><span class="ident" id="6738974">Image</span>&nbsp;<span class="op" id="6738980">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6738983">m</span>&nbsp;<span class="op" id="6738985">:=</span>&nbsp;<span class="ident" id="6738988">image</span><span class="op" id="6738993">.</span><span class="ident" id="6738994">NewNRGBA</span><span class="op" id="6739002">(</span><span class="ident" id="6739003">image</span><span class="op" id="6739008">.</span><span class="ident" id="6739009">Rect</span><span class="op" id="6739013">(</span><span class="num" id="6739014">0</span><span class="op" id="6739015">,</span>&nbsp;<span class="num" id="6739017">0</span><span class="op" id="6739018">,</span>&nbsp;<span class="num" id="6739020">16</span><span class="op" id="6739022">,</span>&nbsp;<span class="num" id="6739024">16</span><span class="op" id="6739026">)</span><span class="op" id="6739027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739030">for</span>&nbsp;<span class="ident" id="6739034">y</span>&nbsp;<span class="op" id="6739036">:=</span>&nbsp;<span class="num" id="6739039">0</span><span class="op" id="6739040">;</span>&nbsp;<span class="ident" id="6739042">y</span>&nbsp;<span class="op" id="6739044">&lt;</span>&nbsp;<span class="num" id="6739046">16</span><span class="op" id="6739048">;</span>&nbsp;<span class="ident" id="6739050">y</span><span class="op" id="6739051">++</span>&nbsp;<span class="op" id="6739054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739058">for</span>&nbsp;<span class="ident" id="6739062">x</span>&nbsp;<span class="op" id="6739064">:=</span>&nbsp;<span class="num" id="6739067">0</span><span class="op" id="6739068">;</span>&nbsp;<span class="ident" id="6739070">x</span>&nbsp;<span class="op" id="6739072">&lt;</span>&nbsp;<span class="num" id="6739074">16</span><span class="op" id="6739076">;</span>&nbsp;<span class="ident" id="6739078">x</span><span class="op" id="6739079">++</span>&nbsp;<span class="op" id="6739082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739087">m</span><span class="op" id="6739088">.</span><span class="ident" id="6739089">Set</span><span class="op" id="6739092">(</span><span class="ident" id="6739093">x</span><span class="op" id="6739094">,</span>&nbsp;<span class="ident" id="6739096">y</span><span class="op" id="6739097">,</span>&nbsp;<span class="ident" id="6739099">color</span><span class="op" id="6739104">.</span><span class="ident" id="6739105">RGBA</span><span class="op" id="6739109">{</span><span class="num" id="6739110">0</span><span class="op" id="6739111">,</span>&nbsp;<span class="builtintype" id="6739113">uint8</span><span class="op" id="6739118">(</span><span class="ident" id="6739119">y</span>&nbsp;<span class="op" id="6739121">*</span>&nbsp;<span class="num" id="6739123">0x11</span><span class="op" id="6739127">)</span><span class="op" id="6739128">,</span>&nbsp;<span class="num" id="6739130">0</span><span class="op" id="6739131">,</span>&nbsp;<span class="builtintype" id="6739133">uint8</span><span class="op" id="6739138">(</span><span class="ident" id="6739139">alpha</span><span class="op" id="6739144">)</span><span class="op" id="6739145">}</span><span class="op" id="6739146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739150">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739156">return</span>&nbsp;<span class="ident" id="6739163">m</span><br>
<span class="lineno"></span><span class="op" id="6739165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6739168">func</span>&nbsp;<span class="ident" id="6739173">vgradCr</span><span class="op" id="6739180">(</span><span class="op" id="6739181">)</span>&nbsp;<span class="ident" id="6739183">image</span><span class="op" id="6739188">.</span><span class="ident" id="6739189">Image</span>&nbsp;<span class="op" id="6739195">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739198">m</span>&nbsp;<span class="op" id="6739200">:=</span>&nbsp;<span class="op" id="6739203">&amp;</span><span class="ident" id="6739204">image</span><span class="op" id="6739209">.</span><span class="ident" id="6739210">YCbCr</span><span class="op" id="6739215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739219">Y</span><span class="op" id="6739220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6739235">make</span><span class="op" id="6739239">(</span><span class="op" id="6739240">[</span><span class="op" id="6739241">]</span><span class="builtintype" id="6739242">byte</span><span class="op" id="6739246">,</span>&nbsp;<span class="num" id="6739248">16</span><span class="op" id="6739250">*</span><span class="num" id="6739251">16</span><span class="op" id="6739253">)</span><span class="op" id="6739254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739258">Cb</span><span class="op" id="6739260">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6739274">make</span><span class="op" id="6739278">(</span><span class="op" id="6739279">[</span><span class="op" id="6739280">]</span><span class="builtintype" id="6739281">byte</span><span class="op" id="6739285">,</span>&nbsp;<span class="num" id="6739287">16</span><span class="op" id="6739289">*</span><span class="num" id="6739290">16</span><span class="op" id="6739292">)</span><span class="op" id="6739293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739297">Cr</span><span class="op" id="6739299">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6739313">make</span><span class="op" id="6739317">(</span><span class="op" id="6739318">[</span><span class="op" id="6739319">]</span><span class="builtintype" id="6739320">byte</span><span class="op" id="6739324">,</span>&nbsp;<span class="num" id="6739326">16</span><span class="op" id="6739328">*</span><span class="num" id="6739329">16</span><span class="op" id="6739331">)</span><span class="op" id="6739332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739336">YStride</span><span class="op" id="6739343">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6739352">16</span><span class="op" id="6739354">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739358">CStride</span><span class="op" id="6739365">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6739374">16</span><span class="op" id="6739376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739380">SubsampleRatio</span><span class="op" id="6739394">:</span>&nbsp;<span class="ident" id="6739396">image</span><span class="op" id="6739401">.</span><span class="ident" id="6739402">YCbCrSubsampleRatio444</span><span class="op" id="6739424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739428">Rect</span><span class="op" id="6739432">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739444">image</span><span class="op" id="6739449">.</span><span class="ident" id="6739450">Rect</span><span class="op" id="6739454">(</span><span class="num" id="6739455">0</span><span class="op" id="6739456">,</span>&nbsp;<span class="num" id="6739458">0</span><span class="op" id="6739459">,</span>&nbsp;<span class="num" id="6739461">16</span><span class="op" id="6739463">,</span>&nbsp;<span class="num" id="6739465">16</span><span class="op" id="6739467">)</span><span class="op" id="6739468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739474">for</span>&nbsp;<span class="ident" id="6739478">y</span>&nbsp;<span class="op" id="6739480">:=</span>&nbsp;<span class="num" id="6739483">0</span><span class="op" id="6739484">;</span>&nbsp;<span class="ident" id="6739486">y</span>&nbsp;<span class="op" id="6739488">&lt;</span>&nbsp;<span class="num" id="6739490">16</span><span class="op" id="6739492">;</span>&nbsp;<span class="ident" id="6739494">y</span><span class="op" id="6739495">++</span>&nbsp;<span class="op" id="6739498">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739502">for</span>&nbsp;<span class="ident" id="6739506">x</span>&nbsp;<span class="op" id="6739508">:=</span>&nbsp;<span class="num" id="6739511">0</span><span class="op" id="6739512">;</span>&nbsp;<span class="ident" id="6739514">x</span>&nbsp;<span class="op" id="6739516">&lt;</span>&nbsp;<span class="num" id="6739518">16</span><span class="op" id="6739520">;</span>&nbsp;<span class="ident" id="6739522">x</span><span class="op" id="6739523">++</span>&nbsp;<span class="op" id="6739526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739531">m</span><span class="op" id="6739532">.</span><span class="ident" id="6739533">Cr</span><span class="op" id="6739535">[</span><span class="ident" id="6739536">y</span><span class="op" id="6739537">*</span><span class="ident" id="6739538">m</span><span class="op" id="6739539">.</span><span class="ident" id="6739540">CStride</span><span class="op" id="6739547">+</span><span class="ident" id="6739548">x</span><span class="op" id="6739549">]</span>&nbsp;<span class="op" id="6739551">=</span>&nbsp;<span class="builtintype" id="6739553">uint8</span><span class="op" id="6739558">(</span><span class="ident" id="6739559">y</span>&nbsp;<span class="op" id="6739561">*</span>&nbsp;<span class="num" id="6739563">0x11</span><span class="op" id="6739567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739577">return</span>&nbsp;<span class="ident" id="6739584">m</span><br>
<span class="lineno">75</span><span class="op" id="6739586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6739589">func</span>&nbsp;<span class="ident" id="6739594">hgradRed</span><span class="op" id="6739602">(</span><span class="ident" id="6739603">alpha</span>&nbsp;<span class="builtintype" id="6739609">int</span><span class="op" id="6739612">)</span>&nbsp;<span class="ident" id="6739614">Image</span>&nbsp;<span class="op" id="6739620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739623">m</span>&nbsp;<span class="op" id="6739625">:=</span>&nbsp;<span class="ident" id="6739628">image</span><span class="op" id="6739633">.</span><span class="ident" id="6739634">NewRGBA</span><span class="op" id="6739641">(</span><span class="ident" id="6739642">image</span><span class="op" id="6739647">.</span><span class="ident" id="6739648">Rect</span><span class="op" id="6739652">(</span><span class="num" id="6739653">0</span><span class="op" id="6739654">,</span>&nbsp;<span class="num" id="6739656">0</span><span class="op" id="6739657">,</span>&nbsp;<span class="num" id="6739659">16</span><span class="op" id="6739661">,</span>&nbsp;<span class="num" id="6739663">16</span><span class="op" id="6739665">)</span><span class="op" id="6739666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739669">for</span>&nbsp;<span class="ident" id="6739673">y</span>&nbsp;<span class="op" id="6739675">:=</span>&nbsp;<span class="num" id="6739678">0</span><span class="op" id="6739679">;</span>&nbsp;<span class="ident" id="6739681">y</span>&nbsp;<span class="op" id="6739683">&lt;</span>&nbsp;<span class="num" id="6739685">16</span><span class="op" id="6739687">;</span>&nbsp;<span class="ident" id="6739689">y</span><span class="op" id="6739690">++</span>&nbsp;<span class="op" id="6739693">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739697">for</span>&nbsp;<span class="ident" id="6739701">x</span>&nbsp;<span class="op" id="6739703">:=</span>&nbsp;<span class="num" id="6739706">0</span><span class="op" id="6739707">;</span>&nbsp;<span class="ident" id="6739709">x</span>&nbsp;<span class="op" id="6739711">&lt;</span>&nbsp;<span class="num" id="6739713">16</span><span class="op" id="6739715">;</span>&nbsp;<span class="ident" id="6739717">x</span><span class="op" id="6739718">++</span>&nbsp;<span class="op" id="6739721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739726">m</span><span class="op" id="6739727">.</span><span class="ident" id="6739728">Set</span><span class="op" id="6739731">(</span><span class="ident" id="6739732">x</span><span class="op" id="6739733">,</span>&nbsp;<span class="ident" id="6739735">y</span><span class="op" id="6739736">,</span>&nbsp;<span class="ident" id="6739738">color</span><span class="op" id="6739743">.</span><span class="ident" id="6739744">RGBA</span><span class="op" id="6739748">{</span><span class="builtintype" id="6739749">uint8</span><span class="op" id="6739754">(</span><span class="ident" id="6739755">x</span>&nbsp;<span class="op" id="6739757">*</span>&nbsp;<span class="ident" id="6739759">alpha</span>&nbsp;<span class="op" id="6739765">/</span>&nbsp;<span class="num" id="6739767">15</span><span class="op" id="6739769">)</span><span class="op" id="6739770">,</span>&nbsp;<span class="num" id="6739772">0</span><span class="op" id="6739773">,</span>&nbsp;<span class="num" id="6739775">0</span><span class="op" id="6739776">,</span>&nbsp;<span class="builtintype" id="6739778">uint8</span><span class="op" id="6739783">(</span><span class="ident" id="6739784">alpha</span><span class="op" id="6739789">)</span><span class="op" id="6739790">}</span><span class="op" id="6739791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6739798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739801">return</span>&nbsp;<span class="ident" id="6739808">m</span><br>
<span class="lineno">85</span><span class="op" id="6739810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6739813">func</span>&nbsp;<span class="ident" id="6739818">gradYellow</span><span class="op" id="6739828">(</span><span class="ident" id="6739829">alpha</span>&nbsp;<span class="builtintype" id="6739835">int</span><span class="op" id="6739838">)</span>&nbsp;<span class="ident" id="6739840">Image</span>&nbsp;<span class="op" id="6739846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739849">m</span>&nbsp;<span class="op" id="6739851">:=</span>&nbsp;<span class="ident" id="6739854">image</span><span class="op" id="6739859">.</span><span class="ident" id="6739860">NewRGBA</span><span class="op" id="6739867">(</span><span class="ident" id="6739868">image</span><span class="op" id="6739873">.</span><span class="ident" id="6739874">Rect</span><span class="op" id="6739878">(</span><span class="num" id="6739879">0</span><span class="op" id="6739880">,</span>&nbsp;<span class="num" id="6739882">0</span><span class="op" id="6739883">,</span>&nbsp;<span class="num" id="6739885">16</span><span class="op" id="6739887">,</span>&nbsp;<span class="num" id="6739889">16</span><span class="op" id="6739891">)</span><span class="op" id="6739892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739895">for</span>&nbsp;<span class="ident" id="6739899">y</span>&nbsp;<span class="op" id="6739901">:=</span>&nbsp;<span class="num" id="6739904">0</span><span class="op" id="6739905">;</span>&nbsp;<span class="ident" id="6739907">y</span>&nbsp;<span class="op" id="6739909">&lt;</span>&nbsp;<span class="num" id="6739911">16</span><span class="op" id="6739913">;</span>&nbsp;<span class="ident" id="6739915">y</span><span class="op" id="6739916">++</span>&nbsp;<span class="op" id="6739919">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6739923">for</span>&nbsp;<span class="ident" id="6739927">x</span>&nbsp;<span class="op" id="6739929">:=</span>&nbsp;<span class="num" id="6739932">0</span><span class="op" id="6739933">;</span>&nbsp;<span class="ident" id="6739935">x</span>&nbsp;<span class="op" id="6739937">&lt;</span>&nbsp;<span class="num" id="6739939">16</span><span class="op" id="6739941">;</span>&nbsp;<span class="ident" id="6739943">x</span><span class="op" id="6739944">++</span>&nbsp;<span class="op" id="6739947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6739952">m</span><span class="op" id="6739953">.</span><span class="ident" id="6739954">Set</span><span class="op" id="6739957">(</span><span class="ident" id="6739958">x</span><span class="op" id="6739959">,</span>&nbsp;<span class="ident" id="6739961">y</span><span class="op" id="6739962">,</span>&nbsp;<span class="ident" id="6739964">color</span><span class="op" id="6739969">.</span><span class="ident" id="6739970">RGBA</span><span class="op" id="6739974">{</span><span class="builtintype" id="6739975">uint8</span><span class="op" id="6739980">(</span><span class="ident" id="6739981">x</span>&nbsp;<span class="op" id="6739983">*</span>&nbsp;<span class="ident" id="6739985">alpha</span>&nbsp;<span class="op" id="6739991">/</span>&nbsp;<span class="num" id="6739993">15</span><span class="op" id="6739995">)</span><span class="op" id="6739996">,</span>&nbsp;<span class="builtintype" id="6739998">uint8</span><span class="op" id="6740003">(</span><span class="ident" id="6740004">y</span>&nbsp;<span class="op" id="6740006">*</span>&nbsp;<span class="ident" id="6740008">alpha</span>&nbsp;<span class="op" id="6740014">/</span>&nbsp;<span class="num" id="6740016">15</span><span class="op" id="6740018">)</span><span class="op" id="6740019">,</span>&nbsp;<span class="num" id="6740021">0</span><span class="op" id="6740022">,</span>&nbsp;<span class="builtintype" id="6740024">uint8</span><span class="op" id="6740029">(</span><span class="ident" id="6740030">alpha</span><span class="op" id="6740035">)</span><span class="op" id="6740036">}</span><span class="op" id="6740037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6740047">return</span>&nbsp;<span class="ident" id="6740054">m</span><br>
<span class="lineno">95</span><span class="op" id="6740056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6740059">type</span>&nbsp;<span class="ident" id="6740064">drawTest</span>&nbsp;<span class="keyword" id="6740073">struct</span>&nbsp;<span class="op" id="6740080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740083">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6740092">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740100">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740109">image</span><span class="op" id="6740114">.</span><span class="ident" id="6740115">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740122">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740131">image</span><span class="op" id="6740136">.</span><span class="ident" id="6740137">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740144">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740153">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6740157">expected</span>&nbsp;<span class="ident" id="6740166">color</span><span class="op" id="6740171">.</span><span class="ident" id="6740172">Color</span><br>
<span class="lineno"></span><span class="op" id="6740178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6740181">var</span>&nbsp;<span class="ident" id="6740185">drawTests</span>&nbsp;<span class="op" id="6740195">=</span>&nbsp;<span class="op" id="6740197">[</span><span class="op" id="6740198">]</span><span class="ident" id="6740199">drawTest</span><span class="op" id="6740207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740210">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740240">{</span><span class="string" id="6740241">&#34;nop&#34;</span><span class="op" id="6740246">,</span>&nbsp;<span class="ident" id="6740248">vgradGreen</span><span class="op" id="6740258">(</span><span class="num" id="6740259">255</span><span class="op" id="6740262">)</span><span class="op" id="6740263">,</span>&nbsp;<span class="ident" id="6740265">fillAlpha</span><span class="op" id="6740274">(</span><span class="num" id="6740275">0</span><span class="op" id="6740276">)</span><span class="op" id="6740277">,</span>&nbsp;<span class="ident" id="6740279">Over</span><span class="op" id="6740283">,</span>&nbsp;<span class="ident" id="6740285">color</span><span class="op" id="6740290">.</span><span class="ident" id="6740291">RGBA</span><span class="op" id="6740295">{</span><span class="num" id="6740296">136</span><span class="op" id="6740299">,</span>&nbsp;<span class="num" id="6740301">0</span><span class="op" id="6740302">,</span>&nbsp;<span class="num" id="6740304">0</span><span class="op" id="6740305">,</span>&nbsp;<span class="num" id="6740307">255</span><span class="op" id="6740310">}</span><span class="op" id="6740311">}</span><span class="op" id="6740312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740315">{</span><span class="string" id="6740316">&#34;clear&#34;</span><span class="op" id="6740323">,</span>&nbsp;<span class="ident" id="6740325">vgradGreen</span><span class="op" id="6740335">(</span><span class="num" id="6740336">255</span><span class="op" id="6740339">)</span><span class="op" id="6740340">,</span>&nbsp;<span class="ident" id="6740342">fillAlpha</span><span class="op" id="6740351">(</span><span class="num" id="6740352">0</span><span class="op" id="6740353">)</span><span class="op" id="6740354">,</span>&nbsp;<span class="ident" id="6740356">Src</span><span class="op" id="6740359">,</span>&nbsp;<span class="ident" id="6740361">color</span><span class="op" id="6740366">.</span><span class="ident" id="6740367">RGBA</span><span class="op" id="6740371">{</span><span class="num" id="6740372">0</span><span class="op" id="6740373">,</span>&nbsp;<span class="num" id="6740375">0</span><span class="op" id="6740376">,</span>&nbsp;<span class="num" id="6740378">0</span><span class="op" id="6740379">,</span>&nbsp;<span class="num" id="6740381">0</span><span class="op" id="6740382">}</span><span class="op" id="6740383">}</span><span class="op" id="6740384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740387">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740441">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740466">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740513">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740553">{</span><span class="string" id="6740554">&#34;fill&#34;</span><span class="op" id="6740560">,</span>&nbsp;<span class="ident" id="6740562">fillBlue</span><span class="op" id="6740570">(</span><span class="num" id="6740571">90</span><span class="op" id="6740573">)</span><span class="op" id="6740574">,</span>&nbsp;<span class="ident" id="6740576">fillAlpha</span><span class="op" id="6740585">(</span><span class="num" id="6740586">255</span><span class="op" id="6740589">)</span><span class="op" id="6740590">,</span>&nbsp;<span class="ident" id="6740592">Over</span><span class="op" id="6740596">,</span>&nbsp;<span class="ident" id="6740598">color</span><span class="op" id="6740603">.</span><span class="ident" id="6740604">RGBA</span><span class="op" id="6740608">{</span><span class="num" id="6740609">88</span><span class="op" id="6740611">,</span>&nbsp;<span class="num" id="6740613">0</span><span class="op" id="6740614">,</span>&nbsp;<span class="num" id="6740616">90</span><span class="op" id="6740618">,</span>&nbsp;<span class="num" id="6740620">255</span><span class="op" id="6740623">}</span><span class="op" id="6740624">}</span><span class="op" id="6740625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740628">{</span><span class="string" id="6740629">&#34;fillSrc&#34;</span><span class="op" id="6740638">,</span>&nbsp;<span class="ident" id="6740640">fillBlue</span><span class="op" id="6740648">(</span><span class="num" id="6740649">90</span><span class="op" id="6740651">)</span><span class="op" id="6740652">,</span>&nbsp;<span class="ident" id="6740654">fillAlpha</span><span class="op" id="6740663">(</span><span class="num" id="6740664">255</span><span class="op" id="6740667">)</span><span class="op" id="6740668">,</span>&nbsp;<span class="ident" id="6740670">Src</span><span class="op" id="6740673">,</span>&nbsp;<span class="ident" id="6740675">color</span><span class="op" id="6740680">.</span><span class="ident" id="6740681">RGBA</span><span class="op" id="6740685">{</span><span class="num" id="6740686">0</span><span class="op" id="6740687">,</span>&nbsp;<span class="num" id="6740689">0</span><span class="op" id="6740690">,</span>&nbsp;<span class="num" id="6740692">90</span><span class="op" id="6740694">,</span>&nbsp;<span class="num" id="6740696">90</span><span class="op" id="6740698">}</span><span class="op" id="6740699">}</span><span class="op" id="6740700">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740703">{</span><span class="string" id="6740704">&#34;fillAlpha&#34;</span><span class="op" id="6740715">,</span>&nbsp;<span class="ident" id="6740717">fillBlue</span><span class="op" id="6740725">(</span><span class="num" id="6740726">90</span><span class="op" id="6740728">)</span><span class="op" id="6740729">,</span>&nbsp;<span class="ident" id="6740731">fillAlpha</span><span class="op" id="6740740">(</span><span class="num" id="6740741">192</span><span class="op" id="6740744">)</span><span class="op" id="6740745">,</span>&nbsp;<span class="ident" id="6740747">Over</span><span class="op" id="6740751">,</span>&nbsp;<span class="ident" id="6740753">color</span><span class="op" id="6740758">.</span><span class="ident" id="6740759">RGBA</span><span class="op" id="6740763">{</span><span class="num" id="6740764">100</span><span class="op" id="6740767">,</span>&nbsp;<span class="num" id="6740769">0</span><span class="op" id="6740770">,</span>&nbsp;<span class="num" id="6740772">68</span><span class="op" id="6740774">,</span>&nbsp;<span class="num" id="6740776">255</span><span class="op" id="6740779">}</span><span class="op" id="6740780">}</span><span class="op" id="6740781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740784">{</span><span class="string" id="6740785">&#34;fillAlphaSrc&#34;</span><span class="op" id="6740799">,</span>&nbsp;<span class="ident" id="6740801">fillBlue</span><span class="op" id="6740809">(</span><span class="num" id="6740810">90</span><span class="op" id="6740812">)</span><span class="op" id="6740813">,</span>&nbsp;<span class="ident" id="6740815">fillAlpha</span><span class="op" id="6740824">(</span><span class="num" id="6740825">192</span><span class="op" id="6740828">)</span><span class="op" id="6740829">,</span>&nbsp;<span class="ident" id="6740831">Src</span><span class="op" id="6740834">,</span>&nbsp;<span class="ident" id="6740836">color</span><span class="op" id="6740841">.</span><span class="ident" id="6740842">RGBA</span><span class="op" id="6740846">{</span><span class="num" id="6740847">0</span><span class="op" id="6740848">,</span>&nbsp;<span class="num" id="6740850">0</span><span class="op" id="6740851">,</span>&nbsp;<span class="num" id="6740853">68</span><span class="op" id="6740855">,</span>&nbsp;<span class="num" id="6740857">68</span><span class="op" id="6740859">}</span><span class="op" id="6740860">}</span><span class="op" id="6740861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740864">{</span><span class="string" id="6740865">&#34;fillNil&#34;</span><span class="op" id="6740874">,</span>&nbsp;<span class="ident" id="6740876">fillBlue</span><span class="op" id="6740884">(</span><span class="num" id="6740885">90</span><span class="op" id="6740887">)</span><span class="op" id="6740888">,</span>&nbsp;<span class="builtintype" id="6740890">nil</span><span class="op" id="6740893">,</span>&nbsp;<span class="ident" id="6740895">Over</span><span class="op" id="6740899">,</span>&nbsp;<span class="ident" id="6740901">color</span><span class="op" id="6740906">.</span><span class="ident" id="6740907">RGBA</span><span class="op" id="6740911">{</span><span class="num" id="6740912">88</span><span class="op" id="6740914">,</span>&nbsp;<span class="num" id="6740916">0</span><span class="op" id="6740917">,</span>&nbsp;<span class="num" id="6740919">90</span><span class="op" id="6740921">,</span>&nbsp;<span class="num" id="6740923">255</span><span class="op" id="6740926">}</span><span class="op" id="6740927">}</span><span class="op" id="6740928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6740931">{</span><span class="string" id="6740932">&#34;fillNilSrc&#34;</span><span class="op" id="6740944">,</span>&nbsp;<span class="ident" id="6740946">fillBlue</span><span class="op" id="6740954">(</span><span class="num" id="6740955">90</span><span class="op" id="6740957">)</span><span class="op" id="6740958">,</span>&nbsp;<span class="builtintype" id="6740960">nil</span><span class="op" id="6740963">,</span>&nbsp;<span class="ident" id="6740965">Src</span><span class="op" id="6740968">,</span>&nbsp;<span class="ident" id="6740970">color</span><span class="op" id="6740975">.</span><span class="ident" id="6740976">RGBA</span><span class="op" id="6740980">{</span><span class="num" id="6740981">0</span><span class="op" id="6740982">,</span>&nbsp;<span class="num" id="6740984">0</span><span class="op" id="6740985">,</span>&nbsp;<span class="num" id="6740987">90</span><span class="op" id="6740989">,</span>&nbsp;<span class="num" id="6740991">90</span><span class="op" id="6740993">}</span><span class="op" id="6740994">}</span><span class="op" id="6740995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6740998">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741053">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741078">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741125">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741165">{</span><span class="string" id="6741166">&#34;copy&#34;</span><span class="op" id="6741172">,</span>&nbsp;<span class="ident" id="6741174">vgradGreen</span><span class="op" id="6741184">(</span><span class="num" id="6741185">90</span><span class="op" id="6741187">)</span><span class="op" id="6741188">,</span>&nbsp;<span class="ident" id="6741190">fillAlpha</span><span class="op" id="6741199">(</span><span class="num" id="6741200">255</span><span class="op" id="6741203">)</span><span class="op" id="6741204">,</span>&nbsp;<span class="ident" id="6741206">Over</span><span class="op" id="6741210">,</span>&nbsp;<span class="ident" id="6741212">color</span><span class="op" id="6741217">.</span><span class="ident" id="6741218">RGBA</span><span class="op" id="6741222">{</span><span class="num" id="6741223">88</span><span class="op" id="6741225">,</span>&nbsp;<span class="num" id="6741227">48</span><span class="op" id="6741229">,</span>&nbsp;<span class="num" id="6741231">0</span><span class="op" id="6741232">,</span>&nbsp;<span class="num" id="6741234">255</span><span class="op" id="6741237">}</span><span class="op" id="6741238">}</span><span class="op" id="6741239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741242">{</span><span class="string" id="6741243">&#34;copySrc&#34;</span><span class="op" id="6741252">,</span>&nbsp;<span class="ident" id="6741254">vgradGreen</span><span class="op" id="6741264">(</span><span class="num" id="6741265">90</span><span class="op" id="6741267">)</span><span class="op" id="6741268">,</span>&nbsp;<span class="ident" id="6741270">fillAlpha</span><span class="op" id="6741279">(</span><span class="num" id="6741280">255</span><span class="op" id="6741283">)</span><span class="op" id="6741284">,</span>&nbsp;<span class="ident" id="6741286">Src</span><span class="op" id="6741289">,</span>&nbsp;<span class="ident" id="6741291">color</span><span class="op" id="6741296">.</span><span class="ident" id="6741297">RGBA</span><span class="op" id="6741301">{</span><span class="num" id="6741302">0</span><span class="op" id="6741303">,</span>&nbsp;<span class="num" id="6741305">48</span><span class="op" id="6741307">,</span>&nbsp;<span class="num" id="6741309">0</span><span class="op" id="6741310">,</span>&nbsp;<span class="num" id="6741312">90</span><span class="op" id="6741314">}</span><span class="op" id="6741315">}</span><span class="op" id="6741316">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741319">{</span><span class="string" id="6741320">&#34;copyAlpha&#34;</span><span class="op" id="6741331">,</span>&nbsp;<span class="ident" id="6741333">vgradGreen</span><span class="op" id="6741343">(</span><span class="num" id="6741344">90</span><span class="op" id="6741346">)</span><span class="op" id="6741347">,</span>&nbsp;<span class="ident" id="6741349">fillAlpha</span><span class="op" id="6741358">(</span><span class="num" id="6741359">192</span><span class="op" id="6741362">)</span><span class="op" id="6741363">,</span>&nbsp;<span class="ident" id="6741365">Over</span><span class="op" id="6741369">,</span>&nbsp;<span class="ident" id="6741371">color</span><span class="op" id="6741376">.</span><span class="ident" id="6741377">RGBA</span><span class="op" id="6741381">{</span><span class="num" id="6741382">100</span><span class="op" id="6741385">,</span>&nbsp;<span class="num" id="6741387">36</span><span class="op" id="6741389">,</span>&nbsp;<span class="num" id="6741391">0</span><span class="op" id="6741392">,</span>&nbsp;<span class="num" id="6741394">255</span><span class="op" id="6741397">}</span><span class="op" id="6741398">}</span><span class="op" id="6741399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741402">{</span><span class="string" id="6741403">&#34;copyAlphaSrc&#34;</span><span class="op" id="6741417">,</span>&nbsp;<span class="ident" id="6741419">vgradGreen</span><span class="op" id="6741429">(</span><span class="num" id="6741430">90</span><span class="op" id="6741432">)</span><span class="op" id="6741433">,</span>&nbsp;<span class="ident" id="6741435">fillAlpha</span><span class="op" id="6741444">(</span><span class="num" id="6741445">192</span><span class="op" id="6741448">)</span><span class="op" id="6741449">,</span>&nbsp;<span class="ident" id="6741451">Src</span><span class="op" id="6741454">,</span>&nbsp;<span class="ident" id="6741456">color</span><span class="op" id="6741461">.</span><span class="ident" id="6741462">RGBA</span><span class="op" id="6741466">{</span><span class="num" id="6741467">0</span><span class="op" id="6741468">,</span>&nbsp;<span class="num" id="6741470">36</span><span class="op" id="6741472">,</span>&nbsp;<span class="num" id="6741474">0</span><span class="op" id="6741475">,</span>&nbsp;<span class="num" id="6741477">68</span><span class="op" id="6741479">}</span><span class="op" id="6741480">}</span><span class="op" id="6741481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741484">{</span><span class="string" id="6741485">&#34;copyNil&#34;</span><span class="op" id="6741494">,</span>&nbsp;<span class="ident" id="6741496">vgradGreen</span><span class="op" id="6741506">(</span><span class="num" id="6741507">90</span><span class="op" id="6741509">)</span><span class="op" id="6741510">,</span>&nbsp;<span class="builtintype" id="6741512">nil</span><span class="op" id="6741515">,</span>&nbsp;<span class="ident" id="6741517">Over</span><span class="op" id="6741521">,</span>&nbsp;<span class="ident" id="6741523">color</span><span class="op" id="6741528">.</span><span class="ident" id="6741529">RGBA</span><span class="op" id="6741533">{</span><span class="num" id="6741534">88</span><span class="op" id="6741536">,</span>&nbsp;<span class="num" id="6741538">48</span><span class="op" id="6741540">,</span>&nbsp;<span class="num" id="6741542">0</span><span class="op" id="6741543">,</span>&nbsp;<span class="num" id="6741545">255</span><span class="op" id="6741548">}</span><span class="op" id="6741549">}</span><span class="op" id="6741550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741553">{</span><span class="string" id="6741554">&#34;copyNilSrc&#34;</span><span class="op" id="6741566">,</span>&nbsp;<span class="ident" id="6741568">vgradGreen</span><span class="op" id="6741578">(</span><span class="num" id="6741579">90</span><span class="op" id="6741581">)</span><span class="op" id="6741582">,</span>&nbsp;<span class="builtintype" id="6741584">nil</span><span class="op" id="6741587">,</span>&nbsp;<span class="ident" id="6741589">Src</span><span class="op" id="6741592">,</span>&nbsp;<span class="ident" id="6741594">color</span><span class="op" id="6741599">.</span><span class="ident" id="6741600">RGBA</span><span class="op" id="6741604">{</span><span class="num" id="6741605">0</span><span class="op" id="6741606">,</span>&nbsp;<span class="num" id="6741608">48</span><span class="op" id="6741610">,</span>&nbsp;<span class="num" id="6741612">0</span><span class="op" id="6741613">,</span>&nbsp;<span class="num" id="6741615">90</span><span class="op" id="6741617">}</span><span class="op" id="6741618">}</span><span class="op" id="6741619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741622">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741683">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741708">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741755">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6741850">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6741943">{</span><span class="string" id="6741944">&#34;nrgba&#34;</span><span class="op" id="6741951">,</span>&nbsp;<span class="ident" id="6741953">vgradGreenNRGBA</span><span class="op" id="6741968">(</span><span class="num" id="6741969">90</span><span class="op" id="6741971">)</span><span class="op" id="6741972">,</span>&nbsp;<span class="ident" id="6741974">fillAlpha</span><span class="op" id="6741983">(</span><span class="num" id="6741984">255</span><span class="op" id="6741987">)</span><span class="op" id="6741988">,</span>&nbsp;<span class="ident" id="6741990">Over</span><span class="op" id="6741994">,</span>&nbsp;<span class="ident" id="6741996">color</span><span class="op" id="6742001">.</span><span class="ident" id="6742002">RGBA</span><span class="op" id="6742006">{</span><span class="num" id="6742007">88</span><span class="op" id="6742009">,</span>&nbsp;<span class="num" id="6742011">46</span><span class="op" id="6742013">,</span>&nbsp;<span class="num" id="6742015">0</span><span class="op" id="6742016">,</span>&nbsp;<span class="num" id="6742018">255</span><span class="op" id="6742021">}</span><span class="op" id="6742022">}</span><span class="op" id="6742023">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742026">{</span><span class="string" id="6742027">&#34;nrgbaSrc&#34;</span><span class="op" id="6742037">,</span>&nbsp;<span class="ident" id="6742039">vgradGreenNRGBA</span><span class="op" id="6742054">(</span><span class="num" id="6742055">90</span><span class="op" id="6742057">)</span><span class="op" id="6742058">,</span>&nbsp;<span class="ident" id="6742060">fillAlpha</span><span class="op" id="6742069">(</span><span class="num" id="6742070">255</span><span class="op" id="6742073">)</span><span class="op" id="6742074">,</span>&nbsp;<span class="ident" id="6742076">Src</span><span class="op" id="6742079">,</span>&nbsp;<span class="ident" id="6742081">color</span><span class="op" id="6742086">.</span><span class="ident" id="6742087">RGBA</span><span class="op" id="6742091">{</span><span class="num" id="6742092">0</span><span class="op" id="6742093">,</span>&nbsp;<span class="num" id="6742095">46</span><span class="op" id="6742097">,</span>&nbsp;<span class="num" id="6742099">0</span><span class="op" id="6742100">,</span>&nbsp;<span class="num" id="6742102">90</span><span class="op" id="6742104">}</span><span class="op" id="6742105">}</span><span class="op" id="6742106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742109">{</span><span class="string" id="6742110">&#34;nrgbaAlpha&#34;</span><span class="op" id="6742122">,</span>&nbsp;<span class="ident" id="6742124">vgradGreenNRGBA</span><span class="op" id="6742139">(</span><span class="num" id="6742140">90</span><span class="op" id="6742142">)</span><span class="op" id="6742143">,</span>&nbsp;<span class="ident" id="6742145">fillAlpha</span><span class="op" id="6742154">(</span><span class="num" id="6742155">192</span><span class="op" id="6742158">)</span><span class="op" id="6742159">,</span>&nbsp;<span class="ident" id="6742161">Over</span><span class="op" id="6742165">,</span>&nbsp;<span class="ident" id="6742167">color</span><span class="op" id="6742172">.</span><span class="ident" id="6742173">RGBA</span><span class="op" id="6742177">{</span><span class="num" id="6742178">100</span><span class="op" id="6742181">,</span>&nbsp;<span class="num" id="6742183">34</span><span class="op" id="6742185">,</span>&nbsp;<span class="num" id="6742187">0</span><span class="op" id="6742188">,</span>&nbsp;<span class="num" id="6742190">255</span><span class="op" id="6742193">}</span><span class="op" id="6742194">}</span><span class="op" id="6742195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742198">{</span><span class="string" id="6742199">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="6742214">,</span>&nbsp;<span class="ident" id="6742216">vgradGreenNRGBA</span><span class="op" id="6742231">(</span><span class="num" id="6742232">90</span><span class="op" id="6742234">)</span><span class="op" id="6742235">,</span>&nbsp;<span class="ident" id="6742237">fillAlpha</span><span class="op" id="6742246">(</span><span class="num" id="6742247">192</span><span class="op" id="6742250">)</span><span class="op" id="6742251">,</span>&nbsp;<span class="ident" id="6742253">Src</span><span class="op" id="6742256">,</span>&nbsp;<span class="ident" id="6742258">color</span><span class="op" id="6742263">.</span><span class="ident" id="6742264">RGBA</span><span class="op" id="6742268">{</span><span class="num" id="6742269">0</span><span class="op" id="6742270">,</span>&nbsp;<span class="num" id="6742272">34</span><span class="op" id="6742274">,</span>&nbsp;<span class="num" id="6742276">0</span><span class="op" id="6742277">,</span>&nbsp;<span class="num" id="6742279">68</span><span class="op" id="6742281">}</span><span class="op" id="6742282">}</span><span class="op" id="6742283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742286">{</span><span class="string" id="6742287">&#34;nrgbaNil&#34;</span><span class="op" id="6742297">,</span>&nbsp;<span class="ident" id="6742299">vgradGreenNRGBA</span><span class="op" id="6742314">(</span><span class="num" id="6742315">90</span><span class="op" id="6742317">)</span><span class="op" id="6742318">,</span>&nbsp;<span class="builtintype" id="6742320">nil</span><span class="op" id="6742323">,</span>&nbsp;<span class="ident" id="6742325">Over</span><span class="op" id="6742329">,</span>&nbsp;<span class="ident" id="6742331">color</span><span class="op" id="6742336">.</span><span class="ident" id="6742337">RGBA</span><span class="op" id="6742341">{</span><span class="num" id="6742342">88</span><span class="op" id="6742344">,</span>&nbsp;<span class="num" id="6742346">46</span><span class="op" id="6742348">,</span>&nbsp;<span class="num" id="6742350">0</span><span class="op" id="6742351">,</span>&nbsp;<span class="num" id="6742353">255</span><span class="op" id="6742356">}</span><span class="op" id="6742357">}</span><span class="op" id="6742358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742361">{</span><span class="string" id="6742362">&#34;nrgbaNilSrc&#34;</span><span class="op" id="6742375">,</span>&nbsp;<span class="ident" id="6742377">vgradGreenNRGBA</span><span class="op" id="6742392">(</span><span class="num" id="6742393">90</span><span class="op" id="6742395">)</span><span class="op" id="6742396">,</span>&nbsp;<span class="builtintype" id="6742398">nil</span><span class="op" id="6742401">,</span>&nbsp;<span class="ident" id="6742403">Src</span><span class="op" id="6742406">,</span>&nbsp;<span class="ident" id="6742408">color</span><span class="op" id="6742413">.</span><span class="ident" id="6742414">RGBA</span><span class="op" id="6742418">{</span><span class="num" id="6742419">0</span><span class="op" id="6742420">,</span>&nbsp;<span class="num" id="6742422">46</span><span class="op" id="6742424">,</span>&nbsp;<span class="num" id="6742426">0</span><span class="op" id="6742427">,</span>&nbsp;<span class="num" id="6742429">90</span><span class="op" id="6742431">}</span><span class="op" id="6742432">}</span><span class="op" id="6742433">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6742436">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6742497">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6742522">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6742569">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742661">{</span><span class="string" id="6742662">&#34;ycbcr&#34;</span><span class="op" id="6742669">,</span>&nbsp;<span class="ident" id="6742671">vgradCr</span><span class="op" id="6742678">(</span><span class="op" id="6742679">)</span><span class="op" id="6742680">,</span>&nbsp;<span class="ident" id="6742682">fillAlpha</span><span class="op" id="6742691">(</span><span class="num" id="6742692">255</span><span class="op" id="6742695">)</span><span class="op" id="6742696">,</span>&nbsp;<span class="ident" id="6742698">Over</span><span class="op" id="6742702">,</span>&nbsp;<span class="ident" id="6742704">color</span><span class="op" id="6742709">.</span><span class="ident" id="6742710">RGBA</span><span class="op" id="6742714">{</span><span class="num" id="6742715">11</span><span class="op" id="6742717">,</span>&nbsp;<span class="num" id="6742719">38</span><span class="op" id="6742721">,</span>&nbsp;<span class="num" id="6742723">0</span><span class="op" id="6742724">,</span>&nbsp;<span class="num" id="6742726">255</span><span class="op" id="6742729">}</span><span class="op" id="6742730">}</span><span class="op" id="6742731">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742734">{</span><span class="string" id="6742735">&#34;ycbcrSrc&#34;</span><span class="op" id="6742745">,</span>&nbsp;<span class="ident" id="6742747">vgradCr</span><span class="op" id="6742754">(</span><span class="op" id="6742755">)</span><span class="op" id="6742756">,</span>&nbsp;<span class="ident" id="6742758">fillAlpha</span><span class="op" id="6742767">(</span><span class="num" id="6742768">255</span><span class="op" id="6742771">)</span><span class="op" id="6742772">,</span>&nbsp;<span class="ident" id="6742774">Src</span><span class="op" id="6742777">,</span>&nbsp;<span class="ident" id="6742779">color</span><span class="op" id="6742784">.</span><span class="ident" id="6742785">RGBA</span><span class="op" id="6742789">{</span><span class="num" id="6742790">11</span><span class="op" id="6742792">,</span>&nbsp;<span class="num" id="6742794">38</span><span class="op" id="6742796">,</span>&nbsp;<span class="num" id="6742798">0</span><span class="op" id="6742799">,</span>&nbsp;<span class="num" id="6742801">255</span><span class="op" id="6742804">}</span><span class="op" id="6742805">}</span><span class="op" id="6742806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742809">{</span><span class="string" id="6742810">&#34;ycbcrAlpha&#34;</span><span class="op" id="6742822">,</span>&nbsp;<span class="ident" id="6742824">vgradCr</span><span class="op" id="6742831">(</span><span class="op" id="6742832">)</span><span class="op" id="6742833">,</span>&nbsp;<span class="ident" id="6742835">fillAlpha</span><span class="op" id="6742844">(</span><span class="num" id="6742845">192</span><span class="op" id="6742848">)</span><span class="op" id="6742849">,</span>&nbsp;<span class="ident" id="6742851">Over</span><span class="op" id="6742855">,</span>&nbsp;<span class="ident" id="6742857">color</span><span class="op" id="6742862">.</span><span class="ident" id="6742863">RGBA</span><span class="op" id="6742867">{</span><span class="num" id="6742868">42</span><span class="op" id="6742870">,</span>&nbsp;<span class="num" id="6742872">28</span><span class="op" id="6742874">,</span>&nbsp;<span class="num" id="6742876">0</span><span class="op" id="6742877">,</span>&nbsp;<span class="num" id="6742879">255</span><span class="op" id="6742882">}</span><span class="op" id="6742883">}</span><span class="op" id="6742884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742887">{</span><span class="string" id="6742888">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="6742903">,</span>&nbsp;<span class="ident" id="6742905">vgradCr</span><span class="op" id="6742912">(</span><span class="op" id="6742913">)</span><span class="op" id="6742914">,</span>&nbsp;<span class="ident" id="6742916">fillAlpha</span><span class="op" id="6742925">(</span><span class="num" id="6742926">192</span><span class="op" id="6742929">)</span><span class="op" id="6742930">,</span>&nbsp;<span class="ident" id="6742932">Src</span><span class="op" id="6742935">,</span>&nbsp;<span class="ident" id="6742937">color</span><span class="op" id="6742942">.</span><span class="ident" id="6742943">RGBA</span><span class="op" id="6742947">{</span><span class="num" id="6742948">8</span><span class="op" id="6742949">,</span>&nbsp;<span class="num" id="6742951">28</span><span class="op" id="6742953">,</span>&nbsp;<span class="num" id="6742955">0</span><span class="op" id="6742956">,</span>&nbsp;<span class="num" id="6742958">192</span><span class="op" id="6742961">}</span><span class="op" id="6742962">}</span><span class="op" id="6742963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6742966">{</span><span class="string" id="6742967">&#34;ycbcrNil&#34;</span><span class="op" id="6742977">,</span>&nbsp;<span class="ident" id="6742979">vgradCr</span><span class="op" id="6742986">(</span><span class="op" id="6742987">)</span><span class="op" id="6742988">,</span>&nbsp;<span class="builtintype" id="6742990">nil</span><span class="op" id="6742993">,</span>&nbsp;<span class="ident" id="6742995">Over</span><span class="op" id="6742999">,</span>&nbsp;<span class="ident" id="6743001">color</span><span class="op" id="6743006">.</span><span class="ident" id="6743007">RGBA</span><span class="op" id="6743011">{</span><span class="num" id="6743012">11</span><span class="op" id="6743014">,</span>&nbsp;<span class="num" id="6743016">38</span><span class="op" id="6743018">,</span>&nbsp;<span class="num" id="6743020">0</span><span class="op" id="6743021">,</span>&nbsp;<span class="num" id="6743023">255</span><span class="op" id="6743026">}</span><span class="op" id="6743027">}</span><span class="op" id="6743028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6743031">{</span><span class="string" id="6743032">&#34;ycbcrNilSrc&#34;</span><span class="op" id="6743045">,</span>&nbsp;<span class="ident" id="6743047">vgradCr</span><span class="op" id="6743054">(</span><span class="op" id="6743055">)</span><span class="op" id="6743056">,</span>&nbsp;<span class="builtintype" id="6743058">nil</span><span class="op" id="6743061">,</span>&nbsp;<span class="ident" id="6743063">Src</span><span class="op" id="6743066">,</span>&nbsp;<span class="ident" id="6743068">color</span><span class="op" id="6743073">.</span><span class="ident" id="6743074">RGBA</span><span class="op" id="6743078">{</span><span class="num" id="6743079">11</span><span class="op" id="6743081">,</span>&nbsp;<span class="num" id="6743083">38</span><span class="op" id="6743085">,</span>&nbsp;<span class="num" id="6743087">0</span><span class="op" id="6743088">,</span>&nbsp;<span class="num" id="6743090">255</span><span class="op" id="6743093">}</span><span class="op" id="6743094">}</span><span class="op" id="6743095">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743098">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743137">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743162">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743209">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743251">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6743294">{</span><span class="string" id="6743295">&#34;generic&#34;</span><span class="op" id="6743304">,</span>&nbsp;<span class="ident" id="6743306">fillBlue</span><span class="op" id="6743314">(</span><span class="num" id="6743315">255</span><span class="op" id="6743318">)</span><span class="op" id="6743319">,</span>&nbsp;<span class="ident" id="6743321">vgradAlpha</span><span class="op" id="6743331">(</span><span class="num" id="6743332">192</span><span class="op" id="6743335">)</span><span class="op" id="6743336">,</span>&nbsp;<span class="ident" id="6743338">Over</span><span class="op" id="6743342">,</span>&nbsp;<span class="ident" id="6743344">color</span><span class="op" id="6743349">.</span><span class="ident" id="6743350">RGBA</span><span class="op" id="6743354">{</span><span class="num" id="6743355">81</span><span class="op" id="6743357">,</span>&nbsp;<span class="num" id="6743359">0</span><span class="op" id="6743360">,</span>&nbsp;<span class="num" id="6743362">102</span><span class="op" id="6743365">,</span>&nbsp;<span class="num" id="6743367">255</span><span class="op" id="6743370">}</span><span class="op" id="6743371">}</span><span class="op" id="6743372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6743375">{</span><span class="string" id="6743376">&#34;genericSrc&#34;</span><span class="op" id="6743388">,</span>&nbsp;<span class="ident" id="6743390">fillBlue</span><span class="op" id="6743398">(</span><span class="num" id="6743399">255</span><span class="op" id="6743402">)</span><span class="op" id="6743403">,</span>&nbsp;<span class="ident" id="6743405">vgradAlpha</span><span class="op" id="6743415">(</span><span class="num" id="6743416">192</span><span class="op" id="6743419">)</span><span class="op" id="6743420">,</span>&nbsp;<span class="ident" id="6743422">Src</span><span class="op" id="6743425">,</span>&nbsp;<span class="ident" id="6743427">color</span><span class="op" id="6743432">.</span><span class="ident" id="6743433">RGBA</span><span class="op" id="6743437">{</span><span class="num" id="6743438">0</span><span class="op" id="6743439">,</span>&nbsp;<span class="num" id="6743441">0</span><span class="op" id="6743442">,</span>&nbsp;<span class="num" id="6743444">102</span><span class="op" id="6743447">,</span>&nbsp;<span class="num" id="6743449">102</span><span class="op" id="6743452">}</span><span class="op" id="6743453">}</span><span class="op" id="6743454">,</span><br>
<span class="lineno"></span><span class="op" id="6743456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6743459">func</span>&nbsp;<span class="ident" id="6743464">makeGolden</span><span class="op" id="6743474">(</span><span class="ident" id="6743475">dst</span>&nbsp;<span class="ident" id="6743479">image</span><span class="op" id="6743484">.</span><span class="ident" id="6743485">Image</span><span class="op" id="6743490">,</span>&nbsp;<span class="ident" id="6743492">r</span>&nbsp;<span class="ident" id="6743494">image</span><span class="op" id="6743499">.</span><span class="ident" id="6743500">Rectangle</span><span class="op" id="6743509">,</span>&nbsp;<span class="ident" id="6743511">src</span>&nbsp;<span class="ident" id="6743515">image</span><span class="op" id="6743520">.</span><span class="ident" id="6743521">Image</span><span class="op" id="6743526">,</span>&nbsp;<span class="ident" id="6743528">sp</span>&nbsp;<span class="ident" id="6743531">image</span><span class="op" id="6743536">.</span><span class="ident" id="6743537">Point</span><span class="op" id="6743542">,</span>&nbsp;<span class="ident" id="6743544">mask</span>&nbsp;<span class="ident" id="6743549">image</span><span class="op" id="6743554">.</span><span class="ident" id="6743555">Image</span><span class="op" id="6743560">,</span>&nbsp;<span class="ident" id="6743562">mp</span>&nbsp;<span class="ident" id="6743565">image</span><span class="op" id="6743570">.</span><span class="ident" id="6743571">Point</span><span class="op" id="6743576">,</span>&nbsp;<span class="ident" id="6743578">op</span>&nbsp;<span class="ident" id="6743581">Op</span><span class="op" id="6743583">)</span>&nbsp;<span class="ident" id="6743585">image</span><span class="op" id="6743590">.</span><span class="ident" id="6743591">Image</span>&nbsp;<span class="op" id="6743597">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743600">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6743675">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743745">b</span>&nbsp;<span class="op" id="6743747">:=</span>&nbsp;<span class="ident" id="6743750">dst</span><span class="op" id="6743753">.</span><span class="ident" id="6743754">Bounds</span><span class="op" id="6743760">(</span><span class="op" id="6743761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743764">sb</span>&nbsp;<span class="op" id="6743767">:=</span>&nbsp;<span class="ident" id="6743770">src</span><span class="op" id="6743773">.</span><span class="ident" id="6743774">Bounds</span><span class="op" id="6743780">(</span><span class="op" id="6743781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743784">mb</span>&nbsp;<span class="op" id="6743787">:=</span>&nbsp;<span class="ident" id="6743790">image</span><span class="op" id="6743795">.</span><span class="ident" id="6743796">Rect</span><span class="op" id="6743800">(</span><span class="op" id="6743801">-</span><span class="num" id="6743802">1e9</span><span class="op" id="6743805">,</span>&nbsp;<span class="op" id="6743807">-</span><span class="num" id="6743808">1e9</span><span class="op" id="6743811">,</span>&nbsp;<span class="num" id="6743813">1e9</span><span class="op" id="6743816">,</span>&nbsp;<span class="num" id="6743818">1e9</span><span class="op" id="6743821">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6743824">if</span>&nbsp;<span class="ident" id="6743827">mask</span>&nbsp;<span class="op" id="6743832">!=</span>&nbsp;<span class="builtintype" id="6743835">nil</span>&nbsp;<span class="op" id="6743839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743843">mb</span>&nbsp;<span class="op" id="6743846">=</span>&nbsp;<span class="ident" id="6743848">mask</span><span class="op" id="6743852">.</span><span class="ident" id="6743853">Bounds</span><span class="op" id="6743859">(</span><span class="op" id="6743860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6743863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743866">golden</span>&nbsp;<span class="op" id="6743873">:=</span>&nbsp;<span class="ident" id="6743876">image</span><span class="op" id="6743881">.</span><span class="ident" id="6743882">NewRGBA</span><span class="op" id="6743889">(</span><span class="ident" id="6743890">image</span><span class="op" id="6743895">.</span><span class="ident" id="6743896">Rect</span><span class="op" id="6743900">(</span><span class="num" id="6743901">0</span><span class="op" id="6743902">,</span>&nbsp;<span class="num" id="6743904">0</span><span class="op" id="6743905">,</span>&nbsp;<span class="ident" id="6743907">b</span><span class="op" id="6743908">.</span><span class="ident" id="6743909">Max</span><span class="op" id="6743912">.</span><span class="ident" id="6743913">X</span><span class="op" id="6743914">,</span>&nbsp;<span class="ident" id="6743916">b</span><span class="op" id="6743917">.</span><span class="ident" id="6743918">Max</span><span class="op" id="6743921">.</span><span class="ident" id="6743922">Y</span><span class="op" id="6743923">)</span><span class="op" id="6743924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6743927">for</span>&nbsp;<span class="ident" id="6743931">y</span>&nbsp;<span class="op" id="6743933">:=</span>&nbsp;<span class="ident" id="6743936">r</span><span class="op" id="6743937">.</span><span class="ident" id="6743938">Min</span><span class="op" id="6743941">.</span><span class="ident" id="6743942">Y</span><span class="op" id="6743943">;</span>&nbsp;<span class="ident" id="6743945">y</span>&nbsp;<span class="op" id="6743947">&lt;</span>&nbsp;<span class="ident" id="6743949">r</span><span class="op" id="6743950">.</span><span class="ident" id="6743951">Max</span><span class="op" id="6743954">.</span><span class="ident" id="6743955">Y</span><span class="op" id="6743956">;</span>&nbsp;<span class="ident" id="6743958">y</span><span class="op" id="6743959">++</span>&nbsp;<span class="op" id="6743962">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743966">sy</span>&nbsp;<span class="op" id="6743969">:=</span>&nbsp;<span class="ident" id="6743972">y</span>&nbsp;<span class="op" id="6743974">+</span>&nbsp;<span class="ident" id="6743976">sp</span><span class="op" id="6743978">.</span><span class="ident" id="6743979">Y</span>&nbsp;<span class="op" id="6743981">-</span>&nbsp;<span class="ident" id="6743983">r</span><span class="op" id="6743984">.</span><span class="ident" id="6743985">Min</span><span class="op" id="6743988">.</span><span class="ident" id="6743989">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6743993">my</span>&nbsp;<span class="op" id="6743996">:=</span>&nbsp;<span class="ident" id="6743999">y</span>&nbsp;<span class="op" id="6744001">+</span>&nbsp;<span class="ident" id="6744003">mp</span><span class="op" id="6744005">.</span><span class="ident" id="6744006">Y</span>&nbsp;<span class="op" id="6744008">-</span>&nbsp;<span class="ident" id="6744010">r</span><span class="op" id="6744011">.</span><span class="ident" id="6744012">Min</span><span class="op" id="6744015">.</span><span class="ident" id="6744016">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744020">for</span>&nbsp;<span class="ident" id="6744024">x</span>&nbsp;<span class="op" id="6744026">:=</span>&nbsp;<span class="ident" id="6744029">r</span><span class="op" id="6744030">.</span><span class="ident" id="6744031">Min</span><span class="op" id="6744034">.</span><span class="ident" id="6744035">X</span><span class="op" id="6744036">;</span>&nbsp;<span class="ident" id="6744038">x</span>&nbsp;<span class="op" id="6744040">&lt;</span>&nbsp;<span class="ident" id="6744042">r</span><span class="op" id="6744043">.</span><span class="ident" id="6744044">Max</span><span class="op" id="6744047">.</span><span class="ident" id="6744048">X</span><span class="op" id="6744049">;</span>&nbsp;<span class="ident" id="6744051">x</span><span class="op" id="6744052">++</span>&nbsp;<span class="op" id="6744055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744060">if</span>&nbsp;<span class="op" id="6744063">!</span><span class="op" id="6744064">(</span><span class="ident" id="6744065">image</span><span class="op" id="6744070">.</span><span class="ident" id="6744071">Pt</span><span class="op" id="6744073">(</span><span class="ident" id="6744074">x</span><span class="op" id="6744075">,</span>&nbsp;<span class="ident" id="6744077">y</span><span class="op" id="6744078">)</span><span class="op" id="6744079">.</span><span class="ident" id="6744080">In</span><span class="op" id="6744082">(</span><span class="ident" id="6744083">b</span><span class="op" id="6744084">)</span><span class="op" id="6744085">)</span>&nbsp;<span class="op" id="6744087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744093">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744110">sx</span>&nbsp;<span class="op" id="6744113">:=</span>&nbsp;<span class="ident" id="6744116">x</span>&nbsp;<span class="op" id="6744118">+</span>&nbsp;<span class="ident" id="6744120">sp</span><span class="op" id="6744122">.</span><span class="ident" id="6744123">X</span>&nbsp;<span class="op" id="6744125">-</span>&nbsp;<span class="ident" id="6744127">r</span><span class="op" id="6744128">.</span><span class="ident" id="6744129">Min</span><span class="op" id="6744132">.</span><span class="ident" id="6744133">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744138">if</span>&nbsp;<span class="op" id="6744141">!</span><span class="op" id="6744142">(</span><span class="ident" id="6744143">image</span><span class="op" id="6744148">.</span><span class="ident" id="6744149">Pt</span><span class="op" id="6744151">(</span><span class="ident" id="6744152">sx</span><span class="op" id="6744154">,</span>&nbsp;<span class="ident" id="6744156">sy</span><span class="op" id="6744158">)</span><span class="op" id="6744159">.</span><span class="ident" id="6744160">In</span><span class="op" id="6744162">(</span><span class="ident" id="6744163">sb</span><span class="op" id="6744165">)</span><span class="op" id="6744166">)</span>&nbsp;<span class="op" id="6744168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744174">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744186">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744191">mx</span>&nbsp;<span class="op" id="6744194">:=</span>&nbsp;<span class="ident" id="6744197">x</span>&nbsp;<span class="op" id="6744199">+</span>&nbsp;<span class="ident" id="6744201">mp</span><span class="op" id="6744203">.</span><span class="ident" id="6744204">X</span>&nbsp;<span class="op" id="6744206">-</span>&nbsp;<span class="ident" id="6744208">r</span><span class="op" id="6744209">.</span><span class="ident" id="6744210">Min</span><span class="op" id="6744213">.</span><span class="ident" id="6744214">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744219">if</span>&nbsp;<span class="op" id="6744222">!</span><span class="op" id="6744223">(</span><span class="ident" id="6744224">image</span><span class="op" id="6744229">.</span><span class="ident" id="6744230">Pt</span><span class="op" id="6744232">(</span><span class="ident" id="6744233">mx</span><span class="op" id="6744235">,</span>&nbsp;<span class="ident" id="6744237">my</span><span class="op" id="6744239">)</span><span class="op" id="6744240">.</span><span class="ident" id="6744241">In</span><span class="op" id="6744243">(</span><span class="ident" id="6744244">mb</span><span class="op" id="6744246">)</span><span class="op" id="6744247">)</span>&nbsp;<span class="op" id="6744249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744255">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744273">const</span>&nbsp;<span class="ident" id="6744279">M</span>&nbsp;<span class="op" id="6744281">=</span>&nbsp;<span class="num" id="6744283">1</span><span class="op" id="6744284">&lt;&lt;</span><span class="num" id="6744286">16</span>&nbsp;<span class="op" id="6744289">-</span>&nbsp;<span class="num" id="6744291">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744296">var</span>&nbsp;<span class="ident" id="6744300">dr</span><span class="op" id="6744302">,</span>&nbsp;<span class="ident" id="6744304">dg</span><span class="op" id="6744306">,</span>&nbsp;<span class="ident" id="6744308">db</span><span class="op" id="6744310">,</span>&nbsp;<span class="ident" id="6744312">da</span>&nbsp;<span class="builtintype" id="6744315">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744325">if</span>&nbsp;<span class="ident" id="6744328">op</span>&nbsp;<span class="op" id="6744331">==</span>&nbsp;<span class="ident" id="6744334">Over</span>&nbsp;<span class="op" id="6744339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744345">dr</span><span class="op" id="6744347">,</span>&nbsp;<span class="ident" id="6744349">dg</span><span class="op" id="6744351">,</span>&nbsp;<span class="ident" id="6744353">db</span><span class="op" id="6744355">,</span>&nbsp;<span class="ident" id="6744357">da</span>&nbsp;<span class="op" id="6744360">=</span>&nbsp;<span class="ident" id="6744362">dst</span><span class="op" id="6744365">.</span><span class="ident" id="6744366">At</span><span class="op" id="6744368">(</span><span class="ident" id="6744369">x</span><span class="op" id="6744370">,</span>&nbsp;<span class="ident" id="6744372">y</span><span class="op" id="6744373">)</span><span class="op" id="6744374">.</span><span class="ident" id="6744375">RGBA</span><span class="op" id="6744379">(</span><span class="op" id="6744380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744385">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744390">sr</span><span class="op" id="6744392">,</span>&nbsp;<span class="ident" id="6744394">sg</span><span class="op" id="6744396">,</span>&nbsp;<span class="ident" id="6744398">sb</span><span class="op" id="6744400">,</span>&nbsp;<span class="ident" id="6744402">sa</span>&nbsp;<span class="op" id="6744405">:=</span>&nbsp;<span class="ident" id="6744408">src</span><span class="op" id="6744411">.</span><span class="ident" id="6744412">At</span><span class="op" id="6744414">(</span><span class="ident" id="6744415">sx</span><span class="op" id="6744417">,</span>&nbsp;<span class="ident" id="6744419">sy</span><span class="op" id="6744421">)</span><span class="op" id="6744422">.</span><span class="ident" id="6744423">RGBA</span><span class="op" id="6744427">(</span><span class="op" id="6744428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744433">ma</span>&nbsp;<span class="op" id="6744436">:=</span>&nbsp;<span class="builtintype" id="6744439">uint32</span><span class="op" id="6744445">(</span><span class="ident" id="6744446">M</span><span class="op" id="6744447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744452">if</span>&nbsp;<span class="ident" id="6744455">mask</span>&nbsp;<span class="op" id="6744460">!=</span>&nbsp;<span class="builtintype" id="6744463">nil</span>&nbsp;<span class="op" id="6744467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744473">_</span><span class="op" id="6744474">,</span>&nbsp;<span class="ident" id="6744476">_</span><span class="op" id="6744477">,</span>&nbsp;<span class="ident" id="6744479">_</span><span class="op" id="6744480">,</span>&nbsp;<span class="ident" id="6744482">ma</span>&nbsp;<span class="op" id="6744485">=</span>&nbsp;<span class="ident" id="6744487">mask</span><span class="op" id="6744491">.</span><span class="ident" id="6744492">At</span><span class="op" id="6744494">(</span><span class="ident" id="6744495">mx</span><span class="op" id="6744497">,</span>&nbsp;<span class="ident" id="6744499">my</span><span class="op" id="6744501">)</span><span class="op" id="6744502">.</span><span class="ident" id="6744503">RGBA</span><span class="op" id="6744507">(</span><span class="op" id="6744508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744513">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744518">a</span>&nbsp;<span class="op" id="6744520">:=</span>&nbsp;<span class="ident" id="6744523">M</span>&nbsp;<span class="op" id="6744525">-</span>&nbsp;<span class="op" id="6744527">(</span><span class="ident" id="6744528">sa</span>&nbsp;<span class="op" id="6744531">*</span>&nbsp;<span class="ident" id="6744533">ma</span>&nbsp;<span class="op" id="6744536">/</span>&nbsp;<span class="ident" id="6744538">M</span><span class="op" id="6744539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744544">golden</span><span class="op" id="6744550">.</span><span class="ident" id="6744551">Set</span><span class="op" id="6744554">(</span><span class="ident" id="6744555">x</span><span class="op" id="6744556">,</span>&nbsp;<span class="ident" id="6744558">y</span><span class="op" id="6744559">,</span>&nbsp;<span class="ident" id="6744561">color</span><span class="op" id="6744566">.</span><span class="ident" id="6744567">RGBA64</span><span class="op" id="6744573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6744579">uint16</span><span class="op" id="6744585">(</span><span class="op" id="6744586">(</span><span class="ident" id="6744587">dr</span><span class="op" id="6744589">*</span><span class="ident" id="6744590">a</span>&nbsp;<span class="op" id="6744592">+</span>&nbsp;<span class="ident" id="6744594">sr</span><span class="op" id="6744596">*</span><span class="ident" id="6744597">ma</span><span class="op" id="6744599">)</span>&nbsp;<span class="op" id="6744601">/</span>&nbsp;<span class="ident" id="6744603">M</span><span class="op" id="6744604">)</span><span class="op" id="6744605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6744611">uint16</span><span class="op" id="6744617">(</span><span class="op" id="6744618">(</span><span class="ident" id="6744619">dg</span><span class="op" id="6744621">*</span><span class="ident" id="6744622">a</span>&nbsp;<span class="op" id="6744624">+</span>&nbsp;<span class="ident" id="6744626">sg</span><span class="op" id="6744628">*</span><span class="ident" id="6744629">ma</span><span class="op" id="6744631">)</span>&nbsp;<span class="op" id="6744633">/</span>&nbsp;<span class="ident" id="6744635">M</span><span class="op" id="6744636">)</span><span class="op" id="6744637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6744643">uint16</span><span class="op" id="6744649">(</span><span class="op" id="6744650">(</span><span class="ident" id="6744651">db</span><span class="op" id="6744653">*</span><span class="ident" id="6744654">a</span>&nbsp;<span class="op" id="6744656">+</span>&nbsp;<span class="ident" id="6744658">sb</span><span class="op" id="6744660">*</span><span class="ident" id="6744661">ma</span><span class="op" id="6744663">)</span>&nbsp;<span class="op" id="6744665">/</span>&nbsp;<span class="ident" id="6744667">M</span><span class="op" id="6744668">)</span><span class="op" id="6744669">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6744675">uint16</span><span class="op" id="6744681">(</span><span class="op" id="6744682">(</span><span class="ident" id="6744683">da</span><span class="op" id="6744685">*</span><span class="ident" id="6744686">a</span>&nbsp;<span class="op" id="6744688">+</span>&nbsp;<span class="ident" id="6744690">sa</span><span class="op" id="6744692">*</span><span class="ident" id="6744693">ma</span><span class="op" id="6744695">)</span>&nbsp;<span class="op" id="6744697">/</span>&nbsp;<span class="ident" id="6744699">M</span><span class="op" id="6744700">)</span><span class="op" id="6744701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744706">}</span><span class="op" id="6744707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6744714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6744717">return</span>&nbsp;<span class="ident" id="6744724">golden</span><span class="op" id="6744730">.</span><span class="ident" id="6744731">SubImage</span><span class="op" id="6744739">(</span><span class="ident" id="6744740">b</span><span class="op" id="6744741">)</span><br>
<span class="lineno">205</span><span class="op" id="6744743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6744746">func</span>&nbsp;<span class="ident" id="6744751">TestDraw</span><span class="op" id="6744759">(</span><span class="ident" id="6744760">t</span>&nbsp;<span class="op" id="6744762">*</span><span class="ident" id="6744763">testing</span><span class="op" id="6744770">.</span><span class="ident" id="6744771">T</span><span class="op" id="6744772">)</span>&nbsp;<span class="op" id="6744774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744777">rr</span>&nbsp;<span class="op" id="6744780">:=</span>&nbsp;<span class="op" id="6744783">[</span><span class="op" id="6744784">]</span><span class="ident" id="6744785">image</span><span class="op" id="6744790">.</span><span class="ident" id="6744791">Rectangle</span><span class="op" id="6744800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744804">image</span><span class="op" id="6744809">.</span><span class="ident" id="6744810">Rect</span><span class="op" id="6744814">(</span><span class="num" id="6744815">0</span><span class="op" id="6744816">,</span>&nbsp;<span class="num" id="6744818">0</span><span class="op" id="6744819">,</span>&nbsp;<span class="num" id="6744821">0</span><span class="op" id="6744822">,</span>&nbsp;<span class="num" id="6744824">0</span><span class="op" id="6744825">)</span><span class="op" id="6744826">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744830">image</span><span class="op" id="6744835">.</span><span class="ident" id="6744836">Rect</span><span class="op" id="6744840">(</span><span class="num" id="6744841">0</span><span class="op" id="6744842">,</span>&nbsp;<span class="num" id="6744844">0</span><span class="op" id="6744845">,</span>&nbsp;<span class="num" id="6744847">16</span><span class="op" id="6744849">,</span>&nbsp;<span class="num" id="6744851">16</span><span class="op" id="6744853">)</span><span class="op" id="6744854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744858">image</span><span class="op" id="6744863">.</span><span class="ident" id="6744864">Rect</span><span class="op" id="6744868">(</span><span class="num" id="6744869">3</span><span class="op" id="6744870">,</span>&nbsp;<span class="num" id="6744872">5</span><span class="op" id="6744873">,</span>&nbsp;<span class="num" id="6744875">12</span><span class="op" id="6744877">,</span>&nbsp;<span class="num" id="6744879">10</span><span class="op" id="6744881">)</span><span class="op" id="6744882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744886">image</span><span class="op" id="6744891">.</span><span class="ident" id="6744892">Rect</span><span class="op" id="6744896">(</span><span class="num" id="6744897">0</span><span class="op" id="6744898">,</span>&nbsp;<span class="num" id="6744900">0</span><span class="op" id="6744901">,</span>&nbsp;<span class="num" id="6744903">9</span><span class="op" id="6744904">,</span>&nbsp;<span class="num" id="6744906">9</span><span class="op" id="6744907">)</span><span class="op" id="6744908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744912">image</span><span class="op" id="6744917">.</span><span class="ident" id="6744918">Rect</span><span class="op" id="6744922">(</span><span class="num" id="6744923">8</span><span class="op" id="6744924">,</span>&nbsp;<span class="num" id="6744926">8</span><span class="op" id="6744927">,</span>&nbsp;<span class="num" id="6744929">16</span><span class="op" id="6744931">,</span>&nbsp;<span class="num" id="6744933">16</span><span class="op" id="6744935">)</span><span class="op" id="6744936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744940">image</span><span class="op" id="6744945">.</span><span class="ident" id="6744946">Rect</span><span class="op" id="6744950">(</span><span class="num" id="6744951">8</span><span class="op" id="6744952">,</span>&nbsp;<span class="num" id="6744954">0</span><span class="op" id="6744955">,</span>&nbsp;<span class="num" id="6744957">9</span><span class="op" id="6744958">,</span>&nbsp;<span class="num" id="6744960">16</span><span class="op" id="6744962">)</span><span class="op" id="6744963">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744967">image</span><span class="op" id="6744972">.</span><span class="ident" id="6744973">Rect</span><span class="op" id="6744977">(</span><span class="num" id="6744978">0</span><span class="op" id="6744979">,</span>&nbsp;<span class="num" id="6744981">8</span><span class="op" id="6744982">,</span>&nbsp;<span class="num" id="6744984">16</span><span class="op" id="6744986">,</span>&nbsp;<span class="num" id="6744988">9</span><span class="op" id="6744989">)</span><span class="op" id="6744990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6744994">image</span><span class="op" id="6744999">.</span><span class="ident" id="6745000">Rect</span><span class="op" id="6745004">(</span><span class="num" id="6745005">8</span><span class="op" id="6745006">,</span>&nbsp;<span class="num" id="6745008">8</span><span class="op" id="6745009">,</span>&nbsp;<span class="num" id="6745011">9</span><span class="op" id="6745012">,</span>&nbsp;<span class="num" id="6745014">9</span><span class="op" id="6745015">)</span><span class="op" id="6745016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745020">image</span><span class="op" id="6745025">.</span><span class="ident" id="6745026">Rect</span><span class="op" id="6745030">(</span><span class="num" id="6745031">8</span><span class="op" id="6745032">,</span>&nbsp;<span class="num" id="6745034">8</span><span class="op" id="6745035">,</span>&nbsp;<span class="num" id="6745037">8</span><span class="op" id="6745038">,</span>&nbsp;<span class="num" id="6745040">8</span><span class="op" id="6745041">)</span><span class="op" id="6745042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6745045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745048">for</span>&nbsp;<span class="ident" id="6745052">_</span><span class="op" id="6745053">,</span>&nbsp;<span class="ident" id="6745055">r</span>&nbsp;<span class="op" id="6745057">:=</span>&nbsp;<span class="keyword" id="6745060">range</span>&nbsp;<span class="ident" id="6745066">rr</span>&nbsp;<span class="op" id="6745069">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745072">loop</span><span class="op" id="6745076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745080">for</span>&nbsp;<span class="ident" id="6745084">_</span><span class="op" id="6745085">,</span>&nbsp;<span class="ident" id="6745087">test</span>&nbsp;<span class="op" id="6745092">:=</span>&nbsp;<span class="keyword" id="6745095">range</span>&nbsp;<span class="ident" id="6745101">drawTests</span>&nbsp;<span class="op" id="6745111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745116">dst</span>&nbsp;<span class="op" id="6745120">:=</span>&nbsp;<span class="ident" id="6745123">hgradRed</span><span class="op" id="6745131">(</span><span class="num" id="6745132">255</span><span class="op" id="6745135">)</span><span class="op" id="6745136">.</span><span class="op" id="6745137">(</span><span class="op" id="6745138">*</span><span class="ident" id="6745139">image</span><span class="op" id="6745144">.</span><span class="ident" id="6745145">RGBA</span><span class="op" id="6745149">)</span><span class="op" id="6745150">.</span><span class="ident" id="6745151">SubImage</span><span class="op" id="6745159">(</span><span class="ident" id="6745160">r</span><span class="op" id="6745161">)</span><span class="op" id="6745162">.</span><span class="op" id="6745163">(</span><span class="ident" id="6745164">Image</span><span class="op" id="6745169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6745174">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745275">golden</span>&nbsp;<span class="op" id="6745282">:=</span>&nbsp;<span class="ident" id="6745285">makeGolden</span><span class="op" id="6745295">(</span><span class="ident" id="6745296">dst</span><span class="op" id="6745299">,</span>&nbsp;<span class="ident" id="6745301">image</span><span class="op" id="6745306">.</span><span class="ident" id="6745307">Rect</span><span class="op" id="6745311">(</span><span class="num" id="6745312">0</span><span class="op" id="6745313">,</span>&nbsp;<span class="num" id="6745315">0</span><span class="op" id="6745316">,</span>&nbsp;<span class="num" id="6745318">16</span><span class="op" id="6745320">,</span>&nbsp;<span class="num" id="6745322">16</span><span class="op" id="6745324">)</span><span class="op" id="6745325">,</span>&nbsp;<span class="ident" id="6745327">test</span><span class="op" id="6745331">.</span><span class="ident" id="6745332">src</span><span class="op" id="6745335">,</span>&nbsp;<span class="ident" id="6745337">image</span><span class="op" id="6745342">.</span><span class="ident" id="6745343">ZP</span><span class="op" id="6745345">,</span>&nbsp;<span class="ident" id="6745347">test</span><span class="op" id="6745351">.</span><span class="ident" id="6745352">mask</span><span class="op" id="6745356">,</span>&nbsp;<span class="ident" id="6745358">image</span><span class="op" id="6745363">.</span><span class="ident" id="6745364">ZP</span><span class="op" id="6745366">,</span>&nbsp;<span class="ident" id="6745368">test</span><span class="op" id="6745372">.</span><span class="ident" id="6745373">op</span><span class="op" id="6745375">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745380">b</span>&nbsp;<span class="op" id="6745382">:=</span>&nbsp;<span class="ident" id="6745385">dst</span><span class="op" id="6745388">.</span><span class="ident" id="6745389">Bounds</span><span class="op" id="6745395">(</span><span class="op" id="6745396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745401">if</span>&nbsp;<span class="op" id="6745404">!</span><span class="ident" id="6745405">b</span><span class="op" id="6745406">.</span><span class="ident" id="6745407">Eq</span><span class="op" id="6745409">(</span><span class="ident" id="6745410">golden</span><span class="op" id="6745416">.</span><span class="ident" id="6745417">Bounds</span><span class="op" id="6745423">(</span><span class="op" id="6745424">)</span><span class="op" id="6745425">)</span>&nbsp;<span class="op" id="6745427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745433">t</span><span class="op" id="6745434">.</span><span class="ident" id="6745435">Errorf</span><span class="op" id="6745441">(</span><span class="string" id="6745442">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6745475">,</span>&nbsp;<span class="ident" id="6745477">r</span><span class="op" id="6745478">,</span>&nbsp;<span class="ident" id="6745480">test</span><span class="op" id="6745484">.</span><span class="ident" id="6745485">desc</span><span class="op" id="6745489">,</span>&nbsp;<span class="ident" id="6745491">dst</span><span class="op" id="6745494">.</span><span class="ident" id="6745495">Bounds</span><span class="op" id="6745501">(</span><span class="op" id="6745502">)</span><span class="op" id="6745503">,</span>&nbsp;<span class="ident" id="6745505">golden</span><span class="op" id="6745511">.</span><span class="ident" id="6745512">Bounds</span><span class="op" id="6745518">(</span><span class="op" id="6745519">)</span><span class="op" id="6745520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745526">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6745538">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6745543">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745640">DrawMask</span><span class="op" id="6745648">(</span><span class="ident" id="6745649">dst</span><span class="op" id="6745652">,</span>&nbsp;<span class="ident" id="6745654">image</span><span class="op" id="6745659">.</span><span class="ident" id="6745660">Rect</span><span class="op" id="6745664">(</span><span class="num" id="6745665">0</span><span class="op" id="6745666">,</span>&nbsp;<span class="num" id="6745668">0</span><span class="op" id="6745669">,</span>&nbsp;<span class="num" id="6745671">16</span><span class="op" id="6745673">,</span>&nbsp;<span class="num" id="6745675">16</span><span class="op" id="6745677">)</span><span class="op" id="6745678">,</span>&nbsp;<span class="ident" id="6745680">test</span><span class="op" id="6745684">.</span><span class="ident" id="6745685">src</span><span class="op" id="6745688">,</span>&nbsp;<span class="ident" id="6745690">image</span><span class="op" id="6745695">.</span><span class="ident" id="6745696">ZP</span><span class="op" id="6745698">,</span>&nbsp;<span class="ident" id="6745700">test</span><span class="op" id="6745704">.</span><span class="ident" id="6745705">mask</span><span class="op" id="6745709">,</span>&nbsp;<span class="ident" id="6745711">image</span><span class="op" id="6745716">.</span><span class="ident" id="6745717">ZP</span><span class="op" id="6745719">,</span>&nbsp;<span class="ident" id="6745721">test</span><span class="op" id="6745725">.</span><span class="ident" id="6745726">op</span><span class="op" id="6745728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745733">if</span>&nbsp;<span class="ident" id="6745736">image</span><span class="op" id="6745741">.</span><span class="ident" id="6745742">Pt</span><span class="op" id="6745744">(</span><span class="num" id="6745745">8</span><span class="op" id="6745746">,</span>&nbsp;<span class="num" id="6745748">8</span><span class="op" id="6745749">)</span><span class="op" id="6745750">.</span><span class="ident" id="6745751">In</span><span class="op" id="6745753">(</span><span class="ident" id="6745754">r</span><span class="op" id="6745755">)</span>&nbsp;<span class="op" id="6745757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6745763">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6745834">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6745887">if</span>&nbsp;<span class="op" id="6745890">!</span><span class="ident" id="6745891">eq</span><span class="op" id="6745893">(</span><span class="ident" id="6745894">dst</span><span class="op" id="6745897">.</span><span class="ident" id="6745898">At</span><span class="op" id="6745900">(</span><span class="num" id="6745901">8</span><span class="op" id="6745902">,</span>&nbsp;<span class="num" id="6745904">8</span><span class="op" id="6745905">)</span><span class="op" id="6745906">,</span>&nbsp;<span class="ident" id="6745908">test</span><span class="op" id="6745912">.</span><span class="ident" id="6745913">expected</span><span class="op" id="6745921">)</span>&nbsp;<span class="op" id="6745923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6745930">t</span><span class="op" id="6745931">.</span><span class="ident" id="6745932">Errorf</span><span class="op" id="6745938">(</span><span class="string" id="6745939">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6745975">,</span>&nbsp;<span class="ident" id="6745977">r</span><span class="op" id="6745978">,</span>&nbsp;<span class="ident" id="6745980">test</span><span class="op" id="6745984">.</span><span class="ident" id="6745985">desc</span><span class="op" id="6745989">,</span>&nbsp;<span class="ident" id="6745991">dst</span><span class="op" id="6745994">.</span><span class="ident" id="6745995">At</span><span class="op" id="6745997">(</span><span class="num" id="6745998">8</span><span class="op" id="6745999">,</span>&nbsp;<span class="num" id="6746001">8</span><span class="op" id="6746002">)</span><span class="op" id="6746003">,</span>&nbsp;<span class="ident" id="6746005">test</span><span class="op" id="6746009">.</span><span class="ident" id="6746010">expected</span><span class="op" id="6746018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746025">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746043">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6746048">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746116">for</span>&nbsp;<span class="ident" id="6746120">y</span>&nbsp;<span class="op" id="6746122">:=</span>&nbsp;<span class="ident" id="6746125">b</span><span class="op" id="6746126">.</span><span class="ident" id="6746127">Min</span><span class="op" id="6746130">.</span><span class="ident" id="6746131">Y</span><span class="op" id="6746132">;</span>&nbsp;<span class="ident" id="6746134">y</span>&nbsp;<span class="op" id="6746136">&lt;</span>&nbsp;<span class="ident" id="6746138">b</span><span class="op" id="6746139">.</span><span class="ident" id="6746140">Max</span><span class="op" id="6746143">.</span><span class="ident" id="6746144">Y</span><span class="op" id="6746145">;</span>&nbsp;<span class="ident" id="6746147">y</span><span class="op" id="6746148">++</span>&nbsp;<span class="op" id="6746151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746157">for</span>&nbsp;<span class="ident" id="6746161">x</span>&nbsp;<span class="op" id="6746163">:=</span>&nbsp;<span class="ident" id="6746166">b</span><span class="op" id="6746167">.</span><span class="ident" id="6746168">Min</span><span class="op" id="6746171">.</span><span class="ident" id="6746172">X</span><span class="op" id="6746173">;</span>&nbsp;<span class="ident" id="6746175">x</span>&nbsp;<span class="op" id="6746177">&lt;</span>&nbsp;<span class="ident" id="6746179">b</span><span class="op" id="6746180">.</span><span class="ident" id="6746181">Max</span><span class="op" id="6746184">.</span><span class="ident" id="6746185">X</span><span class="op" id="6746186">;</span>&nbsp;<span class="ident" id="6746188">x</span><span class="op" id="6746189">++</span>&nbsp;<span class="op" id="6746192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746199">if</span>&nbsp;<span class="op" id="6746202">!</span><span class="ident" id="6746203">eq</span><span class="op" id="6746205">(</span><span class="ident" id="6746206">dst</span><span class="op" id="6746209">.</span><span class="ident" id="6746210">At</span><span class="op" id="6746212">(</span><span class="ident" id="6746213">x</span><span class="op" id="6746214">,</span>&nbsp;<span class="ident" id="6746216">y</span><span class="op" id="6746217">)</span><span class="op" id="6746218">,</span>&nbsp;<span class="ident" id="6746220">golden</span><span class="op" id="6746226">.</span><span class="ident" id="6746227">At</span><span class="op" id="6746229">(</span><span class="ident" id="6746230">x</span><span class="op" id="6746231">,</span>&nbsp;<span class="ident" id="6746233">y</span><span class="op" id="6746234">)</span><span class="op" id="6746235">)</span>&nbsp;<span class="op" id="6746237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746245">t</span><span class="op" id="6746246">.</span><span class="ident" id="6746247">Errorf</span><span class="op" id="6746253">(</span><span class="string" id="6746254">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6746300">,</span>&nbsp;<span class="ident" id="6746302">r</span><span class="op" id="6746303">,</span>&nbsp;<span class="ident" id="6746305">test</span><span class="op" id="6746309">.</span><span class="ident" id="6746310">desc</span><span class="op" id="6746314">,</span>&nbsp;<span class="ident" id="6746316">x</span><span class="op" id="6746317">,</span>&nbsp;<span class="ident" id="6746319">y</span><span class="op" id="6746320">,</span>&nbsp;<span class="ident" id="6746322">dst</span><span class="op" id="6746325">.</span><span class="ident" id="6746326">At</span><span class="op" id="6746328">(</span><span class="ident" id="6746329">x</span><span class="op" id="6746330">,</span>&nbsp;<span class="ident" id="6746332">y</span><span class="op" id="6746333">)</span><span class="op" id="6746334">,</span>&nbsp;<span class="ident" id="6746336">golden</span><span class="op" id="6746342">.</span><span class="ident" id="6746343">At</span><span class="op" id="6746345">(</span><span class="ident" id="6746346">x</span><span class="op" id="6746347">,</span>&nbsp;<span class="ident" id="6746349">y</span><span class="op" id="6746350">)</span><span class="op" id="6746351">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746359">continue</span>&nbsp;<span class="ident" id="6746368">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746393">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6746396">}</span><br>
<span class="lineno"></span><span class="op" id="6746398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6746401">func</span>&nbsp;<span class="ident" id="6746406">TestDrawOverlap</span><span class="op" id="6746421">(</span><span class="ident" id="6746422">t</span>&nbsp;<span class="op" id="6746424">*</span><span class="ident" id="6746425">testing</span><span class="op" id="6746432">.</span><span class="ident" id="6746433">T</span><span class="op" id="6746434">)</span>&nbsp;<span class="op" id="6746436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746439">for</span>&nbsp;<span class="ident" id="6746443">_</span><span class="op" id="6746444">,</span>&nbsp;<span class="ident" id="6746446">op</span>&nbsp;<span class="op" id="6746449">:=</span>&nbsp;<span class="keyword" id="6746452">range</span>&nbsp;<span class="op" id="6746458">[</span><span class="op" id="6746459">]</span><span class="ident" id="6746460">Op</span><span class="op" id="6746462">{</span><span class="ident" id="6746463">Over</span><span class="op" id="6746467">,</span>&nbsp;<span class="ident" id="6746469">Src</span><span class="op" id="6746472">}</span>&nbsp;<span class="op" id="6746474">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746478">for</span>&nbsp;<span class="ident" id="6746482">yoff</span>&nbsp;<span class="op" id="6746487">:=</span>&nbsp;<span class="op" id="6746490">-</span><span class="num" id="6746491">2</span><span class="op" id="6746492">;</span>&nbsp;<span class="ident" id="6746494">yoff</span>&nbsp;<span class="op" id="6746499">&lt;=</span>&nbsp;<span class="num" id="6746502">2</span><span class="op" id="6746503">;</span>&nbsp;<span class="ident" id="6746505">yoff</span><span class="op" id="6746509">++</span>&nbsp;<span class="op" id="6746512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746516">loop</span><span class="op" id="6746520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746525">for</span>&nbsp;<span class="ident" id="6746529">xoff</span>&nbsp;<span class="op" id="6746534">:=</span>&nbsp;<span class="op" id="6746537">-</span><span class="num" id="6746538">2</span><span class="op" id="6746539">;</span>&nbsp;<span class="ident" id="6746541">xoff</span>&nbsp;<span class="op" id="6746546">&lt;=</span>&nbsp;<span class="num" id="6746549">2</span><span class="op" id="6746550">;</span>&nbsp;<span class="ident" id="6746552">xoff</span><span class="op" id="6746556">++</span>&nbsp;<span class="op" id="6746559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746565">m</span>&nbsp;<span class="op" id="6746567">:=</span>&nbsp;<span class="ident" id="6746570">gradYellow</span><span class="op" id="6746580">(</span><span class="num" id="6746581">127</span><span class="op" id="6746584">)</span><span class="op" id="6746585">.</span><span class="op" id="6746586">(</span><span class="op" id="6746587">*</span><span class="ident" id="6746588">image</span><span class="op" id="6746593">.</span><span class="ident" id="6746594">RGBA</span><span class="op" id="6746598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746604">dst</span>&nbsp;<span class="op" id="6746608">:=</span>&nbsp;<span class="ident" id="6746611">m</span><span class="op" id="6746612">.</span><span class="ident" id="6746613">SubImage</span><span class="op" id="6746621">(</span><span class="ident" id="6746622">image</span><span class="op" id="6746627">.</span><span class="ident" id="6746628">Rect</span><span class="op" id="6746632">(</span><span class="num" id="6746633">5</span><span class="op" id="6746634">,</span>&nbsp;<span class="num" id="6746636">5</span><span class="op" id="6746637">,</span>&nbsp;<span class="num" id="6746639">10</span><span class="op" id="6746641">,</span>&nbsp;<span class="num" id="6746643">10</span><span class="op" id="6746645">)</span><span class="op" id="6746646">)</span><span class="op" id="6746647">.</span><span class="op" id="6746648">(</span><span class="op" id="6746649">*</span><span class="ident" id="6746650">image</span><span class="op" id="6746655">.</span><span class="ident" id="6746656">RGBA</span><span class="op" id="6746660">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746666">src</span>&nbsp;<span class="op" id="6746670">:=</span>&nbsp;<span class="ident" id="6746673">m</span><span class="op" id="6746674">.</span><span class="ident" id="6746675">SubImage</span><span class="op" id="6746683">(</span><span class="ident" id="6746684">image</span><span class="op" id="6746689">.</span><span class="ident" id="6746690">Rect</span><span class="op" id="6746694">(</span><span class="num" id="6746695">5</span><span class="op" id="6746696">+</span><span class="ident" id="6746697">xoff</span><span class="op" id="6746701">,</span>&nbsp;<span class="num" id="6746703">5</span><span class="op" id="6746704">+</span><span class="ident" id="6746705">yoff</span><span class="op" id="6746709">,</span>&nbsp;<span class="num" id="6746711">10</span><span class="op" id="6746713">+</span><span class="ident" id="6746714">xoff</span><span class="op" id="6746718">,</span>&nbsp;<span class="num" id="6746720">10</span><span class="op" id="6746722">+</span><span class="ident" id="6746723">yoff</span><span class="op" id="6746727">)</span><span class="op" id="6746728">)</span><span class="op" id="6746729">.</span><span class="op" id="6746730">(</span><span class="op" id="6746731">*</span><span class="ident" id="6746732">image</span><span class="op" id="6746737">.</span><span class="ident" id="6746738">RGBA</span><span class="op" id="6746742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746748">b</span>&nbsp;<span class="op" id="6746750">:=</span>&nbsp;<span class="ident" id="6746753">dst</span><span class="op" id="6746756">.</span><span class="ident" id="6746757">Bounds</span><span class="op" id="6746763">(</span><span class="op" id="6746764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6746770">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746872">golden</span>&nbsp;<span class="op" id="6746879">:=</span>&nbsp;<span class="ident" id="6746882">makeGolden</span><span class="op" id="6746892">(</span><span class="ident" id="6746893">dst</span><span class="op" id="6746896">,</span>&nbsp;<span class="ident" id="6746898">b</span><span class="op" id="6746899">,</span>&nbsp;<span class="ident" id="6746901">src</span><span class="op" id="6746904">,</span>&nbsp;<span class="ident" id="6746906">src</span><span class="op" id="6746909">.</span><span class="ident" id="6746910">Bounds</span><span class="op" id="6746916">(</span><span class="op" id="6746917">)</span><span class="op" id="6746918">.</span><span class="ident" id="6746919">Min</span><span class="op" id="6746922">,</span>&nbsp;<span class="builtintype" id="6746924">nil</span><span class="op" id="6746927">,</span>&nbsp;<span class="ident" id="6746929">image</span><span class="op" id="6746934">.</span><span class="ident" id="6746935">ZP</span><span class="op" id="6746937">,</span>&nbsp;<span class="ident" id="6746939">op</span><span class="op" id="6746941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6746947">if</span>&nbsp;<span class="op" id="6746950">!</span><span class="ident" id="6746951">b</span><span class="op" id="6746952">.</span><span class="ident" id="6746953">Eq</span><span class="op" id="6746955">(</span><span class="ident" id="6746956">golden</span><span class="op" id="6746962">.</span><span class="ident" id="6746963">Bounds</span><span class="op" id="6746969">(</span><span class="op" id="6746970">)</span><span class="op" id="6746971">)</span>&nbsp;<span class="op" id="6746973">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6746980">t</span><span class="op" id="6746981">.</span><span class="ident" id="6746982">Errorf</span><span class="op" id="6746988">(</span><span class="string" id="6746989">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6747039">,</span>&nbsp;<span class="ident" id="6747041">xoff</span><span class="op" id="6747045">,</span>&nbsp;<span class="ident" id="6747047">yoff</span><span class="op" id="6747051">,</span>&nbsp;<span class="ident" id="6747053">dst</span><span class="op" id="6747056">.</span><span class="ident" id="6747057">Bounds</span><span class="op" id="6747063">(</span><span class="op" id="6747064">)</span><span class="op" id="6747065">,</span>&nbsp;<span class="ident" id="6747067">golden</span><span class="op" id="6747073">.</span><span class="ident" id="6747074">Bounds</span><span class="op" id="6747080">(</span><span class="op" id="6747081">)</span><span class="op" id="6747082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747089">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6747108">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747206">DrawMask</span><span class="op" id="6747214">(</span><span class="ident" id="6747215">dst</span><span class="op" id="6747218">,</span>&nbsp;<span class="ident" id="6747220">b</span><span class="op" id="6747221">,</span>&nbsp;<span class="ident" id="6747223">src</span><span class="op" id="6747226">,</span>&nbsp;<span class="ident" id="6747228">src</span><span class="op" id="6747231">.</span><span class="ident" id="6747232">Bounds</span><span class="op" id="6747238">(</span><span class="op" id="6747239">)</span><span class="op" id="6747240">.</span><span class="ident" id="6747241">Min</span><span class="op" id="6747244">,</span>&nbsp;<span class="builtintype" id="6747246">nil</span><span class="op" id="6747249">,</span>&nbsp;<span class="ident" id="6747251">image</span><span class="op" id="6747256">.</span><span class="ident" id="6747257">ZP</span><span class="op" id="6747259">,</span>&nbsp;<span class="ident" id="6747261">op</span><span class="op" id="6747263">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6747269">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747338">for</span>&nbsp;<span class="ident" id="6747342">y</span>&nbsp;<span class="op" id="6747344">:=</span>&nbsp;<span class="ident" id="6747347">b</span><span class="op" id="6747348">.</span><span class="ident" id="6747349">Min</span><span class="op" id="6747352">.</span><span class="ident" id="6747353">Y</span><span class="op" id="6747354">;</span>&nbsp;<span class="ident" id="6747356">y</span>&nbsp;<span class="op" id="6747358">&lt;</span>&nbsp;<span class="ident" id="6747360">b</span><span class="op" id="6747361">.</span><span class="ident" id="6747362">Max</span><span class="op" id="6747365">.</span><span class="ident" id="6747366">Y</span><span class="op" id="6747367">;</span>&nbsp;<span class="ident" id="6747369">y</span><span class="op" id="6747370">++</span>&nbsp;<span class="op" id="6747373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747380">for</span>&nbsp;<span class="ident" id="6747384">x</span>&nbsp;<span class="op" id="6747386">:=</span>&nbsp;<span class="ident" id="6747389">b</span><span class="op" id="6747390">.</span><span class="ident" id="6747391">Min</span><span class="op" id="6747394">.</span><span class="ident" id="6747395">X</span><span class="op" id="6747396">;</span>&nbsp;<span class="ident" id="6747398">x</span>&nbsp;<span class="op" id="6747400">&lt;</span>&nbsp;<span class="ident" id="6747402">b</span><span class="op" id="6747403">.</span><span class="ident" id="6747404">Max</span><span class="op" id="6747407">.</span><span class="ident" id="6747408">X</span><span class="op" id="6747409">;</span>&nbsp;<span class="ident" id="6747411">x</span><span class="op" id="6747412">++</span>&nbsp;<span class="op" id="6747415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747423">if</span>&nbsp;<span class="op" id="6747426">!</span><span class="ident" id="6747427">eq</span><span class="op" id="6747429">(</span><span class="ident" id="6747430">dst</span><span class="op" id="6747433">.</span><span class="ident" id="6747434">At</span><span class="op" id="6747436">(</span><span class="ident" id="6747437">x</span><span class="op" id="6747438">,</span>&nbsp;<span class="ident" id="6747440">y</span><span class="op" id="6747441">)</span><span class="op" id="6747442">,</span>&nbsp;<span class="ident" id="6747444">golden</span><span class="op" id="6747450">.</span><span class="ident" id="6747451">At</span><span class="op" id="6747453">(</span><span class="ident" id="6747454">x</span><span class="op" id="6747455">,</span>&nbsp;<span class="ident" id="6747457">y</span><span class="op" id="6747458">)</span><span class="op" id="6747459">)</span>&nbsp;<span class="op" id="6747461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747470">t</span><span class="op" id="6747471">.</span><span class="ident" id="6747472">Errorf</span><span class="op" id="6747478">(</span><span class="string" id="6747479">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="6747542">,</span>&nbsp;<span class="ident" id="6747544">xoff</span><span class="op" id="6747548">,</span>&nbsp;<span class="ident" id="6747550">yoff</span><span class="op" id="6747554">,</span>&nbsp;<span class="ident" id="6747556">x</span><span class="op" id="6747557">,</span>&nbsp;<span class="ident" id="6747559">y</span><span class="op" id="6747560">,</span>&nbsp;<span class="ident" id="6747562">dst</span><span class="op" id="6747565">.</span><span class="ident" id="6747566">At</span><span class="op" id="6747568">(</span><span class="ident" id="6747569">x</span><span class="op" id="6747570">,</span>&nbsp;<span class="ident" id="6747572">y</span><span class="op" id="6747573">)</span><span class="op" id="6747574">,</span>&nbsp;<span class="ident" id="6747576">golden</span><span class="op" id="6747582">.</span><span class="ident" id="6747583">At</span><span class="op" id="6747585">(</span><span class="ident" id="6747586">x</span><span class="op" id="6747587">,</span>&nbsp;<span class="ident" id="6747589">y</span><span class="op" id="6747590">)</span><span class="op" id="6747591">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6747600">continue</span>&nbsp;<span class="ident" id="6747609">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747638">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6747645">}</span><br>
<span class="lineno"></span><span class="op" id="6747647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6747650">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="6747722">func</span>&nbsp;<span class="ident" id="6747727">TestNonZeroSrcPt</span><span class="op" id="6747743">(</span><span class="ident" id="6747744">t</span>&nbsp;<span class="op" id="6747746">*</span><span class="ident" id="6747747">testing</span><span class="op" id="6747754">.</span><span class="ident" id="6747755">T</span><span class="op" id="6747756">)</span>&nbsp;<span class="op" id="6747758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747761">a</span>&nbsp;<span class="op" id="6747763">:=</span>&nbsp;<span class="ident" id="6747766">image</span><span class="op" id="6747771">.</span><span class="ident" id="6747772">NewRGBA</span><span class="op" id="6747779">(</span><span class="ident" id="6747780">image</span><span class="op" id="6747785">.</span><span class="ident" id="6747786">Rect</span><span class="op" id="6747790">(</span><span class="num" id="6747791">0</span><span class="op" id="6747792">,</span>&nbsp;<span class="num" id="6747794">0</span><span class="op" id="6747795">,</span>&nbsp;<span class="num" id="6747797">1</span><span class="op" id="6747798">,</span>&nbsp;<span class="num" id="6747800">1</span><span class="op" id="6747801">)</span><span class="op" id="6747802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747805">b</span>&nbsp;<span class="op" id="6747807">:=</span>&nbsp;<span class="ident" id="6747810">image</span><span class="op" id="6747815">.</span><span class="ident" id="6747816">NewRGBA</span><span class="op" id="6747823">(</span><span class="ident" id="6747824">image</span><span class="op" id="6747829">.</span><span class="ident" id="6747830">Rect</span><span class="op" id="6747834">(</span><span class="num" id="6747835">0</span><span class="op" id="6747836">,</span>&nbsp;<span class="num" id="6747838">0</span><span class="op" id="6747839">,</span>&nbsp;<span class="num" id="6747841">2</span><span class="op" id="6747842">,</span>&nbsp;<span class="num" id="6747844">2</span><span class="op" id="6747845">)</span><span class="op" id="6747846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747849">b</span><span class="op" id="6747850">.</span><span class="ident" id="6747851">Set</span><span class="op" id="6747854">(</span><span class="num" id="6747855">0</span><span class="op" id="6747856">,</span>&nbsp;<span class="num" id="6747858">0</span><span class="op" id="6747859">,</span>&nbsp;<span class="ident" id="6747861">color</span><span class="op" id="6747866">.</span><span class="ident" id="6747867">RGBA</span><span class="op" id="6747871">{</span><span class="num" id="6747872">0</span><span class="op" id="6747873">,</span>&nbsp;<span class="num" id="6747875">0</span><span class="op" id="6747876">,</span>&nbsp;<span class="num" id="6747878">0</span><span class="op" id="6747879">,</span>&nbsp;<span class="num" id="6747881">5</span><span class="op" id="6747882">}</span><span class="op" id="6747883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747886">b</span><span class="op" id="6747887">.</span><span class="ident" id="6747888">Set</span><span class="op" id="6747891">(</span><span class="num" id="6747892">1</span><span class="op" id="6747893">,</span>&nbsp;<span class="num" id="6747895">0</span><span class="op" id="6747896">,</span>&nbsp;<span class="ident" id="6747898">color</span><span class="op" id="6747903">.</span><span class="ident" id="6747904">RGBA</span><span class="op" id="6747908">{</span><span class="num" id="6747909">0</span><span class="op" id="6747910">,</span>&nbsp;<span class="num" id="6747912">0</span><span class="op" id="6747913">,</span>&nbsp;<span class="num" id="6747915">5</span><span class="op" id="6747916">,</span>&nbsp;<span class="num" id="6747918">5</span><span class="op" id="6747919">}</span><span class="op" id="6747920">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747923">b</span><span class="op" id="6747924">.</span><span class="ident" id="6747925">Set</span><span class="op" id="6747928">(</span><span class="num" id="6747929">0</span><span class="op" id="6747930">,</span>&nbsp;<span class="num" id="6747932">1</span><span class="op" id="6747933">,</span>&nbsp;<span class="ident" id="6747935">color</span><span class="op" id="6747940">.</span><span class="ident" id="6747941">RGBA</span><span class="op" id="6747945">{</span><span class="num" id="6747946">0</span><span class="op" id="6747947">,</span>&nbsp;<span class="num" id="6747949">5</span><span class="op" id="6747950">,</span>&nbsp;<span class="num" id="6747952">0</span><span class="op" id="6747953">,</span>&nbsp;<span class="num" id="6747955">5</span><span class="op" id="6747956">}</span><span class="op" id="6747957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747960">b</span><span class="op" id="6747961">.</span><span class="ident" id="6747962">Set</span><span class="op" id="6747965">(</span><span class="num" id="6747966">1</span><span class="op" id="6747967">,</span>&nbsp;<span class="num" id="6747969">1</span><span class="op" id="6747970">,</span>&nbsp;<span class="ident" id="6747972">color</span><span class="op" id="6747977">.</span><span class="ident" id="6747978">RGBA</span><span class="op" id="6747982">{</span><span class="num" id="6747983">5</span><span class="op" id="6747984">,</span>&nbsp;<span class="num" id="6747986">0</span><span class="op" id="6747987">,</span>&nbsp;<span class="num" id="6747989">0</span><span class="op" id="6747990">,</span>&nbsp;<span class="num" id="6747992">5</span><span class="op" id="6747993">}</span><span class="op" id="6747994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6747997">Draw</span><span class="op" id="6748001">(</span><span class="ident" id="6748002">a</span><span class="op" id="6748003">,</span>&nbsp;<span class="ident" id="6748005">image</span><span class="op" id="6748010">.</span><span class="ident" id="6748011">Rect</span><span class="op" id="6748015">(</span><span class="num" id="6748016">0</span><span class="op" id="6748017">,</span>&nbsp;<span class="num" id="6748019">0</span><span class="op" id="6748020">,</span>&nbsp;<span class="num" id="6748022">1</span><span class="op" id="6748023">,</span>&nbsp;<span class="num" id="6748025">1</span><span class="op" id="6748026">)</span><span class="op" id="6748027">,</span>&nbsp;<span class="ident" id="6748029">b</span><span class="op" id="6748030">,</span>&nbsp;<span class="ident" id="6748032">image</span><span class="op" id="6748037">.</span><span class="ident" id="6748038">Pt</span><span class="op" id="6748040">(</span><span class="num" id="6748041">1</span><span class="op" id="6748042">,</span>&nbsp;<span class="num" id="6748044">1</span><span class="op" id="6748045">)</span><span class="op" id="6748046">,</span>&nbsp;<span class="ident" id="6748048">Over</span><span class="op" id="6748052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6748055">if</span>&nbsp;<span class="op" id="6748058">!</span><span class="ident" id="6748059">eq</span><span class="op" id="6748061">(</span><span class="ident" id="6748062">color</span><span class="op" id="6748067">.</span><span class="ident" id="6748068">RGBA</span><span class="op" id="6748072">{</span><span class="num" id="6748073">5</span><span class="op" id="6748074">,</span>&nbsp;<span class="num" id="6748076">0</span><span class="op" id="6748077">,</span>&nbsp;<span class="num" id="6748079">0</span><span class="op" id="6748080">,</span>&nbsp;<span class="num" id="6748082">5</span><span class="op" id="6748083">}</span><span class="op" id="6748084">,</span>&nbsp;<span class="ident" id="6748086">a</span><span class="op" id="6748087">.</span><span class="ident" id="6748088">At</span><span class="op" id="6748090">(</span><span class="num" id="6748091">0</span><span class="op" id="6748092">,</span>&nbsp;<span class="num" id="6748094">0</span><span class="op" id="6748095">)</span><span class="op" id="6748096">)</span>&nbsp;<span class="op" id="6748098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748102">t</span><span class="op" id="6748103">.</span><span class="ident" id="6748104">Errorf</span><span class="op" id="6748110">(</span><span class="string" id="6748111">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6748144">,</span>&nbsp;<span class="ident" id="6748146">color</span><span class="op" id="6748151">.</span><span class="ident" id="6748152">RGBA</span><span class="op" id="6748156">{</span><span class="num" id="6748157">5</span><span class="op" id="6748158">,</span>&nbsp;<span class="num" id="6748160">0</span><span class="op" id="6748161">,</span>&nbsp;<span class="num" id="6748163">0</span><span class="op" id="6748164">,</span>&nbsp;<span class="num" id="6748166">5</span><span class="op" id="6748167">}</span><span class="op" id="6748168">,</span>&nbsp;<span class="ident" id="6748170">a</span><span class="op" id="6748171">.</span><span class="ident" id="6748172">At</span><span class="op" id="6748174">(</span><span class="num" id="6748175">0</span><span class="op" id="6748176">,</span>&nbsp;<span class="num" id="6748178">0</span><span class="op" id="6748179">)</span><span class="op" id="6748180">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748183">}</span><br>
<span class="lineno"></span><span class="op" id="6748185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6748188">func</span>&nbsp;<span class="ident" id="6748193">TestFill</span><span class="op" id="6748201">(</span><span class="ident" id="6748202">t</span>&nbsp;<span class="op" id="6748204">*</span><span class="ident" id="6748205">testing</span><span class="op" id="6748212">.</span><span class="ident" id="6748213">T</span><span class="op" id="6748214">)</span>&nbsp;<span class="op" id="6748216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748219">rr</span>&nbsp;<span class="op" id="6748222">:=</span>&nbsp;<span class="op" id="6748225">[</span><span class="op" id="6748226">]</span><span class="ident" id="6748227">image</span><span class="op" id="6748232">.</span><span class="ident" id="6748233">Rectangle</span><span class="op" id="6748242">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748246">image</span><span class="op" id="6748251">.</span><span class="ident" id="6748252">Rect</span><span class="op" id="6748256">(</span><span class="num" id="6748257">0</span><span class="op" id="6748258">,</span>&nbsp;<span class="num" id="6748260">0</span><span class="op" id="6748261">,</span>&nbsp;<span class="num" id="6748263">0</span><span class="op" id="6748264">,</span>&nbsp;<span class="num" id="6748266">0</span><span class="op" id="6748267">)</span><span class="op" id="6748268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748272">image</span><span class="op" id="6748277">.</span><span class="ident" id="6748278">Rect</span><span class="op" id="6748282">(</span><span class="num" id="6748283">0</span><span class="op" id="6748284">,</span>&nbsp;<span class="num" id="6748286">0</span><span class="op" id="6748287">,</span>&nbsp;<span class="num" id="6748289">40</span><span class="op" id="6748291">,</span>&nbsp;<span class="num" id="6748293">30</span><span class="op" id="6748295">)</span><span class="op" id="6748296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748300">image</span><span class="op" id="6748305">.</span><span class="ident" id="6748306">Rect</span><span class="op" id="6748310">(</span><span class="num" id="6748311">10</span><span class="op" id="6748313">,</span>&nbsp;<span class="num" id="6748315">0</span><span class="op" id="6748316">,</span>&nbsp;<span class="num" id="6748318">40</span><span class="op" id="6748320">,</span>&nbsp;<span class="num" id="6748322">30</span><span class="op" id="6748324">)</span><span class="op" id="6748325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748329">image</span><span class="op" id="6748334">.</span><span class="ident" id="6748335">Rect</span><span class="op" id="6748339">(</span><span class="num" id="6748340">0</span><span class="op" id="6748341">,</span>&nbsp;<span class="num" id="6748343">20</span><span class="op" id="6748345">,</span>&nbsp;<span class="num" id="6748347">40</span><span class="op" id="6748349">,</span>&nbsp;<span class="num" id="6748351">30</span><span class="op" id="6748353">)</span><span class="op" id="6748354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748358">image</span><span class="op" id="6748363">.</span><span class="ident" id="6748364">Rect</span><span class="op" id="6748368">(</span><span class="num" id="6748369">10</span><span class="op" id="6748371">,</span>&nbsp;<span class="num" id="6748373">20</span><span class="op" id="6748375">,</span>&nbsp;<span class="num" id="6748377">40</span><span class="op" id="6748379">,</span>&nbsp;<span class="num" id="6748381">30</span><span class="op" id="6748383">)</span><span class="op" id="6748384">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748388">image</span><span class="op" id="6748393">.</span><span class="ident" id="6748394">Rect</span><span class="op" id="6748398">(</span><span class="num" id="6748399">10</span><span class="op" id="6748401">,</span>&nbsp;<span class="num" id="6748403">20</span><span class="op" id="6748405">,</span>&nbsp;<span class="num" id="6748407">15</span><span class="op" id="6748409">,</span>&nbsp;<span class="num" id="6748411">25</span><span class="op" id="6748413">)</span><span class="op" id="6748414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748418">image</span><span class="op" id="6748423">.</span><span class="ident" id="6748424">Rect</span><span class="op" id="6748428">(</span><span class="num" id="6748429">10</span><span class="op" id="6748431">,</span>&nbsp;<span class="num" id="6748433">0</span><span class="op" id="6748434">,</span>&nbsp;<span class="num" id="6748436">35</span><span class="op" id="6748438">,</span>&nbsp;<span class="num" id="6748440">30</span><span class="op" id="6748442">)</span><span class="op" id="6748443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748447">image</span><span class="op" id="6748452">.</span><span class="ident" id="6748453">Rect</span><span class="op" id="6748457">(</span><span class="num" id="6748458">0</span><span class="op" id="6748459">,</span>&nbsp;<span class="num" id="6748461">15</span><span class="op" id="6748463">,</span>&nbsp;<span class="num" id="6748465">40</span><span class="op" id="6748467">,</span>&nbsp;<span class="num" id="6748469">16</span><span class="op" id="6748471">)</span><span class="op" id="6748472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748476">image</span><span class="op" id="6748481">.</span><span class="ident" id="6748482">Rect</span><span class="op" id="6748486">(</span><span class="num" id="6748487">24</span><span class="op" id="6748489">,</span>&nbsp;<span class="num" id="6748491">24</span><span class="op" id="6748493">,</span>&nbsp;<span class="num" id="6748495">25</span><span class="op" id="6748497">,</span>&nbsp;<span class="num" id="6748499">25</span><span class="op" id="6748501">)</span><span class="op" id="6748502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748506">image</span><span class="op" id="6748511">.</span><span class="ident" id="6748512">Rect</span><span class="op" id="6748516">(</span><span class="num" id="6748517">23</span><span class="op" id="6748519">,</span>&nbsp;<span class="num" id="6748521">23</span><span class="op" id="6748523">,</span>&nbsp;<span class="num" id="6748525">26</span><span class="op" id="6748527">,</span>&nbsp;<span class="num" id="6748529">26</span><span class="op" id="6748531">)</span><span class="op" id="6748532">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748536">image</span><span class="op" id="6748541">.</span><span class="ident" id="6748542">Rect</span><span class="op" id="6748546">(</span><span class="num" id="6748547">22</span><span class="op" id="6748549">,</span>&nbsp;<span class="num" id="6748551">22</span><span class="op" id="6748553">,</span>&nbsp;<span class="num" id="6748555">27</span><span class="op" id="6748557">,</span>&nbsp;<span class="num" id="6748559">27</span><span class="op" id="6748561">)</span><span class="op" id="6748562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748566">image</span><span class="op" id="6748571">.</span><span class="ident" id="6748572">Rect</span><span class="op" id="6748576">(</span><span class="num" id="6748577">21</span><span class="op" id="6748579">,</span>&nbsp;<span class="num" id="6748581">21</span><span class="op" id="6748583">,</span>&nbsp;<span class="num" id="6748585">28</span><span class="op" id="6748587">,</span>&nbsp;<span class="num" id="6748589">28</span><span class="op" id="6748591">)</span><span class="op" id="6748592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748596">image</span><span class="op" id="6748601">.</span><span class="ident" id="6748602">Rect</span><span class="op" id="6748606">(</span><span class="num" id="6748607">20</span><span class="op" id="6748609">,</span>&nbsp;<span class="num" id="6748611">20</span><span class="op" id="6748613">,</span>&nbsp;<span class="num" id="6748615">29</span><span class="op" id="6748617">,</span>&nbsp;<span class="num" id="6748619">29</span><span class="op" id="6748621">)</span><span class="op" id="6748622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6748625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6748628">for</span>&nbsp;<span class="ident" id="6748632">_</span><span class="op" id="6748633">,</span>&nbsp;<span class="ident" id="6748635">r</span>&nbsp;<span class="op" id="6748637">:=</span>&nbsp;<span class="keyword" id="6748640">range</span>&nbsp;<span class="ident" id="6748646">rr</span>&nbsp;<span class="op" id="6748649">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748653">m</span>&nbsp;<span class="op" id="6748655">:=</span>&nbsp;<span class="ident" id="6748658">image</span><span class="op" id="6748663">.</span><span class="ident" id="6748664">NewRGBA</span><span class="op" id="6748671">(</span><span class="ident" id="6748672">image</span><span class="op" id="6748677">.</span><span class="ident" id="6748678">Rect</span><span class="op" id="6748682">(</span><span class="num" id="6748683">0</span><span class="op" id="6748684">,</span>&nbsp;<span class="num" id="6748686">0</span><span class="op" id="6748687">,</span>&nbsp;<span class="num" id="6748689">40</span><span class="op" id="6748691">,</span>&nbsp;<span class="num" id="6748693">30</span><span class="op" id="6748695">)</span><span class="op" id="6748696">)</span><span class="op" id="6748697">.</span><span class="ident" id="6748698">SubImage</span><span class="op" id="6748706">(</span><span class="ident" id="6748707">r</span><span class="op" id="6748708">)</span><span class="op" id="6748709">.</span><span class="op" id="6748710">(</span><span class="op" id="6748711">*</span><span class="ident" id="6748712">image</span><span class="op" id="6748717">.</span><span class="ident" id="6748718">RGBA</span><span class="op" id="6748722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748726">b</span>&nbsp;<span class="op" id="6748728">:=</span>&nbsp;<span class="ident" id="6748731">m</span><span class="op" id="6748732">.</span><span class="ident" id="6748733">Bounds</span><span class="op" id="6748739">(</span><span class="op" id="6748740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748744">c</span>&nbsp;<span class="op" id="6748746">:=</span>&nbsp;<span class="ident" id="6748749">color</span><span class="op" id="6748754">.</span><span class="ident" id="6748755">RGBA</span><span class="op" id="6748759">{</span><span class="num" id="6748760">11</span><span class="op" id="6748762">,</span>&nbsp;<span class="num" id="6748764">0</span><span class="op" id="6748765">,</span>&nbsp;<span class="num" id="6748767">0</span><span class="op" id="6748768">,</span>&nbsp;<span class="num" id="6748770">255</span><span class="op" id="6748773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748777">src</span>&nbsp;<span class="op" id="6748781">:=</span>&nbsp;<span class="op" id="6748784">&amp;</span><span class="ident" id="6748785">image</span><span class="op" id="6748790">.</span><span class="ident" id="6748791">Uniform</span><span class="op" id="6748798">{</span><span class="ident" id="6748799">C</span><span class="op" id="6748800">:</span>&nbsp;<span class="ident" id="6748802">c</span><span class="op" id="6748803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748807">check</span>&nbsp;<span class="op" id="6748813">:=</span>&nbsp;<span class="keyword" id="6748816">func</span><span class="op" id="6748820">(</span><span class="ident" id="6748821">desc</span>&nbsp;<span class="builtintype" id="6748826">string</span><span class="op" id="6748832">)</span>&nbsp;<span class="op" id="6748834">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6748839">for</span>&nbsp;<span class="ident" id="6748843">y</span>&nbsp;<span class="op" id="6748845">:=</span>&nbsp;<span class="ident" id="6748848">b</span><span class="op" id="6748849">.</span><span class="ident" id="6748850">Min</span><span class="op" id="6748853">.</span><span class="ident" id="6748854">Y</span><span class="op" id="6748855">;</span>&nbsp;<span class="ident" id="6748857">y</span>&nbsp;<span class="op" id="6748859">&lt;</span>&nbsp;<span class="ident" id="6748861">b</span><span class="op" id="6748862">.</span><span class="ident" id="6748863">Max</span><span class="op" id="6748866">.</span><span class="ident" id="6748867">Y</span><span class="op" id="6748868">;</span>&nbsp;<span class="ident" id="6748870">y</span><span class="op" id="6748871">++</span>&nbsp;<span class="op" id="6748874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6748880">for</span>&nbsp;<span class="ident" id="6748884">x</span>&nbsp;<span class="op" id="6748886">:=</span>&nbsp;<span class="ident" id="6748889">b</span><span class="op" id="6748890">.</span><span class="ident" id="6748891">Min</span><span class="op" id="6748894">.</span><span class="ident" id="6748895">X</span><span class="op" id="6748896">;</span>&nbsp;<span class="ident" id="6748898">x</span>&nbsp;<span class="op" id="6748900">&lt;</span>&nbsp;<span class="ident" id="6748902">b</span><span class="op" id="6748903">.</span><span class="ident" id="6748904">Max</span><span class="op" id="6748907">.</span><span class="ident" id="6748908">X</span><span class="op" id="6748909">;</span>&nbsp;<span class="ident" id="6748911">x</span><span class="op" id="6748912">++</span>&nbsp;<span class="op" id="6748915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6748922">if</span>&nbsp;<span class="op" id="6748925">!</span><span class="ident" id="6748926">eq</span><span class="op" id="6748928">(</span><span class="ident" id="6748929">c</span><span class="op" id="6748930">,</span>&nbsp;<span class="ident" id="6748932">m</span><span class="op" id="6748933">.</span><span class="ident" id="6748934">At</span><span class="op" id="6748936">(</span><span class="ident" id="6748937">x</span><span class="op" id="6748938">,</span>&nbsp;<span class="ident" id="6748940">y</span><span class="op" id="6748941">)</span><span class="op" id="6748942">)</span>&nbsp;<span class="op" id="6748944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6748952">t</span><span class="op" id="6748953">.</span><span class="ident" id="6748954">Errorf</span><span class="op" id="6748960">(</span><span class="string" id="6748961">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6749020">,</span>&nbsp;<span class="ident" id="6749022">desc</span><span class="op" id="6749026">,</span>&nbsp;<span class="ident" id="6749028">x</span><span class="op" id="6749029">,</span>&nbsp;<span class="ident" id="6749031">y</span><span class="op" id="6749032">,</span>&nbsp;<span class="ident" id="6749034">r</span><span class="op" id="6749035">,</span>&nbsp;<span class="ident" id="6749037">c</span><span class="op" id="6749038">,</span>&nbsp;<span class="ident" id="6749040">m</span><span class="op" id="6749041">.</span><span class="ident" id="6749042">At</span><span class="op" id="6749044">(</span><span class="ident" id="6749045">x</span><span class="op" id="6749046">,</span>&nbsp;<span class="ident" id="6749048">y</span><span class="op" id="6749049">)</span><span class="op" id="6749050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749058">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6749089">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749118">for</span>&nbsp;<span class="ident" id="6749122">y</span>&nbsp;<span class="op" id="6749124">:=</span>&nbsp;<span class="ident" id="6749127">b</span><span class="op" id="6749128">.</span><span class="ident" id="6749129">Min</span><span class="op" id="6749132">.</span><span class="ident" id="6749133">Y</span><span class="op" id="6749134">;</span>&nbsp;<span class="ident" id="6749136">y</span>&nbsp;<span class="op" id="6749138">&lt;</span>&nbsp;<span class="ident" id="6749140">b</span><span class="op" id="6749141">.</span><span class="ident" id="6749142">Max</span><span class="op" id="6749145">.</span><span class="ident" id="6749146">Y</span><span class="op" id="6749147">;</span>&nbsp;<span class="ident" id="6749149">y</span><span class="op" id="6749150">++</span>&nbsp;<span class="op" id="6749153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749158">for</span>&nbsp;<span class="ident" id="6749162">x</span>&nbsp;<span class="op" id="6749164">:=</span>&nbsp;<span class="ident" id="6749167">b</span><span class="op" id="6749168">.</span><span class="ident" id="6749169">Min</span><span class="op" id="6749172">.</span><span class="ident" id="6749173">X</span><span class="op" id="6749174">;</span>&nbsp;<span class="ident" id="6749176">x</span>&nbsp;<span class="op" id="6749178">&lt;</span>&nbsp;<span class="ident" id="6749180">b</span><span class="op" id="6749181">.</span><span class="ident" id="6749182">Max</span><span class="op" id="6749185">.</span><span class="ident" id="6749186">X</span><span class="op" id="6749187">;</span>&nbsp;<span class="ident" id="6749189">x</span><span class="op" id="6749190">++</span>&nbsp;<span class="op" id="6749193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749199">DrawMask</span><span class="op" id="6749207">(</span><span class="ident" id="6749208">m</span><span class="op" id="6749209">,</span>&nbsp;<span class="ident" id="6749211">image</span><span class="op" id="6749216">.</span><span class="ident" id="6749217">Rect</span><span class="op" id="6749221">(</span><span class="ident" id="6749222">x</span><span class="op" id="6749223">,</span>&nbsp;<span class="ident" id="6749225">y</span><span class="op" id="6749226">,</span>&nbsp;<span class="ident" id="6749228">x</span><span class="op" id="6749229">+</span><span class="num" id="6749230">1</span><span class="op" id="6749231">,</span>&nbsp;<span class="ident" id="6749233">y</span><span class="op" id="6749234">+</span><span class="num" id="6749235">1</span><span class="op" id="6749236">)</span><span class="op" id="6749237">,</span>&nbsp;<span class="ident" id="6749239">src</span><span class="op" id="6749242">,</span>&nbsp;<span class="ident" id="6749244">image</span><span class="op" id="6749249">.</span><span class="ident" id="6749250">ZP</span><span class="op" id="6749252">,</span>&nbsp;<span class="builtintype" id="6749254">nil</span><span class="op" id="6749257">,</span>&nbsp;<span class="ident" id="6749259">image</span><span class="op" id="6749264">.</span><span class="ident" id="6749265">ZP</span><span class="op" id="6749267">,</span>&nbsp;<span class="ident" id="6749269">Src</span><span class="op" id="6749272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749281">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749285">check</span><span class="op" id="6749290">(</span><span class="string" id="6749291">&#34;pixel&#34;</span><span class="op" id="6749298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6749302">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749329">c</span>&nbsp;<span class="op" id="6749331">=</span>&nbsp;<span class="ident" id="6749333">color</span><span class="op" id="6749338">.</span><span class="ident" id="6749339">RGBA</span><span class="op" id="6749343">{</span><span class="num" id="6749344">0</span><span class="op" id="6749345">,</span>&nbsp;<span class="num" id="6749347">22</span><span class="op" id="6749349">,</span>&nbsp;<span class="num" id="6749351">0</span><span class="op" id="6749352">,</span>&nbsp;<span class="num" id="6749354">255</span><span class="op" id="6749357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749361">src</span>&nbsp;<span class="op" id="6749365">=</span>&nbsp;<span class="op" id="6749367">&amp;</span><span class="ident" id="6749368">image</span><span class="op" id="6749373">.</span><span class="ident" id="6749374">Uniform</span><span class="op" id="6749381">{</span><span class="ident" id="6749382">C</span><span class="op" id="6749383">:</span>&nbsp;<span class="ident" id="6749385">c</span><span class="op" id="6749386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749390">for</span>&nbsp;<span class="ident" id="6749394">y</span>&nbsp;<span class="op" id="6749396">:=</span>&nbsp;<span class="ident" id="6749399">b</span><span class="op" id="6749400">.</span><span class="ident" id="6749401">Min</span><span class="op" id="6749404">.</span><span class="ident" id="6749405">Y</span><span class="op" id="6749406">;</span>&nbsp;<span class="ident" id="6749408">y</span>&nbsp;<span class="op" id="6749410">&lt;</span>&nbsp;<span class="ident" id="6749412">b</span><span class="op" id="6749413">.</span><span class="ident" id="6749414">Max</span><span class="op" id="6749417">.</span><span class="ident" id="6749418">Y</span><span class="op" id="6749419">;</span>&nbsp;<span class="ident" id="6749421">y</span><span class="op" id="6749422">++</span>&nbsp;<span class="op" id="6749425">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749430">DrawMask</span><span class="op" id="6749438">(</span><span class="ident" id="6749439">m</span><span class="op" id="6749440">,</span>&nbsp;<span class="ident" id="6749442">image</span><span class="op" id="6749447">.</span><span class="ident" id="6749448">Rect</span><span class="op" id="6749452">(</span><span class="ident" id="6749453">b</span><span class="op" id="6749454">.</span><span class="ident" id="6749455">Min</span><span class="op" id="6749458">.</span><span class="ident" id="6749459">X</span><span class="op" id="6749460">,</span>&nbsp;<span class="ident" id="6749462">y</span><span class="op" id="6749463">,</span>&nbsp;<span class="ident" id="6749465">b</span><span class="op" id="6749466">.</span><span class="ident" id="6749467">Max</span><span class="op" id="6749470">.</span><span class="ident" id="6749471">X</span><span class="op" id="6749472">,</span>&nbsp;<span class="ident" id="6749474">y</span><span class="op" id="6749475">+</span><span class="num" id="6749476">1</span><span class="op" id="6749477">)</span><span class="op" id="6749478">,</span>&nbsp;<span class="ident" id="6749480">src</span><span class="op" id="6749483">,</span>&nbsp;<span class="ident" id="6749485">image</span><span class="op" id="6749490">.</span><span class="ident" id="6749491">ZP</span><span class="op" id="6749493">,</span>&nbsp;<span class="builtintype" id="6749495">nil</span><span class="op" id="6749498">,</span>&nbsp;<span class="ident" id="6749500">image</span><span class="op" id="6749505">.</span><span class="ident" id="6749506">ZP</span><span class="op" id="6749508">,</span>&nbsp;<span class="ident" id="6749510">Src</span><span class="op" id="6749513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749521">check</span><span class="op" id="6749526">(</span><span class="string" id="6749527">&#34;row&#34;</span><span class="op" id="6749532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6749536">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749566">c</span>&nbsp;<span class="op" id="6749568">=</span>&nbsp;<span class="ident" id="6749570">color</span><span class="op" id="6749575">.</span><span class="ident" id="6749576">RGBA</span><span class="op" id="6749580">{</span><span class="num" id="6749581">0</span><span class="op" id="6749582">,</span>&nbsp;<span class="num" id="6749584">0</span><span class="op" id="6749585">,</span>&nbsp;<span class="num" id="6749587">33</span><span class="op" id="6749589">,</span>&nbsp;<span class="num" id="6749591">255</span><span class="op" id="6749594">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749598">src</span>&nbsp;<span class="op" id="6749602">=</span>&nbsp;<span class="op" id="6749604">&amp;</span><span class="ident" id="6749605">image</span><span class="op" id="6749610">.</span><span class="ident" id="6749611">Uniform</span><span class="op" id="6749618">{</span><span class="ident" id="6749619">C</span><span class="op" id="6749620">:</span>&nbsp;<span class="ident" id="6749622">c</span><span class="op" id="6749623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6749627">for</span>&nbsp;<span class="ident" id="6749631">x</span>&nbsp;<span class="op" id="6749633">:=</span>&nbsp;<span class="ident" id="6749636">b</span><span class="op" id="6749637">.</span><span class="ident" id="6749638">Min</span><span class="op" id="6749641">.</span><span class="ident" id="6749642">X</span><span class="op" id="6749643">;</span>&nbsp;<span class="ident" id="6749645">x</span>&nbsp;<span class="op" id="6749647">&lt;</span>&nbsp;<span class="ident" id="6749649">b</span><span class="op" id="6749650">.</span><span class="ident" id="6749651">Max</span><span class="op" id="6749654">.</span><span class="ident" id="6749655">X</span><span class="op" id="6749656">;</span>&nbsp;<span class="ident" id="6749658">x</span><span class="op" id="6749659">++</span>&nbsp;<span class="op" id="6749662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749667">DrawMask</span><span class="op" id="6749675">(</span><span class="ident" id="6749676">m</span><span class="op" id="6749677">,</span>&nbsp;<span class="ident" id="6749679">image</span><span class="op" id="6749684">.</span><span class="ident" id="6749685">Rect</span><span class="op" id="6749689">(</span><span class="ident" id="6749690">x</span><span class="op" id="6749691">,</span>&nbsp;<span class="ident" id="6749693">b</span><span class="op" id="6749694">.</span><span class="ident" id="6749695">Min</span><span class="op" id="6749698">.</span><span class="ident" id="6749699">Y</span><span class="op" id="6749700">,</span>&nbsp;<span class="ident" id="6749702">x</span><span class="op" id="6749703">+</span><span class="num" id="6749704">1</span><span class="op" id="6749705">,</span>&nbsp;<span class="ident" id="6749707">b</span><span class="op" id="6749708">.</span><span class="ident" id="6749709">Max</span><span class="op" id="6749712">.</span><span class="ident" id="6749713">Y</span><span class="op" id="6749714">)</span><span class="op" id="6749715">,</span>&nbsp;<span class="ident" id="6749717">src</span><span class="op" id="6749720">,</span>&nbsp;<span class="ident" id="6749722">image</span><span class="op" id="6749727">.</span><span class="ident" id="6749728">ZP</span><span class="op" id="6749730">,</span>&nbsp;<span class="builtintype" id="6749732">nil</span><span class="op" id="6749735">,</span>&nbsp;<span class="ident" id="6749737">image</span><span class="op" id="6749742">.</span><span class="ident" id="6749743">ZP</span><span class="op" id="6749745">,</span>&nbsp;<span class="ident" id="6749747">Src</span><span class="op" id="6749750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749758">check</span><span class="op" id="6749763">(</span><span class="string" id="6749764">&#34;column&#34;</span><span class="op" id="6749772">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6749776">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749811">c</span>&nbsp;<span class="op" id="6749813">=</span>&nbsp;<span class="ident" id="6749815">color</span><span class="op" id="6749820">.</span><span class="ident" id="6749821">RGBA</span><span class="op" id="6749825">{</span><span class="num" id="6749826">44</span><span class="op" id="6749828">,</span>&nbsp;<span class="num" id="6749830">55</span><span class="op" id="6749832">,</span>&nbsp;<span class="num" id="6749834">66</span><span class="op" id="6749836">,</span>&nbsp;<span class="num" id="6749838">77</span><span class="op" id="6749840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749844">src</span>&nbsp;<span class="op" id="6749848">=</span>&nbsp;<span class="op" id="6749850">&amp;</span><span class="ident" id="6749851">image</span><span class="op" id="6749856">.</span><span class="ident" id="6749857">Uniform</span><span class="op" id="6749864">{</span><span class="ident" id="6749865">C</span><span class="op" id="6749866">:</span>&nbsp;<span class="ident" id="6749868">c</span><span class="op" id="6749869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749873">DrawMask</span><span class="op" id="6749881">(</span><span class="ident" id="6749882">m</span><span class="op" id="6749883">,</span>&nbsp;<span class="ident" id="6749885">b</span><span class="op" id="6749886">,</span>&nbsp;<span class="ident" id="6749888">src</span><span class="op" id="6749891">,</span>&nbsp;<span class="ident" id="6749893">image</span><span class="op" id="6749898">.</span><span class="ident" id="6749899">ZP</span><span class="op" id="6749901">,</span>&nbsp;<span class="builtintype" id="6749903">nil</span><span class="op" id="6749906">,</span>&nbsp;<span class="ident" id="6749908">image</span><span class="op" id="6749913">.</span><span class="ident" id="6749914">ZP</span><span class="op" id="6749916">,</span>&nbsp;<span class="ident" id="6749918">Src</span><span class="op" id="6749921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6749925">check</span><span class="op" id="6749930">(</span><span class="string" id="6749931">&#34;whole&#34;</span><span class="op" id="6749938">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6749941">}</span><br>
<span class="lineno"></span><span class="op" id="6749943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6749946">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="6750021">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="6750098">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="6750136">func</span>&nbsp;<span class="ident" id="6750141">TestFloydSteinbergCheckerboard</span><span class="op" id="6750171">(</span><span class="ident" id="6750172">t</span>&nbsp;<span class="op" id="6750174">*</span><span class="ident" id="6750175">testing</span><span class="op" id="6750182">.</span><span class="ident" id="6750183">T</span><span class="op" id="6750184">)</span>&nbsp;<span class="op" id="6750186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750189">b</span>&nbsp;<span class="op" id="6750191">:=</span>&nbsp;<span class="ident" id="6750194">image</span><span class="op" id="6750199">.</span><span class="ident" id="6750200">Rect</span><span class="op" id="6750204">(</span><span class="num" id="6750205">0</span><span class="op" id="6750206">,</span>&nbsp;<span class="num" id="6750208">0</span><span class="op" id="6750209">,</span>&nbsp;<span class="num" id="6750211">640</span><span class="op" id="6750214">,</span>&nbsp;<span class="num" id="6750216">480</span><span class="op" id="6750219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6750222">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750295">src</span>&nbsp;<span class="op" id="6750299">:=</span>&nbsp;<span class="op" id="6750302">&amp;</span><span class="ident" id="6750303">image</span><span class="op" id="6750308">.</span><span class="ident" id="6750309">Uniform</span><span class="op" id="6750316">{</span><span class="ident" id="6750317">color</span><span class="op" id="6750322">.</span><span class="ident" id="6750323">Gray16</span><span class="op" id="6750329">{</span><span class="num" id="6750330">0x7fff</span><span class="op" id="6750336">}</span><span class="op" id="6750337">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750340">dst</span>&nbsp;<span class="op" id="6750344">:=</span>&nbsp;<span class="ident" id="6750347">image</span><span class="op" id="6750352">.</span><span class="ident" id="6750353">NewPaletted</span><span class="op" id="6750364">(</span><span class="ident" id="6750365">b</span><span class="op" id="6750366">,</span>&nbsp;<span class="ident" id="6750368">color</span><span class="op" id="6750373">.</span><span class="ident" id="6750374">Palette</span><span class="op" id="6750381">{</span><span class="ident" id="6750382">color</span><span class="op" id="6750387">.</span><span class="ident" id="6750388">Black</span><span class="op" id="6750393">,</span>&nbsp;<span class="ident" id="6750395">color</span><span class="op" id="6750400">.</span><span class="ident" id="6750401">White</span><span class="op" id="6750406">}</span><span class="op" id="6750407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750410">FloydSteinberg</span><span class="op" id="6750424">.</span><span class="ident" id="6750425">Draw</span><span class="op" id="6750429">(</span><span class="ident" id="6750430">dst</span><span class="op" id="6750433">,</span>&nbsp;<span class="ident" id="6750435">b</span><span class="op" id="6750436">,</span>&nbsp;<span class="ident" id="6750438">src</span><span class="op" id="6750441">,</span>&nbsp;<span class="ident" id="6750443">image</span><span class="op" id="6750448">.</span><span class="ident" id="6750449">Point</span><span class="op" id="6750454">{</span><span class="op" id="6750455">}</span><span class="op" id="6750456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750459">nErr</span>&nbsp;<span class="op" id="6750464">:=</span>&nbsp;<span class="num" id="6750467">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750470">for</span>&nbsp;<span class="ident" id="6750474">y</span>&nbsp;<span class="op" id="6750476">:=</span>&nbsp;<span class="ident" id="6750479">b</span><span class="op" id="6750480">.</span><span class="ident" id="6750481">Min</span><span class="op" id="6750484">.</span><span class="ident" id="6750485">Y</span><span class="op" id="6750486">;</span>&nbsp;<span class="ident" id="6750488">y</span>&nbsp;<span class="op" id="6750490">&lt;</span>&nbsp;<span class="ident" id="6750492">b</span><span class="op" id="6750493">.</span><span class="ident" id="6750494">Max</span><span class="op" id="6750497">.</span><span class="ident" id="6750498">Y</span><span class="op" id="6750499">;</span>&nbsp;<span class="ident" id="6750501">y</span><span class="op" id="6750502">++</span>&nbsp;<span class="op" id="6750505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750509">for</span>&nbsp;<span class="ident" id="6750513">x</span>&nbsp;<span class="op" id="6750515">:=</span>&nbsp;<span class="ident" id="6750518">b</span><span class="op" id="6750519">.</span><span class="ident" id="6750520">Min</span><span class="op" id="6750523">.</span><span class="ident" id="6750524">X</span><span class="op" id="6750525">;</span>&nbsp;<span class="ident" id="6750527">x</span>&nbsp;<span class="op" id="6750529">&lt;</span>&nbsp;<span class="ident" id="6750531">b</span><span class="op" id="6750532">.</span><span class="ident" id="6750533">Max</span><span class="op" id="6750536">.</span><span class="ident" id="6750537">X</span><span class="op" id="6750538">;</span>&nbsp;<span class="ident" id="6750540">x</span><span class="op" id="6750541">++</span>&nbsp;<span class="op" id="6750544">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750549">got</span>&nbsp;<span class="op" id="6750553">:=</span>&nbsp;<span class="ident" id="6750556">dst</span><span class="op" id="6750559">.</span><span class="ident" id="6750560">Pix</span><span class="op" id="6750563">[</span><span class="ident" id="6750564">dst</span><span class="op" id="6750567">.</span><span class="ident" id="6750568">PixOffset</span><span class="op" id="6750577">(</span><span class="ident" id="6750578">x</span><span class="op" id="6750579">,</span>&nbsp;<span class="ident" id="6750581">y</span><span class="op" id="6750582">)</span><span class="op" id="6750583">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750588">want</span>&nbsp;<span class="op" id="6750593">:=</span>&nbsp;<span class="builtintype" id="6750596">uint8</span><span class="op" id="6750601">(</span><span class="ident" id="6750602">x</span><span class="op" id="6750603">+</span><span class="ident" id="6750604">y</span><span class="op" id="6750605">)</span>&nbsp;<span class="op" id="6750607">%</span>&nbsp;<span class="num" id="6750609">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750614">if</span>&nbsp;<span class="ident" id="6750617">got</span>&nbsp;<span class="op" id="6750621">!=</span>&nbsp;<span class="ident" id="6750624">want</span>&nbsp;<span class="op" id="6750629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750635">t</span><span class="op" id="6750636">.</span><span class="ident" id="6750637">Errorf</span><span class="op" id="6750643">(</span><span class="string" id="6750644">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6750674">,</span>&nbsp;<span class="ident" id="6750676">x</span><span class="op" id="6750677">,</span>&nbsp;<span class="ident" id="6750679">y</span><span class="op" id="6750680">,</span>&nbsp;<span class="ident" id="6750682">got</span><span class="op" id="6750685">,</span>&nbsp;<span class="ident" id="6750687">want</span><span class="op" id="6750691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6750697">if</span>&nbsp;<span class="ident" id="6750700">nErr</span><span class="op" id="6750704">++</span><span class="op" id="6750706">;</span>&nbsp;<span class="ident" id="6750708">nErr</span>&nbsp;<span class="op" id="6750713">==</span>&nbsp;<span class="num" id="6750716">10</span>&nbsp;<span class="op" id="6750719">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6750726">t</span><span class="op" id="6750727">.</span><span class="ident" id="6750728">Fatal</span><span class="op" id="6750733">(</span><span class="string" id="6750734">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="6750760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750778">}</span><br>
<span class="lineno">380</span><span class="op" id="6750780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6750783">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="6750862">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="6750894">type</span>&nbsp;<span class="ident" id="6750899">embeddedPaletted</span>&nbsp;<span class="keyword" id="6750916">struct</span>&nbsp;<span class="op" id="6750923">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6750926">*</span><span class="ident" id="6750927">image</span><span class="op" id="6750932">.</span><span class="ident" id="6750933">Paletted</span><br>
<span class="lineno"></span><span class="op" id="6750942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6750945">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="6751015">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="6751067">func</span>&nbsp;<span class="ident" id="6751072">TestPaletted</span><span class="op" id="6751084">(</span><span class="ident" id="6751085">t</span>&nbsp;<span class="op" id="6751087">*</span><span class="ident" id="6751088">testing</span><span class="op" id="6751095">.</span><span class="ident" id="6751096">T</span><span class="op" id="6751097">)</span>&nbsp;<span class="op" id="6751099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751102">f</span><span class="op" id="6751103">,</span>&nbsp;<span class="ident" id="6751105">err</span>&nbsp;<span class="op" id="6751109">:=</span>&nbsp;<span class="ident" id="6751112">os</span><span class="op" id="6751114">.</span><span class="ident" id="6751115">Open</span><span class="op" id="6751119">(</span><span class="string" id="6751120">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6751147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751150">if</span>&nbsp;<span class="ident" id="6751153">err</span>&nbsp;<span class="op" id="6751157">!=</span>&nbsp;<span class="builtintype" id="6751160">nil</span>&nbsp;<span class="op" id="6751164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751168">t</span><span class="op" id="6751169">.</span><span class="ident" id="6751170">Fatalf</span><span class="op" id="6751176">(</span><span class="string" id="6751177">&#34;open:&nbsp;%v&#34;</span><span class="op" id="6751187">,</span>&nbsp;<span class="ident" id="6751189">err</span><span class="op" id="6751192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751195">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751198">defer</span>&nbsp;<span class="ident" id="6751204">f</span><span class="op" id="6751205">.</span><span class="ident" id="6751206">Close</span><span class="op" id="6751211">(</span><span class="op" id="6751212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751215">src</span><span class="op" id="6751218">,</span>&nbsp;<span class="ident" id="6751220">err</span>&nbsp;<span class="op" id="6751224">:=</span>&nbsp;<span class="ident" id="6751227">png</span><span class="op" id="6751230">.</span><span class="ident" id="6751231">Decode</span><span class="op" id="6751237">(</span><span class="ident" id="6751238">f</span><span class="op" id="6751239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751242">if</span>&nbsp;<span class="ident" id="6751245">err</span>&nbsp;<span class="op" id="6751249">!=</span>&nbsp;<span class="builtintype" id="6751252">nil</span>&nbsp;<span class="op" id="6751256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751260">t</span><span class="op" id="6751261">.</span><span class="ident" id="6751262">Fatalf</span><span class="op" id="6751268">(</span><span class="string" id="6751269">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6751281">,</span>&nbsp;<span class="ident" id="6751283">err</span><span class="op" id="6751286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751289">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751292">b</span>&nbsp;<span class="op" id="6751294">:=</span>&nbsp;<span class="ident" id="6751297">src</span><span class="op" id="6751300">.</span><span class="ident" id="6751301">Bounds</span><span class="op" id="6751307">(</span><span class="op" id="6751308">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751312">cgaPalette</span>&nbsp;<span class="op" id="6751323">:=</span>&nbsp;<span class="ident" id="6751326">color</span><span class="op" id="6751331">.</span><span class="ident" id="6751332">Palette</span><span class="op" id="6751339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751343">color</span><span class="op" id="6751348">.</span><span class="ident" id="6751349">RGBA</span><span class="op" id="6751353">{</span><span class="num" id="6751354">0x00</span><span class="op" id="6751358">,</span>&nbsp;<span class="num" id="6751360">0x00</span><span class="op" id="6751364">,</span>&nbsp;<span class="num" id="6751366">0x00</span><span class="op" id="6751370">,</span>&nbsp;<span class="num" id="6751372">0xff</span><span class="op" id="6751376">}</span><span class="op" id="6751377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751381">color</span><span class="op" id="6751386">.</span><span class="ident" id="6751387">RGBA</span><span class="op" id="6751391">{</span><span class="num" id="6751392">0x55</span><span class="op" id="6751396">,</span>&nbsp;<span class="num" id="6751398">0xff</span><span class="op" id="6751402">,</span>&nbsp;<span class="num" id="6751404">0xff</span><span class="op" id="6751408">,</span>&nbsp;<span class="num" id="6751410">0xff</span><span class="op" id="6751414">}</span><span class="op" id="6751415">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751419">color</span><span class="op" id="6751424">.</span><span class="ident" id="6751425">RGBA</span><span class="op" id="6751429">{</span><span class="num" id="6751430">0xff</span><span class="op" id="6751434">,</span>&nbsp;<span class="num" id="6751436">0x55</span><span class="op" id="6751440">,</span>&nbsp;<span class="num" id="6751442">0xff</span><span class="op" id="6751446">,</span>&nbsp;<span class="num" id="6751448">0xff</span><span class="op" id="6751452">}</span><span class="op" id="6751453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751457">color</span><span class="op" id="6751462">.</span><span class="ident" id="6751463">RGBA</span><span class="op" id="6751467">{</span><span class="num" id="6751468">0xff</span><span class="op" id="6751472">,</span>&nbsp;<span class="num" id="6751474">0xff</span><span class="op" id="6751478">,</span>&nbsp;<span class="num" id="6751480">0xff</span><span class="op" id="6751484">,</span>&nbsp;<span class="num" id="6751486">0xff</span><span class="op" id="6751490">}</span><span class="op" id="6751491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751497">drawers</span>&nbsp;<span class="op" id="6751505">:=</span>&nbsp;<span class="keyword" id="6751508">map</span><span class="op" id="6751511">[</span><span class="builtintype" id="6751512">string</span><span class="op" id="6751518">]</span><span class="ident" id="6751519">Drawer</span><span class="op" id="6751525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6751529">&#34;src&#34;</span><span class="op" id="6751534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751548">Src</span><span class="op" id="6751551">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6751555">&#34;floyd-steinberg&#34;</span><span class="op" id="6751572">:</span>&nbsp;<span class="ident" id="6751574">FloydSteinberg</span><span class="op" id="6751588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6751591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6751594">loop</span><span class="op" id="6751598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751601">for</span>&nbsp;<span class="ident" id="6751605">dName</span><span class="op" id="6751610">,</span>&nbsp;<span class="ident" id="6751612">d</span>&nbsp;<span class="op" id="6751614">:=</span>&nbsp;<span class="keyword" id="6751617">range</span>&nbsp;<span class="ident" id="6751623">drawers</span>&nbsp;<span class="op" id="6751631">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751635">dst0</span>&nbsp;<span class="op" id="6751640">:=</span>&nbsp;<span class="ident" id="6751643">image</span><span class="op" id="6751648">.</span><span class="ident" id="6751649">NewPaletted</span><span class="op" id="6751660">(</span><span class="ident" id="6751661">b</span><span class="op" id="6751662">,</span>&nbsp;<span class="ident" id="6751664">cgaPalette</span><span class="op" id="6751674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751678">dst1</span>&nbsp;<span class="op" id="6751683">:=</span>&nbsp;<span class="ident" id="6751686">image</span><span class="op" id="6751691">.</span><span class="ident" id="6751692">NewPaletted</span><span class="op" id="6751703">(</span><span class="ident" id="6751704">b</span><span class="op" id="6751705">,</span>&nbsp;<span class="ident" id="6751707">cgaPalette</span><span class="op" id="6751717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751721">d</span><span class="op" id="6751722">.</span><span class="ident" id="6751723">Draw</span><span class="op" id="6751727">(</span><span class="ident" id="6751728">dst0</span><span class="op" id="6751732">,</span>&nbsp;<span class="ident" id="6751734">b</span><span class="op" id="6751735">,</span>&nbsp;<span class="ident" id="6751737">src</span><span class="op" id="6751740">,</span>&nbsp;<span class="ident" id="6751742">image</span><span class="op" id="6751747">.</span><span class="ident" id="6751748">Point</span><span class="op" id="6751753">{</span><span class="op" id="6751754">}</span><span class="op" id="6751755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751759">d</span><span class="op" id="6751760">.</span><span class="ident" id="6751761">Draw</span><span class="op" id="6751765">(</span><span class="ident" id="6751766">embeddedPaletted</span><span class="op" id="6751782">{</span><span class="ident" id="6751783">dst1</span><span class="op" id="6751787">}</span><span class="op" id="6751788">,</span>&nbsp;<span class="ident" id="6751790">b</span><span class="op" id="6751791">,</span>&nbsp;<span class="ident" id="6751793">src</span><span class="op" id="6751796">,</span>&nbsp;<span class="ident" id="6751798">image</span><span class="op" id="6751803">.</span><span class="ident" id="6751804">Point</span><span class="op" id="6751809">{</span><span class="op" id="6751810">}</span><span class="op" id="6751811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751815">for</span>&nbsp;<span class="ident" id="6751819">y</span>&nbsp;<span class="op" id="6751821">:=</span>&nbsp;<span class="ident" id="6751824">b</span><span class="op" id="6751825">.</span><span class="ident" id="6751826">Min</span><span class="op" id="6751829">.</span><span class="ident" id="6751830">Y</span><span class="op" id="6751831">;</span>&nbsp;<span class="ident" id="6751833">y</span>&nbsp;<span class="op" id="6751835">&lt;</span>&nbsp;<span class="ident" id="6751837">b</span><span class="op" id="6751838">.</span><span class="ident" id="6751839">Max</span><span class="op" id="6751842">.</span><span class="ident" id="6751843">Y</span><span class="op" id="6751844">;</span>&nbsp;<span class="ident" id="6751846">y</span><span class="op" id="6751847">++</span>&nbsp;<span class="op" id="6751850">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751855">for</span>&nbsp;<span class="ident" id="6751859">x</span>&nbsp;<span class="op" id="6751861">:=</span>&nbsp;<span class="ident" id="6751864">b</span><span class="op" id="6751865">.</span><span class="ident" id="6751866">Min</span><span class="op" id="6751869">.</span><span class="ident" id="6751870">X</span><span class="op" id="6751871">;</span>&nbsp;<span class="ident" id="6751873">x</span>&nbsp;<span class="op" id="6751875">&lt;</span>&nbsp;<span class="ident" id="6751877">b</span><span class="op" id="6751878">.</span><span class="ident" id="6751879">Max</span><span class="op" id="6751882">.</span><span class="ident" id="6751883">X</span><span class="op" id="6751884">;</span>&nbsp;<span class="ident" id="6751886">x</span><span class="op" id="6751887">++</span>&nbsp;<span class="op" id="6751890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6751896">if</span>&nbsp;<span class="op" id="6751899">!</span><span class="ident" id="6751900">eq</span><span class="op" id="6751902">(</span><span class="ident" id="6751903">dst0</span><span class="op" id="6751907">.</span><span class="ident" id="6751908">At</span><span class="op" id="6751910">(</span><span class="ident" id="6751911">x</span><span class="op" id="6751912">,</span>&nbsp;<span class="ident" id="6751914">y</span><span class="op" id="6751915">)</span><span class="op" id="6751916">,</span>&nbsp;<span class="ident" id="6751918">dst1</span><span class="op" id="6751922">.</span><span class="ident" id="6751923">At</span><span class="op" id="6751925">(</span><span class="ident" id="6751926">x</span><span class="op" id="6751927">,</span>&nbsp;<span class="ident" id="6751929">y</span><span class="op" id="6751930">)</span><span class="op" id="6751931">)</span>&nbsp;<span class="op" id="6751933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751940">t</span><span class="op" id="6751941">.</span><span class="ident" id="6751942">Errorf</span><span class="op" id="6751948">(</span><span class="string" id="6751949">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="6751980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6751988">dName</span><span class="op" id="6751993">,</span>&nbsp;<span class="ident" id="6751995">x</span><span class="op" id="6751996">,</span>&nbsp;<span class="ident" id="6751998">y</span><span class="op" id="6751999">,</span>&nbsp;<span class="ident" id="6752001">dst0</span><span class="op" id="6752005">.</span><span class="ident" id="6752006">At</span><span class="op" id="6752008">(</span><span class="ident" id="6752009">x</span><span class="op" id="6752010">,</span>&nbsp;<span class="ident" id="6752012">y</span><span class="op" id="6752013">)</span><span class="op" id="6752014">,</span>&nbsp;<span class="ident" id="6752016">dst1</span><span class="op" id="6752020">.</span><span class="ident" id="6752021">At</span><span class="op" id="6752023">(</span><span class="ident" id="6752024">x</span><span class="op" id="6752025">,</span>&nbsp;<span class="ident" id="6752027">y</span><span class="op" id="6752028">)</span><span class="op" id="6752029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6752036">continue</span>&nbsp;<span class="ident" id="6752045">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6752066">}</span><br>
<span class="lineno"></span><span class="op" id="6752068">}</span>
</div>
</body>
</html>
