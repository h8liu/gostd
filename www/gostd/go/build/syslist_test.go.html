<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8303562">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8303618">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8303672">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8303723">package</span>&nbsp;<span class="ident" id="8303731">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8303738">import</span>&nbsp;<span class="op" id="8303745">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8303748">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8303759">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8303769">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8303772">var</span>&nbsp;<span class="op" id="8303776">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303779">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8303789">=</span>&nbsp;<span class="ident" id="8303791">runtime</span><span class="op" id="8303798">.</span><span class="ident" id="8303799">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303805">thisArch</span>&nbsp;&nbsp;<span class="op" id="8303815">=</span>&nbsp;<span class="ident" id="8303817">runtime</span><span class="op" id="8303824">.</span><span class="ident" id="8303825">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303833">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8303843">=</span>&nbsp;<span class="ident" id="8303845">anotherOS</span><span class="op" id="8303854">(</span><span class="op" id="8303855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8303858">otherArch</span>&nbsp;<span class="op" id="8303868">=</span>&nbsp;<span class="ident" id="8303870">anotherArch</span><span class="op" id="8303881">(</span><span class="op" id="8303882">)</span><br>
<span class="lineno"></span><span class="op" id="8303884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8303887">func</span>&nbsp;<span class="ident" id="8303892">anotherOS</span><span class="op" id="8303901">(</span><span class="op" id="8303902">)</span>&nbsp;<span class="builtintype" id="8303904">string</span>&nbsp;<span class="op" id="8303911">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303914">if</span>&nbsp;<span class="ident" id="8303917">thisOS</span>&nbsp;<span class="op" id="8303924">!=</span>&nbsp;<span class="string" id="8303927">&#34;darwin&#34;</span>&nbsp;<span class="op" id="8303936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303940">return</span>&nbsp;<span class="string" id="8303947">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8303957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8303960">return</span>&nbsp;<span class="string" id="8303967">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="8303975">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8303978">func</span>&nbsp;<span class="ident" id="8303983">anotherArch</span><span class="op" id="8303994">(</span><span class="op" id="8303995">)</span>&nbsp;<span class="builtintype" id="8303997">string</span>&nbsp;<span class="op" id="8304004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304007">if</span>&nbsp;<span class="ident" id="8304010">thisArch</span>&nbsp;<span class="op" id="8304019">!=</span>&nbsp;<span class="string" id="8304022">&#34;amd64&#34;</span>&nbsp;<span class="op" id="8304030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304034">return</span>&nbsp;<span class="string" id="8304041">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304050">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304053">return</span>&nbsp;<span class="string" id="8304060">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="8304066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304069">type</span>&nbsp;<span class="ident" id="8304074">GoodFileTest</span>&nbsp;<span class="keyword" id="8304087">struct</span>&nbsp;<span class="op" id="8304094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304097">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8304104">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304112">result</span>&nbsp;<span class="builtintype" id="8304119">bool</span><br>
<span class="lineno"></span><span class="op" id="8304124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8304127">var</span>&nbsp;<span class="ident" id="8304131">tests</span>&nbsp;<span class="op" id="8304137">=</span>&nbsp;<span class="op" id="8304139">[</span><span class="op" id="8304140">]</span><span class="ident" id="8304141">GoodFileTest</span><span class="op" id="8304153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304156">{</span><span class="string" id="8304157">&#34;file.go&#34;</span><span class="op" id="8304166">,</span>&nbsp;<span class="builtintype" id="8304168">true</span><span class="op" id="8304172">}</span><span class="op" id="8304173">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304176">{</span><span class="string" id="8304177">&#34;file.c&#34;</span><span class="op" id="8304185">,</span>&nbsp;<span class="builtintype" id="8304187">true</span><span class="op" id="8304191">}</span><span class="op" id="8304192">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304195">{</span><span class="string" id="8304196">&#34;file_foo.go&#34;</span><span class="op" id="8304209">,</span>&nbsp;<span class="builtintype" id="8304211">true</span><span class="op" id="8304215">}</span><span class="op" id="8304216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304219">{</span><span class="string" id="8304220">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304228">+</span>&nbsp;<span class="ident" id="8304230">thisArch</span>&nbsp;<span class="op" id="8304239">+</span>&nbsp;<span class="string" id="8304241">&#34;.go&#34;</span><span class="op" id="8304246">,</span>&nbsp;<span class="builtintype" id="8304248">true</span><span class="op" id="8304252">}</span><span class="op" id="8304253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304256">{</span><span class="string" id="8304257">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304265">+</span>&nbsp;<span class="ident" id="8304267">otherArch</span>&nbsp;<span class="op" id="8304277">+</span>&nbsp;<span class="string" id="8304279">&#34;.go&#34;</span><span class="op" id="8304284">,</span>&nbsp;<span class="builtintype" id="8304286">false</span><span class="op" id="8304291">}</span><span class="op" id="8304292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304295">{</span><span class="string" id="8304296">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304304">+</span>&nbsp;<span class="ident" id="8304306">thisOS</span>&nbsp;<span class="op" id="8304313">+</span>&nbsp;<span class="string" id="8304315">&#34;.go&#34;</span><span class="op" id="8304320">,</span>&nbsp;<span class="builtintype" id="8304322">true</span><span class="op" id="8304326">}</span><span class="op" id="8304327">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304330">{</span><span class="string" id="8304331">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304339">+</span>&nbsp;<span class="ident" id="8304341">otherOS</span>&nbsp;<span class="op" id="8304349">+</span>&nbsp;<span class="string" id="8304351">&#34;.go&#34;</span><span class="op" id="8304356">,</span>&nbsp;<span class="builtintype" id="8304358">false</span><span class="op" id="8304363">}</span><span class="op" id="8304364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304367">{</span><span class="string" id="8304368">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304376">+</span>&nbsp;<span class="ident" id="8304378">thisOS</span>&nbsp;<span class="op" id="8304385">+</span>&nbsp;<span class="string" id="8304387">&#34;_&#34;</span>&nbsp;<span class="op" id="8304391">+</span>&nbsp;<span class="ident" id="8304393">thisArch</span>&nbsp;<span class="op" id="8304402">+</span>&nbsp;<span class="string" id="8304404">&#34;.go&#34;</span><span class="op" id="8304409">,</span>&nbsp;<span class="builtintype" id="8304411">true</span><span class="op" id="8304415">}</span><span class="op" id="8304416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304419">{</span><span class="string" id="8304420">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304428">+</span>&nbsp;<span class="ident" id="8304430">otherOS</span>&nbsp;<span class="op" id="8304438">+</span>&nbsp;<span class="string" id="8304440">&#34;_&#34;</span>&nbsp;<span class="op" id="8304444">+</span>&nbsp;<span class="ident" id="8304446">thisArch</span>&nbsp;<span class="op" id="8304455">+</span>&nbsp;<span class="string" id="8304457">&#34;.go&#34;</span><span class="op" id="8304462">,</span>&nbsp;<span class="builtintype" id="8304464">false</span><span class="op" id="8304469">}</span><span class="op" id="8304470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304473">{</span><span class="string" id="8304474">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304482">+</span>&nbsp;<span class="ident" id="8304484">thisOS</span>&nbsp;<span class="op" id="8304491">+</span>&nbsp;<span class="string" id="8304493">&#34;_&#34;</span>&nbsp;<span class="op" id="8304497">+</span>&nbsp;<span class="ident" id="8304499">otherArch</span>&nbsp;<span class="op" id="8304509">+</span>&nbsp;<span class="string" id="8304511">&#34;.go&#34;</span><span class="op" id="8304516">,</span>&nbsp;<span class="builtintype" id="8304518">false</span><span class="op" id="8304523">}</span><span class="op" id="8304524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304527">{</span><span class="string" id="8304528">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304536">+</span>&nbsp;<span class="ident" id="8304538">otherOS</span>&nbsp;<span class="op" id="8304546">+</span>&nbsp;<span class="string" id="8304548">&#34;_&#34;</span>&nbsp;<span class="op" id="8304552">+</span>&nbsp;<span class="ident" id="8304554">otherArch</span>&nbsp;<span class="op" id="8304564">+</span>&nbsp;<span class="string" id="8304566">&#34;.go&#34;</span><span class="op" id="8304571">,</span>&nbsp;<span class="builtintype" id="8304573">false</span><span class="op" id="8304578">}</span><span class="op" id="8304579">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304582">{</span><span class="string" id="8304583">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8304595">+</span>&nbsp;<span class="ident" id="8304597">thisArch</span>&nbsp;<span class="op" id="8304606">+</span>&nbsp;<span class="string" id="8304608">&#34;.go&#34;</span><span class="op" id="8304613">,</span>&nbsp;<span class="builtintype" id="8304615">true</span><span class="op" id="8304619">}</span><span class="op" id="8304620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304623">{</span><span class="string" id="8304624">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="8304636">+</span>&nbsp;<span class="ident" id="8304638">otherArch</span>&nbsp;<span class="op" id="8304648">+</span>&nbsp;<span class="string" id="8304650">&#34;.go&#34;</span><span class="op" id="8304655">,</span>&nbsp;<span class="builtintype" id="8304657">false</span><span class="op" id="8304662">}</span><span class="op" id="8304663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304666">{</span><span class="string" id="8304667">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304675">+</span>&nbsp;<span class="ident" id="8304677">thisOS</span>&nbsp;<span class="op" id="8304684">+</span>&nbsp;<span class="string" id="8304686">&#34;.c&#34;</span><span class="op" id="8304690">,</span>&nbsp;<span class="builtintype" id="8304692">true</span><span class="op" id="8304696">}</span><span class="op" id="8304697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304700">{</span><span class="string" id="8304701">&#34;file_&#34;</span>&nbsp;<span class="op" id="8304709">+</span>&nbsp;<span class="ident" id="8304711">otherOS</span>&nbsp;<span class="op" id="8304719">+</span>&nbsp;<span class="string" id="8304721">&#34;.c&#34;</span><span class="op" id="8304725">,</span>&nbsp;<span class="builtintype" id="8304727">false</span><span class="op" id="8304732">}</span><span class="op" id="8304733">,</span><br>
<span class="lineno"></span><span class="op" id="8304735">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8304738">func</span>&nbsp;<span class="ident" id="8304743">TestGoodOSArch</span><span class="op" id="8304757">(</span><span class="ident" id="8304758">t</span>&nbsp;<span class="op" id="8304760">*</span><span class="ident" id="8304761">testing</span><span class="op" id="8304768">.</span><span class="ident" id="8304769">T</span><span class="op" id="8304770">)</span>&nbsp;<span class="op" id="8304772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304775">for</span>&nbsp;<span class="ident" id="8304779">_</span><span class="op" id="8304780">,</span>&nbsp;<span class="ident" id="8304782">test</span>&nbsp;<span class="op" id="8304787">:=</span>&nbsp;<span class="keyword" id="8304790">range</span>&nbsp;<span class="ident" id="8304796">tests</span>&nbsp;<span class="op" id="8304802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8304806">if</span>&nbsp;<span class="ident" id="8304809">Default</span><span class="op" id="8304816">.</span><span class="ident" id="8304817">goodOSArchFile</span><span class="op" id="8304831">(</span><span class="ident" id="8304832">test</span><span class="op" id="8304836">.</span><span class="ident" id="8304837">name</span><span class="op" id="8304841">,</span>&nbsp;<span class="builtinfunc" id="8304843">make</span><span class="op" id="8304847">(</span><span class="keyword" id="8304848">map</span><span class="op" id="8304851">[</span><span class="builtintype" id="8304852">string</span><span class="op" id="8304858">]</span><span class="builtintype" id="8304859">bool</span><span class="op" id="8304863">)</span><span class="op" id="8304864">)</span>&nbsp;<span class="op" id="8304866">!=</span>&nbsp;<span class="ident" id="8304869">test</span><span class="op" id="8304873">.</span><span class="ident" id="8304874">result</span>&nbsp;<span class="op" id="8304881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8304886">t</span><span class="op" id="8304887">.</span><span class="ident" id="8304888">Fatalf</span><span class="op" id="8304894">(</span><span class="string" id="8304895">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8304921">,</span>&nbsp;<span class="ident" id="8304923">test</span><span class="op" id="8304927">.</span><span class="ident" id="8304928">name</span><span class="op" id="8304932">,</span>&nbsp;<span class="ident" id="8304934">test</span><span class="op" id="8304938">.</span><span class="ident" id="8304939">result</span><span class="op" id="8304945">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8304952">}</span><br>
<span class="lineno"></span><span class="op" id="8304954">}</span>
</div>
</body>
</html>
