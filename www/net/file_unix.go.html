<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1400333">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1400388">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1400442">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1400493">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1400558">package</span>&nbsp;<span class="ident" id="1400566">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1400571">import</span>&nbsp;<span class="op" id="1400578">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1400581">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1400587">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="1400597">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1400600">func</span>&nbsp;<span class="ident" id="1400605">newFileFD</span><span class="op" id="1400614">(</span><span class="ident" id="1400615">f</span>&nbsp;<span class="op" id="1400617">*</span><span class="ident" id="1400618"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1400620">.</span><span class="ident" id="1400621">File</span><span class="op" id="1400625">)</span>&nbsp;<span class="op" id="1400627">(</span><span class="op" id="1400628">*</span><span class="ident" id="1400629"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1400634">,</span>&nbsp;<span class="builtintype" id="1400636">error</span><span class="op" id="1400641">)</span>&nbsp;<span class="op" id="1400643">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400646">fd</span><span class="op" id="1400648">,</span>&nbsp;<span class="ident" id="1400650">err</span>&nbsp;<span class="op" id="1400654">:=</span>&nbsp;<span class="ident" id="1400657"><a href="/net/fd_unix.go.html#1398244">dupCloseOnExec</a></span><span class="op" id="1400671">(</span><span class="builtintype" id="1400672">int</span><span class="op" id="1400675">(</span><span class="ident" id="1400676"><a href="/net/file_unix.go.html#1400615">f</a></span><span class="op" id="1400677">.</span><span class="ident" id="1400678">Fd</span><span class="op" id="1400680">(</span><span class="op" id="1400681">)</span><span class="op" id="1400682">)</span><span class="op" id="1400683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400686">if</span>&nbsp;<span class="ident" id="1400689"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1400693">!=</span>&nbsp;<span class="ident" id="1400696">nil</span>&nbsp;<span class="op" id="1400700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400704">return</span>&nbsp;<span class="ident" id="1400711">nil</span><span class="op" id="1400714">,</span>&nbsp;<span class="ident" id="1400716"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1400718">.</span><span class="ident" id="1400719">NewSyscallError</span><span class="op" id="1400734">(</span><span class="string" id="1400735">&#34;dup&#34;</span><span class="op" id="1400740">,</span>&nbsp;<span class="ident" id="1400742"><a href="/net/file_unix.go.html#1400650">err</a></span><span class="op" id="1400745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400752">if</span>&nbsp;<span class="ident" id="1400755"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1400759">=</span>&nbsp;<span class="ident" id="1400761"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1400768">.</span><span class="ident" id="1400769">SetNonblock</span><span class="op" id="1400780">(</span><span class="ident" id="1400781"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1400783">,</span>&nbsp;<span class="builtintype" id="1400785">true</span><span class="op" id="1400789">)</span><span class="op" id="1400790">;</span>&nbsp;<span class="ident" id="1400792"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1400796">!=</span>&nbsp;<span class="ident" id="1400799">nil</span>&nbsp;<span class="op" id="1400803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400807"><a href="/net/fd_unix.go.html#1400109">closesocket</a></span><span class="op" id="1400818">(</span><span class="ident" id="1400819"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1400821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400825">return</span>&nbsp;<span class="ident" id="1400832">nil</span><span class="op" id="1400835">,</span>&nbsp;<span class="ident" id="1400837"><a href="/net/file_unix.go.html#1400650">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1400842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400846">sotype</span><span class="op" id="1400852">,</span>&nbsp;<span class="ident" id="1400854"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1400858">:=</span>&nbsp;<span class="ident" id="1400861"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1400868">.</span><span class="ident" id="1400869">GetsockoptInt</span><span class="op" id="1400882">(</span><span class="ident" id="1400883"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1400885">,</span>&nbsp;<span class="ident" id="1400887"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1400894">.</span><span class="ident" id="1400895">SOL_SOCKET</span><span class="op" id="1400905">,</span>&nbsp;<span class="ident" id="1400907"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1400914">.</span><span class="ident" id="1400915">SO_TYPE</span><span class="op" id="1400922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400925">if</span>&nbsp;<span class="ident" id="1400928"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1400932">!=</span>&nbsp;<span class="ident" id="1400935">nil</span>&nbsp;<span class="op" id="1400939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1400943"><a href="/net/fd_unix.go.html#1400109">closesocket</a></span><span class="op" id="1400954">(</span><span class="ident" id="1400955"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1400957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1400961">return</span>&nbsp;<span class="ident" id="1400968">nil</span><span class="op" id="1400971">,</span>&nbsp;<span class="ident" id="1400973"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1400975">.</span><span class="ident" id="1400976">NewSyscallError</span><span class="op" id="1400991">(</span><span class="string" id="1400992">&#34;getsockopt&#34;</span><span class="op" id="1401004">,</span>&nbsp;<span class="ident" id="1401006"><a href="/net/file_unix.go.html#1400650">err</a></span><span class="op" id="1401009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401012">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401016">family</span>&nbsp;<span class="op" id="1401023">:=</span>&nbsp;<span class="ident" id="1401026"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401033">.</span><span class="ident" id="1401034">AF_UNSPEC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401045">toAddr</span>&nbsp;<span class="op" id="1401052">:=</span>&nbsp;<span class="ident" id="1401055"><a href="/net/tcpsock_posix.go.html#1506192">sockaddrToTCP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401070">lsa</span><span class="op" id="1401073">,</span>&nbsp;<span class="ident" id="1401075">_</span>&nbsp;<span class="op" id="1401077">:=</span>&nbsp;<span class="ident" id="1401080"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401087">.</span><span class="ident" id="1401088">Getsockname</span><span class="op" id="1401099">(</span><span class="ident" id="1401100"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1401102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401105">switch</span>&nbsp;<span class="ident" id="1401112"><a href="/net/file_unix.go.html#1401070">lsa</a></span><span class="op" id="1401115">.</span><span class="op" id="1401116">(</span><span class="keyword" id="1401117">type</span><span class="op" id="1401121">)</span>&nbsp;<span class="op" id="1401123">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401126">default</span><span class="op" id="1401133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401137"><a href="/net/fd_unix.go.html#1400109">closesocket</a></span><span class="op" id="1401148">(</span><span class="ident" id="1401149"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1401151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401155">return</span>&nbsp;<span class="ident" id="1401162">nil</span><span class="op" id="1401165">,</span>&nbsp;<span class="ident" id="1401167"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401174">.</span><span class="ident" id="1401175">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401183">case</span>&nbsp;<span class="op" id="1401188">*</span><span class="ident" id="1401189"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401196">.</span><span class="ident" id="1401197">SockaddrInet4</span><span class="op" id="1401210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401214"><a href="/net/file_unix.go.html#1401016">family</a></span>&nbsp;<span class="op" id="1401221">=</span>&nbsp;<span class="ident" id="1401223"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401230">.</span><span class="ident" id="1401231">AF_INET</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401241">if</span>&nbsp;<span class="ident" id="1401244"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401251">==</span>&nbsp;<span class="ident" id="1401254"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401261">.</span><span class="ident" id="1401262">SOCK_DGRAM</span>&nbsp;<span class="op" id="1401273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401278"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401285">=</span>&nbsp;<span class="ident" id="1401287"><a href="/net/udpsock_posix.go.html#1518250">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401303">}</span>&nbsp;<span class="keyword" id="1401305">else</span>&nbsp;<span class="keyword" id="1401310">if</span>&nbsp;<span class="ident" id="1401313"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401320">==</span>&nbsp;<span class="ident" id="1401323"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401330">.</span><span class="ident" id="1401331">SOCK_RAW</span>&nbsp;<span class="op" id="1401340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401345"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401352">=</span>&nbsp;<span class="ident" id="1401354"><a href="/net/iprawsock_posix.go.html#1433916">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401369">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401372">case</span>&nbsp;<span class="op" id="1401377">*</span><span class="ident" id="1401378"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401385">.</span><span class="ident" id="1401386">SockaddrInet6</span><span class="op" id="1401399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401403"><a href="/net/file_unix.go.html#1401016">family</a></span>&nbsp;<span class="op" id="1401410">=</span>&nbsp;<span class="ident" id="1401412"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401419">.</span><span class="ident" id="1401420">AF_INET6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401431">if</span>&nbsp;<span class="ident" id="1401434"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401441">==</span>&nbsp;<span class="ident" id="1401444"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401451">.</span><span class="ident" id="1401452">SOCK_DGRAM</span>&nbsp;<span class="op" id="1401463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401468"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401475">=</span>&nbsp;<span class="ident" id="1401477"><a href="/net/udpsock_posix.go.html#1518250">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401493">}</span>&nbsp;<span class="keyword" id="1401495">else</span>&nbsp;<span class="keyword" id="1401500">if</span>&nbsp;<span class="ident" id="1401503"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401510">==</span>&nbsp;<span class="ident" id="1401513"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401520">.</span><span class="ident" id="1401521">SOCK_RAW</span>&nbsp;<span class="op" id="1401530">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401535"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401542">=</span>&nbsp;<span class="ident" id="1401544"><a href="/net/iprawsock_posix.go.html#1433916">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401562">case</span>&nbsp;<span class="op" id="1401567">*</span><span class="ident" id="1401568"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401575">.</span><span class="ident" id="1401576">SockaddrUnix</span><span class="op" id="1401588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401592"><a href="/net/file_unix.go.html#1401016">family</a></span>&nbsp;<span class="op" id="1401599">=</span>&nbsp;<span class="ident" id="1401601"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401608">.</span><span class="ident" id="1401609">AF_UNIX</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401619"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401626">=</span>&nbsp;<span class="ident" id="1401628"><a href="/net/unixsock_posix.go.html#1528250">sockaddrToUnix</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401645">if</span>&nbsp;<span class="ident" id="1401648"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401655">==</span>&nbsp;<span class="ident" id="1401658"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401665">.</span><span class="ident" id="1401666">SOCK_DGRAM</span>&nbsp;<span class="op" id="1401677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401682"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401689">=</span>&nbsp;<span class="ident" id="1401691"><a href="/net/unixsock_posix.go.html#1528408">sockaddrToUnixgram</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401712">}</span>&nbsp;<span class="keyword" id="1401714">else</span>&nbsp;<span class="keyword" id="1401719">if</span>&nbsp;<span class="ident" id="1401722"><a href="/net/file_unix.go.html#1400846">sotype</a></span>&nbsp;<span class="op" id="1401729">==</span>&nbsp;<span class="ident" id="1401732"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401739">.</span><span class="ident" id="1401740">SOCK_SEQPACKET</span>&nbsp;<span class="op" id="1401755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401760"><a href="/net/file_unix.go.html#1401045">toAddr</a></span>&nbsp;<span class="op" id="1401767">=</span>&nbsp;<span class="ident" id="1401769"><a href="/net/unixsock_posix.go.html#1528574">sockaddrToUnixpacket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401792">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401798">laddr</span>&nbsp;<span class="op" id="1401804">:=</span>&nbsp;<span class="ident" id="1401807"><a href="/net/file_unix.go.html#1401045">toAddr</a></span><span class="op" id="1401813">(</span><span class="ident" id="1401814"><a href="/net/file_unix.go.html#1401070">lsa</a></span><span class="op" id="1401817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401820">rsa</span><span class="op" id="1401823">,</span>&nbsp;<span class="ident" id="1401825">_</span>&nbsp;<span class="op" id="1401827">:=</span>&nbsp;<span class="ident" id="1401830"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1401837">.</span><span class="ident" id="1401838">Getpeername</span><span class="op" id="1401849">(</span><span class="ident" id="1401850"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1401852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401855">raddr</span>&nbsp;<span class="op" id="1401861">:=</span>&nbsp;<span class="ident" id="1401864"><a href="/net/file_unix.go.html#1401045">toAddr</a></span><span class="op" id="1401870">(</span><span class="ident" id="1401871"><a href="/net/file_unix.go.html#1401820">rsa</a></span><span class="op" id="1401874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401878">netfd</span><span class="op" id="1401883">,</span>&nbsp;<span class="ident" id="1401885"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1401889">:=</span>&nbsp;<span class="ident" id="1401892"><a href="/net/fd_unix.go.html#1388730">newFD</a></span><span class="op" id="1401897">(</span><span class="ident" id="1401898"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1401900">,</span>&nbsp;<span class="ident" id="1401902"><a href="/net/file_unix.go.html#1401016">family</a></span><span class="op" id="1401908">,</span>&nbsp;<span class="ident" id="1401910"><a href="/net/file_unix.go.html#1400846">sotype</a></span><span class="op" id="1401916">,</span>&nbsp;<span class="ident" id="1401918"><a href="/net/file_unix.go.html#1401798">laddr</a></span><span class="op" id="1401923">.</span><span class="ident" id="1401924">Network</span><span class="op" id="1401931">(</span><span class="op" id="1401932">)</span><span class="op" id="1401933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401936">if</span>&nbsp;<span class="ident" id="1401939"><a href="/net/file_unix.go.html#1400650">err</a></span>&nbsp;<span class="op" id="1401943">!=</span>&nbsp;<span class="ident" id="1401946">nil</span>&nbsp;<span class="op" id="1401950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1401954"><a href="/net/fd_unix.go.html#1400109">closesocket</a></span><span class="op" id="1401965">(</span><span class="ident" id="1401966"><a href="/net/file_unix.go.html#1400646">fd</a></span><span class="op" id="1401968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401972">return</span>&nbsp;<span class="ident" id="1401979">nil</span><span class="op" id="1401982">,</span>&nbsp;<span class="ident" id="1401984"><a href="/net/file_unix.go.html#1400650">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1401989">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1401992">if</span>&nbsp;<span class="ident" id="1401995">err</span>&nbsp;<span class="op" id="1401999">:=</span>&nbsp;<span class="ident" id="1402002"><a href="/net/file_unix.go.html#1401878">netfd</a></span><span class="op" id="1402007">.</span><span class="ident" id="1402008">init</span><span class="op" id="1402012">(</span><span class="op" id="1402013">)</span><span class="op" id="1402014">;</span>&nbsp;<span class="ident" id="1402016"><a href="/net/file_unix.go.html#1401995">err</a></span>&nbsp;<span class="op" id="1402020">!=</span>&nbsp;<span class="ident" id="1402023">nil</span>&nbsp;<span class="op" id="1402027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402031"><a href="/net/file_unix.go.html#1401878">netfd</a></span><span class="op" id="1402036">.</span><span class="ident" id="1402037">Close</span><span class="op" id="1402042">(</span><span class="op" id="1402043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402047">return</span>&nbsp;<span class="ident" id="1402054">nil</span><span class="op" id="1402057">,</span>&nbsp;<span class="ident" id="1402059"><a href="/net/file_unix.go.html#1401995">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402067"><a href="/net/file_unix.go.html#1401878">netfd</a></span><span class="op" id="1402072">.</span><span class="ident" id="1402073">setAddr</span><span class="op" id="1402080">(</span><span class="ident" id="1402081"><a href="/net/file_unix.go.html#1401798">laddr</a></span><span class="op" id="1402086">,</span>&nbsp;<span class="ident" id="1402088"><a href="/net/file_unix.go.html#1401855">raddr</a></span><span class="op" id="1402093">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402096">return</span>&nbsp;<span class="ident" id="1402103"><a href="/net/file_unix.go.html#1401878">netfd</a></span><span class="op" id="1402108">,</span>&nbsp;<span class="ident" id="1402110">nil</span><br>
<span class="lineno"></span><span class="op" id="1402114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1402117">//&nbsp;FileConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;connection&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1402187">//&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when</span><br>
<span class="lineno">80</span><span class="comment" id="1402258">//&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1402324">//&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="1402337">func</span>&nbsp;<span class="ident" id="1402342">FileConn</span><span class="op" id="1402350">(</span><span class="ident" id="1402351">f</span>&nbsp;<span class="op" id="1402353">*</span><span class="ident" id="1402354"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1402356">.</span><span class="ident" id="1402357">File</span><span class="op" id="1402361">)</span>&nbsp;<span class="op" id="1402363">(</span><span class="ident" id="1402364">c</span>&nbsp;<span class="ident" id="1402366"><a href="/net/net.go.html#1465335">Conn</a></span><span class="op" id="1402370">,</span>&nbsp;<span class="ident" id="1402372">err</span>&nbsp;<span class="builtintype" id="1402376">error</span><span class="op" id="1402381">)</span>&nbsp;<span class="op" id="1402383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402386">fd</span><span class="op" id="1402388">,</span>&nbsp;<span class="ident" id="1402390"><a href="/net/file_unix.go.html#1402372">err</a></span>&nbsp;<span class="op" id="1402394">:=</span>&nbsp;<span class="ident" id="1402397"><a href="/net/file_unix.go.html#1400605">newFileFD</a></span><span class="op" id="1402406">(</span><span class="ident" id="1402407"><a href="/net/file_unix.go.html#1402351">f</a></span><span class="op" id="1402408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402411">if</span>&nbsp;<span class="ident" id="1402414"><a href="/net/file_unix.go.html#1402372">err</a></span>&nbsp;<span class="op" id="1402418">!=</span>&nbsp;<span class="ident" id="1402421">nil</span>&nbsp;<span class="op" id="1402425">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402429">return</span>&nbsp;<span class="ident" id="1402436">nil</span><span class="op" id="1402439">,</span>&nbsp;<span class="ident" id="1402441"><a href="/net/file_unix.go.html#1402372">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402449">switch</span>&nbsp;<span class="ident" id="1402456"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402458">.</span><span class="ident" id="1402459">laddr</span><span class="op" id="1402464">.</span><span class="op" id="1402465">(</span><span class="keyword" id="1402466">type</span><span class="op" id="1402470">)</span>&nbsp;<span class="op" id="1402472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402475">case</span>&nbsp;<span class="op" id="1402480">*</span><span class="ident" id="1402481"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1402488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402492">return</span>&nbsp;<span class="ident" id="1402499"><a href="/net/tcpsock_posix.go.html#1507050">newTCPConn</a></span><span class="op" id="1402509">(</span><span class="ident" id="1402510"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402512">)</span><span class="op" id="1402513">,</span>&nbsp;<span class="ident" id="1402515">nil</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402520">case</span>&nbsp;<span class="op" id="1402525">*</span><span class="ident" id="1402526"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1402533">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402537">return</span>&nbsp;<span class="ident" id="1402544"><a href="/net/udpsock_posix.go.html#1519125">newUDPConn</a></span><span class="op" id="1402554">(</span><span class="ident" id="1402555"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402557">)</span><span class="op" id="1402558">,</span>&nbsp;<span class="ident" id="1402560">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402565">case</span>&nbsp;<span class="op" id="1402570">*</span><span class="ident" id="1402571"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1402577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402581">return</span>&nbsp;<span class="ident" id="1402588"><a href="/net/iprawsock_posix.go.html#1434747">newIPConn</a></span><span class="op" id="1402597">(</span><span class="ident" id="1402598"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402600">)</span><span class="op" id="1402601">,</span>&nbsp;<span class="ident" id="1402603">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402608">case</span>&nbsp;<span class="op" id="1402613">*</span><span class="ident" id="1402614"><a href="/net/unixsock.go.html#1526419">UnixAddr</a></span><span class="op" id="1402622">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402626">return</span>&nbsp;<span class="ident" id="1402633"><a href="/net/unixsock_posix.go.html#1529421">newUnixConn</a></span><span class="op" id="1402644">(</span><span class="ident" id="1402645"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402647">)</span><span class="op" id="1402648">,</span>&nbsp;<span class="ident" id="1402650">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1402655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402658"><a href="/net/file_unix.go.html#1402386">fd</a></span><span class="op" id="1402660">.</span><span class="ident" id="1402661">Close</span><span class="op" id="1402666">(</span><span class="op" id="1402667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1402670">return</span>&nbsp;<span class="ident" id="1402677">nil</span><span class="op" id="1402680">,</span>&nbsp;<span class="ident" id="1402682"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1402689">.</span><span class="ident" id="1402690">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="1402697">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="1402700">//&nbsp;FileListener&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;listener&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="1402769">//&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;l</span><br>
<span class="lineno"></span><span class="comment" id="1402838">//&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;l&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1402909">//&nbsp;affect&nbsp;l.</span><br>
<span class="lineno">105</span><span class="keyword" id="1402922">func</span>&nbsp;<span class="ident" id="1402927">FileListener</span><span class="op" id="1402939">(</span><span class="ident" id="1402940">f</span>&nbsp;<span class="op" id="1402942">*</span><span class="ident" id="1402943"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1402945">.</span><span class="ident" id="1402946">File</span><span class="op" id="1402950">)</span>&nbsp;<span class="op" id="1402952">(</span><span class="ident" id="1402953">l</span>&nbsp;<span class="ident" id="1402955"><a href="/net/net.go.html#1471621">Listener</a></span><span class="op" id="1402963">,</span>&nbsp;<span class="ident" id="1402965">err</span>&nbsp;<span class="builtintype" id="1402969">error</span><span class="op" id="1402974">)</span>&nbsp;<span class="op" id="1402976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1402979">fd</span><span class="op" id="1402981">,</span>&nbsp;<span class="ident" id="1402983"><a href="/net/file_unix.go.html#1402965">err</a></span>&nbsp;<span class="op" id="1402987">:=</span>&nbsp;<span class="ident" id="1402990"><a href="/net/file_unix.go.html#1400605">newFileFD</a></span><span class="op" id="1402999">(</span><span class="ident" id="1403000"><a href="/net/file_unix.go.html#1402940">f</a></span><span class="op" id="1403001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403004">if</span>&nbsp;<span class="ident" id="1403007"><a href="/net/file_unix.go.html#1402965">err</a></span>&nbsp;<span class="op" id="1403011">!=</span>&nbsp;<span class="ident" id="1403014">nil</span>&nbsp;<span class="op" id="1403018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403022">return</span>&nbsp;<span class="ident" id="1403029">nil</span><span class="op" id="1403032">,</span>&nbsp;<span class="ident" id="1403034"><a href="/net/file_unix.go.html#1402965">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403039">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403042">switch</span>&nbsp;<span class="ident" id="1403049">laddr</span>&nbsp;<span class="op" id="1403055">:=</span>&nbsp;<span class="ident" id="1403058"><a href="/net/file_unix.go.html#1402979">fd</a></span><span class="op" id="1403060">.</span><span class="ident" id="1403061">laddr</span><span class="op" id="1403066">.</span><span class="op" id="1403067">(</span><span class="keyword" id="1403068">type</span><span class="op" id="1403072">)</span>&nbsp;<span class="op" id="1403074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403077">case</span>&nbsp;<span class="op" id="1403082">*</span><span class="ident" id="1403083"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1403090">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403094">return</span>&nbsp;<span class="op" id="1403101">&amp;</span><span class="ident" id="1403102"><a href="/net/tcpsock_posix.go.html#1512824">TCPListener</a></span><span class="op" id="1403113">{</span><span class="ident" id="1403114"><a href="/net/file_unix.go.html#1402979">fd</a></span><span class="op" id="1403116">}</span><span class="op" id="1403117">,</span>&nbsp;<span class="ident" id="1403119">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403124">case</span>&nbsp;<span class="op" id="1403129">*</span><span class="ident" id="1403130"><a href="/net/unixsock.go.html#1526419">UnixAddr</a></span><span class="op" id="1403138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403142">return</span>&nbsp;<span class="op" id="1403149">&amp;</span><span class="ident" id="1403150"><a href="/net/unixsock_posix.go.html#1534130">UnixListener</a></span><span class="op" id="1403162">{</span><span class="ident" id="1403163"><a href="/net/file_unix.go.html#1402979">fd</a></span><span class="op" id="1403165">,</span>&nbsp;<span class="ident" id="1403167"><a href="/net/file_unix.go.html#1403049">laddr</a></span><span class="op" id="1403172">.</span><span class="ident" id="1403173">Name</span><span class="op" id="1403177">}</span><span class="op" id="1403178">,</span>&nbsp;<span class="ident" id="1403180">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403188"><a href="/net/file_unix.go.html#1402979">fd</a></span><span class="op" id="1403190">.</span><span class="ident" id="1403191">Close</span><span class="op" id="1403196">(</span><span class="op" id="1403197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403200">return</span>&nbsp;<span class="ident" id="1403207">nil</span><span class="op" id="1403210">,</span>&nbsp;<span class="ident" id="1403212"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1403219">.</span><span class="ident" id="1403220">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="1403227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="1403230">//&nbsp;FilePacketConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;packet&nbsp;network&nbsp;connection</span><br>
<span class="lineno"></span><span class="comment" id="1403296">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="1403353">//&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect</span><br>
<span class="lineno"></span><span class="comment" id="1403424">//&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="1403463">func</span>&nbsp;<span class="ident" id="1403468">FilePacketConn</span><span class="op" id="1403482">(</span><span class="ident" id="1403483">f</span>&nbsp;<span class="op" id="1403485">*</span><span class="ident" id="1403486"><a href="/net/file_unix.go.html#1400581">os</a></span><span class="op" id="1403488">.</span><span class="ident" id="1403489">File</span><span class="op" id="1403493">)</span>&nbsp;<span class="op" id="1403495">(</span><span class="ident" id="1403496">c</span>&nbsp;<span class="ident" id="1403498"><a href="/net/net.go.html#1469751">PacketConn</a></span><span class="op" id="1403508">,</span>&nbsp;<span class="ident" id="1403510">err</span>&nbsp;<span class="builtintype" id="1403514">error</span><span class="op" id="1403519">)</span>&nbsp;<span class="op" id="1403521">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403524">fd</span><span class="op" id="1403526">,</span>&nbsp;<span class="ident" id="1403528"><a href="/net/file_unix.go.html#1403510">err</a></span>&nbsp;<span class="op" id="1403532">:=</span>&nbsp;<span class="ident" id="1403535"><a href="/net/file_unix.go.html#1400605">newFileFD</a></span><span class="op" id="1403544">(</span><span class="ident" id="1403545"><a href="/net/file_unix.go.html#1403483">f</a></span><span class="op" id="1403546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403549">if</span>&nbsp;<span class="ident" id="1403552"><a href="/net/file_unix.go.html#1403510">err</a></span>&nbsp;<span class="op" id="1403556">!=</span>&nbsp;<span class="ident" id="1403559">nil</span>&nbsp;<span class="op" id="1403563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403567">return</span>&nbsp;<span class="ident" id="1403574">nil</span><span class="op" id="1403577">,</span>&nbsp;<span class="ident" id="1403579"><a href="/net/file_unix.go.html#1403510">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403587">switch</span>&nbsp;<span class="ident" id="1403594"><a href="/net/file_unix.go.html#1403524">fd</a></span><span class="op" id="1403596">.</span><span class="ident" id="1403597">laddr</span><span class="op" id="1403602">.</span><span class="op" id="1403603">(</span><span class="keyword" id="1403604">type</span><span class="op" id="1403608">)</span>&nbsp;<span class="op" id="1403610">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403613">case</span>&nbsp;<span class="op" id="1403618">*</span><span class="ident" id="1403619"><a href="/net/udpsock.go.html#1516760">UDPAddr</a></span><span class="op" id="1403626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403630">return</span>&nbsp;<span class="ident" id="1403637"><a href="/net/udpsock_posix.go.html#1519125">newUDPConn</a></span><span class="op" id="1403647">(</span><span class="ident" id="1403648"><a href="/net/file_unix.go.html#1403524">fd</a></span><span class="op" id="1403650">)</span><span class="op" id="1403651">,</span>&nbsp;<span class="ident" id="1403653">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403658">case</span>&nbsp;<span class="op" id="1403663">*</span><span class="ident" id="1403664"><a href="/net/iprawsock.go.html#1432036">IPAddr</a></span><span class="op" id="1403670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403674">return</span>&nbsp;<span class="ident" id="1403681"><a href="/net/iprawsock_posix.go.html#1434747">newIPConn</a></span><span class="op" id="1403690">(</span><span class="ident" id="1403691"><a href="/net/file_unix.go.html#1403524">fd</a></span><span class="op" id="1403693">)</span><span class="op" id="1403694">,</span>&nbsp;<span class="ident" id="1403696">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403701">case</span>&nbsp;<span class="op" id="1403706">*</span><span class="ident" id="1403707"><a href="/net/unixsock.go.html#1526419">UnixAddr</a></span><span class="op" id="1403715">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403719">return</span>&nbsp;<span class="ident" id="1403726"><a href="/net/unixsock_posix.go.html#1529421">newUnixConn</a></span><span class="op" id="1403737">(</span><span class="ident" id="1403738"><a href="/net/file_unix.go.html#1403524">fd</a></span><span class="op" id="1403740">)</span><span class="op" id="1403741">,</span>&nbsp;<span class="ident" id="1403743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1403748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1403751"><a href="/net/file_unix.go.html#1403524">fd</a></span><span class="op" id="1403753">.</span><span class="ident" id="1403754">Close</span><span class="op" id="1403759">(</span><span class="op" id="1403760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1403763">return</span>&nbsp;<span class="ident" id="1403770">nil</span><span class="op" id="1403773">,</span>&nbsp;<span class="ident" id="1403775"><a href="/net/file_unix.go.html#1400587">syscall</a></span><span class="op" id="1403782">.</span><span class="ident" id="1403783">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="1403790">}</span>
</div>
</body>
</html>
