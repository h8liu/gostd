<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html" class="current">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6273374">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6273429">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6273483">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6273534">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273612">package</span>&nbsp;<span class="ident" id="6273620">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273628">import</span>&nbsp;<span class="op" id="6273635">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6273638">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6273644">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="6273654">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6273657">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="6273673">func</span>&nbsp;<span class="ident" id="6273678">signal_disable</span><span class="op" id="6273692">(</span><span class="builtintype" id="6273693">uint32</span><span class="op" id="6273699">)</span><br>
<span class="lineno"></span><span class="keyword" id="6273701">func</span>&nbsp;<span class="ident" id="6273706">signal_enable</span><span class="op" id="6273719">(</span><span class="builtintype" id="6273720">uint32</span><span class="op" id="6273726">)</span><br>
<span class="lineno"></span><span class="keyword" id="6273728">func</span>&nbsp;<span class="ident" id="6273733">signal_recv</span><span class="op" id="6273744">(</span><span class="op" id="6273745">)</span>&nbsp;<span class="builtintype" id="6273747">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273755">func</span>&nbsp;<span class="ident" id="6273760">loop</span><span class="op" id="6273764">(</span><span class="op" id="6273765">)</span>&nbsp;<span class="op" id="6273767">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273770">for</span>&nbsp;<span class="op" id="6273774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273778">process</span><span class="op" id="6273785">(</span><span class="ident" id="6273786">syscall</span><span class="op" id="6273793">.</span><span class="ident" id="6273794">Signal</span><span class="op" id="6273800">(</span><span class="ident" id="6273801">signal_recv</span><span class="op" id="6273812">(</span><span class="op" id="6273813">)</span><span class="op" id="6273814">)</span><span class="op" id="6273815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273818">}</span><br>
<span class="lineno"></span><span class="op" id="6273820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6273823">func</span>&nbsp;<span class="ident" id="6273828">init</span><span class="op" id="6273832">(</span><span class="op" id="6273833">)</span>&nbsp;<span class="op" id="6273835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273838">signal_enable</span><span class="op" id="6273851">(</span><span class="num" id="6273852">0</span><span class="op" id="6273853">)</span>&nbsp;<span class="comment" id="6273855">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273883">go</span>&nbsp;<span class="ident" id="6273886">loop</span><span class="op" id="6273890">(</span><span class="op" id="6273891">)</span><br>
<span class="lineno"></span><span class="op" id="6273893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6273896">const</span>&nbsp;<span class="op" id="6273902">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6273905">numSig</span>&nbsp;<span class="op" id="6273912">=</span>&nbsp;<span class="num" id="6273914">65</span>&nbsp;<span class="comment" id="6273917">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="6273943">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6273946">func</span>&nbsp;<span class="ident" id="6273951">signum</span><span class="op" id="6273957">(</span><span class="ident" id="6273958">sig</span>&nbsp;<span class="ident" id="6273962">os</span><span class="op" id="6273964">.</span><span class="ident" id="6273965">Signal</span><span class="op" id="6273971">)</span>&nbsp;<span class="builtintype" id="6273973">int</span>&nbsp;<span class="op" id="6273977">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6273980">switch</span>&nbsp;<span class="ident" id="6273987">sig</span>&nbsp;<span class="op" id="6273991">:=</span>&nbsp;<span class="ident" id="6273994">sig</span><span class="op" id="6273997">.</span><span class="op" id="6273998">(</span><span class="keyword" id="6273999">type</span><span class="op" id="6274003">)</span>&nbsp;<span class="op" id="6274005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274008">case</span>&nbsp;<span class="ident" id="6274013">syscall</span><span class="op" id="6274020">.</span><span class="ident" id="6274021">Signal</span><span class="op" id="6274027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274031">i</span>&nbsp;<span class="op" id="6274033">:=</span>&nbsp;<span class="builtintype" id="6274036">int</span><span class="op" id="6274039">(</span><span class="ident" id="6274040">sig</span><span class="op" id="6274043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274047">if</span>&nbsp;<span class="ident" id="6274050">i</span>&nbsp;<span class="op" id="6274052">&lt;</span>&nbsp;<span class="num" id="6274054">0</span>&nbsp;<span class="op" id="6274056">||</span>&nbsp;<span class="ident" id="6274059">i</span>&nbsp;<span class="op" id="6274061">&gt;=</span>&nbsp;<span class="ident" id="6274064">numSig</span>&nbsp;<span class="op" id="6274071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274076">return</span>&nbsp;<span class="op" id="6274083">-</span><span class="num" id="6274084">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274092">return</span>&nbsp;<span class="ident" id="6274099">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274102">default</span><span class="op" id="6274109">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6274113">return</span>&nbsp;<span class="op" id="6274120">-</span><span class="num" id="6274121">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6274124">}</span><br>
<span class="lineno">45</span><span class="op" id="6274126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6274129">func</span>&nbsp;<span class="ident" id="6274134">enableSignal</span><span class="op" id="6274146">(</span><span class="ident" id="6274147">sig</span>&nbsp;<span class="builtintype" id="6274151">int</span><span class="op" id="6274154">)</span>&nbsp;<span class="op" id="6274156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274159">signal_enable</span><span class="op" id="6274172">(</span><span class="builtintype" id="6274173">uint32</span><span class="op" id="6274179">(</span><span class="ident" id="6274180">sig</span><span class="op" id="6274183">)</span><span class="op" id="6274184">)</span><br>
<span class="lineno"></span><span class="op" id="6274186">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6274189">func</span>&nbsp;<span class="ident" id="6274194">disableSignal</span><span class="op" id="6274207">(</span><span class="ident" id="6274208">sig</span>&nbsp;<span class="builtintype" id="6274212">int</span><span class="op" id="6274215">)</span>&nbsp;<span class="op" id="6274217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6274220">signal_disable</span><span class="op" id="6274234">(</span><span class="builtintype" id="6274235">uint32</span><span class="op" id="6274241">(</span><span class="ident" id="6274242">sig</span><span class="op" id="6274245">)</span><span class="op" id="6274246">)</span><br>
<span class="lineno"></span><span class="op" id="6274248">}</span>
</div>
</body>
</html>
