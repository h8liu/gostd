<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>bufio</h2>
<ul>
<li><a href="/gostd/bufio/bufio.go.html" class="current">bufio.go</a></li>
<li><a href="/gostd/bufio/bufio_test.go.html">bufio_test.go</a></li>
<li><a href="/gostd/bufio/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/bufio/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/bufio/scan.go.html">scan.go</a></li>
<li><a href="/gostd/bufio/scan_test.go.html">scan_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1354139">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1354194">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1354248">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1354299">//&nbsp;Package&nbsp;bufio&nbsp;implements&nbsp;buffered&nbsp;I/O.&nbsp;&nbsp;It&nbsp;wraps&nbsp;an&nbsp;io.Reader&nbsp;or&nbsp;io.Writer</span><br>
<span class="lineno"></span><span class="comment" id="1354377">//&nbsp;object,&nbsp;creating&nbsp;another&nbsp;object&nbsp;(Reader&nbsp;or&nbsp;Writer)&nbsp;that&nbsp;also&nbsp;implements</span><br>
<span class="lineno"></span><span class="comment" id="1354452">//&nbsp;the&nbsp;interface&nbsp;but&nbsp;provides&nbsp;buffering&nbsp;and&nbsp;some&nbsp;help&nbsp;for&nbsp;textual&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="keyword" id="1354523">package</span>&nbsp;<span class="ident" id="1354531">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="1354538">import</span>&nbsp;<span class="op" id="1354545">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1354548">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1354557">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1354567">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1354573">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">15</span><span class="op" id="1354588">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1354591">const</span>&nbsp;<span class="op" id="1354597">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354600">defaultBufSize</span>&nbsp;<span class="op" id="1354615">=</span>&nbsp;<span class="num" id="1354617">4096</span><br>
<span class="lineno"></span><span class="op" id="1354622">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="1354625">var</span>&nbsp;<span class="op" id="1354629">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354632">ErrInvalidUnreadByte</span>&nbsp;<span class="op" id="1354653">=</span>&nbsp;<span class="ident" id="1354655"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1354661">.</span><span class="ident" id="1354662"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1354665">(</span><span class="string" id="1354666">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadByte&#34;</span><span class="op" id="1354700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354703">ErrInvalidUnreadRune</span>&nbsp;<span class="op" id="1354724">=</span>&nbsp;<span class="ident" id="1354726"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1354732">.</span><span class="ident" id="1354733"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1354736">(</span><span class="string" id="1354737">&#34;bufio:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;UnreadRune&#34;</span><span class="op" id="1354771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354774">ErrBufferFull</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1354795">=</span>&nbsp;<span class="ident" id="1354797"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1354803">.</span><span class="ident" id="1354804"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1354807">(</span><span class="string" id="1354808">&#34;bufio:&nbsp;buffer&nbsp;full&#34;</span><span class="op" id="1354828">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354831">ErrNegativeCount</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1354852">=</span>&nbsp;<span class="ident" id="1354854"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1354860">.</span><span class="ident" id="1354861"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1354864">(</span><span class="string" id="1354865">&#34;bufio:&nbsp;negative&nbsp;count&#34;</span><span class="op" id="1354888">)</span><br>
<span class="lineno"></span><span class="op" id="1354890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1354893">//&nbsp;Buffered&nbsp;input.</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="1354913">//&nbsp;Reader&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Reader&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="1354969">type</span>&nbsp;<span class="ident" id="1354974">Reader</span>&nbsp;<span class="keyword" id="1354981">struct</span>&nbsp;<span class="op" id="1354988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1354991">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1355004">[</span><span class="op" id="1355005">]</span><span class="builtintype" id="1355006">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355012">rd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355025"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1355027">.</span><span class="ident" id="1355028"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="comment" id="1355035">//&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355069">r</span><span class="op" id="1355070">,</span>&nbsp;<span class="ident" id="1355072">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1355082">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1355092">//&nbsp;buf&nbsp;read&nbsp;and&nbsp;write&nbsp;positions</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355125">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1355138">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355145">lastByte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1355158">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355163">lastRuneSize</span>&nbsp;<span class="builtintype" id="1355176">int</span><br>
<span class="lineno"></span><span class="op" id="1355180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1355183">const</span>&nbsp;<span class="ident" id="1355189">minReadBufferSize</span>&nbsp;<span class="op" id="1355207">=</span>&nbsp;<span class="num" id="1355209">16</span><br>
<span class="lineno"></span><span class="keyword" id="1355212">const</span>&nbsp;<span class="ident" id="1355218">maxConsecutiveEmptyReads</span>&nbsp;<span class="op" id="1355243">=</span>&nbsp;<span class="num" id="1355245">100</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1355250">//&nbsp;NewReaderSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="1355328">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Reader&nbsp;is&nbsp;already&nbsp;a&nbsp;Reader&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno">45</span><span class="comment" id="1355401">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Reader.</span><br>
<span class="lineno"></span><span class="keyword" id="1355444">func</span>&nbsp;<span class="ident" id="1355449">NewReaderSize</span><span class="op" id="1355462">(</span><span class="ident" id="1355463">rd</span>&nbsp;<span class="ident" id="1355466"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1355468">.</span><span class="ident" id="1355469"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1355475">,</span>&nbsp;<span class="ident" id="1355477">size</span>&nbsp;<span class="builtintype" id="1355482">int</span><span class="op" id="1355485">)</span>&nbsp;<span class="op" id="1355487">*</span><span class="ident" id="1355488"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span>&nbsp;<span class="op" id="1355495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1355498">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Reader?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355526">b</span><span class="op" id="1355527">,</span>&nbsp;<span class="ident" id="1355529">ok</span>&nbsp;<span class="op" id="1355532">:=</span>&nbsp;<span class="ident" id="1355535"><a href="/gostd/bufio/bufio.go.html#1355463">rd</a></span><span class="op" id="1355537">.</span><span class="op" id="1355538">(</span><span class="op" id="1355539">*</span><span class="ident" id="1355540"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1355546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1355549">if</span>&nbsp;<span class="ident" id="1355552"><a href="/gostd/bufio/bufio.go.html#1355529">ok</a></span>&nbsp;<span class="op" id="1355555">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1355558">len</span><span class="op" id="1355561">(</span><span class="ident" id="1355562"><a href="/gostd/bufio/bufio.go.html#1355526">b</a></span><span class="op" id="1355563">.</span><span class="ident" id="1355564"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1355567">)</span>&nbsp;<span class="op" id="1355569">&gt;=</span>&nbsp;<span class="ident" id="1355572"><a href="/gostd/bufio/bufio.go.html#1355477">size</a></span>&nbsp;<span class="op" id="1355577">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1355581">return</span>&nbsp;<span class="ident" id="1355588"><a href="/gostd/bufio/bufio.go.html#1355526">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1355591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1355594">if</span>&nbsp;<span class="ident" id="1355597"><a href="/gostd/bufio/bufio.go.html#1355477">size</a></span>&nbsp;<span class="op" id="1355602">&lt;</span>&nbsp;<span class="ident" id="1355604"><a href="/gostd/bufio/bufio.go.html#1355189">minReadBufferSize</a></span>&nbsp;<span class="op" id="1355622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355626"><a href="/gostd/bufio/bufio.go.html#1355477">size</a></span>&nbsp;<span class="op" id="1355631">=</span>&nbsp;<span class="ident" id="1355633"><a href="/gostd/bufio/bufio.go.html#1355189">minReadBufferSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1355652">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355655">r</span>&nbsp;<span class="op" id="1355657">:=</span>&nbsp;<span class="builtinfunc" id="1355660">new</span><span class="op" id="1355663">(</span><span class="ident" id="1355664"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1355670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1355673"><a href="/gostd/bufio/bufio.go.html#1355655">r</a></span><span class="op" id="1355674">.</span><span class="ident" id="1355675"><a href="/gostd/bufio/bufio.go.html#1356055">reset</a></span><span class="op" id="1355680">(</span><span class="builtinfunc" id="1355681">make</span><span class="op" id="1355685">(</span><span class="op" id="1355686">[</span><span class="op" id="1355687">]</span><span class="builtintype" id="1355688">byte</span><span class="op" id="1355692">,</span>&nbsp;<span class="ident" id="1355694"><a href="/gostd/bufio/bufio.go.html#1355477">size</a></span><span class="op" id="1355698">)</span><span class="op" id="1355699">,</span>&nbsp;<span class="ident" id="1355701"><a href="/gostd/bufio/bufio.go.html#1355463">rd</a></span><span class="op" id="1355703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1355706">return</span>&nbsp;<span class="ident" id="1355713"><a href="/gostd/bufio/bufio.go.html#1355655">r</a></span><br>
<span class="lineno"></span><span class="op" id="1355715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="1355718">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="1355787">func</span>&nbsp;<span class="ident" id="1355792">NewReader</span><span class="op" id="1355801">(</span><span class="ident" id="1355802">rd</span>&nbsp;<span class="ident" id="1355805"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1355807">.</span><span class="ident" id="1355808"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1355814">)</span>&nbsp;<span class="op" id="1355816">*</span><span class="ident" id="1355817"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span>&nbsp;<span class="op" id="1355824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1355827">return</span>&nbsp;<span class="ident" id="1355834"><a href="/gostd/bufio/bufio.go.html#1355449">NewReaderSize</a></span><span class="op" id="1355847">(</span><span class="ident" id="1355848"><a href="/gostd/bufio/bufio.go.html#1355802">rd</a></span><span class="op" id="1355850">,</span>&nbsp;<span class="ident" id="1355852"><a href="/gostd/bufio/bufio.go.html#1354600">defaultBufSize</a></span><span class="op" id="1355866">)</span><br>
<span class="lineno"></span><span class="op" id="1355868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="1355871">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data,&nbsp;resets&nbsp;all&nbsp;state,&nbsp;and&nbsp;switches</span><br>
<span class="lineno"></span><span class="comment" id="1355939">//&nbsp;the&nbsp;buffered&nbsp;reader&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="1355978">func</span>&nbsp;<span class="op" id="1355983">(</span><span class="ident" id="1355984">b</span>&nbsp;<span class="op" id="1355986">*</span><span class="ident" id="1355987"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1355993">)</span>&nbsp;<span class="ident" id="1355995">Reset</span><span class="op" id="1356000">(</span><span class="ident" id="1356001">r</span>&nbsp;<span class="ident" id="1356003"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1356005">.</span><span class="ident" id="1356006"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1356012">)</span>&nbsp;<span class="op" id="1356014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356017"><a href="/gostd/bufio/bufio.go.html#1355984">b</a></span><span class="op" id="1356018">.</span><span class="ident" id="1356019"><a href="/gostd/bufio/bufio.go.html#1356055">reset</a></span><span class="op" id="1356024">(</span><span class="ident" id="1356025"><a href="/gostd/bufio/bufio.go.html#1355984">b</a></span><span class="op" id="1356026">.</span><span class="ident" id="1356027"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356030">,</span>&nbsp;<span class="ident" id="1356032"><a href="/gostd/bufio/bufio.go.html#1356001">r</a></span><span class="op" id="1356033">)</span><br>
<span class="lineno"></span><span class="op" id="1356035">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="1356038">func</span>&nbsp;<span class="op" id="1356043">(</span><span class="ident" id="1356044">b</span>&nbsp;<span class="op" id="1356046">*</span><span class="ident" id="1356047"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1356053">)</span>&nbsp;<span class="ident" id="1356055">reset</span><span class="op" id="1356060">(</span><span class="ident" id="1356061">buf</span>&nbsp;<span class="op" id="1356065">[</span><span class="op" id="1356066">]</span><span class="builtintype" id="1356067">byte</span><span class="op" id="1356071">,</span>&nbsp;<span class="ident" id="1356073">r</span>&nbsp;<span class="ident" id="1356075"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1356077">.</span><span class="ident" id="1356078"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1356084">)</span>&nbsp;<span class="op" id="1356086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356089">*</span><span class="ident" id="1356090"><a href="/gostd/bufio/bufio.go.html#1356044">b</a></span>&nbsp;<span class="op" id="1356092">=</span>&nbsp;<span class="ident" id="1356094"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1356100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356104"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356107">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356118"><a href="/gostd/bufio/bufio.go.html#1356061">buf</a></span><span class="op" id="1356121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356125"><a href="/gostd/bufio/bufio.go.html#1355012">rd</a></span><span class="op" id="1356127">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356139"><a href="/gostd/bufio/bufio.go.html#1356073">r</a></span><span class="op" id="1356140">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356144"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span><span class="op" id="1356152">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356158">-</span><span class="num" id="1356159">1</span><span class="op" id="1356160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356164"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span><span class="op" id="1356176">:</span>&nbsp;<span class="op" id="1356178">-</span><span class="num" id="1356179">1</span><span class="op" id="1356180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356183">}</span><br>
<span class="lineno"></span><span class="op" id="1356185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="1356188">var</span>&nbsp;<span class="ident" id="1356192">errNegativeRead</span>&nbsp;<span class="op" id="1356208">=</span>&nbsp;<span class="ident" id="1356210"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1356216">.</span><span class="ident" id="1356217"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1356220">(</span><span class="string" id="1356221">&#34;bufio:&nbsp;reader&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Read&#34;</span><span class="op" id="1356270">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1356273">//&nbsp;fill&nbsp;reads&nbsp;a&nbsp;new&nbsp;chunk&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1356316">func</span>&nbsp;<span class="op" id="1356321">(</span><span class="ident" id="1356322">b</span>&nbsp;<span class="op" id="1356324">*</span><span class="ident" id="1356325"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1356331">)</span>&nbsp;<span class="ident" id="1356333">fill</span><span class="op" id="1356337">(</span><span class="op" id="1356338">)</span>&nbsp;<span class="op" id="1356340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1356343">//&nbsp;Slide&nbsp;existing&nbsp;data&nbsp;to&nbsp;beginning.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356381">if</span>&nbsp;<span class="ident" id="1356384"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356385">.</span><span class="ident" id="1356386"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1356388">&gt;</span>&nbsp;<span class="num" id="1356390">0</span>&nbsp;<span class="op" id="1356392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1356396">copy</span><span class="op" id="1356400">(</span><span class="ident" id="1356401"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356402">.</span><span class="ident" id="1356403"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356406">,</span>&nbsp;<span class="ident" id="1356408"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356409">.</span><span class="ident" id="1356410"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356413">[</span><span class="ident" id="1356414"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356415">.</span><span class="ident" id="1356416"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1356417">:</span><span class="ident" id="1356418"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356419">.</span><span class="ident" id="1356420"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1356421">]</span><span class="op" id="1356422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356426"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356427">.</span><span class="ident" id="1356428"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1356430">-=</span>&nbsp;<span class="ident" id="1356433"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356434">.</span><span class="ident" id="1356435"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356439"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356440">.</span><span class="ident" id="1356441"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1356443">=</span>&nbsp;<span class="num" id="1356445">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356448">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356452">if</span>&nbsp;<span class="ident" id="1356455"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356456">.</span><span class="ident" id="1356457"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1356459">&gt;=</span>&nbsp;<span class="builtinfunc" id="1356462">len</span><span class="op" id="1356465">(</span><span class="ident" id="1356466"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356467">.</span><span class="ident" id="1356468"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356471">)</span>&nbsp;<span class="op" id="1356473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1356477">panic</span><span class="op" id="1356482">(</span><span class="string" id="1356483">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;fill&nbsp;full&nbsp;buffer&#34;</span><span class="op" id="1356517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1356524">//&nbsp;Read&nbsp;new&nbsp;data:&nbsp;try&nbsp;a&nbsp;limited&nbsp;number&nbsp;of&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356574">for</span>&nbsp;<span class="ident" id="1356578">i</span>&nbsp;<span class="op" id="1356580">:=</span>&nbsp;<span class="ident" id="1356583"><a href="/gostd/bufio/bufio.go.html#1355218">maxConsecutiveEmptyReads</a></span><span class="op" id="1356607">;</span>&nbsp;<span class="ident" id="1356609"><a href="/gostd/bufio/bufio.go.html#1356578">i</a></span>&nbsp;<span class="op" id="1356611">&gt;</span>&nbsp;<span class="num" id="1356613">0</span><span class="op" id="1356614">;</span>&nbsp;<span class="ident" id="1356616"><a href="/gostd/bufio/bufio.go.html#1356578">i</a></span><span class="op" id="1356617">--</span>&nbsp;<span class="op" id="1356620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356624">n</span><span class="op" id="1356625">,</span>&nbsp;<span class="ident" id="1356627">err</span>&nbsp;<span class="op" id="1356631">:=</span>&nbsp;<span class="ident" id="1356634"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356635">.</span><span class="ident" id="1356636"><a href="/gostd/bufio/bufio.go.html#1355012">rd</a></span><span class="op" id="1356638">.</span><span class="ident" id="1356639"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="1356643">(</span><span class="ident" id="1356644"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356645">.</span><span class="ident" id="1356646"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1356649">[</span><span class="ident" id="1356650"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356651">.</span><span class="ident" id="1356652"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1356653">:</span><span class="op" id="1356654">]</span><span class="op" id="1356655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356659">if</span>&nbsp;<span class="ident" id="1356662"><a href="/gostd/bufio/bufio.go.html#1356624">n</a></span>&nbsp;<span class="op" id="1356664">&lt;</span>&nbsp;<span class="num" id="1356666">0</span>&nbsp;<span class="op" id="1356668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1356673">panic</span><span class="op" id="1356678">(</span><span class="ident" id="1356679"><a href="/gostd/bufio/bufio.go.html#1356192">errNegativeRead</a></span><span class="op" id="1356694">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356702"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356703">.</span><span class="ident" id="1356704"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1356706">+=</span>&nbsp;<span class="ident" id="1356709"><a href="/gostd/bufio/bufio.go.html#1356624">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356713">if</span>&nbsp;<span class="ident" id="1356716"><a href="/gostd/bufio/bufio.go.html#1356627">err</a></span>&nbsp;<span class="op" id="1356720">!=</span>&nbsp;<span class="builtintype" id="1356723">nil</span>&nbsp;<span class="op" id="1356727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356732"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356733">.</span><span class="ident" id="1356734"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1356738">=</span>&nbsp;<span class="ident" id="1356740"><a href="/gostd/bufio/bufio.go.html#1356627">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356747">return</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356760">if</span>&nbsp;<span class="ident" id="1356763"><a href="/gostd/bufio/bufio.go.html#1356624">n</a></span>&nbsp;<span class="op" id="1356765">&gt;</span>&nbsp;<span class="num" id="1356767">0</span>&nbsp;<span class="op" id="1356769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356774">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1356786">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356789"><a href="/gostd/bufio/bufio.go.html#1356322">b</a></span><span class="op" id="1356790">.</span><span class="ident" id="1356791"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1356795">=</span>&nbsp;<span class="ident" id="1356797"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1356799">.</span><span class="ident" id="1356800"><a href="/gostd/io/io.go.html#1420336">ErrNoProgress</a></span><br>
<span class="lineno"></span><span class="op" id="1356814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1356817">func</span>&nbsp;<span class="op" id="1356822">(</span><span class="ident" id="1356823">b</span>&nbsp;<span class="op" id="1356825">*</span><span class="ident" id="1356826"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1356832">)</span>&nbsp;<span class="ident" id="1356834">readErr</span><span class="op" id="1356841">(</span><span class="op" id="1356842">)</span>&nbsp;<span class="builtintype" id="1356844">error</span>&nbsp;<span class="op" id="1356850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356853">err</span>&nbsp;<span class="op" id="1356857">:=</span>&nbsp;<span class="ident" id="1356860"><a href="/gostd/bufio/bufio.go.html#1356823">b</a></span><span class="op" id="1356861">.</span><span class="ident" id="1356862"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1356867"><a href="/gostd/bufio/bufio.go.html#1356823">b</a></span><span class="op" id="1356868">.</span><span class="ident" id="1356869"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1356873">=</span>&nbsp;<span class="builtintype" id="1356875">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1356880">return</span>&nbsp;<span class="ident" id="1356887"><a href="/gostd/bufio/bufio.go.html#1356853">err</a></span><br>
<span class="lineno"></span><span class="op" id="1356891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1356894">//&nbsp;Peek&nbsp;returns&nbsp;the&nbsp;next&nbsp;n&nbsp;bytes&nbsp;without&nbsp;advancing&nbsp;the&nbsp;reader.&nbsp;The&nbsp;bytes&nbsp;stop</span><br>
<span class="lineno">120</span><span class="comment" id="1356972">//&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read&nbsp;call.&nbsp;If&nbsp;Peek&nbsp;returns&nbsp;fewer&nbsp;than&nbsp;n&nbsp;bytes,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="1357049">//&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining&nbsp;why&nbsp;the&nbsp;read&nbsp;is&nbsp;short.&nbsp;The&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1357121">//&nbsp;ErrBufferFull&nbsp;if&nbsp;n&nbsp;is&nbsp;larger&nbsp;than&nbsp;b&#39;s&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="1357175">func</span>&nbsp;<span class="op" id="1357180">(</span><span class="ident" id="1357181">b</span>&nbsp;<span class="op" id="1357183">*</span><span class="ident" id="1357184"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1357190">)</span>&nbsp;<span class="ident" id="1357192">Peek</span><span class="op" id="1357196">(</span><span class="ident" id="1357197">n</span>&nbsp;<span class="builtintype" id="1357199">int</span><span class="op" id="1357202">)</span>&nbsp;<span class="op" id="1357204">(</span><span class="op" id="1357205">[</span><span class="op" id="1357206">]</span><span class="builtintype" id="1357207">byte</span><span class="op" id="1357211">,</span>&nbsp;<span class="builtintype" id="1357213">error</span><span class="op" id="1357218">)</span>&nbsp;<span class="op" id="1357220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357223">if</span>&nbsp;<span class="ident" id="1357226"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span>&nbsp;<span class="op" id="1357228">&lt;</span>&nbsp;<span class="num" id="1357230">0</span>&nbsp;<span class="op" id="1357232">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357236">return</span>&nbsp;<span class="builtintype" id="1357243">nil</span><span class="op" id="1357246">,</span>&nbsp;<span class="ident" id="1357248"><a href="/gostd/bufio/bufio.go.html#1354831">ErrNegativeCount</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357269">if</span>&nbsp;<span class="ident" id="1357272"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span>&nbsp;<span class="op" id="1357274">&gt;</span>&nbsp;<span class="builtinfunc" id="1357276">len</span><span class="op" id="1357279">(</span><span class="ident" id="1357280"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357281">.</span><span class="ident" id="1357282"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1357285">)</span>&nbsp;<span class="op" id="1357287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357291">return</span>&nbsp;<span class="builtintype" id="1357298">nil</span><span class="op" id="1357301">,</span>&nbsp;<span class="ident" id="1357303"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357318">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1357321">//&nbsp;0&nbsp;&lt;=&nbsp;n&nbsp;&lt;=&nbsp;len(b.buf)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357346">for</span>&nbsp;<span class="ident" id="1357350"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357351">.</span><span class="ident" id="1357352"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1357353">-</span><span class="ident" id="1357354"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357355">.</span><span class="ident" id="1357356"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1357358">&lt;</span>&nbsp;<span class="ident" id="1357360"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span>&nbsp;<span class="op" id="1357362">&amp;&amp;</span>&nbsp;<span class="ident" id="1357365"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357366">.</span><span class="ident" id="1357367"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1357371">==</span>&nbsp;<span class="builtintype" id="1357374">nil</span>&nbsp;<span class="op" id="1357378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1357382"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357383">.</span><span class="ident" id="1357384"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1357388">(</span><span class="op" id="1357389">)</span>&nbsp;<span class="comment" id="1357391">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(b.buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357442">var</span>&nbsp;<span class="ident" id="1357446">err</span>&nbsp;<span class="builtintype" id="1357450">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357457">if</span>&nbsp;<span class="ident" id="1357460">avail</span>&nbsp;<span class="op" id="1357466">:=</span>&nbsp;<span class="ident" id="1357469"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357470">.</span><span class="ident" id="1357471"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1357473">-</span>&nbsp;<span class="ident" id="1357475"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357476">.</span><span class="ident" id="1357477"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1357478">;</span>&nbsp;<span class="ident" id="1357480"><a href="/gostd/bufio/bufio.go.html#1357460">avail</a></span>&nbsp;<span class="op" id="1357486">&lt;</span>&nbsp;<span class="ident" id="1357488"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span>&nbsp;<span class="op" id="1357490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1357494">//&nbsp;not&nbsp;enough&nbsp;data&nbsp;in&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1357525"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span>&nbsp;<span class="op" id="1357527">=</span>&nbsp;<span class="ident" id="1357529"><a href="/gostd/bufio/bufio.go.html#1357460">avail</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1357537"><a href="/gostd/bufio/bufio.go.html#1357446">err</a></span>&nbsp;<span class="op" id="1357541">=</span>&nbsp;<span class="ident" id="1357543"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357544">.</span><span class="ident" id="1357545"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1357552">(</span><span class="op" id="1357553">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357557">if</span>&nbsp;<span class="ident" id="1357560"><a href="/gostd/bufio/bufio.go.html#1357446">err</a></span>&nbsp;<span class="op" id="1357564">==</span>&nbsp;<span class="builtintype" id="1357567">nil</span>&nbsp;<span class="op" id="1357571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1357576"><a href="/gostd/bufio/bufio.go.html#1357446">err</a></span>&nbsp;<span class="op" id="1357580">=</span>&nbsp;<span class="ident" id="1357582"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357604">return</span>&nbsp;<span class="ident" id="1357611"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357612">.</span><span class="ident" id="1357613"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1357616">[</span><span class="ident" id="1357617"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357618">.</span><span class="ident" id="1357619"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1357621">:</span>&nbsp;<span class="ident" id="1357623"><a href="/gostd/bufio/bufio.go.html#1357181">b</a></span><span class="op" id="1357624">.</span><span class="ident" id="1357625"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1357626">+</span><span class="ident" id="1357627"><a href="/gostd/bufio/bufio.go.html#1357197">n</a></span><span class="op" id="1357628">]</span><span class="op" id="1357629">,</span>&nbsp;<span class="ident" id="1357631"><a href="/gostd/bufio/bufio.go.html#1357446">err</a></span><br>
<span class="lineno">145</span><span class="op" id="1357635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1357638">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="1357665">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;into&nbsp;p.</span><br>
<span class="lineno"></span><span class="comment" id="1357712">//&nbsp;It&nbsp;calls&nbsp;Read&nbsp;at&nbsp;most&nbsp;once&nbsp;on&nbsp;the&nbsp;underlying&nbsp;Reader,</span><br>
<span class="lineno">150</span><span class="comment" id="1357768">//&nbsp;hence&nbsp;n&nbsp;may&nbsp;be&nbsp;less&nbsp;than&nbsp;len(p).</span><br>
<span class="lineno"></span><span class="comment" id="1357804">//&nbsp;At&nbsp;EOF,&nbsp;the&nbsp;count&nbsp;will&nbsp;be&nbsp;zero&nbsp;and&nbsp;err&nbsp;will&nbsp;be&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="1357862">func</span>&nbsp;<span class="op" id="1357867">(</span><span class="ident" id="1357868">b</span>&nbsp;<span class="op" id="1357870">*</span><span class="ident" id="1357871"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1357877">)</span>&nbsp;<span class="ident" id="1357879">Read</span><span class="op" id="1357883">(</span><span class="ident" id="1357884">p</span>&nbsp;<span class="op" id="1357886">[</span><span class="op" id="1357887">]</span><span class="builtintype" id="1357888">byte</span><span class="op" id="1357892">)</span>&nbsp;<span class="op" id="1357894">(</span><span class="ident" id="1357895">n</span>&nbsp;<span class="builtintype" id="1357897">int</span><span class="op" id="1357900">,</span>&nbsp;<span class="ident" id="1357902">err</span>&nbsp;<span class="builtintype" id="1357906">error</span><span class="op" id="1357911">)</span>&nbsp;<span class="op" id="1357913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1357916"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span>&nbsp;<span class="op" id="1357918">=</span>&nbsp;<span class="builtinfunc" id="1357920">len</span><span class="op" id="1357923">(</span><span class="ident" id="1357924"><a href="/gostd/bufio/bufio.go.html#1357884">p</a></span><span class="op" id="1357925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357928">if</span>&nbsp;<span class="ident" id="1357931"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span>&nbsp;<span class="op" id="1357933">==</span>&nbsp;<span class="num" id="1357936">0</span>&nbsp;<span class="op" id="1357938">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357942">return</span>&nbsp;<span class="num" id="1357949">0</span><span class="op" id="1357950">,</span>&nbsp;<span class="ident" id="1357952"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1357953">.</span><span class="ident" id="1357954"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1357961">(</span><span class="op" id="1357962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1357965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357968">if</span>&nbsp;<span class="ident" id="1357971"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1357972">.</span><span class="ident" id="1357973"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1357975">==</span>&nbsp;<span class="ident" id="1357978"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1357979">.</span><span class="ident" id="1357980"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1357982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1357986">if</span>&nbsp;<span class="ident" id="1357989"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1357990">.</span><span class="ident" id="1357991"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1357995">!=</span>&nbsp;<span class="builtintype" id="1357998">nil</span>&nbsp;<span class="op" id="1358002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358007">return</span>&nbsp;<span class="num" id="1358014">0</span><span class="op" id="1358015">,</span>&nbsp;<span class="ident" id="1358017"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358018">.</span><span class="ident" id="1358019"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1358026">(</span><span class="op" id="1358027">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358035">if</span>&nbsp;<span class="builtinfunc" id="1358038">len</span><span class="op" id="1358041">(</span><span class="ident" id="1358042"><a href="/gostd/bufio/bufio.go.html#1357884">p</a></span><span class="op" id="1358043">)</span>&nbsp;<span class="op" id="1358045">&gt;=</span>&nbsp;<span class="builtinfunc" id="1358048">len</span><span class="op" id="1358051">(</span><span class="ident" id="1358052"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358053">.</span><span class="ident" id="1358054"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1358057">)</span>&nbsp;<span class="op" id="1358059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1358064">//&nbsp;Large&nbsp;read,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1358096">//&nbsp;Read&nbsp;directly&nbsp;into&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358138"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span><span class="op" id="1358139">,</span>&nbsp;<span class="ident" id="1358141"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358142">.</span><span class="ident" id="1358143"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1358147">=</span>&nbsp;<span class="ident" id="1358149"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358150">.</span><span class="ident" id="1358151"><a href="/gostd/bufio/bufio.go.html#1355012">rd</a></span><span class="op" id="1358153">.</span><span class="ident" id="1358154"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="1358158">(</span><span class="ident" id="1358159"><a href="/gostd/bufio/bufio.go.html#1357884">p</a></span><span class="op" id="1358160">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358165">if</span>&nbsp;<span class="ident" id="1358168"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span>&nbsp;<span class="op" id="1358170">&lt;</span>&nbsp;<span class="num" id="1358172">0</span>&nbsp;<span class="op" id="1358174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1358180">panic</span><span class="op" id="1358185">(</span><span class="ident" id="1358186"><a href="/gostd/bufio/bufio.go.html#1356192">errNegativeRead</a></span><span class="op" id="1358201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358211">if</span>&nbsp;<span class="ident" id="1358214"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span>&nbsp;<span class="op" id="1358216">&gt;</span>&nbsp;<span class="num" id="1358218">0</span>&nbsp;<span class="op" id="1358220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358226"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358227">.</span><span class="ident" id="1358228"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1358237">=</span>&nbsp;<span class="builtintype" id="1358239">int</span><span class="op" id="1358242">(</span><span class="ident" id="1358243"><a href="/gostd/bufio/bufio.go.html#1357884">p</a></span><span class="op" id="1358244">[</span><span class="ident" id="1358245"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span><span class="op" id="1358246">-</span><span class="num" id="1358247">1</span><span class="op" id="1358248">]</span><span class="op" id="1358249">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358255"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358256">.</span><span class="ident" id="1358257"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1358270">=</span>&nbsp;<span class="op" id="1358272">-</span><span class="num" id="1358273">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358283">return</span>&nbsp;<span class="ident" id="1358290"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span><span class="op" id="1358291">,</span>&nbsp;<span class="ident" id="1358293"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358294">.</span><span class="ident" id="1358295"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1358302">(</span><span class="op" id="1358303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358311"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358312">.</span><span class="ident" id="1358313"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1358317">(</span><span class="op" id="1358318">)</span>&nbsp;<span class="comment" id="1358320">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358341">if</span>&nbsp;<span class="ident" id="1358344"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358345">.</span><span class="ident" id="1358346"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1358348">==</span>&nbsp;<span class="ident" id="1358351"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358352">.</span><span class="ident" id="1358353"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1358355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358360">return</span>&nbsp;<span class="num" id="1358367">0</span><span class="op" id="1358368">,</span>&nbsp;<span class="ident" id="1358370"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358371">.</span><span class="ident" id="1358372"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1358379">(</span><span class="op" id="1358380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1358391">//&nbsp;copy&nbsp;as&nbsp;much&nbsp;as&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358418"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span>&nbsp;<span class="op" id="1358420">=</span>&nbsp;<span class="builtinfunc" id="1358422">copy</span><span class="op" id="1358426">(</span><span class="ident" id="1358427"><a href="/gostd/bufio/bufio.go.html#1357884">p</a></span><span class="op" id="1358428">,</span>&nbsp;<span class="ident" id="1358430"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358431">.</span><span class="ident" id="1358432"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1358435">[</span><span class="ident" id="1358436"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358437">.</span><span class="ident" id="1358438"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1358439">:</span><span class="ident" id="1358440"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358441">.</span><span class="ident" id="1358442"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1358443">]</span><span class="op" id="1358444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358447"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358448">.</span><span class="ident" id="1358449"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1358451">+=</span>&nbsp;<span class="ident" id="1358454"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358457"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358458">.</span><span class="ident" id="1358459"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1358468">=</span>&nbsp;<span class="builtintype" id="1358470">int</span><span class="op" id="1358473">(</span><span class="ident" id="1358474"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358475">.</span><span class="ident" id="1358476"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1358479">[</span><span class="ident" id="1358480"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358481">.</span><span class="ident" id="1358482"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1358483">-</span><span class="num" id="1358484">1</span><span class="op" id="1358485">]</span><span class="op" id="1358486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358489"><a href="/gostd/bufio/bufio.go.html#1357868">b</a></span><span class="op" id="1358490">.</span><span class="ident" id="1358491"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1358504">=</span>&nbsp;<span class="op" id="1358506">-</span><span class="num" id="1358507">1</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358510">return</span>&nbsp;<span class="ident" id="1358517"><a href="/gostd/bufio/bufio.go.html#1357895">n</a></span><span class="op" id="1358518">,</span>&nbsp;<span class="builtintype" id="1358520">nil</span><br>
<span class="lineno"></span><span class="op" id="1358524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1358527">//&nbsp;ReadByte&nbsp;reads&nbsp;and&nbsp;returns&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="1358572">//&nbsp;If&nbsp;no&nbsp;byte&nbsp;is&nbsp;available,&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">190</span><span class="keyword" id="1358618">func</span>&nbsp;<span class="op" id="1358623">(</span><span class="ident" id="1358624">b</span>&nbsp;<span class="op" id="1358626">*</span><span class="ident" id="1358627"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1358633">)</span>&nbsp;<span class="ident" id="1358635">ReadByte</span><span class="op" id="1358643">(</span><span class="op" id="1358644">)</span>&nbsp;<span class="op" id="1358646">(</span><span class="ident" id="1358647">c</span>&nbsp;<span class="builtintype" id="1358649">byte</span><span class="op" id="1358653">,</span>&nbsp;<span class="ident" id="1358655">err</span>&nbsp;<span class="builtintype" id="1358659">error</span><span class="op" id="1358664">)</span>&nbsp;<span class="op" id="1358666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358669"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358670">.</span><span class="ident" id="1358671"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1358684">=</span>&nbsp;<span class="op" id="1358686">-</span><span class="num" id="1358687">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358690">for</span>&nbsp;<span class="ident" id="1358694"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358695">.</span><span class="ident" id="1358696"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1358698">==</span>&nbsp;<span class="ident" id="1358701"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358702">.</span><span class="ident" id="1358703"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1358705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358709">if</span>&nbsp;<span class="ident" id="1358712"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358713">.</span><span class="ident" id="1358714"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1358718">!=</span>&nbsp;<span class="builtintype" id="1358721">nil</span>&nbsp;<span class="op" id="1358725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358730">return</span>&nbsp;<span class="num" id="1358737">0</span><span class="op" id="1358738">,</span>&nbsp;<span class="ident" id="1358740"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358741">.</span><span class="ident" id="1358742"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1358749">(</span><span class="op" id="1358750">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358758"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358759">.</span><span class="ident" id="1358760"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1358764">(</span><span class="op" id="1358765">)</span>&nbsp;<span class="comment" id="1358767">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1358787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358790"><a href="/gostd/bufio/bufio.go.html#1358647">c</a></span>&nbsp;<span class="op" id="1358792">=</span>&nbsp;<span class="ident" id="1358794"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358795">.</span><span class="ident" id="1358796"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1358799">[</span><span class="ident" id="1358800"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358801">.</span><span class="ident" id="1358802"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1358803">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358806"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358807">.</span><span class="ident" id="1358808"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1358809">++</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1358813"><a href="/gostd/bufio/bufio.go.html#1358624">b</a></span><span class="op" id="1358814">.</span><span class="ident" id="1358815"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1358824">=</span>&nbsp;<span class="builtintype" id="1358826">int</span><span class="op" id="1358829">(</span><span class="ident" id="1358830"><a href="/gostd/bufio/bufio.go.html#1358647">c</a></span><span class="op" id="1358831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358834">return</span>&nbsp;<span class="ident" id="1358841"><a href="/gostd/bufio/bufio.go.html#1358647">c</a></span><span class="op" id="1358842">,</span>&nbsp;<span class="builtintype" id="1358844">nil</span><br>
<span class="lineno"></span><span class="op" id="1358848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1358851">//&nbsp;UnreadByte&nbsp;unreads&nbsp;the&nbsp;last&nbsp;byte.&nbsp;&nbsp;Only&nbsp;the&nbsp;most&nbsp;recently&nbsp;read&nbsp;byte&nbsp;can&nbsp;be&nbsp;unread.</span><br>
<span class="lineno">205</span><span class="keyword" id="1358937">func</span>&nbsp;<span class="op" id="1358942">(</span><span class="ident" id="1358943">b</span>&nbsp;<span class="op" id="1358945">*</span><span class="ident" id="1358946"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1358952">)</span>&nbsp;<span class="ident" id="1358954">UnreadByte</span><span class="op" id="1358964">(</span><span class="op" id="1358965">)</span>&nbsp;<span class="builtintype" id="1358967">error</span>&nbsp;<span class="op" id="1358973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1358976">if</span>&nbsp;<span class="ident" id="1358979"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1358980">.</span><span class="ident" id="1358981"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1358990">&lt;</span>&nbsp;<span class="num" id="1358992">0</span>&nbsp;<span class="op" id="1358994">||</span>&nbsp;<span class="ident" id="1358997"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1358998">.</span><span class="ident" id="1358999"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1359001">==</span>&nbsp;<span class="num" id="1359004">0</span>&nbsp;<span class="op" id="1359006">&amp;&amp;</span>&nbsp;<span class="ident" id="1359009"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359010">.</span><span class="ident" id="1359011"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1359013">&gt;</span>&nbsp;<span class="num" id="1359015">0</span>&nbsp;<span class="op" id="1359017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359021">return</span>&nbsp;<span class="ident" id="1359028"><a href="/gostd/bufio/bufio.go.html#1354632">ErrInvalidUnreadByte</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1359053">//&nbsp;b.r&nbsp;&gt;&nbsp;0&nbsp;||&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359077">if</span>&nbsp;<span class="ident" id="1359080"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359081">.</span><span class="ident" id="1359082"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1359084">&gt;</span>&nbsp;<span class="num" id="1359086">0</span>&nbsp;<span class="op" id="1359088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359092"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359093">.</span><span class="ident" id="1359094"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359095">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359099">}</span>&nbsp;<span class="keyword" id="1359101">else</span>&nbsp;<span class="op" id="1359106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1359110">//&nbsp;b.r&nbsp;==&nbsp;0&nbsp;&amp;&amp;&nbsp;b.w&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359136"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359137">.</span><span class="ident" id="1359138"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1359140">=</span>&nbsp;<span class="num" id="1359142">1</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359148"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359149">.</span><span class="ident" id="1359150"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359153">[</span><span class="ident" id="1359154"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359155">.</span><span class="ident" id="1359156"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359157">]</span>&nbsp;<span class="op" id="1359159">=</span>&nbsp;<span class="builtintype" id="1359161">byte</span><span class="op" id="1359165">(</span><span class="ident" id="1359166"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359167">.</span><span class="ident" id="1359168"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span><span class="op" id="1359176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359179"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359180">.</span><span class="ident" id="1359181"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1359190">=</span>&nbsp;<span class="op" id="1359192">-</span><span class="num" id="1359193">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359196"><a href="/gostd/bufio/bufio.go.html#1358943">b</a></span><span class="op" id="1359197">.</span><span class="ident" id="1359198"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1359211">=</span>&nbsp;<span class="op" id="1359213">-</span><span class="num" id="1359214">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359217">return</span>&nbsp;<span class="builtintype" id="1359224">nil</span><br>
<span class="lineno">220</span><span class="op" id="1359228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1359231">//&nbsp;ReadRune&nbsp;reads&nbsp;a&nbsp;single&nbsp;UTF-8&nbsp;encoded&nbsp;Unicode&nbsp;character&nbsp;and&nbsp;returns&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1359306">//&nbsp;rune&nbsp;and&nbsp;its&nbsp;size&nbsp;in&nbsp;bytes.&nbsp;If&nbsp;the&nbsp;encoded&nbsp;rune&nbsp;is&nbsp;invalid,&nbsp;it&nbsp;consumes&nbsp;one&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1359390">//&nbsp;and&nbsp;returns&nbsp;unicode.ReplacementChar&nbsp;(U+FFFD)&nbsp;with&nbsp;a&nbsp;size&nbsp;of&nbsp;1.</span><br>
<span class="lineno">225</span><span class="keyword" id="1359456">func</span>&nbsp;<span class="op" id="1359461">(</span><span class="ident" id="1359462">b</span>&nbsp;<span class="op" id="1359464">*</span><span class="ident" id="1359465"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1359471">)</span>&nbsp;<span class="ident" id="1359473">ReadRune</span><span class="op" id="1359481">(</span><span class="op" id="1359482">)</span>&nbsp;<span class="op" id="1359484">(</span><span class="ident" id="1359485">r</span>&nbsp;<span class="builtintype" id="1359487">rune</span><span class="op" id="1359491">,</span>&nbsp;<span class="ident" id="1359493">size</span>&nbsp;<span class="builtintype" id="1359498">int</span><span class="op" id="1359501">,</span>&nbsp;<span class="ident" id="1359503">err</span>&nbsp;<span class="builtintype" id="1359507">error</span><span class="op" id="1359512">)</span>&nbsp;<span class="op" id="1359514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359517">for</span>&nbsp;<span class="ident" id="1359521"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359522">.</span><span class="ident" id="1359523"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359524">+</span><span class="ident" id="1359525"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1359529">.</span><span class="ident" id="1359530"><a href="/gostd/unicode/utf8/utf8.go.html#1805617">UTFMax</a></span>&nbsp;<span class="op" id="1359537">&gt;</span>&nbsp;<span class="ident" id="1359539"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359540">.</span><span class="ident" id="1359541"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1359543">&amp;&amp;</span>&nbsp;<span class="op" id="1359546">!</span><span class="ident" id="1359547"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1359551">.</span><span class="ident" id="1359552"><a href="/gostd/unicode/utf8/utf8.go.html#1809204">FullRune</a></span><span class="op" id="1359560">(</span><span class="ident" id="1359561"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359562">.</span><span class="ident" id="1359563"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359566">[</span><span class="ident" id="1359567"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359568">.</span><span class="ident" id="1359569"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359570">:</span><span class="ident" id="1359571"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359572">.</span><span class="ident" id="1359573"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1359574">]</span><span class="op" id="1359575">)</span>&nbsp;<span class="op" id="1359577">&amp;&amp;</span>&nbsp;<span class="ident" id="1359580"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359581">.</span><span class="ident" id="1359582"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1359586">==</span>&nbsp;<span class="builtintype" id="1359589">nil</span>&nbsp;<span class="op" id="1359593">&amp;&amp;</span>&nbsp;<span class="ident" id="1359596"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359597">.</span><span class="ident" id="1359598"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1359599">-</span><span class="ident" id="1359600"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359601">.</span><span class="ident" id="1359602"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1359604">&lt;</span>&nbsp;<span class="builtinfunc" id="1359606">len</span><span class="op" id="1359609">(</span><span class="ident" id="1359610"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359611">.</span><span class="ident" id="1359612"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359615">)</span>&nbsp;<span class="op" id="1359617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359621"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359622">.</span><span class="ident" id="1359623"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1359627">(</span><span class="op" id="1359628">)</span>&nbsp;<span class="comment" id="1359630">//&nbsp;b.w-b.r&nbsp;&lt;&nbsp;len(buf)&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359678"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359679">.</span><span class="ident" id="1359680"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1359693">=</span>&nbsp;<span class="op" id="1359695">-</span><span class="num" id="1359696">1</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359699">if</span>&nbsp;<span class="ident" id="1359702"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359703">.</span><span class="ident" id="1359704"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1359706">==</span>&nbsp;<span class="ident" id="1359709"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359710">.</span><span class="ident" id="1359711"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1359713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359717">return</span>&nbsp;<span class="num" id="1359724">0</span><span class="op" id="1359725">,</span>&nbsp;<span class="num" id="1359727">0</span><span class="op" id="1359728">,</span>&nbsp;<span class="ident" id="1359730"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359731">.</span><span class="ident" id="1359732"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1359739">(</span><span class="op" id="1359740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359746"><a href="/gostd/bufio/bufio.go.html#1359485">r</a></span><span class="op" id="1359747">,</span>&nbsp;<span class="ident" id="1359749"><a href="/gostd/bufio/bufio.go.html#1359493">size</a></span>&nbsp;<span class="op" id="1359754">=</span>&nbsp;<span class="builtintype" id="1359756">rune</span><span class="op" id="1359760">(</span><span class="ident" id="1359761"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359762">.</span><span class="ident" id="1359763"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359766">[</span><span class="ident" id="1359767"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359768">.</span><span class="ident" id="1359769"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359770">]</span><span class="op" id="1359771">)</span><span class="op" id="1359772">,</span>&nbsp;<span class="num" id="1359774">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359777">if</span>&nbsp;<span class="ident" id="1359780"><a href="/gostd/bufio/bufio.go.html#1359485">r</a></span>&nbsp;<span class="op" id="1359782">&gt;=</span>&nbsp;<span class="num" id="1359785">0x80</span>&nbsp;<span class="op" id="1359790">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359794"><a href="/gostd/bufio/bufio.go.html#1359485">r</a></span><span class="op" id="1359795">,</span>&nbsp;<span class="ident" id="1359797"><a href="/gostd/bufio/bufio.go.html#1359493">size</a></span>&nbsp;<span class="op" id="1359802">=</span>&nbsp;<span class="ident" id="1359804"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1359808">.</span><span class="ident" id="1359809"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="1359819">(</span><span class="ident" id="1359820"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359821">.</span><span class="ident" id="1359822"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359825">[</span><span class="ident" id="1359826"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359827">.</span><span class="ident" id="1359828"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359829">:</span><span class="ident" id="1359830"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359831">.</span><span class="ident" id="1359832"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1359833">]</span><span class="op" id="1359834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1359837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359840"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359841">.</span><span class="ident" id="1359842"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1359844">+=</span>&nbsp;<span class="ident" id="1359847"><a href="/gostd/bufio/bufio.go.html#1359493">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359853"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359854">.</span><span class="ident" id="1359855"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1359864">=</span>&nbsp;<span class="builtintype" id="1359866">int</span><span class="op" id="1359869">(</span><span class="ident" id="1359870"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359871">.</span><span class="ident" id="1359872"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1359875">[</span><span class="ident" id="1359876"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359877">.</span><span class="ident" id="1359878"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1359879">-</span><span class="num" id="1359880">1</span><span class="op" id="1359881">]</span><span class="op" id="1359882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1359885"><a href="/gostd/bufio/bufio.go.html#1359462">b</a></span><span class="op" id="1359886">.</span><span class="ident" id="1359887"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1359900">=</span>&nbsp;<span class="ident" id="1359902"><a href="/gostd/bufio/bufio.go.html#1359493">size</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1359908">return</span>&nbsp;<span class="ident" id="1359915"><a href="/gostd/bufio/bufio.go.html#1359485">r</a></span><span class="op" id="1359916">,</span>&nbsp;<span class="ident" id="1359918"><a href="/gostd/bufio/bufio.go.html#1359493">size</a></span><span class="op" id="1359922">,</span>&nbsp;<span class="builtintype" id="1359924">nil</span><br>
<span class="lineno"></span><span class="op" id="1359928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1359931">//&nbsp;UnreadRune&nbsp;unreads&nbsp;the&nbsp;last&nbsp;rune.&nbsp;&nbsp;If&nbsp;the&nbsp;most&nbsp;recent&nbsp;read&nbsp;operation&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1360006">//&nbsp;the&nbsp;buffer&nbsp;was&nbsp;not&nbsp;a&nbsp;ReadRune,&nbsp;UnreadRune&nbsp;returns&nbsp;an&nbsp;error.&nbsp;&nbsp;(In&nbsp;this</span><br>
<span class="lineno">245</span><span class="comment" id="1360079">//&nbsp;regard&nbsp;it&nbsp;is&nbsp;stricter&nbsp;than&nbsp;UnreadByte,&nbsp;which&nbsp;will&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte</span><br>
<span class="lineno"></span><span class="comment" id="1360153">//&nbsp;from&nbsp;any&nbsp;read&nbsp;operation.)</span><br>
<span class="lineno"></span><span class="keyword" id="1360182">func</span>&nbsp;<span class="op" id="1360187">(</span><span class="ident" id="1360188">b</span>&nbsp;<span class="op" id="1360190">*</span><span class="ident" id="1360191"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1360197">)</span>&nbsp;<span class="ident" id="1360199">UnreadRune</span><span class="op" id="1360209">(</span><span class="op" id="1360210">)</span>&nbsp;<span class="builtintype" id="1360212">error</span>&nbsp;<span class="op" id="1360218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1360221">if</span>&nbsp;<span class="ident" id="1360224"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360225">.</span><span class="ident" id="1360226"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1360239">&lt;</span>&nbsp;<span class="num" id="1360241">0</span>&nbsp;<span class="op" id="1360243">||</span>&nbsp;<span class="ident" id="1360246"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360247">.</span><span class="ident" id="1360248"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1360250">&lt;</span>&nbsp;<span class="ident" id="1360252"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360253">.</span><span class="ident" id="1360254"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1360267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1360271">return</span>&nbsp;<span class="ident" id="1360278"><a href="/gostd/bufio/bufio.go.html#1354703">ErrInvalidUnreadRune</a></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1360300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1360303"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360304">.</span><span class="ident" id="1360305"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1360307">-=</span>&nbsp;<span class="ident" id="1360310"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360311">.</span><span class="ident" id="1360312"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1360326"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360327">.</span><span class="ident" id="1360328"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1360337">=</span>&nbsp;<span class="op" id="1360339">-</span><span class="num" id="1360340">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1360343"><a href="/gostd/bufio/bufio.go.html#1360188">b</a></span><span class="op" id="1360344">.</span><span class="ident" id="1360345"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1360358">=</span>&nbsp;<span class="op" id="1360360">-</span><span class="num" id="1360361">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1360364">return</span>&nbsp;<span class="builtintype" id="1360371">nil</span><br>
<span class="lineno">255</span><span class="op" id="1360375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1360378">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;can&nbsp;be&nbsp;read&nbsp;from&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1360460">func</span>&nbsp;<span class="op" id="1360465">(</span><span class="ident" id="1360466">b</span>&nbsp;<span class="op" id="1360468">*</span><span class="ident" id="1360469"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1360475">)</span>&nbsp;<span class="ident" id="1360477">Buffered</span><span class="op" id="1360485">(</span><span class="op" id="1360486">)</span>&nbsp;<span class="builtintype" id="1360488">int</span>&nbsp;<span class="op" id="1360492">{</span>&nbsp;<span class="keyword" id="1360494">return</span>&nbsp;<span class="ident" id="1360501"><a href="/gostd/bufio/bufio.go.html#1360466">b</a></span><span class="op" id="1360502">.</span><span class="ident" id="1360503"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1360505">-</span>&nbsp;<span class="ident" id="1360507"><a href="/gostd/bufio/bufio.go.html#1360466">b</a></span><span class="op" id="1360508">.</span><span class="ident" id="1360509"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1360511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="1360514">//&nbsp;ReadSlice&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="1360583">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;pointing&nbsp;at&nbsp;the&nbsp;bytes&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="1360641">//&nbsp;The&nbsp;bytes&nbsp;stop&nbsp;being&nbsp;valid&nbsp;at&nbsp;the&nbsp;next&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="1360689">//&nbsp;If&nbsp;ReadSlice&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="1360753">//&nbsp;it&nbsp;returns&nbsp;all&nbsp;the&nbsp;data&nbsp;in&nbsp;the&nbsp;buffer&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">265</span><span class="comment" id="1360831">//&nbsp;ReadSlice&nbsp;fails&nbsp;with&nbsp;error&nbsp;ErrBufferFull&nbsp;if&nbsp;the&nbsp;buffer&nbsp;fills&nbsp;without&nbsp;a&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="1360912">//&nbsp;Because&nbsp;the&nbsp;data&nbsp;returned&nbsp;from&nbsp;ReadSlice&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno"></span><span class="comment" id="1360976">//&nbsp;by&nbsp;the&nbsp;next&nbsp;I/O&nbsp;operation,&nbsp;most&nbsp;clients&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1361030">//&nbsp;ReadBytes&nbsp;or&nbsp;ReadString&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="1361066">//&nbsp;ReadSlice&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;line&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;delim.</span><br>
<span class="lineno">270</span><span class="keyword" id="1361141">func</span>&nbsp;<span class="op" id="1361146">(</span><span class="ident" id="1361147">b</span>&nbsp;<span class="op" id="1361149">*</span><span class="ident" id="1361150"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1361156">)</span>&nbsp;<span class="ident" id="1361158">ReadSlice</span><span class="op" id="1361167">(</span><span class="ident" id="1361168">delim</span>&nbsp;<span class="builtintype" id="1361174">byte</span><span class="op" id="1361178">)</span>&nbsp;<span class="op" id="1361180">(</span><span class="ident" id="1361181">line</span>&nbsp;<span class="op" id="1361186">[</span><span class="op" id="1361187">]</span><span class="builtintype" id="1361188">byte</span><span class="op" id="1361192">,</span>&nbsp;<span class="ident" id="1361194">err</span>&nbsp;<span class="builtintype" id="1361198">error</span><span class="op" id="1361203">)</span>&nbsp;<span class="op" id="1361205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361208">for</span>&nbsp;<span class="op" id="1361212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1361216">//&nbsp;Search&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361236">if</span>&nbsp;<span class="ident" id="1361239">i</span>&nbsp;<span class="op" id="1361241">:=</span>&nbsp;<span class="ident" id="1361244"><a href="/gostd/bufio/bufio.go.html#1354548">bytes</a></span><span class="op" id="1361249">.</span><span class="ident" id="1361250"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="1361259">(</span><span class="ident" id="1361260"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361261">.</span><span class="ident" id="1361262"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1361265">[</span><span class="ident" id="1361266"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361267">.</span><span class="ident" id="1361268"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1361269">:</span><span class="ident" id="1361270"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361271">.</span><span class="ident" id="1361272"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1361273">]</span><span class="op" id="1361274">,</span>&nbsp;<span class="ident" id="1361276"><a href="/gostd/bufio/bufio.go.html#1361168">delim</a></span><span class="op" id="1361281">)</span><span class="op" id="1361282">;</span>&nbsp;<span class="ident" id="1361284"><a href="/gostd/bufio/bufio.go.html#1361239">i</a></span>&nbsp;<span class="op" id="1361286">&gt;=</span>&nbsp;<span class="num" id="1361289">0</span>&nbsp;<span class="op" id="1361291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361296"><a href="/gostd/bufio/bufio.go.html#1361181">line</a></span>&nbsp;<span class="op" id="1361301">=</span>&nbsp;<span class="ident" id="1361303"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361304">.</span><span class="ident" id="1361305"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1361308">[</span><span class="ident" id="1361309"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361310">.</span><span class="ident" id="1361311"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1361313">:</span>&nbsp;<span class="ident" id="1361315"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361316">.</span><span class="ident" id="1361317"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1361318">+</span><span class="ident" id="1361319"><a href="/gostd/bufio/bufio.go.html#1361239">i</a></span><span class="op" id="1361320">+</span><span class="num" id="1361321">1</span><span class="op" id="1361322">]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361327"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361328">.</span><span class="ident" id="1361329"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1361331">+=</span>&nbsp;<span class="ident" id="1361334"><a href="/gostd/bufio/bufio.go.html#1361239">i</a></span>&nbsp;<span class="op" id="1361336">+</span>&nbsp;<span class="num" id="1361338">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361343">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1361351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1361356">//&nbsp;Pending&nbsp;error?</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361376">if</span>&nbsp;<span class="ident" id="1361379"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361380">.</span><span class="ident" id="1361381"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1361385">!=</span>&nbsp;<span class="builtintype" id="1361388">nil</span>&nbsp;<span class="op" id="1361392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361397"><a href="/gostd/bufio/bufio.go.html#1361181">line</a></span>&nbsp;<span class="op" id="1361402">=</span>&nbsp;<span class="ident" id="1361404"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361405">.</span><span class="ident" id="1361406"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1361409">[</span><span class="ident" id="1361410"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361411">.</span><span class="ident" id="1361412"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1361413">:</span><span class="ident" id="1361414"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361415">.</span><span class="ident" id="1361416"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1361417">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361422"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361423">.</span><span class="ident" id="1361424"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1361426">=</span>&nbsp;<span class="ident" id="1361428"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361429">.</span><span class="ident" id="1361430"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361435"><a href="/gostd/bufio/bufio.go.html#1361194">err</a></span>&nbsp;<span class="op" id="1361439">=</span>&nbsp;<span class="ident" id="1361441"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361442">.</span><span class="ident" id="1361443"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1361450">(</span><span class="op" id="1361451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361456">break</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1361464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1361469">//&nbsp;Buffer&nbsp;full?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361487">if</span>&nbsp;<span class="ident" id="1361490"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361491">.</span><span class="ident" id="1361492"><a href="/gostd/bufio/bufio.go.html#1360477">Buffered</a></span><span class="op" id="1361500">(</span><span class="op" id="1361501">)</span>&nbsp;<span class="op" id="1361503">&gt;=</span>&nbsp;<span class="builtinfunc" id="1361506">len</span><span class="op" id="1361509">(</span><span class="ident" id="1361510"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361511">.</span><span class="ident" id="1361512"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1361515">)</span>&nbsp;<span class="op" id="1361517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361522"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361523">.</span><span class="ident" id="1361524"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1361526">=</span>&nbsp;<span class="ident" id="1361528"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361529">.</span><span class="ident" id="1361530"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361535"><a href="/gostd/bufio/bufio.go.html#1361181">line</a></span>&nbsp;<span class="op" id="1361540">=</span>&nbsp;<span class="ident" id="1361542"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361543">.</span><span class="ident" id="1361544"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361551"><a href="/gostd/bufio/bufio.go.html#1361194">err</a></span>&nbsp;<span class="op" id="1361555">=</span>&nbsp;<span class="ident" id="1361557"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361574">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1361582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361587"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361588">.</span><span class="ident" id="1361589"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1361593">(</span><span class="op" id="1361594">)</span>&nbsp;<span class="comment" id="1361596">//&nbsp;buffer&nbsp;is&nbsp;not&nbsp;full</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1361619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1361623">//&nbsp;Handle&nbsp;last&nbsp;byte,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361653">if</span>&nbsp;<span class="ident" id="1361656">i</span>&nbsp;<span class="op" id="1361658">:=</span>&nbsp;<span class="builtinfunc" id="1361661">len</span><span class="op" id="1361664">(</span><span class="ident" id="1361665"><a href="/gostd/bufio/bufio.go.html#1361181">line</a></span><span class="op" id="1361669">)</span>&nbsp;<span class="op" id="1361671">-</span>&nbsp;<span class="num" id="1361673">1</span><span class="op" id="1361674">;</span>&nbsp;<span class="ident" id="1361676"><a href="/gostd/bufio/bufio.go.html#1361656">i</a></span>&nbsp;<span class="op" id="1361678">&gt;=</span>&nbsp;<span class="num" id="1361681">0</span>&nbsp;<span class="op" id="1361683">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361687"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361688">.</span><span class="ident" id="1361689"><a href="/gostd/bufio/bufio.go.html#1355145">lastByte</a></span>&nbsp;<span class="op" id="1361698">=</span>&nbsp;<span class="builtintype" id="1361700">int</span><span class="op" id="1361703">(</span><span class="ident" id="1361704"><a href="/gostd/bufio/bufio.go.html#1361181">line</a></span><span class="op" id="1361708">[</span><span class="ident" id="1361709"><a href="/gostd/bufio/bufio.go.html#1361656">i</a></span><span class="op" id="1361710">]</span><span class="op" id="1361711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1361715"><a href="/gostd/bufio/bufio.go.html#1361147">b</a></span><span class="op" id="1361716">.</span><span class="ident" id="1361717"><a href="/gostd/bufio/bufio.go.html#1355163">lastRuneSize</a></span>&nbsp;<span class="op" id="1361730">=</span>&nbsp;<span class="op" id="1361732">-</span><span class="num" id="1361733">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1361736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1361740">return</span><br>
<span class="lineno">305</span><span class="op" id="1361747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1361750">//&nbsp;ReadLine&nbsp;is&nbsp;a&nbsp;low-level&nbsp;line-reading&nbsp;primitive.&nbsp;Most&nbsp;callers&nbsp;should&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="1361825">//&nbsp;ReadBytes(&#39;\n&#39;)&nbsp;or&nbsp;ReadString(&#39;\n&#39;)&nbsp;instead&nbsp;or&nbsp;use&nbsp;a&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="comment" id="1361890">//</span><br>
<span class="lineno">310</span><span class="comment" id="1361893">//&nbsp;ReadLine&nbsp;tries&nbsp;to&nbsp;return&nbsp;a&nbsp;single&nbsp;line,&nbsp;not&nbsp;including&nbsp;the&nbsp;end-of-line&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1361973">//&nbsp;If&nbsp;the&nbsp;line&nbsp;was&nbsp;too&nbsp;long&nbsp;for&nbsp;the&nbsp;buffer&nbsp;then&nbsp;isPrefix&nbsp;is&nbsp;set&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1362045">//&nbsp;beginning&nbsp;of&nbsp;the&nbsp;line&nbsp;is&nbsp;returned.&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;line&nbsp;will&nbsp;be&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="1362121">//&nbsp;from&nbsp;future&nbsp;calls.&nbsp;isPrefix&nbsp;will&nbsp;be&nbsp;false&nbsp;when&nbsp;returning&nbsp;the&nbsp;last&nbsp;fragment</span><br>
<span class="lineno"></span><span class="comment" id="1362199">//&nbsp;of&nbsp;the&nbsp;line.&nbsp;The&nbsp;returned&nbsp;buffer&nbsp;is&nbsp;only&nbsp;valid&nbsp;until&nbsp;the&nbsp;next&nbsp;call&nbsp;to</span><br>
<span class="lineno">315</span><span class="comment" id="1362272">//&nbsp;ReadLine.&nbsp;ReadLine&nbsp;either&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;line&nbsp;or&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="1362348">//&nbsp;never&nbsp;both.</span><br>
<span class="lineno"></span><span class="comment" id="1362363">//</span><br>
<span class="lineno"></span><span class="comment" id="1362366">//&nbsp;The&nbsp;text&nbsp;returned&nbsp;from&nbsp;ReadLine&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;line&nbsp;end&nbsp;(&#34;\r\n&#34;&nbsp;or&nbsp;&#34;\n&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="1362449">//&nbsp;No&nbsp;indication&nbsp;or&nbsp;error&nbsp;is&nbsp;given&nbsp;if&nbsp;the&nbsp;input&nbsp;ends&nbsp;without&nbsp;a&nbsp;final&nbsp;line&nbsp;end.</span><br>
<span class="lineno">320</span><span class="comment" id="1362528">//&nbsp;Calling&nbsp;UnreadByte&nbsp;after&nbsp;ReadLine&nbsp;will&nbsp;always&nbsp;unread&nbsp;the&nbsp;last&nbsp;byte&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="1362603">//&nbsp;(possibly&nbsp;a&nbsp;character&nbsp;belonging&nbsp;to&nbsp;the&nbsp;line&nbsp;end)&nbsp;even&nbsp;if&nbsp;that&nbsp;byte&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1362680">//&nbsp;part&nbsp;of&nbsp;the&nbsp;line&nbsp;returned&nbsp;by&nbsp;ReadLine.</span><br>
<span class="lineno"></span><span class="keyword" id="1362722">func</span>&nbsp;<span class="op" id="1362727">(</span><span class="ident" id="1362728">b</span>&nbsp;<span class="op" id="1362730">*</span><span class="ident" id="1362731"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1362737">)</span>&nbsp;<span class="ident" id="1362739">ReadLine</span><span class="op" id="1362747">(</span><span class="op" id="1362748">)</span>&nbsp;<span class="op" id="1362750">(</span><span class="ident" id="1362751">line</span>&nbsp;<span class="op" id="1362756">[</span><span class="op" id="1362757">]</span><span class="builtintype" id="1362758">byte</span><span class="op" id="1362762">,</span>&nbsp;<span class="ident" id="1362764">isPrefix</span>&nbsp;<span class="builtintype" id="1362773">bool</span><span class="op" id="1362777">,</span>&nbsp;<span class="ident" id="1362779">err</span>&nbsp;<span class="builtintype" id="1362783">error</span><span class="op" id="1362788">)</span>&nbsp;<span class="op" id="1362790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1362793"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1362797">,</span>&nbsp;<span class="ident" id="1362799"><a href="/gostd/bufio/bufio.go.html#1362779">err</a></span>&nbsp;<span class="op" id="1362803">=</span>&nbsp;<span class="ident" id="1362805"><a href="/gostd/bufio/bufio.go.html#1362728">b</a></span><span class="op" id="1362806">.</span><span class="ident" id="1362807"><a href="/gostd/bufio/bufio.go.html#1361158">ReadSlice</a></span><span class="op" id="1362816">(</span><span class="string" id="1362817">&#39;\n&#39;</span><span class="op" id="1362821">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1362824">if</span>&nbsp;<span class="ident" id="1362827"><a href="/gostd/bufio/bufio.go.html#1362779">err</a></span>&nbsp;<span class="op" id="1362831">==</span>&nbsp;<span class="ident" id="1362834"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span>&nbsp;<span class="op" id="1362848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1362852">//&nbsp;Handle&nbsp;the&nbsp;case&nbsp;where&nbsp;&#34;\r\n&#34;&nbsp;straddles&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1362908">if</span>&nbsp;<span class="builtinfunc" id="1362911">len</span><span class="op" id="1362914">(</span><span class="ident" id="1362915"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1362919">)</span>&nbsp;<span class="op" id="1362921">&gt;</span>&nbsp;<span class="num" id="1362923">0</span>&nbsp;<span class="op" id="1362925">&amp;&amp;</span>&nbsp;<span class="ident" id="1362928"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1362932">[</span><span class="builtinfunc" id="1362933">len</span><span class="op" id="1362936">(</span><span class="ident" id="1362937"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1362941">)</span><span class="op" id="1362942">-</span><span class="num" id="1362943">1</span><span class="op" id="1362944">]</span>&nbsp;<span class="op" id="1362946">==</span>&nbsp;<span class="string" id="1362949">&#39;\r&#39;</span>&nbsp;<span class="op" id="1362954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1362959">//&nbsp;Put&nbsp;the&nbsp;&#39;\r&#39;&nbsp;back&nbsp;on&nbsp;buf&nbsp;and&nbsp;drop&nbsp;it&nbsp;from&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1363013">//&nbsp;Let&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;ReadLine&nbsp;check&nbsp;for&nbsp;&#34;\r\n&#34;.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363067">if</span>&nbsp;<span class="ident" id="1363070"><a href="/gostd/bufio/bufio.go.html#1362728">b</a></span><span class="op" id="1363071">.</span><span class="ident" id="1363072"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1363074">==</span>&nbsp;<span class="num" id="1363077">0</span>&nbsp;<span class="op" id="1363079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1363085">//&nbsp;should&nbsp;be&nbsp;unreachable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1363114">panic</span><span class="op" id="1363119">(</span><span class="string" id="1363120">&#34;bufio:&nbsp;tried&nbsp;to&nbsp;rewind&nbsp;past&nbsp;start&nbsp;of&nbsp;buffer&#34;</span><span class="op" id="1363165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363175"><a href="/gostd/bufio/bufio.go.html#1362728">b</a></span><span class="op" id="1363176">.</span><span class="ident" id="1363177"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1363178">--</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363184"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span>&nbsp;<span class="op" id="1363189">=</span>&nbsp;<span class="ident" id="1363191"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363195">[</span><span class="op" id="1363196">:</span><span class="builtinfunc" id="1363197">len</span><span class="op" id="1363200">(</span><span class="ident" id="1363201"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363205">)</span><span class="op" id="1363206">-</span><span class="num" id="1363207">1</span><span class="op" id="1363208">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363216">return</span>&nbsp;<span class="ident" id="1363223"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363227">,</span>&nbsp;<span class="builtintype" id="1363229">true</span><span class="op" id="1363233">,</span>&nbsp;<span class="builtintype" id="1363235">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363244">if</span>&nbsp;<span class="builtinfunc" id="1363247">len</span><span class="op" id="1363250">(</span><span class="ident" id="1363251"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363255">)</span>&nbsp;<span class="op" id="1363257">==</span>&nbsp;<span class="num" id="1363260">0</span>&nbsp;<span class="op" id="1363262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363266">if</span>&nbsp;<span class="ident" id="1363269"><a href="/gostd/bufio/bufio.go.html#1362779">err</a></span>&nbsp;<span class="op" id="1363273">!=</span>&nbsp;<span class="builtintype" id="1363276">nil</span>&nbsp;<span class="op" id="1363280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363285"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span>&nbsp;<span class="op" id="1363290">=</span>&nbsp;<span class="builtintype" id="1363292">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363302">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363313"><a href="/gostd/bufio/bufio.go.html#1362779">err</a></span>&nbsp;<span class="op" id="1363317">=</span>&nbsp;<span class="builtintype" id="1363319">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363325">if</span>&nbsp;<span class="ident" id="1363328"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363332">[</span><span class="builtinfunc" id="1363333">len</span><span class="op" id="1363336">(</span><span class="ident" id="1363337"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363341">)</span><span class="op" id="1363342">-</span><span class="num" id="1363343">1</span><span class="op" id="1363344">]</span>&nbsp;<span class="op" id="1363346">==</span>&nbsp;<span class="string" id="1363349">&#39;\n&#39;</span>&nbsp;<span class="op" id="1363354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363358">drop</span>&nbsp;<span class="op" id="1363363">:=</span>&nbsp;<span class="num" id="1363366">1</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363370">if</span>&nbsp;<span class="builtinfunc" id="1363373">len</span><span class="op" id="1363376">(</span><span class="ident" id="1363377"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363381">)</span>&nbsp;<span class="op" id="1363383">&gt;</span>&nbsp;<span class="num" id="1363385">1</span>&nbsp;<span class="op" id="1363387">&amp;&amp;</span>&nbsp;<span class="ident" id="1363390"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363394">[</span><span class="builtinfunc" id="1363395">len</span><span class="op" id="1363398">(</span><span class="ident" id="1363399"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363403">)</span><span class="op" id="1363404">-</span><span class="num" id="1363405">2</span><span class="op" id="1363406">]</span>&nbsp;<span class="op" id="1363408">==</span>&nbsp;<span class="string" id="1363411">&#39;\r&#39;</span>&nbsp;<span class="op" id="1363416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363421"><a href="/gostd/bufio/bufio.go.html#1363358">drop</a></span>&nbsp;<span class="op" id="1363426">=</span>&nbsp;<span class="num" id="1363428">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1363436"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span>&nbsp;<span class="op" id="1363441">=</span>&nbsp;<span class="ident" id="1363443"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363447">[</span><span class="op" id="1363448">:</span><span class="builtinfunc" id="1363449">len</span><span class="op" id="1363452">(</span><span class="ident" id="1363453"><a href="/gostd/bufio/bufio.go.html#1362751">line</a></span><span class="op" id="1363457">)</span><span class="op" id="1363458">-</span><span class="ident" id="1363459"><a href="/gostd/bufio/bufio.go.html#1363358">drop</a></span><span class="op" id="1363463">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1363466">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1363469">return</span><br>
<span class="lineno"></span><span class="op" id="1363476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1363479">//&nbsp;ReadBytes&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="1363548">//&nbsp;returning&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno">360</span><span class="comment" id="1363624">//&nbsp;If&nbsp;ReadBytes&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="1363688">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno"></span><span class="comment" id="1363770">//&nbsp;ReadBytes&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1363851">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="1363861">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno">365</span><span class="keyword" id="1363915">func</span>&nbsp;<span class="op" id="1363920">(</span><span class="ident" id="1363921">b</span>&nbsp;<span class="op" id="1363923">*</span><span class="ident" id="1363924"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1363930">)</span>&nbsp;<span class="ident" id="1363932">ReadBytes</span><span class="op" id="1363941">(</span><span class="ident" id="1363942">delim</span>&nbsp;<span class="builtintype" id="1363948">byte</span><span class="op" id="1363952">)</span>&nbsp;<span class="op" id="1363954">(</span><span class="ident" id="1363955">line</span>&nbsp;<span class="op" id="1363960">[</span><span class="op" id="1363961">]</span><span class="builtintype" id="1363962">byte</span><span class="op" id="1363966">,</span>&nbsp;<span class="ident" id="1363968">err</span>&nbsp;<span class="builtintype" id="1363972">error</span><span class="op" id="1363977">)</span>&nbsp;<span class="op" id="1363979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1363982">//&nbsp;Use&nbsp;ReadSlice&nbsp;to&nbsp;look&nbsp;for&nbsp;array,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1364019">//&nbsp;accumulating&nbsp;full&nbsp;buffers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364050">var</span>&nbsp;<span class="ident" id="1364054">frag</span>&nbsp;<span class="op" id="1364059">[</span><span class="op" id="1364060">]</span><span class="builtintype" id="1364061">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364067">var</span>&nbsp;<span class="ident" id="1364071">full</span>&nbsp;<span class="op" id="1364076">[</span><span class="op" id="1364077">]</span><span class="op" id="1364078">[</span><span class="op" id="1364079">]</span><span class="builtintype" id="1364080">byte</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364086"><a href="/gostd/bufio/bufio.go.html#1363968">err</a></span>&nbsp;<span class="op" id="1364090">=</span>&nbsp;<span class="builtintype" id="1364092">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364098">for</span>&nbsp;<span class="op" id="1364102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364106">var</span>&nbsp;<span class="ident" id="1364110">e</span>&nbsp;<span class="builtintype" id="1364112">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364120"><a href="/gostd/bufio/bufio.go.html#1364054">frag</a></span><span class="op" id="1364124">,</span>&nbsp;<span class="ident" id="1364126"><a href="/gostd/bufio/bufio.go.html#1364110">e</a></span>&nbsp;<span class="op" id="1364128">=</span>&nbsp;<span class="ident" id="1364130"><a href="/gostd/bufio/bufio.go.html#1363921">b</a></span><span class="op" id="1364131">.</span><span class="ident" id="1364132"><a href="/gostd/bufio/bufio.go.html#1361158">ReadSlice</a></span><span class="op" id="1364141">(</span><span class="ident" id="1364142"><a href="/gostd/bufio/bufio.go.html#1363942">delim</a></span><span class="op" id="1364147">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364151">if</span>&nbsp;<span class="ident" id="1364154"><a href="/gostd/bufio/bufio.go.html#1364110">e</a></span>&nbsp;<span class="op" id="1364156">==</span>&nbsp;<span class="builtintype" id="1364159">nil</span>&nbsp;<span class="op" id="1364163">{</span>&nbsp;<span class="comment" id="1364165">//&nbsp;got&nbsp;final&nbsp;fragment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364190">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364202">if</span>&nbsp;<span class="ident" id="1364205"><a href="/gostd/bufio/bufio.go.html#1364110">e</a></span>&nbsp;<span class="op" id="1364207">!=</span>&nbsp;<span class="ident" id="1364210"><a href="/gostd/bufio/bufio.go.html#1354774">ErrBufferFull</a></span>&nbsp;<span class="op" id="1364224">{</span>&nbsp;<span class="comment" id="1364226">//&nbsp;unexpected&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364249"><a href="/gostd/bufio/bufio.go.html#1363968">err</a></span>&nbsp;<span class="op" id="1364253">=</span>&nbsp;<span class="ident" id="1364255"><a href="/gostd/bufio/bufio.go.html#1364110">e</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364260">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1364273">//&nbsp;Make&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364305">buf</span>&nbsp;<span class="op" id="1364309">:=</span>&nbsp;<span class="builtinfunc" id="1364312">make</span><span class="op" id="1364316">(</span><span class="op" id="1364317">[</span><span class="op" id="1364318">]</span><span class="builtintype" id="1364319">byte</span><span class="op" id="1364323">,</span>&nbsp;<span class="builtinfunc" id="1364325">len</span><span class="op" id="1364328">(</span><span class="ident" id="1364329"><a href="/gostd/bufio/bufio.go.html#1364054">frag</a></span><span class="op" id="1364333">)</span><span class="op" id="1364334">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1364338">copy</span><span class="op" id="1364342">(</span><span class="ident" id="1364343"><a href="/gostd/bufio/bufio.go.html#1364305">buf</a></span><span class="op" id="1364346">,</span>&nbsp;<span class="ident" id="1364348"><a href="/gostd/bufio/bufio.go.html#1364054">frag</a></span><span class="op" id="1364352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364356"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span>&nbsp;<span class="op" id="1364361">=</span>&nbsp;<span class="builtinfunc" id="1364363">append</span><span class="op" id="1364369">(</span><span class="ident" id="1364370"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span><span class="op" id="1364374">,</span>&nbsp;<span class="ident" id="1364376"><a href="/gostd/bufio/bufio.go.html#1364305">buf</a></span><span class="op" id="1364379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1364386">//&nbsp;Allocate&nbsp;new&nbsp;buffer&nbsp;to&nbsp;hold&nbsp;the&nbsp;full&nbsp;pieces&nbsp;and&nbsp;the&nbsp;fragment.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364452">n</span>&nbsp;<span class="op" id="1364454">:=</span>&nbsp;<span class="num" id="1364457">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364460">for</span>&nbsp;<span class="ident" id="1364464">i</span>&nbsp;<span class="op" id="1364466">:=</span>&nbsp;<span class="keyword" id="1364469">range</span>&nbsp;<span class="ident" id="1364475"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span>&nbsp;<span class="op" id="1364480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364484"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span>&nbsp;<span class="op" id="1364486">+=</span>&nbsp;<span class="builtinfunc" id="1364489">len</span><span class="op" id="1364492">(</span><span class="ident" id="1364493"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span><span class="op" id="1364497">[</span><span class="ident" id="1364498"><a href="/gostd/bufio/bufio.go.html#1364464">i</a></span><span class="op" id="1364499">]</span><span class="op" id="1364500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364506"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span>&nbsp;<span class="op" id="1364508">+=</span>&nbsp;<span class="builtinfunc" id="1364511">len</span><span class="op" id="1364514">(</span><span class="ident" id="1364515"><a href="/gostd/bufio/bufio.go.html#1364054">frag</a></span><span class="op" id="1364519">)</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1364523">//&nbsp;Copy&nbsp;full&nbsp;pieces&nbsp;and&nbsp;fragment&nbsp;in.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364561">buf</span>&nbsp;<span class="op" id="1364565">:=</span>&nbsp;<span class="builtinfunc" id="1364568">make</span><span class="op" id="1364572">(</span><span class="op" id="1364573">[</span><span class="op" id="1364574">]</span><span class="builtintype" id="1364575">byte</span><span class="op" id="1364579">,</span>&nbsp;<span class="ident" id="1364581"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span><span class="op" id="1364582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364585"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span>&nbsp;<span class="op" id="1364587">=</span>&nbsp;<span class="num" id="1364589">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364592">for</span>&nbsp;<span class="ident" id="1364596">i</span>&nbsp;<span class="op" id="1364598">:=</span>&nbsp;<span class="keyword" id="1364601">range</span>&nbsp;<span class="ident" id="1364607"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span>&nbsp;<span class="op" id="1364612">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1364616"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span>&nbsp;<span class="op" id="1364618">+=</span>&nbsp;<span class="builtinfunc" id="1364621">copy</span><span class="op" id="1364625">(</span><span class="ident" id="1364626"><a href="/gostd/bufio/bufio.go.html#1364561">buf</a></span><span class="op" id="1364629">[</span><span class="ident" id="1364630"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span><span class="op" id="1364631">:</span><span class="op" id="1364632">]</span><span class="op" id="1364633">,</span>&nbsp;<span class="ident" id="1364635"><a href="/gostd/bufio/bufio.go.html#1364071">full</a></span><span class="op" id="1364639">[</span><span class="ident" id="1364640"><a href="/gostd/bufio/bufio.go.html#1364596">i</a></span><span class="op" id="1364641">]</span><span class="op" id="1364642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1364645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1364648">copy</span><span class="op" id="1364652">(</span><span class="ident" id="1364653"><a href="/gostd/bufio/bufio.go.html#1364561">buf</a></span><span class="op" id="1364656">[</span><span class="ident" id="1364657"><a href="/gostd/bufio/bufio.go.html#1364452">n</a></span><span class="op" id="1364658">:</span><span class="op" id="1364659">]</span><span class="op" id="1364660">,</span>&nbsp;<span class="ident" id="1364662"><a href="/gostd/bufio/bufio.go.html#1364054">frag</a></span><span class="op" id="1364666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1364669">return</span>&nbsp;<span class="ident" id="1364676"><a href="/gostd/bufio/bufio.go.html#1364561">buf</a></span><span class="op" id="1364679">,</span>&nbsp;<span class="ident" id="1364681"><a href="/gostd/bufio/bufio.go.html#1363968">err</a></span><br>
<span class="lineno"></span><span class="op" id="1364685">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="1364688">//&nbsp;ReadString&nbsp;reads&nbsp;until&nbsp;the&nbsp;first&nbsp;occurrence&nbsp;of&nbsp;delim&nbsp;in&nbsp;the&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="1364758">//&nbsp;returning&nbsp;a&nbsp;string&nbsp;containing&nbsp;the&nbsp;data&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;delimiter.</span><br>
<span class="lineno"></span><span class="comment" id="1364835">//&nbsp;If&nbsp;ReadString&nbsp;encounters&nbsp;an&nbsp;error&nbsp;before&nbsp;finding&nbsp;a&nbsp;delimiter,</span><br>
<span class="lineno"></span><span class="comment" id="1364900">//&nbsp;it&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;before&nbsp;the&nbsp;error&nbsp;and&nbsp;the&nbsp;error&nbsp;itself&nbsp;(often&nbsp;io.EOF).</span><br>
<span class="lineno">410</span><span class="comment" id="1364982">//&nbsp;ReadString&nbsp;returns&nbsp;err&nbsp;!=&nbsp;nil&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;the&nbsp;returned&nbsp;data&nbsp;does&nbsp;not&nbsp;end&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="1365064">//&nbsp;delim.</span><br>
<span class="lineno"></span><span class="comment" id="1365074">//&nbsp;For&nbsp;simple&nbsp;uses,&nbsp;a&nbsp;Scanner&nbsp;may&nbsp;be&nbsp;more&nbsp;convenient.</span><br>
<span class="lineno"></span><span class="keyword" id="1365128">func</span>&nbsp;<span class="op" id="1365133">(</span><span class="ident" id="1365134">b</span>&nbsp;<span class="op" id="1365136">*</span><span class="ident" id="1365137"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1365143">)</span>&nbsp;<span class="ident" id="1365145">ReadString</span><span class="op" id="1365155">(</span><span class="ident" id="1365156">delim</span>&nbsp;<span class="builtintype" id="1365162">byte</span><span class="op" id="1365166">)</span>&nbsp;<span class="op" id="1365168">(</span><span class="ident" id="1365169">line</span>&nbsp;<span class="builtintype" id="1365174">string</span><span class="op" id="1365180">,</span>&nbsp;<span class="ident" id="1365182">err</span>&nbsp;<span class="builtintype" id="1365186">error</span><span class="op" id="1365191">)</span>&nbsp;<span class="op" id="1365193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365196">bytes</span><span class="op" id="1365201">,</span>&nbsp;<span class="ident" id="1365203"><a href="/gostd/bufio/bufio.go.html#1365182">err</a></span>&nbsp;<span class="op" id="1365207">:=</span>&nbsp;<span class="ident" id="1365210"><a href="/gostd/bufio/bufio.go.html#1365134">b</a></span><span class="op" id="1365211">.</span><span class="ident" id="1365212"><a href="/gostd/bufio/bufio.go.html#1363932">ReadBytes</a></span><span class="op" id="1365221">(</span><span class="ident" id="1365222"><a href="/gostd/bufio/bufio.go.html#1365156">delim</a></span><span class="op" id="1365227">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365230"><a href="/gostd/bufio/bufio.go.html#1365169">line</a></span>&nbsp;<span class="op" id="1365235">=</span>&nbsp;<span class="builtintype" id="1365237">string</span><span class="op" id="1365243">(</span><span class="ident" id="1365244"><a href="/gostd/bufio/bufio.go.html#1365196">bytes</a></span><span class="op" id="1365249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365252">return</span>&nbsp;<span class="ident" id="1365259"><a href="/gostd/bufio/bufio.go.html#1365169">line</a></span><span class="op" id="1365263">,</span>&nbsp;<span class="ident" id="1365265"><a href="/gostd/bufio/bufio.go.html#1365182">err</a></span><br>
<span class="lineno"></span><span class="op" id="1365269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1365272">//&nbsp;WriteTo&nbsp;implements&nbsp;io.WriterTo.</span><br>
<span class="lineno">420</span><span class="keyword" id="1365307">func</span>&nbsp;<span class="op" id="1365312">(</span><span class="ident" id="1365313">b</span>&nbsp;<span class="op" id="1365315">*</span><span class="ident" id="1365316"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1365322">)</span>&nbsp;<span class="ident" id="1365324">WriteTo</span><span class="op" id="1365331">(</span><span class="ident" id="1365332">w</span>&nbsp;<span class="ident" id="1365334"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1365336">.</span><span class="ident" id="1365337"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1365343">)</span>&nbsp;<span class="op" id="1365345">(</span><span class="ident" id="1365346">n</span>&nbsp;<span class="builtintype" id="1365348">int64</span><span class="op" id="1365353">,</span>&nbsp;<span class="ident" id="1365355">err</span>&nbsp;<span class="builtintype" id="1365359">error</span><span class="op" id="1365364">)</span>&nbsp;<span class="op" id="1365366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365369"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span><span class="op" id="1365370">,</span>&nbsp;<span class="ident" id="1365372"><a href="/gostd/bufio/bufio.go.html#1365355">err</a></span>&nbsp;<span class="op" id="1365376">=</span>&nbsp;<span class="ident" id="1365378"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365379">.</span><span class="ident" id="1365380"><a href="/gostd/bufio/bufio.go.html#1366057">writeBuf</a></span><span class="op" id="1365388">(</span><span class="ident" id="1365389"><a href="/gostd/bufio/bufio.go.html#1365332">w</a></span><span class="op" id="1365390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365393">if</span>&nbsp;<span class="ident" id="1365396"><a href="/gostd/bufio/bufio.go.html#1365355">err</a></span>&nbsp;<span class="op" id="1365400">!=</span>&nbsp;<span class="builtintype" id="1365403">nil</span>&nbsp;<span class="op" id="1365407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365411">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365419">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365423">if</span>&nbsp;<span class="ident" id="1365426">r</span><span class="op" id="1365427">,</span>&nbsp;<span class="ident" id="1365429">ok</span>&nbsp;<span class="op" id="1365432">:=</span>&nbsp;<span class="ident" id="1365435"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365436">.</span><span class="ident" id="1365437"><a href="/gostd/bufio/bufio.go.html#1355012">rd</a></span><span class="op" id="1365439">.</span><span class="op" id="1365440">(</span><span class="ident" id="1365441"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1365443">.</span><span class="ident" id="1365444"><a href="/gostd/io/io.go.html#1424818">WriterTo</a></span><span class="op" id="1365452">)</span><span class="op" id="1365453">;</span>&nbsp;<span class="ident" id="1365455"><a href="/gostd/bufio/bufio.go.html#1365429">ok</a></span>&nbsp;<span class="op" id="1365458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365462">m</span><span class="op" id="1365463">,</span>&nbsp;<span class="ident" id="1365465">err</span>&nbsp;<span class="op" id="1365469">:=</span>&nbsp;<span class="ident" id="1365472"><a href="/gostd/bufio/bufio.go.html#1365426">r</a></span><span class="op" id="1365473">.</span><span class="ident" id="1365474"><a href="/gostd/io/io.go.html#1424840">WriteTo</a></span><span class="op" id="1365481">(</span><span class="ident" id="1365482"><a href="/gostd/bufio/bufio.go.html#1365332">w</a></span><span class="op" id="1365483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365487"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span>&nbsp;<span class="op" id="1365489">+=</span>&nbsp;<span class="ident" id="1365492"><a href="/gostd/bufio/bufio.go.html#1365462">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365496">return</span>&nbsp;<span class="ident" id="1365503"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span><span class="op" id="1365504">,</span>&nbsp;<span class="ident" id="1365506"><a href="/gostd/bufio/bufio.go.html#1365465">err</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365515">if</span>&nbsp;<span class="ident" id="1365518">w</span><span class="op" id="1365519">,</span>&nbsp;<span class="ident" id="1365521">ok</span>&nbsp;<span class="op" id="1365524">:=</span>&nbsp;<span class="ident" id="1365527"><a href="/gostd/bufio/bufio.go.html#1365332">w</a></span><span class="op" id="1365528">.</span><span class="op" id="1365529">(</span><span class="ident" id="1365530"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1365532">.</span><span class="ident" id="1365533"><a href="/gostd/io/io.go.html#1424428">ReaderFrom</a></span><span class="op" id="1365543">)</span><span class="op" id="1365544">;</span>&nbsp;<span class="ident" id="1365546"><a href="/gostd/bufio/bufio.go.html#1365521">ok</a></span>&nbsp;<span class="op" id="1365549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365553">m</span><span class="op" id="1365554">,</span>&nbsp;<span class="ident" id="1365556">err</span>&nbsp;<span class="op" id="1365560">:=</span>&nbsp;<span class="ident" id="1365563"><a href="/gostd/bufio/bufio.go.html#1365518">w</a></span><span class="op" id="1365564">.</span><span class="ident" id="1365565"><a href="/gostd/io/io.go.html#1424452">ReadFrom</a></span><span class="op" id="1365573">(</span><span class="ident" id="1365574"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365575">.</span><span class="ident" id="1365576"><a href="/gostd/bufio/bufio.go.html#1355012">rd</a></span><span class="op" id="1365578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365582"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span>&nbsp;<span class="op" id="1365584">+=</span>&nbsp;<span class="ident" id="1365587"><a href="/gostd/bufio/bufio.go.html#1365553">m</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365591">return</span>&nbsp;<span class="ident" id="1365598"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span><span class="op" id="1365599">,</span>&nbsp;<span class="ident" id="1365601"><a href="/gostd/bufio/bufio.go.html#1365556">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365610">if</span>&nbsp;<span class="ident" id="1365613"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365614">.</span><span class="ident" id="1365615"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1365616">-</span><span class="ident" id="1365617"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365618">.</span><span class="ident" id="1365619"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1365621">&lt;</span>&nbsp;<span class="builtinfunc" id="1365623">len</span><span class="op" id="1365626">(</span><span class="ident" id="1365627"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365628">.</span><span class="ident" id="1365629"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1365632">)</span>&nbsp;<span class="op" id="1365634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365638"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365639">.</span><span class="ident" id="1365640"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1365644">(</span><span class="op" id="1365645">)</span>&nbsp;<span class="comment" id="1365647">//&nbsp;buffer&nbsp;not&nbsp;full</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365671">for</span>&nbsp;<span class="ident" id="1365675"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365676">.</span><span class="ident" id="1365677"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1365679">&lt;</span>&nbsp;<span class="ident" id="1365681"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365682">.</span><span class="ident" id="1365683"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span>&nbsp;<span class="op" id="1365685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1365689">//&nbsp;b.r&nbsp;&lt;&nbsp;b.w&nbsp;=&gt;&nbsp;buffer&nbsp;is&nbsp;not&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365727">m</span><span class="op" id="1365728">,</span>&nbsp;<span class="ident" id="1365730">err</span>&nbsp;<span class="op" id="1365734">:=</span>&nbsp;<span class="ident" id="1365737"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365738">.</span><span class="ident" id="1365739"><a href="/gostd/bufio/bufio.go.html#1366057">writeBuf</a></span><span class="op" id="1365747">(</span><span class="ident" id="1365748"><a href="/gostd/bufio/bufio.go.html#1365332">w</a></span><span class="op" id="1365749">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365753"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span>&nbsp;<span class="op" id="1365755">+=</span>&nbsp;<span class="ident" id="1365758"><a href="/gostd/bufio/bufio.go.html#1365727">m</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365762">if</span>&nbsp;<span class="ident" id="1365765"><a href="/gostd/bufio/bufio.go.html#1365730">err</a></span>&nbsp;<span class="op" id="1365769">!=</span>&nbsp;<span class="builtintype" id="1365772">nil</span>&nbsp;<span class="op" id="1365776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365781">return</span>&nbsp;<span class="ident" id="1365788"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span><span class="op" id="1365789">,</span>&nbsp;<span class="ident" id="1365791"><a href="/gostd/bufio/bufio.go.html#1365730">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365801"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365802">.</span><span class="ident" id="1365803"><a href="/gostd/bufio/bufio.go.html#1356333">fill</a></span><span class="op" id="1365807">(</span><span class="op" id="1365808">)</span>&nbsp;<span class="comment" id="1365810">//&nbsp;buffer&nbsp;is&nbsp;empty</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365834">if</span>&nbsp;<span class="ident" id="1365837"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365838">.</span><span class="ident" id="1365839"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1365843">==</span>&nbsp;<span class="ident" id="1365846"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1365848">.</span><span class="ident" id="1365849"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="1365853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1365857"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365858">.</span><span class="ident" id="1365859"><a href="/gostd/bufio/bufio.go.html#1355125">err</a></span>&nbsp;<span class="op" id="1365863">=</span>&nbsp;<span class="builtintype" id="1365865">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1365870">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1365874">return</span>&nbsp;<span class="ident" id="1365881"><a href="/gostd/bufio/bufio.go.html#1365346">n</a></span><span class="op" id="1365882">,</span>&nbsp;<span class="ident" id="1365884"><a href="/gostd/bufio/bufio.go.html#1365313">b</a></span><span class="op" id="1365885">.</span><span class="ident" id="1365886"><a href="/gostd/bufio/bufio.go.html#1356834">readErr</a></span><span class="op" id="1365893">(</span><span class="op" id="1365894">)</span><br>
<span class="lineno"></span><span class="op" id="1365896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1365899">var</span>&nbsp;<span class="ident" id="1365903">errNegativeWrite</span>&nbsp;<span class="op" id="1365920">=</span>&nbsp;<span class="ident" id="1365922"><a href="/gostd/bufio/bufio.go.html#1354557">errors</a></span><span class="op" id="1365928">.</span><span class="ident" id="1365929"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1365932">(</span><span class="string" id="1365933">&#34;bufio:&nbsp;writer&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Write&#34;</span><span class="op" id="1365983">)</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="1365986">//&nbsp;writeBuf&nbsp;writes&nbsp;the&nbsp;Reader&#39;s&nbsp;buffer&nbsp;to&nbsp;the&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="1366040">func</span>&nbsp;<span class="op" id="1366045">(</span><span class="ident" id="1366046">b</span>&nbsp;<span class="op" id="1366048">*</span><span class="ident" id="1366049"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1366055">)</span>&nbsp;<span class="ident" id="1366057">writeBuf</span><span class="op" id="1366065">(</span><span class="ident" id="1366066">w</span>&nbsp;<span class="ident" id="1366068"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1366070">.</span><span class="ident" id="1366071"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1366077">)</span>&nbsp;<span class="op" id="1366079">(</span><span class="builtintype" id="1366080">int64</span><span class="op" id="1366085">,</span>&nbsp;<span class="builtintype" id="1366087">error</span><span class="op" id="1366092">)</span>&nbsp;<span class="op" id="1366094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366097">n</span><span class="op" id="1366098">,</span>&nbsp;<span class="ident" id="1366100">err</span>&nbsp;<span class="op" id="1366104">:=</span>&nbsp;<span class="ident" id="1366107"><a href="/gostd/bufio/bufio.go.html#1366066">w</a></span><span class="op" id="1366108">.</span><span class="ident" id="1366109"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="1366114">(</span><span class="ident" id="1366115"><a href="/gostd/bufio/bufio.go.html#1366046">b</a></span><span class="op" id="1366116">.</span><span class="ident" id="1366117"><a href="/gostd/bufio/bufio.go.html#1354991">buf</a></span><span class="op" id="1366120">[</span><span class="ident" id="1366121"><a href="/gostd/bufio/bufio.go.html#1366046">b</a></span><span class="op" id="1366122">.</span><span class="ident" id="1366123"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span><span class="op" id="1366124">:</span><span class="ident" id="1366125"><a href="/gostd/bufio/bufio.go.html#1366046">b</a></span><span class="op" id="1366126">.</span><span class="ident" id="1366127"><a href="/gostd/bufio/bufio.go.html#1355072">w</a></span><span class="op" id="1366128">]</span><span class="op" id="1366129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366132">if</span>&nbsp;<span class="ident" id="1366135"><a href="/gostd/bufio/bufio.go.html#1366097">n</a></span>&nbsp;<span class="op" id="1366137">&lt;</span>&nbsp;<span class="num" id="1366139">0</span>&nbsp;<span class="op" id="1366141">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1366145">panic</span><span class="op" id="1366150">(</span><span class="ident" id="1366151"><a href="/gostd/bufio/bufio.go.html#1365903">errNegativeWrite</a></span><span class="op" id="1366167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366173"><a href="/gostd/bufio/bufio.go.html#1366046">b</a></span><span class="op" id="1366174">.</span><span class="ident" id="1366175"><a href="/gostd/bufio/bufio.go.html#1355069">r</a></span>&nbsp;<span class="op" id="1366177">+=</span>&nbsp;<span class="ident" id="1366180"><a href="/gostd/bufio/bufio.go.html#1366097">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366183">return</span>&nbsp;<span class="builtintype" id="1366190">int64</span><span class="op" id="1366195">(</span><span class="ident" id="1366196"><a href="/gostd/bufio/bufio.go.html#1366097">n</a></span><span class="op" id="1366197">)</span><span class="op" id="1366198">,</span>&nbsp;<span class="ident" id="1366200"><a href="/gostd/bufio/bufio.go.html#1366100">err</a></span><br>
<span class="lineno"></span><span class="op" id="1366204">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="1366207">//&nbsp;buffered&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1366227">//&nbsp;Writer&nbsp;implements&nbsp;buffering&nbsp;for&nbsp;an&nbsp;io.Writer&nbsp;object.</span><br>
<span class="lineno"></span><span class="comment" id="1366283">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;writing&nbsp;to&nbsp;a&nbsp;Writer,&nbsp;no&nbsp;more&nbsp;data&nbsp;will&nbsp;be</span><br>
<span class="lineno">475</span><span class="comment" id="1366347">//&nbsp;accepted&nbsp;and&nbsp;all&nbsp;subsequent&nbsp;writes&nbsp;will&nbsp;return&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1366408">//&nbsp;After&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;written,&nbsp;the&nbsp;client&nbsp;should&nbsp;call&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1366471">//&nbsp;Flush&nbsp;method&nbsp;to&nbsp;guarantee&nbsp;all&nbsp;data&nbsp;has&nbsp;been&nbsp;forwarded&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1366531">//&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="1366560">type</span>&nbsp;<span class="ident" id="1366565">Writer</span>&nbsp;<span class="keyword" id="1366572">struct</span>&nbsp;<span class="op" id="1366579">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366582">err</span>&nbsp;<span class="builtintype" id="1366586">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366593">buf</span>&nbsp;<span class="op" id="1366597">[</span><span class="op" id="1366598">]</span><span class="builtintype" id="1366599">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366605">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1366609">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366614">wr</span>&nbsp;&nbsp;<span class="ident" id="1366618"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1366620">.</span><span class="ident" id="1366621"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="1366628">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="comment" id="1366631">//&nbsp;NewWriterSize&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;at&nbsp;least&nbsp;the&nbsp;specified</span><br>
<span class="lineno"></span><span class="comment" id="1366709">//&nbsp;size.&nbsp;If&nbsp;the&nbsp;argument&nbsp;io.Writer&nbsp;is&nbsp;already&nbsp;a&nbsp;Writer&nbsp;with&nbsp;large&nbsp;enough</span><br>
<span class="lineno"></span><span class="comment" id="1366782">//&nbsp;size,&nbsp;it&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="1366825">func</span>&nbsp;<span class="ident" id="1366830">NewWriterSize</span><span class="op" id="1366843">(</span><span class="ident" id="1366844">w</span>&nbsp;<span class="ident" id="1366846"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1366848">.</span><span class="ident" id="1366849"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1366855">,</span>&nbsp;<span class="ident" id="1366857">size</span>&nbsp;<span class="builtintype" id="1366862">int</span><span class="op" id="1366865">)</span>&nbsp;<span class="op" id="1366867">*</span><span class="ident" id="1366868"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span>&nbsp;<span class="op" id="1366875">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1366878">//&nbsp;Is&nbsp;it&nbsp;already&nbsp;a&nbsp;Writer?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366906">b</span><span class="op" id="1366907">,</span>&nbsp;<span class="ident" id="1366909">ok</span>&nbsp;<span class="op" id="1366912">:=</span>&nbsp;<span class="ident" id="1366915"><a href="/gostd/bufio/bufio.go.html#1366844">w</a></span><span class="op" id="1366916">.</span><span class="op" id="1366917">(</span><span class="op" id="1366918">*</span><span class="ident" id="1366919"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1366925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366928">if</span>&nbsp;<span class="ident" id="1366931"><a href="/gostd/bufio/bufio.go.html#1366909">ok</a></span>&nbsp;<span class="op" id="1366934">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1366937">len</span><span class="op" id="1366940">(</span><span class="ident" id="1366941"><a href="/gostd/bufio/bufio.go.html#1366906">b</a></span><span class="op" id="1366942">.</span><span class="ident" id="1366943"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1366946">)</span>&nbsp;<span class="op" id="1366948">&gt;=</span>&nbsp;<span class="ident" id="1366951"><a href="/gostd/bufio/bufio.go.html#1366857">size</a></span>&nbsp;<span class="op" id="1366956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366960">return</span>&nbsp;<span class="ident" id="1366967"><a href="/gostd/bufio/bufio.go.html#1366906">b</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1366970">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1366973">if</span>&nbsp;<span class="ident" id="1366976"><a href="/gostd/bufio/bufio.go.html#1366857">size</a></span>&nbsp;<span class="op" id="1366981">&lt;=</span>&nbsp;<span class="num" id="1366984">0</span>&nbsp;<span class="op" id="1366986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1366990"><a href="/gostd/bufio/bufio.go.html#1366857">size</a></span>&nbsp;<span class="op" id="1366995">=</span>&nbsp;<span class="ident" id="1366997"><a href="/gostd/bufio/bufio.go.html#1354600">defaultBufSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367016">return</span>&nbsp;<span class="op" id="1367023">&amp;</span><span class="ident" id="1367024"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1367030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367034"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1367037">:</span>&nbsp;<span class="builtinfunc" id="1367039">make</span><span class="op" id="1367043">(</span><span class="op" id="1367044">[</span><span class="op" id="1367045">]</span><span class="builtintype" id="1367046">byte</span><span class="op" id="1367050">,</span>&nbsp;<span class="ident" id="1367052"><a href="/gostd/bufio/bufio.go.html#1366857">size</a></span><span class="op" id="1367056">)</span><span class="op" id="1367057">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367061"><a href="/gostd/bufio/bufio.go.html#1366614">wr</a></span><span class="op" id="1367063">:</span>&nbsp;&nbsp;<span class="ident" id="1367066"><a href="/gostd/bufio/bufio.go.html#1366844">w</a></span><span class="op" id="1367067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367070">}</span><br>
<span class="lineno"></span><span class="op" id="1367072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1367075">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer&nbsp;whose&nbsp;buffer&nbsp;has&nbsp;the&nbsp;default&nbsp;size.</span><br>
<span class="lineno">505</span><span class="keyword" id="1367144">func</span>&nbsp;<span class="ident" id="1367149">NewWriter</span><span class="op" id="1367158">(</span><span class="ident" id="1367159">w</span>&nbsp;<span class="ident" id="1367161"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1367163">.</span><span class="ident" id="1367164"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1367170">)</span>&nbsp;<span class="op" id="1367172">*</span><span class="ident" id="1367173"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span>&nbsp;<span class="op" id="1367180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367183">return</span>&nbsp;<span class="ident" id="1367190"><a href="/gostd/bufio/bufio.go.html#1366830">NewWriterSize</a></span><span class="op" id="1367203">(</span><span class="ident" id="1367204"><a href="/gostd/bufio/bufio.go.html#1367159">w</a></span><span class="op" id="1367205">,</span>&nbsp;<span class="ident" id="1367207"><a href="/gostd/bufio/bufio.go.html#1354600">defaultBufSize</a></span><span class="op" id="1367221">)</span><br>
<span class="lineno"></span><span class="op" id="1367223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1367226">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;unflushed&nbsp;buffered&nbsp;data,&nbsp;clears&nbsp;any&nbsp;error,&nbsp;and</span><br>
<span class="lineno">510</span><span class="comment" id="1367295">//&nbsp;resets&nbsp;b&nbsp;to&nbsp;write&nbsp;its&nbsp;output&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="1367333">func</span>&nbsp;<span class="op" id="1367338">(</span><span class="ident" id="1367339">b</span>&nbsp;<span class="op" id="1367341">*</span><span class="ident" id="1367342"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1367348">)</span>&nbsp;<span class="ident" id="1367350">Reset</span><span class="op" id="1367355">(</span><span class="ident" id="1367356">w</span>&nbsp;<span class="ident" id="1367358"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1367360">.</span><span class="ident" id="1367361"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="1367367">)</span>&nbsp;<span class="op" id="1367369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367372"><a href="/gostd/bufio/bufio.go.html#1367339">b</a></span><span class="op" id="1367373">.</span><span class="ident" id="1367374"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1367378">=</span>&nbsp;<span class="builtintype" id="1367380">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367385"><a href="/gostd/bufio/bufio.go.html#1367339">b</a></span><span class="op" id="1367386">.</span><span class="ident" id="1367387"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367389">=</span>&nbsp;<span class="num" id="1367391">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367394"><a href="/gostd/bufio/bufio.go.html#1367339">b</a></span><span class="op" id="1367395">.</span><span class="ident" id="1367396"><a href="/gostd/bufio/bufio.go.html#1366614">wr</a></span>&nbsp;<span class="op" id="1367399">=</span>&nbsp;<span class="ident" id="1367401"><a href="/gostd/bufio/bufio.go.html#1367356">w</a></span><br>
<span class="lineno">515</span><span class="op" id="1367403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1367406">//&nbsp;Flush&nbsp;writes&nbsp;any&nbsp;buffered&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="1367469">func</span>&nbsp;<span class="op" id="1367474">(</span><span class="ident" id="1367475">b</span>&nbsp;<span class="op" id="1367477">*</span><span class="ident" id="1367478"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1367484">)</span>&nbsp;<span class="ident" id="1367486">Flush</span><span class="op" id="1367491">(</span><span class="op" id="1367492">)</span>&nbsp;<span class="builtintype" id="1367494">error</span>&nbsp;<span class="op" id="1367500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367503">err</span>&nbsp;<span class="op" id="1367507">:=</span>&nbsp;<span class="ident" id="1367510"><a href="/gostd/bufio/bufio.go.html#1367475">b</a></span><span class="op" id="1367511">.</span><span class="ident" id="1367512"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1367517">(</span><span class="op" id="1367518">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367521">return</span>&nbsp;<span class="ident" id="1367528"><a href="/gostd/bufio/bufio.go.html#1367503">err</a></span><br>
<span class="lineno"></span><span class="op" id="1367532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1367535">func</span>&nbsp;<span class="op" id="1367540">(</span><span class="ident" id="1367541">b</span>&nbsp;<span class="op" id="1367543">*</span><span class="ident" id="1367544"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1367550">)</span>&nbsp;<span class="ident" id="1367552">flush</span><span class="op" id="1367557">(</span><span class="op" id="1367558">)</span>&nbsp;<span class="builtintype" id="1367560">error</span>&nbsp;<span class="op" id="1367566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367569">if</span>&nbsp;<span class="ident" id="1367572"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367573">.</span><span class="ident" id="1367574"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1367578">!=</span>&nbsp;<span class="builtintype" id="1367581">nil</span>&nbsp;<span class="op" id="1367585">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367589">return</span>&nbsp;<span class="ident" id="1367596"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367597">.</span><span class="ident" id="1367598"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367606">if</span>&nbsp;<span class="ident" id="1367609"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367610">.</span><span class="ident" id="1367611"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367613">==</span>&nbsp;<span class="num" id="1367616">0</span>&nbsp;<span class="op" id="1367618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367622">return</span>&nbsp;<span class="builtintype" id="1367629">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367634">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367637">n</span><span class="op" id="1367638">,</span>&nbsp;<span class="ident" id="1367640">err</span>&nbsp;<span class="op" id="1367644">:=</span>&nbsp;<span class="ident" id="1367647"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367648">.</span><span class="ident" id="1367649"><a href="/gostd/bufio/bufio.go.html#1366614">wr</a></span><span class="op" id="1367651">.</span><span class="ident" id="1367652"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="1367657">(</span><span class="ident" id="1367658"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367659">.</span><span class="ident" id="1367660"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1367663">[</span><span class="num" id="1367664">0</span><span class="op" id="1367665">:</span><span class="ident" id="1367666"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367667">.</span><span class="ident" id="1367668"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1367669">]</span><span class="op" id="1367670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367673">if</span>&nbsp;<span class="ident" id="1367676"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span>&nbsp;<span class="op" id="1367678">&lt;</span>&nbsp;<span class="ident" id="1367680"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367681">.</span><span class="ident" id="1367682"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367684">&amp;&amp;</span>&nbsp;<span class="ident" id="1367687"><a href="/gostd/bufio/bufio.go.html#1367640">err</a></span>&nbsp;<span class="op" id="1367691">==</span>&nbsp;<span class="builtintype" id="1367694">nil</span>&nbsp;<span class="op" id="1367698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367702"><a href="/gostd/bufio/bufio.go.html#1367640">err</a></span>&nbsp;<span class="op" id="1367706">=</span>&nbsp;<span class="ident" id="1367708"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1367710">.</span><span class="ident" id="1367711"><a href="/gostd/io/io.go.html#1419475">ErrShortWrite</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367729">if</span>&nbsp;<span class="ident" id="1367732"><a href="/gostd/bufio/bufio.go.html#1367640">err</a></span>&nbsp;<span class="op" id="1367736">!=</span>&nbsp;<span class="builtintype" id="1367739">nil</span>&nbsp;<span class="op" id="1367743">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367747">if</span>&nbsp;<span class="ident" id="1367750"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span>&nbsp;<span class="op" id="1367752">&gt;</span>&nbsp;<span class="num" id="1367754">0</span>&nbsp;<span class="op" id="1367756">&amp;&amp;</span>&nbsp;<span class="ident" id="1367759"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span>&nbsp;<span class="op" id="1367761">&lt;</span>&nbsp;<span class="ident" id="1367763"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367764">.</span><span class="ident" id="1367765"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1367772">copy</span><span class="op" id="1367776">(</span><span class="ident" id="1367777"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367778">.</span><span class="ident" id="1367779"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1367782">[</span><span class="num" id="1367783">0</span><span class="op" id="1367784">:</span><span class="ident" id="1367785"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367786">.</span><span class="ident" id="1367787"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1367788">-</span><span class="ident" id="1367789"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span><span class="op" id="1367790">]</span><span class="op" id="1367791">,</span>&nbsp;<span class="ident" id="1367793"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367794">.</span><span class="ident" id="1367795"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1367798">[</span><span class="ident" id="1367799"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span><span class="op" id="1367800">:</span><span class="ident" id="1367801"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367802">.</span><span class="ident" id="1367803"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1367804">]</span><span class="op" id="1367805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367813"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367814">.</span><span class="ident" id="1367815"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367817">-=</span>&nbsp;<span class="ident" id="1367820"><a href="/gostd/bufio/bufio.go.html#1367637">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367824"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367825">.</span><span class="ident" id="1367826"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1367830">=</span>&nbsp;<span class="ident" id="1367832"><a href="/gostd/bufio/bufio.go.html#1367640">err</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367838">return</span>&nbsp;<span class="ident" id="1367845"><a href="/gostd/bufio/bufio.go.html#1367640">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1367850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1367853"><a href="/gostd/bufio/bufio.go.html#1367541">b</a></span><span class="op" id="1367854">.</span><span class="ident" id="1367855"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367857">=</span>&nbsp;<span class="num" id="1367859">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1367862">return</span>&nbsp;<span class="builtintype" id="1367869">nil</span><br>
<span class="lineno"></span><span class="op" id="1367873">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="comment" id="1367876">//&nbsp;Available&nbsp;returns&nbsp;how&nbsp;many&nbsp;bytes&nbsp;are&nbsp;unused&nbsp;in&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="1367938">func</span>&nbsp;<span class="op" id="1367943">(</span><span class="ident" id="1367944">b</span>&nbsp;<span class="op" id="1367946">*</span><span class="ident" id="1367947"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1367953">)</span>&nbsp;<span class="ident" id="1367955">Available</span><span class="op" id="1367964">(</span><span class="op" id="1367965">)</span>&nbsp;<span class="builtintype" id="1367967">int</span>&nbsp;<span class="op" id="1367971">{</span>&nbsp;<span class="keyword" id="1367973">return</span>&nbsp;<span class="builtinfunc" id="1367980">len</span><span class="op" id="1367983">(</span><span class="ident" id="1367984"><a href="/gostd/bufio/bufio.go.html#1367944">b</a></span><span class="op" id="1367985">.</span><span class="ident" id="1367986"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1367989">)</span>&nbsp;<span class="op" id="1367991">-</span>&nbsp;<span class="ident" id="1367993"><a href="/gostd/bufio/bufio.go.html#1367944">b</a></span><span class="op" id="1367994">.</span><span class="ident" id="1367995"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1367997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1368000">//&nbsp;Buffered&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;that&nbsp;have&nbsp;been&nbsp;written&nbsp;into&nbsp;the&nbsp;current&nbsp;buffer.</span><br>
<span class="lineno">550</span><span class="keyword" id="1368088">func</span>&nbsp;<span class="op" id="1368093">(</span><span class="ident" id="1368094">b</span>&nbsp;<span class="op" id="1368096">*</span><span class="ident" id="1368097"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1368103">)</span>&nbsp;<span class="ident" id="1368105">Buffered</span><span class="op" id="1368113">(</span><span class="op" id="1368114">)</span>&nbsp;<span class="builtintype" id="1368116">int</span>&nbsp;<span class="op" id="1368120">{</span>&nbsp;<span class="keyword" id="1368122">return</span>&nbsp;<span class="ident" id="1368129"><a href="/gostd/bufio/bufio.go.html#1368094">b</a></span><span class="op" id="1368130">.</span><span class="ident" id="1368131"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1368133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1368136">//&nbsp;Write&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;p&nbsp;into&nbsp;the&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="1368187">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="1368230">//&nbsp;If&nbsp;nn&nbsp;&lt;&nbsp;len(p),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">555</span><span class="comment" id="1368285">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="1368312">func</span>&nbsp;<span class="op" id="1368317">(</span><span class="ident" id="1368318">b</span>&nbsp;<span class="op" id="1368320">*</span><span class="ident" id="1368321"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1368327">)</span>&nbsp;<span class="ident" id="1368329">Write</span><span class="op" id="1368334">(</span><span class="ident" id="1368335">p</span>&nbsp;<span class="op" id="1368337">[</span><span class="op" id="1368338">]</span><span class="builtintype" id="1368339">byte</span><span class="op" id="1368343">)</span>&nbsp;<span class="op" id="1368345">(</span><span class="ident" id="1368346">nn</span>&nbsp;<span class="builtintype" id="1368349">int</span><span class="op" id="1368352">,</span>&nbsp;<span class="ident" id="1368354">err</span>&nbsp;<span class="builtintype" id="1368358">error</span><span class="op" id="1368363">)</span>&nbsp;<span class="op" id="1368365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368368">for</span>&nbsp;<span class="builtinfunc" id="1368372">len</span><span class="op" id="1368375">(</span><span class="ident" id="1368376"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span><span class="op" id="1368377">)</span>&nbsp;<span class="op" id="1368379">&gt;</span>&nbsp;<span class="ident" id="1368381"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368382">.</span><span class="ident" id="1368383"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1368392">(</span><span class="op" id="1368393">)</span>&nbsp;<span class="op" id="1368395">&amp;&amp;</span>&nbsp;<span class="ident" id="1368398"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368399">.</span><span class="ident" id="1368400"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1368404">==</span>&nbsp;<span class="builtintype" id="1368407">nil</span>&nbsp;<span class="op" id="1368411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368415">var</span>&nbsp;<span class="ident" id="1368419">n</span>&nbsp;<span class="builtintype" id="1368421">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368427">if</span>&nbsp;<span class="ident" id="1368430"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368431">.</span><span class="ident" id="1368432"><a href="/gostd/bufio/bufio.go.html#1368105">Buffered</a></span><span class="op" id="1368440">(</span><span class="op" id="1368441">)</span>&nbsp;<span class="op" id="1368443">==</span>&nbsp;<span class="num" id="1368446">0</span>&nbsp;<span class="op" id="1368448">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1368453">//&nbsp;Large&nbsp;write,&nbsp;empty&nbsp;buffer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1368486">//&nbsp;Write&nbsp;directly&nbsp;from&nbsp;p&nbsp;to&nbsp;avoid&nbsp;copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368529"><a href="/gostd/bufio/bufio.go.html#1368419">n</a></span><span class="op" id="1368530">,</span>&nbsp;<span class="ident" id="1368532"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368533">.</span><span class="ident" id="1368534"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1368538">=</span>&nbsp;<span class="ident" id="1368540"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368541">.</span><span class="ident" id="1368542"><a href="/gostd/bufio/bufio.go.html#1366614">wr</a></span><span class="op" id="1368544">.</span><span class="ident" id="1368545"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="1368550">(</span><span class="ident" id="1368551"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span><span class="op" id="1368552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368556">}</span>&nbsp;<span class="keyword" id="1368558">else</span>&nbsp;<span class="op" id="1368563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368568"><a href="/gostd/bufio/bufio.go.html#1368419">n</a></span>&nbsp;<span class="op" id="1368570">=</span>&nbsp;<span class="builtinfunc" id="1368572">copy</span><span class="op" id="1368576">(</span><span class="ident" id="1368577"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368578">.</span><span class="ident" id="1368579"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1368582">[</span><span class="ident" id="1368583"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368584">.</span><span class="ident" id="1368585"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1368586">:</span><span class="op" id="1368587">]</span><span class="op" id="1368588">,</span>&nbsp;<span class="ident" id="1368590"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span><span class="op" id="1368591">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368596"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368597">.</span><span class="ident" id="1368598"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1368600">+=</span>&nbsp;<span class="ident" id="1368603"><a href="/gostd/bufio/bufio.go.html#1368419">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368608"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368609">.</span><span class="ident" id="1368610"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1368615">(</span><span class="op" id="1368616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368624"><a href="/gostd/bufio/bufio.go.html#1368346">nn</a></span>&nbsp;<span class="op" id="1368627">+=</span>&nbsp;<span class="ident" id="1368630"><a href="/gostd/bufio/bufio.go.html#1368419">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368634"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span>&nbsp;<span class="op" id="1368636">=</span>&nbsp;<span class="ident" id="1368638"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span><span class="op" id="1368639">[</span><span class="ident" id="1368640"><a href="/gostd/bufio/bufio.go.html#1368419">n</a></span><span class="op" id="1368641">:</span><span class="op" id="1368642">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368648">if</span>&nbsp;<span class="ident" id="1368651"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368652">.</span><span class="ident" id="1368653"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1368657">!=</span>&nbsp;<span class="builtintype" id="1368660">nil</span>&nbsp;<span class="op" id="1368664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368668">return</span>&nbsp;<span class="ident" id="1368675"><a href="/gostd/bufio/bufio.go.html#1368346">nn</a></span><span class="op" id="1368677">,</span>&nbsp;<span class="ident" id="1368679"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368680">.</span><span class="ident" id="1368681"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368689">n</span>&nbsp;<span class="op" id="1368691">:=</span>&nbsp;<span class="builtinfunc" id="1368694">copy</span><span class="op" id="1368698">(</span><span class="ident" id="1368699"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368700">.</span><span class="ident" id="1368701"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1368704">[</span><span class="ident" id="1368705"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368706">.</span><span class="ident" id="1368707"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1368708">:</span><span class="op" id="1368709">]</span><span class="op" id="1368710">,</span>&nbsp;<span class="ident" id="1368712"><a href="/gostd/bufio/bufio.go.html#1368335">p</a></span><span class="op" id="1368713">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368716"><a href="/gostd/bufio/bufio.go.html#1368318">b</a></span><span class="op" id="1368717">.</span><span class="ident" id="1368718"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1368720">+=</span>&nbsp;<span class="ident" id="1368723"><a href="/gostd/bufio/bufio.go.html#1368689">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368726"><a href="/gostd/bufio/bufio.go.html#1368346">nn</a></span>&nbsp;<span class="op" id="1368729">+=</span>&nbsp;<span class="ident" id="1368732"><a href="/gostd/bufio/bufio.go.html#1368689">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368735">return</span>&nbsp;<span class="ident" id="1368742"><a href="/gostd/bufio/bufio.go.html#1368346">nn</a></span><span class="op" id="1368744">,</span>&nbsp;<span class="builtintype" id="1368746">nil</span><br>
<span class="lineno"></span><span class="op" id="1368750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="1368753">//&nbsp;WriteByte&nbsp;writes&nbsp;a&nbsp;single&nbsp;byte.</span><br>
<span class="lineno"></span><span class="keyword" id="1368788">func</span>&nbsp;<span class="op" id="1368793">(</span><span class="ident" id="1368794">b</span>&nbsp;<span class="op" id="1368796">*</span><span class="ident" id="1368797"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1368803">)</span>&nbsp;<span class="ident" id="1368805">WriteByte</span><span class="op" id="1368814">(</span><span class="ident" id="1368815">c</span>&nbsp;<span class="builtintype" id="1368817">byte</span><span class="op" id="1368821">)</span>&nbsp;<span class="builtintype" id="1368823">error</span>&nbsp;<span class="op" id="1368829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368832">if</span>&nbsp;<span class="ident" id="1368835"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368836">.</span><span class="ident" id="1368837"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1368841">!=</span>&nbsp;<span class="builtintype" id="1368844">nil</span>&nbsp;<span class="op" id="1368848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368852">return</span>&nbsp;<span class="ident" id="1368859"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368860">.</span><span class="ident" id="1368861"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368866">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368869">if</span>&nbsp;<span class="ident" id="1368872"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368873">.</span><span class="ident" id="1368874"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1368883">(</span><span class="op" id="1368884">)</span>&nbsp;<span class="op" id="1368886">&lt;=</span>&nbsp;<span class="num" id="1368889">0</span>&nbsp;<span class="op" id="1368891">&amp;&amp;</span>&nbsp;<span class="ident" id="1368894"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368895">.</span><span class="ident" id="1368896"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1368901">(</span><span class="op" id="1368902">)</span>&nbsp;<span class="op" id="1368904">!=</span>&nbsp;<span class="builtintype" id="1368907">nil</span>&nbsp;<span class="op" id="1368911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368915">return</span>&nbsp;<span class="ident" id="1368922"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368923">.</span><span class="ident" id="1368924"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1368929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368932"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368933">.</span><span class="ident" id="1368934"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1368937">[</span><span class="ident" id="1368938"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368939">.</span><span class="ident" id="1368940"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1368941">]</span>&nbsp;<span class="op" id="1368943">=</span>&nbsp;<span class="ident" id="1368945"><a href="/gostd/bufio/bufio.go.html#1368815">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1368948"><a href="/gostd/bufio/bufio.go.html#1368794">b</a></span><span class="op" id="1368949">.</span><span class="ident" id="1368950"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1368951">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1368955">return</span>&nbsp;<span class="builtintype" id="1368962">nil</span><br>
<span class="lineno"></span><span class="op" id="1368966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1368969">//&nbsp;WriteRune&nbsp;writes&nbsp;a&nbsp;single&nbsp;Unicode&nbsp;code&nbsp;point,&nbsp;returning</span><br>
<span class="lineno"></span><span class="comment" id="1369028">//&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;any&nbsp;error.</span><br>
<span class="lineno">595</span><span class="keyword" id="1369074">func</span>&nbsp;<span class="op" id="1369079">(</span><span class="ident" id="1369080">b</span>&nbsp;<span class="op" id="1369082">*</span><span class="ident" id="1369083"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1369089">)</span>&nbsp;<span class="ident" id="1369091">WriteRune</span><span class="op" id="1369100">(</span><span class="ident" id="1369101">r</span>&nbsp;<span class="builtintype" id="1369103">rune</span><span class="op" id="1369107">)</span>&nbsp;<span class="op" id="1369109">(</span><span class="ident" id="1369110">size</span>&nbsp;<span class="builtintype" id="1369115">int</span><span class="op" id="1369118">,</span>&nbsp;<span class="ident" id="1369120">err</span>&nbsp;<span class="builtintype" id="1369124">error</span><span class="op" id="1369129">)</span>&nbsp;<span class="op" id="1369131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369134">if</span>&nbsp;<span class="ident" id="1369137"><a href="/gostd/bufio/bufio.go.html#1369101">r</a></span>&nbsp;<span class="op" id="1369139">&lt;</span>&nbsp;<span class="ident" id="1369141"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1369145">.</span><span class="ident" id="1369146"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="1369155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369159"><a href="/gostd/bufio/bufio.go.html#1369120">err</a></span>&nbsp;<span class="op" id="1369163">=</span>&nbsp;<span class="ident" id="1369165"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369166">.</span><span class="ident" id="1369167"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="1369176">(</span><span class="builtintype" id="1369177">byte</span><span class="op" id="1369181">(</span><span class="ident" id="1369182"><a href="/gostd/bufio/bufio.go.html#1369101">r</a></span><span class="op" id="1369183">)</span><span class="op" id="1369184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369188">if</span>&nbsp;<span class="ident" id="1369191"><a href="/gostd/bufio/bufio.go.html#1369120">err</a></span>&nbsp;<span class="op" id="1369195">!=</span>&nbsp;<span class="builtintype" id="1369198">nil</span>&nbsp;<span class="op" id="1369202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369207">return</span>&nbsp;<span class="num" id="1369214">0</span><span class="op" id="1369215">,</span>&nbsp;<span class="ident" id="1369217"><a href="/gostd/bufio/bufio.go.html#1369120">err</a></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369227">return</span>&nbsp;<span class="num" id="1369234">1</span><span class="op" id="1369235">,</span>&nbsp;<span class="builtintype" id="1369237">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369245">if</span>&nbsp;<span class="ident" id="1369248"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369249">.</span><span class="ident" id="1369250"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1369254">!=</span>&nbsp;<span class="builtintype" id="1369257">nil</span>&nbsp;<span class="op" id="1369261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369265">return</span>&nbsp;<span class="num" id="1369272">0</span><span class="op" id="1369273">,</span>&nbsp;<span class="ident" id="1369275"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369276">.</span><span class="ident" id="1369277"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369285">n</span>&nbsp;<span class="op" id="1369287">:=</span>&nbsp;<span class="ident" id="1369290"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369291">.</span><span class="ident" id="1369292"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1369301">(</span><span class="op" id="1369302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369305">if</span>&nbsp;<span class="ident" id="1369308"><a href="/gostd/bufio/bufio.go.html#1369285">n</a></span>&nbsp;<span class="op" id="1369310">&lt;</span>&nbsp;<span class="ident" id="1369312"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1369316">.</span><span class="ident" id="1369317"><a href="/gostd/unicode/utf8/utf8.go.html#1805617">UTFMax</a></span>&nbsp;<span class="op" id="1369324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369328">if</span>&nbsp;<span class="ident" id="1369331"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369332">.</span><span class="ident" id="1369333"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1369338">(</span><span class="op" id="1369339">)</span><span class="op" id="1369340">;</span>&nbsp;<span class="ident" id="1369342"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369343">.</span><span class="ident" id="1369344"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1369348">!=</span>&nbsp;<span class="builtintype" id="1369351">nil</span>&nbsp;<span class="op" id="1369355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369360">return</span>&nbsp;<span class="num" id="1369367">0</span><span class="op" id="1369368">,</span>&nbsp;<span class="ident" id="1369370"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369371">.</span><span class="ident" id="1369372"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369382"><a href="/gostd/bufio/bufio.go.html#1369285">n</a></span>&nbsp;<span class="op" id="1369384">=</span>&nbsp;<span class="ident" id="1369386"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369387">.</span><span class="ident" id="1369388"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1369397">(</span><span class="op" id="1369398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369402">if</span>&nbsp;<span class="ident" id="1369405"><a href="/gostd/bufio/bufio.go.html#1369285">n</a></span>&nbsp;<span class="op" id="1369407">&lt;</span>&nbsp;<span class="ident" id="1369409"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1369413">.</span><span class="ident" id="1369414"><a href="/gostd/unicode/utf8/utf8.go.html#1805617">UTFMax</a></span>&nbsp;<span class="op" id="1369421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1369426">//&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;buffer&nbsp;is&nbsp;silly&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369474">return</span>&nbsp;<span class="ident" id="1369481"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369482">.</span><span class="ident" id="1369483"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="1369494">(</span><span class="builtintype" id="1369495">string</span><span class="op" id="1369501">(</span><span class="ident" id="1369502"><a href="/gostd/bufio/bufio.go.html#1369101">r</a></span><span class="op" id="1369503">)</span><span class="op" id="1369504">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369514"><a href="/gostd/bufio/bufio.go.html#1369110">size</a></span>&nbsp;<span class="op" id="1369519">=</span>&nbsp;<span class="ident" id="1369521"><a href="/gostd/bufio/bufio.go.html#1354573">utf8</a></span><span class="op" id="1369525">.</span><span class="ident" id="1369526"><a href="/gostd/unicode/utf8/utf8.go.html#1813107">EncodeRune</a></span><span class="op" id="1369536">(</span><span class="ident" id="1369537"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369538">.</span><span class="ident" id="1369539"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1369542">[</span><span class="ident" id="1369543"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369544">.</span><span class="ident" id="1369545"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1369546">:</span><span class="op" id="1369547">]</span><span class="op" id="1369548">,</span>&nbsp;<span class="ident" id="1369550"><a href="/gostd/bufio/bufio.go.html#1369101">r</a></span><span class="op" id="1369551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369554"><a href="/gostd/bufio/bufio.go.html#1369080">b</a></span><span class="op" id="1369555">.</span><span class="ident" id="1369556"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1369558">+=</span>&nbsp;<span class="ident" id="1369561"><a href="/gostd/bufio/bufio.go.html#1369110">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369567">return</span>&nbsp;<span class="ident" id="1369574"><a href="/gostd/bufio/bufio.go.html#1369110">size</a></span><span class="op" id="1369578">,</span>&nbsp;<span class="builtintype" id="1369580">nil</span><br>
<span class="lineno">620</span><span class="op" id="1369584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1369587">//&nbsp;WriteString&nbsp;writes&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="1369619">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written.</span><br>
<span class="lineno"></span><span class="comment" id="1369662">//&nbsp;If&nbsp;the&nbsp;count&nbsp;is&nbsp;less&nbsp;than&nbsp;len(s),&nbsp;it&nbsp;also&nbsp;returns&nbsp;an&nbsp;error&nbsp;explaining</span><br>
<span class="lineno">625</span><span class="comment" id="1369735">//&nbsp;why&nbsp;the&nbsp;write&nbsp;is&nbsp;short.</span><br>
<span class="lineno"></span><span class="keyword" id="1369762">func</span>&nbsp;<span class="op" id="1369767">(</span><span class="ident" id="1369768">b</span>&nbsp;<span class="op" id="1369770">*</span><span class="ident" id="1369771"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1369777">)</span>&nbsp;<span class="ident" id="1369779">WriteString</span><span class="op" id="1369790">(</span><span class="ident" id="1369791">s</span>&nbsp;<span class="builtintype" id="1369793">string</span><span class="op" id="1369799">)</span>&nbsp;<span class="op" id="1369801">(</span><span class="builtintype" id="1369802">int</span><span class="op" id="1369805">,</span>&nbsp;<span class="builtintype" id="1369807">error</span><span class="op" id="1369812">)</span>&nbsp;<span class="op" id="1369814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369817">nn</span>&nbsp;<span class="op" id="1369820">:=</span>&nbsp;<span class="num" id="1369823">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369826">for</span>&nbsp;<span class="builtinfunc" id="1369830">len</span><span class="op" id="1369833">(</span><span class="ident" id="1369834"><a href="/gostd/bufio/bufio.go.html#1369791">s</a></span><span class="op" id="1369835">)</span>&nbsp;<span class="op" id="1369837">&gt;</span>&nbsp;<span class="ident" id="1369839"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369840">.</span><span class="ident" id="1369841"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1369850">(</span><span class="op" id="1369851">)</span>&nbsp;<span class="op" id="1369853">&amp;&amp;</span>&nbsp;<span class="ident" id="1369856"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369857">.</span><span class="ident" id="1369858"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1369862">==</span>&nbsp;<span class="builtintype" id="1369865">nil</span>&nbsp;<span class="op" id="1369869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369873">n</span>&nbsp;<span class="op" id="1369875">:=</span>&nbsp;<span class="builtinfunc" id="1369878">copy</span><span class="op" id="1369882">(</span><span class="ident" id="1369883"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369884">.</span><span class="ident" id="1369885"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1369888">[</span><span class="ident" id="1369889"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369890">.</span><span class="ident" id="1369891"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1369892">:</span><span class="op" id="1369893">]</span><span class="op" id="1369894">,</span>&nbsp;<span class="ident" id="1369896"><a href="/gostd/bufio/bufio.go.html#1369791">s</a></span><span class="op" id="1369897">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369901"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369902">.</span><span class="ident" id="1369903"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1369905">+=</span>&nbsp;<span class="ident" id="1369908"><a href="/gostd/bufio/bufio.go.html#1369873">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369912"><a href="/gostd/bufio/bufio.go.html#1369817">nn</a></span>&nbsp;<span class="op" id="1369915">+=</span>&nbsp;<span class="ident" id="1369918"><a href="/gostd/bufio/bufio.go.html#1369873">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369922"><a href="/gostd/bufio/bufio.go.html#1369791">s</a></span>&nbsp;<span class="op" id="1369924">=</span>&nbsp;<span class="ident" id="1369926"><a href="/gostd/bufio/bufio.go.html#1369791">s</a></span><span class="op" id="1369927">[</span><span class="ident" id="1369928"><a href="/gostd/bufio/bufio.go.html#1369873">n</a></span><span class="op" id="1369929">:</span><span class="op" id="1369930">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369934"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369935">.</span><span class="ident" id="1369936"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1369941">(</span><span class="op" id="1369942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369945">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369948">if</span>&nbsp;<span class="ident" id="1369951"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369952">.</span><span class="ident" id="1369953"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span>&nbsp;<span class="op" id="1369957">!=</span>&nbsp;<span class="builtintype" id="1369960">nil</span>&nbsp;<span class="op" id="1369964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1369968">return</span>&nbsp;<span class="ident" id="1369975"><a href="/gostd/bufio/bufio.go.html#1369817">nn</a></span><span class="op" id="1369977">,</span>&nbsp;<span class="ident" id="1369979"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1369980">.</span><span class="ident" id="1369981"><a href="/gostd/bufio/bufio.go.html#1366582">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1369986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1369989">n</span>&nbsp;<span class="op" id="1369991">:=</span>&nbsp;<span class="builtinfunc" id="1369994">copy</span><span class="op" id="1369998">(</span><span class="ident" id="1369999"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1370000">.</span><span class="ident" id="1370001"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1370004">[</span><span class="ident" id="1370005"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1370006">.</span><span class="ident" id="1370007"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1370008">:</span><span class="op" id="1370009">]</span><span class="op" id="1370010">,</span>&nbsp;<span class="ident" id="1370012"><a href="/gostd/bufio/bufio.go.html#1369791">s</a></span><span class="op" id="1370013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370016"><a href="/gostd/bufio/bufio.go.html#1369768">b</a></span><span class="op" id="1370017">.</span><span class="ident" id="1370018"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1370020">+=</span>&nbsp;<span class="ident" id="1370023"><a href="/gostd/bufio/bufio.go.html#1369989">n</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370026"><a href="/gostd/bufio/bufio.go.html#1369817">nn</a></span>&nbsp;<span class="op" id="1370029">+=</span>&nbsp;<span class="ident" id="1370032"><a href="/gostd/bufio/bufio.go.html#1369989">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370035">return</span>&nbsp;<span class="ident" id="1370042"><a href="/gostd/bufio/bufio.go.html#1369817">nn</a></span><span class="op" id="1370044">,</span>&nbsp;<span class="builtintype" id="1370046">nil</span><br>
<span class="lineno"></span><span class="op" id="1370050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1370053">//&nbsp;ReadFrom&nbsp;implements&nbsp;io.ReaderFrom.</span><br>
<span class="lineno">645</span><span class="keyword" id="1370091">func</span>&nbsp;<span class="op" id="1370096">(</span><span class="ident" id="1370097">b</span>&nbsp;<span class="op" id="1370099">*</span><span class="ident" id="1370100"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1370106">)</span>&nbsp;<span class="ident" id="1370108">ReadFrom</span><span class="op" id="1370116">(</span><span class="ident" id="1370117">r</span>&nbsp;<span class="ident" id="1370119"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1370121">.</span><span class="ident" id="1370122"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1370128">)</span>&nbsp;<span class="op" id="1370130">(</span><span class="ident" id="1370131">n</span>&nbsp;<span class="builtintype" id="1370133">int64</span><span class="op" id="1370138">,</span>&nbsp;<span class="ident" id="1370140">err</span>&nbsp;<span class="builtintype" id="1370144">error</span><span class="op" id="1370149">)</span>&nbsp;<span class="op" id="1370151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370154">if</span>&nbsp;<span class="ident" id="1370157"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370158">.</span><span class="ident" id="1370159"><a href="/gostd/bufio/bufio.go.html#1368105">Buffered</a></span><span class="op" id="1370167">(</span><span class="op" id="1370168">)</span>&nbsp;<span class="op" id="1370170">==</span>&nbsp;<span class="num" id="1370173">0</span>&nbsp;<span class="op" id="1370175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370179">if</span>&nbsp;<span class="ident" id="1370182">w</span><span class="op" id="1370183">,</span>&nbsp;<span class="ident" id="1370185">ok</span>&nbsp;<span class="op" id="1370188">:=</span>&nbsp;<span class="ident" id="1370191"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370192">.</span><span class="ident" id="1370193"><a href="/gostd/bufio/bufio.go.html#1366614">wr</a></span><span class="op" id="1370195">.</span><span class="op" id="1370196">(</span><span class="ident" id="1370197"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1370199">.</span><span class="ident" id="1370200"><a href="/gostd/io/io.go.html#1424428">ReaderFrom</a></span><span class="op" id="1370210">)</span><span class="op" id="1370211">;</span>&nbsp;<span class="ident" id="1370213"><a href="/gostd/bufio/bufio.go.html#1370185">ok</a></span>&nbsp;<span class="op" id="1370216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370221">return</span>&nbsp;<span class="ident" id="1370228"><a href="/gostd/bufio/bufio.go.html#1370182">w</a></span><span class="op" id="1370229">.</span><span class="ident" id="1370230"><a href="/gostd/io/io.go.html#1424452">ReadFrom</a></span><span class="op" id="1370238">(</span><span class="ident" id="1370239"><a href="/gostd/bufio/bufio.go.html#1370117">r</a></span><span class="op" id="1370240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370244">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370250">var</span>&nbsp;<span class="ident" id="1370254">m</span>&nbsp;<span class="builtintype" id="1370256">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370261">for</span>&nbsp;<span class="op" id="1370265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370269">if</span>&nbsp;<span class="ident" id="1370272"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370273">.</span><span class="ident" id="1370274"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1370283">(</span><span class="op" id="1370284">)</span>&nbsp;<span class="op" id="1370286">==</span>&nbsp;<span class="num" id="1370289">0</span>&nbsp;<span class="op" id="1370291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370296">if</span>&nbsp;<span class="ident" id="1370299">err1</span>&nbsp;<span class="op" id="1370304">:=</span>&nbsp;<span class="ident" id="1370307"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370308">.</span><span class="ident" id="1370309"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1370314">(</span><span class="op" id="1370315">)</span><span class="op" id="1370316">;</span>&nbsp;<span class="ident" id="1370318"><a href="/gostd/bufio/bufio.go.html#1370299">err1</a></span>&nbsp;<span class="op" id="1370323">!=</span>&nbsp;<span class="builtintype" id="1370326">nil</span>&nbsp;<span class="op" id="1370330">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370336">return</span>&nbsp;<span class="ident" id="1370343"><a href="/gostd/bufio/bufio.go.html#1370131">n</a></span><span class="op" id="1370344">,</span>&nbsp;<span class="ident" id="1370346"><a href="/gostd/bufio/bufio.go.html#1370299">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370362">nr</span>&nbsp;<span class="op" id="1370365">:=</span>&nbsp;<span class="num" id="1370368">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370372">for</span>&nbsp;<span class="ident" id="1370376"><a href="/gostd/bufio/bufio.go.html#1370362">nr</a></span>&nbsp;<span class="op" id="1370379">&lt;</span>&nbsp;<span class="ident" id="1370381"><a href="/gostd/bufio/bufio.go.html#1355218">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="1370406">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370411"><a href="/gostd/bufio/bufio.go.html#1370254">m</a></span><span class="op" id="1370412">,</span>&nbsp;<span class="ident" id="1370414"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370418">=</span>&nbsp;<span class="ident" id="1370420"><a href="/gostd/bufio/bufio.go.html#1370117">r</a></span><span class="op" id="1370421">.</span><span class="ident" id="1370422"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="1370426">(</span><span class="ident" id="1370427"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370428">.</span><span class="ident" id="1370429"><a href="/gostd/bufio/bufio.go.html#1366593">buf</a></span><span class="op" id="1370432">[</span><span class="ident" id="1370433"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370434">.</span><span class="ident" id="1370435"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span><span class="op" id="1370436">:</span><span class="op" id="1370437">]</span><span class="op" id="1370438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370443">if</span>&nbsp;<span class="ident" id="1370446"><a href="/gostd/bufio/bufio.go.html#1370254">m</a></span>&nbsp;<span class="op" id="1370448">!=</span>&nbsp;<span class="num" id="1370451">0</span>&nbsp;<span class="op" id="1370453">||</span>&nbsp;<span class="ident" id="1370456"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370460">!=</span>&nbsp;<span class="builtintype" id="1370463">nil</span>&nbsp;<span class="op" id="1370467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370473">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370487"><a href="/gostd/bufio/bufio.go.html#1370362">nr</a></span><span class="op" id="1370489">++</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370498">if</span>&nbsp;<span class="ident" id="1370501"><a href="/gostd/bufio/bufio.go.html#1370362">nr</a></span>&nbsp;<span class="op" id="1370504">==</span>&nbsp;<span class="ident" id="1370507"><a href="/gostd/bufio/bufio.go.html#1355218">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="1370532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370537">return</span>&nbsp;<span class="ident" id="1370544"><a href="/gostd/bufio/bufio.go.html#1370131">n</a></span><span class="op" id="1370545">,</span>&nbsp;<span class="ident" id="1370547"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1370549">.</span><span class="ident" id="1370550"><a href="/gostd/io/io.go.html#1420336">ErrNoProgress</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370570"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370571">.</span><span class="ident" id="1370572"><a href="/gostd/bufio/bufio.go.html#1366605">n</a></span>&nbsp;<span class="op" id="1370574">+=</span>&nbsp;<span class="ident" id="1370577"><a href="/gostd/bufio/bufio.go.html#1370254">m</a></span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370581"><a href="/gostd/bufio/bufio.go.html#1370131">n</a></span>&nbsp;<span class="op" id="1370583">+=</span>&nbsp;<span class="builtintype" id="1370586">int64</span><span class="op" id="1370591">(</span><span class="ident" id="1370592"><a href="/gostd/bufio/bufio.go.html#1370254">m</a></span><span class="op" id="1370593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370597">if</span>&nbsp;<span class="ident" id="1370600"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370604">!=</span>&nbsp;<span class="builtintype" id="1370607">nil</span>&nbsp;<span class="op" id="1370611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370616">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370627">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370630">if</span>&nbsp;<span class="ident" id="1370633"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370637">==</span>&nbsp;<span class="ident" id="1370640"><a href="/gostd/bufio/bufio.go.html#1354567">io</a></span><span class="op" id="1370642">.</span><span class="ident" id="1370643"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="1370647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1370651">//&nbsp;If&nbsp;we&nbsp;filled&nbsp;the&nbsp;buffer&nbsp;exactly,&nbsp;flush&nbsp;pre-emptively.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370710">if</span>&nbsp;<span class="ident" id="1370713"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370714">.</span><span class="ident" id="1370715"><a href="/gostd/bufio/bufio.go.html#1367955">Available</a></span><span class="op" id="1370724">(</span><span class="op" id="1370725">)</span>&nbsp;<span class="op" id="1370727">==</span>&nbsp;<span class="num" id="1370730">0</span>&nbsp;<span class="op" id="1370732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370737"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370741">=</span>&nbsp;<span class="ident" id="1370743"><a href="/gostd/bufio/bufio.go.html#1370097">b</a></span><span class="op" id="1370744">.</span><span class="ident" id="1370745"><a href="/gostd/bufio/bufio.go.html#1367552">flush</a></span><span class="op" id="1370750">(</span><span class="op" id="1370751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370755">}</span>&nbsp;<span class="keyword" id="1370757">else</span>&nbsp;<span class="op" id="1370762">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1370767"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span>&nbsp;<span class="op" id="1370771">=</span>&nbsp;<span class="builtintype" id="1370773">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1370785">return</span>&nbsp;<span class="ident" id="1370792"><a href="/gostd/bufio/bufio.go.html#1370131">n</a></span><span class="op" id="1370793">,</span>&nbsp;<span class="ident" id="1370795"><a href="/gostd/bufio/bufio.go.html#1370140">err</a></span><br>
<span class="lineno"></span><span class="op" id="1370799">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="comment" id="1370802">//&nbsp;buffered&nbsp;input&nbsp;and&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1370832">//&nbsp;ReadWriter&nbsp;stores&nbsp;pointers&nbsp;to&nbsp;a&nbsp;Reader&nbsp;and&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="1370888">//&nbsp;It&nbsp;implements&nbsp;io.ReadWriter.</span><br>
<span class="lineno">690</span><span class="keyword" id="1370920">type</span>&nbsp;<span class="ident" id="1370925">ReadWriter</span>&nbsp;<span class="keyword" id="1370936">struct</span>&nbsp;<span class="op" id="1370943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370946">*</span><span class="ident" id="1370947"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1370955">*</span><span class="ident" id="1370956"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><br>
<span class="lineno"></span><span class="op" id="1370963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="1370966">//&nbsp;NewReadWriter&nbsp;allocates&nbsp;a&nbsp;new&nbsp;ReadWriter&nbsp;that&nbsp;dispatches&nbsp;to&nbsp;r&nbsp;and&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="1371038">func</span>&nbsp;<span class="ident" id="1371043">NewReadWriter</span><span class="op" id="1371056">(</span><span class="ident" id="1371057">r</span>&nbsp;<span class="op" id="1371059">*</span><span class="ident" id="1371060"><a href="/gostd/bufio/bufio.go.html#1354974">Reader</a></span><span class="op" id="1371066">,</span>&nbsp;<span class="ident" id="1371068">w</span>&nbsp;<span class="op" id="1371070">*</span><span class="ident" id="1371071"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><span class="op" id="1371077">)</span>&nbsp;<span class="op" id="1371079">*</span><span class="ident" id="1371080"><a href="/gostd/bufio/bufio.go.html#1370925">ReadWriter</a></span>&nbsp;<span class="op" id="1371091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1371094">return</span>&nbsp;<span class="op" id="1371101">&amp;</span><span class="ident" id="1371102"><a href="/gostd/bufio/bufio.go.html#1370925">ReadWriter</a></span><span class="op" id="1371112">{</span><span class="ident" id="1371113"><a href="/gostd/bufio/bufio.go.html#1371057">r</a></span><span class="op" id="1371114">,</span>&nbsp;<span class="ident" id="1371116"><a href="/gostd/bufio/bufio.go.html#1371068">w</a></span><span class="op" id="1371117">}</span><br>
<span class="lineno"></span><span class="op" id="1371119">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
