<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html" class="current">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6094694">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6094749">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6094803">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6094854">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6094885">package</span>&nbsp;<span class="ident" id="6094893">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6094902">import</span>&nbsp;<span class="op" id="6094909">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6094912">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6094919">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6094925">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="6094939">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6094942">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="6095008">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6095087">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6095152">type</span>&nbsp;<span class="ident" id="6095157">CoverBlock</span>&nbsp;<span class="keyword" id="6095168">struct</span>&nbsp;<span class="op" id="6095175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095178">Line0</span>&nbsp;<span class="builtintype" id="6095184">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095192">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="6095198">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095206">Line1</span>&nbsp;<span class="builtintype" id="6095212">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095220">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="6095226">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095234">Stmts</span>&nbsp;<span class="builtintype" id="6095240">uint16</span><br>
<span class="lineno"></span><span class="op" id="6095247">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6095250">var</span>&nbsp;<span class="ident" id="6095254">cover</span>&nbsp;<span class="ident" id="6095260">Cover</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6095267">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="6095326">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="6095405">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6095470">type</span>&nbsp;<span class="ident" id="6095475">Cover</span>&nbsp;<span class="keyword" id="6095481">struct</span>&nbsp;<span class="op" id="6095488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095491">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6095507">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095515">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6095531">map</span><span class="op" id="6095534">[</span><span class="builtintype" id="6095535">string</span><span class="op" id="6095541">]</span><span class="op" id="6095542">[</span><span class="op" id="6095543">]</span><span class="builtintype" id="6095544">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095552">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6095568">map</span><span class="op" id="6095571">[</span><span class="builtintype" id="6095572">string</span><span class="op" id="6095578">]</span><span class="op" id="6095579">[</span><span class="op" id="6095580">]</span><span class="ident" id="6095581">CoverBlock</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6095593">CoveredPackages</span>&nbsp;<span class="builtintype" id="6095609">string</span><br>
<span class="lineno"></span><span class="op" id="6095616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6095619">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="6095700">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="6095751">//</span><br>
<span class="lineno"></span><span class="comment" id="6095754">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="6095841">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="6095916">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6095993">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="6096013">func</span>&nbsp;<span class="ident" id="6096018">Coverage</span><span class="op" id="6096026">(</span><span class="op" id="6096027">)</span>&nbsp;<span class="builtintype" id="6096029">float64</span>&nbsp;<span class="op" id="6096037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096040">var</span>&nbsp;<span class="ident" id="6096044">n</span><span class="op" id="6096045">,</span>&nbsp;<span class="ident" id="6096047">d</span>&nbsp;<span class="ident" id="6096049">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096056">for</span>&nbsp;<span class="ident" id="6096060">_</span><span class="op" id="6096061">,</span>&nbsp;<span class="ident" id="6096063">counters</span>&nbsp;<span class="op" id="6096072">:=</span>&nbsp;<span class="keyword" id="6096075">range</span>&nbsp;<span class="ident" id="6096081">cover</span><span class="op" id="6096086">.</span><span class="ident" id="6096087">Counters</span>&nbsp;<span class="op" id="6096096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096100">for</span>&nbsp;<span class="ident" id="6096104">i</span>&nbsp;<span class="op" id="6096106">:=</span>&nbsp;<span class="keyword" id="6096109">range</span>&nbsp;<span class="ident" id="6096115">counters</span>&nbsp;<span class="op" id="6096124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096129">if</span>&nbsp;<span class="ident" id="6096132">atomic</span><span class="op" id="6096138">.</span><span class="ident" id="6096139">LoadUint32</span><span class="op" id="6096149">(</span><span class="op" id="6096150">&amp;</span><span class="ident" id="6096151">counters</span><span class="op" id="6096159">[</span><span class="ident" id="6096160">i</span><span class="op" id="6096161">]</span><span class="op" id="6096162">)</span>&nbsp;<span class="op" id="6096164">&gt;</span>&nbsp;<span class="num" id="6096166">0</span>&nbsp;<span class="op" id="6096168">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096174">n</span><span class="op" id="6096175">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6096181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096186">d</span><span class="op" id="6096187">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6096192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6096195">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096198">if</span>&nbsp;<span class="ident" id="6096201">d</span>&nbsp;<span class="op" id="6096203">==</span>&nbsp;<span class="num" id="6096206">0</span>&nbsp;<span class="op" id="6096208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096212">return</span>&nbsp;<span class="num" id="6096219">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6096222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096225">return</span>&nbsp;<span class="builtintype" id="6096232">float64</span><span class="op" id="6096239">(</span><span class="ident" id="6096240">n</span><span class="op" id="6096241">)</span>&nbsp;<span class="op" id="6096243">/</span>&nbsp;<span class="builtintype" id="6096245">float64</span><span class="op" id="6096252">(</span><span class="ident" id="6096253">d</span><span class="op" id="6096254">)</span><br>
<span class="lineno"></span><span class="op" id="6096256">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6096259">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="6096330">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="6096411">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="6096476">func</span>&nbsp;<span class="ident" id="6096481">RegisterCover</span><span class="op" id="6096494">(</span><span class="ident" id="6096495">c</span>&nbsp;<span class="ident" id="6096497">Cover</span><span class="op" id="6096502">)</span>&nbsp;<span class="op" id="6096504">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096507">cover</span>&nbsp;<span class="op" id="6096513">=</span>&nbsp;<span class="ident" id="6096515">c</span><br>
<span class="lineno"></span><span class="op" id="6096517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6096520">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="6096589">func</span>&nbsp;<span class="ident" id="6096594">mustBeNil</span><span class="op" id="6096603">(</span><span class="ident" id="6096604">err</span>&nbsp;<span class="builtintype" id="6096608">error</span><span class="op" id="6096613">)</span>&nbsp;<span class="op" id="6096615">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096618">if</span>&nbsp;<span class="ident" id="6096621">err</span>&nbsp;<span class="op" id="6096625">!=</span>&nbsp;<span class="builtintype" id="6096628">nil</span>&nbsp;<span class="op" id="6096632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096636">fmt</span><span class="op" id="6096639">.</span><span class="ident" id="6096640">Fprintf</span><span class="op" id="6096647">(</span><span class="ident" id="6096648">os</span><span class="op" id="6096650">.</span><span class="ident" id="6096651">Stderr</span><span class="op" id="6096657">,</span>&nbsp;<span class="string" id="6096659">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="6096674">,</span>&nbsp;<span class="ident" id="6096676">err</span><span class="op" id="6096679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096683">os</span><span class="op" id="6096685">.</span><span class="ident" id="6096686">Exit</span><span class="op" id="6096690">(</span><span class="num" id="6096691">2</span><span class="op" id="6096692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6096695">}</span><br>
<span class="lineno"></span><span class="op" id="6096697">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6096700">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="6096791">func</span>&nbsp;<span class="ident" id="6096796">coverReport</span><span class="op" id="6096807">(</span><span class="op" id="6096808">)</span>&nbsp;<span class="op" id="6096810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096813">var</span>&nbsp;<span class="ident" id="6096817">f</span>&nbsp;<span class="op" id="6096819">*</span><span class="ident" id="6096820">os</span><span class="op" id="6096822">.</span><span class="ident" id="6096823">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096829">var</span>&nbsp;<span class="ident" id="6096833">err</span>&nbsp;<span class="builtintype" id="6096837">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096844">if</span>&nbsp;<span class="op" id="6096847">*</span><span class="ident" id="6096848">coverProfile</span>&nbsp;<span class="op" id="6096861">!=</span>&nbsp;<span class="string" id="6096864">&#34;&#34;</span>&nbsp;<span class="op" id="6096867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096871">f</span><span class="op" id="6096872">,</span>&nbsp;<span class="ident" id="6096874">err</span>&nbsp;<span class="op" id="6096878">=</span>&nbsp;<span class="ident" id="6096880">os</span><span class="op" id="6096882">.</span><span class="ident" id="6096883">Create</span><span class="op" id="6096889">(</span><span class="ident" id="6096890">toOutputDir</span><span class="op" id="6096901">(</span><span class="op" id="6096902">*</span><span class="ident" id="6096903">coverProfile</span><span class="op" id="6096915">)</span><span class="op" id="6096916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096920">mustBeNil</span><span class="op" id="6096929">(</span><span class="ident" id="6096930">err</span><span class="op" id="6096933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096937">fmt</span><span class="op" id="6096940">.</span><span class="ident" id="6096941">Fprintf</span><span class="op" id="6096948">(</span><span class="ident" id="6096949">f</span><span class="op" id="6096950">,</span>&nbsp;<span class="string" id="6096952">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="6096964">,</span>&nbsp;<span class="ident" id="6096966">cover</span><span class="op" id="6096971">.</span><span class="ident" id="6096972">Mode</span><span class="op" id="6096976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6096980">defer</span>&nbsp;<span class="keyword" id="6096986">func</span><span class="op" id="6096990">(</span><span class="op" id="6096991">)</span>&nbsp;<span class="op" id="6096993">{</span>&nbsp;<span class="ident" id="6096995">mustBeNil</span><span class="op" id="6097004">(</span><span class="ident" id="6097005">f</span><span class="op" id="6097006">.</span><span class="ident" id="6097007">Close</span><span class="op" id="6097012">(</span><span class="op" id="6097013">)</span><span class="op" id="6097014">)</span>&nbsp;<span class="op" id="6097016">}</span><span class="op" id="6097017">(</span><span class="op" id="6097018">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097025">var</span>&nbsp;<span class="ident" id="6097029">active</span><span class="op" id="6097035">,</span>&nbsp;<span class="ident" id="6097037">total</span>&nbsp;<span class="ident" id="6097043">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097050">var</span>&nbsp;<span class="ident" id="6097054">count</span>&nbsp;<span class="builtintype" id="6097060">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097068">for</span>&nbsp;<span class="ident" id="6097072">name</span><span class="op" id="6097076">,</span>&nbsp;<span class="ident" id="6097078">counts</span>&nbsp;<span class="op" id="6097085">:=</span>&nbsp;<span class="keyword" id="6097088">range</span>&nbsp;<span class="ident" id="6097094">cover</span><span class="op" id="6097099">.</span><span class="ident" id="6097100">Counters</span>&nbsp;<span class="op" id="6097109">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097113">blocks</span>&nbsp;<span class="op" id="6097120">:=</span>&nbsp;<span class="ident" id="6097123">cover</span><span class="op" id="6097128">.</span><span class="ident" id="6097129">Blocks</span><span class="op" id="6097135">[</span><span class="ident" id="6097136">name</span><span class="op" id="6097140">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097144">for</span>&nbsp;<span class="ident" id="6097148">i</span>&nbsp;<span class="op" id="6097150">:=</span>&nbsp;<span class="keyword" id="6097153">range</span>&nbsp;<span class="ident" id="6097159">counts</span>&nbsp;<span class="op" id="6097166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097171">stmts</span>&nbsp;<span class="op" id="6097177">:=</span>&nbsp;<span class="ident" id="6097180">int64</span><span class="op" id="6097185">(</span><span class="ident" id="6097186">blocks</span><span class="op" id="6097192">[</span><span class="ident" id="6097193">i</span><span class="op" id="6097194">]</span><span class="op" id="6097195">.</span><span class="ident" id="6097196">Stmts</span><span class="op" id="6097201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097206">total</span>&nbsp;<span class="op" id="6097212">+=</span>&nbsp;<span class="ident" id="6097215">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097224">count</span>&nbsp;<span class="op" id="6097230">=</span>&nbsp;<span class="ident" id="6097232">atomic</span><span class="op" id="6097238">.</span><span class="ident" id="6097239">LoadUint32</span><span class="op" id="6097249">(</span><span class="op" id="6097250">&amp;</span><span class="ident" id="6097251">counts</span><span class="op" id="6097257">[</span><span class="ident" id="6097258">i</span><span class="op" id="6097259">]</span><span class="op" id="6097260">)</span>&nbsp;<span class="comment" id="6097262">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097286">if</span>&nbsp;<span class="ident" id="6097289">count</span>&nbsp;<span class="op" id="6097295">&gt;</span>&nbsp;<span class="num" id="6097297">0</span>&nbsp;<span class="op" id="6097299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097305">active</span>&nbsp;<span class="op" id="6097312">+=</span>&nbsp;<span class="ident" id="6097315">stmts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097329">if</span>&nbsp;<span class="ident" id="6097332">f</span>&nbsp;<span class="op" id="6097334">!=</span>&nbsp;<span class="builtintype" id="6097337">nil</span>&nbsp;<span class="op" id="6097341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097347">_</span><span class="op" id="6097348">,</span>&nbsp;<span class="ident" id="6097350">err</span>&nbsp;<span class="op" id="6097354">:=</span>&nbsp;<span class="ident" id="6097357">fmt</span><span class="op" id="6097360">.</span><span class="ident" id="6097361">Fprintf</span><span class="op" id="6097368">(</span><span class="ident" id="6097369">f</span><span class="op" id="6097370">,</span>&nbsp;<span class="string" id="6097372">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="6097396">,</span>&nbsp;<span class="ident" id="6097398">name</span><span class="op" id="6097402">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097409">blocks</span><span class="op" id="6097415">[</span><span class="ident" id="6097416">i</span><span class="op" id="6097417">]</span><span class="op" id="6097418">.</span><span class="ident" id="6097419">Line0</span><span class="op" id="6097424">,</span>&nbsp;<span class="ident" id="6097426">blocks</span><span class="op" id="6097432">[</span><span class="ident" id="6097433">i</span><span class="op" id="6097434">]</span><span class="op" id="6097435">.</span><span class="ident" id="6097436">Col0</span><span class="op" id="6097440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097447">blocks</span><span class="op" id="6097453">[</span><span class="ident" id="6097454">i</span><span class="op" id="6097455">]</span><span class="op" id="6097456">.</span><span class="ident" id="6097457">Line1</span><span class="op" id="6097462">,</span>&nbsp;<span class="ident" id="6097464">blocks</span><span class="op" id="6097470">[</span><span class="ident" id="6097471">i</span><span class="op" id="6097472">]</span><span class="op" id="6097473">.</span><span class="ident" id="6097474">Col1</span><span class="op" id="6097478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097485">stmts</span><span class="op" id="6097490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097497">count</span><span class="op" id="6097502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097508">mustBeNil</span><span class="op" id="6097517">(</span><span class="ident" id="6097518">err</span><span class="op" id="6097521">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6097536">if</span>&nbsp;<span class="ident" id="6097539">total</span>&nbsp;<span class="op" id="6097545">==</span>&nbsp;<span class="num" id="6097548">0</span>&nbsp;<span class="op" id="6097550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097554">total</span>&nbsp;<span class="op" id="6097560">=</span>&nbsp;<span class="num" id="6097562">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6097565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6097568">fmt</span><span class="op" id="6097571">.</span><span class="ident" id="6097572">Printf</span><span class="op" id="6097578">(</span><span class="string" id="6097579">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="6097615">,</span>&nbsp;<span class="num" id="6097617">100</span><span class="op" id="6097620">*</span><span class="builtintype" id="6097621">float64</span><span class="op" id="6097628">(</span><span class="ident" id="6097629">active</span><span class="op" id="6097635">)</span><span class="op" id="6097636">/</span><span class="builtintype" id="6097637">float64</span><span class="op" id="6097644">(</span><span class="ident" id="6097645">total</span><span class="op" id="6097650">)</span><span class="op" id="6097651">,</span>&nbsp;<span class="ident" id="6097653">cover</span><span class="op" id="6097658">.</span><span class="ident" id="6097659">CoveredPackages</span><span class="op" id="6097674">)</span><br>
<span class="lineno"></span><span class="op" id="6097676">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
