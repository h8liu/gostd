<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5136778">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5136833">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5136887">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5136938">package</span>&nbsp;<span class="ident" id="5136946">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5136951">import</span>&nbsp;<span class="string" id="5136958">&#34;fmt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5136965">//&nbsp;Errors&nbsp;in&nbsp;decoding&nbsp;and&nbsp;encoding&nbsp;are&nbsp;handled&nbsp;using&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno">10</span><span class="comment" id="5137037">//&nbsp;Panics&nbsp;caused&nbsp;by&nbsp;user&nbsp;error&nbsp;(that&nbsp;is,&nbsp;everything&nbsp;except&nbsp;run-time&nbsp;panics</span><br>
<span class="lineno"></span><span class="comment" id="5137112">//&nbsp;such&nbsp;as&nbsp;&#34;index&nbsp;out&nbsp;of&nbsp;bounds&#34;&nbsp;errors)&nbsp;do&nbsp;not&nbsp;leave&nbsp;the&nbsp;file&nbsp;that&nbsp;caused</span><br>
<span class="lineno"></span><span class="comment" id="5137187">//&nbsp;them,&nbsp;but&nbsp;are&nbsp;instead&nbsp;turned&nbsp;into&nbsp;plain&nbsp;error&nbsp;returns.&nbsp;&nbsp;Encoding&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5137259">//&nbsp;decoding&nbsp;functions&nbsp;and&nbsp;methods&nbsp;that&nbsp;do&nbsp;not&nbsp;return&nbsp;an&nbsp;error&nbsp;either&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="5137332">//&nbsp;panic&nbsp;to&nbsp;report&nbsp;an&nbsp;error&nbsp;or&nbsp;are&nbsp;guaranteed&nbsp;error-free.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5137391">//&nbsp;A&nbsp;gobError&nbsp;is&nbsp;used&nbsp;to&nbsp;distinguish&nbsp;errors&nbsp;(panics)&nbsp;generated&nbsp;in&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5137471">type</span>&nbsp;<span class="ident" id="5137476">gobError</span>&nbsp;<span class="keyword" id="5137485">struct</span>&nbsp;<span class="op" id="5137492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137495">err</span>&nbsp;<span class="builtintype" id="5137499">error</span><br>
<span class="lineno"></span><span class="op" id="5137505">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5137508">//&nbsp;errorf&nbsp;is&nbsp;like&nbsp;error_&nbsp;but&nbsp;takes&nbsp;Printf-style&nbsp;arguments&nbsp;to&nbsp;construct&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5137589">//&nbsp;It&nbsp;always&nbsp;prefixes&nbsp;the&nbsp;message&nbsp;with&nbsp;&#34;gob:&nbsp;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5137637">func</span>&nbsp;<span class="ident" id="5137642">errorf</span><span class="op" id="5137648">(</span><span class="ident" id="5137649">format</span>&nbsp;<span class="builtintype" id="5137656">string</span><span class="op" id="5137662">,</span>&nbsp;<span class="ident" id="5137664">args</span>&nbsp;<span class="op" id="5137669">...</span><span class="keyword" id="5137672">interface</span><span class="op" id="5137681">{</span><span class="op" id="5137682">}</span><span class="op" id="5137683">)</span>&nbsp;<span class="op" id="5137685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137688"><a href="/encoding/gob/error.go.html#5137812">error_</a></span><span class="op" id="5137694">(</span><span class="ident" id="5137695"><a href="/encoding/gob/error.go.html#5136958">fmt</a></span><span class="op" id="5137698">.</span><span class="ident" id="5137699">Errorf</span><span class="op" id="5137705">(</span><span class="string" id="5137706">&#34;gob:&nbsp;&#34;</span><span class="op" id="5137713">+</span><span class="ident" id="5137714"><a href="/encoding/gob/error.go.html#5137649">format</a></span><span class="op" id="5137720">,</span>&nbsp;<span class="ident" id="5137722"><a href="/encoding/gob/error.go.html#5137664">args</a></span><span class="op" id="5137726">...</span><span class="op" id="5137729">)</span><span class="op" id="5137730">)</span><br>
<span class="lineno">25</span><span class="op" id="5137732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137735">//&nbsp;error&nbsp;wraps&nbsp;the&nbsp;argument&nbsp;error&nbsp;and&nbsp;uses&nbsp;it&nbsp;as&nbsp;the&nbsp;argument&nbsp;to&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="5137807">func</span>&nbsp;<span class="ident" id="5137812">error_</span><span class="op" id="5137818">(</span><span class="ident" id="5137819">err</span>&nbsp;<span class="builtintype" id="5137823">error</span><span class="op" id="5137828">)</span>&nbsp;<span class="op" id="5137830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5137833">panic</span><span class="op" id="5137838">(</span><span class="ident" id="5137839"><a href="/encoding/gob/error.go.html#5137476">gobError</a></span><span class="op" id="5137847">{</span><span class="ident" id="5137848"><a href="/encoding/gob/error.go.html#5137819">err</a></span><span class="op" id="5137851">}</span><span class="op" id="5137852">)</span><br>
<span class="lineno">30</span><span class="op" id="5137854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137857">//&nbsp;catchError&nbsp;is&nbsp;meant&nbsp;to&nbsp;be&nbsp;used&nbsp;as&nbsp;a&nbsp;deferred&nbsp;function&nbsp;to&nbsp;turn&nbsp;a&nbsp;panic(gobError)&nbsp;into&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5137947">//&nbsp;plain&nbsp;error.&nbsp;&nbsp;It&nbsp;overwrites&nbsp;the&nbsp;error&nbsp;return&nbsp;of&nbsp;the&nbsp;function&nbsp;that&nbsp;deferred&nbsp;its&nbsp;call.</span><br>
<span class="lineno"></span><span class="keyword" id="5138035">func</span>&nbsp;<span class="ident" id="5138040">catchError</span><span class="op" id="5138050">(</span><span class="ident" id="5138051">err</span>&nbsp;<span class="op" id="5138055">*</span><span class="builtintype" id="5138056">error</span><span class="op" id="5138061">)</span>&nbsp;<span class="op" id="5138063">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138066">if</span>&nbsp;<span class="ident" id="5138069">e</span>&nbsp;<span class="op" id="5138071">:=</span>&nbsp;<span class="builtinfunc" id="5138074">recover</span><span class="op" id="5138081">(</span><span class="op" id="5138082">)</span><span class="op" id="5138083">;</span>&nbsp;<span class="ident" id="5138085"><a href="/encoding/gob/error.go.html#5138069">e</a></span>&nbsp;<span class="op" id="5138087">!=</span>&nbsp;<span class="ident" id="5138090">nil</span>&nbsp;<span class="op" id="5138094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138098">ge</span><span class="op" id="5138100">,</span>&nbsp;<span class="ident" id="5138102">ok</span>&nbsp;<span class="op" id="5138105">:=</span>&nbsp;<span class="ident" id="5138108"><a href="/encoding/gob/error.go.html#5138069">e</a></span><span class="op" id="5138109">.</span><span class="op" id="5138110">(</span><span class="ident" id="5138111"><a href="/encoding/gob/error.go.html#5137476">gobError</a></span><span class="op" id="5138119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138123">if</span>&nbsp;<span class="op" id="5138126">!</span><span class="ident" id="5138127"><a href="/encoding/gob/error.go.html#5138102">ok</a></span>&nbsp;<span class="op" id="5138130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5138135">panic</span><span class="op" id="5138140">(</span><span class="ident" id="5138141"><a href="/encoding/gob/error.go.html#5138069">e</a></span><span class="op" id="5138142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138146">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138150">*</span><span class="ident" id="5138151"><a href="/encoding/gob/error.go.html#5138051">err</a></span>&nbsp;<span class="op" id="5138155">=</span>&nbsp;<span class="ident" id="5138157"><a href="/encoding/gob/error.go.html#5138098">ge</a></span><span class="op" id="5138159">.</span><span class="ident" id="5138160">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138168">return</span><br>
<span class="lineno"></span><span class="op" id="5138175">}</span>
</div>
</body>
</html>
