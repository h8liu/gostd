<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7954513">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7954568">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7954622">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7954673">package</span>&nbsp;<span class="ident" id="7954681">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7954686">import</span>&nbsp;<span class="op" id="7954693">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954696">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954705">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954719">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954726">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954732">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954745">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954751">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954762">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954773">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7954784">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7954791">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7954794">type</span>&nbsp;<span class="ident" id="7954799">untarTest</span>&nbsp;<span class="keyword" id="7954809">struct</span>&nbsp;<span class="op" id="7954816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954819">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7954827">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954835">headers</span>&nbsp;<span class="op" id="7954843">[</span><span class="op" id="7954844">]</span><span class="op" id="7954845">*</span><span class="ident" id="7954846">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954854">cksums</span>&nbsp;&nbsp;<span class="op" id="7954862">[</span><span class="op" id="7954863">]</span><span class="builtintype" id="7954864">string</span><br>
<span class="lineno"></span><span class="op" id="7954871">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7954874">var</span>&nbsp;<span class="ident" id="7954878">gnuTarTest</span>&nbsp;<span class="op" id="7954889">=</span>&nbsp;<span class="op" id="7954891">&amp;</span><span class="ident" id="7954892">untarTest</span><span class="op" id="7954901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954904">file</span><span class="op" id="7954908">:</span>&nbsp;<span class="string" id="7954910">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7954928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954931">headers</span><span class="op" id="7954938">:</span>&nbsp;<span class="op" id="7954940">[</span><span class="op" id="7954941">]</span><span class="op" id="7954942">*</span><span class="ident" id="7954943">Header</span><span class="op" id="7954949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7954953">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954958">Name</span><span class="op" id="7954962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7954968">&#34;small.txt&#34;</span><span class="op" id="7954979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7954984">Mode</span><span class="op" id="7954988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7954994">0640</span><span class="op" id="7954998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955003">Uid</span><span class="op" id="7955006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955013">73025</span><span class="op" id="7955018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955023">Gid</span><span class="op" id="7955026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955033">5000</span><span class="op" id="7955037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955042">Size</span><span class="op" id="7955046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955052">5</span><span class="op" id="7955053">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955058">ModTime</span><span class="op" id="7955065">:</span>&nbsp;&nbsp;<span class="ident" id="7955068">time</span><span class="op" id="7955072">.</span><span class="ident" id="7955073">Unix</span><span class="op" id="7955077">(</span><span class="num" id="7955078">1244428340</span><span class="op" id="7955088">,</span>&nbsp;<span class="num" id="7955090">0</span><span class="op" id="7955091">)</span><span class="op" id="7955092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955097">Typeflag</span><span class="op" id="7955105">:</span>&nbsp;<span class="string" id="7955107">&#39;0&#39;</span><span class="op" id="7955110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955115">Uname</span><span class="op" id="7955120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955125">&#34;dsymonds&#34;</span><span class="op" id="7955135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955140">Gname</span><span class="op" id="7955145">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955150">&#34;eng&#34;</span><span class="op" id="7955155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955159">}</span><span class="op" id="7955160">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955169">Name</span><span class="op" id="7955173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955179">&#34;small2.txt&#34;</span><span class="op" id="7955191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955196">Mode</span><span class="op" id="7955200">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955206">0640</span><span class="op" id="7955210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955215">Uid</span><span class="op" id="7955218">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955225">73025</span><span class="op" id="7955230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955235">Gid</span><span class="op" id="7955238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955245">5000</span><span class="op" id="7955249">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955254">Size</span><span class="op" id="7955258">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955264">11</span><span class="op" id="7955266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955271">ModTime</span><span class="op" id="7955278">:</span>&nbsp;&nbsp;<span class="ident" id="7955281">time</span><span class="op" id="7955285">.</span><span class="ident" id="7955286">Unix</span><span class="op" id="7955290">(</span><span class="num" id="7955291">1244436044</span><span class="op" id="7955301">,</span>&nbsp;<span class="num" id="7955303">0</span><span class="op" id="7955304">)</span><span class="op" id="7955305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955310">Typeflag</span><span class="op" id="7955318">:</span>&nbsp;<span class="string" id="7955320">&#39;0&#39;</span><span class="op" id="7955323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955328">Uname</span><span class="op" id="7955333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955338">&#34;dsymonds&#34;</span><span class="op" id="7955348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955353">Gname</span><span class="op" id="7955358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955363">&#34;eng&#34;</span><span class="op" id="7955368">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955372">}</span><span class="op" id="7955373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955376">}</span><span class="op" id="7955377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955380">cksums</span><span class="op" id="7955386">:</span>&nbsp;<span class="op" id="7955388">[</span><span class="op" id="7955389">]</span><span class="builtintype" id="7955390">string</span><span class="op" id="7955396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955400">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="7955434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7955438">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="7955472">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955475">}</span><span class="op" id="7955476">,</span><br>
<span class="lineno"></span><span class="op" id="7955478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7955481">var</span>&nbsp;<span class="ident" id="7955485">sparseTarTest</span>&nbsp;<span class="op" id="7955499">=</span>&nbsp;<span class="op" id="7955501">&amp;</span><span class="ident" id="7955502">untarTest</span><span class="op" id="7955511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955514">file</span><span class="op" id="7955518">:</span>&nbsp;<span class="string" id="7955520">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="7955549">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955552">headers</span><span class="op" id="7955559">:</span>&nbsp;<span class="op" id="7955561">[</span><span class="op" id="7955562">]</span><span class="op" id="7955563">*</span><span class="ident" id="7955564">Header</span><span class="op" id="7955570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955579">Name</span><span class="op" id="7955583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955589">&#34;sparse-gnu&#34;</span><span class="op" id="7955601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955606">Mode</span><span class="op" id="7955610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955616">420</span><span class="op" id="7955619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955624">Uid</span><span class="op" id="7955627">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955634">1000</span><span class="op" id="7955638">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955643">Gid</span><span class="op" id="7955646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955653">1000</span><span class="op" id="7955657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955662">Size</span><span class="op" id="7955666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955672">200</span><span class="op" id="7955675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955680">ModTime</span><span class="op" id="7955687">:</span>&nbsp;&nbsp;<span class="ident" id="7955690">time</span><span class="op" id="7955694">.</span><span class="ident" id="7955695">Unix</span><span class="op" id="7955699">(</span><span class="num" id="7955700">1392395740</span><span class="op" id="7955710">,</span>&nbsp;<span class="num" id="7955712">0</span><span class="op" id="7955713">)</span><span class="op" id="7955714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955719">Typeflag</span><span class="op" id="7955727">:</span>&nbsp;<span class="num" id="7955729">0x53</span><span class="op" id="7955733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955738">Linkname</span><span class="op" id="7955746">:</span>&nbsp;<span class="string" id="7955748">&#34;&#34;</span><span class="op" id="7955750">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955755">Uname</span><span class="op" id="7955760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955765">&#34;david&#34;</span><span class="op" id="7955772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955777">Gname</span><span class="op" id="7955782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955787">&#34;david&#34;</span><span class="op" id="7955794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955799">Devmajor</span><span class="op" id="7955807">:</span>&nbsp;<span class="num" id="7955809">0</span><span class="op" id="7955810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955815">Devminor</span><span class="op" id="7955823">:</span>&nbsp;<span class="num" id="7955825">0</span><span class="op" id="7955826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955830">}</span><span class="op" id="7955831">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7955835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955840">Name</span><span class="op" id="7955844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7955850">&#34;sparse-posix-0.0&#34;</span><span class="op" id="7955868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955873">Mode</span><span class="op" id="7955877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955883">420</span><span class="op" id="7955886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955891">Uid</span><span class="op" id="7955894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955901">1000</span><span class="op" id="7955905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955910">Gid</span><span class="op" id="7955913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955920">1000</span><span class="op" id="7955924">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955929">Size</span><span class="op" id="7955933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7955939">200</span><span class="op" id="7955942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955947">ModTime</span><span class="op" id="7955954">:</span>&nbsp;&nbsp;<span class="ident" id="7955957">time</span><span class="op" id="7955961">.</span><span class="ident" id="7955962">Unix</span><span class="op" id="7955966">(</span><span class="num" id="7955967">1392342187</span><span class="op" id="7955977">,</span>&nbsp;<span class="num" id="7955979">0</span><span class="op" id="7955980">)</span><span class="op" id="7955981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7955986">Typeflag</span><span class="op" id="7955994">:</span>&nbsp;<span class="num" id="7955996">0x30</span><span class="op" id="7956000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956005">Linkname</span><span class="op" id="7956013">:</span>&nbsp;<span class="string" id="7956015">&#34;&#34;</span><span class="op" id="7956017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956022">Uname</span><span class="op" id="7956027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956032">&#34;david&#34;</span><span class="op" id="7956039">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956044">Gname</span><span class="op" id="7956049">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956054">&#34;david&#34;</span><span class="op" id="7956061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956066">Devmajor</span><span class="op" id="7956074">:</span>&nbsp;<span class="num" id="7956076">0</span><span class="op" id="7956077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956082">Devminor</span><span class="op" id="7956090">:</span>&nbsp;<span class="num" id="7956092">0</span><span class="op" id="7956093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956097">}</span><span class="op" id="7956098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956102">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956107">Name</span><span class="op" id="7956111">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956117">&#34;sparse-posix-0.1&#34;</span><span class="op" id="7956135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956140">Mode</span><span class="op" id="7956144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956150">420</span><span class="op" id="7956153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956158">Uid</span><span class="op" id="7956161">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956168">1000</span><span class="op" id="7956172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956177">Gid</span><span class="op" id="7956180">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956187">1000</span><span class="op" id="7956191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956196">Size</span><span class="op" id="7956200">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956206">200</span><span class="op" id="7956209">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956214">ModTime</span><span class="op" id="7956221">:</span>&nbsp;&nbsp;<span class="ident" id="7956224">time</span><span class="op" id="7956228">.</span><span class="ident" id="7956229">Unix</span><span class="op" id="7956233">(</span><span class="num" id="7956234">1392340456</span><span class="op" id="7956244">,</span>&nbsp;<span class="num" id="7956246">0</span><span class="op" id="7956247">)</span><span class="op" id="7956248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956253">Typeflag</span><span class="op" id="7956261">:</span>&nbsp;<span class="num" id="7956263">0x30</span><span class="op" id="7956267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956272">Linkname</span><span class="op" id="7956280">:</span>&nbsp;<span class="string" id="7956282">&#34;&#34;</span><span class="op" id="7956284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956289">Uname</span><span class="op" id="7956294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956299">&#34;david&#34;</span><span class="op" id="7956306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956311">Gname</span><span class="op" id="7956316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956321">&#34;david&#34;</span><span class="op" id="7956328">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956333">Devmajor</span><span class="op" id="7956341">:</span>&nbsp;<span class="num" id="7956343">0</span><span class="op" id="7956344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956349">Devminor</span><span class="op" id="7956357">:</span>&nbsp;<span class="num" id="7956359">0</span><span class="op" id="7956360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956364">}</span><span class="op" id="7956365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956374">Name</span><span class="op" id="7956378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956384">&#34;sparse-posix-1.0&#34;</span><span class="op" id="7956402">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956407">Mode</span><span class="op" id="7956411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956417">420</span><span class="op" id="7956420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956425">Uid</span><span class="op" id="7956428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956435">1000</span><span class="op" id="7956439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956444">Gid</span><span class="op" id="7956447">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956454">1000</span><span class="op" id="7956458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956463">Size</span><span class="op" id="7956467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956473">200</span><span class="op" id="7956476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956481">ModTime</span><span class="op" id="7956488">:</span>&nbsp;&nbsp;<span class="ident" id="7956491">time</span><span class="op" id="7956495">.</span><span class="ident" id="7956496">Unix</span><span class="op" id="7956500">(</span><span class="num" id="7956501">1392337404</span><span class="op" id="7956511">,</span>&nbsp;<span class="num" id="7956513">0</span><span class="op" id="7956514">)</span><span class="op" id="7956515">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956520">Typeflag</span><span class="op" id="7956528">:</span>&nbsp;<span class="num" id="7956530">0x30</span><span class="op" id="7956534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956539">Linkname</span><span class="op" id="7956547">:</span>&nbsp;<span class="string" id="7956549">&#34;&#34;</span><span class="op" id="7956551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956556">Uname</span><span class="op" id="7956561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956566">&#34;david&#34;</span><span class="op" id="7956573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956578">Gname</span><span class="op" id="7956583">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956588">&#34;david&#34;</span><span class="op" id="7956595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956600">Devmajor</span><span class="op" id="7956608">:</span>&nbsp;<span class="num" id="7956610">0</span><span class="op" id="7956611">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956616">Devminor</span><span class="op" id="7956624">:</span>&nbsp;<span class="num" id="7956626">0</span><span class="op" id="7956627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956631">}</span><span class="op" id="7956632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956641">Name</span><span class="op" id="7956645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956651">&#34;end&#34;</span><span class="op" id="7956656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956661">Mode</span><span class="op" id="7956665">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956671">420</span><span class="op" id="7956674">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956679">Uid</span><span class="op" id="7956682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956689">1000</span><span class="op" id="7956693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956698">Gid</span><span class="op" id="7956701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956708">1000</span><span class="op" id="7956712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956717">Size</span><span class="op" id="7956721">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7956727">4</span><span class="op" id="7956728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956733">ModTime</span><span class="op" id="7956740">:</span>&nbsp;&nbsp;<span class="ident" id="7956743">time</span><span class="op" id="7956747">.</span><span class="ident" id="7956748">Unix</span><span class="op" id="7956752">(</span><span class="num" id="7956753">1392398319</span><span class="op" id="7956763">,</span>&nbsp;<span class="num" id="7956765">0</span><span class="op" id="7956766">)</span><span class="op" id="7956767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956772">Typeflag</span><span class="op" id="7956780">:</span>&nbsp;<span class="num" id="7956782">0x30</span><span class="op" id="7956786">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956791">Linkname</span><span class="op" id="7956799">:</span>&nbsp;<span class="string" id="7956801">&#34;&#34;</span><span class="op" id="7956803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956808">Uname</span><span class="op" id="7956813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956818">&#34;david&#34;</span><span class="op" id="7956825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956830">Gname</span><span class="op" id="7956835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7956840">&#34;david&#34;</span><span class="op" id="7956847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956852">Devmajor</span><span class="op" id="7956860">:</span>&nbsp;<span class="num" id="7956862">0</span><span class="op" id="7956863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956868">Devminor</span><span class="op" id="7956876">:</span>&nbsp;<span class="num" id="7956878">0</span><span class="op" id="7956879">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956883">}</span><span class="op" id="7956884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7956887">}</span><span class="op" id="7956888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7956891">cksums</span><span class="op" id="7956897">:</span>&nbsp;<span class="op" id="7956899">[</span><span class="op" id="7956900">]</span><span class="builtintype" id="7956901">string</span><span class="op" id="7956907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7956911">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7956945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7956949">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7956983">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7956987">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7957021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7957025">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="7957059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7957063">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="7957097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957100">}</span><span class="op" id="7957101">,</span><br>
<span class="lineno"></span><span class="op" id="7957103">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7957106">var</span>&nbsp;<span class="ident" id="7957110">untarTests</span>&nbsp;<span class="op" id="7957121">=</span>&nbsp;<span class="op" id="7957123">[</span><span class="op" id="7957124">]</span><span class="op" id="7957125">*</span><span class="ident" id="7957126">untarTest</span><span class="op" id="7957135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957138">gnuTarTest</span><span class="op" id="7957148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957151">sparseTarTest</span><span class="op" id="7957164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957167">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957171">file</span><span class="op" id="7957175">:</span>&nbsp;<span class="string" id="7957177">&#34;testdata/star.tar&#34;</span><span class="op" id="7957196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957200">headers</span><span class="op" id="7957207">:</span>&nbsp;<span class="op" id="7957209">[</span><span class="op" id="7957210">]</span><span class="op" id="7957211">*</span><span class="ident" id="7957212">Header</span><span class="op" id="7957218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957229">Name</span><span class="op" id="7957233">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957241">&#34;small.txt&#34;</span><span class="op" id="7957252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957258">Mode</span><span class="op" id="7957262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957270">0640</span><span class="op" id="7957274">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957280">Uid</span><span class="op" id="7957283">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957292">73025</span><span class="op" id="7957297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957303">Gid</span><span class="op" id="7957306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957315">5000</span><span class="op" id="7957319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957325">Size</span><span class="op" id="7957329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957337">5</span><span class="op" id="7957338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957344">ModTime</span><span class="op" id="7957351">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7957356">time</span><span class="op" id="7957360">.</span><span class="ident" id="7957361">Unix</span><span class="op" id="7957365">(</span><span class="num" id="7957366">1244592783</span><span class="op" id="7957376">,</span>&nbsp;<span class="num" id="7957378">0</span><span class="op" id="7957379">)</span><span class="op" id="7957380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957386">Typeflag</span><span class="op" id="7957394">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7957398">&#39;0&#39;</span><span class="op" id="7957401">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957407">Uname</span><span class="op" id="7957412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957419">&#34;dsymonds&#34;</span><span class="op" id="7957429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957435">Gname</span><span class="op" id="7957440">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957447">&#34;eng&#34;</span><span class="op" id="7957452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957458">AccessTime</span><span class="op" id="7957468">:</span>&nbsp;<span class="ident" id="7957470">time</span><span class="op" id="7957474">.</span><span class="ident" id="7957475">Unix</span><span class="op" id="7957479">(</span><span class="num" id="7957480">1244592783</span><span class="op" id="7957490">,</span>&nbsp;<span class="num" id="7957492">0</span><span class="op" id="7957493">)</span><span class="op" id="7957494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957500">ChangeTime</span><span class="op" id="7957510">:</span>&nbsp;<span class="ident" id="7957512">time</span><span class="op" id="7957516">.</span><span class="ident" id="7957517">Unix</span><span class="op" id="7957521">(</span><span class="num" id="7957522">1244592783</span><span class="op" id="7957532">,</span>&nbsp;<span class="num" id="7957534">0</span><span class="op" id="7957535">)</span><span class="op" id="7957536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957541">}</span><span class="op" id="7957542">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957553">Name</span><span class="op" id="7957557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957565">&#34;small2.txt&#34;</span><span class="op" id="7957577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957583">Mode</span><span class="op" id="7957587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957595">0640</span><span class="op" id="7957599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957605">Uid</span><span class="op" id="7957608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957617">73025</span><span class="op" id="7957622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957628">Gid</span><span class="op" id="7957631">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957640">5000</span><span class="op" id="7957644">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957650">Size</span><span class="op" id="7957654">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957662">11</span><span class="op" id="7957664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957670">ModTime</span><span class="op" id="7957677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7957682">time</span><span class="op" id="7957686">.</span><span class="ident" id="7957687">Unix</span><span class="op" id="7957691">(</span><span class="num" id="7957692">1244592783</span><span class="op" id="7957702">,</span>&nbsp;<span class="num" id="7957704">0</span><span class="op" id="7957705">)</span><span class="op" id="7957706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957712">Typeflag</span><span class="op" id="7957720">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7957724">&#39;0&#39;</span><span class="op" id="7957727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957733">Uname</span><span class="op" id="7957738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957745">&#34;dsymonds&#34;</span><span class="op" id="7957755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957761">Gname</span><span class="op" id="7957766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957773">&#34;eng&#34;</span><span class="op" id="7957778">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957784">AccessTime</span><span class="op" id="7957794">:</span>&nbsp;<span class="ident" id="7957796">time</span><span class="op" id="7957800">.</span><span class="ident" id="7957801">Unix</span><span class="op" id="7957805">(</span><span class="num" id="7957806">1244592783</span><span class="op" id="7957816">,</span>&nbsp;<span class="num" id="7957818">0</span><span class="op" id="7957819">)</span><span class="op" id="7957820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957826">ChangeTime</span><span class="op" id="7957836">:</span>&nbsp;<span class="ident" id="7957838">time</span><span class="op" id="7957842">.</span><span class="ident" id="7957843">Unix</span><span class="op" id="7957847">(</span><span class="num" id="7957848">1244592783</span><span class="op" id="7957858">,</span>&nbsp;<span class="num" id="7957860">0</span><span class="op" id="7957861">)</span><span class="op" id="7957862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957867">}</span><span class="op" id="7957868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957872">}</span><span class="op" id="7957873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957876">}</span><span class="op" id="7957877">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957884">file</span><span class="op" id="7957888">:</span>&nbsp;<span class="string" id="7957890">&#34;testdata/v7.tar&#34;</span><span class="op" id="7957907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957911">headers</span><span class="op" id="7957918">:</span>&nbsp;<span class="op" id="7957920">[</span><span class="op" id="7957921">]</span><span class="op" id="7957922">*</span><span class="ident" id="7957923">Header</span><span class="op" id="7957929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7957934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957940">Name</span><span class="op" id="7957944">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7957950">&#34;small.txt&#34;</span><span class="op" id="7957961">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957967">Mode</span><span class="op" id="7957971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957977">0444</span><span class="op" id="7957981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7957987">Uid</span><span class="op" id="7957990">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7957997">73025</span><span class="op" id="7958002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958008">Gid</span><span class="op" id="7958011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958018">5000</span><span class="op" id="7958022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958028">Size</span><span class="op" id="7958032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958038">5</span><span class="op" id="7958039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958045">ModTime</span><span class="op" id="7958052">:</span>&nbsp;&nbsp;<span class="ident" id="7958055">time</span><span class="op" id="7958059">.</span><span class="ident" id="7958060">Unix</span><span class="op" id="7958064">(</span><span class="num" id="7958065">1244593104</span><span class="op" id="7958075">,</span>&nbsp;<span class="num" id="7958077">0</span><span class="op" id="7958078">)</span><span class="op" id="7958079">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958085">Typeflag</span><span class="op" id="7958093">:</span>&nbsp;<span class="string" id="7958095">&#39;\x00&#39;</span><span class="op" id="7958101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958106">}</span><span class="op" id="7958107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958118">Name</span><span class="op" id="7958122">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958128">&#34;small2.txt&#34;</span><span class="op" id="7958140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958146">Mode</span><span class="op" id="7958150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958156">0444</span><span class="op" id="7958160">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958166">Uid</span><span class="op" id="7958169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958176">73025</span><span class="op" id="7958181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958187">Gid</span><span class="op" id="7958190">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958197">5000</span><span class="op" id="7958201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958207">Size</span><span class="op" id="7958211">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958217">11</span><span class="op" id="7958219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958225">ModTime</span><span class="op" id="7958232">:</span>&nbsp;&nbsp;<span class="ident" id="7958235">time</span><span class="op" id="7958239">.</span><span class="ident" id="7958240">Unix</span><span class="op" id="7958244">(</span><span class="num" id="7958245">1244593104</span><span class="op" id="7958255">,</span>&nbsp;<span class="num" id="7958257">0</span><span class="op" id="7958258">)</span><span class="op" id="7958259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958265">Typeflag</span><span class="op" id="7958273">:</span>&nbsp;<span class="string" id="7958275">&#39;\x00&#39;</span><span class="op" id="7958281">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958286">}</span><span class="op" id="7958287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958291">}</span><span class="op" id="7958292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958295">}</span><span class="op" id="7958296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958303">file</span><span class="op" id="7958307">:</span>&nbsp;<span class="string" id="7958309">&#34;testdata/pax.tar&#34;</span><span class="op" id="7958327">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958331">headers</span><span class="op" id="7958338">:</span>&nbsp;<span class="op" id="7958340">[</span><span class="op" id="7958341">]</span><span class="op" id="7958342">*</span><span class="ident" id="7958343">Header</span><span class="op" id="7958349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958360">Name</span><span class="op" id="7958364">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958372">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7958568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958574">Mode</span><span class="op" id="7958578">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958586">0664</span><span class="op" id="7958590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958596">Uid</span><span class="op" id="7958599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958608">1000</span><span class="op" id="7958612">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958618">Gid</span><span class="op" id="7958621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958630">1000</span><span class="op" id="7958634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958640">Uname</span><span class="op" id="7958645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958652">&#34;shane&#34;</span><span class="op" id="7958659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958665">Gname</span><span class="op" id="7958670">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958677">&#34;shane&#34;</span><span class="op" id="7958684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958690">Size</span><span class="op" id="7958694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958702">7</span><span class="op" id="7958703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958709">ModTime</span><span class="op" id="7958716">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7958721">time</span><span class="op" id="7958725">.</span><span class="ident" id="7958726">Unix</span><span class="op" id="7958730">(</span><span class="num" id="7958731">1350244992</span><span class="op" id="7958741">,</span>&nbsp;<span class="num" id="7958743">23960108</span><span class="op" id="7958751">)</span><span class="op" id="7958752">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958758">ChangeTime</span><span class="op" id="7958768">:</span>&nbsp;<span class="ident" id="7958770">time</span><span class="op" id="7958774">.</span><span class="ident" id="7958775">Unix</span><span class="op" id="7958779">(</span><span class="num" id="7958780">1350244992</span><span class="op" id="7958790">,</span>&nbsp;<span class="num" id="7958792">23960108</span><span class="op" id="7958800">)</span><span class="op" id="7958801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958807">AccessTime</span><span class="op" id="7958817">:</span>&nbsp;<span class="ident" id="7958819">time</span><span class="op" id="7958823">.</span><span class="ident" id="7958824">Unix</span><span class="op" id="7958828">(</span><span class="num" id="7958829">1350244992</span><span class="op" id="7958839">,</span>&nbsp;<span class="num" id="7958841">23960108</span><span class="op" id="7958849">)</span><span class="op" id="7958850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958856">Typeflag</span><span class="op" id="7958864">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7958868">TypeReg</span><span class="op" id="7958875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958880">}</span><span class="op" id="7958881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7958886">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958892">Name</span><span class="op" id="7958896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958904">&#34;a/b&#34;</span><span class="op" id="7958909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958915">Mode</span><span class="op" id="7958919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958927">0777</span><span class="op" id="7958931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958937">Uid</span><span class="op" id="7958940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958949">1000</span><span class="op" id="7958953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958959">Gid</span><span class="op" id="7958962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7958971">1000</span><span class="op" id="7958975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7958981">Uname</span><span class="op" id="7958986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7958993">&#34;shane&#34;</span><span class="op" id="7959000">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959006">Gname</span><span class="op" id="7959011">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7959018">&#34;shane&#34;</span><span class="op" id="7959025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959031">Size</span><span class="op" id="7959035">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959043">0</span><span class="op" id="7959044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959050">ModTime</span><span class="op" id="7959057">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7959062">time</span><span class="op" id="7959066">.</span><span class="ident" id="7959067">Unix</span><span class="op" id="7959071">(</span><span class="num" id="7959072">1350266320</span><span class="op" id="7959082">,</span>&nbsp;<span class="num" id="7959084">910238425</span><span class="op" id="7959093">)</span><span class="op" id="7959094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959100">ChangeTime</span><span class="op" id="7959110">:</span>&nbsp;<span class="ident" id="7959112">time</span><span class="op" id="7959116">.</span><span class="ident" id="7959117">Unix</span><span class="op" id="7959121">(</span><span class="num" id="7959122">1350266320</span><span class="op" id="7959132">,</span>&nbsp;<span class="num" id="7959134">910238425</span><span class="op" id="7959143">)</span><span class="op" id="7959144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959150">AccessTime</span><span class="op" id="7959160">:</span>&nbsp;<span class="ident" id="7959162">time</span><span class="op" id="7959166">.</span><span class="ident" id="7959167">Unix</span><span class="op" id="7959171">(</span><span class="num" id="7959172">1350266320</span><span class="op" id="7959182">,</span>&nbsp;<span class="num" id="7959184">910238425</span><span class="op" id="7959193">)</span><span class="op" id="7959194">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959200">Typeflag</span><span class="op" id="7959208">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7959212">TypeSymlink</span><span class="op" id="7959223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959229">Linkname</span><span class="op" id="7959237">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7959241">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="7959435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959440">}</span><span class="op" id="7959441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959445">}</span><span class="op" id="7959446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959449">}</span><span class="op" id="7959450">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959457">file</span><span class="op" id="7959461">:</span>&nbsp;<span class="string" id="7959463">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="7959485">,</span>&nbsp;<span class="comment" id="7959487">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959514">headers</span><span class="op" id="7959521">:</span>&nbsp;<span class="op" id="7959523">[</span><span class="op" id="7959524">]</span><span class="op" id="7959525">*</span><span class="ident" id="7959526">Header</span><span class="op" id="7959532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959543">Name</span><span class="op" id="7959547">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7959553">&#34;P1050238.JPG.log&#34;</span><span class="op" id="7959571">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959577">Mode</span><span class="op" id="7959581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959587">0664</span><span class="op" id="7959591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959597">Uid</span><span class="op" id="7959600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959607">0</span><span class="op" id="7959608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959614">Gid</span><span class="op" id="7959617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959624">0</span><span class="op" id="7959625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959631">Size</span><span class="op" id="7959635">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959641">14</span><span class="op" id="7959643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959649">ModTime</span><span class="op" id="7959656">:</span>&nbsp;&nbsp;<span class="ident" id="7959659">time</span><span class="op" id="7959663">.</span><span class="ident" id="7959664">Unix</span><span class="op" id="7959668">(</span><span class="num" id="7959669">1365454838</span><span class="op" id="7959679">,</span>&nbsp;<span class="num" id="7959681">0</span><span class="op" id="7959682">)</span><span class="op" id="7959683">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959689">Typeflag</span><span class="op" id="7959697">:</span>&nbsp;<span class="ident" id="7959699">TypeReg</span><span class="op" id="7959706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959712">Linkname</span><span class="op" id="7959720">:</span>&nbsp;<span class="string" id="7959722">&#34;&#34;</span><span class="op" id="7959724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959730">Uname</span><span class="op" id="7959735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7959740">&#34;eyefi&#34;</span><span class="op" id="7959747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959753">Gname</span><span class="op" id="7959758">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7959763">&#34;eyefi&#34;</span><span class="op" id="7959770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959776">Devmajor</span><span class="op" id="7959784">:</span>&nbsp;<span class="num" id="7959786">0</span><span class="op" id="7959787">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959793">Devminor</span><span class="op" id="7959801">:</span>&nbsp;<span class="num" id="7959803">0</span><span class="op" id="7959804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959809">}</span><span class="op" id="7959810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959814">}</span><span class="op" id="7959815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959818">}</span><span class="op" id="7959819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959822">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959826">file</span><span class="op" id="7959830">:</span>&nbsp;<span class="string" id="7959832">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="7959853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959857">headers</span><span class="op" id="7959864">:</span>&nbsp;<span class="op" id="7959866">[</span><span class="op" id="7959867">]</span><span class="op" id="7959868">*</span><span class="ident" id="7959869">Header</span><span class="op" id="7959875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7959880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959886">Name</span><span class="op" id="7959890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7959898">&#34;small.txt&#34;</span><span class="op" id="7959909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959915">Mode</span><span class="op" id="7959919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959927">0644</span><span class="op" id="7959931">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959937">Uid</span><span class="op" id="7959940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959949">1000</span><span class="op" id="7959953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959959">Gid</span><span class="op" id="7959962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959971">10</span><span class="op" id="7959973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959979">Size</span><span class="op" id="7959983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7959991">5</span><span class="op" id="7959992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7959998">ModTime</span><span class="op" id="7960005">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7960010">time</span><span class="op" id="7960014">.</span><span class="ident" id="7960015">Unix</span><span class="op" id="7960019">(</span><span class="num" id="7960020">1386065770</span><span class="op" id="7960030">,</span>&nbsp;<span class="num" id="7960032">448252320</span><span class="op" id="7960041">)</span><span class="op" id="7960042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960048">Typeflag</span><span class="op" id="7960056">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7960060">&#39;0&#39;</span><span class="op" id="7960063">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960069">Uname</span><span class="op" id="7960074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7960081">&#34;alex&#34;</span><span class="op" id="7960087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960093">Gname</span><span class="op" id="7960098">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7960105">&#34;wheel&#34;</span><span class="op" id="7960112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960118">AccessTime</span><span class="op" id="7960128">:</span>&nbsp;<span class="ident" id="7960130">time</span><span class="op" id="7960134">.</span><span class="ident" id="7960135">Unix</span><span class="op" id="7960139">(</span><span class="num" id="7960140">1389782991</span><span class="op" id="7960150">,</span>&nbsp;<span class="num" id="7960152">419875220</span><span class="op" id="7960161">)</span><span class="op" id="7960162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960168">ChangeTime</span><span class="op" id="7960178">:</span>&nbsp;<span class="ident" id="7960180">time</span><span class="op" id="7960184">.</span><span class="ident" id="7960185">Unix</span><span class="op" id="7960189">(</span><span class="num" id="7960190">1389782956</span><span class="op" id="7960200">,</span>&nbsp;<span class="num" id="7960202">794414986</span><span class="op" id="7960211">)</span><span class="op" id="7960212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960218">Xattrs</span><span class="op" id="7960224">:</span>&nbsp;<span class="keyword" id="7960226">map</span><span class="op" id="7960229">[</span><span class="builtintype" id="7960230">string</span><span class="op" id="7960236">]</span><span class="builtintype" id="7960237">string</span><span class="op" id="7960243">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7960250">&#34;user.key&#34;</span><span class="op" id="7960260">:</span>&nbsp;&nbsp;<span class="string" id="7960263">&#34;value&#34;</span><span class="op" id="7960270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7960277">&#34;user.key2&#34;</span><span class="op" id="7960288">:</span>&nbsp;<span class="string" id="7960290">&#34;value2&#34;</span><span class="op" id="7960298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7960305">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7960382">&#34;security.selinux&#34;</span><span class="op" id="7960400">:</span>&nbsp;<span class="string" id="7960402">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7960442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960448">}</span><span class="op" id="7960449">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960454">}</span><span class="op" id="7960455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960466">Name</span><span class="op" id="7960470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7960478">&#34;small2.txt&#34;</span><span class="op" id="7960490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960496">Mode</span><span class="op" id="7960500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7960508">0644</span><span class="op" id="7960512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960518">Uid</span><span class="op" id="7960521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7960530">1000</span><span class="op" id="7960534">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960540">Gid</span><span class="op" id="7960543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7960552">10</span><span class="op" id="7960554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960560">Size</span><span class="op" id="7960564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7960572">11</span><span class="op" id="7960574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960580">ModTime</span><span class="op" id="7960587">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7960592">time</span><span class="op" id="7960596">.</span><span class="ident" id="7960597">Unix</span><span class="op" id="7960601">(</span><span class="num" id="7960602">1386065770</span><span class="op" id="7960612">,</span>&nbsp;<span class="num" id="7960614">449252304</span><span class="op" id="7960623">)</span><span class="op" id="7960624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960630">Typeflag</span><span class="op" id="7960638">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7960642">&#39;0&#39;</span><span class="op" id="7960645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960651">Uname</span><span class="op" id="7960656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7960663">&#34;alex&#34;</span><span class="op" id="7960669">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960675">Gname</span><span class="op" id="7960680">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7960687">&#34;wheel&#34;</span><span class="op" id="7960694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960700">AccessTime</span><span class="op" id="7960710">:</span>&nbsp;<span class="ident" id="7960712">time</span><span class="op" id="7960716">.</span><span class="ident" id="7960717">Unix</span><span class="op" id="7960721">(</span><span class="num" id="7960722">1389782991</span><span class="op" id="7960732">,</span>&nbsp;<span class="num" id="7960734">419875220</span><span class="op" id="7960743">)</span><span class="op" id="7960744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960750">ChangeTime</span><span class="op" id="7960760">:</span>&nbsp;<span class="ident" id="7960762">time</span><span class="op" id="7960766">.</span><span class="ident" id="7960767">Unix</span><span class="op" id="7960771">(</span><span class="num" id="7960772">1386065770</span><span class="op" id="7960782">,</span>&nbsp;<span class="num" id="7960784">449252304</span><span class="op" id="7960793">)</span><span class="op" id="7960794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960800">Xattrs</span><span class="op" id="7960806">:</span>&nbsp;<span class="keyword" id="7960808">map</span><span class="op" id="7960811">[</span><span class="builtintype" id="7960812">string</span><span class="op" id="7960818">]</span><span class="builtintype" id="7960819">string</span><span class="op" id="7960825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7960832">&#34;security.selinux&#34;</span><span class="op" id="7960850">:</span>&nbsp;<span class="string" id="7960852">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="7960892">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960898">}</span><span class="op" id="7960899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960904">}</span><span class="op" id="7960905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960909">}</span><span class="op" id="7960910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7960913">}</span><span class="op" id="7960914">,</span><br>
<span class="lineno"></span><span class="op" id="7960916">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="7960919">func</span>&nbsp;<span class="ident" id="7960924">TestReader</span><span class="op" id="7960934">(</span><span class="ident" id="7960935">t</span>&nbsp;<span class="op" id="7960937">*</span><span class="ident" id="7960938">testing</span><span class="op" id="7960945">.</span><span class="ident" id="7960946">T</span><span class="op" id="7960947">)</span>&nbsp;<span class="op" id="7960949">{</span><br>
<span class="lineno"></span><span class="ident" id="7960951">testLoop</span><span class="op" id="7960959">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7960962">for</span>&nbsp;<span class="ident" id="7960966">i</span><span class="op" id="7960967">,</span>&nbsp;<span class="ident" id="7960969">test</span>&nbsp;<span class="op" id="7960974">:=</span>&nbsp;<span class="keyword" id="7960977">range</span>&nbsp;<span class="ident" id="7960983">untarTests</span>&nbsp;<span class="op" id="7960994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7960998">f</span><span class="op" id="7960999">,</span>&nbsp;<span class="ident" id="7961001">err</span>&nbsp;<span class="op" id="7961005">:=</span>&nbsp;<span class="ident" id="7961008">os</span><span class="op" id="7961010">.</span><span class="ident" id="7961011">Open</span><span class="op" id="7961015">(</span><span class="ident" id="7961016">test</span><span class="op" id="7961020">.</span><span class="ident" id="7961021">file</span><span class="op" id="7961025">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961029">if</span>&nbsp;<span class="ident" id="7961032">err</span>&nbsp;<span class="op" id="7961036">!=</span>&nbsp;<span class="ident" id="7961039">nil</span>&nbsp;<span class="op" id="7961043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961048">t</span><span class="op" id="7961049">.</span><span class="ident" id="7961050">Errorf</span><span class="op" id="7961056">(</span><span class="string" id="7961057">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7961088">,</span>&nbsp;<span class="ident" id="7961090">i</span><span class="op" id="7961091">,</span>&nbsp;<span class="ident" id="7961093">err</span><span class="op" id="7961096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961101">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961116">defer</span>&nbsp;<span class="ident" id="7961122">f</span><span class="op" id="7961123">.</span><span class="ident" id="7961124">Close</span><span class="op" id="7961129">(</span><span class="op" id="7961130">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961134">tr</span>&nbsp;<span class="op" id="7961137">:=</span>&nbsp;<span class="ident" id="7961140">NewReader</span><span class="op" id="7961149">(</span><span class="ident" id="7961150">f</span><span class="op" id="7961151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961155">for</span>&nbsp;<span class="ident" id="7961159">j</span><span class="op" id="7961160">,</span>&nbsp;<span class="ident" id="7961162">header</span>&nbsp;<span class="op" id="7961169">:=</span>&nbsp;<span class="keyword" id="7961172">range</span>&nbsp;<span class="ident" id="7961178">test</span><span class="op" id="7961182">.</span><span class="ident" id="7961183">headers</span>&nbsp;<span class="op" id="7961191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961196">hdr</span><span class="op" id="7961199">,</span>&nbsp;<span class="ident" id="7961201">err</span>&nbsp;<span class="op" id="7961205">:=</span>&nbsp;<span class="ident" id="7961208">tr</span><span class="op" id="7961210">.</span><span class="ident" id="7961211">Next</span><span class="op" id="7961215">(</span><span class="op" id="7961216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961221">if</span>&nbsp;<span class="ident" id="7961224">err</span>&nbsp;<span class="op" id="7961228">!=</span>&nbsp;<span class="ident" id="7961231">nil</span>&nbsp;<span class="op" id="7961235">||</span>&nbsp;<span class="ident" id="7961238">hdr</span>&nbsp;<span class="op" id="7961242">==</span>&nbsp;<span class="ident" id="7961245">nil</span>&nbsp;<span class="op" id="7961249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961255">t</span><span class="op" id="7961256">.</span><span class="ident" id="7961257">Errorf</span><span class="op" id="7961263">(</span><span class="string" id="7961264">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="7961305">,</span>&nbsp;<span class="ident" id="7961307">i</span><span class="op" id="7961308">,</span>&nbsp;<span class="ident" id="7961310">j</span><span class="op" id="7961311">,</span>&nbsp;<span class="ident" id="7961313">err</span><span class="op" id="7961316">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961322">f</span><span class="op" id="7961323">.</span><span class="ident" id="7961324">Close</span><span class="op" id="7961329">(</span><span class="op" id="7961330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961336">continue</span>&nbsp;<span class="ident" id="7961345">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961362">if</span>&nbsp;<span class="op" id="7961365">!</span><span class="ident" id="7961366">reflect</span><span class="op" id="7961373">.</span><span class="ident" id="7961374">DeepEqual</span><span class="op" id="7961383">(</span><span class="op" id="7961384">*</span><span class="ident" id="7961385">hdr</span><span class="op" id="7961388">,</span>&nbsp;<span class="op" id="7961390">*</span><span class="ident" id="7961391">header</span><span class="op" id="7961397">)</span>&nbsp;<span class="op" id="7961399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961405">t</span><span class="op" id="7961406">.</span><span class="ident" id="7961407">Errorf</span><span class="op" id="7961413">(</span><span class="string" id="7961414">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7961472">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961479">i</span><span class="op" id="7961480">,</span>&nbsp;<span class="ident" id="7961482">j</span><span class="op" id="7961483">,</span>&nbsp;<span class="op" id="7961485">*</span><span class="ident" id="7961486">hdr</span><span class="op" id="7961489">,</span>&nbsp;<span class="op" id="7961491">*</span><span class="ident" id="7961492">header</span><span class="op" id="7961498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961511">hdr</span><span class="op" id="7961514">,</span>&nbsp;<span class="ident" id="7961516">err</span>&nbsp;<span class="op" id="7961520">:=</span>&nbsp;<span class="ident" id="7961523">tr</span><span class="op" id="7961525">.</span><span class="ident" id="7961526">Next</span><span class="op" id="7961530">(</span><span class="op" id="7961531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961535">if</span>&nbsp;<span class="ident" id="7961538">err</span>&nbsp;<span class="op" id="7961542">==</span>&nbsp;<span class="ident" id="7961545">io</span><span class="op" id="7961547">.</span><span class="ident" id="7961548">EOF</span>&nbsp;<span class="op" id="7961552">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961557">continue</span>&nbsp;<span class="ident" id="7961566">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961581">if</span>&nbsp;<span class="ident" id="7961584">hdr</span>&nbsp;<span class="op" id="7961588">!=</span>&nbsp;<span class="ident" id="7961591">nil</span>&nbsp;<span class="op" id="7961595">||</span>&nbsp;<span class="ident" id="7961598">err</span>&nbsp;<span class="op" id="7961602">!=</span>&nbsp;<span class="ident" id="7961605">nil</span>&nbsp;<span class="op" id="7961609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961614">t</span><span class="op" id="7961615">.</span><span class="ident" id="7961616">Errorf</span><span class="op" id="7961622">(</span><span class="string" id="7961623">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="7961674">,</span>&nbsp;<span class="ident" id="7961676">i</span><span class="op" id="7961677">,</span>&nbsp;<span class="ident" id="7961679">hdr</span><span class="op" id="7961682">,</span>&nbsp;<span class="ident" id="7961684">err</span><span class="op" id="7961687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961691">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961694">}</span><br>
<span class="lineno"></span><span class="op" id="7961696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7961699">func</span>&nbsp;<span class="ident" id="7961704">TestPartialRead</span><span class="op" id="7961719">(</span><span class="ident" id="7961720">t</span>&nbsp;<span class="op" id="7961722">*</span><span class="ident" id="7961723">testing</span><span class="op" id="7961730">.</span><span class="ident" id="7961731">T</span><span class="op" id="7961732">)</span>&nbsp;<span class="op" id="7961734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961737">f</span><span class="op" id="7961738">,</span>&nbsp;<span class="ident" id="7961740">err</span>&nbsp;<span class="op" id="7961744">:=</span>&nbsp;<span class="ident" id="7961747">os</span><span class="op" id="7961749">.</span><span class="ident" id="7961750">Open</span><span class="op" id="7961754">(</span><span class="string" id="7961755">&#34;testdata/gnu.tar&#34;</span><span class="op" id="7961773">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961776">if</span>&nbsp;<span class="ident" id="7961779">err</span>&nbsp;<span class="op" id="7961783">!=</span>&nbsp;<span class="ident" id="7961786">nil</span>&nbsp;<span class="op" id="7961790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961794">t</span><span class="op" id="7961795">.</span><span class="ident" id="7961796">Fatalf</span><span class="op" id="7961802">(</span><span class="string" id="7961803">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7961825">,</span>&nbsp;<span class="ident" id="7961827">err</span><span class="op" id="7961830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7961833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961836">defer</span>&nbsp;<span class="ident" id="7961842">f</span><span class="op" id="7961843">.</span><span class="ident" id="7961844">Close</span><span class="op" id="7961849">(</span><span class="op" id="7961850">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961854">tr</span>&nbsp;<span class="op" id="7961857">:=</span>&nbsp;<span class="ident" id="7961860">NewReader</span><span class="op" id="7961869">(</span><span class="ident" id="7961870">f</span><span class="op" id="7961871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7961875">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961940">hdr</span><span class="op" id="7961943">,</span>&nbsp;<span class="ident" id="7961945">err</span>&nbsp;<span class="op" id="7961949">:=</span>&nbsp;<span class="ident" id="7961952">tr</span><span class="op" id="7961954">.</span><span class="ident" id="7961955">Next</span><span class="op" id="7961959">(</span><span class="op" id="7961960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7961963">if</span>&nbsp;<span class="ident" id="7961966">err</span>&nbsp;<span class="op" id="7961970">!=</span>&nbsp;<span class="ident" id="7961973">nil</span>&nbsp;<span class="op" id="7961977">||</span>&nbsp;<span class="ident" id="7961980">hdr</span>&nbsp;<span class="op" id="7961984">==</span>&nbsp;<span class="ident" id="7961987">nil</span>&nbsp;<span class="op" id="7961991">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7961995">t</span><span class="op" id="7961996">.</span><span class="ident" id="7961997">Fatalf</span><span class="op" id="7962003">(</span><span class="string" id="7962004">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7962031">,</span>&nbsp;<span class="ident" id="7962033">err</span><span class="op" id="7962036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962042">buf</span>&nbsp;<span class="op" id="7962046">:=</span>&nbsp;<span class="builtinfunc" id="7962049">make</span><span class="op" id="7962053">(</span><span class="op" id="7962054">[</span><span class="op" id="7962055">]</span><span class="builtintype" id="7962056">byte</span><span class="op" id="7962060">,</span>&nbsp;<span class="num" id="7962062">4</span><span class="op" id="7962063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962066">if</span>&nbsp;<span class="ident" id="7962069">_</span><span class="op" id="7962070">,</span>&nbsp;<span class="ident" id="7962072">err</span>&nbsp;<span class="op" id="7962076">:=</span>&nbsp;<span class="ident" id="7962079">io</span><span class="op" id="7962081">.</span><span class="ident" id="7962082">ReadFull</span><span class="op" id="7962090">(</span><span class="ident" id="7962091">tr</span><span class="op" id="7962093">,</span>&nbsp;<span class="ident" id="7962095">buf</span><span class="op" id="7962098">)</span><span class="op" id="7962099">;</span>&nbsp;<span class="ident" id="7962101">err</span>&nbsp;<span class="op" id="7962105">!=</span>&nbsp;<span class="ident" id="7962108">nil</span>&nbsp;<span class="op" id="7962112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962116">t</span><span class="op" id="7962117">.</span><span class="ident" id="7962118">Fatalf</span><span class="op" id="7962124">(</span><span class="string" id="7962125">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7962147">,</span>&nbsp;<span class="ident" id="7962149">err</span><span class="op" id="7962152">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962158">if</span>&nbsp;<span class="ident" id="7962161">expected</span>&nbsp;<span class="op" id="7962170">:=</span>&nbsp;<span class="op" id="7962173">[</span><span class="op" id="7962174">]</span><span class="builtintype" id="7962175">byte</span><span class="op" id="7962179">(</span><span class="string" id="7962180">&#34;Kilt&#34;</span><span class="op" id="7962186">)</span><span class="op" id="7962187">;</span>&nbsp;<span class="op" id="7962189">!</span><span class="ident" id="7962190">bytes</span><span class="op" id="7962195">.</span><span class="ident" id="7962196">Equal</span><span class="op" id="7962201">(</span><span class="ident" id="7962202">buf</span><span class="op" id="7962205">,</span>&nbsp;<span class="ident" id="7962207">expected</span><span class="op" id="7962215">)</span>&nbsp;<span class="op" id="7962217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962221">t</span><span class="op" id="7962222">.</span><span class="ident" id="7962223">Errorf</span><span class="op" id="7962229">(</span><span class="string" id="7962230">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7962254">,</span>&nbsp;<span class="ident" id="7962256">buf</span><span class="op" id="7962259">,</span>&nbsp;<span class="ident" id="7962261">expected</span><span class="op" id="7962269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7962276">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962292">hdr</span><span class="op" id="7962295">,</span>&nbsp;<span class="ident" id="7962297">err</span>&nbsp;<span class="op" id="7962301">=</span>&nbsp;<span class="ident" id="7962303">tr</span><span class="op" id="7962305">.</span><span class="ident" id="7962306">Next</span><span class="op" id="7962310">(</span><span class="op" id="7962311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962314">if</span>&nbsp;<span class="ident" id="7962317">err</span>&nbsp;<span class="op" id="7962321">!=</span>&nbsp;<span class="ident" id="7962324">nil</span>&nbsp;<span class="op" id="7962328">||</span>&nbsp;<span class="ident" id="7962331">hdr</span>&nbsp;<span class="op" id="7962335">==</span>&nbsp;<span class="ident" id="7962338">nil</span>&nbsp;<span class="op" id="7962342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962346">t</span><span class="op" id="7962347">.</span><span class="ident" id="7962348">Fatalf</span><span class="op" id="7962354">(</span><span class="string" id="7962355">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="7962383">,</span>&nbsp;<span class="ident" id="7962385">err</span><span class="op" id="7962388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962391">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962394">buf</span>&nbsp;<span class="op" id="7962398">=</span>&nbsp;<span class="builtinfunc" id="7962400">make</span><span class="op" id="7962404">(</span><span class="op" id="7962405">[</span><span class="op" id="7962406">]</span><span class="builtintype" id="7962407">byte</span><span class="op" id="7962411">,</span>&nbsp;<span class="num" id="7962413">6</span><span class="op" id="7962414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962417">if</span>&nbsp;<span class="ident" id="7962420">_</span><span class="op" id="7962421">,</span>&nbsp;<span class="ident" id="7962423">err</span>&nbsp;<span class="op" id="7962427">:=</span>&nbsp;<span class="ident" id="7962430">io</span><span class="op" id="7962432">.</span><span class="ident" id="7962433">ReadFull</span><span class="op" id="7962441">(</span><span class="ident" id="7962442">tr</span><span class="op" id="7962444">,</span>&nbsp;<span class="ident" id="7962446">buf</span><span class="op" id="7962449">)</span><span class="op" id="7962450">;</span>&nbsp;<span class="ident" id="7962452">err</span>&nbsp;<span class="op" id="7962456">!=</span>&nbsp;<span class="ident" id="7962459">nil</span>&nbsp;<span class="op" id="7962463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962467">t</span><span class="op" id="7962468">.</span><span class="ident" id="7962469">Fatalf</span><span class="op" id="7962475">(</span><span class="string" id="7962476">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7962498">,</span>&nbsp;<span class="ident" id="7962500">err</span><span class="op" id="7962503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962509">if</span>&nbsp;<span class="ident" id="7962512">expected</span>&nbsp;<span class="op" id="7962521">:=</span>&nbsp;<span class="op" id="7962524">[</span><span class="op" id="7962525">]</span><span class="builtintype" id="7962526">byte</span><span class="op" id="7962530">(</span><span class="string" id="7962531">&#34;Google&#34;</span><span class="op" id="7962539">)</span><span class="op" id="7962540">;</span>&nbsp;<span class="op" id="7962542">!</span><span class="ident" id="7962543">bytes</span><span class="op" id="7962548">.</span><span class="ident" id="7962549">Equal</span><span class="op" id="7962554">(</span><span class="ident" id="7962555">buf</span><span class="op" id="7962558">,</span>&nbsp;<span class="ident" id="7962560">expected</span><span class="op" id="7962568">)</span>&nbsp;<span class="op" id="7962570">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962574">t</span><span class="op" id="7962575">.</span><span class="ident" id="7962576">Errorf</span><span class="op" id="7962582">(</span><span class="string" id="7962583">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7962607">,</span>&nbsp;<span class="ident" id="7962609">buf</span><span class="op" id="7962612">,</span>&nbsp;<span class="ident" id="7962614">expected</span><span class="op" id="7962622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962625">}</span><br>
<span class="lineno"></span><span class="op" id="7962627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7962630">func</span>&nbsp;<span class="ident" id="7962635">TestIncrementalRead</span><span class="op" id="7962654">(</span><span class="ident" id="7962655">t</span>&nbsp;<span class="op" id="7962657">*</span><span class="ident" id="7962658">testing</span><span class="op" id="7962665">.</span><span class="ident" id="7962666">T</span><span class="op" id="7962667">)</span>&nbsp;<span class="op" id="7962669">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962672">test</span>&nbsp;<span class="op" id="7962677">:=</span>&nbsp;<span class="ident" id="7962680">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962692">f</span><span class="op" id="7962693">,</span>&nbsp;<span class="ident" id="7962695">err</span>&nbsp;<span class="op" id="7962699">:=</span>&nbsp;<span class="ident" id="7962702">os</span><span class="op" id="7962704">.</span><span class="ident" id="7962705">Open</span><span class="op" id="7962709">(</span><span class="ident" id="7962710">test</span><span class="op" id="7962714">.</span><span class="ident" id="7962715">file</span><span class="op" id="7962719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962722">if</span>&nbsp;<span class="ident" id="7962725">err</span>&nbsp;<span class="op" id="7962729">!=</span>&nbsp;<span class="ident" id="7962732">nil</span>&nbsp;<span class="op" id="7962736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962740">t</span><span class="op" id="7962741">.</span><span class="ident" id="7962742">Fatalf</span><span class="op" id="7962748">(</span><span class="string" id="7962749">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7962771">,</span>&nbsp;<span class="ident" id="7962773">err</span><span class="op" id="7962776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962779">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962782">defer</span>&nbsp;<span class="ident" id="7962788">f</span><span class="op" id="7962789">.</span><span class="ident" id="7962790">Close</span><span class="op" id="7962795">(</span><span class="op" id="7962796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962800">tr</span>&nbsp;<span class="op" id="7962803">:=</span>&nbsp;<span class="ident" id="7962806">NewReader</span><span class="op" id="7962815">(</span><span class="ident" id="7962816">f</span><span class="op" id="7962817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962821">headers</span>&nbsp;<span class="op" id="7962829">:=</span>&nbsp;<span class="ident" id="7962832">test</span><span class="op" id="7962836">.</span><span class="ident" id="7962837">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962846">cksums</span>&nbsp;<span class="op" id="7962853">:=</span>&nbsp;<span class="ident" id="7962856">test</span><span class="op" id="7962860">.</span><span class="ident" id="7962861">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962869">nread</span>&nbsp;<span class="op" id="7962875">:=</span>&nbsp;<span class="num" id="7962878">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7962882">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962906">for</span>&nbsp;<span class="op" id="7962910">;</span>&nbsp;<span class="op" id="7962912">;</span>&nbsp;<span class="ident" id="7962914">nread</span><span class="op" id="7962919">++</span>&nbsp;<span class="op" id="7962922">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7962926">hdr</span><span class="op" id="7962929">,</span>&nbsp;<span class="ident" id="7962931">err</span>&nbsp;<span class="op" id="7962935">:=</span>&nbsp;<span class="ident" id="7962938">tr</span><span class="op" id="7962940">.</span><span class="ident" id="7962941">Next</span><span class="op" id="7962945">(</span><span class="op" id="7962946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962950">if</span>&nbsp;<span class="ident" id="7962953">hdr</span>&nbsp;<span class="op" id="7962957">==</span>&nbsp;<span class="ident" id="7962960">nil</span>&nbsp;<span class="op" id="7962964">||</span>&nbsp;<span class="ident" id="7962967">err</span>&nbsp;<span class="op" id="7962971">==</span>&nbsp;<span class="ident" id="7962974">io</span><span class="op" id="7962976">.</span><span class="ident" id="7962977">EOF</span>&nbsp;<span class="op" id="7962981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7962986">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7962994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7962999">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963021">if</span>&nbsp;<span class="op" id="7963024">!</span><span class="ident" id="7963025">reflect</span><span class="op" id="7963032">.</span><span class="ident" id="7963033">DeepEqual</span><span class="op" id="7963042">(</span><span class="op" id="7963043">*</span><span class="ident" id="7963044">hdr</span><span class="op" id="7963047">,</span>&nbsp;<span class="op" id="7963049">*</span><span class="ident" id="7963050">headers</span><span class="op" id="7963057">[</span><span class="ident" id="7963058">nread</span><span class="op" id="7963063">]</span><span class="op" id="7963064">)</span>&nbsp;<span class="op" id="7963066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963071">t</span><span class="op" id="7963072">.</span><span class="ident" id="7963073">Errorf</span><span class="op" id="7963079">(</span><span class="string" id="7963080">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7963119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963125">*</span><span class="ident" id="7963126">hdr</span><span class="op" id="7963129">,</span>&nbsp;<span class="ident" id="7963131">headers</span><span class="op" id="7963138">[</span><span class="ident" id="7963139">nread</span><span class="op" id="7963144">]</span><span class="op" id="7963145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963149">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7963154">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7963200">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963230">h</span>&nbsp;<span class="op" id="7963232">:=</span>&nbsp;<span class="ident" id="7963235">md5</span><span class="op" id="7963238">.</span><span class="ident" id="7963239">New</span><span class="op" id="7963242">(</span><span class="op" id="7963243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963247">rdbuf</span>&nbsp;<span class="op" id="7963253">:=</span>&nbsp;<span class="builtinfunc" id="7963256">make</span><span class="op" id="7963260">(</span><span class="op" id="7963261">[</span><span class="op" id="7963262">]</span><span class="builtintype" id="7963263">uint8</span><span class="op" id="7963268">,</span>&nbsp;<span class="num" id="7963270">8</span><span class="op" id="7963271">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963275">for</span>&nbsp;<span class="op" id="7963279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963284">nr</span><span class="op" id="7963286">,</span>&nbsp;<span class="ident" id="7963288">err</span>&nbsp;<span class="op" id="7963292">:=</span>&nbsp;<span class="ident" id="7963295">tr</span><span class="op" id="7963297">.</span><span class="ident" id="7963298">Read</span><span class="op" id="7963302">(</span><span class="ident" id="7963303">rdbuf</span><span class="op" id="7963308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963313">if</span>&nbsp;<span class="ident" id="7963316">err</span>&nbsp;<span class="op" id="7963320">==</span>&nbsp;<span class="ident" id="7963323">io</span><span class="op" id="7963325">.</span><span class="ident" id="7963326">EOF</span>&nbsp;<span class="op" id="7963330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963336">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963345">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963350">if</span>&nbsp;<span class="ident" id="7963353">err</span>&nbsp;<span class="op" id="7963357">!=</span>&nbsp;<span class="ident" id="7963360">nil</span>&nbsp;<span class="op" id="7963364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963370">t</span><span class="op" id="7963371">.</span><span class="ident" id="7963372">Errorf</span><span class="op" id="7963378">(</span><span class="string" id="7963379">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7963408">,</span>&nbsp;<span class="ident" id="7963410">err</span><span class="op" id="7963413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963419">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963433">h</span><span class="op" id="7963434">.</span><span class="ident" id="7963435">Write</span><span class="op" id="7963440">(</span><span class="ident" id="7963441">rdbuf</span><span class="op" id="7963446">[</span><span class="num" id="7963447">0</span><span class="op" id="7963448">:</span><span class="ident" id="7963449">nr</span><span class="op" id="7963451">]</span><span class="op" id="7963452">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7963460">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963481">have</span>&nbsp;<span class="op" id="7963486">:=</span>&nbsp;<span class="ident" id="7963489">fmt</span><span class="op" id="7963492">.</span><span class="ident" id="7963493">Sprintf</span><span class="op" id="7963500">(</span><span class="string" id="7963501">&#34;%x&#34;</span><span class="op" id="7963505">,</span>&nbsp;<span class="ident" id="7963507">h</span><span class="op" id="7963508">.</span><span class="ident" id="7963509">Sum</span><span class="op" id="7963512">(</span><span class="ident" id="7963513">nil</span><span class="op" id="7963516">)</span><span class="op" id="7963517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963521">want</span>&nbsp;<span class="op" id="7963526">:=</span>&nbsp;<span class="ident" id="7963529">cksums</span><span class="op" id="7963535">[</span><span class="ident" id="7963536">nread</span><span class="op" id="7963541">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963545">if</span>&nbsp;<span class="ident" id="7963548">want</span>&nbsp;<span class="op" id="7963553">!=</span>&nbsp;<span class="ident" id="7963556">have</span>&nbsp;<span class="op" id="7963561">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963566">t</span><span class="op" id="7963567">.</span><span class="ident" id="7963568">Errorf</span><span class="op" id="7963574">(</span><span class="string" id="7963575">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7963621">,</span>&nbsp;<span class="ident" id="7963623">hdr</span><span class="op" id="7963626">.</span><span class="ident" id="7963627">Name</span><span class="op" id="7963631">,</span>&nbsp;<span class="ident" id="7963633">have</span><span class="op" id="7963637">,</span>&nbsp;<span class="ident" id="7963639">want</span><span class="op" id="7963643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963653">if</span>&nbsp;<span class="ident" id="7963656">nread</span>&nbsp;<span class="op" id="7963662">!=</span>&nbsp;<span class="builtinfunc" id="7963665">len</span><span class="op" id="7963668">(</span><span class="ident" id="7963669">headers</span><span class="op" id="7963676">)</span>&nbsp;<span class="op" id="7963678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963682">t</span><span class="op" id="7963683">.</span><span class="ident" id="7963684">Errorf</span><span class="op" id="7963690">(</span><span class="string" id="7963691">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7963747">,</span>&nbsp;<span class="builtinfunc" id="7963749">len</span><span class="op" id="7963752">(</span><span class="ident" id="7963753">headers</span><span class="op" id="7963760">)</span><span class="op" id="7963761">,</span>&nbsp;<span class="ident" id="7963763">nread</span><span class="op" id="7963768">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963771">}</span><br>
<span class="lineno"></span><span class="op" id="7963773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7963776">func</span>&nbsp;<span class="ident" id="7963781">TestNonSeekable</span><span class="op" id="7963796">(</span><span class="ident" id="7963797">t</span>&nbsp;<span class="op" id="7963799">*</span><span class="ident" id="7963800">testing</span><span class="op" id="7963807">.</span><span class="ident" id="7963808">T</span><span class="op" id="7963809">)</span>&nbsp;<span class="op" id="7963811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963814">test</span>&nbsp;<span class="op" id="7963819">:=</span>&nbsp;<span class="ident" id="7963822">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963834">f</span><span class="op" id="7963835">,</span>&nbsp;<span class="ident" id="7963837">err</span>&nbsp;<span class="op" id="7963841">:=</span>&nbsp;<span class="ident" id="7963844">os</span><span class="op" id="7963846">.</span><span class="ident" id="7963847">Open</span><span class="op" id="7963851">(</span><span class="ident" id="7963852">test</span><span class="op" id="7963856">.</span><span class="ident" id="7963857">file</span><span class="op" id="7963861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963864">if</span>&nbsp;<span class="ident" id="7963867">err</span>&nbsp;<span class="op" id="7963871">!=</span>&nbsp;<span class="ident" id="7963874">nil</span>&nbsp;<span class="op" id="7963878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963882">t</span><span class="op" id="7963883">.</span><span class="ident" id="7963884">Fatalf</span><span class="op" id="7963890">(</span><span class="string" id="7963891">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7963913">,</span>&nbsp;<span class="ident" id="7963915">err</span><span class="op" id="7963918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963924">defer</span>&nbsp;<span class="ident" id="7963930">f</span><span class="op" id="7963931">.</span><span class="ident" id="7963932">Close</span><span class="op" id="7963937">(</span><span class="op" id="7963938">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7963942">type</span>&nbsp;<span class="ident" id="7963947">readerOnly</span>&nbsp;<span class="keyword" id="7963958">struct</span>&nbsp;<span class="op" id="7963965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963969">io</span><span class="op" id="7963971">.</span><span class="ident" id="7963972">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7963980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7963983">tr</span>&nbsp;<span class="op" id="7963986">:=</span>&nbsp;<span class="ident" id="7963989">NewReader</span><span class="op" id="7963998">(</span><span class="ident" id="7963999">readerOnly</span><span class="op" id="7964009">{</span><span class="ident" id="7964010">f</span><span class="op" id="7964011">}</span><span class="op" id="7964012">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964015">nread</span>&nbsp;<span class="op" id="7964021">:=</span>&nbsp;<span class="num" id="7964024">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964028">for</span>&nbsp;<span class="op" id="7964032">;</span>&nbsp;<span class="op" id="7964034">;</span>&nbsp;<span class="ident" id="7964036">nread</span><span class="op" id="7964041">++</span>&nbsp;<span class="op" id="7964044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964048">_</span><span class="op" id="7964049">,</span>&nbsp;<span class="ident" id="7964051">err</span>&nbsp;<span class="op" id="7964055">:=</span>&nbsp;<span class="ident" id="7964058">tr</span><span class="op" id="7964060">.</span><span class="ident" id="7964061">Next</span><span class="op" id="7964065">(</span><span class="op" id="7964066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964070">if</span>&nbsp;<span class="ident" id="7964073">err</span>&nbsp;<span class="op" id="7964077">==</span>&nbsp;<span class="ident" id="7964080">io</span><span class="op" id="7964082">.</span><span class="ident" id="7964083">EOF</span>&nbsp;<span class="op" id="7964087">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964092">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964104">if</span>&nbsp;<span class="ident" id="7964107">err</span>&nbsp;<span class="op" id="7964111">!=</span>&nbsp;<span class="ident" id="7964114">nil</span>&nbsp;<span class="op" id="7964118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964123">t</span><span class="op" id="7964124">.</span><span class="ident" id="7964125">Fatalf</span><span class="op" id="7964131">(</span><span class="string" id="7964132">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7964154">,</span>&nbsp;<span class="ident" id="7964156">err</span><span class="op" id="7964159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964163">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964170">if</span>&nbsp;<span class="ident" id="7964173">nread</span>&nbsp;<span class="op" id="7964179">!=</span>&nbsp;<span class="builtinfunc" id="7964182">len</span><span class="op" id="7964185">(</span><span class="ident" id="7964186">test</span><span class="op" id="7964190">.</span><span class="ident" id="7964191">headers</span><span class="op" id="7964198">)</span>&nbsp;<span class="op" id="7964200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964204">t</span><span class="op" id="7964205">.</span><span class="ident" id="7964206">Errorf</span><span class="op" id="7964212">(</span><span class="string" id="7964213">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7964269">,</span>&nbsp;<span class="builtinfunc" id="7964271">len</span><span class="op" id="7964274">(</span><span class="ident" id="7964275">test</span><span class="op" id="7964279">.</span><span class="ident" id="7964280">headers</span><span class="op" id="7964287">)</span><span class="op" id="7964288">,</span>&nbsp;<span class="ident" id="7964290">nread</span><span class="op" id="7964295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964298">}</span><br>
<span class="lineno">440</span><span class="op" id="7964300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7964303">func</span>&nbsp;<span class="ident" id="7964308">TestParsePAXHeader</span><span class="op" id="7964326">(</span><span class="ident" id="7964327">t</span>&nbsp;<span class="op" id="7964329">*</span><span class="ident" id="7964330">testing</span><span class="op" id="7964337">.</span><span class="ident" id="7964338">T</span><span class="op" id="7964339">)</span>&nbsp;<span class="op" id="7964341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964344">paxTests</span>&nbsp;<span class="op" id="7964353">:=</span>&nbsp;<span class="op" id="7964356">[</span><span class="op" id="7964357">]</span><span class="op" id="7964358">[</span><span class="num" id="7964359">3</span><span class="op" id="7964360">]</span><span class="builtintype" id="7964361">string</span><span class="op" id="7964367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964371">{</span><span class="string" id="7964372">&#34;a&#34;</span><span class="op" id="7964375">,</span>&nbsp;<span class="string" id="7964377">&#34;a=name&#34;</span><span class="op" id="7964385">,</span>&nbsp;<span class="string" id="7964387">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="7964400">}</span><span class="op" id="7964401">,</span>&nbsp;<span class="comment" id="7964403">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964456">{</span><span class="string" id="7964457">&#34;a&#34;</span><span class="op" id="7964460">,</span>&nbsp;<span class="string" id="7964462">&#34;a=name&#34;</span><span class="op" id="7964470">,</span>&nbsp;<span class="string" id="7964472">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="7964484">}</span><span class="op" id="7964485">,</span>&nbsp;&nbsp;<span class="comment" id="7964488">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964540">{</span><span class="string" id="7964541">&#34;mtime&#34;</span><span class="op" id="7964548">,</span>&nbsp;<span class="string" id="7964550">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="7964578">,</span>&nbsp;<span class="string" id="7964580">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="7964613">}</span><span class="op" id="7964614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964617">for</span>&nbsp;<span class="ident" id="7964621">_</span><span class="op" id="7964622">,</span>&nbsp;<span class="ident" id="7964624">test</span>&nbsp;<span class="op" id="7964629">:=</span>&nbsp;<span class="keyword" id="7964632">range</span>&nbsp;<span class="ident" id="7964638">paxTests</span>&nbsp;<span class="op" id="7964647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964651">key</span><span class="op" id="7964654">,</span>&nbsp;<span class="ident" id="7964656">expected</span><span class="op" id="7964664">,</span>&nbsp;<span class="ident" id="7964666">raw</span>&nbsp;<span class="op" id="7964670">:=</span>&nbsp;<span class="ident" id="7964673">test</span><span class="op" id="7964677">[</span><span class="num" id="7964678">0</span><span class="op" id="7964679">]</span><span class="op" id="7964680">,</span>&nbsp;<span class="ident" id="7964682">test</span><span class="op" id="7964686">[</span><span class="num" id="7964687">1</span><span class="op" id="7964688">]</span><span class="op" id="7964689">,</span>&nbsp;<span class="ident" id="7964691">test</span><span class="op" id="7964695">[</span><span class="num" id="7964696">2</span><span class="op" id="7964697">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964701">reader</span>&nbsp;<span class="op" id="7964708">:=</span>&nbsp;<span class="ident" id="7964711">bytes</span><span class="op" id="7964716">.</span><span class="ident" id="7964717">NewReader</span><span class="op" id="7964726">(</span><span class="op" id="7964727">[</span><span class="op" id="7964728">]</span><span class="builtintype" id="7964729">byte</span><span class="op" id="7964733">(</span><span class="ident" id="7964734">raw</span><span class="op" id="7964737">)</span><span class="op" id="7964738">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964742">headers</span><span class="op" id="7964749">,</span>&nbsp;<span class="ident" id="7964751">err</span>&nbsp;<span class="op" id="7964755">:=</span>&nbsp;<span class="ident" id="7964758">parsePAX</span><span class="op" id="7964766">(</span><span class="ident" id="7964767">reader</span><span class="op" id="7964773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964777">if</span>&nbsp;<span class="ident" id="7964780">err</span>&nbsp;<span class="op" id="7964784">!=</span>&nbsp;<span class="ident" id="7964787">nil</span>&nbsp;<span class="op" id="7964791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964796">t</span><span class="op" id="7964797">.</span><span class="ident" id="7964798">Errorf</span><span class="op" id="7964804">(</span><span class="string" id="7964805">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="7964853">,</span>&nbsp;<span class="ident" id="7964855">err</span><span class="op" id="7964858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964863">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7964874">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7964878">if</span>&nbsp;<span class="ident" id="7964881">strings</span><span class="op" id="7964888">.</span><span class="ident" id="7964889">EqualFold</span><span class="op" id="7964898">(</span><span class="ident" id="7964899">headers</span><span class="op" id="7964906">[</span><span class="ident" id="7964907">key</span><span class="op" id="7964910">]</span><span class="op" id="7964911">,</span>&nbsp;<span class="ident" id="7964913">expected</span><span class="op" id="7964921">)</span>&nbsp;<span class="op" id="7964923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7964928">t</span><span class="op" id="7964929">.</span><span class="ident" id="7964930">Errorf</span><span class="op" id="7964936">(</span><span class="string" id="7964937">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="7964989">,</span>&nbsp;<span class="ident" id="7964991">headers</span><span class="op" id="7964998">[</span><span class="ident" id="7964999">key</span><span class="op" id="7965002">]</span><span class="op" id="7965003">,</span>&nbsp;<span class="ident" id="7965005">expected</span><span class="op" id="7965013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965018">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965033">trailer</span>&nbsp;<span class="op" id="7965041">:=</span>&nbsp;<span class="builtinfunc" id="7965044">make</span><span class="op" id="7965048">(</span><span class="op" id="7965049">[</span><span class="op" id="7965050">]</span><span class="builtintype" id="7965051">byte</span><span class="op" id="7965055">,</span>&nbsp;<span class="num" id="7965057">100</span><span class="op" id="7965060">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965064">n</span><span class="op" id="7965065">,</span>&nbsp;<span class="ident" id="7965067">err</span>&nbsp;<span class="op" id="7965071">:=</span>&nbsp;<span class="ident" id="7965074">reader</span><span class="op" id="7965080">.</span><span class="ident" id="7965081">Read</span><span class="op" id="7965085">(</span><span class="ident" id="7965086">trailer</span><span class="op" id="7965093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965097">if</span>&nbsp;<span class="ident" id="7965100">err</span>&nbsp;<span class="op" id="7965104">!=</span>&nbsp;<span class="ident" id="7965107">io</span><span class="op" id="7965109">.</span><span class="ident" id="7965110">EOF</span>&nbsp;<span class="op" id="7965114">||</span>&nbsp;<span class="ident" id="7965117">n</span>&nbsp;<span class="op" id="7965119">!=</span>&nbsp;<span class="num" id="7965122">0</span>&nbsp;<span class="op" id="7965124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965129">t</span><span class="op" id="7965130">.</span><span class="ident" id="7965131">Error</span><span class="op" id="7965136">(</span><span class="string" id="7965137">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="7965161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965168">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965171">badHeader</span>&nbsp;<span class="op" id="7965181">:=</span>&nbsp;<span class="ident" id="7965184">bytes</span><span class="op" id="7965189">.</span><span class="ident" id="7965190">NewReader</span><span class="op" id="7965199">(</span><span class="op" id="7965200">[</span><span class="op" id="7965201">]</span><span class="builtintype" id="7965202">byte</span><span class="op" id="7965206">(</span><span class="string" id="7965207">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="7965223">)</span><span class="op" id="7965224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965227">if</span>&nbsp;<span class="ident" id="7965230">_</span><span class="op" id="7965231">,</span>&nbsp;<span class="ident" id="7965233">err</span>&nbsp;<span class="op" id="7965237">:=</span>&nbsp;<span class="ident" id="7965240">parsePAX</span><span class="op" id="7965248">(</span><span class="ident" id="7965249">badHeader</span><span class="op" id="7965258">)</span><span class="op" id="7965259">;</span>&nbsp;<span class="ident" id="7965261">err</span>&nbsp;<span class="op" id="7965265">!=</span>&nbsp;<span class="ident" id="7965268">ErrHeader</span>&nbsp;<span class="op" id="7965278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965282">t</span><span class="op" id="7965283">.</span><span class="ident" id="7965284">Fatal</span><span class="op" id="7965289">(</span><span class="string" id="7965290">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="7965334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965337">}</span><br>
<span class="lineno"></span><span class="op" id="7965339">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="7965342">func</span>&nbsp;<span class="ident" id="7965347">TestParsePAXTime</span><span class="op" id="7965363">(</span><span class="ident" id="7965364">t</span>&nbsp;<span class="op" id="7965366">*</span><span class="ident" id="7965367">testing</span><span class="op" id="7965374">.</span><span class="ident" id="7965375">T</span><span class="op" id="7965376">)</span>&nbsp;<span class="op" id="7965378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7965381">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965412">timestamps</span>&nbsp;<span class="op" id="7965423">:=</span>&nbsp;<span class="keyword" id="7965426">map</span><span class="op" id="7965429">[</span><span class="builtintype" id="7965430">string</span><span class="op" id="7965436">]</span><span class="ident" id="7965437">time</span><span class="op" id="7965441">.</span><span class="ident" id="7965442">Time</span><span class="op" id="7965446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7965450">&#34;1350244992.023960108&#34;</span><span class="op" id="7965472">:</span>&nbsp;&nbsp;<span class="ident" id="7965475">time</span><span class="op" id="7965479">.</span><span class="ident" id="7965480">Unix</span><span class="op" id="7965484">(</span><span class="num" id="7965485">1350244992</span><span class="op" id="7965495">,</span>&nbsp;<span class="num" id="7965497">23960108</span><span class="op" id="7965505">)</span><span class="op" id="7965506">,</span>&nbsp;<span class="comment" id="7965508">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7965529">&#34;1350244992.02396010&#34;</span><span class="op" id="7965550">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7965554">time</span><span class="op" id="7965558">.</span><span class="ident" id="7965559">Unix</span><span class="op" id="7965563">(</span><span class="num" id="7965564">1350244992</span><span class="op" id="7965574">,</span>&nbsp;<span class="num" id="7965576">23960100</span><span class="op" id="7965584">)</span><span class="op" id="7965585">,</span>&nbsp;<span class="comment" id="7965587">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7965614">&#34;1350244992.0239601089&#34;</span><span class="op" id="7965637">:</span>&nbsp;<span class="ident" id="7965639">time</span><span class="op" id="7965643">.</span><span class="ident" id="7965644">Unix</span><span class="op" id="7965648">(</span><span class="num" id="7965649">1350244992</span><span class="op" id="7965659">,</span>&nbsp;<span class="num" id="7965661">23960108</span><span class="op" id="7965669">)</span><span class="op" id="7965670">,</span>&nbsp;<span class="comment" id="7965672">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7965700">&#34;1350244992&#34;</span><span class="op" id="7965712">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7965725">time</span><span class="op" id="7965729">.</span><span class="ident" id="7965730">Unix</span><span class="op" id="7965734">(</span><span class="num" id="7965735">1350244992</span><span class="op" id="7965745">,</span>&nbsp;<span class="num" id="7965747">0</span><span class="op" id="7965748">)</span><span class="op" id="7965749">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7965758">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965785">for</span>&nbsp;<span class="ident" id="7965789">input</span><span class="op" id="7965794">,</span>&nbsp;<span class="ident" id="7965796">expected</span>&nbsp;<span class="op" id="7965805">:=</span>&nbsp;<span class="keyword" id="7965808">range</span>&nbsp;<span class="ident" id="7965814">timestamps</span>&nbsp;<span class="op" id="7965825">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965829">ts</span><span class="op" id="7965831">,</span>&nbsp;<span class="ident" id="7965833">err</span>&nbsp;<span class="op" id="7965837">:=</span>&nbsp;<span class="ident" id="7965840">parsePAXTime</span><span class="op" id="7965852">(</span><span class="ident" id="7965853">input</span><span class="op" id="7965858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965862">if</span>&nbsp;<span class="ident" id="7965865">err</span>&nbsp;<span class="op" id="7965869">!=</span>&nbsp;<span class="ident" id="7965872">nil</span>&nbsp;<span class="op" id="7965876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965881">t</span><span class="op" id="7965882">.</span><span class="ident" id="7965883">Fatal</span><span class="op" id="7965888">(</span><span class="ident" id="7965889">err</span><span class="op" id="7965892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7965900">if</span>&nbsp;<span class="op" id="7965903">!</span><span class="ident" id="7965904">ts</span><span class="op" id="7965906">.</span><span class="ident" id="7965907">Equal</span><span class="op" id="7965912">(</span><span class="ident" id="7965913">expected</span><span class="op" id="7965921">)</span>&nbsp;<span class="op" id="7965923">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7965928">t</span><span class="op" id="7965929">.</span><span class="ident" id="7965930">Fatalf</span><span class="op" id="7965936">(</span><span class="string" id="7965937">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="7965965">,</span>&nbsp;<span class="ident" id="7965967">ts</span><span class="op" id="7965969">,</span>&nbsp;<span class="ident" id="7965971">expected</span><span class="op" id="7965979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7965986">}</span><br>
<span class="lineno"></span><span class="op" id="7965988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="7965991">func</span>&nbsp;<span class="ident" id="7965996">TestMergePAX</span><span class="op" id="7966008">(</span><span class="ident" id="7966009">t</span>&nbsp;<span class="op" id="7966011">*</span><span class="ident" id="7966012">testing</span><span class="op" id="7966019">.</span><span class="ident" id="7966020">T</span><span class="op" id="7966021">)</span>&nbsp;<span class="op" id="7966023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966026">hdr</span>&nbsp;<span class="op" id="7966030">:=</span>&nbsp;<span class="builtinfunc" id="7966033">new</span><span class="op" id="7966036">(</span><span class="ident" id="7966037">Header</span><span class="op" id="7966043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966046">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966096">headers</span>&nbsp;<span class="op" id="7966104">:=</span>&nbsp;<span class="keyword" id="7966107">map</span><span class="op" id="7966110">[</span><span class="builtintype" id="7966111">string</span><span class="op" id="7966117">]</span><span class="builtintype" id="7966118">string</span><span class="op" id="7966124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7966128">&#34;path&#34;</span><span class="op" id="7966134">:</span>&nbsp;&nbsp;<span class="string" id="7966137">&#34;a/b/c&#34;</span><span class="op" id="7966144">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7966148">&#34;uid&#34;</span><span class="op" id="7966153">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7966157">&#34;1000&#34;</span><span class="op" id="7966163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7966167">&#34;mtime&#34;</span><span class="op" id="7966174">:</span>&nbsp;<span class="string" id="7966176">&#34;1350244992.023960108&#34;</span><span class="op" id="7966198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966204">err</span>&nbsp;<span class="op" id="7966208">:=</span>&nbsp;<span class="ident" id="7966211">mergePAX</span><span class="op" id="7966219">(</span><span class="ident" id="7966220">hdr</span><span class="op" id="7966223">,</span>&nbsp;<span class="ident" id="7966225">headers</span><span class="op" id="7966232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966235">if</span>&nbsp;<span class="ident" id="7966238">err</span>&nbsp;<span class="op" id="7966242">!=</span>&nbsp;<span class="ident" id="7966245">nil</span>&nbsp;<span class="op" id="7966249">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966253">t</span><span class="op" id="7966254">.</span><span class="ident" id="7966255">Fatal</span><span class="op" id="7966260">(</span><span class="ident" id="7966261">err</span><span class="op" id="7966264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966270">want</span>&nbsp;<span class="op" id="7966275">:=</span>&nbsp;<span class="op" id="7966278">&amp;</span><span class="ident" id="7966279">Header</span><span class="op" id="7966285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966289">Name</span><span class="op" id="7966293">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7966298">&#34;a/b/c&#34;</span><span class="op" id="7966305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966309">Uid</span><span class="op" id="7966312">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7966318">1000</span><span class="op" id="7966322">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966326">ModTime</span><span class="op" id="7966333">:</span>&nbsp;<span class="ident" id="7966335">time</span><span class="op" id="7966339">.</span><span class="ident" id="7966340">Unix</span><span class="op" id="7966344">(</span><span class="num" id="7966345">1350244992</span><span class="op" id="7966355">,</span>&nbsp;<span class="num" id="7966357">23960108</span><span class="op" id="7966365">)</span><span class="op" id="7966366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966372">if</span>&nbsp;<span class="op" id="7966375">!</span><span class="ident" id="7966376">reflect</span><span class="op" id="7966383">.</span><span class="ident" id="7966384">DeepEqual</span><span class="op" id="7966393">(</span><span class="ident" id="7966394">hdr</span><span class="op" id="7966397">,</span>&nbsp;<span class="ident" id="7966399">want</span><span class="op" id="7966403">)</span>&nbsp;<span class="op" id="7966405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966409">t</span><span class="op" id="7966410">.</span><span class="ident" id="7966411">Errorf</span><span class="op" id="7966417">(</span><span class="string" id="7966418">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7966454">,</span>&nbsp;<span class="ident" id="7966456">hdr</span><span class="op" id="7966459">,</span>&nbsp;<span class="ident" id="7966461">want</span><span class="op" id="7966465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966468">}</span><br>
<span class="lineno">510</span><span class="op" id="7966470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7966473">func</span>&nbsp;<span class="ident" id="7966478">TestSparseEndToEnd</span><span class="op" id="7966496">(</span><span class="ident" id="7966497">t</span>&nbsp;<span class="op" id="7966499">*</span><span class="ident" id="7966500">testing</span><span class="op" id="7966507">.</span><span class="ident" id="7966508">T</span><span class="op" id="7966509">)</span>&nbsp;<span class="op" id="7966511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966514">test</span>&nbsp;<span class="op" id="7966519">:=</span>&nbsp;<span class="ident" id="7966522">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966537">f</span><span class="op" id="7966538">,</span>&nbsp;<span class="ident" id="7966540">err</span>&nbsp;<span class="op" id="7966544">:=</span>&nbsp;<span class="ident" id="7966547">os</span><span class="op" id="7966549">.</span><span class="ident" id="7966550">Open</span><span class="op" id="7966554">(</span><span class="ident" id="7966555">test</span><span class="op" id="7966559">.</span><span class="ident" id="7966560">file</span><span class="op" id="7966564">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966567">if</span>&nbsp;<span class="ident" id="7966570">err</span>&nbsp;<span class="op" id="7966574">!=</span>&nbsp;<span class="ident" id="7966577">nil</span>&nbsp;<span class="op" id="7966581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966585">t</span><span class="op" id="7966586">.</span><span class="ident" id="7966587">Fatalf</span><span class="op" id="7966593">(</span><span class="string" id="7966594">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7966616">,</span>&nbsp;<span class="ident" id="7966618">err</span><span class="op" id="7966621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966627">defer</span>&nbsp;<span class="ident" id="7966633">f</span><span class="op" id="7966634">.</span><span class="ident" id="7966635">Close</span><span class="op" id="7966640">(</span><span class="op" id="7966641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966645">tr</span>&nbsp;<span class="op" id="7966648">:=</span>&nbsp;<span class="ident" id="7966651">NewReader</span><span class="op" id="7966660">(</span><span class="ident" id="7966661">f</span><span class="op" id="7966662">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966666">headers</span>&nbsp;<span class="op" id="7966674">:=</span>&nbsp;<span class="ident" id="7966677">test</span><span class="op" id="7966681">.</span><span class="ident" id="7966682">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966691">cksums</span>&nbsp;<span class="op" id="7966698">:=</span>&nbsp;<span class="ident" id="7966701">test</span><span class="op" id="7966705">.</span><span class="ident" id="7966706">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966714">nread</span>&nbsp;<span class="op" id="7966720">:=</span>&nbsp;<span class="num" id="7966723">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966727">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966751">for</span>&nbsp;<span class="op" id="7966755">;</span>&nbsp;<span class="op" id="7966757">;</span>&nbsp;<span class="ident" id="7966759">nread</span><span class="op" id="7966764">++</span>&nbsp;<span class="op" id="7966767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966771">hdr</span><span class="op" id="7966774">,</span>&nbsp;<span class="ident" id="7966776">err</span>&nbsp;<span class="op" id="7966780">:=</span>&nbsp;<span class="ident" id="7966783">tr</span><span class="op" id="7966785">.</span><span class="ident" id="7966786">Next</span><span class="op" id="7966790">(</span><span class="op" id="7966791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966795">if</span>&nbsp;<span class="ident" id="7966798">hdr</span>&nbsp;<span class="op" id="7966802">==</span>&nbsp;<span class="ident" id="7966805">nil</span>&nbsp;<span class="op" id="7966809">||</span>&nbsp;<span class="ident" id="7966812">err</span>&nbsp;<span class="op" id="7966816">==</span>&nbsp;<span class="ident" id="7966819">io</span><span class="op" id="7966821">.</span><span class="ident" id="7966822">EOF</span>&nbsp;<span class="op" id="7966826">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966831">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966844">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7966866">if</span>&nbsp;<span class="op" id="7966869">!</span><span class="ident" id="7966870">reflect</span><span class="op" id="7966877">.</span><span class="ident" id="7966878">DeepEqual</span><span class="op" id="7966887">(</span><span class="op" id="7966888">*</span><span class="ident" id="7966889">hdr</span><span class="op" id="7966892">,</span>&nbsp;<span class="op" id="7966894">*</span><span class="ident" id="7966895">headers</span><span class="op" id="7966902">[</span><span class="ident" id="7966903">nread</span><span class="op" id="7966908">]</span><span class="op" id="7966909">)</span>&nbsp;<span class="op" id="7966911">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7966916">t</span><span class="op" id="7966917">.</span><span class="ident" id="7966918">Errorf</span><span class="op" id="7966924">(</span><span class="string" id="7966925">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7966964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966970">*</span><span class="ident" id="7966971">hdr</span><span class="op" id="7966974">,</span>&nbsp;<span class="ident" id="7966976">headers</span><span class="op" id="7966983">[</span><span class="ident" id="7966984">nread</span><span class="op" id="7966989">]</span><span class="op" id="7966990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7966994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7966999">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967036">h</span>&nbsp;<span class="op" id="7967038">:=</span>&nbsp;<span class="ident" id="7967041">md5</span><span class="op" id="7967044">.</span><span class="ident" id="7967045">New</span><span class="op" id="7967048">(</span><span class="op" id="7967049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967053">_</span><span class="op" id="7967054">,</span>&nbsp;<span class="ident" id="7967056">err</span>&nbsp;<span class="op" id="7967060">=</span>&nbsp;<span class="ident" id="7967062">io</span><span class="op" id="7967064">.</span><span class="ident" id="7967065">Copy</span><span class="op" id="7967069">(</span><span class="ident" id="7967070">h</span><span class="op" id="7967071">,</span>&nbsp;<span class="ident" id="7967073">tr</span><span class="op" id="7967075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967079">if</span>&nbsp;<span class="ident" id="7967082">err</span>&nbsp;<span class="op" id="7967086">!=</span>&nbsp;<span class="ident" id="7967089">nil</span>&nbsp;<span class="op" id="7967093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967098">t</span><span class="op" id="7967099">.</span><span class="ident" id="7967100">Fatalf</span><span class="op" id="7967106">(</span><span class="string" id="7967107">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7967129">,</span>&nbsp;<span class="ident" id="7967131">err</span><span class="op" id="7967134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967138">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7967143">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967164">have</span>&nbsp;<span class="op" id="7967169">:=</span>&nbsp;<span class="ident" id="7967172">fmt</span><span class="op" id="7967175">.</span><span class="ident" id="7967176">Sprintf</span><span class="op" id="7967183">(</span><span class="string" id="7967184">&#34;%x&#34;</span><span class="op" id="7967188">,</span>&nbsp;<span class="ident" id="7967190">h</span><span class="op" id="7967191">.</span><span class="ident" id="7967192">Sum</span><span class="op" id="7967195">(</span><span class="ident" id="7967196">nil</span><span class="op" id="7967199">)</span><span class="op" id="7967200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967204">want</span>&nbsp;<span class="op" id="7967209">:=</span>&nbsp;<span class="ident" id="7967212">cksums</span><span class="op" id="7967218">[</span><span class="ident" id="7967219">nread</span><span class="op" id="7967224">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967228">if</span>&nbsp;<span class="ident" id="7967231">want</span>&nbsp;<span class="op" id="7967236">!=</span>&nbsp;<span class="ident" id="7967239">have</span>&nbsp;<span class="op" id="7967244">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967249">t</span><span class="op" id="7967250">.</span><span class="ident" id="7967251">Errorf</span><span class="op" id="7967257">(</span><span class="string" id="7967258">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7967304">,</span>&nbsp;<span class="ident" id="7967306">hdr</span><span class="op" id="7967309">.</span><span class="ident" id="7967310">Name</span><span class="op" id="7967314">,</span>&nbsp;<span class="ident" id="7967316">have</span><span class="op" id="7967320">,</span>&nbsp;<span class="ident" id="7967322">want</span><span class="op" id="7967326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7967336">if</span>&nbsp;<span class="ident" id="7967339">nread</span>&nbsp;<span class="op" id="7967345">!=</span>&nbsp;<span class="builtinfunc" id="7967348">len</span><span class="op" id="7967351">(</span><span class="ident" id="7967352">headers</span><span class="op" id="7967359">)</span>&nbsp;<span class="op" id="7967361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967365">t</span><span class="op" id="7967366">.</span><span class="ident" id="7967367">Errorf</span><span class="op" id="7967373">(</span><span class="string" id="7967374">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="7967430">,</span>&nbsp;<span class="builtinfunc" id="7967432">len</span><span class="op" id="7967435">(</span><span class="ident" id="7967436">headers</span><span class="op" id="7967443">)</span><span class="op" id="7967444">,</span>&nbsp;<span class="ident" id="7967446">nread</span><span class="op" id="7967451">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967454">}</span><br>
<span class="lineno"></span><span class="op" id="7967456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7967459">type</span>&nbsp;<span class="ident" id="7967464">sparseFileReadTest</span>&nbsp;<span class="keyword" id="7967483">struct</span>&nbsp;<span class="op" id="7967490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967493">sparseData</span>&nbsp;<span class="op" id="7967504">[</span><span class="op" id="7967505">]</span><span class="builtintype" id="7967506">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967512">sparseMap</span>&nbsp;&nbsp;<span class="op" id="7967523">[</span><span class="op" id="7967524">]</span><span class="ident" id="7967525">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967538">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7967549">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967556">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7967567">[</span><span class="op" id="7967568">]</span><span class="builtintype" id="7967569">byte</span><br>
<span class="lineno"></span><span class="op" id="7967574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7967577">var</span>&nbsp;<span class="ident" id="7967581">sparseFileReadTests</span>&nbsp;<span class="op" id="7967601">=</span>&nbsp;<span class="op" id="7967603">[</span><span class="op" id="7967604">]</span><span class="ident" id="7967605">sparseFileReadTest</span><span class="op" id="7967623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967630">sparseData</span><span class="op" id="7967640">:</span>&nbsp;<span class="op" id="7967642">[</span><span class="op" id="7967643">]</span><span class="builtintype" id="7967644">byte</span><span class="op" id="7967648">(</span><span class="string" id="7967649">&#34;abcde&#34;</span><span class="op" id="7967656">)</span><span class="op" id="7967657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967661">sparseMap</span><span class="op" id="7967670">:</span>&nbsp;<span class="op" id="7967672">[</span><span class="op" id="7967673">]</span><span class="ident" id="7967674">sparseEntry</span><span class="op" id="7967685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967690">{</span><span class="ident" id="7967691">offset</span><span class="op" id="7967697">:</span>&nbsp;<span class="num" id="7967699">0</span><span class="op" id="7967700">,</span>&nbsp;<span class="ident" id="7967702">numBytes</span><span class="op" id="7967710">:</span>&nbsp;<span class="num" id="7967712">2</span><span class="op" id="7967713">}</span><span class="op" id="7967714">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967719">{</span><span class="ident" id="7967720">offset</span><span class="op" id="7967726">:</span>&nbsp;<span class="num" id="7967728">5</span><span class="op" id="7967729">,</span>&nbsp;<span class="ident" id="7967731">numBytes</span><span class="op" id="7967739">:</span>&nbsp;<span class="num" id="7967741">3</span><span class="op" id="7967742">}</span><span class="op" id="7967743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967747">}</span><span class="op" id="7967748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967752">realSize</span><span class="op" id="7967760">:</span>&nbsp;<span class="num" id="7967762">8</span><span class="op" id="7967763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967767">expected</span><span class="op" id="7967775">:</span>&nbsp;<span class="op" id="7967777">[</span><span class="op" id="7967778">]</span><span class="builtintype" id="7967779">byte</span><span class="op" id="7967783">(</span><span class="string" id="7967784">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="7967803">)</span><span class="op" id="7967804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967807">}</span><span class="op" id="7967808">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967815">sparseData</span><span class="op" id="7967825">:</span>&nbsp;<span class="op" id="7967827">[</span><span class="op" id="7967828">]</span><span class="builtintype" id="7967829">byte</span><span class="op" id="7967833">(</span><span class="string" id="7967834">&#34;abcde&#34;</span><span class="op" id="7967841">)</span><span class="op" id="7967842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967846">sparseMap</span><span class="op" id="7967855">:</span>&nbsp;<span class="op" id="7967857">[</span><span class="op" id="7967858">]</span><span class="ident" id="7967859">sparseEntry</span><span class="op" id="7967870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967875">{</span><span class="ident" id="7967876">offset</span><span class="op" id="7967882">:</span>&nbsp;<span class="num" id="7967884">0</span><span class="op" id="7967885">,</span>&nbsp;<span class="ident" id="7967887">numBytes</span><span class="op" id="7967895">:</span>&nbsp;<span class="num" id="7967897">2</span><span class="op" id="7967898">}</span><span class="op" id="7967899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967904">{</span><span class="ident" id="7967905">offset</span><span class="op" id="7967911">:</span>&nbsp;<span class="num" id="7967913">5</span><span class="op" id="7967914">,</span>&nbsp;<span class="ident" id="7967916">numBytes</span><span class="op" id="7967924">:</span>&nbsp;<span class="num" id="7967926">3</span><span class="op" id="7967927">}</span><span class="op" id="7967928">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7967932">}</span><span class="op" id="7967933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967937">realSize</span><span class="op" id="7967945">:</span>&nbsp;<span class="num" id="7967947">10</span><span class="op" id="7967949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7967953">expected</span><span class="op" id="7967961">:</span>&nbsp;<span class="op" id="7967963">[</span><span class="op" id="7967964">]</span><span class="builtintype" id="7967965">byte</span><span class="op" id="7967969">(</span><span class="string" id="7967970">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="7967997">)</span><span class="op" id="7967998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968001">}</span><span class="op" id="7968002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968005">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968009">sparseData</span><span class="op" id="7968019">:</span>&nbsp;<span class="op" id="7968021">[</span><span class="op" id="7968022">]</span><span class="builtintype" id="7968023">byte</span><span class="op" id="7968027">(</span><span class="string" id="7968028">&#34;abcde&#34;</span><span class="op" id="7968035">)</span><span class="op" id="7968036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968040">sparseMap</span><span class="op" id="7968049">:</span>&nbsp;<span class="op" id="7968051">[</span><span class="op" id="7968052">]</span><span class="ident" id="7968053">sparseEntry</span><span class="op" id="7968064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968069">{</span><span class="ident" id="7968070">offset</span><span class="op" id="7968076">:</span>&nbsp;<span class="num" id="7968078">1</span><span class="op" id="7968079">,</span>&nbsp;<span class="ident" id="7968081">numBytes</span><span class="op" id="7968089">:</span>&nbsp;<span class="num" id="7968091">3</span><span class="op" id="7968092">}</span><span class="op" id="7968093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968098">{</span><span class="ident" id="7968099">offset</span><span class="op" id="7968105">:</span>&nbsp;<span class="num" id="7968107">6</span><span class="op" id="7968108">,</span>&nbsp;<span class="ident" id="7968110">numBytes</span><span class="op" id="7968118">:</span>&nbsp;<span class="num" id="7968120">2</span><span class="op" id="7968121">}</span><span class="op" id="7968122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968126">}</span><span class="op" id="7968127">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968131">realSize</span><span class="op" id="7968139">:</span>&nbsp;<span class="num" id="7968141">8</span><span class="op" id="7968142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968146">expected</span><span class="op" id="7968154">:</span>&nbsp;<span class="op" id="7968156">[</span><span class="op" id="7968157">]</span><span class="builtintype" id="7968158">byte</span><span class="op" id="7968162">(</span><span class="string" id="7968163">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="7968182">)</span><span class="op" id="7968183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968186">}</span><span class="op" id="7968187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968194">sparseData</span><span class="op" id="7968204">:</span>&nbsp;<span class="op" id="7968206">[</span><span class="op" id="7968207">]</span><span class="builtintype" id="7968208">byte</span><span class="op" id="7968212">(</span><span class="string" id="7968213">&#34;abcde&#34;</span><span class="op" id="7968220">)</span><span class="op" id="7968221">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968225">sparseMap</span><span class="op" id="7968234">:</span>&nbsp;<span class="op" id="7968236">[</span><span class="op" id="7968237">]</span><span class="ident" id="7968238">sparseEntry</span><span class="op" id="7968249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968254">{</span><span class="ident" id="7968255">offset</span><span class="op" id="7968261">:</span>&nbsp;<span class="num" id="7968263">1</span><span class="op" id="7968264">,</span>&nbsp;<span class="ident" id="7968266">numBytes</span><span class="op" id="7968274">:</span>&nbsp;<span class="num" id="7968276">3</span><span class="op" id="7968277">}</span><span class="op" id="7968278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968283">{</span><span class="ident" id="7968284">offset</span><span class="op" id="7968290">:</span>&nbsp;<span class="num" id="7968292">6</span><span class="op" id="7968293">,</span>&nbsp;<span class="ident" id="7968295">numBytes</span><span class="op" id="7968303">:</span>&nbsp;<span class="num" id="7968305">2</span><span class="op" id="7968306">}</span><span class="op" id="7968307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968311">}</span><span class="op" id="7968312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968316">realSize</span><span class="op" id="7968324">:</span>&nbsp;<span class="num" id="7968326">10</span><span class="op" id="7968328">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968332">expected</span><span class="op" id="7968340">:</span>&nbsp;<span class="op" id="7968342">[</span><span class="op" id="7968343">]</span><span class="builtintype" id="7968344">byte</span><span class="op" id="7968348">(</span><span class="string" id="7968349">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="7968376">)</span><span class="op" id="7968377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968380">}</span><span class="op" id="7968381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968388">sparseData</span><span class="op" id="7968398">:</span>&nbsp;<span class="op" id="7968400">[</span><span class="op" id="7968401">]</span><span class="builtintype" id="7968402">byte</span><span class="op" id="7968406">(</span><span class="string" id="7968407">&#34;&#34;</span><span class="op" id="7968409">)</span><span class="op" id="7968410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968414">sparseMap</span><span class="op" id="7968423">:</span>&nbsp;&nbsp;<span class="ident" id="7968426">nil</span><span class="op" id="7968429">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968433">realSize</span><span class="op" id="7968441">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="7968445">2</span><span class="op" id="7968446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968450">expected</span><span class="op" id="7968458">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7968462">[</span><span class="op" id="7968463">]</span><span class="builtintype" id="7968464">byte</span><span class="op" id="7968468">(</span><span class="string" id="7968469">&#34;\x00\x00&#34;</span><span class="op" id="7968479">)</span><span class="op" id="7968480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968483">}</span><span class="op" id="7968484">,</span><br>
<span class="lineno"></span><span class="op" id="7968486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="7968489">func</span>&nbsp;<span class="ident" id="7968494">TestSparseFileReader</span><span class="op" id="7968514">(</span><span class="ident" id="7968515">t</span>&nbsp;<span class="op" id="7968517">*</span><span class="ident" id="7968518">testing</span><span class="op" id="7968525">.</span><span class="ident" id="7968526">T</span><span class="op" id="7968527">)</span>&nbsp;<span class="op" id="7968529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968532">for</span>&nbsp;<span class="ident" id="7968536">i</span><span class="op" id="7968537">,</span>&nbsp;<span class="ident" id="7968539">test</span>&nbsp;<span class="op" id="7968544">:=</span>&nbsp;<span class="keyword" id="7968547">range</span>&nbsp;<span class="ident" id="7968553">sparseFileReadTests</span>&nbsp;<span class="op" id="7968573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968577">r</span>&nbsp;<span class="op" id="7968579">:=</span>&nbsp;<span class="ident" id="7968582">bytes</span><span class="op" id="7968587">.</span><span class="ident" id="7968588">NewReader</span><span class="op" id="7968597">(</span><span class="ident" id="7968598">test</span><span class="op" id="7968602">.</span><span class="ident" id="7968603">sparseData</span><span class="op" id="7968613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968617">nb</span>&nbsp;<span class="op" id="7968620">:=</span>&nbsp;<span class="ident" id="7968623">int64</span><span class="op" id="7968628">(</span><span class="ident" id="7968629">r</span><span class="op" id="7968630">.</span><span class="ident" id="7968631">Len</span><span class="op" id="7968634">(</span><span class="op" id="7968635">)</span><span class="op" id="7968636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968640">sfr</span>&nbsp;<span class="op" id="7968644">:=</span>&nbsp;<span class="op" id="7968647">&amp;</span><span class="ident" id="7968648">sparseFileReader</span><span class="op" id="7968664">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968669">rfr</span><span class="op" id="7968672">:</span>&nbsp;<span class="op" id="7968674">&amp;</span><span class="ident" id="7968675">regFileReader</span><span class="op" id="7968688">{</span><span class="ident" id="7968689">r</span><span class="op" id="7968690">:</span>&nbsp;<span class="ident" id="7968692">r</span><span class="op" id="7968693">,</span>&nbsp;<span class="ident" id="7968695">nb</span><span class="op" id="7968697">:</span>&nbsp;<span class="ident" id="7968699">nb</span><span class="op" id="7968701">}</span><span class="op" id="7968702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968707">sp</span><span class="op" id="7968709">:</span>&nbsp;&nbsp;<span class="ident" id="7968712">test</span><span class="op" id="7968716">.</span><span class="ident" id="7968717">sparseMap</span><span class="op" id="7968726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968731">pos</span><span class="op" id="7968734">:</span>&nbsp;<span class="num" id="7968736">0</span><span class="op" id="7968737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968742">tot</span><span class="op" id="7968745">:</span>&nbsp;<span class="ident" id="7968747">test</span><span class="op" id="7968751">.</span><span class="ident" id="7968752">realSize</span><span class="op" id="7968760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968764">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968768">if</span>&nbsp;<span class="ident" id="7968771">sfr</span><span class="op" id="7968774">.</span><span class="ident" id="7968775">numBytes</span><span class="op" id="7968783">(</span><span class="op" id="7968784">)</span>&nbsp;<span class="op" id="7968786">!=</span>&nbsp;<span class="ident" id="7968789">nb</span>&nbsp;<span class="op" id="7968792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968797">t</span><span class="op" id="7968798">.</span><span class="ident" id="7968799">Errorf</span><span class="op" id="7968805">(</span><span class="string" id="7968806">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7968861">,</span>&nbsp;<span class="ident" id="7968863">i</span><span class="op" id="7968864">,</span>&nbsp;<span class="ident" id="7968866">sfr</span><span class="op" id="7968869">.</span><span class="ident" id="7968870">numBytes</span><span class="op" id="7968878">(</span><span class="op" id="7968879">)</span><span class="op" id="7968880">,</span>&nbsp;<span class="ident" id="7968882">nb</span><span class="op" id="7968884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968892">buf</span><span class="op" id="7968895">,</span>&nbsp;<span class="ident" id="7968897">err</span>&nbsp;<span class="op" id="7968901">:=</span>&nbsp;<span class="ident" id="7968904">ioutil</span><span class="op" id="7968910">.</span><span class="ident" id="7968911">ReadAll</span><span class="op" id="7968918">(</span><span class="ident" id="7968919">sfr</span><span class="op" id="7968922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7968926">if</span>&nbsp;<span class="ident" id="7968929">err</span>&nbsp;<span class="op" id="7968933">!=</span>&nbsp;<span class="ident" id="7968936">nil</span>&nbsp;<span class="op" id="7968940">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7968945">t</span><span class="op" id="7968946">.</span><span class="ident" id="7968947">Errorf</span><span class="op" id="7968953">(</span><span class="string" id="7968954">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7968985">,</span>&nbsp;<span class="ident" id="7968987">i</span><span class="op" id="7968988">,</span>&nbsp;<span class="ident" id="7968990">err</span><span class="op" id="7968993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7968997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969001">if</span>&nbsp;<span class="ident" id="7969004">e</span>&nbsp;<span class="op" id="7969006">:=</span>&nbsp;<span class="ident" id="7969009">test</span><span class="op" id="7969013">.</span><span class="ident" id="7969014">expected</span><span class="op" id="7969022">;</span>&nbsp;<span class="op" id="7969024">!</span><span class="ident" id="7969025">bytes</span><span class="op" id="7969030">.</span><span class="ident" id="7969031">Equal</span><span class="op" id="7969036">(</span><span class="ident" id="7969037">buf</span><span class="op" id="7969040">,</span>&nbsp;<span class="ident" id="7969042">e</span><span class="op" id="7969043">)</span>&nbsp;<span class="op" id="7969045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969050">t</span><span class="op" id="7969051">.</span><span class="ident" id="7969052">Errorf</span><span class="op" id="7969058">(</span><span class="string" id="7969059">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7969092">,</span>&nbsp;<span class="ident" id="7969094">i</span><span class="op" id="7969095">,</span>&nbsp;<span class="ident" id="7969097">buf</span><span class="op" id="7969100">,</span>&nbsp;<span class="ident" id="7969102">e</span><span class="op" id="7969103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969107">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969111">if</span>&nbsp;<span class="ident" id="7969114">sfr</span><span class="op" id="7969117">.</span><span class="ident" id="7969118">numBytes</span><span class="op" id="7969126">(</span><span class="op" id="7969127">)</span>&nbsp;<span class="op" id="7969129">!=</span>&nbsp;<span class="num" id="7969132">0</span>&nbsp;<span class="op" id="7969134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969139">t</span><span class="op" id="7969140">.</span><span class="ident" id="7969141">Errorf</span><span class="op" id="7969147">(</span><span class="string" id="7969148">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="7969208">,</span>&nbsp;<span class="ident" id="7969210">i</span><span class="op" id="7969211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969218">}</span><br>
<span class="lineno"></span><span class="op" id="7969220">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="7969223">func</span>&nbsp;<span class="ident" id="7969228">TestSparseIncrementalRead</span><span class="op" id="7969253">(</span><span class="ident" id="7969254">t</span>&nbsp;<span class="op" id="7969256">*</span><span class="ident" id="7969257">testing</span><span class="op" id="7969264">.</span><span class="ident" id="7969265">T</span><span class="op" id="7969266">)</span>&nbsp;<span class="op" id="7969268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969271">sparseMap</span>&nbsp;<span class="op" id="7969281">:=</span>&nbsp;<span class="op" id="7969284">[</span><span class="op" id="7969285">]</span><span class="ident" id="7969286">sparseEntry</span><span class="op" id="7969297">{</span><span class="op" id="7969298">{</span><span class="num" id="7969299">10</span><span class="op" id="7969301">,</span>&nbsp;<span class="num" id="7969303">2</span><span class="op" id="7969304">}</span><span class="op" id="7969305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969308">sparseData</span>&nbsp;<span class="op" id="7969319">:=</span>&nbsp;<span class="op" id="7969322">[</span><span class="op" id="7969323">]</span><span class="builtintype" id="7969324">byte</span><span class="op" id="7969328">(</span><span class="string" id="7969329">&#34;Go&#34;</span><span class="op" id="7969333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969336">expected</span>&nbsp;<span class="op" id="7969345">:=</span>&nbsp;<span class="string" id="7969348">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969427">r</span>&nbsp;<span class="op" id="7969429">:=</span>&nbsp;<span class="ident" id="7969432">bytes</span><span class="op" id="7969437">.</span><span class="ident" id="7969438">NewReader</span><span class="op" id="7969447">(</span><span class="ident" id="7969448">sparseData</span><span class="op" id="7969458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969461">nb</span>&nbsp;<span class="op" id="7969464">:=</span>&nbsp;<span class="ident" id="7969467">int64</span><span class="op" id="7969472">(</span><span class="ident" id="7969473">r</span><span class="op" id="7969474">.</span><span class="ident" id="7969475">Len</span><span class="op" id="7969478">(</span><span class="op" id="7969479">)</span><span class="op" id="7969480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969483">sfr</span>&nbsp;<span class="op" id="7969487">:=</span>&nbsp;<span class="op" id="7969490">&amp;</span><span class="ident" id="7969491">sparseFileReader</span><span class="op" id="7969507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969511">rfr</span><span class="op" id="7969514">:</span>&nbsp;<span class="op" id="7969516">&amp;</span><span class="ident" id="7969517">regFileReader</span><span class="op" id="7969530">{</span><span class="ident" id="7969531">r</span><span class="op" id="7969532">:</span>&nbsp;<span class="ident" id="7969534">r</span><span class="op" id="7969535">,</span>&nbsp;<span class="ident" id="7969537">nb</span><span class="op" id="7969539">:</span>&nbsp;<span class="ident" id="7969541">nb</span><span class="op" id="7969543">}</span><span class="op" id="7969544">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969548">sp</span><span class="op" id="7969550">:</span>&nbsp;&nbsp;<span class="ident" id="7969553">sparseMap</span><span class="op" id="7969562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969566">pos</span><span class="op" id="7969569">:</span>&nbsp;<span class="num" id="7969571">0</span><span class="op" id="7969572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969576">tot</span><span class="op" id="7969579">:</span>&nbsp;<span class="ident" id="7969581">int64</span><span class="op" id="7969586">(</span><span class="builtinfunc" id="7969587">len</span><span class="op" id="7969590">(</span><span class="ident" id="7969591">expected</span><span class="op" id="7969599">)</span><span class="op" id="7969600">)</span><span class="op" id="7969601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969608">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7969677">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969725">var</span>&nbsp;<span class="ident" id="7969729">outputBuf</span>&nbsp;<span class="ident" id="7969739">bytes</span><span class="op" id="7969744">.</span><span class="ident" id="7969745">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969753">buf</span>&nbsp;<span class="op" id="7969757">:=</span>&nbsp;<span class="builtinfunc" id="7969760">make</span><span class="op" id="7969764">(</span><span class="op" id="7969765">[</span><span class="op" id="7969766">]</span><span class="builtintype" id="7969767">byte</span><span class="op" id="7969771">,</span>&nbsp;<span class="num" id="7969773">6</span><span class="op" id="7969774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969777">for</span>&nbsp;<span class="op" id="7969781">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969785">n</span><span class="op" id="7969786">,</span>&nbsp;<span class="ident" id="7969788">err</span>&nbsp;<span class="op" id="7969792">:=</span>&nbsp;<span class="ident" id="7969795">sfr</span><span class="op" id="7969798">.</span><span class="ident" id="7969799">Read</span><span class="op" id="7969803">(</span><span class="ident" id="7969804">buf</span><span class="op" id="7969807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969811">if</span>&nbsp;<span class="ident" id="7969814">err</span>&nbsp;<span class="op" id="7969818">==</span>&nbsp;<span class="ident" id="7969821">io</span><span class="op" id="7969823">.</span><span class="ident" id="7969824">EOF</span>&nbsp;<span class="op" id="7969828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969833">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969845">if</span>&nbsp;<span class="ident" id="7969848">err</span>&nbsp;<span class="op" id="7969852">!=</span>&nbsp;<span class="ident" id="7969855">nil</span>&nbsp;<span class="op" id="7969859">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969864">t</span><span class="op" id="7969865">.</span><span class="ident" id="7969866">Errorf</span><span class="op" id="7969872">(</span><span class="string" id="7969873">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7969902">,</span>&nbsp;<span class="ident" id="7969904">err</span><span class="op" id="7969907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7969911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969915">if</span>&nbsp;<span class="ident" id="7969918">n</span>&nbsp;<span class="op" id="7969920">&gt;</span>&nbsp;<span class="num" id="7969922">0</span>&nbsp;<span class="op" id="7969924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969929">_</span><span class="op" id="7969930">,</span>&nbsp;<span class="ident" id="7969932">err</span>&nbsp;<span class="op" id="7969936">:=</span>&nbsp;<span class="ident" id="7969939">outputBuf</span><span class="op" id="7969948">.</span><span class="ident" id="7969949">Write</span><span class="op" id="7969954">(</span><span class="ident" id="7969955">buf</span><span class="op" id="7969958">[</span><span class="op" id="7969959">:</span><span class="ident" id="7969960">n</span><span class="op" id="7969961">]</span><span class="op" id="7969962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7969967">if</span>&nbsp;<span class="ident" id="7969970">err</span>&nbsp;<span class="op" id="7969974">!=</span>&nbsp;<span class="ident" id="7969977">nil</span>&nbsp;<span class="op" id="7969981">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7969987">t</span><span class="op" id="7969988">.</span><span class="ident" id="7969989">Errorf</span><span class="op" id="7969995">(</span><span class="string" id="7969996">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="7970026">,</span>&nbsp;<span class="ident" id="7970028">err</span><span class="op" id="7970031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970046">got</span>&nbsp;<span class="op" id="7970050">:=</span>&nbsp;<span class="ident" id="7970053">outputBuf</span><span class="op" id="7970062">.</span><span class="ident" id="7970063">String</span><span class="op" id="7970069">(</span><span class="op" id="7970070">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970073">if</span>&nbsp;<span class="ident" id="7970076">got</span>&nbsp;<span class="op" id="7970080">!=</span>&nbsp;<span class="ident" id="7970083">expected</span>&nbsp;<span class="op" id="7970092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970096">t</span><span class="op" id="7970097">.</span><span class="ident" id="7970098">Errorf</span><span class="op" id="7970104">(</span><span class="string" id="7970105">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7970129">,</span>&nbsp;<span class="ident" id="7970131">got</span><span class="op" id="7970134">,</span>&nbsp;<span class="ident" id="7970136">expected</span><span class="op" id="7970144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970147">}</span><br>
<span class="lineno"></span><span class="op" id="7970149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7970152">func</span>&nbsp;<span class="ident" id="7970157">TestReadGNUSparseMap0x1</span><span class="op" id="7970180">(</span><span class="ident" id="7970181">t</span>&nbsp;<span class="op" id="7970183">*</span><span class="ident" id="7970184">testing</span><span class="op" id="7970191">.</span><span class="ident" id="7970192">T</span><span class="op" id="7970193">)</span>&nbsp;<span class="op" id="7970195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970198">headers</span>&nbsp;<span class="op" id="7970206">:=</span>&nbsp;<span class="keyword" id="7970209">map</span><span class="op" id="7970212">[</span><span class="builtintype" id="7970213">string</span><span class="op" id="7970219">]</span><span class="builtintype" id="7970220">string</span><span class="op" id="7970226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970230">paxGNUSparseNumBlocks</span><span class="op" id="7970251">:</span>&nbsp;<span class="string" id="7970253">&#34;4&#34;</span><span class="op" id="7970256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970260">paxGNUSparseMap</span><span class="op" id="7970275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7970283">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="7970303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970306">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970309">expected</span>&nbsp;<span class="op" id="7970318">:=</span>&nbsp;<span class="op" id="7970321">[</span><span class="op" id="7970322">]</span><span class="ident" id="7970323">sparseEntry</span><span class="op" id="7970334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970338">{</span><span class="ident" id="7970339">offset</span><span class="op" id="7970345">:</span>&nbsp;<span class="num" id="7970347">0</span><span class="op" id="7970348">,</span>&nbsp;<span class="ident" id="7970350">numBytes</span><span class="op" id="7970358">:</span>&nbsp;<span class="num" id="7970360">5</span><span class="op" id="7970361">}</span><span class="op" id="7970362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970366">{</span><span class="ident" id="7970367">offset</span><span class="op" id="7970373">:</span>&nbsp;<span class="num" id="7970375">10</span><span class="op" id="7970377">,</span>&nbsp;<span class="ident" id="7970379">numBytes</span><span class="op" id="7970387">:</span>&nbsp;<span class="num" id="7970389">5</span><span class="op" id="7970390">}</span><span class="op" id="7970391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970395">{</span><span class="ident" id="7970396">offset</span><span class="op" id="7970402">:</span>&nbsp;<span class="num" id="7970404">20</span><span class="op" id="7970406">,</span>&nbsp;<span class="ident" id="7970408">numBytes</span><span class="op" id="7970416">:</span>&nbsp;<span class="num" id="7970418">5</span><span class="op" id="7970419">}</span><span class="op" id="7970420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970424">{</span><span class="ident" id="7970425">offset</span><span class="op" id="7970431">:</span>&nbsp;<span class="num" id="7970433">30</span><span class="op" id="7970435">,</span>&nbsp;<span class="ident" id="7970437">numBytes</span><span class="op" id="7970445">:</span>&nbsp;<span class="num" id="7970447">5</span><span class="op" id="7970448">}</span><span class="op" id="7970449">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970456">sp</span><span class="op" id="7970458">,</span>&nbsp;<span class="ident" id="7970460">err</span>&nbsp;<span class="op" id="7970464">:=</span>&nbsp;<span class="ident" id="7970467">readGNUSparseMap0x1</span><span class="op" id="7970486">(</span><span class="ident" id="7970487">headers</span><span class="op" id="7970494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970497">if</span>&nbsp;<span class="ident" id="7970500">err</span>&nbsp;<span class="op" id="7970504">!=</span>&nbsp;<span class="ident" id="7970507">nil</span>&nbsp;<span class="op" id="7970511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970515">t</span><span class="op" id="7970516">.</span><span class="ident" id="7970517">Errorf</span><span class="op" id="7970523">(</span><span class="string" id="7970524">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7970546">,</span>&nbsp;<span class="ident" id="7970548">err</span><span class="op" id="7970551">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970557">if</span>&nbsp;<span class="op" id="7970560">!</span><span class="ident" id="7970561">reflect</span><span class="op" id="7970568">.</span><span class="ident" id="7970569">DeepEqual</span><span class="op" id="7970578">(</span><span class="ident" id="7970579">sp</span><span class="op" id="7970581">,</span>&nbsp;<span class="ident" id="7970583">expected</span><span class="op" id="7970591">)</span>&nbsp;<span class="op" id="7970593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970597">t</span><span class="op" id="7970598">.</span><span class="ident" id="7970599">Errorf</span><span class="op" id="7970605">(</span><span class="string" id="7970606">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7970647">,</span>&nbsp;<span class="ident" id="7970649">sp</span><span class="op" id="7970651">,</span>&nbsp;<span class="ident" id="7970653">expected</span><span class="op" id="7970661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7970664">}</span><br>
<span class="lineno"></span><span class="op" id="7970666">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="7970669">func</span>&nbsp;<span class="ident" id="7970674">TestReadGNUSparseMap1x0</span><span class="op" id="7970697">(</span><span class="ident" id="7970698">t</span>&nbsp;<span class="op" id="7970700">*</span><span class="ident" id="7970701">testing</span><span class="op" id="7970708">.</span><span class="ident" id="7970709">T</span><span class="op" id="7970710">)</span>&nbsp;<span class="op" id="7970712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7970715">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970799">numEntries</span>&nbsp;<span class="op" id="7970810">:=</span>&nbsp;<span class="num" id="7970813">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970818">expected</span>&nbsp;<span class="op" id="7970827">:=</span>&nbsp;<span class="builtinfunc" id="7970830">make</span><span class="op" id="7970834">(</span><span class="op" id="7970835">[</span><span class="op" id="7970836">]</span><span class="ident" id="7970837">sparseEntry</span><span class="op" id="7970848">,</span>&nbsp;<span class="num" id="7970850">0</span><span class="op" id="7970851">,</span>&nbsp;<span class="ident" id="7970853">numEntries</span><span class="op" id="7970863">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970866">sparseMap</span>&nbsp;<span class="op" id="7970876">:=</span>&nbsp;<span class="builtinfunc" id="7970879">new</span><span class="op" id="7970882">(</span><span class="ident" id="7970883">bytes</span><span class="op" id="7970888">.</span><span class="ident" id="7970889">Buffer</span><span class="op" id="7970895">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970899">fmt</span><span class="op" id="7970902">.</span><span class="ident" id="7970903">Fprintf</span><span class="op" id="7970910">(</span><span class="ident" id="7970911">sparseMap</span><span class="op" id="7970920">,</span>&nbsp;<span class="string" id="7970922">&#34;%d\n&#34;</span><span class="op" id="7970928">,</span>&nbsp;<span class="ident" id="7970930">numEntries</span><span class="op" id="7970940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7970943">for</span>&nbsp;<span class="ident" id="7970947">i</span>&nbsp;<span class="op" id="7970949">:=</span>&nbsp;<span class="num" id="7970952">0</span><span class="op" id="7970953">;</span>&nbsp;<span class="ident" id="7970955">i</span>&nbsp;<span class="op" id="7970957">&lt;</span>&nbsp;<span class="ident" id="7970959">numEntries</span><span class="op" id="7970969">;</span>&nbsp;<span class="ident" id="7970971">i</span><span class="op" id="7970972">++</span>&nbsp;<span class="op" id="7970975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7970979">offset</span>&nbsp;<span class="op" id="7970986">:=</span>&nbsp;<span class="ident" id="7970989">int64</span><span class="op" id="7970994">(</span><span class="num" id="7970995">2048</span>&nbsp;<span class="op" id="7971000">*</span>&nbsp;<span class="ident" id="7971002">i</span><span class="op" id="7971003">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971007">numBytes</span>&nbsp;<span class="op" id="7971016">:=</span>&nbsp;<span class="ident" id="7971019">int64</span><span class="op" id="7971024">(</span><span class="num" id="7971025">1024</span><span class="op" id="7971029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971033">expected</span>&nbsp;<span class="op" id="7971042">=</span>&nbsp;<span class="builtinfunc" id="7971044">append</span><span class="op" id="7971050">(</span><span class="ident" id="7971051">expected</span><span class="op" id="7971059">,</span>&nbsp;<span class="ident" id="7971061">sparseEntry</span><span class="op" id="7971072">{</span><span class="ident" id="7971073">offset</span><span class="op" id="7971079">:</span>&nbsp;<span class="ident" id="7971081">offset</span><span class="op" id="7971087">,</span>&nbsp;<span class="ident" id="7971089">numBytes</span><span class="op" id="7971097">:</span>&nbsp;<span class="ident" id="7971099">numBytes</span><span class="op" id="7971107">}</span><span class="op" id="7971108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971112">fmt</span><span class="op" id="7971115">.</span><span class="ident" id="7971116">Fprintf</span><span class="op" id="7971123">(</span><span class="ident" id="7971124">sparseMap</span><span class="op" id="7971133">,</span>&nbsp;<span class="string" id="7971135">&#34;%d\n%d\n&#34;</span><span class="op" id="7971145">,</span>&nbsp;<span class="ident" id="7971147">offset</span><span class="op" id="7971153">,</span>&nbsp;<span class="ident" id="7971155">numBytes</span><span class="op" id="7971163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7971170">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971249">headerBlocks</span>&nbsp;<span class="op" id="7971262">:=</span>&nbsp;<span class="op" id="7971265">(</span><span class="ident" id="7971266">sparseMap</span><span class="op" id="7971275">.</span><span class="ident" id="7971276">Len</span><span class="op" id="7971279">(</span><span class="op" id="7971280">)</span>&nbsp;<span class="op" id="7971282">+</span>&nbsp;<span class="ident" id="7971284">blockSize</span>&nbsp;<span class="op" id="7971294">-</span>&nbsp;<span class="num" id="7971296">1</span><span class="op" id="7971297">)</span>&nbsp;<span class="op" id="7971299">/</span>&nbsp;<span class="ident" id="7971301">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971312">bufLen</span>&nbsp;<span class="op" id="7971319">:=</span>&nbsp;<span class="ident" id="7971322">blockSize</span>&nbsp;<span class="op" id="7971332">*</span>&nbsp;<span class="ident" id="7971334">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971348">buf</span>&nbsp;<span class="op" id="7971352">:=</span>&nbsp;<span class="builtinfunc" id="7971355">make</span><span class="op" id="7971359">(</span><span class="op" id="7971360">[</span><span class="op" id="7971361">]</span><span class="builtintype" id="7971362">byte</span><span class="op" id="7971366">,</span>&nbsp;<span class="ident" id="7971368">bufLen</span><span class="op" id="7971374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7971377">copy</span><span class="op" id="7971381">(</span><span class="ident" id="7971382">buf</span><span class="op" id="7971385">,</span>&nbsp;<span class="ident" id="7971387">sparseMap</span><span class="op" id="7971396">.</span><span class="ident" id="7971397">Bytes</span><span class="op" id="7971402">(</span><span class="op" id="7971403">)</span><span class="op" id="7971404">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7971408">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971449">r</span>&nbsp;<span class="op" id="7971451">:=</span>&nbsp;<span class="ident" id="7971454">bytes</span><span class="op" id="7971459">.</span><span class="ident" id="7971460">NewReader</span><span class="op" id="7971469">(</span><span class="ident" id="7971470">buf</span><span class="op" id="7971473">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7971477">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971501">sp</span><span class="op" id="7971503">,</span>&nbsp;<span class="ident" id="7971505">err</span>&nbsp;<span class="op" id="7971509">:=</span>&nbsp;<span class="ident" id="7971512">readGNUSparseMap1x0</span><span class="op" id="7971531">(</span><span class="ident" id="7971532">r</span><span class="op" id="7971533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971536">if</span>&nbsp;<span class="ident" id="7971539">err</span>&nbsp;<span class="op" id="7971543">!=</span>&nbsp;<span class="ident" id="7971546">nil</span>&nbsp;<span class="op" id="7971550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971554">t</span><span class="op" id="7971555">.</span><span class="ident" id="7971556">Errorf</span><span class="op" id="7971562">(</span><span class="string" id="7971563">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7971585">,</span>&nbsp;<span class="ident" id="7971587">err</span><span class="op" id="7971590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971596">if</span>&nbsp;<span class="op" id="7971599">!</span><span class="ident" id="7971600">reflect</span><span class="op" id="7971607">.</span><span class="ident" id="7971608">DeepEqual</span><span class="op" id="7971617">(</span><span class="ident" id="7971618">sp</span><span class="op" id="7971620">,</span>&nbsp;<span class="ident" id="7971622">expected</span><span class="op" id="7971630">)</span>&nbsp;<span class="op" id="7971632">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971636">t</span><span class="op" id="7971637">.</span><span class="ident" id="7971638">Errorf</span><span class="op" id="7971644">(</span><span class="string" id="7971645">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7971686">,</span>&nbsp;<span class="ident" id="7971688">sp</span><span class="op" id="7971690">,</span>&nbsp;<span class="ident" id="7971692">expected</span><span class="op" id="7971700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971703">}</span><br>
<span class="lineno"></span><span class="op" id="7971705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7971708">func</span>&nbsp;<span class="ident" id="7971713">TestUninitializedRead</span><span class="op" id="7971734">(</span><span class="ident" id="7971735">t</span>&nbsp;<span class="op" id="7971737">*</span><span class="ident" id="7971738">testing</span><span class="op" id="7971745">.</span><span class="ident" id="7971746">T</span><span class="op" id="7971747">)</span>&nbsp;<span class="op" id="7971749">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971752">test</span>&nbsp;<span class="op" id="7971757">:=</span>&nbsp;<span class="ident" id="7971760">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971772">f</span><span class="op" id="7971773">,</span>&nbsp;<span class="ident" id="7971775">err</span>&nbsp;<span class="op" id="7971779">:=</span>&nbsp;<span class="ident" id="7971782">os</span><span class="op" id="7971784">.</span><span class="ident" id="7971785">Open</span><span class="op" id="7971789">(</span><span class="ident" id="7971790">test</span><span class="op" id="7971794">.</span><span class="ident" id="7971795">file</span><span class="op" id="7971799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971802">if</span>&nbsp;<span class="ident" id="7971805">err</span>&nbsp;<span class="op" id="7971809">!=</span>&nbsp;<span class="ident" id="7971812">nil</span>&nbsp;<span class="op" id="7971816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971820">t</span><span class="op" id="7971821">.</span><span class="ident" id="7971822">Fatalf</span><span class="op" id="7971828">(</span><span class="string" id="7971829">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7971851">,</span>&nbsp;<span class="ident" id="7971853">err</span><span class="op" id="7971856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7971859">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971862">defer</span>&nbsp;<span class="ident" id="7971868">f</span><span class="op" id="7971869">.</span><span class="ident" id="7971870">Close</span><span class="op" id="7971875">(</span><span class="op" id="7971876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971880">tr</span>&nbsp;<span class="op" id="7971883">:=</span>&nbsp;<span class="ident" id="7971886">NewReader</span><span class="op" id="7971895">(</span><span class="ident" id="7971896">f</span><span class="op" id="7971897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971900">_</span><span class="op" id="7971901">,</span>&nbsp;<span class="ident" id="7971903">err</span>&nbsp;<span class="op" id="7971907">=</span>&nbsp;<span class="ident" id="7971909">tr</span><span class="op" id="7971911">.</span><span class="ident" id="7971912">Read</span><span class="op" id="7971916">(</span><span class="op" id="7971917">[</span><span class="op" id="7971918">]</span><span class="builtintype" id="7971919">byte</span><span class="op" id="7971923">{</span><span class="op" id="7971924">}</span><span class="op" id="7971925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7971928">if</span>&nbsp;<span class="ident" id="7971931">err</span>&nbsp;<span class="op" id="7971935">==</span>&nbsp;<span class="ident" id="7971938">nil</span>&nbsp;<span class="op" id="7971942">||</span>&nbsp;<span class="ident" id="7971945">err</span>&nbsp;<span class="op" id="7971949">!=</span>&nbsp;<span class="ident" id="7971952">io</span><span class="op" id="7971954">.</span><span class="ident" id="7971955">EOF</span>&nbsp;<span class="op" id="7971959">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7971963">t</span><span class="op" id="7971964">.</span><span class="ident" id="7971965">Errorf</span><span class="op" id="7971971">(</span><span class="string" id="7971972">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="7972005">,</span>&nbsp;<span class="ident" id="7972007">err</span><span class="op" id="7972010">,</span>&nbsp;<span class="ident" id="7972012">io</span><span class="op" id="7972014">.</span><span class="ident" id="7972015">EOF</span><span class="op" id="7972018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="7972024">}</span>
</div>
</body>
</html>
