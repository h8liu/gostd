<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7363113">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7363169">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7363223">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7363274">package</span>&nbsp;<span class="ident" id="7363282">syntax</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363290">import</span>&nbsp;<span class="op" id="7363297">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363300">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363309">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363316">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363327">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="7363337">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363340">type</span>&nbsp;<span class="ident" id="7363345">parseTest</span>&nbsp;<span class="keyword" id="7363355">struct</span>&nbsp;<span class="op" id="7363362">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363365">Regexp</span>&nbsp;<span class="builtintype" id="7363372">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363380">Dump</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7363387">string</span><br>
<span class="lineno"></span><span class="op" id="7363394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363397">var</span>&nbsp;<span class="ident" id="7363401">parseTests</span>&nbsp;<span class="op" id="7363412">=</span>&nbsp;<span class="op" id="7363414">[</span><span class="op" id="7363415">]</span><span class="ident" id="7363416">parseTest</span><span class="op" id="7363425">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363428">//&nbsp;Base&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363443">{</span><span class="string" id="7363444">`a`</span><span class="op" id="7363447">,</span>&nbsp;<span class="string" id="7363449">`lit{a}`</span><span class="op" id="7363457">}</span><span class="op" id="7363458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363461">{</span><span class="string" id="7363462">`a.`</span><span class="op" id="7363466">,</span>&nbsp;<span class="string" id="7363468">`cat{lit{a}dot{}}`</span><span class="op" id="7363486">}</span><span class="op" id="7363487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363490">{</span><span class="string" id="7363491">`a.b`</span><span class="op" id="7363496">,</span>&nbsp;<span class="string" id="7363498">`cat{lit{a}dot{}lit{b}}`</span><span class="op" id="7363522">}</span><span class="op" id="7363523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363526">{</span><span class="string" id="7363527">`ab`</span><span class="op" id="7363531">,</span>&nbsp;<span class="string" id="7363533">`str{ab}`</span><span class="op" id="7363542">}</span><span class="op" id="7363543">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363546">{</span><span class="string" id="7363547">`a.b.c`</span><span class="op" id="7363554">,</span>&nbsp;<span class="string" id="7363556">`cat{lit{a}dot{}lit{b}dot{}lit{c}}`</span><span class="op" id="7363591">}</span><span class="op" id="7363592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363595">{</span><span class="string" id="7363596">`abc`</span><span class="op" id="7363601">,</span>&nbsp;<span class="string" id="7363603">`str{abc}`</span><span class="op" id="7363613">}</span><span class="op" id="7363614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363617">{</span><span class="string" id="7363618">`a|^`</span><span class="op" id="7363623">,</span>&nbsp;<span class="string" id="7363625">`alt{lit{a}bol{}}`</span><span class="op" id="7363643">}</span><span class="op" id="7363644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363647">{</span><span class="string" id="7363648">`a|b`</span><span class="op" id="7363653">,</span>&nbsp;<span class="string" id="7363655">`cc{0x61-0x62}`</span><span class="op" id="7363670">}</span><span class="op" id="7363671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363674">{</span><span class="string" id="7363675">`(a)`</span><span class="op" id="7363680">,</span>&nbsp;<span class="string" id="7363682">`cap{lit{a}}`</span><span class="op" id="7363695">}</span><span class="op" id="7363696">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363699">{</span><span class="string" id="7363700">`(a)|b`</span><span class="op" id="7363707">,</span>&nbsp;<span class="string" id="7363709">`alt{cap{lit{a}}lit{b}}`</span><span class="op" id="7363733">}</span><span class="op" id="7363734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363737">{</span><span class="string" id="7363738">`a*`</span><span class="op" id="7363742">,</span>&nbsp;<span class="string" id="7363744">`star{lit{a}}`</span><span class="op" id="7363758">}</span><span class="op" id="7363759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363762">{</span><span class="string" id="7363763">`a+`</span><span class="op" id="7363767">,</span>&nbsp;<span class="string" id="7363769">`plus{lit{a}}`</span><span class="op" id="7363783">}</span><span class="op" id="7363784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363787">{</span><span class="string" id="7363788">`a?`</span><span class="op" id="7363792">,</span>&nbsp;<span class="string" id="7363794">`que{lit{a}}`</span><span class="op" id="7363807">}</span><span class="op" id="7363808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363811">{</span><span class="string" id="7363812">`a{2}`</span><span class="op" id="7363818">,</span>&nbsp;<span class="string" id="7363820">`rep{2,2&nbsp;lit{a}}`</span><span class="op" id="7363837">}</span><span class="op" id="7363838">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363841">{</span><span class="string" id="7363842">`a{2,3}`</span><span class="op" id="7363850">,</span>&nbsp;<span class="string" id="7363852">`rep{2,3&nbsp;lit{a}}`</span><span class="op" id="7363869">}</span><span class="op" id="7363870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363873">{</span><span class="string" id="7363874">`a{2,}`</span><span class="op" id="7363881">,</span>&nbsp;<span class="string" id="7363883">`rep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7363901">}</span><span class="op" id="7363902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363905">{</span><span class="string" id="7363906">`a*?`</span><span class="op" id="7363911">,</span>&nbsp;<span class="string" id="7363913">`nstar{lit{a}}`</span><span class="op" id="7363928">}</span><span class="op" id="7363929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363932">{</span><span class="string" id="7363933">`a+?`</span><span class="op" id="7363938">,</span>&nbsp;<span class="string" id="7363940">`nplus{lit{a}}`</span><span class="op" id="7363955">}</span><span class="op" id="7363956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363959">{</span><span class="string" id="7363960">`a??`</span><span class="op" id="7363965">,</span>&nbsp;<span class="string" id="7363967">`nque{lit{a}}`</span><span class="op" id="7363981">}</span><span class="op" id="7363982">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363985">{</span><span class="string" id="7363986">`a{2}?`</span><span class="op" id="7363993">,</span>&nbsp;<span class="string" id="7363995">`nrep{2,2&nbsp;lit{a}}`</span><span class="op" id="7364013">}</span><span class="op" id="7364014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364017">{</span><span class="string" id="7364018">`a{2,3}?`</span><span class="op" id="7364027">,</span>&nbsp;<span class="string" id="7364029">`nrep{2,3&nbsp;lit{a}}`</span><span class="op" id="7364047">}</span><span class="op" id="7364048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364051">{</span><span class="string" id="7364052">`a{2,}?`</span><span class="op" id="7364060">,</span>&nbsp;<span class="string" id="7364062">`nrep{2,-1&nbsp;lit{a}}`</span><span class="op" id="7364081">}</span><span class="op" id="7364082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364085">//&nbsp;Malformed&nbsp;{&nbsp;}&nbsp;are&nbsp;treated&nbsp;as&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364128">{</span><span class="string" id="7364129">`x{1001`</span><span class="op" id="7364137">,</span>&nbsp;<span class="string" id="7364139">`str{x{1001}`</span><span class="op" id="7364152">}</span><span class="op" id="7364153">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364156">{</span><span class="string" id="7364157">`x{9876543210`</span><span class="op" id="7364171">,</span>&nbsp;<span class="string" id="7364173">`str{x{9876543210}`</span><span class="op" id="7364192">}</span><span class="op" id="7364193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364196">{</span><span class="string" id="7364197">`x{9876543210,`</span><span class="op" id="7364212">,</span>&nbsp;<span class="string" id="7364214">`str{x{9876543210,}`</span><span class="op" id="7364234">}</span><span class="op" id="7364235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364238">{</span><span class="string" id="7364239">`x{2,1`</span><span class="op" id="7364246">,</span>&nbsp;<span class="string" id="7364248">`str{x{2,1}`</span><span class="op" id="7364260">}</span><span class="op" id="7364261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364264">{</span><span class="string" id="7364265">`x{1,9876543210`</span><span class="op" id="7364281">,</span>&nbsp;<span class="string" id="7364283">`str{x{1,9876543210}`</span><span class="op" id="7364304">}</span><span class="op" id="7364305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364308">{</span><span class="string" id="7364309">``</span><span class="op" id="7364311">,</span>&nbsp;<span class="string" id="7364313">`emp{}`</span><span class="op" id="7364320">}</span><span class="op" id="7364321">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364324">{</span><span class="string" id="7364325">`|`</span><span class="op" id="7364328">,</span>&nbsp;<span class="string" id="7364330">`emp{}`</span><span class="op" id="7364337">}</span><span class="op" id="7364338">,</span>&nbsp;<span class="comment" id="7364340">//&nbsp;alt{emp{}emp{}}&nbsp;but&nbsp;got&nbsp;factored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364377">{</span><span class="string" id="7364378">`|x|`</span><span class="op" id="7364383">,</span>&nbsp;<span class="string" id="7364385">`alt{emp{}lit{x}emp{}}`</span><span class="op" id="7364408">}</span><span class="op" id="7364409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364412">{</span><span class="string" id="7364413">`.`</span><span class="op" id="7364416">,</span>&nbsp;<span class="string" id="7364418">`dot{}`</span><span class="op" id="7364425">}</span><span class="op" id="7364426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364429">{</span><span class="string" id="7364430">`^`</span><span class="op" id="7364433">,</span>&nbsp;<span class="string" id="7364435">`bol{}`</span><span class="op" id="7364442">}</span><span class="op" id="7364443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364446">{</span><span class="string" id="7364447">`$`</span><span class="op" id="7364450">,</span>&nbsp;<span class="string" id="7364452">`eol{}`</span><span class="op" id="7364459">}</span><span class="op" id="7364460">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364463">{</span><span class="string" id="7364464">`\|`</span><span class="op" id="7364468">,</span>&nbsp;<span class="string" id="7364470">`lit{|}`</span><span class="op" id="7364478">}</span><span class="op" id="7364479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364482">{</span><span class="string" id="7364483">`\(`</span><span class="op" id="7364487">,</span>&nbsp;<span class="string" id="7364489">`lit{(}`</span><span class="op" id="7364497">}</span><span class="op" id="7364498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364501">{</span><span class="string" id="7364502">`\)`</span><span class="op" id="7364506">,</span>&nbsp;<span class="string" id="7364508">`lit{)}`</span><span class="op" id="7364516">}</span><span class="op" id="7364517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364520">{</span><span class="string" id="7364521">`\*`</span><span class="op" id="7364525">,</span>&nbsp;<span class="string" id="7364527">`lit{*}`</span><span class="op" id="7364535">}</span><span class="op" id="7364536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364539">{</span><span class="string" id="7364540">`\+`</span><span class="op" id="7364544">,</span>&nbsp;<span class="string" id="7364546">`lit{+}`</span><span class="op" id="7364554">}</span><span class="op" id="7364555">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364558">{</span><span class="string" id="7364559">`\?`</span><span class="op" id="7364563">,</span>&nbsp;<span class="string" id="7364565">`lit{?}`</span><span class="op" id="7364573">}</span><span class="op" id="7364574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364577">{</span><span class="string" id="7364578">`{`</span><span class="op" id="7364581">,</span>&nbsp;<span class="string" id="7364583">`lit{{}`</span><span class="op" id="7364591">}</span><span class="op" id="7364592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364595">{</span><span class="string" id="7364596">`}`</span><span class="op" id="7364599">,</span>&nbsp;<span class="string" id="7364601">`lit{}}`</span><span class="op" id="7364609">}</span><span class="op" id="7364610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364613">{</span><span class="string" id="7364614">`\.`</span><span class="op" id="7364618">,</span>&nbsp;<span class="string" id="7364620">`lit{.}`</span><span class="op" id="7364628">}</span><span class="op" id="7364629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364632">{</span><span class="string" id="7364633">`\^`</span><span class="op" id="7364637">,</span>&nbsp;<span class="string" id="7364639">`lit{^}`</span><span class="op" id="7364647">}</span><span class="op" id="7364648">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364651">{</span><span class="string" id="7364652">`\$`</span><span class="op" id="7364656">,</span>&nbsp;<span class="string" id="7364658">`lit{$}`</span><span class="op" id="7364666">}</span><span class="op" id="7364667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364670">{</span><span class="string" id="7364671">`\\`</span><span class="op" id="7364675">,</span>&nbsp;<span class="string" id="7364677">`lit{\}`</span><span class="op" id="7364685">}</span><span class="op" id="7364686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364689">{</span><span class="string" id="7364690">`[ace]`</span><span class="op" id="7364697">,</span>&nbsp;<span class="string" id="7364699">`cc{0x61&nbsp;0x63&nbsp;0x65}`</span><span class="op" id="7364719">}</span><span class="op" id="7364720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364723">{</span><span class="string" id="7364724">`[abc]`</span><span class="op" id="7364731">,</span>&nbsp;<span class="string" id="7364733">`cc{0x61-0x63}`</span><span class="op" id="7364748">}</span><span class="op" id="7364749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364752">{</span><span class="string" id="7364753">`[a-z]`</span><span class="op" id="7364760">,</span>&nbsp;<span class="string" id="7364762">`cc{0x61-0x7a}`</span><span class="op" id="7364777">}</span><span class="op" id="7364778">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364781">{</span><span class="string" id="7364782">`[a]`</span><span class="op" id="7364787">,</span>&nbsp;<span class="string" id="7364789">`lit{a}`</span><span class="op" id="7364797">}</span><span class="op" id="7364798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364801">{</span><span class="string" id="7364802">`\-`</span><span class="op" id="7364806">,</span>&nbsp;<span class="string" id="7364808">`lit{-}`</span><span class="op" id="7364816">}</span><span class="op" id="7364817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364820">{</span><span class="string" id="7364821">`-`</span><span class="op" id="7364824">,</span>&nbsp;<span class="string" id="7364826">`lit{-}`</span><span class="op" id="7364834">}</span><span class="op" id="7364835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364838">{</span><span class="string" id="7364839">`\_`</span><span class="op" id="7364843">,</span>&nbsp;<span class="string" id="7364845">`lit{_}`</span><span class="op" id="7364853">}</span><span class="op" id="7364854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364857">{</span><span class="string" id="7364858">`abc`</span><span class="op" id="7364863">,</span>&nbsp;<span class="string" id="7364865">`str{abc}`</span><span class="op" id="7364875">}</span><span class="op" id="7364876">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364879">{</span><span class="string" id="7364880">`abc|def`</span><span class="op" id="7364889">,</span>&nbsp;<span class="string" id="7364891">`alt{str{abc}str{def}}`</span><span class="op" id="7364914">}</span><span class="op" id="7364915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364918">{</span><span class="string" id="7364919">`abc|def|ghi`</span><span class="op" id="7364932">,</span>&nbsp;<span class="string" id="7364934">`alt{str{abc}str{def}str{ghi}}`</span><span class="op" id="7364965">}</span><span class="op" id="7364966">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364970">//&nbsp;Posix&nbsp;and&nbsp;Perl&nbsp;extensions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365000">{</span><span class="string" id="7365001">`[[:lower:]]`</span><span class="op" id="7365014">,</span>&nbsp;<span class="string" id="7365016">`cc{0x61-0x7a}`</span><span class="op" id="7365031">}</span><span class="op" id="7365032">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365035">{</span><span class="string" id="7365036">`[a-z]`</span><span class="op" id="7365043">,</span>&nbsp;<span class="string" id="7365045">`cc{0x61-0x7a}`</span><span class="op" id="7365060">}</span><span class="op" id="7365061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365064">{</span><span class="string" id="7365065">`[^[:lower:]]`</span><span class="op" id="7365079">,</span>&nbsp;<span class="string" id="7365081">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7365109">}</span><span class="op" id="7365110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365113">{</span><span class="string" id="7365114">`[[:^lower:]]`</span><span class="op" id="7365128">,</span>&nbsp;<span class="string" id="7365130">`cc{0x0-0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7365158">}</span><span class="op" id="7365159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365162">{</span><span class="string" id="7365163">`(?i)[[:lower:]]`</span><span class="op" id="7365180">,</span>&nbsp;<span class="string" id="7365182">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7365220">}</span><span class="op" id="7365221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365224">{</span><span class="string" id="7365225">`(?i)[a-z]`</span><span class="op" id="7365236">,</span>&nbsp;<span class="string" id="7365238">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7365276">}</span><span class="op" id="7365277">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365280">{</span><span class="string" id="7365281">`(?i)[^[:lower:]]`</span><span class="op" id="7365299">,</span>&nbsp;<span class="string" id="7365301">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7365365">}</span><span class="op" id="7365366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365369">{</span><span class="string" id="7365370">`(?i)[[:^lower:]]`</span><span class="op" id="7365388">,</span>&nbsp;<span class="string" id="7365390">`cc{0x0-0x40&nbsp;0x5b-0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7365454">}</span><span class="op" id="7365455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365458">{</span><span class="string" id="7365459">`\d`</span><span class="op" id="7365463">,</span>&nbsp;<span class="string" id="7365465">`cc{0x30-0x39}`</span><span class="op" id="7365480">}</span><span class="op" id="7365481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365484">{</span><span class="string" id="7365485">`\D`</span><span class="op" id="7365489">,</span>&nbsp;<span class="string" id="7365491">`cc{0x0-0x2f&nbsp;0x3a-0x10ffff}`</span><span class="op" id="7365519">}</span><span class="op" id="7365520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365523">{</span><span class="string" id="7365524">`\s`</span><span class="op" id="7365528">,</span>&nbsp;<span class="string" id="7365530">`cc{0x9-0xa&nbsp;0xc-0xd&nbsp;0x20}`</span><span class="op" id="7365556">}</span><span class="op" id="7365557">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365560">{</span><span class="string" id="7365561">`\S`</span><span class="op" id="7365565">,</span>&nbsp;<span class="string" id="7365567">`cc{0x0-0x8&nbsp;0xb&nbsp;0xe-0x1f&nbsp;0x21-0x10ffff}`</span><span class="op" id="7365607">}</span><span class="op" id="7365608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365611">{</span><span class="string" id="7365612">`\w`</span><span class="op" id="7365616">,</span>&nbsp;<span class="string" id="7365618">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a}`</span><span class="op" id="7365658">}</span><span class="op" id="7365659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365662">{</span><span class="string" id="7365663">`\W`</span><span class="op" id="7365667">,</span>&nbsp;<span class="string" id="7365669">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x10ffff}`</span><span class="op" id="7365722">}</span><span class="op" id="7365723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365726">{</span><span class="string" id="7365727">`(?i)\w`</span><span class="op" id="7365735">,</span>&nbsp;<span class="string" id="7365737">`cc{0x30-0x39&nbsp;0x41-0x5a&nbsp;0x5f&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7365790">}</span><span class="op" id="7365791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365794">{</span><span class="string" id="7365795">`(?i)\W`</span><span class="op" id="7365803">,</span>&nbsp;<span class="string" id="7365805">`cc{0x0-0x2f&nbsp;0x3a-0x40&nbsp;0x5b-0x5e&nbsp;0x60&nbsp;0x7b-0x17e&nbsp;0x180-0x2129&nbsp;0x212b-0x10ffff}`</span><span class="op" id="7365884">}</span><span class="op" id="7365885">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365888">{</span><span class="string" id="7365889">`[^\\]`</span><span class="op" id="7365896">,</span>&nbsp;<span class="string" id="7365898">`cc{0x0-0x5b&nbsp;0x5d-0x10ffff}`</span><span class="op" id="7365926">}</span><span class="op" id="7365927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365930">//&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;`\C`,&nbsp;`byte{}`&nbsp;},&nbsp;&nbsp;//&nbsp;probably&nbsp;never</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365974">//&nbsp;Unicode,&nbsp;negatives,&nbsp;and&nbsp;a&nbsp;double&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366021">{</span><span class="string" id="7366022">`\p{Braille}`</span><span class="op" id="7366035">,</span>&nbsp;<span class="string" id="7366037">`cc{0x2800-0x28ff}`</span><span class="op" id="7366056">}</span><span class="op" id="7366057">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366060">{</span><span class="string" id="7366061">`\P{Braille}`</span><span class="op" id="7366074">,</span>&nbsp;<span class="string" id="7366076">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7366108">}</span><span class="op" id="7366109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366112">{</span><span class="string" id="7366113">`\p{^Braille}`</span><span class="op" id="7366127">,</span>&nbsp;<span class="string" id="7366129">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7366161">}</span><span class="op" id="7366162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366165">{</span><span class="string" id="7366166">`\P{^Braille}`</span><span class="op" id="7366180">,</span>&nbsp;<span class="string" id="7366182">`cc{0x2800-0x28ff}`</span><span class="op" id="7366201">}</span><span class="op" id="7366202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366205">{</span><span class="string" id="7366206">`\pZ`</span><span class="op" id="7366211">,</span>&nbsp;<span class="string" id="7366213">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7366284">}</span><span class="op" id="7366285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366288">{</span><span class="string" id="7366289">`[\p{Braille}]`</span><span class="op" id="7366304">,</span>&nbsp;<span class="string" id="7366306">`cc{0x2800-0x28ff}`</span><span class="op" id="7366325">}</span><span class="op" id="7366326">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366329">{</span><span class="string" id="7366330">`[\P{Braille}]`</span><span class="op" id="7366345">,</span>&nbsp;<span class="string" id="7366347">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7366379">}</span><span class="op" id="7366380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366383">{</span><span class="string" id="7366384">`[\p{^Braille}]`</span><span class="op" id="7366400">,</span>&nbsp;<span class="string" id="7366402">`cc{0x0-0x27ff&nbsp;0x2900-0x10ffff}`</span><span class="op" id="7366434">}</span><span class="op" id="7366435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366438">{</span><span class="string" id="7366439">`[\P{^Braille}]`</span><span class="op" id="7366455">,</span>&nbsp;<span class="string" id="7366457">`cc{0x2800-0x28ff}`</span><span class="op" id="7366476">}</span><span class="op" id="7366477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366480">{</span><span class="string" id="7366481">`[\pZ]`</span><span class="op" id="7366488">,</span>&nbsp;<span class="string" id="7366490">`cc{0x20&nbsp;0xa0&nbsp;0x1680&nbsp;0x2000-0x200a&nbsp;0x2028-0x2029&nbsp;0x202f&nbsp;0x205f&nbsp;0x3000}`</span><span class="op" id="7366561">}</span><span class="op" id="7366562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366565">{</span><span class="string" id="7366566">`\p{Lu}`</span><span class="op" id="7366574">,</span>&nbsp;<span class="ident" id="7366576">mkCharClass</span><span class="op" id="7366587">(</span><span class="ident" id="7366588">unicode</span><span class="op" id="7366595">.</span><span class="ident" id="7366596">IsUpper</span><span class="op" id="7366603">)</span><span class="op" id="7366604">}</span><span class="op" id="7366605">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366608">{</span><span class="string" id="7366609">`[\p{Lu}]`</span><span class="op" id="7366619">,</span>&nbsp;<span class="ident" id="7366621">mkCharClass</span><span class="op" id="7366632">(</span><span class="ident" id="7366633">unicode</span><span class="op" id="7366640">.</span><span class="ident" id="7366641">IsUpper</span><span class="op" id="7366648">)</span><span class="op" id="7366649">}</span><span class="op" id="7366650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366653">{</span><span class="string" id="7366654">`(?i)[\p{Lu}]`</span><span class="op" id="7366668">,</span>&nbsp;<span class="ident" id="7366670">mkCharClass</span><span class="op" id="7366681">(</span><span class="ident" id="7366682">isUpperFold</span><span class="op" id="7366693">)</span><span class="op" id="7366694">}</span><span class="op" id="7366695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366698">{</span><span class="string" id="7366699">`\p{Any}`</span><span class="op" id="7366708">,</span>&nbsp;<span class="string" id="7366710">`dot{}`</span><span class="op" id="7366717">}</span><span class="op" id="7366718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366721">{</span><span class="string" id="7366722">`\p{^Any}`</span><span class="op" id="7366732">,</span>&nbsp;<span class="string" id="7366734">`cc{}`</span><span class="op" id="7366740">}</span><span class="op" id="7366741">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366745">//&nbsp;Hex,&nbsp;octal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366761">{</span><span class="string" id="7366762">`[\012-\234]\141`</span><span class="op" id="7366779">,</span>&nbsp;<span class="string" id="7366781">`cat{cc{0xa-0x9c}lit{a}}`</span><span class="op" id="7366806">}</span><span class="op" id="7366807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366810">{</span><span class="string" id="7366811">`[\x{41}-\x7a]\x61`</span><span class="op" id="7366830">,</span>&nbsp;<span class="string" id="7366832">`cat{cc{0x41-0x7a}lit{a}}`</span><span class="op" id="7366858">}</span><span class="op" id="7366859">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366863">//&nbsp;More&nbsp;interesting&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366905">{</span><span class="string" id="7366906">`a{,2}`</span><span class="op" id="7366913">,</span>&nbsp;<span class="string" id="7366915">`str{a{,2}}`</span><span class="op" id="7366927">}</span><span class="op" id="7366928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366931">{</span><span class="string" id="7366932">`\.\^\$\\`</span><span class="op" id="7366942">,</span>&nbsp;<span class="string" id="7366944">`str{.^$\}`</span><span class="op" id="7366955">}</span><span class="op" id="7366956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366959">{</span><span class="string" id="7366960">`[a-zABC]`</span><span class="op" id="7366970">,</span>&nbsp;<span class="string" id="7366972">`cc{0x41-0x43&nbsp;0x61-0x7a}`</span><span class="op" id="7366997">}</span><span class="op" id="7366998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367001">{</span><span class="string" id="7367002">`[^a]`</span><span class="op" id="7367008">,</span>&nbsp;<span class="string" id="7367010">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7367038">}</span><span class="op" id="7367039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367042">{</span><span class="string" id="7367043">`[α-ε☺]`</span><span class="op" id="7367055">,</span>&nbsp;<span class="string" id="7367057">`cc{0x3b1-0x3b5&nbsp;0x263a}`</span><span class="op" id="7367081">}</span><span class="op" id="7367082">,</span>&nbsp;<span class="comment" id="7367084">//&nbsp;utf-8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367094">{</span><span class="string" id="7367095">`a*{`</span><span class="op" id="7367100">,</span>&nbsp;<span class="string" id="7367102">`cat{star{lit{a}}lit{{}}`</span><span class="op" id="7367127">}</span><span class="op" id="7367128">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367132">//&nbsp;Test&nbsp;precedences</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367153">{</span><span class="string" id="7367154">`(?:ab)*`</span><span class="op" id="7367163">,</span>&nbsp;<span class="string" id="7367165">`star{str{ab}}`</span><span class="op" id="7367180">}</span><span class="op" id="7367181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367184">{</span><span class="string" id="7367185">`(ab)*`</span><span class="op" id="7367192">,</span>&nbsp;<span class="string" id="7367194">`star{cap{str{ab}}}`</span><span class="op" id="7367214">}</span><span class="op" id="7367215">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367218">{</span><span class="string" id="7367219">`ab|cd`</span><span class="op" id="7367226">,</span>&nbsp;<span class="string" id="7367228">`alt{str{ab}str{cd}}`</span><span class="op" id="7367249">}</span><span class="op" id="7367250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367253">{</span><span class="string" id="7367254">`a(b|c)d`</span><span class="op" id="7367263">,</span>&nbsp;<span class="string" id="7367265">`cat{lit{a}cap{cc{0x62-0x63}}lit{d}}`</span><span class="op" id="7367302">}</span><span class="op" id="7367303">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367307">//&nbsp;Test&nbsp;flattening.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367328">{</span><span class="string" id="7367329">`(?:a)`</span><span class="op" id="7367336">,</span>&nbsp;<span class="string" id="7367338">`lit{a}`</span><span class="op" id="7367346">}</span><span class="op" id="7367347">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367350">{</span><span class="string" id="7367351">`(?:ab)(?:cd)`</span><span class="op" id="7367365">,</span>&nbsp;<span class="string" id="7367367">`str{abcd}`</span><span class="op" id="7367378">}</span><span class="op" id="7367379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367382">{</span><span class="string" id="7367383">`(?:a+b+)(?:c+d+)`</span><span class="op" id="7367401">,</span>&nbsp;<span class="string" id="7367403">`cat{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7367458">}</span><span class="op" id="7367459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367462">{</span><span class="string" id="7367463">`(?:a+|b+)|(?:c+|d+)`</span><span class="op" id="7367484">,</span>&nbsp;<span class="string" id="7367486">`alt{plus{lit{a}}plus{lit{b}}plus{lit{c}}plus{lit{d}}}`</span><span class="op" id="7367541">}</span><span class="op" id="7367542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367545">{</span><span class="string" id="7367546">`(?:a|b)|(?:c|d)`</span><span class="op" id="7367563">,</span>&nbsp;<span class="string" id="7367565">`cc{0x61-0x64}`</span><span class="op" id="7367580">}</span><span class="op" id="7367581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367584">{</span><span class="string" id="7367585">`a|.`</span><span class="op" id="7367590">,</span>&nbsp;<span class="string" id="7367592">`dot{}`</span><span class="op" id="7367599">}</span><span class="op" id="7367600">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367603">{</span><span class="string" id="7367604">`.|a`</span><span class="op" id="7367609">,</span>&nbsp;<span class="string" id="7367611">`dot{}`</span><span class="op" id="7367618">}</span><span class="op" id="7367619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367622">{</span><span class="string" id="7367623">`(?:[abc]|A|Z|hello|world)`</span><span class="op" id="7367650">,</span>&nbsp;<span class="string" id="7367652">`alt{cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}str{hello}str{world}}`</span><span class="op" id="7367702">}</span><span class="op" id="7367703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367706">{</span><span class="string" id="7367707">`(?:[abc]|A|Z)`</span><span class="op" id="7367722">,</span>&nbsp;<span class="string" id="7367724">`cc{0x41&nbsp;0x5a&nbsp;0x61-0x63}`</span><span class="op" id="7367749">}</span><span class="op" id="7367750">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367754">//&nbsp;Test&nbsp;Perl&nbsp;quoted&nbsp;literals</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367784">{</span><span class="string" id="7367785">`\Q+|*?{[\E`</span><span class="op" id="7367797">,</span>&nbsp;<span class="string" id="7367799">`str{+|*?{[}`</span><span class="op" id="7367812">}</span><span class="op" id="7367813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367816">{</span><span class="string" id="7367817">`\Q+\E+`</span><span class="op" id="7367825">,</span>&nbsp;<span class="string" id="7367827">`plus{lit{+}}`</span><span class="op" id="7367841">}</span><span class="op" id="7367842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367845">{</span><span class="string" id="7367846">`\Q\\E`</span><span class="op" id="7367853">,</span>&nbsp;<span class="string" id="7367855">`lit{\}`</span><span class="op" id="7367863">}</span><span class="op" id="7367864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367867">{</span><span class="string" id="7367868">`\Q\\\E`</span><span class="op" id="7367876">,</span>&nbsp;<span class="string" id="7367878">`str{\\}`</span><span class="op" id="7367887">}</span><span class="op" id="7367888">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367892">//&nbsp;Test&nbsp;Perl&nbsp;\A&nbsp;and&nbsp;\z</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367916">{</span><span class="string" id="7367917">`(?m)^`</span><span class="op" id="7367924">,</span>&nbsp;<span class="string" id="7367926">`bol{}`</span><span class="op" id="7367933">}</span><span class="op" id="7367934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367937">{</span><span class="string" id="7367938">`(?m)$`</span><span class="op" id="7367945">,</span>&nbsp;<span class="string" id="7367947">`eol{}`</span><span class="op" id="7367954">}</span><span class="op" id="7367955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367958">{</span><span class="string" id="7367959">`(?-m)^`</span><span class="op" id="7367967">,</span>&nbsp;<span class="string" id="7367969">`bot{}`</span><span class="op" id="7367976">}</span><span class="op" id="7367977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367980">{</span><span class="string" id="7367981">`(?-m)$`</span><span class="op" id="7367989">,</span>&nbsp;<span class="string" id="7367991">`eot{}`</span><span class="op" id="7367998">}</span><span class="op" id="7367999">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368002">{</span><span class="string" id="7368003">`(?m)\A`</span><span class="op" id="7368011">,</span>&nbsp;<span class="string" id="7368013">`bot{}`</span><span class="op" id="7368020">}</span><span class="op" id="7368021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368024">{</span><span class="string" id="7368025">`(?m)\z`</span><span class="op" id="7368033">,</span>&nbsp;<span class="string" id="7368035">`eot{\z}`</span><span class="op" id="7368044">}</span><span class="op" id="7368045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368048">{</span><span class="string" id="7368049">`(?-m)\A`</span><span class="op" id="7368058">,</span>&nbsp;<span class="string" id="7368060">`bot{}`</span><span class="op" id="7368067">}</span><span class="op" id="7368068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368071">{</span><span class="string" id="7368072">`(?-m)\z`</span><span class="op" id="7368081">,</span>&nbsp;<span class="string" id="7368083">`eot{\z}`</span><span class="op" id="7368092">}</span><span class="op" id="7368093">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368097">//&nbsp;Test&nbsp;named&nbsp;captures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368121">{</span><span class="string" id="7368122">`(?P&lt;name&gt;a)`</span><span class="op" id="7368135">,</span>&nbsp;<span class="string" id="7368137">`cap{name:lit{a}}`</span><span class="op" id="7368155">}</span><span class="op" id="7368156">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368160">//&nbsp;Case-folded&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368185">{</span><span class="string" id="7368186">`[Aa]`</span><span class="op" id="7368192">,</span>&nbsp;<span class="string" id="7368194">`litfold{A}`</span><span class="op" id="7368206">}</span><span class="op" id="7368207">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368210">{</span><span class="string" id="7368211">`[\x{100}\x{101}]`</span><span class="op" id="7368229">,</span>&nbsp;<span class="string" id="7368231">`litfold{Ā}`</span><span class="op" id="7368244">}</span><span class="op" id="7368245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368248">{</span><span class="string" id="7368249">`[Δδ]`</span><span class="op" id="7368257">,</span>&nbsp;<span class="string" id="7368259">`litfold{Δ}`</span><span class="op" id="7368272">}</span><span class="op" id="7368273">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368277">//&nbsp;Strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368289">{</span><span class="string" id="7368290">`abcde`</span><span class="op" id="7368297">,</span>&nbsp;<span class="string" id="7368299">`str{abcde}`</span><span class="op" id="7368311">}</span><span class="op" id="7368312">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368315">{</span><span class="string" id="7368316">`[Aa][Bb]cd`</span><span class="op" id="7368328">,</span>&nbsp;<span class="string" id="7368330">`cat{strfold{AB}str{cd}}`</span><span class="op" id="7368355">}</span><span class="op" id="7368356">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368360">//&nbsp;Factoring.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368375">{</span><span class="string" id="7368376">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7368397">,</span>&nbsp;<span class="string" id="7368399">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7368478">}</span><span class="op" id="7368479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368482">{</span><span class="string" id="7368483">`ax+y|ax+z|ay+w`</span><span class="op" id="7368499">,</span>&nbsp;<span class="string" id="7368501">`cat{lit{a}alt{cat{plus{lit{x}}cc{0x79-0x7a}}cat{plus{lit{y}}lit{w}}}}`</span><span class="op" id="7368572">}</span><span class="op" id="7368573">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368577">//&nbsp;Bug&nbsp;fixes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368592">{</span><span class="string" id="7368593">`(?:.)`</span><span class="op" id="7368600">,</span>&nbsp;<span class="string" id="7368602">`dot{}`</span><span class="op" id="7368609">}</span><span class="op" id="7368610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368613">{</span><span class="string" id="7368614">`(?:x|(?:xa))`</span><span class="op" id="7368628">,</span>&nbsp;<span class="string" id="7368630">`cat{lit{x}alt{emp{}lit{a}}}`</span><span class="op" id="7368659">}</span><span class="op" id="7368660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368663">{</span><span class="string" id="7368664">`(?:.|(?:.a))`</span><span class="op" id="7368678">,</span>&nbsp;<span class="string" id="7368680">`cat{dot{}alt{emp{}lit{a}}}`</span><span class="op" id="7368708">}</span><span class="op" id="7368709">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368712">{</span><span class="string" id="7368713">`(?:A(?:A|a))`</span><span class="op" id="7368727">,</span>&nbsp;<span class="string" id="7368729">`cat{lit{A}litfold{A}}`</span><span class="op" id="7368752">}</span><span class="op" id="7368753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368756">{</span><span class="string" id="7368757">`(?:A|a)`</span><span class="op" id="7368766">,</span>&nbsp;<span class="string" id="7368768">`litfold{A}`</span><span class="op" id="7368780">}</span><span class="op" id="7368781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368784">{</span><span class="string" id="7368785">`A|(?:A|a)`</span><span class="op" id="7368796">,</span>&nbsp;<span class="string" id="7368798">`litfold{A}`</span><span class="op" id="7368810">}</span><span class="op" id="7368811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368814">{</span><span class="string" id="7368815">`(?s).`</span><span class="op" id="7368822">,</span>&nbsp;<span class="string" id="7368824">`dot{}`</span><span class="op" id="7368831">}</span><span class="op" id="7368832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368835">{</span><span class="string" id="7368836">`(?-s).`</span><span class="op" id="7368844">,</span>&nbsp;<span class="string" id="7368846">`dnl{}`</span><span class="op" id="7368853">}</span><span class="op" id="7368854">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368857">{</span><span class="string" id="7368858">`(?:(?:^).)`</span><span class="op" id="7368870">,</span>&nbsp;<span class="string" id="7368872">`cat{bol{}dot{}}`</span><span class="op" id="7368889">}</span><span class="op" id="7368890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368893">{</span><span class="string" id="7368894">`(?-s)(?:(?:^).)`</span><span class="op" id="7368911">,</span>&nbsp;<span class="string" id="7368913">`cat{bol{}dnl{}}`</span><span class="op" id="7368930">}</span><span class="op" id="7368931">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368935">//&nbsp;RE2&nbsp;prefix_tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368956">{</span><span class="string" id="7368957">`abc|abd`</span><span class="op" id="7368966">,</span>&nbsp;<span class="string" id="7368968">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7368995">}</span><span class="op" id="7368996">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368999">{</span><span class="string" id="7369000">`a(?:b)c|abd`</span><span class="op" id="7369013">,</span>&nbsp;<span class="string" id="7369015">`cat{str{ab}cc{0x63-0x64}}`</span><span class="op" id="7369042">}</span><span class="op" id="7369043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369046">{</span><span class="string" id="7369047">`abc|abd|aef|bcx|bcy`</span><span class="op" id="7369068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369072">`alt{cat{lit{a}alt{cat{lit{b}cc{0x63-0x64}}str{ef}}}`</span>&nbsp;<span class="op" id="7369126">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369131">`cat{str{bc}cc{0x78-0x79}}}`</span><span class="op" id="7369159">}</span><span class="op" id="7369160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369163">{</span><span class="string" id="7369164">`abc|x|abd`</span><span class="op" id="7369175">,</span>&nbsp;<span class="string" id="7369177">`alt{str{abc}lit{x}str{abd}}`</span><span class="op" id="7369206">}</span><span class="op" id="7369207">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369210">{</span><span class="string" id="7369211">`(?i)abc|ABD`</span><span class="op" id="7369224">,</span>&nbsp;<span class="string" id="7369226">`cat{strfold{AB}cc{0x43-0x44&nbsp;0x63-0x64}}`</span><span class="op" id="7369267">}</span><span class="op" id="7369268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369271">{</span><span class="string" id="7369272">`[ab]c|[ab]d`</span><span class="op" id="7369285">,</span>&nbsp;<span class="string" id="7369287">`cat{cc{0x61-0x62}cc{0x63-0x64}}`</span><span class="op" id="7369320">}</span><span class="op" id="7369321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369324">{</span><span class="string" id="7369325">`(?:xx|yy)c|(?:xx|yy)d`</span><span class="op" id="7369348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369352">`cat{alt{str{xx}str{yy}}cc{0x63-0x64}}`</span><span class="op" id="7369391">}</span><span class="op" id="7369392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369395">{</span><span class="string" id="7369396">`x{2}|x{2}[0-9]`</span><span class="op" id="7369412">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369416">`cat{rep{2,2&nbsp;lit{x}}alt{emp{}cc{0x30-0x39}}}`</span><span class="op" id="7369461">}</span><span class="op" id="7369462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369465">{</span><span class="string" id="7369466">`x{2}y|x{2}[0-9]y`</span><span class="op" id="7369484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369488">`cat{rep{2,2&nbsp;lit{x}}alt{lit{y}cat{cc{0x30-0x39}lit{y}}}}`</span><span class="op" id="7369545">}</span><span class="op" id="7369546">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369550">//&nbsp;Valid&nbsp;repetitions.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369573">{</span><span class="string" id="7369574">`((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}))`</span><span class="op" id="7369624">,</span>&nbsp;<span class="string" id="7369626">``</span><span class="op" id="7369628">}</span><span class="op" id="7369629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369632">{</span><span class="string" id="7369633">`((((((((((x{1}){2}){2}){2}){2}){2}){2}){2}){2}){2})`</span><span class="op" id="7369686">,</span>&nbsp;<span class="string" id="7369688">``</span><span class="op" id="7369690">}</span><span class="op" id="7369691">,</span><br>
<span class="lineno"></span><span class="op" id="7369693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369696">const</span>&nbsp;<span class="ident" id="7369702">testFlags</span>&nbsp;<span class="op" id="7369712">=</span>&nbsp;<span class="ident" id="7369714">MatchNL</span>&nbsp;<span class="op" id="7369722">|</span>&nbsp;<span class="ident" id="7369724">PerlX</span>&nbsp;<span class="op" id="7369730">|</span>&nbsp;<span class="ident" id="7369732">UnicodeGroups</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="7369747">func</span>&nbsp;<span class="ident" id="7369752">TestParseSimple</span><span class="op" id="7369767">(</span><span class="ident" id="7369768">t</span>&nbsp;<span class="op" id="7369770">*</span><span class="ident" id="7369771">testing</span><span class="op" id="7369778">.</span><span class="ident" id="7369779">T</span><span class="op" id="7369780">)</span>&nbsp;<span class="op" id="7369782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369785">testParseDump</span><span class="op" id="7369798">(</span><span class="ident" id="7369799">t</span><span class="op" id="7369800">,</span>&nbsp;<span class="ident" id="7369802">parseTests</span><span class="op" id="7369812">,</span>&nbsp;<span class="ident" id="7369814">testFlags</span><span class="op" id="7369823">)</span><br>
<span class="lineno"></span><span class="op" id="7369825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7369828">var</span>&nbsp;<span class="ident" id="7369832">foldcaseTests</span>&nbsp;<span class="op" id="7369846">=</span>&nbsp;<span class="op" id="7369848">[</span><span class="op" id="7369849">]</span><span class="ident" id="7369850">parseTest</span><span class="op" id="7369859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369862">{</span><span class="string" id="7369863">`AbCdE`</span><span class="op" id="7369870">,</span>&nbsp;<span class="string" id="7369872">`strfold{ABCDE}`</span><span class="op" id="7369888">}</span><span class="op" id="7369889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369892">{</span><span class="string" id="7369893">`[Aa]`</span><span class="op" id="7369899">,</span>&nbsp;<span class="string" id="7369901">`litfold{A}`</span><span class="op" id="7369913">}</span><span class="op" id="7369914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369917">{</span><span class="string" id="7369918">`a`</span><span class="op" id="7369921">,</span>&nbsp;<span class="string" id="7369923">`litfold{A}`</span><span class="op" id="7369935">}</span><span class="op" id="7369936">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369940">//&nbsp;0x17F&nbsp;is&nbsp;an&nbsp;old&nbsp;English&nbsp;long&nbsp;s&nbsp;(looks&nbsp;like&nbsp;an&nbsp;f)&nbsp;and&nbsp;folds&nbsp;to&nbsp;s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370009">//&nbsp;0x212A&nbsp;is&nbsp;the&nbsp;Kelvin&nbsp;symbol&nbsp;and&nbsp;folds&nbsp;to&nbsp;k.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370057">{</span><span class="string" id="7370058">`A[F-g]`</span><span class="op" id="7370066">,</span>&nbsp;<span class="string" id="7370068">`cat{litfold{A}cc{0x41-0x7a&nbsp;0x17f&nbsp;0x212a}}`</span><span class="op" id="7370111">}</span><span class="op" id="7370112">,</span>&nbsp;<span class="comment" id="7370114">//&nbsp;[Aa][A-z...]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370131">{</span><span class="string" id="7370132">`[[:upper:]]`</span><span class="op" id="7370145">,</span>&nbsp;<span class="string" id="7370147">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7370185">}</span><span class="op" id="7370186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370189">{</span><span class="string" id="7370190">`[[:lower:]]`</span><span class="op" id="7370203">,</span>&nbsp;<span class="string" id="7370205">`cc{0x41-0x5a&nbsp;0x61-0x7a&nbsp;0x17f&nbsp;0x212a}`</span><span class="op" id="7370243">}</span><span class="op" id="7370244">,</span><br>
<span class="lineno">225</span><span class="op" id="7370246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370249">func</span>&nbsp;<span class="ident" id="7370254">TestParseFoldCase</span><span class="op" id="7370271">(</span><span class="ident" id="7370272">t</span>&nbsp;<span class="op" id="7370274">*</span><span class="ident" id="7370275">testing</span><span class="op" id="7370282">.</span><span class="ident" id="7370283">T</span><span class="op" id="7370284">)</span>&nbsp;<span class="op" id="7370286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370289">testParseDump</span><span class="op" id="7370302">(</span><span class="ident" id="7370303">t</span><span class="op" id="7370304">,</span>&nbsp;<span class="ident" id="7370306">foldcaseTests</span><span class="op" id="7370319">,</span>&nbsp;<span class="ident" id="7370321">FoldCase</span><span class="op" id="7370329">)</span><br>
<span class="lineno"></span><span class="op" id="7370331">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7370334">var</span>&nbsp;<span class="ident" id="7370338">literalTests</span>&nbsp;<span class="op" id="7370351">=</span>&nbsp;<span class="op" id="7370353">[</span><span class="op" id="7370354">]</span><span class="ident" id="7370355">parseTest</span><span class="op" id="7370364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370367">{</span><span class="string" id="7370368">&#34;(|)^$.[*+?]{5,10},\\&#34;</span><span class="op" id="7370390">,</span>&nbsp;<span class="string" id="7370392">&#34;str{(|)^$.[*+?]{5,10},\\}&#34;</span><span class="op" id="7370419">}</span><span class="op" id="7370420">,</span><br>
<span class="lineno"></span><span class="op" id="7370422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7370425">func</span>&nbsp;<span class="ident" id="7370430">TestParseLiteral</span><span class="op" id="7370446">(</span><span class="ident" id="7370447">t</span>&nbsp;<span class="op" id="7370449">*</span><span class="ident" id="7370450">testing</span><span class="op" id="7370457">.</span><span class="ident" id="7370458">T</span><span class="op" id="7370459">)</span>&nbsp;<span class="op" id="7370461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370464">testParseDump</span><span class="op" id="7370477">(</span><span class="ident" id="7370478">t</span><span class="op" id="7370479">,</span>&nbsp;<span class="ident" id="7370481">literalTests</span><span class="op" id="7370493">,</span>&nbsp;<span class="ident" id="7370495">Literal</span><span class="op" id="7370502">)</span><br>
<span class="lineno"></span><span class="op" id="7370504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370507">var</span>&nbsp;<span class="ident" id="7370511">matchnlTests</span>&nbsp;<span class="op" id="7370524">=</span>&nbsp;<span class="op" id="7370526">[</span><span class="op" id="7370527">]</span><span class="ident" id="7370528">parseTest</span><span class="op" id="7370537">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370540">{</span><span class="string" id="7370541">`.`</span><span class="op" id="7370544">,</span>&nbsp;<span class="string" id="7370546">`dot{}`</span><span class="op" id="7370553">}</span><span class="op" id="7370554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370557">{</span><span class="string" id="7370558">&#34;\n&#34;</span><span class="op" id="7370562">,</span>&nbsp;<span class="string" id="7370564">&#34;lit{\n}&#34;</span><span class="op" id="7370573">}</span><span class="op" id="7370574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370577">{</span><span class="string" id="7370578">`[^a]`</span><span class="op" id="7370584">,</span>&nbsp;<span class="string" id="7370586">`cc{0x0-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7370614">}</span><span class="op" id="7370615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370618">{</span><span class="string" id="7370619">`[a\n]`</span><span class="op" id="7370626">,</span>&nbsp;<span class="string" id="7370628">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7370642">}</span><span class="op" id="7370643">,</span><br>
<span class="lineno"></span><span class="op" id="7370645">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="7370648">func</span>&nbsp;<span class="ident" id="7370653">TestParseMatchNL</span><span class="op" id="7370669">(</span><span class="ident" id="7370670">t</span>&nbsp;<span class="op" id="7370672">*</span><span class="ident" id="7370673">testing</span><span class="op" id="7370680">.</span><span class="ident" id="7370681">T</span><span class="op" id="7370682">)</span>&nbsp;<span class="op" id="7370684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370687">testParseDump</span><span class="op" id="7370700">(</span><span class="ident" id="7370701">t</span><span class="op" id="7370702">,</span>&nbsp;<span class="ident" id="7370704">matchnlTests</span><span class="op" id="7370716">,</span>&nbsp;<span class="ident" id="7370718">MatchNL</span><span class="op" id="7370725">)</span><br>
<span class="lineno"></span><span class="op" id="7370727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="7370730">var</span>&nbsp;<span class="ident" id="7370734">nomatchnlTests</span>&nbsp;<span class="op" id="7370749">=</span>&nbsp;<span class="op" id="7370751">[</span><span class="op" id="7370752">]</span><span class="ident" id="7370753">parseTest</span><span class="op" id="7370762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370765">{</span><span class="string" id="7370766">`.`</span><span class="op" id="7370769">,</span>&nbsp;<span class="string" id="7370771">`dnl{}`</span><span class="op" id="7370778">}</span><span class="op" id="7370779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370782">{</span><span class="string" id="7370783">&#34;\n&#34;</span><span class="op" id="7370787">,</span>&nbsp;<span class="string" id="7370789">&#34;lit{\n}&#34;</span><span class="op" id="7370798">}</span><span class="op" id="7370799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370802">{</span><span class="string" id="7370803">`[^a]`</span><span class="op" id="7370809">,</span>&nbsp;<span class="string" id="7370811">`cc{0x0-0x9&nbsp;0xb-0x60&nbsp;0x62-0x10ffff}`</span><span class="op" id="7370847">}</span><span class="op" id="7370848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370851">{</span><span class="string" id="7370852">`[a\n]`</span><span class="op" id="7370859">,</span>&nbsp;<span class="string" id="7370861">`cc{0xa&nbsp;0x61}`</span><span class="op" id="7370875">}</span><span class="op" id="7370876">,</span><br>
<span class="lineno">255</span><span class="op" id="7370878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370881">func</span>&nbsp;<span class="ident" id="7370886">TestParseNoMatchNL</span><span class="op" id="7370904">(</span><span class="ident" id="7370905">t</span>&nbsp;<span class="op" id="7370907">*</span><span class="ident" id="7370908">testing</span><span class="op" id="7370915">.</span><span class="ident" id="7370916">T</span><span class="op" id="7370917">)</span>&nbsp;<span class="op" id="7370919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370922">testParseDump</span><span class="op" id="7370935">(</span><span class="ident" id="7370936">t</span><span class="op" id="7370937">,</span>&nbsp;<span class="ident" id="7370939">nomatchnlTests</span><span class="op" id="7370953">,</span>&nbsp;<span class="num" id="7370955">0</span><span class="op" id="7370956">)</span><br>
<span class="lineno"></span><span class="op" id="7370958">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="7370961">//&nbsp;Test&nbsp;Parse&nbsp;-&gt;&nbsp;Dump.</span><br>
<span class="lineno"></span><span class="keyword" id="7370984">func</span>&nbsp;<span class="ident" id="7370989">testParseDump</span><span class="op" id="7371002">(</span><span class="ident" id="7371003">t</span>&nbsp;<span class="op" id="7371005">*</span><span class="ident" id="7371006">testing</span><span class="op" id="7371013">.</span><span class="ident" id="7371014">T</span><span class="op" id="7371015">,</span>&nbsp;<span class="ident" id="7371017">tests</span>&nbsp;<span class="op" id="7371023">[</span><span class="op" id="7371024">]</span><span class="ident" id="7371025">parseTest</span><span class="op" id="7371034">,</span>&nbsp;<span class="ident" id="7371036">flags</span>&nbsp;<span class="ident" id="7371042">Flags</span><span class="op" id="7371047">)</span>&nbsp;<span class="op" id="7371049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371052">for</span>&nbsp;<span class="ident" id="7371056">_</span><span class="op" id="7371057">,</span>&nbsp;<span class="ident" id="7371059">tt</span>&nbsp;<span class="op" id="7371062">:=</span>&nbsp;<span class="keyword" id="7371065">range</span>&nbsp;<span class="ident" id="7371071">tests</span>&nbsp;<span class="op" id="7371077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371081">re</span><span class="op" id="7371083">,</span>&nbsp;<span class="ident" id="7371085">err</span>&nbsp;<span class="op" id="7371089">:=</span>&nbsp;<span class="ident" id="7371092">Parse</span><span class="op" id="7371097">(</span><span class="ident" id="7371098">tt</span><span class="op" id="7371100">.</span><span class="ident" id="7371101">Regexp</span><span class="op" id="7371107">,</span>&nbsp;<span class="ident" id="7371109">flags</span><span class="op" id="7371114">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371118">if</span>&nbsp;<span class="ident" id="7371121">err</span>&nbsp;<span class="op" id="7371125">!=</span>&nbsp;<span class="ident" id="7371128">nil</span>&nbsp;<span class="op" id="7371132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371137">t</span><span class="op" id="7371138">.</span><span class="ident" id="7371139">Errorf</span><span class="op" id="7371145">(</span><span class="string" id="7371146">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7371162">,</span>&nbsp;<span class="ident" id="7371164">tt</span><span class="op" id="7371166">.</span><span class="ident" id="7371167">Regexp</span><span class="op" id="7371173">,</span>&nbsp;<span class="ident" id="7371175">err</span><span class="op" id="7371178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371183">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371198">if</span>&nbsp;<span class="ident" id="7371201">tt</span><span class="op" id="7371203">.</span><span class="ident" id="7371204">Dump</span>&nbsp;<span class="op" id="7371209">==</span>&nbsp;<span class="string" id="7371212">&#34;&#34;</span>&nbsp;<span class="op" id="7371215">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371220">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371263">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371278">d</span>&nbsp;<span class="op" id="7371280">:=</span>&nbsp;<span class="ident" id="7371283">dump</span><span class="op" id="7371287">(</span><span class="ident" id="7371288">re</span><span class="op" id="7371290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371294">if</span>&nbsp;<span class="ident" id="7371297">d</span>&nbsp;<span class="op" id="7371299">!=</span>&nbsp;<span class="ident" id="7371302">tt</span><span class="op" id="7371304">.</span><span class="ident" id="7371305">Dump</span>&nbsp;<span class="op" id="7371310">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371315">t</span><span class="op" id="7371316">.</span><span class="ident" id="7371317">Errorf</span><span class="op" id="7371323">(</span><span class="string" id="7371324">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7371358">,</span>&nbsp;<span class="ident" id="7371360">tt</span><span class="op" id="7371362">.</span><span class="ident" id="7371363">Regexp</span><span class="op" id="7371369">,</span>&nbsp;<span class="ident" id="7371371">d</span><span class="op" id="7371372">,</span>&nbsp;<span class="ident" id="7371374">tt</span><span class="op" id="7371376">.</span><span class="ident" id="7371377">Dump</span><span class="op" id="7371381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371388">}</span><br>
<span class="lineno"></span><span class="op" id="7371390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="7371393">//&nbsp;dump&nbsp;prints&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;regexp&nbsp;showing</span><br>
<span class="lineno"></span><span class="comment" id="7371454">//&nbsp;the&nbsp;structure&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="keyword" id="7371483">func</span>&nbsp;<span class="ident" id="7371488">dump</span><span class="op" id="7371492">(</span><span class="ident" id="7371493">re</span>&nbsp;<span class="op" id="7371496">*</span><span class="ident" id="7371497">Regexp</span><span class="op" id="7371503">)</span>&nbsp;<span class="builtintype" id="7371505">string</span>&nbsp;<span class="op" id="7371512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371515">var</span>&nbsp;<span class="ident" id="7371519">b</span>&nbsp;<span class="ident" id="7371521">bytes</span><span class="op" id="7371526">.</span><span class="ident" id="7371527">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371535">dumpRegexp</span><span class="op" id="7371545">(</span><span class="op" id="7371546">&amp;</span><span class="ident" id="7371547">b</span><span class="op" id="7371548">,</span>&nbsp;<span class="ident" id="7371550">re</span><span class="op" id="7371552">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371555">return</span>&nbsp;<span class="ident" id="7371562">b</span><span class="op" id="7371563">.</span><span class="ident" id="7371564">String</span><span class="op" id="7371570">(</span><span class="op" id="7371571">)</span><br>
<span class="lineno"></span><span class="op" id="7371573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7371576">var</span>&nbsp;<span class="ident" id="7371580">opNames</span>&nbsp;<span class="op" id="7371588">=</span>&nbsp;<span class="op" id="7371590">[</span><span class="op" id="7371591">]</span><span class="builtintype" id="7371592">string</span><span class="op" id="7371598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371601">OpNoMatch</span><span class="op" id="7371610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371619">&#34;no&#34;</span><span class="op" id="7371623">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371626">OpEmptyMatch</span><span class="op" id="7371638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371644">&#34;emp&#34;</span><span class="op" id="7371649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371652">OpLiteral</span><span class="op" id="7371661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371670">&#34;lit&#34;</span><span class="op" id="7371675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371678">OpCharClass</span><span class="op" id="7371689">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371696">&#34;cc&#34;</span><span class="op" id="7371700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371703">OpAnyCharNotNL</span><span class="op" id="7371717">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7371721">&#34;dnl&#34;</span><span class="op" id="7371726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371729">OpAnyChar</span><span class="op" id="7371738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371747">&#34;dot&#34;</span><span class="op" id="7371752">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371755">OpBeginLine</span><span class="op" id="7371766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371773">&#34;bol&#34;</span><span class="op" id="7371778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371781">OpEndLine</span><span class="op" id="7371790">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371799">&#34;eol&#34;</span><span class="op" id="7371804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371807">OpBeginText</span><span class="op" id="7371818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371825">&#34;bot&#34;</span><span class="op" id="7371830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371833">OpEndText</span><span class="op" id="7371842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371851">&#34;eot&#34;</span><span class="op" id="7371856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371859">OpWordBoundary</span><span class="op" id="7371873">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7371877">&#34;wb&#34;</span><span class="op" id="7371881">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371884">OpNoWordBoundary</span><span class="op" id="7371900">:</span>&nbsp;<span class="string" id="7371902">&#34;nwb&#34;</span><span class="op" id="7371907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371910">OpCapture</span><span class="op" id="7371919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371928">&#34;cap&#34;</span><span class="op" id="7371933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371936">OpStar</span><span class="op" id="7371942">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371954">&#34;star&#34;</span><span class="op" id="7371960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371963">OpPlus</span><span class="op" id="7371969">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371981">&#34;plus&#34;</span><span class="op" id="7371987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371990">OpQuest</span><span class="op" id="7371997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372008">&#34;que&#34;</span><span class="op" id="7372013">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372016">OpRepeat</span><span class="op" id="7372024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372034">&#34;rep&#34;</span><span class="op" id="7372039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372042">OpConcat</span><span class="op" id="7372050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372060">&#34;cat&#34;</span><span class="op" id="7372065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372068">OpAlternate</span><span class="op" id="7372079">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372086">&#34;alt&#34;</span><span class="op" id="7372091">,</span><br>
<span class="lineno"></span><span class="op" id="7372093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">310</span><span class="comment" id="7372096">//&nbsp;dumpRegexp&nbsp;writes&nbsp;an&nbsp;encoding&nbsp;of&nbsp;the&nbsp;syntax&nbsp;tree&nbsp;for&nbsp;the&nbsp;regexp&nbsp;re&nbsp;to&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="7372172">//&nbsp;It&nbsp;is&nbsp;used&nbsp;during&nbsp;testing&nbsp;to&nbsp;distinguish&nbsp;between&nbsp;parses&nbsp;that&nbsp;might&nbsp;print</span><br>
<span class="lineno"></span><span class="comment" id="7372248">//&nbsp;the&nbsp;same&nbsp;using&nbsp;re&#39;s&nbsp;String&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="7372286">func</span>&nbsp;<span class="ident" id="7372291">dumpRegexp</span><span class="op" id="7372301">(</span><span class="ident" id="7372302">b</span>&nbsp;<span class="op" id="7372304">*</span><span class="ident" id="7372305">bytes</span><span class="op" id="7372310">.</span><span class="ident" id="7372311">Buffer</span><span class="op" id="7372317">,</span>&nbsp;<span class="ident" id="7372319">re</span>&nbsp;<span class="op" id="7372322">*</span><span class="ident" id="7372323">Regexp</span><span class="op" id="7372329">)</span>&nbsp;<span class="op" id="7372331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372334">if</span>&nbsp;<span class="builtintype" id="7372337">int</span><span class="op" id="7372340">(</span><span class="ident" id="7372341">re</span><span class="op" id="7372343">.</span><span class="ident" id="7372344">Op</span><span class="op" id="7372346">)</span>&nbsp;<span class="op" id="7372348">&gt;=</span>&nbsp;<span class="builtinfunc" id="7372351">len</span><span class="op" id="7372354">(</span><span class="ident" id="7372355">opNames</span><span class="op" id="7372362">)</span>&nbsp;<span class="op" id="7372364">||</span>&nbsp;<span class="ident" id="7372367">opNames</span><span class="op" id="7372374">[</span><span class="ident" id="7372375">re</span><span class="op" id="7372377">.</span><span class="ident" id="7372378">Op</span><span class="op" id="7372380">]</span>&nbsp;<span class="op" id="7372382">==</span>&nbsp;<span class="string" id="7372385">&#34;&#34;</span>&nbsp;<span class="op" id="7372388">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372392">fmt</span><span class="op" id="7372395">.</span><span class="ident" id="7372396">Fprintf</span><span class="op" id="7372403">(</span><span class="ident" id="7372404">b</span><span class="op" id="7372405">,</span>&nbsp;<span class="string" id="7372407">&#34;op%d&#34;</span><span class="op" id="7372413">,</span>&nbsp;<span class="ident" id="7372415">re</span><span class="op" id="7372417">.</span><span class="ident" id="7372418">Op</span><span class="op" id="7372420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372423">}</span>&nbsp;<span class="keyword" id="7372425">else</span>&nbsp;<span class="op" id="7372430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372434">switch</span>&nbsp;<span class="ident" id="7372441">re</span><span class="op" id="7372443">.</span><span class="ident" id="7372444">Op</span>&nbsp;<span class="op" id="7372447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372451">default</span><span class="op" id="7372458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372463">b</span><span class="op" id="7372464">.</span><span class="ident" id="7372465">WriteString</span><span class="op" id="7372476">(</span><span class="ident" id="7372477">opNames</span><span class="op" id="7372484">[</span><span class="ident" id="7372485">re</span><span class="op" id="7372487">.</span><span class="ident" id="7372488">Op</span><span class="op" id="7372490">]</span><span class="op" id="7372491">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372495">case</span>&nbsp;<span class="ident" id="7372500">OpStar</span><span class="op" id="7372506">,</span>&nbsp;<span class="ident" id="7372508">OpPlus</span><span class="op" id="7372514">,</span>&nbsp;<span class="ident" id="7372516">OpQuest</span><span class="op" id="7372523">,</span>&nbsp;<span class="ident" id="7372525">OpRepeat</span><span class="op" id="7372533">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372538">if</span>&nbsp;<span class="ident" id="7372541">re</span><span class="op" id="7372543">.</span><span class="ident" id="7372544">Flags</span><span class="op" id="7372549">&amp;</span><span class="ident" id="7372550">NonGreedy</span>&nbsp;<span class="op" id="7372560">!=</span>&nbsp;<span class="num" id="7372563">0</span>&nbsp;<span class="op" id="7372565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372571">b</span><span class="op" id="7372572">.</span><span class="ident" id="7372573">WriteByte</span><span class="op" id="7372582">(</span><span class="string" id="7372583">&#39;n&#39;</span><span class="op" id="7372586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372596">b</span><span class="op" id="7372597">.</span><span class="ident" id="7372598">WriteString</span><span class="op" id="7372609">(</span><span class="ident" id="7372610">opNames</span><span class="op" id="7372617">[</span><span class="ident" id="7372618">re</span><span class="op" id="7372620">.</span><span class="ident" id="7372621">Op</span><span class="op" id="7372623">]</span><span class="op" id="7372624">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372628">case</span>&nbsp;<span class="ident" id="7372633">OpLiteral</span><span class="op" id="7372642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372647">if</span>&nbsp;<span class="builtinfunc" id="7372650">len</span><span class="op" id="7372653">(</span><span class="ident" id="7372654">re</span><span class="op" id="7372656">.</span><span class="ident" id="7372657">Rune</span><span class="op" id="7372661">)</span>&nbsp;<span class="op" id="7372663">&gt;</span>&nbsp;<span class="num" id="7372665">1</span>&nbsp;<span class="op" id="7372667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372673">b</span><span class="op" id="7372674">.</span><span class="ident" id="7372675">WriteString</span><span class="op" id="7372686">(</span><span class="string" id="7372687">&#34;str&#34;</span><span class="op" id="7372692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372697">}</span>&nbsp;<span class="keyword" id="7372699">else</span>&nbsp;<span class="op" id="7372704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372710">b</span><span class="op" id="7372711">.</span><span class="ident" id="7372712">WriteString</span><span class="op" id="7372723">(</span><span class="string" id="7372724">&#34;lit&#34;</span><span class="op" id="7372729">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372739">if</span>&nbsp;<span class="ident" id="7372742">re</span><span class="op" id="7372744">.</span><span class="ident" id="7372745">Flags</span><span class="op" id="7372750">&amp;</span><span class="ident" id="7372751">FoldCase</span>&nbsp;<span class="op" id="7372760">!=</span>&nbsp;<span class="num" id="7372763">0</span>&nbsp;<span class="op" id="7372765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372771">for</span>&nbsp;<span class="ident" id="7372775">_</span><span class="op" id="7372776">,</span>&nbsp;<span class="ident" id="7372778">r</span>&nbsp;<span class="op" id="7372780">:=</span>&nbsp;<span class="keyword" id="7372783">range</span>&nbsp;<span class="ident" id="7372789">re</span><span class="op" id="7372791">.</span><span class="ident" id="7372792">Rune</span>&nbsp;<span class="op" id="7372797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372804">if</span>&nbsp;<span class="ident" id="7372807">unicode</span><span class="op" id="7372814">.</span><span class="ident" id="7372815">SimpleFold</span><span class="op" id="7372825">(</span><span class="ident" id="7372826">r</span><span class="op" id="7372827">)</span>&nbsp;<span class="op" id="7372829">!=</span>&nbsp;<span class="ident" id="7372832">r</span>&nbsp;<span class="op" id="7372834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372842">b</span><span class="op" id="7372843">.</span><span class="ident" id="7372844">WriteString</span><span class="op" id="7372855">(</span><span class="string" id="7372856">&#34;fold&#34;</span><span class="op" id="7372862">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372870">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372896">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372902">b</span><span class="op" id="7372903">.</span><span class="ident" id="7372904">WriteByte</span><span class="op" id="7372913">(</span><span class="string" id="7372914">&#39;{&#39;</span><span class="op" id="7372917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372920">switch</span>&nbsp;<span class="ident" id="7372927">re</span><span class="op" id="7372929">.</span><span class="ident" id="7372930">Op</span>&nbsp;<span class="op" id="7372933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372936">case</span>&nbsp;<span class="ident" id="7372941">OpEndText</span><span class="op" id="7372950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372954">if</span>&nbsp;<span class="ident" id="7372957">re</span><span class="op" id="7372959">.</span><span class="ident" id="7372960">Flags</span><span class="op" id="7372965">&amp;</span><span class="ident" id="7372966">WasDollar</span>&nbsp;<span class="op" id="7372976">==</span>&nbsp;<span class="num" id="7372979">0</span>&nbsp;<span class="op" id="7372981">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372986">b</span><span class="op" id="7372987">.</span><span class="ident" id="7372988">WriteString</span><span class="op" id="7372999">(</span><span class="string" id="7373000">`\z`</span><span class="op" id="7373004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373011">case</span>&nbsp;<span class="ident" id="7373016">OpLiteral</span><span class="op" id="7373025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373029">for</span>&nbsp;<span class="ident" id="7373033">_</span><span class="op" id="7373034">,</span>&nbsp;<span class="ident" id="7373036">r</span>&nbsp;<span class="op" id="7373038">:=</span>&nbsp;<span class="keyword" id="7373041">range</span>&nbsp;<span class="ident" id="7373047">re</span><span class="op" id="7373049">.</span><span class="ident" id="7373050">Rune</span>&nbsp;<span class="op" id="7373055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373060">b</span><span class="op" id="7373061">.</span><span class="ident" id="7373062">WriteRune</span><span class="op" id="7373071">(</span><span class="ident" id="7373072">r</span><span class="op" id="7373073">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373080">case</span>&nbsp;<span class="ident" id="7373085">OpConcat</span><span class="op" id="7373093">,</span>&nbsp;<span class="ident" id="7373095">OpAlternate</span><span class="op" id="7373106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373110">for</span>&nbsp;<span class="ident" id="7373114">_</span><span class="op" id="7373115">,</span>&nbsp;<span class="ident" id="7373117">sub</span>&nbsp;<span class="op" id="7373121">:=</span>&nbsp;<span class="keyword" id="7373124">range</span>&nbsp;<span class="ident" id="7373130">re</span><span class="op" id="7373132">.</span><span class="ident" id="7373133">Sub</span>&nbsp;<span class="op" id="7373137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373142">dumpRegexp</span><span class="op" id="7373152">(</span><span class="ident" id="7373153">b</span><span class="op" id="7373154">,</span>&nbsp;<span class="ident" id="7373156">sub</span><span class="op" id="7373159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373163">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373166">case</span>&nbsp;<span class="ident" id="7373171">OpStar</span><span class="op" id="7373177">,</span>&nbsp;<span class="ident" id="7373179">OpPlus</span><span class="op" id="7373185">,</span>&nbsp;<span class="ident" id="7373187">OpQuest</span><span class="op" id="7373194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373198">dumpRegexp</span><span class="op" id="7373208">(</span><span class="ident" id="7373209">b</span><span class="op" id="7373210">,</span>&nbsp;<span class="ident" id="7373212">re</span><span class="op" id="7373214">.</span><span class="ident" id="7373215">Sub</span><span class="op" id="7373218">[</span><span class="num" id="7373219">0</span><span class="op" id="7373220">]</span><span class="op" id="7373221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373224">case</span>&nbsp;<span class="ident" id="7373229">OpRepeat</span><span class="op" id="7373237">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373241">fmt</span><span class="op" id="7373244">.</span><span class="ident" id="7373245">Fprintf</span><span class="op" id="7373252">(</span><span class="ident" id="7373253">b</span><span class="op" id="7373254">,</span>&nbsp;<span class="string" id="7373256">&#34;%d,%d&nbsp;&#34;</span><span class="op" id="7373264">,</span>&nbsp;<span class="ident" id="7373266">re</span><span class="op" id="7373268">.</span><span class="ident" id="7373269">Min</span><span class="op" id="7373272">,</span>&nbsp;<span class="ident" id="7373274">re</span><span class="op" id="7373276">.</span><span class="ident" id="7373277">Max</span><span class="op" id="7373280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373284">dumpRegexp</span><span class="op" id="7373294">(</span><span class="ident" id="7373295">b</span><span class="op" id="7373296">,</span>&nbsp;<span class="ident" id="7373298">re</span><span class="op" id="7373300">.</span><span class="ident" id="7373301">Sub</span><span class="op" id="7373304">[</span><span class="num" id="7373305">0</span><span class="op" id="7373306">]</span><span class="op" id="7373307">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373310">case</span>&nbsp;<span class="ident" id="7373315">OpCapture</span><span class="op" id="7373324">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373328">if</span>&nbsp;<span class="ident" id="7373331">re</span><span class="op" id="7373333">.</span><span class="ident" id="7373334">Name</span>&nbsp;<span class="op" id="7373339">!=</span>&nbsp;<span class="string" id="7373342">&#34;&#34;</span>&nbsp;<span class="op" id="7373345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373350">b</span><span class="op" id="7373351">.</span><span class="ident" id="7373352">WriteString</span><span class="op" id="7373363">(</span><span class="ident" id="7373364">re</span><span class="op" id="7373366">.</span><span class="ident" id="7373367">Name</span><span class="op" id="7373371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373376">b</span><span class="op" id="7373377">.</span><span class="ident" id="7373378">WriteByte</span><span class="op" id="7373387">(</span><span class="string" id="7373388">&#39;:&#39;</span><span class="op" id="7373391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373395">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373399">dumpRegexp</span><span class="op" id="7373409">(</span><span class="ident" id="7373410">b</span><span class="op" id="7373411">,</span>&nbsp;<span class="ident" id="7373413">re</span><span class="op" id="7373415">.</span><span class="ident" id="7373416">Sub</span><span class="op" id="7373419">[</span><span class="num" id="7373420">0</span><span class="op" id="7373421">]</span><span class="op" id="7373422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373425">case</span>&nbsp;<span class="ident" id="7373430">OpCharClass</span><span class="op" id="7373441">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373445">sep</span>&nbsp;<span class="op" id="7373449">:=</span>&nbsp;<span class="string" id="7373452">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373457">for</span>&nbsp;<span class="ident" id="7373461">i</span>&nbsp;<span class="op" id="7373463">:=</span>&nbsp;<span class="num" id="7373466">0</span><span class="op" id="7373467">;</span>&nbsp;<span class="ident" id="7373469">i</span>&nbsp;<span class="op" id="7373471">&lt;</span>&nbsp;<span class="builtinfunc" id="7373473">len</span><span class="op" id="7373476">(</span><span class="ident" id="7373477">re</span><span class="op" id="7373479">.</span><span class="ident" id="7373480">Rune</span><span class="op" id="7373484">)</span><span class="op" id="7373485">;</span>&nbsp;<span class="ident" id="7373487">i</span>&nbsp;<span class="op" id="7373489">+=</span>&nbsp;<span class="num" id="7373492">2</span>&nbsp;<span class="op" id="7373494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373499">b</span><span class="op" id="7373500">.</span><span class="ident" id="7373501">WriteString</span><span class="op" id="7373512">(</span><span class="ident" id="7373513">sep</span><span class="op" id="7373516">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373521">sep</span>&nbsp;<span class="op" id="7373525">=</span>&nbsp;<span class="string" id="7373527">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373534">lo</span><span class="op" id="7373536">,</span>&nbsp;<span class="ident" id="7373538">hi</span>&nbsp;<span class="op" id="7373541">:=</span>&nbsp;<span class="ident" id="7373544">re</span><span class="op" id="7373546">.</span><span class="ident" id="7373547">Rune</span><span class="op" id="7373551">[</span><span class="ident" id="7373552">i</span><span class="op" id="7373553">]</span><span class="op" id="7373554">,</span>&nbsp;<span class="ident" id="7373556">re</span><span class="op" id="7373558">.</span><span class="ident" id="7373559">Rune</span><span class="op" id="7373563">[</span><span class="ident" id="7373564">i</span><span class="op" id="7373565">+</span><span class="num" id="7373566">1</span><span class="op" id="7373567">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373572">if</span>&nbsp;<span class="ident" id="7373575">lo</span>&nbsp;<span class="op" id="7373578">==</span>&nbsp;<span class="ident" id="7373581">hi</span>&nbsp;<span class="op" id="7373584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373590">fmt</span><span class="op" id="7373593">.</span><span class="ident" id="7373594">Fprintf</span><span class="op" id="7373601">(</span><span class="ident" id="7373602">b</span><span class="op" id="7373603">,</span>&nbsp;<span class="string" id="7373605">&#34;%#x&#34;</span><span class="op" id="7373610">,</span>&nbsp;<span class="ident" id="7373612">lo</span><span class="op" id="7373614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373619">}</span>&nbsp;<span class="keyword" id="7373621">else</span>&nbsp;<span class="op" id="7373626">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373632">fmt</span><span class="op" id="7373635">.</span><span class="ident" id="7373636">Fprintf</span><span class="op" id="7373643">(</span><span class="ident" id="7373644">b</span><span class="op" id="7373645">,</span>&nbsp;<span class="string" id="7373647">&#34;%#x-%#x&#34;</span><span class="op" id="7373656">,</span>&nbsp;<span class="ident" id="7373658">lo</span><span class="op" id="7373660">,</span>&nbsp;<span class="ident" id="7373662">hi</span><span class="op" id="7373664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373679">b</span><span class="op" id="7373680">.</span><span class="ident" id="7373681">WriteByte</span><span class="op" id="7373690">(</span><span class="string" id="7373691">&#39;}&#39;</span><span class="op" id="7373694">)</span><br>
<span class="lineno">380</span><span class="op" id="7373696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7373699">func</span>&nbsp;<span class="ident" id="7373704">mkCharClass</span><span class="op" id="7373715">(</span><span class="ident" id="7373716">f</span>&nbsp;<span class="keyword" id="7373718">func</span><span class="op" id="7373722">(</span><span class="builtintype" id="7373723">rune</span><span class="op" id="7373727">)</span>&nbsp;<span class="builtintype" id="7373729">bool</span><span class="op" id="7373733">)</span>&nbsp;<span class="builtintype" id="7373735">string</span>&nbsp;<span class="op" id="7373742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373745">re</span>&nbsp;<span class="op" id="7373748">:=</span>&nbsp;<span class="op" id="7373751">&amp;</span><span class="ident" id="7373752">Regexp</span><span class="op" id="7373758">{</span><span class="ident" id="7373759">Op</span><span class="op" id="7373761">:</span>&nbsp;<span class="ident" id="7373763">OpCharClass</span><span class="op" id="7373774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373777">lo</span>&nbsp;<span class="op" id="7373780">:=</span>&nbsp;<span class="builtintype" id="7373783">rune</span><span class="op" id="7373787">(</span><span class="op" id="7373788">-</span><span class="num" id="7373789">1</span><span class="op" id="7373790">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373793">for</span>&nbsp;<span class="ident" id="7373797">i</span>&nbsp;<span class="op" id="7373799">:=</span>&nbsp;<span class="builtintype" id="7373802">rune</span><span class="op" id="7373806">(</span><span class="num" id="7373807">0</span><span class="op" id="7373808">)</span><span class="op" id="7373809">;</span>&nbsp;<span class="ident" id="7373811">i</span>&nbsp;<span class="op" id="7373813">&lt;=</span>&nbsp;<span class="ident" id="7373816">unicode</span><span class="op" id="7373823">.</span><span class="ident" id="7373824">MaxRune</span><span class="op" id="7373831">;</span>&nbsp;<span class="ident" id="7373833">i</span><span class="op" id="7373834">++</span>&nbsp;<span class="op" id="7373837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373841">if</span>&nbsp;<span class="ident" id="7373844">f</span><span class="op" id="7373845">(</span><span class="ident" id="7373846">i</span><span class="op" id="7373847">)</span>&nbsp;<span class="op" id="7373849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373854">if</span>&nbsp;<span class="ident" id="7373857">lo</span>&nbsp;<span class="op" id="7373860">&lt;</span>&nbsp;<span class="num" id="7373862">0</span>&nbsp;<span class="op" id="7373864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373870">lo</span>&nbsp;<span class="op" id="7373873">=</span>&nbsp;<span class="ident" id="7373875">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373880">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373884">}</span>&nbsp;<span class="keyword" id="7373886">else</span>&nbsp;<span class="op" id="7373891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373896">if</span>&nbsp;<span class="ident" id="7373899">lo</span>&nbsp;<span class="op" id="7373902">&gt;=</span>&nbsp;<span class="num" id="7373905">0</span>&nbsp;<span class="op" id="7373907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373913">re</span><span class="op" id="7373915">.</span><span class="ident" id="7373916">Rune</span>&nbsp;<span class="op" id="7373921">=</span>&nbsp;<span class="builtinfunc" id="7373923">append</span><span class="op" id="7373929">(</span><span class="ident" id="7373930">re</span><span class="op" id="7373932">.</span><span class="ident" id="7373933">Rune</span><span class="op" id="7373937">,</span>&nbsp;<span class="ident" id="7373939">lo</span><span class="op" id="7373941">,</span>&nbsp;<span class="ident" id="7373943">i</span><span class="op" id="7373944">-</span><span class="num" id="7373945">1</span><span class="op" id="7373946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373952">lo</span>&nbsp;<span class="op" id="7373955">=</span>&nbsp;<span class="op" id="7373957">-</span><span class="num" id="7373958">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373963">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373973">if</span>&nbsp;<span class="ident" id="7373976">lo</span>&nbsp;<span class="op" id="7373979">&gt;=</span>&nbsp;<span class="num" id="7373982">0</span>&nbsp;<span class="op" id="7373984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373988">re</span><span class="op" id="7373990">.</span><span class="ident" id="7373991">Rune</span>&nbsp;<span class="op" id="7373996">=</span>&nbsp;<span class="builtinfunc" id="7373998">append</span><span class="op" id="7374004">(</span><span class="ident" id="7374005">re</span><span class="op" id="7374007">.</span><span class="ident" id="7374008">Rune</span><span class="op" id="7374012">,</span>&nbsp;<span class="ident" id="7374014">lo</span><span class="op" id="7374016">,</span>&nbsp;<span class="ident" id="7374018">unicode</span><span class="op" id="7374025">.</span><span class="ident" id="7374026">MaxRune</span><span class="op" id="7374033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374036">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374039">return</span>&nbsp;<span class="ident" id="7374046">dump</span><span class="op" id="7374050">(</span><span class="ident" id="7374051">re</span><span class="op" id="7374053">)</span><br>
<span class="lineno"></span><span class="op" id="7374055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374058">func</span>&nbsp;<span class="ident" id="7374063">isUpperFold</span><span class="op" id="7374074">(</span><span class="ident" id="7374075">r</span>&nbsp;<span class="builtintype" id="7374077">rune</span><span class="op" id="7374081">)</span>&nbsp;<span class="builtintype" id="7374083">bool</span>&nbsp;<span class="op" id="7374088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374091">if</span>&nbsp;<span class="ident" id="7374094">unicode</span><span class="op" id="7374101">.</span><span class="ident" id="7374102">IsUpper</span><span class="op" id="7374109">(</span><span class="ident" id="7374110">r</span><span class="op" id="7374111">)</span>&nbsp;<span class="op" id="7374113">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374117">return</span>&nbsp;<span class="builtintype" id="7374124">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374133">c</span>&nbsp;<span class="op" id="7374135">:=</span>&nbsp;<span class="ident" id="7374138">unicode</span><span class="op" id="7374145">.</span><span class="ident" id="7374146">SimpleFold</span><span class="op" id="7374156">(</span><span class="ident" id="7374157">r</span><span class="op" id="7374158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374161">for</span>&nbsp;<span class="ident" id="7374165">c</span>&nbsp;<span class="op" id="7374167">!=</span>&nbsp;<span class="ident" id="7374170">r</span>&nbsp;<span class="op" id="7374172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374176">if</span>&nbsp;<span class="ident" id="7374179">unicode</span><span class="op" id="7374186">.</span><span class="ident" id="7374187">IsUpper</span><span class="op" id="7374194">(</span><span class="ident" id="7374195">c</span><span class="op" id="7374196">)</span>&nbsp;<span class="op" id="7374198">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374203">return</span>&nbsp;<span class="builtintype" id="7374210">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374221">c</span>&nbsp;<span class="op" id="7374223">=</span>&nbsp;<span class="ident" id="7374225">unicode</span><span class="op" id="7374232">.</span><span class="ident" id="7374233">SimpleFold</span><span class="op" id="7374243">(</span><span class="ident" id="7374244">c</span><span class="op" id="7374245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374251">return</span>&nbsp;<span class="builtintype" id="7374258">false</span><br>
<span class="lineno">415</span><span class="op" id="7374264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374267">func</span>&nbsp;<span class="ident" id="7374272">TestFoldConstants</span><span class="op" id="7374289">(</span><span class="ident" id="7374290">t</span>&nbsp;<span class="op" id="7374292">*</span><span class="ident" id="7374293">testing</span><span class="op" id="7374300">.</span><span class="ident" id="7374301">T</span><span class="op" id="7374302">)</span>&nbsp;<span class="op" id="7374304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374307">last</span>&nbsp;<span class="op" id="7374312">:=</span>&nbsp;<span class="builtintype" id="7374315">rune</span><span class="op" id="7374319">(</span><span class="op" id="7374320">-</span><span class="num" id="7374321">1</span><span class="op" id="7374322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374325">for</span>&nbsp;<span class="ident" id="7374329">i</span>&nbsp;<span class="op" id="7374331">:=</span>&nbsp;<span class="builtintype" id="7374334">rune</span><span class="op" id="7374338">(</span><span class="num" id="7374339">0</span><span class="op" id="7374340">)</span><span class="op" id="7374341">;</span>&nbsp;<span class="ident" id="7374343">i</span>&nbsp;<span class="op" id="7374345">&lt;=</span>&nbsp;<span class="ident" id="7374348">unicode</span><span class="op" id="7374355">.</span><span class="ident" id="7374356">MaxRune</span><span class="op" id="7374363">;</span>&nbsp;<span class="ident" id="7374365">i</span><span class="op" id="7374366">++</span>&nbsp;<span class="op" id="7374369">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374373">if</span>&nbsp;<span class="ident" id="7374376">unicode</span><span class="op" id="7374383">.</span><span class="ident" id="7374384">SimpleFold</span><span class="op" id="7374394">(</span><span class="ident" id="7374395">i</span><span class="op" id="7374396">)</span>&nbsp;<span class="op" id="7374398">==</span>&nbsp;<span class="ident" id="7374401">i</span>&nbsp;<span class="op" id="7374403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374408">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374423">if</span>&nbsp;<span class="ident" id="7374426">last</span>&nbsp;<span class="op" id="7374431">==</span>&nbsp;<span class="op" id="7374434">-</span><span class="num" id="7374435">1</span>&nbsp;<span class="op" id="7374437">&amp;&amp;</span>&nbsp;<span class="ident" id="7374440">minFold</span>&nbsp;<span class="op" id="7374448">!=</span>&nbsp;<span class="ident" id="7374451">i</span>&nbsp;<span class="op" id="7374453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374458">t</span><span class="op" id="7374459">.</span><span class="ident" id="7374460">Errorf</span><span class="op" id="7374466">(</span><span class="string" id="7374467">&#34;minFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7374494">,</span>&nbsp;<span class="ident" id="7374496">minFold</span><span class="op" id="7374503">,</span>&nbsp;<span class="ident" id="7374505">i</span><span class="op" id="7374506">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374514">last</span>&nbsp;<span class="op" id="7374519">=</span>&nbsp;<span class="ident" id="7374521">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374527">if</span>&nbsp;<span class="ident" id="7374530">maxFold</span>&nbsp;<span class="op" id="7374538">!=</span>&nbsp;<span class="ident" id="7374541">last</span>&nbsp;<span class="op" id="7374546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374550">t</span><span class="op" id="7374551">.</span><span class="ident" id="7374552">Errorf</span><span class="op" id="7374558">(</span><span class="string" id="7374559">&#34;maxFold=%#U&nbsp;should&nbsp;be&nbsp;%#U&#34;</span><span class="op" id="7374586">,</span>&nbsp;<span class="ident" id="7374588">maxFold</span><span class="op" id="7374595">,</span>&nbsp;<span class="ident" id="7374597">last</span><span class="op" id="7374601">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374604">}</span><br>
<span class="lineno"></span><span class="op" id="7374606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7374609">func</span>&nbsp;<span class="ident" id="7374614">TestAppendRangeCollapse</span><span class="op" id="7374637">(</span><span class="ident" id="7374638">t</span>&nbsp;<span class="op" id="7374640">*</span><span class="ident" id="7374641">testing</span><span class="op" id="7374648">.</span><span class="ident" id="7374649">T</span><span class="op" id="7374650">)</span>&nbsp;<span class="op" id="7374652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374655">//&nbsp;AppendRange&nbsp;should&nbsp;collapse&nbsp;each&nbsp;of&nbsp;the&nbsp;new&nbsp;ranges</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374710">//&nbsp;into&nbsp;the&nbsp;earlier&nbsp;ones&nbsp;(it&nbsp;looks&nbsp;back&nbsp;two&nbsp;ranges),&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374772">//&nbsp;the&nbsp;slice&nbsp;never&nbsp;grows&nbsp;very&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374810">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;not&nbsp;calling&nbsp;cleanClass.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374855">var</span>&nbsp;<span class="ident" id="7374859">r</span>&nbsp;<span class="op" id="7374861">[</span><span class="op" id="7374862">]</span><span class="builtintype" id="7374863">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374869">for</span>&nbsp;<span class="ident" id="7374873">i</span>&nbsp;<span class="op" id="7374875">:=</span>&nbsp;<span class="builtintype" id="7374878">rune</span><span class="op" id="7374882">(</span><span class="string" id="7374883">&#39;A&#39;</span><span class="op" id="7374886">)</span><span class="op" id="7374887">;</span>&nbsp;<span class="ident" id="7374889">i</span>&nbsp;<span class="op" id="7374891">&lt;=</span>&nbsp;<span class="string" id="7374894">&#39;Z&#39;</span><span class="op" id="7374897">;</span>&nbsp;<span class="ident" id="7374899">i</span><span class="op" id="7374900">++</span>&nbsp;<span class="op" id="7374903">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374907">r</span>&nbsp;<span class="op" id="7374909">=</span>&nbsp;<span class="ident" id="7374911">appendRange</span><span class="op" id="7374922">(</span><span class="ident" id="7374923">r</span><span class="op" id="7374924">,</span>&nbsp;<span class="ident" id="7374926">i</span><span class="op" id="7374927">,</span>&nbsp;<span class="ident" id="7374929">i</span><span class="op" id="7374930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374934">r</span>&nbsp;<span class="op" id="7374936">=</span>&nbsp;<span class="ident" id="7374938">appendRange</span><span class="op" id="7374949">(</span><span class="ident" id="7374950">r</span><span class="op" id="7374951">,</span>&nbsp;<span class="ident" id="7374953">i</span><span class="op" id="7374954">+</span><span class="string" id="7374955">&#39;a&#39;</span><span class="op" id="7374958">-</span><span class="string" id="7374959">&#39;A&#39;</span><span class="op" id="7374962">,</span>&nbsp;<span class="ident" id="7374964">i</span><span class="op" id="7374965">+</span><span class="string" id="7374966">&#39;a&#39;</span><span class="op" id="7374969">-</span><span class="string" id="7374970">&#39;A&#39;</span><span class="op" id="7374973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374979">if</span>&nbsp;<span class="builtintype" id="7374982">string</span><span class="op" id="7374988">(</span><span class="ident" id="7374989">r</span><span class="op" id="7374990">)</span>&nbsp;<span class="op" id="7374992">!=</span>&nbsp;<span class="string" id="7374995">&#34;AZaz&#34;</span>&nbsp;<span class="op" id="7375002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375006">t</span><span class="op" id="7375007">.</span><span class="ident" id="7375008">Errorf</span><span class="op" id="7375014">(</span><span class="string" id="7375015">&#34;appendRange&nbsp;interlaced&nbsp;A-Z&nbsp;a-z&nbsp;=&nbsp;%s,&nbsp;want&nbsp;AZaz&#34;</span><span class="op" id="7375063">,</span>&nbsp;<span class="builtintype" id="7375065">string</span><span class="op" id="7375071">(</span><span class="ident" id="7375072">r</span><span class="op" id="7375073">)</span><span class="op" id="7375074">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375077">}</span><br>
<span class="lineno"></span><span class="op" id="7375079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7375082">var</span>&nbsp;<span class="ident" id="7375086">invalidRegexps</span>&nbsp;<span class="op" id="7375101">=</span>&nbsp;<span class="op" id="7375103">[</span><span class="op" id="7375104">]</span><span class="builtintype" id="7375105">string</span><span class="op" id="7375111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375114">`(`</span><span class="op" id="7375117">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375120">`)`</span><span class="op" id="7375123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375126">`(a`</span><span class="op" id="7375130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375133">`a)`</span><span class="op" id="7375137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375140">`(a))`</span><span class="op" id="7375146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375149">`(a|b|`</span><span class="op" id="7375156">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375159">`a|b|)`</span><span class="op" id="7375166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375169">`(a|b|))`</span><span class="op" id="7375178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375181">`(a|b`</span><span class="op" id="7375187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375190">`a|b)`</span><span class="op" id="7375196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375199">`(a|b))`</span><span class="op" id="7375207">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375210">`[a-z`</span><span class="op" id="7375216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375219">`([a-z)`</span><span class="op" id="7375227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375230">`[a-z)`</span><span class="op" id="7375237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375240">`([a-z]))`</span><span class="op" id="7375250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375253">`x{1001}`</span><span class="op" id="7375262">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375265">`x{9876543210}`</span><span class="op" id="7375280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375283">`x{2,1}`</span><span class="op" id="7375291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375294">`x{1,9876543210}`</span><span class="op" id="7375311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375314">&#34;\xff&#34;</span><span class="op" id="7375320">,</span>&nbsp;<span class="comment" id="7375322">//&nbsp;Invalid&nbsp;UTF-8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375340">&#34;[\xff]&#34;</span><span class="op" id="7375348">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375351">&#34;[\\\xff]&#34;</span><span class="op" id="7375361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375364">&#34;\\\xff&#34;</span><span class="op" id="7375372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375375">`(?P&lt;name&gt;a`</span><span class="op" id="7375387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375390">`(?P&lt;name&gt;`</span><span class="op" id="7375401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375404">`(?P&lt;name`</span><span class="op" id="7375414">,</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375417">`(?P&lt;x&nbsp;y&gt;a)`</span><span class="op" id="7375429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375432">`(?P&lt;&gt;a)`</span><span class="op" id="7375441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375444">`[a-Z]`</span><span class="op" id="7375451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375454">`(?i)[a-Z]`</span><span class="op" id="7375465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375468">`a{100000}`</span><span class="op" id="7375479">,</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375482">`a{100000,}`</span><span class="op" id="7375494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375497">&#34;((((((((((x{2}){2}){2}){2}){2}){2}){2}){2}){2}){2})&#34;</span><span class="op" id="7375550">,</span><br>
<span class="lineno"></span><span class="op" id="7375552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7375555">var</span>&nbsp;<span class="ident" id="7375559">onlyPerl</span>&nbsp;<span class="op" id="7375568">=</span>&nbsp;<span class="op" id="7375570">[</span><span class="op" id="7375571">]</span><span class="builtintype" id="7375572">string</span><span class="op" id="7375578">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375581">`[a-b-c]`</span><span class="op" id="7375590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375593">`\Qabc\E`</span><span class="op" id="7375602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375605">`\Q*+?{[\E`</span><span class="op" id="7375616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375619">`\Q\\E`</span><span class="op" id="7375626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375629">`\Q\\\E`</span><span class="op" id="7375637">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375640">`\Q\\\\E`</span><span class="op" id="7375649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375652">`\Q\\\\\E`</span><span class="op" id="7375662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375665">`(?:a)`</span><span class="op" id="7375672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375675">`(?P&lt;name&gt;a)`</span><span class="op" id="7375688">,</span><br>
<span class="lineno"></span><span class="op" id="7375690">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="7375693">var</span>&nbsp;<span class="ident" id="7375697">onlyPOSIX</span>&nbsp;<span class="op" id="7375707">=</span>&nbsp;<span class="op" id="7375709">[</span><span class="op" id="7375710">]</span><span class="builtintype" id="7375711">string</span><span class="op" id="7375717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375720">&#34;a++&#34;</span><span class="op" id="7375725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375728">&#34;a**&#34;</span><span class="op" id="7375733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375736">&#34;a?*&#34;</span><span class="op" id="7375741">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375744">&#34;a+*&#34;</span><span class="op" id="7375749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375752">&#34;a{1}*&#34;</span><span class="op" id="7375759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7375762">&#34;.{1}{2}.{3}&#34;</span><span class="op" id="7375775">,</span><br>
<span class="lineno"></span><span class="op" id="7375777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="keyword" id="7375780">func</span>&nbsp;<span class="ident" id="7375785">TestParseInvalidRegexps</span><span class="op" id="7375808">(</span><span class="ident" id="7375809">t</span>&nbsp;<span class="op" id="7375811">*</span><span class="ident" id="7375812">testing</span><span class="op" id="7375819">.</span><span class="ident" id="7375820">T</span><span class="op" id="7375821">)</span>&nbsp;<span class="op" id="7375823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375826">for</span>&nbsp;<span class="ident" id="7375830">_</span><span class="op" id="7375831">,</span>&nbsp;<span class="ident" id="7375833">regexp</span>&nbsp;<span class="op" id="7375840">:=</span>&nbsp;<span class="keyword" id="7375843">range</span>&nbsp;<span class="ident" id="7375849">invalidRegexps</span>&nbsp;<span class="op" id="7375864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375868">if</span>&nbsp;<span class="ident" id="7375871">re</span><span class="op" id="7375873">,</span>&nbsp;<span class="ident" id="7375875">err</span>&nbsp;<span class="op" id="7375879">:=</span>&nbsp;<span class="ident" id="7375882">Parse</span><span class="op" id="7375887">(</span><span class="ident" id="7375888">regexp</span><span class="op" id="7375894">,</span>&nbsp;<span class="ident" id="7375896">Perl</span><span class="op" id="7375900">)</span><span class="op" id="7375901">;</span>&nbsp;<span class="ident" id="7375903">err</span>&nbsp;<span class="op" id="7375907">==</span>&nbsp;<span class="ident" id="7375910">nil</span>&nbsp;<span class="op" id="7375914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375919">t</span><span class="op" id="7375920">.</span><span class="ident" id="7375921">Errorf</span><span class="op" id="7375927">(</span><span class="string" id="7375928">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7375971">,</span>&nbsp;<span class="ident" id="7375973">regexp</span><span class="op" id="7375979">,</span>&nbsp;<span class="ident" id="7375981">dump</span><span class="op" id="7375985">(</span><span class="ident" id="7375986">re</span><span class="op" id="7375988">)</span><span class="op" id="7375989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375993">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375997">if</span>&nbsp;<span class="ident" id="7376000">re</span><span class="op" id="7376002">,</span>&nbsp;<span class="ident" id="7376004">err</span>&nbsp;<span class="op" id="7376008">:=</span>&nbsp;<span class="ident" id="7376011">Parse</span><span class="op" id="7376016">(</span><span class="ident" id="7376017">regexp</span><span class="op" id="7376023">,</span>&nbsp;<span class="ident" id="7376025">POSIX</span><span class="op" id="7376030">)</span><span class="op" id="7376031">;</span>&nbsp;<span class="ident" id="7376033">err</span>&nbsp;<span class="op" id="7376037">==</span>&nbsp;<span class="ident" id="7376040">nil</span>&nbsp;<span class="op" id="7376044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376049">t</span><span class="op" id="7376050">.</span><span class="ident" id="7376051">Errorf</span><span class="op" id="7376057">(</span><span class="string" id="7376058">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7376102">,</span>&nbsp;<span class="ident" id="7376104">regexp</span><span class="op" id="7376110">,</span>&nbsp;<span class="ident" id="7376112">dump</span><span class="op" id="7376116">(</span><span class="ident" id="7376117">re</span><span class="op" id="7376119">)</span><span class="op" id="7376120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376130">for</span>&nbsp;<span class="ident" id="7376134">_</span><span class="op" id="7376135">,</span>&nbsp;<span class="ident" id="7376137">regexp</span>&nbsp;<span class="op" id="7376144">:=</span>&nbsp;<span class="keyword" id="7376147">range</span>&nbsp;<span class="ident" id="7376153">onlyPerl</span>&nbsp;<span class="op" id="7376162">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376166">if</span>&nbsp;<span class="ident" id="7376169">_</span><span class="op" id="7376170">,</span>&nbsp;<span class="ident" id="7376172">err</span>&nbsp;<span class="op" id="7376176">:=</span>&nbsp;<span class="ident" id="7376179">Parse</span><span class="op" id="7376184">(</span><span class="ident" id="7376185">regexp</span><span class="op" id="7376191">,</span>&nbsp;<span class="ident" id="7376193">Perl</span><span class="op" id="7376197">)</span><span class="op" id="7376198">;</span>&nbsp;<span class="ident" id="7376200">err</span>&nbsp;<span class="op" id="7376204">!=</span>&nbsp;<span class="ident" id="7376207">nil</span>&nbsp;<span class="op" id="7376211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376216">t</span><span class="op" id="7376217">.</span><span class="ident" id="7376218">Errorf</span><span class="op" id="7376224">(</span><span class="string" id="7376225">&#34;Parse(%#q,&nbsp;Perl):&nbsp;%v&#34;</span><span class="op" id="7376247">,</span>&nbsp;<span class="ident" id="7376249">regexp</span><span class="op" id="7376255">,</span>&nbsp;<span class="ident" id="7376257">err</span><span class="op" id="7376260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376268">if</span>&nbsp;<span class="ident" id="7376271">re</span><span class="op" id="7376273">,</span>&nbsp;<span class="ident" id="7376275">err</span>&nbsp;<span class="op" id="7376279">:=</span>&nbsp;<span class="ident" id="7376282">Parse</span><span class="op" id="7376287">(</span><span class="ident" id="7376288">regexp</span><span class="op" id="7376294">,</span>&nbsp;<span class="ident" id="7376296">POSIX</span><span class="op" id="7376301">)</span><span class="op" id="7376302">;</span>&nbsp;<span class="ident" id="7376304">err</span>&nbsp;<span class="op" id="7376308">==</span>&nbsp;<span class="ident" id="7376311">nil</span>&nbsp;<span class="op" id="7376315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376320">t</span><span class="op" id="7376321">.</span><span class="ident" id="7376322">Errorf</span><span class="op" id="7376328">(</span><span class="string" id="7376329">&#34;Parse(%#q,&nbsp;POSIX)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7376373">,</span>&nbsp;<span class="ident" id="7376375">regexp</span><span class="op" id="7376381">,</span>&nbsp;<span class="ident" id="7376383">dump</span><span class="op" id="7376387">(</span><span class="ident" id="7376388">re</span><span class="op" id="7376390">)</span><span class="op" id="7376391">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376401">for</span>&nbsp;<span class="ident" id="7376405">_</span><span class="op" id="7376406">,</span>&nbsp;<span class="ident" id="7376408">regexp</span>&nbsp;<span class="op" id="7376415">:=</span>&nbsp;<span class="keyword" id="7376418">range</span>&nbsp;<span class="ident" id="7376424">onlyPOSIX</span>&nbsp;<span class="op" id="7376434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376438">if</span>&nbsp;<span class="ident" id="7376441">re</span><span class="op" id="7376443">,</span>&nbsp;<span class="ident" id="7376445">err</span>&nbsp;<span class="op" id="7376449">:=</span>&nbsp;<span class="ident" id="7376452">Parse</span><span class="op" id="7376457">(</span><span class="ident" id="7376458">regexp</span><span class="op" id="7376464">,</span>&nbsp;<span class="ident" id="7376466">Perl</span><span class="op" id="7376470">)</span><span class="op" id="7376471">;</span>&nbsp;<span class="ident" id="7376473">err</span>&nbsp;<span class="op" id="7376477">==</span>&nbsp;<span class="ident" id="7376480">nil</span>&nbsp;<span class="op" id="7376484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376489">t</span><span class="op" id="7376490">.</span><span class="ident" id="7376491">Errorf</span><span class="op" id="7376497">(</span><span class="string" id="7376498">&#34;Parse(%#q,&nbsp;Perl)&nbsp;=&nbsp;%s,&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="7376541">,</span>&nbsp;<span class="ident" id="7376543">regexp</span><span class="op" id="7376549">,</span>&nbsp;<span class="ident" id="7376551">dump</span><span class="op" id="7376555">(</span><span class="ident" id="7376556">re</span><span class="op" id="7376558">)</span><span class="op" id="7376559">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376567">if</span>&nbsp;<span class="ident" id="7376570">_</span><span class="op" id="7376571">,</span>&nbsp;<span class="ident" id="7376573">err</span>&nbsp;<span class="op" id="7376577">:=</span>&nbsp;<span class="ident" id="7376580">Parse</span><span class="op" id="7376585">(</span><span class="ident" id="7376586">regexp</span><span class="op" id="7376592">,</span>&nbsp;<span class="ident" id="7376594">POSIX</span><span class="op" id="7376599">)</span><span class="op" id="7376600">;</span>&nbsp;<span class="ident" id="7376602">err</span>&nbsp;<span class="op" id="7376606">!=</span>&nbsp;<span class="ident" id="7376609">nil</span>&nbsp;<span class="op" id="7376613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376618">t</span><span class="op" id="7376619">.</span><span class="ident" id="7376620">Errorf</span><span class="op" id="7376626">(</span><span class="string" id="7376627">&#34;Parse(%#q,&nbsp;POSIX):&nbsp;%v&#34;</span><span class="op" id="7376650">,</span>&nbsp;<span class="ident" id="7376652">regexp</span><span class="op" id="7376658">,</span>&nbsp;<span class="ident" id="7376660">err</span><span class="op" id="7376663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376670">}</span><br>
<span class="lineno">530</span><span class="op" id="7376672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7376675">func</span>&nbsp;<span class="ident" id="7376680">TestToStringEquivalentParse</span><span class="op" id="7376707">(</span><span class="ident" id="7376708">t</span>&nbsp;<span class="op" id="7376710">*</span><span class="ident" id="7376711">testing</span><span class="op" id="7376718">.</span><span class="ident" id="7376719">T</span><span class="op" id="7376720">)</span>&nbsp;<span class="op" id="7376722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376725">for</span>&nbsp;<span class="ident" id="7376729">_</span><span class="op" id="7376730">,</span>&nbsp;<span class="ident" id="7376732">tt</span>&nbsp;<span class="op" id="7376735">:=</span>&nbsp;<span class="keyword" id="7376738">range</span>&nbsp;<span class="ident" id="7376744">parseTests</span>&nbsp;<span class="op" id="7376755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376759">re</span><span class="op" id="7376761">,</span>&nbsp;<span class="ident" id="7376763">err</span>&nbsp;<span class="op" id="7376767">:=</span>&nbsp;<span class="ident" id="7376770">Parse</span><span class="op" id="7376775">(</span><span class="ident" id="7376776">tt</span><span class="op" id="7376778">.</span><span class="ident" id="7376779">Regexp</span><span class="op" id="7376785">,</span>&nbsp;<span class="ident" id="7376787">testFlags</span><span class="op" id="7376796">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376800">if</span>&nbsp;<span class="ident" id="7376803">err</span>&nbsp;<span class="op" id="7376807">!=</span>&nbsp;<span class="ident" id="7376810">nil</span>&nbsp;<span class="op" id="7376814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376819">t</span><span class="op" id="7376820">.</span><span class="ident" id="7376821">Errorf</span><span class="op" id="7376827">(</span><span class="string" id="7376828">&#34;Parse(%#q):&nbsp;%v&#34;</span><span class="op" id="7376844">,</span>&nbsp;<span class="ident" id="7376846">tt</span><span class="op" id="7376848">.</span><span class="ident" id="7376849">Regexp</span><span class="op" id="7376855">,</span>&nbsp;<span class="ident" id="7376857">err</span><span class="op" id="7376860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376865">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376880">if</span>&nbsp;<span class="ident" id="7376883">tt</span><span class="op" id="7376885">.</span><span class="ident" id="7376886">Dump</span>&nbsp;<span class="op" id="7376891">==</span>&nbsp;<span class="string" id="7376894">&#34;&#34;</span>&nbsp;<span class="op" id="7376897">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376902">//&nbsp;It&nbsp;parsed.&nbsp;That&#39;s&nbsp;all&nbsp;we&nbsp;care&nbsp;about.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376945">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376960">d</span>&nbsp;<span class="op" id="7376962">:=</span>&nbsp;<span class="ident" id="7376965">dump</span><span class="op" id="7376969">(</span><span class="ident" id="7376970">re</span><span class="op" id="7376972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376976">if</span>&nbsp;<span class="ident" id="7376979">d</span>&nbsp;<span class="op" id="7376981">!=</span>&nbsp;<span class="ident" id="7376984">tt</span><span class="op" id="7376986">.</span><span class="ident" id="7376987">Dump</span>&nbsp;<span class="op" id="7376992">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376997">t</span><span class="op" id="7376998">.</span><span class="ident" id="7376999">Errorf</span><span class="op" id="7377005">(</span><span class="string" id="7377006">&#34;Parse(%#q).Dump()&nbsp;=&nbsp;%#q&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7377040">,</span>&nbsp;<span class="ident" id="7377042">tt</span><span class="op" id="7377044">.</span><span class="ident" id="7377045">Regexp</span><span class="op" id="7377051">,</span>&nbsp;<span class="ident" id="7377053">d</span><span class="op" id="7377054">,</span>&nbsp;<span class="ident" id="7377056">tt</span><span class="op" id="7377058">.</span><span class="ident" id="7377059">Dump</span><span class="op" id="7377063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377068">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377084">s</span>&nbsp;<span class="op" id="7377086">:=</span>&nbsp;<span class="ident" id="7377089">re</span><span class="op" id="7377091">.</span><span class="ident" id="7377092">String</span><span class="op" id="7377098">(</span><span class="op" id="7377099">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377103">if</span>&nbsp;<span class="ident" id="7377106">s</span>&nbsp;<span class="op" id="7377108">!=</span>&nbsp;<span class="ident" id="7377111">tt</span><span class="op" id="7377113">.</span><span class="ident" id="7377114">Regexp</span>&nbsp;<span class="op" id="7377121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377126">//&nbsp;If&nbsp;ToString&nbsp;didn&#39;t&nbsp;return&nbsp;the&nbsp;original&nbsp;regexp,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377179">//&nbsp;it&nbsp;must&nbsp;have&nbsp;found&nbsp;one&nbsp;with&nbsp;fewer&nbsp;parens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377227">//&nbsp;Unfortunately&nbsp;we&nbsp;can&#39;t&nbsp;check&nbsp;the&nbsp;length&nbsp;here,&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377287">//&nbsp;ToString&nbsp;produces&nbsp;&#34;\\{&#34;&nbsp;for&nbsp;a&nbsp;literal&nbsp;brace,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7377338">//&nbsp;but&nbsp;&#34;{&#34;&nbsp;is&nbsp;a&nbsp;shorter&nbsp;equivalent&nbsp;in&nbsp;some&nbsp;contexts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377394">nre</span><span class="op" id="7377397">,</span>&nbsp;<span class="ident" id="7377399">err</span>&nbsp;<span class="op" id="7377403">:=</span>&nbsp;<span class="ident" id="7377406">Parse</span><span class="op" id="7377411">(</span><span class="ident" id="7377412">s</span><span class="op" id="7377413">,</span>&nbsp;<span class="ident" id="7377415">testFlags</span><span class="op" id="7377424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377429">if</span>&nbsp;<span class="ident" id="7377432">err</span>&nbsp;<span class="op" id="7377436">!=</span>&nbsp;<span class="ident" id="7377439">nil</span>&nbsp;<span class="op" id="7377443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377449">t</span><span class="op" id="7377450">.</span><span class="ident" id="7377451">Errorf</span><span class="op" id="7377457">(</span><span class="string" id="7377458">&#34;Parse(%#q.String()&nbsp;=&nbsp;%#q):&nbsp;%v&#34;</span><span class="op" id="7377489">,</span>&nbsp;<span class="ident" id="7377491">tt</span><span class="op" id="7377493">.</span><span class="ident" id="7377494">Regexp</span><span class="op" id="7377500">,</span>&nbsp;<span class="ident" id="7377502">s</span><span class="op" id="7377503">,</span>&nbsp;<span class="ident" id="7377505">err</span><span class="op" id="7377508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377514">continue</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377531">nd</span>&nbsp;<span class="op" id="7377534">:=</span>&nbsp;<span class="ident" id="7377537">dump</span><span class="op" id="7377541">(</span><span class="ident" id="7377542">nre</span><span class="op" id="7377545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377550">if</span>&nbsp;<span class="ident" id="7377553">d</span>&nbsp;<span class="op" id="7377555">!=</span>&nbsp;<span class="ident" id="7377558">nd</span>&nbsp;<span class="op" id="7377561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377567">t</span><span class="op" id="7377568">.</span><span class="ident" id="7377569">Errorf</span><span class="op" id="7377575">(</span><span class="string" id="7377576">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q;&nbsp;%#q&nbsp;vs&nbsp;%#q&#34;</span><span class="op" id="7377607">,</span>&nbsp;<span class="ident" id="7377609">tt</span><span class="op" id="7377611">.</span><span class="ident" id="7377612">Regexp</span><span class="op" id="7377618">,</span>&nbsp;<span class="ident" id="7377620">s</span><span class="op" id="7377621">,</span>&nbsp;<span class="ident" id="7377623">d</span><span class="op" id="7377624">,</span>&nbsp;<span class="ident" id="7377626">nd</span><span class="op" id="7377628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377633">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377639">ns</span>&nbsp;<span class="op" id="7377642">:=</span>&nbsp;<span class="ident" id="7377645">nre</span><span class="op" id="7377648">.</span><span class="ident" id="7377649">String</span><span class="op" id="7377655">(</span><span class="op" id="7377656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377661">if</span>&nbsp;<span class="ident" id="7377664">s</span>&nbsp;<span class="op" id="7377666">!=</span>&nbsp;<span class="ident" id="7377669">ns</span>&nbsp;<span class="op" id="7377672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377678">t</span><span class="op" id="7377679">.</span><span class="ident" id="7377680">Errorf</span><span class="op" id="7377686">(</span><span class="string" id="7377687">&#34;Parse(%#q)&nbsp;-&gt;&nbsp;%#q&nbsp;-&gt;&nbsp;%#q&#34;</span><span class="op" id="7377713">,</span>&nbsp;<span class="ident" id="7377715">tt</span><span class="op" id="7377717">.</span><span class="ident" id="7377718">Regexp</span><span class="op" id="7377724">,</span>&nbsp;<span class="ident" id="7377726">s</span><span class="op" id="7377727">,</span>&nbsp;<span class="ident" id="7377729">ns</span><span class="op" id="7377731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377736">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377743">}</span><br>
<span class="lineno"></span><span class="op" id="7377745">}</span>
</div>
</body>
</html>
