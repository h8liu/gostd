<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5097871">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5097926">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5097980">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5098031">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5098077">package</span>&nbsp;<span class="ident" id="5098085">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5098090">import</span>&nbsp;<span class="op" id="5098097">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098100">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098110">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098122">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098130">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098140">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098148">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098159">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098170">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5098181">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5098196">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5098199">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5098269">type</span>&nbsp;<span class="ident" id="5098274">Example</span>&nbsp;<span class="keyword" id="5098282">struct</span>&nbsp;<span class="op" id="5098289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098292">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5098304">string</span>&nbsp;<span class="comment" id="5098311">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098350">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5098362">string</span>&nbsp;<span class="comment" id="5098369">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098401">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098413">ast</span><span class="op" id="5098416">.</span><span class="ident" id="5098417">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098423">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5098435">*</span><span class="ident" id="5098436">ast</span><span class="op" id="5098439">.</span><span class="ident" id="5098440">File</span>&nbsp;<span class="comment" id="5098445">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098488">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5098500">[</span><span class="op" id="5098501">]</span><span class="op" id="5098502">*</span><span class="ident" id="5098503">ast</span><span class="op" id="5098506">.</span><span class="ident" id="5098507">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098521">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5098533">string</span>&nbsp;<span class="comment" id="5098540">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098560">EmptyOutput</span>&nbsp;<span class="builtintype" id="5098572">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5098579">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098603">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5098615">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098622">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="5098652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5098655">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5098730">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="5098807">//</span><br>
<span class="lineno"></span><span class="comment" id="5098810">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5098880">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5098955">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="5098973">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="5099049">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5099125">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="5099188">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5099262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5099338">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="5099411">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5099445">func</span>&nbsp;<span class="ident" id="5099450">Examples</span><span class="op" id="5099458">(</span><span class="ident" id="5099459">files</span>&nbsp;<span class="op" id="5099465">...</span><span class="op" id="5099468">*</span><span class="ident" id="5099469">ast</span><span class="op" id="5099472">.</span><span class="ident" id="5099473">File</span><span class="op" id="5099477">)</span>&nbsp;<span class="op" id="5099479">[</span><span class="op" id="5099480">]</span><span class="op" id="5099481">*</span><span class="ident" id="5099482">Example</span>&nbsp;<span class="op" id="5099490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099493">var</span>&nbsp;<span class="ident" id="5099497">list</span>&nbsp;<span class="op" id="5099502">[</span><span class="op" id="5099503">]</span><span class="op" id="5099504">*</span><span class="ident" id="5099505">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099514">for</span>&nbsp;<span class="ident" id="5099518">_</span><span class="op" id="5099519">,</span>&nbsp;<span class="ident" id="5099521">file</span>&nbsp;<span class="op" id="5099526">:=</span>&nbsp;<span class="keyword" id="5099529">range</span>&nbsp;<span class="ident" id="5099535">files</span>&nbsp;<span class="op" id="5099541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099545">hasTests</span>&nbsp;<span class="op" id="5099554">:=</span>&nbsp;<span class="builtintype" id="5099557">false</span>&nbsp;<span class="comment" id="5099563">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099602">numDecl</span>&nbsp;<span class="op" id="5099610">:=</span>&nbsp;<span class="num" id="5099613">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099620">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099671">var</span>&nbsp;<span class="ident" id="5099675">flist</span>&nbsp;<span class="op" id="5099681">[</span><span class="op" id="5099682">]</span><span class="op" id="5099683">*</span><span class="ident" id="5099684">Example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099694">for</span>&nbsp;<span class="ident" id="5099698">_</span><span class="op" id="5099699">,</span>&nbsp;<span class="ident" id="5099701">decl</span>&nbsp;<span class="op" id="5099706">:=</span>&nbsp;<span class="keyword" id="5099709">range</span>&nbsp;<span class="ident" id="5099715">file</span><span class="op" id="5099719">.</span><span class="ident" id="5099720">Decls</span>&nbsp;<span class="op" id="5099726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099731">if</span>&nbsp;<span class="ident" id="5099734">g</span><span class="op" id="5099735">,</span>&nbsp;<span class="ident" id="5099737">ok</span>&nbsp;<span class="op" id="5099740">:=</span>&nbsp;<span class="ident" id="5099743">decl</span><span class="op" id="5099747">.</span><span class="op" id="5099748">(</span><span class="op" id="5099749">*</span><span class="ident" id="5099750">ast</span><span class="op" id="5099753">.</span><span class="ident" id="5099754">GenDecl</span><span class="op" id="5099761">)</span><span class="op" id="5099762">;</span>&nbsp;<span class="ident" id="5099764">ok</span>&nbsp;<span class="op" id="5099767">&amp;&amp;</span>&nbsp;<span class="ident" id="5099770">g</span><span class="op" id="5099771">.</span><span class="ident" id="5099772">Tok</span>&nbsp;<span class="op" id="5099776">!=</span>&nbsp;<span class="ident" id="5099779">token</span><span class="op" id="5099784">.</span><span class="ident" id="5099785">IMPORT</span>&nbsp;<span class="op" id="5099792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099798">numDecl</span><span class="op" id="5099805">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099812">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5099824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099829">f</span><span class="op" id="5099830">,</span>&nbsp;<span class="ident" id="5099832">ok</span>&nbsp;<span class="op" id="5099835">:=</span>&nbsp;<span class="ident" id="5099838">decl</span><span class="op" id="5099842">.</span><span class="op" id="5099843">(</span><span class="op" id="5099844">*</span><span class="ident" id="5099845">ast</span><span class="op" id="5099848">.</span><span class="ident" id="5099849">FuncDecl</span><span class="op" id="5099857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099862">if</span>&nbsp;<span class="op" id="5099865">!</span><span class="ident" id="5099866">ok</span>&nbsp;<span class="op" id="5099869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099875">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5099887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099892">numDecl</span><span class="op" id="5099899">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099905">name</span>&nbsp;<span class="op" id="5099910">:=</span>&nbsp;<span class="ident" id="5099913">f</span><span class="op" id="5099914">.</span><span class="ident" id="5099915">Name</span><span class="op" id="5099919">.</span><span class="ident" id="5099920">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5099928">if</span>&nbsp;<span class="ident" id="5099931">isTest</span><span class="op" id="5099937">(</span><span class="ident" id="5099938">name</span><span class="op" id="5099942">,</span>&nbsp;<span class="string" id="5099944">&#34;Test&#34;</span><span class="op" id="5099950">)</span>&nbsp;<span class="op" id="5099952">||</span>&nbsp;<span class="ident" id="5099955">isTest</span><span class="op" id="5099961">(</span><span class="ident" id="5099962">name</span><span class="op" id="5099966">,</span>&nbsp;<span class="string" id="5099968">&#34;Benchmark&#34;</span><span class="op" id="5099979">)</span>&nbsp;<span class="op" id="5099981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099987">hasTests</span>&nbsp;<span class="op" id="5099996">=</span>&nbsp;<span class="builtintype" id="5099998">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100007">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100024">if</span>&nbsp;<span class="op" id="5100027">!</span><span class="ident" id="5100028">isTest</span><span class="op" id="5100034">(</span><span class="ident" id="5100035">name</span><span class="op" id="5100039">,</span>&nbsp;<span class="string" id="5100041">&#34;Example&#34;</span><span class="op" id="5100050">)</span>&nbsp;<span class="op" id="5100052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100058">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100070">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100075">var</span>&nbsp;<span class="ident" id="5100079">doc</span>&nbsp;<span class="builtintype" id="5100083">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100093">if</span>&nbsp;<span class="ident" id="5100096">f</span><span class="op" id="5100097">.</span><span class="ident" id="5100098">Doc</span>&nbsp;<span class="op" id="5100102">!=</span>&nbsp;<span class="builtintype" id="5100105">nil</span>&nbsp;<span class="op" id="5100109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100115">doc</span>&nbsp;<span class="op" id="5100119">=</span>&nbsp;<span class="ident" id="5100121">f</span><span class="op" id="5100122">.</span><span class="ident" id="5100123">Doc</span><span class="op" id="5100126">.</span><span class="ident" id="5100127">Text</span><span class="op" id="5100131">(</span><span class="op" id="5100132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100142">output</span><span class="op" id="5100148">,</span>&nbsp;<span class="ident" id="5100150">hasOutput</span>&nbsp;<span class="op" id="5100160">:=</span>&nbsp;<span class="ident" id="5100163">exampleOutput</span><span class="op" id="5100176">(</span><span class="ident" id="5100177">f</span><span class="op" id="5100178">.</span><span class="ident" id="5100179">Body</span><span class="op" id="5100183">,</span>&nbsp;<span class="ident" id="5100185">file</span><span class="op" id="5100189">.</span><span class="ident" id="5100190">Comments</span><span class="op" id="5100198">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100203">flist</span>&nbsp;<span class="op" id="5100209">=</span>&nbsp;<span class="builtinfunc" id="5100211">append</span><span class="op" id="5100217">(</span><span class="ident" id="5100218">flist</span><span class="op" id="5100223">,</span>&nbsp;<span class="op" id="5100225">&amp;</span><span class="ident" id="5100226">Example</span><span class="op" id="5100233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100239">Name</span><span class="op" id="5100243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100252">name</span><span class="op" id="5100256">[</span><span class="builtinfunc" id="5100257">len</span><span class="op" id="5100260">(</span><span class="string" id="5100261">&#34;Example&#34;</span><span class="op" id="5100270">)</span><span class="op" id="5100271">:</span><span class="op" id="5100272">]</span><span class="op" id="5100273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100279">Doc</span><span class="op" id="5100282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100292">doc</span><span class="op" id="5100295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100301">Code</span><span class="op" id="5100305">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100314">f</span><span class="op" id="5100315">.</span><span class="ident" id="5100316">Body</span><span class="op" id="5100320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100326">Play</span><span class="op" id="5100330">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100339">playExample</span><span class="op" id="5100350">(</span><span class="ident" id="5100351">file</span><span class="op" id="5100355">,</span>&nbsp;<span class="ident" id="5100357">f</span><span class="op" id="5100358">.</span><span class="ident" id="5100359">Body</span><span class="op" id="5100363">)</span><span class="op" id="5100364">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100370">Comments</span><span class="op" id="5100378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100383">file</span><span class="op" id="5100387">.</span><span class="ident" id="5100388">Comments</span><span class="op" id="5100396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100402">Output</span><span class="op" id="5100408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100415">output</span><span class="op" id="5100421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100427">EmptyOutput</span><span class="op" id="5100438">:</span>&nbsp;<span class="ident" id="5100440">output</span>&nbsp;<span class="op" id="5100447">==</span>&nbsp;<span class="string" id="5100450">&#34;&#34;</span>&nbsp;<span class="op" id="5100453">&amp;&amp;</span>&nbsp;<span class="ident" id="5100456">hasOutput</span><span class="op" id="5100465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100471">Order</span><span class="op" id="5100476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5100484">len</span><span class="op" id="5100487">(</span><span class="ident" id="5100488">flist</span><span class="op" id="5100493">)</span><span class="op" id="5100494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100499">}</span><span class="op" id="5100500">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100508">if</span>&nbsp;<span class="op" id="5100511">!</span><span class="ident" id="5100512">hasTests</span>&nbsp;<span class="op" id="5100521">&amp;&amp;</span>&nbsp;<span class="ident" id="5100524">numDecl</span>&nbsp;<span class="op" id="5100532">&gt;</span>&nbsp;<span class="num" id="5100534">1</span>&nbsp;<span class="op" id="5100536">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5100539">len</span><span class="op" id="5100542">(</span><span class="ident" id="5100543">flist</span><span class="op" id="5100548">)</span>&nbsp;<span class="op" id="5100550">==</span>&nbsp;<span class="num" id="5100553">1</span>&nbsp;<span class="op" id="5100555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5100560">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5100615">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5100667">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100720">flist</span><span class="op" id="5100725">[</span><span class="num" id="5100726">0</span><span class="op" id="5100727">]</span><span class="op" id="5100728">.</span><span class="ident" id="5100729">Code</span>&nbsp;<span class="op" id="5100734">=</span>&nbsp;<span class="ident" id="5100736">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100744">flist</span><span class="op" id="5100749">[</span><span class="num" id="5100750">0</span><span class="op" id="5100751">]</span><span class="op" id="5100752">.</span><span class="ident" id="5100753">Play</span>&nbsp;<span class="op" id="5100758">=</span>&nbsp;<span class="ident" id="5100760">playExampleFile</span><span class="op" id="5100775">(</span><span class="ident" id="5100776">file</span><span class="op" id="5100780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100788">list</span>&nbsp;<span class="op" id="5100793">=</span>&nbsp;<span class="builtinfunc" id="5100795">append</span><span class="op" id="5100801">(</span><span class="ident" id="5100802">list</span><span class="op" id="5100806">,</span>&nbsp;<span class="ident" id="5100808">flist</span><span class="op" id="5100813">...</span><span class="op" id="5100816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100819">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100822">sort</span><span class="op" id="5100826">.</span><span class="ident" id="5100827">Sort</span><span class="op" id="5100831">(</span><span class="ident" id="5100832">exampleByName</span><span class="op" id="5100845">(</span><span class="ident" id="5100846">list</span><span class="op" id="5100850">)</span><span class="op" id="5100851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5100854">return</span>&nbsp;<span class="ident" id="5100861">list</span><br>
<span class="lineno"></span><span class="op" id="5100866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5100869">var</span>&nbsp;<span class="ident" id="5100873">outputPrefix</span>&nbsp;<span class="op" id="5100886">=</span>&nbsp;<span class="ident" id="5100888">regexp</span><span class="op" id="5100894">.</span><span class="ident" id="5100895">MustCompile</span><span class="op" id="5100906">(</span><span class="string" id="5100907">`(?i)^[[:space:]]*output:`</span><span class="op" id="5100933">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5100936">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="5101013">func</span>&nbsp;<span class="ident" id="5101018">exampleOutput</span><span class="op" id="5101031">(</span><span class="ident" id="5101032">b</span>&nbsp;<span class="op" id="5101034">*</span><span class="ident" id="5101035">ast</span><span class="op" id="5101038">.</span><span class="ident" id="5101039">BlockStmt</span><span class="op" id="5101048">,</span>&nbsp;<span class="ident" id="5101050">comments</span>&nbsp;<span class="op" id="5101059">[</span><span class="op" id="5101060">]</span><span class="op" id="5101061">*</span><span class="ident" id="5101062">ast</span><span class="op" id="5101065">.</span><span class="ident" id="5101066">CommentGroup</span><span class="op" id="5101078">)</span>&nbsp;<span class="op" id="5101080">(</span><span class="ident" id="5101081">output</span>&nbsp;<span class="builtintype" id="5101088">string</span><span class="op" id="5101094">,</span>&nbsp;<span class="ident" id="5101096">ok</span>&nbsp;<span class="builtintype" id="5101099">bool</span><span class="op" id="5101103">)</span>&nbsp;<span class="op" id="5101105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101108">if</span>&nbsp;<span class="ident" id="5101111">_</span><span class="op" id="5101112">,</span>&nbsp;<span class="ident" id="5101114">last</span>&nbsp;<span class="op" id="5101119">:=</span>&nbsp;<span class="ident" id="5101122">lastComment</span><span class="op" id="5101133">(</span><span class="ident" id="5101134">b</span><span class="op" id="5101135">,</span>&nbsp;<span class="ident" id="5101137">comments</span><span class="op" id="5101145">)</span><span class="op" id="5101146">;</span>&nbsp;<span class="ident" id="5101148">last</span>&nbsp;<span class="op" id="5101153">!=</span>&nbsp;<span class="builtintype" id="5101156">nil</span>&nbsp;<span class="op" id="5101160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5101164">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5101213">text</span>&nbsp;<span class="op" id="5101218">:=</span>&nbsp;<span class="ident" id="5101221">last</span><span class="op" id="5101225">.</span><span class="ident" id="5101226">Text</span><span class="op" id="5101230">(</span><span class="op" id="5101231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101235">if</span>&nbsp;<span class="ident" id="5101238">loc</span>&nbsp;<span class="op" id="5101242">:=</span>&nbsp;<span class="ident" id="5101245">outputPrefix</span><span class="op" id="5101257">.</span><span class="ident" id="5101258">FindStringIndex</span><span class="op" id="5101273">(</span><span class="ident" id="5101274">text</span><span class="op" id="5101278">)</span><span class="op" id="5101279">;</span>&nbsp;<span class="ident" id="5101281">loc</span>&nbsp;<span class="op" id="5101285">!=</span>&nbsp;<span class="builtintype" id="5101288">nil</span>&nbsp;<span class="op" id="5101292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5101297">text</span>&nbsp;<span class="op" id="5101302">=</span>&nbsp;<span class="ident" id="5101304">text</span><span class="op" id="5101308">[</span><span class="ident" id="5101309">loc</span><span class="op" id="5101312">[</span><span class="num" id="5101313">1</span><span class="op" id="5101314">]</span><span class="op" id="5101315">:</span><span class="op" id="5101316">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5101321">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5101387">text</span>&nbsp;<span class="op" id="5101392">=</span>&nbsp;<span class="ident" id="5101394">strings</span><span class="op" id="5101401">.</span><span class="ident" id="5101402">TrimLeft</span><span class="op" id="5101410">(</span><span class="ident" id="5101411">text</span><span class="op" id="5101415">,</span>&nbsp;<span class="string" id="5101417">&#34;&nbsp;&#34;</span><span class="op" id="5101420">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101425">if</span>&nbsp;<span class="builtinfunc" id="5101428">len</span><span class="op" id="5101431">(</span><span class="ident" id="5101432">text</span><span class="op" id="5101436">)</span>&nbsp;<span class="op" id="5101438">&gt;</span>&nbsp;<span class="num" id="5101440">0</span>&nbsp;<span class="op" id="5101442">&amp;&amp;</span>&nbsp;<span class="ident" id="5101445">text</span><span class="op" id="5101449">[</span><span class="num" id="5101450">0</span><span class="op" id="5101451">]</span>&nbsp;<span class="op" id="5101453">==</span>&nbsp;<span class="string" id="5101456">&#39;\n&#39;</span>&nbsp;<span class="op" id="5101461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5101467">text</span>&nbsp;<span class="op" id="5101472">=</span>&nbsp;<span class="ident" id="5101474">text</span><span class="op" id="5101478">[</span><span class="num" id="5101479">1</span><span class="op" id="5101480">:</span><span class="op" id="5101481">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5101486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101491">return</span>&nbsp;<span class="ident" id="5101498">text</span><span class="op" id="5101502">,</span>&nbsp;<span class="builtintype" id="5101504">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5101511">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5101514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101517">return</span>&nbsp;<span class="string" id="5101524">&#34;&#34;</span><span class="op" id="5101526">,</span>&nbsp;<span class="builtintype" id="5101528">false</span>&nbsp;<span class="comment" id="5101534">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="5101563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5101566">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="5101637">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5101708">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="5101757">func</span>&nbsp;<span class="ident" id="5101762">isTest</span><span class="op" id="5101768">(</span><span class="ident" id="5101769">name</span><span class="op" id="5101773">,</span>&nbsp;<span class="ident" id="5101775">prefix</span>&nbsp;<span class="builtintype" id="5101782">string</span><span class="op" id="5101788">)</span>&nbsp;<span class="builtintype" id="5101790">bool</span>&nbsp;<span class="op" id="5101795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101798">if</span>&nbsp;<span class="op" id="5101801">!</span><span class="ident" id="5101802">strings</span><span class="op" id="5101809">.</span><span class="ident" id="5101810">HasPrefix</span><span class="op" id="5101819">(</span><span class="ident" id="5101820">name</span><span class="op" id="5101824">,</span>&nbsp;<span class="ident" id="5101826">prefix</span><span class="op" id="5101832">)</span>&nbsp;<span class="op" id="5101834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101838">return</span>&nbsp;<span class="builtintype" id="5101845">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5101852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101855">if</span>&nbsp;<span class="builtinfunc" id="5101858">len</span><span class="op" id="5101861">(</span><span class="ident" id="5101862">name</span><span class="op" id="5101866">)</span>&nbsp;<span class="op" id="5101868">==</span>&nbsp;<span class="builtinfunc" id="5101871">len</span><span class="op" id="5101874">(</span><span class="ident" id="5101875">prefix</span><span class="op" id="5101881">)</span>&nbsp;<span class="op" id="5101883">{</span>&nbsp;<span class="comment" id="5101885">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101903">return</span>&nbsp;<span class="builtintype" id="5101910">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5101916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5101919">rune</span><span class="op" id="5101923">,</span>&nbsp;<span class="ident" id="5101925">_</span>&nbsp;<span class="op" id="5101927">:=</span>&nbsp;<span class="ident" id="5101930">utf8</span><span class="op" id="5101934">.</span><span class="ident" id="5101935">DecodeRuneInString</span><span class="op" id="5101953">(</span><span class="ident" id="5101954">name</span><span class="op" id="5101958">[</span><span class="builtinfunc" id="5101959">len</span><span class="op" id="5101962">(</span><span class="ident" id="5101963">prefix</span><span class="op" id="5101969">)</span><span class="op" id="5101970">:</span><span class="op" id="5101971">]</span><span class="op" id="5101972">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5101975">return</span>&nbsp;<span class="op" id="5101982">!</span><span class="ident" id="5101983">unicode</span><span class="op" id="5101990">.</span><span class="ident" id="5101991">IsLower</span><span class="op" id="5101998">(</span><span class="builtintype" id="5101999">rune</span><span class="op" id="5102003">)</span><br>
<span class="lineno"></span><span class="op" id="5102005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5102008">type</span>&nbsp;<span class="ident" id="5102013">exampleByName</span>&nbsp;<span class="op" id="5102027">[</span><span class="op" id="5102028">]</span><span class="op" id="5102029">*</span><span class="ident" id="5102030">Example</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="5102039">func</span>&nbsp;<span class="op" id="5102044">(</span><span class="ident" id="5102045">s</span>&nbsp;<span class="ident" id="5102047">exampleByName</span><span class="op" id="5102060">)</span>&nbsp;<span class="ident" id="5102062">Len</span><span class="op" id="5102065">(</span><span class="op" id="5102066">)</span>&nbsp;<span class="builtintype" id="5102068">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5102082">{</span>&nbsp;<span class="keyword" id="5102084">return</span>&nbsp;<span class="builtinfunc" id="5102091">len</span><span class="op" id="5102094">(</span><span class="ident" id="5102095">s</span><span class="op" id="5102096">)</span>&nbsp;<span class="op" id="5102098">}</span><br>
<span class="lineno"></span><span class="keyword" id="5102100">func</span>&nbsp;<span class="op" id="5102105">(</span><span class="ident" id="5102106">s</span>&nbsp;<span class="ident" id="5102108">exampleByName</span><span class="op" id="5102121">)</span>&nbsp;<span class="ident" id="5102123">Swap</span><span class="op" id="5102127">(</span><span class="ident" id="5102128">i</span><span class="op" id="5102129">,</span>&nbsp;<span class="ident" id="5102131">j</span>&nbsp;<span class="builtintype" id="5102133">int</span><span class="op" id="5102136">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5102143">{</span>&nbsp;<span class="ident" id="5102145">s</span><span class="op" id="5102146">[</span><span class="ident" id="5102147">i</span><span class="op" id="5102148">]</span><span class="op" id="5102149">,</span>&nbsp;<span class="ident" id="5102151">s</span><span class="op" id="5102152">[</span><span class="ident" id="5102153">j</span><span class="op" id="5102154">]</span>&nbsp;<span class="op" id="5102156">=</span>&nbsp;<span class="ident" id="5102158">s</span><span class="op" id="5102159">[</span><span class="ident" id="5102160">j</span><span class="op" id="5102161">]</span><span class="op" id="5102162">,</span>&nbsp;<span class="ident" id="5102164">s</span><span class="op" id="5102165">[</span><span class="ident" id="5102166">i</span><span class="op" id="5102167">]</span>&nbsp;<span class="op" id="5102169">}</span><br>
<span class="lineno"></span><span class="keyword" id="5102171">func</span>&nbsp;<span class="op" id="5102176">(</span><span class="ident" id="5102177">s</span>&nbsp;<span class="ident" id="5102179">exampleByName</span><span class="op" id="5102192">)</span>&nbsp;<span class="ident" id="5102194">Less</span><span class="op" id="5102198">(</span><span class="ident" id="5102199">i</span><span class="op" id="5102200">,</span>&nbsp;<span class="ident" id="5102202">j</span>&nbsp;<span class="builtintype" id="5102204">int</span><span class="op" id="5102207">)</span>&nbsp;<span class="builtintype" id="5102209">bool</span>&nbsp;<span class="op" id="5102214">{</span>&nbsp;<span class="keyword" id="5102216">return</span>&nbsp;<span class="ident" id="5102223">s</span><span class="op" id="5102224">[</span><span class="ident" id="5102225">i</span><span class="op" id="5102226">]</span><span class="op" id="5102227">.</span><span class="ident" id="5102228">Name</span>&nbsp;<span class="op" id="5102233">&lt;</span>&nbsp;<span class="ident" id="5102235">s</span><span class="op" id="5102236">[</span><span class="ident" id="5102237">j</span><span class="op" id="5102238">]</span><span class="op" id="5102239">.</span><span class="ident" id="5102240">Name</span>&nbsp;<span class="op" id="5102245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5102248">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="5102313">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5102374">func</span>&nbsp;<span class="ident" id="5102379">playExample</span><span class="op" id="5102390">(</span><span class="ident" id="5102391">file</span>&nbsp;<span class="op" id="5102396">*</span><span class="ident" id="5102397">ast</span><span class="op" id="5102400">.</span><span class="ident" id="5102401">File</span><span class="op" id="5102405">,</span>&nbsp;<span class="ident" id="5102407">body</span>&nbsp;<span class="op" id="5102412">*</span><span class="ident" id="5102413">ast</span><span class="op" id="5102416">.</span><span class="ident" id="5102417">BlockStmt</span><span class="op" id="5102426">)</span>&nbsp;<span class="op" id="5102428">*</span><span class="ident" id="5102429">ast</span><span class="op" id="5102432">.</span><span class="ident" id="5102433">File</span>&nbsp;<span class="op" id="5102438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102441">if</span>&nbsp;<span class="op" id="5102444">!</span><span class="ident" id="5102445">strings</span><span class="op" id="5102452">.</span><span class="ident" id="5102453">HasSuffix</span><span class="op" id="5102462">(</span><span class="ident" id="5102463">file</span><span class="op" id="5102467">.</span><span class="ident" id="5102468">Name</span><span class="op" id="5102472">.</span><span class="ident" id="5102473">Name</span><span class="op" id="5102477">,</span>&nbsp;<span class="string" id="5102479">&#34;_test&#34;</span><span class="op" id="5102486">)</span>&nbsp;<span class="op" id="5102488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5102492">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5102544">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102572">return</span>&nbsp;<span class="builtintype" id="5102579">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5102584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5102588">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5102633">topDecls</span>&nbsp;<span class="op" id="5102642">:=</span>&nbsp;<span class="builtinfunc" id="5102645">make</span><span class="op" id="5102649">(</span><span class="keyword" id="5102650">map</span><span class="op" id="5102653">[</span><span class="op" id="5102654">*</span><span class="ident" id="5102655">ast</span><span class="op" id="5102658">.</span><span class="ident" id="5102659">Object</span><span class="op" id="5102665">]</span><span class="builtintype" id="5102666">bool</span><span class="op" id="5102670">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102673">for</span>&nbsp;<span class="ident" id="5102677">_</span><span class="op" id="5102678">,</span>&nbsp;<span class="ident" id="5102680">decl</span>&nbsp;<span class="op" id="5102685">:=</span>&nbsp;<span class="keyword" id="5102688">range</span>&nbsp;<span class="ident" id="5102694">file</span><span class="op" id="5102698">.</span><span class="ident" id="5102699">Decls</span>&nbsp;<span class="op" id="5102705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102709">switch</span>&nbsp;<span class="ident" id="5102716">d</span>&nbsp;<span class="op" id="5102718">:=</span>&nbsp;<span class="ident" id="5102721">decl</span><span class="op" id="5102725">.</span><span class="op" id="5102726">(</span><span class="keyword" id="5102727">type</span><span class="op" id="5102731">)</span>&nbsp;<span class="op" id="5102733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102737">case</span>&nbsp;<span class="op" id="5102742">*</span><span class="ident" id="5102743">ast</span><span class="op" id="5102746">.</span><span class="ident" id="5102747">FuncDecl</span><span class="op" id="5102755">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5102760">topDecls</span><span class="op" id="5102768">[</span><span class="ident" id="5102769">d</span><span class="op" id="5102770">.</span><span class="ident" id="5102771">Name</span><span class="op" id="5102775">.</span><span class="ident" id="5102776">Obj</span><span class="op" id="5102779">]</span>&nbsp;<span class="op" id="5102781">=</span>&nbsp;<span class="builtintype" id="5102783">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102790">case</span>&nbsp;<span class="op" id="5102795">*</span><span class="ident" id="5102796">ast</span><span class="op" id="5102799">.</span><span class="ident" id="5102800">GenDecl</span><span class="op" id="5102807">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102812">for</span>&nbsp;<span class="ident" id="5102816">_</span><span class="op" id="5102817">,</span>&nbsp;<span class="ident" id="5102819">spec</span>&nbsp;<span class="op" id="5102824">:=</span>&nbsp;<span class="keyword" id="5102827">range</span>&nbsp;<span class="ident" id="5102833">d</span><span class="op" id="5102834">.</span><span class="ident" id="5102835">Specs</span>&nbsp;<span class="op" id="5102841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102847">switch</span>&nbsp;<span class="ident" id="5102854">s</span>&nbsp;<span class="op" id="5102856">:=</span>&nbsp;<span class="ident" id="5102859">spec</span><span class="op" id="5102863">.</span><span class="op" id="5102864">(</span><span class="keyword" id="5102865">type</span><span class="op" id="5102869">)</span>&nbsp;<span class="op" id="5102871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102877">case</span>&nbsp;<span class="op" id="5102882">*</span><span class="ident" id="5102883">ast</span><span class="op" id="5102886">.</span><span class="ident" id="5102887">TypeSpec</span><span class="op" id="5102895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5102902">topDecls</span><span class="op" id="5102910">[</span><span class="ident" id="5102911">s</span><span class="op" id="5102912">.</span><span class="ident" id="5102913">Name</span><span class="op" id="5102917">.</span><span class="ident" id="5102918">Obj</span><span class="op" id="5102921">]</span>&nbsp;<span class="op" id="5102923">=</span>&nbsp;<span class="builtintype" id="5102925">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102934">case</span>&nbsp;<span class="op" id="5102939">*</span><span class="ident" id="5102940">ast</span><span class="op" id="5102943">.</span><span class="ident" id="5102944">ValueSpec</span><span class="op" id="5102953">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5102960">for</span>&nbsp;<span class="ident" id="5102964">_</span><span class="op" id="5102965">,</span>&nbsp;<span class="ident" id="5102967">id</span>&nbsp;<span class="op" id="5102970">:=</span>&nbsp;<span class="keyword" id="5102973">range</span>&nbsp;<span class="ident" id="5102979">s</span><span class="op" id="5102980">.</span><span class="ident" id="5102981">Names</span>&nbsp;<span class="op" id="5102987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5102995">topDecls</span><span class="op" id="5103003">[</span><span class="ident" id="5103004">id</span><span class="op" id="5103006">.</span><span class="ident" id="5103007">Obj</span><span class="op" id="5103010">]</span>&nbsp;<span class="op" id="5103012">=</span>&nbsp;<span class="builtintype" id="5103014">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103035">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103046">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103114">unresolved</span>&nbsp;<span class="op" id="5103125">:=</span>&nbsp;<span class="builtinfunc" id="5103128">make</span><span class="op" id="5103132">(</span><span class="keyword" id="5103133">map</span><span class="op" id="5103136">[</span><span class="builtintype" id="5103137">string</span><span class="op" id="5103143">]</span><span class="builtintype" id="5103144">bool</span><span class="op" id="5103148">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103151">usesTopDecl</span>&nbsp;<span class="op" id="5103163">:=</span>&nbsp;<span class="builtintype" id="5103166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103173">var</span>&nbsp;<span class="ident" id="5103177">inspectFunc</span>&nbsp;<span class="keyword" id="5103189">func</span><span class="op" id="5103193">(</span><span class="ident" id="5103194">ast</span><span class="op" id="5103197">.</span><span class="ident" id="5103198">Node</span><span class="op" id="5103202">)</span>&nbsp;<span class="builtintype" id="5103204">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103210">inspectFunc</span>&nbsp;<span class="op" id="5103222">=</span>&nbsp;<span class="keyword" id="5103224">func</span><span class="op" id="5103228">(</span><span class="ident" id="5103229">n</span>&nbsp;<span class="ident" id="5103231">ast</span><span class="op" id="5103234">.</span><span class="ident" id="5103235">Node</span><span class="op" id="5103239">)</span>&nbsp;<span class="builtintype" id="5103241">bool</span>&nbsp;<span class="op" id="5103246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103250">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103314">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103378">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103424">if</span>&nbsp;<span class="ident" id="5103427">e</span><span class="op" id="5103428">,</span>&nbsp;<span class="ident" id="5103430">ok</span>&nbsp;<span class="op" id="5103433">:=</span>&nbsp;<span class="ident" id="5103436">n</span><span class="op" id="5103437">.</span><span class="op" id="5103438">(</span><span class="op" id="5103439">*</span><span class="ident" id="5103440">ast</span><span class="op" id="5103443">.</span><span class="ident" id="5103444">SelectorExpr</span><span class="op" id="5103456">)</span><span class="op" id="5103457">;</span>&nbsp;<span class="ident" id="5103459">ok</span>&nbsp;<span class="op" id="5103462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103467">ast</span><span class="op" id="5103470">.</span><span class="ident" id="5103471">Inspect</span><span class="op" id="5103478">(</span><span class="ident" id="5103479">e</span><span class="op" id="5103480">.</span><span class="ident" id="5103481">X</span><span class="op" id="5103482">,</span>&nbsp;<span class="ident" id="5103484">inspectFunc</span><span class="op" id="5103495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103500">return</span>&nbsp;<span class="builtintype" id="5103507">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103515">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103519">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103574">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103628">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103652">if</span>&nbsp;<span class="ident" id="5103655">e</span><span class="op" id="5103656">,</span>&nbsp;<span class="ident" id="5103658">ok</span>&nbsp;<span class="op" id="5103661">:=</span>&nbsp;<span class="ident" id="5103664">n</span><span class="op" id="5103665">.</span><span class="op" id="5103666">(</span><span class="op" id="5103667">*</span><span class="ident" id="5103668">ast</span><span class="op" id="5103671">.</span><span class="ident" id="5103672">KeyValueExpr</span><span class="op" id="5103684">)</span><span class="op" id="5103685">;</span>&nbsp;<span class="ident" id="5103687">ok</span>&nbsp;<span class="op" id="5103690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103695">ast</span><span class="op" id="5103698">.</span><span class="ident" id="5103699">Inspect</span><span class="op" id="5103706">(</span><span class="ident" id="5103707">e</span><span class="op" id="5103708">.</span><span class="ident" id="5103709">Value</span><span class="op" id="5103714">,</span>&nbsp;<span class="ident" id="5103716">inspectFunc</span><span class="op" id="5103727">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103732">return</span>&nbsp;<span class="builtintype" id="5103739">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103751">if</span>&nbsp;<span class="ident" id="5103754">id</span><span class="op" id="5103756">,</span>&nbsp;<span class="ident" id="5103758">ok</span>&nbsp;<span class="op" id="5103761">:=</span>&nbsp;<span class="ident" id="5103764">n</span><span class="op" id="5103765">.</span><span class="op" id="5103766">(</span><span class="op" id="5103767">*</span><span class="ident" id="5103768">ast</span><span class="op" id="5103771">.</span><span class="ident" id="5103772">Ident</span><span class="op" id="5103777">)</span><span class="op" id="5103778">;</span>&nbsp;<span class="ident" id="5103780">ok</span>&nbsp;<span class="op" id="5103783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103788">if</span>&nbsp;<span class="ident" id="5103791">id</span><span class="op" id="5103793">.</span><span class="ident" id="5103794">Obj</span>&nbsp;<span class="op" id="5103798">==</span>&nbsp;<span class="builtintype" id="5103801">nil</span>&nbsp;<span class="op" id="5103805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103811">unresolved</span><span class="op" id="5103821">[</span><span class="ident" id="5103822">id</span><span class="op" id="5103824">.</span><span class="ident" id="5103825">Name</span><span class="op" id="5103829">]</span>&nbsp;<span class="op" id="5103831">=</span>&nbsp;<span class="builtintype" id="5103833">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103841">}</span>&nbsp;<span class="keyword" id="5103843">else</span>&nbsp;<span class="keyword" id="5103848">if</span>&nbsp;<span class="ident" id="5103851">topDecls</span><span class="op" id="5103859">[</span><span class="ident" id="5103860">id</span><span class="op" id="5103862">.</span><span class="ident" id="5103863">Obj</span><span class="op" id="5103866">]</span>&nbsp;<span class="op" id="5103868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103874">usesTopDecl</span>&nbsp;<span class="op" id="5103886">=</span>&nbsp;<span class="builtintype" id="5103888">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103904">return</span>&nbsp;<span class="builtintype" id="5103911">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5103917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5103920">ast</span><span class="op" id="5103923">.</span><span class="ident" id="5103924">Inspect</span><span class="op" id="5103931">(</span><span class="ident" id="5103932">body</span><span class="op" id="5103936">,</span>&nbsp;<span class="ident" id="5103938">inspectFunc</span><span class="op" id="5103949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5103952">if</span>&nbsp;<span class="ident" id="5103955">usesTopDecl</span>&nbsp;<span class="op" id="5103967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5103971">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104037">return</span>&nbsp;<span class="builtintype" id="5104044">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104053">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104110">for</span>&nbsp;<span class="ident" id="5104114">n</span>&nbsp;<span class="op" id="5104116">:=</span>&nbsp;<span class="keyword" id="5104119">range</span>&nbsp;<span class="ident" id="5104125">unresolved</span>&nbsp;<span class="op" id="5104136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104140">if</span>&nbsp;<span class="ident" id="5104143">predeclaredTypes</span><span class="op" id="5104159">[</span><span class="ident" id="5104160">n</span><span class="op" id="5104161">]</span>&nbsp;<span class="op" id="5104163">||</span>&nbsp;<span class="ident" id="5104166">predeclaredConstants</span><span class="op" id="5104186">[</span><span class="ident" id="5104187">n</span><span class="op" id="5104188">]</span>&nbsp;<span class="op" id="5104190">||</span>&nbsp;<span class="ident" id="5104193">predeclaredFuncs</span><span class="op" id="5104209">[</span><span class="ident" id="5104210">n</span><span class="op" id="5104211">]</span>&nbsp;<span class="op" id="5104213">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5104218">delete</span><span class="op" id="5104224">(</span><span class="ident" id="5104225">unresolved</span><span class="op" id="5104235">,</span>&nbsp;<span class="ident" id="5104237">n</span><span class="op" id="5104238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104249">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104318">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104385">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104461">namedImports</span>&nbsp;<span class="op" id="5104474">:=</span>&nbsp;<span class="builtinfunc" id="5104477">make</span><span class="op" id="5104481">(</span><span class="keyword" id="5104482">map</span><span class="op" id="5104485">[</span><span class="builtintype" id="5104486">string</span><span class="op" id="5104492">]</span><span class="builtintype" id="5104493">string</span><span class="op" id="5104499">)</span>&nbsp;<span class="comment" id="5104501">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104516">var</span>&nbsp;<span class="ident" id="5104520">blankImports</span>&nbsp;<span class="op" id="5104533">[</span><span class="op" id="5104534">]</span><span class="ident" id="5104535">ast</span><span class="op" id="5104538">.</span><span class="ident" id="5104539">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104556">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104570">for</span>&nbsp;<span class="ident" id="5104574">_</span><span class="op" id="5104575">,</span>&nbsp;<span class="ident" id="5104577">s</span>&nbsp;<span class="op" id="5104579">:=</span>&nbsp;<span class="keyword" id="5104582">range</span>&nbsp;<span class="ident" id="5104588">file</span><span class="op" id="5104592">.</span><span class="ident" id="5104593">Imports</span>&nbsp;<span class="op" id="5104601">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104605">p</span><span class="op" id="5104606">,</span>&nbsp;<span class="ident" id="5104608">err</span>&nbsp;<span class="op" id="5104612">:=</span>&nbsp;<span class="ident" id="5104615">strconv</span><span class="op" id="5104622">.</span><span class="ident" id="5104623">Unquote</span><span class="op" id="5104630">(</span><span class="ident" id="5104631">s</span><span class="op" id="5104632">.</span><span class="ident" id="5104633">Path</span><span class="op" id="5104637">.</span><span class="ident" id="5104638">Value</span><span class="op" id="5104643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104647">if</span>&nbsp;<span class="ident" id="5104650">err</span>&nbsp;<span class="op" id="5104654">!=</span>&nbsp;<span class="builtintype" id="5104657">nil</span>&nbsp;<span class="op" id="5104661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104666">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104681">n</span>&nbsp;<span class="op" id="5104683">:=</span>&nbsp;<span class="ident" id="5104686">path</span><span class="op" id="5104690">.</span><span class="ident" id="5104691">Base</span><span class="op" id="5104695">(</span><span class="ident" id="5104696">p</span><span class="op" id="5104697">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104701">if</span>&nbsp;<span class="ident" id="5104704">s</span><span class="op" id="5104705">.</span><span class="ident" id="5104706">Name</span>&nbsp;<span class="op" id="5104711">!=</span>&nbsp;<span class="builtintype" id="5104714">nil</span>&nbsp;<span class="op" id="5104718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104723">n</span>&nbsp;<span class="op" id="5104725">=</span>&nbsp;<span class="ident" id="5104727">s</span><span class="op" id="5104728">.</span><span class="ident" id="5104729">Name</span><span class="op" id="5104733">.</span><span class="ident" id="5104734">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104742">switch</span>&nbsp;<span class="ident" id="5104749">n</span>&nbsp;<span class="op" id="5104751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104756">case</span>&nbsp;<span class="string" id="5104761">&#34;_&#34;</span><span class="op" id="5104764">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104770">blankImports</span>&nbsp;<span class="op" id="5104783">=</span>&nbsp;<span class="builtinfunc" id="5104785">append</span><span class="op" id="5104791">(</span><span class="ident" id="5104792">blankImports</span><span class="op" id="5104804">,</span>&nbsp;<span class="ident" id="5104806">s</span><span class="op" id="5104807">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104813">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104825">case</span>&nbsp;<span class="string" id="5104830">&#34;.&#34;</span><span class="op" id="5104833">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104839">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104882">return</span>&nbsp;<span class="builtintype" id="5104889">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104896">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5104904">if</span>&nbsp;<span class="ident" id="5104907">unresolved</span><span class="op" id="5104917">[</span><span class="ident" id="5104918">n</span><span class="op" id="5104919">]</span>&nbsp;<span class="op" id="5104921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5104926">namedImports</span><span class="op" id="5104938">[</span><span class="ident" id="5104939">n</span><span class="op" id="5104940">]</span>&nbsp;<span class="op" id="5104942">=</span>&nbsp;<span class="ident" id="5104944">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5104949">delete</span><span class="op" id="5104955">(</span><span class="ident" id="5104956">unresolved</span><span class="op" id="5104966">,</span>&nbsp;<span class="ident" id="5104968">n</span><span class="op" id="5104969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104973">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5104976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5104980">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5105048">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105092">if</span>&nbsp;<span class="builtinfunc" id="5105095">len</span><span class="op" id="5105098">(</span><span class="ident" id="5105099">unresolved</span><span class="op" id="5105109">)</span>&nbsp;<span class="op" id="5105111">&gt;</span>&nbsp;<span class="num" id="5105113">0</span>&nbsp;<span class="op" id="5105115">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105119">return</span>&nbsp;<span class="builtintype" id="5105126">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5105135">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105189">var</span>&nbsp;<span class="ident" id="5105193">comments</span>&nbsp;<span class="op" id="5105202">[</span><span class="op" id="5105203">]</span><span class="op" id="5105204">*</span><span class="ident" id="5105205">ast</span><span class="op" id="5105208">.</span><span class="ident" id="5105209">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105223">for</span>&nbsp;<span class="ident" id="5105227">_</span><span class="op" id="5105228">,</span>&nbsp;<span class="ident" id="5105230">s</span>&nbsp;<span class="op" id="5105232">:=</span>&nbsp;<span class="keyword" id="5105235">range</span>&nbsp;<span class="ident" id="5105241">blankImports</span>&nbsp;<span class="op" id="5105254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105258">if</span>&nbsp;<span class="ident" id="5105261">c</span>&nbsp;<span class="op" id="5105263">:=</span>&nbsp;<span class="ident" id="5105266">s</span><span class="op" id="5105267">.</span><span class="op" id="5105268">(</span><span class="op" id="5105269">*</span><span class="ident" id="5105270">ast</span><span class="op" id="5105273">.</span><span class="ident" id="5105274">ImportSpec</span><span class="op" id="5105284">)</span><span class="op" id="5105285">.</span><span class="ident" id="5105286">Doc</span><span class="op" id="5105289">;</span>&nbsp;<span class="ident" id="5105291">c</span>&nbsp;<span class="op" id="5105293">!=</span>&nbsp;<span class="builtintype" id="5105296">nil</span>&nbsp;<span class="op" id="5105300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105305">comments</span>&nbsp;<span class="op" id="5105314">=</span>&nbsp;<span class="builtinfunc" id="5105316">append</span><span class="op" id="5105322">(</span><span class="ident" id="5105323">comments</span><span class="op" id="5105331">,</span>&nbsp;<span class="ident" id="5105333">c</span><span class="op" id="5105334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105341">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5105345">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105401">for</span>&nbsp;<span class="ident" id="5105405">_</span><span class="op" id="5105406">,</span>&nbsp;<span class="ident" id="5105408">c</span>&nbsp;<span class="op" id="5105410">:=</span>&nbsp;<span class="keyword" id="5105413">range</span>&nbsp;<span class="ident" id="5105419">file</span><span class="op" id="5105423">.</span><span class="ident" id="5105424">Comments</span>&nbsp;<span class="op" id="5105433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105437">if</span>&nbsp;<span class="ident" id="5105440">body</span><span class="op" id="5105444">.</span><span class="ident" id="5105445">Pos</span><span class="op" id="5105448">(</span><span class="op" id="5105449">)</span>&nbsp;<span class="op" id="5105451">&lt;=</span>&nbsp;<span class="ident" id="5105454">c</span><span class="op" id="5105455">.</span><span class="ident" id="5105456">Pos</span><span class="op" id="5105459">(</span><span class="op" id="5105460">)</span>&nbsp;<span class="op" id="5105462">&amp;&amp;</span>&nbsp;<span class="ident" id="5105465">c</span><span class="op" id="5105466">.</span><span class="ident" id="5105467">End</span><span class="op" id="5105470">(</span><span class="op" id="5105471">)</span>&nbsp;<span class="op" id="5105473">&lt;=</span>&nbsp;<span class="ident" id="5105476">body</span><span class="op" id="5105480">.</span><span class="ident" id="5105481">End</span><span class="op" id="5105484">(</span><span class="op" id="5105485">)</span>&nbsp;<span class="op" id="5105487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105492">comments</span>&nbsp;<span class="op" id="5105501">=</span>&nbsp;<span class="builtinfunc" id="5105503">append</span><span class="op" id="5105509">(</span><span class="ident" id="5105510">comments</span><span class="op" id="5105518">,</span>&nbsp;<span class="ident" id="5105520">c</span><span class="op" id="5105521">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5105532">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105590">body</span><span class="op" id="5105594">,</span>&nbsp;<span class="ident" id="5105596">comments</span>&nbsp;<span class="op" id="5105605">=</span>&nbsp;<span class="ident" id="5105607">stripOutputComment</span><span class="op" id="5105625">(</span><span class="ident" id="5105626">body</span><span class="op" id="5105630">,</span>&nbsp;<span class="ident" id="5105632">comments</span><span class="op" id="5105640">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5105644">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105679">importDecl</span>&nbsp;<span class="op" id="5105690">:=</span>&nbsp;<span class="op" id="5105693">&amp;</span><span class="ident" id="5105694">ast</span><span class="op" id="5105697">.</span><span class="ident" id="5105698">GenDecl</span><span class="op" id="5105705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105709">Tok</span><span class="op" id="5105712">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105717">token</span><span class="op" id="5105722">.</span><span class="ident" id="5105723">IMPORT</span><span class="op" id="5105729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105733">Lparen</span><span class="op" id="5105739">:</span>&nbsp;<span class="num" id="5105741">1</span><span class="op" id="5105742">,</span>&nbsp;<span class="comment" id="5105744">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105797">Rparen</span><span class="op" id="5105803">:</span>&nbsp;<span class="num" id="5105805">1</span><span class="op" id="5105806">,</span>&nbsp;<span class="comment" id="5105808">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5105846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105849">for</span>&nbsp;<span class="ident" id="5105853">n</span><span class="op" id="5105854">,</span>&nbsp;<span class="ident" id="5105856">p</span>&nbsp;<span class="op" id="5105858">:=</span>&nbsp;<span class="keyword" id="5105861">range</span>&nbsp;<span class="ident" id="5105867">namedImports</span>&nbsp;<span class="op" id="5105880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105884">s</span>&nbsp;<span class="op" id="5105886">:=</span>&nbsp;<span class="op" id="5105889">&amp;</span><span class="ident" id="5105890">ast</span><span class="op" id="5105893">.</span><span class="ident" id="5105894">ImportSpec</span><span class="op" id="5105904">{</span><span class="ident" id="5105905">Path</span><span class="op" id="5105909">:</span>&nbsp;<span class="op" id="5105911">&amp;</span><span class="ident" id="5105912">ast</span><span class="op" id="5105915">.</span><span class="ident" id="5105916">BasicLit</span><span class="op" id="5105924">{</span><span class="ident" id="5105925">Value</span><span class="op" id="5105930">:</span>&nbsp;<span class="ident" id="5105932">strconv</span><span class="op" id="5105939">.</span><span class="ident" id="5105940">Quote</span><span class="op" id="5105945">(</span><span class="ident" id="5105946">p</span><span class="op" id="5105947">)</span><span class="op" id="5105948">}</span><span class="op" id="5105949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5105953">if</span>&nbsp;<span class="ident" id="5105956">path</span><span class="op" id="5105960">.</span><span class="ident" id="5105961">Base</span><span class="op" id="5105965">(</span><span class="ident" id="5105966">p</span><span class="op" id="5105967">)</span>&nbsp;<span class="op" id="5105969">!=</span>&nbsp;<span class="ident" id="5105972">n</span>&nbsp;<span class="op" id="5105974">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5105979">s</span><span class="op" id="5105980">.</span><span class="ident" id="5105981">Name</span>&nbsp;<span class="op" id="5105986">=</span>&nbsp;<span class="ident" id="5105988">ast</span><span class="op" id="5105991">.</span><span class="ident" id="5105992">NewIdent</span><span class="op" id="5106000">(</span><span class="ident" id="5106001">n</span><span class="op" id="5106002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106010">importDecl</span><span class="op" id="5106020">.</span><span class="ident" id="5106021">Specs</span>&nbsp;<span class="op" id="5106027">=</span>&nbsp;<span class="builtinfunc" id="5106029">append</span><span class="op" id="5106035">(</span><span class="ident" id="5106036">importDecl</span><span class="op" id="5106046">.</span><span class="ident" id="5106047">Specs</span><span class="op" id="5106052">,</span>&nbsp;<span class="ident" id="5106054">s</span><span class="op" id="5106055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106061">importDecl</span><span class="op" id="5106071">.</span><span class="ident" id="5106072">Specs</span>&nbsp;<span class="op" id="5106078">=</span>&nbsp;<span class="builtinfunc" id="5106080">append</span><span class="op" id="5106086">(</span><span class="ident" id="5106087">importDecl</span><span class="op" id="5106097">.</span><span class="ident" id="5106098">Specs</span><span class="op" id="5106103">,</span>&nbsp;<span class="ident" id="5106105">blankImports</span><span class="op" id="5106117">...</span><span class="op" id="5106120">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5106124">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106154">funcDecl</span>&nbsp;<span class="op" id="5106163">:=</span>&nbsp;<span class="op" id="5106166">&amp;</span><span class="ident" id="5106167">ast</span><span class="op" id="5106170">.</span><span class="ident" id="5106171">FuncDecl</span><span class="op" id="5106179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106183">Name</span><span class="op" id="5106187">:</span>&nbsp;<span class="ident" id="5106189">ast</span><span class="op" id="5106192">.</span><span class="ident" id="5106193">NewIdent</span><span class="op" id="5106201">(</span><span class="string" id="5106202">&#34;main&#34;</span><span class="op" id="5106208">)</span><span class="op" id="5106209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106213">Type</span><span class="op" id="5106217">:</span>&nbsp;<span class="op" id="5106219">&amp;</span><span class="ident" id="5106220">ast</span><span class="op" id="5106223">.</span><span class="ident" id="5106224">FuncType</span><span class="op" id="5106232">{</span><span class="ident" id="5106233">Params</span><span class="op" id="5106239">:</span>&nbsp;<span class="op" id="5106241">&amp;</span><span class="ident" id="5106242">ast</span><span class="op" id="5106245">.</span><span class="ident" id="5106246">FieldList</span><span class="op" id="5106255">{</span><span class="op" id="5106256">}</span><span class="op" id="5106257">}</span><span class="op" id="5106258">,</span>&nbsp;<span class="comment" id="5106260">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106297">Body</span><span class="op" id="5106301">:</span>&nbsp;<span class="ident" id="5106303">body</span><span class="op" id="5106307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5106314">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5106335">return</span>&nbsp;<span class="op" id="5106342">&amp;</span><span class="ident" id="5106343">ast</span><span class="op" id="5106346">.</span><span class="ident" id="5106347">File</span><span class="op" id="5106351">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106355">Name</span><span class="op" id="5106359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106365">ast</span><span class="op" id="5106368">.</span><span class="ident" id="5106369">NewIdent</span><span class="op" id="5106377">(</span><span class="string" id="5106378">&#34;main&#34;</span><span class="op" id="5106384">)</span><span class="op" id="5106385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106389">Decls</span><span class="op" id="5106394">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106399">[</span><span class="op" id="5106400">]</span><span class="ident" id="5106401">ast</span><span class="op" id="5106404">.</span><span class="ident" id="5106405">Decl</span><span class="op" id="5106409">{</span><span class="ident" id="5106410">importDecl</span><span class="op" id="5106420">,</span>&nbsp;<span class="ident" id="5106422">funcDecl</span><span class="op" id="5106430">}</span><span class="op" id="5106431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106435">Comments</span><span class="op" id="5106443">:</span>&nbsp;<span class="ident" id="5106445">comments</span><span class="op" id="5106453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106456">}</span><br>
<span class="lineno"></span><span class="op" id="5106458">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5106461">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="5106539">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5106598">func</span>&nbsp;<span class="ident" id="5106603">playExampleFile</span><span class="op" id="5106618">(</span><span class="ident" id="5106619">file</span>&nbsp;<span class="op" id="5106624">*</span><span class="ident" id="5106625">ast</span><span class="op" id="5106628">.</span><span class="ident" id="5106629">File</span><span class="op" id="5106633">)</span>&nbsp;<span class="op" id="5106635">*</span><span class="ident" id="5106636">ast</span><span class="op" id="5106639">.</span><span class="ident" id="5106640">File</span>&nbsp;<span class="op" id="5106645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5106648">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106688">comments</span>&nbsp;<span class="op" id="5106697">:=</span>&nbsp;<span class="ident" id="5106700">file</span><span class="op" id="5106704">.</span><span class="ident" id="5106705">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5106715">if</span>&nbsp;<span class="builtinfunc" id="5106718">len</span><span class="op" id="5106721">(</span><span class="ident" id="5106722">comments</span><span class="op" id="5106730">)</span>&nbsp;<span class="op" id="5106732">&gt;</span>&nbsp;<span class="num" id="5106734">0</span>&nbsp;<span class="op" id="5106736">&amp;&amp;</span>&nbsp;<span class="ident" id="5106739">strings</span><span class="op" id="5106746">.</span><span class="ident" id="5106747">HasPrefix</span><span class="op" id="5106756">(</span><span class="ident" id="5106757">comments</span><span class="op" id="5106765">[</span><span class="num" id="5106766">0</span><span class="op" id="5106767">]</span><span class="op" id="5106768">.</span><span class="ident" id="5106769">Text</span><span class="op" id="5106773">(</span><span class="op" id="5106774">)</span><span class="op" id="5106775">,</span>&nbsp;<span class="string" id="5106777">&#34;Copyright&#34;</span><span class="op" id="5106788">)</span>&nbsp;<span class="op" id="5106790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5106794">comments</span>&nbsp;<span class="op" id="5106803">=</span>&nbsp;<span class="ident" id="5106805">comments</span><span class="op" id="5106813">[</span><span class="num" id="5106814">1</span><span class="op" id="5106815">:</span><span class="op" id="5106816">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5106819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5106823">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5106892">var</span>&nbsp;<span class="ident" id="5106896">decls</span>&nbsp;<span class="op" id="5106902">[</span><span class="op" id="5106903">]</span><span class="ident" id="5106904">ast</span><span class="op" id="5106907">.</span><span class="ident" id="5106908">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5106914">for</span>&nbsp;<span class="ident" id="5106918">_</span><span class="op" id="5106919">,</span>&nbsp;<span class="ident" id="5106921">d</span>&nbsp;<span class="op" id="5106923">:=</span>&nbsp;<span class="keyword" id="5106926">range</span>&nbsp;<span class="ident" id="5106932">file</span><span class="op" id="5106936">.</span><span class="ident" id="5106937">Decls</span>&nbsp;<span class="op" id="5106943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5106947">if</span>&nbsp;<span class="ident" id="5106950">f</span><span class="op" id="5106951">,</span>&nbsp;<span class="ident" id="5106953">ok</span>&nbsp;<span class="op" id="5106956">:=</span>&nbsp;<span class="ident" id="5106959">d</span><span class="op" id="5106960">.</span><span class="op" id="5106961">(</span><span class="op" id="5106962">*</span><span class="ident" id="5106963">ast</span><span class="op" id="5106966">.</span><span class="ident" id="5106967">FuncDecl</span><span class="op" id="5106975">)</span><span class="op" id="5106976">;</span>&nbsp;<span class="ident" id="5106978">ok</span>&nbsp;<span class="op" id="5106981">&amp;&amp;</span>&nbsp;<span class="ident" id="5106984">isTest</span><span class="op" id="5106990">(</span><span class="ident" id="5106991">f</span><span class="op" id="5106992">.</span><span class="ident" id="5106993">Name</span><span class="op" id="5106997">.</span><span class="ident" id="5106998">Name</span><span class="op" id="5107002">,</span>&nbsp;<span class="string" id="5107004">&#34;Example&#34;</span><span class="op" id="5107013">)</span>&nbsp;<span class="op" id="5107015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5107020">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107074">newF</span>&nbsp;<span class="op" id="5107079">:=</span>&nbsp;<span class="op" id="5107082">*</span><span class="ident" id="5107083">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107088">newF</span><span class="op" id="5107092">.</span><span class="ident" id="5107093">Name</span>&nbsp;<span class="op" id="5107098">=</span>&nbsp;<span class="ident" id="5107100">ast</span><span class="op" id="5107103">.</span><span class="ident" id="5107104">NewIdent</span><span class="op" id="5107112">(</span><span class="string" id="5107113">&#34;main&#34;</span><span class="op" id="5107119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107124">newF</span><span class="op" id="5107128">.</span><span class="ident" id="5107129">Body</span><span class="op" id="5107133">,</span>&nbsp;<span class="ident" id="5107135">comments</span>&nbsp;<span class="op" id="5107144">=</span>&nbsp;<span class="ident" id="5107146">stripOutputComment</span><span class="op" id="5107164">(</span><span class="ident" id="5107165">f</span><span class="op" id="5107166">.</span><span class="ident" id="5107167">Body</span><span class="op" id="5107171">,</span>&nbsp;<span class="ident" id="5107173">comments</span><span class="op" id="5107181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107186">d</span>&nbsp;<span class="op" id="5107188">=</span>&nbsp;<span class="op" id="5107190">&amp;</span><span class="ident" id="5107191">newF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5107198">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107202">decls</span>&nbsp;<span class="op" id="5107208">=</span>&nbsp;<span class="builtinfunc" id="5107210">append</span><span class="op" id="5107216">(</span><span class="ident" id="5107217">decls</span><span class="op" id="5107222">,</span>&nbsp;<span class="ident" id="5107224">d</span><span class="op" id="5107225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5107228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5107232">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107280">f</span>&nbsp;<span class="op" id="5107282">:=</span>&nbsp;<span class="op" id="5107285">*</span><span class="ident" id="5107286">file</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107292">f</span><span class="op" id="5107293">.</span><span class="ident" id="5107294">Name</span>&nbsp;<span class="op" id="5107299">=</span>&nbsp;<span class="ident" id="5107301">ast</span><span class="op" id="5107304">.</span><span class="ident" id="5107305">NewIdent</span><span class="op" id="5107313">(</span><span class="string" id="5107314">&#34;main&#34;</span><span class="op" id="5107320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107323">f</span><span class="op" id="5107324">.</span><span class="ident" id="5107325">Decls</span>&nbsp;<span class="op" id="5107331">=</span>&nbsp;<span class="ident" id="5107333">decls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107340">f</span><span class="op" id="5107341">.</span><span class="ident" id="5107342">Comments</span>&nbsp;<span class="op" id="5107351">=</span>&nbsp;<span class="ident" id="5107353">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5107363">return</span>&nbsp;<span class="op" id="5107370">&amp;</span><span class="ident" id="5107371">f</span><br>
<span class="lineno"></span><span class="op" id="5107373">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5107376">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="5107447">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="5107507">func</span>&nbsp;<span class="ident" id="5107512">stripOutputComment</span><span class="op" id="5107530">(</span><span class="ident" id="5107531">body</span>&nbsp;<span class="op" id="5107536">*</span><span class="ident" id="5107537">ast</span><span class="op" id="5107540">.</span><span class="ident" id="5107541">BlockStmt</span><span class="op" id="5107550">,</span>&nbsp;<span class="ident" id="5107552">comments</span>&nbsp;<span class="op" id="5107561">[</span><span class="op" id="5107562">]</span><span class="op" id="5107563">*</span><span class="ident" id="5107564">ast</span><span class="op" id="5107567">.</span><span class="ident" id="5107568">CommentGroup</span><span class="op" id="5107580">)</span>&nbsp;<span class="op" id="5107582">(</span><span class="op" id="5107583">*</span><span class="ident" id="5107584">ast</span><span class="op" id="5107587">.</span><span class="ident" id="5107588">BlockStmt</span><span class="op" id="5107597">,</span>&nbsp;<span class="op" id="5107599">[</span><span class="op" id="5107600">]</span><span class="op" id="5107601">*</span><span class="ident" id="5107602">ast</span><span class="op" id="5107605">.</span><span class="ident" id="5107606">CommentGroup</span><span class="op" id="5107618">)</span>&nbsp;<span class="op" id="5107620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5107623">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107669">i</span><span class="op" id="5107670">,</span>&nbsp;<span class="ident" id="5107672">last</span>&nbsp;<span class="op" id="5107677">:=</span>&nbsp;<span class="ident" id="5107680">lastComment</span><span class="op" id="5107691">(</span><span class="ident" id="5107692">body</span><span class="op" id="5107696">,</span>&nbsp;<span class="ident" id="5107698">comments</span><span class="op" id="5107706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5107709">if</span>&nbsp;<span class="ident" id="5107712">last</span>&nbsp;<span class="op" id="5107717">==</span>&nbsp;<span class="builtintype" id="5107720">nil</span>&nbsp;<span class="op" id="5107724">||</span>&nbsp;<span class="op" id="5107727">!</span><span class="ident" id="5107728">outputPrefix</span><span class="op" id="5107740">.</span><span class="ident" id="5107741">MatchString</span><span class="op" id="5107752">(</span><span class="ident" id="5107753">last</span><span class="op" id="5107757">.</span><span class="ident" id="5107758">Text</span><span class="op" id="5107762">(</span><span class="op" id="5107763">)</span><span class="op" id="5107764">)</span>&nbsp;<span class="op" id="5107766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5107770">return</span>&nbsp;<span class="ident" id="5107777">body</span><span class="op" id="5107781">,</span>&nbsp;<span class="ident" id="5107783">comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5107793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5107797">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107865">newBody</span>&nbsp;<span class="op" id="5107873">:=</span>&nbsp;<span class="op" id="5107876">&amp;</span><span class="ident" id="5107877">ast</span><span class="op" id="5107880">.</span><span class="ident" id="5107881">BlockStmt</span><span class="op" id="5107890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107894">Lbrace</span><span class="op" id="5107900">:</span>&nbsp;<span class="ident" id="5107902">body</span><span class="op" id="5107906">.</span><span class="ident" id="5107907">Lbrace</span><span class="op" id="5107913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107917">List</span><span class="op" id="5107921">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5107925">body</span><span class="op" id="5107929">.</span><span class="ident" id="5107930">List</span><span class="op" id="5107934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107938">Rbrace</span><span class="op" id="5107944">:</span>&nbsp;<span class="ident" id="5107946">last</span><span class="op" id="5107950">.</span><span class="ident" id="5107951">Pos</span><span class="op" id="5107954">(</span><span class="op" id="5107955">)</span><span class="op" id="5107956">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5107959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5107962">newComments</span>&nbsp;<span class="op" id="5107974">:=</span>&nbsp;<span class="builtinfunc" id="5107977">make</span><span class="op" id="5107981">(</span><span class="op" id="5107982">[</span><span class="op" id="5107983">]</span><span class="op" id="5107984">*</span><span class="ident" id="5107985">ast</span><span class="op" id="5107988">.</span><span class="ident" id="5107989">CommentGroup</span><span class="op" id="5108001">,</span>&nbsp;<span class="builtinfunc" id="5108003">len</span><span class="op" id="5108006">(</span><span class="ident" id="5108007">comments</span><span class="op" id="5108015">)</span><span class="op" id="5108016">-</span><span class="num" id="5108017">1</span><span class="op" id="5108018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5108021">copy</span><span class="op" id="5108025">(</span><span class="ident" id="5108026">newComments</span><span class="op" id="5108037">,</span>&nbsp;<span class="ident" id="5108039">comments</span><span class="op" id="5108047">[</span><span class="op" id="5108048">:</span><span class="ident" id="5108049">i</span><span class="op" id="5108050">]</span><span class="op" id="5108051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5108054">copy</span><span class="op" id="5108058">(</span><span class="ident" id="5108059">newComments</span><span class="op" id="5108070">[</span><span class="ident" id="5108071">i</span><span class="op" id="5108072">:</span><span class="op" id="5108073">]</span><span class="op" id="5108074">,</span>&nbsp;<span class="ident" id="5108076">comments</span><span class="op" id="5108084">[</span><span class="ident" id="5108085">i</span><span class="op" id="5108086">+</span><span class="num" id="5108087">1</span><span class="op" id="5108088">:</span><span class="op" id="5108089">]</span><span class="op" id="5108090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108093">return</span>&nbsp;<span class="ident" id="5108100">newBody</span><span class="op" id="5108107">,</span>&nbsp;<span class="ident" id="5108109">newComments</span><br>
<span class="lineno">340</span><span class="op" id="5108121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5108124">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="5108191">func</span>&nbsp;<span class="ident" id="5108196">lastComment</span><span class="op" id="5108207">(</span><span class="ident" id="5108208">b</span>&nbsp;<span class="op" id="5108210">*</span><span class="ident" id="5108211">ast</span><span class="op" id="5108214">.</span><span class="ident" id="5108215">BlockStmt</span><span class="op" id="5108224">,</span>&nbsp;<span class="ident" id="5108226">c</span>&nbsp;<span class="op" id="5108228">[</span><span class="op" id="5108229">]</span><span class="op" id="5108230">*</span><span class="ident" id="5108231">ast</span><span class="op" id="5108234">.</span><span class="ident" id="5108235">CommentGroup</span><span class="op" id="5108247">)</span>&nbsp;<span class="op" id="5108249">(</span><span class="ident" id="5108250">i</span>&nbsp;<span class="builtintype" id="5108252">int</span><span class="op" id="5108255">,</span>&nbsp;<span class="ident" id="5108257">last</span>&nbsp;<span class="op" id="5108262">*</span><span class="ident" id="5108263">ast</span><span class="op" id="5108266">.</span><span class="ident" id="5108267">CommentGroup</span><span class="op" id="5108279">)</span>&nbsp;<span class="op" id="5108281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5108284">pos</span><span class="op" id="5108287">,</span>&nbsp;<span class="ident" id="5108289">end</span>&nbsp;<span class="op" id="5108293">:=</span>&nbsp;<span class="ident" id="5108296">b</span><span class="op" id="5108297">.</span><span class="ident" id="5108298">Pos</span><span class="op" id="5108301">(</span><span class="op" id="5108302">)</span><span class="op" id="5108303">,</span>&nbsp;<span class="ident" id="5108305">b</span><span class="op" id="5108306">.</span><span class="ident" id="5108307">End</span><span class="op" id="5108310">(</span><span class="op" id="5108311">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108314">for</span>&nbsp;<span class="ident" id="5108318">j</span><span class="op" id="5108319">,</span>&nbsp;<span class="ident" id="5108321">cg</span>&nbsp;<span class="op" id="5108324">:=</span>&nbsp;<span class="keyword" id="5108327">range</span>&nbsp;<span class="ident" id="5108333">c</span>&nbsp;<span class="op" id="5108335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108339">if</span>&nbsp;<span class="ident" id="5108342">cg</span><span class="op" id="5108344">.</span><span class="ident" id="5108345">Pos</span><span class="op" id="5108348">(</span><span class="op" id="5108349">)</span>&nbsp;<span class="op" id="5108351">&lt;</span>&nbsp;<span class="ident" id="5108353">pos</span>&nbsp;<span class="op" id="5108357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108362">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5108373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108377">if</span>&nbsp;<span class="ident" id="5108380">cg</span><span class="op" id="5108382">.</span><span class="ident" id="5108383">End</span><span class="op" id="5108386">(</span><span class="op" id="5108387">)</span>&nbsp;<span class="op" id="5108389">&gt;</span>&nbsp;<span class="ident" id="5108391">end</span>&nbsp;<span class="op" id="5108395">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108400">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5108408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5108412">i</span><span class="op" id="5108413">,</span>&nbsp;<span class="ident" id="5108415">last</span>&nbsp;<span class="op" id="5108420">=</span>&nbsp;<span class="ident" id="5108422">j</span><span class="op" id="5108423">,</span>&nbsp;<span class="ident" id="5108425">cg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5108429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5108432">return</span><br>
<span class="lineno">355</span><span class="op" id="5108439">}</span>
</div>
</body>
</html>
