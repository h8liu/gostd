<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2188971">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2189026">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2189080">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2189131">package</span>&nbsp;<span class="ident" id="2189139">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2189148">import</span>&nbsp;<span class="string" id="2189155">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2189165">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2189237">var</span>&nbsp;<span class="ident" id="2189241">ErrRange</span>&nbsp;<span class="op" id="2189250">=</span>&nbsp;<span class="ident" id="2189252">errors</span><span class="op" id="2189258">.</span><span class="ident" id="2189259">New</span><span class="op" id="2189262">(</span><span class="string" id="2189263">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2189283">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2189286">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2189374">var</span>&nbsp;<span class="ident" id="2189378">ErrSyntax</span>&nbsp;<span class="op" id="2189388">=</span>&nbsp;<span class="ident" id="2189390">errors</span><span class="op" id="2189396">.</span><span class="ident" id="2189397">New</span><span class="op" id="2189400">(</span><span class="string" id="2189401">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2189417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2189420">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2189463">type</span>&nbsp;<span class="ident" id="2189468">NumError</span>&nbsp;<span class="keyword" id="2189477">struct</span>&nbsp;<span class="op" id="2189484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189487">Func</span>&nbsp;<span class="builtintype" id="2189492">string</span>&nbsp;<span class="comment" id="2189499">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189569">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2189574">string</span>&nbsp;<span class="comment" id="2189581">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2189595">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2189600">error</span>&nbsp;&nbsp;<span class="comment" id="2189607">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2189665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2189668">func</span>&nbsp;<span class="op" id="2189673">(</span><span class="ident" id="2189674">e</span>&nbsp;<span class="op" id="2189676">*</span><span class="ident" id="2189677">NumError</span><span class="op" id="2189685">)</span>&nbsp;<span class="ident" id="2189687">Error</span><span class="op" id="2189692">(</span><span class="op" id="2189693">)</span>&nbsp;<span class="builtintype" id="2189695">string</span>&nbsp;<span class="op" id="2189702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2189705">return</span>&nbsp;<span class="string" id="2189712">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2189723">+</span>&nbsp;<span class="ident" id="2189725">e</span><span class="op" id="2189726">.</span><span class="ident" id="2189727">Func</span>&nbsp;<span class="op" id="2189732">+</span>&nbsp;<span class="string" id="2189734">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2189739">+</span>&nbsp;<span class="string" id="2189741">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2189752">+</span>&nbsp;<span class="ident" id="2189754">Quote</span><span class="op" id="2189759">(</span><span class="ident" id="2189760">e</span><span class="op" id="2189761">.</span><span class="ident" id="2189762">Num</span><span class="op" id="2189765">)</span>&nbsp;<span class="op" id="2189767">+</span>&nbsp;<span class="string" id="2189769">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2189774">+</span>&nbsp;<span class="ident" id="2189776">e</span><span class="op" id="2189777">.</span><span class="ident" id="2189778">Err</span><span class="op" id="2189781">.</span><span class="ident" id="2189782">Error</span><span class="op" id="2189787">(</span><span class="op" id="2189788">)</span><br>
<span class="lineno"></span><span class="op" id="2189790">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2189793">func</span>&nbsp;<span class="ident" id="2189798">syntaxError</span><span class="op" id="2189809">(</span><span class="ident" id="2189810">fn</span><span class="op" id="2189812">,</span>&nbsp;<span class="ident" id="2189814">str</span>&nbsp;<span class="builtintype" id="2189818">string</span><span class="op" id="2189824">)</span>&nbsp;<span class="op" id="2189826">*</span><span class="ident" id="2189827">NumError</span>&nbsp;<span class="op" id="2189836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2189839">return</span>&nbsp;<span class="op" id="2189846">&amp;</span><span class="ident" id="2189847">NumError</span><span class="op" id="2189855">{</span><span class="ident" id="2189856">fn</span><span class="op" id="2189858">,</span>&nbsp;<span class="ident" id="2189860">str</span><span class="op" id="2189863">,</span>&nbsp;<span class="ident" id="2189865">ErrSyntax</span><span class="op" id="2189874">}</span><br>
<span class="lineno"></span><span class="op" id="2189876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2189879">func</span>&nbsp;<span class="ident" id="2189884">rangeError</span><span class="op" id="2189894">(</span><span class="ident" id="2189895">fn</span><span class="op" id="2189897">,</span>&nbsp;<span class="ident" id="2189899">str</span>&nbsp;<span class="builtintype" id="2189903">string</span><span class="op" id="2189909">)</span>&nbsp;<span class="op" id="2189911">*</span><span class="ident" id="2189912">NumError</span>&nbsp;<span class="op" id="2189921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2189924">return</span>&nbsp;<span class="op" id="2189931">&amp;</span><span class="ident" id="2189932">NumError</span><span class="op" id="2189940">{</span><span class="ident" id="2189941">fn</span><span class="op" id="2189943">,</span>&nbsp;<span class="ident" id="2189945">str</span><span class="op" id="2189948">,</span>&nbsp;<span class="ident" id="2189950">ErrRange</span><span class="op" id="2189958">}</span><br>
<span class="lineno"></span><span class="op" id="2189960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2189963">const</span>&nbsp;<span class="ident" id="2189969">intSize</span>&nbsp;<span class="op" id="2189977">=</span>&nbsp;<span class="num" id="2189979">32</span>&nbsp;<span class="op" id="2189982">&lt;&lt;</span>&nbsp;<span class="op" id="2189985">(</span><span class="op" id="2189986">^</span><span class="builtintype" id="2189987">uint</span><span class="op" id="2189991">(</span><span class="num" id="2189992">0</span><span class="op" id="2189993">)</span>&nbsp;<span class="op" id="2189995">&gt;&gt;</span>&nbsp;<span class="num" id="2189998">63</span><span class="op" id="2190000">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2190003">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2190059">const</span>&nbsp;<span class="ident" id="2190065">IntSize</span>&nbsp;<span class="op" id="2190073">=</span>&nbsp;<span class="ident" id="2190075">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2190084">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2190140">func</span>&nbsp;<span class="ident" id="2190145">cutoff64</span><span class="op" id="2190153">(</span><span class="ident" id="2190154">base</span>&nbsp;<span class="builtintype" id="2190159">int</span><span class="op" id="2190162">)</span>&nbsp;<span class="ident" id="2190164">uint64</span>&nbsp;<span class="op" id="2190171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190174">if</span>&nbsp;<span class="ident" id="2190177">base</span>&nbsp;<span class="op" id="2190182">&lt;</span>&nbsp;<span class="num" id="2190184">2</span>&nbsp;<span class="op" id="2190186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190190">return</span>&nbsp;<span class="num" id="2190197">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190203">return</span>&nbsp;<span class="op" id="2190210">(</span><span class="num" id="2190211">1</span><span class="op" id="2190212">&lt;&lt;</span><span class="num" id="2190214">64</span><span class="op" id="2190216">-</span><span class="num" id="2190217">1</span><span class="op" id="2190218">)</span><span class="op" id="2190219">/</span><span class="ident" id="2190220">uint64</span><span class="op" id="2190226">(</span><span class="ident" id="2190227">base</span><span class="op" id="2190231">)</span>&nbsp;<span class="op" id="2190233">+</span>&nbsp;<span class="num" id="2190235">1</span><br>
<span class="lineno">45</span><span class="op" id="2190237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2190240">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2190296">func</span>&nbsp;<span class="ident" id="2190301">ParseUint</span><span class="op" id="2190310">(</span><span class="ident" id="2190311">s</span>&nbsp;<span class="builtintype" id="2190313">string</span><span class="op" id="2190319">,</span>&nbsp;<span class="ident" id="2190321">base</span>&nbsp;<span class="builtintype" id="2190326">int</span><span class="op" id="2190329">,</span>&nbsp;<span class="ident" id="2190331">bitSize</span>&nbsp;<span class="builtintype" id="2190339">int</span><span class="op" id="2190342">)</span>&nbsp;<span class="op" id="2190344">(</span><span class="ident" id="2190345">n</span>&nbsp;<span class="ident" id="2190347">uint64</span><span class="op" id="2190353">,</span>&nbsp;<span class="ident" id="2190355">err</span>&nbsp;<span class="builtintype" id="2190359">error</span><span class="op" id="2190364">)</span>&nbsp;<span class="op" id="2190366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190369">var</span>&nbsp;<span class="ident" id="2190373">cutoff</span><span class="op" id="2190379">,</span>&nbsp;<span class="ident" id="2190381">maxVal</span>&nbsp;<span class="ident" id="2190388">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190397">if</span>&nbsp;<span class="ident" id="2190400">bitSize</span>&nbsp;<span class="op" id="2190408">==</span>&nbsp;<span class="num" id="2190411">0</span>&nbsp;<span class="op" id="2190413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190417">bitSize</span>&nbsp;<span class="op" id="2190425">=</span>&nbsp;<span class="builtintype" id="2190427">int</span><span class="op" id="2190430">(</span><span class="ident" id="2190431">IntSize</span><span class="op" id="2190438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190445">s0</span>&nbsp;<span class="op" id="2190448">:=</span>&nbsp;<span class="ident" id="2190451">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190454">switch</span>&nbsp;<span class="op" id="2190461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190464">case</span>&nbsp;<span class="builtinfunc" id="2190469">len</span><span class="op" id="2190472">(</span><span class="ident" id="2190473">s</span><span class="op" id="2190474">)</span>&nbsp;<span class="op" id="2190476">&lt;</span>&nbsp;<span class="num" id="2190478">1</span><span class="op" id="2190479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190483">err</span>&nbsp;<span class="op" id="2190487">=</span>&nbsp;<span class="ident" id="2190489">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190501">goto</span>&nbsp;<span class="ident" id="2190506">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190514">case</span>&nbsp;<span class="num" id="2190519">2</span>&nbsp;<span class="op" id="2190521">&lt;=</span>&nbsp;<span class="ident" id="2190524">base</span>&nbsp;<span class="op" id="2190529">&amp;&amp;</span>&nbsp;<span class="ident" id="2190532">base</span>&nbsp;<span class="op" id="2190537">&lt;=</span>&nbsp;<span class="num" id="2190540">36</span><span class="op" id="2190542">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2190546">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190577">case</span>&nbsp;<span class="ident" id="2190582">base</span>&nbsp;<span class="op" id="2190587">==</span>&nbsp;<span class="num" id="2190590">0</span><span class="op" id="2190591">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2190595">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190628">switch</span>&nbsp;<span class="op" id="2190635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190639">case</span>&nbsp;<span class="ident" id="2190644">s</span><span class="op" id="2190645">[</span><span class="num" id="2190646">0</span><span class="op" id="2190647">]</span>&nbsp;<span class="op" id="2190649">==</span>&nbsp;<span class="string" id="2190652">&#39;0&#39;</span>&nbsp;<span class="op" id="2190656">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2190659">len</span><span class="op" id="2190662">(</span><span class="ident" id="2190663">s</span><span class="op" id="2190664">)</span>&nbsp;<span class="op" id="2190666">&gt;</span>&nbsp;<span class="num" id="2190668">1</span>&nbsp;<span class="op" id="2190670">&amp;&amp;</span>&nbsp;<span class="op" id="2190673">(</span><span class="ident" id="2190674">s</span><span class="op" id="2190675">[</span><span class="num" id="2190676">1</span><span class="op" id="2190677">]</span>&nbsp;<span class="op" id="2190679">==</span>&nbsp;<span class="string" id="2190682">&#39;x&#39;</span>&nbsp;<span class="op" id="2190686">||</span>&nbsp;<span class="ident" id="2190689">s</span><span class="op" id="2190690">[</span><span class="num" id="2190691">1</span><span class="op" id="2190692">]</span>&nbsp;<span class="op" id="2190694">==</span>&nbsp;<span class="string" id="2190697">&#39;X&#39;</span><span class="op" id="2190700">)</span><span class="op" id="2190701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190706">base</span>&nbsp;<span class="op" id="2190711">=</span>&nbsp;<span class="num" id="2190713">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190719">s</span>&nbsp;<span class="op" id="2190721">=</span>&nbsp;<span class="ident" id="2190723">s</span><span class="op" id="2190724">[</span><span class="num" id="2190725">2</span><span class="op" id="2190726">:</span><span class="op" id="2190727">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190732">if</span>&nbsp;<span class="builtinfunc" id="2190735">len</span><span class="op" id="2190738">(</span><span class="ident" id="2190739">s</span><span class="op" id="2190740">)</span>&nbsp;<span class="op" id="2190742">&lt;</span>&nbsp;<span class="num" id="2190744">1</span>&nbsp;<span class="op" id="2190746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190752">err</span>&nbsp;<span class="op" id="2190756">=</span>&nbsp;<span class="ident" id="2190758">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190772">goto</span>&nbsp;<span class="ident" id="2190777">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190790">case</span>&nbsp;<span class="ident" id="2190795">s</span><span class="op" id="2190796">[</span><span class="num" id="2190797">0</span><span class="op" id="2190798">]</span>&nbsp;<span class="op" id="2190800">==</span>&nbsp;<span class="string" id="2190803">&#39;0&#39;</span><span class="op" id="2190806">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190811">base</span>&nbsp;<span class="op" id="2190816">=</span>&nbsp;<span class="num" id="2190818">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190822">default</span><span class="op" id="2190829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190834">base</span>&nbsp;<span class="op" id="2190839">=</span>&nbsp;<span class="num" id="2190841">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190850">default</span><span class="op" id="2190857">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190861">err</span>&nbsp;<span class="op" id="2190865">=</span>&nbsp;<span class="ident" id="2190867">errors</span><span class="op" id="2190873">.</span><span class="ident" id="2190874">New</span><span class="op" id="2190877">(</span><span class="string" id="2190878">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2190894">+</span>&nbsp;<span class="ident" id="2190896">Itoa</span><span class="op" id="2190900">(</span><span class="ident" id="2190901">base</span><span class="op" id="2190905">)</span><span class="op" id="2190906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190910">goto</span>&nbsp;<span class="ident" id="2190915">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2190922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190926">n</span>&nbsp;<span class="op" id="2190928">=</span>&nbsp;<span class="num" id="2190930">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190933">cutoff</span>&nbsp;<span class="op" id="2190940">=</span>&nbsp;<span class="ident" id="2190942">cutoff64</span><span class="op" id="2190950">(</span><span class="ident" id="2190951">base</span><span class="op" id="2190955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2190958">maxVal</span>&nbsp;<span class="op" id="2190965">=</span>&nbsp;<span class="num" id="2190967">1</span><span class="op" id="2190968">&lt;&lt;</span><span class="builtintype" id="2190970">uint</span><span class="op" id="2190974">(</span><span class="ident" id="2190975">bitSize</span><span class="op" id="2190982">)</span>&nbsp;<span class="op" id="2190984">-</span>&nbsp;<span class="num" id="2190986">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2190990">for</span>&nbsp;<span class="ident" id="2190994">i</span>&nbsp;<span class="op" id="2190996">:=</span>&nbsp;<span class="num" id="2190999">0</span><span class="op" id="2191000">;</span>&nbsp;<span class="ident" id="2191002">i</span>&nbsp;<span class="op" id="2191004">&lt;</span>&nbsp;<span class="builtinfunc" id="2191006">len</span><span class="op" id="2191009">(</span><span class="ident" id="2191010">s</span><span class="op" id="2191011">)</span><span class="op" id="2191012">;</span>&nbsp;<span class="ident" id="2191014">i</span><span class="op" id="2191015">++</span>&nbsp;<span class="op" id="2191018">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191022">var</span>&nbsp;<span class="ident" id="2191026">v</span>&nbsp;<span class="builtintype" id="2191028">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191035">d</span>&nbsp;<span class="op" id="2191037">:=</span>&nbsp;<span class="ident" id="2191040">s</span><span class="op" id="2191041">[</span><span class="ident" id="2191042">i</span><span class="op" id="2191043">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191047">switch</span>&nbsp;<span class="op" id="2191054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191058">case</span>&nbsp;<span class="string" id="2191063">&#39;0&#39;</span>&nbsp;<span class="op" id="2191067">&lt;=</span>&nbsp;<span class="ident" id="2191070">d</span>&nbsp;<span class="op" id="2191072">&amp;&amp;</span>&nbsp;<span class="ident" id="2191075">d</span>&nbsp;<span class="op" id="2191077">&lt;=</span>&nbsp;<span class="string" id="2191080">&#39;9&#39;</span><span class="op" id="2191083">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191088">v</span>&nbsp;<span class="op" id="2191090">=</span>&nbsp;<span class="ident" id="2191092">d</span>&nbsp;<span class="op" id="2191094">-</span>&nbsp;<span class="string" id="2191096">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191102">case</span>&nbsp;<span class="string" id="2191107">&#39;a&#39;</span>&nbsp;<span class="op" id="2191111">&lt;=</span>&nbsp;<span class="ident" id="2191114">d</span>&nbsp;<span class="op" id="2191116">&amp;&amp;</span>&nbsp;<span class="ident" id="2191119">d</span>&nbsp;<span class="op" id="2191121">&lt;=</span>&nbsp;<span class="string" id="2191124">&#39;z&#39;</span><span class="op" id="2191127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191132">v</span>&nbsp;<span class="op" id="2191134">=</span>&nbsp;<span class="ident" id="2191136">d</span>&nbsp;<span class="op" id="2191138">-</span>&nbsp;<span class="string" id="2191140">&#39;a&#39;</span>&nbsp;<span class="op" id="2191144">+</span>&nbsp;<span class="num" id="2191146">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191151">case</span>&nbsp;<span class="string" id="2191156">&#39;A&#39;</span>&nbsp;<span class="op" id="2191160">&lt;=</span>&nbsp;<span class="ident" id="2191163">d</span>&nbsp;<span class="op" id="2191165">&amp;&amp;</span>&nbsp;<span class="ident" id="2191168">d</span>&nbsp;<span class="op" id="2191170">&lt;=</span>&nbsp;<span class="string" id="2191173">&#39;Z&#39;</span><span class="op" id="2191176">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191181">v</span>&nbsp;<span class="op" id="2191183">=</span>&nbsp;<span class="ident" id="2191185">d</span>&nbsp;<span class="op" id="2191187">-</span>&nbsp;<span class="string" id="2191189">&#39;A&#39;</span>&nbsp;<span class="op" id="2191193">+</span>&nbsp;<span class="num" id="2191195">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191200">default</span><span class="op" id="2191207">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191212">n</span>&nbsp;<span class="op" id="2191214">=</span>&nbsp;<span class="num" id="2191216">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191221">err</span>&nbsp;<span class="op" id="2191225">=</span>&nbsp;<span class="ident" id="2191227">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191240">goto</span>&nbsp;<span class="ident" id="2191245">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191257">if</span>&nbsp;<span class="builtintype" id="2191260">int</span><span class="op" id="2191263">(</span><span class="ident" id="2191264">v</span><span class="op" id="2191265">)</span>&nbsp;<span class="op" id="2191267">&gt;=</span>&nbsp;<span class="ident" id="2191270">base</span>&nbsp;<span class="op" id="2191275">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191280">n</span>&nbsp;<span class="op" id="2191282">=</span>&nbsp;<span class="num" id="2191284">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191289">err</span>&nbsp;<span class="op" id="2191293">=</span>&nbsp;<span class="ident" id="2191295">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191308">goto</span>&nbsp;<span class="ident" id="2191313">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191326">if</span>&nbsp;<span class="ident" id="2191329">n</span>&nbsp;<span class="op" id="2191331">&gt;=</span>&nbsp;<span class="ident" id="2191334">cutoff</span>&nbsp;<span class="op" id="2191341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2191346">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191369">n</span>&nbsp;<span class="op" id="2191371">=</span>&nbsp;<span class="num" id="2191373">1</span><span class="op" id="2191374">&lt;&lt;</span><span class="num" id="2191376">64</span>&nbsp;<span class="op" id="2191379">-</span>&nbsp;<span class="num" id="2191381">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191386">err</span>&nbsp;<span class="op" id="2191390">=</span>&nbsp;<span class="ident" id="2191392">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191404">goto</span>&nbsp;<span class="ident" id="2191409">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191421">n</span>&nbsp;<span class="op" id="2191423">*=</span>&nbsp;<span class="ident" id="2191426">uint64</span><span class="op" id="2191432">(</span><span class="ident" id="2191433">base</span><span class="op" id="2191437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191442">n1</span>&nbsp;<span class="op" id="2191445">:=</span>&nbsp;<span class="ident" id="2191448">n</span>&nbsp;<span class="op" id="2191450">+</span>&nbsp;<span class="ident" id="2191452">uint64</span><span class="op" id="2191458">(</span><span class="ident" id="2191459">v</span><span class="op" id="2191460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191464">if</span>&nbsp;<span class="ident" id="2191467">n1</span>&nbsp;<span class="op" id="2191470">&lt;</span>&nbsp;<span class="ident" id="2191472">n</span>&nbsp;<span class="op" id="2191474">||</span>&nbsp;<span class="ident" id="2191477">n1</span>&nbsp;<span class="op" id="2191480">&gt;</span>&nbsp;<span class="ident" id="2191482">maxVal</span>&nbsp;<span class="op" id="2191489">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2191494">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191514">n</span>&nbsp;<span class="op" id="2191516">=</span>&nbsp;<span class="num" id="2191518">1</span><span class="op" id="2191519">&lt;&lt;</span><span class="num" id="2191521">64</span>&nbsp;<span class="op" id="2191524">-</span>&nbsp;<span class="num" id="2191526">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191531">err</span>&nbsp;<span class="op" id="2191535">=</span>&nbsp;<span class="ident" id="2191537">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191549">goto</span>&nbsp;<span class="ident" id="2191554">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191562">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2191566">n</span>&nbsp;<span class="op" id="2191568">=</span>&nbsp;<span class="ident" id="2191570">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2191574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191578">return</span>&nbsp;<span class="ident" id="2191585">n</span><span class="op" id="2191586">,</span>&nbsp;<span class="ident" id="2191588">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2191593">Error</span><span class="op" id="2191598">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2191601">return</span>&nbsp;<span class="ident" id="2191608">n</span><span class="op" id="2191609">,</span>&nbsp;<span class="op" id="2191611">&amp;</span><span class="ident" id="2191612">NumError</span><span class="op" id="2191620">{</span><span class="string" id="2191621">&#34;ParseUint&#34;</span><span class="op" id="2191632">,</span>&nbsp;<span class="ident" id="2191634">s0</span><span class="op" id="2191636">,</span>&nbsp;<span class="ident" id="2191638">err</span><span class="op" id="2191641">}</span><br>
<span class="lineno"></span><span class="op" id="2191643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2191646">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2191712">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2191777">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2191841">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2191872">//</span><br>
<span class="lineno"></span><span class="comment" id="2191875">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2191926">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2191992">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2192045">//</span><br>
<span class="lineno"></span><span class="comment" id="2192048">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2192113">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2192176">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2192236">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2192298">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2192362">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2192420">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2192453">func</span>&nbsp;<span class="ident" id="2192458">ParseInt</span><span class="op" id="2192466">(</span><span class="ident" id="2192467">s</span>&nbsp;<span class="builtintype" id="2192469">string</span><span class="op" id="2192475">,</span>&nbsp;<span class="ident" id="2192477">base</span>&nbsp;<span class="builtintype" id="2192482">int</span><span class="op" id="2192485">,</span>&nbsp;<span class="ident" id="2192487">bitSize</span>&nbsp;<span class="builtintype" id="2192495">int</span><span class="op" id="2192498">)</span>&nbsp;<span class="op" id="2192500">(</span><span class="ident" id="2192501">i</span>&nbsp;<span class="ident" id="2192503">int64</span><span class="op" id="2192508">,</span>&nbsp;<span class="ident" id="2192510">err</span>&nbsp;<span class="builtintype" id="2192514">error</span><span class="op" id="2192519">)</span>&nbsp;<span class="op" id="2192521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192524">const</span>&nbsp;<span class="ident" id="2192530">fnParseInt</span>&nbsp;<span class="op" id="2192541">=</span>&nbsp;<span class="string" id="2192543">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192556">if</span>&nbsp;<span class="ident" id="2192559">bitSize</span>&nbsp;<span class="op" id="2192567">==</span>&nbsp;<span class="num" id="2192570">0</span>&nbsp;<span class="op" id="2192572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192576">bitSize</span>&nbsp;<span class="op" id="2192584">=</span>&nbsp;<span class="builtintype" id="2192586">int</span><span class="op" id="2192589">(</span><span class="ident" id="2192590">IntSize</span><span class="op" id="2192597">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2192600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2192604">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192626">if</span>&nbsp;<span class="builtinfunc" id="2192629">len</span><span class="op" id="2192632">(</span><span class="ident" id="2192633">s</span><span class="op" id="2192634">)</span>&nbsp;<span class="op" id="2192636">==</span>&nbsp;<span class="num" id="2192639">0</span>&nbsp;<span class="op" id="2192641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192645">return</span>&nbsp;<span class="num" id="2192652">0</span><span class="op" id="2192653">,</span>&nbsp;<span class="ident" id="2192655">syntaxError</span><span class="op" id="2192666">(</span><span class="ident" id="2192667">fnParseInt</span><span class="op" id="2192677">,</span>&nbsp;<span class="ident" id="2192679">s</span><span class="op" id="2192680">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2192683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2192687">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192714">s0</span>&nbsp;<span class="op" id="2192717">:=</span>&nbsp;<span class="ident" id="2192720">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192723">neg</span>&nbsp;<span class="op" id="2192727">:=</span>&nbsp;<span class="builtintype" id="2192730">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192737">if</span>&nbsp;<span class="ident" id="2192740">s</span><span class="op" id="2192741">[</span><span class="num" id="2192742">0</span><span class="op" id="2192743">]</span>&nbsp;<span class="op" id="2192745">==</span>&nbsp;<span class="string" id="2192748">&#39;+&#39;</span>&nbsp;<span class="op" id="2192752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192756">s</span>&nbsp;<span class="op" id="2192758">=</span>&nbsp;<span class="ident" id="2192760">s</span><span class="op" id="2192761">[</span><span class="num" id="2192762">1</span><span class="op" id="2192763">:</span><span class="op" id="2192764">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2192767">}</span>&nbsp;<span class="keyword" id="2192769">else</span>&nbsp;<span class="keyword" id="2192774">if</span>&nbsp;<span class="ident" id="2192777">s</span><span class="op" id="2192778">[</span><span class="num" id="2192779">0</span><span class="op" id="2192780">]</span>&nbsp;<span class="op" id="2192782">==</span>&nbsp;<span class="string" id="2192785">&#39;-&#39;</span>&nbsp;<span class="op" id="2192789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192793">neg</span>&nbsp;<span class="op" id="2192797">=</span>&nbsp;<span class="builtintype" id="2192799">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192806">s</span>&nbsp;<span class="op" id="2192808">=</span>&nbsp;<span class="ident" id="2192810">s</span><span class="op" id="2192811">[</span><span class="num" id="2192812">1</span><span class="op" id="2192813">:</span><span class="op" id="2192814">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2192817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2192821">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192859">var</span>&nbsp;<span class="ident" id="2192863">un</span>&nbsp;<span class="ident" id="2192866">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192874">un</span><span class="op" id="2192876">,</span>&nbsp;<span class="ident" id="2192878">err</span>&nbsp;<span class="op" id="2192882">=</span>&nbsp;<span class="ident" id="2192884">ParseUint</span><span class="op" id="2192893">(</span><span class="ident" id="2192894">s</span><span class="op" id="2192895">,</span>&nbsp;<span class="ident" id="2192897">base</span><span class="op" id="2192901">,</span>&nbsp;<span class="ident" id="2192903">bitSize</span><span class="op" id="2192910">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2192913">if</span>&nbsp;<span class="ident" id="2192916">err</span>&nbsp;<span class="op" id="2192920">!=</span>&nbsp;<span class="ident" id="2192923">nil</span>&nbsp;<span class="op" id="2192927">&amp;&amp;</span>&nbsp;<span class="ident" id="2192930">err</span><span class="op" id="2192933">.</span><span class="op" id="2192934">(</span><span class="op" id="2192935">*</span><span class="ident" id="2192936">NumError</span><span class="op" id="2192944">)</span><span class="op" id="2192945">.</span><span class="ident" id="2192946">Err</span>&nbsp;<span class="op" id="2192950">!=</span>&nbsp;<span class="ident" id="2192953">ErrRange</span>&nbsp;<span class="op" id="2192962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2192966">err</span><span class="op" id="2192969">.</span><span class="op" id="2192970">(</span><span class="op" id="2192971">*</span><span class="ident" id="2192972">NumError</span><span class="op" id="2192980">)</span><span class="op" id="2192981">.</span><span class="ident" id="2192982">Func</span>&nbsp;<span class="op" id="2192987">=</span>&nbsp;<span class="ident" id="2192989">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2193002">err</span><span class="op" id="2193005">.</span><span class="op" id="2193006">(</span><span class="op" id="2193007">*</span><span class="ident" id="2193008">NumError</span><span class="op" id="2193016">)</span><span class="op" id="2193017">.</span><span class="ident" id="2193018">Num</span>&nbsp;<span class="op" id="2193022">=</span>&nbsp;<span class="ident" id="2193024">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193029">return</span>&nbsp;<span class="num" id="2193036">0</span><span class="op" id="2193037">,</span>&nbsp;<span class="ident" id="2193039">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2193044">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2193047">cutoff</span>&nbsp;<span class="op" id="2193054">:=</span>&nbsp;<span class="ident" id="2193057">uint64</span><span class="op" id="2193063">(</span><span class="num" id="2193064">1</span>&nbsp;<span class="op" id="2193066">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2193069">uint</span><span class="op" id="2193073">(</span><span class="ident" id="2193074">bitSize</span><span class="op" id="2193081">-</span><span class="num" id="2193082">1</span><span class="op" id="2193083">)</span><span class="op" id="2193084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193087">if</span>&nbsp;<span class="op" id="2193090">!</span><span class="ident" id="2193091">neg</span>&nbsp;<span class="op" id="2193095">&amp;&amp;</span>&nbsp;<span class="ident" id="2193098">un</span>&nbsp;<span class="op" id="2193101">&gt;=</span>&nbsp;<span class="ident" id="2193104">cutoff</span>&nbsp;<span class="op" id="2193111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193115">return</span>&nbsp;<span class="ident" id="2193122">int64</span><span class="op" id="2193127">(</span><span class="ident" id="2193128">cutoff</span>&nbsp;<span class="op" id="2193135">-</span>&nbsp;<span class="num" id="2193137">1</span><span class="op" id="2193138">)</span><span class="op" id="2193139">,</span>&nbsp;<span class="ident" id="2193141">rangeError</span><span class="op" id="2193151">(</span><span class="ident" id="2193152">fnParseInt</span><span class="op" id="2193162">,</span>&nbsp;<span class="ident" id="2193164">s0</span><span class="op" id="2193166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2193169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193172">if</span>&nbsp;<span class="ident" id="2193175">neg</span>&nbsp;<span class="op" id="2193179">&amp;&amp;</span>&nbsp;<span class="ident" id="2193182">un</span>&nbsp;<span class="op" id="2193185">&gt;</span>&nbsp;<span class="ident" id="2193187">cutoff</span>&nbsp;<span class="op" id="2193194">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193198">return</span>&nbsp;<span class="op" id="2193205">-</span><span class="ident" id="2193206">int64</span><span class="op" id="2193211">(</span><span class="ident" id="2193212">cutoff</span><span class="op" id="2193218">)</span><span class="op" id="2193219">,</span>&nbsp;<span class="ident" id="2193221">rangeError</span><span class="op" id="2193231">(</span><span class="ident" id="2193232">fnParseInt</span><span class="op" id="2193242">,</span>&nbsp;<span class="ident" id="2193244">s0</span><span class="op" id="2193246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2193249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2193252">n</span>&nbsp;<span class="op" id="2193254">:=</span>&nbsp;<span class="ident" id="2193257">int64</span><span class="op" id="2193262">(</span><span class="ident" id="2193263">un</span><span class="op" id="2193265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193268">if</span>&nbsp;<span class="ident" id="2193271">neg</span>&nbsp;<span class="op" id="2193275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2193279">n</span>&nbsp;<span class="op" id="2193281">=</span>&nbsp;<span class="op" id="2193283">-</span><span class="ident" id="2193284">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2193287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193290">return</span>&nbsp;<span class="ident" id="2193297">n</span><span class="op" id="2193298">,</span>&nbsp;<span class="ident" id="2193300">nil</span><br>
<span class="lineno"></span><span class="op" id="2193304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2193307">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2193352">func</span>&nbsp;<span class="ident" id="2193357">Atoi</span><span class="op" id="2193361">(</span><span class="ident" id="2193362">s</span>&nbsp;<span class="builtintype" id="2193364">string</span><span class="op" id="2193370">)</span>&nbsp;<span class="op" id="2193372">(</span><span class="ident" id="2193373">i</span>&nbsp;<span class="builtintype" id="2193375">int</span><span class="op" id="2193378">,</span>&nbsp;<span class="ident" id="2193380">err</span>&nbsp;<span class="builtintype" id="2193384">error</span><span class="op" id="2193389">)</span>&nbsp;<span class="op" id="2193391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2193394">i64</span><span class="op" id="2193397">,</span>&nbsp;<span class="ident" id="2193399">err</span>&nbsp;<span class="op" id="2193403">:=</span>&nbsp;<span class="ident" id="2193406">ParseInt</span><span class="op" id="2193414">(</span><span class="ident" id="2193415">s</span><span class="op" id="2193416">,</span>&nbsp;<span class="num" id="2193418">10</span><span class="op" id="2193420">,</span>&nbsp;<span class="num" id="2193422">0</span><span class="op" id="2193423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2193426">return</span>&nbsp;<span class="builtintype" id="2193433">int</span><span class="op" id="2193436">(</span><span class="ident" id="2193437">i64</span><span class="op" id="2193440">)</span><span class="op" id="2193441">,</span>&nbsp;<span class="ident" id="2193443">err</span><br>
<span class="lineno"></span><span class="op" id="2193447">}</span>
</div>
</body>
</html>
