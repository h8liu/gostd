<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6539864">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6539919">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6539973">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6540024">package</span>&nbsp;<span class="ident" id="6540032">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540037">import</span>&nbsp;<span class="op" id="6540044">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540047">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540056">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540063">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540072">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540087">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6540100">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6540110">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6540113">func</span>&nbsp;<span class="ident" id="6540118">diff</span><span class="op" id="6540122">(</span><span class="ident" id="6540123">m0</span><span class="op" id="6540125">,</span>&nbsp;<span class="ident" id="6540127">m1</span>&nbsp;<span class="ident" id="6540130">image</span><span class="op" id="6540135">.</span><span class="ident" id="6540136">Image</span><span class="op" id="6540141">)</span>&nbsp;<span class="builtintype" id="6540143">error</span>&nbsp;<span class="op" id="6540149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540152">b0</span><span class="op" id="6540154">,</span>&nbsp;<span class="ident" id="6540156">b1</span>&nbsp;<span class="op" id="6540159">:=</span>&nbsp;<span class="ident" id="6540162">m0</span><span class="op" id="6540164">.</span><span class="ident" id="6540165">Bounds</span><span class="op" id="6540171">(</span><span class="op" id="6540172">)</span><span class="op" id="6540173">,</span>&nbsp;<span class="ident" id="6540175">m1</span><span class="op" id="6540177">.</span><span class="ident" id="6540178">Bounds</span><span class="op" id="6540184">(</span><span class="op" id="6540185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540188">if</span>&nbsp;<span class="op" id="6540191">!</span><span class="ident" id="6540192">b0</span><span class="op" id="6540194">.</span><span class="ident" id="6540195">Size</span><span class="op" id="6540199">(</span><span class="op" id="6540200">)</span><span class="op" id="6540201">.</span><span class="ident" id="6540202">Eq</span><span class="op" id="6540204">(</span><span class="ident" id="6540205">b1</span><span class="op" id="6540207">.</span><span class="ident" id="6540208">Size</span><span class="op" id="6540212">(</span><span class="op" id="6540213">)</span><span class="op" id="6540214">)</span>&nbsp;<span class="op" id="6540216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540220">return</span>&nbsp;<span class="ident" id="6540227">fmt</span><span class="op" id="6540230">.</span><span class="ident" id="6540231">Errorf</span><span class="op" id="6540237">(</span><span class="string" id="6540238">&#34;dimensions&nbsp;differ:&nbsp;%v&nbsp;vs&nbsp;%v&#34;</span><span class="op" id="6540267">,</span>&nbsp;<span class="ident" id="6540269">b0</span><span class="op" id="6540271">,</span>&nbsp;<span class="ident" id="6540273">b1</span><span class="op" id="6540275">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540281">dx</span>&nbsp;<span class="op" id="6540284">:=</span>&nbsp;<span class="ident" id="6540287">b1</span><span class="op" id="6540289">.</span><span class="ident" id="6540290">Min</span><span class="op" id="6540293">.</span><span class="ident" id="6540294">X</span>&nbsp;<span class="op" id="6540296">-</span>&nbsp;<span class="ident" id="6540298">b0</span><span class="op" id="6540300">.</span><span class="ident" id="6540301">Min</span><span class="op" id="6540304">.</span><span class="ident" id="6540305">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540308">dy</span>&nbsp;<span class="op" id="6540311">:=</span>&nbsp;<span class="ident" id="6540314">b1</span><span class="op" id="6540316">.</span><span class="ident" id="6540317">Min</span><span class="op" id="6540320">.</span><span class="ident" id="6540321">Y</span>&nbsp;<span class="op" id="6540323">-</span>&nbsp;<span class="ident" id="6540325">b0</span><span class="op" id="6540327">.</span><span class="ident" id="6540328">Min</span><span class="op" id="6540331">.</span><span class="ident" id="6540332">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540335">for</span>&nbsp;<span class="ident" id="6540339">y</span>&nbsp;<span class="op" id="6540341">:=</span>&nbsp;<span class="ident" id="6540344">b0</span><span class="op" id="6540346">.</span><span class="ident" id="6540347">Min</span><span class="op" id="6540350">.</span><span class="ident" id="6540351">Y</span><span class="op" id="6540352">;</span>&nbsp;<span class="ident" id="6540354">y</span>&nbsp;<span class="op" id="6540356">&lt;</span>&nbsp;<span class="ident" id="6540358">b0</span><span class="op" id="6540360">.</span><span class="ident" id="6540361">Max</span><span class="op" id="6540364">.</span><span class="ident" id="6540365">Y</span><span class="op" id="6540366">;</span>&nbsp;<span class="ident" id="6540368">y</span><span class="op" id="6540369">++</span>&nbsp;<span class="op" id="6540372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540376">for</span>&nbsp;<span class="ident" id="6540380">x</span>&nbsp;<span class="op" id="6540382">:=</span>&nbsp;<span class="ident" id="6540385">b0</span><span class="op" id="6540387">.</span><span class="ident" id="6540388">Min</span><span class="op" id="6540391">.</span><span class="ident" id="6540392">X</span><span class="op" id="6540393">;</span>&nbsp;<span class="ident" id="6540395">x</span>&nbsp;<span class="op" id="6540397">&lt;</span>&nbsp;<span class="ident" id="6540399">b0</span><span class="op" id="6540401">.</span><span class="ident" id="6540402">Max</span><span class="op" id="6540405">.</span><span class="ident" id="6540406">X</span><span class="op" id="6540407">;</span>&nbsp;<span class="ident" id="6540409">x</span><span class="op" id="6540410">++</span>&nbsp;<span class="op" id="6540413">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540418">c0</span>&nbsp;<span class="op" id="6540421">:=</span>&nbsp;<span class="ident" id="6540424">m0</span><span class="op" id="6540426">.</span><span class="ident" id="6540427">At</span><span class="op" id="6540429">(</span><span class="ident" id="6540430">x</span><span class="op" id="6540431">,</span>&nbsp;<span class="ident" id="6540433">y</span><span class="op" id="6540434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540439">c1</span>&nbsp;<span class="op" id="6540442">:=</span>&nbsp;<span class="ident" id="6540445">m1</span><span class="op" id="6540447">.</span><span class="ident" id="6540448">At</span><span class="op" id="6540450">(</span><span class="ident" id="6540451">x</span><span class="op" id="6540452">+</span><span class="ident" id="6540453">dx</span><span class="op" id="6540455">,</span>&nbsp;<span class="ident" id="6540457">y</span><span class="op" id="6540458">+</span><span class="ident" id="6540459">dy</span><span class="op" id="6540461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540466">r0</span><span class="op" id="6540468">,</span>&nbsp;<span class="ident" id="6540470">g0</span><span class="op" id="6540472">,</span>&nbsp;<span class="ident" id="6540474">b0</span><span class="op" id="6540476">,</span>&nbsp;<span class="ident" id="6540478">a0</span>&nbsp;<span class="op" id="6540481">:=</span>&nbsp;<span class="ident" id="6540484">c0</span><span class="op" id="6540486">.</span><span class="ident" id="6540487">RGBA</span><span class="op" id="6540491">(</span><span class="op" id="6540492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540497">r1</span><span class="op" id="6540499">,</span>&nbsp;<span class="ident" id="6540501">g1</span><span class="op" id="6540503">,</span>&nbsp;<span class="ident" id="6540505">b1</span><span class="op" id="6540507">,</span>&nbsp;<span class="ident" id="6540509">a1</span>&nbsp;<span class="op" id="6540512">:=</span>&nbsp;<span class="ident" id="6540515">c1</span><span class="op" id="6540517">.</span><span class="ident" id="6540518">RGBA</span><span class="op" id="6540522">(</span><span class="op" id="6540523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540528">if</span>&nbsp;<span class="ident" id="6540531">r0</span>&nbsp;<span class="op" id="6540534">!=</span>&nbsp;<span class="ident" id="6540537">r1</span>&nbsp;<span class="op" id="6540540">||</span>&nbsp;<span class="ident" id="6540543">g0</span>&nbsp;<span class="op" id="6540546">!=</span>&nbsp;<span class="ident" id="6540549">g1</span>&nbsp;<span class="op" id="6540552">||</span>&nbsp;<span class="ident" id="6540555">b0</span>&nbsp;<span class="op" id="6540558">!=</span>&nbsp;<span class="ident" id="6540561">b1</span>&nbsp;<span class="op" id="6540564">||</span>&nbsp;<span class="ident" id="6540567">a0</span>&nbsp;<span class="op" id="6540570">!=</span>&nbsp;<span class="ident" id="6540573">a1</span>&nbsp;<span class="op" id="6540576">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540582">return</span>&nbsp;<span class="ident" id="6540589">fmt</span><span class="op" id="6540592">.</span><span class="ident" id="6540593">Errorf</span><span class="op" id="6540599">(</span><span class="string" id="6540600">&#34;colors&nbsp;differ&nbsp;at&nbsp;(%d,&nbsp;%d):&nbsp;%v&nbsp;vs&nbsp;%v&#34;</span><span class="op" id="6540637">,</span>&nbsp;<span class="ident" id="6540639">x</span><span class="op" id="6540640">,</span>&nbsp;<span class="ident" id="6540642">y</span><span class="op" id="6540643">,</span>&nbsp;<span class="ident" id="6540645">c0</span><span class="op" id="6540647">,</span>&nbsp;<span class="ident" id="6540649">c1</span><span class="op" id="6540651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540666">return</span>&nbsp;<span class="ident" id="6540673">nil</span><br>
<span class="lineno">35</span><span class="op" id="6540677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540680">func</span>&nbsp;<span class="ident" id="6540685">encodeDecode</span><span class="op" id="6540697">(</span><span class="ident" id="6540698">m</span>&nbsp;<span class="ident" id="6540700">image</span><span class="op" id="6540705">.</span><span class="ident" id="6540706">Image</span><span class="op" id="6540711">)</span>&nbsp;<span class="op" id="6540713">(</span><span class="ident" id="6540714">image</span><span class="op" id="6540719">.</span><span class="ident" id="6540720">Image</span><span class="op" id="6540725">,</span>&nbsp;<span class="builtintype" id="6540727">error</span><span class="op" id="6540732">)</span>&nbsp;<span class="op" id="6540734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540737">var</span>&nbsp;<span class="ident" id="6540741">b</span>&nbsp;<span class="ident" id="6540743">bytes</span><span class="op" id="6540748">.</span><span class="ident" id="6540749">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540757">err</span>&nbsp;<span class="op" id="6540761">:=</span>&nbsp;<span class="ident" id="6540764">Encode</span><span class="op" id="6540770">(</span><span class="op" id="6540771">&amp;</span><span class="ident" id="6540772">b</span><span class="op" id="6540773">,</span>&nbsp;<span class="ident" id="6540775">m</span><span class="op" id="6540776">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540779">if</span>&nbsp;<span class="ident" id="6540782">err</span>&nbsp;<span class="op" id="6540786">!=</span>&nbsp;<span class="ident" id="6540789">nil</span>&nbsp;<span class="op" id="6540793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540797">return</span>&nbsp;<span class="ident" id="6540804">nil</span><span class="op" id="6540807">,</span>&nbsp;<span class="ident" id="6540809">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540817">return</span>&nbsp;<span class="ident" id="6540824">Decode</span><span class="op" id="6540830">(</span><span class="op" id="6540831">&amp;</span><span class="ident" id="6540832">b</span><span class="op" id="6540833">)</span><br>
<span class="lineno"></span><span class="op" id="6540835">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6540838">func</span>&nbsp;<span class="ident" id="6540843">TestWriter</span><span class="op" id="6540853">(</span><span class="ident" id="6540854">t</span>&nbsp;<span class="op" id="6540856">*</span><span class="ident" id="6540857">testing</span><span class="op" id="6540864">.</span><span class="ident" id="6540865">T</span><span class="op" id="6540866">)</span>&nbsp;<span class="op" id="6540868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6540871">//&nbsp;The&nbsp;filenames&nbsp;variable&nbsp;is&nbsp;declared&nbsp;in&nbsp;reader_test.go.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540929">names</span>&nbsp;<span class="op" id="6540935">:=</span>&nbsp;<span class="ident" id="6540938">filenames</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540949">if</span>&nbsp;<span class="ident" id="6540952">testing</span><span class="op" id="6540959">.</span><span class="ident" id="6540960">Short</span><span class="op" id="6540965">(</span><span class="op" id="6540966">)</span>&nbsp;<span class="op" id="6540968">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6540972">names</span>&nbsp;<span class="op" id="6540978">=</span>&nbsp;<span class="ident" id="6540980">filenamesShort</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6540996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6540999">for</span>&nbsp;<span class="ident" id="6541003">_</span><span class="op" id="6541004">,</span>&nbsp;<span class="ident" id="6541006">fn</span>&nbsp;<span class="op" id="6541009">:=</span>&nbsp;<span class="keyword" id="6541012">range</span>&nbsp;<span class="ident" id="6541018">names</span>&nbsp;<span class="op" id="6541024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541028">qfn</span>&nbsp;<span class="op" id="6541032">:=</span>&nbsp;<span class="string" id="6541035">&#34;testdata/pngsuite/&#34;</span>&nbsp;<span class="op" id="6541056">+</span>&nbsp;<span class="ident" id="6541058">fn</span>&nbsp;<span class="op" id="6541061">+</span>&nbsp;<span class="string" id="6541063">&#34;.png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6541072">//&nbsp;Read&nbsp;the&nbsp;image.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541093">m0</span><span class="op" id="6541095">,</span>&nbsp;<span class="ident" id="6541097">err</span>&nbsp;<span class="op" id="6541101">:=</span>&nbsp;<span class="ident" id="6541104">readPNG</span><span class="op" id="6541111">(</span><span class="ident" id="6541112">qfn</span><span class="op" id="6541115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541119">if</span>&nbsp;<span class="ident" id="6541122">err</span>&nbsp;<span class="op" id="6541126">!=</span>&nbsp;<span class="ident" id="6541129">nil</span>&nbsp;<span class="op" id="6541133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541138">t</span><span class="op" id="6541139">.</span><span class="ident" id="6541140">Error</span><span class="op" id="6541145">(</span><span class="ident" id="6541146">fn</span><span class="op" id="6541148">,</span>&nbsp;<span class="ident" id="6541150">err</span><span class="op" id="6541153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541158">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541169">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6541173">//&nbsp;Read&nbsp;the&nbsp;image&nbsp;again,&nbsp;encode&nbsp;it,&nbsp;and&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541226">m1</span><span class="op" id="6541228">,</span>&nbsp;<span class="ident" id="6541230">err</span>&nbsp;<span class="op" id="6541234">:=</span>&nbsp;<span class="ident" id="6541237">readPNG</span><span class="op" id="6541244">(</span><span class="ident" id="6541245">qfn</span><span class="op" id="6541248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541252">if</span>&nbsp;<span class="ident" id="6541255">err</span>&nbsp;<span class="op" id="6541259">!=</span>&nbsp;<span class="ident" id="6541262">nil</span>&nbsp;<span class="op" id="6541266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541271">t</span><span class="op" id="6541272">.</span><span class="ident" id="6541273">Error</span><span class="op" id="6541278">(</span><span class="ident" id="6541279">fn</span><span class="op" id="6541281">,</span>&nbsp;<span class="ident" id="6541283">err</span><span class="op" id="6541286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541291">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541304">m2</span><span class="op" id="6541306">,</span>&nbsp;<span class="ident" id="6541308">err</span>&nbsp;<span class="op" id="6541312">:=</span>&nbsp;<span class="ident" id="6541315">encodeDecode</span><span class="op" id="6541327">(</span><span class="ident" id="6541328">m1</span><span class="op" id="6541330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541334">if</span>&nbsp;<span class="ident" id="6541337">err</span>&nbsp;<span class="op" id="6541341">!=</span>&nbsp;<span class="ident" id="6541344">nil</span>&nbsp;<span class="op" id="6541348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541353">t</span><span class="op" id="6541354">.</span><span class="ident" id="6541355">Error</span><span class="op" id="6541360">(</span><span class="ident" id="6541361">fn</span><span class="op" id="6541363">,</span>&nbsp;<span class="ident" id="6541365">err</span><span class="op" id="6541368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541373">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6541386">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541408">err</span>&nbsp;<span class="op" id="6541412">=</span>&nbsp;<span class="ident" id="6541414">diff</span><span class="op" id="6541418">(</span><span class="ident" id="6541419">m0</span><span class="op" id="6541421">,</span>&nbsp;<span class="ident" id="6541423">m2</span><span class="op" id="6541425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541429">if</span>&nbsp;<span class="ident" id="6541432">err</span>&nbsp;<span class="op" id="6541436">!=</span>&nbsp;<span class="ident" id="6541439">nil</span>&nbsp;<span class="op" id="6541443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541448">t</span><span class="op" id="6541449">.</span><span class="ident" id="6541450">Error</span><span class="op" id="6541455">(</span><span class="ident" id="6541456">fn</span><span class="op" id="6541458">,</span>&nbsp;<span class="ident" id="6541460">err</span><span class="op" id="6541463">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541468">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541482">}</span><br>
<span class="lineno"></span><span class="op" id="6541484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="6541487">func</span>&nbsp;<span class="ident" id="6541492">TestWriterLevels</span><span class="op" id="6541508">(</span><span class="ident" id="6541509">t</span>&nbsp;<span class="op" id="6541511">*</span><span class="ident" id="6541512">testing</span><span class="op" id="6541519">.</span><span class="ident" id="6541520">T</span><span class="op" id="6541521">)</span>&nbsp;<span class="op" id="6541523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541526">m</span>&nbsp;<span class="op" id="6541528">:=</span>&nbsp;<span class="ident" id="6541531">image</span><span class="op" id="6541536">.</span><span class="ident" id="6541537">NewNRGBA</span><span class="op" id="6541545">(</span><span class="ident" id="6541546">image</span><span class="op" id="6541551">.</span><span class="ident" id="6541552">Rect</span><span class="op" id="6541556">(</span><span class="num" id="6541557">0</span><span class="op" id="6541558">,</span>&nbsp;<span class="num" id="6541560">0</span><span class="op" id="6541561">,</span>&nbsp;<span class="num" id="6541563">100</span><span class="op" id="6541566">,</span>&nbsp;<span class="num" id="6541568">100</span><span class="op" id="6541571">)</span><span class="op" id="6541572">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541576">var</span>&nbsp;<span class="ident" id="6541580">b1</span><span class="op" id="6541582">,</span>&nbsp;<span class="ident" id="6541584">b2</span>&nbsp;<span class="ident" id="6541587">bytes</span><span class="op" id="6541592">.</span><span class="ident" id="6541593">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541601">if</span>&nbsp;<span class="ident" id="6541604">err</span>&nbsp;<span class="op" id="6541608">:=</span>&nbsp;<span class="op" id="6541611">(</span><span class="op" id="6541612">&amp;</span><span class="ident" id="6541613">Encoder</span><span class="op" id="6541620">{</span><span class="op" id="6541621">}</span><span class="op" id="6541622">)</span><span class="op" id="6541623">.</span><span class="ident" id="6541624">Encode</span><span class="op" id="6541630">(</span><span class="op" id="6541631">&amp;</span><span class="ident" id="6541632">b1</span><span class="op" id="6541634">,</span>&nbsp;<span class="ident" id="6541636">m</span><span class="op" id="6541637">)</span><span class="op" id="6541638">;</span>&nbsp;<span class="ident" id="6541640">err</span>&nbsp;<span class="op" id="6541644">!=</span>&nbsp;<span class="ident" id="6541647">nil</span>&nbsp;<span class="op" id="6541651">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541655">t</span><span class="op" id="6541656">.</span><span class="ident" id="6541657">Fatal</span><span class="op" id="6541662">(</span><span class="ident" id="6541663">err</span><span class="op" id="6541666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541672">noenc</span>&nbsp;<span class="op" id="6541678">:=</span>&nbsp;<span class="op" id="6541681">&amp;</span><span class="ident" id="6541682">Encoder</span><span class="op" id="6541689">{</span><span class="ident" id="6541690">CompressionLevel</span><span class="op" id="6541706">:</span>&nbsp;<span class="ident" id="6541708">NoCompression</span><span class="op" id="6541721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541724">if</span>&nbsp;<span class="ident" id="6541727">err</span>&nbsp;<span class="op" id="6541731">:=</span>&nbsp;<span class="ident" id="6541734">noenc</span><span class="op" id="6541739">.</span><span class="ident" id="6541740">Encode</span><span class="op" id="6541746">(</span><span class="op" id="6541747">&amp;</span><span class="ident" id="6541748">b2</span><span class="op" id="6541750">,</span>&nbsp;<span class="ident" id="6541752">m</span><span class="op" id="6541753">)</span><span class="op" id="6541754">;</span>&nbsp;<span class="ident" id="6541756">err</span>&nbsp;<span class="op" id="6541760">!=</span>&nbsp;<span class="ident" id="6541763">nil</span>&nbsp;<span class="op" id="6541767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541771">t</span><span class="op" id="6541772">.</span><span class="ident" id="6541773">Fatal</span><span class="op" id="6541778">(</span><span class="ident" id="6541779">err</span><span class="op" id="6541782">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541789">if</span>&nbsp;<span class="ident" id="6541792">b2</span><span class="op" id="6541794">.</span><span class="ident" id="6541795">Len</span><span class="op" id="6541798">(</span><span class="op" id="6541799">)</span>&nbsp;<span class="op" id="6541801">&lt;=</span>&nbsp;<span class="ident" id="6541804">b1</span><span class="op" id="6541806">.</span><span class="ident" id="6541807">Len</span><span class="op" id="6541810">(</span><span class="op" id="6541811">)</span>&nbsp;<span class="op" id="6541813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541817">t</span><span class="op" id="6541818">.</span><span class="ident" id="6541819">Error</span><span class="op" id="6541824">(</span><span class="string" id="6541825">&#34;DefaultCompression&nbsp;encoding&nbsp;was&nbsp;larger&nbsp;than&nbsp;NoCompression&nbsp;encoding&#34;</span><span class="op" id="6541893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541896">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541899">if</span>&nbsp;<span class="ident" id="6541902">_</span><span class="op" id="6541903">,</span>&nbsp;<span class="ident" id="6541905">err</span>&nbsp;<span class="op" id="6541909">:=</span>&nbsp;<span class="ident" id="6541912">Decode</span><span class="op" id="6541918">(</span><span class="op" id="6541919">&amp;</span><span class="ident" id="6541920">b1</span><span class="op" id="6541922">)</span><span class="op" id="6541923">;</span>&nbsp;<span class="ident" id="6541925">err</span>&nbsp;<span class="op" id="6541929">!=</span>&nbsp;<span class="ident" id="6541932">nil</span>&nbsp;<span class="op" id="6541936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6541940">t</span><span class="op" id="6541941">.</span><span class="ident" id="6541942">Error</span><span class="op" id="6541947">(</span><span class="string" id="6541948">&#34;cannot&nbsp;decode&nbsp;DefaultCompression&#34;</span><span class="op" id="6541982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6541985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6541988">if</span>&nbsp;<span class="ident" id="6541991">_</span><span class="op" id="6541992">,</span>&nbsp;<span class="ident" id="6541994">err</span>&nbsp;<span class="op" id="6541998">:=</span>&nbsp;<span class="ident" id="6542001">Decode</span><span class="op" id="6542007">(</span><span class="op" id="6542008">&amp;</span><span class="ident" id="6542009">b2</span><span class="op" id="6542011">)</span><span class="op" id="6542012">;</span>&nbsp;<span class="ident" id="6542014">err</span>&nbsp;<span class="op" id="6542018">!=</span>&nbsp;<span class="ident" id="6542021">nil</span>&nbsp;<span class="op" id="6542025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542029">t</span><span class="op" id="6542030">.</span><span class="ident" id="6542031">Error</span><span class="op" id="6542036">(</span><span class="string" id="6542037">&#34;cannot&nbsp;decode&nbsp;NoCompression&#34;</span><span class="op" id="6542066">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542069">}</span><br>
<span class="lineno"></span><span class="op" id="6542071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542074">func</span>&nbsp;<span class="ident" id="6542079">TestSubImage</span><span class="op" id="6542091">(</span><span class="ident" id="6542092">t</span>&nbsp;<span class="op" id="6542094">*</span><span class="ident" id="6542095">testing</span><span class="op" id="6542102">.</span><span class="ident" id="6542103">T</span><span class="op" id="6542104">)</span>&nbsp;<span class="op" id="6542106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542109">m0</span>&nbsp;<span class="op" id="6542112">:=</span>&nbsp;<span class="ident" id="6542115">image</span><span class="op" id="6542120">.</span><span class="ident" id="6542121">NewRGBA</span><span class="op" id="6542128">(</span><span class="ident" id="6542129">image</span><span class="op" id="6542134">.</span><span class="ident" id="6542135">Rect</span><span class="op" id="6542139">(</span><span class="num" id="6542140">0</span><span class="op" id="6542141">,</span>&nbsp;<span class="num" id="6542143">0</span><span class="op" id="6542144">,</span>&nbsp;<span class="num" id="6542146">256</span><span class="op" id="6542149">,</span>&nbsp;<span class="num" id="6542151">256</span><span class="op" id="6542154">)</span><span class="op" id="6542155">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542158">for</span>&nbsp;<span class="ident" id="6542162">y</span>&nbsp;<span class="op" id="6542164">:=</span>&nbsp;<span class="num" id="6542167">0</span><span class="op" id="6542168">;</span>&nbsp;<span class="ident" id="6542170">y</span>&nbsp;<span class="op" id="6542172">&lt;</span>&nbsp;<span class="num" id="6542174">256</span><span class="op" id="6542177">;</span>&nbsp;<span class="ident" id="6542179">y</span><span class="op" id="6542180">++</span>&nbsp;<span class="op" id="6542183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542187">for</span>&nbsp;<span class="ident" id="6542191">x</span>&nbsp;<span class="op" id="6542193">:=</span>&nbsp;<span class="num" id="6542196">0</span><span class="op" id="6542197">;</span>&nbsp;<span class="ident" id="6542199">x</span>&nbsp;<span class="op" id="6542201">&lt;</span>&nbsp;<span class="num" id="6542203">256</span><span class="op" id="6542206">;</span>&nbsp;<span class="ident" id="6542208">x</span><span class="op" id="6542209">++</span>&nbsp;<span class="op" id="6542212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542217">m0</span><span class="op" id="6542219">.</span><span class="ident" id="6542220">Set</span><span class="op" id="6542223">(</span><span class="ident" id="6542224">x</span><span class="op" id="6542225">,</span>&nbsp;<span class="ident" id="6542227">y</span><span class="op" id="6542228">,</span>&nbsp;<span class="ident" id="6542230">color</span><span class="op" id="6542235">.</span><span class="ident" id="6542236">RGBA</span><span class="op" id="6542240">{</span><span class="builtintype" id="6542241">uint8</span><span class="op" id="6542246">(</span><span class="ident" id="6542247">x</span><span class="op" id="6542248">)</span><span class="op" id="6542249">,</span>&nbsp;<span class="builtintype" id="6542251">uint8</span><span class="op" id="6542256">(</span><span class="ident" id="6542257">y</span><span class="op" id="6542258">)</span><span class="op" id="6542259">,</span>&nbsp;<span class="num" id="6542261">0</span><span class="op" id="6542262">,</span>&nbsp;<span class="num" id="6542264">255</span><span class="op" id="6542267">}</span><span class="op" id="6542268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542275">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542278">m0</span>&nbsp;<span class="op" id="6542281">=</span>&nbsp;<span class="ident" id="6542283">m0</span><span class="op" id="6542285">.</span><span class="ident" id="6542286">SubImage</span><span class="op" id="6542294">(</span><span class="ident" id="6542295">image</span><span class="op" id="6542300">.</span><span class="ident" id="6542301">Rect</span><span class="op" id="6542305">(</span><span class="num" id="6542306">50</span><span class="op" id="6542308">,</span>&nbsp;<span class="num" id="6542310">30</span><span class="op" id="6542312">,</span>&nbsp;<span class="num" id="6542314">250</span><span class="op" id="6542317">,</span>&nbsp;<span class="num" id="6542319">130</span><span class="op" id="6542322">)</span><span class="op" id="6542323">)</span><span class="op" id="6542324">.</span><span class="op" id="6542325">(</span><span class="op" id="6542326">*</span><span class="ident" id="6542327">image</span><span class="op" id="6542332">.</span><span class="ident" id="6542333">RGBA</span><span class="op" id="6542337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542340">m1</span><span class="op" id="6542342">,</span>&nbsp;<span class="ident" id="6542344">err</span>&nbsp;<span class="op" id="6542348">:=</span>&nbsp;<span class="ident" id="6542351">encodeDecode</span><span class="op" id="6542363">(</span><span class="ident" id="6542364">m0</span><span class="op" id="6542366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542369">if</span>&nbsp;<span class="ident" id="6542372">err</span>&nbsp;<span class="op" id="6542376">!=</span>&nbsp;<span class="ident" id="6542379">nil</span>&nbsp;<span class="op" id="6542383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542387">t</span><span class="op" id="6542388">.</span><span class="ident" id="6542389">Error</span><span class="op" id="6542394">(</span><span class="ident" id="6542395">err</span><span class="op" id="6542398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542402">return</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542413">err</span>&nbsp;<span class="op" id="6542417">=</span>&nbsp;<span class="ident" id="6542419">diff</span><span class="op" id="6542423">(</span><span class="ident" id="6542424">m0</span><span class="op" id="6542426">,</span>&nbsp;<span class="ident" id="6542428">m1</span><span class="op" id="6542430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542433">if</span>&nbsp;<span class="ident" id="6542436">err</span>&nbsp;<span class="op" id="6542440">!=</span>&nbsp;<span class="ident" id="6542443">nil</span>&nbsp;<span class="op" id="6542447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542451">t</span><span class="op" id="6542452">.</span><span class="ident" id="6542453">Error</span><span class="op" id="6542458">(</span><span class="ident" id="6542459">err</span><span class="op" id="6542462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542466">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542474">}</span><br>
<span class="lineno"></span><span class="op" id="6542476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542479">func</span>&nbsp;<span class="ident" id="6542484">BenchmarkEncodeGray</span><span class="op" id="6542503">(</span><span class="ident" id="6542504">b</span>&nbsp;<span class="op" id="6542506">*</span><span class="ident" id="6542507">testing</span><span class="op" id="6542514">.</span><span class="ident" id="6542515">B</span><span class="op" id="6542516">)</span>&nbsp;<span class="op" id="6542518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542521">b</span><span class="op" id="6542522">.</span><span class="ident" id="6542523">StopTimer</span><span class="op" id="6542532">(</span><span class="op" id="6542533">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542536">img</span>&nbsp;<span class="op" id="6542540">:=</span>&nbsp;<span class="ident" id="6542543">image</span><span class="op" id="6542548">.</span><span class="ident" id="6542549">NewGray</span><span class="op" id="6542556">(</span><span class="ident" id="6542557">image</span><span class="op" id="6542562">.</span><span class="ident" id="6542563">Rect</span><span class="op" id="6542567">(</span><span class="num" id="6542568">0</span><span class="op" id="6542569">,</span>&nbsp;<span class="num" id="6542571">0</span><span class="op" id="6542572">,</span>&nbsp;<span class="num" id="6542574">640</span><span class="op" id="6542577">,</span>&nbsp;<span class="num" id="6542579">480</span><span class="op" id="6542582">)</span><span class="op" id="6542583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542586">b</span><span class="op" id="6542587">.</span><span class="ident" id="6542588">SetBytes</span><span class="op" id="6542596">(</span><span class="num" id="6542597">640</span>&nbsp;<span class="op" id="6542601">*</span>&nbsp;<span class="num" id="6542603">480</span>&nbsp;<span class="op" id="6542607">*</span>&nbsp;<span class="num" id="6542609">1</span><span class="op" id="6542610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542613">b</span><span class="op" id="6542614">.</span><span class="ident" id="6542615">StartTimer</span><span class="op" id="6542625">(</span><span class="op" id="6542626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542629">for</span>&nbsp;<span class="ident" id="6542633">i</span>&nbsp;<span class="op" id="6542635">:=</span>&nbsp;<span class="num" id="6542638">0</span><span class="op" id="6542639">;</span>&nbsp;<span class="ident" id="6542641">i</span>&nbsp;<span class="op" id="6542643">&lt;</span>&nbsp;<span class="ident" id="6542645">b</span><span class="op" id="6542646">.</span><span class="ident" id="6542647">N</span><span class="op" id="6542648">;</span>&nbsp;<span class="ident" id="6542650">i</span><span class="op" id="6542651">++</span>&nbsp;<span class="op" id="6542654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542658">Encode</span><span class="op" id="6542664">(</span><span class="ident" id="6542665">ioutil</span><span class="op" id="6542671">.</span><span class="ident" id="6542672">Discard</span><span class="op" id="6542679">,</span>&nbsp;<span class="ident" id="6542681">img</span><span class="op" id="6542684">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6542687">}</span><br>
<span class="lineno"></span><span class="op" id="6542689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542692">func</span>&nbsp;<span class="ident" id="6542697">BenchmarkEncodeNRGBOpaque</span><span class="op" id="6542722">(</span><span class="ident" id="6542723">b</span>&nbsp;<span class="op" id="6542725">*</span><span class="ident" id="6542726">testing</span><span class="op" id="6542733">.</span><span class="ident" id="6542734">B</span><span class="op" id="6542735">)</span>&nbsp;<span class="op" id="6542737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542740">b</span><span class="op" id="6542741">.</span><span class="ident" id="6542742">StopTimer</span><span class="op" id="6542751">(</span><span class="op" id="6542752">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542755">img</span>&nbsp;<span class="op" id="6542759">:=</span>&nbsp;<span class="ident" id="6542762">image</span><span class="op" id="6542767">.</span><span class="ident" id="6542768">NewNRGBA</span><span class="op" id="6542776">(</span><span class="ident" id="6542777">image</span><span class="op" id="6542782">.</span><span class="ident" id="6542783">Rect</span><span class="op" id="6542787">(</span><span class="num" id="6542788">0</span><span class="op" id="6542789">,</span>&nbsp;<span class="num" id="6542791">0</span><span class="op" id="6542792">,</span>&nbsp;<span class="num" id="6542794">640</span><span class="op" id="6542797">,</span>&nbsp;<span class="num" id="6542799">480</span><span class="op" id="6542802">)</span><span class="op" id="6542803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6542806">//&nbsp;Set&nbsp;all&nbsp;pixels&nbsp;to&nbsp;0xFF&nbsp;alpha&nbsp;to&nbsp;force&nbsp;opaque&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542861">bo</span>&nbsp;<span class="op" id="6542864">:=</span>&nbsp;<span class="ident" id="6542867">img</span><span class="op" id="6542870">.</span><span class="ident" id="6542871">Bounds</span><span class="op" id="6542877">(</span><span class="op" id="6542878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542881">for</span>&nbsp;<span class="ident" id="6542885">y</span>&nbsp;<span class="op" id="6542887">:=</span>&nbsp;<span class="ident" id="6542890">bo</span><span class="op" id="6542892">.</span><span class="ident" id="6542893">Min</span><span class="op" id="6542896">.</span><span class="ident" id="6542897">Y</span><span class="op" id="6542898">;</span>&nbsp;<span class="ident" id="6542900">y</span>&nbsp;<span class="op" id="6542902">&lt;</span>&nbsp;<span class="ident" id="6542904">bo</span><span class="op" id="6542906">.</span><span class="ident" id="6542907">Max</span><span class="op" id="6542910">.</span><span class="ident" id="6542911">Y</span><span class="op" id="6542912">;</span>&nbsp;<span class="ident" id="6542914">y</span><span class="op" id="6542915">++</span>&nbsp;<span class="op" id="6542918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6542922">for</span>&nbsp;<span class="ident" id="6542926">x</span>&nbsp;<span class="op" id="6542928">:=</span>&nbsp;<span class="ident" id="6542931">bo</span><span class="op" id="6542933">.</span><span class="ident" id="6542934">Min</span><span class="op" id="6542937">.</span><span class="ident" id="6542938">X</span><span class="op" id="6542939">;</span>&nbsp;<span class="ident" id="6542941">x</span>&nbsp;<span class="op" id="6542943">&lt;</span>&nbsp;<span class="ident" id="6542945">bo</span><span class="op" id="6542947">.</span><span class="ident" id="6542948">Max</span><span class="op" id="6542951">.</span><span class="ident" id="6542952">X</span><span class="op" id="6542953">;</span>&nbsp;<span class="ident" id="6542955">x</span><span class="op" id="6542956">++</span>&nbsp;<span class="op" id="6542959">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6542964">img</span><span class="op" id="6542967">.</span><span class="ident" id="6542968">Set</span><span class="op" id="6542971">(</span><span class="ident" id="6542972">x</span><span class="op" id="6542973">,</span>&nbsp;<span class="ident" id="6542975">y</span><span class="op" id="6542976">,</span>&nbsp;<span class="ident" id="6542978">color</span><span class="op" id="6542983">.</span><span class="ident" id="6542984">NRGBA</span><span class="op" id="6542989">{</span><span class="num" id="6542990">0</span><span class="op" id="6542991">,</span>&nbsp;<span class="num" id="6542993">0</span><span class="op" id="6542994">,</span>&nbsp;<span class="num" id="6542996">0</span><span class="op" id="6542997">,</span>&nbsp;<span class="num" id="6542999">255</span><span class="op" id="6543002">}</span><span class="op" id="6543003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543013">if</span>&nbsp;<span class="op" id="6543016">!</span><span class="ident" id="6543017">img</span><span class="op" id="6543020">.</span><span class="ident" id="6543021">Opaque</span><span class="op" id="6543027">(</span><span class="op" id="6543028">)</span>&nbsp;<span class="op" id="6543030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543034">b</span><span class="op" id="6543035">.</span><span class="ident" id="6543036">Fatal</span><span class="op" id="6543041">(</span><span class="string" id="6543042">&#34;expected&nbsp;image&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="6543071">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543077">b</span><span class="op" id="6543078">.</span><span class="ident" id="6543079">SetBytes</span><span class="op" id="6543087">(</span><span class="num" id="6543088">640</span>&nbsp;<span class="op" id="6543092">*</span>&nbsp;<span class="num" id="6543094">480</span>&nbsp;<span class="op" id="6543098">*</span>&nbsp;<span class="num" id="6543100">4</span><span class="op" id="6543101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543104">b</span><span class="op" id="6543105">.</span><span class="ident" id="6543106">StartTimer</span><span class="op" id="6543116">(</span><span class="op" id="6543117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543120">for</span>&nbsp;<span class="ident" id="6543124">i</span>&nbsp;<span class="op" id="6543126">:=</span>&nbsp;<span class="num" id="6543129">0</span><span class="op" id="6543130">;</span>&nbsp;<span class="ident" id="6543132">i</span>&nbsp;<span class="op" id="6543134">&lt;</span>&nbsp;<span class="ident" id="6543136">b</span><span class="op" id="6543137">.</span><span class="ident" id="6543138">N</span><span class="op" id="6543139">;</span>&nbsp;<span class="ident" id="6543141">i</span><span class="op" id="6543142">++</span>&nbsp;<span class="op" id="6543145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543149">Encode</span><span class="op" id="6543155">(</span><span class="ident" id="6543156">ioutil</span><span class="op" id="6543162">.</span><span class="ident" id="6543163">Discard</span><span class="op" id="6543170">,</span>&nbsp;<span class="ident" id="6543172">img</span><span class="op" id="6543175">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543178">}</span><br>
<span class="lineno"></span><span class="op" id="6543180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543183">func</span>&nbsp;<span class="ident" id="6543188">BenchmarkEncodeNRGBA</span><span class="op" id="6543208">(</span><span class="ident" id="6543209">b</span>&nbsp;<span class="op" id="6543211">*</span><span class="ident" id="6543212">testing</span><span class="op" id="6543219">.</span><span class="ident" id="6543220">B</span><span class="op" id="6543221">)</span>&nbsp;<span class="op" id="6543223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543226">b</span><span class="op" id="6543227">.</span><span class="ident" id="6543228">StopTimer</span><span class="op" id="6543237">(</span><span class="op" id="6543238">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543241">img</span>&nbsp;<span class="op" id="6543245">:=</span>&nbsp;<span class="ident" id="6543248">image</span><span class="op" id="6543253">.</span><span class="ident" id="6543254">NewNRGBA</span><span class="op" id="6543262">(</span><span class="ident" id="6543263">image</span><span class="op" id="6543268">.</span><span class="ident" id="6543269">Rect</span><span class="op" id="6543273">(</span><span class="num" id="6543274">0</span><span class="op" id="6543275">,</span>&nbsp;<span class="num" id="6543277">0</span><span class="op" id="6543278">,</span>&nbsp;<span class="num" id="6543280">640</span><span class="op" id="6543283">,</span>&nbsp;<span class="num" id="6543285">480</span><span class="op" id="6543288">)</span><span class="op" id="6543289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543292">if</span>&nbsp;<span class="ident" id="6543295">img</span><span class="op" id="6543298">.</span><span class="ident" id="6543299">Opaque</span><span class="op" id="6543305">(</span><span class="op" id="6543306">)</span>&nbsp;<span class="op" id="6543308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543312">b</span><span class="op" id="6543313">.</span><span class="ident" id="6543314">Fatal</span><span class="op" id="6543319">(</span><span class="string" id="6543320">&#34;expected&nbsp;image&nbsp;not&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="6543353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543359">b</span><span class="op" id="6543360">.</span><span class="ident" id="6543361">SetBytes</span><span class="op" id="6543369">(</span><span class="num" id="6543370">640</span>&nbsp;<span class="op" id="6543374">*</span>&nbsp;<span class="num" id="6543376">480</span>&nbsp;<span class="op" id="6543380">*</span>&nbsp;<span class="num" id="6543382">4</span><span class="op" id="6543383">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543386">b</span><span class="op" id="6543387">.</span><span class="ident" id="6543388">StartTimer</span><span class="op" id="6543398">(</span><span class="op" id="6543399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543402">for</span>&nbsp;<span class="ident" id="6543406">i</span>&nbsp;<span class="op" id="6543408">:=</span>&nbsp;<span class="num" id="6543411">0</span><span class="op" id="6543412">;</span>&nbsp;<span class="ident" id="6543414">i</span>&nbsp;<span class="op" id="6543416">&lt;</span>&nbsp;<span class="ident" id="6543418">b</span><span class="op" id="6543419">.</span><span class="ident" id="6543420">N</span><span class="op" id="6543421">;</span>&nbsp;<span class="ident" id="6543423">i</span><span class="op" id="6543424">++</span>&nbsp;<span class="op" id="6543427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543431">Encode</span><span class="op" id="6543437">(</span><span class="ident" id="6543438">ioutil</span><span class="op" id="6543444">.</span><span class="ident" id="6543445">Discard</span><span class="op" id="6543452">,</span>&nbsp;<span class="ident" id="6543454">img</span><span class="op" id="6543457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543460">}</span><br>
<span class="lineno"></span><span class="op" id="6543462">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="6543465">func</span>&nbsp;<span class="ident" id="6543470">BenchmarkEncodePaletted</span><span class="op" id="6543493">(</span><span class="ident" id="6543494">b</span>&nbsp;<span class="op" id="6543496">*</span><span class="ident" id="6543497">testing</span><span class="op" id="6543504">.</span><span class="ident" id="6543505">B</span><span class="op" id="6543506">)</span>&nbsp;<span class="op" id="6543508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543511">b</span><span class="op" id="6543512">.</span><span class="ident" id="6543513">StopTimer</span><span class="op" id="6543522">(</span><span class="op" id="6543523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543526">img</span>&nbsp;<span class="op" id="6543530">:=</span>&nbsp;<span class="ident" id="6543533">image</span><span class="op" id="6543538">.</span><span class="ident" id="6543539">NewPaletted</span><span class="op" id="6543550">(</span><span class="ident" id="6543551">image</span><span class="op" id="6543556">.</span><span class="ident" id="6543557">Rect</span><span class="op" id="6543561">(</span><span class="num" id="6543562">0</span><span class="op" id="6543563">,</span>&nbsp;<span class="num" id="6543565">0</span><span class="op" id="6543566">,</span>&nbsp;<span class="num" id="6543568">640</span><span class="op" id="6543571">,</span>&nbsp;<span class="num" id="6543573">480</span><span class="op" id="6543576">)</span><span class="op" id="6543577">,</span>&nbsp;<span class="ident" id="6543579">color</span><span class="op" id="6543584">.</span><span class="ident" id="6543585">Palette</span><span class="op" id="6543592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543596">color</span><span class="op" id="6543601">.</span><span class="ident" id="6543602">RGBA</span><span class="op" id="6543606">{</span><span class="num" id="6543607">0</span><span class="op" id="6543608">,</span>&nbsp;<span class="num" id="6543610">0</span><span class="op" id="6543611">,</span>&nbsp;<span class="num" id="6543613">0</span><span class="op" id="6543614">,</span>&nbsp;<span class="num" id="6543616">255</span><span class="op" id="6543619">}</span><span class="op" id="6543620">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543624">color</span><span class="op" id="6543629">.</span><span class="ident" id="6543630">RGBA</span><span class="op" id="6543634">{</span><span class="num" id="6543635">255</span><span class="op" id="6543638">,</span>&nbsp;<span class="num" id="6543640">255</span><span class="op" id="6543643">,</span>&nbsp;<span class="num" id="6543645">255</span><span class="op" id="6543648">,</span>&nbsp;<span class="num" id="6543650">255</span><span class="op" id="6543653">}</span><span class="op" id="6543654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543657">}</span><span class="op" id="6543658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543661">b</span><span class="op" id="6543662">.</span><span class="ident" id="6543663">SetBytes</span><span class="op" id="6543671">(</span><span class="num" id="6543672">640</span>&nbsp;<span class="op" id="6543676">*</span>&nbsp;<span class="num" id="6543678">480</span>&nbsp;<span class="op" id="6543682">*</span>&nbsp;<span class="num" id="6543684">1</span><span class="op" id="6543685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543688">b</span><span class="op" id="6543689">.</span><span class="ident" id="6543690">StartTimer</span><span class="op" id="6543700">(</span><span class="op" id="6543701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543704">for</span>&nbsp;<span class="ident" id="6543708">i</span>&nbsp;<span class="op" id="6543710">:=</span>&nbsp;<span class="num" id="6543713">0</span><span class="op" id="6543714">;</span>&nbsp;<span class="ident" id="6543716">i</span>&nbsp;<span class="op" id="6543718">&lt;</span>&nbsp;<span class="ident" id="6543720">b</span><span class="op" id="6543721">.</span><span class="ident" id="6543722">N</span><span class="op" id="6543723">;</span>&nbsp;<span class="ident" id="6543725">i</span><span class="op" id="6543726">++</span>&nbsp;<span class="op" id="6543729">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543733">Encode</span><span class="op" id="6543739">(</span><span class="ident" id="6543740">ioutil</span><span class="op" id="6543746">.</span><span class="ident" id="6543747">Discard</span><span class="op" id="6543754">,</span>&nbsp;<span class="ident" id="6543756">img</span><span class="op" id="6543759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6543762">}</span><br>
<span class="lineno"></span><span class="op" id="6543764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543767">func</span>&nbsp;<span class="ident" id="6543772">BenchmarkEncodeRGBOpaque</span><span class="op" id="6543796">(</span><span class="ident" id="6543797">b</span>&nbsp;<span class="op" id="6543799">*</span><span class="ident" id="6543800">testing</span><span class="op" id="6543807">.</span><span class="ident" id="6543808">B</span><span class="op" id="6543809">)</span>&nbsp;<span class="op" id="6543811">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543814">b</span><span class="op" id="6543815">.</span><span class="ident" id="6543816">StopTimer</span><span class="op" id="6543825">(</span><span class="op" id="6543826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543829">img</span>&nbsp;<span class="op" id="6543833">:=</span>&nbsp;<span class="ident" id="6543836">image</span><span class="op" id="6543841">.</span><span class="ident" id="6543842">NewRGBA</span><span class="op" id="6543849">(</span><span class="ident" id="6543850">image</span><span class="op" id="6543855">.</span><span class="ident" id="6543856">Rect</span><span class="op" id="6543860">(</span><span class="num" id="6543861">0</span><span class="op" id="6543862">,</span>&nbsp;<span class="num" id="6543864">0</span><span class="op" id="6543865">,</span>&nbsp;<span class="num" id="6543867">640</span><span class="op" id="6543870">,</span>&nbsp;<span class="num" id="6543872">480</span><span class="op" id="6543875">)</span><span class="op" id="6543876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6543879">//&nbsp;Set&nbsp;all&nbsp;pixels&nbsp;to&nbsp;0xFF&nbsp;alpha&nbsp;to&nbsp;force&nbsp;opaque&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6543934">bo</span>&nbsp;<span class="op" id="6543937">:=</span>&nbsp;<span class="ident" id="6543940">img</span><span class="op" id="6543943">.</span><span class="ident" id="6543944">Bounds</span><span class="op" id="6543950">(</span><span class="op" id="6543951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543954">for</span>&nbsp;<span class="ident" id="6543958">y</span>&nbsp;<span class="op" id="6543960">:=</span>&nbsp;<span class="ident" id="6543963">bo</span><span class="op" id="6543965">.</span><span class="ident" id="6543966">Min</span><span class="op" id="6543969">.</span><span class="ident" id="6543970">Y</span><span class="op" id="6543971">;</span>&nbsp;<span class="ident" id="6543973">y</span>&nbsp;<span class="op" id="6543975">&lt;</span>&nbsp;<span class="ident" id="6543977">bo</span><span class="op" id="6543979">.</span><span class="ident" id="6543980">Max</span><span class="op" id="6543983">.</span><span class="ident" id="6543984">Y</span><span class="op" id="6543985">;</span>&nbsp;<span class="ident" id="6543987">y</span><span class="op" id="6543988">++</span>&nbsp;<span class="op" id="6543991">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6543995">for</span>&nbsp;<span class="ident" id="6543999">x</span>&nbsp;<span class="op" id="6544001">:=</span>&nbsp;<span class="ident" id="6544004">bo</span><span class="op" id="6544006">.</span><span class="ident" id="6544007">Min</span><span class="op" id="6544010">.</span><span class="ident" id="6544011">X</span><span class="op" id="6544012">;</span>&nbsp;<span class="ident" id="6544014">x</span>&nbsp;<span class="op" id="6544016">&lt;</span>&nbsp;<span class="ident" id="6544018">bo</span><span class="op" id="6544020">.</span><span class="ident" id="6544021">Max</span><span class="op" id="6544024">.</span><span class="ident" id="6544025">X</span><span class="op" id="6544026">;</span>&nbsp;<span class="ident" id="6544028">x</span><span class="op" id="6544029">++</span>&nbsp;<span class="op" id="6544032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544037">img</span><span class="op" id="6544040">.</span><span class="ident" id="6544041">Set</span><span class="op" id="6544044">(</span><span class="ident" id="6544045">x</span><span class="op" id="6544046">,</span>&nbsp;<span class="ident" id="6544048">y</span><span class="op" id="6544049">,</span>&nbsp;<span class="ident" id="6544051">color</span><span class="op" id="6544056">.</span><span class="ident" id="6544057">RGBA</span><span class="op" id="6544061">{</span><span class="num" id="6544062">0</span><span class="op" id="6544063">,</span>&nbsp;<span class="num" id="6544065">0</span><span class="op" id="6544066">,</span>&nbsp;<span class="num" id="6544068">0</span><span class="op" id="6544069">,</span>&nbsp;<span class="num" id="6544071">255</span><span class="op" id="6544074">}</span><span class="op" id="6544075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544085">if</span>&nbsp;<span class="op" id="6544088">!</span><span class="ident" id="6544089">img</span><span class="op" id="6544092">.</span><span class="ident" id="6544093">Opaque</span><span class="op" id="6544099">(</span><span class="op" id="6544100">)</span>&nbsp;<span class="op" id="6544102">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544106">b</span><span class="op" id="6544107">.</span><span class="ident" id="6544108">Fatal</span><span class="op" id="6544113">(</span><span class="string" id="6544114">&#34;expected&nbsp;image&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="6544143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544149">b</span><span class="op" id="6544150">.</span><span class="ident" id="6544151">SetBytes</span><span class="op" id="6544159">(</span><span class="num" id="6544160">640</span>&nbsp;<span class="op" id="6544164">*</span>&nbsp;<span class="num" id="6544166">480</span>&nbsp;<span class="op" id="6544170">*</span>&nbsp;<span class="num" id="6544172">4</span><span class="op" id="6544173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544176">b</span><span class="op" id="6544177">.</span><span class="ident" id="6544178">StartTimer</span><span class="op" id="6544188">(</span><span class="op" id="6544189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544192">for</span>&nbsp;<span class="ident" id="6544196">i</span>&nbsp;<span class="op" id="6544198">:=</span>&nbsp;<span class="num" id="6544201">0</span><span class="op" id="6544202">;</span>&nbsp;<span class="ident" id="6544204">i</span>&nbsp;<span class="op" id="6544206">&lt;</span>&nbsp;<span class="ident" id="6544208">b</span><span class="op" id="6544209">.</span><span class="ident" id="6544210">N</span><span class="op" id="6544211">;</span>&nbsp;<span class="ident" id="6544213">i</span><span class="op" id="6544214">++</span>&nbsp;<span class="op" id="6544217">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544221">Encode</span><span class="op" id="6544227">(</span><span class="ident" id="6544228">ioutil</span><span class="op" id="6544234">.</span><span class="ident" id="6544235">Discard</span><span class="op" id="6544242">,</span>&nbsp;<span class="ident" id="6544244">img</span><span class="op" id="6544247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544250">}</span><br>
<span class="lineno"></span><span class="op" id="6544252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6544255">func</span>&nbsp;<span class="ident" id="6544260">BenchmarkEncodeRGBA</span><span class="op" id="6544279">(</span><span class="ident" id="6544280">b</span>&nbsp;<span class="op" id="6544282">*</span><span class="ident" id="6544283">testing</span><span class="op" id="6544290">.</span><span class="ident" id="6544291">B</span><span class="op" id="6544292">)</span>&nbsp;<span class="op" id="6544294">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544297">b</span><span class="op" id="6544298">.</span><span class="ident" id="6544299">StopTimer</span><span class="op" id="6544308">(</span><span class="op" id="6544309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544312">img</span>&nbsp;<span class="op" id="6544316">:=</span>&nbsp;<span class="ident" id="6544319">image</span><span class="op" id="6544324">.</span><span class="ident" id="6544325">NewRGBA</span><span class="op" id="6544332">(</span><span class="ident" id="6544333">image</span><span class="op" id="6544338">.</span><span class="ident" id="6544339">Rect</span><span class="op" id="6544343">(</span><span class="num" id="6544344">0</span><span class="op" id="6544345">,</span>&nbsp;<span class="num" id="6544347">0</span><span class="op" id="6544348">,</span>&nbsp;<span class="num" id="6544350">640</span><span class="op" id="6544353">,</span>&nbsp;<span class="num" id="6544355">480</span><span class="op" id="6544358">)</span><span class="op" id="6544359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544362">if</span>&nbsp;<span class="ident" id="6544365">img</span><span class="op" id="6544368">.</span><span class="ident" id="6544369">Opaque</span><span class="op" id="6544375">(</span><span class="op" id="6544376">)</span>&nbsp;<span class="op" id="6544378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544382">b</span><span class="op" id="6544383">.</span><span class="ident" id="6544384">Fatal</span><span class="op" id="6544389">(</span><span class="string" id="6544390">&#34;expected&nbsp;image&nbsp;not&nbsp;to&nbsp;be&nbsp;opaque&#34;</span><span class="op" id="6544423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544426">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544429">b</span><span class="op" id="6544430">.</span><span class="ident" id="6544431">SetBytes</span><span class="op" id="6544439">(</span><span class="num" id="6544440">640</span>&nbsp;<span class="op" id="6544444">*</span>&nbsp;<span class="num" id="6544446">480</span>&nbsp;<span class="op" id="6544450">*</span>&nbsp;<span class="num" id="6544452">4</span><span class="op" id="6544453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544456">b</span><span class="op" id="6544457">.</span><span class="ident" id="6544458">StartTimer</span><span class="op" id="6544468">(</span><span class="op" id="6544469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6544472">for</span>&nbsp;<span class="ident" id="6544476">i</span>&nbsp;<span class="op" id="6544478">:=</span>&nbsp;<span class="num" id="6544481">0</span><span class="op" id="6544482">;</span>&nbsp;<span class="ident" id="6544484">i</span>&nbsp;<span class="op" id="6544486">&lt;</span>&nbsp;<span class="ident" id="6544488">b</span><span class="op" id="6544489">.</span><span class="ident" id="6544490">N</span><span class="op" id="6544491">;</span>&nbsp;<span class="ident" id="6544493">i</span><span class="op" id="6544494">++</span>&nbsp;<span class="op" id="6544497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6544501">Encode</span><span class="op" id="6544507">(</span><span class="ident" id="6544508">ioutil</span><span class="op" id="6544514">.</span><span class="ident" id="6544515">Discard</span><span class="op" id="6544522">,</span>&nbsp;<span class="ident" id="6544524">img</span><span class="op" id="6544527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6544530">}</span><br>
<span class="lineno">210</span><span class="op" id="6544532">}</span>
</div>
</body>
</html>
