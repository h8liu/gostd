<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html" class="current">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6436932">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6436987">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6437041">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6437092">package</span>&nbsp;<span class="ident" id="6437100">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437105">import</span>&nbsp;<span class="op" id="6437112">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437115">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437124">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437138">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437145">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437151">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437164">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437170">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437181">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437192">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437203">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6437210">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6437213">type</span>&nbsp;<span class="ident" id="6437218">untarTest</span>&nbsp;<span class="keyword" id="6437228">struct</span>&nbsp;<span class="op" id="6437235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437238">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6437246">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437254">headers</span>&nbsp;<span class="op" id="6437262">[</span><span class="op" id="6437263">]</span><span class="op" id="6437264">*</span><span class="ident" id="6437265">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437273">cksums</span>&nbsp;&nbsp;<span class="op" id="6437281">[</span><span class="op" id="6437282">]</span><span class="builtintype" id="6437283">string</span><br>
<span class="lineno"></span><span class="op" id="6437290">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6437293">var</span>&nbsp;<span class="ident" id="6437297">gnuTarTest</span>&nbsp;<span class="op" id="6437308">=</span>&nbsp;<span class="op" id="6437310">&amp;</span><span class="ident" id="6437311">untarTest</span><span class="op" id="6437320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437323">file</span><span class="op" id="6437327">:</span>&nbsp;<span class="string" id="6437329">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6437347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437350">headers</span><span class="op" id="6437357">:</span>&nbsp;<span class="op" id="6437359">[</span><span class="op" id="6437360">]</span><span class="op" id="6437361">*</span><span class="ident" id="6437362">Header</span><span class="op" id="6437368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437372">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437377">Name</span><span class="op" id="6437381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437387">&#34;small.txt&#34;</span><span class="op" id="6437398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437403">Mode</span><span class="op" id="6437407">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437413">0640</span><span class="op" id="6437417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437422">Uid</span><span class="op" id="6437425">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437432">73025</span><span class="op" id="6437437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437442">Gid</span><span class="op" id="6437445">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437452">5000</span><span class="op" id="6437456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437461">Size</span><span class="op" id="6437465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437471">5</span><span class="op" id="6437472">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437477">ModTime</span><span class="op" id="6437484">:</span>&nbsp;&nbsp;<span class="ident" id="6437487">time</span><span class="op" id="6437491">.</span><span class="ident" id="6437492">Unix</span><span class="op" id="6437496">(</span><span class="num" id="6437497">1244428340</span><span class="op" id="6437507">,</span>&nbsp;<span class="num" id="6437509">0</span><span class="op" id="6437510">)</span><span class="op" id="6437511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437516">Typeflag</span><span class="op" id="6437524">:</span>&nbsp;<span class="string" id="6437526">&#39;0&#39;</span><span class="op" id="6437529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437534">Uname</span><span class="op" id="6437539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437544">&#34;dsymonds&#34;</span><span class="op" id="6437554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437559">Gname</span><span class="op" id="6437564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437569">&#34;eng&#34;</span><span class="op" id="6437574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437578">}</span><span class="op" id="6437579">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437588">Name</span><span class="op" id="6437592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437598">&#34;small2.txt&#34;</span><span class="op" id="6437610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437615">Mode</span><span class="op" id="6437619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437625">0640</span><span class="op" id="6437629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437634">Uid</span><span class="op" id="6437637">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437644">73025</span><span class="op" id="6437649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437654">Gid</span><span class="op" id="6437657">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437664">5000</span><span class="op" id="6437668">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437673">Size</span><span class="op" id="6437677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6437683">11</span><span class="op" id="6437685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437690">ModTime</span><span class="op" id="6437697">:</span>&nbsp;&nbsp;<span class="ident" id="6437700">time</span><span class="op" id="6437704">.</span><span class="ident" id="6437705">Unix</span><span class="op" id="6437709">(</span><span class="num" id="6437710">1244436044</span><span class="op" id="6437720">,</span>&nbsp;<span class="num" id="6437722">0</span><span class="op" id="6437723">)</span><span class="op" id="6437724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437729">Typeflag</span><span class="op" id="6437737">:</span>&nbsp;<span class="string" id="6437739">&#39;0&#39;</span><span class="op" id="6437742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437747">Uname</span><span class="op" id="6437752">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437757">&#34;dsymonds&#34;</span><span class="op" id="6437767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437772">Gname</span><span class="op" id="6437777">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437782">&#34;eng&#34;</span><span class="op" id="6437787">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437791">}</span><span class="op" id="6437792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437795">}</span><span class="op" id="6437796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437799">cksums</span><span class="op" id="6437805">:</span>&nbsp;<span class="op" id="6437807">[</span><span class="op" id="6437808">]</span><span class="builtintype" id="6437809">string</span><span class="op" id="6437815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437819">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6437853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6437857">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6437891">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437894">}</span><span class="op" id="6437895">,</span><br>
<span class="lineno"></span><span class="op" id="6437897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6437900">var</span>&nbsp;<span class="ident" id="6437904">sparseTarTest</span>&nbsp;<span class="op" id="6437918">=</span>&nbsp;<span class="op" id="6437920">&amp;</span><span class="ident" id="6437921">untarTest</span><span class="op" id="6437930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437933">file</span><span class="op" id="6437937">:</span>&nbsp;<span class="string" id="6437939">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6437968">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437971">headers</span><span class="op" id="6437978">:</span>&nbsp;<span class="op" id="6437980">[</span><span class="op" id="6437981">]</span><span class="op" id="6437982">*</span><span class="ident" id="6437983">Header</span><span class="op" id="6437989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6437993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6437998">Name</span><span class="op" id="6438002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438008">&#34;sparse-gnu&#34;</span><span class="op" id="6438020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438025">Mode</span><span class="op" id="6438029">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438035">420</span><span class="op" id="6438038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438043">Uid</span><span class="op" id="6438046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438053">1000</span><span class="op" id="6438057">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438062">Gid</span><span class="op" id="6438065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438072">1000</span><span class="op" id="6438076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438081">Size</span><span class="op" id="6438085">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438091">200</span><span class="op" id="6438094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438099">ModTime</span><span class="op" id="6438106">:</span>&nbsp;&nbsp;<span class="ident" id="6438109">time</span><span class="op" id="6438113">.</span><span class="ident" id="6438114">Unix</span><span class="op" id="6438118">(</span><span class="num" id="6438119">1392395740</span><span class="op" id="6438129">,</span>&nbsp;<span class="num" id="6438131">0</span><span class="op" id="6438132">)</span><span class="op" id="6438133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438138">Typeflag</span><span class="op" id="6438146">:</span>&nbsp;<span class="num" id="6438148">0x53</span><span class="op" id="6438152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438157">Linkname</span><span class="op" id="6438165">:</span>&nbsp;<span class="string" id="6438167">&#34;&#34;</span><span class="op" id="6438169">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438174">Uname</span><span class="op" id="6438179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438184">&#34;david&#34;</span><span class="op" id="6438191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438196">Gname</span><span class="op" id="6438201">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438206">&#34;david&#34;</span><span class="op" id="6438213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438218">Devmajor</span><span class="op" id="6438226">:</span>&nbsp;<span class="num" id="6438228">0</span><span class="op" id="6438229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438234">Devminor</span><span class="op" id="6438242">:</span>&nbsp;<span class="num" id="6438244">0</span><span class="op" id="6438245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438249">}</span><span class="op" id="6438250">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438259">Name</span><span class="op" id="6438263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438269">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6438287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438292">Mode</span><span class="op" id="6438296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438302">420</span><span class="op" id="6438305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438310">Uid</span><span class="op" id="6438313">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438320">1000</span><span class="op" id="6438324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438329">Gid</span><span class="op" id="6438332">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438339">1000</span><span class="op" id="6438343">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438348">Size</span><span class="op" id="6438352">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438358">200</span><span class="op" id="6438361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438366">ModTime</span><span class="op" id="6438373">:</span>&nbsp;&nbsp;<span class="ident" id="6438376">time</span><span class="op" id="6438380">.</span><span class="ident" id="6438381">Unix</span><span class="op" id="6438385">(</span><span class="num" id="6438386">1392342187</span><span class="op" id="6438396">,</span>&nbsp;<span class="num" id="6438398">0</span><span class="op" id="6438399">)</span><span class="op" id="6438400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438405">Typeflag</span><span class="op" id="6438413">:</span>&nbsp;<span class="num" id="6438415">0x30</span><span class="op" id="6438419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438424">Linkname</span><span class="op" id="6438432">:</span>&nbsp;<span class="string" id="6438434">&#34;&#34;</span><span class="op" id="6438436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438441">Uname</span><span class="op" id="6438446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438451">&#34;david&#34;</span><span class="op" id="6438458">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438463">Gname</span><span class="op" id="6438468">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438473">&#34;david&#34;</span><span class="op" id="6438480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438485">Devmajor</span><span class="op" id="6438493">:</span>&nbsp;<span class="num" id="6438495">0</span><span class="op" id="6438496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438501">Devminor</span><span class="op" id="6438509">:</span>&nbsp;<span class="num" id="6438511">0</span><span class="op" id="6438512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438516">}</span><span class="op" id="6438517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438521">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438526">Name</span><span class="op" id="6438530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438536">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6438554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438559">Mode</span><span class="op" id="6438563">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438569">420</span><span class="op" id="6438572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438577">Uid</span><span class="op" id="6438580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438587">1000</span><span class="op" id="6438591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438596">Gid</span><span class="op" id="6438599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438606">1000</span><span class="op" id="6438610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438615">Size</span><span class="op" id="6438619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438625">200</span><span class="op" id="6438628">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438633">ModTime</span><span class="op" id="6438640">:</span>&nbsp;&nbsp;<span class="ident" id="6438643">time</span><span class="op" id="6438647">.</span><span class="ident" id="6438648">Unix</span><span class="op" id="6438652">(</span><span class="num" id="6438653">1392340456</span><span class="op" id="6438663">,</span>&nbsp;<span class="num" id="6438665">0</span><span class="op" id="6438666">)</span><span class="op" id="6438667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438672">Typeflag</span><span class="op" id="6438680">:</span>&nbsp;<span class="num" id="6438682">0x30</span><span class="op" id="6438686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438691">Linkname</span><span class="op" id="6438699">:</span>&nbsp;<span class="string" id="6438701">&#34;&#34;</span><span class="op" id="6438703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438708">Uname</span><span class="op" id="6438713">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438718">&#34;david&#34;</span><span class="op" id="6438725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438730">Gname</span><span class="op" id="6438735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438740">&#34;david&#34;</span><span class="op" id="6438747">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438752">Devmajor</span><span class="op" id="6438760">:</span>&nbsp;<span class="num" id="6438762">0</span><span class="op" id="6438763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438768">Devminor</span><span class="op" id="6438776">:</span>&nbsp;<span class="num" id="6438778">0</span><span class="op" id="6438779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438783">}</span><span class="op" id="6438784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6438788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438793">Name</span><span class="op" id="6438797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438803">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6438821">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438826">Mode</span><span class="op" id="6438830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438836">420</span><span class="op" id="6438839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438844">Uid</span><span class="op" id="6438847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438854">1000</span><span class="op" id="6438858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438863">Gid</span><span class="op" id="6438866">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438873">1000</span><span class="op" id="6438877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438882">Size</span><span class="op" id="6438886">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6438892">200</span><span class="op" id="6438895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438900">ModTime</span><span class="op" id="6438907">:</span>&nbsp;&nbsp;<span class="ident" id="6438910">time</span><span class="op" id="6438914">.</span><span class="ident" id="6438915">Unix</span><span class="op" id="6438919">(</span><span class="num" id="6438920">1392337404</span><span class="op" id="6438930">,</span>&nbsp;<span class="num" id="6438932">0</span><span class="op" id="6438933">)</span><span class="op" id="6438934">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438939">Typeflag</span><span class="op" id="6438947">:</span>&nbsp;<span class="num" id="6438949">0x30</span><span class="op" id="6438953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438958">Linkname</span><span class="op" id="6438966">:</span>&nbsp;<span class="string" id="6438968">&#34;&#34;</span><span class="op" id="6438970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438975">Uname</span><span class="op" id="6438980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6438985">&#34;david&#34;</span><span class="op" id="6438992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6438997">Gname</span><span class="op" id="6439002">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439007">&#34;david&#34;</span><span class="op" id="6439014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439019">Devmajor</span><span class="op" id="6439027">:</span>&nbsp;<span class="num" id="6439029">0</span><span class="op" id="6439030">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439035">Devminor</span><span class="op" id="6439043">:</span>&nbsp;<span class="num" id="6439045">0</span><span class="op" id="6439046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439050">}</span><span class="op" id="6439051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439060">Name</span><span class="op" id="6439064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439070">&#34;end&#34;</span><span class="op" id="6439075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439080">Mode</span><span class="op" id="6439084">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439090">420</span><span class="op" id="6439093">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439098">Uid</span><span class="op" id="6439101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439108">1000</span><span class="op" id="6439112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439117">Gid</span><span class="op" id="6439120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439127">1000</span><span class="op" id="6439131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439136">Size</span><span class="op" id="6439140">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439146">4</span><span class="op" id="6439147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439152">ModTime</span><span class="op" id="6439159">:</span>&nbsp;&nbsp;<span class="ident" id="6439162">time</span><span class="op" id="6439166">.</span><span class="ident" id="6439167">Unix</span><span class="op" id="6439171">(</span><span class="num" id="6439172">1392398319</span><span class="op" id="6439182">,</span>&nbsp;<span class="num" id="6439184">0</span><span class="op" id="6439185">)</span><span class="op" id="6439186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439191">Typeflag</span><span class="op" id="6439199">:</span>&nbsp;<span class="num" id="6439201">0x30</span><span class="op" id="6439205">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439210">Linkname</span><span class="op" id="6439218">:</span>&nbsp;<span class="string" id="6439220">&#34;&#34;</span><span class="op" id="6439222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439227">Uname</span><span class="op" id="6439232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439237">&#34;david&#34;</span><span class="op" id="6439244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439249">Gname</span><span class="op" id="6439254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439259">&#34;david&#34;</span><span class="op" id="6439266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439271">Devmajor</span><span class="op" id="6439279">:</span>&nbsp;<span class="num" id="6439281">0</span><span class="op" id="6439282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439287">Devminor</span><span class="op" id="6439295">:</span>&nbsp;<span class="num" id="6439297">0</span><span class="op" id="6439298">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439302">}</span><span class="op" id="6439303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439306">}</span><span class="op" id="6439307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439310">cksums</span><span class="op" id="6439316">:</span>&nbsp;<span class="op" id="6439318">[</span><span class="op" id="6439319">]</span><span class="builtintype" id="6439320">string</span><span class="op" id="6439326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439330">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6439364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439368">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6439402">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439406">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6439440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439444">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6439478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439482">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6439516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439519">}</span><span class="op" id="6439520">,</span><br>
<span class="lineno"></span><span class="op" id="6439522">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6439525">var</span>&nbsp;<span class="ident" id="6439529">untarTests</span>&nbsp;<span class="op" id="6439540">=</span>&nbsp;<span class="op" id="6439542">[</span><span class="op" id="6439543">]</span><span class="op" id="6439544">*</span><span class="ident" id="6439545">untarTest</span><span class="op" id="6439554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439557">gnuTarTest</span><span class="op" id="6439567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439570">sparseTarTest</span><span class="op" id="6439583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439586">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439590">file</span><span class="op" id="6439594">:</span>&nbsp;<span class="string" id="6439596">&#34;testdata/star.tar&#34;</span><span class="op" id="6439615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439619">headers</span><span class="op" id="6439626">:</span>&nbsp;<span class="op" id="6439628">[</span><span class="op" id="6439629">]</span><span class="op" id="6439630">*</span><span class="ident" id="6439631">Header</span><span class="op" id="6439637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439648">Name</span><span class="op" id="6439652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439660">&#34;small.txt&#34;</span><span class="op" id="6439671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439677">Mode</span><span class="op" id="6439681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439689">0640</span><span class="op" id="6439693">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439699">Uid</span><span class="op" id="6439702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439711">73025</span><span class="op" id="6439716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439722">Gid</span><span class="op" id="6439725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439734">5000</span><span class="op" id="6439738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439744">Size</span><span class="op" id="6439748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6439756">5</span><span class="op" id="6439757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439763">ModTime</span><span class="op" id="6439770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439775">time</span><span class="op" id="6439779">.</span><span class="ident" id="6439780">Unix</span><span class="op" id="6439784">(</span><span class="num" id="6439785">1244592783</span><span class="op" id="6439795">,</span>&nbsp;<span class="num" id="6439797">0</span><span class="op" id="6439798">)</span><span class="op" id="6439799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439805">Typeflag</span><span class="op" id="6439813">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6439817">&#39;0&#39;</span><span class="op" id="6439820">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439826">Uname</span><span class="op" id="6439831">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439838">&#34;dsymonds&#34;</span><span class="op" id="6439848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439854">Gname</span><span class="op" id="6439859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439866">&#34;eng&#34;</span><span class="op" id="6439871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439877">AccessTime</span><span class="op" id="6439887">:</span>&nbsp;<span class="ident" id="6439889">time</span><span class="op" id="6439893">.</span><span class="ident" id="6439894">Unix</span><span class="op" id="6439898">(</span><span class="num" id="6439899">1244592783</span><span class="op" id="6439909">,</span>&nbsp;<span class="num" id="6439911">0</span><span class="op" id="6439912">)</span><span class="op" id="6439913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439919">ChangeTime</span><span class="op" id="6439929">:</span>&nbsp;<span class="ident" id="6439931">time</span><span class="op" id="6439935">.</span><span class="ident" id="6439936">Unix</span><span class="op" id="6439940">(</span><span class="num" id="6439941">1244592783</span><span class="op" id="6439951">,</span>&nbsp;<span class="num" id="6439953">0</span><span class="op" id="6439954">)</span><span class="op" id="6439955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439960">}</span><span class="op" id="6439961">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6439966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6439972">Name</span><span class="op" id="6439976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6439984">&#34;small2.txt&#34;</span><span class="op" id="6439996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440002">Mode</span><span class="op" id="6440006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440014">0640</span><span class="op" id="6440018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440024">Uid</span><span class="op" id="6440027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440036">73025</span><span class="op" id="6440041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440047">Gid</span><span class="op" id="6440050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440059">5000</span><span class="op" id="6440063">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440069">Size</span><span class="op" id="6440073">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440081">11</span><span class="op" id="6440083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440089">ModTime</span><span class="op" id="6440096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440101">time</span><span class="op" id="6440105">.</span><span class="ident" id="6440106">Unix</span><span class="op" id="6440110">(</span><span class="num" id="6440111">1244592783</span><span class="op" id="6440121">,</span>&nbsp;<span class="num" id="6440123">0</span><span class="op" id="6440124">)</span><span class="op" id="6440125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440131">Typeflag</span><span class="op" id="6440139">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6440143">&#39;0&#39;</span><span class="op" id="6440146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440152">Uname</span><span class="op" id="6440157">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6440164">&#34;dsymonds&#34;</span><span class="op" id="6440174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440180">Gname</span><span class="op" id="6440185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6440192">&#34;eng&#34;</span><span class="op" id="6440197">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440203">AccessTime</span><span class="op" id="6440213">:</span>&nbsp;<span class="ident" id="6440215">time</span><span class="op" id="6440219">.</span><span class="ident" id="6440220">Unix</span><span class="op" id="6440224">(</span><span class="num" id="6440225">1244592783</span><span class="op" id="6440235">,</span>&nbsp;<span class="num" id="6440237">0</span><span class="op" id="6440238">)</span><span class="op" id="6440239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440245">ChangeTime</span><span class="op" id="6440255">:</span>&nbsp;<span class="ident" id="6440257">time</span><span class="op" id="6440261">.</span><span class="ident" id="6440262">Unix</span><span class="op" id="6440266">(</span><span class="num" id="6440267">1244592783</span><span class="op" id="6440277">,</span>&nbsp;<span class="num" id="6440279">0</span><span class="op" id="6440280">)</span><span class="op" id="6440281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440286">}</span><span class="op" id="6440287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440291">}</span><span class="op" id="6440292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440295">}</span><span class="op" id="6440296">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440303">file</span><span class="op" id="6440307">:</span>&nbsp;<span class="string" id="6440309">&#34;testdata/v7.tar&#34;</span><span class="op" id="6440326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440330">headers</span><span class="op" id="6440337">:</span>&nbsp;<span class="op" id="6440339">[</span><span class="op" id="6440340">]</span><span class="op" id="6440341">*</span><span class="ident" id="6440342">Header</span><span class="op" id="6440348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440359">Name</span><span class="op" id="6440363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6440369">&#34;small.txt&#34;</span><span class="op" id="6440380">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440386">Mode</span><span class="op" id="6440390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440396">0444</span><span class="op" id="6440400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440406">Uid</span><span class="op" id="6440409">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440416">73025</span><span class="op" id="6440421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440427">Gid</span><span class="op" id="6440430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440437">5000</span><span class="op" id="6440441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440447">Size</span><span class="op" id="6440451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440457">5</span><span class="op" id="6440458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440464">ModTime</span><span class="op" id="6440471">:</span>&nbsp;&nbsp;<span class="ident" id="6440474">time</span><span class="op" id="6440478">.</span><span class="ident" id="6440479">Unix</span><span class="op" id="6440483">(</span><span class="num" id="6440484">1244593104</span><span class="op" id="6440494">,</span>&nbsp;<span class="num" id="6440496">0</span><span class="op" id="6440497">)</span><span class="op" id="6440498">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440504">Typeflag</span><span class="op" id="6440512">:</span>&nbsp;<span class="string" id="6440514">&#39;\x00&#39;</span><span class="op" id="6440520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440525">}</span><span class="op" id="6440526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440537">Name</span><span class="op" id="6440541">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6440547">&#34;small2.txt&#34;</span><span class="op" id="6440559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440565">Mode</span><span class="op" id="6440569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440575">0444</span><span class="op" id="6440579">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440585">Uid</span><span class="op" id="6440588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440595">73025</span><span class="op" id="6440600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440606">Gid</span><span class="op" id="6440609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440616">5000</span><span class="op" id="6440620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440626">Size</span><span class="op" id="6440630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6440636">11</span><span class="op" id="6440638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440644">ModTime</span><span class="op" id="6440651">:</span>&nbsp;&nbsp;<span class="ident" id="6440654">time</span><span class="op" id="6440658">.</span><span class="ident" id="6440659">Unix</span><span class="op" id="6440663">(</span><span class="num" id="6440664">1244593104</span><span class="op" id="6440674">,</span>&nbsp;<span class="num" id="6440676">0</span><span class="op" id="6440677">)</span><span class="op" id="6440678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440684">Typeflag</span><span class="op" id="6440692">:</span>&nbsp;<span class="string" id="6440694">&#39;\x00&#39;</span><span class="op" id="6440700">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440705">}</span><span class="op" id="6440706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440710">}</span><span class="op" id="6440711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440714">}</span><span class="op" id="6440715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440722">file</span><span class="op" id="6440726">:</span>&nbsp;<span class="string" id="6440728">&#34;testdata/pax.tar&#34;</span><span class="op" id="6440746">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440750">headers</span><span class="op" id="6440757">:</span>&nbsp;<span class="op" id="6440759">[</span><span class="op" id="6440760">]</span><span class="op" id="6440761">*</span><span class="ident" id="6440762">Header</span><span class="op" id="6440768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6440773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440779">Name</span><span class="op" id="6440783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6440791">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6440987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6440993">Mode</span><span class="op" id="6440997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441005">0664</span><span class="op" id="6441009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441015">Uid</span><span class="op" id="6441018">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441027">1000</span><span class="op" id="6441031">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441037">Gid</span><span class="op" id="6441040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441049">1000</span><span class="op" id="6441053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441059">Uname</span><span class="op" id="6441064">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441071">&#34;shane&#34;</span><span class="op" id="6441078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441084">Gname</span><span class="op" id="6441089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441096">&#34;shane&#34;</span><span class="op" id="6441103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441109">Size</span><span class="op" id="6441113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441121">7</span><span class="op" id="6441122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441128">ModTime</span><span class="op" id="6441135">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441140">time</span><span class="op" id="6441144">.</span><span class="ident" id="6441145">Unix</span><span class="op" id="6441149">(</span><span class="num" id="6441150">1350244992</span><span class="op" id="6441160">,</span>&nbsp;<span class="num" id="6441162">23960108</span><span class="op" id="6441170">)</span><span class="op" id="6441171">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441177">ChangeTime</span><span class="op" id="6441187">:</span>&nbsp;<span class="ident" id="6441189">time</span><span class="op" id="6441193">.</span><span class="ident" id="6441194">Unix</span><span class="op" id="6441198">(</span><span class="num" id="6441199">1350244992</span><span class="op" id="6441209">,</span>&nbsp;<span class="num" id="6441211">23960108</span><span class="op" id="6441219">)</span><span class="op" id="6441220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441226">AccessTime</span><span class="op" id="6441236">:</span>&nbsp;<span class="ident" id="6441238">time</span><span class="op" id="6441242">.</span><span class="ident" id="6441243">Unix</span><span class="op" id="6441247">(</span><span class="num" id="6441248">1350244992</span><span class="op" id="6441258">,</span>&nbsp;<span class="num" id="6441260">23960108</span><span class="op" id="6441268">)</span><span class="op" id="6441269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441275">Typeflag</span><span class="op" id="6441283">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6441287">TypeReg</span><span class="op" id="6441294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441299">}</span><span class="op" id="6441300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441305">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441311">Name</span><span class="op" id="6441315">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441323">&#34;a/b&#34;</span><span class="op" id="6441328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441334">Mode</span><span class="op" id="6441338">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441346">0777</span><span class="op" id="6441350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441356">Uid</span><span class="op" id="6441359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441368">1000</span><span class="op" id="6441372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441378">Gid</span><span class="op" id="6441381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441390">1000</span><span class="op" id="6441394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441400">Uname</span><span class="op" id="6441405">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441412">&#34;shane&#34;</span><span class="op" id="6441419">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441425">Gname</span><span class="op" id="6441430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441437">&#34;shane&#34;</span><span class="op" id="6441444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441450">Size</span><span class="op" id="6441454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6441462">0</span><span class="op" id="6441463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441469">ModTime</span><span class="op" id="6441476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441481">time</span><span class="op" id="6441485">.</span><span class="ident" id="6441486">Unix</span><span class="op" id="6441490">(</span><span class="num" id="6441491">1350266320</span><span class="op" id="6441501">,</span>&nbsp;<span class="num" id="6441503">910238425</span><span class="op" id="6441512">)</span><span class="op" id="6441513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441519">ChangeTime</span><span class="op" id="6441529">:</span>&nbsp;<span class="ident" id="6441531">time</span><span class="op" id="6441535">.</span><span class="ident" id="6441536">Unix</span><span class="op" id="6441540">(</span><span class="num" id="6441541">1350266320</span><span class="op" id="6441551">,</span>&nbsp;<span class="num" id="6441553">910238425</span><span class="op" id="6441562">)</span><span class="op" id="6441563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441569">AccessTime</span><span class="op" id="6441579">:</span>&nbsp;<span class="ident" id="6441581">time</span><span class="op" id="6441585">.</span><span class="ident" id="6441586">Unix</span><span class="op" id="6441590">(</span><span class="num" id="6441591">1350266320</span><span class="op" id="6441601">,</span>&nbsp;<span class="num" id="6441603">910238425</span><span class="op" id="6441612">)</span><span class="op" id="6441613">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441619">Typeflag</span><span class="op" id="6441627">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6441631">TypeSymlink</span><span class="op" id="6441642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441648">Linkname</span><span class="op" id="6441656">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6441660">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6441854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441859">}</span><span class="op" id="6441860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441864">}</span><span class="op" id="6441865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441868">}</span><span class="op" id="6441869">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441876">file</span><span class="op" id="6441880">:</span>&nbsp;<span class="string" id="6441882">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6441904">,</span>&nbsp;<span class="comment" id="6441906">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441933">headers</span><span class="op" id="6441940">:</span>&nbsp;<span class="op" id="6441942">[</span><span class="op" id="6441943">]</span><span class="op" id="6441944">*</span><span class="ident" id="6441945">Header</span><span class="op" id="6441951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6441956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441962">Name</span><span class="op" id="6441966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6441972">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6441990">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6441996">Mode</span><span class="op" id="6442000">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442006">0664</span><span class="op" id="6442010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442016">Uid</span><span class="op" id="6442019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442026">0</span><span class="op" id="6442027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442033">Gid</span><span class="op" id="6442036">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442043">0</span><span class="op" id="6442044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442050">Size</span><span class="op" id="6442054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442060">14</span><span class="op" id="6442062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442068">ModTime</span><span class="op" id="6442075">:</span>&nbsp;&nbsp;<span class="ident" id="6442078">time</span><span class="op" id="6442082">.</span><span class="ident" id="6442083">Unix</span><span class="op" id="6442087">(</span><span class="num" id="6442088">1365454838</span><span class="op" id="6442098">,</span>&nbsp;<span class="num" id="6442100">0</span><span class="op" id="6442101">)</span><span class="op" id="6442102">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442108">Typeflag</span><span class="op" id="6442116">:</span>&nbsp;<span class="ident" id="6442118">TypeReg</span><span class="op" id="6442125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442131">Linkname</span><span class="op" id="6442139">:</span>&nbsp;<span class="string" id="6442141">&#34;&#34;</span><span class="op" id="6442143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442149">Uname</span><span class="op" id="6442154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442159">&#34;eyefi&#34;</span><span class="op" id="6442166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442172">Gname</span><span class="op" id="6442177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442182">&#34;eyefi&#34;</span><span class="op" id="6442189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442195">Devmajor</span><span class="op" id="6442203">:</span>&nbsp;<span class="num" id="6442205">0</span><span class="op" id="6442206">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442212">Devminor</span><span class="op" id="6442220">:</span>&nbsp;<span class="num" id="6442222">0</span><span class="op" id="6442223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442228">}</span><span class="op" id="6442229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442233">}</span><span class="op" id="6442234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442237">}</span><span class="op" id="6442238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442241">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442245">file</span><span class="op" id="6442249">:</span>&nbsp;<span class="string" id="6442251">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6442272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442276">headers</span><span class="op" id="6442283">:</span>&nbsp;<span class="op" id="6442285">[</span><span class="op" id="6442286">]</span><span class="op" id="6442287">*</span><span class="ident" id="6442288">Header</span><span class="op" id="6442294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442305">Name</span><span class="op" id="6442309">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442317">&#34;small.txt&#34;</span><span class="op" id="6442328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442334">Mode</span><span class="op" id="6442338">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442346">0644</span><span class="op" id="6442350">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442356">Uid</span><span class="op" id="6442359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442368">1000</span><span class="op" id="6442372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442378">Gid</span><span class="op" id="6442381">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442390">10</span><span class="op" id="6442392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442398">Size</span><span class="op" id="6442402">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442410">5</span><span class="op" id="6442411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442417">ModTime</span><span class="op" id="6442424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442429">time</span><span class="op" id="6442433">.</span><span class="ident" id="6442434">Unix</span><span class="op" id="6442438">(</span><span class="num" id="6442439">1386065770</span><span class="op" id="6442449">,</span>&nbsp;<span class="num" id="6442451">448252320</span><span class="op" id="6442460">)</span><span class="op" id="6442461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442467">Typeflag</span><span class="op" id="6442475">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6442479">&#39;0&#39;</span><span class="op" id="6442482">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442488">Uname</span><span class="op" id="6442493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442500">&#34;alex&#34;</span><span class="op" id="6442506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442512">Gname</span><span class="op" id="6442517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442524">&#34;wheel&#34;</span><span class="op" id="6442531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442537">AccessTime</span><span class="op" id="6442547">:</span>&nbsp;<span class="ident" id="6442549">time</span><span class="op" id="6442553">.</span><span class="ident" id="6442554">Unix</span><span class="op" id="6442558">(</span><span class="num" id="6442559">1389782991</span><span class="op" id="6442569">,</span>&nbsp;<span class="num" id="6442571">419875220</span><span class="op" id="6442580">)</span><span class="op" id="6442581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442587">ChangeTime</span><span class="op" id="6442597">:</span>&nbsp;<span class="ident" id="6442599">time</span><span class="op" id="6442603">.</span><span class="ident" id="6442604">Unix</span><span class="op" id="6442608">(</span><span class="num" id="6442609">1389782956</span><span class="op" id="6442619">,</span>&nbsp;<span class="num" id="6442621">794414986</span><span class="op" id="6442630">)</span><span class="op" id="6442631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442637">Xattrs</span><span class="op" id="6442643">:</span>&nbsp;<span class="keyword" id="6442645">map</span><span class="op" id="6442648">[</span><span class="builtintype" id="6442649">string</span><span class="op" id="6442655">]</span><span class="builtintype" id="6442656">string</span><span class="op" id="6442662">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442669">&#34;user.key&#34;</span><span class="op" id="6442679">:</span>&nbsp;&nbsp;<span class="string" id="6442682">&#34;value&#34;</span><span class="op" id="6442689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442696">&#34;user.key2&#34;</span><span class="op" id="6442707">:</span>&nbsp;<span class="string" id="6442709">&#34;value2&#34;</span><span class="op" id="6442717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6442724">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442801">&#34;security.selinux&#34;</span><span class="op" id="6442819">:</span>&nbsp;<span class="string" id="6442821">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6442861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442867">}</span><span class="op" id="6442868">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442873">}</span><span class="op" id="6442874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6442879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442885">Name</span><span class="op" id="6442889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6442897">&#34;small2.txt&#34;</span><span class="op" id="6442909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442915">Mode</span><span class="op" id="6442919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442927">0644</span><span class="op" id="6442931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442937">Uid</span><span class="op" id="6442940">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442949">1000</span><span class="op" id="6442953">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442959">Gid</span><span class="op" id="6442962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442971">10</span><span class="op" id="6442973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442979">Size</span><span class="op" id="6442983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6442991">11</span><span class="op" id="6442993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6442999">ModTime</span><span class="op" id="6443006">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443011">time</span><span class="op" id="6443015">.</span><span class="ident" id="6443016">Unix</span><span class="op" id="6443020">(</span><span class="num" id="6443021">1386065770</span><span class="op" id="6443031">,</span>&nbsp;<span class="num" id="6443033">449252304</span><span class="op" id="6443042">)</span><span class="op" id="6443043">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443049">Typeflag</span><span class="op" id="6443057">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6443061">&#39;0&#39;</span><span class="op" id="6443064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443070">Uname</span><span class="op" id="6443075">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443082">&#34;alex&#34;</span><span class="op" id="6443088">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443094">Gname</span><span class="op" id="6443099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443106">&#34;wheel&#34;</span><span class="op" id="6443113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443119">AccessTime</span><span class="op" id="6443129">:</span>&nbsp;<span class="ident" id="6443131">time</span><span class="op" id="6443135">.</span><span class="ident" id="6443136">Unix</span><span class="op" id="6443140">(</span><span class="num" id="6443141">1389782991</span><span class="op" id="6443151">,</span>&nbsp;<span class="num" id="6443153">419875220</span><span class="op" id="6443162">)</span><span class="op" id="6443163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443169">ChangeTime</span><span class="op" id="6443179">:</span>&nbsp;<span class="ident" id="6443181">time</span><span class="op" id="6443185">.</span><span class="ident" id="6443186">Unix</span><span class="op" id="6443190">(</span><span class="num" id="6443191">1386065770</span><span class="op" id="6443201">,</span>&nbsp;<span class="num" id="6443203">449252304</span><span class="op" id="6443212">)</span><span class="op" id="6443213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443219">Xattrs</span><span class="op" id="6443225">:</span>&nbsp;<span class="keyword" id="6443227">map</span><span class="op" id="6443230">[</span><span class="builtintype" id="6443231">string</span><span class="op" id="6443237">]</span><span class="builtintype" id="6443238">string</span><span class="op" id="6443244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6443251">&#34;security.selinux&#34;</span><span class="op" id="6443269">:</span>&nbsp;<span class="string" id="6443271">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6443311">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443317">}</span><span class="op" id="6443318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443323">}</span><span class="op" id="6443324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443328">}</span><span class="op" id="6443329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443332">}</span><span class="op" id="6443333">,</span><br>
<span class="lineno"></span><span class="op" id="6443335">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6443338">func</span>&nbsp;<span class="ident" id="6443343">TestReader</span><span class="op" id="6443353">(</span><span class="ident" id="6443354">t</span>&nbsp;<span class="op" id="6443356">*</span><span class="ident" id="6443357">testing</span><span class="op" id="6443364">.</span><span class="ident" id="6443365">T</span><span class="op" id="6443366">)</span>&nbsp;<span class="op" id="6443368">{</span><br>
<span class="lineno"></span><span class="ident" id="6443370">testLoop</span><span class="op" id="6443378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443381">for</span>&nbsp;<span class="ident" id="6443385">i</span><span class="op" id="6443386">,</span>&nbsp;<span class="ident" id="6443388">test</span>&nbsp;<span class="op" id="6443393">:=</span>&nbsp;<span class="keyword" id="6443396">range</span>&nbsp;<span class="ident" id="6443402">untarTests</span>&nbsp;<span class="op" id="6443413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443417">f</span><span class="op" id="6443418">,</span>&nbsp;<span class="ident" id="6443420">err</span>&nbsp;<span class="op" id="6443424">:=</span>&nbsp;<span class="ident" id="6443427">os</span><span class="op" id="6443429">.</span><span class="ident" id="6443430">Open</span><span class="op" id="6443434">(</span><span class="ident" id="6443435">test</span><span class="op" id="6443439">.</span><span class="ident" id="6443440">file</span><span class="op" id="6443444">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443448">if</span>&nbsp;<span class="ident" id="6443451">err</span>&nbsp;<span class="op" id="6443455">!=</span>&nbsp;<span class="ident" id="6443458">nil</span>&nbsp;<span class="op" id="6443462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443467">t</span><span class="op" id="6443468">.</span><span class="ident" id="6443469">Errorf</span><span class="op" id="6443475">(</span><span class="string" id="6443476">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6443507">,</span>&nbsp;<span class="ident" id="6443509">i</span><span class="op" id="6443510">,</span>&nbsp;<span class="ident" id="6443512">err</span><span class="op" id="6443515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443520">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443535">defer</span>&nbsp;<span class="ident" id="6443541">f</span><span class="op" id="6443542">.</span><span class="ident" id="6443543">Close</span><span class="op" id="6443548">(</span><span class="op" id="6443549">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443553">tr</span>&nbsp;<span class="op" id="6443556">:=</span>&nbsp;<span class="ident" id="6443559">NewReader</span><span class="op" id="6443568">(</span><span class="ident" id="6443569">f</span><span class="op" id="6443570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443574">for</span>&nbsp;<span class="ident" id="6443578">j</span><span class="op" id="6443579">,</span>&nbsp;<span class="ident" id="6443581">header</span>&nbsp;<span class="op" id="6443588">:=</span>&nbsp;<span class="keyword" id="6443591">range</span>&nbsp;<span class="ident" id="6443597">test</span><span class="op" id="6443601">.</span><span class="ident" id="6443602">headers</span>&nbsp;<span class="op" id="6443610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443615">hdr</span><span class="op" id="6443618">,</span>&nbsp;<span class="ident" id="6443620">err</span>&nbsp;<span class="op" id="6443624">:=</span>&nbsp;<span class="ident" id="6443627">tr</span><span class="op" id="6443629">.</span><span class="ident" id="6443630">Next</span><span class="op" id="6443634">(</span><span class="op" id="6443635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443640">if</span>&nbsp;<span class="ident" id="6443643">err</span>&nbsp;<span class="op" id="6443647">!=</span>&nbsp;<span class="ident" id="6443650">nil</span>&nbsp;<span class="op" id="6443654">||</span>&nbsp;<span class="ident" id="6443657">hdr</span>&nbsp;<span class="op" id="6443661">==</span>&nbsp;<span class="ident" id="6443664">nil</span>&nbsp;<span class="op" id="6443668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443674">t</span><span class="op" id="6443675">.</span><span class="ident" id="6443676">Errorf</span><span class="op" id="6443682">(</span><span class="string" id="6443683">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6443724">,</span>&nbsp;<span class="ident" id="6443726">i</span><span class="op" id="6443727">,</span>&nbsp;<span class="ident" id="6443729">j</span><span class="op" id="6443730">,</span>&nbsp;<span class="ident" id="6443732">err</span><span class="op" id="6443735">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443741">f</span><span class="op" id="6443742">.</span><span class="ident" id="6443743">Close</span><span class="op" id="6443748">(</span><span class="op" id="6443749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443755">continue</span>&nbsp;<span class="ident" id="6443764">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443781">if</span>&nbsp;<span class="op" id="6443784">!</span><span class="ident" id="6443785">reflect</span><span class="op" id="6443792">.</span><span class="ident" id="6443793">DeepEqual</span><span class="op" id="6443802">(</span><span class="op" id="6443803">*</span><span class="ident" id="6443804">hdr</span><span class="op" id="6443807">,</span>&nbsp;<span class="op" id="6443809">*</span><span class="ident" id="6443810">header</span><span class="op" id="6443816">)</span>&nbsp;<span class="op" id="6443818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443824">t</span><span class="op" id="6443825">.</span><span class="ident" id="6443826">Errorf</span><span class="op" id="6443832">(</span><span class="string" id="6443833">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6443891">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443898">i</span><span class="op" id="6443899">,</span>&nbsp;<span class="ident" id="6443901">j</span><span class="op" id="6443902">,</span>&nbsp;<span class="op" id="6443904">*</span><span class="ident" id="6443905">hdr</span><span class="op" id="6443908">,</span>&nbsp;<span class="op" id="6443910">*</span><span class="ident" id="6443911">header</span><span class="op" id="6443917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6443930">hdr</span><span class="op" id="6443933">,</span>&nbsp;<span class="ident" id="6443935">err</span>&nbsp;<span class="op" id="6443939">:=</span>&nbsp;<span class="ident" id="6443942">tr</span><span class="op" id="6443944">.</span><span class="ident" id="6443945">Next</span><span class="op" id="6443949">(</span><span class="op" id="6443950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443954">if</span>&nbsp;<span class="ident" id="6443957">err</span>&nbsp;<span class="op" id="6443961">==</span>&nbsp;<span class="ident" id="6443964">io</span><span class="op" id="6443966">.</span><span class="ident" id="6443967">EOF</span>&nbsp;<span class="op" id="6443971">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6443976">continue</span>&nbsp;<span class="ident" id="6443985">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6443996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444000">if</span>&nbsp;<span class="ident" id="6444003">hdr</span>&nbsp;<span class="op" id="6444007">!=</span>&nbsp;<span class="ident" id="6444010">nil</span>&nbsp;<span class="op" id="6444014">||</span>&nbsp;<span class="ident" id="6444017">err</span>&nbsp;<span class="op" id="6444021">!=</span>&nbsp;<span class="ident" id="6444024">nil</span>&nbsp;<span class="op" id="6444028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444033">t</span><span class="op" id="6444034">.</span><span class="ident" id="6444035">Errorf</span><span class="op" id="6444041">(</span><span class="string" id="6444042">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6444093">,</span>&nbsp;<span class="ident" id="6444095">i</span><span class="op" id="6444096">,</span>&nbsp;<span class="ident" id="6444098">hdr</span><span class="op" id="6444101">,</span>&nbsp;<span class="ident" id="6444103">err</span><span class="op" id="6444106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444110">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444113">}</span><br>
<span class="lineno"></span><span class="op" id="6444115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6444118">func</span>&nbsp;<span class="ident" id="6444123">TestPartialRead</span><span class="op" id="6444138">(</span><span class="ident" id="6444139">t</span>&nbsp;<span class="op" id="6444141">*</span><span class="ident" id="6444142">testing</span><span class="op" id="6444149">.</span><span class="ident" id="6444150">T</span><span class="op" id="6444151">)</span>&nbsp;<span class="op" id="6444153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444156">f</span><span class="op" id="6444157">,</span>&nbsp;<span class="ident" id="6444159">err</span>&nbsp;<span class="op" id="6444163">:=</span>&nbsp;<span class="ident" id="6444166">os</span><span class="op" id="6444168">.</span><span class="ident" id="6444169">Open</span><span class="op" id="6444173">(</span><span class="string" id="6444174">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6444192">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444195">if</span>&nbsp;<span class="ident" id="6444198">err</span>&nbsp;<span class="op" id="6444202">!=</span>&nbsp;<span class="ident" id="6444205">nil</span>&nbsp;<span class="op" id="6444209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444213">t</span><span class="op" id="6444214">.</span><span class="ident" id="6444215">Fatalf</span><span class="op" id="6444221">(</span><span class="string" id="6444222">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6444244">,</span>&nbsp;<span class="ident" id="6444246">err</span><span class="op" id="6444249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444255">defer</span>&nbsp;<span class="ident" id="6444261">f</span><span class="op" id="6444262">.</span><span class="ident" id="6444263">Close</span><span class="op" id="6444268">(</span><span class="op" id="6444269">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444273">tr</span>&nbsp;<span class="op" id="6444276">:=</span>&nbsp;<span class="ident" id="6444279">NewReader</span><span class="op" id="6444288">(</span><span class="ident" id="6444289">f</span><span class="op" id="6444290">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444294">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444359">hdr</span><span class="op" id="6444362">,</span>&nbsp;<span class="ident" id="6444364">err</span>&nbsp;<span class="op" id="6444368">:=</span>&nbsp;<span class="ident" id="6444371">tr</span><span class="op" id="6444373">.</span><span class="ident" id="6444374">Next</span><span class="op" id="6444378">(</span><span class="op" id="6444379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444382">if</span>&nbsp;<span class="ident" id="6444385">err</span>&nbsp;<span class="op" id="6444389">!=</span>&nbsp;<span class="ident" id="6444392">nil</span>&nbsp;<span class="op" id="6444396">||</span>&nbsp;<span class="ident" id="6444399">hdr</span>&nbsp;<span class="op" id="6444403">==</span>&nbsp;<span class="ident" id="6444406">nil</span>&nbsp;<span class="op" id="6444410">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444414">t</span><span class="op" id="6444415">.</span><span class="ident" id="6444416">Fatalf</span><span class="op" id="6444422">(</span><span class="string" id="6444423">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6444450">,</span>&nbsp;<span class="ident" id="6444452">err</span><span class="op" id="6444455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444461">buf</span>&nbsp;<span class="op" id="6444465">:=</span>&nbsp;<span class="builtinfunc" id="6444468">make</span><span class="op" id="6444472">(</span><span class="op" id="6444473">[</span><span class="op" id="6444474">]</span><span class="builtintype" id="6444475">byte</span><span class="op" id="6444479">,</span>&nbsp;<span class="num" id="6444481">4</span><span class="op" id="6444482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444485">if</span>&nbsp;<span class="ident" id="6444488">_</span><span class="op" id="6444489">,</span>&nbsp;<span class="ident" id="6444491">err</span>&nbsp;<span class="op" id="6444495">:=</span>&nbsp;<span class="ident" id="6444498">io</span><span class="op" id="6444500">.</span><span class="ident" id="6444501">ReadFull</span><span class="op" id="6444509">(</span><span class="ident" id="6444510">tr</span><span class="op" id="6444512">,</span>&nbsp;<span class="ident" id="6444514">buf</span><span class="op" id="6444517">)</span><span class="op" id="6444518">;</span>&nbsp;<span class="ident" id="6444520">err</span>&nbsp;<span class="op" id="6444524">!=</span>&nbsp;<span class="ident" id="6444527">nil</span>&nbsp;<span class="op" id="6444531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444535">t</span><span class="op" id="6444536">.</span><span class="ident" id="6444537">Fatalf</span><span class="op" id="6444543">(</span><span class="string" id="6444544">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6444566">,</span>&nbsp;<span class="ident" id="6444568">err</span><span class="op" id="6444571">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444577">if</span>&nbsp;<span class="ident" id="6444580">expected</span>&nbsp;<span class="op" id="6444589">:=</span>&nbsp;<span class="op" id="6444592">[</span><span class="op" id="6444593">]</span><span class="builtintype" id="6444594">byte</span><span class="op" id="6444598">(</span><span class="string" id="6444599">&#34;Kilt&#34;</span><span class="op" id="6444605">)</span><span class="op" id="6444606">;</span>&nbsp;<span class="op" id="6444608">!</span><span class="ident" id="6444609">bytes</span><span class="op" id="6444614">.</span><span class="ident" id="6444615">Equal</span><span class="op" id="6444620">(</span><span class="ident" id="6444621">buf</span><span class="op" id="6444624">,</span>&nbsp;<span class="ident" id="6444626">expected</span><span class="op" id="6444634">)</span>&nbsp;<span class="op" id="6444636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444640">t</span><span class="op" id="6444641">.</span><span class="ident" id="6444642">Errorf</span><span class="op" id="6444648">(</span><span class="string" id="6444649">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6444673">,</span>&nbsp;<span class="ident" id="6444675">buf</span><span class="op" id="6444678">,</span>&nbsp;<span class="ident" id="6444680">expected</span><span class="op" id="6444688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6444695">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444711">hdr</span><span class="op" id="6444714">,</span>&nbsp;<span class="ident" id="6444716">err</span>&nbsp;<span class="op" id="6444720">=</span>&nbsp;<span class="ident" id="6444722">tr</span><span class="op" id="6444724">.</span><span class="ident" id="6444725">Next</span><span class="op" id="6444729">(</span><span class="op" id="6444730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444733">if</span>&nbsp;<span class="ident" id="6444736">err</span>&nbsp;<span class="op" id="6444740">!=</span>&nbsp;<span class="ident" id="6444743">nil</span>&nbsp;<span class="op" id="6444747">||</span>&nbsp;<span class="ident" id="6444750">hdr</span>&nbsp;<span class="op" id="6444754">==</span>&nbsp;<span class="ident" id="6444757">nil</span>&nbsp;<span class="op" id="6444761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444765">t</span><span class="op" id="6444766">.</span><span class="ident" id="6444767">Fatalf</span><span class="op" id="6444773">(</span><span class="string" id="6444774">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6444802">,</span>&nbsp;<span class="ident" id="6444804">err</span><span class="op" id="6444807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444810">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444813">buf</span>&nbsp;<span class="op" id="6444817">=</span>&nbsp;<span class="builtinfunc" id="6444819">make</span><span class="op" id="6444823">(</span><span class="op" id="6444824">[</span><span class="op" id="6444825">]</span><span class="builtintype" id="6444826">byte</span><span class="op" id="6444830">,</span>&nbsp;<span class="num" id="6444832">6</span><span class="op" id="6444833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444836">if</span>&nbsp;<span class="ident" id="6444839">_</span><span class="op" id="6444840">,</span>&nbsp;<span class="ident" id="6444842">err</span>&nbsp;<span class="op" id="6444846">:=</span>&nbsp;<span class="ident" id="6444849">io</span><span class="op" id="6444851">.</span><span class="ident" id="6444852">ReadFull</span><span class="op" id="6444860">(</span><span class="ident" id="6444861">tr</span><span class="op" id="6444863">,</span>&nbsp;<span class="ident" id="6444865">buf</span><span class="op" id="6444868">)</span><span class="op" id="6444869">;</span>&nbsp;<span class="ident" id="6444871">err</span>&nbsp;<span class="op" id="6444875">!=</span>&nbsp;<span class="ident" id="6444878">nil</span>&nbsp;<span class="op" id="6444882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444886">t</span><span class="op" id="6444887">.</span><span class="ident" id="6444888">Fatalf</span><span class="op" id="6444894">(</span><span class="string" id="6444895">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6444917">,</span>&nbsp;<span class="ident" id="6444919">err</span><span class="op" id="6444922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6444925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6444928">if</span>&nbsp;<span class="ident" id="6444931">expected</span>&nbsp;<span class="op" id="6444940">:=</span>&nbsp;<span class="op" id="6444943">[</span><span class="op" id="6444944">]</span><span class="builtintype" id="6444945">byte</span><span class="op" id="6444949">(</span><span class="string" id="6444950">&#34;Google&#34;</span><span class="op" id="6444958">)</span><span class="op" id="6444959">;</span>&nbsp;<span class="op" id="6444961">!</span><span class="ident" id="6444962">bytes</span><span class="op" id="6444967">.</span><span class="ident" id="6444968">Equal</span><span class="op" id="6444973">(</span><span class="ident" id="6444974">buf</span><span class="op" id="6444977">,</span>&nbsp;<span class="ident" id="6444979">expected</span><span class="op" id="6444987">)</span>&nbsp;<span class="op" id="6444989">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6444993">t</span><span class="op" id="6444994">.</span><span class="ident" id="6444995">Errorf</span><span class="op" id="6445001">(</span><span class="string" id="6445002">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6445026">,</span>&nbsp;<span class="ident" id="6445028">buf</span><span class="op" id="6445031">,</span>&nbsp;<span class="ident" id="6445033">expected</span><span class="op" id="6445041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445044">}</span><br>
<span class="lineno"></span><span class="op" id="6445046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6445049">func</span>&nbsp;<span class="ident" id="6445054">TestIncrementalRead</span><span class="op" id="6445073">(</span><span class="ident" id="6445074">t</span>&nbsp;<span class="op" id="6445076">*</span><span class="ident" id="6445077">testing</span><span class="op" id="6445084">.</span><span class="ident" id="6445085">T</span><span class="op" id="6445086">)</span>&nbsp;<span class="op" id="6445088">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445091">test</span>&nbsp;<span class="op" id="6445096">:=</span>&nbsp;<span class="ident" id="6445099">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445111">f</span><span class="op" id="6445112">,</span>&nbsp;<span class="ident" id="6445114">err</span>&nbsp;<span class="op" id="6445118">:=</span>&nbsp;<span class="ident" id="6445121">os</span><span class="op" id="6445123">.</span><span class="ident" id="6445124">Open</span><span class="op" id="6445128">(</span><span class="ident" id="6445129">test</span><span class="op" id="6445133">.</span><span class="ident" id="6445134">file</span><span class="op" id="6445138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445141">if</span>&nbsp;<span class="ident" id="6445144">err</span>&nbsp;<span class="op" id="6445148">!=</span>&nbsp;<span class="ident" id="6445151">nil</span>&nbsp;<span class="op" id="6445155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445159">t</span><span class="op" id="6445160">.</span><span class="ident" id="6445161">Fatalf</span><span class="op" id="6445167">(</span><span class="string" id="6445168">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6445190">,</span>&nbsp;<span class="ident" id="6445192">err</span><span class="op" id="6445195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445198">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445201">defer</span>&nbsp;<span class="ident" id="6445207">f</span><span class="op" id="6445208">.</span><span class="ident" id="6445209">Close</span><span class="op" id="6445214">(</span><span class="op" id="6445215">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445219">tr</span>&nbsp;<span class="op" id="6445222">:=</span>&nbsp;<span class="ident" id="6445225">NewReader</span><span class="op" id="6445234">(</span><span class="ident" id="6445235">f</span><span class="op" id="6445236">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445240">headers</span>&nbsp;<span class="op" id="6445248">:=</span>&nbsp;<span class="ident" id="6445251">test</span><span class="op" id="6445255">.</span><span class="ident" id="6445256">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445265">cksums</span>&nbsp;<span class="op" id="6445272">:=</span>&nbsp;<span class="ident" id="6445275">test</span><span class="op" id="6445279">.</span><span class="ident" id="6445280">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445288">nread</span>&nbsp;<span class="op" id="6445294">:=</span>&nbsp;<span class="num" id="6445297">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445301">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445325">for</span>&nbsp;<span class="op" id="6445329">;</span>&nbsp;<span class="op" id="6445331">;</span>&nbsp;<span class="ident" id="6445333">nread</span><span class="op" id="6445338">++</span>&nbsp;<span class="op" id="6445341">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445345">hdr</span><span class="op" id="6445348">,</span>&nbsp;<span class="ident" id="6445350">err</span>&nbsp;<span class="op" id="6445354">:=</span>&nbsp;<span class="ident" id="6445357">tr</span><span class="op" id="6445359">.</span><span class="ident" id="6445360">Next</span><span class="op" id="6445364">(</span><span class="op" id="6445365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445369">if</span>&nbsp;<span class="ident" id="6445372">hdr</span>&nbsp;<span class="op" id="6445376">==</span>&nbsp;<span class="ident" id="6445379">nil</span>&nbsp;<span class="op" id="6445383">||</span>&nbsp;<span class="ident" id="6445386">err</span>&nbsp;<span class="op" id="6445390">==</span>&nbsp;<span class="ident" id="6445393">io</span><span class="op" id="6445395">.</span><span class="ident" id="6445396">EOF</span>&nbsp;<span class="op" id="6445400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445405">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445418">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445440">if</span>&nbsp;<span class="op" id="6445443">!</span><span class="ident" id="6445444">reflect</span><span class="op" id="6445451">.</span><span class="ident" id="6445452">DeepEqual</span><span class="op" id="6445461">(</span><span class="op" id="6445462">*</span><span class="ident" id="6445463">hdr</span><span class="op" id="6445466">,</span>&nbsp;<span class="op" id="6445468">*</span><span class="ident" id="6445469">headers</span><span class="op" id="6445476">[</span><span class="ident" id="6445477">nread</span><span class="op" id="6445482">]</span><span class="op" id="6445483">)</span>&nbsp;<span class="op" id="6445485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445490">t</span><span class="op" id="6445491">.</span><span class="ident" id="6445492">Errorf</span><span class="op" id="6445498">(</span><span class="string" id="6445499">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6445538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445544">*</span><span class="ident" id="6445545">hdr</span><span class="op" id="6445548">,</span>&nbsp;<span class="ident" id="6445550">headers</span><span class="op" id="6445557">[</span><span class="ident" id="6445558">nread</span><span class="op" id="6445563">]</span><span class="op" id="6445564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445568">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445573">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445619">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445649">h</span>&nbsp;<span class="op" id="6445651">:=</span>&nbsp;<span class="ident" id="6445654">md5</span><span class="op" id="6445657">.</span><span class="ident" id="6445658">New</span><span class="op" id="6445661">(</span><span class="op" id="6445662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445666">rdbuf</span>&nbsp;<span class="op" id="6445672">:=</span>&nbsp;<span class="builtinfunc" id="6445675">make</span><span class="op" id="6445679">(</span><span class="op" id="6445680">[</span><span class="op" id="6445681">]</span><span class="builtintype" id="6445682">uint8</span><span class="op" id="6445687">,</span>&nbsp;<span class="num" id="6445689">8</span><span class="op" id="6445690">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445694">for</span>&nbsp;<span class="op" id="6445698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445703">nr</span><span class="op" id="6445705">,</span>&nbsp;<span class="ident" id="6445707">err</span>&nbsp;<span class="op" id="6445711">:=</span>&nbsp;<span class="ident" id="6445714">tr</span><span class="op" id="6445716">.</span><span class="ident" id="6445717">Read</span><span class="op" id="6445721">(</span><span class="ident" id="6445722">rdbuf</span><span class="op" id="6445727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445732">if</span>&nbsp;<span class="ident" id="6445735">err</span>&nbsp;<span class="op" id="6445739">==</span>&nbsp;<span class="ident" id="6445742">io</span><span class="op" id="6445744">.</span><span class="ident" id="6445745">EOF</span>&nbsp;<span class="op" id="6445749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445755">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445764">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445769">if</span>&nbsp;<span class="ident" id="6445772">err</span>&nbsp;<span class="op" id="6445776">!=</span>&nbsp;<span class="ident" id="6445779">nil</span>&nbsp;<span class="op" id="6445783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445789">t</span><span class="op" id="6445790">.</span><span class="ident" id="6445791">Errorf</span><span class="op" id="6445797">(</span><span class="string" id="6445798">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6445827">,</span>&nbsp;<span class="ident" id="6445829">err</span><span class="op" id="6445832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445838">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445852">h</span><span class="op" id="6445853">.</span><span class="ident" id="6445854">Write</span><span class="op" id="6445859">(</span><span class="ident" id="6445860">rdbuf</span><span class="op" id="6445865">[</span><span class="num" id="6445866">0</span><span class="op" id="6445867">:</span><span class="ident" id="6445868">nr</span><span class="op" id="6445870">]</span><span class="op" id="6445871">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6445875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6445879">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445900">have</span>&nbsp;<span class="op" id="6445905">:=</span>&nbsp;<span class="ident" id="6445908">fmt</span><span class="op" id="6445911">.</span><span class="ident" id="6445912">Sprintf</span><span class="op" id="6445919">(</span><span class="string" id="6445920">&#34;%x&#34;</span><span class="op" id="6445924">,</span>&nbsp;<span class="ident" id="6445926">h</span><span class="op" id="6445927">.</span><span class="ident" id="6445928">Sum</span><span class="op" id="6445931">(</span><span class="ident" id="6445932">nil</span><span class="op" id="6445935">)</span><span class="op" id="6445936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445940">want</span>&nbsp;<span class="op" id="6445945">:=</span>&nbsp;<span class="ident" id="6445948">cksums</span><span class="op" id="6445954">[</span><span class="ident" id="6445955">nread</span><span class="op" id="6445960">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6445964">if</span>&nbsp;<span class="ident" id="6445967">want</span>&nbsp;<span class="op" id="6445972">!=</span>&nbsp;<span class="ident" id="6445975">have</span>&nbsp;<span class="op" id="6445980">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6445985">t</span><span class="op" id="6445986">.</span><span class="ident" id="6445987">Errorf</span><span class="op" id="6445993">(</span><span class="string" id="6445994">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6446040">,</span>&nbsp;<span class="ident" id="6446042">hdr</span><span class="op" id="6446045">.</span><span class="ident" id="6446046">Name</span><span class="op" id="6446050">,</span>&nbsp;<span class="ident" id="6446052">have</span><span class="op" id="6446056">,</span>&nbsp;<span class="ident" id="6446058">want</span><span class="op" id="6446062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446072">if</span>&nbsp;<span class="ident" id="6446075">nread</span>&nbsp;<span class="op" id="6446081">!=</span>&nbsp;<span class="builtinfunc" id="6446084">len</span><span class="op" id="6446087">(</span><span class="ident" id="6446088">headers</span><span class="op" id="6446095">)</span>&nbsp;<span class="op" id="6446097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446101">t</span><span class="op" id="6446102">.</span><span class="ident" id="6446103">Errorf</span><span class="op" id="6446109">(</span><span class="string" id="6446110">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6446166">,</span>&nbsp;<span class="builtinfunc" id="6446168">len</span><span class="op" id="6446171">(</span><span class="ident" id="6446172">headers</span><span class="op" id="6446179">)</span><span class="op" id="6446180">,</span>&nbsp;<span class="ident" id="6446182">nread</span><span class="op" id="6446187">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446190">}</span><br>
<span class="lineno"></span><span class="op" id="6446192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6446195">func</span>&nbsp;<span class="ident" id="6446200">TestNonSeekable</span><span class="op" id="6446215">(</span><span class="ident" id="6446216">t</span>&nbsp;<span class="op" id="6446218">*</span><span class="ident" id="6446219">testing</span><span class="op" id="6446226">.</span><span class="ident" id="6446227">T</span><span class="op" id="6446228">)</span>&nbsp;<span class="op" id="6446230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446233">test</span>&nbsp;<span class="op" id="6446238">:=</span>&nbsp;<span class="ident" id="6446241">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446253">f</span><span class="op" id="6446254">,</span>&nbsp;<span class="ident" id="6446256">err</span>&nbsp;<span class="op" id="6446260">:=</span>&nbsp;<span class="ident" id="6446263">os</span><span class="op" id="6446265">.</span><span class="ident" id="6446266">Open</span><span class="op" id="6446270">(</span><span class="ident" id="6446271">test</span><span class="op" id="6446275">.</span><span class="ident" id="6446276">file</span><span class="op" id="6446280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446283">if</span>&nbsp;<span class="ident" id="6446286">err</span>&nbsp;<span class="op" id="6446290">!=</span>&nbsp;<span class="ident" id="6446293">nil</span>&nbsp;<span class="op" id="6446297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446301">t</span><span class="op" id="6446302">.</span><span class="ident" id="6446303">Fatalf</span><span class="op" id="6446309">(</span><span class="string" id="6446310">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6446332">,</span>&nbsp;<span class="ident" id="6446334">err</span><span class="op" id="6446337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446343">defer</span>&nbsp;<span class="ident" id="6446349">f</span><span class="op" id="6446350">.</span><span class="ident" id="6446351">Close</span><span class="op" id="6446356">(</span><span class="op" id="6446357">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446361">type</span>&nbsp;<span class="ident" id="6446366">readerOnly</span>&nbsp;<span class="keyword" id="6446377">struct</span>&nbsp;<span class="op" id="6446384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446388">io</span><span class="op" id="6446390">.</span><span class="ident" id="6446391">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446402">tr</span>&nbsp;<span class="op" id="6446405">:=</span>&nbsp;<span class="ident" id="6446408">NewReader</span><span class="op" id="6446417">(</span><span class="ident" id="6446418">readerOnly</span><span class="op" id="6446428">{</span><span class="ident" id="6446429">f</span><span class="op" id="6446430">}</span><span class="op" id="6446431">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446434">nread</span>&nbsp;<span class="op" id="6446440">:=</span>&nbsp;<span class="num" id="6446443">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446447">for</span>&nbsp;<span class="op" id="6446451">;</span>&nbsp;<span class="op" id="6446453">;</span>&nbsp;<span class="ident" id="6446455">nread</span><span class="op" id="6446460">++</span>&nbsp;<span class="op" id="6446463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446467">_</span><span class="op" id="6446468">,</span>&nbsp;<span class="ident" id="6446470">err</span>&nbsp;<span class="op" id="6446474">:=</span>&nbsp;<span class="ident" id="6446477">tr</span><span class="op" id="6446479">.</span><span class="ident" id="6446480">Next</span><span class="op" id="6446484">(</span><span class="op" id="6446485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446489">if</span>&nbsp;<span class="ident" id="6446492">err</span>&nbsp;<span class="op" id="6446496">==</span>&nbsp;<span class="ident" id="6446499">io</span><span class="op" id="6446501">.</span><span class="ident" id="6446502">EOF</span>&nbsp;<span class="op" id="6446506">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446511">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446523">if</span>&nbsp;<span class="ident" id="6446526">err</span>&nbsp;<span class="op" id="6446530">!=</span>&nbsp;<span class="ident" id="6446533">nil</span>&nbsp;<span class="op" id="6446537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446542">t</span><span class="op" id="6446543">.</span><span class="ident" id="6446544">Fatalf</span><span class="op" id="6446550">(</span><span class="string" id="6446551">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6446573">,</span>&nbsp;<span class="ident" id="6446575">err</span><span class="op" id="6446578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446582">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6446589">if</span>&nbsp;<span class="ident" id="6446592">nread</span>&nbsp;<span class="op" id="6446598">!=</span>&nbsp;<span class="builtinfunc" id="6446601">len</span><span class="op" id="6446604">(</span><span class="ident" id="6446605">test</span><span class="op" id="6446609">.</span><span class="ident" id="6446610">headers</span><span class="op" id="6446617">)</span>&nbsp;<span class="op" id="6446619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446623">t</span><span class="op" id="6446624">.</span><span class="ident" id="6446625">Errorf</span><span class="op" id="6446631">(</span><span class="string" id="6446632">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6446688">,</span>&nbsp;<span class="builtinfunc" id="6446690">len</span><span class="op" id="6446693">(</span><span class="ident" id="6446694">test</span><span class="op" id="6446698">.</span><span class="ident" id="6446699">headers</span><span class="op" id="6446706">)</span><span class="op" id="6446707">,</span>&nbsp;<span class="ident" id="6446709">nread</span><span class="op" id="6446714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446717">}</span><br>
<span class="lineno">440</span><span class="op" id="6446719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6446722">func</span>&nbsp;<span class="ident" id="6446727">TestParsePAXHeader</span><span class="op" id="6446745">(</span><span class="ident" id="6446746">t</span>&nbsp;<span class="op" id="6446748">*</span><span class="ident" id="6446749">testing</span><span class="op" id="6446756">.</span><span class="ident" id="6446757">T</span><span class="op" id="6446758">)</span>&nbsp;<span class="op" id="6446760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6446763">paxTests</span>&nbsp;<span class="op" id="6446772">:=</span>&nbsp;<span class="op" id="6446775">[</span><span class="op" id="6446776">]</span><span class="op" id="6446777">[</span><span class="num" id="6446778">3</span><span class="op" id="6446779">]</span><span class="builtintype" id="6446780">string</span><span class="op" id="6446786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446790">{</span><span class="string" id="6446791">&#34;a&#34;</span><span class="op" id="6446794">,</span>&nbsp;<span class="string" id="6446796">&#34;a=name&#34;</span><span class="op" id="6446804">,</span>&nbsp;<span class="string" id="6446806">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6446819">}</span><span class="op" id="6446820">,</span>&nbsp;<span class="comment" id="6446822">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446875">{</span><span class="string" id="6446876">&#34;a&#34;</span><span class="op" id="6446879">,</span>&nbsp;<span class="string" id="6446881">&#34;a=name&#34;</span><span class="op" id="6446889">,</span>&nbsp;<span class="string" id="6446891">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6446903">}</span><span class="op" id="6446904">,</span>&nbsp;&nbsp;<span class="comment" id="6446907">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6446959">{</span><span class="string" id="6446960">&#34;mtime&#34;</span><span class="op" id="6446967">,</span>&nbsp;<span class="string" id="6446969">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6446997">,</span>&nbsp;<span class="string" id="6446999">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6447032">}</span><span class="op" id="6447033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447036">for</span>&nbsp;<span class="ident" id="6447040">_</span><span class="op" id="6447041">,</span>&nbsp;<span class="ident" id="6447043">test</span>&nbsp;<span class="op" id="6447048">:=</span>&nbsp;<span class="keyword" id="6447051">range</span>&nbsp;<span class="ident" id="6447057">paxTests</span>&nbsp;<span class="op" id="6447066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447070">key</span><span class="op" id="6447073">,</span>&nbsp;<span class="ident" id="6447075">expected</span><span class="op" id="6447083">,</span>&nbsp;<span class="ident" id="6447085">raw</span>&nbsp;<span class="op" id="6447089">:=</span>&nbsp;<span class="ident" id="6447092">test</span><span class="op" id="6447096">[</span><span class="num" id="6447097">0</span><span class="op" id="6447098">]</span><span class="op" id="6447099">,</span>&nbsp;<span class="ident" id="6447101">test</span><span class="op" id="6447105">[</span><span class="num" id="6447106">1</span><span class="op" id="6447107">]</span><span class="op" id="6447108">,</span>&nbsp;<span class="ident" id="6447110">test</span><span class="op" id="6447114">[</span><span class="num" id="6447115">2</span><span class="op" id="6447116">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447120">reader</span>&nbsp;<span class="op" id="6447127">:=</span>&nbsp;<span class="ident" id="6447130">bytes</span><span class="op" id="6447135">.</span><span class="ident" id="6447136">NewReader</span><span class="op" id="6447145">(</span><span class="op" id="6447146">[</span><span class="op" id="6447147">]</span><span class="builtintype" id="6447148">byte</span><span class="op" id="6447152">(</span><span class="ident" id="6447153">raw</span><span class="op" id="6447156">)</span><span class="op" id="6447157">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447161">headers</span><span class="op" id="6447168">,</span>&nbsp;<span class="ident" id="6447170">err</span>&nbsp;<span class="op" id="6447174">:=</span>&nbsp;<span class="ident" id="6447177">parsePAX</span><span class="op" id="6447185">(</span><span class="ident" id="6447186">reader</span><span class="op" id="6447192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447196">if</span>&nbsp;<span class="ident" id="6447199">err</span>&nbsp;<span class="op" id="6447203">!=</span>&nbsp;<span class="ident" id="6447206">nil</span>&nbsp;<span class="op" id="6447210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447215">t</span><span class="op" id="6447216">.</span><span class="ident" id="6447217">Errorf</span><span class="op" id="6447223">(</span><span class="string" id="6447224">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6447272">,</span>&nbsp;<span class="ident" id="6447274">err</span><span class="op" id="6447277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447282">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447293">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447297">if</span>&nbsp;<span class="ident" id="6447300">strings</span><span class="op" id="6447307">.</span><span class="ident" id="6447308">EqualFold</span><span class="op" id="6447317">(</span><span class="ident" id="6447318">headers</span><span class="op" id="6447325">[</span><span class="ident" id="6447326">key</span><span class="op" id="6447329">]</span><span class="op" id="6447330">,</span>&nbsp;<span class="ident" id="6447332">expected</span><span class="op" id="6447340">)</span>&nbsp;<span class="op" id="6447342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447347">t</span><span class="op" id="6447348">.</span><span class="ident" id="6447349">Errorf</span><span class="op" id="6447355">(</span><span class="string" id="6447356">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6447408">,</span>&nbsp;<span class="ident" id="6447410">headers</span><span class="op" id="6447417">[</span><span class="ident" id="6447418">key</span><span class="op" id="6447421">]</span><span class="op" id="6447422">,</span>&nbsp;<span class="ident" id="6447424">expected</span><span class="op" id="6447432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447437">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447452">trailer</span>&nbsp;<span class="op" id="6447460">:=</span>&nbsp;<span class="builtinfunc" id="6447463">make</span><span class="op" id="6447467">(</span><span class="op" id="6447468">[</span><span class="op" id="6447469">]</span><span class="builtintype" id="6447470">byte</span><span class="op" id="6447474">,</span>&nbsp;<span class="num" id="6447476">100</span><span class="op" id="6447479">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447483">n</span><span class="op" id="6447484">,</span>&nbsp;<span class="ident" id="6447486">err</span>&nbsp;<span class="op" id="6447490">:=</span>&nbsp;<span class="ident" id="6447493">reader</span><span class="op" id="6447499">.</span><span class="ident" id="6447500">Read</span><span class="op" id="6447504">(</span><span class="ident" id="6447505">trailer</span><span class="op" id="6447512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447516">if</span>&nbsp;<span class="ident" id="6447519">err</span>&nbsp;<span class="op" id="6447523">!=</span>&nbsp;<span class="ident" id="6447526">io</span><span class="op" id="6447528">.</span><span class="ident" id="6447529">EOF</span>&nbsp;<span class="op" id="6447533">||</span>&nbsp;<span class="ident" id="6447536">n</span>&nbsp;<span class="op" id="6447538">!=</span>&nbsp;<span class="num" id="6447541">0</span>&nbsp;<span class="op" id="6447543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447548">t</span><span class="op" id="6447549">.</span><span class="ident" id="6447550">Error</span><span class="op" id="6447555">(</span><span class="string" id="6447556">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6447580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447587">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447590">badHeader</span>&nbsp;<span class="op" id="6447600">:=</span>&nbsp;<span class="ident" id="6447603">bytes</span><span class="op" id="6447608">.</span><span class="ident" id="6447609">NewReader</span><span class="op" id="6447618">(</span><span class="op" id="6447619">[</span><span class="op" id="6447620">]</span><span class="builtintype" id="6447621">byte</span><span class="op" id="6447625">(</span><span class="string" id="6447626">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6447642">)</span><span class="op" id="6447643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6447646">if</span>&nbsp;<span class="ident" id="6447649">_</span><span class="op" id="6447650">,</span>&nbsp;<span class="ident" id="6447652">err</span>&nbsp;<span class="op" id="6447656">:=</span>&nbsp;<span class="ident" id="6447659">parsePAX</span><span class="op" id="6447667">(</span><span class="ident" id="6447668">badHeader</span><span class="op" id="6447677">)</span><span class="op" id="6447678">;</span>&nbsp;<span class="ident" id="6447680">err</span>&nbsp;<span class="op" id="6447684">!=</span>&nbsp;<span class="ident" id="6447687">ErrHeader</span>&nbsp;<span class="op" id="6447697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447701">t</span><span class="op" id="6447702">.</span><span class="ident" id="6447703">Fatal</span><span class="op" id="6447708">(</span><span class="string" id="6447709">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6447753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6447756">}</span><br>
<span class="lineno"></span><span class="op" id="6447758">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6447761">func</span>&nbsp;<span class="ident" id="6447766">TestParsePAXTime</span><span class="op" id="6447782">(</span><span class="ident" id="6447783">t</span>&nbsp;<span class="op" id="6447785">*</span><span class="ident" id="6447786">testing</span><span class="op" id="6447793">.</span><span class="ident" id="6447794">T</span><span class="op" id="6447795">)</span>&nbsp;<span class="op" id="6447797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6447800">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6447831">timestamps</span>&nbsp;<span class="op" id="6447842">:=</span>&nbsp;<span class="keyword" id="6447845">map</span><span class="op" id="6447848">[</span><span class="builtintype" id="6447849">string</span><span class="op" id="6447855">]</span><span class="ident" id="6447856">time</span><span class="op" id="6447860">.</span><span class="ident" id="6447861">Time</span><span class="op" id="6447865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447869">&#34;1350244992.023960108&#34;</span><span class="op" id="6447891">:</span>&nbsp;&nbsp;<span class="ident" id="6447894">time</span><span class="op" id="6447898">.</span><span class="ident" id="6447899">Unix</span><span class="op" id="6447903">(</span><span class="num" id="6447904">1350244992</span><span class="op" id="6447914">,</span>&nbsp;<span class="num" id="6447916">23960108</span><span class="op" id="6447924">)</span><span class="op" id="6447925">,</span>&nbsp;<span class="comment" id="6447927">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6447948">&#34;1350244992.02396010&#34;</span><span class="op" id="6447969">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6447973">time</span><span class="op" id="6447977">.</span><span class="ident" id="6447978">Unix</span><span class="op" id="6447982">(</span><span class="num" id="6447983">1350244992</span><span class="op" id="6447993">,</span>&nbsp;<span class="num" id="6447995">23960100</span><span class="op" id="6448003">)</span><span class="op" id="6448004">,</span>&nbsp;<span class="comment" id="6448006">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448033">&#34;1350244992.0239601089&#34;</span><span class="op" id="6448056">:</span>&nbsp;<span class="ident" id="6448058">time</span><span class="op" id="6448062">.</span><span class="ident" id="6448063">Unix</span><span class="op" id="6448067">(</span><span class="num" id="6448068">1350244992</span><span class="op" id="6448078">,</span>&nbsp;<span class="num" id="6448080">23960108</span><span class="op" id="6448088">)</span><span class="op" id="6448089">,</span>&nbsp;<span class="comment" id="6448091">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448119">&#34;1350244992&#34;</span><span class="op" id="6448131">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448144">time</span><span class="op" id="6448148">.</span><span class="ident" id="6448149">Unix</span><span class="op" id="6448153">(</span><span class="num" id="6448154">1350244992</span><span class="op" id="6448164">,</span>&nbsp;<span class="num" id="6448166">0</span><span class="op" id="6448167">)</span><span class="op" id="6448168">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6448177">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448204">for</span>&nbsp;<span class="ident" id="6448208">input</span><span class="op" id="6448213">,</span>&nbsp;<span class="ident" id="6448215">expected</span>&nbsp;<span class="op" id="6448224">:=</span>&nbsp;<span class="keyword" id="6448227">range</span>&nbsp;<span class="ident" id="6448233">timestamps</span>&nbsp;<span class="op" id="6448244">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448248">ts</span><span class="op" id="6448250">,</span>&nbsp;<span class="ident" id="6448252">err</span>&nbsp;<span class="op" id="6448256">:=</span>&nbsp;<span class="ident" id="6448259">parsePAXTime</span><span class="op" id="6448271">(</span><span class="ident" id="6448272">input</span><span class="op" id="6448277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448281">if</span>&nbsp;<span class="ident" id="6448284">err</span>&nbsp;<span class="op" id="6448288">!=</span>&nbsp;<span class="ident" id="6448291">nil</span>&nbsp;<span class="op" id="6448295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448300">t</span><span class="op" id="6448301">.</span><span class="ident" id="6448302">Fatal</span><span class="op" id="6448307">(</span><span class="ident" id="6448308">err</span><span class="op" id="6448311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448319">if</span>&nbsp;<span class="op" id="6448322">!</span><span class="ident" id="6448323">ts</span><span class="op" id="6448325">.</span><span class="ident" id="6448326">Equal</span><span class="op" id="6448331">(</span><span class="ident" id="6448332">expected</span><span class="op" id="6448340">)</span>&nbsp;<span class="op" id="6448342">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448347">t</span><span class="op" id="6448348">.</span><span class="ident" id="6448349">Fatalf</span><span class="op" id="6448355">(</span><span class="string" id="6448356">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6448384">,</span>&nbsp;<span class="ident" id="6448386">ts</span><span class="op" id="6448388">,</span>&nbsp;<span class="ident" id="6448390">expected</span><span class="op" id="6448398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448405">}</span><br>
<span class="lineno"></span><span class="op" id="6448407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6448410">func</span>&nbsp;<span class="ident" id="6448415">TestMergePAX</span><span class="op" id="6448427">(</span><span class="ident" id="6448428">t</span>&nbsp;<span class="op" id="6448430">*</span><span class="ident" id="6448431">testing</span><span class="op" id="6448438">.</span><span class="ident" id="6448439">T</span><span class="op" id="6448440">)</span>&nbsp;<span class="op" id="6448442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448445">hdr</span>&nbsp;<span class="op" id="6448449">:=</span>&nbsp;<span class="builtinfunc" id="6448452">new</span><span class="op" id="6448455">(</span><span class="ident" id="6448456">Header</span><span class="op" id="6448462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6448465">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448515">headers</span>&nbsp;<span class="op" id="6448523">:=</span>&nbsp;<span class="keyword" id="6448526">map</span><span class="op" id="6448529">[</span><span class="builtintype" id="6448530">string</span><span class="op" id="6448536">]</span><span class="builtintype" id="6448537">string</span><span class="op" id="6448543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448547">&#34;path&#34;</span><span class="op" id="6448553">:</span>&nbsp;&nbsp;<span class="string" id="6448556">&#34;a/b/c&#34;</span><span class="op" id="6448563">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448567">&#34;uid&#34;</span><span class="op" id="6448572">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6448576">&#34;1000&#34;</span><span class="op" id="6448582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448586">&#34;mtime&#34;</span><span class="op" id="6448593">:</span>&nbsp;<span class="string" id="6448595">&#34;1350244992.023960108&#34;</span><span class="op" id="6448617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448623">err</span>&nbsp;<span class="op" id="6448627">:=</span>&nbsp;<span class="ident" id="6448630">mergePAX</span><span class="op" id="6448638">(</span><span class="ident" id="6448639">hdr</span><span class="op" id="6448642">,</span>&nbsp;<span class="ident" id="6448644">headers</span><span class="op" id="6448651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448654">if</span>&nbsp;<span class="ident" id="6448657">err</span>&nbsp;<span class="op" id="6448661">!=</span>&nbsp;<span class="ident" id="6448664">nil</span>&nbsp;<span class="op" id="6448668">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448672">t</span><span class="op" id="6448673">.</span><span class="ident" id="6448674">Fatal</span><span class="op" id="6448679">(</span><span class="ident" id="6448680">err</span><span class="op" id="6448683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448689">want</span>&nbsp;<span class="op" id="6448694">:=</span>&nbsp;<span class="op" id="6448697">&amp;</span><span class="ident" id="6448698">Header</span><span class="op" id="6448704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448708">Name</span><span class="op" id="6448712">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6448717">&#34;a/b/c&#34;</span><span class="op" id="6448724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448728">Uid</span><span class="op" id="6448731">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6448737">1000</span><span class="op" id="6448741">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448745">ModTime</span><span class="op" id="6448752">:</span>&nbsp;<span class="ident" id="6448754">time</span><span class="op" id="6448758">.</span><span class="ident" id="6448759">Unix</span><span class="op" id="6448763">(</span><span class="num" id="6448764">1350244992</span><span class="op" id="6448774">,</span>&nbsp;<span class="num" id="6448776">23960108</span><span class="op" id="6448784">)</span><span class="op" id="6448785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448791">if</span>&nbsp;<span class="op" id="6448794">!</span><span class="ident" id="6448795">reflect</span><span class="op" id="6448802">.</span><span class="ident" id="6448803">DeepEqual</span><span class="op" id="6448812">(</span><span class="ident" id="6448813">hdr</span><span class="op" id="6448816">,</span>&nbsp;<span class="ident" id="6448818">want</span><span class="op" id="6448822">)</span>&nbsp;<span class="op" id="6448824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448828">t</span><span class="op" id="6448829">.</span><span class="ident" id="6448830">Errorf</span><span class="op" id="6448836">(</span><span class="string" id="6448837">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6448873">,</span>&nbsp;<span class="ident" id="6448875">hdr</span><span class="op" id="6448878">,</span>&nbsp;<span class="ident" id="6448880">want</span><span class="op" id="6448884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6448887">}</span><br>
<span class="lineno">510</span><span class="op" id="6448889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6448892">func</span>&nbsp;<span class="ident" id="6448897">TestSparseEndToEnd</span><span class="op" id="6448915">(</span><span class="ident" id="6448916">t</span>&nbsp;<span class="op" id="6448918">*</span><span class="ident" id="6448919">testing</span><span class="op" id="6448926">.</span><span class="ident" id="6448927">T</span><span class="op" id="6448928">)</span>&nbsp;<span class="op" id="6448930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448933">test</span>&nbsp;<span class="op" id="6448938">:=</span>&nbsp;<span class="ident" id="6448941">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6448956">f</span><span class="op" id="6448957">,</span>&nbsp;<span class="ident" id="6448959">err</span>&nbsp;<span class="op" id="6448963">:=</span>&nbsp;<span class="ident" id="6448966">os</span><span class="op" id="6448968">.</span><span class="ident" id="6448969">Open</span><span class="op" id="6448973">(</span><span class="ident" id="6448974">test</span><span class="op" id="6448978">.</span><span class="ident" id="6448979">file</span><span class="op" id="6448983">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6448986">if</span>&nbsp;<span class="ident" id="6448989">err</span>&nbsp;<span class="op" id="6448993">!=</span>&nbsp;<span class="ident" id="6448996">nil</span>&nbsp;<span class="op" id="6449000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449004">t</span><span class="op" id="6449005">.</span><span class="ident" id="6449006">Fatalf</span><span class="op" id="6449012">(</span><span class="string" id="6449013">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6449035">,</span>&nbsp;<span class="ident" id="6449037">err</span><span class="op" id="6449040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449046">defer</span>&nbsp;<span class="ident" id="6449052">f</span><span class="op" id="6449053">.</span><span class="ident" id="6449054">Close</span><span class="op" id="6449059">(</span><span class="op" id="6449060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449064">tr</span>&nbsp;<span class="op" id="6449067">:=</span>&nbsp;<span class="ident" id="6449070">NewReader</span><span class="op" id="6449079">(</span><span class="ident" id="6449080">f</span><span class="op" id="6449081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449085">headers</span>&nbsp;<span class="op" id="6449093">:=</span>&nbsp;<span class="ident" id="6449096">test</span><span class="op" id="6449100">.</span><span class="ident" id="6449101">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449110">cksums</span>&nbsp;<span class="op" id="6449117">:=</span>&nbsp;<span class="ident" id="6449120">test</span><span class="op" id="6449124">.</span><span class="ident" id="6449125">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449133">nread</span>&nbsp;<span class="op" id="6449139">:=</span>&nbsp;<span class="num" id="6449142">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6449146">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449170">for</span>&nbsp;<span class="op" id="6449174">;</span>&nbsp;<span class="op" id="6449176">;</span>&nbsp;<span class="ident" id="6449178">nread</span><span class="op" id="6449183">++</span>&nbsp;<span class="op" id="6449186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449190">hdr</span><span class="op" id="6449193">,</span>&nbsp;<span class="ident" id="6449195">err</span>&nbsp;<span class="op" id="6449199">:=</span>&nbsp;<span class="ident" id="6449202">tr</span><span class="op" id="6449204">.</span><span class="ident" id="6449205">Next</span><span class="op" id="6449209">(</span><span class="op" id="6449210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449214">if</span>&nbsp;<span class="ident" id="6449217">hdr</span>&nbsp;<span class="op" id="6449221">==</span>&nbsp;<span class="ident" id="6449224">nil</span>&nbsp;<span class="op" id="6449228">||</span>&nbsp;<span class="ident" id="6449231">err</span>&nbsp;<span class="op" id="6449235">==</span>&nbsp;<span class="ident" id="6449238">io</span><span class="op" id="6449240">.</span><span class="ident" id="6449241">EOF</span>&nbsp;<span class="op" id="6449245">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449250">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6449263">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449285">if</span>&nbsp;<span class="op" id="6449288">!</span><span class="ident" id="6449289">reflect</span><span class="op" id="6449296">.</span><span class="ident" id="6449297">DeepEqual</span><span class="op" id="6449306">(</span><span class="op" id="6449307">*</span><span class="ident" id="6449308">hdr</span><span class="op" id="6449311">,</span>&nbsp;<span class="op" id="6449313">*</span><span class="ident" id="6449314">headers</span><span class="op" id="6449321">[</span><span class="ident" id="6449322">nread</span><span class="op" id="6449327">]</span><span class="op" id="6449328">)</span>&nbsp;<span class="op" id="6449330">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449335">t</span><span class="op" id="6449336">.</span><span class="ident" id="6449337">Errorf</span><span class="op" id="6449343">(</span><span class="string" id="6449344">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6449383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449389">*</span><span class="ident" id="6449390">hdr</span><span class="op" id="6449393">,</span>&nbsp;<span class="ident" id="6449395">headers</span><span class="op" id="6449402">[</span><span class="ident" id="6449403">nread</span><span class="op" id="6449408">]</span><span class="op" id="6449409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6449418">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449455">h</span>&nbsp;<span class="op" id="6449457">:=</span>&nbsp;<span class="ident" id="6449460">md5</span><span class="op" id="6449463">.</span><span class="ident" id="6449464">New</span><span class="op" id="6449467">(</span><span class="op" id="6449468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449472">_</span><span class="op" id="6449473">,</span>&nbsp;<span class="ident" id="6449475">err</span>&nbsp;<span class="op" id="6449479">=</span>&nbsp;<span class="ident" id="6449481">io</span><span class="op" id="6449483">.</span><span class="ident" id="6449484">Copy</span><span class="op" id="6449488">(</span><span class="ident" id="6449489">h</span><span class="op" id="6449490">,</span>&nbsp;<span class="ident" id="6449492">tr</span><span class="op" id="6449494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449498">if</span>&nbsp;<span class="ident" id="6449501">err</span>&nbsp;<span class="op" id="6449505">!=</span>&nbsp;<span class="ident" id="6449508">nil</span>&nbsp;<span class="op" id="6449512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449517">t</span><span class="op" id="6449518">.</span><span class="ident" id="6449519">Fatalf</span><span class="op" id="6449525">(</span><span class="string" id="6449526">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6449548">,</span>&nbsp;<span class="ident" id="6449550">err</span><span class="op" id="6449553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449557">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6449562">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449583">have</span>&nbsp;<span class="op" id="6449588">:=</span>&nbsp;<span class="ident" id="6449591">fmt</span><span class="op" id="6449594">.</span><span class="ident" id="6449595">Sprintf</span><span class="op" id="6449602">(</span><span class="string" id="6449603">&#34;%x&#34;</span><span class="op" id="6449607">,</span>&nbsp;<span class="ident" id="6449609">h</span><span class="op" id="6449610">.</span><span class="ident" id="6449611">Sum</span><span class="op" id="6449614">(</span><span class="ident" id="6449615">nil</span><span class="op" id="6449618">)</span><span class="op" id="6449619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449623">want</span>&nbsp;<span class="op" id="6449628">:=</span>&nbsp;<span class="ident" id="6449631">cksums</span><span class="op" id="6449637">[</span><span class="ident" id="6449638">nread</span><span class="op" id="6449643">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449647">if</span>&nbsp;<span class="ident" id="6449650">want</span>&nbsp;<span class="op" id="6449655">!=</span>&nbsp;<span class="ident" id="6449658">have</span>&nbsp;<span class="op" id="6449663">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449668">t</span><span class="op" id="6449669">.</span><span class="ident" id="6449670">Errorf</span><span class="op" id="6449676">(</span><span class="string" id="6449677">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6449723">,</span>&nbsp;<span class="ident" id="6449725">hdr</span><span class="op" id="6449728">.</span><span class="ident" id="6449729">Name</span><span class="op" id="6449733">,</span>&nbsp;<span class="ident" id="6449735">have</span><span class="op" id="6449739">,</span>&nbsp;<span class="ident" id="6449741">want</span><span class="op" id="6449745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6449755">if</span>&nbsp;<span class="ident" id="6449758">nread</span>&nbsp;<span class="op" id="6449764">!=</span>&nbsp;<span class="builtinfunc" id="6449767">len</span><span class="op" id="6449770">(</span><span class="ident" id="6449771">headers</span><span class="op" id="6449778">)</span>&nbsp;<span class="op" id="6449780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449784">t</span><span class="op" id="6449785">.</span><span class="ident" id="6449786">Errorf</span><span class="op" id="6449792">(</span><span class="string" id="6449793">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6449849">,</span>&nbsp;<span class="builtinfunc" id="6449851">len</span><span class="op" id="6449854">(</span><span class="ident" id="6449855">headers</span><span class="op" id="6449862">)</span><span class="op" id="6449863">,</span>&nbsp;<span class="ident" id="6449865">nread</span><span class="op" id="6449870">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6449873">}</span><br>
<span class="lineno"></span><span class="op" id="6449875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6449878">type</span>&nbsp;<span class="ident" id="6449883">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6449902">struct</span>&nbsp;<span class="op" id="6449909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449912">sparseData</span>&nbsp;<span class="op" id="6449923">[</span><span class="op" id="6449924">]</span><span class="builtintype" id="6449925">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449931">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6449942">[</span><span class="op" id="6449943">]</span><span class="ident" id="6449944">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449957">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6449968">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6449975">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6449986">[</span><span class="op" id="6449987">]</span><span class="builtintype" id="6449988">byte</span><br>
<span class="lineno"></span><span class="op" id="6449993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6449996">var</span>&nbsp;<span class="ident" id="6450000">sparseFileReadTests</span>&nbsp;<span class="op" id="6450020">=</span>&nbsp;<span class="op" id="6450022">[</span><span class="op" id="6450023">]</span><span class="ident" id="6450024">sparseFileReadTest</span><span class="op" id="6450042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450049">sparseData</span><span class="op" id="6450059">:</span>&nbsp;<span class="op" id="6450061">[</span><span class="op" id="6450062">]</span><span class="builtintype" id="6450063">byte</span><span class="op" id="6450067">(</span><span class="string" id="6450068">&#34;abcde&#34;</span><span class="op" id="6450075">)</span><span class="op" id="6450076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450080">sparseMap</span><span class="op" id="6450089">:</span>&nbsp;<span class="op" id="6450091">[</span><span class="op" id="6450092">]</span><span class="ident" id="6450093">sparseEntry</span><span class="op" id="6450104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450109">{</span><span class="ident" id="6450110">offset</span><span class="op" id="6450116">:</span>&nbsp;<span class="num" id="6450118">0</span><span class="op" id="6450119">,</span>&nbsp;<span class="ident" id="6450121">numBytes</span><span class="op" id="6450129">:</span>&nbsp;<span class="num" id="6450131">2</span><span class="op" id="6450132">}</span><span class="op" id="6450133">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450138">{</span><span class="ident" id="6450139">offset</span><span class="op" id="6450145">:</span>&nbsp;<span class="num" id="6450147">5</span><span class="op" id="6450148">,</span>&nbsp;<span class="ident" id="6450150">numBytes</span><span class="op" id="6450158">:</span>&nbsp;<span class="num" id="6450160">3</span><span class="op" id="6450161">}</span><span class="op" id="6450162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450166">}</span><span class="op" id="6450167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450171">realSize</span><span class="op" id="6450179">:</span>&nbsp;<span class="num" id="6450181">8</span><span class="op" id="6450182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450186">expected</span><span class="op" id="6450194">:</span>&nbsp;<span class="op" id="6450196">[</span><span class="op" id="6450197">]</span><span class="builtintype" id="6450198">byte</span><span class="op" id="6450202">(</span><span class="string" id="6450203">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6450222">)</span><span class="op" id="6450223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450226">}</span><span class="op" id="6450227">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450234">sparseData</span><span class="op" id="6450244">:</span>&nbsp;<span class="op" id="6450246">[</span><span class="op" id="6450247">]</span><span class="builtintype" id="6450248">byte</span><span class="op" id="6450252">(</span><span class="string" id="6450253">&#34;abcde&#34;</span><span class="op" id="6450260">)</span><span class="op" id="6450261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450265">sparseMap</span><span class="op" id="6450274">:</span>&nbsp;<span class="op" id="6450276">[</span><span class="op" id="6450277">]</span><span class="ident" id="6450278">sparseEntry</span><span class="op" id="6450289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450294">{</span><span class="ident" id="6450295">offset</span><span class="op" id="6450301">:</span>&nbsp;<span class="num" id="6450303">0</span><span class="op" id="6450304">,</span>&nbsp;<span class="ident" id="6450306">numBytes</span><span class="op" id="6450314">:</span>&nbsp;<span class="num" id="6450316">2</span><span class="op" id="6450317">}</span><span class="op" id="6450318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450323">{</span><span class="ident" id="6450324">offset</span><span class="op" id="6450330">:</span>&nbsp;<span class="num" id="6450332">5</span><span class="op" id="6450333">,</span>&nbsp;<span class="ident" id="6450335">numBytes</span><span class="op" id="6450343">:</span>&nbsp;<span class="num" id="6450345">3</span><span class="op" id="6450346">}</span><span class="op" id="6450347">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450351">}</span><span class="op" id="6450352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450356">realSize</span><span class="op" id="6450364">:</span>&nbsp;<span class="num" id="6450366">10</span><span class="op" id="6450368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450372">expected</span><span class="op" id="6450380">:</span>&nbsp;<span class="op" id="6450382">[</span><span class="op" id="6450383">]</span><span class="builtintype" id="6450384">byte</span><span class="op" id="6450388">(</span><span class="string" id="6450389">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6450416">)</span><span class="op" id="6450417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450420">}</span><span class="op" id="6450421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450424">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450428">sparseData</span><span class="op" id="6450438">:</span>&nbsp;<span class="op" id="6450440">[</span><span class="op" id="6450441">]</span><span class="builtintype" id="6450442">byte</span><span class="op" id="6450446">(</span><span class="string" id="6450447">&#34;abcde&#34;</span><span class="op" id="6450454">)</span><span class="op" id="6450455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450459">sparseMap</span><span class="op" id="6450468">:</span>&nbsp;<span class="op" id="6450470">[</span><span class="op" id="6450471">]</span><span class="ident" id="6450472">sparseEntry</span><span class="op" id="6450483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450488">{</span><span class="ident" id="6450489">offset</span><span class="op" id="6450495">:</span>&nbsp;<span class="num" id="6450497">1</span><span class="op" id="6450498">,</span>&nbsp;<span class="ident" id="6450500">numBytes</span><span class="op" id="6450508">:</span>&nbsp;<span class="num" id="6450510">3</span><span class="op" id="6450511">}</span><span class="op" id="6450512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450517">{</span><span class="ident" id="6450518">offset</span><span class="op" id="6450524">:</span>&nbsp;<span class="num" id="6450526">6</span><span class="op" id="6450527">,</span>&nbsp;<span class="ident" id="6450529">numBytes</span><span class="op" id="6450537">:</span>&nbsp;<span class="num" id="6450539">2</span><span class="op" id="6450540">}</span><span class="op" id="6450541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450545">}</span><span class="op" id="6450546">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450550">realSize</span><span class="op" id="6450558">:</span>&nbsp;<span class="num" id="6450560">8</span><span class="op" id="6450561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450565">expected</span><span class="op" id="6450573">:</span>&nbsp;<span class="op" id="6450575">[</span><span class="op" id="6450576">]</span><span class="builtintype" id="6450577">byte</span><span class="op" id="6450581">(</span><span class="string" id="6450582">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6450601">)</span><span class="op" id="6450602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450605">}</span><span class="op" id="6450606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450613">sparseData</span><span class="op" id="6450623">:</span>&nbsp;<span class="op" id="6450625">[</span><span class="op" id="6450626">]</span><span class="builtintype" id="6450627">byte</span><span class="op" id="6450631">(</span><span class="string" id="6450632">&#34;abcde&#34;</span><span class="op" id="6450639">)</span><span class="op" id="6450640">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450644">sparseMap</span><span class="op" id="6450653">:</span>&nbsp;<span class="op" id="6450655">[</span><span class="op" id="6450656">]</span><span class="ident" id="6450657">sparseEntry</span><span class="op" id="6450668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450673">{</span><span class="ident" id="6450674">offset</span><span class="op" id="6450680">:</span>&nbsp;<span class="num" id="6450682">1</span><span class="op" id="6450683">,</span>&nbsp;<span class="ident" id="6450685">numBytes</span><span class="op" id="6450693">:</span>&nbsp;<span class="num" id="6450695">3</span><span class="op" id="6450696">}</span><span class="op" id="6450697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450702">{</span><span class="ident" id="6450703">offset</span><span class="op" id="6450709">:</span>&nbsp;<span class="num" id="6450711">6</span><span class="op" id="6450712">,</span>&nbsp;<span class="ident" id="6450714">numBytes</span><span class="op" id="6450722">:</span>&nbsp;<span class="num" id="6450724">2</span><span class="op" id="6450725">}</span><span class="op" id="6450726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450730">}</span><span class="op" id="6450731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450735">realSize</span><span class="op" id="6450743">:</span>&nbsp;<span class="num" id="6450745">10</span><span class="op" id="6450747">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450751">expected</span><span class="op" id="6450759">:</span>&nbsp;<span class="op" id="6450761">[</span><span class="op" id="6450762">]</span><span class="builtintype" id="6450763">byte</span><span class="op" id="6450767">(</span><span class="string" id="6450768">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6450795">)</span><span class="op" id="6450796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450799">}</span><span class="op" id="6450800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450807">sparseData</span><span class="op" id="6450817">:</span>&nbsp;<span class="op" id="6450819">[</span><span class="op" id="6450820">]</span><span class="builtintype" id="6450821">byte</span><span class="op" id="6450825">(</span><span class="string" id="6450826">&#34;&#34;</span><span class="op" id="6450828">)</span><span class="op" id="6450829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450833">sparseMap</span><span class="op" id="6450842">:</span>&nbsp;&nbsp;<span class="ident" id="6450845">nil</span><span class="op" id="6450848">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450852">realSize</span><span class="op" id="6450860">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6450864">2</span><span class="op" id="6450865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450869">expected</span><span class="op" id="6450877">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6450881">[</span><span class="op" id="6450882">]</span><span class="builtintype" id="6450883">byte</span><span class="op" id="6450887">(</span><span class="string" id="6450888">&#34;\x00\x00&#34;</span><span class="op" id="6450898">)</span><span class="op" id="6450899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6450902">}</span><span class="op" id="6450903">,</span><br>
<span class="lineno"></span><span class="op" id="6450905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6450908">func</span>&nbsp;<span class="ident" id="6450913">TestSparseFileReader</span><span class="op" id="6450933">(</span><span class="ident" id="6450934">t</span>&nbsp;<span class="op" id="6450936">*</span><span class="ident" id="6450937">testing</span><span class="op" id="6450944">.</span><span class="ident" id="6450945">T</span><span class="op" id="6450946">)</span>&nbsp;<span class="op" id="6450948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6450951">for</span>&nbsp;<span class="ident" id="6450955">i</span><span class="op" id="6450956">,</span>&nbsp;<span class="ident" id="6450958">test</span>&nbsp;<span class="op" id="6450963">:=</span>&nbsp;<span class="keyword" id="6450966">range</span>&nbsp;<span class="ident" id="6450972">sparseFileReadTests</span>&nbsp;<span class="op" id="6450992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6450996">r</span>&nbsp;<span class="op" id="6450998">:=</span>&nbsp;<span class="ident" id="6451001">bytes</span><span class="op" id="6451006">.</span><span class="ident" id="6451007">NewReader</span><span class="op" id="6451016">(</span><span class="ident" id="6451017">test</span><span class="op" id="6451021">.</span><span class="ident" id="6451022">sparseData</span><span class="op" id="6451032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451036">nb</span>&nbsp;<span class="op" id="6451039">:=</span>&nbsp;<span class="ident" id="6451042">int64</span><span class="op" id="6451047">(</span><span class="ident" id="6451048">r</span><span class="op" id="6451049">.</span><span class="ident" id="6451050">Len</span><span class="op" id="6451053">(</span><span class="op" id="6451054">)</span><span class="op" id="6451055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451059">sfr</span>&nbsp;<span class="op" id="6451063">:=</span>&nbsp;<span class="op" id="6451066">&amp;</span><span class="ident" id="6451067">sparseFileReader</span><span class="op" id="6451083">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451088">rfr</span><span class="op" id="6451091">:</span>&nbsp;<span class="op" id="6451093">&amp;</span><span class="ident" id="6451094">regFileReader</span><span class="op" id="6451107">{</span><span class="ident" id="6451108">r</span><span class="op" id="6451109">:</span>&nbsp;<span class="ident" id="6451111">r</span><span class="op" id="6451112">,</span>&nbsp;<span class="ident" id="6451114">nb</span><span class="op" id="6451116">:</span>&nbsp;<span class="ident" id="6451118">nb</span><span class="op" id="6451120">}</span><span class="op" id="6451121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451126">sp</span><span class="op" id="6451128">:</span>&nbsp;&nbsp;<span class="ident" id="6451131">test</span><span class="op" id="6451135">.</span><span class="ident" id="6451136">sparseMap</span><span class="op" id="6451145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451150">pos</span><span class="op" id="6451153">:</span>&nbsp;<span class="num" id="6451155">0</span><span class="op" id="6451156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451161">tot</span><span class="op" id="6451164">:</span>&nbsp;<span class="ident" id="6451166">test</span><span class="op" id="6451170">.</span><span class="ident" id="6451171">realSize</span><span class="op" id="6451179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451183">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451187">if</span>&nbsp;<span class="ident" id="6451190">sfr</span><span class="op" id="6451193">.</span><span class="ident" id="6451194">numBytes</span><span class="op" id="6451202">(</span><span class="op" id="6451203">)</span>&nbsp;<span class="op" id="6451205">!=</span>&nbsp;<span class="ident" id="6451208">nb</span>&nbsp;<span class="op" id="6451211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451216">t</span><span class="op" id="6451217">.</span><span class="ident" id="6451218">Errorf</span><span class="op" id="6451224">(</span><span class="string" id="6451225">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6451280">,</span>&nbsp;<span class="ident" id="6451282">i</span><span class="op" id="6451283">,</span>&nbsp;<span class="ident" id="6451285">sfr</span><span class="op" id="6451288">.</span><span class="ident" id="6451289">numBytes</span><span class="op" id="6451297">(</span><span class="op" id="6451298">)</span><span class="op" id="6451299">,</span>&nbsp;<span class="ident" id="6451301">nb</span><span class="op" id="6451303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451311">buf</span><span class="op" id="6451314">,</span>&nbsp;<span class="ident" id="6451316">err</span>&nbsp;<span class="op" id="6451320">:=</span>&nbsp;<span class="ident" id="6451323">ioutil</span><span class="op" id="6451329">.</span><span class="ident" id="6451330">ReadAll</span><span class="op" id="6451337">(</span><span class="ident" id="6451338">sfr</span><span class="op" id="6451341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451345">if</span>&nbsp;<span class="ident" id="6451348">err</span>&nbsp;<span class="op" id="6451352">!=</span>&nbsp;<span class="ident" id="6451355">nil</span>&nbsp;<span class="op" id="6451359">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451364">t</span><span class="op" id="6451365">.</span><span class="ident" id="6451366">Errorf</span><span class="op" id="6451372">(</span><span class="string" id="6451373">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6451404">,</span>&nbsp;<span class="ident" id="6451406">i</span><span class="op" id="6451407">,</span>&nbsp;<span class="ident" id="6451409">err</span><span class="op" id="6451412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451420">if</span>&nbsp;<span class="ident" id="6451423">e</span>&nbsp;<span class="op" id="6451425">:=</span>&nbsp;<span class="ident" id="6451428">test</span><span class="op" id="6451432">.</span><span class="ident" id="6451433">expected</span><span class="op" id="6451441">;</span>&nbsp;<span class="op" id="6451443">!</span><span class="ident" id="6451444">bytes</span><span class="op" id="6451449">.</span><span class="ident" id="6451450">Equal</span><span class="op" id="6451455">(</span><span class="ident" id="6451456">buf</span><span class="op" id="6451459">,</span>&nbsp;<span class="ident" id="6451461">e</span><span class="op" id="6451462">)</span>&nbsp;<span class="op" id="6451464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451469">t</span><span class="op" id="6451470">.</span><span class="ident" id="6451471">Errorf</span><span class="op" id="6451477">(</span><span class="string" id="6451478">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6451511">,</span>&nbsp;<span class="ident" id="6451513">i</span><span class="op" id="6451514">,</span>&nbsp;<span class="ident" id="6451516">buf</span><span class="op" id="6451519">,</span>&nbsp;<span class="ident" id="6451521">e</span><span class="op" id="6451522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451526">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6451530">if</span>&nbsp;<span class="ident" id="6451533">sfr</span><span class="op" id="6451536">.</span><span class="ident" id="6451537">numBytes</span><span class="op" id="6451545">(</span><span class="op" id="6451546">)</span>&nbsp;<span class="op" id="6451548">!=</span>&nbsp;<span class="num" id="6451551">0</span>&nbsp;<span class="op" id="6451553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451558">t</span><span class="op" id="6451559">.</span><span class="ident" id="6451560">Errorf</span><span class="op" id="6451566">(</span><span class="string" id="6451567">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6451627">,</span>&nbsp;<span class="ident" id="6451629">i</span><span class="op" id="6451630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6451637">}</span><br>
<span class="lineno"></span><span class="op" id="6451639">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6451642">func</span>&nbsp;<span class="ident" id="6451647">TestSparseIncrementalRead</span><span class="op" id="6451672">(</span><span class="ident" id="6451673">t</span>&nbsp;<span class="op" id="6451675">*</span><span class="ident" id="6451676">testing</span><span class="op" id="6451683">.</span><span class="ident" id="6451684">T</span><span class="op" id="6451685">)</span>&nbsp;<span class="op" id="6451687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451690">sparseMap</span>&nbsp;<span class="op" id="6451700">:=</span>&nbsp;<span class="op" id="6451703">[</span><span class="op" id="6451704">]</span><span class="ident" id="6451705">sparseEntry</span><span class="op" id="6451716">{</span><span class="op" id="6451717">{</span><span class="num" id="6451718">10</span><span class="op" id="6451720">,</span>&nbsp;<span class="num" id="6451722">2</span><span class="op" id="6451723">}</span><span class="op" id="6451724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451727">sparseData</span>&nbsp;<span class="op" id="6451738">:=</span>&nbsp;<span class="op" id="6451741">[</span><span class="op" id="6451742">]</span><span class="builtintype" id="6451743">byte</span><span class="op" id="6451747">(</span><span class="string" id="6451748">&#34;Go&#34;</span><span class="op" id="6451752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451755">expected</span>&nbsp;<span class="op" id="6451764">:=</span>&nbsp;<span class="string" id="6451767">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451846">r</span>&nbsp;<span class="op" id="6451848">:=</span>&nbsp;<span class="ident" id="6451851">bytes</span><span class="op" id="6451856">.</span><span class="ident" id="6451857">NewReader</span><span class="op" id="6451866">(</span><span class="ident" id="6451867">sparseData</span><span class="op" id="6451877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451880">nb</span>&nbsp;<span class="op" id="6451883">:=</span>&nbsp;<span class="ident" id="6451886">int64</span><span class="op" id="6451891">(</span><span class="ident" id="6451892">r</span><span class="op" id="6451893">.</span><span class="ident" id="6451894">Len</span><span class="op" id="6451897">(</span><span class="op" id="6451898">)</span><span class="op" id="6451899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451902">sfr</span>&nbsp;<span class="op" id="6451906">:=</span>&nbsp;<span class="op" id="6451909">&amp;</span><span class="ident" id="6451910">sparseFileReader</span><span class="op" id="6451926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451930">rfr</span><span class="op" id="6451933">:</span>&nbsp;<span class="op" id="6451935">&amp;</span><span class="ident" id="6451936">regFileReader</span><span class="op" id="6451949">{</span><span class="ident" id="6451950">r</span><span class="op" id="6451951">:</span>&nbsp;<span class="ident" id="6451953">r</span><span class="op" id="6451954">,</span>&nbsp;<span class="ident" id="6451956">nb</span><span class="op" id="6451958">:</span>&nbsp;<span class="ident" id="6451960">nb</span><span class="op" id="6451962">}</span><span class="op" id="6451963">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451967">sp</span><span class="op" id="6451969">:</span>&nbsp;&nbsp;<span class="ident" id="6451972">sparseMap</span><span class="op" id="6451981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451985">pos</span><span class="op" id="6451988">:</span>&nbsp;<span class="num" id="6451990">0</span><span class="op" id="6451991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6451995">tot</span><span class="op" id="6451998">:</span>&nbsp;<span class="ident" id="6452000">int64</span><span class="op" id="6452005">(</span><span class="builtinfunc" id="6452006">len</span><span class="op" id="6452009">(</span><span class="ident" id="6452010">expected</span><span class="op" id="6452018">)</span><span class="op" id="6452019">)</span><span class="op" id="6452020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6452027">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6452096">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452144">var</span>&nbsp;<span class="ident" id="6452148">outputBuf</span>&nbsp;<span class="ident" id="6452158">bytes</span><span class="op" id="6452163">.</span><span class="ident" id="6452164">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452172">buf</span>&nbsp;<span class="op" id="6452176">:=</span>&nbsp;<span class="builtinfunc" id="6452179">make</span><span class="op" id="6452183">(</span><span class="op" id="6452184">[</span><span class="op" id="6452185">]</span><span class="builtintype" id="6452186">byte</span><span class="op" id="6452190">,</span>&nbsp;<span class="num" id="6452192">6</span><span class="op" id="6452193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452196">for</span>&nbsp;<span class="op" id="6452200">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452204">n</span><span class="op" id="6452205">,</span>&nbsp;<span class="ident" id="6452207">err</span>&nbsp;<span class="op" id="6452211">:=</span>&nbsp;<span class="ident" id="6452214">sfr</span><span class="op" id="6452217">.</span><span class="ident" id="6452218">Read</span><span class="op" id="6452222">(</span><span class="ident" id="6452223">buf</span><span class="op" id="6452226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452230">if</span>&nbsp;<span class="ident" id="6452233">err</span>&nbsp;<span class="op" id="6452237">==</span>&nbsp;<span class="ident" id="6452240">io</span><span class="op" id="6452242">.</span><span class="ident" id="6452243">EOF</span>&nbsp;<span class="op" id="6452247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452252">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452264">if</span>&nbsp;<span class="ident" id="6452267">err</span>&nbsp;<span class="op" id="6452271">!=</span>&nbsp;<span class="ident" id="6452274">nil</span>&nbsp;<span class="op" id="6452278">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452283">t</span><span class="op" id="6452284">.</span><span class="ident" id="6452285">Errorf</span><span class="op" id="6452291">(</span><span class="string" id="6452292">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6452321">,</span>&nbsp;<span class="ident" id="6452323">err</span><span class="op" id="6452326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452334">if</span>&nbsp;<span class="ident" id="6452337">n</span>&nbsp;<span class="op" id="6452339">&gt;</span>&nbsp;<span class="num" id="6452341">0</span>&nbsp;<span class="op" id="6452343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452348">_</span><span class="op" id="6452349">,</span>&nbsp;<span class="ident" id="6452351">err</span>&nbsp;<span class="op" id="6452355">:=</span>&nbsp;<span class="ident" id="6452358">outputBuf</span><span class="op" id="6452367">.</span><span class="ident" id="6452368">Write</span><span class="op" id="6452373">(</span><span class="ident" id="6452374">buf</span><span class="op" id="6452377">[</span><span class="op" id="6452378">:</span><span class="ident" id="6452379">n</span><span class="op" id="6452380">]</span><span class="op" id="6452381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452386">if</span>&nbsp;<span class="ident" id="6452389">err</span>&nbsp;<span class="op" id="6452393">!=</span>&nbsp;<span class="ident" id="6452396">nil</span>&nbsp;<span class="op" id="6452400">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452406">t</span><span class="op" id="6452407">.</span><span class="ident" id="6452408">Errorf</span><span class="op" id="6452414">(</span><span class="string" id="6452415">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6452445">,</span>&nbsp;<span class="ident" id="6452447">err</span><span class="op" id="6452450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452465">got</span>&nbsp;<span class="op" id="6452469">:=</span>&nbsp;<span class="ident" id="6452472">outputBuf</span><span class="op" id="6452481">.</span><span class="ident" id="6452482">String</span><span class="op" id="6452488">(</span><span class="op" id="6452489">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452492">if</span>&nbsp;<span class="ident" id="6452495">got</span>&nbsp;<span class="op" id="6452499">!=</span>&nbsp;<span class="ident" id="6452502">expected</span>&nbsp;<span class="op" id="6452511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452515">t</span><span class="op" id="6452516">.</span><span class="ident" id="6452517">Errorf</span><span class="op" id="6452523">(</span><span class="string" id="6452524">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6452548">,</span>&nbsp;<span class="ident" id="6452550">got</span><span class="op" id="6452553">,</span>&nbsp;<span class="ident" id="6452555">expected</span><span class="op" id="6452563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452566">}</span><br>
<span class="lineno"></span><span class="op" id="6452568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6452571">func</span>&nbsp;<span class="ident" id="6452576">TestReadGNUSparseMap0x1</span><span class="op" id="6452599">(</span><span class="ident" id="6452600">t</span>&nbsp;<span class="op" id="6452602">*</span><span class="ident" id="6452603">testing</span><span class="op" id="6452610">.</span><span class="ident" id="6452611">T</span><span class="op" id="6452612">)</span>&nbsp;<span class="op" id="6452614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452617">headers</span>&nbsp;<span class="op" id="6452625">:=</span>&nbsp;<span class="keyword" id="6452628">map</span><span class="op" id="6452631">[</span><span class="builtintype" id="6452632">string</span><span class="op" id="6452638">]</span><span class="builtintype" id="6452639">string</span><span class="op" id="6452645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452649">paxGNUSparseNumBlocks</span><span class="op" id="6452670">:</span>&nbsp;<span class="string" id="6452672">&#34;4&#34;</span><span class="op" id="6452675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452679">paxGNUSparseMap</span><span class="op" id="6452694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6452702">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6452722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452725">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452728">expected</span>&nbsp;<span class="op" id="6452737">:=</span>&nbsp;<span class="op" id="6452740">[</span><span class="op" id="6452741">]</span><span class="ident" id="6452742">sparseEntry</span><span class="op" id="6452753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452757">{</span><span class="ident" id="6452758">offset</span><span class="op" id="6452764">:</span>&nbsp;<span class="num" id="6452766">0</span><span class="op" id="6452767">,</span>&nbsp;<span class="ident" id="6452769">numBytes</span><span class="op" id="6452777">:</span>&nbsp;<span class="num" id="6452779">5</span><span class="op" id="6452780">}</span><span class="op" id="6452781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452785">{</span><span class="ident" id="6452786">offset</span><span class="op" id="6452792">:</span>&nbsp;<span class="num" id="6452794">10</span><span class="op" id="6452796">,</span>&nbsp;<span class="ident" id="6452798">numBytes</span><span class="op" id="6452806">:</span>&nbsp;<span class="num" id="6452808">5</span><span class="op" id="6452809">}</span><span class="op" id="6452810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452814">{</span><span class="ident" id="6452815">offset</span><span class="op" id="6452821">:</span>&nbsp;<span class="num" id="6452823">20</span><span class="op" id="6452825">,</span>&nbsp;<span class="ident" id="6452827">numBytes</span><span class="op" id="6452835">:</span>&nbsp;<span class="num" id="6452837">5</span><span class="op" id="6452838">}</span><span class="op" id="6452839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452843">{</span><span class="ident" id="6452844">offset</span><span class="op" id="6452850">:</span>&nbsp;<span class="num" id="6452852">30</span><span class="op" id="6452854">,</span>&nbsp;<span class="ident" id="6452856">numBytes</span><span class="op" id="6452864">:</span>&nbsp;<span class="num" id="6452866">5</span><span class="op" id="6452867">}</span><span class="op" id="6452868">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452875">sp</span><span class="op" id="6452877">,</span>&nbsp;<span class="ident" id="6452879">err</span>&nbsp;<span class="op" id="6452883">:=</span>&nbsp;<span class="ident" id="6452886">readGNUSparseMap0x1</span><span class="op" id="6452905">(</span><span class="ident" id="6452906">headers</span><span class="op" id="6452913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452916">if</span>&nbsp;<span class="ident" id="6452919">err</span>&nbsp;<span class="op" id="6452923">!=</span>&nbsp;<span class="ident" id="6452926">nil</span>&nbsp;<span class="op" id="6452930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6452934">t</span><span class="op" id="6452935">.</span><span class="ident" id="6452936">Errorf</span><span class="op" id="6452942">(</span><span class="string" id="6452943">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6452965">,</span>&nbsp;<span class="ident" id="6452967">err</span><span class="op" id="6452970">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6452973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6452976">if</span>&nbsp;<span class="op" id="6452979">!</span><span class="ident" id="6452980">reflect</span><span class="op" id="6452987">.</span><span class="ident" id="6452988">DeepEqual</span><span class="op" id="6452997">(</span><span class="ident" id="6452998">sp</span><span class="op" id="6453000">,</span>&nbsp;<span class="ident" id="6453002">expected</span><span class="op" id="6453010">)</span>&nbsp;<span class="op" id="6453012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453016">t</span><span class="op" id="6453017">.</span><span class="ident" id="6453018">Errorf</span><span class="op" id="6453024">(</span><span class="string" id="6453025">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6453066">,</span>&nbsp;<span class="ident" id="6453068">sp</span><span class="op" id="6453070">,</span>&nbsp;<span class="ident" id="6453072">expected</span><span class="op" id="6453080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453083">}</span><br>
<span class="lineno"></span><span class="op" id="6453085">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6453088">func</span>&nbsp;<span class="ident" id="6453093">TestReadGNUSparseMap1x0</span><span class="op" id="6453116">(</span><span class="ident" id="6453117">t</span>&nbsp;<span class="op" id="6453119">*</span><span class="ident" id="6453120">testing</span><span class="op" id="6453127">.</span><span class="ident" id="6453128">T</span><span class="op" id="6453129">)</span>&nbsp;<span class="op" id="6453131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6453134">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453218">numEntries</span>&nbsp;<span class="op" id="6453229">:=</span>&nbsp;<span class="num" id="6453232">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453237">expected</span>&nbsp;<span class="op" id="6453246">:=</span>&nbsp;<span class="builtinfunc" id="6453249">make</span><span class="op" id="6453253">(</span><span class="op" id="6453254">[</span><span class="op" id="6453255">]</span><span class="ident" id="6453256">sparseEntry</span><span class="op" id="6453267">,</span>&nbsp;<span class="num" id="6453269">0</span><span class="op" id="6453270">,</span>&nbsp;<span class="ident" id="6453272">numEntries</span><span class="op" id="6453282">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453285">sparseMap</span>&nbsp;<span class="op" id="6453295">:=</span>&nbsp;<span class="builtinfunc" id="6453298">new</span><span class="op" id="6453301">(</span><span class="ident" id="6453302">bytes</span><span class="op" id="6453307">.</span><span class="ident" id="6453308">Buffer</span><span class="op" id="6453314">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453318">fmt</span><span class="op" id="6453321">.</span><span class="ident" id="6453322">Fprintf</span><span class="op" id="6453329">(</span><span class="ident" id="6453330">sparseMap</span><span class="op" id="6453339">,</span>&nbsp;<span class="string" id="6453341">&#34;%d\n&#34;</span><span class="op" id="6453347">,</span>&nbsp;<span class="ident" id="6453349">numEntries</span><span class="op" id="6453359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453362">for</span>&nbsp;<span class="ident" id="6453366">i</span>&nbsp;<span class="op" id="6453368">:=</span>&nbsp;<span class="num" id="6453371">0</span><span class="op" id="6453372">;</span>&nbsp;<span class="ident" id="6453374">i</span>&nbsp;<span class="op" id="6453376">&lt;</span>&nbsp;<span class="ident" id="6453378">numEntries</span><span class="op" id="6453388">;</span>&nbsp;<span class="ident" id="6453390">i</span><span class="op" id="6453391">++</span>&nbsp;<span class="op" id="6453394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453398">offset</span>&nbsp;<span class="op" id="6453405">:=</span>&nbsp;<span class="ident" id="6453408">int64</span><span class="op" id="6453413">(</span><span class="num" id="6453414">2048</span>&nbsp;<span class="op" id="6453419">*</span>&nbsp;<span class="ident" id="6453421">i</span><span class="op" id="6453422">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453426">numBytes</span>&nbsp;<span class="op" id="6453435">:=</span>&nbsp;<span class="ident" id="6453438">int64</span><span class="op" id="6453443">(</span><span class="num" id="6453444">1024</span><span class="op" id="6453448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453452">expected</span>&nbsp;<span class="op" id="6453461">=</span>&nbsp;<span class="builtinfunc" id="6453463">append</span><span class="op" id="6453469">(</span><span class="ident" id="6453470">expected</span><span class="op" id="6453478">,</span>&nbsp;<span class="ident" id="6453480">sparseEntry</span><span class="op" id="6453491">{</span><span class="ident" id="6453492">offset</span><span class="op" id="6453498">:</span>&nbsp;<span class="ident" id="6453500">offset</span><span class="op" id="6453506">,</span>&nbsp;<span class="ident" id="6453508">numBytes</span><span class="op" id="6453516">:</span>&nbsp;<span class="ident" id="6453518">numBytes</span><span class="op" id="6453526">}</span><span class="op" id="6453527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453531">fmt</span><span class="op" id="6453534">.</span><span class="ident" id="6453535">Fprintf</span><span class="op" id="6453542">(</span><span class="ident" id="6453543">sparseMap</span><span class="op" id="6453552">,</span>&nbsp;<span class="string" id="6453554">&#34;%d\n%d\n&#34;</span><span class="op" id="6453564">,</span>&nbsp;<span class="ident" id="6453566">offset</span><span class="op" id="6453572">,</span>&nbsp;<span class="ident" id="6453574">numBytes</span><span class="op" id="6453582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6453585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6453589">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453668">headerBlocks</span>&nbsp;<span class="op" id="6453681">:=</span>&nbsp;<span class="op" id="6453684">(</span><span class="ident" id="6453685">sparseMap</span><span class="op" id="6453694">.</span><span class="ident" id="6453695">Len</span><span class="op" id="6453698">(</span><span class="op" id="6453699">)</span>&nbsp;<span class="op" id="6453701">+</span>&nbsp;<span class="ident" id="6453703">blockSize</span>&nbsp;<span class="op" id="6453713">-</span>&nbsp;<span class="num" id="6453715">1</span><span class="op" id="6453716">)</span>&nbsp;<span class="op" id="6453718">/</span>&nbsp;<span class="ident" id="6453720">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453731">bufLen</span>&nbsp;<span class="op" id="6453738">:=</span>&nbsp;<span class="ident" id="6453741">blockSize</span>&nbsp;<span class="op" id="6453751">*</span>&nbsp;<span class="ident" id="6453753">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453767">buf</span>&nbsp;<span class="op" id="6453771">:=</span>&nbsp;<span class="builtinfunc" id="6453774">make</span><span class="op" id="6453778">(</span><span class="op" id="6453779">[</span><span class="op" id="6453780">]</span><span class="builtintype" id="6453781">byte</span><span class="op" id="6453785">,</span>&nbsp;<span class="ident" id="6453787">bufLen</span><span class="op" id="6453793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6453796">copy</span><span class="op" id="6453800">(</span><span class="ident" id="6453801">buf</span><span class="op" id="6453804">,</span>&nbsp;<span class="ident" id="6453806">sparseMap</span><span class="op" id="6453815">.</span><span class="ident" id="6453816">Bytes</span><span class="op" id="6453821">(</span><span class="op" id="6453822">)</span><span class="op" id="6453823">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6453827">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453868">r</span>&nbsp;<span class="op" id="6453870">:=</span>&nbsp;<span class="ident" id="6453873">bytes</span><span class="op" id="6453878">.</span><span class="ident" id="6453879">NewReader</span><span class="op" id="6453888">(</span><span class="ident" id="6453889">buf</span><span class="op" id="6453892">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6453896">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453920">sp</span><span class="op" id="6453922">,</span>&nbsp;<span class="ident" id="6453924">err</span>&nbsp;<span class="op" id="6453928">:=</span>&nbsp;<span class="ident" id="6453931">readGNUSparseMap1x0</span><span class="op" id="6453950">(</span><span class="ident" id="6453951">r</span><span class="op" id="6453952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6453955">if</span>&nbsp;<span class="ident" id="6453958">err</span>&nbsp;<span class="op" id="6453962">!=</span>&nbsp;<span class="ident" id="6453965">nil</span>&nbsp;<span class="op" id="6453969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6453973">t</span><span class="op" id="6453974">.</span><span class="ident" id="6453975">Errorf</span><span class="op" id="6453981">(</span><span class="string" id="6453982">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6454004">,</span>&nbsp;<span class="ident" id="6454006">err</span><span class="op" id="6454009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454015">if</span>&nbsp;<span class="op" id="6454018">!</span><span class="ident" id="6454019">reflect</span><span class="op" id="6454026">.</span><span class="ident" id="6454027">DeepEqual</span><span class="op" id="6454036">(</span><span class="ident" id="6454037">sp</span><span class="op" id="6454039">,</span>&nbsp;<span class="ident" id="6454041">expected</span><span class="op" id="6454049">)</span>&nbsp;<span class="op" id="6454051">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454055">t</span><span class="op" id="6454056">.</span><span class="ident" id="6454057">Errorf</span><span class="op" id="6454063">(</span><span class="string" id="6454064">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6454105">,</span>&nbsp;<span class="ident" id="6454107">sp</span><span class="op" id="6454109">,</span>&nbsp;<span class="ident" id="6454111">expected</span><span class="op" id="6454119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454122">}</span><br>
<span class="lineno"></span><span class="op" id="6454124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6454127">func</span>&nbsp;<span class="ident" id="6454132">TestUninitializedRead</span><span class="op" id="6454153">(</span><span class="ident" id="6454154">t</span>&nbsp;<span class="op" id="6454156">*</span><span class="ident" id="6454157">testing</span><span class="op" id="6454164">.</span><span class="ident" id="6454165">T</span><span class="op" id="6454166">)</span>&nbsp;<span class="op" id="6454168">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454171">test</span>&nbsp;<span class="op" id="6454176">:=</span>&nbsp;<span class="ident" id="6454179">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454191">f</span><span class="op" id="6454192">,</span>&nbsp;<span class="ident" id="6454194">err</span>&nbsp;<span class="op" id="6454198">:=</span>&nbsp;<span class="ident" id="6454201">os</span><span class="op" id="6454203">.</span><span class="ident" id="6454204">Open</span><span class="op" id="6454208">(</span><span class="ident" id="6454209">test</span><span class="op" id="6454213">.</span><span class="ident" id="6454214">file</span><span class="op" id="6454218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454221">if</span>&nbsp;<span class="ident" id="6454224">err</span>&nbsp;<span class="op" id="6454228">!=</span>&nbsp;<span class="ident" id="6454231">nil</span>&nbsp;<span class="op" id="6454235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454239">t</span><span class="op" id="6454240">.</span><span class="ident" id="6454241">Fatalf</span><span class="op" id="6454247">(</span><span class="string" id="6454248">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6454270">,</span>&nbsp;<span class="ident" id="6454272">err</span><span class="op" id="6454275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454278">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454281">defer</span>&nbsp;<span class="ident" id="6454287">f</span><span class="op" id="6454288">.</span><span class="ident" id="6454289">Close</span><span class="op" id="6454294">(</span><span class="op" id="6454295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454299">tr</span>&nbsp;<span class="op" id="6454302">:=</span>&nbsp;<span class="ident" id="6454305">NewReader</span><span class="op" id="6454314">(</span><span class="ident" id="6454315">f</span><span class="op" id="6454316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454319">_</span><span class="op" id="6454320">,</span>&nbsp;<span class="ident" id="6454322">err</span>&nbsp;<span class="op" id="6454326">=</span>&nbsp;<span class="ident" id="6454328">tr</span><span class="op" id="6454330">.</span><span class="ident" id="6454331">Read</span><span class="op" id="6454335">(</span><span class="op" id="6454336">[</span><span class="op" id="6454337">]</span><span class="builtintype" id="6454338">byte</span><span class="op" id="6454342">{</span><span class="op" id="6454343">}</span><span class="op" id="6454344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6454347">if</span>&nbsp;<span class="ident" id="6454350">err</span>&nbsp;<span class="op" id="6454354">==</span>&nbsp;<span class="ident" id="6454357">nil</span>&nbsp;<span class="op" id="6454361">||</span>&nbsp;<span class="ident" id="6454364">err</span>&nbsp;<span class="op" id="6454368">!=</span>&nbsp;<span class="ident" id="6454371">io</span><span class="op" id="6454373">.</span><span class="ident" id="6454374">EOF</span>&nbsp;<span class="op" id="6454378">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6454382">t</span><span class="op" id="6454383">.</span><span class="ident" id="6454384">Errorf</span><span class="op" id="6454390">(</span><span class="string" id="6454391">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6454424">,</span>&nbsp;<span class="ident" id="6454426">err</span><span class="op" id="6454429">,</span>&nbsp;<span class="ident" id="6454431">io</span><span class="op" id="6454433">.</span><span class="ident" id="6454434">EOF</span><span class="op" id="6454437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6454440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6454443">}</span>
</div>
</body>
</html>
