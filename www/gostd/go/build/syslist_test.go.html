<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7121974">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7122030">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7122084">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7122135">package</span>&nbsp;<span class="ident" id="7122143">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122150">import</span>&nbsp;<span class="op" id="7122157">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7122160">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7122171">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7122181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122184">var</span>&nbsp;<span class="op" id="7122188">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122191">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7122201">=</span>&nbsp;<span class="ident" id="7122203">runtime</span><span class="op" id="7122210">.</span><span class="ident" id="7122211">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122217">thisArch</span>&nbsp;&nbsp;<span class="op" id="7122227">=</span>&nbsp;<span class="ident" id="7122229">runtime</span><span class="op" id="7122236">.</span><span class="ident" id="7122237">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122245">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7122255">=</span>&nbsp;<span class="ident" id="7122257">anotherOS</span><span class="op" id="7122266">(</span><span class="op" id="7122267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122270">otherArch</span>&nbsp;<span class="op" id="7122280">=</span>&nbsp;<span class="ident" id="7122282">anotherArch</span><span class="op" id="7122293">(</span><span class="op" id="7122294">)</span><br>
<span class="lineno"></span><span class="op" id="7122296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122299">func</span>&nbsp;<span class="ident" id="7122304">anotherOS</span><span class="op" id="7122313">(</span><span class="op" id="7122314">)</span>&nbsp;<span class="builtintype" id="7122316">string</span>&nbsp;<span class="op" id="7122323">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122326">if</span>&nbsp;<span class="ident" id="7122329">thisOS</span>&nbsp;<span class="op" id="7122336">!=</span>&nbsp;<span class="string" id="7122339">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7122348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122352">return</span>&nbsp;<span class="string" id="7122359">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122372">return</span>&nbsp;<span class="string" id="7122379">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7122387">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7122390">func</span>&nbsp;<span class="ident" id="7122395">anotherArch</span><span class="op" id="7122406">(</span><span class="op" id="7122407">)</span>&nbsp;<span class="builtintype" id="7122409">string</span>&nbsp;<span class="op" id="7122416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122419">if</span>&nbsp;<span class="ident" id="7122422">thisArch</span>&nbsp;<span class="op" id="7122431">!=</span>&nbsp;<span class="string" id="7122434">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7122442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122446">return</span>&nbsp;<span class="string" id="7122453">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122462">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122465">return</span>&nbsp;<span class="string" id="7122472">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7122478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122481">type</span>&nbsp;<span class="ident" id="7122486">GoodFileTest</span>&nbsp;<span class="keyword" id="7122499">struct</span>&nbsp;<span class="op" id="7122506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122509">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7122516">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122524">result</span>&nbsp;<span class="builtintype" id="7122531">bool</span><br>
<span class="lineno"></span><span class="op" id="7122536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122539">var</span>&nbsp;<span class="ident" id="7122543">tests</span>&nbsp;<span class="op" id="7122549">=</span>&nbsp;<span class="op" id="7122551">[</span><span class="op" id="7122552">]</span><span class="ident" id="7122553">GoodFileTest</span><span class="op" id="7122565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122568">{</span><span class="string" id="7122569">&#34;file.go&#34;</span><span class="op" id="7122578">,</span>&nbsp;<span class="builtintype" id="7122580">true</span><span class="op" id="7122584">}</span><span class="op" id="7122585">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122588">{</span><span class="string" id="7122589">&#34;file.c&#34;</span><span class="op" id="7122597">,</span>&nbsp;<span class="builtintype" id="7122599">true</span><span class="op" id="7122603">}</span><span class="op" id="7122604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122607">{</span><span class="string" id="7122608">&#34;file_foo.go&#34;</span><span class="op" id="7122621">,</span>&nbsp;<span class="builtintype" id="7122623">true</span><span class="op" id="7122627">}</span><span class="op" id="7122628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122631">{</span><span class="string" id="7122632">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122640">+</span>&nbsp;<span class="ident" id="7122642">thisArch</span>&nbsp;<span class="op" id="7122651">+</span>&nbsp;<span class="string" id="7122653">&#34;.go&#34;</span><span class="op" id="7122658">,</span>&nbsp;<span class="builtintype" id="7122660">true</span><span class="op" id="7122664">}</span><span class="op" id="7122665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122668">{</span><span class="string" id="7122669">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122677">+</span>&nbsp;<span class="ident" id="7122679">otherArch</span>&nbsp;<span class="op" id="7122689">+</span>&nbsp;<span class="string" id="7122691">&#34;.go&#34;</span><span class="op" id="7122696">,</span>&nbsp;<span class="builtintype" id="7122698">false</span><span class="op" id="7122703">}</span><span class="op" id="7122704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122707">{</span><span class="string" id="7122708">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122716">+</span>&nbsp;<span class="ident" id="7122718">thisOS</span>&nbsp;<span class="op" id="7122725">+</span>&nbsp;<span class="string" id="7122727">&#34;.go&#34;</span><span class="op" id="7122732">,</span>&nbsp;<span class="builtintype" id="7122734">true</span><span class="op" id="7122738">}</span><span class="op" id="7122739">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122742">{</span><span class="string" id="7122743">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122751">+</span>&nbsp;<span class="ident" id="7122753">otherOS</span>&nbsp;<span class="op" id="7122761">+</span>&nbsp;<span class="string" id="7122763">&#34;.go&#34;</span><span class="op" id="7122768">,</span>&nbsp;<span class="builtintype" id="7122770">false</span><span class="op" id="7122775">}</span><span class="op" id="7122776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122779">{</span><span class="string" id="7122780">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122788">+</span>&nbsp;<span class="ident" id="7122790">thisOS</span>&nbsp;<span class="op" id="7122797">+</span>&nbsp;<span class="string" id="7122799">&#34;_&#34;</span>&nbsp;<span class="op" id="7122803">+</span>&nbsp;<span class="ident" id="7122805">thisArch</span>&nbsp;<span class="op" id="7122814">+</span>&nbsp;<span class="string" id="7122816">&#34;.go&#34;</span><span class="op" id="7122821">,</span>&nbsp;<span class="builtintype" id="7122823">true</span><span class="op" id="7122827">}</span><span class="op" id="7122828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122831">{</span><span class="string" id="7122832">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122840">+</span>&nbsp;<span class="ident" id="7122842">otherOS</span>&nbsp;<span class="op" id="7122850">+</span>&nbsp;<span class="string" id="7122852">&#34;_&#34;</span>&nbsp;<span class="op" id="7122856">+</span>&nbsp;<span class="ident" id="7122858">thisArch</span>&nbsp;<span class="op" id="7122867">+</span>&nbsp;<span class="string" id="7122869">&#34;.go&#34;</span><span class="op" id="7122874">,</span>&nbsp;<span class="builtintype" id="7122876">false</span><span class="op" id="7122881">}</span><span class="op" id="7122882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122885">{</span><span class="string" id="7122886">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122894">+</span>&nbsp;<span class="ident" id="7122896">thisOS</span>&nbsp;<span class="op" id="7122903">+</span>&nbsp;<span class="string" id="7122905">&#34;_&#34;</span>&nbsp;<span class="op" id="7122909">+</span>&nbsp;<span class="ident" id="7122911">otherArch</span>&nbsp;<span class="op" id="7122921">+</span>&nbsp;<span class="string" id="7122923">&#34;.go&#34;</span><span class="op" id="7122928">,</span>&nbsp;<span class="builtintype" id="7122930">false</span><span class="op" id="7122935">}</span><span class="op" id="7122936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122939">{</span><span class="string" id="7122940">&#34;file_&#34;</span>&nbsp;<span class="op" id="7122948">+</span>&nbsp;<span class="ident" id="7122950">otherOS</span>&nbsp;<span class="op" id="7122958">+</span>&nbsp;<span class="string" id="7122960">&#34;_&#34;</span>&nbsp;<span class="op" id="7122964">+</span>&nbsp;<span class="ident" id="7122966">otherArch</span>&nbsp;<span class="op" id="7122976">+</span>&nbsp;<span class="string" id="7122978">&#34;.go&#34;</span><span class="op" id="7122983">,</span>&nbsp;<span class="builtintype" id="7122985">false</span><span class="op" id="7122990">}</span><span class="op" id="7122991">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122994">{</span><span class="string" id="7122995">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7123007">+</span>&nbsp;<span class="ident" id="7123009">thisArch</span>&nbsp;<span class="op" id="7123018">+</span>&nbsp;<span class="string" id="7123020">&#34;.go&#34;</span><span class="op" id="7123025">,</span>&nbsp;<span class="builtintype" id="7123027">true</span><span class="op" id="7123031">}</span><span class="op" id="7123032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123035">{</span><span class="string" id="7123036">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7123048">+</span>&nbsp;<span class="ident" id="7123050">otherArch</span>&nbsp;<span class="op" id="7123060">+</span>&nbsp;<span class="string" id="7123062">&#34;.go&#34;</span><span class="op" id="7123067">,</span>&nbsp;<span class="builtintype" id="7123069">false</span><span class="op" id="7123074">}</span><span class="op" id="7123075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123078">{</span><span class="string" id="7123079">&#34;file_&#34;</span>&nbsp;<span class="op" id="7123087">+</span>&nbsp;<span class="ident" id="7123089">thisOS</span>&nbsp;<span class="op" id="7123096">+</span>&nbsp;<span class="string" id="7123098">&#34;.c&#34;</span><span class="op" id="7123102">,</span>&nbsp;<span class="builtintype" id="7123104">true</span><span class="op" id="7123108">}</span><span class="op" id="7123109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123112">{</span><span class="string" id="7123113">&#34;file_&#34;</span>&nbsp;<span class="op" id="7123121">+</span>&nbsp;<span class="ident" id="7123123">otherOS</span>&nbsp;<span class="op" id="7123131">+</span>&nbsp;<span class="string" id="7123133">&#34;.c&#34;</span><span class="op" id="7123137">,</span>&nbsp;<span class="builtintype" id="7123139">false</span><span class="op" id="7123144">}</span><span class="op" id="7123145">,</span><br>
<span class="lineno"></span><span class="op" id="7123147">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7123150">func</span>&nbsp;<span class="ident" id="7123155">TestGoodOSArch</span><span class="op" id="7123169">(</span><span class="ident" id="7123170">t</span>&nbsp;<span class="op" id="7123172">*</span><span class="ident" id="7123173">testing</span><span class="op" id="7123180">.</span><span class="ident" id="7123181">T</span><span class="op" id="7123182">)</span>&nbsp;<span class="op" id="7123184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7123187">for</span>&nbsp;<span class="ident" id="7123191">_</span><span class="op" id="7123192">,</span>&nbsp;<span class="ident" id="7123194">test</span>&nbsp;<span class="op" id="7123199">:=</span>&nbsp;<span class="keyword" id="7123202">range</span>&nbsp;<span class="ident" id="7123208">tests</span>&nbsp;<span class="op" id="7123214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7123218">if</span>&nbsp;<span class="ident" id="7123221">Default</span><span class="op" id="7123228">.</span><span class="ident" id="7123229">goodOSArchFile</span><span class="op" id="7123243">(</span><span class="ident" id="7123244">test</span><span class="op" id="7123248">.</span><span class="ident" id="7123249">name</span><span class="op" id="7123253">,</span>&nbsp;<span class="builtinfunc" id="7123255">make</span><span class="op" id="7123259">(</span><span class="keyword" id="7123260">map</span><span class="op" id="7123263">[</span><span class="builtintype" id="7123264">string</span><span class="op" id="7123270">]</span><span class="builtintype" id="7123271">bool</span><span class="op" id="7123275">)</span><span class="op" id="7123276">)</span>&nbsp;<span class="op" id="7123278">!=</span>&nbsp;<span class="ident" id="7123281">test</span><span class="op" id="7123285">.</span><span class="ident" id="7123286">result</span>&nbsp;<span class="op" id="7123293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123298">t</span><span class="op" id="7123299">.</span><span class="ident" id="7123300">Fatalf</span><span class="op" id="7123306">(</span><span class="string" id="7123307">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7123333">,</span>&nbsp;<span class="ident" id="7123335">test</span><span class="op" id="7123339">.</span><span class="ident" id="7123340">name</span><span class="op" id="7123344">,</span>&nbsp;<span class="ident" id="7123346">test</span><span class="op" id="7123350">.</span><span class="ident" id="7123351">result</span><span class="op" id="7123357">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123364">}</span><br>
<span class="lineno"></span><span class="op" id="7123366">}</span>
</div>
</body>
</html>
