<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html" class="current">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3745680">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3745735">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3745789">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3745840">//&nbsp;Package&nbsp;url&nbsp;parses&nbsp;URLs&nbsp;and&nbsp;implements&nbsp;query&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="3745898">//&nbsp;See&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3745915">package</span>&nbsp;<span class="ident" id="3745923">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3745928">import</span>&nbsp;<span class="op" id="3745935">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3745938">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3745947">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3745957">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3745965">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3745976">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3745986">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3745989">//&nbsp;Error&nbsp;reports&nbsp;an&nbsp;error&nbsp;and&nbsp;the&nbsp;operation&nbsp;and&nbsp;URL&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3746057">type</span>&nbsp;<span class="ident" id="3746062">Error</span>&nbsp;<span class="keyword" id="3746068">struct</span>&nbsp;<span class="op" id="3746075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746078">Op</span>&nbsp;&nbsp;<span class="builtintype" id="3746082">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746090">URL</span>&nbsp;<span class="builtintype" id="3746094">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746102">Err</span>&nbsp;<span class="builtintype" id="3746106">error</span><br>
<span class="lineno"></span><span class="op" id="3746112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746115">func</span>&nbsp;<span class="op" id="3746120">(</span><span class="ident" id="3746121">e</span>&nbsp;<span class="op" id="3746123">*</span><span class="ident" id="3746124"><a href="/gostd/net/url/url.go.html#3746062">Error</a></span><span class="op" id="3746129">)</span>&nbsp;<span class="ident" id="3746131">Error</span><span class="op" id="3746136">(</span><span class="op" id="3746137">)</span>&nbsp;<span class="builtintype" id="3746139">string</span>&nbsp;<span class="op" id="3746146">{</span>&nbsp;<span class="keyword" id="3746148">return</span>&nbsp;<span class="ident" id="3746155"><a href="/gostd/net/url/url.go.html#3746121">e</a></span><span class="op" id="3746156">.</span><span class="ident" id="3746157"><a href="/gostd/net/url/url.go.html#3746078">Op</a></span>&nbsp;<span class="op" id="3746160">+</span>&nbsp;<span class="string" id="3746162">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3746166">+</span>&nbsp;<span class="ident" id="3746168"><a href="/gostd/net/url/url.go.html#3746121">e</a></span><span class="op" id="3746169">.</span><span class="ident" id="3746170"><a href="/gostd/net/url/url.go.html#3746090">URL</a></span>&nbsp;<span class="op" id="3746174">+</span>&nbsp;<span class="string" id="3746176">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3746181">+</span>&nbsp;<span class="ident" id="3746183"><a href="/gostd/net/url/url.go.html#3746121">e</a></span><span class="op" id="3746184">.</span><span class="ident" id="3746185"><a href="/gostd/net/url/url.go.html#3746102">Err</a></span><span class="op" id="3746188">.</span><span class="ident" id="3746189">Error</span><span class="op" id="3746194">(</span><span class="op" id="3746195">)</span>&nbsp;<span class="op" id="3746197">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3746200">func</span>&nbsp;<span class="ident" id="3746205">ishex</span><span class="op" id="3746210">(</span><span class="ident" id="3746211">c</span>&nbsp;<span class="builtintype" id="3746213">byte</span><span class="op" id="3746217">)</span>&nbsp;<span class="builtintype" id="3746219">bool</span>&nbsp;<span class="op" id="3746224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746227">switch</span>&nbsp;<span class="op" id="3746234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746237">case</span>&nbsp;<span class="string" id="3746242">&#39;0&#39;</span>&nbsp;<span class="op" id="3746246">&lt;=</span>&nbsp;<span class="ident" id="3746249"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746251">&amp;&amp;</span>&nbsp;<span class="ident" id="3746254"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746256">&lt;=</span>&nbsp;<span class="string" id="3746259">&#39;9&#39;</span><span class="op" id="3746262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746266">return</span>&nbsp;<span class="builtintype" id="3746273">true</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746279">case</span>&nbsp;<span class="string" id="3746284">&#39;a&#39;</span>&nbsp;<span class="op" id="3746288">&lt;=</span>&nbsp;<span class="ident" id="3746291"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746293">&amp;&amp;</span>&nbsp;<span class="ident" id="3746296"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746298">&lt;=</span>&nbsp;<span class="string" id="3746301">&#39;f&#39;</span><span class="op" id="3746304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746308">return</span>&nbsp;<span class="builtintype" id="3746315">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746321">case</span>&nbsp;<span class="string" id="3746326">&#39;A&#39;</span>&nbsp;<span class="op" id="3746330">&lt;=</span>&nbsp;<span class="ident" id="3746333"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746335">&amp;&amp;</span>&nbsp;<span class="ident" id="3746338"><a href="/gostd/net/url/url.go.html#3746211">c</a></span>&nbsp;<span class="op" id="3746340">&lt;=</span>&nbsp;<span class="string" id="3746343">&#39;F&#39;</span><span class="op" id="3746346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746350">return</span>&nbsp;<span class="builtintype" id="3746357">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3746363">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746366">return</span>&nbsp;<span class="builtintype" id="3746373">false</span><br>
<span class="lineno"></span><span class="op" id="3746379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746382">func</span>&nbsp;<span class="ident" id="3746387">unhex</span><span class="op" id="3746392">(</span><span class="ident" id="3746393">c</span>&nbsp;<span class="builtintype" id="3746395">byte</span><span class="op" id="3746399">)</span>&nbsp;<span class="builtintype" id="3746401">byte</span>&nbsp;<span class="op" id="3746406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746409">switch</span>&nbsp;<span class="op" id="3746416">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746419">case</span>&nbsp;<span class="string" id="3746424">&#39;0&#39;</span>&nbsp;<span class="op" id="3746428">&lt;=</span>&nbsp;<span class="ident" id="3746431"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746433">&amp;&amp;</span>&nbsp;<span class="ident" id="3746436"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746438">&lt;=</span>&nbsp;<span class="string" id="3746441">&#39;9&#39;</span><span class="op" id="3746444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746448">return</span>&nbsp;<span class="ident" id="3746455"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746457">-</span>&nbsp;<span class="string" id="3746459">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746464">case</span>&nbsp;<span class="string" id="3746469">&#39;a&#39;</span>&nbsp;<span class="op" id="3746473">&lt;=</span>&nbsp;<span class="ident" id="3746476"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746478">&amp;&amp;</span>&nbsp;<span class="ident" id="3746481"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746483">&lt;=</span>&nbsp;<span class="string" id="3746486">&#39;f&#39;</span><span class="op" id="3746489">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746493">return</span>&nbsp;<span class="ident" id="3746500"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746502">-</span>&nbsp;<span class="string" id="3746504">&#39;a&#39;</span>&nbsp;<span class="op" id="3746508">+</span>&nbsp;<span class="num" id="3746510">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746514">case</span>&nbsp;<span class="string" id="3746519">&#39;A&#39;</span>&nbsp;<span class="op" id="3746523">&lt;=</span>&nbsp;<span class="ident" id="3746526"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746528">&amp;&amp;</span>&nbsp;<span class="ident" id="3746531"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746533">&lt;=</span>&nbsp;<span class="string" id="3746536">&#39;F&#39;</span><span class="op" id="3746539">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746543">return</span>&nbsp;<span class="ident" id="3746550"><a href="/gostd/net/url/url.go.html#3746393">c</a></span>&nbsp;<span class="op" id="3746552">-</span>&nbsp;<span class="string" id="3746554">&#39;A&#39;</span>&nbsp;<span class="op" id="3746558">+</span>&nbsp;<span class="num" id="3746560">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3746564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746567">return</span>&nbsp;<span class="num" id="3746574">0</span><br>
<span class="lineno"></span><span class="op" id="3746576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="3746579">type</span>&nbsp;<span class="ident" id="3746584">encoding</span>&nbsp;<span class="builtintype" id="3746593">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746598">const</span>&nbsp;<span class="op" id="3746604">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746607">encodePath</span>&nbsp;<span class="ident" id="3746618"><a href="/gostd/net/url/url.go.html#3746584">encoding</a></span>&nbsp;<span class="op" id="3746627">=</span>&nbsp;<span class="num" id="3746629">1</span>&nbsp;<span class="op" id="3746631">+</span>&nbsp;<span class="ident" id="3746633">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746639">encodeUserPassword</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746659">encodeQueryComponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3746681">encodeFragment</span><br>
<span class="lineno"></span><span class="op" id="3746696">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3746699">type</span>&nbsp;<span class="ident" id="3746704">EscapeError</span>&nbsp;<span class="builtintype" id="3746716">string</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3746724">func</span>&nbsp;<span class="op" id="3746729">(</span><span class="ident" id="3746730">e</span>&nbsp;<span class="ident" id="3746732"><a href="/gostd/net/url/url.go.html#3746704">EscapeError</a></span><span class="op" id="3746743">)</span>&nbsp;<span class="ident" id="3746745">Error</span><span class="op" id="3746750">(</span><span class="op" id="3746751">)</span>&nbsp;<span class="builtintype" id="3746753">string</span>&nbsp;<span class="op" id="3746760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3746763">return</span>&nbsp;<span class="string" id="3746770">&#34;invalid&nbsp;URL&nbsp;escape&nbsp;&#34;</span>&nbsp;<span class="op" id="3746792">+</span>&nbsp;<span class="ident" id="3746794"><a href="/gostd/net/url/url.go.html#3745965">strconv</a></span><span class="op" id="3746801">.</span><span class="ident" id="3746802"><a href="/gostd/strconv/quote.go.html#2412032">Quote</a></span><span class="op" id="3746807">(</span><span class="builtintype" id="3746808">string</span><span class="op" id="3746814">(</span><span class="ident" id="3746815"><a href="/gostd/net/url/url.go.html#3746730">e</a></span><span class="op" id="3746816">)</span><span class="op" id="3746817">)</span><br>
<span class="lineno"></span><span class="op" id="3746819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3746822">//&nbsp;Return&nbsp;true&nbsp;if&nbsp;the&nbsp;specified&nbsp;character&nbsp;should&nbsp;be&nbsp;escaped&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3746887">//&nbsp;appearing&nbsp;in&nbsp;a&nbsp;URL&nbsp;string,&nbsp;according&nbsp;to&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3746940">func</span>&nbsp;<span class="ident" id="3746945">shouldEscape</span><span class="op" id="3746957">(</span><span class="ident" id="3746958">c</span>&nbsp;<span class="builtintype" id="3746960">byte</span><span class="op" id="3746964">,</span>&nbsp;<span class="ident" id="3746966">mode</span>&nbsp;<span class="ident" id="3746971"><a href="/gostd/net/url/url.go.html#3746584">encoding</a></span><span class="op" id="3746979">)</span>&nbsp;<span class="builtintype" id="3746981">bool</span>&nbsp;<span class="op" id="3746986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3746989">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(alphanum)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747032">if</span>&nbsp;<span class="string" id="3747035">&#39;A&#39;</span>&nbsp;<span class="op" id="3747039">&lt;=</span>&nbsp;<span class="ident" id="3747042"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747044">&amp;&amp;</span>&nbsp;<span class="ident" id="3747047"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747049">&lt;=</span>&nbsp;<span class="string" id="3747052">&#39;Z&#39;</span>&nbsp;<span class="op" id="3747056">||</span>&nbsp;<span class="string" id="3747059">&#39;a&#39;</span>&nbsp;<span class="op" id="3747063">&lt;=</span>&nbsp;<span class="ident" id="3747066"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747068">&amp;&amp;</span>&nbsp;<span class="ident" id="3747071"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747073">&lt;=</span>&nbsp;<span class="string" id="3747076">&#39;z&#39;</span>&nbsp;<span class="op" id="3747080">||</span>&nbsp;<span class="string" id="3747083">&#39;0&#39;</span>&nbsp;<span class="op" id="3747087">&lt;=</span>&nbsp;<span class="ident" id="3747090"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747092">&amp;&amp;</span>&nbsp;<span class="ident" id="3747095"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747097">&lt;=</span>&nbsp;<span class="string" id="3747100">&#39;9&#39;</span>&nbsp;<span class="op" id="3747104">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747108">return</span>&nbsp;<span class="builtintype" id="3747115">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3747122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747126">switch</span>&nbsp;<span class="ident" id="3747133"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747138">case</span>&nbsp;<span class="string" id="3747143">&#39;-&#39;</span><span class="op" id="3747146">,</span>&nbsp;<span class="string" id="3747148">&#39;_&#39;</span><span class="op" id="3747151">,</span>&nbsp;<span class="string" id="3747153">&#39;.&#39;</span><span class="op" id="3747156">,</span>&nbsp;<span class="string" id="3747158">&#39;~&#39;</span><span class="op" id="3747161">:</span>&nbsp;<span class="comment" id="3747163">//&nbsp;§2.3&nbsp;Unreserved&nbsp;characters&nbsp;(mark)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747203">return</span>&nbsp;<span class="builtintype" id="3747210">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747218">case</span>&nbsp;<span class="string" id="3747223">&#39;$&#39;</span><span class="op" id="3747226">,</span>&nbsp;<span class="string" id="3747228">&#39;&amp;&#39;</span><span class="op" id="3747231">,</span>&nbsp;<span class="string" id="3747233">&#39;+&#39;</span><span class="op" id="3747236">,</span>&nbsp;<span class="string" id="3747238">&#39;,&#39;</span><span class="op" id="3747241">,</span>&nbsp;<span class="string" id="3747243">&#39;/&#39;</span><span class="op" id="3747246">,</span>&nbsp;<span class="string" id="3747248">&#39;:&#39;</span><span class="op" id="3747251">,</span>&nbsp;<span class="string" id="3747253">&#39;;&#39;</span><span class="op" id="3747256">,</span>&nbsp;<span class="string" id="3747258">&#39;=&#39;</span><span class="op" id="3747261">,</span>&nbsp;<span class="string" id="3747263">&#39;?&#39;</span><span class="op" id="3747266">,</span>&nbsp;<span class="string" id="3747268">&#39;@&#39;</span><span class="op" id="3747271">:</span>&nbsp;<span class="comment" id="3747273">//&nbsp;§2.2&nbsp;Reserved&nbsp;characters&nbsp;(reserved)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747315">//&nbsp;Different&nbsp;sections&nbsp;of&nbsp;the&nbsp;URL&nbsp;allow&nbsp;a&nbsp;few&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747365">//&nbsp;the&nbsp;reserved&nbsp;characters&nbsp;to&nbsp;appear&nbsp;unescaped.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747415">switch</span>&nbsp;<span class="ident" id="3747422"><a href="/gostd/net/url/url.go.html#3746966">mode</a></span>&nbsp;<span class="op" id="3747427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747431">case</span>&nbsp;<span class="ident" id="3747436"><a href="/gostd/net/url/url.go.html#3746607">encodePath</a></span><span class="op" id="3747446">:</span>&nbsp;<span class="comment" id="3747448">//&nbsp;§3.3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747460">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;:&nbsp;@&nbsp;&amp;&nbsp;=&nbsp;+&nbsp;$&nbsp;but&nbsp;saves&nbsp;/&nbsp;;&nbsp;,&nbsp;for&nbsp;assigning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747523">//&nbsp;meaning&nbsp;to&nbsp;individual&nbsp;path&nbsp;segments.&nbsp;This&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747579">//&nbsp;only&nbsp;manipulates&nbsp;the&nbsp;path&nbsp;as&nbsp;a&nbsp;whole,&nbsp;so&nbsp;we&nbsp;allow&nbsp;those</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747641">//&nbsp;last&nbsp;two&nbsp;as&nbsp;well.&nbsp;That&nbsp;leaves&nbsp;only&nbsp;?&nbsp;to&nbsp;escape.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747695">return</span>&nbsp;<span class="ident" id="3747702"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747704">==</span>&nbsp;<span class="string" id="3747707">&#39;?&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747714">case</span>&nbsp;<span class="ident" id="3747719"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3747737">:</span>&nbsp;<span class="comment" id="3747739">//&nbsp;§3.2.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747753">//&nbsp;The&nbsp;RFC&nbsp;allows&nbsp;&#39;;&#39;,&nbsp;&#39;:&#39;,&nbsp;&#39;&amp;&#39;,&nbsp;&#39;=&#39;,&nbsp;&#39;+&#39;,&nbsp;&#39;$&#39;,&nbsp;and&nbsp;&#39;,&#39;&nbsp;in</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747815">//&nbsp;userinfo,&nbsp;so&nbsp;we&nbsp;must&nbsp;escape&nbsp;only&nbsp;&#39;@&#39;,&nbsp;&#39;/&#39;,&nbsp;and&nbsp;&#39;?&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747873">//&nbsp;The&nbsp;parsing&nbsp;of&nbsp;userinfo&nbsp;treats&nbsp;&#39;:&#39;&nbsp;as&nbsp;special&nbsp;so&nbsp;we&nbsp;must&nbsp;escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3747943">//&nbsp;that&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3747959">return</span>&nbsp;<span class="ident" id="3747966"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747968">==</span>&nbsp;<span class="string" id="3747971">&#39;@&#39;</span>&nbsp;<span class="op" id="3747975">||</span>&nbsp;<span class="ident" id="3747978"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747980">==</span>&nbsp;<span class="string" id="3747983">&#39;/&#39;</span>&nbsp;<span class="op" id="3747987">||</span>&nbsp;<span class="ident" id="3747990"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3747992">==</span>&nbsp;<span class="string" id="3747995">&#39;?&#39;</span>&nbsp;<span class="op" id="3747999">||</span>&nbsp;<span class="ident" id="3748002"><a href="/gostd/net/url/url.go.html#3746958">c</a></span>&nbsp;<span class="op" id="3748004">==</span>&nbsp;<span class="string" id="3748007">&#39;:&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748014">case</span>&nbsp;<span class="ident" id="3748019"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span><span class="op" id="3748039">:</span>&nbsp;<span class="comment" id="3748041">//&nbsp;§3.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3748053">//&nbsp;The&nbsp;RFC&nbsp;reserves&nbsp;(so&nbsp;we&nbsp;must&nbsp;escape)&nbsp;everything.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748108">return</span>&nbsp;<span class="builtintype" id="3748115">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748123">case</span>&nbsp;<span class="ident" id="3748128"><a href="/gostd/net/url/url.go.html#3746681">encodeFragment</a></span><span class="op" id="3748142">:</span>&nbsp;<span class="comment" id="3748144">//&nbsp;§4.1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3748156">//&nbsp;The&nbsp;RFC&nbsp;text&nbsp;is&nbsp;silent&nbsp;but&nbsp;the&nbsp;grammar&nbsp;allows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3748208">//&nbsp;everything,&nbsp;so&nbsp;escape&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748245">return</span>&nbsp;<span class="builtintype" id="3748252">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3748260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3748263">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3748267">//&nbsp;Everything&nbsp;else&nbsp;must&nbsp;be&nbsp;escaped.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748304">return</span>&nbsp;<span class="builtintype" id="3748311">true</span><br>
<span class="lineno"></span><span class="op" id="3748316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3748319">//&nbsp;QueryUnescape&nbsp;does&nbsp;the&nbsp;inverse&nbsp;transformation&nbsp;of&nbsp;QueryEscape,&nbsp;converting</span><br>
<span class="lineno"></span><span class="comment" id="3748395">//&nbsp;%AB&nbsp;into&nbsp;the&nbsp;byte&nbsp;0xAB&nbsp;and&nbsp;&#39;+&#39;&nbsp;into&nbsp;&#39;&nbsp;&#39;&nbsp;(space).&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="3748470">//&nbsp;any&nbsp;%&nbsp;is&nbsp;not&nbsp;followed&nbsp;by&nbsp;two&nbsp;hexadecimal&nbsp;digits.</span><br>
<span class="lineno"></span><span class="keyword" id="3748522">func</span>&nbsp;<span class="ident" id="3748527">QueryUnescape</span><span class="op" id="3748540">(</span><span class="ident" id="3748541">s</span>&nbsp;<span class="builtintype" id="3748543">string</span><span class="op" id="3748549">)</span>&nbsp;<span class="op" id="3748551">(</span><span class="builtintype" id="3748552">string</span><span class="op" id="3748558">,</span>&nbsp;<span class="builtintype" id="3748560">error</span><span class="op" id="3748565">)</span>&nbsp;<span class="op" id="3748567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748570">return</span>&nbsp;<span class="ident" id="3748577"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3748585">(</span><span class="ident" id="3748586"><a href="/gostd/net/url/url.go.html#3748541">s</a></span><span class="op" id="3748587">,</span>&nbsp;<span class="ident" id="3748589"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span><span class="op" id="3748609">)</span><br>
<span class="lineno">115</span><span class="op" id="3748611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3748614">//&nbsp;unescape&nbsp;unescapes&nbsp;a&nbsp;string;&nbsp;the&nbsp;mode&nbsp;specifies</span><br>
<span class="lineno"></span><span class="comment" id="3748665">//&nbsp;which&nbsp;section&nbsp;of&nbsp;the&nbsp;URL&nbsp;string&nbsp;is&nbsp;being&nbsp;unescaped.</span><br>
<span class="lineno"></span><span class="keyword" id="3748720">func</span>&nbsp;<span class="ident" id="3748725">unescape</span><span class="op" id="3748733">(</span><span class="ident" id="3748734">s</span>&nbsp;<span class="builtintype" id="3748736">string</span><span class="op" id="3748742">,</span>&nbsp;<span class="ident" id="3748744">mode</span>&nbsp;<span class="ident" id="3748749"><a href="/gostd/net/url/url.go.html#3746584">encoding</a></span><span class="op" id="3748757">)</span>&nbsp;<span class="op" id="3748759">(</span><span class="builtintype" id="3748760">string</span><span class="op" id="3748766">,</span>&nbsp;<span class="builtintype" id="3748768">error</span><span class="op" id="3748773">)</span>&nbsp;<span class="op" id="3748775">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3748778">//&nbsp;Count&nbsp;%,&nbsp;check&nbsp;that&nbsp;they&#39;re&nbsp;well-formed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3748823">n</span>&nbsp;<span class="op" id="3748825">:=</span>&nbsp;<span class="num" id="3748828">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3748831">hasPlus</span>&nbsp;<span class="op" id="3748839">:=</span>&nbsp;<span class="builtintype" id="3748842">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748849">for</span>&nbsp;<span class="ident" id="3748853">i</span>&nbsp;<span class="op" id="3748855">:=</span>&nbsp;<span class="num" id="3748858">0</span><span class="op" id="3748859">;</span>&nbsp;<span class="ident" id="3748861"><a href="/gostd/net/url/url.go.html#3748853">i</a></span>&nbsp;<span class="op" id="3748863">&lt;</span>&nbsp;<span class="builtinfunc" id="3748865">len</span><span class="op" id="3748868">(</span><span class="ident" id="3748869"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748870">)</span><span class="op" id="3748871">;</span>&nbsp;<span class="op" id="3748873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748877">switch</span>&nbsp;<span class="ident" id="3748884"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748885">[</span><span class="ident" id="3748886"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3748887">]</span>&nbsp;<span class="op" id="3748889">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748893">case</span>&nbsp;<span class="string" id="3748898">&#39;%&#39;</span><span class="op" id="3748901">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3748906"><a href="/gostd/net/url/url.go.html#3748823">n</a></span><span class="op" id="3748907">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748913">if</span>&nbsp;<span class="ident" id="3748916"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3748917">+</span><span class="num" id="3748918">2</span>&nbsp;<span class="op" id="3748920">&gt;=</span>&nbsp;<span class="builtinfunc" id="3748923">len</span><span class="op" id="3748926">(</span><span class="ident" id="3748927"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748928">)</span>&nbsp;<span class="op" id="3748930">||</span>&nbsp;<span class="op" id="3748933">!</span><span class="ident" id="3748934"><a href="/gostd/net/url/url.go.html#3746205">ishex</a></span><span class="op" id="3748939">(</span><span class="ident" id="3748940"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748941">[</span><span class="ident" id="3748942"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3748943">+</span><span class="num" id="3748944">1</span><span class="op" id="3748945">]</span><span class="op" id="3748946">)</span>&nbsp;<span class="op" id="3748948">||</span>&nbsp;<span class="op" id="3748951">!</span><span class="ident" id="3748952"><a href="/gostd/net/url/url.go.html#3746205">ishex</a></span><span class="op" id="3748957">(</span><span class="ident" id="3748958"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748959">[</span><span class="ident" id="3748960"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3748961">+</span><span class="num" id="3748962">2</span><span class="op" id="3748963">]</span><span class="op" id="3748964">)</span>&nbsp;<span class="op" id="3748966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3748972"><a href="/gostd/net/url/url.go.html#3748734">s</a></span>&nbsp;<span class="op" id="3748974">=</span>&nbsp;<span class="ident" id="3748976"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748977">[</span><span class="ident" id="3748978"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3748979">:</span><span class="op" id="3748980">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3748986">if</span>&nbsp;<span class="builtinfunc" id="3748989">len</span><span class="op" id="3748992">(</span><span class="ident" id="3748993"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3748994">)</span>&nbsp;<span class="op" id="3748996">&gt;</span>&nbsp;<span class="num" id="3748998">3</span>&nbsp;<span class="op" id="3749000">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749007"><a href="/gostd/net/url/url.go.html#3748734">s</a></span>&nbsp;<span class="op" id="3749009">=</span>&nbsp;<span class="ident" id="3749011"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749012">[</span><span class="num" id="3749013">0</span><span class="op" id="3749014">:</span><span class="num" id="3749015">3</span><span class="op" id="3749016">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749028">return</span>&nbsp;<span class="string" id="3749035">&#34;&#34;</span><span class="op" id="3749037">,</span>&nbsp;<span class="ident" id="3749039"><a href="/gostd/net/url/url.go.html#3746704">EscapeError</a></span><span class="op" id="3749050">(</span><span class="ident" id="3749051"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749062"><a href="/gostd/net/url/url.go.html#3748853">i</a></span>&nbsp;<span class="op" id="3749064">+=</span>&nbsp;<span class="num" id="3749067">3</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749071">case</span>&nbsp;<span class="string" id="3749076">&#39;+&#39;</span><span class="op" id="3749079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749084"><a href="/gostd/net/url/url.go.html#3748831">hasPlus</a></span>&nbsp;<span class="op" id="3749092">=</span>&nbsp;<span class="ident" id="3749094"><a href="/gostd/net/url/url.go.html#3748744">mode</a></span>&nbsp;<span class="op" id="3749099">==</span>&nbsp;<span class="ident" id="3749102"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749126"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3749127">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749132">default</span><span class="op" id="3749139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749144"><a href="/gostd/net/url/url.go.html#3748853">i</a></span><span class="op" id="3749145">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749157">if</span>&nbsp;<span class="ident" id="3749160"><a href="/gostd/net/url/url.go.html#3748823">n</a></span>&nbsp;<span class="op" id="3749162">==</span>&nbsp;<span class="num" id="3749165">0</span>&nbsp;<span class="op" id="3749167">&amp;&amp;</span>&nbsp;<span class="op" id="3749170">!</span><span class="ident" id="3749171"><a href="/gostd/net/url/url.go.html#3748831">hasPlus</a></span>&nbsp;<span class="op" id="3749179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749183">return</span>&nbsp;<span class="ident" id="3749190"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749191">,</span>&nbsp;<span class="builtintype" id="3749193">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749202">t</span>&nbsp;<span class="op" id="3749204">:=</span>&nbsp;<span class="builtinfunc" id="3749207">make</span><span class="op" id="3749211">(</span><span class="op" id="3749212">[</span><span class="op" id="3749213">]</span><span class="builtintype" id="3749214">byte</span><span class="op" id="3749218">,</span>&nbsp;<span class="builtinfunc" id="3749220">len</span><span class="op" id="3749223">(</span><span class="ident" id="3749224"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749225">)</span><span class="op" id="3749226">-</span><span class="num" id="3749227">2</span><span class="op" id="3749228">*</span><span class="ident" id="3749229"><a href="/gostd/net/url/url.go.html#3748823">n</a></span><span class="op" id="3749230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749233">j</span>&nbsp;<span class="op" id="3749235">:=</span>&nbsp;<span class="num" id="3749238">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749241">for</span>&nbsp;<span class="ident" id="3749245">i</span>&nbsp;<span class="op" id="3749247">:=</span>&nbsp;<span class="num" id="3749250">0</span><span class="op" id="3749251">;</span>&nbsp;<span class="ident" id="3749253"><a href="/gostd/net/url/url.go.html#3749245">i</a></span>&nbsp;<span class="op" id="3749255">&lt;</span>&nbsp;<span class="builtinfunc" id="3749257">len</span><span class="op" id="3749260">(</span><span class="ident" id="3749261"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749262">)</span><span class="op" id="3749263">;</span>&nbsp;<span class="op" id="3749265">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749269">switch</span>&nbsp;<span class="ident" id="3749276"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749277">[</span><span class="ident" id="3749278"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749279">]</span>&nbsp;<span class="op" id="3749281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749285">case</span>&nbsp;<span class="string" id="3749290">&#39;%&#39;</span><span class="op" id="3749293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749298"><a href="/gostd/net/url/url.go.html#3749202">t</a></span><span class="op" id="3749299">[</span><span class="ident" id="3749300"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749301">]</span>&nbsp;<span class="op" id="3749303">=</span>&nbsp;<span class="ident" id="3749305"><a href="/gostd/net/url/url.go.html#3746387">unhex</a></span><span class="op" id="3749310">(</span><span class="ident" id="3749311"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749312">[</span><span class="ident" id="3749313"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749314">+</span><span class="num" id="3749315">1</span><span class="op" id="3749316">]</span><span class="op" id="3749317">)</span><span class="op" id="3749318">&lt;&lt;</span><span class="num" id="3749320">4</span>&nbsp;<span class="op" id="3749322">|</span>&nbsp;<span class="ident" id="3749324"><a href="/gostd/net/url/url.go.html#3746387">unhex</a></span><span class="op" id="3749329">(</span><span class="ident" id="3749330"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749331">[</span><span class="ident" id="3749332"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749333">+</span><span class="num" id="3749334">2</span><span class="op" id="3749335">]</span><span class="op" id="3749336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749341"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749342">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749348"><a href="/gostd/net/url/url.go.html#3749245">i</a></span>&nbsp;<span class="op" id="3749350">+=</span>&nbsp;<span class="num" id="3749353">3</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749357">case</span>&nbsp;<span class="string" id="3749362">&#39;+&#39;</span><span class="op" id="3749365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749370">if</span>&nbsp;<span class="ident" id="3749373"><a href="/gostd/net/url/url.go.html#3748744">mode</a></span>&nbsp;<span class="op" id="3749378">==</span>&nbsp;<span class="ident" id="3749381"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3749402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749408"><a href="/gostd/net/url/url.go.html#3749202">t</a></span><span class="op" id="3749409">[</span><span class="ident" id="3749410"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749411">]</span>&nbsp;<span class="op" id="3749413">=</span>&nbsp;<span class="string" id="3749415">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749422">}</span>&nbsp;<span class="keyword" id="3749424">else</span>&nbsp;<span class="op" id="3749429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749435"><a href="/gostd/net/url/url.go.html#3749202">t</a></span><span class="op" id="3749436">[</span><span class="ident" id="3749437"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749438">]</span>&nbsp;<span class="op" id="3749440">=</span>&nbsp;<span class="string" id="3749442">&#39;+&#39;</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749454"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749455">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749461"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749462">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749467">default</span><span class="op" id="3749474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749479"><a href="/gostd/net/url/url.go.html#3749202">t</a></span><span class="op" id="3749480">[</span><span class="ident" id="3749481"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749482">]</span>&nbsp;<span class="op" id="3749484">=</span>&nbsp;<span class="ident" id="3749486"><a href="/gostd/net/url/url.go.html#3748734">s</a></span><span class="op" id="3749487">[</span><span class="ident" id="3749488"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749489">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749494"><a href="/gostd/net/url/url.go.html#3749233">j</a></span><span class="op" id="3749495">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749501"><a href="/gostd/net/url/url.go.html#3749245">i</a></span><span class="op" id="3749502">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749513">return</span>&nbsp;<span class="builtintype" id="3749520">string</span><span class="op" id="3749526">(</span><span class="ident" id="3749527"><a href="/gostd/net/url/url.go.html#3749202">t</a></span><span class="op" id="3749528">)</span><span class="op" id="3749529">,</span>&nbsp;<span class="builtintype" id="3749531">nil</span><br>
<span class="lineno">170</span><span class="op" id="3749535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3749538">//&nbsp;QueryEscape&nbsp;escapes&nbsp;the&nbsp;string&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;safely&nbsp;placed</span><br>
<span class="lineno"></span><span class="comment" id="3749599">//&nbsp;inside&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="3749622">func</span>&nbsp;<span class="ident" id="3749627">QueryEscape</span><span class="op" id="3749638">(</span><span class="ident" id="3749639">s</span>&nbsp;<span class="builtintype" id="3749641">string</span><span class="op" id="3749647">)</span>&nbsp;<span class="builtintype" id="3749649">string</span>&nbsp;<span class="op" id="3749656">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749659">return</span>&nbsp;<span class="ident" id="3749666"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3749672">(</span><span class="ident" id="3749673"><a href="/gostd/net/url/url.go.html#3749639">s</a></span><span class="op" id="3749674">,</span>&nbsp;<span class="ident" id="3749676"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span><span class="op" id="3749696">)</span><br>
<span class="lineno"></span><span class="op" id="3749698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3749701">func</span>&nbsp;<span class="ident" id="3749706">escape</span><span class="op" id="3749712">(</span><span class="ident" id="3749713">s</span>&nbsp;<span class="builtintype" id="3749715">string</span><span class="op" id="3749721">,</span>&nbsp;<span class="ident" id="3749723">mode</span>&nbsp;<span class="ident" id="3749728"><a href="/gostd/net/url/url.go.html#3746584">encoding</a></span><span class="op" id="3749736">)</span>&nbsp;<span class="builtintype" id="3749738">string</span>&nbsp;<span class="op" id="3749745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749748">spaceCount</span><span class="op" id="3749758">,</span>&nbsp;<span class="ident" id="3749760">hexCount</span>&nbsp;<span class="op" id="3749769">:=</span>&nbsp;<span class="num" id="3749772">0</span><span class="op" id="3749773">,</span>&nbsp;<span class="num" id="3749775">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749778">for</span>&nbsp;<span class="ident" id="3749782">i</span>&nbsp;<span class="op" id="3749784">:=</span>&nbsp;<span class="num" id="3749787">0</span><span class="op" id="3749788">;</span>&nbsp;<span class="ident" id="3749790"><a href="/gostd/net/url/url.go.html#3749782">i</a></span>&nbsp;<span class="op" id="3749792">&lt;</span>&nbsp;<span class="builtinfunc" id="3749794">len</span><span class="op" id="3749797">(</span><span class="ident" id="3749798"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3749799">)</span><span class="op" id="3749800">;</span>&nbsp;<span class="ident" id="3749802"><a href="/gostd/net/url/url.go.html#3749782">i</a></span><span class="op" id="3749803">++</span>&nbsp;<span class="op" id="3749806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749810">c</span>&nbsp;<span class="op" id="3749812">:=</span>&nbsp;<span class="ident" id="3749815"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3749816">[</span><span class="ident" id="3749817"><a href="/gostd/net/url/url.go.html#3749782">i</a></span><span class="op" id="3749818">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749822">if</span>&nbsp;<span class="ident" id="3749825"><a href="/gostd/net/url/url.go.html#3746945">shouldEscape</a></span><span class="op" id="3749837">(</span><span class="ident" id="3749838"><a href="/gostd/net/url/url.go.html#3749810">c</a></span><span class="op" id="3749839">,</span>&nbsp;<span class="ident" id="3749841"><a href="/gostd/net/url/url.go.html#3749723">mode</a></span><span class="op" id="3749845">)</span>&nbsp;<span class="op" id="3749847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749852">if</span>&nbsp;<span class="ident" id="3749855"><a href="/gostd/net/url/url.go.html#3749810">c</a></span>&nbsp;<span class="op" id="3749857">==</span>&nbsp;<span class="string" id="3749860">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3749864">&amp;&amp;</span>&nbsp;<span class="ident" id="3749867"><a href="/gostd/net/url/url.go.html#3749723">mode</a></span>&nbsp;<span class="op" id="3749872">==</span>&nbsp;<span class="ident" id="3749875"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span>&nbsp;<span class="op" id="3749896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749902"><a href="/gostd/net/url/url.go.html#3749748">spaceCount</a></span><span class="op" id="3749912">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749918">}</span>&nbsp;<span class="keyword" id="3749920">else</span>&nbsp;<span class="op" id="3749925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3749931"><a href="/gostd/net/url/url.go.html#3749760">hexCount</a></span><span class="op" id="3749939">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3749952">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749956">if</span>&nbsp;<span class="ident" id="3749959"><a href="/gostd/net/url/url.go.html#3749748">spaceCount</a></span>&nbsp;<span class="op" id="3749970">==</span>&nbsp;<span class="num" id="3749973">0</span>&nbsp;<span class="op" id="3749975">&amp;&amp;</span>&nbsp;<span class="ident" id="3749978"><a href="/gostd/net/url/url.go.html#3749760">hexCount</a></span>&nbsp;<span class="op" id="3749987">==</span>&nbsp;<span class="num" id="3749990">0</span>&nbsp;<span class="op" id="3749992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3749996">return</span>&nbsp;<span class="ident" id="3750003"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3750006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750010">t</span>&nbsp;<span class="op" id="3750012">:=</span>&nbsp;<span class="builtinfunc" id="3750015">make</span><span class="op" id="3750019">(</span><span class="op" id="3750020">[</span><span class="op" id="3750021">]</span><span class="builtintype" id="3750022">byte</span><span class="op" id="3750026">,</span>&nbsp;<span class="builtinfunc" id="3750028">len</span><span class="op" id="3750031">(</span><span class="ident" id="3750032"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3750033">)</span><span class="op" id="3750034">+</span><span class="num" id="3750035">2</span><span class="op" id="3750036">*</span><span class="ident" id="3750037"><a href="/gostd/net/url/url.go.html#3749760">hexCount</a></span><span class="op" id="3750045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750048">j</span>&nbsp;<span class="op" id="3750050">:=</span>&nbsp;<span class="num" id="3750053">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750056">for</span>&nbsp;<span class="ident" id="3750060">i</span>&nbsp;<span class="op" id="3750062">:=</span>&nbsp;<span class="num" id="3750065">0</span><span class="op" id="3750066">;</span>&nbsp;<span class="ident" id="3750068"><a href="/gostd/net/url/url.go.html#3750060">i</a></span>&nbsp;<span class="op" id="3750070">&lt;</span>&nbsp;<span class="builtinfunc" id="3750072">len</span><span class="op" id="3750075">(</span><span class="ident" id="3750076"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3750077">)</span><span class="op" id="3750078">;</span>&nbsp;<span class="ident" id="3750080"><a href="/gostd/net/url/url.go.html#3750060">i</a></span><span class="op" id="3750081">++</span>&nbsp;<span class="op" id="3750084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750088">switch</span>&nbsp;<span class="ident" id="3750095">c</span>&nbsp;<span class="op" id="3750097">:=</span>&nbsp;<span class="ident" id="3750100"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3750101">[</span><span class="ident" id="3750102"><a href="/gostd/net/url/url.go.html#3750060">i</a></span><span class="op" id="3750103">]</span><span class="op" id="3750104">;</span>&nbsp;<span class="op" id="3750106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750110">case</span>&nbsp;<span class="ident" id="3750115"><a href="/gostd/net/url/url.go.html#3750095">c</a></span>&nbsp;<span class="op" id="3750117">==</span>&nbsp;<span class="string" id="3750120">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3750124">&amp;&amp;</span>&nbsp;<span class="ident" id="3750127"><a href="/gostd/net/url/url.go.html#3749723">mode</a></span>&nbsp;<span class="op" id="3750132">==</span>&nbsp;<span class="ident" id="3750135"><a href="/gostd/net/url/url.go.html#3746659">encodeQueryComponent</a></span><span class="op" id="3750155">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750160"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750161">[</span><span class="ident" id="3750162"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750163">]</span>&nbsp;<span class="op" id="3750165">=</span>&nbsp;<span class="string" id="3750167">&#39;+&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750174"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750175">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750180">case</span>&nbsp;<span class="ident" id="3750185"><a href="/gostd/net/url/url.go.html#3746945">shouldEscape</a></span><span class="op" id="3750197">(</span><span class="ident" id="3750198"><a href="/gostd/net/url/url.go.html#3750095">c</a></span><span class="op" id="3750199">,</span>&nbsp;<span class="ident" id="3750201"><a href="/gostd/net/url/url.go.html#3749723">mode</a></span><span class="op" id="3750205">)</span><span class="op" id="3750206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750211"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750212">[</span><span class="ident" id="3750213"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750214">]</span>&nbsp;<span class="op" id="3750216">=</span>&nbsp;<span class="string" id="3750218">&#39;%&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750225"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750226">[</span><span class="ident" id="3750227"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750228">+</span><span class="num" id="3750229">1</span><span class="op" id="3750230">]</span>&nbsp;<span class="op" id="3750232">=</span>&nbsp;<span class="string" id="3750234">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3750252">[</span><span class="ident" id="3750253"><a href="/gostd/net/url/url.go.html#3750095">c</a></span><span class="op" id="3750254">&gt;&gt;</span><span class="num" id="3750256">4</span><span class="op" id="3750257">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750262"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750263">[</span><span class="ident" id="3750264"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750265">+</span><span class="num" id="3750266">2</span><span class="op" id="3750267">]</span>&nbsp;<span class="op" id="3750269">=</span>&nbsp;<span class="string" id="3750271">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3750289">[</span><span class="ident" id="3750290"><a href="/gostd/net/url/url.go.html#3750095">c</a></span><span class="op" id="3750291">&amp;</span><span class="num" id="3750292">15</span><span class="op" id="3750294">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750299"><a href="/gostd/net/url/url.go.html#3750048">j</a></span>&nbsp;<span class="op" id="3750301">+=</span>&nbsp;<span class="num" id="3750304">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750308">default</span><span class="op" id="3750315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750320"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750321">[</span><span class="ident" id="3750322"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750323">]</span>&nbsp;<span class="op" id="3750325">=</span>&nbsp;<span class="ident" id="3750327"><a href="/gostd/net/url/url.go.html#3749713">s</a></span><span class="op" id="3750328">[</span><span class="ident" id="3750329"><a href="/gostd/net/url/url.go.html#3750060">i</a></span><span class="op" id="3750330">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3750335"><a href="/gostd/net/url/url.go.html#3750048">j</a></span><span class="op" id="3750336">++</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3750341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3750344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3750347">return</span>&nbsp;<span class="builtintype" id="3750354">string</span><span class="op" id="3750360">(</span><span class="ident" id="3750361"><a href="/gostd/net/url/url.go.html#3750010">t</a></span><span class="op" id="3750362">)</span><br>
<span class="lineno"></span><span class="op" id="3750364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="3750367">//&nbsp;A&nbsp;URL&nbsp;represents&nbsp;a&nbsp;parsed&nbsp;URL&nbsp;(technically,&nbsp;a&nbsp;URI&nbsp;reference).</span><br>
<span class="lineno"></span><span class="comment" id="3750432">//&nbsp;The&nbsp;general&nbsp;form&nbsp;represented&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3750468">//</span><br>
<span class="lineno"></span><span class="comment" id="3750471">//&nbsp;&nbsp;&nbsp;&nbsp;scheme://[userinfo@]host/path[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3750523">//</span><br>
<span class="lineno">220</span><span class="comment" id="3750526">//&nbsp;URLs&nbsp;that&nbsp;do&nbsp;not&nbsp;start&nbsp;with&nbsp;a&nbsp;slash&nbsp;after&nbsp;the&nbsp;scheme&nbsp;are&nbsp;interpreted&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="3750602">//</span><br>
<span class="lineno"></span><span class="comment" id="3750605">//&nbsp;&nbsp;&nbsp;&nbsp;scheme:opaque[?query][#fragment]</span><br>
<span class="lineno"></span><span class="comment" id="3750641">//</span><br>
<span class="lineno"></span><span class="comment" id="3750644">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;Path&nbsp;field&nbsp;is&nbsp;stored&nbsp;in&nbsp;decoded&nbsp;form:&nbsp;/%47%6f%2f&nbsp;becomes&nbsp;/Go/.</span><br>
<span class="lineno">225</span><span class="comment" id="3750724">//&nbsp;A&nbsp;consequence&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;impossible&nbsp;to&nbsp;tell&nbsp;which&nbsp;slashes&nbsp;in&nbsp;the&nbsp;Path&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="3750805">//&nbsp;slashes&nbsp;in&nbsp;the&nbsp;raw&nbsp;URL&nbsp;and&nbsp;which&nbsp;were&nbsp;%2f.&nbsp;This&nbsp;distinction&nbsp;is&nbsp;rarely&nbsp;important,</span><br>
<span class="lineno"></span><span class="comment" id="3750889">//&nbsp;but&nbsp;when&nbsp;it&nbsp;is&nbsp;a&nbsp;client&nbsp;must&nbsp;use&nbsp;other&nbsp;routines&nbsp;to&nbsp;parse&nbsp;the&nbsp;raw&nbsp;URL&nbsp;or&nbsp;construct</span><br>
<span class="lineno"></span><span class="comment" id="3750974">//&nbsp;the&nbsp;parsed&nbsp;URL.&nbsp;For&nbsp;example,&nbsp;an&nbsp;HTTP&nbsp;server&nbsp;can&nbsp;consult&nbsp;req.RequestURI,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3751053">//&nbsp;an&nbsp;HTTP&nbsp;client&nbsp;can&nbsp;use&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Opaque:&nbsp;&#34;//example.com/Go%2f&#34;}</span><br>
<span class="lineno">230</span><span class="comment" id="3751135">//&nbsp;instead&nbsp;of&nbsp;URL{Host:&nbsp;&#34;example.com&#34;,&nbsp;Path:&nbsp;&#34;/Go/&#34;}.</span><br>
<span class="lineno"></span><span class="keyword" id="3751189">type</span>&nbsp;<span class="ident" id="3751194">URL</span>&nbsp;<span class="keyword" id="3751198">struct</span>&nbsp;<span class="op" id="3751205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751208">Scheme</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3751217">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751225">Opaque</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3751234">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3751244">//&nbsp;encoded&nbsp;opaque&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751268">User</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3751277">*</span><span class="ident" id="3751278"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span>&nbsp;<span class="comment" id="3751287">//&nbsp;username&nbsp;and&nbsp;password&nbsp;information</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751325">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3751334">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3751344">//&nbsp;host&nbsp;or&nbsp;host:port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751366">Path</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3751375">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751383">RawQuery</span>&nbsp;<span class="builtintype" id="3751392">string</span>&nbsp;<span class="comment" id="3751399">//&nbsp;encoded&nbsp;query&nbsp;values,&nbsp;without&nbsp;&#39;?&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3751437">Fragment</span>&nbsp;<span class="builtintype" id="3751446">string</span>&nbsp;<span class="comment" id="3751453">//&nbsp;fragment&nbsp;for&nbsp;references,&nbsp;without&nbsp;&#39;#&#39;</span><br>
<span class="lineno"></span><span class="op" id="3751493">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="comment" id="3751496">//&nbsp;User&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3751556">//&nbsp;and&nbsp;no&nbsp;password&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3751580">func</span>&nbsp;<span class="ident" id="3751585">User</span><span class="op" id="3751589">(</span><span class="ident" id="3751590">username</span>&nbsp;<span class="builtintype" id="3751599">string</span><span class="op" id="3751605">)</span>&nbsp;<span class="op" id="3751607">*</span><span class="ident" id="3751608"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span>&nbsp;<span class="op" id="3751617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3751620">return</span>&nbsp;<span class="op" id="3751627">&amp;</span><span class="ident" id="3751628"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3751636">{</span><span class="ident" id="3751637"><a href="/gostd/net/url/url.go.html#3751590">username</a></span><span class="op" id="3751645">,</span>&nbsp;<span class="string" id="3751647">&#34;&#34;</span><span class="op" id="3751649">,</span>&nbsp;<span class="builtintype" id="3751651">false</span><span class="op" id="3751656">}</span><br>
<span class="lineno">245</span><span class="op" id="3751658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3751661">//&nbsp;UserPassword&nbsp;returns&nbsp;a&nbsp;Userinfo&nbsp;containing&nbsp;the&nbsp;provided&nbsp;username</span><br>
<span class="lineno"></span><span class="comment" id="3751729">//&nbsp;and&nbsp;password.</span><br>
<span class="lineno"></span><span class="comment" id="3751746">//&nbsp;This&nbsp;functionality&nbsp;should&nbsp;only&nbsp;be&nbsp;used&nbsp;with&nbsp;legacy&nbsp;web&nbsp;sites.</span><br>
<span class="lineno">250</span><span class="comment" id="3751811">//&nbsp;RFC&nbsp;2396&nbsp;warns&nbsp;that&nbsp;interpreting&nbsp;Userinfo&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="3751865">//&nbsp;``is&nbsp;NOT&nbsp;RECOMMENDED,&nbsp;because&nbsp;the&nbsp;passing&nbsp;of&nbsp;authentication</span><br>
<span class="lineno"></span><span class="comment" id="3751928">//&nbsp;information&nbsp;in&nbsp;clear&nbsp;text&nbsp;(such&nbsp;as&nbsp;URI)&nbsp;has&nbsp;proven&nbsp;to&nbsp;be&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3751990">//&nbsp;security&nbsp;risk&nbsp;in&nbsp;almost&nbsp;every&nbsp;case&nbsp;where&nbsp;it&nbsp;has&nbsp;been&nbsp;used.&#39;&#39;</span><br>
<span class="lineno"></span><span class="keyword" id="3752054">func</span>&nbsp;<span class="ident" id="3752059">UserPassword</span><span class="op" id="3752071">(</span><span class="ident" id="3752072">username</span><span class="op" id="3752080">,</span>&nbsp;<span class="ident" id="3752082">password</span>&nbsp;<span class="builtintype" id="3752091">string</span><span class="op" id="3752097">)</span>&nbsp;<span class="op" id="3752099">*</span><span class="ident" id="3752100"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span>&nbsp;<span class="op" id="3752109">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752112">return</span>&nbsp;<span class="op" id="3752119">&amp;</span><span class="ident" id="3752120"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3752128">{</span><span class="ident" id="3752129"><a href="/gostd/net/url/url.go.html#3752072">username</a></span><span class="op" id="3752137">,</span>&nbsp;<span class="ident" id="3752139"><a href="/gostd/net/url/url.go.html#3752082">password</a></span><span class="op" id="3752147">,</span>&nbsp;<span class="builtintype" id="3752149">true</span><span class="op" id="3752153">}</span><br>
<span class="lineno"></span><span class="op" id="3752155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3752158">//&nbsp;The&nbsp;Userinfo&nbsp;type&nbsp;is&nbsp;an&nbsp;immutable&nbsp;encapsulation&nbsp;of&nbsp;username&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3752225">//&nbsp;password&nbsp;details&nbsp;for&nbsp;a&nbsp;URL.&nbsp;An&nbsp;existing&nbsp;Userinfo&nbsp;value&nbsp;is&nbsp;guaranteed</span><br>
<span class="lineno">260</span><span class="comment" id="3752297">//&nbsp;to&nbsp;have&nbsp;a&nbsp;username&nbsp;set&nbsp;(potentially&nbsp;empty,&nbsp;as&nbsp;allowed&nbsp;by&nbsp;RFC&nbsp;2396),</span><br>
<span class="lineno"></span><span class="comment" id="3752368">//&nbsp;and&nbsp;optionally&nbsp;a&nbsp;password.</span><br>
<span class="lineno"></span><span class="keyword" id="3752398">type</span>&nbsp;<span class="ident" id="3752403">Userinfo</span>&nbsp;<span class="keyword" id="3752412">struct</span>&nbsp;<span class="op" id="3752419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3752422">username</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3752434">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3752442">password</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3752454">string</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3752462">passwordSet</span>&nbsp;<span class="builtintype" id="3752474">bool</span><br>
<span class="lineno"></span><span class="op" id="3752479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3752482">//&nbsp;Username&nbsp;returns&nbsp;the&nbsp;username.</span><br>
<span class="lineno"></span><span class="keyword" id="3752516">func</span>&nbsp;<span class="op" id="3752521">(</span><span class="ident" id="3752522">u</span>&nbsp;<span class="op" id="3752524">*</span><span class="ident" id="3752525"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3752533">)</span>&nbsp;<span class="ident" id="3752535">Username</span><span class="op" id="3752543">(</span><span class="op" id="3752544">)</span>&nbsp;<span class="builtintype" id="3752546">string</span>&nbsp;<span class="op" id="3752553">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752556">return</span>&nbsp;<span class="ident" id="3752563"><a href="/gostd/net/url/url.go.html#3752522">u</a></span><span class="op" id="3752564">.</span><span class="ident" id="3752565"><a href="/gostd/net/url/url.go.html#3752422">username</a></span><br>
<span class="lineno"></span><span class="op" id="3752574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3752577">//&nbsp;Password&nbsp;returns&nbsp;the&nbsp;password&nbsp;in&nbsp;case&nbsp;it&nbsp;is&nbsp;set,&nbsp;and&nbsp;whether&nbsp;it&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="3752652">func</span>&nbsp;<span class="op" id="3752657">(</span><span class="ident" id="3752658">u</span>&nbsp;<span class="op" id="3752660">*</span><span class="ident" id="3752661"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3752669">)</span>&nbsp;<span class="ident" id="3752671">Password</span><span class="op" id="3752679">(</span><span class="op" id="3752680">)</span>&nbsp;<span class="op" id="3752682">(</span><span class="builtintype" id="3752683">string</span><span class="op" id="3752689">,</span>&nbsp;<span class="builtintype" id="3752691">bool</span><span class="op" id="3752695">)</span>&nbsp;<span class="op" id="3752697">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752700">if</span>&nbsp;<span class="ident" id="3752703"><a href="/gostd/net/url/url.go.html#3752658">u</a></span><span class="op" id="3752704">.</span><span class="ident" id="3752705"><a href="/gostd/net/url/url.go.html#3752462">passwordSet</a></span>&nbsp;<span class="op" id="3752717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752721">return</span>&nbsp;<span class="ident" id="3752728"><a href="/gostd/net/url/url.go.html#3752658">u</a></span><span class="op" id="3752729">.</span><span class="ident" id="3752730"><a href="/gostd/net/url/url.go.html#3752442">password</a></span><span class="op" id="3752738">,</span>&nbsp;<span class="builtintype" id="3752740">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3752746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752749">return</span>&nbsp;<span class="string" id="3752756">&#34;&#34;</span><span class="op" id="3752758">,</span>&nbsp;<span class="builtintype" id="3752760">false</span><br>
<span class="lineno"></span><span class="op" id="3752766">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="3752769">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;userinfo&nbsp;information&nbsp;in&nbsp;the&nbsp;standard&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3752841">//&nbsp;of&nbsp;&#34;username[:password]&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3752870">func</span>&nbsp;<span class="op" id="3752875">(</span><span class="ident" id="3752876">u</span>&nbsp;<span class="op" id="3752878">*</span><span class="ident" id="3752879"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3752887">)</span>&nbsp;<span class="ident" id="3752889">String</span><span class="op" id="3752895">(</span><span class="op" id="3752896">)</span>&nbsp;<span class="builtintype" id="3752898">string</span>&nbsp;<span class="op" id="3752905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3752908">s</span>&nbsp;<span class="op" id="3752910">:=</span>&nbsp;<span class="ident" id="3752913"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3752919">(</span><span class="ident" id="3752920"><a href="/gostd/net/url/url.go.html#3752876">u</a></span><span class="op" id="3752921">.</span><span class="ident" id="3752922"><a href="/gostd/net/url/url.go.html#3752422">username</a></span><span class="op" id="3752930">,</span>&nbsp;<span class="ident" id="3752932"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3752950">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3752953">if</span>&nbsp;<span class="ident" id="3752956"><a href="/gostd/net/url/url.go.html#3752876">u</a></span><span class="op" id="3752957">.</span><span class="ident" id="3752958"><a href="/gostd/net/url/url.go.html#3752462">passwordSet</a></span>&nbsp;<span class="op" id="3752970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3752974"><a href="/gostd/net/url/url.go.html#3752908">s</a></span>&nbsp;<span class="op" id="3752976">+=</span>&nbsp;<span class="string" id="3752979">&#34;:&#34;</span>&nbsp;<span class="op" id="3752983">+</span>&nbsp;<span class="ident" id="3752985"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3752991">(</span><span class="ident" id="3752992"><a href="/gostd/net/url/url.go.html#3752876">u</a></span><span class="op" id="3752993">.</span><span class="ident" id="3752994"><a href="/gostd/net/url/url.go.html#3752442">password</a></span><span class="op" id="3753002">,</span>&nbsp;<span class="ident" id="3753004"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3753022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753028">return</span>&nbsp;<span class="ident" id="3753035"><a href="/gostd/net/url/url.go.html#3752908">s</a></span><br>
<span class="lineno"></span><span class="op" id="3753037">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3753040">//&nbsp;Maybe&nbsp;rawurl&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;scheme:path.</span><br>
<span class="lineno"></span><span class="comment" id="3753084">//&nbsp;(Scheme&nbsp;must&nbsp;be&nbsp;[a-zA-Z][a-zA-Z0-9+-.]*)</span><br>
<span class="lineno"></span><span class="comment" id="3753128">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;scheme,&nbsp;path;&nbsp;else&nbsp;return&nbsp;&#34;&#34;,&nbsp;rawurl.</span><br>
<span class="lineno"></span><span class="keyword" id="3753183">func</span>&nbsp;<span class="ident" id="3753188">getscheme</span><span class="op" id="3753197">(</span><span class="ident" id="3753198">rawurl</span>&nbsp;<span class="builtintype" id="3753205">string</span><span class="op" id="3753211">)</span>&nbsp;<span class="op" id="3753213">(</span><span class="ident" id="3753214">scheme</span><span class="op" id="3753220">,</span>&nbsp;<span class="ident" id="3753222">path</span>&nbsp;<span class="builtintype" id="3753227">string</span><span class="op" id="3753233">,</span>&nbsp;<span class="ident" id="3753235">err</span>&nbsp;<span class="builtintype" id="3753239">error</span><span class="op" id="3753244">)</span>&nbsp;<span class="op" id="3753246">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753249">for</span>&nbsp;<span class="ident" id="3753253">i</span>&nbsp;<span class="op" id="3753255">:=</span>&nbsp;<span class="num" id="3753258">0</span><span class="op" id="3753259">;</span>&nbsp;<span class="ident" id="3753261"><a href="/gostd/net/url/url.go.html#3753253">i</a></span>&nbsp;<span class="op" id="3753263">&lt;</span>&nbsp;<span class="builtinfunc" id="3753265">len</span><span class="op" id="3753268">(</span><span class="ident" id="3753269"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753275">)</span><span class="op" id="3753276">;</span>&nbsp;<span class="ident" id="3753278"><a href="/gostd/net/url/url.go.html#3753253">i</a></span><span class="op" id="3753279">++</span>&nbsp;<span class="op" id="3753282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753286">c</span>&nbsp;<span class="op" id="3753288">:=</span>&nbsp;<span class="ident" id="3753291"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753297">[</span><span class="ident" id="3753298"><a href="/gostd/net/url/url.go.html#3753253">i</a></span><span class="op" id="3753299">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753303">switch</span>&nbsp;<span class="op" id="3753310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753314">case</span>&nbsp;<span class="string" id="3753319">&#39;a&#39;</span>&nbsp;<span class="op" id="3753323">&lt;=</span>&nbsp;<span class="ident" id="3753326"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753328">&amp;&amp;</span>&nbsp;<span class="ident" id="3753331"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753333">&lt;=</span>&nbsp;<span class="string" id="3753336">&#39;z&#39;</span>&nbsp;<span class="op" id="3753340">||</span>&nbsp;<span class="string" id="3753343">&#39;A&#39;</span>&nbsp;<span class="op" id="3753347">&lt;=</span>&nbsp;<span class="ident" id="3753350"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753352">&amp;&amp;</span>&nbsp;<span class="ident" id="3753355"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753357">&lt;=</span>&nbsp;<span class="string" id="3753360">&#39;Z&#39;</span><span class="op" id="3753363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3753367">//&nbsp;do&nbsp;nothing</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753383">case</span>&nbsp;<span class="string" id="3753388">&#39;0&#39;</span>&nbsp;<span class="op" id="3753392">&lt;=</span>&nbsp;<span class="ident" id="3753395"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753397">&amp;&amp;</span>&nbsp;<span class="ident" id="3753400"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753402">&lt;=</span>&nbsp;<span class="string" id="3753405">&#39;9&#39;</span>&nbsp;<span class="op" id="3753409">||</span>&nbsp;<span class="ident" id="3753412"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753414">==</span>&nbsp;<span class="string" id="3753417">&#39;+&#39;</span>&nbsp;<span class="op" id="3753421">||</span>&nbsp;<span class="ident" id="3753424"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753426">==</span>&nbsp;<span class="string" id="3753429">&#39;-&#39;</span>&nbsp;<span class="op" id="3753433">||</span>&nbsp;<span class="ident" id="3753436"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753438">==</span>&nbsp;<span class="string" id="3753441">&#39;.&#39;</span><span class="op" id="3753444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753449">if</span>&nbsp;<span class="ident" id="3753452"><a href="/gostd/net/url/url.go.html#3753253">i</a></span>&nbsp;<span class="op" id="3753454">==</span>&nbsp;<span class="num" id="3753457">0</span>&nbsp;<span class="op" id="3753459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753465">return</span>&nbsp;<span class="string" id="3753472">&#34;&#34;</span><span class="op" id="3753474">,</span>&nbsp;<span class="ident" id="3753476"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753482">,</span>&nbsp;<span class="builtintype" id="3753484">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753495">case</span>&nbsp;<span class="ident" id="3753500"><a href="/gostd/net/url/url.go.html#3753286">c</a></span>&nbsp;<span class="op" id="3753502">==</span>&nbsp;<span class="string" id="3753505">&#39;:&#39;</span><span class="op" id="3753508">:</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753513">if</span>&nbsp;<span class="ident" id="3753516"><a href="/gostd/net/url/url.go.html#3753253">i</a></span>&nbsp;<span class="op" id="3753518">==</span>&nbsp;<span class="num" id="3753521">0</span>&nbsp;<span class="op" id="3753523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753529">return</span>&nbsp;<span class="string" id="3753536">&#34;&#34;</span><span class="op" id="3753538">,</span>&nbsp;<span class="string" id="3753540">&#34;&#34;</span><span class="op" id="3753542">,</span>&nbsp;<span class="ident" id="3753544"><a href="/gostd/net/url/url.go.html#3745947">errors</a></span><span class="op" id="3753550">.</span><span class="ident" id="3753551"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3753554">(</span><span class="string" id="3753555">&#34;missing&nbsp;protocol&nbsp;scheme&#34;</span><span class="op" id="3753580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753590">return</span>&nbsp;<span class="ident" id="3753597"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753603">[</span><span class="num" id="3753604">0</span><span class="op" id="3753605">:</span><span class="ident" id="3753606"><a href="/gostd/net/url/url.go.html#3753253">i</a></span><span class="op" id="3753607">]</span><span class="op" id="3753608">,</span>&nbsp;<span class="ident" id="3753610"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753616">[</span><span class="ident" id="3753617"><a href="/gostd/net/url/url.go.html#3753253">i</a></span><span class="op" id="3753618">+</span><span class="num" id="3753619">1</span><span class="op" id="3753620">:</span><span class="op" id="3753621">]</span><span class="op" id="3753622">,</span>&nbsp;<span class="builtintype" id="3753624">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753630">default</span><span class="op" id="3753637">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3753642">//&nbsp;we&nbsp;have&nbsp;encountered&nbsp;an&nbsp;invalid&nbsp;character,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3753690">//&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;valid&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753724">return</span>&nbsp;<span class="string" id="3753731">&#34;&#34;</span><span class="op" id="3753733">,</span>&nbsp;<span class="ident" id="3753735"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753741">,</span>&nbsp;<span class="builtintype" id="3753743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3753752">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753755">return</span>&nbsp;<span class="string" id="3753762">&#34;&#34;</span><span class="op" id="3753764">,</span>&nbsp;<span class="ident" id="3753766"><a href="/gostd/net/url/url.go.html#3753198">rawurl</a></span><span class="op" id="3753772">,</span>&nbsp;<span class="builtintype" id="3753774">nil</span><br>
<span class="lineno"></span><span class="op" id="3753778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3753781">//&nbsp;Maybe&nbsp;s&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;t&nbsp;c&nbsp;u.</span><br>
<span class="lineno"></span><span class="comment" id="3753814">//&nbsp;If&nbsp;so,&nbsp;return&nbsp;t,&nbsp;c&nbsp;u&nbsp;(or&nbsp;t,&nbsp;u&nbsp;if&nbsp;cutc&nbsp;==&nbsp;true).</span><br>
<span class="lineno">320</span><span class="comment" id="3753865">//&nbsp;If&nbsp;not,&nbsp;return&nbsp;s,&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3753890">func</span>&nbsp;<span class="ident" id="3753895">split</span><span class="op" id="3753900">(</span><span class="ident" id="3753901">s</span>&nbsp;<span class="builtintype" id="3753903">string</span><span class="op" id="3753909">,</span>&nbsp;<span class="ident" id="3753911">c</span>&nbsp;<span class="builtintype" id="3753913">string</span><span class="op" id="3753919">,</span>&nbsp;<span class="ident" id="3753921">cutc</span>&nbsp;<span class="builtintype" id="3753926">bool</span><span class="op" id="3753930">)</span>&nbsp;<span class="op" id="3753932">(</span><span class="builtintype" id="3753933">string</span><span class="op" id="3753939">,</span>&nbsp;<span class="builtintype" id="3753941">string</span><span class="op" id="3753947">)</span>&nbsp;<span class="op" id="3753949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3753952">i</span>&nbsp;<span class="op" id="3753954">:=</span>&nbsp;<span class="ident" id="3753957"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3753964">.</span><span class="ident" id="3753965"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3753970">(</span><span class="ident" id="3753971"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3753972">,</span>&nbsp;<span class="ident" id="3753974"><a href="/gostd/net/url/url.go.html#3753911">c</a></span><span class="op" id="3753975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753978">if</span>&nbsp;<span class="ident" id="3753981"><a href="/gostd/net/url/url.go.html#3753952">i</a></span>&nbsp;<span class="op" id="3753983">&lt;</span>&nbsp;<span class="num" id="3753985">0</span>&nbsp;<span class="op" id="3753987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3753991">return</span>&nbsp;<span class="ident" id="3753998"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3753999">,</span>&nbsp;<span class="string" id="3754001">&#34;&#34;</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754008">if</span>&nbsp;<span class="ident" id="3754011"><a href="/gostd/net/url/url.go.html#3753921">cutc</a></span>&nbsp;<span class="op" id="3754016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754020">return</span>&nbsp;<span class="ident" id="3754027"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3754028">[</span><span class="num" id="3754029">0</span><span class="op" id="3754030">:</span><span class="ident" id="3754031"><a href="/gostd/net/url/url.go.html#3753952">i</a></span><span class="op" id="3754032">]</span><span class="op" id="3754033">,</span>&nbsp;<span class="ident" id="3754035"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3754036">[</span><span class="ident" id="3754037"><a href="/gostd/net/url/url.go.html#3753952">i</a></span><span class="op" id="3754038">+</span><span class="builtinfunc" id="3754039">len</span><span class="op" id="3754042">(</span><span class="ident" id="3754043"><a href="/gostd/net/url/url.go.html#3753911">c</a></span><span class="op" id="3754044">)</span><span class="op" id="3754045">:</span><span class="op" id="3754046">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754052">return</span>&nbsp;<span class="ident" id="3754059"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3754060">[</span><span class="num" id="3754061">0</span><span class="op" id="3754062">:</span><span class="ident" id="3754063"><a href="/gostd/net/url/url.go.html#3753952">i</a></span><span class="op" id="3754064">]</span><span class="op" id="3754065">,</span>&nbsp;<span class="ident" id="3754067"><a href="/gostd/net/url/url.go.html#3753901">s</a></span><span class="op" id="3754068">[</span><span class="ident" id="3754069"><a href="/gostd/net/url/url.go.html#3753952">i</a></span><span class="op" id="3754070">:</span><span class="op" id="3754071">]</span><br>
<span class="lineno">330</span><span class="op" id="3754073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3754076">//&nbsp;Parse&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="3754121">//&nbsp;The&nbsp;rawurl&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3754164">func</span>&nbsp;<span class="ident" id="3754169">Parse</span><span class="op" id="3754174">(</span><span class="ident" id="3754175">rawurl</span>&nbsp;<span class="builtintype" id="3754182">string</span><span class="op" id="3754188">)</span>&nbsp;<span class="op" id="3754190">(</span><span class="ident" id="3754191">url</span>&nbsp;<span class="op" id="3754195">*</span><span class="ident" id="3754196"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3754199">,</span>&nbsp;<span class="ident" id="3754201">err</span>&nbsp;<span class="builtintype" id="3754205">error</span><span class="op" id="3754210">)</span>&nbsp;<span class="op" id="3754212">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3754215">//&nbsp;Cut&nbsp;off&nbsp;#frag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3754233">u</span><span class="op" id="3754234">,</span>&nbsp;<span class="ident" id="3754236">frag</span>&nbsp;<span class="op" id="3754241">:=</span>&nbsp;<span class="ident" id="3754244"><a href="/gostd/net/url/url.go.html#3753895">split</a></span><span class="op" id="3754249">(</span><span class="ident" id="3754250"><a href="/gostd/net/url/url.go.html#3754175">rawurl</a></span><span class="op" id="3754256">,</span>&nbsp;<span class="string" id="3754258">&#34;#&#34;</span><span class="op" id="3754261">,</span>&nbsp;<span class="builtintype" id="3754263">true</span><span class="op" id="3754267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754270">if</span>&nbsp;<span class="ident" id="3754273"><a href="/gostd/net/url/url.go.html#3754191">url</a></span><span class="op" id="3754276">,</span>&nbsp;<span class="ident" id="3754278"><a href="/gostd/net/url/url.go.html#3754201">err</a></span>&nbsp;<span class="op" id="3754282">=</span>&nbsp;<span class="ident" id="3754284"><a href="/gostd/net/url/url.go.html#3755224">parse</a></span><span class="op" id="3754289">(</span><span class="ident" id="3754290"><a href="/gostd/net/url/url.go.html#3754233">u</a></span><span class="op" id="3754291">,</span>&nbsp;<span class="builtintype" id="3754293">false</span><span class="op" id="3754298">)</span><span class="op" id="3754299">;</span>&nbsp;<span class="ident" id="3754301"><a href="/gostd/net/url/url.go.html#3754201">err</a></span>&nbsp;<span class="op" id="3754305">!=</span>&nbsp;<span class="builtintype" id="3754308">nil</span>&nbsp;<span class="op" id="3754312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754316">return</span>&nbsp;<span class="builtintype" id="3754323">nil</span><span class="op" id="3754326">,</span>&nbsp;<span class="ident" id="3754328"><a href="/gostd/net/url/url.go.html#3754201">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754333">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754336">if</span>&nbsp;<span class="ident" id="3754339"><a href="/gostd/net/url/url.go.html#3754236">frag</a></span>&nbsp;<span class="op" id="3754344">==</span>&nbsp;<span class="string" id="3754347">&#34;&#34;</span>&nbsp;<span class="op" id="3754350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754354">return</span>&nbsp;<span class="ident" id="3754361"><a href="/gostd/net/url/url.go.html#3754191">url</a></span><span class="op" id="3754364">,</span>&nbsp;<span class="builtintype" id="3754366">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754374">if</span>&nbsp;<span class="ident" id="3754377"><a href="/gostd/net/url/url.go.html#3754191">url</a></span><span class="op" id="3754380">.</span><span class="ident" id="3754381"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span><span class="op" id="3754389">,</span>&nbsp;<span class="ident" id="3754391"><a href="/gostd/net/url/url.go.html#3754201">err</a></span>&nbsp;<span class="op" id="3754395">=</span>&nbsp;<span class="ident" id="3754397"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3754405">(</span><span class="ident" id="3754406"><a href="/gostd/net/url/url.go.html#3754236">frag</a></span><span class="op" id="3754410">,</span>&nbsp;<span class="ident" id="3754412"><a href="/gostd/net/url/url.go.html#3746681">encodeFragment</a></span><span class="op" id="3754426">)</span><span class="op" id="3754427">;</span>&nbsp;<span class="ident" id="3754429"><a href="/gostd/net/url/url.go.html#3754201">err</a></span>&nbsp;<span class="op" id="3754433">!=</span>&nbsp;<span class="builtintype" id="3754436">nil</span>&nbsp;<span class="op" id="3754440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754444">return</span>&nbsp;<span class="builtintype" id="3754451">nil</span><span class="op" id="3754454">,</span>&nbsp;<span class="op" id="3754456">&amp;</span><span class="ident" id="3754457"><a href="/gostd/net/url/url.go.html#3746062">Error</a></span><span class="op" id="3754462">{</span><span class="string" id="3754463">&#34;parse&#34;</span><span class="op" id="3754470">,</span>&nbsp;<span class="ident" id="3754472"><a href="/gostd/net/url/url.go.html#3754175">rawurl</a></span><span class="op" id="3754478">,</span>&nbsp;<span class="ident" id="3754480"><a href="/gostd/net/url/url.go.html#3754201">err</a></span><span class="op" id="3754483">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3754486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754489">return</span>&nbsp;<span class="ident" id="3754496"><a href="/gostd/net/url/url.go.html#3754191">url</a></span><span class="op" id="3754499">,</span>&nbsp;<span class="builtintype" id="3754501">nil</span><br>
<span class="lineno"></span><span class="op" id="3754505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3754508">//&nbsp;ParseRequestURI&nbsp;parses&nbsp;rawurl&nbsp;into&nbsp;a&nbsp;URL&nbsp;structure.&nbsp;&nbsp;It&nbsp;assumes&nbsp;that</span><br>
<span class="lineno">350</span><span class="comment" id="3754580">//&nbsp;rawurl&nbsp;was&nbsp;received&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request,&nbsp;so&nbsp;the&nbsp;rawurl&nbsp;is&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="3754652">//&nbsp;only&nbsp;as&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;or&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3754700">//&nbsp;The&nbsp;string&nbsp;rawurl&nbsp;is&nbsp;assumed&nbsp;not&nbsp;to&nbsp;have&nbsp;a&nbsp;#fragment&nbsp;suffix.</span><br>
<span class="lineno"></span><span class="comment" id="3754764">//&nbsp;(Web&nbsp;browsers&nbsp;strip&nbsp;#fragment&nbsp;before&nbsp;sending&nbsp;the&nbsp;URL&nbsp;to&nbsp;a&nbsp;web&nbsp;server.)</span><br>
<span class="lineno"></span><span class="keyword" id="3754838">func</span>&nbsp;<span class="ident" id="3754843">ParseRequestURI</span><span class="op" id="3754858">(</span><span class="ident" id="3754859">rawurl</span>&nbsp;<span class="builtintype" id="3754866">string</span><span class="op" id="3754872">)</span>&nbsp;<span class="op" id="3754874">(</span><span class="ident" id="3754875">url</span>&nbsp;<span class="op" id="3754879">*</span><span class="ident" id="3754880"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3754883">,</span>&nbsp;<span class="ident" id="3754885">err</span>&nbsp;<span class="builtintype" id="3754889">error</span><span class="op" id="3754894">)</span>&nbsp;<span class="op" id="3754896">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3754899">return</span>&nbsp;<span class="ident" id="3754906"><a href="/gostd/net/url/url.go.html#3755224">parse</a></span><span class="op" id="3754911">(</span><span class="ident" id="3754912"><a href="/gostd/net/url/url.go.html#3754859">rawurl</a></span><span class="op" id="3754918">,</span>&nbsp;<span class="builtintype" id="3754920">true</span><span class="op" id="3754924">)</span><br>
<span class="lineno"></span><span class="op" id="3754926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3754929">//&nbsp;parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;from&nbsp;a&nbsp;string&nbsp;in&nbsp;one&nbsp;of&nbsp;two&nbsp;contexts.&nbsp;&nbsp;If</span><br>
<span class="lineno"></span><span class="comment" id="3754993">//&nbsp;viaRequest&nbsp;is&nbsp;true,&nbsp;the&nbsp;URL&nbsp;is&nbsp;assumed&nbsp;to&nbsp;have&nbsp;arrived&nbsp;via&nbsp;an&nbsp;HTTP&nbsp;request,</span><br>
<span class="lineno">360</span><span class="comment" id="3755072">//&nbsp;in&nbsp;which&nbsp;case&nbsp;only&nbsp;absolute&nbsp;URLs&nbsp;or&nbsp;path-absolute&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="comment" id="3755152">//&nbsp;If&nbsp;viaRequest&nbsp;is&nbsp;false,&nbsp;all&nbsp;forms&nbsp;of&nbsp;relative&nbsp;URLs&nbsp;are&nbsp;allowed.</span><br>
<span class="lineno"></span><span class="keyword" id="3755219">func</span>&nbsp;<span class="ident" id="3755224">parse</span><span class="op" id="3755229">(</span><span class="ident" id="3755230">rawurl</span>&nbsp;<span class="builtintype" id="3755237">string</span><span class="op" id="3755243">,</span>&nbsp;<span class="ident" id="3755245">viaRequest</span>&nbsp;<span class="builtintype" id="3755256">bool</span><span class="op" id="3755260">)</span>&nbsp;<span class="op" id="3755262">(</span><span class="ident" id="3755263">url</span>&nbsp;<span class="op" id="3755267">*</span><span class="ident" id="3755268"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3755271">,</span>&nbsp;<span class="ident" id="3755273">err</span>&nbsp;<span class="builtintype" id="3755277">error</span><span class="op" id="3755282">)</span>&nbsp;<span class="op" id="3755284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755287">var</span>&nbsp;<span class="ident" id="3755291">rest</span>&nbsp;<span class="builtintype" id="3755296">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755305">if</span>&nbsp;<span class="ident" id="3755308"><a href="/gostd/net/url/url.go.html#3755230">rawurl</a></span>&nbsp;<span class="op" id="3755315">==</span>&nbsp;<span class="string" id="3755318">&#34;&#34;</span>&nbsp;<span class="op" id="3755321">&amp;&amp;</span>&nbsp;<span class="ident" id="3755324"><a href="/gostd/net/url/url.go.html#3755245">viaRequest</a></span>&nbsp;<span class="op" id="3755335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755339"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3755343">=</span>&nbsp;<span class="ident" id="3755345"><a href="/gostd/net/url/url.go.html#3745947">errors</a></span><span class="op" id="3755351">.</span><span class="ident" id="3755352"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3755355">(</span><span class="string" id="3755356">&#34;empty&nbsp;url&#34;</span><span class="op" id="3755367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755371">goto</span>&nbsp;<span class="ident" id="3755376"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755386"><a href="/gostd/net/url/url.go.html#3755263">url</a></span>&nbsp;<span class="op" id="3755390">=</span>&nbsp;<span class="builtinfunc" id="3755392">new</span><span class="op" id="3755395">(</span><span class="ident" id="3755396"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3755399">)</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755403">if</span>&nbsp;<span class="ident" id="3755406"><a href="/gostd/net/url/url.go.html#3755230">rawurl</a></span>&nbsp;<span class="op" id="3755413">==</span>&nbsp;<span class="string" id="3755416">&#34;*&#34;</span>&nbsp;<span class="op" id="3755420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755424"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755427">.</span><span class="ident" id="3755428"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3755433">=</span>&nbsp;<span class="string" id="3755435">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755441">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755449">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3755453">//&nbsp;Split&nbsp;off&nbsp;possible&nbsp;leading&nbsp;&#34;http:&#34;,&nbsp;&#34;mailto:&#34;,&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3755509">//&nbsp;Cannot&nbsp;contain&nbsp;escaped&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755548">if</span>&nbsp;<span class="ident" id="3755551"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755554">.</span><span class="ident" id="3755555"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="3755561">,</span>&nbsp;<span class="ident" id="3755563"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3755567">,</span>&nbsp;<span class="ident" id="3755569"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3755573">=</span>&nbsp;<span class="ident" id="3755575"><a href="/gostd/net/url/url.go.html#3753188">getscheme</a></span><span class="op" id="3755584">(</span><span class="ident" id="3755585"><a href="/gostd/net/url/url.go.html#3755230">rawurl</a></span><span class="op" id="3755591">)</span><span class="op" id="3755592">;</span>&nbsp;<span class="ident" id="3755594"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3755598">!=</span>&nbsp;<span class="builtintype" id="3755601">nil</span>&nbsp;<span class="op" id="3755605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755609">goto</span>&nbsp;<span class="ident" id="3755614"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755624"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755627">.</span><span class="ident" id="3755628"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3755635">=</span>&nbsp;<span class="ident" id="3755637"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3755644">.</span><span class="ident" id="3755645"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="3755652">(</span><span class="ident" id="3755653"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755656">.</span><span class="ident" id="3755657"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="3755663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755667"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3755671">,</span>&nbsp;<span class="ident" id="3755673"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755676">.</span><span class="ident" id="3755677"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span>&nbsp;<span class="op" id="3755686">=</span>&nbsp;<span class="ident" id="3755688"><a href="/gostd/net/url/url.go.html#3753895">split</a></span><span class="op" id="3755693">(</span><span class="ident" id="3755694"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3755698">,</span>&nbsp;<span class="string" id="3755700">&#34;?&#34;</span><span class="op" id="3755703">,</span>&nbsp;<span class="builtintype" id="3755705">true</span><span class="op" id="3755709">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755713">if</span>&nbsp;<span class="op" id="3755716">!</span><span class="ident" id="3755717"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3755724">.</span><span class="ident" id="3755725"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="3755734">(</span><span class="ident" id="3755735"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3755739">,</span>&nbsp;<span class="string" id="3755741">&#34;/&#34;</span><span class="op" id="3755744">)</span>&nbsp;<span class="op" id="3755746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755750">if</span>&nbsp;<span class="ident" id="3755753"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755756">.</span><span class="ident" id="3755757"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3755764">!=</span>&nbsp;<span class="string" id="3755767">&#34;&#34;</span>&nbsp;<span class="op" id="3755770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3755775">//&nbsp;We&nbsp;consider&nbsp;rootless&nbsp;paths&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;as&nbsp;opaque.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755832"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755835">.</span><span class="ident" id="3755836"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span>&nbsp;<span class="op" id="3755843">=</span>&nbsp;<span class="ident" id="3755845"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755853">return</span>&nbsp;<span class="ident" id="3755860"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755863">,</span>&nbsp;<span class="builtintype" id="3755865">nil</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755875">if</span>&nbsp;<span class="ident" id="3755878"><a href="/gostd/net/url/url.go.html#3755245">viaRequest</a></span>&nbsp;<span class="op" id="3755889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3755894"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3755898">=</span>&nbsp;<span class="ident" id="3755900"><a href="/gostd/net/url/url.go.html#3745947">errors</a></span><span class="op" id="3755906">.</span><span class="ident" id="3755907"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3755910">(</span><span class="string" id="3755911">&#34;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="3755936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755941">goto</span>&nbsp;<span class="ident" id="3755946"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755954">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3755957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3755961">if</span>&nbsp;<span class="op" id="3755964">(</span><span class="ident" id="3755965"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3755968">.</span><span class="ident" id="3755969"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3755976">!=</span>&nbsp;<span class="string" id="3755979">&#34;&#34;</span>&nbsp;<span class="op" id="3755982">||</span>&nbsp;<span class="op" id="3755985">!</span><span class="ident" id="3755986"><a href="/gostd/net/url/url.go.html#3755245">viaRequest</a></span>&nbsp;<span class="op" id="3755997">&amp;&amp;</span>&nbsp;<span class="op" id="3756000">!</span><span class="ident" id="3756001"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3756008">.</span><span class="ident" id="3756009"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="3756018">(</span><span class="ident" id="3756019"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3756023">,</span>&nbsp;<span class="string" id="3756025">&#34;///&#34;</span><span class="op" id="3756030">)</span><span class="op" id="3756031">)</span>&nbsp;<span class="op" id="3756033">&amp;&amp;</span>&nbsp;<span class="ident" id="3756036"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3756043">.</span><span class="ident" id="3756044"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="3756053">(</span><span class="ident" id="3756054"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3756058">,</span>&nbsp;<span class="string" id="3756060">&#34;//&#34;</span><span class="op" id="3756064">)</span>&nbsp;<span class="op" id="3756066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756070">var</span>&nbsp;<span class="ident" id="3756074">authority</span>&nbsp;<span class="builtintype" id="3756084">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756093"><a href="/gostd/net/url/url.go.html#3756074">authority</a></span><span class="op" id="3756102">,</span>&nbsp;<span class="ident" id="3756104"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span>&nbsp;<span class="op" id="3756109">=</span>&nbsp;<span class="ident" id="3756111"><a href="/gostd/net/url/url.go.html#3753895">split</a></span><span class="op" id="3756116">(</span><span class="ident" id="3756117"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3756121">[</span><span class="num" id="3756122">2</span><span class="op" id="3756123">:</span><span class="op" id="3756124">]</span><span class="op" id="3756125">,</span>&nbsp;<span class="string" id="3756127">&#34;/&#34;</span><span class="op" id="3756130">,</span>&nbsp;<span class="builtintype" id="3756132">false</span><span class="op" id="3756137">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756141"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3756144">.</span><span class="ident" id="3756145"><a href="/gostd/net/url/url.go.html#3751268">User</a></span><span class="op" id="3756149">,</span>&nbsp;<span class="ident" id="3756151"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3756154">.</span><span class="ident" id="3756155"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="3756159">,</span>&nbsp;<span class="ident" id="3756161"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3756165">=</span>&nbsp;<span class="ident" id="3756167"><a href="/gostd/net/url/url.go.html#3756491">parseAuthority</a></span><span class="op" id="3756181">(</span><span class="ident" id="3756182"><a href="/gostd/net/url/url.go.html#3756074">authority</a></span><span class="op" id="3756191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756195">if</span>&nbsp;<span class="ident" id="3756198"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3756202">!=</span>&nbsp;<span class="builtintype" id="3756205">nil</span>&nbsp;<span class="op" id="3756209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756214">goto</span>&nbsp;<span class="ident" id="3756219"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756231">if</span>&nbsp;<span class="ident" id="3756234"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3756241">.</span><span class="ident" id="3756242"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="3756250">(</span><span class="ident" id="3756251"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3756254">.</span><span class="ident" id="3756255"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="3756259">,</span>&nbsp;<span class="string" id="3756261">&#34;%&#34;</span><span class="op" id="3756264">)</span>&nbsp;<span class="op" id="3756266">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756271"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3756275">=</span>&nbsp;<span class="ident" id="3756277"><a href="/gostd/net/url/url.go.html#3745947">errors</a></span><span class="op" id="3756283">.</span><span class="ident" id="3756284"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3756287">(</span><span class="string" id="3756288">&#34;hexadecimal&nbsp;escape&nbsp;in&nbsp;host&#34;</span><span class="op" id="3756316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756321">goto</span>&nbsp;<span class="ident" id="3756326"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756340">if</span>&nbsp;<span class="ident" id="3756343"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3756346">.</span><span class="ident" id="3756347"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3756351">,</span>&nbsp;<span class="ident" id="3756353"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3756357">=</span>&nbsp;<span class="ident" id="3756359"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3756367">(</span><span class="ident" id="3756368"><a href="/gostd/net/url/url.go.html#3755291">rest</a></span><span class="op" id="3756372">,</span>&nbsp;<span class="ident" id="3756374"><a href="/gostd/net/url/url.go.html#3746607">encodePath</a></span><span class="op" id="3756384">)</span><span class="op" id="3756385">;</span>&nbsp;<span class="ident" id="3756387"><a href="/gostd/net/url/url.go.html#3755273">err</a></span>&nbsp;<span class="op" id="3756391">!=</span>&nbsp;<span class="builtintype" id="3756394">nil</span>&nbsp;<span class="op" id="3756398">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756402">goto</span>&nbsp;<span class="ident" id="3756407"><a href="/gostd/net/url/url.go.html#3756434">Error</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756417">return</span>&nbsp;<span class="ident" id="3756424"><a href="/gostd/net/url/url.go.html#3755263">url</a></span><span class="op" id="3756427">,</span>&nbsp;<span class="builtintype" id="3756429">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3756434">Error</span><span class="op" id="3756439">:</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756442">return</span>&nbsp;<span class="builtintype" id="3756449">nil</span><span class="op" id="3756452">,</span>&nbsp;<span class="op" id="3756454">&amp;</span><span class="ident" id="3756455"><a href="/gostd/net/url/url.go.html#3746062">Error</a></span><span class="op" id="3756460">{</span><span class="string" id="3756461">&#34;parse&#34;</span><span class="op" id="3756468">,</span>&nbsp;<span class="ident" id="3756470"><a href="/gostd/net/url/url.go.html#3755230">rawurl</a></span><span class="op" id="3756476">,</span>&nbsp;<span class="ident" id="3756478"><a href="/gostd/net/url/url.go.html#3755273">err</a></span><span class="op" id="3756481">}</span><br>
<span class="lineno"></span><span class="op" id="3756483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3756486">func</span>&nbsp;<span class="ident" id="3756491">parseAuthority</span><span class="op" id="3756505">(</span><span class="ident" id="3756506">authority</span>&nbsp;<span class="builtintype" id="3756516">string</span><span class="op" id="3756522">)</span>&nbsp;<span class="op" id="3756524">(</span><span class="ident" id="3756525">user</span>&nbsp;<span class="op" id="3756530">*</span><span class="ident" id="3756531"><a href="/gostd/net/url/url.go.html#3752403">Userinfo</a></span><span class="op" id="3756539">,</span>&nbsp;<span class="ident" id="3756541">host</span>&nbsp;<span class="builtintype" id="3756546">string</span><span class="op" id="3756552">,</span>&nbsp;<span class="ident" id="3756554">err</span>&nbsp;<span class="builtintype" id="3756558">error</span><span class="op" id="3756563">)</span>&nbsp;<span class="op" id="3756565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756568">i</span>&nbsp;<span class="op" id="3756570">:=</span>&nbsp;<span class="ident" id="3756573"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3756580">.</span><span class="ident" id="3756581"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="3756590">(</span><span class="ident" id="3756591"><a href="/gostd/net/url/url.go.html#3756506">authority</a></span><span class="op" id="3756600">,</span>&nbsp;<span class="string" id="3756602">&#34;@&#34;</span><span class="op" id="3756605">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756608">if</span>&nbsp;<span class="ident" id="3756611"><a href="/gostd/net/url/url.go.html#3756568">i</a></span>&nbsp;<span class="op" id="3756613">&lt;</span>&nbsp;<span class="num" id="3756615">0</span>&nbsp;<span class="op" id="3756617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756621"><a href="/gostd/net/url/url.go.html#3756541">host</a></span>&nbsp;<span class="op" id="3756626">=</span>&nbsp;<span class="ident" id="3756628"><a href="/gostd/net/url/url.go.html#3756506">authority</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756640">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756651">userinfo</span><span class="op" id="3756659">,</span>&nbsp;<span class="ident" id="3756661"><a href="/gostd/net/url/url.go.html#3756541">host</a></span>&nbsp;<span class="op" id="3756666">:=</span>&nbsp;<span class="ident" id="3756669"><a href="/gostd/net/url/url.go.html#3756506">authority</a></span><span class="op" id="3756678">[</span><span class="op" id="3756679">:</span><span class="ident" id="3756680"><a href="/gostd/net/url/url.go.html#3756568">i</a></span><span class="op" id="3756681">]</span><span class="op" id="3756682">,</span>&nbsp;<span class="ident" id="3756684"><a href="/gostd/net/url/url.go.html#3756506">authority</a></span><span class="op" id="3756693">[</span><span class="ident" id="3756694"><a href="/gostd/net/url/url.go.html#3756568">i</a></span><span class="op" id="3756695">+</span><span class="num" id="3756696">1</span><span class="op" id="3756697">:</span><span class="op" id="3756698">]</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756701">if</span>&nbsp;<span class="ident" id="3756704"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3756711">.</span><span class="ident" id="3756712"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3756717">(</span><span class="ident" id="3756718"><a href="/gostd/net/url/url.go.html#3756651">userinfo</a></span><span class="op" id="3756726">,</span>&nbsp;<span class="string" id="3756728">&#34;:&#34;</span><span class="op" id="3756731">)</span>&nbsp;<span class="op" id="3756733">&lt;</span>&nbsp;<span class="num" id="3756735">0</span>&nbsp;<span class="op" id="3756737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756741">if</span>&nbsp;<span class="ident" id="3756744"><a href="/gostd/net/url/url.go.html#3756651">userinfo</a></span><span class="op" id="3756752">,</span>&nbsp;<span class="ident" id="3756754"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3756758">=</span>&nbsp;<span class="ident" id="3756760"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3756768">(</span><span class="ident" id="3756769"><a href="/gostd/net/url/url.go.html#3756651">userinfo</a></span><span class="op" id="3756777">,</span>&nbsp;<span class="ident" id="3756779"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3756797">)</span><span class="op" id="3756798">;</span>&nbsp;<span class="ident" id="3756800"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3756804">!=</span>&nbsp;<span class="builtintype" id="3756807">nil</span>&nbsp;<span class="op" id="3756811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756816">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756829"><a href="/gostd/net/url/url.go.html#3756525">user</a></span>&nbsp;<span class="op" id="3756834">=</span>&nbsp;<span class="ident" id="3756836"><a href="/gostd/net/url/url.go.html#3751585">User</a></span><span class="op" id="3756840">(</span><span class="ident" id="3756841"><a href="/gostd/net/url/url.go.html#3756651">userinfo</a></span><span class="op" id="3756849">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756852">}</span>&nbsp;<span class="keyword" id="3756854">else</span>&nbsp;<span class="op" id="3756859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3756863">username</span><span class="op" id="3756871">,</span>&nbsp;<span class="ident" id="3756873">password</span>&nbsp;<span class="op" id="3756882">:=</span>&nbsp;<span class="ident" id="3756885"><a href="/gostd/net/url/url.go.html#3753895">split</a></span><span class="op" id="3756890">(</span><span class="ident" id="3756891"><a href="/gostd/net/url/url.go.html#3756651">userinfo</a></span><span class="op" id="3756899">,</span>&nbsp;<span class="string" id="3756901">&#34;:&#34;</span><span class="op" id="3756904">,</span>&nbsp;<span class="builtintype" id="3756906">true</span><span class="op" id="3756910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756914">if</span>&nbsp;<span class="ident" id="3756917"><a href="/gostd/net/url/url.go.html#3756863">username</a></span><span class="op" id="3756925">,</span>&nbsp;<span class="ident" id="3756927"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3756931">=</span>&nbsp;<span class="ident" id="3756933"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3756941">(</span><span class="ident" id="3756942"><a href="/gostd/net/url/url.go.html#3756863">username</a></span><span class="op" id="3756950">,</span>&nbsp;<span class="ident" id="3756952"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3756970">)</span><span class="op" id="3756971">;</span>&nbsp;<span class="ident" id="3756973"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3756977">!=</span>&nbsp;<span class="builtintype" id="3756980">nil</span>&nbsp;<span class="op" id="3756984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3756989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3756998">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3757002">if</span>&nbsp;<span class="ident" id="3757005"><a href="/gostd/net/url/url.go.html#3756873">password</a></span><span class="op" id="3757013">,</span>&nbsp;<span class="ident" id="3757015"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3757019">=</span>&nbsp;<span class="ident" id="3757021"><a href="/gostd/net/url/url.go.html#3748725">unescape</a></span><span class="op" id="3757029">(</span><span class="ident" id="3757030"><a href="/gostd/net/url/url.go.html#3756873">password</a></span><span class="op" id="3757038">,</span>&nbsp;<span class="ident" id="3757040"><a href="/gostd/net/url/url.go.html#3746639">encodeUserPassword</a></span><span class="op" id="3757058">)</span><span class="op" id="3757059">;</span>&nbsp;<span class="ident" id="3757061"><a href="/gostd/net/url/url.go.html#3756554">err</a></span>&nbsp;<span class="op" id="3757065">!=</span>&nbsp;<span class="builtintype" id="3757068">nil</span>&nbsp;<span class="op" id="3757072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3757077">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3757086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3757090"><a href="/gostd/net/url/url.go.html#3756525">user</a></span>&nbsp;<span class="op" id="3757095">=</span>&nbsp;<span class="ident" id="3757097"><a href="/gostd/net/url/url.go.html#3752059">UserPassword</a></span><span class="op" id="3757109">(</span><span class="ident" id="3757110"><a href="/gostd/net/url/url.go.html#3756863">username</a></span><span class="op" id="3757118">,</span>&nbsp;<span class="ident" id="3757120"><a href="/gostd/net/url/url.go.html#3756873">password</a></span><span class="op" id="3757128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3757131">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3757134">return</span><br>
<span class="lineno"></span><span class="op" id="3757141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3757144">//&nbsp;String&nbsp;reassembles&nbsp;the&nbsp;URL&nbsp;into&nbsp;a&nbsp;valid&nbsp;URL&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="3757199">//&nbsp;The&nbsp;general&nbsp;form&nbsp;of&nbsp;the&nbsp;result&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno">445</span><span class="comment" id="3757244">//</span><br>
<span class="lineno"></span><span class="comment" id="3757247">//&nbsp;&nbsp;&nbsp;&nbsp;scheme:opaque</span><br>
<span class="lineno"></span><span class="comment" id="3757264">//&nbsp;&nbsp;&nbsp;&nbsp;scheme://userinfo@host/path?query#fragment</span><br>
<span class="lineno"></span><span class="comment" id="3757310">//</span><br>
<span class="lineno"></span><span class="comment" id="3757313">//&nbsp;If&nbsp;u.Opaque&nbsp;is&nbsp;non-empty,&nbsp;String&nbsp;uses&nbsp;the&nbsp;first&nbsp;form;</span><br>
<span class="lineno">450</span><span class="comment" id="3757370">//&nbsp;otherwise&nbsp;it&nbsp;uses&nbsp;the&nbsp;second&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3757408">//</span><br>
<span class="lineno"></span><span class="comment" id="3757411">//&nbsp;In&nbsp;the&nbsp;second&nbsp;form,&nbsp;the&nbsp;following&nbsp;rules&nbsp;apply:</span><br>
<span class="lineno"></span><span class="comment" id="3757461">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.Scheme&nbsp;is&nbsp;empty,&nbsp;scheme:&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3757508">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.User&nbsp;is&nbsp;nil,&nbsp;userinfo@&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">455</span><span class="comment" id="3757553">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;empty,&nbsp;host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3757596">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.Scheme&nbsp;and&nbsp;u.Host&nbsp;are&nbsp;empty&nbsp;and&nbsp;u.User&nbsp;is&nbsp;nil,</span><br>
<span class="lineno"></span><span class="comment" id="3757653">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;entire&nbsp;scheme://userinfo@host/&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3757706">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.Host&nbsp;is&nbsp;non-empty&nbsp;and&nbsp;u.Path&nbsp;begins&nbsp;with&nbsp;a&nbsp;/,</span><br>
<span class="lineno"></span><span class="comment" id="3757762">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;form&nbsp;host/path&nbsp;does&nbsp;not&nbsp;add&nbsp;its&nbsp;own&nbsp;/.</span><br>
<span class="lineno">460</span><span class="comment" id="3757811">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.RawQuery&nbsp;is&nbsp;empty,&nbsp;?query&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="3757859">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;if&nbsp;u.Fragment&nbsp;is&nbsp;empty,&nbsp;#fragment&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="keyword" id="3757910">func</span>&nbsp;<span class="op" id="3757915">(</span><span class="ident" id="3757916">u</span>&nbsp;<span class="op" id="3757918">*</span><span class="ident" id="3757919"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3757922">)</span>&nbsp;<span class="ident" id="3757924">String</span><span class="op" id="3757930">(</span><span class="op" id="3757931">)</span>&nbsp;<span class="builtintype" id="3757933">string</span>&nbsp;<span class="op" id="3757940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3757943">var</span>&nbsp;<span class="ident" id="3757947">buf</span>&nbsp;<span class="ident" id="3757951"><a href="/gostd/net/url/url.go.html#3745938">bytes</a></span><span class="op" id="3757956">.</span><span class="ident" id="3757957"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3757965">if</span>&nbsp;<span class="ident" id="3757968"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3757969">.</span><span class="ident" id="3757970"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3757977">!=</span>&nbsp;<span class="string" id="3757980">&#34;&#34;</span>&nbsp;<span class="op" id="3757983">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3757987"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3757990">.</span><span class="ident" id="3757991"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758002">(</span><span class="ident" id="3758003"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758004">.</span><span class="ident" id="3758005"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><span class="op" id="3758011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758015"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758018">.</span><span class="ident" id="3758019"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3758028">(</span><span class="string" id="3758029">&#39;:&#39;</span><span class="op" id="3758032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758038">if</span>&nbsp;<span class="ident" id="3758041"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758042">.</span><span class="ident" id="3758043"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span>&nbsp;<span class="op" id="3758050">!=</span>&nbsp;<span class="string" id="3758053">&#34;&#34;</span>&nbsp;<span class="op" id="3758056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758060"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758063">.</span><span class="ident" id="3758064"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758075">(</span><span class="ident" id="3758076"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758077">.</span><span class="ident" id="3758078"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span><span class="op" id="3758084">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758087">}</span>&nbsp;<span class="keyword" id="3758089">else</span>&nbsp;<span class="op" id="3758094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758098">if</span>&nbsp;<span class="ident" id="3758101"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758102">.</span><span class="ident" id="3758103"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3758110">!=</span>&nbsp;<span class="string" id="3758113">&#34;&#34;</span>&nbsp;<span class="op" id="3758116">||</span>&nbsp;<span class="ident" id="3758119"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758120">.</span><span class="ident" id="3758121"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span>&nbsp;<span class="op" id="3758126">!=</span>&nbsp;<span class="string" id="3758129">&#34;&#34;</span>&nbsp;<span class="op" id="3758132">||</span>&nbsp;<span class="ident" id="3758135"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758136">.</span><span class="ident" id="3758137"><a href="/gostd/net/url/url.go.html#3751268">User</a></span>&nbsp;<span class="op" id="3758142">!=</span>&nbsp;<span class="builtintype" id="3758145">nil</span>&nbsp;<span class="op" id="3758149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758154"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758157">.</span><span class="ident" id="3758158"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758169">(</span><span class="string" id="3758170">&#34;//&#34;</span><span class="op" id="3758174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758179">if</span>&nbsp;<span class="ident" id="3758182">ui</span>&nbsp;<span class="op" id="3758185">:=</span>&nbsp;<span class="ident" id="3758188"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758189">.</span><span class="ident" id="3758190"><a href="/gostd/net/url/url.go.html#3751268">User</a></span><span class="op" id="3758194">;</span>&nbsp;<span class="ident" id="3758196"><a href="/gostd/net/url/url.go.html#3758182">ui</a></span>&nbsp;<span class="op" id="3758199">!=</span>&nbsp;<span class="builtintype" id="3758202">nil</span>&nbsp;<span class="op" id="3758206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758212"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758215">.</span><span class="ident" id="3758216"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758227">(</span><span class="ident" id="3758228"><a href="/gostd/net/url/url.go.html#3758182">ui</a></span><span class="op" id="3758230">.</span><span class="ident" id="3758231"><a href="/gostd/net/url/url.go.html#3752889">String</a></span><span class="op" id="3758237">(</span><span class="op" id="3758238">)</span><span class="op" id="3758239">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758245"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758248">.</span><span class="ident" id="3758249"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3758258">(</span><span class="string" id="3758259">&#39;@&#39;</span><span class="op" id="3758262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758272">if</span>&nbsp;<span class="ident" id="3758275">h</span>&nbsp;<span class="op" id="3758277">:=</span>&nbsp;<span class="ident" id="3758280"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758281">.</span><span class="ident" id="3758282"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="3758286">;</span>&nbsp;<span class="ident" id="3758288"><a href="/gostd/net/url/url.go.html#3758275">h</a></span>&nbsp;<span class="op" id="3758290">!=</span>&nbsp;<span class="string" id="3758293">&#34;&#34;</span>&nbsp;<span class="op" id="3758296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758302"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758305">.</span><span class="ident" id="3758306"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758317">(</span><span class="ident" id="3758318"><a href="/gostd/net/url/url.go.html#3758275">h</a></span><span class="op" id="3758319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758324">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758332">if</span>&nbsp;<span class="ident" id="3758335"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758336">.</span><span class="ident" id="3758337"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3758342">!=</span>&nbsp;<span class="string" id="3758345">&#34;&#34;</span>&nbsp;<span class="op" id="3758348">&amp;&amp;</span>&nbsp;<span class="ident" id="3758351"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758352">.</span><span class="ident" id="3758353"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3758357">[</span><span class="num" id="3758358">0</span><span class="op" id="3758359">]</span>&nbsp;<span class="op" id="3758361">!=</span>&nbsp;<span class="string" id="3758364">&#39;/&#39;</span>&nbsp;<span class="op" id="3758368">&amp;&amp;</span>&nbsp;<span class="ident" id="3758371"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758372">.</span><span class="ident" id="3758373"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span>&nbsp;<span class="op" id="3758378">!=</span>&nbsp;<span class="string" id="3758381">&#34;&#34;</span>&nbsp;<span class="op" id="3758384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758389"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758392">.</span><span class="ident" id="3758393"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3758402">(</span><span class="string" id="3758403">&#39;/&#39;</span><span class="op" id="3758406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758414"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758417">.</span><span class="ident" id="3758418"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758429">(</span><span class="ident" id="3758430"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3758436">(</span><span class="ident" id="3758437"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758438">.</span><span class="ident" id="3758439"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3758443">,</span>&nbsp;<span class="ident" id="3758445"><a href="/gostd/net/url/url.go.html#3746607">encodePath</a></span><span class="op" id="3758455">)</span><span class="op" id="3758456">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758462">if</span>&nbsp;<span class="ident" id="3758465"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758466">.</span><span class="ident" id="3758467"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span>&nbsp;<span class="op" id="3758476">!=</span>&nbsp;<span class="string" id="3758479">&#34;&#34;</span>&nbsp;<span class="op" id="3758482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758486"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758489">.</span><span class="ident" id="3758490"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3758499">(</span><span class="string" id="3758500">&#39;?&#39;</span><span class="op" id="3758503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758507"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758510">.</span><span class="ident" id="3758511"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758522">(</span><span class="ident" id="3758523"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758524">.</span><span class="ident" id="3758525"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span><span class="op" id="3758533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758536">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758539">if</span>&nbsp;<span class="ident" id="3758542"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758543">.</span><span class="ident" id="3758544"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span>&nbsp;<span class="op" id="3758553">!=</span>&nbsp;<span class="string" id="3758556">&#34;&#34;</span>&nbsp;<span class="op" id="3758559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758563"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758566">.</span><span class="ident" id="3758567"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3758576">(</span><span class="string" id="3758577">&#39;#&#39;</span><span class="op" id="3758580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3758584"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758587">.</span><span class="ident" id="3758588"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3758599">(</span><span class="ident" id="3758600"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3758606">(</span><span class="ident" id="3758607"><a href="/gostd/net/url/url.go.html#3757916">u</a></span><span class="op" id="3758608">.</span><span class="ident" id="3758609"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span><span class="op" id="3758617">,</span>&nbsp;<span class="ident" id="3758619"><a href="/gostd/net/url/url.go.html#3746681">encodeFragment</a></span><span class="op" id="3758633">)</span><span class="op" id="3758634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3758637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3758640">return</span>&nbsp;<span class="ident" id="3758647"><a href="/gostd/net/url/url.go.html#3757947">buf</a></span><span class="op" id="3758650">.</span><span class="ident" id="3758651"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="3758657">(</span><span class="op" id="3758658">)</span><br>
<span class="lineno">495</span><span class="op" id="3758660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3758663">//&nbsp;Values&nbsp;maps&nbsp;a&nbsp;string&nbsp;key&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3758712">//&nbsp;It&nbsp;is&nbsp;typically&nbsp;used&nbsp;for&nbsp;query&nbsp;parameters&nbsp;and&nbsp;form&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="3758774">//&nbsp;Unlike&nbsp;in&nbsp;the&nbsp;http.Header&nbsp;map,&nbsp;the&nbsp;keys&nbsp;in&nbsp;a&nbsp;Values&nbsp;map</span><br>
<span class="lineno">500</span><span class="comment" id="3758833">//&nbsp;are&nbsp;case-sensitive.</span><br>
<span class="lineno"></span><span class="keyword" id="3758856">type</span>&nbsp;<span class="ident" id="3758861">Values</span>&nbsp;<span class="keyword" id="3758868">map</span><span class="op" id="3758871">[</span><span class="builtintype" id="3758872">string</span><span class="op" id="3758878">]</span><span class="op" id="3758879">[</span><span class="op" id="3758880">]</span><span class="builtintype" id="3758881">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3758889">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3758948">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns</span><br>
<span class="lineno">505</span><span class="comment" id="3759011">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values,&nbsp;use&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span><span class="comment" id="3759071">//&nbsp;directly.</span><br>
<span class="lineno"></span><span class="keyword" id="3759084">func</span>&nbsp;<span class="op" id="3759089">(</span><span class="ident" id="3759090">v</span>&nbsp;<span class="ident" id="3759092"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759098">)</span>&nbsp;<span class="ident" id="3759100">Get</span><span class="op" id="3759103">(</span><span class="ident" id="3759104">key</span>&nbsp;<span class="builtintype" id="3759108">string</span><span class="op" id="3759114">)</span>&nbsp;<span class="builtintype" id="3759116">string</span>&nbsp;<span class="op" id="3759123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3759126">if</span>&nbsp;<span class="ident" id="3759129"><a href="/gostd/net/url/url.go.html#3759090">v</a></span>&nbsp;<span class="op" id="3759131">==</span>&nbsp;<span class="builtintype" id="3759134">nil</span>&nbsp;<span class="op" id="3759138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3759142">return</span>&nbsp;<span class="string" id="3759149">&#34;&#34;</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3759153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3759156">vs</span><span class="op" id="3759158">,</span>&nbsp;<span class="ident" id="3759160">ok</span>&nbsp;<span class="op" id="3759163">:=</span>&nbsp;<span class="ident" id="3759166"><a href="/gostd/net/url/url.go.html#3759090">v</a></span><span class="op" id="3759167">[</span><span class="ident" id="3759168"><a href="/gostd/net/url/url.go.html#3759104">key</a></span><span class="op" id="3759171">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3759174">if</span>&nbsp;<span class="op" id="3759177">!</span><span class="ident" id="3759178"><a href="/gostd/net/url/url.go.html#3759160">ok</a></span>&nbsp;<span class="op" id="3759181">||</span>&nbsp;<span class="builtinfunc" id="3759184">len</span><span class="op" id="3759187">(</span><span class="ident" id="3759188"><a href="/gostd/net/url/url.go.html#3759156">vs</a></span><span class="op" id="3759190">)</span>&nbsp;<span class="op" id="3759192">==</span>&nbsp;<span class="num" id="3759195">0</span>&nbsp;<span class="op" id="3759197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3759201">return</span>&nbsp;<span class="string" id="3759208">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3759212">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3759215">return</span>&nbsp;<span class="ident" id="3759222"><a href="/gostd/net/url/url.go.html#3759156">vs</a></span><span class="op" id="3759224">[</span><span class="num" id="3759225">0</span><span class="op" id="3759226">]</span><br>
<span class="lineno"></span><span class="op" id="3759228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3759231">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;key&nbsp;to&nbsp;value.&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3759286">//&nbsp;values.</span><br>
<span class="lineno">520</span><span class="keyword" id="3759297">func</span>&nbsp;<span class="op" id="3759302">(</span><span class="ident" id="3759303">v</span>&nbsp;<span class="ident" id="3759305"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759311">)</span>&nbsp;<span class="ident" id="3759313">Set</span><span class="op" id="3759316">(</span><span class="ident" id="3759317">key</span><span class="op" id="3759320">,</span>&nbsp;<span class="ident" id="3759322">value</span>&nbsp;<span class="builtintype" id="3759328">string</span><span class="op" id="3759334">)</span>&nbsp;<span class="op" id="3759336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3759339"><a href="/gostd/net/url/url.go.html#3759303">v</a></span><span class="op" id="3759340">[</span><span class="ident" id="3759341"><a href="/gostd/net/url/url.go.html#3759317">key</a></span><span class="op" id="3759344">]</span>&nbsp;<span class="op" id="3759346">=</span>&nbsp;<span class="op" id="3759348">[</span><span class="op" id="3759349">]</span><span class="builtintype" id="3759350">string</span><span class="op" id="3759356">{</span><span class="ident" id="3759357"><a href="/gostd/net/url/url.go.html#3759322">value</a></span><span class="op" id="3759362">}</span><br>
<span class="lineno"></span><span class="op" id="3759364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3759367">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;value&nbsp;to&nbsp;key.&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing</span><br>
<span class="lineno">525</span><span class="comment" id="3759424">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3759455">func</span>&nbsp;<span class="op" id="3759460">(</span><span class="ident" id="3759461">v</span>&nbsp;<span class="ident" id="3759463"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759469">)</span>&nbsp;<span class="ident" id="3759471">Add</span><span class="op" id="3759474">(</span><span class="ident" id="3759475">key</span><span class="op" id="3759478">,</span>&nbsp;<span class="ident" id="3759480">value</span>&nbsp;<span class="builtintype" id="3759486">string</span><span class="op" id="3759492">)</span>&nbsp;<span class="op" id="3759494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3759497"><a href="/gostd/net/url/url.go.html#3759461">v</a></span><span class="op" id="3759498">[</span><span class="ident" id="3759499"><a href="/gostd/net/url/url.go.html#3759475">key</a></span><span class="op" id="3759502">]</span>&nbsp;<span class="op" id="3759504">=</span>&nbsp;<span class="builtinfunc" id="3759506">append</span><span class="op" id="3759512">(</span><span class="ident" id="3759513"><a href="/gostd/net/url/url.go.html#3759461">v</a></span><span class="op" id="3759514">[</span><span class="ident" id="3759515"><a href="/gostd/net/url/url.go.html#3759475">key</a></span><span class="op" id="3759518">]</span><span class="op" id="3759519">,</span>&nbsp;<span class="ident" id="3759521"><a href="/gostd/net/url/url.go.html#3759480">value</a></span><span class="op" id="3759526">)</span><br>
<span class="lineno"></span><span class="op" id="3759528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="comment" id="3759531">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3759578">func</span>&nbsp;<span class="op" id="3759583">(</span><span class="ident" id="3759584">v</span>&nbsp;<span class="ident" id="3759586"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759592">)</span>&nbsp;<span class="ident" id="3759594">Del</span><span class="op" id="3759597">(</span><span class="ident" id="3759598">key</span>&nbsp;<span class="builtintype" id="3759602">string</span><span class="op" id="3759608">)</span>&nbsp;<span class="op" id="3759610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3759613">delete</span><span class="op" id="3759619">(</span><span class="ident" id="3759620"><a href="/gostd/net/url/url.go.html#3759584">v</a></span><span class="op" id="3759621">,</span>&nbsp;<span class="ident" id="3759623"><a href="/gostd/net/url/url.go.html#3759598">key</a></span><span class="op" id="3759626">)</span><br>
<span class="lineno"></span><span class="op" id="3759628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="3759631">//&nbsp;ParseQuery&nbsp;parses&nbsp;the&nbsp;URL-encoded&nbsp;query&nbsp;string&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3759693">//&nbsp;a&nbsp;map&nbsp;listing&nbsp;the&nbsp;values&nbsp;specified&nbsp;for&nbsp;each&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="3759745">//&nbsp;ParseQuery&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;map&nbsp;containing&nbsp;all&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3759807">//&nbsp;valid&nbsp;query&nbsp;parameters&nbsp;found;&nbsp;err&nbsp;describes&nbsp;the&nbsp;first&nbsp;decoding&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3759879">//&nbsp;encountered,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">540</span><span class="keyword" id="3759903">func</span>&nbsp;<span class="ident" id="3759908">ParseQuery</span><span class="op" id="3759918">(</span><span class="ident" id="3759919">query</span>&nbsp;<span class="builtintype" id="3759925">string</span><span class="op" id="3759931">)</span>&nbsp;<span class="op" id="3759933">(</span><span class="ident" id="3759934">m</span>&nbsp;<span class="ident" id="3759936"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759942">,</span>&nbsp;<span class="ident" id="3759944">err</span>&nbsp;<span class="builtintype" id="3759948">error</span><span class="op" id="3759953">)</span>&nbsp;<span class="op" id="3759955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3759958"><a href="/gostd/net/url/url.go.html#3759934">m</a></span>&nbsp;<span class="op" id="3759960">=</span>&nbsp;<span class="builtinfunc" id="3759962">make</span><span class="op" id="3759966">(</span><span class="ident" id="3759967"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3759973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3759976"><a href="/gostd/net/url/url.go.html#3759944">err</a></span>&nbsp;<span class="op" id="3759980">=</span>&nbsp;<span class="ident" id="3759982"><a href="/gostd/net/url/url.go.html#3760019">parseQuery</a></span><span class="op" id="3759992">(</span><span class="ident" id="3759993"><a href="/gostd/net/url/url.go.html#3759934">m</a></span><span class="op" id="3759994">,</span>&nbsp;<span class="ident" id="3759996"><a href="/gostd/net/url/url.go.html#3759919">query</a></span><span class="op" id="3760001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760004">return</span><br>
<span class="lineno"></span><span class="op" id="3760011">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span><span class="keyword" id="3760014">func</span>&nbsp;<span class="ident" id="3760019">parseQuery</span><span class="op" id="3760029">(</span><span class="ident" id="3760030">m</span>&nbsp;<span class="ident" id="3760032"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3760038">,</span>&nbsp;<span class="ident" id="3760040">query</span>&nbsp;<span class="builtintype" id="3760046">string</span><span class="op" id="3760052">)</span>&nbsp;<span class="op" id="3760054">(</span><span class="ident" id="3760055">err</span>&nbsp;<span class="builtintype" id="3760059">error</span><span class="op" id="3760064">)</span>&nbsp;<span class="op" id="3760066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760069">for</span>&nbsp;<span class="ident" id="3760073"><a href="/gostd/net/url/url.go.html#3760040">query</a></span>&nbsp;<span class="op" id="3760079">!=</span>&nbsp;<span class="string" id="3760082">&#34;&#34;</span>&nbsp;<span class="op" id="3760085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760089">key</span>&nbsp;<span class="op" id="3760093">:=</span>&nbsp;<span class="ident" id="3760096"><a href="/gostd/net/url/url.go.html#3760040">query</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760104">if</span>&nbsp;<span class="ident" id="3760107">i</span>&nbsp;<span class="op" id="3760109">:=</span>&nbsp;<span class="ident" id="3760112"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3760119">.</span><span class="ident" id="3760120"><a href="/gostd/strings/strings.go.html#2970774">IndexAny</a></span><span class="op" id="3760128">(</span><span class="ident" id="3760129"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760132">,</span>&nbsp;<span class="string" id="3760134">&#34;&amp;;&#34;</span><span class="op" id="3760138">)</span><span class="op" id="3760139">;</span>&nbsp;<span class="ident" id="3760141"><a href="/gostd/net/url/url.go.html#3760107">i</a></span>&nbsp;<span class="op" id="3760143">&gt;=</span>&nbsp;<span class="num" id="3760146">0</span>&nbsp;<span class="op" id="3760148">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760153"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760156">,</span>&nbsp;<span class="ident" id="3760158"><a href="/gostd/net/url/url.go.html#3760040">query</a></span>&nbsp;<span class="op" id="3760164">=</span>&nbsp;<span class="ident" id="3760166"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760169">[</span><span class="op" id="3760170">:</span><span class="ident" id="3760171"><a href="/gostd/net/url/url.go.html#3760107">i</a></span><span class="op" id="3760172">]</span><span class="op" id="3760173">,</span>&nbsp;<span class="ident" id="3760175"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760178">[</span><span class="ident" id="3760179"><a href="/gostd/net/url/url.go.html#3760107">i</a></span><span class="op" id="3760180">+</span><span class="num" id="3760181">1</span><span class="op" id="3760182">:</span><span class="op" id="3760183">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760187">}</span>&nbsp;<span class="keyword" id="3760189">else</span>&nbsp;<span class="op" id="3760194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760199"><a href="/gostd/net/url/url.go.html#3760040">query</a></span>&nbsp;<span class="op" id="3760205">=</span>&nbsp;<span class="string" id="3760207">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760216">if</span>&nbsp;<span class="ident" id="3760219"><a href="/gostd/net/url/url.go.html#3760089">key</a></span>&nbsp;<span class="op" id="3760223">==</span>&nbsp;<span class="string" id="3760226">&#34;&#34;</span>&nbsp;<span class="op" id="3760229">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760234">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760249">value</span>&nbsp;<span class="op" id="3760255">:=</span>&nbsp;<span class="string" id="3760258">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760263">if</span>&nbsp;<span class="ident" id="3760266">i</span>&nbsp;<span class="op" id="3760268">:=</span>&nbsp;<span class="ident" id="3760271"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3760278">.</span><span class="ident" id="3760279"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3760284">(</span><span class="ident" id="3760285"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760288">,</span>&nbsp;<span class="string" id="3760290">&#34;=&#34;</span><span class="op" id="3760293">)</span><span class="op" id="3760294">;</span>&nbsp;<span class="ident" id="3760296"><a href="/gostd/net/url/url.go.html#3760266">i</a></span>&nbsp;<span class="op" id="3760298">&gt;=</span>&nbsp;<span class="num" id="3760301">0</span>&nbsp;<span class="op" id="3760303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760308"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760311">,</span>&nbsp;<span class="ident" id="3760313"><a href="/gostd/net/url/url.go.html#3760249">value</a></span>&nbsp;<span class="op" id="3760319">=</span>&nbsp;<span class="ident" id="3760321"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760324">[</span><span class="op" id="3760325">:</span><span class="ident" id="3760326"><a href="/gostd/net/url/url.go.html#3760266">i</a></span><span class="op" id="3760327">]</span><span class="op" id="3760328">,</span>&nbsp;<span class="ident" id="3760330"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760333">[</span><span class="ident" id="3760334"><a href="/gostd/net/url/url.go.html#3760266">i</a></span><span class="op" id="3760335">+</span><span class="num" id="3760336">1</span><span class="op" id="3760337">:</span><span class="op" id="3760338">]</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760346"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760349">,</span>&nbsp;<span class="ident" id="3760351">err1</span>&nbsp;<span class="op" id="3760356">:=</span>&nbsp;<span class="ident" id="3760359"><a href="/gostd/net/url/url.go.html#3748527">QueryUnescape</a></span><span class="op" id="3760372">(</span><span class="ident" id="3760373"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760380">if</span>&nbsp;<span class="ident" id="3760383"><a href="/gostd/net/url/url.go.html#3760351">err1</a></span>&nbsp;<span class="op" id="3760388">!=</span>&nbsp;<span class="builtintype" id="3760391">nil</span>&nbsp;<span class="op" id="3760395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760400">if</span>&nbsp;<span class="ident" id="3760403"><a href="/gostd/net/url/url.go.html#3760055">err</a></span>&nbsp;<span class="op" id="3760407">==</span>&nbsp;<span class="builtintype" id="3760410">nil</span>&nbsp;<span class="op" id="3760414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760420"><a href="/gostd/net/url/url.go.html#3760055">err</a></span>&nbsp;<span class="op" id="3760424">=</span>&nbsp;<span class="ident" id="3760426"><a href="/gostd/net/url/url.go.html#3760351">err1</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760439">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760454"><a href="/gostd/net/url/url.go.html#3760249">value</a></span><span class="op" id="3760459">,</span>&nbsp;<span class="ident" id="3760461"><a href="/gostd/net/url/url.go.html#3760351">err1</a></span>&nbsp;<span class="op" id="3760466">=</span>&nbsp;<span class="ident" id="3760468"><a href="/gostd/net/url/url.go.html#3748527">QueryUnescape</a></span><span class="op" id="3760481">(</span><span class="ident" id="3760482"><a href="/gostd/net/url/url.go.html#3760249">value</a></span><span class="op" id="3760487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760491">if</span>&nbsp;<span class="ident" id="3760494"><a href="/gostd/net/url/url.go.html#3760351">err1</a></span>&nbsp;<span class="op" id="3760499">!=</span>&nbsp;<span class="builtintype" id="3760502">nil</span>&nbsp;<span class="op" id="3760506">{</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760511">if</span>&nbsp;<span class="ident" id="3760514"><a href="/gostd/net/url/url.go.html#3760055">err</a></span>&nbsp;<span class="op" id="3760518">==</span>&nbsp;<span class="builtintype" id="3760521">nil</span>&nbsp;<span class="op" id="3760525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760531"><a href="/gostd/net/url/url.go.html#3760055">err</a></span>&nbsp;<span class="op" id="3760535">=</span>&nbsp;<span class="ident" id="3760537"><a href="/gostd/net/url/url.go.html#3760351">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760550">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760561">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760565"><a href="/gostd/net/url/url.go.html#3760030">m</a></span><span class="op" id="3760566">[</span><span class="ident" id="3760567"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760570">]</span>&nbsp;<span class="op" id="3760572">=</span>&nbsp;<span class="builtinfunc" id="3760574">append</span><span class="op" id="3760580">(</span><span class="ident" id="3760581"><a href="/gostd/net/url/url.go.html#3760030">m</a></span><span class="op" id="3760582">[</span><span class="ident" id="3760583"><a href="/gostd/net/url/url.go.html#3760089">key</a></span><span class="op" id="3760586">]</span><span class="op" id="3760587">,</span>&nbsp;<span class="ident" id="3760589"><a href="/gostd/net/url/url.go.html#3760249">value</a></span><span class="op" id="3760594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760600">return</span>&nbsp;<span class="ident" id="3760607"><a href="/gostd/net/url/url.go.html#3760055">err</a></span><br>
<span class="lineno"></span><span class="op" id="3760611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span><span class="comment" id="3760614">//&nbsp;Encode&nbsp;encodes&nbsp;the&nbsp;values&nbsp;into&nbsp;``URL&nbsp;encoded&#39;&#39;&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3760669">//&nbsp;(&#34;bar=baz&amp;foo=quux&#34;)&nbsp;sorted&nbsp;by&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3760708">func</span>&nbsp;<span class="op" id="3760713">(</span><span class="ident" id="3760714">v</span>&nbsp;<span class="ident" id="3760716"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span><span class="op" id="3760722">)</span>&nbsp;<span class="ident" id="3760724">Encode</span><span class="op" id="3760730">(</span><span class="op" id="3760731">)</span>&nbsp;<span class="builtintype" id="3760733">string</span>&nbsp;<span class="op" id="3760740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760743">if</span>&nbsp;<span class="ident" id="3760746"><a href="/gostd/net/url/url.go.html#3760714">v</a></span>&nbsp;<span class="op" id="3760748">==</span>&nbsp;<span class="builtintype" id="3760751">nil</span>&nbsp;<span class="op" id="3760755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760759">return</span>&nbsp;<span class="string" id="3760766">&#34;&#34;</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760773">var</span>&nbsp;<span class="ident" id="3760777">buf</span>&nbsp;<span class="ident" id="3760781"><a href="/gostd/net/url/url.go.html#3745938">bytes</a></span><span class="op" id="3760786">.</span><span class="ident" id="3760787"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760795">keys</span>&nbsp;<span class="op" id="3760800">:=</span>&nbsp;<span class="builtinfunc" id="3760803">make</span><span class="op" id="3760807">(</span><span class="op" id="3760808">[</span><span class="op" id="3760809">]</span><span class="builtintype" id="3760810">string</span><span class="op" id="3760816">,</span>&nbsp;<span class="num" id="3760818">0</span><span class="op" id="3760819">,</span>&nbsp;<span class="builtinfunc" id="3760821">len</span><span class="op" id="3760824">(</span><span class="ident" id="3760825"><a href="/gostd/net/url/url.go.html#3760714">v</a></span><span class="op" id="3760826">)</span><span class="op" id="3760827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760830">for</span>&nbsp;<span class="ident" id="3760834">k</span>&nbsp;<span class="op" id="3760836">:=</span>&nbsp;<span class="keyword" id="3760839">range</span>&nbsp;<span class="ident" id="3760845"><a href="/gostd/net/url/url.go.html#3760714">v</a></span>&nbsp;<span class="op" id="3760847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760851"><a href="/gostd/net/url/url.go.html#3760795">keys</a></span>&nbsp;<span class="op" id="3760856">=</span>&nbsp;<span class="builtinfunc" id="3760858">append</span><span class="op" id="3760864">(</span><span class="ident" id="3760865"><a href="/gostd/net/url/url.go.html#3760795">keys</a></span><span class="op" id="3760869">,</span>&nbsp;<span class="ident" id="3760871"><a href="/gostd/net/url/url.go.html#3760834">k</a></span><span class="op" id="3760872">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3760875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760878"><a href="/gostd/net/url/url.go.html#3745957">sort</a></span><span class="op" id="3760882">.</span><span class="ident" id="3760883"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="3760890">(</span><span class="ident" id="3760891"><a href="/gostd/net/url/url.go.html#3760795">keys</a></span><span class="op" id="3760895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760898">for</span>&nbsp;<span class="ident" id="3760902">_</span><span class="op" id="3760903">,</span>&nbsp;<span class="ident" id="3760905">k</span>&nbsp;<span class="op" id="3760907">:=</span>&nbsp;<span class="keyword" id="3760910">range</span>&nbsp;<span class="ident" id="3760916"><a href="/gostd/net/url/url.go.html#3760795">keys</a></span>&nbsp;<span class="op" id="3760921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760925">vs</span>&nbsp;<span class="op" id="3760928">:=</span>&nbsp;<span class="ident" id="3760931"><a href="/gostd/net/url/url.go.html#3760714">v</a></span><span class="op" id="3760932">[</span><span class="ident" id="3760933"><a href="/gostd/net/url/url.go.html#3760905">k</a></span><span class="op" id="3760934">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3760938">prefix</span>&nbsp;<span class="op" id="3760945">:=</span>&nbsp;<span class="ident" id="3760948"><a href="/gostd/net/url/url.go.html#3749627">QueryEscape</a></span><span class="op" id="3760959">(</span><span class="ident" id="3760960"><a href="/gostd/net/url/url.go.html#3760905">k</a></span><span class="op" id="3760961">)</span>&nbsp;<span class="op" id="3760963">+</span>&nbsp;<span class="string" id="3760965">&#34;=&#34;</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760971">for</span>&nbsp;<span class="ident" id="3760975">_</span><span class="op" id="3760976">,</span>&nbsp;<span class="ident" id="3760978">v</span>&nbsp;<span class="op" id="3760980">:=</span>&nbsp;<span class="keyword" id="3760983">range</span>&nbsp;<span class="ident" id="3760989"><a href="/gostd/net/url/url.go.html#3760925">vs</a></span>&nbsp;<span class="op" id="3760992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3760997">if</span>&nbsp;<span class="ident" id="3761000"><a href="/gostd/net/url/url.go.html#3760777">buf</a></span><span class="op" id="3761003">.</span><span class="ident" id="3761004"><a href="/gostd/bytes/buffer.go.html#1384893">Len</a></span><span class="op" id="3761007">(</span><span class="op" id="3761008">)</span>&nbsp;<span class="op" id="3761010">&gt;</span>&nbsp;<span class="num" id="3761012">0</span>&nbsp;<span class="op" id="3761014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761020"><a href="/gostd/net/url/url.go.html#3760777">buf</a></span><span class="op" id="3761023">.</span><span class="ident" id="3761024"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="3761033">(</span><span class="string" id="3761034">&#39;&amp;&#39;</span><span class="op" id="3761037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761047"><a href="/gostd/net/url/url.go.html#3760777">buf</a></span><span class="op" id="3761050">.</span><span class="ident" id="3761051"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3761062">(</span><span class="ident" id="3761063"><a href="/gostd/net/url/url.go.html#3760938">prefix</a></span><span class="op" id="3761069">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761074"><a href="/gostd/net/url/url.go.html#3760777">buf</a></span><span class="op" id="3761077">.</span><span class="ident" id="3761078"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="3761089">(</span><span class="ident" id="3761090"><a href="/gostd/net/url/url.go.html#3749627">QueryEscape</a></span><span class="op" id="3761101">(</span><span class="ident" id="3761102"><a href="/gostd/net/url/url.go.html#3760978">v</a></span><span class="op" id="3761103">)</span><span class="op" id="3761104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761114">return</span>&nbsp;<span class="ident" id="3761121"><a href="/gostd/net/url/url.go.html#3760777">buf</a></span><span class="op" id="3761124">.</span><span class="ident" id="3761125"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="3761131">(</span><span class="op" id="3761132">)</span><br>
<span class="lineno"></span><span class="op" id="3761134">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="3761137">//&nbsp;resolvePath&nbsp;applies&nbsp;special&nbsp;path&nbsp;segments&nbsp;from&nbsp;refs&nbsp;and&nbsp;applies</span><br>
<span class="lineno"></span><span class="comment" id="3761204">//&nbsp;them&nbsp;to&nbsp;base,&nbsp;per&nbsp;RFC&nbsp;3986.</span><br>
<span class="lineno"></span><span class="keyword" id="3761235">func</span>&nbsp;<span class="ident" id="3761240">resolvePath</span><span class="op" id="3761251">(</span><span class="ident" id="3761252">base</span><span class="op" id="3761256">,</span>&nbsp;<span class="ident" id="3761258">ref</span>&nbsp;<span class="builtintype" id="3761262">string</span><span class="op" id="3761268">)</span>&nbsp;<span class="builtintype" id="3761270">string</span>&nbsp;<span class="op" id="3761277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761280">var</span>&nbsp;<span class="ident" id="3761284">full</span>&nbsp;<span class="builtintype" id="3761289">string</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761297">if</span>&nbsp;<span class="ident" id="3761300"><a href="/gostd/net/url/url.go.html#3761258">ref</a></span>&nbsp;<span class="op" id="3761304">==</span>&nbsp;<span class="string" id="3761307">&#34;&#34;</span>&nbsp;<span class="op" id="3761310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761314"><a href="/gostd/net/url/url.go.html#3761284">full</a></span>&nbsp;<span class="op" id="3761319">=</span>&nbsp;<span class="ident" id="3761321"><a href="/gostd/net/url/url.go.html#3761252">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761327">}</span>&nbsp;<span class="keyword" id="3761329">else</span>&nbsp;<span class="keyword" id="3761334">if</span>&nbsp;<span class="ident" id="3761337"><a href="/gostd/net/url/url.go.html#3761258">ref</a></span><span class="op" id="3761340">[</span><span class="num" id="3761341">0</span><span class="op" id="3761342">]</span>&nbsp;<span class="op" id="3761344">!=</span>&nbsp;<span class="string" id="3761347">&#39;/&#39;</span>&nbsp;<span class="op" id="3761351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761355">i</span>&nbsp;<span class="op" id="3761357">:=</span>&nbsp;<span class="ident" id="3761360"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3761367">.</span><span class="ident" id="3761368"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="3761377">(</span><span class="ident" id="3761378"><a href="/gostd/net/url/url.go.html#3761252">base</a></span><span class="op" id="3761382">,</span>&nbsp;<span class="string" id="3761384">&#34;/&#34;</span><span class="op" id="3761387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761391"><a href="/gostd/net/url/url.go.html#3761284">full</a></span>&nbsp;<span class="op" id="3761396">=</span>&nbsp;<span class="ident" id="3761398"><a href="/gostd/net/url/url.go.html#3761252">base</a></span><span class="op" id="3761402">[</span><span class="op" id="3761403">:</span><span class="ident" id="3761404"><a href="/gostd/net/url/url.go.html#3761355">i</a></span><span class="op" id="3761405">+</span><span class="num" id="3761406">1</span><span class="op" id="3761407">]</span>&nbsp;<span class="op" id="3761409">+</span>&nbsp;<span class="ident" id="3761411"><a href="/gostd/net/url/url.go.html#3761258">ref</a></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761416">}</span>&nbsp;<span class="keyword" id="3761418">else</span>&nbsp;<span class="op" id="3761423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761427"><a href="/gostd/net/url/url.go.html#3761284">full</a></span>&nbsp;<span class="op" id="3761432">=</span>&nbsp;<span class="ident" id="3761434"><a href="/gostd/net/url/url.go.html#3761258">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761442">if</span>&nbsp;<span class="ident" id="3761445"><a href="/gostd/net/url/url.go.html#3761284">full</a></span>&nbsp;<span class="op" id="3761450">==</span>&nbsp;<span class="string" id="3761453">&#34;&#34;</span>&nbsp;<span class="op" id="3761456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761460">return</span>&nbsp;<span class="string" id="3761467">&#34;&#34;</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761474">var</span>&nbsp;<span class="ident" id="3761478">dst</span>&nbsp;<span class="op" id="3761482">[</span><span class="op" id="3761483">]</span><span class="builtintype" id="3761484">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761492">src</span>&nbsp;<span class="op" id="3761496">:=</span>&nbsp;<span class="ident" id="3761499"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3761506">.</span><span class="ident" id="3761507"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="3761512">(</span><span class="ident" id="3761513"><a href="/gostd/net/url/url.go.html#3761284">full</a></span><span class="op" id="3761517">,</span>&nbsp;<span class="string" id="3761519">&#34;/&#34;</span><span class="op" id="3761522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761525">for</span>&nbsp;<span class="ident" id="3761529">_</span><span class="op" id="3761530">,</span>&nbsp;<span class="ident" id="3761532">elem</span>&nbsp;<span class="op" id="3761537">:=</span>&nbsp;<span class="keyword" id="3761540">range</span>&nbsp;<span class="ident" id="3761546"><a href="/gostd/net/url/url.go.html#3761492">src</a></span>&nbsp;<span class="op" id="3761550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761554">switch</span>&nbsp;<span class="ident" id="3761561"><a href="/gostd/net/url/url.go.html#3761532">elem</a></span>&nbsp;<span class="op" id="3761566">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761570">case</span>&nbsp;<span class="string" id="3761575">&#34;.&#34;</span><span class="op" id="3761578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3761583">//&nbsp;drop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761593">case</span>&nbsp;<span class="string" id="3761598">&#34;..&#34;</span><span class="op" id="3761602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761607">if</span>&nbsp;<span class="builtinfunc" id="3761610">len</span><span class="op" id="3761613">(</span><span class="ident" id="3761614"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761617">)</span>&nbsp;<span class="op" id="3761619">&gt;</span>&nbsp;<span class="num" id="3761621">0</span>&nbsp;<span class="op" id="3761623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761629"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span>&nbsp;<span class="op" id="3761633">=</span>&nbsp;<span class="ident" id="3761635"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761638">[</span><span class="op" id="3761639">:</span><span class="builtinfunc" id="3761640">len</span><span class="op" id="3761643">(</span><span class="ident" id="3761644"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761647">)</span><span class="op" id="3761648">-</span><span class="num" id="3761649">1</span><span class="op" id="3761650">]</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761659">default</span><span class="op" id="3761666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761671"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span>&nbsp;<span class="op" id="3761675">=</span>&nbsp;<span class="builtinfunc" id="3761677">append</span><span class="op" id="3761683">(</span><span class="ident" id="3761684"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761687">,</span>&nbsp;<span class="ident" id="3761689"><a href="/gostd/net/url/url.go.html#3761532">elem</a></span><span class="op" id="3761693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761700">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761703">if</span>&nbsp;<span class="ident" id="3761706">last</span>&nbsp;<span class="op" id="3761711">:=</span>&nbsp;<span class="ident" id="3761714"><a href="/gostd/net/url/url.go.html#3761492">src</a></span><span class="op" id="3761717">[</span><span class="builtinfunc" id="3761718">len</span><span class="op" id="3761721">(</span><span class="ident" id="3761722"><a href="/gostd/net/url/url.go.html#3761492">src</a></span><span class="op" id="3761725">)</span><span class="op" id="3761726">-</span><span class="num" id="3761727">1</span><span class="op" id="3761728">]</span><span class="op" id="3761729">;</span>&nbsp;<span class="ident" id="3761731"><a href="/gostd/net/url/url.go.html#3761706">last</a></span>&nbsp;<span class="op" id="3761736">==</span>&nbsp;<span class="string" id="3761739">&#34;.&#34;</span>&nbsp;<span class="op" id="3761743">||</span>&nbsp;<span class="ident" id="3761746"><a href="/gostd/net/url/url.go.html#3761706">last</a></span>&nbsp;<span class="op" id="3761751">==</span>&nbsp;<span class="string" id="3761754">&#34;..&#34;</span>&nbsp;<span class="op" id="3761759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3761763">//&nbsp;Add&nbsp;final&nbsp;slash&nbsp;to&nbsp;the&nbsp;joined&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3761804"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span>&nbsp;<span class="op" id="3761808">=</span>&nbsp;<span class="builtinfunc" id="3761810">append</span><span class="op" id="3761816">(</span><span class="ident" id="3761817"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761820">,</span>&nbsp;<span class="string" id="3761822">&#34;&#34;</span><span class="op" id="3761824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3761827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761830">return</span>&nbsp;<span class="string" id="3761837">&#34;/&#34;</span>&nbsp;<span class="op" id="3761841">+</span>&nbsp;<span class="ident" id="3761843"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3761850">.</span><span class="ident" id="3761851"><a href="/gostd/strings/strings.go.html#2981998">TrimLeft</a></span><span class="op" id="3761859">(</span><span class="ident" id="3761860"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3761867">.</span><span class="ident" id="3761868"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="3761872">(</span><span class="ident" id="3761873"><a href="/gostd/net/url/url.go.html#3761478">dst</a></span><span class="op" id="3761876">,</span>&nbsp;<span class="string" id="3761878">&#34;/&#34;</span><span class="op" id="3761881">)</span><span class="op" id="3761882">,</span>&nbsp;<span class="string" id="3761884">&#34;/&#34;</span><span class="op" id="3761887">)</span><br>
<span class="lineno">640</span><span class="op" id="3761889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3761892">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;URL&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3761938">func</span>&nbsp;<span class="op" id="3761943">(</span><span class="ident" id="3761944">u</span>&nbsp;<span class="op" id="3761946">*</span><span class="ident" id="3761947"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3761950">)</span>&nbsp;<span class="ident" id="3761952">IsAbs</span><span class="op" id="3761957">(</span><span class="op" id="3761958">)</span>&nbsp;<span class="builtintype" id="3761960">bool</span>&nbsp;<span class="op" id="3761965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3761968">return</span>&nbsp;<span class="ident" id="3761975"><a href="/gostd/net/url/url.go.html#3761944">u</a></span><span class="op" id="3761976">.</span><span class="ident" id="3761977"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3761984">!=</span>&nbsp;<span class="string" id="3761987">&#34;&#34;</span><br>
<span class="lineno">645</span><span class="op" id="3761990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3761993">//&nbsp;Parse&nbsp;parses&nbsp;a&nbsp;URL&nbsp;in&nbsp;the&nbsp;context&nbsp;of&nbsp;the&nbsp;receiver.&nbsp;&nbsp;The&nbsp;provided&nbsp;URL</span><br>
<span class="lineno"></span><span class="comment" id="3762065">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;Parse&nbsp;returns&nbsp;nil,&nbsp;err&nbsp;on&nbsp;parse</span><br>
<span class="lineno"></span><span class="comment" id="3762130">//&nbsp;failure,&nbsp;otherwise&nbsp;its&nbsp;return&nbsp;value&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;ResolveReference.</span><br>
<span class="lineno">650</span><span class="keyword" id="3762202">func</span>&nbsp;<span class="op" id="3762207">(</span><span class="ident" id="3762208">u</span>&nbsp;<span class="op" id="3762210">*</span><span class="ident" id="3762211"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3762214">)</span>&nbsp;<span class="ident" id="3762216">Parse</span><span class="op" id="3762221">(</span><span class="ident" id="3762222">ref</span>&nbsp;<span class="builtintype" id="3762226">string</span><span class="op" id="3762232">)</span>&nbsp;<span class="op" id="3762234">(</span><span class="op" id="3762235">*</span><span class="ident" id="3762236"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3762239">,</span>&nbsp;<span class="builtintype" id="3762241">error</span><span class="op" id="3762246">)</span>&nbsp;<span class="op" id="3762248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3762251">refurl</span><span class="op" id="3762257">,</span>&nbsp;<span class="ident" id="3762259">err</span>&nbsp;<span class="op" id="3762263">:=</span>&nbsp;<span class="ident" id="3762266"><a href="/gostd/net/url/url.go.html#3754169">Parse</a></span><span class="op" id="3762271">(</span><span class="ident" id="3762272"><a href="/gostd/net/url/url.go.html#3762222">ref</a></span><span class="op" id="3762275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3762278">if</span>&nbsp;<span class="ident" id="3762281"><a href="/gostd/net/url/url.go.html#3762259">err</a></span>&nbsp;<span class="op" id="3762285">!=</span>&nbsp;<span class="builtintype" id="3762288">nil</span>&nbsp;<span class="op" id="3762292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3762296">return</span>&nbsp;<span class="builtintype" id="3762303">nil</span><span class="op" id="3762306">,</span>&nbsp;<span class="ident" id="3762308"><a href="/gostd/net/url/url.go.html#3762259">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3762313">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3762316">return</span>&nbsp;<span class="ident" id="3762323"><a href="/gostd/net/url/url.go.html#3762208">u</a></span><span class="op" id="3762324">.</span><span class="ident" id="3762325"><a href="/gostd/net/url/url.go.html#3762765">ResolveReference</a></span><span class="op" id="3762341">(</span><span class="ident" id="3762342"><a href="/gostd/net/url/url.go.html#3762251">refurl</a></span><span class="op" id="3762348">)</span><span class="op" id="3762349">,</span>&nbsp;<span class="builtintype" id="3762351">nil</span><br>
<span class="lineno"></span><span class="op" id="3762355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3762358">//&nbsp;ResolveReference&nbsp;resolves&nbsp;a&nbsp;URI&nbsp;reference&nbsp;to&nbsp;an&nbsp;absolute&nbsp;URI&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3762427">//&nbsp;an&nbsp;absolute&nbsp;base&nbsp;URI,&nbsp;per&nbsp;RFC&nbsp;3986&nbsp;Section&nbsp;5.2.&nbsp;&nbsp;The&nbsp;URI&nbsp;reference</span><br>
<span class="lineno">660</span><span class="comment" id="3762497">//&nbsp;may&nbsp;be&nbsp;relative&nbsp;or&nbsp;absolute.&nbsp;&nbsp;ResolveReference&nbsp;always&nbsp;returns&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="3762568">//&nbsp;URL&nbsp;instance,&nbsp;even&nbsp;if&nbsp;the&nbsp;returned&nbsp;URL&nbsp;is&nbsp;identical&nbsp;to&nbsp;either&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3762637">//&nbsp;base&nbsp;or&nbsp;reference.&nbsp;If&nbsp;ref&nbsp;is&nbsp;an&nbsp;absolute&nbsp;URL,&nbsp;then&nbsp;ResolveReference</span><br>
<span class="lineno"></span><span class="comment" id="3762708">//&nbsp;ignores&nbsp;base&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;ref.</span><br>
<span class="lineno"></span><span class="keyword" id="3762751">func</span>&nbsp;<span class="op" id="3762756">(</span><span class="ident" id="3762757">u</span>&nbsp;<span class="op" id="3762759">*</span><span class="ident" id="3762760"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3762763">)</span>&nbsp;<span class="ident" id="3762765">ResolveReference</span><span class="op" id="3762781">(</span><span class="ident" id="3762782">ref</span>&nbsp;<span class="op" id="3762786">*</span><span class="ident" id="3762787"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3762790">)</span>&nbsp;<span class="op" id="3762792">*</span><span class="ident" id="3762793"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span>&nbsp;<span class="op" id="3762797">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3762800">url</span>&nbsp;<span class="op" id="3762804">:=</span>&nbsp;<span class="op" id="3762807">*</span><span class="ident" id="3762808"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3762813">if</span>&nbsp;<span class="ident" id="3762816"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3762819">.</span><span class="ident" id="3762820"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3762827">==</span>&nbsp;<span class="string" id="3762830">&#34;&#34;</span>&nbsp;<span class="op" id="3762833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3762837"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3762840">.</span><span class="ident" id="3762841"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3762848">=</span>&nbsp;<span class="ident" id="3762850"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3762851">.</span><span class="ident" id="3762852"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3762860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3762863">if</span>&nbsp;<span class="ident" id="3762866"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3762869">.</span><span class="ident" id="3762870"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3762877">!=</span>&nbsp;<span class="string" id="3762880">&#34;&#34;</span>&nbsp;<span class="op" id="3762883">||</span>&nbsp;<span class="ident" id="3762886"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3762889">.</span><span class="ident" id="3762890"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span>&nbsp;<span class="op" id="3762895">!=</span>&nbsp;<span class="string" id="3762898">&#34;&#34;</span>&nbsp;<span class="op" id="3762901">||</span>&nbsp;<span class="ident" id="3762904"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3762907">.</span><span class="ident" id="3762908"><a href="/gostd/net/url/url.go.html#3751268">User</a></span>&nbsp;<span class="op" id="3762913">!=</span>&nbsp;<span class="builtintype" id="3762916">nil</span>&nbsp;<span class="op" id="3762920">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3762924">//&nbsp;The&nbsp;&#34;absoluteURI&#34;&nbsp;or&nbsp;&#34;net_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3762968"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3762971">.</span><span class="ident" id="3762972"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3762977">=</span>&nbsp;<span class="ident" id="3762979"><a href="/gostd/net/url/url.go.html#3761240">resolvePath</a></span><span class="op" id="3762990">(</span><span class="ident" id="3762991"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3762994">.</span><span class="ident" id="3762995"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3762999">,</span>&nbsp;<span class="string" id="3763001">&#34;&#34;</span><span class="op" id="3763003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763007">return</span>&nbsp;<span class="op" id="3763014">&amp;</span><span class="ident" id="3763015"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763023">if</span>&nbsp;<span class="ident" id="3763026"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3763029">.</span><span class="ident" id="3763030"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span>&nbsp;<span class="op" id="3763037">!=</span>&nbsp;<span class="string" id="3763040">&#34;&#34;</span>&nbsp;<span class="op" id="3763043">{</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763047"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763050">.</span><span class="ident" id="3763051"><a href="/gostd/net/url/url.go.html#3751268">User</a></span>&nbsp;<span class="op" id="3763056">=</span>&nbsp;<span class="builtintype" id="3763058">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763064"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763067">.</span><span class="ident" id="3763068"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span>&nbsp;<span class="op" id="3763073">=</span>&nbsp;<span class="string" id="3763075">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763080"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763083">.</span><span class="ident" id="3763084"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3763089">=</span>&nbsp;<span class="string" id="3763091">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763096">return</span>&nbsp;<span class="op" id="3763103">&amp;</span><span class="ident" id="3763104"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763109">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763112">if</span>&nbsp;<span class="ident" id="3763115"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3763118">.</span><span class="ident" id="3763119"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3763124">==</span>&nbsp;<span class="string" id="3763127">&#34;&#34;</span>&nbsp;<span class="op" id="3763130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763134">if</span>&nbsp;<span class="ident" id="3763137"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3763140">.</span><span class="ident" id="3763141"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span>&nbsp;<span class="op" id="3763150">==</span>&nbsp;<span class="string" id="3763153">&#34;&#34;</span>&nbsp;<span class="op" id="3763156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763161"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763164">.</span><span class="ident" id="3763165"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span>&nbsp;<span class="op" id="3763174">=</span>&nbsp;<span class="ident" id="3763176"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3763177">.</span><span class="ident" id="3763178"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763190">if</span>&nbsp;<span class="ident" id="3763193"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3763196">.</span><span class="ident" id="3763197"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span>&nbsp;<span class="op" id="3763206">==</span>&nbsp;<span class="string" id="3763209">&#34;&#34;</span>&nbsp;<span class="op" id="3763212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763218"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763221">.</span><span class="ident" id="3763222"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span>&nbsp;<span class="op" id="3763231">=</span>&nbsp;<span class="ident" id="3763233"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3763234">.</span><span class="ident" id="3763235"><a href="/gostd/net/url/url.go.html#3751437">Fragment</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3763257">//&nbsp;The&nbsp;&#34;abs_path&#34;&nbsp;or&nbsp;&#34;rel_path&#34;&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763297"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763300">.</span><span class="ident" id="3763301"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span>&nbsp;<span class="op" id="3763306">=</span>&nbsp;<span class="ident" id="3763308"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3763309">.</span><span class="ident" id="3763310"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763316"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763319">.</span><span class="ident" id="3763320"><a href="/gostd/net/url/url.go.html#3751268">User</a></span>&nbsp;<span class="op" id="3763325">=</span>&nbsp;<span class="ident" id="3763327"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3763328">.</span><span class="ident" id="3763329"><a href="/gostd/net/url/url.go.html#3751268">User</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763335"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><span class="op" id="3763338">.</span><span class="ident" id="3763339"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span>&nbsp;<span class="op" id="3763344">=</span>&nbsp;<span class="ident" id="3763346"><a href="/gostd/net/url/url.go.html#3761240">resolvePath</a></span><span class="op" id="3763357">(</span><span class="ident" id="3763358"><a href="/gostd/net/url/url.go.html#3762757">u</a></span><span class="op" id="3763359">.</span><span class="ident" id="3763360"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3763364">,</span>&nbsp;<span class="ident" id="3763366"><a href="/gostd/net/url/url.go.html#3762782">ref</a></span><span class="op" id="3763369">.</span><span class="ident" id="3763370"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3763374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763377">return</span>&nbsp;<span class="op" id="3763384">&amp;</span><span class="ident" id="3763385"><a href="/gostd/net/url/url.go.html#3762800">url</a></span><br>
<span class="lineno"></span><span class="op" id="3763389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="3763392">//&nbsp;Query&nbsp;parses&nbsp;RawQuery&nbsp;and&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="3763455">func</span>&nbsp;<span class="op" id="3763460">(</span><span class="ident" id="3763461">u</span>&nbsp;<span class="op" id="3763463">*</span><span class="ident" id="3763464"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3763467">)</span>&nbsp;<span class="ident" id="3763469">Query</span><span class="op" id="3763474">(</span><span class="op" id="3763475">)</span>&nbsp;<span class="ident" id="3763477"><a href="/gostd/net/url/url.go.html#3758861">Values</a></span>&nbsp;<span class="op" id="3763484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763487">v</span><span class="op" id="3763488">,</span>&nbsp;<span class="ident" id="3763490">_</span>&nbsp;<span class="op" id="3763492">:=</span>&nbsp;<span class="ident" id="3763495"><a href="/gostd/net/url/url.go.html#3759908">ParseQuery</a></span><span class="op" id="3763505">(</span><span class="ident" id="3763506"><a href="/gostd/net/url/url.go.html#3763461">u</a></span><span class="op" id="3763507">.</span><span class="ident" id="3763508"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span><span class="op" id="3763516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763519">return</span>&nbsp;<span class="ident" id="3763526"><a href="/gostd/net/url/url.go.html#3763487">v</a></span><br>
<span class="lineno"></span><span class="op" id="3763528">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="3763531">//&nbsp;RequestURI&nbsp;returns&nbsp;the&nbsp;encoded&nbsp;path?query&nbsp;or&nbsp;opaque?query</span><br>
<span class="lineno"></span><span class="comment" id="3763592">//&nbsp;string&nbsp;that&nbsp;would&nbsp;be&nbsp;used&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;request&nbsp;for&nbsp;u.</span><br>
<span class="lineno"></span><span class="keyword" id="3763647">func</span>&nbsp;<span class="op" id="3763652">(</span><span class="ident" id="3763653">u</span>&nbsp;<span class="op" id="3763655">*</span><span class="ident" id="3763656"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="3763659">)</span>&nbsp;<span class="ident" id="3763661">RequestURI</span><span class="op" id="3763671">(</span><span class="op" id="3763672">)</span>&nbsp;<span class="builtintype" id="3763674">string</span>&nbsp;<span class="op" id="3763681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763684">result</span>&nbsp;<span class="op" id="3763691">:=</span>&nbsp;<span class="ident" id="3763694"><a href="/gostd/net/url/url.go.html#3763653">u</a></span><span class="op" id="3763695">.</span><span class="ident" id="3763696"><a href="/gostd/net/url/url.go.html#3751225">Opaque</a></span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763704">if</span>&nbsp;<span class="ident" id="3763707"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763714">==</span>&nbsp;<span class="string" id="3763717">&#34;&#34;</span>&nbsp;<span class="op" id="3763720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763724"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763731">=</span>&nbsp;<span class="ident" id="3763733"><a href="/gostd/net/url/url.go.html#3749706">escape</a></span><span class="op" id="3763739">(</span><span class="ident" id="3763740"><a href="/gostd/net/url/url.go.html#3763653">u</a></span><span class="op" id="3763741">.</span><span class="ident" id="3763742"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="3763746">,</span>&nbsp;<span class="ident" id="3763748"><a href="/gostd/net/url/url.go.html#3746607">encodePath</a></span><span class="op" id="3763758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763762">if</span>&nbsp;<span class="ident" id="3763765"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763772">==</span>&nbsp;<span class="string" id="3763775">&#34;&#34;</span>&nbsp;<span class="op" id="3763778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763783"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763790">=</span>&nbsp;<span class="string" id="3763792">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763798">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763801">}</span>&nbsp;<span class="keyword" id="3763803">else</span>&nbsp;<span class="op" id="3763808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763812">if</span>&nbsp;<span class="ident" id="3763815"><a href="/gostd/net/url/url.go.html#3745976">strings</a></span><span class="op" id="3763822">.</span><span class="ident" id="3763823"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="3763832">(</span><span class="ident" id="3763833"><a href="/gostd/net/url/url.go.html#3763684">result</a></span><span class="op" id="3763839">,</span>&nbsp;<span class="string" id="3763841">&#34;//&#34;</span><span class="op" id="3763845">)</span>&nbsp;<span class="op" id="3763847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763852"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763859">=</span>&nbsp;<span class="ident" id="3763861"><a href="/gostd/net/url/url.go.html#3763653">u</a></span><span class="op" id="3763862">.</span><span class="ident" id="3763863"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="3763870">+</span>&nbsp;<span class="string" id="3763872">&#34;:&#34;</span>&nbsp;<span class="op" id="3763876">+</span>&nbsp;<span class="ident" id="3763878"><a href="/gostd/net/url/url.go.html#3763684">result</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763890">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763893">if</span>&nbsp;<span class="ident" id="3763896"><a href="/gostd/net/url/url.go.html#3763653">u</a></span><span class="op" id="3763897">.</span><span class="ident" id="3763898"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span>&nbsp;<span class="op" id="3763907">!=</span>&nbsp;<span class="string" id="3763910">&#34;&#34;</span>&nbsp;<span class="op" id="3763913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3763917"><a href="/gostd/net/url/url.go.html#3763684">result</a></span>&nbsp;<span class="op" id="3763924">+=</span>&nbsp;<span class="string" id="3763927">&#34;?&#34;</span>&nbsp;<span class="op" id="3763931">+</span>&nbsp;<span class="ident" id="3763933"><a href="/gostd/net/url/url.go.html#3763653">u</a></span><span class="op" id="3763934">.</span><span class="ident" id="3763935"><a href="/gostd/net/url/url.go.html#3751383">RawQuery</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3763945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3763948">return</span>&nbsp;<span class="ident" id="3763955"><a href="/gostd/net/url/url.go.html#3763684">result</a></span><br>
<span class="lineno"></span><span class="op" id="3763962">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
