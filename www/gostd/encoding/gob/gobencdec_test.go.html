<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6728305">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6728360">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6728414">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6728465">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728532">package</span>&nbsp;<span class="ident" id="6728540">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728545">import</span>&nbsp;<span class="op" id="6728552">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728555">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728564">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728574">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728581">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728587">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728594">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728605">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6728616">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6728623">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6728626">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728686">type</span>&nbsp;<span class="ident" id="6728691">ByteStruct</span>&nbsp;<span class="keyword" id="6728702">struct</span>&nbsp;<span class="op" id="6728709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728712">a</span>&nbsp;<span class="builtintype" id="6728714">byte</span>&nbsp;<span class="comment" id="6728719">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6728744">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6728747">type</span>&nbsp;<span class="ident" id="6728752">StringStruct</span>&nbsp;<span class="keyword" id="6728765">struct</span>&nbsp;<span class="op" id="6728772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728775">s</span>&nbsp;<span class="builtintype" id="6728777">string</span>&nbsp;<span class="comment" id="6728784">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6728809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6728812">type</span>&nbsp;<span class="ident" id="6728817">ArrayStruct</span>&nbsp;<span class="keyword" id="6728829">struct</span>&nbsp;<span class="op" id="6728836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6728839">a</span>&nbsp;<span class="op" id="6728841">[</span><span class="num" id="6728842">8192</span><span class="op" id="6728846">]</span><span class="builtintype" id="6728847">byte</span>&nbsp;<span class="comment" id="6728852">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6728877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728880">type</span>&nbsp;<span class="ident" id="6728885">Gobber</span>&nbsp;<span class="builtintype" id="6728892">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6728897">type</span>&nbsp;<span class="ident" id="6728902">ValueGobber</span>&nbsp;<span class="builtintype" id="6728914">string</span>&nbsp;<span class="comment" id="6728921">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6728971">type</span>&nbsp;<span class="ident" id="6728976">BinaryGobber</span>&nbsp;<span class="builtintype" id="6728989">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6728994">type</span>&nbsp;<span class="ident" id="6728999">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="6729017">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729025">type</span>&nbsp;<span class="ident" id="6729030">TextGobber</span>&nbsp;<span class="builtintype" id="6729041">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729046">type</span>&nbsp;<span class="ident" id="6729051">TextValueGobber</span>&nbsp;<span class="builtintype" id="6729067">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="6729075">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729100">func</span>&nbsp;<span class="op" id="6729105">(</span><span class="ident" id="6729106">g</span>&nbsp;<span class="op" id="6729108">*</span><span class="ident" id="6729109">ByteStruct</span><span class="op" id="6729119">)</span>&nbsp;<span class="ident" id="6729121">GobEncode</span><span class="op" id="6729130">(</span><span class="op" id="6729131">)</span>&nbsp;<span class="op" id="6729133">(</span><span class="op" id="6729134">[</span><span class="op" id="6729135">]</span><span class="builtintype" id="6729136">byte</span><span class="op" id="6729140">,</span>&nbsp;<span class="builtintype" id="6729142">error</span><span class="op" id="6729147">)</span>&nbsp;<span class="op" id="6729149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729152">b</span>&nbsp;<span class="op" id="6729154">:=</span>&nbsp;<span class="builtinfunc" id="6729157">make</span><span class="op" id="6729161">(</span><span class="op" id="6729162">[</span><span class="op" id="6729163">]</span><span class="builtintype" id="6729164">byte</span><span class="op" id="6729168">,</span>&nbsp;<span class="num" id="6729170">3</span><span class="op" id="6729171">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729174">b</span><span class="op" id="6729175">[</span><span class="num" id="6729176">0</span><span class="op" id="6729177">]</span>&nbsp;<span class="op" id="6729179">=</span>&nbsp;<span class="ident" id="6729181">g</span><span class="op" id="6729182">.</span><span class="ident" id="6729183">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729186">b</span><span class="op" id="6729187">[</span><span class="num" id="6729188">1</span><span class="op" id="6729189">]</span>&nbsp;<span class="op" id="6729191">=</span>&nbsp;<span class="ident" id="6729193">g</span><span class="op" id="6729194">.</span><span class="ident" id="6729195">a</span>&nbsp;<span class="op" id="6729197">+</span>&nbsp;<span class="num" id="6729199">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729202">b</span><span class="op" id="6729203">[</span><span class="num" id="6729204">2</span><span class="op" id="6729205">]</span>&nbsp;<span class="op" id="6729207">=</span>&nbsp;<span class="ident" id="6729209">g</span><span class="op" id="6729210">.</span><span class="ident" id="6729211">a</span>&nbsp;<span class="op" id="6729213">+</span>&nbsp;<span class="num" id="6729215">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729218">return</span>&nbsp;<span class="ident" id="6729225">b</span><span class="op" id="6729226">,</span>&nbsp;<span class="ident" id="6729228">nil</span><br>
<span class="lineno"></span><span class="op" id="6729232">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6729235">func</span>&nbsp;<span class="op" id="6729240">(</span><span class="ident" id="6729241">g</span>&nbsp;<span class="op" id="6729243">*</span><span class="ident" id="6729244">ByteStruct</span><span class="op" id="6729254">)</span>&nbsp;<span class="ident" id="6729256">GobDecode</span><span class="op" id="6729265">(</span><span class="ident" id="6729266">data</span>&nbsp;<span class="op" id="6729271">[</span><span class="op" id="6729272">]</span><span class="builtintype" id="6729273">byte</span><span class="op" id="6729277">)</span>&nbsp;<span class="builtintype" id="6729279">error</span>&nbsp;<span class="op" id="6729285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729288">if</span>&nbsp;<span class="ident" id="6729291">g</span>&nbsp;<span class="op" id="6729293">==</span>&nbsp;<span class="ident" id="6729296">nil</span>&nbsp;<span class="op" id="6729300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729304">return</span>&nbsp;<span class="ident" id="6729311">errors</span><span class="op" id="6729317">.</span><span class="ident" id="6729318">New</span><span class="op" id="6729321">(</span><span class="string" id="6729322">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="6729336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729339">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729342">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729380">if</span>&nbsp;<span class="builtinfunc" id="6729383">len</span><span class="op" id="6729386">(</span><span class="ident" id="6729387">data</span><span class="op" id="6729391">)</span>&nbsp;<span class="op" id="6729393">==</span>&nbsp;<span class="num" id="6729396">0</span>&nbsp;<span class="op" id="6729398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729402">return</span>&nbsp;<span class="ident" id="6729409">io</span><span class="op" id="6729411">.</span><span class="ident" id="6729412">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729420">g</span><span class="op" id="6729421">.</span><span class="ident" id="6729422">a</span>&nbsp;<span class="op" id="6729424">=</span>&nbsp;<span class="ident" id="6729426">data</span><span class="op" id="6729430">[</span><span class="num" id="6729431">0</span><span class="op" id="6729432">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729435">for</span>&nbsp;<span class="ident" id="6729439">i</span><span class="op" id="6729440">,</span>&nbsp;<span class="ident" id="6729442">c</span>&nbsp;<span class="op" id="6729444">:=</span>&nbsp;<span class="keyword" id="6729447">range</span>&nbsp;<span class="ident" id="6729453">data</span>&nbsp;<span class="op" id="6729458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729462">if</span>&nbsp;<span class="ident" id="6729465">c</span>&nbsp;<span class="op" id="6729467">!=</span>&nbsp;<span class="ident" id="6729470">g</span><span class="op" id="6729471">.</span><span class="ident" id="6729472">a</span><span class="op" id="6729473">+</span><span class="builtintype" id="6729474">byte</span><span class="op" id="6729478">(</span><span class="ident" id="6729479">i</span><span class="op" id="6729480">)</span>&nbsp;<span class="op" id="6729482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729487">return</span>&nbsp;<span class="ident" id="6729494">errors</span><span class="op" id="6729500">.</span><span class="ident" id="6729501">New</span><span class="op" id="6729504">(</span><span class="string" id="6729505">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="6729528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729535">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729538">return</span>&nbsp;<span class="ident" id="6729545">nil</span><br>
<span class="lineno"></span><span class="op" id="6729549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729552">func</span>&nbsp;<span class="op" id="6729557">(</span><span class="ident" id="6729558">g</span>&nbsp;<span class="op" id="6729560">*</span><span class="ident" id="6729561">StringStruct</span><span class="op" id="6729573">)</span>&nbsp;<span class="ident" id="6729575">GobEncode</span><span class="op" id="6729584">(</span><span class="op" id="6729585">)</span>&nbsp;<span class="op" id="6729587">(</span><span class="op" id="6729588">[</span><span class="op" id="6729589">]</span><span class="builtintype" id="6729590">byte</span><span class="op" id="6729594">,</span>&nbsp;<span class="builtintype" id="6729596">error</span><span class="op" id="6729601">)</span>&nbsp;<span class="op" id="6729603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729606">return</span>&nbsp;<span class="op" id="6729613">[</span><span class="op" id="6729614">]</span><span class="builtintype" id="6729615">byte</span><span class="op" id="6729619">(</span><span class="ident" id="6729620">g</span><span class="op" id="6729621">.</span><span class="ident" id="6729622">s</span><span class="op" id="6729623">)</span><span class="op" id="6729624">,</span>&nbsp;<span class="ident" id="6729626">nil</span><br>
<span class="lineno">75</span><span class="op" id="6729630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729633">func</span>&nbsp;<span class="op" id="6729638">(</span><span class="ident" id="6729639">g</span>&nbsp;<span class="op" id="6729641">*</span><span class="ident" id="6729642">StringStruct</span><span class="op" id="6729654">)</span>&nbsp;<span class="ident" id="6729656">GobDecode</span><span class="op" id="6729665">(</span><span class="ident" id="6729666">data</span>&nbsp;<span class="op" id="6729671">[</span><span class="op" id="6729672">]</span><span class="builtintype" id="6729673">byte</span><span class="op" id="6729677">)</span>&nbsp;<span class="builtintype" id="6729679">error</span>&nbsp;<span class="op" id="6729685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6729688">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729726">if</span>&nbsp;<span class="builtinfunc" id="6729729">len</span><span class="op" id="6729732">(</span><span class="ident" id="6729733">data</span><span class="op" id="6729737">)</span>&nbsp;<span class="op" id="6729739">==</span>&nbsp;<span class="num" id="6729742">0</span>&nbsp;<span class="op" id="6729744">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729748">return</span>&nbsp;<span class="ident" id="6729755">io</span><span class="op" id="6729757">.</span><span class="ident" id="6729758">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729766">a</span>&nbsp;<span class="op" id="6729768">:=</span>&nbsp;<span class="ident" id="6729771">data</span><span class="op" id="6729775">[</span><span class="num" id="6729776">0</span><span class="op" id="6729777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729780">for</span>&nbsp;<span class="ident" id="6729784">i</span><span class="op" id="6729785">,</span>&nbsp;<span class="ident" id="6729787">c</span>&nbsp;<span class="op" id="6729789">:=</span>&nbsp;<span class="keyword" id="6729792">range</span>&nbsp;<span class="ident" id="6729798">data</span>&nbsp;<span class="op" id="6729803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729807">if</span>&nbsp;<span class="ident" id="6729810">c</span>&nbsp;<span class="op" id="6729812">!=</span>&nbsp;<span class="ident" id="6729815">a</span><span class="op" id="6729816">+</span><span class="builtintype" id="6729817">byte</span><span class="op" id="6729821">(</span><span class="ident" id="6729822">i</span><span class="op" id="6729823">)</span>&nbsp;<span class="op" id="6729825">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729830">return</span>&nbsp;<span class="ident" id="6729837">errors</span><span class="op" id="6729843">.</span><span class="ident" id="6729844">New</span><span class="op" id="6729847">(</span><span class="string" id="6729848">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="6729871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6729878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729881">g</span><span class="op" id="6729882">.</span><span class="ident" id="6729883">s</span>&nbsp;<span class="op" id="6729885">=</span>&nbsp;<span class="builtintype" id="6729887">string</span><span class="op" id="6729893">(</span><span class="ident" id="6729894">data</span><span class="op" id="6729898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729901">return</span>&nbsp;<span class="ident" id="6729908">nil</span><br>
<span class="lineno">90</span><span class="op" id="6729912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729915">func</span>&nbsp;<span class="op" id="6729920">(</span><span class="ident" id="6729921">a</span>&nbsp;<span class="op" id="6729923">*</span><span class="ident" id="6729924">ArrayStruct</span><span class="op" id="6729935">)</span>&nbsp;<span class="ident" id="6729937">GobEncode</span><span class="op" id="6729946">(</span><span class="op" id="6729947">)</span>&nbsp;<span class="op" id="6729949">(</span><span class="op" id="6729950">[</span><span class="op" id="6729951">]</span><span class="builtintype" id="6729952">byte</span><span class="op" id="6729956">,</span>&nbsp;<span class="builtintype" id="6729958">error</span><span class="op" id="6729963">)</span>&nbsp;<span class="op" id="6729965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6729968">return</span>&nbsp;<span class="ident" id="6729975">a</span><span class="op" id="6729976">.</span><span class="ident" id="6729977">a</span><span class="op" id="6729978">[</span><span class="op" id="6729979">:</span><span class="op" id="6729980">]</span><span class="op" id="6729981">,</span>&nbsp;<span class="ident" id="6729983">nil</span><br>
<span class="lineno"></span><span class="op" id="6729987">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="6729990">func</span>&nbsp;<span class="op" id="6729995">(</span><span class="ident" id="6729996">a</span>&nbsp;<span class="op" id="6729998">*</span><span class="ident" id="6729999">ArrayStruct</span><span class="op" id="6730010">)</span>&nbsp;<span class="ident" id="6730012">GobDecode</span><span class="op" id="6730021">(</span><span class="ident" id="6730022">data</span>&nbsp;<span class="op" id="6730027">[</span><span class="op" id="6730028">]</span><span class="builtintype" id="6730029">byte</span><span class="op" id="6730033">)</span>&nbsp;<span class="builtintype" id="6730035">error</span>&nbsp;<span class="op" id="6730041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730044">if</span>&nbsp;<span class="builtinfunc" id="6730047">len</span><span class="op" id="6730050">(</span><span class="ident" id="6730051">data</span><span class="op" id="6730055">)</span>&nbsp;<span class="op" id="6730057">!=</span>&nbsp;<span class="builtinfunc" id="6730060">len</span><span class="op" id="6730063">(</span><span class="ident" id="6730064">a</span><span class="op" id="6730065">.</span><span class="ident" id="6730066">a</span><span class="op" id="6730067">)</span>&nbsp;<span class="op" id="6730069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730073">return</span>&nbsp;<span class="ident" id="6730080">errors</span><span class="op" id="6730086">.</span><span class="ident" id="6730087">New</span><span class="op" id="6730090">(</span><span class="string" id="6730091">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="6730121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730124">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6730127">copy</span><span class="op" id="6730131">(</span><span class="ident" id="6730132">a</span><span class="op" id="6730133">.</span><span class="ident" id="6730134">a</span><span class="op" id="6730135">[</span><span class="op" id="6730136">:</span><span class="op" id="6730137">]</span><span class="op" id="6730138">,</span>&nbsp;<span class="ident" id="6730140">data</span><span class="op" id="6730144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730147">return</span>&nbsp;<span class="ident" id="6730154">nil</span><br>
<span class="lineno"></span><span class="op" id="6730158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730161">func</span>&nbsp;<span class="op" id="6730166">(</span><span class="ident" id="6730167">g</span>&nbsp;<span class="op" id="6730169">*</span><span class="ident" id="6730170">Gobber</span><span class="op" id="6730176">)</span>&nbsp;<span class="ident" id="6730178">GobEncode</span><span class="op" id="6730187">(</span><span class="op" id="6730188">)</span>&nbsp;<span class="op" id="6730190">(</span><span class="op" id="6730191">[</span><span class="op" id="6730192">]</span><span class="builtintype" id="6730193">byte</span><span class="op" id="6730197">,</span>&nbsp;<span class="builtintype" id="6730199">error</span><span class="op" id="6730204">)</span>&nbsp;<span class="op" id="6730206">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730209">return</span>&nbsp;<span class="op" id="6730216">[</span><span class="op" id="6730217">]</span><span class="builtintype" id="6730218">byte</span><span class="op" id="6730222">(</span><span class="ident" id="6730223">fmt</span><span class="op" id="6730226">.</span><span class="ident" id="6730227">Sprintf</span><span class="op" id="6730234">(</span><span class="string" id="6730235">&#34;VALUE=%d&#34;</span><span class="op" id="6730245">,</span>&nbsp;<span class="op" id="6730247">*</span><span class="ident" id="6730248">g</span><span class="op" id="6730249">)</span><span class="op" id="6730250">)</span><span class="op" id="6730251">,</span>&nbsp;<span class="ident" id="6730253">nil</span><br>
<span class="lineno"></span><span class="op" id="6730257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730260">func</span>&nbsp;<span class="op" id="6730265">(</span><span class="ident" id="6730266">g</span>&nbsp;<span class="op" id="6730268">*</span><span class="ident" id="6730269">Gobber</span><span class="op" id="6730275">)</span>&nbsp;<span class="ident" id="6730277">GobDecode</span><span class="op" id="6730286">(</span><span class="ident" id="6730287">data</span>&nbsp;<span class="op" id="6730292">[</span><span class="op" id="6730293">]</span><span class="builtintype" id="6730294">byte</span><span class="op" id="6730298">)</span>&nbsp;<span class="builtintype" id="6730300">error</span>&nbsp;<span class="op" id="6730306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730309">_</span><span class="op" id="6730310">,</span>&nbsp;<span class="ident" id="6730312">err</span>&nbsp;<span class="op" id="6730316">:=</span>&nbsp;<span class="ident" id="6730319">fmt</span><span class="op" id="6730322">.</span><span class="ident" id="6730323">Sscanf</span><span class="op" id="6730329">(</span><span class="builtintype" id="6730330">string</span><span class="op" id="6730336">(</span><span class="ident" id="6730337">data</span><span class="op" id="6730341">)</span><span class="op" id="6730342">,</span>&nbsp;<span class="string" id="6730344">&#34;VALUE=%d&#34;</span><span class="op" id="6730354">,</span>&nbsp;<span class="op" id="6730356">(</span><span class="op" id="6730357">*</span><span class="builtintype" id="6730358">int</span><span class="op" id="6730361">)</span><span class="op" id="6730362">(</span><span class="ident" id="6730363">g</span><span class="op" id="6730364">)</span><span class="op" id="6730365">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730368">return</span>&nbsp;<span class="ident" id="6730375">err</span><br>
<span class="lineno"></span><span class="op" id="6730379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730382">func</span>&nbsp;<span class="op" id="6730387">(</span><span class="ident" id="6730388">g</span>&nbsp;<span class="op" id="6730390">*</span><span class="ident" id="6730391">BinaryGobber</span><span class="op" id="6730403">)</span>&nbsp;<span class="ident" id="6730405">MarshalBinary</span><span class="op" id="6730418">(</span><span class="op" id="6730419">)</span>&nbsp;<span class="op" id="6730421">(</span><span class="op" id="6730422">[</span><span class="op" id="6730423">]</span><span class="builtintype" id="6730424">byte</span><span class="op" id="6730428">,</span>&nbsp;<span class="builtintype" id="6730430">error</span><span class="op" id="6730435">)</span>&nbsp;<span class="op" id="6730437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730440">return</span>&nbsp;<span class="op" id="6730447">[</span><span class="op" id="6730448">]</span><span class="builtintype" id="6730449">byte</span><span class="op" id="6730453">(</span><span class="ident" id="6730454">fmt</span><span class="op" id="6730457">.</span><span class="ident" id="6730458">Sprintf</span><span class="op" id="6730465">(</span><span class="string" id="6730466">&#34;VALUE=%d&#34;</span><span class="op" id="6730476">,</span>&nbsp;<span class="op" id="6730478">*</span><span class="ident" id="6730479">g</span><span class="op" id="6730480">)</span><span class="op" id="6730481">)</span><span class="op" id="6730482">,</span>&nbsp;<span class="ident" id="6730484">nil</span><br>
<span class="lineno">115</span><span class="op" id="6730488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730491">func</span>&nbsp;<span class="op" id="6730496">(</span><span class="ident" id="6730497">g</span>&nbsp;<span class="op" id="6730499">*</span><span class="ident" id="6730500">BinaryGobber</span><span class="op" id="6730512">)</span>&nbsp;<span class="ident" id="6730514">UnmarshalBinary</span><span class="op" id="6730529">(</span><span class="ident" id="6730530">data</span>&nbsp;<span class="op" id="6730535">[</span><span class="op" id="6730536">]</span><span class="builtintype" id="6730537">byte</span><span class="op" id="6730541">)</span>&nbsp;<span class="builtintype" id="6730543">error</span>&nbsp;<span class="op" id="6730549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730552">_</span><span class="op" id="6730553">,</span>&nbsp;<span class="ident" id="6730555">err</span>&nbsp;<span class="op" id="6730559">:=</span>&nbsp;<span class="ident" id="6730562">fmt</span><span class="op" id="6730565">.</span><span class="ident" id="6730566">Sscanf</span><span class="op" id="6730572">(</span><span class="builtintype" id="6730573">string</span><span class="op" id="6730579">(</span><span class="ident" id="6730580">data</span><span class="op" id="6730584">)</span><span class="op" id="6730585">,</span>&nbsp;<span class="string" id="6730587">&#34;VALUE=%d&#34;</span><span class="op" id="6730597">,</span>&nbsp;<span class="op" id="6730599">(</span><span class="op" id="6730600">*</span><span class="builtintype" id="6730601">int</span><span class="op" id="6730604">)</span><span class="op" id="6730605">(</span><span class="ident" id="6730606">g</span><span class="op" id="6730607">)</span><span class="op" id="6730608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730611">return</span>&nbsp;<span class="ident" id="6730618">err</span><br>
<span class="lineno">120</span><span class="op" id="6730622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730625">func</span>&nbsp;<span class="op" id="6730630">(</span><span class="ident" id="6730631">g</span>&nbsp;<span class="op" id="6730633">*</span><span class="ident" id="6730634">TextGobber</span><span class="op" id="6730644">)</span>&nbsp;<span class="ident" id="6730646">MarshalText</span><span class="op" id="6730657">(</span><span class="op" id="6730658">)</span>&nbsp;<span class="op" id="6730660">(</span><span class="op" id="6730661">[</span><span class="op" id="6730662">]</span><span class="builtintype" id="6730663">byte</span><span class="op" id="6730667">,</span>&nbsp;<span class="builtintype" id="6730669">error</span><span class="op" id="6730674">)</span>&nbsp;<span class="op" id="6730676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730679">return</span>&nbsp;<span class="op" id="6730686">[</span><span class="op" id="6730687">]</span><span class="builtintype" id="6730688">byte</span><span class="op" id="6730692">(</span><span class="ident" id="6730693">fmt</span><span class="op" id="6730696">.</span><span class="ident" id="6730697">Sprintf</span><span class="op" id="6730704">(</span><span class="string" id="6730705">&#34;VALUE=%d&#34;</span><span class="op" id="6730715">,</span>&nbsp;<span class="op" id="6730717">*</span><span class="ident" id="6730718">g</span><span class="op" id="6730719">)</span><span class="op" id="6730720">)</span><span class="op" id="6730721">,</span>&nbsp;<span class="ident" id="6730723">nil</span><br>
<span class="lineno"></span><span class="op" id="6730727">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="6730730">func</span>&nbsp;<span class="op" id="6730735">(</span><span class="ident" id="6730736">g</span>&nbsp;<span class="op" id="6730738">*</span><span class="ident" id="6730739">TextGobber</span><span class="op" id="6730749">)</span>&nbsp;<span class="ident" id="6730751">UnmarshalText</span><span class="op" id="6730764">(</span><span class="ident" id="6730765">data</span>&nbsp;<span class="op" id="6730770">[</span><span class="op" id="6730771">]</span><span class="builtintype" id="6730772">byte</span><span class="op" id="6730776">)</span>&nbsp;<span class="builtintype" id="6730778">error</span>&nbsp;<span class="op" id="6730784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730787">_</span><span class="op" id="6730788">,</span>&nbsp;<span class="ident" id="6730790">err</span>&nbsp;<span class="op" id="6730794">:=</span>&nbsp;<span class="ident" id="6730797">fmt</span><span class="op" id="6730800">.</span><span class="ident" id="6730801">Sscanf</span><span class="op" id="6730807">(</span><span class="builtintype" id="6730808">string</span><span class="op" id="6730814">(</span><span class="ident" id="6730815">data</span><span class="op" id="6730819">)</span><span class="op" id="6730820">,</span>&nbsp;<span class="string" id="6730822">&#34;VALUE=%d&#34;</span><span class="op" id="6730832">,</span>&nbsp;<span class="op" id="6730834">(</span><span class="op" id="6730835">*</span><span class="builtintype" id="6730836">int</span><span class="op" id="6730839">)</span><span class="op" id="6730840">(</span><span class="ident" id="6730841">g</span><span class="op" id="6730842">)</span><span class="op" id="6730843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730846">return</span>&nbsp;<span class="ident" id="6730853">err</span><br>
<span class="lineno"></span><span class="op" id="6730857">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="6730860">func</span>&nbsp;<span class="op" id="6730865">(</span><span class="ident" id="6730866">v</span>&nbsp;<span class="ident" id="6730868">ValueGobber</span><span class="op" id="6730879">)</span>&nbsp;<span class="ident" id="6730881">GobEncode</span><span class="op" id="6730890">(</span><span class="op" id="6730891">)</span>&nbsp;<span class="op" id="6730893">(</span><span class="op" id="6730894">[</span><span class="op" id="6730895">]</span><span class="builtintype" id="6730896">byte</span><span class="op" id="6730900">,</span>&nbsp;<span class="builtintype" id="6730902">error</span><span class="op" id="6730907">)</span>&nbsp;<span class="op" id="6730909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730912">return</span>&nbsp;<span class="op" id="6730919">[</span><span class="op" id="6730920">]</span><span class="builtintype" id="6730921">byte</span><span class="op" id="6730925">(</span><span class="ident" id="6730926">fmt</span><span class="op" id="6730929">.</span><span class="ident" id="6730930">Sprintf</span><span class="op" id="6730937">(</span><span class="string" id="6730938">&#34;VALUE=%s&#34;</span><span class="op" id="6730948">,</span>&nbsp;<span class="ident" id="6730950">v</span><span class="op" id="6730951">)</span><span class="op" id="6730952">)</span><span class="op" id="6730953">,</span>&nbsp;<span class="ident" id="6730955">nil</span><br>
<span class="lineno"></span><span class="op" id="6730959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6730962">func</span>&nbsp;<span class="op" id="6730967">(</span><span class="ident" id="6730968">v</span>&nbsp;<span class="op" id="6730970">*</span><span class="ident" id="6730971">ValueGobber</span><span class="op" id="6730982">)</span>&nbsp;<span class="ident" id="6730984">GobDecode</span><span class="op" id="6730993">(</span><span class="ident" id="6730994">data</span>&nbsp;<span class="op" id="6730999">[</span><span class="op" id="6731000">]</span><span class="builtintype" id="6731001">byte</span><span class="op" id="6731005">)</span>&nbsp;<span class="builtintype" id="6731007">error</span>&nbsp;<span class="op" id="6731013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731016">_</span><span class="op" id="6731017">,</span>&nbsp;<span class="ident" id="6731019">err</span>&nbsp;<span class="op" id="6731023">:=</span>&nbsp;<span class="ident" id="6731026">fmt</span><span class="op" id="6731029">.</span><span class="ident" id="6731030">Sscanf</span><span class="op" id="6731036">(</span><span class="builtintype" id="6731037">string</span><span class="op" id="6731043">(</span><span class="ident" id="6731044">data</span><span class="op" id="6731048">)</span><span class="op" id="6731049">,</span>&nbsp;<span class="string" id="6731051">&#34;VALUE=%s&#34;</span><span class="op" id="6731061">,</span>&nbsp;<span class="op" id="6731063">(</span><span class="op" id="6731064">*</span><span class="builtintype" id="6731065">string</span><span class="op" id="6731071">)</span><span class="op" id="6731072">(</span><span class="ident" id="6731073">v</span><span class="op" id="6731074">)</span><span class="op" id="6731075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731078">return</span>&nbsp;<span class="ident" id="6731085">err</span><br>
<span class="lineno"></span><span class="op" id="6731089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="6731092">func</span>&nbsp;<span class="op" id="6731097">(</span><span class="ident" id="6731098">v</span>&nbsp;<span class="ident" id="6731100">BinaryValueGobber</span><span class="op" id="6731117">)</span>&nbsp;<span class="ident" id="6731119">MarshalBinary</span><span class="op" id="6731132">(</span><span class="op" id="6731133">)</span>&nbsp;<span class="op" id="6731135">(</span><span class="op" id="6731136">[</span><span class="op" id="6731137">]</span><span class="builtintype" id="6731138">byte</span><span class="op" id="6731142">,</span>&nbsp;<span class="builtintype" id="6731144">error</span><span class="op" id="6731149">)</span>&nbsp;<span class="op" id="6731151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731154">return</span>&nbsp;<span class="op" id="6731161">[</span><span class="op" id="6731162">]</span><span class="builtintype" id="6731163">byte</span><span class="op" id="6731167">(</span><span class="ident" id="6731168">fmt</span><span class="op" id="6731171">.</span><span class="ident" id="6731172">Sprintf</span><span class="op" id="6731179">(</span><span class="string" id="6731180">&#34;VALUE=%s&#34;</span><span class="op" id="6731190">,</span>&nbsp;<span class="ident" id="6731192">v</span><span class="op" id="6731193">)</span><span class="op" id="6731194">)</span><span class="op" id="6731195">,</span>&nbsp;<span class="ident" id="6731197">nil</span><br>
<span class="lineno"></span><span class="op" id="6731201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6731204">func</span>&nbsp;<span class="op" id="6731209">(</span><span class="ident" id="6731210">v</span>&nbsp;<span class="op" id="6731212">*</span><span class="ident" id="6731213">BinaryValueGobber</span><span class="op" id="6731230">)</span>&nbsp;<span class="ident" id="6731232">UnmarshalBinary</span><span class="op" id="6731247">(</span><span class="ident" id="6731248">data</span>&nbsp;<span class="op" id="6731253">[</span><span class="op" id="6731254">]</span><span class="builtintype" id="6731255">byte</span><span class="op" id="6731259">)</span>&nbsp;<span class="builtintype" id="6731261">error</span>&nbsp;<span class="op" id="6731267">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731270">_</span><span class="op" id="6731271">,</span>&nbsp;<span class="ident" id="6731273">err</span>&nbsp;<span class="op" id="6731277">:=</span>&nbsp;<span class="ident" id="6731280">fmt</span><span class="op" id="6731283">.</span><span class="ident" id="6731284">Sscanf</span><span class="op" id="6731290">(</span><span class="builtintype" id="6731291">string</span><span class="op" id="6731297">(</span><span class="ident" id="6731298">data</span><span class="op" id="6731302">)</span><span class="op" id="6731303">,</span>&nbsp;<span class="string" id="6731305">&#34;VALUE=%s&#34;</span><span class="op" id="6731315">,</span>&nbsp;<span class="op" id="6731317">(</span><span class="op" id="6731318">*</span><span class="builtintype" id="6731319">string</span><span class="op" id="6731325">)</span><span class="op" id="6731326">(</span><span class="ident" id="6731327">v</span><span class="op" id="6731328">)</span><span class="op" id="6731329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731332">return</span>&nbsp;<span class="ident" id="6731339">err</span><br>
<span class="lineno"></span><span class="op" id="6731343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6731346">func</span>&nbsp;<span class="op" id="6731351">(</span><span class="ident" id="6731352">v</span>&nbsp;<span class="ident" id="6731354">TextValueGobber</span><span class="op" id="6731369">)</span>&nbsp;<span class="ident" id="6731371">MarshalText</span><span class="op" id="6731382">(</span><span class="op" id="6731383">)</span>&nbsp;<span class="op" id="6731385">(</span><span class="op" id="6731386">[</span><span class="op" id="6731387">]</span><span class="builtintype" id="6731388">byte</span><span class="op" id="6731392">,</span>&nbsp;<span class="builtintype" id="6731394">error</span><span class="op" id="6731399">)</span>&nbsp;<span class="op" id="6731401">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731404">return</span>&nbsp;<span class="op" id="6731411">[</span><span class="op" id="6731412">]</span><span class="builtintype" id="6731413">byte</span><span class="op" id="6731417">(</span><span class="ident" id="6731418">fmt</span><span class="op" id="6731421">.</span><span class="ident" id="6731422">Sprintf</span><span class="op" id="6731429">(</span><span class="string" id="6731430">&#34;VALUE=%s&#34;</span><span class="op" id="6731440">,</span>&nbsp;<span class="ident" id="6731442">v</span><span class="op" id="6731443">)</span><span class="op" id="6731444">)</span><span class="op" id="6731445">,</span>&nbsp;<span class="ident" id="6731447">nil</span><br>
<span class="lineno"></span><span class="op" id="6731451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6731454">func</span>&nbsp;<span class="op" id="6731459">(</span><span class="ident" id="6731460">v</span>&nbsp;<span class="op" id="6731462">*</span><span class="ident" id="6731463">TextValueGobber</span><span class="op" id="6731478">)</span>&nbsp;<span class="ident" id="6731480">UnmarshalText</span><span class="op" id="6731493">(</span><span class="ident" id="6731494">data</span>&nbsp;<span class="op" id="6731499">[</span><span class="op" id="6731500">]</span><span class="builtintype" id="6731501">byte</span><span class="op" id="6731505">)</span>&nbsp;<span class="builtintype" id="6731507">error</span>&nbsp;<span class="op" id="6731513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731516">_</span><span class="op" id="6731517">,</span>&nbsp;<span class="ident" id="6731519">err</span>&nbsp;<span class="op" id="6731523">:=</span>&nbsp;<span class="ident" id="6731526">fmt</span><span class="op" id="6731529">.</span><span class="ident" id="6731530">Sscanf</span><span class="op" id="6731536">(</span><span class="builtintype" id="6731537">string</span><span class="op" id="6731543">(</span><span class="ident" id="6731544">data</span><span class="op" id="6731548">)</span><span class="op" id="6731549">,</span>&nbsp;<span class="string" id="6731551">&#34;VALUE=%s&#34;</span><span class="op" id="6731561">,</span>&nbsp;<span class="op" id="6731563">(</span><span class="op" id="6731564">*</span><span class="builtintype" id="6731565">string</span><span class="op" id="6731571">)</span><span class="op" id="6731572">(</span><span class="ident" id="6731573">v</span><span class="op" id="6731574">)</span><span class="op" id="6731575">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731578">return</span>&nbsp;<span class="ident" id="6731585">err</span><br>
<span class="lineno"></span><span class="op" id="6731589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6731592">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="6731638">type</span>&nbsp;<span class="ident" id="6731643">GobTest0</span>&nbsp;<span class="keyword" id="6731652">struct</span>&nbsp;<span class="op" id="6731659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731662">X</span>&nbsp;<span class="builtintype" id="6731664">int</span>&nbsp;<span class="comment" id="6731668">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731725">G</span>&nbsp;<span class="op" id="6731727">*</span><span class="ident" id="6731728">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="6731739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6731742">type</span>&nbsp;<span class="ident" id="6731747">GobTest1</span>&nbsp;<span class="keyword" id="6731756">struct</span>&nbsp;<span class="op" id="6731763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731766">X</span>&nbsp;<span class="builtintype" id="6731768">int</span>&nbsp;<span class="comment" id="6731772">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731829">G</span>&nbsp;<span class="op" id="6731831">*</span><span class="ident" id="6731832">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="6731845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="6731848">type</span>&nbsp;<span class="ident" id="6731853">GobTest2</span>&nbsp;<span class="keyword" id="6731862">struct</span>&nbsp;<span class="op" id="6731869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731872">X</span>&nbsp;<span class="builtintype" id="6731874">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6731881">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731938">G</span>&nbsp;<span class="builtintype" id="6731940">string</span>&nbsp;<span class="comment" id="6731947">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="6731991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6731994">type</span>&nbsp;<span class="ident" id="6731999">GobTest3</span>&nbsp;<span class="keyword" id="6732008">struct</span>&nbsp;<span class="op" id="6732015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732018">X</span>&nbsp;<span class="builtintype" id="6732020">int</span>&nbsp;<span class="comment" id="6732024">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732081">G</span>&nbsp;<span class="op" id="6732083">*</span><span class="ident" id="6732084">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732092">B</span>&nbsp;<span class="op" id="6732094">*</span><span class="ident" id="6732095">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732109">T</span>&nbsp;<span class="op" id="6732111">*</span><span class="ident" id="6732112">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="6732123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6732126">type</span>&nbsp;<span class="ident" id="6732131">GobTest4</span>&nbsp;<span class="keyword" id="6732140">struct</span>&nbsp;<span class="op" id="6732147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732150">X</span>&nbsp;&nbsp;<span class="builtintype" id="6732153">int</span>&nbsp;<span class="comment" id="6732157">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732214">V</span>&nbsp;&nbsp;<span class="ident" id="6732217">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732230">BV</span>&nbsp;<span class="ident" id="6732233">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732252">TV</span>&nbsp;<span class="ident" id="6732255">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6732271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6732274">type</span>&nbsp;<span class="ident" id="6732279">GobTest5</span>&nbsp;<span class="keyword" id="6732288">struct</span>&nbsp;<span class="op" id="6732295">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732298">X</span>&nbsp;&nbsp;<span class="builtintype" id="6732301">int</span>&nbsp;<span class="comment" id="6732305">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732362">V</span>&nbsp;&nbsp;<span class="op" id="6732365">*</span><span class="ident" id="6732366">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732379">BV</span>&nbsp;<span class="op" id="6732382">*</span><span class="ident" id="6732383">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732402">TV</span>&nbsp;<span class="op" id="6732405">*</span><span class="ident" id="6732406">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6732422">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="6732425">type</span>&nbsp;<span class="ident" id="6732430">GobTest6</span>&nbsp;<span class="keyword" id="6732439">struct</span>&nbsp;<span class="op" id="6732446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732449">X</span>&nbsp;&nbsp;<span class="builtintype" id="6732452">int</span>&nbsp;<span class="comment" id="6732456">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732513">V</span>&nbsp;&nbsp;<span class="ident" id="6732516">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732529">W</span>&nbsp;&nbsp;<span class="op" id="6732532">*</span><span class="ident" id="6732533">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732546">BV</span>&nbsp;<span class="ident" id="6732549">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732568">BW</span>&nbsp;<span class="op" id="6732571">*</span><span class="ident" id="6732572">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732591">TV</span>&nbsp;<span class="ident" id="6732594">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732611">TW</span>&nbsp;<span class="op" id="6732614">*</span><span class="ident" id="6732615">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6732631">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="6732634">type</span>&nbsp;<span class="ident" id="6732639">GobTest7</span>&nbsp;<span class="keyword" id="6732648">struct</span>&nbsp;<span class="op" id="6732655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732658">X</span>&nbsp;&nbsp;<span class="builtintype" id="6732661">int</span>&nbsp;<span class="comment" id="6732665">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732722">V</span>&nbsp;&nbsp;<span class="op" id="6732725">*</span><span class="ident" id="6732726">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732739">W</span>&nbsp;&nbsp;<span class="ident" id="6732742">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732755">BV</span>&nbsp;<span class="op" id="6732758">*</span><span class="ident" id="6732759">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732778">BW</span>&nbsp;<span class="ident" id="6732781">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732800">TV</span>&nbsp;<span class="op" id="6732803">*</span><span class="ident" id="6732804">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732821">TW</span>&nbsp;<span class="ident" id="6732824">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6732840">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="6732843">type</span>&nbsp;<span class="ident" id="6732848">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="6732869">struct</span>&nbsp;<span class="op" id="6732876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732879">X</span>&nbsp;<span class="builtintype" id="6732881">int</span>&nbsp;<span class="comment" id="6732885">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="6732941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6732944">type</span>&nbsp;<span class="ident" id="6732949">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="6732968">struct</span>&nbsp;<span class="op" id="6732975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732978">X</span>&nbsp;<span class="builtintype" id="6732980">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6732993">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733050">G</span>&nbsp;<span class="ident" id="6733052">StringStruct</span>&nbsp;<span class="comment" id="6733065">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="6733083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="6733086">type</span>&nbsp;<span class="ident" id="6733091">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="6733113">struct</span>&nbsp;<span class="op" id="6733120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733123">X</span>&nbsp;<span class="builtintype" id="6733125">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733141">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733198">G</span>&nbsp;<span class="op" id="6733200">*</span><span class="op" id="6733201">*</span><span class="op" id="6733202">*</span><span class="ident" id="6733203">StringStruct</span>&nbsp;<span class="comment" id="6733216">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="6733249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="6733252">type</span>&nbsp;<span class="ident" id="6733257">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="6733276">struct</span>&nbsp;<span class="op" id="6733283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733286">X</span>&nbsp;<span class="builtintype" id="6733288">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733300">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733357">A</span>&nbsp;<span class="ident" id="6733359">ArrayStruct</span>&nbsp;<span class="comment" id="6733371">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="6733389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="6733392">type</span>&nbsp;<span class="ident" id="6733397">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="6733424">struct</span>&nbsp;<span class="op" id="6733431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733434">X</span>&nbsp;<span class="builtintype" id="6733436">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6733451">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733508">A</span>&nbsp;<span class="op" id="6733510">*</span><span class="op" id="6733511">*</span><span class="op" id="6733512">*</span><span class="ident" id="6733513">ArrayStruct</span>&nbsp;<span class="comment" id="6733525">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="6733562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6733565">func</span>&nbsp;<span class="ident" id="6733570">TestGobEncoderField</span><span class="op" id="6733589">(</span><span class="ident" id="6733590">t</span>&nbsp;<span class="op" id="6733592">*</span><span class="ident" id="6733593">testing</span><span class="op" id="6733600">.</span><span class="ident" id="6733601">T</span><span class="op" id="6733602">)</span>&nbsp;<span class="op" id="6733604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733607">b</span>&nbsp;<span class="op" id="6733609">:=</span>&nbsp;<span class="builtinfunc" id="6733612">new</span><span class="op" id="6733615">(</span><span class="ident" id="6733616">bytes</span><span class="op" id="6733621">.</span><span class="ident" id="6733622">Buffer</span><span class="op" id="6733628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733631">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733669">enc</span>&nbsp;<span class="op" id="6733673">:=</span>&nbsp;<span class="ident" id="6733676">NewEncoder</span><span class="op" id="6733686">(</span><span class="ident" id="6733687">b</span><span class="op" id="6733688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733691">err</span>&nbsp;<span class="op" id="6733695">:=</span>&nbsp;<span class="ident" id="6733698">enc</span><span class="op" id="6733701">.</span><span class="ident" id="6733702">Encode</span><span class="op" id="6733708">(</span><span class="ident" id="6733709">GobTest0</span><span class="op" id="6733717">{</span><span class="num" id="6733718">17</span><span class="op" id="6733720">,</span>&nbsp;<span class="op" id="6733722">&amp;</span><span class="ident" id="6733723">ByteStruct</span><span class="op" id="6733733">{</span><span class="string" id="6733734">&#39;A&#39;</span><span class="op" id="6733737">}</span><span class="op" id="6733738">}</span><span class="op" id="6733739">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733742">if</span>&nbsp;<span class="ident" id="6733745">err</span>&nbsp;<span class="op" id="6733749">!=</span>&nbsp;<span class="ident" id="6733752">nil</span>&nbsp;<span class="op" id="6733756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733760">t</span><span class="op" id="6733761">.</span><span class="ident" id="6733762">Fatal</span><span class="op" id="6733767">(</span><span class="string" id="6733768">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6733783">,</span>&nbsp;<span class="ident" id="6733785">err</span><span class="op" id="6733788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733794">dec</span>&nbsp;<span class="op" id="6733798">:=</span>&nbsp;<span class="ident" id="6733801">NewDecoder</span><span class="op" id="6733811">(</span><span class="ident" id="6733812">b</span><span class="op" id="6733813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733816">x</span>&nbsp;<span class="op" id="6733818">:=</span>&nbsp;<span class="builtinfunc" id="6733821">new</span><span class="op" id="6733824">(</span><span class="ident" id="6733825">GobTest0</span><span class="op" id="6733833">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733836">err</span>&nbsp;<span class="op" id="6733840">=</span>&nbsp;<span class="ident" id="6733842">dec</span><span class="op" id="6733845">.</span><span class="ident" id="6733846">Decode</span><span class="op" id="6733852">(</span><span class="ident" id="6733853">x</span><span class="op" id="6733854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733857">if</span>&nbsp;<span class="ident" id="6733860">err</span>&nbsp;<span class="op" id="6733864">!=</span>&nbsp;<span class="ident" id="6733867">nil</span>&nbsp;<span class="op" id="6733871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733875">t</span><span class="op" id="6733876">.</span><span class="ident" id="6733877">Fatal</span><span class="op" id="6733882">(</span><span class="string" id="6733883">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6733898">,</span>&nbsp;<span class="ident" id="6733900">err</span><span class="op" id="6733903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733909">if</span>&nbsp;<span class="ident" id="6733912">x</span><span class="op" id="6733913">.</span><span class="ident" id="6733914">G</span><span class="op" id="6733915">.</span><span class="ident" id="6733916">a</span>&nbsp;<span class="op" id="6733918">!=</span>&nbsp;<span class="string" id="6733921">&#39;A&#39;</span>&nbsp;<span class="op" id="6733925">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733929">t</span><span class="op" id="6733930">.</span><span class="ident" id="6733931">Errorf</span><span class="op" id="6733937">(</span><span class="string" id="6733938">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6733959">,</span>&nbsp;<span class="ident" id="6733961">x</span><span class="op" id="6733962">.</span><span class="ident" id="6733963">G</span><span class="op" id="6733964">.</span><span class="ident" id="6733965">a</span><span class="op" id="6733966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733972">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734012">b</span><span class="op" id="6734013">.</span><span class="ident" id="6734014">Reset</span><span class="op" id="6734019">(</span><span class="op" id="6734020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734023">gobber</span>&nbsp;<span class="op" id="6734030">:=</span>&nbsp;<span class="ident" id="6734033">Gobber</span><span class="op" id="6734039">(</span><span class="num" id="6734040">23</span><span class="op" id="6734042">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734045">bgobber</span>&nbsp;<span class="op" id="6734053">:=</span>&nbsp;<span class="ident" id="6734056">BinaryGobber</span><span class="op" id="6734068">(</span><span class="num" id="6734069">24</span><span class="op" id="6734071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734074">tgobber</span>&nbsp;<span class="op" id="6734082">:=</span>&nbsp;<span class="ident" id="6734085">TextGobber</span><span class="op" id="6734095">(</span><span class="num" id="6734096">25</span><span class="op" id="6734098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734101">err</span>&nbsp;<span class="op" id="6734105">=</span>&nbsp;<span class="ident" id="6734107">enc</span><span class="op" id="6734110">.</span><span class="ident" id="6734111">Encode</span><span class="op" id="6734117">(</span><span class="ident" id="6734118">GobTest3</span><span class="op" id="6734126">{</span><span class="num" id="6734127">17</span><span class="op" id="6734129">,</span>&nbsp;<span class="op" id="6734131">&amp;</span><span class="ident" id="6734132">gobber</span><span class="op" id="6734138">,</span>&nbsp;<span class="op" id="6734140">&amp;</span><span class="ident" id="6734141">bgobber</span><span class="op" id="6734148">,</span>&nbsp;<span class="op" id="6734150">&amp;</span><span class="ident" id="6734151">tgobber</span><span class="op" id="6734158">}</span><span class="op" id="6734159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734162">if</span>&nbsp;<span class="ident" id="6734165">err</span>&nbsp;<span class="op" id="6734169">!=</span>&nbsp;<span class="ident" id="6734172">nil</span>&nbsp;<span class="op" id="6734176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734180">t</span><span class="op" id="6734181">.</span><span class="ident" id="6734182">Fatal</span><span class="op" id="6734187">(</span><span class="string" id="6734188">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6734203">,</span>&nbsp;<span class="ident" id="6734205">err</span><span class="op" id="6734208">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734214">y</span>&nbsp;<span class="op" id="6734216">:=</span>&nbsp;<span class="builtinfunc" id="6734219">new</span><span class="op" id="6734222">(</span><span class="ident" id="6734223">GobTest3</span><span class="op" id="6734231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734234">err</span>&nbsp;<span class="op" id="6734238">=</span>&nbsp;<span class="ident" id="6734240">dec</span><span class="op" id="6734243">.</span><span class="ident" id="6734244">Decode</span><span class="op" id="6734250">(</span><span class="ident" id="6734251">y</span><span class="op" id="6734252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734255">if</span>&nbsp;<span class="ident" id="6734258">err</span>&nbsp;<span class="op" id="6734262">!=</span>&nbsp;<span class="ident" id="6734265">nil</span>&nbsp;<span class="op" id="6734269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734273">t</span><span class="op" id="6734274">.</span><span class="ident" id="6734275">Fatal</span><span class="op" id="6734280">(</span><span class="string" id="6734281">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6734296">,</span>&nbsp;<span class="ident" id="6734298">err</span><span class="op" id="6734301">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734307">if</span>&nbsp;<span class="op" id="6734310">*</span><span class="ident" id="6734311">y</span><span class="op" id="6734312">.</span><span class="ident" id="6734313">G</span>&nbsp;<span class="op" id="6734315">!=</span>&nbsp;<span class="num" id="6734318">23</span>&nbsp;<span class="op" id="6734321">||</span>&nbsp;<span class="op" id="6734324">*</span><span class="ident" id="6734325">y</span><span class="op" id="6734326">.</span><span class="ident" id="6734327">B</span>&nbsp;<span class="op" id="6734329">!=</span>&nbsp;<span class="num" id="6734332">24</span>&nbsp;<span class="op" id="6734335">||</span>&nbsp;<span class="op" id="6734338">*</span><span class="ident" id="6734339">y</span><span class="op" id="6734340">.</span><span class="ident" id="6734341">T</span>&nbsp;<span class="op" id="6734343">!=</span>&nbsp;<span class="num" id="6734346">25</span>&nbsp;<span class="op" id="6734349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734353">t</span><span class="op" id="6734354">.</span><span class="ident" id="6734355">Errorf</span><span class="op" id="6734361">(</span><span class="string" id="6734362">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6734383">,</span>&nbsp;<span class="op" id="6734385">*</span><span class="ident" id="6734386">y</span><span class="op" id="6734387">.</span><span class="ident" id="6734388">G</span><span class="op" id="6734389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734392">}</span><br>
<span class="lineno"></span><span class="op" id="6734394">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6734397">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="6734464">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6734507">func</span>&nbsp;<span class="ident" id="6734512">TestGobEncoderValueField</span><span class="op" id="6734536">(</span><span class="ident" id="6734537">t</span>&nbsp;<span class="op" id="6734539">*</span><span class="ident" id="6734540">testing</span><span class="op" id="6734547">.</span><span class="ident" id="6734548">T</span><span class="op" id="6734549">)</span>&nbsp;<span class="op" id="6734551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734554">b</span>&nbsp;<span class="op" id="6734556">:=</span>&nbsp;<span class="builtinfunc" id="6734559">new</span><span class="op" id="6734562">(</span><span class="ident" id="6734563">bytes</span><span class="op" id="6734568">.</span><span class="ident" id="6734569">Buffer</span><span class="op" id="6734575">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734578">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734616">enc</span>&nbsp;<span class="op" id="6734620">:=</span>&nbsp;<span class="ident" id="6734623">NewEncoder</span><span class="op" id="6734633">(</span><span class="ident" id="6734634">b</span><span class="op" id="6734635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734638">err</span>&nbsp;<span class="op" id="6734642">:=</span>&nbsp;<span class="ident" id="6734645">enc</span><span class="op" id="6734648">.</span><span class="ident" id="6734649">Encode</span><span class="op" id="6734655">(</span><span class="op" id="6734656">&amp;</span><span class="ident" id="6734657">GobTestValueEncDec</span><span class="op" id="6734675">{</span><span class="num" id="6734676">17</span><span class="op" id="6734678">,</span>&nbsp;<span class="ident" id="6734680">StringStruct</span><span class="op" id="6734692">{</span><span class="string" id="6734693">&#34;HIJKL&#34;</span><span class="op" id="6734700">}</span><span class="op" id="6734701">}</span><span class="op" id="6734702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734705">if</span>&nbsp;<span class="ident" id="6734708">err</span>&nbsp;<span class="op" id="6734712">!=</span>&nbsp;<span class="ident" id="6734715">nil</span>&nbsp;<span class="op" id="6734719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734723">t</span><span class="op" id="6734724">.</span><span class="ident" id="6734725">Fatal</span><span class="op" id="6734730">(</span><span class="string" id="6734731">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6734746">,</span>&nbsp;<span class="ident" id="6734748">err</span><span class="op" id="6734751">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734757">dec</span>&nbsp;<span class="op" id="6734761">:=</span>&nbsp;<span class="ident" id="6734764">NewDecoder</span><span class="op" id="6734774">(</span><span class="ident" id="6734775">b</span><span class="op" id="6734776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734779">x</span>&nbsp;<span class="op" id="6734781">:=</span>&nbsp;<span class="builtinfunc" id="6734784">new</span><span class="op" id="6734787">(</span><span class="ident" id="6734788">GobTestValueEncDec</span><span class="op" id="6734806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734809">err</span>&nbsp;<span class="op" id="6734813">=</span>&nbsp;<span class="ident" id="6734815">dec</span><span class="op" id="6734818">.</span><span class="ident" id="6734819">Decode</span><span class="op" id="6734825">(</span><span class="ident" id="6734826">x</span><span class="op" id="6734827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734830">if</span>&nbsp;<span class="ident" id="6734833">err</span>&nbsp;<span class="op" id="6734837">!=</span>&nbsp;<span class="ident" id="6734840">nil</span>&nbsp;<span class="op" id="6734844">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734848">t</span><span class="op" id="6734849">.</span><span class="ident" id="6734850">Fatal</span><span class="op" id="6734855">(</span><span class="string" id="6734856">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6734871">,</span>&nbsp;<span class="ident" id="6734873">err</span><span class="op" id="6734876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734882">if</span>&nbsp;<span class="ident" id="6734885">x</span><span class="op" id="6734886">.</span><span class="ident" id="6734887">G</span><span class="op" id="6734888">.</span><span class="ident" id="6734889">s</span>&nbsp;<span class="op" id="6734891">!=</span>&nbsp;<span class="string" id="6734894">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="6734902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734906">t</span><span class="op" id="6734907">.</span><span class="ident" id="6734908">Errorf</span><span class="op" id="6734914">(</span><span class="string" id="6734915">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6734940">,</span>&nbsp;<span class="ident" id="6734942">x</span><span class="op" id="6734943">.</span><span class="ident" id="6734944">G</span><span class="op" id="6734945">.</span><span class="ident" id="6734946">s</span><span class="op" id="6734947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734950">}</span><br>
<span class="lineno">295</span><span class="op" id="6734952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6734955">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6735008">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="6735044">func</span>&nbsp;<span class="ident" id="6735049">TestGobEncoderIndirectField</span><span class="op" id="6735076">(</span><span class="ident" id="6735077">t</span>&nbsp;<span class="op" id="6735079">*</span><span class="ident" id="6735080">testing</span><span class="op" id="6735087">.</span><span class="ident" id="6735088">T</span><span class="op" id="6735089">)</span>&nbsp;<span class="op" id="6735091">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735094">b</span>&nbsp;<span class="op" id="6735096">:=</span>&nbsp;<span class="builtinfunc" id="6735099">new</span><span class="op" id="6735102">(</span><span class="ident" id="6735103">bytes</span><span class="op" id="6735108">.</span><span class="ident" id="6735109">Buffer</span><span class="op" id="6735115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735118">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735156">enc</span>&nbsp;<span class="op" id="6735160">:=</span>&nbsp;<span class="ident" id="6735163">NewEncoder</span><span class="op" id="6735173">(</span><span class="ident" id="6735174">b</span><span class="op" id="6735175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735178">s</span>&nbsp;<span class="op" id="6735180">:=</span>&nbsp;<span class="op" id="6735183">&amp;</span><span class="ident" id="6735184">StringStruct</span><span class="op" id="6735196">{</span><span class="string" id="6735197">&#34;HIJKL&#34;</span><span class="op" id="6735204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735207">sp</span>&nbsp;<span class="op" id="6735210">:=</span>&nbsp;<span class="op" id="6735213">&amp;</span><span class="ident" id="6735214">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735217">err</span>&nbsp;<span class="op" id="6735221">:=</span>&nbsp;<span class="ident" id="6735224">enc</span><span class="op" id="6735227">.</span><span class="ident" id="6735228">Encode</span><span class="op" id="6735234">(</span><span class="ident" id="6735235">GobTestIndirectEncDec</span><span class="op" id="6735256">{</span><span class="num" id="6735257">17</span><span class="op" id="6735259">,</span>&nbsp;<span class="op" id="6735261">&amp;</span><span class="ident" id="6735262">sp</span><span class="op" id="6735264">}</span><span class="op" id="6735265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735268">if</span>&nbsp;<span class="ident" id="6735271">err</span>&nbsp;<span class="op" id="6735275">!=</span>&nbsp;<span class="ident" id="6735278">nil</span>&nbsp;<span class="op" id="6735282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735286">t</span><span class="op" id="6735287">.</span><span class="ident" id="6735288">Fatal</span><span class="op" id="6735293">(</span><span class="string" id="6735294">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6735309">,</span>&nbsp;<span class="ident" id="6735311">err</span><span class="op" id="6735314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735320">dec</span>&nbsp;<span class="op" id="6735324">:=</span>&nbsp;<span class="ident" id="6735327">NewDecoder</span><span class="op" id="6735337">(</span><span class="ident" id="6735338">b</span><span class="op" id="6735339">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735342">x</span>&nbsp;<span class="op" id="6735344">:=</span>&nbsp;<span class="builtinfunc" id="6735347">new</span><span class="op" id="6735350">(</span><span class="ident" id="6735351">GobTestIndirectEncDec</span><span class="op" id="6735372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735375">err</span>&nbsp;<span class="op" id="6735379">=</span>&nbsp;<span class="ident" id="6735381">dec</span><span class="op" id="6735384">.</span><span class="ident" id="6735385">Decode</span><span class="op" id="6735391">(</span><span class="ident" id="6735392">x</span><span class="op" id="6735393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735396">if</span>&nbsp;<span class="ident" id="6735399">err</span>&nbsp;<span class="op" id="6735403">!=</span>&nbsp;<span class="ident" id="6735406">nil</span>&nbsp;<span class="op" id="6735410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735414">t</span><span class="op" id="6735415">.</span><span class="ident" id="6735416">Fatal</span><span class="op" id="6735421">(</span><span class="string" id="6735422">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6735437">,</span>&nbsp;<span class="ident" id="6735439">err</span><span class="op" id="6735442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735445">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735448">if</span>&nbsp;<span class="op" id="6735451">(</span><span class="op" id="6735452">*</span><span class="op" id="6735453">*</span><span class="op" id="6735454">*</span><span class="ident" id="6735455">x</span><span class="op" id="6735456">.</span><span class="ident" id="6735457">G</span><span class="op" id="6735458">)</span><span class="op" id="6735459">.</span><span class="ident" id="6735460">s</span>&nbsp;<span class="op" id="6735462">!=</span>&nbsp;<span class="string" id="6735465">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="6735473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735477">t</span><span class="op" id="6735478">.</span><span class="ident" id="6735479">Errorf</span><span class="op" id="6735485">(</span><span class="string" id="6735486">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6735511">,</span>&nbsp;<span class="op" id="6735513">(</span><span class="op" id="6735514">*</span><span class="op" id="6735515">*</span><span class="op" id="6735516">*</span><span class="ident" id="6735517">x</span><span class="op" id="6735518">.</span><span class="ident" id="6735519">G</span><span class="op" id="6735520">)</span><span class="op" id="6735521">.</span><span class="ident" id="6735522">s</span><span class="op" id="6735523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735526">}</span><br>
<span class="lineno"></span><span class="op" id="6735528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="6735531">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6735572">func</span>&nbsp;<span class="ident" id="6735577">TestGobEncoderArrayField</span><span class="op" id="6735601">(</span><span class="ident" id="6735602">t</span>&nbsp;<span class="op" id="6735604">*</span><span class="ident" id="6735605">testing</span><span class="op" id="6735612">.</span><span class="ident" id="6735613">T</span><span class="op" id="6735614">)</span>&nbsp;<span class="op" id="6735616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735619">b</span>&nbsp;<span class="op" id="6735621">:=</span>&nbsp;<span class="builtinfunc" id="6735624">new</span><span class="op" id="6735627">(</span><span class="ident" id="6735628">bytes</span><span class="op" id="6735633">.</span><span class="ident" id="6735634">Buffer</span><span class="op" id="6735640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735643">enc</span>&nbsp;<span class="op" id="6735647">:=</span>&nbsp;<span class="ident" id="6735650">NewEncoder</span><span class="op" id="6735660">(</span><span class="ident" id="6735661">b</span><span class="op" id="6735662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735665">var</span>&nbsp;<span class="ident" id="6735669">a</span>&nbsp;<span class="ident" id="6735671">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735691">a</span><span class="op" id="6735692">.</span><span class="ident" id="6735693">X</span>&nbsp;<span class="op" id="6735695">=</span>&nbsp;<span class="num" id="6735697">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735701">for</span>&nbsp;<span class="ident" id="6735705">i</span>&nbsp;<span class="op" id="6735707">:=</span>&nbsp;<span class="keyword" id="6735710">range</span>&nbsp;<span class="ident" id="6735716">a</span><span class="op" id="6735717">.</span><span class="ident" id="6735718">A</span><span class="op" id="6735719">.</span><span class="ident" id="6735720">a</span>&nbsp;<span class="op" id="6735722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735726">a</span><span class="op" id="6735727">.</span><span class="ident" id="6735728">A</span><span class="op" id="6735729">.</span><span class="ident" id="6735730">a</span><span class="op" id="6735731">[</span><span class="ident" id="6735732">i</span><span class="op" id="6735733">]</span>&nbsp;<span class="op" id="6735735">=</span>&nbsp;<span class="builtintype" id="6735737">byte</span><span class="op" id="6735741">(</span><span class="ident" id="6735742">i</span><span class="op" id="6735743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735749">err</span>&nbsp;<span class="op" id="6735753">:=</span>&nbsp;<span class="ident" id="6735756">enc</span><span class="op" id="6735759">.</span><span class="ident" id="6735760">Encode</span><span class="op" id="6735766">(</span><span class="op" id="6735767">&amp;</span><span class="ident" id="6735768">a</span><span class="op" id="6735769">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735772">if</span>&nbsp;<span class="ident" id="6735775">err</span>&nbsp;<span class="op" id="6735779">!=</span>&nbsp;<span class="ident" id="6735782">nil</span>&nbsp;<span class="op" id="6735786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735790">t</span><span class="op" id="6735791">.</span><span class="ident" id="6735792">Fatal</span><span class="op" id="6735797">(</span><span class="string" id="6735798">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6735813">,</span>&nbsp;<span class="ident" id="6735815">err</span><span class="op" id="6735818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735824">dec</span>&nbsp;<span class="op" id="6735828">:=</span>&nbsp;<span class="ident" id="6735831">NewDecoder</span><span class="op" id="6735841">(</span><span class="ident" id="6735842">b</span><span class="op" id="6735843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735846">x</span>&nbsp;<span class="op" id="6735848">:=</span>&nbsp;<span class="builtinfunc" id="6735851">new</span><span class="op" id="6735854">(</span><span class="ident" id="6735855">GobTestArrayEncDec</span><span class="op" id="6735873">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735876">err</span>&nbsp;<span class="op" id="6735880">=</span>&nbsp;<span class="ident" id="6735882">dec</span><span class="op" id="6735885">.</span><span class="ident" id="6735886">Decode</span><span class="op" id="6735892">(</span><span class="ident" id="6735893">x</span><span class="op" id="6735894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735897">if</span>&nbsp;<span class="ident" id="6735900">err</span>&nbsp;<span class="op" id="6735904">!=</span>&nbsp;<span class="ident" id="6735907">nil</span>&nbsp;<span class="op" id="6735911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735915">t</span><span class="op" id="6735916">.</span><span class="ident" id="6735917">Fatal</span><span class="op" id="6735922">(</span><span class="string" id="6735923">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6735938">,</span>&nbsp;<span class="ident" id="6735940">err</span><span class="op" id="6735943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6735946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735949">for</span>&nbsp;<span class="ident" id="6735953">i</span><span class="op" id="6735954">,</span>&nbsp;<span class="ident" id="6735956">v</span>&nbsp;<span class="op" id="6735958">:=</span>&nbsp;<span class="keyword" id="6735961">range</span>&nbsp;<span class="ident" id="6735967">x</span><span class="op" id="6735968">.</span><span class="ident" id="6735969">A</span><span class="op" id="6735970">.</span><span class="ident" id="6735971">a</span>&nbsp;<span class="op" id="6735973">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735977">if</span>&nbsp;<span class="ident" id="6735980">v</span>&nbsp;<span class="op" id="6735982">!=</span>&nbsp;<span class="builtintype" id="6735985">byte</span><span class="op" id="6735989">(</span><span class="ident" id="6735990">i</span><span class="op" id="6735991">)</span>&nbsp;<span class="op" id="6735993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735998">t</span><span class="op" id="6735999">.</span><span class="ident" id="6736000">Errorf</span><span class="op" id="6736006">(</span><span class="string" id="6736007">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="6736027">,</span>&nbsp;<span class="builtintype" id="6736029">byte</span><span class="op" id="6736033">(</span><span class="ident" id="6736034">i</span><span class="op" id="6736035">)</span><span class="op" id="6736036">,</span>&nbsp;<span class="ident" id="6736038">v</span><span class="op" id="6736039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736044">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736055">}</span><br>
<span class="lineno">345</span><span class="op" id="6736057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6736060">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6736114">func</span>&nbsp;<span class="ident" id="6736119">TestGobEncoderIndirectArrayField</span><span class="op" id="6736151">(</span><span class="ident" id="6736152">t</span>&nbsp;<span class="op" id="6736154">*</span><span class="ident" id="6736155">testing</span><span class="op" id="6736162">.</span><span class="ident" id="6736163">T</span><span class="op" id="6736164">)</span>&nbsp;<span class="op" id="6736166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736169">b</span>&nbsp;<span class="op" id="6736171">:=</span>&nbsp;<span class="builtinfunc" id="6736174">new</span><span class="op" id="6736177">(</span><span class="ident" id="6736178">bytes</span><span class="op" id="6736183">.</span><span class="ident" id="6736184">Buffer</span><span class="op" id="6736190">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736193">enc</span>&nbsp;<span class="op" id="6736197">:=</span>&nbsp;<span class="ident" id="6736200">NewEncoder</span><span class="op" id="6736210">(</span><span class="ident" id="6736211">b</span><span class="op" id="6736212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736215">var</span>&nbsp;<span class="ident" id="6736219">a</span>&nbsp;<span class="ident" id="6736221">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736249">a</span><span class="op" id="6736250">.</span><span class="ident" id="6736251">X</span>&nbsp;<span class="op" id="6736253">=</span>&nbsp;<span class="num" id="6736255">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736259">var</span>&nbsp;<span class="ident" id="6736263">array</span>&nbsp;<span class="ident" id="6736269">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736282">ap</span>&nbsp;<span class="op" id="6736285">:=</span>&nbsp;<span class="op" id="6736288">&amp;</span><span class="ident" id="6736289">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736296">app</span>&nbsp;<span class="op" id="6736300">:=</span>&nbsp;<span class="op" id="6736303">&amp;</span><span class="ident" id="6736304">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736308">a</span><span class="op" id="6736309">.</span><span class="ident" id="6736310">A</span>&nbsp;<span class="op" id="6736312">=</span>&nbsp;<span class="op" id="6736314">&amp;</span><span class="ident" id="6736315">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736320">for</span>&nbsp;<span class="ident" id="6736324">i</span>&nbsp;<span class="op" id="6736326">:=</span>&nbsp;<span class="keyword" id="6736329">range</span>&nbsp;<span class="ident" id="6736335">array</span><span class="op" id="6736340">.</span><span class="ident" id="6736341">a</span>&nbsp;<span class="op" id="6736343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736347">array</span><span class="op" id="6736352">.</span><span class="ident" id="6736353">a</span><span class="op" id="6736354">[</span><span class="ident" id="6736355">i</span><span class="op" id="6736356">]</span>&nbsp;<span class="op" id="6736358">=</span>&nbsp;<span class="builtintype" id="6736360">byte</span><span class="op" id="6736364">(</span><span class="ident" id="6736365">i</span><span class="op" id="6736366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736369">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736372">err</span>&nbsp;<span class="op" id="6736376">:=</span>&nbsp;<span class="ident" id="6736379">enc</span><span class="op" id="6736382">.</span><span class="ident" id="6736383">Encode</span><span class="op" id="6736389">(</span><span class="ident" id="6736390">a</span><span class="op" id="6736391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736394">if</span>&nbsp;<span class="ident" id="6736397">err</span>&nbsp;<span class="op" id="6736401">!=</span>&nbsp;<span class="ident" id="6736404">nil</span>&nbsp;<span class="op" id="6736408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736412">t</span><span class="op" id="6736413">.</span><span class="ident" id="6736414">Fatal</span><span class="op" id="6736419">(</span><span class="string" id="6736420">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6736435">,</span>&nbsp;<span class="ident" id="6736437">err</span><span class="op" id="6736440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736446">dec</span>&nbsp;<span class="op" id="6736450">:=</span>&nbsp;<span class="ident" id="6736453">NewDecoder</span><span class="op" id="6736463">(</span><span class="ident" id="6736464">b</span><span class="op" id="6736465">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736468">x</span>&nbsp;<span class="op" id="6736470">:=</span>&nbsp;<span class="builtinfunc" id="6736473">new</span><span class="op" id="6736476">(</span><span class="ident" id="6736477">GobTestIndirectArrayEncDec</span><span class="op" id="6736503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736506">err</span>&nbsp;<span class="op" id="6736510">=</span>&nbsp;<span class="ident" id="6736512">dec</span><span class="op" id="6736515">.</span><span class="ident" id="6736516">Decode</span><span class="op" id="6736522">(</span><span class="ident" id="6736523">x</span><span class="op" id="6736524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736527">if</span>&nbsp;<span class="ident" id="6736530">err</span>&nbsp;<span class="op" id="6736534">!=</span>&nbsp;<span class="ident" id="6736537">nil</span>&nbsp;<span class="op" id="6736541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736545">t</span><span class="op" id="6736546">.</span><span class="ident" id="6736547">Fatal</span><span class="op" id="6736552">(</span><span class="string" id="6736553">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6736568">,</span>&nbsp;<span class="ident" id="6736570">err</span><span class="op" id="6736573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736576">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736579">for</span>&nbsp;<span class="ident" id="6736583">i</span><span class="op" id="6736584">,</span>&nbsp;<span class="ident" id="6736586">v</span>&nbsp;<span class="op" id="6736588">:=</span>&nbsp;<span class="keyword" id="6736591">range</span>&nbsp;<span class="op" id="6736597">(</span><span class="op" id="6736598">*</span><span class="op" id="6736599">*</span><span class="op" id="6736600">*</span><span class="ident" id="6736601">x</span><span class="op" id="6736602">.</span><span class="ident" id="6736603">A</span><span class="op" id="6736604">)</span><span class="op" id="6736605">.</span><span class="ident" id="6736606">a</span>&nbsp;<span class="op" id="6736608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736612">if</span>&nbsp;<span class="ident" id="6736615">v</span>&nbsp;<span class="op" id="6736617">!=</span>&nbsp;<span class="builtintype" id="6736620">byte</span><span class="op" id="6736624">(</span><span class="ident" id="6736625">i</span><span class="op" id="6736626">)</span>&nbsp;<span class="op" id="6736628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736633">t</span><span class="op" id="6736634">.</span><span class="ident" id="6736635">Errorf</span><span class="op" id="6736641">(</span><span class="string" id="6736642">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="6736662">,</span>&nbsp;<span class="builtintype" id="6736664">byte</span><span class="op" id="6736668">(</span><span class="ident" id="6736669">i</span><span class="op" id="6736670">)</span><span class="op" id="6736671">,</span>&nbsp;<span class="ident" id="6736673">v</span><span class="op" id="6736674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736679">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736687">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736690">}</span><br>
<span class="lineno"></span><span class="op" id="6736692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6736695">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6736757">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="6736820">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="6736881">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="6736941">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="6736964">func</span>&nbsp;<span class="ident" id="6736969">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="6737004">(</span><span class="ident" id="6737005">t</span>&nbsp;<span class="op" id="6737007">*</span><span class="ident" id="6737008">testing</span><span class="op" id="6737015">.</span><span class="ident" id="6737016">T</span><span class="op" id="6737017">)</span>&nbsp;<span class="op" id="6737019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737022">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737066">b</span>&nbsp;<span class="op" id="6737068">:=</span>&nbsp;<span class="builtinfunc" id="6737071">new</span><span class="op" id="6737074">(</span><span class="ident" id="6737075">bytes</span><span class="op" id="6737080">.</span><span class="ident" id="6737081">Buffer</span><span class="op" id="6737087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737090">enc</span>&nbsp;<span class="op" id="6737094">:=</span>&nbsp;<span class="ident" id="6737097">NewEncoder</span><span class="op" id="6737107">(</span><span class="ident" id="6737108">b</span><span class="op" id="6737109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737112">err</span>&nbsp;<span class="op" id="6737116">:=</span>&nbsp;<span class="ident" id="6737119">enc</span><span class="op" id="6737122">.</span><span class="ident" id="6737123">Encode</span><span class="op" id="6737129">(</span><span class="ident" id="6737130">GobTest1</span><span class="op" id="6737138">{</span><span class="num" id="6737139">17</span><span class="op" id="6737141">,</span>&nbsp;<span class="op" id="6737143">&amp;</span><span class="ident" id="6737144">StringStruct</span><span class="op" id="6737156">{</span><span class="string" id="6737157">&#34;ABC&#34;</span><span class="op" id="6737162">}</span><span class="op" id="6737163">}</span><span class="op" id="6737164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737167">if</span>&nbsp;<span class="ident" id="6737170">err</span>&nbsp;<span class="op" id="6737174">!=</span>&nbsp;<span class="ident" id="6737177">nil</span>&nbsp;<span class="op" id="6737181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737185">t</span><span class="op" id="6737186">.</span><span class="ident" id="6737187">Fatal</span><span class="op" id="6737192">(</span><span class="string" id="6737193">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6737208">,</span>&nbsp;<span class="ident" id="6737210">err</span><span class="op" id="6737213">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737219">dec</span>&nbsp;<span class="op" id="6737223">:=</span>&nbsp;<span class="ident" id="6737226">NewDecoder</span><span class="op" id="6737236">(</span><span class="ident" id="6737237">b</span><span class="op" id="6737238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737241">x</span>&nbsp;<span class="op" id="6737243">:=</span>&nbsp;<span class="builtinfunc" id="6737246">new</span><span class="op" id="6737249">(</span><span class="ident" id="6737250">GobTest0</span><span class="op" id="6737258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737261">err</span>&nbsp;<span class="op" id="6737265">=</span>&nbsp;<span class="ident" id="6737267">dec</span><span class="op" id="6737270">.</span><span class="ident" id="6737271">Decode</span><span class="op" id="6737277">(</span><span class="ident" id="6737278">x</span><span class="op" id="6737279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737282">if</span>&nbsp;<span class="ident" id="6737285">err</span>&nbsp;<span class="op" id="6737289">!=</span>&nbsp;<span class="ident" id="6737292">nil</span>&nbsp;<span class="op" id="6737296">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737300">t</span><span class="op" id="6737301">.</span><span class="ident" id="6737302">Fatal</span><span class="op" id="6737307">(</span><span class="string" id="6737308">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6737323">,</span>&nbsp;<span class="ident" id="6737325">err</span><span class="op" id="6737328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737334">if</span>&nbsp;<span class="ident" id="6737337">x</span><span class="op" id="6737338">.</span><span class="ident" id="6737339">G</span><span class="op" id="6737340">.</span><span class="ident" id="6737341">a</span>&nbsp;<span class="op" id="6737343">!=</span>&nbsp;<span class="string" id="6737346">&#39;A&#39;</span>&nbsp;<span class="op" id="6737350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737354">t</span><span class="op" id="6737355">.</span><span class="ident" id="6737356">Errorf</span><span class="op" id="6737362">(</span><span class="string" id="6737363">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6737384">,</span>&nbsp;<span class="ident" id="6737386">x</span><span class="op" id="6737387">.</span><span class="ident" id="6737388">G</span><span class="op" id="6737389">.</span><span class="ident" id="6737390">a</span><span class="op" id="6737391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737394">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737397">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737459">b</span><span class="op" id="6737460">.</span><span class="ident" id="6737461">Reset</span><span class="op" id="6737466">(</span><span class="op" id="6737467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737470">err</span>&nbsp;<span class="op" id="6737474">=</span>&nbsp;<span class="ident" id="6737476">enc</span><span class="op" id="6737479">.</span><span class="ident" id="6737480">Encode</span><span class="op" id="6737486">(</span><span class="ident" id="6737487">GobTest0</span><span class="op" id="6737495">{</span><span class="num" id="6737496">17</span><span class="op" id="6737498">,</span>&nbsp;<span class="op" id="6737500">&amp;</span><span class="ident" id="6737501">ByteStruct</span><span class="op" id="6737511">{</span><span class="string" id="6737512">&#39;X&#39;</span><span class="op" id="6737515">}</span><span class="op" id="6737516">}</span><span class="op" id="6737517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737520">if</span>&nbsp;<span class="ident" id="6737523">err</span>&nbsp;<span class="op" id="6737527">!=</span>&nbsp;<span class="ident" id="6737530">nil</span>&nbsp;<span class="op" id="6737534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737538">t</span><span class="op" id="6737539">.</span><span class="ident" id="6737540">Fatal</span><span class="op" id="6737545">(</span><span class="string" id="6737546">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6737561">,</span>&nbsp;<span class="ident" id="6737563">err</span><span class="op" id="6737566">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737572">y</span>&nbsp;<span class="op" id="6737574">:=</span>&nbsp;<span class="builtinfunc" id="6737577">new</span><span class="op" id="6737580">(</span><span class="ident" id="6737581">GobTest1</span><span class="op" id="6737589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737592">err</span>&nbsp;<span class="op" id="6737596">=</span>&nbsp;<span class="ident" id="6737598">dec</span><span class="op" id="6737601">.</span><span class="ident" id="6737602">Decode</span><span class="op" id="6737608">(</span><span class="ident" id="6737609">y</span><span class="op" id="6737610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737613">if</span>&nbsp;<span class="ident" id="6737616">err</span>&nbsp;<span class="op" id="6737620">!=</span>&nbsp;<span class="ident" id="6737623">nil</span>&nbsp;<span class="op" id="6737627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737631">t</span><span class="op" id="6737632">.</span><span class="ident" id="6737633">Fatal</span><span class="op" id="6737638">(</span><span class="string" id="6737639">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6737654">,</span>&nbsp;<span class="ident" id="6737656">err</span><span class="op" id="6737659">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737665">if</span>&nbsp;<span class="ident" id="6737668">y</span><span class="op" id="6737669">.</span><span class="ident" id="6737670">G</span><span class="op" id="6737671">.</span><span class="ident" id="6737672">s</span>&nbsp;<span class="op" id="6737674">!=</span>&nbsp;<span class="string" id="6737677">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="6737683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737687">t</span><span class="op" id="6737688">.</span><span class="ident" id="6737689">Fatalf</span><span class="op" id="6737695">(</span><span class="string" id="6737696">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6737719">,</span>&nbsp;<span class="ident" id="6737721">y</span><span class="op" id="6737722">.</span><span class="ident" id="6737723">G</span><span class="op" id="6737724">.</span><span class="ident" id="6737725">s</span><span class="op" id="6737726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737729">}</span><br>
<span class="lineno"></span><span class="op" id="6737731">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="6737734">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="6737796">func</span>&nbsp;<span class="ident" id="6737801">TestGobEncoderValueEncoder</span><span class="op" id="6737827">(</span><span class="ident" id="6737828">t</span>&nbsp;<span class="op" id="6737830">*</span><span class="ident" id="6737831">testing</span><span class="op" id="6737838">.</span><span class="ident" id="6737839">T</span><span class="op" id="6737840">)</span>&nbsp;<span class="op" id="6737842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6737845">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737889">b</span>&nbsp;<span class="op" id="6737891">:=</span>&nbsp;<span class="builtinfunc" id="6737894">new</span><span class="op" id="6737897">(</span><span class="ident" id="6737898">bytes</span><span class="op" id="6737903">.</span><span class="ident" id="6737904">Buffer</span><span class="op" id="6737910">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737913">enc</span>&nbsp;<span class="op" id="6737917">:=</span>&nbsp;<span class="ident" id="6737920">NewEncoder</span><span class="op" id="6737930">(</span><span class="ident" id="6737931">b</span><span class="op" id="6737932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737935">err</span>&nbsp;<span class="op" id="6737939">:=</span>&nbsp;<span class="ident" id="6737942">enc</span><span class="op" id="6737945">.</span><span class="ident" id="6737946">Encode</span><span class="op" id="6737952">(</span><span class="ident" id="6737953">GobTest4</span><span class="op" id="6737961">{</span><span class="num" id="6737962">17</span><span class="op" id="6737964">,</span>&nbsp;<span class="ident" id="6737966">ValueGobber</span><span class="op" id="6737977">(</span><span class="string" id="6737978">&#34;hello&#34;</span><span class="op" id="6737985">)</span><span class="op" id="6737986">,</span>&nbsp;<span class="ident" id="6737988">BinaryValueGobber</span><span class="op" id="6738005">(</span><span class="string" id="6738006">&#34;&#34;</span><span class="op" id="6738024">)</span><span class="op" id="6738025">,</span>&nbsp;<span class="ident" id="6738027">TextValueGobber</span><span class="op" id="6738042">(</span><span class="string" id="6738043">&#34;&#34;</span><span class="op" id="6738060">)</span><span class="op" id="6738061">}</span><span class="op" id="6738062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738065">if</span>&nbsp;<span class="ident" id="6738068">err</span>&nbsp;<span class="op" id="6738072">!=</span>&nbsp;<span class="ident" id="6738075">nil</span>&nbsp;<span class="op" id="6738079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738083">t</span><span class="op" id="6738084">.</span><span class="ident" id="6738085">Fatal</span><span class="op" id="6738090">(</span><span class="string" id="6738091">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6738106">,</span>&nbsp;<span class="ident" id="6738108">err</span><span class="op" id="6738111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738114">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738117">dec</span>&nbsp;<span class="op" id="6738121">:=</span>&nbsp;<span class="ident" id="6738124">NewDecoder</span><span class="op" id="6738134">(</span><span class="ident" id="6738135">b</span><span class="op" id="6738136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738139">x</span>&nbsp;<span class="op" id="6738141">:=</span>&nbsp;<span class="builtinfunc" id="6738144">new</span><span class="op" id="6738147">(</span><span class="ident" id="6738148">GobTest5</span><span class="op" id="6738156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738159">err</span>&nbsp;<span class="op" id="6738163">=</span>&nbsp;<span class="ident" id="6738165">dec</span><span class="op" id="6738168">.</span><span class="ident" id="6738169">Decode</span><span class="op" id="6738175">(</span><span class="ident" id="6738176">x</span><span class="op" id="6738177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738180">if</span>&nbsp;<span class="ident" id="6738183">err</span>&nbsp;<span class="op" id="6738187">!=</span>&nbsp;<span class="ident" id="6738190">nil</span>&nbsp;<span class="op" id="6738194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738198">t</span><span class="op" id="6738199">.</span><span class="ident" id="6738200">Fatal</span><span class="op" id="6738205">(</span><span class="string" id="6738206">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6738221">,</span>&nbsp;<span class="ident" id="6738223">err</span><span class="op" id="6738226">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738232">if</span>&nbsp;<span class="op" id="6738235">*</span><span class="ident" id="6738236">x</span><span class="op" id="6738237">.</span><span class="ident" id="6738238">V</span>&nbsp;<span class="op" id="6738240">!=</span>&nbsp;<span class="string" id="6738243">&#34;hello&#34;</span>&nbsp;<span class="op" id="6738251">||</span>&nbsp;<span class="op" id="6738254">*</span><span class="ident" id="6738255">x</span><span class="op" id="6738256">.</span><span class="ident" id="6738257">BV</span>&nbsp;<span class="op" id="6738260">!=</span>&nbsp;<span class="string" id="6738263">&#34;&#34;</span>&nbsp;<span class="op" id="6738282">||</span>&nbsp;<span class="op" id="6738285">*</span><span class="ident" id="6738286">x</span><span class="op" id="6738287">.</span><span class="ident" id="6738288">TV</span>&nbsp;<span class="op" id="6738291">!=</span>&nbsp;<span class="string" id="6738294">&#34;&#34;</span>&nbsp;<span class="op" id="6738312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738316">t</span><span class="op" id="6738317">.</span><span class="ident" id="6738318">Errorf</span><span class="op" id="6738324">(</span><span class="string" id="6738325">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6738350">,</span>&nbsp;<span class="op" id="6738352">*</span><span class="ident" id="6738353">x</span><span class="op" id="6738354">.</span><span class="ident" id="6738355">V</span><span class="op" id="6738356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738359">}</span><br>
<span class="lineno"></span><span class="op" id="6738361">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="6738364">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="6738432">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="6738473">func</span>&nbsp;<span class="ident" id="6738478">TestGobEncoderValueThenPointer</span><span class="op" id="6738508">(</span><span class="ident" id="6738509">t</span>&nbsp;<span class="op" id="6738511">*</span><span class="ident" id="6738512">testing</span><span class="op" id="6738519">.</span><span class="ident" id="6738520">T</span><span class="op" id="6738521">)</span>&nbsp;<span class="op" id="6738523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738526">v</span>&nbsp;<span class="op" id="6738528">:=</span>&nbsp;<span class="ident" id="6738531">ValueGobber</span><span class="op" id="6738542">(</span><span class="string" id="6738543">&#34;forty-two&#34;</span><span class="op" id="6738554">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738557">w</span>&nbsp;<span class="op" id="6738559">:=</span>&nbsp;<span class="ident" id="6738562">ValueGobber</span><span class="op" id="6738573">(</span><span class="string" id="6738574">&#34;six-by-nine&#34;</span><span class="op" id="6738587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738590">bv</span>&nbsp;<span class="op" id="6738593">:=</span>&nbsp;<span class="ident" id="6738596">BinaryValueGobber</span><span class="op" id="6738613">(</span><span class="string" id="6738614">&#34;1nanocentury&#34;</span><span class="op" id="6738628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738631">bw</span>&nbsp;<span class="op" id="6738634">:=</span>&nbsp;<span class="ident" id="6738637">BinaryValueGobber</span><span class="op" id="6738654">(</span><span class="string" id="6738655">&#34;seconds&#34;</span><span class="op" id="6738666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738669">tv</span>&nbsp;<span class="op" id="6738672">:=</span>&nbsp;<span class="ident" id="6738675">TextValueGobber</span><span class="op" id="6738690">(</span><span class="string" id="6738691">&#34;gravitationalacceleration&#34;</span><span class="op" id="6738718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738721">tw</span>&nbsp;<span class="op" id="6738724">:=</span>&nbsp;<span class="ident" id="6738727">TextValueGobber</span><span class="op" id="6738742">(</span><span class="string" id="6738743">&#34;ft/s&#34;</span><span class="op" id="6738755">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738759">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738830">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738894">b</span>&nbsp;<span class="op" id="6738896">:=</span>&nbsp;<span class="builtinfunc" id="6738899">new</span><span class="op" id="6738902">(</span><span class="ident" id="6738903">bytes</span><span class="op" id="6738908">.</span><span class="ident" id="6738909">Buffer</span><span class="op" id="6738915">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738918">enc</span>&nbsp;<span class="op" id="6738922">:=</span>&nbsp;<span class="ident" id="6738925">NewEncoder</span><span class="op" id="6738935">(</span><span class="ident" id="6738936">b</span><span class="op" id="6738937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738940">if</span>&nbsp;<span class="ident" id="6738943">err</span>&nbsp;<span class="op" id="6738947">:=</span>&nbsp;<span class="ident" id="6738950">enc</span><span class="op" id="6738953">.</span><span class="ident" id="6738954">Encode</span><span class="op" id="6738960">(</span><span class="ident" id="6738961">GobTest6</span><span class="op" id="6738969">{</span><span class="num" id="6738970">42</span><span class="op" id="6738972">,</span>&nbsp;<span class="ident" id="6738974">v</span><span class="op" id="6738975">,</span>&nbsp;<span class="op" id="6738977">&amp;</span><span class="ident" id="6738978">w</span><span class="op" id="6738979">,</span>&nbsp;<span class="ident" id="6738981">bv</span><span class="op" id="6738983">,</span>&nbsp;<span class="op" id="6738985">&amp;</span><span class="ident" id="6738986">bw</span><span class="op" id="6738988">,</span>&nbsp;<span class="ident" id="6738990">tv</span><span class="op" id="6738992">,</span>&nbsp;<span class="op" id="6738994">&amp;</span><span class="ident" id="6738995">tw</span><span class="op" id="6738997">}</span><span class="op" id="6738998">)</span><span class="op" id="6738999">;</span>&nbsp;<span class="ident" id="6739001">err</span>&nbsp;<span class="op" id="6739005">!=</span>&nbsp;<span class="ident" id="6739008">nil</span>&nbsp;<span class="op" id="6739012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739016">t</span><span class="op" id="6739017">.</span><span class="ident" id="6739018">Fatal</span><span class="op" id="6739023">(</span><span class="string" id="6739024">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6739039">,</span>&nbsp;<span class="ident" id="6739041">err</span><span class="op" id="6739044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739050">dec</span>&nbsp;<span class="op" id="6739054">:=</span>&nbsp;<span class="ident" id="6739057">NewDecoder</span><span class="op" id="6739067">(</span><span class="ident" id="6739068">b</span><span class="op" id="6739069">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739072">x</span>&nbsp;<span class="op" id="6739074">:=</span>&nbsp;<span class="builtinfunc" id="6739077">new</span><span class="op" id="6739080">(</span><span class="ident" id="6739081">GobTest6</span><span class="op" id="6739089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739092">if</span>&nbsp;<span class="ident" id="6739095">err</span>&nbsp;<span class="op" id="6739099">:=</span>&nbsp;<span class="ident" id="6739102">dec</span><span class="op" id="6739105">.</span><span class="ident" id="6739106">Decode</span><span class="op" id="6739112">(</span><span class="ident" id="6739113">x</span><span class="op" id="6739114">)</span><span class="op" id="6739115">;</span>&nbsp;<span class="ident" id="6739117">err</span>&nbsp;<span class="op" id="6739121">!=</span>&nbsp;<span class="ident" id="6739124">nil</span>&nbsp;<span class="op" id="6739128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739132">t</span><span class="op" id="6739133">.</span><span class="ident" id="6739134">Fatal</span><span class="op" id="6739139">(</span><span class="string" id="6739140">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6739155">,</span>&nbsp;<span class="ident" id="6739157">err</span><span class="op" id="6739160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739167">if</span>&nbsp;<span class="ident" id="6739170">got</span><span class="op" id="6739173">,</span>&nbsp;<span class="ident" id="6739175">want</span>&nbsp;<span class="op" id="6739180">:=</span>&nbsp;<span class="ident" id="6739183">x</span><span class="op" id="6739184">.</span><span class="ident" id="6739185">V</span><span class="op" id="6739186">,</span>&nbsp;<span class="ident" id="6739188">v</span><span class="op" id="6739189">;</span>&nbsp;<span class="ident" id="6739191">got</span>&nbsp;<span class="op" id="6739195">!=</span>&nbsp;<span class="ident" id="6739198">want</span>&nbsp;<span class="op" id="6739203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739207">t</span><span class="op" id="6739208">.</span><span class="ident" id="6739209">Errorf</span><span class="op" id="6739215">(</span><span class="string" id="6739216">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739233">,</span>&nbsp;<span class="ident" id="6739235">got</span><span class="op" id="6739238">,</span>&nbsp;<span class="ident" id="6739240">want</span><span class="op" id="6739244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739250">if</span>&nbsp;<span class="ident" id="6739253">got</span><span class="op" id="6739256">,</span>&nbsp;<span class="ident" id="6739258">want</span>&nbsp;<span class="op" id="6739263">:=</span>&nbsp;<span class="ident" id="6739266">x</span><span class="op" id="6739267">.</span><span class="ident" id="6739268">W</span><span class="op" id="6739269">,</span>&nbsp;<span class="ident" id="6739271">w</span><span class="op" id="6739272">;</span>&nbsp;<span class="ident" id="6739274">got</span>&nbsp;<span class="op" id="6739278">==</span>&nbsp;<span class="ident" id="6739281">nil</span>&nbsp;<span class="op" id="6739285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739289">t</span><span class="op" id="6739290">.</span><span class="ident" id="6739291">Errorf</span><span class="op" id="6739297">(</span><span class="string" id="6739298">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739316">,</span>&nbsp;<span class="ident" id="6739318">want</span><span class="op" id="6739322">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739325">}</span>&nbsp;<span class="keyword" id="6739327">else</span>&nbsp;<span class="keyword" id="6739332">if</span>&nbsp;<span class="op" id="6739335">*</span><span class="ident" id="6739336">got</span>&nbsp;<span class="op" id="6739340">!=</span>&nbsp;<span class="ident" id="6739343">want</span>&nbsp;<span class="op" id="6739348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739352">t</span><span class="op" id="6739353">.</span><span class="ident" id="6739354">Errorf</span><span class="op" id="6739360">(</span><span class="string" id="6739361">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739378">,</span>&nbsp;<span class="op" id="6739380">*</span><span class="ident" id="6739381">got</span><span class="op" id="6739384">,</span>&nbsp;<span class="ident" id="6739386">want</span><span class="op" id="6739390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739397">if</span>&nbsp;<span class="ident" id="6739400">got</span><span class="op" id="6739403">,</span>&nbsp;<span class="ident" id="6739405">want</span>&nbsp;<span class="op" id="6739410">:=</span>&nbsp;<span class="ident" id="6739413">x</span><span class="op" id="6739414">.</span><span class="ident" id="6739415">BV</span><span class="op" id="6739417">,</span>&nbsp;<span class="ident" id="6739419">bv</span><span class="op" id="6739421">;</span>&nbsp;<span class="ident" id="6739423">got</span>&nbsp;<span class="op" id="6739427">!=</span>&nbsp;<span class="ident" id="6739430">want</span>&nbsp;<span class="op" id="6739435">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739439">t</span><span class="op" id="6739440">.</span><span class="ident" id="6739441">Errorf</span><span class="op" id="6739447">(</span><span class="string" id="6739448">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739466">,</span>&nbsp;<span class="ident" id="6739468">got</span><span class="op" id="6739471">,</span>&nbsp;<span class="ident" id="6739473">want</span><span class="op" id="6739477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739483">if</span>&nbsp;<span class="ident" id="6739486">got</span><span class="op" id="6739489">,</span>&nbsp;<span class="ident" id="6739491">want</span>&nbsp;<span class="op" id="6739496">:=</span>&nbsp;<span class="ident" id="6739499">x</span><span class="op" id="6739500">.</span><span class="ident" id="6739501">BW</span><span class="op" id="6739503">,</span>&nbsp;<span class="ident" id="6739505">bw</span><span class="op" id="6739507">;</span>&nbsp;<span class="ident" id="6739509">got</span>&nbsp;<span class="op" id="6739513">==</span>&nbsp;<span class="ident" id="6739516">nil</span>&nbsp;<span class="op" id="6739520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739524">t</span><span class="op" id="6739525">.</span><span class="ident" id="6739526">Errorf</span><span class="op" id="6739532">(</span><span class="string" id="6739533">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739552">,</span>&nbsp;<span class="ident" id="6739554">want</span><span class="op" id="6739558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739561">}</span>&nbsp;<span class="keyword" id="6739563">else</span>&nbsp;<span class="keyword" id="6739568">if</span>&nbsp;<span class="op" id="6739571">*</span><span class="ident" id="6739572">got</span>&nbsp;<span class="op" id="6739576">!=</span>&nbsp;<span class="ident" id="6739579">want</span>&nbsp;<span class="op" id="6739584">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739588">t</span><span class="op" id="6739589">.</span><span class="ident" id="6739590">Errorf</span><span class="op" id="6739596">(</span><span class="string" id="6739597">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739615">,</span>&nbsp;<span class="op" id="6739617">*</span><span class="ident" id="6739618">got</span><span class="op" id="6739621">,</span>&nbsp;<span class="ident" id="6739623">want</span><span class="op" id="6739627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739634">if</span>&nbsp;<span class="ident" id="6739637">got</span><span class="op" id="6739640">,</span>&nbsp;<span class="ident" id="6739642">want</span>&nbsp;<span class="op" id="6739647">:=</span>&nbsp;<span class="ident" id="6739650">x</span><span class="op" id="6739651">.</span><span class="ident" id="6739652">TV</span><span class="op" id="6739654">,</span>&nbsp;<span class="ident" id="6739656">tv</span><span class="op" id="6739658">;</span>&nbsp;<span class="ident" id="6739660">got</span>&nbsp;<span class="op" id="6739664">!=</span>&nbsp;<span class="ident" id="6739667">want</span>&nbsp;<span class="op" id="6739672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739676">t</span><span class="op" id="6739677">.</span><span class="ident" id="6739678">Errorf</span><span class="op" id="6739684">(</span><span class="string" id="6739685">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739703">,</span>&nbsp;<span class="ident" id="6739705">got</span><span class="op" id="6739708">,</span>&nbsp;<span class="ident" id="6739710">want</span><span class="op" id="6739714">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739720">if</span>&nbsp;<span class="ident" id="6739723">got</span><span class="op" id="6739726">,</span>&nbsp;<span class="ident" id="6739728">want</span>&nbsp;<span class="op" id="6739733">:=</span>&nbsp;<span class="ident" id="6739736">x</span><span class="op" id="6739737">.</span><span class="ident" id="6739738">TW</span><span class="op" id="6739740">,</span>&nbsp;<span class="ident" id="6739742">tw</span><span class="op" id="6739744">;</span>&nbsp;<span class="ident" id="6739746">got</span>&nbsp;<span class="op" id="6739750">==</span>&nbsp;<span class="ident" id="6739753">nil</span>&nbsp;<span class="op" id="6739757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739761">t</span><span class="op" id="6739762">.</span><span class="ident" id="6739763">Errorf</span><span class="op" id="6739769">(</span><span class="string" id="6739770">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739789">,</span>&nbsp;<span class="ident" id="6739791">want</span><span class="op" id="6739795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739798">}</span>&nbsp;<span class="keyword" id="6739800">else</span>&nbsp;<span class="keyword" id="6739805">if</span>&nbsp;<span class="op" id="6739808">*</span><span class="ident" id="6739809">got</span>&nbsp;<span class="op" id="6739813">!=</span>&nbsp;<span class="ident" id="6739816">want</span>&nbsp;<span class="op" id="6739821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739825">t</span><span class="op" id="6739826">.</span><span class="ident" id="6739827">Errorf</span><span class="op" id="6739833">(</span><span class="string" id="6739834">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6739852">,</span>&nbsp;<span class="op" id="6739854">*</span><span class="ident" id="6739855">got</span><span class="op" id="6739858">,</span>&nbsp;<span class="ident" id="6739860">want</span><span class="op" id="6739864">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739867">}</span><br>
<span class="lineno"></span><span class="op" id="6739869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6739872">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="6739940">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="6739970">func</span>&nbsp;<span class="ident" id="6739975">TestGobEncoderPointerThenValue</span><span class="op" id="6740005">(</span><span class="ident" id="6740006">t</span>&nbsp;<span class="op" id="6740008">*</span><span class="ident" id="6740009">testing</span><span class="op" id="6740016">.</span><span class="ident" id="6740017">T</span><span class="op" id="6740018">)</span>&nbsp;<span class="op" id="6740020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740023">v</span>&nbsp;<span class="op" id="6740025">:=</span>&nbsp;<span class="ident" id="6740028">ValueGobber</span><span class="op" id="6740039">(</span><span class="string" id="6740040">&#34;forty-two&#34;</span><span class="op" id="6740051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740054">w</span>&nbsp;<span class="op" id="6740056">:=</span>&nbsp;<span class="ident" id="6740059">ValueGobber</span><span class="op" id="6740070">(</span><span class="string" id="6740071">&#34;six-by-nine&#34;</span><span class="op" id="6740084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740087">bv</span>&nbsp;<span class="op" id="6740090">:=</span>&nbsp;<span class="ident" id="6740093">BinaryValueGobber</span><span class="op" id="6740110">(</span><span class="string" id="6740111">&#34;1nanocentury&#34;</span><span class="op" id="6740125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740128">bw</span>&nbsp;<span class="op" id="6740131">:=</span>&nbsp;<span class="ident" id="6740134">BinaryValueGobber</span><span class="op" id="6740151">(</span><span class="string" id="6740152">&#34;seconds&#34;</span><span class="op" id="6740163">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740166">tv</span>&nbsp;<span class="op" id="6740169">:=</span>&nbsp;<span class="ident" id="6740172">TextValueGobber</span><span class="op" id="6740187">(</span><span class="string" id="6740188">&#34;gravitationalacceleration&#34;</span><span class="op" id="6740215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740218">tw</span>&nbsp;<span class="op" id="6740221">:=</span>&nbsp;<span class="ident" id="6740224">TextValueGobber</span><span class="op" id="6740239">(</span><span class="string" id="6740240">&#34;ft/s&#34;</span><span class="op" id="6740252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740256">b</span>&nbsp;<span class="op" id="6740258">:=</span>&nbsp;<span class="builtinfunc" id="6740261">new</span><span class="op" id="6740264">(</span><span class="ident" id="6740265">bytes</span><span class="op" id="6740270">.</span><span class="ident" id="6740271">Buffer</span><span class="op" id="6740277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740280">enc</span>&nbsp;<span class="op" id="6740284">:=</span>&nbsp;<span class="ident" id="6740287">NewEncoder</span><span class="op" id="6740297">(</span><span class="ident" id="6740298">b</span><span class="op" id="6740299">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740302">if</span>&nbsp;<span class="ident" id="6740305">err</span>&nbsp;<span class="op" id="6740309">:=</span>&nbsp;<span class="ident" id="6740312">enc</span><span class="op" id="6740315">.</span><span class="ident" id="6740316">Encode</span><span class="op" id="6740322">(</span><span class="ident" id="6740323">GobTest7</span><span class="op" id="6740331">{</span><span class="num" id="6740332">42</span><span class="op" id="6740334">,</span>&nbsp;<span class="op" id="6740336">&amp;</span><span class="ident" id="6740337">v</span><span class="op" id="6740338">,</span>&nbsp;<span class="ident" id="6740340">w</span><span class="op" id="6740341">,</span>&nbsp;<span class="op" id="6740343">&amp;</span><span class="ident" id="6740344">bv</span><span class="op" id="6740346">,</span>&nbsp;<span class="ident" id="6740348">bw</span><span class="op" id="6740350">,</span>&nbsp;<span class="op" id="6740352">&amp;</span><span class="ident" id="6740353">tv</span><span class="op" id="6740355">,</span>&nbsp;<span class="ident" id="6740357">tw</span><span class="op" id="6740359">}</span><span class="op" id="6740360">)</span><span class="op" id="6740361">;</span>&nbsp;<span class="ident" id="6740363">err</span>&nbsp;<span class="op" id="6740367">!=</span>&nbsp;<span class="ident" id="6740370">nil</span>&nbsp;<span class="op" id="6740374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740378">t</span><span class="op" id="6740379">.</span><span class="ident" id="6740380">Fatal</span><span class="op" id="6740385">(</span><span class="string" id="6740386">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6740401">,</span>&nbsp;<span class="ident" id="6740403">err</span><span class="op" id="6740406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740412">dec</span>&nbsp;<span class="op" id="6740416">:=</span>&nbsp;<span class="ident" id="6740419">NewDecoder</span><span class="op" id="6740429">(</span><span class="ident" id="6740430">b</span><span class="op" id="6740431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740434">x</span>&nbsp;<span class="op" id="6740436">:=</span>&nbsp;<span class="builtinfunc" id="6740439">new</span><span class="op" id="6740442">(</span><span class="ident" id="6740443">GobTest7</span><span class="op" id="6740451">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740454">if</span>&nbsp;<span class="ident" id="6740457">err</span>&nbsp;<span class="op" id="6740461">:=</span>&nbsp;<span class="ident" id="6740464">dec</span><span class="op" id="6740467">.</span><span class="ident" id="6740468">Decode</span><span class="op" id="6740474">(</span><span class="ident" id="6740475">x</span><span class="op" id="6740476">)</span><span class="op" id="6740477">;</span>&nbsp;<span class="ident" id="6740479">err</span>&nbsp;<span class="op" id="6740483">!=</span>&nbsp;<span class="ident" id="6740486">nil</span>&nbsp;<span class="op" id="6740490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740494">t</span><span class="op" id="6740495">.</span><span class="ident" id="6740496">Fatal</span><span class="op" id="6740501">(</span><span class="string" id="6740502">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6740517">,</span>&nbsp;<span class="ident" id="6740519">err</span><span class="op" id="6740522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740529">if</span>&nbsp;<span class="ident" id="6740532">got</span><span class="op" id="6740535">,</span>&nbsp;<span class="ident" id="6740537">want</span>&nbsp;<span class="op" id="6740542">:=</span>&nbsp;<span class="ident" id="6740545">x</span><span class="op" id="6740546">.</span><span class="ident" id="6740547">V</span><span class="op" id="6740548">,</span>&nbsp;<span class="ident" id="6740550">v</span><span class="op" id="6740551">;</span>&nbsp;<span class="ident" id="6740553">got</span>&nbsp;<span class="op" id="6740557">==</span>&nbsp;<span class="ident" id="6740560">nil</span>&nbsp;<span class="op" id="6740564">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740568">t</span><span class="op" id="6740569">.</span><span class="ident" id="6740570">Errorf</span><span class="op" id="6740576">(</span><span class="string" id="6740577">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740595">,</span>&nbsp;<span class="ident" id="6740597">want</span><span class="op" id="6740601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740604">}</span>&nbsp;<span class="keyword" id="6740606">else</span>&nbsp;<span class="keyword" id="6740611">if</span>&nbsp;<span class="op" id="6740614">*</span><span class="ident" id="6740615">got</span>&nbsp;<span class="op" id="6740619">!=</span>&nbsp;<span class="ident" id="6740622">want</span>&nbsp;<span class="op" id="6740627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740631">t</span><span class="op" id="6740632">.</span><span class="ident" id="6740633">Errorf</span><span class="op" id="6740639">(</span><span class="string" id="6740640">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740657">,</span>&nbsp;<span class="op" id="6740659">*</span><span class="ident" id="6740660">got</span><span class="op" id="6740663">,</span>&nbsp;<span class="ident" id="6740665">want</span><span class="op" id="6740669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740675">if</span>&nbsp;<span class="ident" id="6740678">got</span><span class="op" id="6740681">,</span>&nbsp;<span class="ident" id="6740683">want</span>&nbsp;<span class="op" id="6740688">:=</span>&nbsp;<span class="ident" id="6740691">x</span><span class="op" id="6740692">.</span><span class="ident" id="6740693">W</span><span class="op" id="6740694">,</span>&nbsp;<span class="ident" id="6740696">w</span><span class="op" id="6740697">;</span>&nbsp;<span class="ident" id="6740699">got</span>&nbsp;<span class="op" id="6740703">!=</span>&nbsp;<span class="ident" id="6740706">want</span>&nbsp;<span class="op" id="6740711">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740715">t</span><span class="op" id="6740716">.</span><span class="ident" id="6740717">Errorf</span><span class="op" id="6740723">(</span><span class="string" id="6740724">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740741">,</span>&nbsp;<span class="ident" id="6740743">got</span><span class="op" id="6740746">,</span>&nbsp;<span class="ident" id="6740748">want</span><span class="op" id="6740752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740759">if</span>&nbsp;<span class="ident" id="6740762">got</span><span class="op" id="6740765">,</span>&nbsp;<span class="ident" id="6740767">want</span>&nbsp;<span class="op" id="6740772">:=</span>&nbsp;<span class="ident" id="6740775">x</span><span class="op" id="6740776">.</span><span class="ident" id="6740777">BV</span><span class="op" id="6740779">,</span>&nbsp;<span class="ident" id="6740781">bv</span><span class="op" id="6740783">;</span>&nbsp;<span class="ident" id="6740785">got</span>&nbsp;<span class="op" id="6740789">==</span>&nbsp;<span class="ident" id="6740792">nil</span>&nbsp;<span class="op" id="6740796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740800">t</span><span class="op" id="6740801">.</span><span class="ident" id="6740802">Errorf</span><span class="op" id="6740808">(</span><span class="string" id="6740809">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740828">,</span>&nbsp;<span class="ident" id="6740830">want</span><span class="op" id="6740834">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740837">}</span>&nbsp;<span class="keyword" id="6740839">else</span>&nbsp;<span class="keyword" id="6740844">if</span>&nbsp;<span class="op" id="6740847">*</span><span class="ident" id="6740848">got</span>&nbsp;<span class="op" id="6740852">!=</span>&nbsp;<span class="ident" id="6740855">want</span>&nbsp;<span class="op" id="6740860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740864">t</span><span class="op" id="6740865">.</span><span class="ident" id="6740866">Errorf</span><span class="op" id="6740872">(</span><span class="string" id="6740873">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740891">,</span>&nbsp;<span class="op" id="6740893">*</span><span class="ident" id="6740894">got</span><span class="op" id="6740897">,</span>&nbsp;<span class="ident" id="6740899">want</span><span class="op" id="6740903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740909">if</span>&nbsp;<span class="ident" id="6740912">got</span><span class="op" id="6740915">,</span>&nbsp;<span class="ident" id="6740917">want</span>&nbsp;<span class="op" id="6740922">:=</span>&nbsp;<span class="ident" id="6740925">x</span><span class="op" id="6740926">.</span><span class="ident" id="6740927">BW</span><span class="op" id="6740929">,</span>&nbsp;<span class="ident" id="6740931">bw</span><span class="op" id="6740933">;</span>&nbsp;<span class="ident" id="6740935">got</span>&nbsp;<span class="op" id="6740939">!=</span>&nbsp;<span class="ident" id="6740942">want</span>&nbsp;<span class="op" id="6740947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740951">t</span><span class="op" id="6740952">.</span><span class="ident" id="6740953">Errorf</span><span class="op" id="6740959">(</span><span class="string" id="6740960">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6740978">,</span>&nbsp;<span class="ident" id="6740980">got</span><span class="op" id="6740983">,</span>&nbsp;<span class="ident" id="6740985">want</span><span class="op" id="6740989">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740996">if</span>&nbsp;<span class="ident" id="6740999">got</span><span class="op" id="6741002">,</span>&nbsp;<span class="ident" id="6741004">want</span>&nbsp;<span class="op" id="6741009">:=</span>&nbsp;<span class="ident" id="6741012">x</span><span class="op" id="6741013">.</span><span class="ident" id="6741014">TV</span><span class="op" id="6741016">,</span>&nbsp;<span class="ident" id="6741018">tv</span><span class="op" id="6741020">;</span>&nbsp;<span class="ident" id="6741022">got</span>&nbsp;<span class="op" id="6741026">==</span>&nbsp;<span class="ident" id="6741029">nil</span>&nbsp;<span class="op" id="6741033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741037">t</span><span class="op" id="6741038">.</span><span class="ident" id="6741039">Errorf</span><span class="op" id="6741045">(</span><span class="string" id="6741046">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6741065">,</span>&nbsp;<span class="ident" id="6741067">want</span><span class="op" id="6741071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741074">}</span>&nbsp;<span class="keyword" id="6741076">else</span>&nbsp;<span class="keyword" id="6741081">if</span>&nbsp;<span class="op" id="6741084">*</span><span class="ident" id="6741085">got</span>&nbsp;<span class="op" id="6741089">!=</span>&nbsp;<span class="ident" id="6741092">want</span>&nbsp;<span class="op" id="6741097">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741101">t</span><span class="op" id="6741102">.</span><span class="ident" id="6741103">Errorf</span><span class="op" id="6741109">(</span><span class="string" id="6741110">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6741128">,</span>&nbsp;<span class="op" id="6741130">*</span><span class="ident" id="6741131">got</span><span class="op" id="6741134">,</span>&nbsp;<span class="ident" id="6741136">want</span><span class="op" id="6741140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741146">if</span>&nbsp;<span class="ident" id="6741149">got</span><span class="op" id="6741152">,</span>&nbsp;<span class="ident" id="6741154">want</span>&nbsp;<span class="op" id="6741159">:=</span>&nbsp;<span class="ident" id="6741162">x</span><span class="op" id="6741163">.</span><span class="ident" id="6741164">TW</span><span class="op" id="6741166">,</span>&nbsp;<span class="ident" id="6741168">tw</span><span class="op" id="6741170">;</span>&nbsp;<span class="ident" id="6741172">got</span>&nbsp;<span class="op" id="6741176">!=</span>&nbsp;<span class="ident" id="6741179">want</span>&nbsp;<span class="op" id="6741184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741188">t</span><span class="op" id="6741189">.</span><span class="ident" id="6741190">Errorf</span><span class="op" id="6741196">(</span><span class="string" id="6741197">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6741215">,</span>&nbsp;<span class="ident" id="6741217">got</span><span class="op" id="6741220">,</span>&nbsp;<span class="ident" id="6741222">want</span><span class="op" id="6741226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741229">}</span><br>
<span class="lineno">535</span><span class="op" id="6741231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6741234">func</span>&nbsp;<span class="ident" id="6741239">TestGobEncoderFieldTypeError</span><span class="op" id="6741267">(</span><span class="ident" id="6741268">t</span>&nbsp;<span class="op" id="6741270">*</span><span class="ident" id="6741271">testing</span><span class="op" id="6741278">.</span><span class="ident" id="6741279">T</span><span class="op" id="6741280">)</span>&nbsp;<span class="op" id="6741282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6741285">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741322">b</span>&nbsp;<span class="op" id="6741324">:=</span>&nbsp;<span class="builtinfunc" id="6741327">new</span><span class="op" id="6741330">(</span><span class="ident" id="6741331">bytes</span><span class="op" id="6741336">.</span><span class="ident" id="6741337">Buffer</span><span class="op" id="6741343">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741346">enc</span>&nbsp;<span class="op" id="6741350">:=</span>&nbsp;<span class="ident" id="6741353">NewEncoder</span><span class="op" id="6741363">(</span><span class="ident" id="6741364">b</span><span class="op" id="6741365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741368">err</span>&nbsp;<span class="op" id="6741372">:=</span>&nbsp;<span class="ident" id="6741375">enc</span><span class="op" id="6741378">.</span><span class="ident" id="6741379">Encode</span><span class="op" id="6741385">(</span><span class="ident" id="6741386">GobTest1</span><span class="op" id="6741394">{</span><span class="num" id="6741395">17</span><span class="op" id="6741397">,</span>&nbsp;<span class="op" id="6741399">&amp;</span><span class="ident" id="6741400">StringStruct</span><span class="op" id="6741412">{</span><span class="string" id="6741413">&#34;ABC&#34;</span><span class="op" id="6741418">}</span><span class="op" id="6741419">}</span><span class="op" id="6741420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741423">if</span>&nbsp;<span class="ident" id="6741426">err</span>&nbsp;<span class="op" id="6741430">!=</span>&nbsp;<span class="ident" id="6741433">nil</span>&nbsp;<span class="op" id="6741437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741441">t</span><span class="op" id="6741442">.</span><span class="ident" id="6741443">Fatal</span><span class="op" id="6741448">(</span><span class="string" id="6741449">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6741464">,</span>&nbsp;<span class="ident" id="6741466">err</span><span class="op" id="6741469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741472">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741475">dec</span>&nbsp;<span class="op" id="6741479">:=</span>&nbsp;<span class="ident" id="6741482">NewDecoder</span><span class="op" id="6741492">(</span><span class="ident" id="6741493">b</span><span class="op" id="6741494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741497">x</span>&nbsp;<span class="op" id="6741499">:=</span>&nbsp;<span class="op" id="6741502">&amp;</span><span class="ident" id="6741503">GobTest2</span><span class="op" id="6741511">{</span><span class="op" id="6741512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741515">err</span>&nbsp;<span class="op" id="6741519">=</span>&nbsp;<span class="ident" id="6741521">dec</span><span class="op" id="6741524">.</span><span class="ident" id="6741525">Decode</span><span class="op" id="6741531">(</span><span class="ident" id="6741532">x</span><span class="op" id="6741533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741536">if</span>&nbsp;<span class="ident" id="6741539">err</span>&nbsp;<span class="op" id="6741543">==</span>&nbsp;<span class="ident" id="6741546">nil</span>&nbsp;<span class="op" id="6741550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741554">t</span><span class="op" id="6741555">.</span><span class="ident" id="6741556">Fatal</span><span class="op" id="6741561">(</span><span class="string" id="6741562">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="6741632">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741638">if</span>&nbsp;<span class="ident" id="6741641">strings</span><span class="op" id="6741648">.</span><span class="ident" id="6741649">Index</span><span class="op" id="6741654">(</span><span class="ident" id="6741655">err</span><span class="op" id="6741658">.</span><span class="ident" id="6741659">Error</span><span class="op" id="6741664">(</span><span class="op" id="6741665">)</span><span class="op" id="6741666">,</span>&nbsp;<span class="string" id="6741668">&#34;type&#34;</span><span class="op" id="6741674">)</span>&nbsp;<span class="op" id="6741676">&lt;</span>&nbsp;<span class="num" id="6741678">0</span>&nbsp;<span class="op" id="6741680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741684">t</span><span class="op" id="6741685">.</span><span class="ident" id="6741686">Fatal</span><span class="op" id="6741691">(</span><span class="string" id="6741692">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6741718">,</span>&nbsp;<span class="ident" id="6741720">err</span><span class="op" id="6741723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6741729">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741766">b</span><span class="op" id="6741767">.</span><span class="ident" id="6741768">Reset</span><span class="op" id="6741773">(</span><span class="op" id="6741774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741777">err</span>&nbsp;<span class="op" id="6741781">=</span>&nbsp;<span class="ident" id="6741783">enc</span><span class="op" id="6741786">.</span><span class="ident" id="6741787">Encode</span><span class="op" id="6741793">(</span><span class="ident" id="6741794">GobTest2</span><span class="op" id="6741802">{</span><span class="num" id="6741803">17</span><span class="op" id="6741805">,</span>&nbsp;<span class="string" id="6741807">&#34;ABC&#34;</span><span class="op" id="6741812">}</span><span class="op" id="6741813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741816">if</span>&nbsp;<span class="ident" id="6741819">err</span>&nbsp;<span class="op" id="6741823">!=</span>&nbsp;<span class="ident" id="6741826">nil</span>&nbsp;<span class="op" id="6741830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741834">t</span><span class="op" id="6741835">.</span><span class="ident" id="6741836">Fatal</span><span class="op" id="6741841">(</span><span class="string" id="6741842">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6741857">,</span>&nbsp;<span class="ident" id="6741859">err</span><span class="op" id="6741862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741865">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741868">y</span>&nbsp;<span class="op" id="6741870">:=</span>&nbsp;<span class="op" id="6741873">&amp;</span><span class="ident" id="6741874">GobTest1</span><span class="op" id="6741882">{</span><span class="op" id="6741883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741886">err</span>&nbsp;<span class="op" id="6741890">=</span>&nbsp;<span class="ident" id="6741892">dec</span><span class="op" id="6741895">.</span><span class="ident" id="6741896">Decode</span><span class="op" id="6741902">(</span><span class="ident" id="6741903">y</span><span class="op" id="6741904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741907">if</span>&nbsp;<span class="ident" id="6741910">err</span>&nbsp;<span class="op" id="6741914">==</span>&nbsp;<span class="ident" id="6741917">nil</span>&nbsp;<span class="op" id="6741921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741925">t</span><span class="op" id="6741926">.</span><span class="ident" id="6741927">Fatal</span><span class="op" id="6741932">(</span><span class="string" id="6741933">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="6742003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742006">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742009">if</span>&nbsp;<span class="ident" id="6742012">strings</span><span class="op" id="6742019">.</span><span class="ident" id="6742020">Index</span><span class="op" id="6742025">(</span><span class="ident" id="6742026">err</span><span class="op" id="6742029">.</span><span class="ident" id="6742030">Error</span><span class="op" id="6742035">(</span><span class="op" id="6742036">)</span><span class="op" id="6742037">,</span>&nbsp;<span class="string" id="6742039">&#34;type&#34;</span><span class="op" id="6742045">)</span>&nbsp;<span class="op" id="6742047">&lt;</span>&nbsp;<span class="num" id="6742049">0</span>&nbsp;<span class="op" id="6742051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742055">t</span><span class="op" id="6742056">.</span><span class="ident" id="6742057">Fatal</span><span class="op" id="6742062">(</span><span class="string" id="6742063">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6742089">,</span>&nbsp;<span class="ident" id="6742091">err</span><span class="op" id="6742094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742097">}</span><br>
<span class="lineno"></span><span class="op" id="6742099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="6742102">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="6742187">func</span>&nbsp;<span class="ident" id="6742192">TestGobEncoderStructSingleton</span><span class="op" id="6742221">(</span><span class="ident" id="6742222">t</span>&nbsp;<span class="op" id="6742224">*</span><span class="ident" id="6742225">testing</span><span class="op" id="6742232">.</span><span class="ident" id="6742233">T</span><span class="op" id="6742234">)</span>&nbsp;<span class="op" id="6742236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742239">b</span>&nbsp;<span class="op" id="6742241">:=</span>&nbsp;<span class="builtinfunc" id="6742244">new</span><span class="op" id="6742247">(</span><span class="ident" id="6742248">bytes</span><span class="op" id="6742253">.</span><span class="ident" id="6742254">Buffer</span><span class="op" id="6742260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742263">enc</span>&nbsp;<span class="op" id="6742267">:=</span>&nbsp;<span class="ident" id="6742270">NewEncoder</span><span class="op" id="6742280">(</span><span class="ident" id="6742281">b</span><span class="op" id="6742282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742285">err</span>&nbsp;<span class="op" id="6742289">:=</span>&nbsp;<span class="ident" id="6742292">enc</span><span class="op" id="6742295">.</span><span class="ident" id="6742296">Encode</span><span class="op" id="6742302">(</span><span class="op" id="6742303">&amp;</span><span class="ident" id="6742304">ByteStruct</span><span class="op" id="6742314">{</span><span class="string" id="6742315">&#39;A&#39;</span><span class="op" id="6742318">}</span><span class="op" id="6742319">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742322">if</span>&nbsp;<span class="ident" id="6742325">err</span>&nbsp;<span class="op" id="6742329">!=</span>&nbsp;<span class="ident" id="6742332">nil</span>&nbsp;<span class="op" id="6742336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742340">t</span><span class="op" id="6742341">.</span><span class="ident" id="6742342">Fatal</span><span class="op" id="6742347">(</span><span class="string" id="6742348">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6742363">,</span>&nbsp;<span class="ident" id="6742365">err</span><span class="op" id="6742368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742374">dec</span>&nbsp;<span class="op" id="6742378">:=</span>&nbsp;<span class="ident" id="6742381">NewDecoder</span><span class="op" id="6742391">(</span><span class="ident" id="6742392">b</span><span class="op" id="6742393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742396">x</span>&nbsp;<span class="op" id="6742398">:=</span>&nbsp;<span class="builtinfunc" id="6742401">new</span><span class="op" id="6742404">(</span><span class="ident" id="6742405">ByteStruct</span><span class="op" id="6742415">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742418">err</span>&nbsp;<span class="op" id="6742422">=</span>&nbsp;<span class="ident" id="6742424">dec</span><span class="op" id="6742427">.</span><span class="ident" id="6742428">Decode</span><span class="op" id="6742434">(</span><span class="ident" id="6742435">x</span><span class="op" id="6742436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742439">if</span>&nbsp;<span class="ident" id="6742442">err</span>&nbsp;<span class="op" id="6742446">!=</span>&nbsp;<span class="ident" id="6742449">nil</span>&nbsp;<span class="op" id="6742453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742457">t</span><span class="op" id="6742458">.</span><span class="ident" id="6742459">Fatal</span><span class="op" id="6742464">(</span><span class="string" id="6742465">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6742480">,</span>&nbsp;<span class="ident" id="6742482">err</span><span class="op" id="6742485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742491">if</span>&nbsp;<span class="ident" id="6742494">x</span><span class="op" id="6742495">.</span><span class="ident" id="6742496">a</span>&nbsp;<span class="op" id="6742498">!=</span>&nbsp;<span class="string" id="6742501">&#39;A&#39;</span>&nbsp;<span class="op" id="6742505">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742509">t</span><span class="op" id="6742510">.</span><span class="ident" id="6742511">Errorf</span><span class="op" id="6742517">(</span><span class="string" id="6742518">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6742539">,</span>&nbsp;<span class="ident" id="6742541">x</span><span class="op" id="6742542">.</span><span class="ident" id="6742543">a</span><span class="op" id="6742544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742547">}</span><br>
<span class="lineno"></span><span class="op" id="6742549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6742552">func</span>&nbsp;<span class="ident" id="6742557">TestGobEncoderNonStructSingleton</span><span class="op" id="6742589">(</span><span class="ident" id="6742590">t</span>&nbsp;<span class="op" id="6742592">*</span><span class="ident" id="6742593">testing</span><span class="op" id="6742600">.</span><span class="ident" id="6742601">T</span><span class="op" id="6742602">)</span>&nbsp;<span class="op" id="6742604">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742607">b</span>&nbsp;<span class="op" id="6742609">:=</span>&nbsp;<span class="builtinfunc" id="6742612">new</span><span class="op" id="6742615">(</span><span class="ident" id="6742616">bytes</span><span class="op" id="6742621">.</span><span class="ident" id="6742622">Buffer</span><span class="op" id="6742628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742631">enc</span>&nbsp;<span class="op" id="6742635">:=</span>&nbsp;<span class="ident" id="6742638">NewEncoder</span><span class="op" id="6742648">(</span><span class="ident" id="6742649">b</span><span class="op" id="6742650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742653">var</span>&nbsp;<span class="ident" id="6742657">g</span>&nbsp;<span class="ident" id="6742659">Gobber</span>&nbsp;<span class="op" id="6742666">=</span>&nbsp;<span class="num" id="6742668">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742674">err</span>&nbsp;<span class="op" id="6742678">:=</span>&nbsp;<span class="ident" id="6742681">enc</span><span class="op" id="6742684">.</span><span class="ident" id="6742685">Encode</span><span class="op" id="6742691">(</span><span class="op" id="6742692">&amp;</span><span class="ident" id="6742693">g</span><span class="op" id="6742694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742697">if</span>&nbsp;<span class="ident" id="6742700">err</span>&nbsp;<span class="op" id="6742704">!=</span>&nbsp;<span class="ident" id="6742707">nil</span>&nbsp;<span class="op" id="6742711">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742715">t</span><span class="op" id="6742716">.</span><span class="ident" id="6742717">Fatal</span><span class="op" id="6742722">(</span><span class="string" id="6742723">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6742738">,</span>&nbsp;<span class="ident" id="6742740">err</span><span class="op" id="6742743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742749">dec</span>&nbsp;<span class="op" id="6742753">:=</span>&nbsp;<span class="ident" id="6742756">NewDecoder</span><span class="op" id="6742766">(</span><span class="ident" id="6742767">b</span><span class="op" id="6742768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742771">var</span>&nbsp;<span class="ident" id="6742775">x</span>&nbsp;<span class="ident" id="6742777">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742785">err</span>&nbsp;<span class="op" id="6742789">=</span>&nbsp;<span class="ident" id="6742791">dec</span><span class="op" id="6742794">.</span><span class="ident" id="6742795">Decode</span><span class="op" id="6742801">(</span><span class="op" id="6742802">&amp;</span><span class="ident" id="6742803">x</span><span class="op" id="6742804">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742807">if</span>&nbsp;<span class="ident" id="6742810">err</span>&nbsp;<span class="op" id="6742814">!=</span>&nbsp;<span class="ident" id="6742817">nil</span>&nbsp;<span class="op" id="6742821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742825">t</span><span class="op" id="6742826">.</span><span class="ident" id="6742827">Fatal</span><span class="op" id="6742832">(</span><span class="string" id="6742833">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6742848">,</span>&nbsp;<span class="ident" id="6742850">err</span><span class="op" id="6742853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6742859">if</span>&nbsp;<span class="ident" id="6742862">x</span>&nbsp;<span class="op" id="6742864">!=</span>&nbsp;<span class="num" id="6742867">1234</span>&nbsp;<span class="op" id="6742872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742876">t</span><span class="op" id="6742877">.</span><span class="ident" id="6742878">Errorf</span><span class="op" id="6742884">(</span><span class="string" id="6742885">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6742907">,</span>&nbsp;<span class="ident" id="6742909">x</span><span class="op" id="6742910">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6742913">}</span><br>
<span class="lineno"></span><span class="op" id="6742915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6742918">func</span>&nbsp;<span class="ident" id="6742923">TestGobEncoderIgnoreStructField</span><span class="op" id="6742954">(</span><span class="ident" id="6742955">t</span>&nbsp;<span class="op" id="6742957">*</span><span class="ident" id="6742958">testing</span><span class="op" id="6742965">.</span><span class="ident" id="6742966">T</span><span class="op" id="6742967">)</span>&nbsp;<span class="op" id="6742969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6742972">b</span>&nbsp;<span class="op" id="6742974">:=</span>&nbsp;<span class="builtinfunc" id="6742977">new</span><span class="op" id="6742980">(</span><span class="ident" id="6742981">bytes</span><span class="op" id="6742986">.</span><span class="ident" id="6742987">Buffer</span><span class="op" id="6742993">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6742996">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743034">enc</span>&nbsp;<span class="op" id="6743038">:=</span>&nbsp;<span class="ident" id="6743041">NewEncoder</span><span class="op" id="6743051">(</span><span class="ident" id="6743052">b</span><span class="op" id="6743053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743056">err</span>&nbsp;<span class="op" id="6743060">:=</span>&nbsp;<span class="ident" id="6743063">enc</span><span class="op" id="6743066">.</span><span class="ident" id="6743067">Encode</span><span class="op" id="6743073">(</span><span class="ident" id="6743074">GobTest0</span><span class="op" id="6743082">{</span><span class="num" id="6743083">17</span><span class="op" id="6743085">,</span>&nbsp;<span class="op" id="6743087">&amp;</span><span class="ident" id="6743088">ByteStruct</span><span class="op" id="6743098">{</span><span class="string" id="6743099">&#39;A&#39;</span><span class="op" id="6743102">}</span><span class="op" id="6743103">}</span><span class="op" id="6743104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743107">if</span>&nbsp;<span class="ident" id="6743110">err</span>&nbsp;<span class="op" id="6743114">!=</span>&nbsp;<span class="ident" id="6743117">nil</span>&nbsp;<span class="op" id="6743121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743125">t</span><span class="op" id="6743126">.</span><span class="ident" id="6743127">Fatal</span><span class="op" id="6743132">(</span><span class="string" id="6743133">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6743148">,</span>&nbsp;<span class="ident" id="6743150">err</span><span class="op" id="6743153">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743159">dec</span>&nbsp;<span class="op" id="6743163">:=</span>&nbsp;<span class="ident" id="6743166">NewDecoder</span><span class="op" id="6743176">(</span><span class="ident" id="6743177">b</span><span class="op" id="6743178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743181">x</span>&nbsp;<span class="op" id="6743183">:=</span>&nbsp;<span class="builtinfunc" id="6743186">new</span><span class="op" id="6743189">(</span><span class="ident" id="6743190">GobTestIgnoreEncoder</span><span class="op" id="6743210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743213">err</span>&nbsp;<span class="op" id="6743217">=</span>&nbsp;<span class="ident" id="6743219">dec</span><span class="op" id="6743222">.</span><span class="ident" id="6743223">Decode</span><span class="op" id="6743229">(</span><span class="ident" id="6743230">x</span><span class="op" id="6743231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743234">if</span>&nbsp;<span class="ident" id="6743237">err</span>&nbsp;<span class="op" id="6743241">!=</span>&nbsp;<span class="ident" id="6743244">nil</span>&nbsp;<span class="op" id="6743248">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743252">t</span><span class="op" id="6743253">.</span><span class="ident" id="6743254">Fatal</span><span class="op" id="6743259">(</span><span class="string" id="6743260">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6743275">,</span>&nbsp;<span class="ident" id="6743277">err</span><span class="op" id="6743280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743286">if</span>&nbsp;<span class="ident" id="6743289">x</span><span class="op" id="6743290">.</span><span class="ident" id="6743291">X</span>&nbsp;<span class="op" id="6743293">!=</span>&nbsp;<span class="num" id="6743296">17</span>&nbsp;<span class="op" id="6743299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743303">t</span><span class="op" id="6743304">.</span><span class="ident" id="6743305">Errorf</span><span class="op" id="6743311">(</span><span class="string" id="6743312">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6743332">,</span>&nbsp;<span class="ident" id="6743334">x</span><span class="op" id="6743335">.</span><span class="ident" id="6743336">X</span><span class="op" id="6743337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743340">}</span><br>
<span class="lineno">625</span><span class="op" id="6743342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6743345">func</span>&nbsp;<span class="ident" id="6743350">TestGobEncoderIgnoreNonStructField</span><span class="op" id="6743384">(</span><span class="ident" id="6743385">t</span>&nbsp;<span class="op" id="6743387">*</span><span class="ident" id="6743388">testing</span><span class="op" id="6743395">.</span><span class="ident" id="6743396">T</span><span class="op" id="6743397">)</span>&nbsp;<span class="op" id="6743399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743402">b</span>&nbsp;<span class="op" id="6743404">:=</span>&nbsp;<span class="builtinfunc" id="6743407">new</span><span class="op" id="6743410">(</span><span class="ident" id="6743411">bytes</span><span class="op" id="6743416">.</span><span class="ident" id="6743417">Buffer</span><span class="op" id="6743423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743426">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743464">enc</span>&nbsp;<span class="op" id="6743468">:=</span>&nbsp;<span class="ident" id="6743471">NewEncoder</span><span class="op" id="6743481">(</span><span class="ident" id="6743482">b</span><span class="op" id="6743483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743486">gobber</span>&nbsp;<span class="op" id="6743493">:=</span>&nbsp;<span class="ident" id="6743496">Gobber</span><span class="op" id="6743502">(</span><span class="num" id="6743503">23</span><span class="op" id="6743505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743508">bgobber</span>&nbsp;<span class="op" id="6743516">:=</span>&nbsp;<span class="ident" id="6743519">BinaryGobber</span><span class="op" id="6743531">(</span><span class="num" id="6743532">24</span><span class="op" id="6743534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743537">tgobber</span>&nbsp;<span class="op" id="6743545">:=</span>&nbsp;<span class="ident" id="6743548">TextGobber</span><span class="op" id="6743558">(</span><span class="num" id="6743559">25</span><span class="op" id="6743561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743564">err</span>&nbsp;<span class="op" id="6743568">:=</span>&nbsp;<span class="ident" id="6743571">enc</span><span class="op" id="6743574">.</span><span class="ident" id="6743575">Encode</span><span class="op" id="6743581">(</span><span class="ident" id="6743582">GobTest3</span><span class="op" id="6743590">{</span><span class="num" id="6743591">17</span><span class="op" id="6743593">,</span>&nbsp;<span class="op" id="6743595">&amp;</span><span class="ident" id="6743596">gobber</span><span class="op" id="6743602">,</span>&nbsp;<span class="op" id="6743604">&amp;</span><span class="ident" id="6743605">bgobber</span><span class="op" id="6743612">,</span>&nbsp;<span class="op" id="6743614">&amp;</span><span class="ident" id="6743615">tgobber</span><span class="op" id="6743622">}</span><span class="op" id="6743623">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743626">if</span>&nbsp;<span class="ident" id="6743629">err</span>&nbsp;<span class="op" id="6743633">!=</span>&nbsp;<span class="ident" id="6743636">nil</span>&nbsp;<span class="op" id="6743640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743644">t</span><span class="op" id="6743645">.</span><span class="ident" id="6743646">Fatal</span><span class="op" id="6743651">(</span><span class="string" id="6743652">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6743667">,</span>&nbsp;<span class="ident" id="6743669">err</span><span class="op" id="6743672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743678">dec</span>&nbsp;<span class="op" id="6743682">:=</span>&nbsp;<span class="ident" id="6743685">NewDecoder</span><span class="op" id="6743695">(</span><span class="ident" id="6743696">b</span><span class="op" id="6743697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743700">x</span>&nbsp;<span class="op" id="6743702">:=</span>&nbsp;<span class="builtinfunc" id="6743705">new</span><span class="op" id="6743708">(</span><span class="ident" id="6743709">GobTestIgnoreEncoder</span><span class="op" id="6743729">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743732">err</span>&nbsp;<span class="op" id="6743736">=</span>&nbsp;<span class="ident" id="6743738">dec</span><span class="op" id="6743741">.</span><span class="ident" id="6743742">Decode</span><span class="op" id="6743748">(</span><span class="ident" id="6743749">x</span><span class="op" id="6743750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743753">if</span>&nbsp;<span class="ident" id="6743756">err</span>&nbsp;<span class="op" id="6743760">!=</span>&nbsp;<span class="ident" id="6743763">nil</span>&nbsp;<span class="op" id="6743767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743771">t</span><span class="op" id="6743772">.</span><span class="ident" id="6743773">Fatal</span><span class="op" id="6743778">(</span><span class="string" id="6743779">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6743794">,</span>&nbsp;<span class="ident" id="6743796">err</span><span class="op" id="6743799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6743805">if</span>&nbsp;<span class="ident" id="6743808">x</span><span class="op" id="6743809">.</span><span class="ident" id="6743810">X</span>&nbsp;<span class="op" id="6743812">!=</span>&nbsp;<span class="num" id="6743815">17</span>&nbsp;<span class="op" id="6743818">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743822">t</span><span class="op" id="6743823">.</span><span class="ident" id="6743824">Errorf</span><span class="op" id="6743830">(</span><span class="string" id="6743831">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6743851">,</span>&nbsp;<span class="ident" id="6743853">x</span><span class="op" id="6743854">.</span><span class="ident" id="6743855">X</span><span class="op" id="6743856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6743859">}</span><br>
<span class="lineno"></span><span class="op" id="6743861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6743864">func</span>&nbsp;<span class="ident" id="6743869">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="6743899">(</span><span class="ident" id="6743900">t</span>&nbsp;<span class="op" id="6743902">*</span><span class="ident" id="6743903">testing</span><span class="op" id="6743910">.</span><span class="ident" id="6743911">T</span><span class="op" id="6743912">)</span>&nbsp;<span class="op" id="6743914">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743917">b</span>&nbsp;<span class="op" id="6743919">:=</span>&nbsp;<span class="builtinfunc" id="6743922">new</span><span class="op" id="6743925">(</span><span class="ident" id="6743926">bytes</span><span class="op" id="6743931">.</span><span class="ident" id="6743932">Buffer</span><span class="op" id="6743938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6743941">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6743979">enc</span>&nbsp;<span class="op" id="6743983">:=</span>&nbsp;<span class="ident" id="6743986">NewEncoder</span><span class="op" id="6743996">(</span><span class="ident" id="6743997">b</span><span class="op" id="6743998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744001">err</span>&nbsp;<span class="op" id="6744005">:=</span>&nbsp;<span class="ident" id="6744008">enc</span><span class="op" id="6744011">.</span><span class="ident" id="6744012">Encode</span><span class="op" id="6744018">(</span><span class="ident" id="6744019">GobTest0</span><span class="op" id="6744027">{</span><span class="ident" id="6744028">X</span><span class="op" id="6744029">:</span>&nbsp;<span class="num" id="6744031">18</span><span class="op" id="6744033">}</span><span class="op" id="6744034">)</span>&nbsp;<span class="comment" id="6744036">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744049">if</span>&nbsp;<span class="ident" id="6744052">err</span>&nbsp;<span class="op" id="6744056">!=</span>&nbsp;<span class="ident" id="6744059">nil</span>&nbsp;<span class="op" id="6744063">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744067">t</span><span class="op" id="6744068">.</span><span class="ident" id="6744069">Fatal</span><span class="op" id="6744074">(</span><span class="string" id="6744075">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6744090">,</span>&nbsp;<span class="ident" id="6744092">err</span><span class="op" id="6744095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744101">dec</span>&nbsp;<span class="op" id="6744105">:=</span>&nbsp;<span class="ident" id="6744108">NewDecoder</span><span class="op" id="6744118">(</span><span class="ident" id="6744119">b</span><span class="op" id="6744120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744123">x</span>&nbsp;<span class="op" id="6744125">:=</span>&nbsp;<span class="builtinfunc" id="6744128">new</span><span class="op" id="6744131">(</span><span class="ident" id="6744132">GobTest0</span><span class="op" id="6744140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744143">err</span>&nbsp;<span class="op" id="6744147">=</span>&nbsp;<span class="ident" id="6744149">dec</span><span class="op" id="6744152">.</span><span class="ident" id="6744153">Decode</span><span class="op" id="6744159">(</span><span class="ident" id="6744160">x</span><span class="op" id="6744161">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744164">if</span>&nbsp;<span class="ident" id="6744167">err</span>&nbsp;<span class="op" id="6744171">!=</span>&nbsp;<span class="ident" id="6744174">nil</span>&nbsp;<span class="op" id="6744178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744182">t</span><span class="op" id="6744183">.</span><span class="ident" id="6744184">Fatal</span><span class="op" id="6744189">(</span><span class="string" id="6744190">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6744205">,</span>&nbsp;<span class="ident" id="6744207">err</span><span class="op" id="6744210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744216">if</span>&nbsp;<span class="ident" id="6744219">x</span><span class="op" id="6744220">.</span><span class="ident" id="6744221">X</span>&nbsp;<span class="op" id="6744223">!=</span>&nbsp;<span class="num" id="6744226">18</span>&nbsp;<span class="op" id="6744229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744233">t</span><span class="op" id="6744234">.</span><span class="ident" id="6744235">Errorf</span><span class="op" id="6744241">(</span><span class="string" id="6744242">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6744269">,</span>&nbsp;<span class="ident" id="6744271">x</span><span class="op" id="6744272">.</span><span class="ident" id="6744273">X</span><span class="op" id="6744274">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744280">if</span>&nbsp;<span class="ident" id="6744283">x</span><span class="op" id="6744284">.</span><span class="ident" id="6744285">G</span>&nbsp;<span class="op" id="6744287">!=</span>&nbsp;<span class="ident" id="6744290">nil</span>&nbsp;<span class="op" id="6744294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744298">t</span><span class="op" id="6744299">.</span><span class="ident" id="6744300">Errorf</span><span class="op" id="6744306">(</span><span class="string" id="6744307">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6744335">,</span>&nbsp;<span class="ident" id="6744337">x</span><span class="op" id="6744338">.</span><span class="ident" id="6744339">G</span><span class="op" id="6744340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744343">}</span><br>
<span class="lineno"></span><span class="op" id="6744345">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="6744348">type</span>&nbsp;<span class="ident" id="6744353">gobDecoderBug0</span>&nbsp;<span class="keyword" id="6744368">struct</span>&nbsp;<span class="op" id="6744375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744378">foo</span><span class="op" id="6744381">,</span>&nbsp;<span class="ident" id="6744383">bar</span>&nbsp;<span class="builtintype" id="6744387">string</span><br>
<span class="lineno"></span><span class="op" id="6744394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6744397">func</span>&nbsp;<span class="op" id="6744402">(</span><span class="ident" id="6744403">br</span>&nbsp;<span class="op" id="6744406">*</span><span class="ident" id="6744407">gobDecoderBug0</span><span class="op" id="6744421">)</span>&nbsp;<span class="ident" id="6744423">String</span><span class="op" id="6744429">(</span><span class="op" id="6744430">)</span>&nbsp;<span class="builtintype" id="6744432">string</span>&nbsp;<span class="op" id="6744439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744442">return</span>&nbsp;<span class="ident" id="6744449">br</span><span class="op" id="6744451">.</span><span class="ident" id="6744452">foo</span>&nbsp;<span class="op" id="6744456">+</span>&nbsp;<span class="string" id="6744458">&#34;-&#34;</span>&nbsp;<span class="op" id="6744462">+</span>&nbsp;<span class="ident" id="6744464">br</span><span class="op" id="6744466">.</span><span class="ident" id="6744467">bar</span><br>
<span class="lineno"></span><span class="op" id="6744471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6744474">func</span>&nbsp;<span class="op" id="6744479">(</span><span class="ident" id="6744480">br</span>&nbsp;<span class="op" id="6744483">*</span><span class="ident" id="6744484">gobDecoderBug0</span><span class="op" id="6744498">)</span>&nbsp;<span class="ident" id="6744500">GobEncode</span><span class="op" id="6744509">(</span><span class="op" id="6744510">)</span>&nbsp;<span class="op" id="6744512">(</span><span class="op" id="6744513">[</span><span class="op" id="6744514">]</span><span class="builtintype" id="6744515">byte</span><span class="op" id="6744519">,</span>&nbsp;<span class="builtintype" id="6744521">error</span><span class="op" id="6744526">)</span>&nbsp;<span class="op" id="6744528">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744531">return</span>&nbsp;<span class="op" id="6744538">[</span><span class="op" id="6744539">]</span><span class="builtintype" id="6744540">byte</span><span class="op" id="6744544">(</span><span class="ident" id="6744545">br</span><span class="op" id="6744547">.</span><span class="ident" id="6744548">String</span><span class="op" id="6744554">(</span><span class="op" id="6744555">)</span><span class="op" id="6744556">)</span><span class="op" id="6744557">,</span>&nbsp;<span class="ident" id="6744559">nil</span><br>
<span class="lineno"></span><span class="op" id="6744563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6744566">func</span>&nbsp;<span class="op" id="6744571">(</span><span class="ident" id="6744572">br</span>&nbsp;<span class="op" id="6744575">*</span><span class="ident" id="6744576">gobDecoderBug0</span><span class="op" id="6744590">)</span>&nbsp;<span class="ident" id="6744592">GobDecode</span><span class="op" id="6744601">(</span><span class="ident" id="6744602">b</span>&nbsp;<span class="op" id="6744604">[</span><span class="op" id="6744605">]</span><span class="builtintype" id="6744606">byte</span><span class="op" id="6744610">)</span>&nbsp;<span class="builtintype" id="6744612">error</span>&nbsp;<span class="op" id="6744618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744621">br</span><span class="op" id="6744623">.</span><span class="ident" id="6744624">foo</span>&nbsp;<span class="op" id="6744628">=</span>&nbsp;<span class="string" id="6744630">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744637">br</span><span class="op" id="6744639">.</span><span class="ident" id="6744640">bar</span>&nbsp;<span class="op" id="6744644">=</span>&nbsp;<span class="string" id="6744646">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744653">return</span>&nbsp;<span class="ident" id="6744660">nil</span><br>
<span class="lineno"></span><span class="op" id="6744664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6744667">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="6744733">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="6744755">func</span>&nbsp;<span class="ident" id="6744760">TestGobEncoderExtraIndirect</span><span class="op" id="6744787">(</span><span class="ident" id="6744788">t</span>&nbsp;<span class="op" id="6744790">*</span><span class="ident" id="6744791">testing</span><span class="op" id="6744798">.</span><span class="ident" id="6744799">T</span><span class="op" id="6744800">)</span>&nbsp;<span class="op" id="6744802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744805">gdb</span>&nbsp;<span class="op" id="6744809">:=</span>&nbsp;<span class="op" id="6744812">&amp;</span><span class="ident" id="6744813">gobDecoderBug0</span><span class="op" id="6744827">{</span><span class="string" id="6744828">&#34;foo&#34;</span><span class="op" id="6744833">,</span>&nbsp;<span class="string" id="6744835">&#34;bar&#34;</span><span class="op" id="6744840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744843">buf</span>&nbsp;<span class="op" id="6744847">:=</span>&nbsp;<span class="builtinfunc" id="6744850">new</span><span class="op" id="6744853">(</span><span class="ident" id="6744854">bytes</span><span class="op" id="6744859">.</span><span class="ident" id="6744860">Buffer</span><span class="op" id="6744866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744869">e</span>&nbsp;<span class="op" id="6744871">:=</span>&nbsp;<span class="ident" id="6744874">NewEncoder</span><span class="op" id="6744884">(</span><span class="ident" id="6744885">buf</span><span class="op" id="6744888">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744891">if</span>&nbsp;<span class="ident" id="6744894">err</span>&nbsp;<span class="op" id="6744898">:=</span>&nbsp;<span class="ident" id="6744901">e</span><span class="op" id="6744902">.</span><span class="ident" id="6744903">Encode</span><span class="op" id="6744909">(</span><span class="ident" id="6744910">gdb</span><span class="op" id="6744913">)</span><span class="op" id="6744914">;</span>&nbsp;<span class="ident" id="6744916">err</span>&nbsp;<span class="op" id="6744920">!=</span>&nbsp;<span class="ident" id="6744923">nil</span>&nbsp;<span class="op" id="6744927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744931">t</span><span class="op" id="6744932">.</span><span class="ident" id="6744933">Fatalf</span><span class="op" id="6744939">(</span><span class="string" id="6744940">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="6744952">,</span>&nbsp;<span class="ident" id="6744954">err</span><span class="op" id="6744957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6744960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6744963">d</span>&nbsp;<span class="op" id="6744965">:=</span>&nbsp;<span class="ident" id="6744968">NewDecoder</span><span class="op" id="6744978">(</span><span class="ident" id="6744979">buf</span><span class="op" id="6744982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6744985">var</span>&nbsp;<span class="ident" id="6744989">got</span>&nbsp;<span class="op" id="6744993">*</span><span class="ident" id="6744994">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745010">if</span>&nbsp;<span class="ident" id="6745013">err</span>&nbsp;<span class="op" id="6745017">:=</span>&nbsp;<span class="ident" id="6745020">d</span><span class="op" id="6745021">.</span><span class="ident" id="6745022">Decode</span><span class="op" id="6745028">(</span><span class="op" id="6745029">&amp;</span><span class="ident" id="6745030">got</span><span class="op" id="6745033">)</span><span class="op" id="6745034">;</span>&nbsp;<span class="ident" id="6745036">err</span>&nbsp;<span class="op" id="6745040">!=</span>&nbsp;<span class="ident" id="6745043">nil</span>&nbsp;<span class="op" id="6745047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745051">t</span><span class="op" id="6745052">.</span><span class="ident" id="6745053">Fatalf</span><span class="op" id="6745059">(</span><span class="string" id="6745060">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6745072">,</span>&nbsp;<span class="ident" id="6745074">err</span><span class="op" id="6745077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745083">if</span>&nbsp;<span class="ident" id="6745086">got</span><span class="op" id="6745089">.</span><span class="ident" id="6745090">foo</span>&nbsp;<span class="op" id="6745094">!=</span>&nbsp;<span class="ident" id="6745097">gdb</span><span class="op" id="6745100">.</span><span class="ident" id="6745101">foo</span>&nbsp;<span class="op" id="6745105">||</span>&nbsp;<span class="ident" id="6745108">got</span><span class="op" id="6745111">.</span><span class="ident" id="6745112">bar</span>&nbsp;<span class="op" id="6745116">!=</span>&nbsp;<span class="ident" id="6745119">gdb</span><span class="op" id="6745122">.</span><span class="ident" id="6745123">bar</span>&nbsp;<span class="op" id="6745127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745131">t</span><span class="op" id="6745132">.</span><span class="ident" id="6745133">Errorf</span><span class="op" id="6745139">(</span><span class="string" id="6745140">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6745159">,</span>&nbsp;<span class="ident" id="6745161">got</span><span class="op" id="6745164">,</span>&nbsp;<span class="ident" id="6745166">gdb</span><span class="op" id="6745169">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745172">}</span><br>
<span class="lineno"></span><span class="op" id="6745174">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6745177">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="6745241">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="6745310">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="6745372">type</span>&nbsp;<span class="ident" id="6745377">isZeroBug</span>&nbsp;<span class="keyword" id="6745387">struct</span>&nbsp;<span class="op" id="6745394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745397">T</span>&nbsp;<span class="ident" id="6745399">time</span><span class="op" id="6745403">.</span><span class="ident" id="6745404">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745410">S</span>&nbsp;<span class="builtintype" id="6745412">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745420">I</span>&nbsp;<span class="builtintype" id="6745422">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745427">A</span>&nbsp;<span class="ident" id="6745429">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745445">F</span>&nbsp;<span class="ident" id="6745447">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="6745466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6745469">type</span>&nbsp;<span class="ident" id="6745474">isZeroBugArray</span>&nbsp;<span class="op" id="6745489">[</span><span class="num" id="6745490">2</span><span class="op" id="6745491">]</span><span class="builtintype" id="6745492">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="6745499">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="6745559">func</span>&nbsp;<span class="op" id="6745564">(</span><span class="ident" id="6745565">a</span>&nbsp;<span class="ident" id="6745567">isZeroBugArray</span><span class="op" id="6745581">)</span>&nbsp;<span class="ident" id="6745583">GobEncode</span><span class="op" id="6745592">(</span><span class="op" id="6745593">)</span>&nbsp;<span class="op" id="6745595">(</span><span class="ident" id="6745596">b</span>&nbsp;<span class="op" id="6745598">[</span><span class="op" id="6745599">]</span><span class="builtintype" id="6745600">byte</span><span class="op" id="6745604">,</span>&nbsp;<span class="ident" id="6745606">e</span>&nbsp;<span class="builtintype" id="6745608">error</span><span class="op" id="6745613">)</span>&nbsp;<span class="op" id="6745615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745618">b</span>&nbsp;<span class="op" id="6745620">=</span>&nbsp;<span class="builtinfunc" id="6745622">append</span><span class="op" id="6745628">(</span><span class="ident" id="6745629">b</span><span class="op" id="6745630">,</span>&nbsp;<span class="ident" id="6745632">a</span><span class="op" id="6745633">[</span><span class="op" id="6745634">:</span><span class="op" id="6745635">]</span><span class="op" id="6745636">...</span><span class="op" id="6745639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745642">return</span>&nbsp;<span class="ident" id="6745649">b</span><span class="op" id="6745650">,</span>&nbsp;<span class="ident" id="6745652">nil</span><br>
<span class="lineno">725</span><span class="op" id="6745656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6745659">func</span>&nbsp;<span class="op" id="6745664">(</span><span class="ident" id="6745665">a</span>&nbsp;<span class="op" id="6745667">*</span><span class="ident" id="6745668">isZeroBugArray</span><span class="op" id="6745682">)</span>&nbsp;<span class="ident" id="6745684">GobDecode</span><span class="op" id="6745693">(</span><span class="ident" id="6745694">data</span>&nbsp;<span class="op" id="6745699">[</span><span class="op" id="6745700">]</span><span class="builtintype" id="6745701">byte</span><span class="op" id="6745705">)</span>&nbsp;<span class="builtintype" id="6745707">error</span>&nbsp;<span class="op" id="6745713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745716">if</span>&nbsp;<span class="builtinfunc" id="6745719">len</span><span class="op" id="6745722">(</span><span class="ident" id="6745723">data</span><span class="op" id="6745727">)</span>&nbsp;<span class="op" id="6745729">!=</span>&nbsp;<span class="builtinfunc" id="6745732">len</span><span class="op" id="6745735">(</span><span class="ident" id="6745736">a</span><span class="op" id="6745737">)</span>&nbsp;<span class="op" id="6745739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745743">return</span>&nbsp;<span class="ident" id="6745750">io</span><span class="op" id="6745752">.</span><span class="ident" id="6745753">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6745758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745761">a</span><span class="op" id="6745762">[</span><span class="num" id="6745763">0</span><span class="op" id="6745764">]</span>&nbsp;<span class="op" id="6745766">=</span>&nbsp;<span class="ident" id="6745768">data</span><span class="op" id="6745772">[</span><span class="num" id="6745773">0</span><span class="op" id="6745774">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745777">a</span><span class="op" id="6745778">[</span><span class="num" id="6745779">1</span><span class="op" id="6745780">]</span>&nbsp;<span class="op" id="6745782">=</span>&nbsp;<span class="ident" id="6745784">data</span><span class="op" id="6745788">[</span><span class="num" id="6745789">1</span><span class="op" id="6745790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745793">return</span>&nbsp;<span class="ident" id="6745800">nil</span><br>
<span class="lineno"></span><span class="op" id="6745804">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="6745807">type</span>&nbsp;<span class="ident" id="6745812">isZeroBugInterface</span>&nbsp;<span class="keyword" id="6745831">struct</span>&nbsp;<span class="op" id="6745838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6745841">I</span>&nbsp;<span class="keyword" id="6745843">interface</span><span class="op" id="6745852">{</span><span class="op" id="6745853">}</span><br>
<span class="lineno"></span><span class="op" id="6745855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="6745858">func</span>&nbsp;<span class="op" id="6745863">(</span><span class="ident" id="6745864">i</span>&nbsp;<span class="ident" id="6745866">isZeroBugInterface</span><span class="op" id="6745884">)</span>&nbsp;<span class="ident" id="6745886">GobEncode</span><span class="op" id="6745895">(</span><span class="op" id="6745896">)</span>&nbsp;<span class="op" id="6745898">(</span><span class="ident" id="6745899">b</span>&nbsp;<span class="op" id="6745901">[</span><span class="op" id="6745902">]</span><span class="builtintype" id="6745903">byte</span><span class="op" id="6745907">,</span>&nbsp;<span class="ident" id="6745909">e</span>&nbsp;<span class="builtintype" id="6745911">error</span><span class="op" id="6745916">)</span>&nbsp;<span class="op" id="6745918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6745921">return</span>&nbsp;<span class="op" id="6745928">[</span><span class="op" id="6745929">]</span><span class="builtintype" id="6745930">byte</span><span class="op" id="6745934">{</span><span class="op" id="6745935">}</span><span class="op" id="6745936">,</span>&nbsp;<span class="ident" id="6745938">nil</span><br>
<span class="lineno"></span><span class="op" id="6745942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6745945">func</span>&nbsp;<span class="op" id="6745950">(</span><span class="ident" id="6745951">i</span>&nbsp;<span class="op" id="6745953">*</span><span class="ident" id="6745954">isZeroBugInterface</span><span class="op" id="6745972">)</span>&nbsp;<span class="ident" id="6745974">GobDecode</span><span class="op" id="6745983">(</span><span class="ident" id="6745984">data</span>&nbsp;<span class="op" id="6745989">[</span><span class="op" id="6745990">]</span><span class="builtintype" id="6745991">byte</span><span class="op" id="6745995">)</span>&nbsp;<span class="builtintype" id="6745997">error</span>&nbsp;<span class="op" id="6746003">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746006">return</span>&nbsp;<span class="ident" id="6746013">nil</span><br>
<span class="lineno"></span><span class="op" id="6746017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6746020">func</span>&nbsp;<span class="ident" id="6746025">TestGobEncodeIsZero</span><span class="op" id="6746044">(</span><span class="ident" id="6746045">t</span>&nbsp;<span class="op" id="6746047">*</span><span class="ident" id="6746048">testing</span><span class="op" id="6746055">.</span><span class="ident" id="6746056">T</span><span class="op" id="6746057">)</span>&nbsp;<span class="op" id="6746059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746062">x</span>&nbsp;<span class="op" id="6746064">:=</span>&nbsp;<span class="ident" id="6746067">isZeroBug</span><span class="op" id="6746076">{</span><span class="ident" id="6746077">time</span><span class="op" id="6746081">.</span><span class="ident" id="6746082">Now</span><span class="op" id="6746085">(</span><span class="op" id="6746086">)</span><span class="op" id="6746087">,</span>&nbsp;<span class="string" id="6746089">&#34;hello&#34;</span><span class="op" id="6746096">,</span>&nbsp;<span class="op" id="6746098">-</span><span class="num" id="6746099">55</span><span class="op" id="6746101">,</span>&nbsp;<span class="ident" id="6746103">isZeroBugArray</span><span class="op" id="6746117">{</span><span class="num" id="6746118">1</span><span class="op" id="6746119">,</span>&nbsp;<span class="num" id="6746121">2</span><span class="op" id="6746122">}</span><span class="op" id="6746123">,</span>&nbsp;<span class="ident" id="6746125">isZeroBugInterface</span><span class="op" id="6746143">{</span><span class="op" id="6746144">}</span><span class="op" id="6746145">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746148">b</span>&nbsp;<span class="op" id="6746150">:=</span>&nbsp;<span class="builtinfunc" id="6746153">new</span><span class="op" id="6746156">(</span><span class="ident" id="6746157">bytes</span><span class="op" id="6746162">.</span><span class="ident" id="6746163">Buffer</span><span class="op" id="6746169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746172">enc</span>&nbsp;<span class="op" id="6746176">:=</span>&nbsp;<span class="ident" id="6746179">NewEncoder</span><span class="op" id="6746189">(</span><span class="ident" id="6746190">b</span><span class="op" id="6746191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746194">err</span>&nbsp;<span class="op" id="6746198">:=</span>&nbsp;<span class="ident" id="6746201">enc</span><span class="op" id="6746204">.</span><span class="ident" id="6746205">Encode</span><span class="op" id="6746211">(</span><span class="ident" id="6746212">x</span><span class="op" id="6746213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746216">if</span>&nbsp;<span class="ident" id="6746219">err</span>&nbsp;<span class="op" id="6746223">!=</span>&nbsp;<span class="ident" id="6746226">nil</span>&nbsp;<span class="op" id="6746230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746234">t</span><span class="op" id="6746235">.</span><span class="ident" id="6746236">Fatal</span><span class="op" id="6746241">(</span><span class="string" id="6746242">&#34;encode:&#34;</span><span class="op" id="6746251">,</span>&nbsp;<span class="ident" id="6746253">err</span><span class="op" id="6746256">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746262">var</span>&nbsp;<span class="ident" id="6746266">y</span>&nbsp;<span class="ident" id="6746268">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746279">dec</span>&nbsp;<span class="op" id="6746283">:=</span>&nbsp;<span class="ident" id="6746286">NewDecoder</span><span class="op" id="6746296">(</span><span class="ident" id="6746297">b</span><span class="op" id="6746298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746301">err</span>&nbsp;<span class="op" id="6746305">=</span>&nbsp;<span class="ident" id="6746307">dec</span><span class="op" id="6746310">.</span><span class="ident" id="6746311">Decode</span><span class="op" id="6746317">(</span><span class="op" id="6746318">&amp;</span><span class="ident" id="6746319">y</span><span class="op" id="6746320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746323">if</span>&nbsp;<span class="ident" id="6746326">err</span>&nbsp;<span class="op" id="6746330">!=</span>&nbsp;<span class="ident" id="6746333">nil</span>&nbsp;<span class="op" id="6746337">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746341">t</span><span class="op" id="6746342">.</span><span class="ident" id="6746343">Fatal</span><span class="op" id="6746348">(</span><span class="string" id="6746349">&#34;decode:&#34;</span><span class="op" id="6746358">,</span>&nbsp;<span class="ident" id="6746360">err</span><span class="op" id="6746363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746369">if</span>&nbsp;<span class="ident" id="6746372">x</span>&nbsp;<span class="op" id="6746374">!=</span>&nbsp;<span class="ident" id="6746377">y</span>&nbsp;<span class="op" id="6746379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746383">t</span><span class="op" id="6746384">.</span><span class="ident" id="6746385">Fatalf</span><span class="op" id="6746391">(</span><span class="string" id="6746392">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6746402">,</span>&nbsp;<span class="ident" id="6746404">x</span><span class="op" id="6746405">,</span>&nbsp;<span class="ident" id="6746407">y</span><span class="op" id="6746408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746411">}</span><br>
<span class="lineno">765</span><span class="op" id="6746413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6746416">func</span>&nbsp;<span class="ident" id="6746421">TestGobEncodePtrError</span><span class="op" id="6746442">(</span><span class="ident" id="6746443">t</span>&nbsp;<span class="op" id="6746445">*</span><span class="ident" id="6746446">testing</span><span class="op" id="6746453">.</span><span class="ident" id="6746454">T</span><span class="op" id="6746455">)</span>&nbsp;<span class="op" id="6746457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746460">var</span>&nbsp;<span class="ident" id="6746464">err</span>&nbsp;<span class="builtintype" id="6746468">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746475">b</span>&nbsp;<span class="op" id="6746477">:=</span>&nbsp;<span class="builtinfunc" id="6746480">new</span><span class="op" id="6746483">(</span><span class="ident" id="6746484">bytes</span><span class="op" id="6746489">.</span><span class="ident" id="6746490">Buffer</span><span class="op" id="6746496">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746499">enc</span>&nbsp;<span class="op" id="6746503">:=</span>&nbsp;<span class="ident" id="6746506">NewEncoder</span><span class="op" id="6746516">(</span><span class="ident" id="6746517">b</span><span class="op" id="6746518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746521">err</span>&nbsp;<span class="op" id="6746525">=</span>&nbsp;<span class="ident" id="6746527">enc</span><span class="op" id="6746530">.</span><span class="ident" id="6746531">Encode</span><span class="op" id="6746537">(</span><span class="op" id="6746538">&amp;</span><span class="ident" id="6746539">err</span><span class="op" id="6746542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746545">if</span>&nbsp;<span class="ident" id="6746548">err</span>&nbsp;<span class="op" id="6746552">!=</span>&nbsp;<span class="ident" id="6746555">nil</span>&nbsp;<span class="op" id="6746559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746563">t</span><span class="op" id="6746564">.</span><span class="ident" id="6746565">Fatal</span><span class="op" id="6746570">(</span><span class="string" id="6746571">&#34;encode:&#34;</span><span class="op" id="6746580">,</span>&nbsp;<span class="ident" id="6746582">err</span><span class="op" id="6746585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746588">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746591">dec</span>&nbsp;<span class="op" id="6746595">:=</span>&nbsp;<span class="ident" id="6746598">NewDecoder</span><span class="op" id="6746608">(</span><span class="ident" id="6746609">b</span><span class="op" id="6746610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746613">err2</span>&nbsp;<span class="op" id="6746618">:=</span>&nbsp;<span class="ident" id="6746621">fmt</span><span class="op" id="6746624">.</span><span class="ident" id="6746625">Errorf</span><span class="op" id="6746631">(</span><span class="string" id="6746632">&#34;foo&#34;</span><span class="op" id="6746637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746640">err</span>&nbsp;<span class="op" id="6746644">=</span>&nbsp;<span class="ident" id="6746646">dec</span><span class="op" id="6746649">.</span><span class="ident" id="6746650">Decode</span><span class="op" id="6746656">(</span><span class="op" id="6746657">&amp;</span><span class="ident" id="6746658">err2</span><span class="op" id="6746662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746665">if</span>&nbsp;<span class="ident" id="6746668">err</span>&nbsp;<span class="op" id="6746672">!=</span>&nbsp;<span class="ident" id="6746675">nil</span>&nbsp;<span class="op" id="6746679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746683">t</span><span class="op" id="6746684">.</span><span class="ident" id="6746685">Fatal</span><span class="op" id="6746690">(</span><span class="string" id="6746691">&#34;decode:&#34;</span><span class="op" id="6746700">,</span>&nbsp;<span class="ident" id="6746702">err</span><span class="op" id="6746705">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746711">if</span>&nbsp;<span class="ident" id="6746714">err2</span>&nbsp;<span class="op" id="6746719">!=</span>&nbsp;<span class="ident" id="6746722">nil</span>&nbsp;<span class="op" id="6746726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746730">t</span><span class="op" id="6746731">.</span><span class="ident" id="6746732">Fatalf</span><span class="op" id="6746738">(</span><span class="string" id="6746739">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6746761">,</span>&nbsp;<span class="ident" id="6746763">err2</span><span class="op" id="6746767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6746770">}</span><br>
<span class="lineno"></span><span class="op" id="6746772">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="6746775">func</span>&nbsp;<span class="ident" id="6746780">TestNetIP</span><span class="op" id="6746789">(</span><span class="ident" id="6746790">t</span>&nbsp;<span class="op" id="6746792">*</span><span class="ident" id="6746793">testing</span><span class="op" id="6746800">.</span><span class="ident" id="6746801">T</span><span class="op" id="6746802">)</span>&nbsp;<span class="op" id="6746804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6746807">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746850">enc</span>&nbsp;<span class="op" id="6746854">:=</span>&nbsp;<span class="op" id="6746857">[</span><span class="op" id="6746858">]</span><span class="builtintype" id="6746859">byte</span><span class="op" id="6746863">{</span><span class="num" id="6746864">0x07</span><span class="op" id="6746868">,</span>&nbsp;<span class="num" id="6746870">0x0a</span><span class="op" id="6746874">,</span>&nbsp;<span class="num" id="6746876">0x00</span><span class="op" id="6746880">,</span>&nbsp;<span class="num" id="6746882">0x04</span><span class="op" id="6746886">,</span>&nbsp;<span class="num" id="6746888">0x01</span><span class="op" id="6746892">,</span>&nbsp;<span class="num" id="6746894">0x02</span><span class="op" id="6746898">,</span>&nbsp;<span class="num" id="6746900">0x03</span><span class="op" id="6746904">,</span>&nbsp;<span class="num" id="6746906">0x04</span><span class="op" id="6746910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746914">var</span>&nbsp;<span class="ident" id="6746918">ip</span>&nbsp;<span class="ident" id="6746921">net</span><span class="op" id="6746924">.</span><span class="ident" id="6746925">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6746929">err</span>&nbsp;<span class="op" id="6746933">:=</span>&nbsp;<span class="ident" id="6746936">NewDecoder</span><span class="op" id="6746946">(</span><span class="ident" id="6746947">bytes</span><span class="op" id="6746952">.</span><span class="ident" id="6746953">NewReader</span><span class="op" id="6746962">(</span><span class="ident" id="6746963">enc</span><span class="op" id="6746966">)</span><span class="op" id="6746967">)</span><span class="op" id="6746968">.</span><span class="ident" id="6746969">Decode</span><span class="op" id="6746975">(</span><span class="op" id="6746976">&amp;</span><span class="ident" id="6746977">ip</span><span class="op" id="6746979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6746982">if</span>&nbsp;<span class="ident" id="6746985">err</span>&nbsp;<span class="op" id="6746989">!=</span>&nbsp;<span class="ident" id="6746992">nil</span>&nbsp;<span class="op" id="6746996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747000">t</span><span class="op" id="6747001">.</span><span class="ident" id="6747002">Fatalf</span><span class="op" id="6747008">(</span><span class="string" id="6747009">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6747021">,</span>&nbsp;<span class="ident" id="6747023">err</span><span class="op" id="6747026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747029">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747032">if</span>&nbsp;<span class="ident" id="6747035">ip</span><span class="op" id="6747037">.</span><span class="ident" id="6747038">String</span><span class="op" id="6747044">(</span><span class="op" id="6747045">)</span>&nbsp;<span class="op" id="6747047">!=</span>&nbsp;<span class="string" id="6747050">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="6747060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747064">t</span><span class="op" id="6747065">.</span><span class="ident" id="6747066">Errorf</span><span class="op" id="6747072">(</span><span class="string" id="6747073">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="6747102">,</span>&nbsp;<span class="ident" id="6747104">ip</span><span class="op" id="6747106">.</span><span class="ident" id="6747107">String</span><span class="op" id="6747113">(</span><span class="op" id="6747114">)</span><span class="op" id="6747115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747118">}</span><br>
<span class="lineno"></span><span class="op" id="6747120">}</span>
</div>
</body>
</html>
