<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2604565">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2604620">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2604674">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2604725">package</span>&nbsp;<span class="ident" id="2604733">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2604742">import</span>&nbsp;<span class="op" id="2604749">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2604752">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2604760">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2604771">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2604780">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2604783">const</span>&nbsp;<span class="ident" id="2604789">ptrSize</span>&nbsp;<span class="op" id="2604797">=</span>&nbsp;<span class="ident" id="2604799">unsafe</span><span class="op" id="2604805">.</span><span class="ident" id="2604806">Sizeof</span><span class="op" id="2604812">(</span><span class="op" id="2604813">(</span><span class="op" id="2604814">*</span><span class="builtintype" id="2604815">byte</span><span class="op" id="2604819">)</span><span class="op" id="2604820">(</span><span class="ident" id="2604821">nil</span><span class="op" id="2604824">)</span><span class="op" id="2604825">)</span><br>
<span class="lineno"></span><span class="keyword" id="2604827">const</span>&nbsp;<span class="ident" id="2604833">cannotSet</span>&nbsp;<span class="op" id="2604843">=</span>&nbsp;<span class="string" id="2604845">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2604903">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2604955">//</span><br>
<span class="lineno"></span><span class="comment" id="2604958">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2605022">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2605081">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2605141">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2605193">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2605255">//</span><br>
<span class="lineno"></span><span class="comment" id="2605258">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2605297">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2605367">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2605444">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2605505">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2605573">//</span><br>
<span class="lineno">30</span><span class="comment" id="2605576">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2605649">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2605720">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2605742">type</span>&nbsp;<span class="ident" id="2605747">Value</span>&nbsp;<span class="keyword" id="2605753">struct</span>&nbsp;<span class="op" id="2605760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605763">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605823">typ</span>&nbsp;<span class="op" id="2605827">*</span><span class="ident" id="2605828">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605836">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605902">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2605968">ptr</span>&nbsp;<span class="ident" id="2605972">unsafe</span><span class="op" id="2605978">.</span><span class="ident" id="2605979">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2605989">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606030">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606065">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606123">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606172">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606226">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606265">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606316">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606370">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606437">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606507">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606570">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606577">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606635">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606704">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606771">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2606839">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2606870">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2606873">type</span>&nbsp;<span class="ident" id="2606878">flag</span>&nbsp;<span class="builtintype" id="2606883">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2606892">const</span>&nbsp;<span class="op" id="2606898">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606901">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2606922">=</span>&nbsp;<span class="num" id="2606924">5</span>&nbsp;<span class="comment" id="2606926">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606949">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2606965">flag</span>&nbsp;<span class="op" id="2606970">=</span>&nbsp;<span class="num" id="2606972">1</span><span class="op" id="2606973">&lt;&lt;</span><span class="ident" id="2606975">flagKindWidth</span>&nbsp;<span class="op" id="2606989">-</span>&nbsp;<span class="num" id="2606991">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2606994">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2607010">flag</span>&nbsp;<span class="op" id="2607015">=</span>&nbsp;<span class="num" id="2607017">1</span>&nbsp;<span class="op" id="2607019">&lt;&lt;</span>&nbsp;<span class="num" id="2607022">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607025">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2607041">flag</span>&nbsp;<span class="op" id="2607046">=</span>&nbsp;<span class="num" id="2607048">1</span>&nbsp;<span class="op" id="2607050">&lt;&lt;</span>&nbsp;<span class="num" id="2607053">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607056">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2607072">flag</span>&nbsp;<span class="op" id="2607077">=</span>&nbsp;<span class="num" id="2607079">1</span>&nbsp;<span class="op" id="2607081">&lt;&lt;</span>&nbsp;<span class="num" id="2607084">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607087">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2607103">flag</span>&nbsp;<span class="op" id="2607108">=</span>&nbsp;<span class="num" id="2607110">1</span>&nbsp;<span class="op" id="2607112">&lt;&lt;</span>&nbsp;<span class="num" id="2607115">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607118">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2607139">=</span>&nbsp;<span class="num" id="2607141">9</span><br>
<span class="lineno"></span><span class="op" id="2607143">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2607146">func</span>&nbsp;<span class="op" id="2607151">(</span><span class="ident" id="2607152">f</span>&nbsp;<span class="ident" id="2607154">flag</span><span class="op" id="2607158">)</span>&nbsp;<span class="ident" id="2607160">kind</span><span class="op" id="2607164">(</span><span class="op" id="2607165">)</span>&nbsp;<span class="ident" id="2607167">Kind</span>&nbsp;<span class="op" id="2607172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607175">return</span>&nbsp;<span class="ident" id="2607182">Kind</span><span class="op" id="2607186">(</span><span class="ident" id="2607187">f</span>&nbsp;<span class="op" id="2607189">&amp;</span>&nbsp;<span class="ident" id="2607191">flagKindMask</span><span class="op" id="2607203">)</span><br>
<span class="lineno">75</span><span class="op" id="2607205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607208">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2607268">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2607327">func</span>&nbsp;<span class="op" id="2607332">(</span><span class="ident" id="2607333">v</span>&nbsp;<span class="ident" id="2607335">Value</span><span class="op" id="2607340">)</span>&nbsp;<span class="ident" id="2607342">pointer</span><span class="op" id="2607349">(</span><span class="op" id="2607350">)</span>&nbsp;<span class="ident" id="2607352">unsafe</span><span class="op" id="2607358">.</span><span class="ident" id="2607359">Pointer</span>&nbsp;<span class="op" id="2607367">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607370">if</span>&nbsp;<span class="ident" id="2607373">v</span><span class="op" id="2607374">.</span><span class="ident" id="2607375">typ</span><span class="op" id="2607378">.</span><span class="ident" id="2607379">size</span>&nbsp;<span class="op" id="2607384">!=</span>&nbsp;<span class="ident" id="2607387">ptrSize</span>&nbsp;<span class="op" id="2607395">||</span>&nbsp;<span class="op" id="2607398">!</span><span class="ident" id="2607399">v</span><span class="op" id="2607400">.</span><span class="ident" id="2607401">typ</span><span class="op" id="2607404">.</span><span class="ident" id="2607405">pointers</span><span class="op" id="2607413">(</span><span class="op" id="2607414">)</span>&nbsp;<span class="op" id="2607416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607420">panic</span><span class="op" id="2607425">(</span><span class="string" id="2607426">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2607469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607475">if</span>&nbsp;<span class="ident" id="2607478">v</span><span class="op" id="2607479">.</span><span class="ident" id="2607480">flag</span><span class="op" id="2607484">&amp;</span><span class="ident" id="2607485">flagIndir</span>&nbsp;<span class="op" id="2607495">!=</span>&nbsp;<span class="num" id="2607498">0</span>&nbsp;<span class="op" id="2607500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607504">return</span>&nbsp;<span class="op" id="2607511">*</span><span class="op" id="2607512">(</span><span class="op" id="2607513">*</span><span class="ident" id="2607514">unsafe</span><span class="op" id="2607520">.</span><span class="ident" id="2607521">Pointer</span><span class="op" id="2607528">)</span><span class="op" id="2607529">(</span><span class="ident" id="2607530">v</span><span class="op" id="2607531">.</span><span class="ident" id="2607532">ptr</span><span class="op" id="2607535">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607541">return</span>&nbsp;<span class="ident" id="2607548">v</span><span class="op" id="2607549">.</span><span class="ident" id="2607550">ptr</span><br>
<span class="lineno"></span><span class="op" id="2607554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2607557">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2607605">func</span>&nbsp;<span class="ident" id="2607610">packEface</span><span class="op" id="2607619">(</span><span class="ident" id="2607620">v</span>&nbsp;<span class="ident" id="2607622">Value</span><span class="op" id="2607627">)</span>&nbsp;<span class="keyword" id="2607629">interface</span><span class="op" id="2607638">{</span><span class="op" id="2607639">}</span>&nbsp;<span class="op" id="2607641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607644">t</span>&nbsp;<span class="op" id="2607646">:=</span>&nbsp;<span class="ident" id="2607649">v</span><span class="op" id="2607650">.</span><span class="ident" id="2607651">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607656">var</span>&nbsp;<span class="ident" id="2607660">i</span>&nbsp;<span class="keyword" id="2607662">interface</span><span class="op" id="2607671">{</span><span class="op" id="2607672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607675">e</span>&nbsp;<span class="op" id="2607677">:=</span>&nbsp;<span class="op" id="2607680">(</span><span class="op" id="2607681">*</span><span class="ident" id="2607682">emptyInterface</span><span class="op" id="2607696">)</span><span class="op" id="2607697">(</span><span class="ident" id="2607698">unsafe</span><span class="op" id="2607704">.</span><span class="ident" id="2607705">Pointer</span><span class="op" id="2607712">(</span><span class="op" id="2607713">&amp;</span><span class="ident" id="2607714">i</span><span class="op" id="2607715">)</span><span class="op" id="2607716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2607719">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607773">switch</span>&nbsp;<span class="op" id="2607780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607783">case</span>&nbsp;<span class="ident" id="2607788">ifaceIndir</span><span class="op" id="2607798">(</span><span class="ident" id="2607799">t</span><span class="op" id="2607800">)</span><span class="op" id="2607801">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607805">if</span>&nbsp;<span class="ident" id="2607808">v</span><span class="op" id="2607809">.</span><span class="ident" id="2607810">flag</span><span class="op" id="2607814">&amp;</span><span class="ident" id="2607815">flagIndir</span>&nbsp;<span class="op" id="2607825">==</span>&nbsp;<span class="num" id="2607828">0</span>&nbsp;<span class="op" id="2607830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2607835">panic</span><span class="op" id="2607840">(</span><span class="string" id="2607841">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2607852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2607856">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2607860">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2607922">ptr</span>&nbsp;<span class="op" id="2607926">:=</span>&nbsp;<span class="ident" id="2607929">v</span><span class="op" id="2607930">.</span><span class="ident" id="2607931">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2607937">if</span>&nbsp;<span class="ident" id="2607940">v</span><span class="op" id="2607941">.</span><span class="ident" id="2607942">flag</span><span class="op" id="2607946">&amp;</span><span class="ident" id="2607947">flagAddr</span>&nbsp;<span class="op" id="2607956">!=</span>&nbsp;<span class="num" id="2607959">0</span>&nbsp;<span class="op" id="2607961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2607966">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608019">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608062">c</span>&nbsp;<span class="op" id="2608064">:=</span>&nbsp;<span class="ident" id="2608067">unsafe_New</span><span class="op" id="2608077">(</span><span class="ident" id="2608078">t</span><span class="op" id="2608079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608084">memmove</span><span class="op" id="2608091">(</span><span class="ident" id="2608092">c</span><span class="op" id="2608093">,</span>&nbsp;<span class="ident" id="2608095">ptr</span><span class="op" id="2608098">,</span>&nbsp;<span class="ident" id="2608100">t</span><span class="op" id="2608101">.</span><span class="ident" id="2608102">size</span><span class="op" id="2608106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608111">ptr</span>&nbsp;<span class="op" id="2608115">=</span>&nbsp;<span class="ident" id="2608117">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608125">e</span><span class="op" id="2608126">.</span><span class="ident" id="2608127">word</span>&nbsp;<span class="op" id="2608132">=</span>&nbsp;<span class="ident" id="2608134">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608139">case</span>&nbsp;<span class="ident" id="2608144">v</span><span class="op" id="2608145">.</span><span class="ident" id="2608146">flag</span><span class="op" id="2608150">&amp;</span><span class="ident" id="2608151">flagIndir</span>&nbsp;<span class="op" id="2608161">!=</span>&nbsp;<span class="num" id="2608164">0</span><span class="op" id="2608165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608169">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608227">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608288">e</span><span class="op" id="2608289">.</span><span class="ident" id="2608290">word</span>&nbsp;<span class="op" id="2608295">=</span>&nbsp;<span class="op" id="2608297">*</span><span class="op" id="2608298">(</span><span class="op" id="2608299">*</span><span class="ident" id="2608300">unsafe</span><span class="op" id="2608306">.</span><span class="ident" id="2608307">Pointer</span><span class="op" id="2608314">)</span><span class="op" id="2608315">(</span><span class="ident" id="2608316">v</span><span class="op" id="2608317">.</span><span class="ident" id="2608318">ptr</span><span class="op" id="2608321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608324">default</span><span class="op" id="2608331">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608335">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608382">e</span><span class="op" id="2608383">.</span><span class="ident" id="2608384">word</span>&nbsp;<span class="op" id="2608389">=</span>&nbsp;<span class="ident" id="2608391">v</span><span class="op" id="2608392">.</span><span class="ident" id="2608393">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608401">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608465">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608532">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608601">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608622">e</span><span class="op" id="2608623">.</span><span class="ident" id="2608624">typ</span>&nbsp;<span class="op" id="2608628">=</span>&nbsp;<span class="ident" id="2608630">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608633">return</span>&nbsp;<span class="ident" id="2608640">i</span><br>
<span class="lineno"></span><span class="op" id="2608642">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2608645">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2608703">func</span>&nbsp;<span class="ident" id="2608708">unpackEface</span><span class="op" id="2608719">(</span><span class="ident" id="2608720">i</span>&nbsp;<span class="keyword" id="2608722">interface</span><span class="op" id="2608731">{</span><span class="op" id="2608732">}</span><span class="op" id="2608733">)</span>&nbsp;<span class="ident" id="2608735">Value</span>&nbsp;<span class="op" id="2608741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608744">e</span>&nbsp;<span class="op" id="2608746">:=</span>&nbsp;<span class="op" id="2608749">(</span><span class="op" id="2608750">*</span><span class="ident" id="2608751">emptyInterface</span><span class="op" id="2608765">)</span><span class="op" id="2608766">(</span><span class="ident" id="2608767">unsafe</span><span class="op" id="2608773">.</span><span class="ident" id="2608774">Pointer</span><span class="op" id="2608781">(</span><span class="op" id="2608782">&amp;</span><span class="ident" id="2608783">i</span><span class="op" id="2608784">)</span><span class="op" id="2608785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2608788">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608869">t</span>&nbsp;<span class="op" id="2608871">:=</span>&nbsp;<span class="ident" id="2608874">e</span><span class="op" id="2608875">.</span><span class="ident" id="2608876">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608881">if</span>&nbsp;<span class="ident" id="2608884">t</span>&nbsp;<span class="op" id="2608886">==</span>&nbsp;<span class="ident" id="2608889">nil</span>&nbsp;<span class="op" id="2608893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608897">return</span>&nbsp;<span class="ident" id="2608904">Value</span><span class="op" id="2608909">{</span><span class="op" id="2608910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608916">f</span>&nbsp;<span class="op" id="2608918">:=</span>&nbsp;<span class="ident" id="2608921">flag</span><span class="op" id="2608925">(</span><span class="ident" id="2608926">t</span><span class="op" id="2608927">.</span><span class="ident" id="2608928">Kind</span><span class="op" id="2608932">(</span><span class="op" id="2608933">)</span><span class="op" id="2608934">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608937">if</span>&nbsp;<span class="ident" id="2608940">ifaceIndir</span><span class="op" id="2608950">(</span><span class="ident" id="2608951">t</span><span class="op" id="2608952">)</span>&nbsp;<span class="op" id="2608954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2608958">f</span>&nbsp;<span class="op" id="2608960">|=</span>&nbsp;<span class="ident" id="2608963">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2608974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2608977">return</span>&nbsp;<span class="ident" id="2608984">Value</span><span class="op" id="2608989">{</span><span class="ident" id="2608990">t</span><span class="op" id="2608991">,</span>&nbsp;<span class="ident" id="2608993">unsafe</span><span class="op" id="2608999">.</span><span class="ident" id="2609000">Pointer</span><span class="op" id="2609007">(</span><span class="ident" id="2609008">e</span><span class="op" id="2609009">.</span><span class="ident" id="2609010">word</span><span class="op" id="2609014">)</span><span class="op" id="2609015">,</span>&nbsp;<span class="ident" id="2609017">f</span><span class="op" id="2609018">}</span><br>
<span class="lineno"></span><span class="op" id="2609020">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2609023">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2609080">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2609144">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2609182">type</span>&nbsp;<span class="ident" id="2609187">ValueError</span>&nbsp;<span class="keyword" id="2609198">struct</span>&nbsp;<span class="op" id="2609205">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609208">Method</span>&nbsp;<span class="builtintype" id="2609215">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609223">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2609230">Kind</span><br>
<span class="lineno"></span><span class="op" id="2609235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2609238">func</span>&nbsp;<span class="op" id="2609243">(</span><span class="ident" id="2609244">e</span>&nbsp;<span class="op" id="2609246">*</span><span class="ident" id="2609247">ValueError</span><span class="op" id="2609257">)</span>&nbsp;<span class="ident" id="2609259">Error</span><span class="op" id="2609264">(</span><span class="op" id="2609265">)</span>&nbsp;<span class="builtintype" id="2609267">string</span>&nbsp;<span class="op" id="2609274">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609277">if</span>&nbsp;<span class="ident" id="2609280">e</span><span class="op" id="2609281">.</span><span class="ident" id="2609282">Kind</span>&nbsp;<span class="op" id="2609287">==</span>&nbsp;<span class="num" id="2609290">0</span>&nbsp;<span class="op" id="2609292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609296">return</span>&nbsp;<span class="string" id="2609303">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2609323">+</span>&nbsp;<span class="ident" id="2609325">e</span><span class="op" id="2609326">.</span><span class="ident" id="2609327">Method</span>&nbsp;<span class="op" id="2609334">+</span>&nbsp;<span class="string" id="2609336">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2609354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609357">return</span>&nbsp;<span class="string" id="2609364">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2609384">+</span>&nbsp;<span class="ident" id="2609386">e</span><span class="op" id="2609387">.</span><span class="ident" id="2609388">Method</span>&nbsp;<span class="op" id="2609395">+</span>&nbsp;<span class="string" id="2609397">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2609404">+</span>&nbsp;<span class="ident" id="2609406">e</span><span class="op" id="2609407">.</span><span class="ident" id="2609408">Kind</span><span class="op" id="2609412">.</span><span class="ident" id="2609413">String</span><span class="op" id="2609419">(</span><span class="op" id="2609420">)</span>&nbsp;<span class="op" id="2609422">+</span>&nbsp;<span class="string" id="2609424">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2609433">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2609436">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2609490">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2609531">func</span>&nbsp;<span class="ident" id="2609536">methodName</span><span class="op" id="2609546">(</span><span class="op" id="2609547">)</span>&nbsp;<span class="builtintype" id="2609549">string</span>&nbsp;<span class="op" id="2609556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609559">pc</span><span class="op" id="2609561">,</span>&nbsp;<span class="ident" id="2609563">_</span><span class="op" id="2609564">,</span>&nbsp;<span class="ident" id="2609566">_</span><span class="op" id="2609567">,</span>&nbsp;<span class="ident" id="2609569">_</span>&nbsp;<span class="op" id="2609571">:=</span>&nbsp;<span class="ident" id="2609574">runtime</span><span class="op" id="2609581">.</span><span class="ident" id="2609582">Caller</span><span class="op" id="2609588">(</span><span class="num" id="2609589">2</span><span class="op" id="2609590">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609593">f</span>&nbsp;<span class="op" id="2609595">:=</span>&nbsp;<span class="ident" id="2609598">runtime</span><span class="op" id="2609605">.</span><span class="ident" id="2609606">FuncForPC</span><span class="op" id="2609615">(</span><span class="ident" id="2609616">pc</span><span class="op" id="2609618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609621">if</span>&nbsp;<span class="ident" id="2609624">f</span>&nbsp;<span class="op" id="2609626">==</span>&nbsp;<span class="ident" id="2609629">nil</span>&nbsp;<span class="op" id="2609633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609637">return</span>&nbsp;<span class="string" id="2609644">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2609662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2609665">return</span>&nbsp;<span class="ident" id="2609672">f</span><span class="op" id="2609673">.</span><span class="ident" id="2609674">Name</span><span class="op" id="2609678">(</span><span class="op" id="2609679">)</span><br>
<span class="lineno">165</span><span class="op" id="2609681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2609684">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2609742">type</span>&nbsp;<span class="ident" id="2609747">emptyInterface</span>&nbsp;<span class="keyword" id="2609762">struct</span>&nbsp;<span class="op" id="2609769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609772">typ</span>&nbsp;&nbsp;<span class="op" id="2609777">*</span><span class="ident" id="2609778">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609785">word</span>&nbsp;<span class="ident" id="2609790">unsafe</span><span class="op" id="2609796">.</span><span class="ident" id="2609797">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2609805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2609808">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2609879">type</span>&nbsp;<span class="ident" id="2609884">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2609902">struct</span>&nbsp;<span class="op" id="2609909">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2609912">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609945">itab</span>&nbsp;<span class="op" id="2609950">*</span><span class="keyword" id="2609951">struct</span>&nbsp;<span class="op" id="2609958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2609962">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2609969">*</span><span class="ident" id="2609970">rtype</span>&nbsp;<span class="comment" id="2609976">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610003">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2610010">*</span><span class="ident" id="2610011">rtype</span>&nbsp;<span class="comment" id="2610017">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610044">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2610051">unsafe</span><span class="op" id="2610057">.</span><span class="ident" id="2610058">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610068">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2610075">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610083">unused</span>&nbsp;<span class="builtintype" id="2610090">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610098">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2610105">[</span><span class="num" id="2610106">100000</span><span class="op" id="2610112">]</span><span class="ident" id="2610113">unsafe</span><span class="op" id="2610119">.</span><span class="ident" id="2610120">Pointer</span>&nbsp;<span class="comment" id="2610128">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2610148">word</span>&nbsp;<span class="ident" id="2610153">unsafe</span><span class="op" id="2610159">.</span><span class="ident" id="2610160">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2610168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2610171">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2610217">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2610269">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2610326">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2610384">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2610443">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2610486">func</span>&nbsp;<span class="op" id="2610491">(</span><span class="ident" id="2610492">f</span>&nbsp;<span class="ident" id="2610494">flag</span><span class="op" id="2610498">)</span>&nbsp;<span class="ident" id="2610500">mustBe</span><span class="op" id="2610506">(</span><span class="ident" id="2610507">expected</span>&nbsp;<span class="ident" id="2610516">Kind</span><span class="op" id="2610520">)</span>&nbsp;<span class="op" id="2610522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610525">if</span>&nbsp;<span class="ident" id="2610528">f</span><span class="op" id="2610529">.</span><span class="ident" id="2610530">kind</span><span class="op" id="2610534">(</span><span class="op" id="2610535">)</span>&nbsp;<span class="op" id="2610537">!=</span>&nbsp;<span class="ident" id="2610540">expected</span>&nbsp;<span class="op" id="2610549">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2610553">panic</span><span class="op" id="2610558">(</span><span class="op" id="2610559">&amp;</span><span class="ident" id="2610560">ValueError</span><span class="op" id="2610570">{</span><span class="ident" id="2610571">methodName</span><span class="op" id="2610581">(</span><span class="op" id="2610582">)</span><span class="op" id="2610583">,</span>&nbsp;<span class="ident" id="2610585">f</span><span class="op" id="2610586">.</span><span class="ident" id="2610587">kind</span><span class="op" id="2610591">(</span><span class="op" id="2610592">)</span><span class="op" id="2610593">}</span><span class="op" id="2610594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610597">}</span><br>
<span class="lineno"></span><span class="op" id="2610599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2610602">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2610674">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2610698">func</span>&nbsp;<span class="op" id="2610703">(</span><span class="ident" id="2610704">f</span>&nbsp;<span class="ident" id="2610706">flag</span><span class="op" id="2610710">)</span>&nbsp;<span class="ident" id="2610712">mustBeExported</span><span class="op" id="2610726">(</span><span class="op" id="2610727">)</span>&nbsp;<span class="op" id="2610729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610732">if</span>&nbsp;<span class="ident" id="2610735">f</span>&nbsp;<span class="op" id="2610737">==</span>&nbsp;<span class="num" id="2610740">0</span>&nbsp;<span class="op" id="2610742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2610746">panic</span><span class="op" id="2610751">(</span><span class="op" id="2610752">&amp;</span><span class="ident" id="2610753">ValueError</span><span class="op" id="2610763">{</span><span class="ident" id="2610764">methodName</span><span class="op" id="2610774">(</span><span class="op" id="2610775">)</span><span class="op" id="2610776">,</span>&nbsp;<span class="num" id="2610778">0</span><span class="op" id="2610779">}</span><span class="op" id="2610780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610783">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2610786">if</span>&nbsp;<span class="ident" id="2610789">f</span><span class="op" id="2610790">&amp;</span><span class="ident" id="2610791">flagRO</span>&nbsp;<span class="op" id="2610798">!=</span>&nbsp;<span class="num" id="2610801">0</span>&nbsp;<span class="op" id="2610803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2610807">panic</span><span class="op" id="2610812">(</span><span class="string" id="2610813">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2610825">+</span>&nbsp;<span class="ident" id="2610827">methodName</span><span class="op" id="2610837">(</span><span class="op" id="2610838">)</span>&nbsp;<span class="op" id="2610840">+</span>&nbsp;<span class="string" id="2610842">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2610888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2610891">}</span><br>
<span class="lineno"></span><span class="op" id="2610893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2610896">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2610970">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2611043">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2611072">func</span>&nbsp;<span class="op" id="2611077">(</span><span class="ident" id="2611078">f</span>&nbsp;<span class="ident" id="2611080">flag</span><span class="op" id="2611084">)</span>&nbsp;<span class="ident" id="2611086">mustBeAssignable</span><span class="op" id="2611102">(</span><span class="op" id="2611103">)</span>&nbsp;<span class="op" id="2611105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611108">if</span>&nbsp;<span class="ident" id="2611111">f</span>&nbsp;<span class="op" id="2611113">==</span>&nbsp;<span class="num" id="2611116">0</span>&nbsp;<span class="op" id="2611118">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611122">panic</span><span class="op" id="2611127">(</span><span class="op" id="2611128">&amp;</span><span class="ident" id="2611129">ValueError</span><span class="op" id="2611139">{</span><span class="ident" id="2611140">methodName</span><span class="op" id="2611150">(</span><span class="op" id="2611151">)</span><span class="op" id="2611152">,</span>&nbsp;<span class="ident" id="2611154">Invalid</span><span class="op" id="2611161">}</span><span class="op" id="2611162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2611168">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611217">if</span>&nbsp;<span class="ident" id="2611220">f</span><span class="op" id="2611221">&amp;</span><span class="ident" id="2611222">flagRO</span>&nbsp;<span class="op" id="2611229">!=</span>&nbsp;<span class="num" id="2611232">0</span>&nbsp;<span class="op" id="2611234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611238">panic</span><span class="op" id="2611243">(</span><span class="string" id="2611244">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2611256">+</span>&nbsp;<span class="ident" id="2611258">methodName</span><span class="op" id="2611268">(</span><span class="op" id="2611269">)</span>&nbsp;<span class="op" id="2611271">+</span>&nbsp;<span class="string" id="2611273">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2611319">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611325">if</span>&nbsp;<span class="ident" id="2611328">f</span><span class="op" id="2611329">&amp;</span><span class="ident" id="2611330">flagAddr</span>&nbsp;<span class="op" id="2611339">==</span>&nbsp;<span class="num" id="2611342">0</span>&nbsp;<span class="op" id="2611344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611348">panic</span><span class="op" id="2611353">(</span><span class="string" id="2611354">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2611366">+</span>&nbsp;<span class="ident" id="2611368">methodName</span><span class="op" id="2611378">(</span><span class="op" id="2611379">)</span>&nbsp;<span class="op" id="2611381">+</span>&nbsp;<span class="string" id="2611383">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2611411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611414">}</span><br>
<span class="lineno"></span><span class="op" id="2611416">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2611419">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2611482">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2611523">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2611587">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2611649">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2611670">func</span>&nbsp;<span class="op" id="2611675">(</span><span class="ident" id="2611676">v</span>&nbsp;<span class="ident" id="2611678">Value</span><span class="op" id="2611683">)</span>&nbsp;<span class="ident" id="2611685">Addr</span><span class="op" id="2611689">(</span><span class="op" id="2611690">)</span>&nbsp;<span class="ident" id="2611692">Value</span>&nbsp;<span class="op" id="2611698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611701">if</span>&nbsp;<span class="ident" id="2611704">v</span><span class="op" id="2611705">.</span><span class="ident" id="2611706">flag</span><span class="op" id="2611710">&amp;</span><span class="ident" id="2611711">flagAddr</span>&nbsp;<span class="op" id="2611720">==</span>&nbsp;<span class="num" id="2611723">0</span>&nbsp;<span class="op" id="2611725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2611729">panic</span><span class="op" id="2611734">(</span><span class="string" id="2611735">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2611778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2611781">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611784">return</span>&nbsp;<span class="ident" id="2611791">Value</span><span class="op" id="2611796">{</span><span class="ident" id="2611797">v</span><span class="op" id="2611798">.</span><span class="ident" id="2611799">typ</span><span class="op" id="2611802">.</span><span class="ident" id="2611803">ptrTo</span><span class="op" id="2611808">(</span><span class="op" id="2611809">)</span><span class="op" id="2611810">,</span>&nbsp;<span class="ident" id="2611812">v</span><span class="op" id="2611813">.</span><span class="ident" id="2611814">ptr</span><span class="op" id="2611817">,</span>&nbsp;<span class="op" id="2611819">(</span><span class="ident" id="2611820">v</span><span class="op" id="2611821">.</span><span class="ident" id="2611822">flag</span>&nbsp;<span class="op" id="2611827">&amp;</span>&nbsp;<span class="ident" id="2611829">flagRO</span><span class="op" id="2611835">)</span>&nbsp;<span class="op" id="2611837">|</span>&nbsp;<span class="ident" id="2611839">flag</span><span class="op" id="2611843">(</span><span class="ident" id="2611844">Ptr</span><span class="op" id="2611847">)</span><span class="op" id="2611848">}</span><br>
<span class="lineno"></span><span class="op" id="2611850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2611853">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2611891">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2611929">func</span>&nbsp;<span class="op" id="2611934">(</span><span class="ident" id="2611935">v</span>&nbsp;<span class="ident" id="2611937">Value</span><span class="op" id="2611942">)</span>&nbsp;<span class="ident" id="2611944">Bool</span><span class="op" id="2611948">(</span><span class="op" id="2611949">)</span>&nbsp;<span class="builtintype" id="2611951">bool</span>&nbsp;<span class="op" id="2611956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2611959">v</span><span class="op" id="2611960">.</span><span class="ident" id="2611961">mustBe</span><span class="op" id="2611967">(</span><span class="ident" id="2611968">Bool</span><span class="op" id="2611972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2611975">return</span>&nbsp;<span class="op" id="2611982">*</span><span class="op" id="2611983">(</span><span class="op" id="2611984">*</span><span class="builtintype" id="2611985">bool</span><span class="op" id="2611989">)</span><span class="op" id="2611990">(</span><span class="ident" id="2611991">v</span><span class="op" id="2611992">.</span><span class="ident" id="2611993">ptr</span><span class="op" id="2611996">)</span><br>
<span class="lineno"></span><span class="op" id="2611998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2612001">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2612040">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2612102">func</span>&nbsp;<span class="op" id="2612107">(</span><span class="ident" id="2612108">v</span>&nbsp;<span class="ident" id="2612110">Value</span><span class="op" id="2612115">)</span>&nbsp;<span class="ident" id="2612117">Bytes</span><span class="op" id="2612122">(</span><span class="op" id="2612123">)</span>&nbsp;<span class="op" id="2612125">[</span><span class="op" id="2612126">]</span><span class="builtintype" id="2612127">byte</span>&nbsp;<span class="op" id="2612132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612135">v</span><span class="op" id="2612136">.</span><span class="ident" id="2612137">mustBe</span><span class="op" id="2612143">(</span><span class="ident" id="2612144">Slice</span><span class="op" id="2612149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612152">if</span>&nbsp;<span class="ident" id="2612155">v</span><span class="op" id="2612156">.</span><span class="ident" id="2612157">typ</span><span class="op" id="2612160">.</span><span class="ident" id="2612161">Elem</span><span class="op" id="2612165">(</span><span class="op" id="2612166">)</span><span class="op" id="2612167">.</span><span class="ident" id="2612168">Kind</span><span class="op" id="2612172">(</span><span class="op" id="2612173">)</span>&nbsp;<span class="op" id="2612175">!=</span>&nbsp;<span class="ident" id="2612178">Uint8</span>&nbsp;<span class="op" id="2612184">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2612188">panic</span><span class="op" id="2612193">(</span><span class="string" id="2612194">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2612233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612239">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612297">return</span>&nbsp;<span class="op" id="2612304">*</span><span class="op" id="2612305">(</span><span class="op" id="2612306">*</span><span class="op" id="2612307">[</span><span class="op" id="2612308">]</span><span class="builtintype" id="2612309">byte</span><span class="op" id="2612313">)</span><span class="op" id="2612314">(</span><span class="ident" id="2612315">v</span><span class="op" id="2612316">.</span><span class="ident" id="2612317">ptr</span><span class="op" id="2612320">)</span><br>
<span class="lineno"></span><span class="op" id="2612322">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2612325">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2612364">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2612435">func</span>&nbsp;<span class="op" id="2612440">(</span><span class="ident" id="2612441">v</span>&nbsp;<span class="ident" id="2612443">Value</span><span class="op" id="2612448">)</span>&nbsp;<span class="ident" id="2612450">runes</span><span class="op" id="2612455">(</span><span class="op" id="2612456">)</span>&nbsp;<span class="op" id="2612458">[</span><span class="op" id="2612459">]</span><span class="builtintype" id="2612460">rune</span>&nbsp;<span class="op" id="2612465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2612468">v</span><span class="op" id="2612469">.</span><span class="ident" id="2612470">mustBe</span><span class="op" id="2612476">(</span><span class="ident" id="2612477">Slice</span><span class="op" id="2612482">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612485">if</span>&nbsp;<span class="ident" id="2612488">v</span><span class="op" id="2612489">.</span><span class="ident" id="2612490">typ</span><span class="op" id="2612493">.</span><span class="ident" id="2612494">Elem</span><span class="op" id="2612498">(</span><span class="op" id="2612499">)</span><span class="op" id="2612500">.</span><span class="ident" id="2612501">Kind</span><span class="op" id="2612505">(</span><span class="op" id="2612506">)</span>&nbsp;<span class="op" id="2612508">!=</span>&nbsp;<span class="ident" id="2612511">Int32</span>&nbsp;<span class="op" id="2612517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2612521">panic</span><span class="op" id="2612526">(</span><span class="string" id="2612527">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2612566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2612569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2612572">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2612630">return</span>&nbsp;<span class="op" id="2612637">*</span><span class="op" id="2612638">(</span><span class="op" id="2612639">*</span><span class="op" id="2612640">[</span><span class="op" id="2612641">]</span><span class="builtintype" id="2612642">rune</span><span class="op" id="2612646">)</span><span class="op" id="2612647">(</span><span class="ident" id="2612648">v</span><span class="op" id="2612649">.</span><span class="ident" id="2612650">ptr</span><span class="op" id="2612653">)</span><br>
<span class="lineno">265</span><span class="op" id="2612655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2612658">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2612732">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2612804">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2612866">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2612945">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2612999">func</span>&nbsp;<span class="op" id="2613004">(</span><span class="ident" id="2613005">v</span>&nbsp;<span class="ident" id="2613007">Value</span><span class="op" id="2613012">)</span>&nbsp;<span class="ident" id="2613014">CanAddr</span><span class="op" id="2613021">(</span><span class="op" id="2613022">)</span>&nbsp;<span class="builtintype" id="2613024">bool</span>&nbsp;<span class="op" id="2613029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613032">return</span>&nbsp;<span class="ident" id="2613039">v</span><span class="op" id="2613040">.</span><span class="ident" id="2613041">flag</span><span class="op" id="2613045">&amp;</span><span class="ident" id="2613046">flagAddr</span>&nbsp;<span class="op" id="2613055">!=</span>&nbsp;<span class="num" id="2613058">0</span><br>
<span class="lineno"></span><span class="op" id="2613060">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2613063">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2613120">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2613184">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2613236">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2613297">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2613345">func</span>&nbsp;<span class="op" id="2613350">(</span><span class="ident" id="2613351">v</span>&nbsp;<span class="ident" id="2613353">Value</span><span class="op" id="2613358">)</span>&nbsp;<span class="ident" id="2613360">CanSet</span><span class="op" id="2613366">(</span><span class="op" id="2613367">)</span>&nbsp;<span class="builtintype" id="2613369">bool</span>&nbsp;<span class="op" id="2613374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613377">return</span>&nbsp;<span class="ident" id="2613384">v</span><span class="op" id="2613385">.</span><span class="ident" id="2613386">flag</span><span class="op" id="2613390">&amp;</span><span class="op" id="2613391">(</span><span class="ident" id="2613392">flagAddr</span><span class="op" id="2613400">|</span><span class="ident" id="2613401">flagRO</span><span class="op" id="2613407">)</span>&nbsp;<span class="op" id="2613409">==</span>&nbsp;<span class="ident" id="2613412">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2613421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2613424">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2613482">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2613573">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2613613">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2613657">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2613716">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2613773">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2613847">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2613895">func</span>&nbsp;<span class="op" id="2613900">(</span><span class="ident" id="2613901">v</span>&nbsp;<span class="ident" id="2613903">Value</span><span class="op" id="2613908">)</span>&nbsp;<span class="ident" id="2613910">Call</span><span class="op" id="2613914">(</span><span class="ident" id="2613915">in</span>&nbsp;<span class="op" id="2613918">[</span><span class="op" id="2613919">]</span><span class="ident" id="2613920">Value</span><span class="op" id="2613925">)</span>&nbsp;<span class="op" id="2613927">[</span><span class="op" id="2613928">]</span><span class="ident" id="2613929">Value</span>&nbsp;<span class="op" id="2613935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613938">v</span><span class="op" id="2613939">.</span><span class="ident" id="2613940">mustBe</span><span class="op" id="2613946">(</span><span class="ident" id="2613947">Func</span><span class="op" id="2613951">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2613954">v</span><span class="op" id="2613955">.</span><span class="ident" id="2613956">mustBeExported</span><span class="op" id="2613970">(</span><span class="op" id="2613971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2613974">return</span>&nbsp;<span class="ident" id="2613981">v</span><span class="op" id="2613982">.</span><span class="ident" id="2613983">call</span><span class="op" id="2613987">(</span><span class="string" id="2613988">&#34;Call&#34;</span><span class="op" id="2613994">,</span>&nbsp;<span class="ident" id="2613996">in</span><span class="op" id="2613998">)</span><br>
<span class="lineno"></span><span class="op" id="2614000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2614003">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2614075">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2614144">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2614238">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2614302">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2614346">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2614405">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2614462">func</span>&nbsp;<span class="op" id="2614467">(</span><span class="ident" id="2614468">v</span>&nbsp;<span class="ident" id="2614470">Value</span><span class="op" id="2614475">)</span>&nbsp;<span class="ident" id="2614477">CallSlice</span><span class="op" id="2614486">(</span><span class="ident" id="2614487">in</span>&nbsp;<span class="op" id="2614490">[</span><span class="op" id="2614491">]</span><span class="ident" id="2614492">Value</span><span class="op" id="2614497">)</span>&nbsp;<span class="op" id="2614499">[</span><span class="op" id="2614500">]</span><span class="ident" id="2614501">Value</span>&nbsp;<span class="op" id="2614507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614510">v</span><span class="op" id="2614511">.</span><span class="ident" id="2614512">mustBe</span><span class="op" id="2614518">(</span><span class="ident" id="2614519">Func</span><span class="op" id="2614523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614526">v</span><span class="op" id="2614527">.</span><span class="ident" id="2614528">mustBeExported</span><span class="op" id="2614542">(</span><span class="op" id="2614543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614546">return</span>&nbsp;<span class="ident" id="2614553">v</span><span class="op" id="2614554">.</span><span class="ident" id="2614555">call</span><span class="op" id="2614559">(</span><span class="string" id="2614560">&#34;CallSlice&#34;</span><span class="op" id="2614571">,</span>&nbsp;<span class="ident" id="2614573">in</span><span class="op" id="2614575">)</span><br>
<span class="lineno">310</span><span class="op" id="2614577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2614580">var</span>&nbsp;<span class="ident" id="2614584">callGC</span>&nbsp;<span class="builtintype" id="2614591">bool</span>&nbsp;<span class="comment" id="2614596">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2614636">func</span>&nbsp;<span class="op" id="2614641">(</span><span class="ident" id="2614642">v</span>&nbsp;<span class="ident" id="2614644">Value</span><span class="op" id="2614649">)</span>&nbsp;<span class="ident" id="2614651">call</span><span class="op" id="2614655">(</span><span class="ident" id="2614656">op</span>&nbsp;<span class="builtintype" id="2614659">string</span><span class="op" id="2614665">,</span>&nbsp;<span class="ident" id="2614667">in</span>&nbsp;<span class="op" id="2614670">[</span><span class="op" id="2614671">]</span><span class="ident" id="2614672">Value</span><span class="op" id="2614677">)</span>&nbsp;<span class="op" id="2614679">[</span><span class="op" id="2614680">]</span><span class="ident" id="2614681">Value</span>&nbsp;<span class="op" id="2614687">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2614690">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614722">t</span>&nbsp;<span class="op" id="2614724">:=</span>&nbsp;<span class="ident" id="2614727">v</span><span class="op" id="2614728">.</span><span class="ident" id="2614729">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614734">var</span>&nbsp;<span class="op" id="2614738">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614742">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2614751">unsafe</span><span class="op" id="2614757">.</span><span class="ident" id="2614758">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614768">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2614777">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614785">rcvrtype</span>&nbsp;<span class="op" id="2614794">*</span><span class="ident" id="2614795">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2614805">if</span>&nbsp;<span class="ident" id="2614808">v</span><span class="op" id="2614809">.</span><span class="ident" id="2614810">flag</span><span class="op" id="2614814">&amp;</span><span class="ident" id="2614815">flagMethod</span>&nbsp;<span class="op" id="2614826">!=</span>&nbsp;<span class="num" id="2614829">0</span>&nbsp;<span class="op" id="2614831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614835">rcvr</span>&nbsp;<span class="op" id="2614840">=</span>&nbsp;<span class="ident" id="2614842">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614846">rcvrtype</span><span class="op" id="2614854">,</span>&nbsp;<span class="ident" id="2614856">t</span><span class="op" id="2614857">,</span>&nbsp;<span class="ident" id="2614859">fn</span>&nbsp;<span class="op" id="2614862">=</span>&nbsp;<span class="ident" id="2614864">methodReceiver</span><span class="op" id="2614878">(</span><span class="ident" id="2614879">op</span><span class="op" id="2614881">,</span>&nbsp;<span class="ident" id="2614883">v</span><span class="op" id="2614884">,</span>&nbsp;<span class="builtintype" id="2614886">int</span><span class="op" id="2614889">(</span><span class="ident" id="2614890">v</span><span class="op" id="2614891">.</span><span class="ident" id="2614892">flag</span><span class="op" id="2614896">)</span><span class="op" id="2614897">&gt;&gt;</span><span class="ident" id="2614899">flagMethodShift</span><span class="op" id="2614914">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614917">}</span>&nbsp;<span class="keyword" id="2614919">else</span>&nbsp;<span class="keyword" id="2614924">if</span>&nbsp;<span class="ident" id="2614927">v</span><span class="op" id="2614928">.</span><span class="ident" id="2614929">flag</span><span class="op" id="2614933">&amp;</span><span class="ident" id="2614934">flagIndir</span>&nbsp;<span class="op" id="2614944">!=</span>&nbsp;<span class="num" id="2614947">0</span>&nbsp;<span class="op" id="2614949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614953">fn</span>&nbsp;<span class="op" id="2614956">=</span>&nbsp;<span class="op" id="2614958">*</span><span class="op" id="2614959">(</span><span class="op" id="2614960">*</span><span class="ident" id="2614961">unsafe</span><span class="op" id="2614967">.</span><span class="ident" id="2614968">Pointer</span><span class="op" id="2614975">)</span><span class="op" id="2614976">(</span><span class="ident" id="2614977">v</span><span class="op" id="2614978">.</span><span class="ident" id="2614979">ptr</span><span class="op" id="2614982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2614985">}</span>&nbsp;<span class="keyword" id="2614987">else</span>&nbsp;<span class="op" id="2614992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2614996">fn</span>&nbsp;<span class="op" id="2614999">=</span>&nbsp;<span class="ident" id="2615001">v</span><span class="op" id="2615002">.</span><span class="ident" id="2615003">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615008">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615012">if</span>&nbsp;<span class="ident" id="2615015">fn</span>&nbsp;<span class="op" id="2615018">==</span>&nbsp;<span class="ident" id="2615021">nil</span>&nbsp;<span class="op" id="2615025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615029">panic</span><span class="op" id="2615034">(</span><span class="string" id="2615035">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2615077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615084">isSlice</span>&nbsp;<span class="op" id="2615092">:=</span>&nbsp;<span class="ident" id="2615095">op</span>&nbsp;<span class="op" id="2615098">==</span>&nbsp;<span class="string" id="2615101">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615114">n</span>&nbsp;<span class="op" id="2615116">:=</span>&nbsp;<span class="ident" id="2615119">t</span><span class="op" id="2615120">.</span><span class="ident" id="2615121">NumIn</span><span class="op" id="2615126">(</span><span class="op" id="2615127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615130">if</span>&nbsp;<span class="ident" id="2615133">isSlice</span>&nbsp;<span class="op" id="2615141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615145">if</span>&nbsp;<span class="op" id="2615148">!</span><span class="ident" id="2615149">t</span><span class="op" id="2615150">.</span><span class="ident" id="2615151">IsVariadic</span><span class="op" id="2615161">(</span><span class="op" id="2615162">)</span>&nbsp;<span class="op" id="2615164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615169">panic</span><span class="op" id="2615174">(</span><span class="string" id="2615175">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2615220">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615228">if</span>&nbsp;<span class="builtinfunc" id="2615231">len</span><span class="op" id="2615234">(</span><span class="ident" id="2615235">in</span><span class="op" id="2615237">)</span>&nbsp;<span class="op" id="2615239">&lt;</span>&nbsp;<span class="ident" id="2615241">n</span>&nbsp;<span class="op" id="2615243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615248">panic</span><span class="op" id="2615253">(</span><span class="string" id="2615254">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2615303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615311">if</span>&nbsp;<span class="builtinfunc" id="2615314">len</span><span class="op" id="2615317">(</span><span class="ident" id="2615318">in</span><span class="op" id="2615320">)</span>&nbsp;<span class="op" id="2615322">&gt;</span>&nbsp;<span class="ident" id="2615324">n</span>&nbsp;<span class="op" id="2615326">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615331">panic</span><span class="op" id="2615336">(</span><span class="string" id="2615337">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2615387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615394">}</span>&nbsp;<span class="keyword" id="2615396">else</span>&nbsp;<span class="op" id="2615401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615405">if</span>&nbsp;<span class="ident" id="2615408">t</span><span class="op" id="2615409">.</span><span class="ident" id="2615410">IsVariadic</span><span class="op" id="2615420">(</span><span class="op" id="2615421">)</span>&nbsp;<span class="op" id="2615423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615428">n</span><span class="op" id="2615429">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615438">if</span>&nbsp;<span class="builtinfunc" id="2615441">len</span><span class="op" id="2615444">(</span><span class="ident" id="2615445">in</span><span class="op" id="2615447">)</span>&nbsp;<span class="op" id="2615449">&lt;</span>&nbsp;<span class="ident" id="2615451">n</span>&nbsp;<span class="op" id="2615453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615458">panic</span><span class="op" id="2615463">(</span><span class="string" id="2615464">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2615508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615516">if</span>&nbsp;<span class="op" id="2615519">!</span><span class="ident" id="2615520">t</span><span class="op" id="2615521">.</span><span class="ident" id="2615522">IsVariadic</span><span class="op" id="2615532">(</span><span class="op" id="2615533">)</span>&nbsp;<span class="op" id="2615535">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2615538">len</span><span class="op" id="2615541">(</span><span class="ident" id="2615542">in</span><span class="op" id="2615544">)</span>&nbsp;<span class="op" id="2615546">&gt;</span>&nbsp;<span class="ident" id="2615548">n</span>&nbsp;<span class="op" id="2615550">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615555">panic</span><span class="op" id="2615560">(</span><span class="string" id="2615561">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2615606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615616">for</span>&nbsp;<span class="ident" id="2615620">_</span><span class="op" id="2615621">,</span>&nbsp;<span class="ident" id="2615623">x</span>&nbsp;<span class="op" id="2615625">:=</span>&nbsp;<span class="keyword" id="2615628">range</span>&nbsp;<span class="ident" id="2615634">in</span>&nbsp;<span class="op" id="2615637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615641">if</span>&nbsp;<span class="ident" id="2615644">x</span><span class="op" id="2615645">.</span><span class="ident" id="2615646">Kind</span><span class="op" id="2615650">(</span><span class="op" id="2615651">)</span>&nbsp;<span class="op" id="2615653">==</span>&nbsp;<span class="ident" id="2615656">Invalid</span>&nbsp;<span class="op" id="2615664">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615669">panic</span><span class="op" id="2615674">(</span><span class="string" id="2615675">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2615687">+</span>&nbsp;<span class="ident" id="2615689">op</span>&nbsp;<span class="op" id="2615692">+</span>&nbsp;<span class="string" id="2615694">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2615722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615732">for</span>&nbsp;<span class="ident" id="2615736">i</span>&nbsp;<span class="op" id="2615738">:=</span>&nbsp;<span class="num" id="2615741">0</span><span class="op" id="2615742">;</span>&nbsp;<span class="ident" id="2615744">i</span>&nbsp;<span class="op" id="2615746">&lt;</span>&nbsp;<span class="ident" id="2615748">n</span><span class="op" id="2615749">;</span>&nbsp;<span class="ident" id="2615751">i</span><span class="op" id="2615752">++</span>&nbsp;<span class="op" id="2615755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615759">if</span>&nbsp;<span class="ident" id="2615762">xt</span><span class="op" id="2615764">,</span>&nbsp;<span class="ident" id="2615766">targ</span>&nbsp;<span class="op" id="2615771">:=</span>&nbsp;<span class="ident" id="2615774">in</span><span class="op" id="2615776">[</span><span class="ident" id="2615777">i</span><span class="op" id="2615778">]</span><span class="op" id="2615779">.</span><span class="ident" id="2615780">Type</span><span class="op" id="2615784">(</span><span class="op" id="2615785">)</span><span class="op" id="2615786">,</span>&nbsp;<span class="ident" id="2615788">t</span><span class="op" id="2615789">.</span><span class="ident" id="2615790">In</span><span class="op" id="2615792">(</span><span class="ident" id="2615793">i</span><span class="op" id="2615794">)</span><span class="op" id="2615795">;</span>&nbsp;<span class="op" id="2615797">!</span><span class="ident" id="2615798">xt</span><span class="op" id="2615800">.</span><span class="ident" id="2615801">AssignableTo</span><span class="op" id="2615813">(</span><span class="ident" id="2615814">targ</span><span class="op" id="2615818">)</span>&nbsp;<span class="op" id="2615820">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2615825">panic</span><span class="op" id="2615830">(</span><span class="string" id="2615831">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2615843">+</span>&nbsp;<span class="ident" id="2615845">op</span>&nbsp;<span class="op" id="2615848">+</span>&nbsp;<span class="string" id="2615850">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2615860">+</span>&nbsp;<span class="ident" id="2615862">xt</span><span class="op" id="2615864">.</span><span class="ident" id="2615865">String</span><span class="op" id="2615871">(</span><span class="op" id="2615872">)</span>&nbsp;<span class="op" id="2615874">+</span>&nbsp;<span class="string" id="2615876">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2615888">+</span>&nbsp;<span class="ident" id="2615890">targ</span><span class="op" id="2615894">.</span><span class="ident" id="2615895">String</span><span class="op" id="2615901">(</span><span class="op" id="2615902">)</span><span class="op" id="2615903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2615910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2615913">if</span>&nbsp;<span class="op" id="2615916">!</span><span class="ident" id="2615917">isSlice</span>&nbsp;<span class="op" id="2615925">&amp;&amp;</span>&nbsp;<span class="ident" id="2615928">t</span><span class="op" id="2615929">.</span><span class="ident" id="2615930">IsVariadic</span><span class="op" id="2615940">(</span><span class="op" id="2615941">)</span>&nbsp;<span class="op" id="2615943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2615947">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2615987">m</span>&nbsp;<span class="op" id="2615989">:=</span>&nbsp;<span class="builtinfunc" id="2615992">len</span><span class="op" id="2615995">(</span><span class="ident" id="2615996">in</span><span class="op" id="2615998">)</span>&nbsp;<span class="op" id="2616000">-</span>&nbsp;<span class="ident" id="2616002">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616006">slice</span>&nbsp;<span class="op" id="2616012">:=</span>&nbsp;<span class="ident" id="2616015">MakeSlice</span><span class="op" id="2616024">(</span><span class="ident" id="2616025">t</span><span class="op" id="2616026">.</span><span class="ident" id="2616027">In</span><span class="op" id="2616029">(</span><span class="ident" id="2616030">n</span><span class="op" id="2616031">)</span><span class="op" id="2616032">,</span>&nbsp;<span class="ident" id="2616034">m</span><span class="op" id="2616035">,</span>&nbsp;<span class="ident" id="2616037">m</span><span class="op" id="2616038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616042">elem</span>&nbsp;<span class="op" id="2616047">:=</span>&nbsp;<span class="ident" id="2616050">t</span><span class="op" id="2616051">.</span><span class="ident" id="2616052">In</span><span class="op" id="2616054">(</span><span class="ident" id="2616055">n</span><span class="op" id="2616056">)</span><span class="op" id="2616057">.</span><span class="ident" id="2616058">Elem</span><span class="op" id="2616062">(</span><span class="op" id="2616063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616067">for</span>&nbsp;<span class="ident" id="2616071">i</span>&nbsp;<span class="op" id="2616073">:=</span>&nbsp;<span class="num" id="2616076">0</span><span class="op" id="2616077">;</span>&nbsp;<span class="ident" id="2616079">i</span>&nbsp;<span class="op" id="2616081">&lt;</span>&nbsp;<span class="ident" id="2616083">m</span><span class="op" id="2616084">;</span>&nbsp;<span class="ident" id="2616086">i</span><span class="op" id="2616087">++</span>&nbsp;<span class="op" id="2616090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616095">x</span>&nbsp;<span class="op" id="2616097">:=</span>&nbsp;<span class="ident" id="2616100">in</span><span class="op" id="2616102">[</span><span class="ident" id="2616103">n</span><span class="op" id="2616104">+</span><span class="ident" id="2616105">i</span><span class="op" id="2616106">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616111">if</span>&nbsp;<span class="ident" id="2616114">xt</span>&nbsp;<span class="op" id="2616117">:=</span>&nbsp;<span class="ident" id="2616120">x</span><span class="op" id="2616121">.</span><span class="ident" id="2616122">Type</span><span class="op" id="2616126">(</span><span class="op" id="2616127">)</span><span class="op" id="2616128">;</span>&nbsp;<span class="op" id="2616130">!</span><span class="ident" id="2616131">xt</span><span class="op" id="2616133">.</span><span class="ident" id="2616134">AssignableTo</span><span class="op" id="2616146">(</span><span class="ident" id="2616147">elem</span><span class="op" id="2616151">)</span>&nbsp;<span class="op" id="2616153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2616159">panic</span><span class="op" id="2616164">(</span><span class="string" id="2616165">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2616188">+</span>&nbsp;<span class="ident" id="2616190">xt</span><span class="op" id="2616192">.</span><span class="ident" id="2616193">String</span><span class="op" id="2616199">(</span><span class="op" id="2616200">)</span>&nbsp;<span class="op" id="2616202">+</span>&nbsp;<span class="string" id="2616204">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2616216">+</span>&nbsp;<span class="ident" id="2616218">elem</span><span class="op" id="2616222">.</span><span class="ident" id="2616223">String</span><span class="op" id="2616229">(</span><span class="op" id="2616230">)</span>&nbsp;<span class="op" id="2616232">+</span>&nbsp;<span class="string" id="2616234">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2616241">+</span>&nbsp;<span class="ident" id="2616243">op</span><span class="op" id="2616245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2616250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616255">slice</span><span class="op" id="2616260">.</span><span class="ident" id="2616261">Index</span><span class="op" id="2616266">(</span><span class="ident" id="2616267">i</span><span class="op" id="2616268">)</span><span class="op" id="2616269">.</span><span class="ident" id="2616270">Set</span><span class="op" id="2616273">(</span><span class="ident" id="2616274">x</span><span class="op" id="2616275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2616279">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616283">origIn</span>&nbsp;<span class="op" id="2616290">:=</span>&nbsp;<span class="ident" id="2616293">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616298">in</span>&nbsp;<span class="op" id="2616301">=</span>&nbsp;<span class="builtinfunc" id="2616303">make</span><span class="op" id="2616307">(</span><span class="op" id="2616308">[</span><span class="op" id="2616309">]</span><span class="ident" id="2616310">Value</span><span class="op" id="2616315">,</span>&nbsp;<span class="ident" id="2616317">n</span><span class="op" id="2616318">+</span><span class="num" id="2616319">1</span><span class="op" id="2616320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2616324">copy</span><span class="op" id="2616328">(</span><span class="ident" id="2616329">in</span><span class="op" id="2616331">[</span><span class="op" id="2616332">:</span><span class="ident" id="2616333">n</span><span class="op" id="2616334">]</span><span class="op" id="2616335">,</span>&nbsp;<span class="ident" id="2616337">origIn</span><span class="op" id="2616343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616347">in</span><span class="op" id="2616349">[</span><span class="ident" id="2616350">n</span><span class="op" id="2616351">]</span>&nbsp;<span class="op" id="2616353">=</span>&nbsp;<span class="ident" id="2616355">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2616362">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616366">nin</span>&nbsp;<span class="op" id="2616370">:=</span>&nbsp;<span class="builtinfunc" id="2616373">len</span><span class="op" id="2616376">(</span><span class="ident" id="2616377">in</span><span class="op" id="2616379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616382">if</span>&nbsp;<span class="ident" id="2616385">nin</span>&nbsp;<span class="op" id="2616389">!=</span>&nbsp;<span class="ident" id="2616392">t</span><span class="op" id="2616393">.</span><span class="ident" id="2616394">NumIn</span><span class="op" id="2616399">(</span><span class="op" id="2616400">)</span>&nbsp;<span class="op" id="2616402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2616406">panic</span><span class="op" id="2616411">(</span><span class="string" id="2616412">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2616454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2616457">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616460">nout</span>&nbsp;<span class="op" id="2616465">:=</span>&nbsp;<span class="ident" id="2616468">t</span><span class="op" id="2616469">.</span><span class="ident" id="2616470">NumOut</span><span class="op" id="2616476">(</span><span class="op" id="2616477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2616481">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616542">frametype</span><span class="op" id="2616551">,</span>&nbsp;<span class="ident" id="2616553">_</span><span class="op" id="2616554">,</span>&nbsp;<span class="ident" id="2616556">retOffset</span><span class="op" id="2616565">,</span>&nbsp;<span class="ident" id="2616567">_</span>&nbsp;<span class="op" id="2616569">:=</span>&nbsp;<span class="ident" id="2616572">funcLayout</span><span class="op" id="2616582">(</span><span class="ident" id="2616583">t</span><span class="op" id="2616584">,</span>&nbsp;<span class="ident" id="2616586">rcvrtype</span><span class="op" id="2616594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616597">args</span>&nbsp;<span class="op" id="2616602">:=</span>&nbsp;<span class="ident" id="2616605">unsafe_New</span><span class="op" id="2616615">(</span><span class="ident" id="2616616">frametype</span><span class="op" id="2616625">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616628">off</span>&nbsp;<span class="op" id="2616632">:=</span>&nbsp;<span class="builtintype" id="2616635">uintptr</span><span class="op" id="2616642">(</span><span class="num" id="2616643">0</span><span class="op" id="2616644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2616648">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616675">if</span>&nbsp;<span class="ident" id="2616678">rcvrtype</span>&nbsp;<span class="op" id="2616687">!=</span>&nbsp;<span class="ident" id="2616690">nil</span>&nbsp;<span class="op" id="2616694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616698">storeRcvr</span><span class="op" id="2616707">(</span><span class="ident" id="2616708">rcvr</span><span class="op" id="2616712">,</span>&nbsp;<span class="ident" id="2616714">args</span><span class="op" id="2616718">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616722">off</span>&nbsp;<span class="op" id="2616726">=</span>&nbsp;<span class="ident" id="2616728">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2616737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616740">for</span>&nbsp;<span class="ident" id="2616744">i</span><span class="op" id="2616745">,</span>&nbsp;<span class="ident" id="2616747">v</span>&nbsp;<span class="op" id="2616749">:=</span>&nbsp;<span class="keyword" id="2616752">range</span>&nbsp;<span class="ident" id="2616758">in</span>&nbsp;<span class="op" id="2616761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616765">v</span><span class="op" id="2616766">.</span><span class="ident" id="2616767">mustBeExported</span><span class="op" id="2616781">(</span><span class="op" id="2616782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616786">targ</span>&nbsp;<span class="op" id="2616791">:=</span>&nbsp;<span class="ident" id="2616794">t</span><span class="op" id="2616795">.</span><span class="ident" id="2616796">In</span><span class="op" id="2616798">(</span><span class="ident" id="2616799">i</span><span class="op" id="2616800">)</span><span class="op" id="2616801">.</span><span class="op" id="2616802">(</span><span class="op" id="2616803">*</span><span class="ident" id="2616804">rtype</span><span class="op" id="2616809">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616813">a</span>&nbsp;<span class="op" id="2616815">:=</span>&nbsp;<span class="builtintype" id="2616818">uintptr</span><span class="op" id="2616825">(</span><span class="ident" id="2616826">targ</span><span class="op" id="2616830">.</span><span class="ident" id="2616831">align</span><span class="op" id="2616836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616840">off</span>&nbsp;<span class="op" id="2616844">=</span>&nbsp;<span class="op" id="2616846">(</span><span class="ident" id="2616847">off</span>&nbsp;<span class="op" id="2616851">+</span>&nbsp;<span class="ident" id="2616853">a</span>&nbsp;<span class="op" id="2616855">-</span>&nbsp;<span class="num" id="2616857">1</span><span class="op" id="2616858">)</span>&nbsp;<span class="op" id="2616860">&amp;^</span>&nbsp;<span class="op" id="2616863">(</span><span class="ident" id="2616864">a</span>&nbsp;<span class="op" id="2616866">-</span>&nbsp;<span class="num" id="2616868">1</span><span class="op" id="2616869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616873">n</span>&nbsp;<span class="op" id="2616875">:=</span>&nbsp;<span class="ident" id="2616878">targ</span><span class="op" id="2616882">.</span><span class="ident" id="2616883">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616890">addr</span>&nbsp;<span class="op" id="2616895">:=</span>&nbsp;<span class="ident" id="2616898">unsafe</span><span class="op" id="2616904">.</span><span class="ident" id="2616905">Pointer</span><span class="op" id="2616912">(</span><span class="builtintype" id="2616913">uintptr</span><span class="op" id="2616920">(</span><span class="ident" id="2616921">args</span><span class="op" id="2616925">)</span>&nbsp;<span class="op" id="2616927">+</span>&nbsp;<span class="ident" id="2616929">off</span><span class="op" id="2616932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2616936">v</span>&nbsp;<span class="op" id="2616938">=</span>&nbsp;<span class="ident" id="2616940">v</span><span class="op" id="2616941">.</span><span class="ident" id="2616942">assignTo</span><span class="op" id="2616950">(</span><span class="string" id="2616951">&#34;reflect.Value.Call&#34;</span><span class="op" id="2616971">,</span>&nbsp;<span class="ident" id="2616973">targ</span><span class="op" id="2616977">,</span>&nbsp;<span class="ident" id="2616979">addr</span><span class="op" id="2616983">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2616987">if</span>&nbsp;<span class="ident" id="2616990">v</span><span class="op" id="2616991">.</span><span class="ident" id="2616992">flag</span><span class="op" id="2616996">&amp;</span><span class="ident" id="2616997">flagIndir</span>&nbsp;<span class="op" id="2617007">!=</span>&nbsp;<span class="num" id="2617010">0</span>&nbsp;<span class="op" id="2617012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617017">memmove</span><span class="op" id="2617024">(</span><span class="ident" id="2617025">addr</span><span class="op" id="2617029">,</span>&nbsp;<span class="ident" id="2617031">v</span><span class="op" id="2617032">.</span><span class="ident" id="2617033">ptr</span><span class="op" id="2617036">,</span>&nbsp;<span class="ident" id="2617038">n</span><span class="op" id="2617039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617043">}</span>&nbsp;<span class="keyword" id="2617045">else</span>&nbsp;<span class="op" id="2617050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617055">*</span><span class="op" id="2617056">(</span><span class="op" id="2617057">*</span><span class="ident" id="2617058">unsafe</span><span class="op" id="2617064">.</span><span class="ident" id="2617065">Pointer</span><span class="op" id="2617072">)</span><span class="op" id="2617073">(</span><span class="ident" id="2617074">addr</span><span class="op" id="2617078">)</span>&nbsp;<span class="op" id="2617080">=</span>&nbsp;<span class="ident" id="2617082">v</span><span class="op" id="2617083">.</span><span class="ident" id="2617084">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617090">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617094">off</span>&nbsp;<span class="op" id="2617098">+=</span>&nbsp;<span class="ident" id="2617101">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617108">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617118">call</span><span class="op" id="2617122">(</span><span class="ident" id="2617123">fn</span><span class="op" id="2617125">,</span>&nbsp;<span class="ident" id="2617127">args</span><span class="op" id="2617131">,</span>&nbsp;<span class="builtintype" id="2617133">uint32</span><span class="op" id="2617139">(</span><span class="ident" id="2617140">frametype</span><span class="op" id="2617149">.</span><span class="ident" id="2617150">size</span><span class="op" id="2617154">)</span><span class="op" id="2617155">,</span>&nbsp;<span class="builtintype" id="2617157">uint32</span><span class="op" id="2617163">(</span><span class="ident" id="2617164">retOffset</span><span class="op" id="2617173">)</span><span class="op" id="2617174">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617178">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617219">if</span>&nbsp;<span class="ident" id="2617222">callGC</span>&nbsp;<span class="op" id="2617229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617233">runtime</span><span class="op" id="2617240">.</span><span class="ident" id="2617241">GC</span><span class="op" id="2617243">(</span><span class="op" id="2617244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617247">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2617251">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617287">ret</span>&nbsp;<span class="op" id="2617291">:=</span>&nbsp;<span class="builtinfunc" id="2617294">make</span><span class="op" id="2617298">(</span><span class="op" id="2617299">[</span><span class="op" id="2617300">]</span><span class="ident" id="2617301">Value</span><span class="op" id="2617306">,</span>&nbsp;<span class="ident" id="2617308">nout</span><span class="op" id="2617312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617315">off</span>&nbsp;<span class="op" id="2617319">=</span>&nbsp;<span class="ident" id="2617321">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617332">for</span>&nbsp;<span class="ident" id="2617336">i</span>&nbsp;<span class="op" id="2617338">:=</span>&nbsp;<span class="num" id="2617341">0</span><span class="op" id="2617342">;</span>&nbsp;<span class="ident" id="2617344">i</span>&nbsp;<span class="op" id="2617346">&lt;</span>&nbsp;<span class="ident" id="2617348">nout</span><span class="op" id="2617352">;</span>&nbsp;<span class="ident" id="2617354">i</span><span class="op" id="2617355">++</span>&nbsp;<span class="op" id="2617358">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617362">tv</span>&nbsp;<span class="op" id="2617365">:=</span>&nbsp;<span class="ident" id="2617368">t</span><span class="op" id="2617369">.</span><span class="ident" id="2617370">Out</span><span class="op" id="2617373">(</span><span class="ident" id="2617374">i</span><span class="op" id="2617375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617379">a</span>&nbsp;<span class="op" id="2617381">:=</span>&nbsp;<span class="builtintype" id="2617384">uintptr</span><span class="op" id="2617391">(</span><span class="ident" id="2617392">tv</span><span class="op" id="2617394">.</span><span class="ident" id="2617395">Align</span><span class="op" id="2617400">(</span><span class="op" id="2617401">)</span><span class="op" id="2617402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617406">off</span>&nbsp;<span class="op" id="2617410">=</span>&nbsp;<span class="op" id="2617412">(</span><span class="ident" id="2617413">off</span>&nbsp;<span class="op" id="2617417">+</span>&nbsp;<span class="ident" id="2617419">a</span>&nbsp;<span class="op" id="2617421">-</span>&nbsp;<span class="num" id="2617423">1</span><span class="op" id="2617424">)</span>&nbsp;<span class="op" id="2617426">&amp;^</span>&nbsp;<span class="op" id="2617429">(</span><span class="ident" id="2617430">a</span>&nbsp;<span class="op" id="2617432">-</span>&nbsp;<span class="num" id="2617434">1</span><span class="op" id="2617435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617439">fl</span>&nbsp;<span class="op" id="2617442">:=</span>&nbsp;<span class="ident" id="2617445">flagIndir</span>&nbsp;<span class="op" id="2617455">|</span>&nbsp;<span class="ident" id="2617457">flag</span><span class="op" id="2617461">(</span><span class="ident" id="2617462">tv</span><span class="op" id="2617464">.</span><span class="ident" id="2617465">Kind</span><span class="op" id="2617469">(</span><span class="op" id="2617470">)</span><span class="op" id="2617471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617475">ret</span><span class="op" id="2617478">[</span><span class="ident" id="2617479">i</span><span class="op" id="2617480">]</span>&nbsp;<span class="op" id="2617482">=</span>&nbsp;<span class="ident" id="2617484">Value</span><span class="op" id="2617489">{</span><span class="ident" id="2617490">tv</span><span class="op" id="2617492">.</span><span class="ident" id="2617493">common</span><span class="op" id="2617499">(</span><span class="op" id="2617500">)</span><span class="op" id="2617501">,</span>&nbsp;<span class="ident" id="2617503">unsafe</span><span class="op" id="2617509">.</span><span class="ident" id="2617510">Pointer</span><span class="op" id="2617517">(</span><span class="builtintype" id="2617518">uintptr</span><span class="op" id="2617525">(</span><span class="ident" id="2617526">args</span><span class="op" id="2617530">)</span>&nbsp;<span class="op" id="2617532">+</span>&nbsp;<span class="ident" id="2617534">off</span><span class="op" id="2617537">)</span><span class="op" id="2617538">,</span>&nbsp;<span class="ident" id="2617540">fl</span><span class="op" id="2617542">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2617546">off</span>&nbsp;<span class="op" id="2617550">+=</span>&nbsp;<span class="ident" id="2617553">tv</span><span class="op" id="2617555">.</span><span class="ident" id="2617556">Size</span><span class="op" id="2617560">(</span><span class="op" id="2617561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2617564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2617568">return</span>&nbsp;<span class="ident" id="2617575">ret</span><br>
<span class="lineno"></span><span class="op" id="2617579">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2617582">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2617643">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2617707">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2617781">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2617848">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2617918">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2617953">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2618024">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2618091">//</span><br>
<span class="lineno">450</span><span class="comment" id="2618094">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2618170">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2618242">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2618314">func</span>&nbsp;<span class="ident" id="2618319">callReflect</span><span class="op" id="2618330">(</span><span class="ident" id="2618331">ctxt</span>&nbsp;<span class="op" id="2618336">*</span><span class="ident" id="2618337">makeFuncImpl</span><span class="op" id="2618349">,</span>&nbsp;<span class="ident" id="2618351">frame</span>&nbsp;<span class="ident" id="2618357">unsafe</span><span class="op" id="2618363">.</span><span class="ident" id="2618364">Pointer</span><span class="op" id="2618371">)</span>&nbsp;<span class="op" id="2618373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618376">ftyp</span>&nbsp;<span class="op" id="2618381">:=</span>&nbsp;<span class="ident" id="2618384">ctxt</span><span class="op" id="2618388">.</span><span class="ident" id="2618389">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618394">f</span>&nbsp;<span class="op" id="2618396">:=</span>&nbsp;<span class="ident" id="2618399">ctxt</span><span class="op" id="2618403">.</span><span class="ident" id="2618404">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618409">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618446">ptr</span>&nbsp;<span class="op" id="2618450">:=</span>&nbsp;<span class="ident" id="2618453">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618460">off</span>&nbsp;<span class="op" id="2618464">:=</span>&nbsp;<span class="builtintype" id="2618467">uintptr</span><span class="op" id="2618474">(</span><span class="num" id="2618475">0</span><span class="op" id="2618476">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618479">in</span>&nbsp;<span class="op" id="2618482">:=</span>&nbsp;<span class="builtinfunc" id="2618485">make</span><span class="op" id="2618489">(</span><span class="op" id="2618490">[</span><span class="op" id="2618491">]</span><span class="ident" id="2618492">Value</span><span class="op" id="2618497">,</span>&nbsp;<span class="num" id="2618499">0</span><span class="op" id="2618500">,</span>&nbsp;<span class="builtinfunc" id="2618502">len</span><span class="op" id="2618505">(</span><span class="ident" id="2618506">ftyp</span><span class="op" id="2618510">.</span><span class="ident" id="2618511">in</span><span class="op" id="2618513">)</span><span class="op" id="2618514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618517">for</span>&nbsp;<span class="ident" id="2618521">_</span><span class="op" id="2618522">,</span>&nbsp;<span class="ident" id="2618524">arg</span>&nbsp;<span class="op" id="2618528">:=</span>&nbsp;<span class="keyword" id="2618531">range</span>&nbsp;<span class="ident" id="2618537">ftyp</span><span class="op" id="2618541">.</span><span class="ident" id="2618542">in</span>&nbsp;<span class="op" id="2618545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618549">typ</span>&nbsp;<span class="op" id="2618553">:=</span>&nbsp;<span class="ident" id="2618556">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618562">off</span>&nbsp;<span class="op" id="2618566">+=</span>&nbsp;<span class="op" id="2618569">-</span><span class="ident" id="2618570">off</span>&nbsp;<span class="op" id="2618574">&amp;</span>&nbsp;<span class="builtintype" id="2618576">uintptr</span><span class="op" id="2618583">(</span><span class="ident" id="2618584">typ</span><span class="op" id="2618587">.</span><span class="ident" id="2618588">align</span><span class="op" id="2618593">-</span><span class="num" id="2618594">1</span><span class="op" id="2618595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618599">addr</span>&nbsp;<span class="op" id="2618604">:=</span>&nbsp;<span class="ident" id="2618607">unsafe</span><span class="op" id="2618613">.</span><span class="ident" id="2618614">Pointer</span><span class="op" id="2618621">(</span><span class="builtintype" id="2618622">uintptr</span><span class="op" id="2618629">(</span><span class="ident" id="2618630">ptr</span><span class="op" id="2618633">)</span>&nbsp;<span class="op" id="2618635">+</span>&nbsp;<span class="ident" id="2618637">off</span><span class="op" id="2618640">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618644">v</span>&nbsp;<span class="op" id="2618646">:=</span>&nbsp;<span class="ident" id="2618649">Value</span><span class="op" id="2618654">{</span><span class="ident" id="2618655">typ</span><span class="op" id="2618658">,</span>&nbsp;<span class="ident" id="2618660">nil</span><span class="op" id="2618663">,</span>&nbsp;<span class="ident" id="2618665">flag</span><span class="op" id="2618669">(</span><span class="ident" id="2618670">typ</span><span class="op" id="2618673">.</span><span class="ident" id="2618674">Kind</span><span class="op" id="2618678">(</span><span class="op" id="2618679">)</span><span class="op" id="2618680">)</span><span class="op" id="2618681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2618685">if</span>&nbsp;<span class="ident" id="2618688">ifaceIndir</span><span class="op" id="2618698">(</span><span class="ident" id="2618699">typ</span><span class="op" id="2618702">)</span>&nbsp;<span class="op" id="2618704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618709">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618758">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618822">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2618884">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618951">v</span><span class="op" id="2618952">.</span><span class="ident" id="2618953">ptr</span>&nbsp;<span class="op" id="2618957">=</span>&nbsp;<span class="ident" id="2618959">unsafe_New</span><span class="op" id="2618969">(</span><span class="ident" id="2618970">typ</span><span class="op" id="2618973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2618978">memmove</span><span class="op" id="2618985">(</span><span class="ident" id="2618986">v</span><span class="op" id="2618987">.</span><span class="ident" id="2618988">ptr</span><span class="op" id="2618991">,</span>&nbsp;<span class="ident" id="2618993">addr</span><span class="op" id="2618997">,</span>&nbsp;<span class="ident" id="2618999">typ</span><span class="op" id="2619002">.</span><span class="ident" id="2619003">size</span><span class="op" id="2619007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619012">v</span><span class="op" id="2619013">.</span><span class="ident" id="2619014">flag</span>&nbsp;<span class="op" id="2619019">|=</span>&nbsp;<span class="ident" id="2619022">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619034">}</span>&nbsp;<span class="keyword" id="2619036">else</span>&nbsp;<span class="op" id="2619041">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619046">v</span><span class="op" id="2619047">.</span><span class="ident" id="2619048">ptr</span>&nbsp;<span class="op" id="2619052">=</span>&nbsp;<span class="op" id="2619054">*</span><span class="op" id="2619055">(</span><span class="op" id="2619056">*</span><span class="ident" id="2619057">unsafe</span><span class="op" id="2619063">.</span><span class="ident" id="2619064">Pointer</span><span class="op" id="2619071">)</span><span class="op" id="2619072">(</span><span class="ident" id="2619073">addr</span><span class="op" id="2619077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619085">in</span>&nbsp;<span class="op" id="2619088">=</span>&nbsp;<span class="builtinfunc" id="2619090">append</span><span class="op" id="2619096">(</span><span class="ident" id="2619097">in</span><span class="op" id="2619099">,</span>&nbsp;<span class="ident" id="2619101">v</span><span class="op" id="2619102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619106">off</span>&nbsp;<span class="op" id="2619110">+=</span>&nbsp;<span class="ident" id="2619113">typ</span><span class="op" id="2619116">.</span><span class="ident" id="2619117">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619123">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619127">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619157">out</span>&nbsp;<span class="op" id="2619161">:=</span>&nbsp;<span class="ident" id="2619164">f</span><span class="op" id="2619165">(</span><span class="ident" id="2619166">in</span><span class="op" id="2619168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619171">if</span>&nbsp;<span class="builtinfunc" id="2619174">len</span><span class="op" id="2619177">(</span><span class="ident" id="2619178">out</span><span class="op" id="2619181">)</span>&nbsp;<span class="op" id="2619183">!=</span>&nbsp;<span class="builtinfunc" id="2619186">len</span><span class="op" id="2619189">(</span><span class="ident" id="2619190">ftyp</span><span class="op" id="2619194">.</span><span class="ident" id="2619195">out</span><span class="op" id="2619198">)</span>&nbsp;<span class="op" id="2619200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2619204">panic</span><span class="op" id="2619209">(</span><span class="string" id="2619210">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2619273">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2619280">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619323">if</span>&nbsp;<span class="builtinfunc" id="2619326">len</span><span class="op" id="2619329">(</span><span class="ident" id="2619330">ftyp</span><span class="op" id="2619334">.</span><span class="ident" id="2619335">out</span><span class="op" id="2619338">)</span>&nbsp;<span class="op" id="2619340">&gt;</span>&nbsp;<span class="num" id="2619342">0</span>&nbsp;<span class="op" id="2619344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619348">off</span>&nbsp;<span class="op" id="2619352">+=</span>&nbsp;<span class="op" id="2619355">-</span><span class="ident" id="2619356">off</span>&nbsp;<span class="op" id="2619360">&amp;</span>&nbsp;<span class="op" id="2619362">(</span><span class="ident" id="2619363">ptrSize</span>&nbsp;<span class="op" id="2619371">-</span>&nbsp;<span class="num" id="2619373">1</span><span class="op" id="2619374">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619378">if</span>&nbsp;<span class="ident" id="2619381">runtime</span><span class="op" id="2619388">.</span><span class="ident" id="2619389">GOARCH</span>&nbsp;<span class="op" id="2619396">==</span>&nbsp;<span class="string" id="2619399">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2619410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619415">off</span>&nbsp;<span class="op" id="2619419">=</span>&nbsp;<span class="ident" id="2619421">align</span><span class="op" id="2619426">(</span><span class="ident" id="2619427">off</span><span class="op" id="2619430">,</span>&nbsp;<span class="num" id="2619432">8</span><span class="op" id="2619433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619441">for</span>&nbsp;<span class="ident" id="2619445">i</span><span class="op" id="2619446">,</span>&nbsp;<span class="ident" id="2619448">arg</span>&nbsp;<span class="op" id="2619452">:=</span>&nbsp;<span class="keyword" id="2619455">range</span>&nbsp;<span class="ident" id="2619461">ftyp</span><span class="op" id="2619465">.</span><span class="ident" id="2619466">out</span>&nbsp;<span class="op" id="2619470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619475">typ</span>&nbsp;<span class="op" id="2619479">:=</span>&nbsp;<span class="ident" id="2619482">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619489">v</span>&nbsp;<span class="op" id="2619491">:=</span>&nbsp;<span class="ident" id="2619494">out</span><span class="op" id="2619497">[</span><span class="ident" id="2619498">i</span><span class="op" id="2619499">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619504">if</span>&nbsp;<span class="ident" id="2619507">v</span><span class="op" id="2619508">.</span><span class="ident" id="2619509">typ</span>&nbsp;<span class="op" id="2619513">!=</span>&nbsp;<span class="ident" id="2619516">typ</span>&nbsp;<span class="op" id="2619520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2619526">panic</span><span class="op" id="2619531">(</span><span class="string" id="2619532">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2619579">+</span>&nbsp;<span class="ident" id="2619581">funcName</span><span class="op" id="2619589">(</span><span class="ident" id="2619590">f</span><span class="op" id="2619591">)</span>&nbsp;<span class="op" id="2619593">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2619600">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2619630">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619637">out</span><span class="op" id="2619640">[</span><span class="ident" id="2619641">i</span><span class="op" id="2619642">]</span><span class="op" id="2619643">.</span><span class="ident" id="2619644">typ</span><span class="op" id="2619647">.</span><span class="ident" id="2619648">String</span><span class="op" id="2619654">(</span><span class="op" id="2619655">)</span>&nbsp;<span class="op" id="2619657">+</span>&nbsp;<span class="string" id="2619659">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2619667">+</span>&nbsp;<span class="ident" id="2619669">typ</span><span class="op" id="2619672">.</span><span class="ident" id="2619673">String</span><span class="op" id="2619679">(</span><span class="op" id="2619680">)</span><span class="op" id="2619681">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619691">if</span>&nbsp;<span class="ident" id="2619694">v</span><span class="op" id="2619695">.</span><span class="ident" id="2619696">flag</span><span class="op" id="2619700">&amp;</span><span class="ident" id="2619701">flagRO</span>&nbsp;<span class="op" id="2619708">!=</span>&nbsp;<span class="num" id="2619711">0</span>&nbsp;<span class="op" id="2619713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2619719">panic</span><span class="op" id="2619724">(</span><span class="string" id="2619725">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2619772">+</span>&nbsp;<span class="ident" id="2619774">funcName</span><span class="op" id="2619782">(</span><span class="ident" id="2619783">f</span><span class="op" id="2619784">)</span>&nbsp;<span class="op" id="2619786">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2619793">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2619841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2619846">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619851">off</span>&nbsp;<span class="op" id="2619855">+=</span>&nbsp;<span class="op" id="2619858">-</span><span class="ident" id="2619859">off</span>&nbsp;<span class="op" id="2619863">&amp;</span>&nbsp;<span class="builtintype" id="2619865">uintptr</span><span class="op" id="2619872">(</span><span class="ident" id="2619873">typ</span><span class="op" id="2619876">.</span><span class="ident" id="2619877">align</span><span class="op" id="2619882">-</span><span class="num" id="2619883">1</span><span class="op" id="2619884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619889">addr</span>&nbsp;<span class="op" id="2619894">:=</span>&nbsp;<span class="ident" id="2619897">unsafe</span><span class="op" id="2619903">.</span><span class="ident" id="2619904">Pointer</span><span class="op" id="2619911">(</span><span class="builtintype" id="2619912">uintptr</span><span class="op" id="2619919">(</span><span class="ident" id="2619920">ptr</span><span class="op" id="2619923">)</span>&nbsp;<span class="op" id="2619925">+</span>&nbsp;<span class="ident" id="2619927">off</span><span class="op" id="2619930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2619935">if</span>&nbsp;<span class="ident" id="2619938">v</span><span class="op" id="2619939">.</span><span class="ident" id="2619940">flag</span><span class="op" id="2619944">&amp;</span><span class="ident" id="2619945">flagIndir</span>&nbsp;<span class="op" id="2619955">!=</span>&nbsp;<span class="num" id="2619958">0</span>&nbsp;<span class="op" id="2619960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2619966">memmove</span><span class="op" id="2619973">(</span><span class="ident" id="2619974">addr</span><span class="op" id="2619978">,</span>&nbsp;<span class="ident" id="2619980">v</span><span class="op" id="2619981">.</span><span class="ident" id="2619982">ptr</span><span class="op" id="2619985">,</span>&nbsp;<span class="ident" id="2619987">typ</span><span class="op" id="2619990">.</span><span class="ident" id="2619991">size</span><span class="op" id="2619995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620000">}</span>&nbsp;<span class="keyword" id="2620002">else</span>&nbsp;<span class="op" id="2620007">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620013">*</span><span class="op" id="2620014">(</span><span class="op" id="2620015">*</span><span class="ident" id="2620016">unsafe</span><span class="op" id="2620022">.</span><span class="ident" id="2620023">Pointer</span><span class="op" id="2620030">)</span><span class="op" id="2620031">(</span><span class="ident" id="2620032">addr</span><span class="op" id="2620036">)</span>&nbsp;<span class="op" id="2620038">=</span>&nbsp;<span class="ident" id="2620040">v</span><span class="op" id="2620041">.</span><span class="ident" id="2620042">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620054">off</span>&nbsp;<span class="op" id="2620058">+=</span>&nbsp;<span class="ident" id="2620061">typ</span><span class="op" id="2620064">.</span><span class="ident" id="2620065">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620075">}</span><br>
<span class="lineno">515</span><span class="op" id="2620077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2620080">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2620137">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2620192">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2620251">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2620267">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2620337">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2620415">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2620471">func</span>&nbsp;<span class="ident" id="2620476">methodReceiver</span><span class="op" id="2620490">(</span><span class="ident" id="2620491">op</span>&nbsp;<span class="builtintype" id="2620494">string</span><span class="op" id="2620500">,</span>&nbsp;<span class="ident" id="2620502">v</span>&nbsp;<span class="ident" id="2620504">Value</span><span class="op" id="2620509">,</span>&nbsp;<span class="ident" id="2620511">methodIndex</span>&nbsp;<span class="builtintype" id="2620523">int</span><span class="op" id="2620526">)</span>&nbsp;<span class="op" id="2620528">(</span><span class="ident" id="2620529">rcvrtype</span><span class="op" id="2620537">,</span>&nbsp;<span class="ident" id="2620539">t</span>&nbsp;<span class="op" id="2620541">*</span><span class="ident" id="2620542">rtype</span><span class="op" id="2620547">,</span>&nbsp;<span class="ident" id="2620549">fn</span>&nbsp;<span class="ident" id="2620552">unsafe</span><span class="op" id="2620558">.</span><span class="ident" id="2620559">Pointer</span><span class="op" id="2620566">)</span>&nbsp;<span class="op" id="2620568">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620571">i</span>&nbsp;<span class="op" id="2620573">:=</span>&nbsp;<span class="ident" id="2620576">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620589">if</span>&nbsp;<span class="ident" id="2620592">v</span><span class="op" id="2620593">.</span><span class="ident" id="2620594">typ</span><span class="op" id="2620597">.</span><span class="ident" id="2620598">Kind</span><span class="op" id="2620602">(</span><span class="op" id="2620603">)</span>&nbsp;<span class="op" id="2620605">==</span>&nbsp;<span class="ident" id="2620608">Interface</span>&nbsp;<span class="op" id="2620618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620622">tt</span>&nbsp;<span class="op" id="2620625">:=</span>&nbsp;<span class="op" id="2620628">(</span><span class="op" id="2620629">*</span><span class="ident" id="2620630">interfaceType</span><span class="op" id="2620643">)</span><span class="op" id="2620644">(</span><span class="ident" id="2620645">unsafe</span><span class="op" id="2620651">.</span><span class="ident" id="2620652">Pointer</span><span class="op" id="2620659">(</span><span class="ident" id="2620660">v</span><span class="op" id="2620661">.</span><span class="ident" id="2620662">typ</span><span class="op" id="2620665">)</span><span class="op" id="2620666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620670">if</span>&nbsp;<span class="builtintype" id="2620673">uint</span><span class="op" id="2620677">(</span><span class="ident" id="2620678">i</span><span class="op" id="2620679">)</span>&nbsp;<span class="op" id="2620681">&gt;=</span>&nbsp;<span class="builtintype" id="2620684">uint</span><span class="op" id="2620688">(</span><span class="builtinfunc" id="2620689">len</span><span class="op" id="2620692">(</span><span class="ident" id="2620693">tt</span><span class="op" id="2620695">.</span><span class="ident" id="2620696">methods</span><span class="op" id="2620703">)</span><span class="op" id="2620704">)</span>&nbsp;<span class="op" id="2620706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2620711">panic</span><span class="op" id="2620716">(</span><span class="string" id="2620717">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2620764">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620772">m</span>&nbsp;<span class="op" id="2620774">:=</span>&nbsp;<span class="op" id="2620777">&amp;</span><span class="ident" id="2620778">tt</span><span class="op" id="2620780">.</span><span class="ident" id="2620781">methods</span><span class="op" id="2620788">[</span><span class="ident" id="2620789">i</span><span class="op" id="2620790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620794">if</span>&nbsp;<span class="ident" id="2620797">m</span><span class="op" id="2620798">.</span><span class="ident" id="2620799">pkgPath</span>&nbsp;<span class="op" id="2620807">!=</span>&nbsp;<span class="ident" id="2620810">nil</span>&nbsp;<span class="op" id="2620814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2620819">panic</span><span class="op" id="2620824">(</span><span class="string" id="2620825">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2620837">+</span>&nbsp;<span class="ident" id="2620839">op</span>&nbsp;<span class="op" id="2620842">+</span>&nbsp;<span class="string" id="2620844">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2620867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2620871">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2620875">iface</span>&nbsp;<span class="op" id="2620881">:=</span>&nbsp;<span class="op" id="2620884">(</span><span class="op" id="2620885">*</span><span class="ident" id="2620886">nonEmptyInterface</span><span class="op" id="2620903">)</span><span class="op" id="2620904">(</span><span class="ident" id="2620905">v</span><span class="op" id="2620906">.</span><span class="ident" id="2620907">ptr</span><span class="op" id="2620910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2620914">if</span>&nbsp;<span class="ident" id="2620917">iface</span><span class="op" id="2620922">.</span><span class="ident" id="2620923">itab</span>&nbsp;<span class="op" id="2620928">==</span>&nbsp;<span class="ident" id="2620931">nil</span>&nbsp;<span class="op" id="2620935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2620940">panic</span><span class="op" id="2620945">(</span><span class="string" id="2620946">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2620958">+</span>&nbsp;<span class="ident" id="2620960">op</span>&nbsp;<span class="op" id="2620963">+</span>&nbsp;<span class="string" id="2620965">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2621000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621008">rcvrtype</span>&nbsp;<span class="op" id="2621017">=</span>&nbsp;<span class="ident" id="2621019">iface</span><span class="op" id="2621024">.</span><span class="ident" id="2621025">itab</span><span class="op" id="2621029">.</span><span class="ident" id="2621030">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621036">fn</span>&nbsp;<span class="op" id="2621039">=</span>&nbsp;<span class="ident" id="2621041">unsafe</span><span class="op" id="2621047">.</span><span class="ident" id="2621048">Pointer</span><span class="op" id="2621055">(</span><span class="op" id="2621056">&amp;</span><span class="ident" id="2621057">iface</span><span class="op" id="2621062">.</span><span class="ident" id="2621063">itab</span><span class="op" id="2621067">.</span><span class="ident" id="2621068">fun</span><span class="op" id="2621071">[</span><span class="ident" id="2621072">i</span><span class="op" id="2621073">]</span><span class="op" id="2621074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621078">t</span>&nbsp;<span class="op" id="2621080">=</span>&nbsp;<span class="ident" id="2621082">m</span><span class="op" id="2621083">.</span><span class="ident" id="2621084">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621089">}</span>&nbsp;<span class="keyword" id="2621091">else</span>&nbsp;<span class="op" id="2621096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621100">rcvrtype</span>&nbsp;<span class="op" id="2621109">=</span>&nbsp;<span class="ident" id="2621111">v</span><span class="op" id="2621112">.</span><span class="ident" id="2621113">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621119">ut</span>&nbsp;<span class="op" id="2621122">:=</span>&nbsp;<span class="ident" id="2621125">v</span><span class="op" id="2621126">.</span><span class="ident" id="2621127">typ</span><span class="op" id="2621130">.</span><span class="ident" id="2621131">uncommon</span><span class="op" id="2621139">(</span><span class="op" id="2621140">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621144">if</span>&nbsp;<span class="ident" id="2621147">ut</span>&nbsp;<span class="op" id="2621150">==</span>&nbsp;<span class="ident" id="2621153">nil</span>&nbsp;<span class="op" id="2621157">||</span>&nbsp;<span class="builtintype" id="2621160">uint</span><span class="op" id="2621164">(</span><span class="ident" id="2621165">i</span><span class="op" id="2621166">)</span>&nbsp;<span class="op" id="2621168">&gt;=</span>&nbsp;<span class="builtintype" id="2621171">uint</span><span class="op" id="2621175">(</span><span class="builtinfunc" id="2621176">len</span><span class="op" id="2621179">(</span><span class="ident" id="2621180">ut</span><span class="op" id="2621182">.</span><span class="ident" id="2621183">methods</span><span class="op" id="2621190">)</span><span class="op" id="2621191">)</span>&nbsp;<span class="op" id="2621193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2621198">panic</span><span class="op" id="2621203">(</span><span class="string" id="2621204">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2621251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621259">m</span>&nbsp;<span class="op" id="2621261">:=</span>&nbsp;<span class="op" id="2621264">&amp;</span><span class="ident" id="2621265">ut</span><span class="op" id="2621267">.</span><span class="ident" id="2621268">methods</span><span class="op" id="2621275">[</span><span class="ident" id="2621276">i</span><span class="op" id="2621277">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621281">if</span>&nbsp;<span class="ident" id="2621284">m</span><span class="op" id="2621285">.</span><span class="ident" id="2621286">pkgPath</span>&nbsp;<span class="op" id="2621294">!=</span>&nbsp;<span class="ident" id="2621297">nil</span>&nbsp;<span class="op" id="2621301">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2621306">panic</span><span class="op" id="2621311">(</span><span class="string" id="2621312">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2621324">+</span>&nbsp;<span class="ident" id="2621326">op</span>&nbsp;<span class="op" id="2621329">+</span>&nbsp;<span class="string" id="2621331">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2621354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621362">fn</span>&nbsp;<span class="op" id="2621365">=</span>&nbsp;<span class="ident" id="2621367">unsafe</span><span class="op" id="2621373">.</span><span class="ident" id="2621374">Pointer</span><span class="op" id="2621381">(</span><span class="op" id="2621382">&amp;</span><span class="ident" id="2621383">m</span><span class="op" id="2621384">.</span><span class="ident" id="2621385">ifn</span><span class="op" id="2621388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621392">t</span>&nbsp;<span class="op" id="2621394">=</span>&nbsp;<span class="ident" id="2621396">m</span><span class="op" id="2621397">.</span><span class="ident" id="2621398">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621404">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621407">return</span><br>
<span class="lineno"></span><span class="op" id="2621414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2621417">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2621482">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2621541">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2621596">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2621659">func</span>&nbsp;<span class="ident" id="2621664">storeRcvr</span><span class="op" id="2621673">(</span><span class="ident" id="2621674">v</span>&nbsp;<span class="ident" id="2621676">Value</span><span class="op" id="2621681">,</span>&nbsp;<span class="ident" id="2621683">p</span>&nbsp;<span class="ident" id="2621685">unsafe</span><span class="op" id="2621691">.</span><span class="ident" id="2621692">Pointer</span><span class="op" id="2621699">)</span>&nbsp;<span class="op" id="2621701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621704">t</span>&nbsp;<span class="op" id="2621706">:=</span>&nbsp;<span class="ident" id="2621709">v</span><span class="op" id="2621710">.</span><span class="ident" id="2621711">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2621716">if</span>&nbsp;<span class="ident" id="2621719">t</span><span class="op" id="2621720">.</span><span class="ident" id="2621721">Kind</span><span class="op" id="2621725">(</span><span class="op" id="2621726">)</span>&nbsp;<span class="op" id="2621728">==</span>&nbsp;<span class="ident" id="2621731">Interface</span>&nbsp;<span class="op" id="2621741">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2621745">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2621800">iface</span>&nbsp;<span class="op" id="2621806">:=</span>&nbsp;<span class="op" id="2621809">(</span><span class="op" id="2621810">*</span><span class="ident" id="2621811">nonEmptyInterface</span><span class="op" id="2621828">)</span><span class="op" id="2621829">(</span><span class="ident" id="2621830">v</span><span class="op" id="2621831">.</span><span class="ident" id="2621832">ptr</span><span class="op" id="2621835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621839">*</span><span class="op" id="2621840">(</span><span class="op" id="2621841">*</span><span class="ident" id="2621842">unsafe</span><span class="op" id="2621848">.</span><span class="ident" id="2621849">Pointer</span><span class="op" id="2621856">)</span><span class="op" id="2621857">(</span><span class="ident" id="2621858">p</span><span class="op" id="2621859">)</span>&nbsp;<span class="op" id="2621861">=</span>&nbsp;<span class="ident" id="2621863">unsafe</span><span class="op" id="2621869">.</span><span class="ident" id="2621870">Pointer</span><span class="op" id="2621877">(</span><span class="ident" id="2621878">iface</span><span class="op" id="2621883">.</span><span class="ident" id="2621884">word</span><span class="op" id="2621888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621891">}</span>&nbsp;<span class="keyword" id="2621893">else</span>&nbsp;<span class="keyword" id="2621898">if</span>&nbsp;<span class="ident" id="2621901">v</span><span class="op" id="2621902">.</span><span class="ident" id="2621903">flag</span><span class="op" id="2621907">&amp;</span><span class="ident" id="2621908">flagIndir</span>&nbsp;<span class="op" id="2621918">!=</span>&nbsp;<span class="num" id="2621921">0</span>&nbsp;<span class="op" id="2621923">&amp;&amp;</span>&nbsp;<span class="op" id="2621926">!</span><span class="ident" id="2621927">ifaceIndir</span><span class="op" id="2621937">(</span><span class="ident" id="2621938">t</span><span class="op" id="2621939">)</span>&nbsp;<span class="op" id="2621941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621945">*</span><span class="op" id="2621946">(</span><span class="op" id="2621947">*</span><span class="ident" id="2621948">unsafe</span><span class="op" id="2621954">.</span><span class="ident" id="2621955">Pointer</span><span class="op" id="2621962">)</span><span class="op" id="2621963">(</span><span class="ident" id="2621964">p</span><span class="op" id="2621965">)</span>&nbsp;<span class="op" id="2621967">=</span>&nbsp;<span class="op" id="2621969">*</span><span class="op" id="2621970">(</span><span class="op" id="2621971">*</span><span class="ident" id="2621972">unsafe</span><span class="op" id="2621978">.</span><span class="ident" id="2621979">Pointer</span><span class="op" id="2621986">)</span><span class="op" id="2621987">(</span><span class="ident" id="2621988">v</span><span class="op" id="2621989">.</span><span class="ident" id="2621990">ptr</span><span class="op" id="2621993">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2621996">}</span>&nbsp;<span class="keyword" id="2621998">else</span>&nbsp;<span class="op" id="2622003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622007">*</span><span class="op" id="2622008">(</span><span class="op" id="2622009">*</span><span class="ident" id="2622010">unsafe</span><span class="op" id="2622016">.</span><span class="ident" id="2622017">Pointer</span><span class="op" id="2622024">)</span><span class="op" id="2622025">(</span><span class="ident" id="2622026">p</span><span class="op" id="2622027">)</span>&nbsp;<span class="op" id="2622029">=</span>&nbsp;<span class="ident" id="2622031">v</span><span class="op" id="2622032">.</span><span class="ident" id="2622033">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2622038">}</span><br>
<span class="lineno"></span><span class="op" id="2622040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2622043">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2622108">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2622137">func</span>&nbsp;<span class="ident" id="2622142">align</span><span class="op" id="2622147">(</span><span class="ident" id="2622148">x</span><span class="op" id="2622149">,</span>&nbsp;<span class="ident" id="2622151">n</span>&nbsp;<span class="builtintype" id="2622153">uintptr</span><span class="op" id="2622160">)</span>&nbsp;<span class="builtintype" id="2622162">uintptr</span>&nbsp;<span class="op" id="2622170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2622173">return</span>&nbsp;<span class="op" id="2622180">(</span><span class="ident" id="2622181">x</span>&nbsp;<span class="op" id="2622183">+</span>&nbsp;<span class="ident" id="2622185">n</span>&nbsp;<span class="op" id="2622187">-</span>&nbsp;<span class="num" id="2622189">1</span><span class="op" id="2622190">)</span>&nbsp;<span class="op" id="2622192">&amp;^</span>&nbsp;<span class="op" id="2622195">(</span><span class="ident" id="2622196">n</span>&nbsp;<span class="op" id="2622198">-</span>&nbsp;<span class="num" id="2622200">1</span><span class="op" id="2622201">)</span><br>
<span class="lineno"></span><span class="op" id="2622203">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2622206">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2622275">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2622332">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2622405">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2622469">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2622522">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2622603">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2622677">//</span><br>
<span class="lineno"></span><span class="comment" id="2622680">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2622756">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2622828">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2622899">func</span>&nbsp;<span class="ident" id="2622904">callMethod</span><span class="op" id="2622914">(</span><span class="ident" id="2622915">ctxt</span>&nbsp;<span class="op" id="2622920">*</span><span class="ident" id="2622921">methodValue</span><span class="op" id="2622932">,</span>&nbsp;<span class="ident" id="2622934">frame</span>&nbsp;<span class="ident" id="2622940">unsafe</span><span class="op" id="2622946">.</span><span class="ident" id="2622947">Pointer</span><span class="op" id="2622954">)</span>&nbsp;<span class="op" id="2622956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622959">rcvr</span>&nbsp;<span class="op" id="2622964">:=</span>&nbsp;<span class="ident" id="2622967">ctxt</span><span class="op" id="2622971">.</span><span class="ident" id="2622972">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2622978">rcvrtype</span><span class="op" id="2622986">,</span>&nbsp;<span class="ident" id="2622988">t</span><span class="op" id="2622989">,</span>&nbsp;<span class="ident" id="2622991">fn</span>&nbsp;<span class="op" id="2622994">:=</span>&nbsp;<span class="ident" id="2622997">methodReceiver</span><span class="op" id="2623011">(</span><span class="string" id="2623012">&#34;call&#34;</span><span class="op" id="2623018">,</span>&nbsp;<span class="ident" id="2623020">rcvr</span><span class="op" id="2623024">,</span>&nbsp;<span class="ident" id="2623026">ctxt</span><span class="op" id="2623030">.</span><span class="ident" id="2623031">method</span><span class="op" id="2623037">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623040">frametype</span><span class="op" id="2623049">,</span>&nbsp;<span class="ident" id="2623051">argSize</span><span class="op" id="2623058">,</span>&nbsp;<span class="ident" id="2623060">retOffset</span><span class="op" id="2623069">,</span>&nbsp;<span class="ident" id="2623071">_</span>&nbsp;<span class="op" id="2623073">:=</span>&nbsp;<span class="ident" id="2623076">funcLayout</span><span class="op" id="2623086">(</span><span class="ident" id="2623087">t</span><span class="op" id="2623088">,</span>&nbsp;<span class="ident" id="2623090">rcvrtype</span><span class="op" id="2623098">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623102">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623177">args</span>&nbsp;<span class="op" id="2623182">:=</span>&nbsp;<span class="ident" id="2623185">unsafe_New</span><span class="op" id="2623195">(</span><span class="ident" id="2623196">frametype</span><span class="op" id="2623205">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623209">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623248">storeRcvr</span><span class="op" id="2623257">(</span><span class="ident" id="2623258">rcvr</span><span class="op" id="2623262">,</span>&nbsp;<span class="ident" id="2623264">args</span><span class="op" id="2623268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623271">memmove</span><span class="op" id="2623278">(</span><span class="ident" id="2623279">unsafe</span><span class="op" id="2623285">.</span><span class="ident" id="2623286">Pointer</span><span class="op" id="2623293">(</span><span class="builtintype" id="2623294">uintptr</span><span class="op" id="2623301">(</span><span class="ident" id="2623302">args</span><span class="op" id="2623306">)</span><span class="op" id="2623307">+</span><span class="ident" id="2623308">ptrSize</span><span class="op" id="2623315">)</span><span class="op" id="2623316">,</span>&nbsp;<span class="ident" id="2623318">frame</span><span class="op" id="2623323">,</span>&nbsp;<span class="ident" id="2623325">argSize</span><span class="op" id="2623332">-</span><span class="ident" id="2623333">ptrSize</span><span class="op" id="2623340">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623344">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623354">call</span><span class="op" id="2623358">(</span><span class="ident" id="2623359">fn</span><span class="op" id="2623361">,</span>&nbsp;<span class="ident" id="2623363">args</span><span class="op" id="2623367">,</span>&nbsp;<span class="builtintype" id="2623369">uint32</span><span class="op" id="2623375">(</span><span class="ident" id="2623376">frametype</span><span class="op" id="2623385">.</span><span class="ident" id="2623386">size</span><span class="op" id="2623390">)</span><span class="op" id="2623391">,</span>&nbsp;<span class="builtintype" id="2623393">uint32</span><span class="op" id="2623399">(</span><span class="ident" id="2623400">retOffset</span><span class="op" id="2623409">)</span><span class="op" id="2623410">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623414">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623482">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623554">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623625">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2623641">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623701">callerRetOffset</span>&nbsp;<span class="op" id="2623717">:=</span>&nbsp;<span class="ident" id="2623720">retOffset</span>&nbsp;<span class="op" id="2623730">-</span>&nbsp;<span class="ident" id="2623732">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2623741">if</span>&nbsp;<span class="ident" id="2623744">runtime</span><span class="op" id="2623751">.</span><span class="ident" id="2623752">GOARCH</span>&nbsp;<span class="op" id="2623759">==</span>&nbsp;<span class="string" id="2623762">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2623773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623777">callerRetOffset</span>&nbsp;<span class="op" id="2623793">=</span>&nbsp;<span class="ident" id="2623795">align</span><span class="op" id="2623800">(</span><span class="ident" id="2623801">argSize</span><span class="op" id="2623808">-</span><span class="ident" id="2623809">ptrSize</span><span class="op" id="2623816">,</span>&nbsp;<span class="num" id="2623818">8</span><span class="op" id="2623819">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2623822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623825">memmove</span><span class="op" id="2623832">(</span><span class="ident" id="2623833">unsafe</span><span class="op" id="2623839">.</span><span class="ident" id="2623840">Pointer</span><span class="op" id="2623847">(</span><span class="builtintype" id="2623848">uintptr</span><span class="op" id="2623855">(</span><span class="ident" id="2623856">frame</span><span class="op" id="2623861">)</span><span class="op" id="2623862">+</span><span class="ident" id="2623863">callerRetOffset</span><span class="op" id="2623878">)</span><span class="op" id="2623879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2623883">unsafe</span><span class="op" id="2623889">.</span><span class="ident" id="2623890">Pointer</span><span class="op" id="2623897">(</span><span class="builtintype" id="2623898">uintptr</span><span class="op" id="2623905">(</span><span class="ident" id="2623906">args</span><span class="op" id="2623910">)</span><span class="op" id="2623911">+</span><span class="ident" id="2623912">retOffset</span><span class="op" id="2623921">)</span><span class="op" id="2623922">,</span>&nbsp;<span class="ident" id="2623924">frametype</span><span class="op" id="2623933">.</span><span class="ident" id="2623934">size</span><span class="op" id="2623938">-</span><span class="ident" id="2623939">retOffset</span><span class="op" id="2623948">)</span><br>
<span class="lineno"></span><span class="op" id="2623950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2623953">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2624015">func</span>&nbsp;<span class="ident" id="2624020">funcName</span><span class="op" id="2624028">(</span><span class="ident" id="2624029">f</span>&nbsp;<span class="keyword" id="2624031">func</span><span class="op" id="2624035">(</span><span class="op" id="2624036">[</span><span class="op" id="2624037">]</span><span class="ident" id="2624038">Value</span><span class="op" id="2624043">)</span>&nbsp;<span class="op" id="2624045">[</span><span class="op" id="2624046">]</span><span class="ident" id="2624047">Value</span><span class="op" id="2624052">)</span>&nbsp;<span class="builtintype" id="2624054">string</span>&nbsp;<span class="op" id="2624061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624064">pc</span>&nbsp;<span class="op" id="2624067">:=</span>&nbsp;<span class="op" id="2624070">*</span><span class="op" id="2624071">(</span><span class="op" id="2624072">*</span><span class="builtintype" id="2624073">uintptr</span><span class="op" id="2624080">)</span><span class="op" id="2624081">(</span><span class="ident" id="2624082">unsafe</span><span class="op" id="2624088">.</span><span class="ident" id="2624089">Pointer</span><span class="op" id="2624096">(</span><span class="op" id="2624097">&amp;</span><span class="ident" id="2624098">f</span><span class="op" id="2624099">)</span><span class="op" id="2624100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624103">rf</span>&nbsp;<span class="op" id="2624106">:=</span>&nbsp;<span class="ident" id="2624109">runtime</span><span class="op" id="2624116">.</span><span class="ident" id="2624117">FuncForPC</span><span class="op" id="2624126">(</span><span class="ident" id="2624127">pc</span><span class="op" id="2624129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624132">if</span>&nbsp;<span class="ident" id="2624135">rf</span>&nbsp;<span class="op" id="2624138">!=</span>&nbsp;<span class="ident" id="2624141">nil</span>&nbsp;<span class="op" id="2624145">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624149">return</span>&nbsp;<span class="ident" id="2624156">rf</span><span class="op" id="2624158">.</span><span class="ident" id="2624159">Name</span><span class="op" id="2624163">(</span><span class="op" id="2624164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624170">return</span>&nbsp;<span class="string" id="2624177">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2624187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2624190">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2624219">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2624274">func</span>&nbsp;<span class="op" id="2624279">(</span><span class="ident" id="2624280">v</span>&nbsp;<span class="ident" id="2624282">Value</span><span class="op" id="2624287">)</span>&nbsp;<span class="ident" id="2624289">Cap</span><span class="op" id="2624292">(</span><span class="op" id="2624293">)</span>&nbsp;<span class="builtintype" id="2624295">int</span>&nbsp;<span class="op" id="2624299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624302">k</span>&nbsp;<span class="op" id="2624304">:=</span>&nbsp;<span class="ident" id="2624307">v</span><span class="op" id="2624308">.</span><span class="ident" id="2624309">kind</span><span class="op" id="2624313">(</span><span class="op" id="2624314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624317">switch</span>&nbsp;<span class="ident" id="2624324">k</span>&nbsp;<span class="op" id="2624326">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624329">case</span>&nbsp;<span class="ident" id="2624334">Array</span><span class="op" id="2624339">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624343">return</span>&nbsp;<span class="ident" id="2624350">v</span><span class="op" id="2624351">.</span><span class="ident" id="2624352">typ</span><span class="op" id="2624355">.</span><span class="ident" id="2624356">Len</span><span class="op" id="2624359">(</span><span class="op" id="2624360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624363">case</span>&nbsp;<span class="ident" id="2624368">Chan</span><span class="op" id="2624372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624376">return</span>&nbsp;<span class="builtintype" id="2624383">int</span><span class="op" id="2624386">(</span><span class="ident" id="2624387">chancap</span><span class="op" id="2624394">(</span><span class="ident" id="2624395">v</span><span class="op" id="2624396">.</span><span class="ident" id="2624397">pointer</span><span class="op" id="2624404">(</span><span class="op" id="2624405">)</span><span class="op" id="2624406">)</span><span class="op" id="2624407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624410">case</span>&nbsp;<span class="ident" id="2624415">Slice</span><span class="op" id="2624420">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2624424">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624483">return</span>&nbsp;<span class="op" id="2624490">(</span><span class="op" id="2624491">*</span><span class="ident" id="2624492">sliceHeader</span><span class="op" id="2624503">)</span><span class="op" id="2624504">(</span><span class="ident" id="2624505">v</span><span class="op" id="2624506">.</span><span class="ident" id="2624507">ptr</span><span class="op" id="2624510">)</span><span class="op" id="2624511">.</span><span class="ident" id="2624512">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2624517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2624520">panic</span><span class="op" id="2624525">(</span><span class="op" id="2624526">&amp;</span><span class="ident" id="2624527">ValueError</span><span class="op" id="2624537">{</span><span class="string" id="2624538">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2624557">,</span>&nbsp;<span class="ident" id="2624559">v</span><span class="op" id="2624560">.</span><span class="ident" id="2624561">kind</span><span class="op" id="2624565">(</span><span class="op" id="2624566">)</span><span class="op" id="2624567">}</span><span class="op" id="2624568">)</span><br>
<span class="lineno"></span><span class="op" id="2624570">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2624573">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2624604">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2624642">func</span>&nbsp;<span class="op" id="2624647">(</span><span class="ident" id="2624648">v</span>&nbsp;<span class="ident" id="2624650">Value</span><span class="op" id="2624655">)</span>&nbsp;<span class="ident" id="2624657">Close</span><span class="op" id="2624662">(</span><span class="op" id="2624663">)</span>&nbsp;<span class="op" id="2624665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624668">v</span><span class="op" id="2624669">.</span><span class="ident" id="2624670">mustBe</span><span class="op" id="2624676">(</span><span class="ident" id="2624677">Chan</span><span class="op" id="2624681">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624684">v</span><span class="op" id="2624685">.</span><span class="ident" id="2624686">mustBeExported</span><span class="op" id="2624700">(</span><span class="op" id="2624701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624704">chanclose</span><span class="op" id="2624713">(</span><span class="ident" id="2624714">v</span><span class="op" id="2624715">.</span><span class="ident" id="2624716">pointer</span><span class="op" id="2624723">(</span><span class="op" id="2624724">)</span><span class="op" id="2624725">)</span><br>
<span class="lineno"></span><span class="op" id="2624727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2624730">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2624788">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2624844">func</span>&nbsp;<span class="op" id="2624849">(</span><span class="ident" id="2624850">v</span>&nbsp;<span class="ident" id="2624852">Value</span><span class="op" id="2624857">)</span>&nbsp;<span class="ident" id="2624859">Complex</span><span class="op" id="2624866">(</span><span class="op" id="2624867">)</span>&nbsp;<span class="builtintype" id="2624869">complex128</span>&nbsp;<span class="op" id="2624880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2624883">k</span>&nbsp;<span class="op" id="2624885">:=</span>&nbsp;<span class="ident" id="2624888">v</span><span class="op" id="2624889">.</span><span class="ident" id="2624890">kind</span><span class="op" id="2624894">(</span><span class="op" id="2624895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624898">switch</span>&nbsp;<span class="ident" id="2624905">k</span>&nbsp;<span class="op" id="2624907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624910">case</span>&nbsp;<span class="ident" id="2624915">Complex64</span><span class="op" id="2624924">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624928">return</span>&nbsp;<span class="builtintype" id="2624935">complex128</span><span class="op" id="2624945">(</span><span class="op" id="2624946">*</span><span class="op" id="2624947">(</span><span class="op" id="2624948">*</span><span class="builtintype" id="2624949">complex64</span><span class="op" id="2624958">)</span><span class="op" id="2624959">(</span><span class="ident" id="2624960">v</span><span class="op" id="2624961">.</span><span class="ident" id="2624962">ptr</span><span class="op" id="2624965">)</span><span class="op" id="2624966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624969">case</span>&nbsp;<span class="ident" id="2624974">Complex128</span><span class="op" id="2624984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2624988">return</span>&nbsp;<span class="op" id="2624995">*</span><span class="op" id="2624996">(</span><span class="op" id="2624997">*</span><span class="builtintype" id="2624998">complex128</span><span class="op" id="2625008">)</span><span class="op" id="2625009">(</span><span class="ident" id="2625010">v</span><span class="op" id="2625011">.</span><span class="ident" id="2625012">ptr</span><span class="op" id="2625015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2625021">panic</span><span class="op" id="2625026">(</span><span class="op" id="2625027">&amp;</span><span class="ident" id="2625028">ValueError</span><span class="op" id="2625038">{</span><span class="string" id="2625039">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2625062">,</span>&nbsp;<span class="ident" id="2625064">v</span><span class="op" id="2625065">.</span><span class="ident" id="2625066">kind</span><span class="op" id="2625070">(</span><span class="op" id="2625071">)</span><span class="op" id="2625072">}</span><span class="op" id="2625073">)</span><br>
<span class="lineno">665</span><span class="op" id="2625075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2625078">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2625134">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2625170">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2625220">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2625262">func</span>&nbsp;<span class="op" id="2625267">(</span><span class="ident" id="2625268">v</span>&nbsp;<span class="ident" id="2625270">Value</span><span class="op" id="2625275">)</span>&nbsp;<span class="ident" id="2625277">Elem</span><span class="op" id="2625281">(</span><span class="op" id="2625282">)</span>&nbsp;<span class="ident" id="2625284">Value</span>&nbsp;<span class="op" id="2625290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625293">k</span>&nbsp;<span class="op" id="2625295">:=</span>&nbsp;<span class="ident" id="2625298">v</span><span class="op" id="2625299">.</span><span class="ident" id="2625300">kind</span><span class="op" id="2625304">(</span><span class="op" id="2625305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625308">switch</span>&nbsp;<span class="ident" id="2625315">k</span>&nbsp;<span class="op" id="2625317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625320">case</span>&nbsp;<span class="ident" id="2625325">Interface</span><span class="op" id="2625334">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625338">var</span>&nbsp;<span class="ident" id="2625342">eface</span>&nbsp;<span class="keyword" id="2625348">interface</span><span class="op" id="2625357">{</span><span class="op" id="2625358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625362">if</span>&nbsp;<span class="ident" id="2625365">v</span><span class="op" id="2625366">.</span><span class="ident" id="2625367">typ</span><span class="op" id="2625370">.</span><span class="ident" id="2625371">NumMethod</span><span class="op" id="2625380">(</span><span class="op" id="2625381">)</span>&nbsp;<span class="op" id="2625383">==</span>&nbsp;<span class="num" id="2625386">0</span>&nbsp;<span class="op" id="2625388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625393">eface</span>&nbsp;<span class="op" id="2625399">=</span>&nbsp;<span class="op" id="2625401">*</span><span class="op" id="2625402">(</span><span class="op" id="2625403">*</span><span class="keyword" id="2625404">interface</span><span class="op" id="2625413">{</span><span class="op" id="2625414">}</span><span class="op" id="2625415">)</span><span class="op" id="2625416">(</span><span class="ident" id="2625417">v</span><span class="op" id="2625418">.</span><span class="ident" id="2625419">ptr</span><span class="op" id="2625422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625426">}</span>&nbsp;<span class="keyword" id="2625428">else</span>&nbsp;<span class="op" id="2625433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625438">eface</span>&nbsp;<span class="op" id="2625444">=</span>&nbsp;<span class="op" id="2625446">(</span><span class="keyword" id="2625447">interface</span><span class="op" id="2625456">{</span><span class="op" id="2625457">}</span><span class="op" id="2625458">)</span><span class="op" id="2625459">(</span><span class="op" id="2625460">*</span><span class="op" id="2625461">(</span><span class="op" id="2625462">*</span><span class="keyword" id="2625463">interface</span>&nbsp;<span class="op" id="2625473">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625479">M</span><span class="op" id="2625480">(</span><span class="op" id="2625481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625486">}</span><span class="op" id="2625487">)</span><span class="op" id="2625488">(</span><span class="ident" id="2625489">v</span><span class="op" id="2625490">.</span><span class="ident" id="2625491">ptr</span><span class="op" id="2625494">)</span><span class="op" id="2625495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625503">x</span>&nbsp;<span class="op" id="2625505">:=</span>&nbsp;<span class="ident" id="2625508">unpackEface</span><span class="op" id="2625519">(</span><span class="ident" id="2625520">eface</span><span class="op" id="2625525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625529">if</span>&nbsp;<span class="ident" id="2625532">x</span><span class="op" id="2625533">.</span><span class="ident" id="2625534">flag</span>&nbsp;<span class="op" id="2625539">!=</span>&nbsp;<span class="num" id="2625542">0</span>&nbsp;<span class="op" id="2625544">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625549">x</span><span class="op" id="2625550">.</span><span class="ident" id="2625551">flag</span>&nbsp;<span class="op" id="2625556">|=</span>&nbsp;<span class="ident" id="2625559">v</span><span class="op" id="2625560">.</span><span class="ident" id="2625561">flag</span>&nbsp;<span class="op" id="2625566">&amp;</span>&nbsp;<span class="ident" id="2625568">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625581">return</span>&nbsp;<span class="ident" id="2625588">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625591">case</span>&nbsp;<span class="ident" id="2625596">Ptr</span><span class="op" id="2625599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625603">ptr</span>&nbsp;<span class="op" id="2625607">:=</span>&nbsp;<span class="ident" id="2625610">v</span><span class="op" id="2625611">.</span><span class="ident" id="2625612">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625618">if</span>&nbsp;<span class="ident" id="2625621">v</span><span class="op" id="2625622">.</span><span class="ident" id="2625623">flag</span><span class="op" id="2625627">&amp;</span><span class="ident" id="2625628">flagIndir</span>&nbsp;<span class="op" id="2625638">!=</span>&nbsp;<span class="num" id="2625641">0</span>&nbsp;<span class="op" id="2625643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625648">ptr</span>&nbsp;<span class="op" id="2625652">=</span>&nbsp;<span class="op" id="2625654">*</span><span class="op" id="2625655">(</span><span class="op" id="2625656">*</span><span class="ident" id="2625657">unsafe</span><span class="op" id="2625663">.</span><span class="ident" id="2625664">Pointer</span><span class="op" id="2625671">)</span><span class="op" id="2625672">(</span><span class="ident" id="2625673">ptr</span><span class="op" id="2625676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2625684">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625732">if</span>&nbsp;<span class="ident" id="2625735">ptr</span>&nbsp;<span class="op" id="2625739">==</span>&nbsp;<span class="ident" id="2625742">nil</span>&nbsp;<span class="op" id="2625746">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625751">return</span>&nbsp;<span class="ident" id="2625758">Value</span><span class="op" id="2625763">{</span><span class="op" id="2625764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625772">tt</span>&nbsp;<span class="op" id="2625775">:=</span>&nbsp;<span class="op" id="2625778">(</span><span class="op" id="2625779">*</span><span class="ident" id="2625780">ptrType</span><span class="op" id="2625787">)</span><span class="op" id="2625788">(</span><span class="ident" id="2625789">unsafe</span><span class="op" id="2625795">.</span><span class="ident" id="2625796">Pointer</span><span class="op" id="2625803">(</span><span class="ident" id="2625804">v</span><span class="op" id="2625805">.</span><span class="ident" id="2625806">typ</span><span class="op" id="2625809">)</span><span class="op" id="2625810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625814">typ</span>&nbsp;<span class="op" id="2625818">:=</span>&nbsp;<span class="ident" id="2625821">tt</span><span class="op" id="2625823">.</span><span class="ident" id="2625824">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625831">fl</span>&nbsp;<span class="op" id="2625834">:=</span>&nbsp;<span class="ident" id="2625837">v</span><span class="op" id="2625838">.</span><span class="ident" id="2625839">flag</span><span class="op" id="2625843">&amp;</span><span class="ident" id="2625844">flagRO</span>&nbsp;<span class="op" id="2625851">|</span>&nbsp;<span class="ident" id="2625853">flagIndir</span>&nbsp;<span class="op" id="2625863">|</span>&nbsp;<span class="ident" id="2625865">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2625876">fl</span>&nbsp;<span class="op" id="2625879">|=</span>&nbsp;<span class="ident" id="2625882">flag</span><span class="op" id="2625886">(</span><span class="ident" id="2625887">typ</span><span class="op" id="2625890">.</span><span class="ident" id="2625891">Kind</span><span class="op" id="2625895">(</span><span class="op" id="2625896">)</span><span class="op" id="2625897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2625901">return</span>&nbsp;<span class="ident" id="2625908">Value</span><span class="op" id="2625913">{</span><span class="ident" id="2625914">typ</span><span class="op" id="2625917">,</span>&nbsp;<span class="ident" id="2625919">ptr</span><span class="op" id="2625922">,</span>&nbsp;<span class="ident" id="2625924">fl</span><span class="op" id="2625926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2625929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2625932">panic</span><span class="op" id="2625937">(</span><span class="op" id="2625938">&amp;</span><span class="ident" id="2625939">ValueError</span><span class="op" id="2625949">{</span><span class="string" id="2625950">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2625970">,</span>&nbsp;<span class="ident" id="2625972">v</span><span class="op" id="2625973">.</span><span class="ident" id="2625974">kind</span><span class="op" id="2625978">(</span><span class="op" id="2625979">)</span><span class="op" id="2625980">}</span><span class="op" id="2625981">)</span><br>
<span class="lineno"></span><span class="op" id="2625983">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2625986">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2626035">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2626096">func</span>&nbsp;<span class="op" id="2626101">(</span><span class="ident" id="2626102">v</span>&nbsp;<span class="ident" id="2626104">Value</span><span class="op" id="2626109">)</span>&nbsp;<span class="ident" id="2626111">Field</span><span class="op" id="2626116">(</span><span class="ident" id="2626117">i</span>&nbsp;<span class="builtintype" id="2626119">int</span><span class="op" id="2626122">)</span>&nbsp;<span class="ident" id="2626124">Value</span>&nbsp;<span class="op" id="2626130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626133">if</span>&nbsp;<span class="ident" id="2626136">v</span><span class="op" id="2626137">.</span><span class="ident" id="2626138">kind</span><span class="op" id="2626142">(</span><span class="op" id="2626143">)</span>&nbsp;<span class="op" id="2626145">!=</span>&nbsp;<span class="ident" id="2626148">Struct</span>&nbsp;<span class="op" id="2626155">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2626159">panic</span><span class="op" id="2626164">(</span><span class="op" id="2626165">&amp;</span><span class="ident" id="2626166">ValueError</span><span class="op" id="2626176">{</span><span class="string" id="2626177">&#34;reflect.Value.Field&#34;</span><span class="op" id="2626198">,</span>&nbsp;<span class="ident" id="2626200">v</span><span class="op" id="2626201">.</span><span class="ident" id="2626202">kind</span><span class="op" id="2626206">(</span><span class="op" id="2626207">)</span><span class="op" id="2626208">}</span><span class="op" id="2626209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626215">tt</span>&nbsp;<span class="op" id="2626218">:=</span>&nbsp;<span class="op" id="2626221">(</span><span class="op" id="2626222">*</span><span class="ident" id="2626223">structType</span><span class="op" id="2626233">)</span><span class="op" id="2626234">(</span><span class="ident" id="2626235">unsafe</span><span class="op" id="2626241">.</span><span class="ident" id="2626242">Pointer</span><span class="op" id="2626249">(</span><span class="ident" id="2626250">v</span><span class="op" id="2626251">.</span><span class="ident" id="2626252">typ</span><span class="op" id="2626255">)</span><span class="op" id="2626256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626259">if</span>&nbsp;<span class="builtintype" id="2626262">uint</span><span class="op" id="2626266">(</span><span class="ident" id="2626267">i</span><span class="op" id="2626268">)</span>&nbsp;<span class="op" id="2626270">&gt;=</span>&nbsp;<span class="builtintype" id="2626273">uint</span><span class="op" id="2626277">(</span><span class="builtinfunc" id="2626278">len</span><span class="op" id="2626281">(</span><span class="ident" id="2626282">tt</span><span class="op" id="2626284">.</span><span class="ident" id="2626285">fields</span><span class="op" id="2626291">)</span><span class="op" id="2626292">)</span>&nbsp;<span class="op" id="2626294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2626298">panic</span><span class="op" id="2626303">(</span><span class="string" id="2626304">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2626339">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626345">field</span>&nbsp;<span class="op" id="2626351">:=</span>&nbsp;<span class="op" id="2626354">&amp;</span><span class="ident" id="2626355">tt</span><span class="op" id="2626357">.</span><span class="ident" id="2626358">fields</span><span class="op" id="2626364">[</span><span class="ident" id="2626365">i</span><span class="op" id="2626366">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626369">typ</span>&nbsp;<span class="op" id="2626373">:=</span>&nbsp;<span class="ident" id="2626376">field</span><span class="op" id="2626381">.</span><span class="ident" id="2626382">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626388">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626424">fl</span>&nbsp;<span class="op" id="2626427">:=</span>&nbsp;<span class="ident" id="2626430">v</span><span class="op" id="2626431">.</span><span class="ident" id="2626432">flag</span><span class="op" id="2626436">&amp;</span><span class="op" id="2626437">(</span><span class="ident" id="2626438">flagRO</span><span class="op" id="2626444">|</span><span class="ident" id="2626445">flagIndir</span><span class="op" id="2626454">|</span><span class="ident" id="2626455">flagAddr</span><span class="op" id="2626463">)</span>&nbsp;<span class="op" id="2626465">|</span>&nbsp;<span class="ident" id="2626467">flag</span><span class="op" id="2626471">(</span><span class="ident" id="2626472">typ</span><span class="op" id="2626475">.</span><span class="ident" id="2626476">Kind</span><span class="op" id="2626480">(</span><span class="op" id="2626481">)</span><span class="op" id="2626482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626485">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626530">if</span>&nbsp;<span class="ident" id="2626533">field</span><span class="op" id="2626538">.</span><span class="ident" id="2626539">pkgPath</span>&nbsp;<span class="op" id="2626547">!=</span>&nbsp;<span class="ident" id="2626550">nil</span>&nbsp;<span class="op" id="2626554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626558">fl</span>&nbsp;<span class="op" id="2626561">|=</span>&nbsp;<span class="ident" id="2626564">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2626572">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626575">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626631">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626696">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626744">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2626802">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2626845">ptr</span>&nbsp;<span class="op" id="2626849">:=</span>&nbsp;<span class="ident" id="2626852">unsafe</span><span class="op" id="2626858">.</span><span class="ident" id="2626859">Pointer</span><span class="op" id="2626866">(</span><span class="builtintype" id="2626867">uintptr</span><span class="op" id="2626874">(</span><span class="ident" id="2626875">v</span><span class="op" id="2626876">.</span><span class="ident" id="2626877">ptr</span><span class="op" id="2626880">)</span>&nbsp;<span class="op" id="2626882">+</span>&nbsp;<span class="ident" id="2626884">field</span><span class="op" id="2626889">.</span><span class="ident" id="2626890">offset</span><span class="op" id="2626896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2626899">return</span>&nbsp;<span class="ident" id="2626906">Value</span><span class="op" id="2626911">{</span><span class="ident" id="2626912">typ</span><span class="op" id="2626915">,</span>&nbsp;<span class="ident" id="2626917">ptr</span><span class="op" id="2626920">,</span>&nbsp;<span class="ident" id="2626922">fl</span><span class="op" id="2626924">}</span><br>
<span class="lineno"></span><span class="op" id="2626926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2626929">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2626994">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2627034">func</span>&nbsp;<span class="op" id="2627039">(</span><span class="ident" id="2627040">v</span>&nbsp;<span class="ident" id="2627042">Value</span><span class="op" id="2627047">)</span>&nbsp;<span class="ident" id="2627049">FieldByIndex</span><span class="op" id="2627061">(</span><span class="ident" id="2627062">index</span>&nbsp;<span class="op" id="2627068">[</span><span class="op" id="2627069">]</span><span class="builtintype" id="2627070">int</span><span class="op" id="2627073">)</span>&nbsp;<span class="ident" id="2627075">Value</span>&nbsp;<span class="op" id="2627081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627084">if</span>&nbsp;<span class="builtinfunc" id="2627087">len</span><span class="op" id="2627090">(</span><span class="ident" id="2627091">index</span><span class="op" id="2627096">)</span>&nbsp;<span class="op" id="2627098">==</span>&nbsp;<span class="num" id="2627101">1</span>&nbsp;<span class="op" id="2627103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627107">return</span>&nbsp;<span class="ident" id="2627114">v</span><span class="op" id="2627115">.</span><span class="ident" id="2627116">Field</span><span class="op" id="2627121">(</span><span class="ident" id="2627122">index</span><span class="op" id="2627127">[</span><span class="num" id="2627128">0</span><span class="op" id="2627129">]</span><span class="op" id="2627130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627133">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627136">v</span><span class="op" id="2627137">.</span><span class="ident" id="2627138">mustBe</span><span class="op" id="2627144">(</span><span class="ident" id="2627145">Struct</span><span class="op" id="2627151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627154">for</span>&nbsp;<span class="ident" id="2627158">i</span><span class="op" id="2627159">,</span>&nbsp;<span class="ident" id="2627161">x</span>&nbsp;<span class="op" id="2627163">:=</span>&nbsp;<span class="keyword" id="2627166">range</span>&nbsp;<span class="ident" id="2627172">index</span>&nbsp;<span class="op" id="2627178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627182">if</span>&nbsp;<span class="ident" id="2627185">i</span>&nbsp;<span class="op" id="2627187">&gt;</span>&nbsp;<span class="num" id="2627189">0</span>&nbsp;<span class="op" id="2627191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627196">if</span>&nbsp;<span class="ident" id="2627199">v</span><span class="op" id="2627200">.</span><span class="ident" id="2627201">Kind</span><span class="op" id="2627205">(</span><span class="op" id="2627206">)</span>&nbsp;<span class="op" id="2627208">==</span>&nbsp;<span class="ident" id="2627211">Ptr</span>&nbsp;<span class="op" id="2627215">&amp;&amp;</span>&nbsp;<span class="ident" id="2627218">v</span><span class="op" id="2627219">.</span><span class="ident" id="2627220">typ</span><span class="op" id="2627223">.</span><span class="ident" id="2627224">Elem</span><span class="op" id="2627228">(</span><span class="op" id="2627229">)</span><span class="op" id="2627230">.</span><span class="ident" id="2627231">Kind</span><span class="op" id="2627235">(</span><span class="op" id="2627236">)</span>&nbsp;<span class="op" id="2627238">==</span>&nbsp;<span class="ident" id="2627241">Struct</span>&nbsp;<span class="op" id="2627248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627254">if</span>&nbsp;<span class="ident" id="2627257">v</span><span class="op" id="2627258">.</span><span class="ident" id="2627259">IsNil</span><span class="op" id="2627264">(</span><span class="op" id="2627265">)</span>&nbsp;<span class="op" id="2627267">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2627274">panic</span><span class="op" id="2627279">(</span><span class="string" id="2627280">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2627341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627353">v</span>&nbsp;<span class="op" id="2627355">=</span>&nbsp;<span class="ident" id="2627357">v</span><span class="op" id="2627358">.</span><span class="ident" id="2627359">Elem</span><span class="op" id="2627363">(</span><span class="op" id="2627364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627373">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627377">v</span>&nbsp;<span class="op" id="2627379">=</span>&nbsp;<span class="ident" id="2627381">v</span><span class="op" id="2627382">.</span><span class="ident" id="2627383">Field</span><span class="op" id="2627388">(</span><span class="ident" id="2627389">x</span><span class="op" id="2627390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627396">return</span>&nbsp;<span class="ident" id="2627403">v</span><br>
<span class="lineno"></span><span class="op" id="2627405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2627408">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2627469">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2627521">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2627561">func</span>&nbsp;<span class="op" id="2627566">(</span><span class="ident" id="2627567">v</span>&nbsp;<span class="ident" id="2627569">Value</span><span class="op" id="2627574">)</span>&nbsp;<span class="ident" id="2627576">FieldByName</span><span class="op" id="2627587">(</span><span class="ident" id="2627588">name</span>&nbsp;<span class="builtintype" id="2627593">string</span><span class="op" id="2627599">)</span>&nbsp;<span class="ident" id="2627601">Value</span>&nbsp;<span class="op" id="2627607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2627610">v</span><span class="op" id="2627611">.</span><span class="ident" id="2627612">mustBe</span><span class="op" id="2627618">(</span><span class="ident" id="2627619">Struct</span><span class="op" id="2627625">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627628">if</span>&nbsp;<span class="ident" id="2627631">f</span><span class="op" id="2627632">,</span>&nbsp;<span class="ident" id="2627634">ok</span>&nbsp;<span class="op" id="2627637">:=</span>&nbsp;<span class="ident" id="2627640">v</span><span class="op" id="2627641">.</span><span class="ident" id="2627642">typ</span><span class="op" id="2627645">.</span><span class="ident" id="2627646">FieldByName</span><span class="op" id="2627657">(</span><span class="ident" id="2627658">name</span><span class="op" id="2627662">)</span><span class="op" id="2627663">;</span>&nbsp;<span class="ident" id="2627665">ok</span>&nbsp;<span class="op" id="2627668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627672">return</span>&nbsp;<span class="ident" id="2627679">v</span><span class="op" id="2627680">.</span><span class="ident" id="2627681">FieldByIndex</span><span class="op" id="2627693">(</span><span class="ident" id="2627694">f</span><span class="op" id="2627695">.</span><span class="ident" id="2627696">Index</span><span class="op" id="2627701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2627704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627707">return</span>&nbsp;<span class="ident" id="2627714">Value</span><span class="op" id="2627719">{</span><span class="op" id="2627720">}</span><br>
<span class="lineno"></span><span class="op" id="2627722">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2627725">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2627781">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2627819">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2627859">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2627911">func</span>&nbsp;<span class="op" id="2627916">(</span><span class="ident" id="2627917">v</span>&nbsp;<span class="ident" id="2627919">Value</span><span class="op" id="2627924">)</span>&nbsp;<span class="ident" id="2627926">FieldByNameFunc</span><span class="op" id="2627941">(</span><span class="ident" id="2627942">match</span>&nbsp;<span class="keyword" id="2627948">func</span><span class="op" id="2627952">(</span><span class="builtintype" id="2627953">string</span><span class="op" id="2627959">)</span>&nbsp;<span class="builtintype" id="2627961">bool</span><span class="op" id="2627965">)</span>&nbsp;<span class="ident" id="2627967">Value</span>&nbsp;<span class="op" id="2627973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2627976">if</span>&nbsp;<span class="ident" id="2627979">f</span><span class="op" id="2627980">,</span>&nbsp;<span class="ident" id="2627982">ok</span>&nbsp;<span class="op" id="2627985">:=</span>&nbsp;<span class="ident" id="2627988">v</span><span class="op" id="2627989">.</span><span class="ident" id="2627990">typ</span><span class="op" id="2627993">.</span><span class="ident" id="2627994">FieldByNameFunc</span><span class="op" id="2628009">(</span><span class="ident" id="2628010">match</span><span class="op" id="2628015">)</span><span class="op" id="2628016">;</span>&nbsp;<span class="ident" id="2628018">ok</span>&nbsp;<span class="op" id="2628021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628025">return</span>&nbsp;<span class="ident" id="2628032">v</span><span class="op" id="2628033">.</span><span class="ident" id="2628034">FieldByIndex</span><span class="op" id="2628046">(</span><span class="ident" id="2628047">f</span><span class="op" id="2628048">.</span><span class="ident" id="2628049">Index</span><span class="op" id="2628054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628060">return</span>&nbsp;<span class="ident" id="2628067">Value</span><span class="op" id="2628072">{</span><span class="op" id="2628073">}</span><br>
<span class="lineno">775</span><span class="op" id="2628075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628078">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2628131">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2628182">func</span>&nbsp;<span class="op" id="2628187">(</span><span class="ident" id="2628188">v</span>&nbsp;<span class="ident" id="2628190">Value</span><span class="op" id="2628195">)</span>&nbsp;<span class="ident" id="2628197">Float</span><span class="op" id="2628202">(</span><span class="op" id="2628203">)</span>&nbsp;<span class="builtintype" id="2628205">float64</span>&nbsp;<span class="op" id="2628213">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628216">k</span>&nbsp;<span class="op" id="2628218">:=</span>&nbsp;<span class="ident" id="2628221">v</span><span class="op" id="2628222">.</span><span class="ident" id="2628223">kind</span><span class="op" id="2628227">(</span><span class="op" id="2628228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628231">switch</span>&nbsp;<span class="ident" id="2628238">k</span>&nbsp;<span class="op" id="2628240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628243">case</span>&nbsp;<span class="ident" id="2628248">Float32</span><span class="op" id="2628255">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628259">return</span>&nbsp;<span class="builtintype" id="2628266">float64</span><span class="op" id="2628273">(</span><span class="op" id="2628274">*</span><span class="op" id="2628275">(</span><span class="op" id="2628276">*</span><span class="builtintype" id="2628277">float32</span><span class="op" id="2628284">)</span><span class="op" id="2628285">(</span><span class="ident" id="2628286">v</span><span class="op" id="2628287">.</span><span class="ident" id="2628288">ptr</span><span class="op" id="2628291">)</span><span class="op" id="2628292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628295">case</span>&nbsp;<span class="ident" id="2628300">Float64</span><span class="op" id="2628307">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628311">return</span>&nbsp;<span class="op" id="2628318">*</span><span class="op" id="2628319">(</span><span class="op" id="2628320">*</span><span class="builtintype" id="2628321">float64</span><span class="op" id="2628328">)</span><span class="op" id="2628329">(</span><span class="ident" id="2628330">v</span><span class="op" id="2628331">.</span><span class="ident" id="2628332">ptr</span><span class="op" id="2628335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2628341">panic</span><span class="op" id="2628346">(</span><span class="op" id="2628347">&amp;</span><span class="ident" id="2628348">ValueError</span><span class="op" id="2628358">{</span><span class="string" id="2628359">&#34;reflect.Value.Float&#34;</span><span class="op" id="2628380">,</span>&nbsp;<span class="ident" id="2628382">v</span><span class="op" id="2628383">.</span><span class="ident" id="2628384">kind</span><span class="op" id="2628388">(</span><span class="op" id="2628389">)</span><span class="op" id="2628390">}</span><span class="op" id="2628391">)</span><br>
<span class="lineno"></span><span class="op" id="2628393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2628396">var</span>&nbsp;<span class="ident" id="2628400">uint8Type</span>&nbsp;<span class="op" id="2628410">=</span>&nbsp;<span class="ident" id="2628412">TypeOf</span><span class="op" id="2628418">(</span><span class="builtintype" id="2628419">uint8</span><span class="op" id="2628424">(</span><span class="num" id="2628425">0</span><span class="op" id="2628426">)</span><span class="op" id="2628427">)</span><span class="op" id="2628428">.</span><span class="op" id="2628429">(</span><span class="op" id="2628430">*</span><span class="ident" id="2628431">rtype</span><span class="op" id="2628436">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2628439">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2628474">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2628552">func</span>&nbsp;<span class="op" id="2628557">(</span><span class="ident" id="2628558">v</span>&nbsp;<span class="ident" id="2628560">Value</span><span class="op" id="2628565">)</span>&nbsp;<span class="ident" id="2628567">Index</span><span class="op" id="2628572">(</span><span class="ident" id="2628573">i</span>&nbsp;<span class="builtintype" id="2628575">int</span><span class="op" id="2628578">)</span>&nbsp;<span class="ident" id="2628580">Value</span>&nbsp;<span class="op" id="2628586">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628589">switch</span>&nbsp;<span class="ident" id="2628596">v</span><span class="op" id="2628597">.</span><span class="ident" id="2628598">kind</span><span class="op" id="2628602">(</span><span class="op" id="2628603">)</span>&nbsp;<span class="op" id="2628605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628608">case</span>&nbsp;<span class="ident" id="2628613">Array</span><span class="op" id="2628618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628622">tt</span>&nbsp;<span class="op" id="2628625">:=</span>&nbsp;<span class="op" id="2628628">(</span><span class="op" id="2628629">*</span><span class="ident" id="2628630">arrayType</span><span class="op" id="2628639">)</span><span class="op" id="2628640">(</span><span class="ident" id="2628641">unsafe</span><span class="op" id="2628647">.</span><span class="ident" id="2628648">Pointer</span><span class="op" id="2628655">(</span><span class="ident" id="2628656">v</span><span class="op" id="2628657">.</span><span class="ident" id="2628658">typ</span><span class="op" id="2628661">)</span><span class="op" id="2628662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2628666">if</span>&nbsp;<span class="builtintype" id="2628669">uint</span><span class="op" id="2628673">(</span><span class="ident" id="2628674">i</span><span class="op" id="2628675">)</span>&nbsp;<span class="op" id="2628677">&gt;=</span>&nbsp;<span class="builtintype" id="2628680">uint</span><span class="op" id="2628684">(</span><span class="ident" id="2628685">tt</span><span class="op" id="2628687">.</span><span class="builtinfunc" id="2628688">len</span><span class="op" id="2628691">)</span>&nbsp;<span class="op" id="2628693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2628698">panic</span><span class="op" id="2628703">(</span><span class="string" id="2628704">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2628739">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2628743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628747">typ</span>&nbsp;<span class="op" id="2628751">:=</span>&nbsp;<span class="ident" id="2628754">tt</span><span class="op" id="2628756">.</span><span class="ident" id="2628757">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2628764">offset</span>&nbsp;<span class="op" id="2628771">:=</span>&nbsp;<span class="builtintype" id="2628774">uintptr</span><span class="op" id="2628781">(</span><span class="ident" id="2628782">i</span><span class="op" id="2628783">)</span>&nbsp;<span class="op" id="2628785">*</span>&nbsp;<span class="ident" id="2628787">typ</span><span class="op" id="2628790">.</span><span class="ident" id="2628791">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628799">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628855">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628920">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2628969">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2629036">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629074">val</span>&nbsp;<span class="op" id="2629078">:=</span>&nbsp;<span class="ident" id="2629081">unsafe</span><span class="op" id="2629087">.</span><span class="ident" id="2629088">Pointer</span><span class="op" id="2629095">(</span><span class="builtintype" id="2629096">uintptr</span><span class="op" id="2629103">(</span><span class="ident" id="2629104">v</span><span class="op" id="2629105">.</span><span class="ident" id="2629106">ptr</span><span class="op" id="2629109">)</span>&nbsp;<span class="op" id="2629111">+</span>&nbsp;<span class="ident" id="2629113">offset</span><span class="op" id="2629119">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629123">fl</span>&nbsp;<span class="op" id="2629126">:=</span>&nbsp;<span class="ident" id="2629129">v</span><span class="op" id="2629130">.</span><span class="ident" id="2629131">flag</span><span class="op" id="2629135">&amp;</span><span class="op" id="2629136">(</span><span class="ident" id="2629137">flagRO</span><span class="op" id="2629143">|</span><span class="ident" id="2629144">flagIndir</span><span class="op" id="2629153">|</span><span class="ident" id="2629154">flagAddr</span><span class="op" id="2629162">)</span>&nbsp;<span class="op" id="2629164">|</span>&nbsp;<span class="ident" id="2629166">flag</span><span class="op" id="2629170">(</span><span class="ident" id="2629171">typ</span><span class="op" id="2629174">.</span><span class="ident" id="2629175">Kind</span><span class="op" id="2629179">(</span><span class="op" id="2629180">)</span><span class="op" id="2629181">)</span>&nbsp;<span class="comment" id="2629183">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629215">return</span>&nbsp;<span class="ident" id="2629222">Value</span><span class="op" id="2629227">{</span><span class="ident" id="2629228">typ</span><span class="op" id="2629231">,</span>&nbsp;<span class="ident" id="2629233">val</span><span class="op" id="2629236">,</span>&nbsp;<span class="ident" id="2629238">fl</span><span class="op" id="2629240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629244">case</span>&nbsp;<span class="ident" id="2629249">Slice</span><span class="op" id="2629254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2629258">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2629297">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629345">s</span>&nbsp;<span class="op" id="2629347">:=</span>&nbsp;<span class="op" id="2629350">(</span><span class="op" id="2629351">*</span><span class="ident" id="2629352">sliceHeader</span><span class="op" id="2629363">)</span><span class="op" id="2629364">(</span><span class="ident" id="2629365">v</span><span class="op" id="2629366">.</span><span class="ident" id="2629367">ptr</span><span class="op" id="2629370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629374">if</span>&nbsp;<span class="builtintype" id="2629377">uint</span><span class="op" id="2629381">(</span><span class="ident" id="2629382">i</span><span class="op" id="2629383">)</span>&nbsp;<span class="op" id="2629385">&gt;=</span>&nbsp;<span class="builtintype" id="2629388">uint</span><span class="op" id="2629392">(</span><span class="ident" id="2629393">s</span><span class="op" id="2629394">.</span><span class="ident" id="2629395">Len</span><span class="op" id="2629398">)</span>&nbsp;<span class="op" id="2629400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2629405">panic</span><span class="op" id="2629410">(</span><span class="string" id="2629411">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2629446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629450">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629454">tt</span>&nbsp;<span class="op" id="2629457">:=</span>&nbsp;<span class="op" id="2629460">(</span><span class="op" id="2629461">*</span><span class="ident" id="2629462">sliceType</span><span class="op" id="2629471">)</span><span class="op" id="2629472">(</span><span class="ident" id="2629473">unsafe</span><span class="op" id="2629479">.</span><span class="ident" id="2629480">Pointer</span><span class="op" id="2629487">(</span><span class="ident" id="2629488">v</span><span class="op" id="2629489">.</span><span class="ident" id="2629490">typ</span><span class="op" id="2629493">)</span><span class="op" id="2629494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629498">typ</span>&nbsp;<span class="op" id="2629502">:=</span>&nbsp;<span class="ident" id="2629505">tt</span><span class="op" id="2629507">.</span><span class="ident" id="2629508">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629515">val</span>&nbsp;<span class="op" id="2629519">:=</span>&nbsp;<span class="ident" id="2629522">unsafe</span><span class="op" id="2629528">.</span><span class="ident" id="2629529">Pointer</span><span class="op" id="2629536">(</span><span class="builtintype" id="2629537">uintptr</span><span class="op" id="2629544">(</span><span class="ident" id="2629545">s</span><span class="op" id="2629546">.</span><span class="ident" id="2629547">Data</span><span class="op" id="2629551">)</span>&nbsp;<span class="op" id="2629553">+</span>&nbsp;<span class="builtintype" id="2629555">uintptr</span><span class="op" id="2629562">(</span><span class="ident" id="2629563">i</span><span class="op" id="2629564">)</span><span class="op" id="2629565">*</span><span class="ident" id="2629566">typ</span><span class="op" id="2629569">.</span><span class="ident" id="2629570">size</span><span class="op" id="2629574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629578">fl</span>&nbsp;<span class="op" id="2629581">:=</span>&nbsp;<span class="ident" id="2629584">flagAddr</span>&nbsp;<span class="op" id="2629593">|</span>&nbsp;<span class="ident" id="2629595">flagIndir</span>&nbsp;<span class="op" id="2629605">|</span>&nbsp;<span class="ident" id="2629607">v</span><span class="op" id="2629608">.</span><span class="ident" id="2629609">flag</span><span class="op" id="2629613">&amp;</span><span class="ident" id="2629614">flagRO</span>&nbsp;<span class="op" id="2629621">|</span>&nbsp;<span class="ident" id="2629623">flag</span><span class="op" id="2629627">(</span><span class="ident" id="2629628">typ</span><span class="op" id="2629631">.</span><span class="ident" id="2629632">Kind</span><span class="op" id="2629636">(</span><span class="op" id="2629637">)</span><span class="op" id="2629638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629642">return</span>&nbsp;<span class="ident" id="2629649">Value</span><span class="op" id="2629654">{</span><span class="ident" id="2629655">typ</span><span class="op" id="2629658">,</span>&nbsp;<span class="ident" id="2629660">val</span><span class="op" id="2629663">,</span>&nbsp;<span class="ident" id="2629665">fl</span><span class="op" id="2629667">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629671">case</span>&nbsp;<span class="ident" id="2629676">String</span><span class="op" id="2629682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629686">s</span>&nbsp;<span class="op" id="2629688">:=</span>&nbsp;<span class="op" id="2629691">(</span><span class="op" id="2629692">*</span><span class="ident" id="2629693">stringHeader</span><span class="op" id="2629705">)</span><span class="op" id="2629706">(</span><span class="ident" id="2629707">v</span><span class="op" id="2629708">.</span><span class="ident" id="2629709">ptr</span><span class="op" id="2629712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629716">if</span>&nbsp;<span class="builtintype" id="2629719">uint</span><span class="op" id="2629723">(</span><span class="ident" id="2629724">i</span><span class="op" id="2629725">)</span>&nbsp;<span class="op" id="2629727">&gt;=</span>&nbsp;<span class="builtintype" id="2629730">uint</span><span class="op" id="2629734">(</span><span class="ident" id="2629735">s</span><span class="op" id="2629736">.</span><span class="ident" id="2629737">Len</span><span class="op" id="2629740">)</span>&nbsp;<span class="op" id="2629742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2629747">panic</span><span class="op" id="2629752">(</span><span class="string" id="2629753">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2629789">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629797">p</span>&nbsp;<span class="op" id="2629799">:=</span>&nbsp;<span class="ident" id="2629802">unsafe</span><span class="op" id="2629808">.</span><span class="ident" id="2629809">Pointer</span><span class="op" id="2629816">(</span><span class="builtintype" id="2629817">uintptr</span><span class="op" id="2629824">(</span><span class="ident" id="2629825">s</span><span class="op" id="2629826">.</span><span class="ident" id="2629827">Data</span><span class="op" id="2629831">)</span>&nbsp;<span class="op" id="2629833">+</span>&nbsp;<span class="builtintype" id="2629835">uintptr</span><span class="op" id="2629842">(</span><span class="ident" id="2629843">i</span><span class="op" id="2629844">)</span><span class="op" id="2629845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2629849">fl</span>&nbsp;<span class="op" id="2629852">:=</span>&nbsp;<span class="ident" id="2629855">v</span><span class="op" id="2629856">.</span><span class="ident" id="2629857">flag</span><span class="op" id="2629861">&amp;</span><span class="ident" id="2629862">flagRO</span>&nbsp;<span class="op" id="2629869">|</span>&nbsp;<span class="ident" id="2629871">flag</span><span class="op" id="2629875">(</span><span class="ident" id="2629876">Uint8</span><span class="op" id="2629881">)</span>&nbsp;<span class="op" id="2629883">|</span>&nbsp;<span class="ident" id="2629885">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2629897">return</span>&nbsp;<span class="ident" id="2629904">Value</span><span class="op" id="2629909">{</span><span class="ident" id="2629910">uint8Type</span><span class="op" id="2629919">,</span>&nbsp;<span class="ident" id="2629921">p</span><span class="op" id="2629922">,</span>&nbsp;<span class="ident" id="2629924">fl</span><span class="op" id="2629926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2629929">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2629932">panic</span><span class="op" id="2629937">(</span><span class="op" id="2629938">&amp;</span><span class="ident" id="2629939">ValueError</span><span class="op" id="2629949">{</span><span class="string" id="2629950">&#34;reflect.Value.Index&#34;</span><span class="op" id="2629971">,</span>&nbsp;<span class="ident" id="2629973">v</span><span class="op" id="2629974">.</span><span class="ident" id="2629975">kind</span><span class="op" id="2629979">(</span><span class="op" id="2629980">)</span><span class="op" id="2629981">}</span><span class="op" id="2629982">)</span><br>
<span class="lineno"></span><span class="op" id="2629984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2629987">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2630037">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2630104">func</span>&nbsp;<span class="op" id="2630109">(</span><span class="ident" id="2630110">v</span>&nbsp;<span class="ident" id="2630112">Value</span><span class="op" id="2630117">)</span>&nbsp;<span class="ident" id="2630119">Int</span><span class="op" id="2630122">(</span><span class="op" id="2630123">)</span>&nbsp;<span class="ident" id="2630125">int64</span>&nbsp;<span class="op" id="2630131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630134">k</span>&nbsp;<span class="op" id="2630136">:=</span>&nbsp;<span class="ident" id="2630139">v</span><span class="op" id="2630140">.</span><span class="ident" id="2630141">kind</span><span class="op" id="2630145">(</span><span class="op" id="2630146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2630149">p</span>&nbsp;<span class="op" id="2630151">:=</span>&nbsp;<span class="ident" id="2630154">v</span><span class="op" id="2630155">.</span><span class="ident" id="2630156">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630161">switch</span>&nbsp;<span class="ident" id="2630168">k</span>&nbsp;<span class="op" id="2630170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630173">case</span>&nbsp;<span class="ident" id="2630178">Int</span><span class="op" id="2630181">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630185">return</span>&nbsp;<span class="ident" id="2630192">int64</span><span class="op" id="2630197">(</span><span class="op" id="2630198">*</span><span class="op" id="2630199">(</span><span class="op" id="2630200">*</span><span class="builtintype" id="2630201">int</span><span class="op" id="2630204">)</span><span class="op" id="2630205">(</span><span class="ident" id="2630206">p</span><span class="op" id="2630207">)</span><span class="op" id="2630208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630211">case</span>&nbsp;<span class="ident" id="2630216">Int8</span><span class="op" id="2630220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630224">return</span>&nbsp;<span class="ident" id="2630231">int64</span><span class="op" id="2630236">(</span><span class="op" id="2630237">*</span><span class="op" id="2630238">(</span><span class="op" id="2630239">*</span><span class="builtintype" id="2630240">int8</span><span class="op" id="2630244">)</span><span class="op" id="2630245">(</span><span class="ident" id="2630246">p</span><span class="op" id="2630247">)</span><span class="op" id="2630248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630251">case</span>&nbsp;<span class="ident" id="2630256">Int16</span><span class="op" id="2630261">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630265">return</span>&nbsp;<span class="ident" id="2630272">int64</span><span class="op" id="2630277">(</span><span class="op" id="2630278">*</span><span class="op" id="2630279">(</span><span class="op" id="2630280">*</span><span class="builtintype" id="2630281">int16</span><span class="op" id="2630286">)</span><span class="op" id="2630287">(</span><span class="ident" id="2630288">p</span><span class="op" id="2630289">)</span><span class="op" id="2630290">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630293">case</span>&nbsp;<span class="ident" id="2630298">Int32</span><span class="op" id="2630303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630307">return</span>&nbsp;<span class="ident" id="2630314">int64</span><span class="op" id="2630319">(</span><span class="op" id="2630320">*</span><span class="op" id="2630321">(</span><span class="op" id="2630322">*</span><span class="builtintype" id="2630323">int32</span><span class="op" id="2630328">)</span><span class="op" id="2630329">(</span><span class="ident" id="2630330">p</span><span class="op" id="2630331">)</span><span class="op" id="2630332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630335">case</span>&nbsp;<span class="ident" id="2630340">Int64</span><span class="op" id="2630345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630349">return</span>&nbsp;<span class="ident" id="2630356">int64</span><span class="op" id="2630361">(</span><span class="op" id="2630362">*</span><span class="op" id="2630363">(</span><span class="op" id="2630364">*</span><span class="ident" id="2630365">int64</span><span class="op" id="2630370">)</span><span class="op" id="2630371">(</span><span class="ident" id="2630372">p</span><span class="op" id="2630373">)</span><span class="op" id="2630374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2630377">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2630380">panic</span><span class="op" id="2630385">(</span><span class="op" id="2630386">&amp;</span><span class="ident" id="2630387">ValueError</span><span class="op" id="2630397">{</span><span class="string" id="2630398">&#34;reflect.Value.Int&#34;</span><span class="op" id="2630417">,</span>&nbsp;<span class="ident" id="2630419">v</span><span class="op" id="2630420">.</span><span class="ident" id="2630421">kind</span><span class="op" id="2630425">(</span><span class="op" id="2630426">)</span><span class="op" id="2630427">}</span><span class="op" id="2630428">)</span><br>
<span class="lineno"></span><span class="op" id="2630430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2630433">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2630506">func</span>&nbsp;<span class="op" id="2630511">(</span><span class="ident" id="2630512">v</span>&nbsp;<span class="ident" id="2630514">Value</span><span class="op" id="2630519">)</span>&nbsp;<span class="ident" id="2630521">CanInterface</span><span class="op" id="2630533">(</span><span class="op" id="2630534">)</span>&nbsp;<span class="builtintype" id="2630536">bool</span>&nbsp;<span class="op" id="2630541">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630544">if</span>&nbsp;<span class="ident" id="2630547">v</span><span class="op" id="2630548">.</span><span class="ident" id="2630549">flag</span>&nbsp;<span class="op" id="2630554">==</span>&nbsp;<span class="num" id="2630557">0</span>&nbsp;<span class="op" id="2630559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2630563">panic</span><span class="op" id="2630568">(</span><span class="op" id="2630569">&amp;</span><span class="ident" id="2630570">ValueError</span><span class="op" id="2630580">{</span><span class="string" id="2630581">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2630609">,</span>&nbsp;<span class="ident" id="2630611">Invalid</span><span class="op" id="2630618">}</span><span class="op" id="2630619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2630622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630625">return</span>&nbsp;<span class="ident" id="2630632">v</span><span class="op" id="2630633">.</span><span class="ident" id="2630634">flag</span><span class="op" id="2630638">&amp;</span><span class="ident" id="2630639">flagRO</span>&nbsp;<span class="op" id="2630646">==</span>&nbsp;<span class="num" id="2630649">0</span><br>
<span class="lineno"></span><span class="op" id="2630651">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2630654">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2630712">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2630736">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2630782">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2630834">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2630863">func</span>&nbsp;<span class="op" id="2630868">(</span><span class="ident" id="2630869">v</span>&nbsp;<span class="ident" id="2630871">Value</span><span class="op" id="2630876">)</span>&nbsp;<span class="ident" id="2630878">Interface</span><span class="op" id="2630887">(</span><span class="op" id="2630888">)</span>&nbsp;<span class="op" id="2630890">(</span><span class="ident" id="2630891">i</span>&nbsp;<span class="keyword" id="2630893">interface</span><span class="op" id="2630902">{</span><span class="op" id="2630903">}</span><span class="op" id="2630904">)</span>&nbsp;<span class="op" id="2630906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630909">return</span>&nbsp;<span class="ident" id="2630916">valueInterface</span><span class="op" id="2630930">(</span><span class="ident" id="2630931">v</span><span class="op" id="2630932">,</span>&nbsp;<span class="ident" id="2630934">true</span><span class="op" id="2630938">)</span><br>
<span class="lineno"></span><span class="op" id="2630940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2630943">func</span>&nbsp;<span class="ident" id="2630948">valueInterface</span><span class="op" id="2630962">(</span><span class="ident" id="2630963">v</span>&nbsp;<span class="ident" id="2630965">Value</span><span class="op" id="2630970">,</span>&nbsp;<span class="ident" id="2630972">safe</span>&nbsp;<span class="builtintype" id="2630977">bool</span><span class="op" id="2630981">)</span>&nbsp;<span class="keyword" id="2630983">interface</span><span class="op" id="2630992">{</span><span class="op" id="2630993">}</span>&nbsp;<span class="op" id="2630995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2630998">if</span>&nbsp;<span class="ident" id="2631001">v</span><span class="op" id="2631002">.</span><span class="ident" id="2631003">flag</span>&nbsp;<span class="op" id="2631008">==</span>&nbsp;<span class="num" id="2631011">0</span>&nbsp;<span class="op" id="2631013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2631017">panic</span><span class="op" id="2631022">(</span><span class="op" id="2631023">&amp;</span><span class="ident" id="2631024">ValueError</span><span class="op" id="2631034">{</span><span class="string" id="2631035">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2631060">,</span>&nbsp;<span class="num" id="2631062">0</span><span class="op" id="2631063">}</span><span class="op" id="2631064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631070">if</span>&nbsp;<span class="ident" id="2631073">safe</span>&nbsp;<span class="op" id="2631078">&amp;&amp;</span>&nbsp;<span class="ident" id="2631081">v</span><span class="op" id="2631082">.</span><span class="ident" id="2631083">flag</span><span class="op" id="2631087">&amp;</span><span class="ident" id="2631088">flagRO</span>&nbsp;<span class="op" id="2631095">!=</span>&nbsp;<span class="num" id="2631098">0</span>&nbsp;<span class="op" id="2631100">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631104">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631165">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631220">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2631286">panic</span><span class="op" id="2631291">(</span><span class="string" id="2631292">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2631379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631382">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631385">if</span>&nbsp;<span class="ident" id="2631388">v</span><span class="op" id="2631389">.</span><span class="ident" id="2631390">flag</span><span class="op" id="2631394">&amp;</span><span class="ident" id="2631395">flagMethod</span>&nbsp;<span class="op" id="2631406">!=</span>&nbsp;<span class="num" id="2631409">0</span>&nbsp;<span class="op" id="2631411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631415">v</span>&nbsp;<span class="op" id="2631417">=</span>&nbsp;<span class="ident" id="2631419">makeMethodValue</span><span class="op" id="2631434">(</span><span class="string" id="2631435">&#34;Interface&#34;</span><span class="op" id="2631446">,</span>&nbsp;<span class="ident" id="2631448">v</span><span class="op" id="2631449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631456">if</span>&nbsp;<span class="ident" id="2631459">v</span><span class="op" id="2631460">.</span><span class="ident" id="2631461">kind</span><span class="op" id="2631465">(</span><span class="op" id="2631466">)</span>&nbsp;<span class="op" id="2631468">==</span>&nbsp;<span class="ident" id="2631471">Interface</span>&nbsp;<span class="op" id="2631481">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631485">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631545">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631602">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631637">if</span>&nbsp;<span class="ident" id="2631640">v</span><span class="op" id="2631641">.</span><span class="ident" id="2631642">NumMethod</span><span class="op" id="2631651">(</span><span class="op" id="2631652">)</span>&nbsp;<span class="op" id="2631654">==</span>&nbsp;<span class="num" id="2631657">0</span>&nbsp;<span class="op" id="2631659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631664">return</span>&nbsp;<span class="op" id="2631671">*</span><span class="op" id="2631672">(</span><span class="op" id="2631673">*</span><span class="keyword" id="2631674">interface</span><span class="op" id="2631683">{</span><span class="op" id="2631684">}</span><span class="op" id="2631685">)</span><span class="op" id="2631686">(</span><span class="ident" id="2631687">v</span><span class="op" id="2631688">.</span><span class="ident" id="2631689">ptr</span><span class="op" id="2631692">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631700">return</span>&nbsp;<span class="op" id="2631707">*</span><span class="op" id="2631708">(</span><span class="op" id="2631709">*</span><span class="keyword" id="2631710">interface</span>&nbsp;<span class="op" id="2631720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2631725">M</span><span class="op" id="2631726">(</span><span class="op" id="2631727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631731">}</span><span class="op" id="2631732">)</span><span class="op" id="2631733">(</span><span class="ident" id="2631734">v</span><span class="op" id="2631735">.</span><span class="ident" id="2631736">ptr</span><span class="op" id="2631739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2631742">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631746">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2631819">return</span>&nbsp;<span class="ident" id="2631826">packEface</span><span class="op" id="2631835">(</span><span class="ident" id="2631836">v</span><span class="op" id="2631837">)</span><br>
<span class="lineno"></span><span class="op" id="2631839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2631842">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2631910">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2631953">func</span>&nbsp;<span class="op" id="2631958">(</span><span class="ident" id="2631959">v</span>&nbsp;<span class="ident" id="2631961">Value</span><span class="op" id="2631966">)</span>&nbsp;<span class="ident" id="2631968">InterfaceData</span><span class="op" id="2631981">(</span><span class="op" id="2631982">)</span>&nbsp;<span class="op" id="2631984">[</span><span class="num" id="2631985">2</span><span class="op" id="2631986">]</span><span class="builtintype" id="2631987">uintptr</span>&nbsp;<span class="op" id="2631995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2631998">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632023">v</span><span class="op" id="2632024">.</span><span class="ident" id="2632025">mustBe</span><span class="op" id="2632031">(</span><span class="ident" id="2632032">Interface</span><span class="op" id="2632041">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2632044">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2632095">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2632147">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2632200">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2632224">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632292">return</span>&nbsp;<span class="op" id="2632299">*</span><span class="op" id="2632300">(</span><span class="op" id="2632301">*</span><span class="op" id="2632302">[</span><span class="num" id="2632303">2</span><span class="op" id="2632304">]</span><span class="builtintype" id="2632305">uintptr</span><span class="op" id="2632312">)</span><span class="op" id="2632313">(</span><span class="ident" id="2632314">v</span><span class="op" id="2632315">.</span><span class="ident" id="2632316">ptr</span><span class="op" id="2632319">)</span><br>
<span class="lineno"></span><span class="op" id="2632321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2632324">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2632393">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2632460">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2632528">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2632596">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2632662">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2632730">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2632740">func</span>&nbsp;<span class="op" id="2632745">(</span><span class="ident" id="2632746">v</span>&nbsp;<span class="ident" id="2632748">Value</span><span class="op" id="2632753">)</span>&nbsp;<span class="ident" id="2632755">IsNil</span><span class="op" id="2632760">(</span><span class="op" id="2632761">)</span>&nbsp;<span class="builtintype" id="2632763">bool</span>&nbsp;<span class="op" id="2632768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632771">k</span>&nbsp;<span class="op" id="2632773">:=</span>&nbsp;<span class="ident" id="2632776">v</span><span class="op" id="2632777">.</span><span class="ident" id="2632778">kind</span><span class="op" id="2632782">(</span><span class="op" id="2632783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632786">switch</span>&nbsp;<span class="ident" id="2632793">k</span>&nbsp;<span class="op" id="2632795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632798">case</span>&nbsp;<span class="ident" id="2632803">Chan</span><span class="op" id="2632807">,</span>&nbsp;<span class="ident" id="2632809">Func</span><span class="op" id="2632813">,</span>&nbsp;<span class="ident" id="2632815">Map</span><span class="op" id="2632818">,</span>&nbsp;<span class="ident" id="2632820">Ptr</span><span class="op" id="2632823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632827">if</span>&nbsp;<span class="ident" id="2632830">v</span><span class="op" id="2632831">.</span><span class="ident" id="2632832">flag</span><span class="op" id="2632836">&amp;</span><span class="ident" id="2632837">flagMethod</span>&nbsp;<span class="op" id="2632848">!=</span>&nbsp;<span class="num" id="2632851">0</span>&nbsp;<span class="op" id="2632853">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632858">return</span>&nbsp;<span class="ident" id="2632865">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632877">ptr</span>&nbsp;<span class="op" id="2632881">:=</span>&nbsp;<span class="ident" id="2632884">v</span><span class="op" id="2632885">.</span><span class="ident" id="2632886">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632892">if</span>&nbsp;<span class="ident" id="2632895">v</span><span class="op" id="2632896">.</span><span class="ident" id="2632897">flag</span><span class="op" id="2632901">&amp;</span><span class="ident" id="2632902">flagIndir</span>&nbsp;<span class="op" id="2632912">!=</span>&nbsp;<span class="num" id="2632915">0</span>&nbsp;<span class="op" id="2632917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2632922">ptr</span>&nbsp;<span class="op" id="2632926">=</span>&nbsp;<span class="op" id="2632928">*</span><span class="op" id="2632929">(</span><span class="op" id="2632930">*</span><span class="ident" id="2632931">unsafe</span><span class="op" id="2632937">.</span><span class="ident" id="2632938">Pointer</span><span class="op" id="2632945">)</span><span class="op" id="2632946">(</span><span class="ident" id="2632947">ptr</span><span class="op" id="2632950">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2632954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632958">return</span>&nbsp;<span class="ident" id="2632965">ptr</span>&nbsp;<span class="op" id="2632969">==</span>&nbsp;<span class="ident" id="2632972">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2632977">case</span>&nbsp;<span class="ident" id="2632982">Interface</span><span class="op" id="2632991">,</span>&nbsp;<span class="ident" id="2632993">Slice</span><span class="op" id="2632998">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633002">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2633060">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633119">return</span>&nbsp;<span class="op" id="2633126">*</span><span class="op" id="2633127">(</span><span class="op" id="2633128">*</span><span class="ident" id="2633129">unsafe</span><span class="op" id="2633135">.</span><span class="ident" id="2633136">Pointer</span><span class="op" id="2633143">)</span><span class="op" id="2633144">(</span><span class="ident" id="2633145">v</span><span class="op" id="2633146">.</span><span class="ident" id="2633147">ptr</span><span class="op" id="2633150">)</span>&nbsp;<span class="op" id="2633152">==</span>&nbsp;<span class="ident" id="2633155">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2633160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2633163">panic</span><span class="op" id="2633168">(</span><span class="op" id="2633169">&amp;</span><span class="ident" id="2633170">ValueError</span><span class="op" id="2633180">{</span><span class="string" id="2633181">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2633202">,</span>&nbsp;<span class="ident" id="2633204">v</span><span class="op" id="2633205">.</span><span class="ident" id="2633206">kind</span><span class="op" id="2633210">(</span><span class="op" id="2633211">)</span><span class="op" id="2633212">}</span><span class="op" id="2633213">)</span><br>
<span class="lineno"></span><span class="op" id="2633215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2633218">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2633267">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2633311">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2633379">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2633440">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2633508">func</span>&nbsp;<span class="op" id="2633513">(</span><span class="ident" id="2633514">v</span>&nbsp;<span class="ident" id="2633516">Value</span><span class="op" id="2633521">)</span>&nbsp;<span class="ident" id="2633523">IsValid</span><span class="op" id="2633530">(</span><span class="op" id="2633531">)</span>&nbsp;<span class="builtintype" id="2633533">bool</span>&nbsp;<span class="op" id="2633538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633541">return</span>&nbsp;<span class="ident" id="2633548">v</span><span class="op" id="2633549">.</span><span class="ident" id="2633550">flag</span>&nbsp;<span class="op" id="2633555">!=</span>&nbsp;<span class="num" id="2633558">0</span><br>
<span class="lineno"></span><span class="op" id="2633560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2633563">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2633589">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2633662">func</span>&nbsp;<span class="op" id="2633667">(</span><span class="ident" id="2633668">v</span>&nbsp;<span class="ident" id="2633670">Value</span><span class="op" id="2633675">)</span>&nbsp;<span class="ident" id="2633677">Kind</span><span class="op" id="2633681">(</span><span class="op" id="2633682">)</span>&nbsp;<span class="ident" id="2633684">Kind</span>&nbsp;<span class="op" id="2633689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633692">return</span>&nbsp;<span class="ident" id="2633699">v</span><span class="op" id="2633700">.</span><span class="ident" id="2633701">kind</span><span class="op" id="2633705">(</span><span class="op" id="2633706">)</span><br>
<span class="lineno"></span><span class="op" id="2633708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2633711">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2633738">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2633806">func</span>&nbsp;<span class="op" id="2633811">(</span><span class="ident" id="2633812">v</span>&nbsp;<span class="ident" id="2633814">Value</span><span class="op" id="2633819">)</span>&nbsp;<span class="ident" id="2633821">Len</span><span class="op" id="2633824">(</span><span class="op" id="2633825">)</span>&nbsp;<span class="builtintype" id="2633827">int</span>&nbsp;<span class="op" id="2633831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633834">k</span>&nbsp;<span class="op" id="2633836">:=</span>&nbsp;<span class="ident" id="2633839">v</span><span class="op" id="2633840">.</span><span class="ident" id="2633841">kind</span><span class="op" id="2633845">(</span><span class="op" id="2633846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633849">switch</span>&nbsp;<span class="ident" id="2633856">k</span>&nbsp;<span class="op" id="2633858">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633861">case</span>&nbsp;<span class="ident" id="2633866">Array</span><span class="op" id="2633871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2633875">tt</span>&nbsp;<span class="op" id="2633878">:=</span>&nbsp;<span class="op" id="2633881">(</span><span class="op" id="2633882">*</span><span class="ident" id="2633883">arrayType</span><span class="op" id="2633892">)</span><span class="op" id="2633893">(</span><span class="ident" id="2633894">unsafe</span><span class="op" id="2633900">.</span><span class="ident" id="2633901">Pointer</span><span class="op" id="2633908">(</span><span class="ident" id="2633909">v</span><span class="op" id="2633910">.</span><span class="ident" id="2633911">typ</span><span class="op" id="2633914">)</span><span class="op" id="2633915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633919">return</span>&nbsp;<span class="builtintype" id="2633926">int</span><span class="op" id="2633929">(</span><span class="ident" id="2633930">tt</span><span class="op" id="2633932">.</span><span class="builtinfunc" id="2633933">len</span><span class="op" id="2633936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633939">case</span>&nbsp;<span class="ident" id="2633944">Chan</span><span class="op" id="2633948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633952">return</span>&nbsp;<span class="ident" id="2633959">chanlen</span><span class="op" id="2633966">(</span><span class="ident" id="2633967">v</span><span class="op" id="2633968">.</span><span class="ident" id="2633969">pointer</span><span class="op" id="2633976">(</span><span class="op" id="2633977">)</span><span class="op" id="2633978">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633981">case</span>&nbsp;<span class="ident" id="2633986">Map</span><span class="op" id="2633989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2633993">return</span>&nbsp;<span class="ident" id="2634000">maplen</span><span class="op" id="2634006">(</span><span class="ident" id="2634007">v</span><span class="op" id="2634008">.</span><span class="ident" id="2634009">pointer</span><span class="op" id="2634016">(</span><span class="op" id="2634017">)</span><span class="op" id="2634018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634021">case</span>&nbsp;<span class="ident" id="2634026">Slice</span><span class="op" id="2634031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634035">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634087">return</span>&nbsp;<span class="op" id="2634094">(</span><span class="op" id="2634095">*</span><span class="ident" id="2634096">sliceHeader</span><span class="op" id="2634107">)</span><span class="op" id="2634108">(</span><span class="ident" id="2634109">v</span><span class="op" id="2634110">.</span><span class="ident" id="2634111">ptr</span><span class="op" id="2634114">)</span><span class="op" id="2634115">.</span><span class="ident" id="2634116">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634121">case</span>&nbsp;<span class="ident" id="2634126">String</span><span class="op" id="2634132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634136">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2634189">return</span>&nbsp;<span class="op" id="2634196">(</span><span class="op" id="2634197">*</span><span class="ident" id="2634198">stringHeader</span><span class="op" id="2634210">)</span><span class="op" id="2634211">(</span><span class="ident" id="2634212">v</span><span class="op" id="2634213">.</span><span class="ident" id="2634214">ptr</span><span class="op" id="2634217">)</span><span class="op" id="2634218">.</span><span class="ident" id="2634219">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2634224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2634227">panic</span><span class="op" id="2634232">(</span><span class="op" id="2634233">&amp;</span><span class="ident" id="2634234">ValueError</span><span class="op" id="2634244">{</span><span class="string" id="2634245">&#34;reflect.Value.Len&#34;</span><span class="op" id="2634264">,</span>&nbsp;<span class="ident" id="2634266">v</span><span class="op" id="2634267">.</span><span class="ident" id="2634268">kind</span><span class="op" id="2634272">(</span><span class="op" id="2634273">)</span><span class="op" id="2634274">}</span><span class="op" id="2634275">)</span><br>
<span class="lineno">980</span><span class="op" id="2634277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2634280">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2634344">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2634381">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2634471">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2634542">func</span>&nbsp;<span class="op" id="2634547">(</span><span class="ident" id="2634548">v</span>&nbsp;<span class="ident" id="2634550">Value</span><span class="op" id="2634555">)</span>&nbsp;<span class="ident" id="2634557">MapIndex</span><span class="op" id="2634565">(</span><span class="ident" id="2634566">key</span>&nbsp;<span class="ident" id="2634570">Value</span><span class="op" id="2634575">)</span>&nbsp;<span class="ident" id="2634577">Value</span>&nbsp;<span class="op" id="2634583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634586">v</span><span class="op" id="2634587">.</span><span class="ident" id="2634588">mustBe</span><span class="op" id="2634594">(</span><span class="ident" id="2634595">Map</span><span class="op" id="2634598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2634601">tt</span>&nbsp;<span class="op" id="2634604">:=</span>&nbsp;<span class="op" id="2634607">(</span><span class="op" id="2634608">*</span><span class="ident" id="2634609">mapType</span><span class="op" id="2634616">)</span><span class="op" id="2634617">(</span><span class="ident" id="2634618">unsafe</span><span class="op" id="2634624">.</span><span class="ident" id="2634625">Pointer</span><span class="op" id="2634632">(</span><span class="ident" id="2634633">v</span><span class="op" id="2634634">.</span><span class="ident" id="2634635">typ</span><span class="op" id="2634638">)</span><span class="op" id="2634639">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634643">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634700">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634756">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634813">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634870">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634926">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2634983">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635009">key</span>&nbsp;<span class="op" id="2635013">=</span>&nbsp;<span class="ident" id="2635015">key</span><span class="op" id="2635018">.</span><span class="ident" id="2635019">assignTo</span><span class="op" id="2635027">(</span><span class="string" id="2635028">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2635052">,</span>&nbsp;<span class="ident" id="2635054">tt</span><span class="op" id="2635056">.</span><span class="ident" id="2635057">key</span><span class="op" id="2635060">,</span>&nbsp;<span class="ident" id="2635062">nil</span><span class="op" id="2635065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635069">var</span>&nbsp;<span class="ident" id="2635073">k</span>&nbsp;<span class="ident" id="2635075">unsafe</span><span class="op" id="2635081">.</span><span class="ident" id="2635082">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635091">if</span>&nbsp;<span class="ident" id="2635094">key</span><span class="op" id="2635097">.</span><span class="ident" id="2635098">flag</span><span class="op" id="2635102">&amp;</span><span class="ident" id="2635103">flagIndir</span>&nbsp;<span class="op" id="2635113">!=</span>&nbsp;<span class="num" id="2635116">0</span>&nbsp;<span class="op" id="2635118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635122">k</span>&nbsp;<span class="op" id="2635124">=</span>&nbsp;<span class="ident" id="2635126">key</span><span class="op" id="2635129">.</span><span class="ident" id="2635130">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635135">}</span>&nbsp;<span class="keyword" id="2635137">else</span>&nbsp;<span class="op" id="2635142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635146">k</span>&nbsp;<span class="op" id="2635148">=</span>&nbsp;<span class="ident" id="2635150">unsafe</span><span class="op" id="2635156">.</span><span class="ident" id="2635157">Pointer</span><span class="op" id="2635164">(</span><span class="op" id="2635165">&amp;</span><span class="ident" id="2635166">key</span><span class="op" id="2635169">.</span><span class="ident" id="2635170">ptr</span><span class="op" id="2635173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635176">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635179">e</span>&nbsp;<span class="op" id="2635181">:=</span>&nbsp;<span class="ident" id="2635184">mapaccess</span><span class="op" id="2635193">(</span><span class="ident" id="2635194">v</span><span class="op" id="2635195">.</span><span class="ident" id="2635196">typ</span><span class="op" id="2635199">,</span>&nbsp;<span class="ident" id="2635201">v</span><span class="op" id="2635202">.</span><span class="ident" id="2635203">pointer</span><span class="op" id="2635210">(</span><span class="op" id="2635211">)</span><span class="op" id="2635212">,</span>&nbsp;<span class="ident" id="2635214">k</span><span class="op" id="2635215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635218">if</span>&nbsp;<span class="ident" id="2635221">e</span>&nbsp;<span class="op" id="2635223">==</span>&nbsp;<span class="ident" id="2635226">nil</span>&nbsp;<span class="op" id="2635230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635234">return</span>&nbsp;<span class="ident" id="2635241">Value</span><span class="op" id="2635246">{</span><span class="op" id="2635247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635253">typ</span>&nbsp;<span class="op" id="2635257">:=</span>&nbsp;<span class="ident" id="2635260">tt</span><span class="op" id="2635262">.</span><span class="ident" id="2635263">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635269">fl</span>&nbsp;<span class="op" id="2635272">:=</span>&nbsp;<span class="op" id="2635275">(</span><span class="ident" id="2635276">v</span><span class="op" id="2635277">.</span><span class="ident" id="2635278">flag</span>&nbsp;<span class="op" id="2635283">|</span>&nbsp;<span class="ident" id="2635285">key</span><span class="op" id="2635288">.</span><span class="ident" id="2635289">flag</span><span class="op" id="2635293">)</span>&nbsp;<span class="op" id="2635295">&amp;</span>&nbsp;<span class="ident" id="2635297">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635305">fl</span>&nbsp;<span class="op" id="2635308">|=</span>&nbsp;<span class="ident" id="2635311">flag</span><span class="op" id="2635315">(</span><span class="ident" id="2635316">typ</span><span class="op" id="2635319">.</span><span class="ident" id="2635320">Kind</span><span class="op" id="2635324">(</span><span class="op" id="2635325">)</span><span class="op" id="2635326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635329">if</span>&nbsp;<span class="ident" id="2635332">ifaceIndir</span><span class="op" id="2635342">(</span><span class="ident" id="2635343">typ</span><span class="op" id="2635346">)</span>&nbsp;<span class="op" id="2635348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2635352">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2635398">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635438">c</span>&nbsp;<span class="op" id="2635440">:=</span>&nbsp;<span class="ident" id="2635443">unsafe_New</span><span class="op" id="2635453">(</span><span class="ident" id="2635454">typ</span><span class="op" id="2635457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635461">memmove</span><span class="op" id="2635468">(</span><span class="ident" id="2635469">c</span><span class="op" id="2635470">,</span>&nbsp;<span class="ident" id="2635472">e</span><span class="op" id="2635473">,</span>&nbsp;<span class="ident" id="2635475">typ</span><span class="op" id="2635478">.</span><span class="ident" id="2635479">size</span><span class="op" id="2635483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635487">return</span>&nbsp;<span class="ident" id="2635494">Value</span><span class="op" id="2635499">{</span><span class="ident" id="2635500">typ</span><span class="op" id="2635503">,</span>&nbsp;<span class="ident" id="2635505">c</span><span class="op" id="2635506">,</span>&nbsp;<span class="ident" id="2635508">fl</span>&nbsp;<span class="op" id="2635511">|</span>&nbsp;<span class="ident" id="2635513">flagIndir</span><span class="op" id="2635522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635525">}</span>&nbsp;<span class="keyword" id="2635527">else</span>&nbsp;<span class="op" id="2635532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635536">return</span>&nbsp;<span class="ident" id="2635543">Value</span><span class="op" id="2635548">{</span><span class="ident" id="2635549">typ</span><span class="op" id="2635552">,</span>&nbsp;<span class="op" id="2635554">*</span><span class="op" id="2635555">(</span><span class="op" id="2635556">*</span><span class="ident" id="2635557">unsafe</span><span class="op" id="2635563">.</span><span class="ident" id="2635564">Pointer</span><span class="op" id="2635571">)</span><span class="op" id="2635572">(</span><span class="ident" id="2635573">e</span><span class="op" id="2635574">)</span><span class="op" id="2635575">,</span>&nbsp;<span class="ident" id="2635577">fl</span><span class="op" id="2635579">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2635582">}</span><br>
<span class="lineno"></span><span class="op" id="2635584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2635587">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2635658">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2635683">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2635720">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2635776">func</span>&nbsp;<span class="op" id="2635781">(</span><span class="ident" id="2635782">v</span>&nbsp;<span class="ident" id="2635784">Value</span><span class="op" id="2635789">)</span>&nbsp;<span class="ident" id="2635791">MapKeys</span><span class="op" id="2635798">(</span><span class="op" id="2635799">)</span>&nbsp;<span class="op" id="2635801">[</span><span class="op" id="2635802">]</span><span class="ident" id="2635803">Value</span>&nbsp;<span class="op" id="2635809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635812">v</span><span class="op" id="2635813">.</span><span class="ident" id="2635814">mustBe</span><span class="op" id="2635820">(</span><span class="ident" id="2635821">Map</span><span class="op" id="2635824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635827">tt</span>&nbsp;<span class="op" id="2635830">:=</span>&nbsp;<span class="op" id="2635833">(</span><span class="op" id="2635834">*</span><span class="ident" id="2635835">mapType</span><span class="op" id="2635842">)</span><span class="op" id="2635843">(</span><span class="ident" id="2635844">unsafe</span><span class="op" id="2635850">.</span><span class="ident" id="2635851">Pointer</span><span class="op" id="2635858">(</span><span class="ident" id="2635859">v</span><span class="op" id="2635860">.</span><span class="ident" id="2635861">typ</span><span class="op" id="2635864">)</span><span class="op" id="2635865">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635868">keyType</span>&nbsp;<span class="op" id="2635876">:=</span>&nbsp;<span class="ident" id="2635879">tt</span><span class="op" id="2635881">.</span><span class="ident" id="2635882">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635888">fl</span>&nbsp;<span class="op" id="2635891">:=</span>&nbsp;<span class="ident" id="2635894">v</span><span class="op" id="2635895">.</span><span class="ident" id="2635896">flag</span><span class="op" id="2635900">&amp;</span><span class="ident" id="2635901">flagRO</span>&nbsp;<span class="op" id="2635908">|</span>&nbsp;<span class="ident" id="2635910">flag</span><span class="op" id="2635914">(</span><span class="ident" id="2635915">keyType</span><span class="op" id="2635922">.</span><span class="ident" id="2635923">Kind</span><span class="op" id="2635927">(</span><span class="op" id="2635928">)</span><span class="op" id="2635929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635933">m</span>&nbsp;<span class="op" id="2635935">:=</span>&nbsp;<span class="ident" id="2635938">v</span><span class="op" id="2635939">.</span><span class="ident" id="2635940">pointer</span><span class="op" id="2635947">(</span><span class="op" id="2635948">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635951">mlen</span>&nbsp;<span class="op" id="2635956">:=</span>&nbsp;<span class="builtintype" id="2635959">int</span><span class="op" id="2635962">(</span><span class="num" id="2635963">0</span><span class="op" id="2635964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2635967">if</span>&nbsp;<span class="ident" id="2635970">m</span>&nbsp;<span class="op" id="2635972">!=</span>&nbsp;<span class="ident" id="2635975">nil</span>&nbsp;<span class="op" id="2635979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2635983">mlen</span>&nbsp;<span class="op" id="2635988">=</span>&nbsp;<span class="ident" id="2635990">maplen</span><span class="op" id="2635996">(</span><span class="ident" id="2635997">m</span><span class="op" id="2635998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636004">it</span>&nbsp;<span class="op" id="2636007">:=</span>&nbsp;<span class="ident" id="2636010">mapiterinit</span><span class="op" id="2636021">(</span><span class="ident" id="2636022">v</span><span class="op" id="2636023">.</span><span class="ident" id="2636024">typ</span><span class="op" id="2636027">,</span>&nbsp;<span class="ident" id="2636029">m</span><span class="op" id="2636030">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636033">a</span>&nbsp;<span class="op" id="2636035">:=</span>&nbsp;<span class="builtinfunc" id="2636038">make</span><span class="op" id="2636042">(</span><span class="op" id="2636043">[</span><span class="op" id="2636044">]</span><span class="ident" id="2636045">Value</span><span class="op" id="2636050">,</span>&nbsp;<span class="ident" id="2636052">mlen</span><span class="op" id="2636056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636059">var</span>&nbsp;<span class="ident" id="2636063">i</span>&nbsp;<span class="builtintype" id="2636065">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636070">for</span>&nbsp;<span class="ident" id="2636074">i</span>&nbsp;<span class="op" id="2636076">=</span>&nbsp;<span class="num" id="2636078">0</span><span class="op" id="2636079">;</span>&nbsp;<span class="ident" id="2636081">i</span>&nbsp;<span class="op" id="2636083">&lt;</span>&nbsp;<span class="builtinfunc" id="2636085">len</span><span class="op" id="2636088">(</span><span class="ident" id="2636089">a</span><span class="op" id="2636090">)</span><span class="op" id="2636091">;</span>&nbsp;<span class="ident" id="2636093">i</span><span class="op" id="2636094">++</span>&nbsp;<span class="op" id="2636097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636101">key</span>&nbsp;<span class="op" id="2636105">:=</span>&nbsp;<span class="ident" id="2636108">mapiterkey</span><span class="op" id="2636118">(</span><span class="ident" id="2636119">it</span><span class="op" id="2636121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636125">if</span>&nbsp;<span class="ident" id="2636128">key</span>&nbsp;<span class="op" id="2636132">==</span>&nbsp;<span class="ident" id="2636135">nil</span>&nbsp;<span class="op" id="2636139">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636144">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636197">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636255">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636281">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636289">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636293">if</span>&nbsp;<span class="ident" id="2636296">ifaceIndir</span><span class="op" id="2636306">(</span><span class="ident" id="2636307">keyType</span><span class="op" id="2636314">)</span>&nbsp;<span class="op" id="2636316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636321">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2636368">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636409">c</span>&nbsp;<span class="op" id="2636411">:=</span>&nbsp;<span class="ident" id="2636414">unsafe_New</span><span class="op" id="2636424">(</span><span class="ident" id="2636425">keyType</span><span class="op" id="2636432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636437">memmove</span><span class="op" id="2636444">(</span><span class="ident" id="2636445">c</span><span class="op" id="2636446">,</span>&nbsp;<span class="ident" id="2636448">key</span><span class="op" id="2636451">,</span>&nbsp;<span class="ident" id="2636453">keyType</span><span class="op" id="2636460">.</span><span class="ident" id="2636461">size</span><span class="op" id="2636465">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636470">a</span><span class="op" id="2636471">[</span><span class="ident" id="2636472">i</span><span class="op" id="2636473">]</span>&nbsp;<span class="op" id="2636475">=</span>&nbsp;<span class="ident" id="2636477">Value</span><span class="op" id="2636482">{</span><span class="ident" id="2636483">keyType</span><span class="op" id="2636490">,</span>&nbsp;<span class="ident" id="2636492">c</span><span class="op" id="2636493">,</span>&nbsp;<span class="ident" id="2636495">fl</span>&nbsp;<span class="op" id="2636498">|</span>&nbsp;<span class="ident" id="2636500">flagIndir</span><span class="op" id="2636509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636513">}</span>&nbsp;<span class="keyword" id="2636515">else</span>&nbsp;<span class="op" id="2636520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636525">a</span><span class="op" id="2636526">[</span><span class="ident" id="2636527">i</span><span class="op" id="2636528">]</span>&nbsp;<span class="op" id="2636530">=</span>&nbsp;<span class="ident" id="2636532">Value</span><span class="op" id="2636537">{</span><span class="ident" id="2636538">keyType</span><span class="op" id="2636545">,</span>&nbsp;<span class="op" id="2636547">*</span><span class="op" id="2636548">(</span><span class="op" id="2636549">*</span><span class="ident" id="2636550">unsafe</span><span class="op" id="2636556">.</span><span class="ident" id="2636557">Pointer</span><span class="op" id="2636564">)</span><span class="op" id="2636565">(</span><span class="ident" id="2636566">key</span><span class="op" id="2636569">)</span><span class="op" id="2636570">,</span>&nbsp;<span class="ident" id="2636572">fl</span><span class="op" id="2636574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2636582">mapiternext</span><span class="op" id="2636593">(</span><span class="ident" id="2636594">it</span><span class="op" id="2636596">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2636599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636602">return</span>&nbsp;<span class="ident" id="2636609">a</span><span class="op" id="2636610">[</span><span class="op" id="2636611">:</span><span class="ident" id="2636612">i</span><span class="op" id="2636613">]</span><br>
<span class="lineno"></span><span class="op" id="2636615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2636618">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2636687">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2636758">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2636830">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2636902">func</span>&nbsp;<span class="op" id="2636907">(</span><span class="ident" id="2636908">v</span>&nbsp;<span class="ident" id="2636910">Value</span><span class="op" id="2636915">)</span>&nbsp;<span class="ident" id="2636917">Method</span><span class="op" id="2636923">(</span><span class="ident" id="2636924">i</span>&nbsp;<span class="builtintype" id="2636926">int</span><span class="op" id="2636929">)</span>&nbsp;<span class="ident" id="2636931">Value</span>&nbsp;<span class="op" id="2636937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2636940">if</span>&nbsp;<span class="ident" id="2636943">v</span><span class="op" id="2636944">.</span><span class="ident" id="2636945">typ</span>&nbsp;<span class="op" id="2636949">==</span>&nbsp;<span class="ident" id="2636952">nil</span>&nbsp;<span class="op" id="2636956">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2636960">panic</span><span class="op" id="2636965">(</span><span class="op" id="2636966">&amp;</span><span class="ident" id="2636967">ValueError</span><span class="op" id="2636977">{</span><span class="string" id="2636978">&#34;reflect.Value.Method&#34;</span><span class="op" id="2637000">,</span>&nbsp;<span class="ident" id="2637002">Invalid</span><span class="op" id="2637009">}</span><span class="op" id="2637010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637016">if</span>&nbsp;<span class="ident" id="2637019">v</span><span class="op" id="2637020">.</span><span class="ident" id="2637021">flag</span><span class="op" id="2637025">&amp;</span><span class="ident" id="2637026">flagMethod</span>&nbsp;<span class="op" id="2637037">!=</span>&nbsp;<span class="num" id="2637040">0</span>&nbsp;<span class="op" id="2637042">||</span>&nbsp;<span class="builtintype" id="2637045">uint</span><span class="op" id="2637049">(</span><span class="ident" id="2637050">i</span><span class="op" id="2637051">)</span>&nbsp;<span class="op" id="2637053">&gt;=</span>&nbsp;<span class="builtintype" id="2637056">uint</span><span class="op" id="2637060">(</span><span class="ident" id="2637061">v</span><span class="op" id="2637062">.</span><span class="ident" id="2637063">typ</span><span class="op" id="2637066">.</span><span class="ident" id="2637067">NumMethod</span><span class="op" id="2637076">(</span><span class="op" id="2637077">)</span><span class="op" id="2637078">)</span>&nbsp;<span class="op" id="2637080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2637084">panic</span><span class="op" id="2637089">(</span><span class="string" id="2637090">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2637126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637129">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637132">if</span>&nbsp;<span class="ident" id="2637135">v</span><span class="op" id="2637136">.</span><span class="ident" id="2637137">typ</span><span class="op" id="2637140">.</span><span class="ident" id="2637141">Kind</span><span class="op" id="2637145">(</span><span class="op" id="2637146">)</span>&nbsp;<span class="op" id="2637148">==</span>&nbsp;<span class="ident" id="2637151">Interface</span>&nbsp;<span class="op" id="2637161">&amp;&amp;</span>&nbsp;<span class="ident" id="2637164">v</span><span class="op" id="2637165">.</span><span class="ident" id="2637166">IsNil</span><span class="op" id="2637171">(</span><span class="op" id="2637172">)</span>&nbsp;<span class="op" id="2637174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2637178">panic</span><span class="op" id="2637183">(</span><span class="string" id="2637184">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2637224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637230">fl</span>&nbsp;<span class="op" id="2637233">:=</span>&nbsp;<span class="ident" id="2637236">v</span><span class="op" id="2637237">.</span><span class="ident" id="2637238">flag</span>&nbsp;<span class="op" id="2637243">&amp;</span>&nbsp;<span class="op" id="2637245">(</span><span class="ident" id="2637246">flagRO</span>&nbsp;<span class="op" id="2637253">|</span>&nbsp;<span class="ident" id="2637255">flagIndir</span><span class="op" id="2637264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637267">fl</span>&nbsp;<span class="op" id="2637270">|=</span>&nbsp;<span class="ident" id="2637273">flag</span><span class="op" id="2637277">(</span><span class="ident" id="2637278">Func</span><span class="op" id="2637282">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2637285">fl</span>&nbsp;<span class="op" id="2637288">|=</span>&nbsp;<span class="ident" id="2637291">flag</span><span class="op" id="2637295">(</span><span class="ident" id="2637296">i</span><span class="op" id="2637297">)</span><span class="op" id="2637298">&lt;&lt;</span><span class="ident" id="2637300">flagMethodShift</span>&nbsp;<span class="op" id="2637316">|</span>&nbsp;<span class="ident" id="2637318">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637330">return</span>&nbsp;<span class="ident" id="2637337">Value</span><span class="op" id="2637342">{</span><span class="ident" id="2637343">v</span><span class="op" id="2637344">.</span><span class="ident" id="2637345">typ</span><span class="op" id="2637348">,</span>&nbsp;<span class="ident" id="2637350">v</span><span class="op" id="2637351">.</span><span class="ident" id="2637352">ptr</span><span class="op" id="2637355">,</span>&nbsp;<span class="ident" id="2637357">fl</span><span class="op" id="2637359">}</span><br>
<span class="lineno"></span><span class="op" id="2637361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2637364">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2637434">func</span>&nbsp;<span class="op" id="2637439">(</span><span class="ident" id="2637440">v</span>&nbsp;<span class="ident" id="2637442">Value</span><span class="op" id="2637447">)</span>&nbsp;<span class="ident" id="2637449">NumMethod</span><span class="op" id="2637458">(</span><span class="op" id="2637459">)</span>&nbsp;<span class="builtintype" id="2637461">int</span>&nbsp;<span class="op" id="2637465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637468">if</span>&nbsp;<span class="ident" id="2637471">v</span><span class="op" id="2637472">.</span><span class="ident" id="2637473">typ</span>&nbsp;<span class="op" id="2637477">==</span>&nbsp;<span class="ident" id="2637480">nil</span>&nbsp;<span class="op" id="2637484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2637488">panic</span><span class="op" id="2637493">(</span><span class="op" id="2637494">&amp;</span><span class="ident" id="2637495">ValueError</span><span class="op" id="2637505">{</span><span class="string" id="2637506">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2637531">,</span>&nbsp;<span class="ident" id="2637533">Invalid</span><span class="op" id="2637540">}</span><span class="op" id="2637541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637547">if</span>&nbsp;<span class="ident" id="2637550">v</span><span class="op" id="2637551">.</span><span class="ident" id="2637552">flag</span><span class="op" id="2637556">&amp;</span><span class="ident" id="2637557">flagMethod</span>&nbsp;<span class="op" id="2637568">!=</span>&nbsp;<span class="num" id="2637571">0</span>&nbsp;<span class="op" id="2637573">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637577">return</span>&nbsp;<span class="num" id="2637584">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2637587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637590">return</span>&nbsp;<span class="ident" id="2637597">v</span><span class="op" id="2637598">.</span><span class="ident" id="2637599">typ</span><span class="op" id="2637602">.</span><span class="ident" id="2637603">NumMethod</span><span class="op" id="2637612">(</span><span class="op" id="2637613">)</span><br>
<span class="lineno"></span><span class="op" id="2637615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2637618">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2637687">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2637716">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2637787">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2637859">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2637912">func</span>&nbsp;<span class="op" id="2637917">(</span><span class="ident" id="2637918">v</span>&nbsp;<span class="ident" id="2637920">Value</span><span class="op" id="2637925">)</span>&nbsp;<span class="ident" id="2637927">MethodByName</span><span class="op" id="2637939">(</span><span class="ident" id="2637940">name</span>&nbsp;<span class="builtintype" id="2637945">string</span><span class="op" id="2637951">)</span>&nbsp;<span class="ident" id="2637953">Value</span>&nbsp;<span class="op" id="2637959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2637962">if</span>&nbsp;<span class="ident" id="2637965">v</span><span class="op" id="2637966">.</span><span class="ident" id="2637967">typ</span>&nbsp;<span class="op" id="2637971">==</span>&nbsp;<span class="ident" id="2637974">nil</span>&nbsp;<span class="op" id="2637978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2637982">panic</span><span class="op" id="2637987">(</span><span class="op" id="2637988">&amp;</span><span class="ident" id="2637989">ValueError</span><span class="op" id="2637999">{</span><span class="string" id="2638000">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2638028">,</span>&nbsp;<span class="ident" id="2638030">Invalid</span><span class="op" id="2638037">}</span><span class="op" id="2638038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638044">if</span>&nbsp;<span class="ident" id="2638047">v</span><span class="op" id="2638048">.</span><span class="ident" id="2638049">flag</span><span class="op" id="2638053">&amp;</span><span class="ident" id="2638054">flagMethod</span>&nbsp;<span class="op" id="2638065">!=</span>&nbsp;<span class="num" id="2638068">0</span>&nbsp;<span class="op" id="2638070">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638074">return</span>&nbsp;<span class="ident" id="2638081">Value</span><span class="op" id="2638086">{</span><span class="op" id="2638087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638093">m</span><span class="op" id="2638094">,</span>&nbsp;<span class="ident" id="2638096">ok</span>&nbsp;<span class="op" id="2638099">:=</span>&nbsp;<span class="ident" id="2638102">v</span><span class="op" id="2638103">.</span><span class="ident" id="2638104">typ</span><span class="op" id="2638107">.</span><span class="ident" id="2638108">MethodByName</span><span class="op" id="2638120">(</span><span class="ident" id="2638121">name</span><span class="op" id="2638125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638128">if</span>&nbsp;<span class="op" id="2638131">!</span><span class="ident" id="2638132">ok</span>&nbsp;<span class="op" id="2638135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638139">return</span>&nbsp;<span class="ident" id="2638146">Value</span><span class="op" id="2638151">{</span><span class="op" id="2638152">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638158">return</span>&nbsp;<span class="ident" id="2638165">v</span><span class="op" id="2638166">.</span><span class="ident" id="2638167">Method</span><span class="op" id="2638173">(</span><span class="ident" id="2638174">m</span><span class="op" id="2638175">.</span><span class="ident" id="2638176">Index</span><span class="op" id="2638181">)</span><br>
<span class="lineno"></span><span class="op" id="2638183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2638186">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2638244">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2638284">func</span>&nbsp;<span class="op" id="2638289">(</span><span class="ident" id="2638290">v</span>&nbsp;<span class="ident" id="2638292">Value</span><span class="op" id="2638297">)</span>&nbsp;<span class="ident" id="2638299">NumField</span><span class="op" id="2638307">(</span><span class="op" id="2638308">)</span>&nbsp;<span class="builtintype" id="2638310">int</span>&nbsp;<span class="op" id="2638314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638317">v</span><span class="op" id="2638318">.</span><span class="ident" id="2638319">mustBe</span><span class="op" id="2638325">(</span><span class="ident" id="2638326">Struct</span><span class="op" id="2638332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638335">tt</span>&nbsp;<span class="op" id="2638338">:=</span>&nbsp;<span class="op" id="2638341">(</span><span class="op" id="2638342">*</span><span class="ident" id="2638343">structType</span><span class="op" id="2638353">)</span><span class="op" id="2638354">(</span><span class="ident" id="2638355">unsafe</span><span class="op" id="2638361">.</span><span class="ident" id="2638362">Pointer</span><span class="op" id="2638369">(</span><span class="ident" id="2638370">v</span><span class="op" id="2638371">.</span><span class="ident" id="2638372">typ</span><span class="op" id="2638375">)</span><span class="op" id="2638376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638379">return</span>&nbsp;<span class="builtinfunc" id="2638386">len</span><span class="op" id="2638389">(</span><span class="ident" id="2638390">tt</span><span class="op" id="2638392">.</span><span class="ident" id="2638393">fields</span><span class="op" id="2638399">)</span><br>
<span class="lineno">1120</span><span class="op" id="2638401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2638404">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2638491">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2638548">func</span>&nbsp;<span class="op" id="2638553">(</span><span class="ident" id="2638554">v</span>&nbsp;<span class="ident" id="2638556">Value</span><span class="op" id="2638561">)</span>&nbsp;<span class="ident" id="2638563">OverflowComplex</span><span class="op" id="2638578">(</span><span class="ident" id="2638579">x</span>&nbsp;<span class="builtintype" id="2638581">complex128</span><span class="op" id="2638591">)</span>&nbsp;<span class="builtintype" id="2638593">bool</span>&nbsp;<span class="op" id="2638598">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638601">k</span>&nbsp;<span class="op" id="2638603">:=</span>&nbsp;<span class="ident" id="2638606">v</span><span class="op" id="2638607">.</span><span class="ident" id="2638608">kind</span><span class="op" id="2638612">(</span><span class="op" id="2638613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638616">switch</span>&nbsp;<span class="ident" id="2638623">k</span>&nbsp;<span class="op" id="2638625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638628">case</span>&nbsp;<span class="ident" id="2638633">Complex64</span><span class="op" id="2638642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638646">return</span>&nbsp;<span class="ident" id="2638653">overflowFloat32</span><span class="op" id="2638668">(</span><span class="builtinfunc" id="2638669">real</span><span class="op" id="2638673">(</span><span class="ident" id="2638674">x</span><span class="op" id="2638675">)</span><span class="op" id="2638676">)</span>&nbsp;<span class="op" id="2638678">||</span>&nbsp;<span class="ident" id="2638681">overflowFloat32</span><span class="op" id="2638696">(</span><span class="builtinfunc" id="2638697">imag</span><span class="op" id="2638701">(</span><span class="ident" id="2638702">x</span><span class="op" id="2638703">)</span><span class="op" id="2638704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638707">case</span>&nbsp;<span class="ident" id="2638712">Complex128</span><span class="op" id="2638722">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2638726">return</span>&nbsp;<span class="ident" id="2638733">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2638740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2638743">panic</span><span class="op" id="2638748">(</span><span class="op" id="2638749">&amp;</span><span class="ident" id="2638750">ValueError</span><span class="op" id="2638760">{</span><span class="string" id="2638761">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2638792">,</span>&nbsp;<span class="ident" id="2638794">v</span><span class="op" id="2638795">.</span><span class="ident" id="2638796">kind</span><span class="op" id="2638800">(</span><span class="op" id="2638801">)</span><span class="op" id="2638802">}</span><span class="op" id="2638803">)</span><br>
<span class="lineno"></span><span class="op" id="2638805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2638808">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2638890">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2638942">func</span>&nbsp;<span class="op" id="2638947">(</span><span class="ident" id="2638948">v</span>&nbsp;<span class="ident" id="2638950">Value</span><span class="op" id="2638955">)</span>&nbsp;<span class="ident" id="2638957">OverflowFloat</span><span class="op" id="2638970">(</span><span class="ident" id="2638971">x</span>&nbsp;<span class="builtintype" id="2638973">float64</span><span class="op" id="2638980">)</span>&nbsp;<span class="builtintype" id="2638982">bool</span>&nbsp;<span class="op" id="2638987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2638990">k</span>&nbsp;<span class="op" id="2638992">:=</span>&nbsp;<span class="ident" id="2638995">v</span><span class="op" id="2638996">.</span><span class="ident" id="2638997">kind</span><span class="op" id="2639001">(</span><span class="op" id="2639002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639005">switch</span>&nbsp;<span class="ident" id="2639012">k</span>&nbsp;<span class="op" id="2639014">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639017">case</span>&nbsp;<span class="ident" id="2639022">Float32</span><span class="op" id="2639029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639033">return</span>&nbsp;<span class="ident" id="2639040">overflowFloat32</span><span class="op" id="2639055">(</span><span class="ident" id="2639056">x</span><span class="op" id="2639057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639060">case</span>&nbsp;<span class="ident" id="2639065">Float64</span><span class="op" id="2639072">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639076">return</span>&nbsp;<span class="ident" id="2639083">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2639090">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2639093">panic</span><span class="op" id="2639098">(</span><span class="op" id="2639099">&amp;</span><span class="ident" id="2639100">ValueError</span><span class="op" id="2639110">{</span><span class="string" id="2639111">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2639140">,</span>&nbsp;<span class="ident" id="2639142">v</span><span class="op" id="2639143">.</span><span class="ident" id="2639144">kind</span><span class="op" id="2639148">(</span><span class="op" id="2639149">)</span><span class="op" id="2639150">}</span><span class="op" id="2639151">)</span><br>
<span class="lineno"></span><span class="op" id="2639153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2639156">func</span>&nbsp;<span class="ident" id="2639161">overflowFloat32</span><span class="op" id="2639176">(</span><span class="ident" id="2639177">x</span>&nbsp;<span class="builtintype" id="2639179">float64</span><span class="op" id="2639186">)</span>&nbsp;<span class="builtintype" id="2639188">bool</span>&nbsp;<span class="op" id="2639193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639196">if</span>&nbsp;<span class="ident" id="2639199">x</span>&nbsp;<span class="op" id="2639201">&lt;</span>&nbsp;<span class="num" id="2639203">0</span>&nbsp;<span class="op" id="2639205">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639209">x</span>&nbsp;<span class="op" id="2639211">=</span>&nbsp;<span class="op" id="2639213">-</span><span class="ident" id="2639214">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2639217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639220">return</span>&nbsp;<span class="ident" id="2639227">math</span><span class="op" id="2639231">.</span><span class="ident" id="2639232">MaxFloat32</span>&nbsp;<span class="op" id="2639243">&lt;</span>&nbsp;<span class="ident" id="2639245">x</span>&nbsp;<span class="op" id="2639247">&amp;&amp;</span>&nbsp;<span class="ident" id="2639250">x</span>&nbsp;<span class="op" id="2639252">&lt;=</span>&nbsp;<span class="ident" id="2639255">math</span><span class="op" id="2639259">.</span><span class="ident" id="2639260">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2639271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2639274">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2639352">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2639419">func</span>&nbsp;<span class="op" id="2639424">(</span><span class="ident" id="2639425">v</span>&nbsp;<span class="ident" id="2639427">Value</span><span class="op" id="2639432">)</span>&nbsp;<span class="ident" id="2639434">OverflowInt</span><span class="op" id="2639445">(</span><span class="ident" id="2639446">x</span>&nbsp;<span class="ident" id="2639448">int64</span><span class="op" id="2639453">)</span>&nbsp;<span class="builtintype" id="2639455">bool</span>&nbsp;<span class="op" id="2639460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639463">k</span>&nbsp;<span class="op" id="2639465">:=</span>&nbsp;<span class="ident" id="2639468">v</span><span class="op" id="2639469">.</span><span class="ident" id="2639470">kind</span><span class="op" id="2639474">(</span><span class="op" id="2639475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639478">switch</span>&nbsp;<span class="ident" id="2639485">k</span>&nbsp;<span class="op" id="2639487">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639490">case</span>&nbsp;<span class="ident" id="2639495">Int</span><span class="op" id="2639498">,</span>&nbsp;<span class="ident" id="2639500">Int8</span><span class="op" id="2639504">,</span>&nbsp;<span class="ident" id="2639506">Int16</span><span class="op" id="2639511">,</span>&nbsp;<span class="ident" id="2639513">Int32</span><span class="op" id="2639518">,</span>&nbsp;<span class="ident" id="2639520">Int64</span><span class="op" id="2639525">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639529">bitSize</span>&nbsp;<span class="op" id="2639537">:=</span>&nbsp;<span class="ident" id="2639540">v</span><span class="op" id="2639541">.</span><span class="ident" id="2639542">typ</span><span class="op" id="2639545">.</span><span class="ident" id="2639546">size</span>&nbsp;<span class="op" id="2639551">*</span>&nbsp;<span class="num" id="2639553">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639557">trunc</span>&nbsp;<span class="op" id="2639563">:=</span>&nbsp;<span class="op" id="2639566">(</span><span class="ident" id="2639567">x</span>&nbsp;<span class="op" id="2639569">&lt;&lt;</span>&nbsp;<span class="op" id="2639572">(</span><span class="num" id="2639573">64</span>&nbsp;<span class="op" id="2639576">-</span>&nbsp;<span class="ident" id="2639578">bitSize</span><span class="op" id="2639585">)</span><span class="op" id="2639586">)</span>&nbsp;<span class="op" id="2639588">&gt;&gt;</span>&nbsp;<span class="op" id="2639591">(</span><span class="num" id="2639592">64</span>&nbsp;<span class="op" id="2639595">-</span>&nbsp;<span class="ident" id="2639597">bitSize</span><span class="op" id="2639604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639608">return</span>&nbsp;<span class="ident" id="2639615">x</span>&nbsp;<span class="op" id="2639617">!=</span>&nbsp;<span class="ident" id="2639620">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2639627">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2639630">panic</span><span class="op" id="2639635">(</span><span class="op" id="2639636">&amp;</span><span class="ident" id="2639637">ValueError</span><span class="op" id="2639647">{</span><span class="string" id="2639648">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2639675">,</span>&nbsp;<span class="ident" id="2639677">v</span><span class="op" id="2639678">.</span><span class="ident" id="2639679">kind</span><span class="op" id="2639683">(</span><span class="op" id="2639684">)</span><span class="op" id="2639685">}</span><span class="op" id="2639686">)</span><br>
<span class="lineno"></span><span class="op" id="2639688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2639691">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2639771">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2639852">func</span>&nbsp;<span class="op" id="2639857">(</span><span class="ident" id="2639858">v</span>&nbsp;<span class="ident" id="2639860">Value</span><span class="op" id="2639865">)</span>&nbsp;<span class="ident" id="2639867">OverflowUint</span><span class="op" id="2639879">(</span><span class="ident" id="2639880">x</span>&nbsp;<span class="ident" id="2639882">uint64</span><span class="op" id="2639888">)</span>&nbsp;<span class="builtintype" id="2639890">bool</span>&nbsp;<span class="op" id="2639895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639898">k</span>&nbsp;<span class="op" id="2639900">:=</span>&nbsp;<span class="ident" id="2639903">v</span><span class="op" id="2639904">.</span><span class="ident" id="2639905">kind</span><span class="op" id="2639909">(</span><span class="op" id="2639910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639913">switch</span>&nbsp;<span class="ident" id="2639920">k</span>&nbsp;<span class="op" id="2639922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2639925">case</span>&nbsp;<span class="ident" id="2639930">Uint</span><span class="op" id="2639934">,</span>&nbsp;<span class="ident" id="2639936">Uintptr</span><span class="op" id="2639943">,</span>&nbsp;<span class="ident" id="2639945">Uint8</span><span class="op" id="2639950">,</span>&nbsp;<span class="ident" id="2639952">Uint16</span><span class="op" id="2639958">,</span>&nbsp;<span class="ident" id="2639960">Uint32</span><span class="op" id="2639966">,</span>&nbsp;<span class="ident" id="2639968">Uint64</span><span class="op" id="2639974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2639978">bitSize</span>&nbsp;<span class="op" id="2639986">:=</span>&nbsp;<span class="ident" id="2639989">v</span><span class="op" id="2639990">.</span><span class="ident" id="2639991">typ</span><span class="op" id="2639994">.</span><span class="ident" id="2639995">size</span>&nbsp;<span class="op" id="2640000">*</span>&nbsp;<span class="num" id="2640002">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640006">trunc</span>&nbsp;<span class="op" id="2640012">:=</span>&nbsp;<span class="op" id="2640015">(</span><span class="ident" id="2640016">x</span>&nbsp;<span class="op" id="2640018">&lt;&lt;</span>&nbsp;<span class="op" id="2640021">(</span><span class="num" id="2640022">64</span>&nbsp;<span class="op" id="2640025">-</span>&nbsp;<span class="ident" id="2640027">bitSize</span><span class="op" id="2640034">)</span><span class="op" id="2640035">)</span>&nbsp;<span class="op" id="2640037">&gt;&gt;</span>&nbsp;<span class="op" id="2640040">(</span><span class="num" id="2640041">64</span>&nbsp;<span class="op" id="2640044">-</span>&nbsp;<span class="ident" id="2640046">bitSize</span><span class="op" id="2640053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640057">return</span>&nbsp;<span class="ident" id="2640064">x</span>&nbsp;<span class="op" id="2640066">!=</span>&nbsp;<span class="ident" id="2640069">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2640076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2640079">panic</span><span class="op" id="2640084">(</span><span class="op" id="2640085">&amp;</span><span class="ident" id="2640086">ValueError</span><span class="op" id="2640096">{</span><span class="string" id="2640097">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2640125">,</span>&nbsp;<span class="ident" id="2640127">v</span><span class="op" id="2640128">.</span><span class="ident" id="2640129">kind</span><span class="op" id="2640133">(</span><span class="op" id="2640134">)</span><span class="op" id="2640135">}</span><span class="op" id="2640136">)</span><br>
<span class="lineno"></span><span class="op" id="2640138">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2640141">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2640184">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2640240">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2640292">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2640344">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2640423">//</span><br>
<span class="lineno"></span><span class="comment" id="2640426">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2640488">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2640546">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2640606">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2640662">//</span><br>
<span class="lineno"></span><span class="comment" id="2640665">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2640727">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2640792">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2640866">func</span>&nbsp;<span class="op" id="2640871">(</span><span class="ident" id="2640872">v</span>&nbsp;<span class="ident" id="2640874">Value</span><span class="op" id="2640879">)</span>&nbsp;<span class="ident" id="2640881">Pointer</span><span class="op" id="2640888">(</span><span class="op" id="2640889">)</span>&nbsp;<span class="builtintype" id="2640891">uintptr</span>&nbsp;<span class="op" id="2640899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2640902">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2640922">k</span>&nbsp;<span class="op" id="2640924">:=</span>&nbsp;<span class="ident" id="2640927">v</span><span class="op" id="2640928">.</span><span class="ident" id="2640929">kind</span><span class="op" id="2640933">(</span><span class="op" id="2640934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640937">switch</span>&nbsp;<span class="ident" id="2640944">k</span>&nbsp;<span class="op" id="2640946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640949">case</span>&nbsp;<span class="ident" id="2640954">Chan</span><span class="op" id="2640958">,</span>&nbsp;<span class="ident" id="2640960">Map</span><span class="op" id="2640963">,</span>&nbsp;<span class="ident" id="2640965">Ptr</span><span class="op" id="2640968">,</span>&nbsp;<span class="ident" id="2640970">UnsafePointer</span><span class="op" id="2640983">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2640987">return</span>&nbsp;<span class="builtintype" id="2640994">uintptr</span><span class="op" id="2641001">(</span><span class="ident" id="2641002">v</span><span class="op" id="2641003">.</span><span class="ident" id="2641004">pointer</span><span class="op" id="2641011">(</span><span class="op" id="2641012">)</span><span class="op" id="2641013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641016">case</span>&nbsp;<span class="ident" id="2641021">Func</span><span class="op" id="2641025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641029">if</span>&nbsp;<span class="ident" id="2641032">v</span><span class="op" id="2641033">.</span><span class="ident" id="2641034">flag</span><span class="op" id="2641038">&amp;</span><span class="ident" id="2641039">flagMethod</span>&nbsp;<span class="op" id="2641050">!=</span>&nbsp;<span class="num" id="2641053">0</span>&nbsp;<span class="op" id="2641055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641060">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641118">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641178">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641244">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641309">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641372">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641417">f</span>&nbsp;<span class="op" id="2641419">:=</span>&nbsp;<span class="ident" id="2641422">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641441">return</span>&nbsp;<span class="op" id="2641448">*</span><span class="op" id="2641449">*</span><span class="op" id="2641450">(</span><span class="op" id="2641451">*</span><span class="op" id="2641452">*</span><span class="builtintype" id="2641453">uintptr</span><span class="op" id="2641460">)</span><span class="op" id="2641461">(</span><span class="ident" id="2641462">unsafe</span><span class="op" id="2641468">.</span><span class="ident" id="2641469">Pointer</span><span class="op" id="2641476">(</span><span class="op" id="2641477">&amp;</span><span class="ident" id="2641478">f</span><span class="op" id="2641479">)</span><span class="op" id="2641480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641488">p</span>&nbsp;<span class="op" id="2641490">:=</span>&nbsp;<span class="ident" id="2641493">v</span><span class="op" id="2641494">.</span><span class="ident" id="2641495">pointer</span><span class="op" id="2641502">(</span><span class="op" id="2641503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641507">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2641553">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641599">if</span>&nbsp;<span class="ident" id="2641602">p</span>&nbsp;<span class="op" id="2641604">!=</span>&nbsp;<span class="ident" id="2641607">nil</span>&nbsp;<span class="op" id="2641611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2641616">p</span>&nbsp;<span class="op" id="2641618">=</span>&nbsp;<span class="op" id="2641620">*</span><span class="op" id="2641621">(</span><span class="op" id="2641622">*</span><span class="ident" id="2641623">unsafe</span><span class="op" id="2641629">.</span><span class="ident" id="2641630">Pointer</span><span class="op" id="2641637">)</span><span class="op" id="2641638">(</span><span class="ident" id="2641639">p</span><span class="op" id="2641640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641648">return</span>&nbsp;<span class="builtintype" id="2641655">uintptr</span><span class="op" id="2641662">(</span><span class="ident" id="2641663">p</span><span class="op" id="2641664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641668">case</span>&nbsp;<span class="ident" id="2641673">Slice</span><span class="op" id="2641678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2641682">return</span>&nbsp;<span class="op" id="2641689">(</span><span class="op" id="2641690">*</span><span class="ident" id="2641691">SliceHeader</span><span class="op" id="2641702">)</span><span class="op" id="2641703">(</span><span class="ident" id="2641704">v</span><span class="op" id="2641705">.</span><span class="ident" id="2641706">ptr</span><span class="op" id="2641709">)</span><span class="op" id="2641710">.</span><span class="ident" id="2641711">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2641717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2641720">panic</span><span class="op" id="2641725">(</span><span class="op" id="2641726">&amp;</span><span class="ident" id="2641727">ValueError</span><span class="op" id="2641737">{</span><span class="string" id="2641738">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2641761">,</span>&nbsp;<span class="ident" id="2641763">v</span><span class="op" id="2641764">.</span><span class="ident" id="2641765">kind</span><span class="op" id="2641769">(</span><span class="op" id="2641770">)</span><span class="op" id="2641771">}</span><span class="op" id="2641772">)</span><br>
<span class="lineno"></span><span class="op" id="2641774">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2641777">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2641834">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2641872">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2641918">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2641987">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2642074">func</span>&nbsp;<span class="op" id="2642079">(</span><span class="ident" id="2642080">v</span>&nbsp;<span class="ident" id="2642082">Value</span><span class="op" id="2642087">)</span>&nbsp;<span class="ident" id="2642089">Recv</span><span class="op" id="2642093">(</span><span class="op" id="2642094">)</span>&nbsp;<span class="op" id="2642096">(</span><span class="ident" id="2642097">x</span>&nbsp;<span class="ident" id="2642099">Value</span><span class="op" id="2642104">,</span>&nbsp;<span class="ident" id="2642106">ok</span>&nbsp;<span class="builtintype" id="2642109">bool</span><span class="op" id="2642113">)</span>&nbsp;<span class="op" id="2642115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642118">v</span><span class="op" id="2642119">.</span><span class="ident" id="2642120">mustBe</span><span class="op" id="2642126">(</span><span class="ident" id="2642127">Chan</span><span class="op" id="2642131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642134">v</span><span class="op" id="2642135">.</span><span class="ident" id="2642136">mustBeExported</span><span class="op" id="2642150">(</span><span class="op" id="2642151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642154">return</span>&nbsp;<span class="ident" id="2642161">v</span><span class="op" id="2642162">.</span><span class="ident" id="2642163">recv</span><span class="op" id="2642167">(</span><span class="ident" id="2642168">false</span><span class="op" id="2642173">)</span><br>
<span class="lineno">1235</span><span class="op" id="2642175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2642178">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2642224">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2642255">func</span>&nbsp;<span class="op" id="2642260">(</span><span class="ident" id="2642261">v</span>&nbsp;<span class="ident" id="2642263">Value</span><span class="op" id="2642268">)</span>&nbsp;<span class="ident" id="2642270">recv</span><span class="op" id="2642274">(</span><span class="ident" id="2642275">nb</span>&nbsp;<span class="builtintype" id="2642278">bool</span><span class="op" id="2642282">)</span>&nbsp;<span class="op" id="2642284">(</span><span class="ident" id="2642285">val</span>&nbsp;<span class="ident" id="2642289">Value</span><span class="op" id="2642294">,</span>&nbsp;<span class="ident" id="2642296">ok</span>&nbsp;<span class="builtintype" id="2642299">bool</span><span class="op" id="2642303">)</span>&nbsp;<span class="op" id="2642305">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642308">tt</span>&nbsp;<span class="op" id="2642311">:=</span>&nbsp;<span class="op" id="2642314">(</span><span class="op" id="2642315">*</span><span class="ident" id="2642316">chanType</span><span class="op" id="2642324">)</span><span class="op" id="2642325">(</span><span class="ident" id="2642326">unsafe</span><span class="op" id="2642332">.</span><span class="ident" id="2642333">Pointer</span><span class="op" id="2642340">(</span><span class="ident" id="2642341">v</span><span class="op" id="2642342">.</span><span class="ident" id="2642343">typ</span><span class="op" id="2642346">)</span><span class="op" id="2642347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642350">if</span>&nbsp;<span class="ident" id="2642353">ChanDir</span><span class="op" id="2642360">(</span><span class="ident" id="2642361">tt</span><span class="op" id="2642363">.</span><span class="ident" id="2642364">dir</span><span class="op" id="2642367">)</span><span class="op" id="2642368">&amp;</span><span class="ident" id="2642369">RecvDir</span>&nbsp;<span class="op" id="2642377">==</span>&nbsp;<span class="num" id="2642380">0</span>&nbsp;<span class="op" id="2642382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2642386">panic</span><span class="op" id="2642391">(</span><span class="string" id="2642392">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2642428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642434">t</span>&nbsp;<span class="op" id="2642436">:=</span>&nbsp;<span class="ident" id="2642439">tt</span><span class="op" id="2642441">.</span><span class="ident" id="2642442">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642448">val</span>&nbsp;<span class="op" id="2642452">=</span>&nbsp;<span class="ident" id="2642454">Value</span><span class="op" id="2642459">{</span><span class="ident" id="2642460">t</span><span class="op" id="2642461">,</span>&nbsp;<span class="ident" id="2642463">nil</span><span class="op" id="2642466">,</span>&nbsp;<span class="ident" id="2642468">flag</span><span class="op" id="2642472">(</span><span class="ident" id="2642473">t</span><span class="op" id="2642474">.</span><span class="ident" id="2642475">Kind</span><span class="op" id="2642479">(</span><span class="op" id="2642480">)</span><span class="op" id="2642481">)</span><span class="op" id="2642482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642485">var</span>&nbsp;<span class="ident" id="2642489">p</span>&nbsp;<span class="ident" id="2642491">unsafe</span><span class="op" id="2642497">.</span><span class="ident" id="2642498">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642507">if</span>&nbsp;<span class="ident" id="2642510">ifaceIndir</span><span class="op" id="2642520">(</span><span class="ident" id="2642521">t</span><span class="op" id="2642522">)</span>&nbsp;<span class="op" id="2642524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642528">p</span>&nbsp;<span class="op" id="2642530">=</span>&nbsp;<span class="ident" id="2642532">unsafe_New</span><span class="op" id="2642542">(</span><span class="ident" id="2642543">t</span><span class="op" id="2642544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642548">val</span><span class="op" id="2642551">.</span><span class="ident" id="2642552">ptr</span>&nbsp;<span class="op" id="2642556">=</span>&nbsp;<span class="ident" id="2642558">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642562">val</span><span class="op" id="2642565">.</span><span class="ident" id="2642566">flag</span>&nbsp;<span class="op" id="2642571">|=</span>&nbsp;<span class="ident" id="2642574">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642585">}</span>&nbsp;<span class="keyword" id="2642587">else</span>&nbsp;<span class="op" id="2642592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642596">p</span>&nbsp;<span class="op" id="2642598">=</span>&nbsp;<span class="ident" id="2642600">unsafe</span><span class="op" id="2642606">.</span><span class="ident" id="2642607">Pointer</span><span class="op" id="2642614">(</span><span class="op" id="2642615">&amp;</span><span class="ident" id="2642616">val</span><span class="op" id="2642619">.</span><span class="ident" id="2642620">ptr</span><span class="op" id="2642623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642629">selected</span><span class="op" id="2642637">,</span>&nbsp;<span class="ident" id="2642639">ok</span>&nbsp;<span class="op" id="2642642">:=</span>&nbsp;<span class="ident" id="2642645">chanrecv</span><span class="op" id="2642653">(</span><span class="ident" id="2642654">v</span><span class="op" id="2642655">.</span><span class="ident" id="2642656">typ</span><span class="op" id="2642659">,</span>&nbsp;<span class="ident" id="2642661">v</span><span class="op" id="2642662">.</span><span class="ident" id="2642663">pointer</span><span class="op" id="2642670">(</span><span class="op" id="2642671">)</span><span class="op" id="2642672">,</span>&nbsp;<span class="ident" id="2642674">nb</span><span class="op" id="2642676">,</span>&nbsp;<span class="ident" id="2642678">p</span><span class="op" id="2642679">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642682">if</span>&nbsp;<span class="op" id="2642685">!</span><span class="ident" id="2642686">selected</span>&nbsp;<span class="op" id="2642695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642699">val</span>&nbsp;<span class="op" id="2642703">=</span>&nbsp;<span class="ident" id="2642705">Value</span><span class="op" id="2642710">{</span><span class="op" id="2642711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2642714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2642717">return</span><br>
<span class="lineno"></span><span class="op" id="2642724">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2642727">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2642761">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2642855">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2642928">func</span>&nbsp;<span class="op" id="2642933">(</span><span class="ident" id="2642934">v</span>&nbsp;<span class="ident" id="2642936">Value</span><span class="op" id="2642941">)</span>&nbsp;<span class="ident" id="2642943">Send</span><span class="op" id="2642947">(</span><span class="ident" id="2642948">x</span>&nbsp;<span class="ident" id="2642950">Value</span><span class="op" id="2642955">)</span>&nbsp;<span class="op" id="2642957">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642960">v</span><span class="op" id="2642961">.</span><span class="ident" id="2642962">mustBe</span><span class="op" id="2642968">(</span><span class="ident" id="2642969">Chan</span><span class="op" id="2642973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642976">v</span><span class="op" id="2642977">.</span><span class="ident" id="2642978">mustBeExported</span><span class="op" id="2642992">(</span><span class="op" id="2642993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2642996">v</span><span class="op" id="2642997">.</span><span class="ident" id="2642998">send</span><span class="op" id="2643002">(</span><span class="ident" id="2643003">x</span><span class="op" id="2643004">,</span>&nbsp;<span class="ident" id="2643006">false</span><span class="op" id="2643011">)</span><br>
<span class="lineno"></span><span class="op" id="2643013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2643016">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2643057">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2643088">func</span>&nbsp;<span class="op" id="2643093">(</span><span class="ident" id="2643094">v</span>&nbsp;<span class="ident" id="2643096">Value</span><span class="op" id="2643101">)</span>&nbsp;<span class="ident" id="2643103">send</span><span class="op" id="2643107">(</span><span class="ident" id="2643108">x</span>&nbsp;<span class="ident" id="2643110">Value</span><span class="op" id="2643115">,</span>&nbsp;<span class="ident" id="2643117">nb</span>&nbsp;<span class="builtintype" id="2643120">bool</span><span class="op" id="2643124">)</span>&nbsp;<span class="op" id="2643126">(</span><span class="ident" id="2643127">selected</span>&nbsp;<span class="builtintype" id="2643136">bool</span><span class="op" id="2643140">)</span>&nbsp;<span class="op" id="2643142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643145">tt</span>&nbsp;<span class="op" id="2643148">:=</span>&nbsp;<span class="op" id="2643151">(</span><span class="op" id="2643152">*</span><span class="ident" id="2643153">chanType</span><span class="op" id="2643161">)</span><span class="op" id="2643162">(</span><span class="ident" id="2643163">unsafe</span><span class="op" id="2643169">.</span><span class="ident" id="2643170">Pointer</span><span class="op" id="2643177">(</span><span class="ident" id="2643178">v</span><span class="op" id="2643179">.</span><span class="ident" id="2643180">typ</span><span class="op" id="2643183">)</span><span class="op" id="2643184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643187">if</span>&nbsp;<span class="ident" id="2643190">ChanDir</span><span class="op" id="2643197">(</span><span class="ident" id="2643198">tt</span><span class="op" id="2643200">.</span><span class="ident" id="2643201">dir</span><span class="op" id="2643204">)</span><span class="op" id="2643205">&amp;</span><span class="ident" id="2643206">SendDir</span>&nbsp;<span class="op" id="2643214">==</span>&nbsp;<span class="num" id="2643217">0</span>&nbsp;<span class="op" id="2643219">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2643223">panic</span><span class="op" id="2643228">(</span><span class="string" id="2643229">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2643265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643271">x</span><span class="op" id="2643272">.</span><span class="ident" id="2643273">mustBeExported</span><span class="op" id="2643287">(</span><span class="op" id="2643288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643291">x</span>&nbsp;<span class="op" id="2643293">=</span>&nbsp;<span class="ident" id="2643295">x</span><span class="op" id="2643296">.</span><span class="ident" id="2643297">assignTo</span><span class="op" id="2643305">(</span><span class="string" id="2643306">&#34;reflect.Value.Send&#34;</span><span class="op" id="2643326">,</span>&nbsp;<span class="ident" id="2643328">tt</span><span class="op" id="2643330">.</span><span class="ident" id="2643331">elem</span><span class="op" id="2643335">,</span>&nbsp;<span class="ident" id="2643337">nil</span><span class="op" id="2643340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643343">var</span>&nbsp;<span class="ident" id="2643347">p</span>&nbsp;<span class="ident" id="2643349">unsafe</span><span class="op" id="2643355">.</span><span class="ident" id="2643356">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643365">if</span>&nbsp;<span class="ident" id="2643368">x</span><span class="op" id="2643369">.</span><span class="ident" id="2643370">flag</span><span class="op" id="2643374">&amp;</span><span class="ident" id="2643375">flagIndir</span>&nbsp;<span class="op" id="2643385">!=</span>&nbsp;<span class="num" id="2643388">0</span>&nbsp;<span class="op" id="2643390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643394">p</span>&nbsp;<span class="op" id="2643396">=</span>&nbsp;<span class="ident" id="2643398">x</span><span class="op" id="2643399">.</span><span class="ident" id="2643400">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643405">}</span>&nbsp;<span class="keyword" id="2643407">else</span>&nbsp;<span class="op" id="2643412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643416">p</span>&nbsp;<span class="op" id="2643418">=</span>&nbsp;<span class="ident" id="2643420">unsafe</span><span class="op" id="2643426">.</span><span class="ident" id="2643427">Pointer</span><span class="op" id="2643434">(</span><span class="op" id="2643435">&amp;</span><span class="ident" id="2643436">x</span><span class="op" id="2643437">.</span><span class="ident" id="2643438">ptr</span><span class="op" id="2643441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643444">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643447">return</span>&nbsp;<span class="ident" id="2643454">chansend</span><span class="op" id="2643462">(</span><span class="ident" id="2643463">v</span><span class="op" id="2643464">.</span><span class="ident" id="2643465">typ</span><span class="op" id="2643468">,</span>&nbsp;<span class="ident" id="2643470">v</span><span class="op" id="2643471">.</span><span class="ident" id="2643472">pointer</span><span class="op" id="2643479">(</span><span class="op" id="2643480">)</span><span class="op" id="2643481">,</span>&nbsp;<span class="ident" id="2643483">p</span><span class="op" id="2643484">,</span>&nbsp;<span class="ident" id="2643486">nb</span><span class="op" id="2643488">)</span><br>
<span class="lineno"></span><span class="op" id="2643490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2643493">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2643526">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2643564">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2643619">func</span>&nbsp;<span class="op" id="2643624">(</span><span class="ident" id="2643625">v</span>&nbsp;<span class="ident" id="2643627">Value</span><span class="op" id="2643632">)</span>&nbsp;<span class="ident" id="2643634">Set</span><span class="op" id="2643637">(</span><span class="ident" id="2643638">x</span>&nbsp;<span class="ident" id="2643640">Value</span><span class="op" id="2643645">)</span>&nbsp;<span class="op" id="2643647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643650">v</span><span class="op" id="2643651">.</span><span class="ident" id="2643652">mustBeAssignable</span><span class="op" id="2643668">(</span><span class="op" id="2643669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643672">x</span><span class="op" id="2643673">.</span><span class="ident" id="2643674">mustBeExported</span><span class="op" id="2643688">(</span><span class="op" id="2643689">)</span>&nbsp;<span class="comment" id="2643691">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643724">var</span>&nbsp;<span class="ident" id="2643728">target</span>&nbsp;<span class="ident" id="2643735">unsafe</span><span class="op" id="2643741">.</span><span class="ident" id="2643742">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643751">if</span>&nbsp;<span class="ident" id="2643754">v</span><span class="op" id="2643755">.</span><span class="ident" id="2643756">kind</span><span class="op" id="2643760">(</span><span class="op" id="2643761">)</span>&nbsp;<span class="op" id="2643763">==</span>&nbsp;<span class="ident" id="2643766">Interface</span>&nbsp;<span class="op" id="2643776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643780">target</span>&nbsp;<span class="op" id="2643787">=</span>&nbsp;<span class="ident" id="2643789">v</span><span class="op" id="2643790">.</span><span class="ident" id="2643791">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643799">x</span>&nbsp;<span class="op" id="2643801">=</span>&nbsp;<span class="ident" id="2643803">x</span><span class="op" id="2643804">.</span><span class="ident" id="2643805">assignTo</span><span class="op" id="2643813">(</span><span class="string" id="2643814">&#34;reflect.Set&#34;</span><span class="op" id="2643827">,</span>&nbsp;<span class="ident" id="2643829">v</span><span class="op" id="2643830">.</span><span class="ident" id="2643831">typ</span><span class="op" id="2643834">,</span>&nbsp;<span class="ident" id="2643836">target</span><span class="op" id="2643842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2643845">if</span>&nbsp;<span class="ident" id="2643848">x</span><span class="op" id="2643849">.</span><span class="ident" id="2643850">flag</span><span class="op" id="2643854">&amp;</span><span class="ident" id="2643855">flagIndir</span>&nbsp;<span class="op" id="2643865">!=</span>&nbsp;<span class="num" id="2643868">0</span>&nbsp;<span class="op" id="2643870">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2643874">memmove</span><span class="op" id="2643881">(</span><span class="ident" id="2643882">v</span><span class="op" id="2643883">.</span><span class="ident" id="2643884">ptr</span><span class="op" id="2643887">,</span>&nbsp;<span class="ident" id="2643889">x</span><span class="op" id="2643890">.</span><span class="ident" id="2643891">ptr</span><span class="op" id="2643894">,</span>&nbsp;<span class="ident" id="2643896">v</span><span class="op" id="2643897">.</span><span class="ident" id="2643898">typ</span><span class="op" id="2643901">.</span><span class="ident" id="2643902">size</span><span class="op" id="2643906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643909">}</span>&nbsp;<span class="keyword" id="2643911">else</span>&nbsp;<span class="op" id="2643916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643920">*</span><span class="op" id="2643921">(</span><span class="op" id="2643922">*</span><span class="ident" id="2643923">unsafe</span><span class="op" id="2643929">.</span><span class="ident" id="2643930">Pointer</span><span class="op" id="2643937">)</span><span class="op" id="2643938">(</span><span class="ident" id="2643939">v</span><span class="op" id="2643940">.</span><span class="ident" id="2643941">ptr</span><span class="op" id="2643944">)</span>&nbsp;<span class="op" id="2643946">=</span>&nbsp;<span class="ident" id="2643948">x</span><span class="op" id="2643949">.</span><span class="ident" id="2643950">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2643955">}</span><br>
<span class="lineno"></span><span class="op" id="2643957">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2643960">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2643998">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2644060">func</span>&nbsp;<span class="op" id="2644065">(</span><span class="ident" id="2644066">v</span>&nbsp;<span class="ident" id="2644068">Value</span><span class="op" id="2644073">)</span>&nbsp;<span class="ident" id="2644075">SetBool</span><span class="op" id="2644082">(</span><span class="ident" id="2644083">x</span>&nbsp;<span class="builtintype" id="2644085">bool</span><span class="op" id="2644089">)</span>&nbsp;<span class="op" id="2644091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644094">v</span><span class="op" id="2644095">.</span><span class="ident" id="2644096">mustBeAssignable</span><span class="op" id="2644112">(</span><span class="op" id="2644113">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644116">v</span><span class="op" id="2644117">.</span><span class="ident" id="2644118">mustBe</span><span class="op" id="2644124">(</span><span class="ident" id="2644125">Bool</span><span class="op" id="2644129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644132">*</span><span class="op" id="2644133">(</span><span class="op" id="2644134">*</span><span class="builtintype" id="2644135">bool</span><span class="op" id="2644139">)</span><span class="op" id="2644140">(</span><span class="ident" id="2644141">v</span><span class="op" id="2644142">.</span><span class="ident" id="2644143">ptr</span><span class="op" id="2644146">)</span>&nbsp;<span class="op" id="2644148">=</span>&nbsp;<span class="ident" id="2644150">x</span><br>
<span class="lineno"></span><span class="op" id="2644152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2644155">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2644194">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2644256">func</span>&nbsp;<span class="op" id="2644261">(</span><span class="ident" id="2644262">v</span>&nbsp;<span class="ident" id="2644264">Value</span><span class="op" id="2644269">)</span>&nbsp;<span class="ident" id="2644271">SetBytes</span><span class="op" id="2644279">(</span><span class="ident" id="2644280">x</span>&nbsp;<span class="op" id="2644282">[</span><span class="op" id="2644283">]</span><span class="builtintype" id="2644284">byte</span><span class="op" id="2644288">)</span>&nbsp;<span class="op" id="2644290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644293">v</span><span class="op" id="2644294">.</span><span class="ident" id="2644295">mustBeAssignable</span><span class="op" id="2644311">(</span><span class="op" id="2644312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644315">v</span><span class="op" id="2644316">.</span><span class="ident" id="2644317">mustBe</span><span class="op" id="2644323">(</span><span class="ident" id="2644324">Slice</span><span class="op" id="2644329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644332">if</span>&nbsp;<span class="ident" id="2644335">v</span><span class="op" id="2644336">.</span><span class="ident" id="2644337">typ</span><span class="op" id="2644340">.</span><span class="ident" id="2644341">Elem</span><span class="op" id="2644345">(</span><span class="op" id="2644346">)</span><span class="op" id="2644347">.</span><span class="ident" id="2644348">Kind</span><span class="op" id="2644352">(</span><span class="op" id="2644353">)</span>&nbsp;<span class="op" id="2644355">!=</span>&nbsp;<span class="ident" id="2644358">Uint8</span>&nbsp;<span class="op" id="2644364">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2644368">panic</span><span class="op" id="2644373">(</span><span class="string" id="2644374">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2644416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644422">*</span><span class="op" id="2644423">(</span><span class="op" id="2644424">*</span><span class="op" id="2644425">[</span><span class="op" id="2644426">]</span><span class="builtintype" id="2644427">byte</span><span class="op" id="2644431">)</span><span class="op" id="2644432">(</span><span class="ident" id="2644433">v</span><span class="op" id="2644434">.</span><span class="ident" id="2644435">ptr</span><span class="op" id="2644438">)</span>&nbsp;<span class="op" id="2644440">=</span>&nbsp;<span class="ident" id="2644442">x</span><br>
<span class="lineno"></span><span class="op" id="2644444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2644447">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2644486">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2644557">func</span>&nbsp;<span class="op" id="2644562">(</span><span class="ident" id="2644563">v</span>&nbsp;<span class="ident" id="2644565">Value</span><span class="op" id="2644570">)</span>&nbsp;<span class="ident" id="2644572">setRunes</span><span class="op" id="2644580">(</span><span class="ident" id="2644581">x</span>&nbsp;<span class="op" id="2644583">[</span><span class="op" id="2644584">]</span><span class="builtintype" id="2644585">rune</span><span class="op" id="2644589">)</span>&nbsp;<span class="op" id="2644591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644594">v</span><span class="op" id="2644595">.</span><span class="ident" id="2644596">mustBeAssignable</span><span class="op" id="2644612">(</span><span class="op" id="2644613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644616">v</span><span class="op" id="2644617">.</span><span class="ident" id="2644618">mustBe</span><span class="op" id="2644624">(</span><span class="ident" id="2644625">Slice</span><span class="op" id="2644630">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644633">if</span>&nbsp;<span class="ident" id="2644636">v</span><span class="op" id="2644637">.</span><span class="ident" id="2644638">typ</span><span class="op" id="2644641">.</span><span class="ident" id="2644642">Elem</span><span class="op" id="2644646">(</span><span class="op" id="2644647">)</span><span class="op" id="2644648">.</span><span class="ident" id="2644649">Kind</span><span class="op" id="2644653">(</span><span class="op" id="2644654">)</span>&nbsp;<span class="op" id="2644656">!=</span>&nbsp;<span class="ident" id="2644659">Int32</span>&nbsp;<span class="op" id="2644665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2644669">panic</span><span class="op" id="2644674">(</span><span class="string" id="2644675">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2644717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2644723">*</span><span class="op" id="2644724">(</span><span class="op" id="2644725">*</span><span class="op" id="2644726">[</span><span class="op" id="2644727">]</span><span class="builtintype" id="2644728">rune</span><span class="op" id="2644732">)</span><span class="op" id="2644733">(</span><span class="ident" id="2644734">v</span><span class="op" id="2644735">.</span><span class="ident" id="2644736">ptr</span><span class="op" id="2644739">)</span>&nbsp;<span class="op" id="2644741">=</span>&nbsp;<span class="ident" id="2644743">x</span><br>
<span class="lineno"></span><span class="op" id="2644745">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2644748">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2644794">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2644876">func</span>&nbsp;<span class="op" id="2644881">(</span><span class="ident" id="2644882">v</span>&nbsp;<span class="ident" id="2644884">Value</span><span class="op" id="2644889">)</span>&nbsp;<span class="ident" id="2644891">SetComplex</span><span class="op" id="2644901">(</span><span class="ident" id="2644902">x</span>&nbsp;<span class="builtintype" id="2644904">complex128</span><span class="op" id="2644914">)</span>&nbsp;<span class="op" id="2644916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2644919">v</span><span class="op" id="2644920">.</span><span class="ident" id="2644921">mustBeAssignable</span><span class="op" id="2644937">(</span><span class="op" id="2644938">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644941">switch</span>&nbsp;<span class="ident" id="2644948">k</span>&nbsp;<span class="op" id="2644950">:=</span>&nbsp;<span class="ident" id="2644953">v</span><span class="op" id="2644954">.</span><span class="ident" id="2644955">kind</span><span class="op" id="2644959">(</span><span class="op" id="2644960">)</span><span class="op" id="2644961">;</span>&nbsp;<span class="ident" id="2644963">k</span>&nbsp;<span class="op" id="2644965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2644968">default</span><span class="op" id="2644975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2644979">panic</span><span class="op" id="2644984">(</span><span class="op" id="2644985">&amp;</span><span class="ident" id="2644986">ValueError</span><span class="op" id="2644996">{</span><span class="string" id="2644997">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2645023">,</span>&nbsp;<span class="ident" id="2645025">v</span><span class="op" id="2645026">.</span><span class="ident" id="2645027">kind</span><span class="op" id="2645031">(</span><span class="op" id="2645032">)</span><span class="op" id="2645033">}</span><span class="op" id="2645034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645037">case</span>&nbsp;<span class="ident" id="2645042">Complex64</span><span class="op" id="2645051">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645055">*</span><span class="op" id="2645056">(</span><span class="op" id="2645057">*</span><span class="builtintype" id="2645058">complex64</span><span class="op" id="2645067">)</span><span class="op" id="2645068">(</span><span class="ident" id="2645069">v</span><span class="op" id="2645070">.</span><span class="ident" id="2645071">ptr</span><span class="op" id="2645074">)</span>&nbsp;<span class="op" id="2645076">=</span>&nbsp;<span class="builtintype" id="2645078">complex64</span><span class="op" id="2645087">(</span><span class="ident" id="2645088">x</span><span class="op" id="2645089">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645092">case</span>&nbsp;<span class="ident" id="2645097">Complex128</span><span class="op" id="2645107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645111">*</span><span class="op" id="2645112">(</span><span class="op" id="2645113">*</span><span class="builtintype" id="2645114">complex128</span><span class="op" id="2645124">)</span><span class="op" id="2645125">(</span><span class="ident" id="2645126">v</span><span class="op" id="2645127">.</span><span class="ident" id="2645128">ptr</span><span class="op" id="2645131">)</span>&nbsp;<span class="op" id="2645133">=</span>&nbsp;<span class="ident" id="2645135">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645138">}</span><br>
<span class="lineno"></span><span class="op" id="2645140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2645143">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2645187">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2645264">func</span>&nbsp;<span class="op" id="2645269">(</span><span class="ident" id="2645270">v</span>&nbsp;<span class="ident" id="2645272">Value</span><span class="op" id="2645277">)</span>&nbsp;<span class="ident" id="2645279">SetFloat</span><span class="op" id="2645287">(</span><span class="ident" id="2645288">x</span>&nbsp;<span class="builtintype" id="2645290">float64</span><span class="op" id="2645297">)</span>&nbsp;<span class="op" id="2645299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2645302">v</span><span class="op" id="2645303">.</span><span class="ident" id="2645304">mustBeAssignable</span><span class="op" id="2645320">(</span><span class="op" id="2645321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645324">switch</span>&nbsp;<span class="ident" id="2645331">k</span>&nbsp;<span class="op" id="2645333">:=</span>&nbsp;<span class="ident" id="2645336">v</span><span class="op" id="2645337">.</span><span class="ident" id="2645338">kind</span><span class="op" id="2645342">(</span><span class="op" id="2645343">)</span><span class="op" id="2645344">;</span>&nbsp;<span class="ident" id="2645346">k</span>&nbsp;<span class="op" id="2645348">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645351">default</span><span class="op" id="2645358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2645362">panic</span><span class="op" id="2645367">(</span><span class="op" id="2645368">&amp;</span><span class="ident" id="2645369">ValueError</span><span class="op" id="2645379">{</span><span class="string" id="2645380">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2645404">,</span>&nbsp;<span class="ident" id="2645406">v</span><span class="op" id="2645407">.</span><span class="ident" id="2645408">kind</span><span class="op" id="2645412">(</span><span class="op" id="2645413">)</span><span class="op" id="2645414">}</span><span class="op" id="2645415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645418">case</span>&nbsp;<span class="ident" id="2645423">Float32</span><span class="op" id="2645430">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645434">*</span><span class="op" id="2645435">(</span><span class="op" id="2645436">*</span><span class="builtintype" id="2645437">float32</span><span class="op" id="2645444">)</span><span class="op" id="2645445">(</span><span class="ident" id="2645446">v</span><span class="op" id="2645447">.</span><span class="ident" id="2645448">ptr</span><span class="op" id="2645451">)</span>&nbsp;<span class="op" id="2645453">=</span>&nbsp;<span class="builtintype" id="2645455">float32</span><span class="op" id="2645462">(</span><span class="ident" id="2645463">x</span><span class="op" id="2645464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645467">case</span>&nbsp;<span class="ident" id="2645472">Float64</span><span class="op" id="2645479">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645483">*</span><span class="op" id="2645484">(</span><span class="op" id="2645485">*</span><span class="builtintype" id="2645486">float64</span><span class="op" id="2645493">)</span><span class="op" id="2645494">(</span><span class="ident" id="2645495">v</span><span class="op" id="2645496">.</span><span class="ident" id="2645497">ptr</span><span class="op" id="2645500">)</span>&nbsp;<span class="op" id="2645502">=</span>&nbsp;<span class="ident" id="2645504">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645507">}</span><br>
<span class="lineno"></span><span class="op" id="2645509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2645512">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2645554">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2645646">func</span>&nbsp;<span class="op" id="2645651">(</span><span class="ident" id="2645652">v</span>&nbsp;<span class="ident" id="2645654">Value</span><span class="op" id="2645659">)</span>&nbsp;<span class="ident" id="2645661">SetInt</span><span class="op" id="2645667">(</span><span class="ident" id="2645668">x</span>&nbsp;<span class="ident" id="2645670">int64</span><span class="op" id="2645675">)</span>&nbsp;<span class="op" id="2645677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2645680">v</span><span class="op" id="2645681">.</span><span class="ident" id="2645682">mustBeAssignable</span><span class="op" id="2645698">(</span><span class="op" id="2645699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645702">switch</span>&nbsp;<span class="ident" id="2645709">k</span>&nbsp;<span class="op" id="2645711">:=</span>&nbsp;<span class="ident" id="2645714">v</span><span class="op" id="2645715">.</span><span class="ident" id="2645716">kind</span><span class="op" id="2645720">(</span><span class="op" id="2645721">)</span><span class="op" id="2645722">;</span>&nbsp;<span class="ident" id="2645724">k</span>&nbsp;<span class="op" id="2645726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645729">default</span><span class="op" id="2645736">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2645740">panic</span><span class="op" id="2645745">(</span><span class="op" id="2645746">&amp;</span><span class="ident" id="2645747">ValueError</span><span class="op" id="2645757">{</span><span class="string" id="2645758">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2645780">,</span>&nbsp;<span class="ident" id="2645782">v</span><span class="op" id="2645783">.</span><span class="ident" id="2645784">kind</span><span class="op" id="2645788">(</span><span class="op" id="2645789">)</span><span class="op" id="2645790">}</span><span class="op" id="2645791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645794">case</span>&nbsp;<span class="ident" id="2645799">Int</span><span class="op" id="2645802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645806">*</span><span class="op" id="2645807">(</span><span class="op" id="2645808">*</span><span class="builtintype" id="2645809">int</span><span class="op" id="2645812">)</span><span class="op" id="2645813">(</span><span class="ident" id="2645814">v</span><span class="op" id="2645815">.</span><span class="ident" id="2645816">ptr</span><span class="op" id="2645819">)</span>&nbsp;<span class="op" id="2645821">=</span>&nbsp;<span class="builtintype" id="2645823">int</span><span class="op" id="2645826">(</span><span class="ident" id="2645827">x</span><span class="op" id="2645828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645831">case</span>&nbsp;<span class="ident" id="2645836">Int8</span><span class="op" id="2645840">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645844">*</span><span class="op" id="2645845">(</span><span class="op" id="2645846">*</span><span class="builtintype" id="2645847">int8</span><span class="op" id="2645851">)</span><span class="op" id="2645852">(</span><span class="ident" id="2645853">v</span><span class="op" id="2645854">.</span><span class="ident" id="2645855">ptr</span><span class="op" id="2645858">)</span>&nbsp;<span class="op" id="2645860">=</span>&nbsp;<span class="builtintype" id="2645862">int8</span><span class="op" id="2645866">(</span><span class="ident" id="2645867">x</span><span class="op" id="2645868">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645871">case</span>&nbsp;<span class="ident" id="2645876">Int16</span><span class="op" id="2645881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645885">*</span><span class="op" id="2645886">(</span><span class="op" id="2645887">*</span><span class="builtintype" id="2645888">int16</span><span class="op" id="2645893">)</span><span class="op" id="2645894">(</span><span class="ident" id="2645895">v</span><span class="op" id="2645896">.</span><span class="ident" id="2645897">ptr</span><span class="op" id="2645900">)</span>&nbsp;<span class="op" id="2645902">=</span>&nbsp;<span class="builtintype" id="2645904">int16</span><span class="op" id="2645909">(</span><span class="ident" id="2645910">x</span><span class="op" id="2645911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645914">case</span>&nbsp;<span class="ident" id="2645919">Int32</span><span class="op" id="2645924">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645928">*</span><span class="op" id="2645929">(</span><span class="op" id="2645930">*</span><span class="builtintype" id="2645931">int32</span><span class="op" id="2645936">)</span><span class="op" id="2645937">(</span><span class="ident" id="2645938">v</span><span class="op" id="2645939">.</span><span class="ident" id="2645940">ptr</span><span class="op" id="2645943">)</span>&nbsp;<span class="op" id="2645945">=</span>&nbsp;<span class="builtintype" id="2645947">int32</span><span class="op" id="2645952">(</span><span class="ident" id="2645953">x</span><span class="op" id="2645954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2645957">case</span>&nbsp;<span class="ident" id="2645962">Int64</span><span class="op" id="2645967">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645971">*</span><span class="op" id="2645972">(</span><span class="op" id="2645973">*</span><span class="ident" id="2645974">int64</span><span class="op" id="2645979">)</span><span class="op" id="2645980">(</span><span class="ident" id="2645981">v</span><span class="op" id="2645982">.</span><span class="ident" id="2645983">ptr</span><span class="op" id="2645986">)</span>&nbsp;<span class="op" id="2645988">=</span>&nbsp;<span class="ident" id="2645990">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2645993">}</span><br>
<span class="lineno"></span><span class="op" id="2645995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2645998">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2646030">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2646091">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2646134">func</span>&nbsp;<span class="op" id="2646139">(</span><span class="ident" id="2646140">v</span>&nbsp;<span class="ident" id="2646142">Value</span><span class="op" id="2646147">)</span>&nbsp;<span class="ident" id="2646149">SetLen</span><span class="op" id="2646155">(</span><span class="ident" id="2646156">n</span>&nbsp;<span class="builtintype" id="2646158">int</span><span class="op" id="2646161">)</span>&nbsp;<span class="op" id="2646163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646166">v</span><span class="op" id="2646167">.</span><span class="ident" id="2646168">mustBeAssignable</span><span class="op" id="2646184">(</span><span class="op" id="2646185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646188">v</span><span class="op" id="2646189">.</span><span class="ident" id="2646190">mustBe</span><span class="op" id="2646196">(</span><span class="ident" id="2646197">Slice</span><span class="op" id="2646202">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646205">s</span>&nbsp;<span class="op" id="2646207">:=</span>&nbsp;<span class="op" id="2646210">(</span><span class="op" id="2646211">*</span><span class="ident" id="2646212">sliceHeader</span><span class="op" id="2646223">)</span><span class="op" id="2646224">(</span><span class="ident" id="2646225">v</span><span class="op" id="2646226">.</span><span class="ident" id="2646227">ptr</span><span class="op" id="2646230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646233">if</span>&nbsp;<span class="builtintype" id="2646236">uint</span><span class="op" id="2646240">(</span><span class="ident" id="2646241">n</span><span class="op" id="2646242">)</span>&nbsp;<span class="op" id="2646244">&gt;</span>&nbsp;<span class="builtintype" id="2646246">uint</span><span class="op" id="2646250">(</span><span class="ident" id="2646251">s</span><span class="op" id="2646252">.</span><span class="ident" id="2646253">Cap</span><span class="op" id="2646256">)</span>&nbsp;<span class="op" id="2646258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2646262">panic</span><span class="op" id="2646267">(</span><span class="string" id="2646268">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2646314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646320">s</span><span class="op" id="2646321">.</span><span class="ident" id="2646322">Len</span>&nbsp;<span class="op" id="2646326">=</span>&nbsp;<span class="ident" id="2646328">n</span><br>
<span class="lineno">1395</span><span class="op" id="2646330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2646333">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2646367">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2646443">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2646486">func</span>&nbsp;<span class="op" id="2646491">(</span><span class="ident" id="2646492">v</span>&nbsp;<span class="ident" id="2646494">Value</span><span class="op" id="2646499">)</span>&nbsp;<span class="ident" id="2646501">SetCap</span><span class="op" id="2646507">(</span><span class="ident" id="2646508">n</span>&nbsp;<span class="builtintype" id="2646510">int</span><span class="op" id="2646513">)</span>&nbsp;<span class="op" id="2646515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646518">v</span><span class="op" id="2646519">.</span><span class="ident" id="2646520">mustBeAssignable</span><span class="op" id="2646536">(</span><span class="op" id="2646537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646540">v</span><span class="op" id="2646541">.</span><span class="ident" id="2646542">mustBe</span><span class="op" id="2646548">(</span><span class="ident" id="2646549">Slice</span><span class="op" id="2646554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646557">s</span>&nbsp;<span class="op" id="2646559">:=</span>&nbsp;<span class="op" id="2646562">(</span><span class="op" id="2646563">*</span><span class="ident" id="2646564">sliceHeader</span><span class="op" id="2646575">)</span><span class="op" id="2646576">(</span><span class="ident" id="2646577">v</span><span class="op" id="2646578">.</span><span class="ident" id="2646579">ptr</span><span class="op" id="2646582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2646585">if</span>&nbsp;<span class="ident" id="2646588">n</span>&nbsp;<span class="op" id="2646590">&lt;</span>&nbsp;<span class="builtintype" id="2646592">int</span><span class="op" id="2646595">(</span><span class="ident" id="2646596">s</span><span class="op" id="2646597">.</span><span class="ident" id="2646598">Len</span><span class="op" id="2646601">)</span>&nbsp;<span class="op" id="2646603">||</span>&nbsp;<span class="ident" id="2646606">n</span>&nbsp;<span class="op" id="2646608">&gt;</span>&nbsp;<span class="builtintype" id="2646610">int</span><span class="op" id="2646613">(</span><span class="ident" id="2646614">s</span><span class="op" id="2646615">.</span><span class="ident" id="2646616">Cap</span><span class="op" id="2646619">)</span>&nbsp;<span class="op" id="2646621">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2646625">panic</span><span class="op" id="2646630">(</span><span class="string" id="2646631">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2646679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2646682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2646685">s</span><span class="op" id="2646686">.</span><span class="ident" id="2646687">Cap</span>&nbsp;<span class="op" id="2646691">=</span>&nbsp;<span class="ident" id="2646693">n</span><br>
<span class="lineno"></span><span class="op" id="2646695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2646698">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2646769">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2646806">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2646877">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2646936">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2647003">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2647066">func</span>&nbsp;<span class="op" id="2647071">(</span><span class="ident" id="2647072">v</span>&nbsp;<span class="ident" id="2647074">Value</span><span class="op" id="2647079">)</span>&nbsp;<span class="ident" id="2647081">SetMapIndex</span><span class="op" id="2647092">(</span><span class="ident" id="2647093">key</span><span class="op" id="2647096">,</span>&nbsp;<span class="ident" id="2647098">val</span>&nbsp;<span class="ident" id="2647102">Value</span><span class="op" id="2647107">)</span>&nbsp;<span class="op" id="2647109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647112">v</span><span class="op" id="2647113">.</span><span class="ident" id="2647114">mustBe</span><span class="op" id="2647120">(</span><span class="ident" id="2647121">Map</span><span class="op" id="2647124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647127">v</span><span class="op" id="2647128">.</span><span class="ident" id="2647129">mustBeExported</span><span class="op" id="2647143">(</span><span class="op" id="2647144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647147">key</span><span class="op" id="2647150">.</span><span class="ident" id="2647151">mustBeExported</span><span class="op" id="2647165">(</span><span class="op" id="2647166">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647169">tt</span>&nbsp;<span class="op" id="2647172">:=</span>&nbsp;<span class="op" id="2647175">(</span><span class="op" id="2647176">*</span><span class="ident" id="2647177">mapType</span><span class="op" id="2647184">)</span><span class="op" id="2647185">(</span><span class="ident" id="2647186">unsafe</span><span class="op" id="2647192">.</span><span class="ident" id="2647193">Pointer</span><span class="op" id="2647200">(</span><span class="ident" id="2647201">v</span><span class="op" id="2647202">.</span><span class="ident" id="2647203">typ</span><span class="op" id="2647206">)</span><span class="op" id="2647207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647210">key</span>&nbsp;<span class="op" id="2647214">=</span>&nbsp;<span class="ident" id="2647216">key</span><span class="op" id="2647219">.</span><span class="ident" id="2647220">assignTo</span><span class="op" id="2647228">(</span><span class="string" id="2647229">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2647256">,</span>&nbsp;<span class="ident" id="2647258">tt</span><span class="op" id="2647260">.</span><span class="ident" id="2647261">key</span><span class="op" id="2647264">,</span>&nbsp;<span class="ident" id="2647266">nil</span><span class="op" id="2647269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647272">var</span>&nbsp;<span class="ident" id="2647276">k</span>&nbsp;<span class="ident" id="2647278">unsafe</span><span class="op" id="2647284">.</span><span class="ident" id="2647285">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647294">if</span>&nbsp;<span class="ident" id="2647297">key</span><span class="op" id="2647300">.</span><span class="ident" id="2647301">flag</span><span class="op" id="2647305">&amp;</span><span class="ident" id="2647306">flagIndir</span>&nbsp;<span class="op" id="2647316">!=</span>&nbsp;<span class="num" id="2647319">0</span>&nbsp;<span class="op" id="2647321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647325">k</span>&nbsp;<span class="op" id="2647327">=</span>&nbsp;<span class="ident" id="2647329">key</span><span class="op" id="2647332">.</span><span class="ident" id="2647333">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647338">}</span>&nbsp;<span class="keyword" id="2647340">else</span>&nbsp;<span class="op" id="2647345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647349">k</span>&nbsp;<span class="op" id="2647351">=</span>&nbsp;<span class="ident" id="2647353">unsafe</span><span class="op" id="2647359">.</span><span class="ident" id="2647360">Pointer</span><span class="op" id="2647367">(</span><span class="op" id="2647368">&amp;</span><span class="ident" id="2647369">key</span><span class="op" id="2647372">.</span><span class="ident" id="2647373">ptr</span><span class="op" id="2647376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647382">if</span>&nbsp;<span class="ident" id="2647385">val</span><span class="op" id="2647388">.</span><span class="ident" id="2647389">typ</span>&nbsp;<span class="op" id="2647393">==</span>&nbsp;<span class="ident" id="2647396">nil</span>&nbsp;<span class="op" id="2647400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647404">mapdelete</span><span class="op" id="2647413">(</span><span class="ident" id="2647414">v</span><span class="op" id="2647415">.</span><span class="ident" id="2647416">typ</span><span class="op" id="2647419">,</span>&nbsp;<span class="ident" id="2647421">v</span><span class="op" id="2647422">.</span><span class="ident" id="2647423">pointer</span><span class="op" id="2647430">(</span><span class="op" id="2647431">)</span><span class="op" id="2647432">,</span>&nbsp;<span class="ident" id="2647434">k</span><span class="op" id="2647435">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647439">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647450">val</span><span class="op" id="2647453">.</span><span class="ident" id="2647454">mustBeExported</span><span class="op" id="2647468">(</span><span class="op" id="2647469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647472">val</span>&nbsp;<span class="op" id="2647476">=</span>&nbsp;<span class="ident" id="2647478">val</span><span class="op" id="2647481">.</span><span class="ident" id="2647482">assignTo</span><span class="op" id="2647490">(</span><span class="string" id="2647491">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2647518">,</span>&nbsp;<span class="ident" id="2647520">tt</span><span class="op" id="2647522">.</span><span class="ident" id="2647523">elem</span><span class="op" id="2647527">,</span>&nbsp;<span class="ident" id="2647529">nil</span><span class="op" id="2647532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647535">var</span>&nbsp;<span class="ident" id="2647539">e</span>&nbsp;<span class="ident" id="2647541">unsafe</span><span class="op" id="2647547">.</span><span class="ident" id="2647548">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647557">if</span>&nbsp;<span class="ident" id="2647560">val</span><span class="op" id="2647563">.</span><span class="ident" id="2647564">flag</span><span class="op" id="2647568">&amp;</span><span class="ident" id="2647569">flagIndir</span>&nbsp;<span class="op" id="2647579">!=</span>&nbsp;<span class="num" id="2647582">0</span>&nbsp;<span class="op" id="2647584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647588">e</span>&nbsp;<span class="op" id="2647590">=</span>&nbsp;<span class="ident" id="2647592">val</span><span class="op" id="2647595">.</span><span class="ident" id="2647596">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647601">}</span>&nbsp;<span class="keyword" id="2647603">else</span>&nbsp;<span class="op" id="2647608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647612">e</span>&nbsp;<span class="op" id="2647614">=</span>&nbsp;<span class="ident" id="2647616">unsafe</span><span class="op" id="2647622">.</span><span class="ident" id="2647623">Pointer</span><span class="op" id="2647630">(</span><span class="op" id="2647631">&amp;</span><span class="ident" id="2647632">val</span><span class="op" id="2647635">.</span><span class="ident" id="2647636">ptr</span><span class="op" id="2647639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647642">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647645">mapassign</span><span class="op" id="2647654">(</span><span class="ident" id="2647655">v</span><span class="op" id="2647656">.</span><span class="ident" id="2647657">typ</span><span class="op" id="2647660">,</span>&nbsp;<span class="ident" id="2647662">v</span><span class="op" id="2647663">.</span><span class="ident" id="2647664">pointer</span><span class="op" id="2647671">(</span><span class="op" id="2647672">)</span><span class="op" id="2647673">,</span>&nbsp;<span class="ident" id="2647675">k</span><span class="op" id="2647676">,</span>&nbsp;<span class="ident" id="2647678">e</span><span class="op" id="2647679">)</span><br>
<span class="lineno"></span><span class="op" id="2647681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2647684">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2647727">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2647833">func</span>&nbsp;<span class="op" id="2647838">(</span><span class="ident" id="2647839">v</span>&nbsp;<span class="ident" id="2647841">Value</span><span class="op" id="2647846">)</span>&nbsp;<span class="ident" id="2647848">SetUint</span><span class="op" id="2647855">(</span><span class="ident" id="2647856">x</span>&nbsp;<span class="ident" id="2647858">uint64</span><span class="op" id="2647864">)</span>&nbsp;<span class="op" id="2647866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2647869">v</span><span class="op" id="2647870">.</span><span class="ident" id="2647871">mustBeAssignable</span><span class="op" id="2647887">(</span><span class="op" id="2647888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647891">switch</span>&nbsp;<span class="ident" id="2647898">k</span>&nbsp;<span class="op" id="2647900">:=</span>&nbsp;<span class="ident" id="2647903">v</span><span class="op" id="2647904">.</span><span class="ident" id="2647905">kind</span><span class="op" id="2647909">(</span><span class="op" id="2647910">)</span><span class="op" id="2647911">;</span>&nbsp;<span class="ident" id="2647913">k</span>&nbsp;<span class="op" id="2647915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647918">default</span><span class="op" id="2647925">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2647929">panic</span><span class="op" id="2647934">(</span><span class="op" id="2647935">&amp;</span><span class="ident" id="2647936">ValueError</span><span class="op" id="2647946">{</span><span class="string" id="2647947">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2647970">,</span>&nbsp;<span class="ident" id="2647972">v</span><span class="op" id="2647973">.</span><span class="ident" id="2647974">kind</span><span class="op" id="2647978">(</span><span class="op" id="2647979">)</span><span class="op" id="2647980">}</span><span class="op" id="2647981">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2647984">case</span>&nbsp;<span class="ident" id="2647989">Uint</span><span class="op" id="2647993">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2647997">*</span><span class="op" id="2647998">(</span><span class="op" id="2647999">*</span><span class="builtintype" id="2648000">uint</span><span class="op" id="2648004">)</span><span class="op" id="2648005">(</span><span class="ident" id="2648006">v</span><span class="op" id="2648007">.</span><span class="ident" id="2648008">ptr</span><span class="op" id="2648011">)</span>&nbsp;<span class="op" id="2648013">=</span>&nbsp;<span class="builtintype" id="2648015">uint</span><span class="op" id="2648019">(</span><span class="ident" id="2648020">x</span><span class="op" id="2648021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648024">case</span>&nbsp;<span class="ident" id="2648029">Uint8</span><span class="op" id="2648034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648038">*</span><span class="op" id="2648039">(</span><span class="op" id="2648040">*</span><span class="builtintype" id="2648041">uint8</span><span class="op" id="2648046">)</span><span class="op" id="2648047">(</span><span class="ident" id="2648048">v</span><span class="op" id="2648049">.</span><span class="ident" id="2648050">ptr</span><span class="op" id="2648053">)</span>&nbsp;<span class="op" id="2648055">=</span>&nbsp;<span class="builtintype" id="2648057">uint8</span><span class="op" id="2648062">(</span><span class="ident" id="2648063">x</span><span class="op" id="2648064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648067">case</span>&nbsp;<span class="ident" id="2648072">Uint16</span><span class="op" id="2648078">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648082">*</span><span class="op" id="2648083">(</span><span class="op" id="2648084">*</span><span class="builtintype" id="2648085">uint16</span><span class="op" id="2648091">)</span><span class="op" id="2648092">(</span><span class="ident" id="2648093">v</span><span class="op" id="2648094">.</span><span class="ident" id="2648095">ptr</span><span class="op" id="2648098">)</span>&nbsp;<span class="op" id="2648100">=</span>&nbsp;<span class="builtintype" id="2648102">uint16</span><span class="op" id="2648108">(</span><span class="ident" id="2648109">x</span><span class="op" id="2648110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648113">case</span>&nbsp;<span class="ident" id="2648118">Uint32</span><span class="op" id="2648124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648128">*</span><span class="op" id="2648129">(</span><span class="op" id="2648130">*</span><span class="builtintype" id="2648131">uint32</span><span class="op" id="2648137">)</span><span class="op" id="2648138">(</span><span class="ident" id="2648139">v</span><span class="op" id="2648140">.</span><span class="ident" id="2648141">ptr</span><span class="op" id="2648144">)</span>&nbsp;<span class="op" id="2648146">=</span>&nbsp;<span class="builtintype" id="2648148">uint32</span><span class="op" id="2648154">(</span><span class="ident" id="2648155">x</span><span class="op" id="2648156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648159">case</span>&nbsp;<span class="ident" id="2648164">Uint64</span><span class="op" id="2648170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648174">*</span><span class="op" id="2648175">(</span><span class="op" id="2648176">*</span><span class="ident" id="2648177">uint64</span><span class="op" id="2648183">)</span><span class="op" id="2648184">(</span><span class="ident" id="2648185">v</span><span class="op" id="2648186">.</span><span class="ident" id="2648187">ptr</span><span class="op" id="2648190">)</span>&nbsp;<span class="op" id="2648192">=</span>&nbsp;<span class="ident" id="2648194">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648197">case</span>&nbsp;<span class="ident" id="2648202">Uintptr</span><span class="op" id="2648209">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648213">*</span><span class="op" id="2648214">(</span><span class="op" id="2648215">*</span><span class="builtintype" id="2648216">uintptr</span><span class="op" id="2648223">)</span><span class="op" id="2648224">(</span><span class="ident" id="2648225">v</span><span class="op" id="2648226">.</span><span class="ident" id="2648227">ptr</span><span class="op" id="2648230">)</span>&nbsp;<span class="op" id="2648232">=</span>&nbsp;<span class="builtintype" id="2648234">uintptr</span><span class="op" id="2648241">(</span><span class="ident" id="2648242">x</span><span class="op" id="2648243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648246">}</span><br>
<span class="lineno"></span><span class="op" id="2648248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2648251">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2648303">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2648350">func</span>&nbsp;<span class="op" id="2648355">(</span><span class="ident" id="2648356">v</span>&nbsp;<span class="ident" id="2648358">Value</span><span class="op" id="2648363">)</span>&nbsp;<span class="ident" id="2648365">SetPointer</span><span class="op" id="2648375">(</span><span class="ident" id="2648376">x</span>&nbsp;<span class="ident" id="2648378">unsafe</span><span class="op" id="2648384">.</span><span class="ident" id="2648385">Pointer</span><span class="op" id="2648392">)</span>&nbsp;<span class="op" id="2648394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648397">v</span><span class="op" id="2648398">.</span><span class="ident" id="2648399">mustBeAssignable</span><span class="op" id="2648415">(</span><span class="op" id="2648416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648419">v</span><span class="op" id="2648420">.</span><span class="ident" id="2648421">mustBe</span><span class="op" id="2648427">(</span><span class="ident" id="2648428">UnsafePointer</span><span class="op" id="2648441">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648444">*</span><span class="op" id="2648445">(</span><span class="op" id="2648446">*</span><span class="ident" id="2648447">unsafe</span><span class="op" id="2648453">.</span><span class="ident" id="2648454">Pointer</span><span class="op" id="2648461">)</span><span class="op" id="2648462">(</span><span class="ident" id="2648463">v</span><span class="op" id="2648464">.</span><span class="ident" id="2648465">ptr</span><span class="op" id="2648468">)</span>&nbsp;<span class="op" id="2648470">=</span>&nbsp;<span class="ident" id="2648472">x</span><br>
<span class="lineno"></span><span class="op" id="2648474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2648477">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2648522">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2648586">func</span>&nbsp;<span class="op" id="2648591">(</span><span class="ident" id="2648592">v</span>&nbsp;<span class="ident" id="2648594">Value</span><span class="op" id="2648599">)</span>&nbsp;<span class="ident" id="2648601">SetString</span><span class="op" id="2648610">(</span><span class="ident" id="2648611">x</span>&nbsp;<span class="builtintype" id="2648613">string</span><span class="op" id="2648619">)</span>&nbsp;<span class="op" id="2648621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648624">v</span><span class="op" id="2648625">.</span><span class="ident" id="2648626">mustBeAssignable</span><span class="op" id="2648642">(</span><span class="op" id="2648643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648646">v</span><span class="op" id="2648647">.</span><span class="ident" id="2648648">mustBe</span><span class="op" id="2648654">(</span><span class="ident" id="2648655">String</span><span class="op" id="2648661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648664">*</span><span class="op" id="2648665">(</span><span class="op" id="2648666">*</span><span class="builtintype" id="2648667">string</span><span class="op" id="2648673">)</span><span class="op" id="2648674">(</span><span class="ident" id="2648675">v</span><span class="op" id="2648676">.</span><span class="ident" id="2648677">ptr</span><span class="op" id="2648680">)</span>&nbsp;<span class="op" id="2648682">=</span>&nbsp;<span class="ident" id="2648684">x</span><br>
<span class="lineno"></span><span class="op" id="2648686">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2648689">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2648714">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2648805">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2648845">func</span>&nbsp;<span class="op" id="2648850">(</span><span class="ident" id="2648851">v</span>&nbsp;<span class="ident" id="2648853">Value</span><span class="op" id="2648858">)</span>&nbsp;<span class="ident" id="2648860">Slice</span><span class="op" id="2648865">(</span><span class="ident" id="2648866">i</span><span class="op" id="2648867">,</span>&nbsp;<span class="ident" id="2648869">j</span>&nbsp;<span class="builtintype" id="2648871">int</span><span class="op" id="2648874">)</span>&nbsp;<span class="ident" id="2648876">Value</span>&nbsp;<span class="op" id="2648882">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648885">var</span>&nbsp;<span class="op" id="2648889">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2648893">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2648898">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648904">typ</span>&nbsp;&nbsp;<span class="op" id="2648909">*</span><span class="ident" id="2648910">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2648922">base</span>&nbsp;<span class="ident" id="2648927">unsafe</span><span class="op" id="2648933">.</span><span class="ident" id="2648934">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2648943">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648946">switch</span>&nbsp;<span class="ident" id="2648953">kind</span>&nbsp;<span class="op" id="2648958">:=</span>&nbsp;<span class="ident" id="2648961">v</span><span class="op" id="2648962">.</span><span class="ident" id="2648963">kind</span><span class="op" id="2648967">(</span><span class="op" id="2648968">)</span><span class="op" id="2648969">;</span>&nbsp;<span class="ident" id="2648971">kind</span>&nbsp;<span class="op" id="2648976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2648979">default</span><span class="op" id="2648986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2648990">panic</span><span class="op" id="2648995">(</span><span class="op" id="2648996">&amp;</span><span class="ident" id="2648997">ValueError</span><span class="op" id="2649007">{</span><span class="string" id="2649008">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2649029">,</span>&nbsp;<span class="ident" id="2649031">v</span><span class="op" id="2649032">.</span><span class="ident" id="2649033">kind</span><span class="op" id="2649037">(</span><span class="op" id="2649038">)</span><span class="op" id="2649039">}</span><span class="op" id="2649040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649044">case</span>&nbsp;<span class="ident" id="2649049">Array</span><span class="op" id="2649054">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649058">if</span>&nbsp;<span class="ident" id="2649061">v</span><span class="op" id="2649062">.</span><span class="ident" id="2649063">flag</span><span class="op" id="2649067">&amp;</span><span class="ident" id="2649068">flagAddr</span>&nbsp;<span class="op" id="2649077">==</span>&nbsp;<span class="num" id="2649080">0</span>&nbsp;<span class="op" id="2649082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2649087">panic</span><span class="op" id="2649092">(</span><span class="string" id="2649093">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2649144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649152">tt</span>&nbsp;<span class="op" id="2649155">:=</span>&nbsp;<span class="op" id="2649158">(</span><span class="op" id="2649159">*</span><span class="ident" id="2649160">arrayType</span><span class="op" id="2649169">)</span><span class="op" id="2649170">(</span><span class="ident" id="2649171">unsafe</span><span class="op" id="2649177">.</span><span class="ident" id="2649178">Pointer</span><span class="op" id="2649185">(</span><span class="ident" id="2649186">v</span><span class="op" id="2649187">.</span><span class="ident" id="2649188">typ</span><span class="op" id="2649191">)</span><span class="op" id="2649192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2649196">cap</span>&nbsp;<span class="op" id="2649200">=</span>&nbsp;<span class="builtintype" id="2649202">int</span><span class="op" id="2649205">(</span><span class="ident" id="2649206">tt</span><span class="op" id="2649208">.</span><span class="builtinfunc" id="2649209">len</span><span class="op" id="2649212">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649216">typ</span>&nbsp;<span class="op" id="2649220">=</span>&nbsp;<span class="op" id="2649222">(</span><span class="op" id="2649223">*</span><span class="ident" id="2649224">sliceType</span><span class="op" id="2649233">)</span><span class="op" id="2649234">(</span><span class="ident" id="2649235">unsafe</span><span class="op" id="2649241">.</span><span class="ident" id="2649242">Pointer</span><span class="op" id="2649249">(</span><span class="ident" id="2649250">tt</span><span class="op" id="2649252">.</span><span class="ident" id="2649253">slice</span><span class="op" id="2649258">)</span><span class="op" id="2649259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649263">base</span>&nbsp;<span class="op" id="2649268">=</span>&nbsp;<span class="ident" id="2649270">v</span><span class="op" id="2649271">.</span><span class="ident" id="2649272">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649278">case</span>&nbsp;<span class="ident" id="2649283">Slice</span><span class="op" id="2649288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649292">typ</span>&nbsp;<span class="op" id="2649296">=</span>&nbsp;<span class="op" id="2649298">(</span><span class="op" id="2649299">*</span><span class="ident" id="2649300">sliceType</span><span class="op" id="2649309">)</span><span class="op" id="2649310">(</span><span class="ident" id="2649311">unsafe</span><span class="op" id="2649317">.</span><span class="ident" id="2649318">Pointer</span><span class="op" id="2649325">(</span><span class="ident" id="2649326">v</span><span class="op" id="2649327">.</span><span class="ident" id="2649328">typ</span><span class="op" id="2649331">)</span><span class="op" id="2649332">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649336">s</span>&nbsp;<span class="op" id="2649338">:=</span>&nbsp;<span class="op" id="2649341">(</span><span class="op" id="2649342">*</span><span class="ident" id="2649343">sliceHeader</span><span class="op" id="2649354">)</span><span class="op" id="2649355">(</span><span class="ident" id="2649356">v</span><span class="op" id="2649357">.</span><span class="ident" id="2649358">ptr</span><span class="op" id="2649361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649365">base</span>&nbsp;<span class="op" id="2649370">=</span>&nbsp;<span class="ident" id="2649372">unsafe</span><span class="op" id="2649378">.</span><span class="ident" id="2649379">Pointer</span><span class="op" id="2649386">(</span><span class="ident" id="2649387">s</span><span class="op" id="2649388">.</span><span class="ident" id="2649389">Data</span><span class="op" id="2649393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2649397">cap</span>&nbsp;<span class="op" id="2649401">=</span>&nbsp;<span class="ident" id="2649403">s</span><span class="op" id="2649404">.</span><span class="ident" id="2649405">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649411">case</span>&nbsp;<span class="ident" id="2649416">String</span><span class="op" id="2649422">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649426">s</span>&nbsp;<span class="op" id="2649428">:=</span>&nbsp;<span class="op" id="2649431">(</span><span class="op" id="2649432">*</span><span class="ident" id="2649433">stringHeader</span><span class="op" id="2649445">)</span><span class="op" id="2649446">(</span><span class="ident" id="2649447">v</span><span class="op" id="2649448">.</span><span class="ident" id="2649449">ptr</span><span class="op" id="2649452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649456">if</span>&nbsp;<span class="ident" id="2649459">i</span>&nbsp;<span class="op" id="2649461">&lt;</span>&nbsp;<span class="num" id="2649463">0</span>&nbsp;<span class="op" id="2649465">||</span>&nbsp;<span class="ident" id="2649468">j</span>&nbsp;<span class="op" id="2649470">&lt;</span>&nbsp;<span class="ident" id="2649472">i</span>&nbsp;<span class="op" id="2649474">||</span>&nbsp;<span class="ident" id="2649477">j</span>&nbsp;<span class="op" id="2649479">&gt;</span>&nbsp;<span class="ident" id="2649481">s</span><span class="op" id="2649482">.</span><span class="ident" id="2649483">Len</span>&nbsp;<span class="op" id="2649487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2649492">panic</span><span class="op" id="2649497">(</span><span class="string" id="2649498">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2649553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649561">t</span>&nbsp;<span class="op" id="2649563">:=</span>&nbsp;<span class="ident" id="2649566">stringHeader</span><span class="op" id="2649578">{</span><span class="ident" id="2649579">unsafe</span><span class="op" id="2649585">.</span><span class="ident" id="2649586">Pointer</span><span class="op" id="2649593">(</span><span class="builtintype" id="2649594">uintptr</span><span class="op" id="2649601">(</span><span class="ident" id="2649602">s</span><span class="op" id="2649603">.</span><span class="ident" id="2649604">Data</span><span class="op" id="2649608">)</span>&nbsp;<span class="op" id="2649610">+</span>&nbsp;<span class="builtintype" id="2649612">uintptr</span><span class="op" id="2649619">(</span><span class="ident" id="2649620">i</span><span class="op" id="2649621">)</span><span class="op" id="2649622">)</span><span class="op" id="2649623">,</span>&nbsp;<span class="ident" id="2649625">j</span>&nbsp;<span class="op" id="2649627">-</span>&nbsp;<span class="ident" id="2649629">i</span><span class="op" id="2649630">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649634">return</span>&nbsp;<span class="ident" id="2649641">Value</span><span class="op" id="2649646">{</span><span class="ident" id="2649647">v</span><span class="op" id="2649648">.</span><span class="ident" id="2649649">typ</span><span class="op" id="2649652">,</span>&nbsp;<span class="ident" id="2649654">unsafe</span><span class="op" id="2649660">.</span><span class="ident" id="2649661">Pointer</span><span class="op" id="2649668">(</span><span class="op" id="2649669">&amp;</span><span class="ident" id="2649670">t</span><span class="op" id="2649671">)</span><span class="op" id="2649672">,</span>&nbsp;<span class="ident" id="2649674">v</span><span class="op" id="2649675">.</span><span class="ident" id="2649676">flag</span><span class="op" id="2649680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649687">if</span>&nbsp;<span class="ident" id="2649690">i</span>&nbsp;<span class="op" id="2649692">&lt;</span>&nbsp;<span class="num" id="2649694">0</span>&nbsp;<span class="op" id="2649696">||</span>&nbsp;<span class="ident" id="2649699">j</span>&nbsp;<span class="op" id="2649701">&lt;</span>&nbsp;<span class="ident" id="2649703">i</span>&nbsp;<span class="op" id="2649705">||</span>&nbsp;<span class="ident" id="2649708">j</span>&nbsp;<span class="op" id="2649710">&gt;</span>&nbsp;<span class="builtinfunc" id="2649712">cap</span>&nbsp;<span class="op" id="2649716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2649720">panic</span><span class="op" id="2649725">(</span><span class="string" id="2649726">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2649774">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2649777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2649781">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649842">var</span>&nbsp;<span class="ident" id="2649846">x</span>&nbsp;<span class="op" id="2649848">[</span><span class="op" id="2649849">]</span><span class="ident" id="2649850">unsafe</span><span class="op" id="2649856">.</span><span class="ident" id="2649857">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2649867">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649908">s</span>&nbsp;<span class="op" id="2649910">:=</span>&nbsp;<span class="op" id="2649913">(</span><span class="op" id="2649914">*</span><span class="ident" id="2649915">sliceHeader</span><span class="op" id="2649926">)</span><span class="op" id="2649927">(</span><span class="ident" id="2649928">unsafe</span><span class="op" id="2649934">.</span><span class="ident" id="2649935">Pointer</span><span class="op" id="2649942">(</span><span class="op" id="2649943">&amp;</span><span class="ident" id="2649944">x</span><span class="op" id="2649945">)</span><span class="op" id="2649946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649949">s</span><span class="op" id="2649950">.</span><span class="ident" id="2649951">Len</span>&nbsp;<span class="op" id="2649955">=</span>&nbsp;<span class="ident" id="2649957">j</span>&nbsp;<span class="op" id="2649959">-</span>&nbsp;<span class="ident" id="2649961">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649964">s</span><span class="op" id="2649965">.</span><span class="ident" id="2649966">Cap</span>&nbsp;<span class="op" id="2649970">=</span>&nbsp;<span class="builtinfunc" id="2649972">cap</span>&nbsp;<span class="op" id="2649976">-</span>&nbsp;<span class="ident" id="2649978">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2649981">if</span>&nbsp;<span class="builtinfunc" id="2649984">cap</span><span class="op" id="2649987">-</span><span class="ident" id="2649988">i</span>&nbsp;<span class="op" id="2649990">&gt;</span>&nbsp;<span class="num" id="2649992">0</span>&nbsp;<span class="op" id="2649994">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2649998">s</span><span class="op" id="2649999">.</span><span class="ident" id="2650000">Data</span>&nbsp;<span class="op" id="2650005">=</span>&nbsp;<span class="ident" id="2650007">unsafe</span><span class="op" id="2650013">.</span><span class="ident" id="2650014">Pointer</span><span class="op" id="2650021">(</span><span class="builtintype" id="2650022">uintptr</span><span class="op" id="2650029">(</span><span class="ident" id="2650030">base</span><span class="op" id="2650034">)</span>&nbsp;<span class="op" id="2650036">+</span>&nbsp;<span class="builtintype" id="2650038">uintptr</span><span class="op" id="2650045">(</span><span class="ident" id="2650046">i</span><span class="op" id="2650047">)</span><span class="op" id="2650048">*</span><span class="ident" id="2650049">typ</span><span class="op" id="2650052">.</span><span class="ident" id="2650053">elem</span><span class="op" id="2650057">.</span><span class="ident" id="2650058">Size</span><span class="op" id="2650062">(</span><span class="op" id="2650063">)</span><span class="op" id="2650064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2650067">}</span>&nbsp;<span class="keyword" id="2650069">else</span>&nbsp;<span class="op" id="2650074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2650078">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650145">s</span><span class="op" id="2650146">.</span><span class="ident" id="2650147">Data</span>&nbsp;<span class="op" id="2650152">=</span>&nbsp;<span class="ident" id="2650154">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2650160">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650164">fl</span>&nbsp;<span class="op" id="2650167">:=</span>&nbsp;<span class="ident" id="2650170">v</span><span class="op" id="2650171">.</span><span class="ident" id="2650172">flag</span><span class="op" id="2650176">&amp;</span><span class="ident" id="2650177">flagRO</span>&nbsp;<span class="op" id="2650184">|</span>&nbsp;<span class="ident" id="2650186">flagIndir</span>&nbsp;<span class="op" id="2650196">|</span>&nbsp;<span class="ident" id="2650198">flag</span><span class="op" id="2650202">(</span><span class="ident" id="2650203">Slice</span><span class="op" id="2650208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650211">return</span>&nbsp;<span class="ident" id="2650218">Value</span><span class="op" id="2650223">{</span><span class="ident" id="2650224">typ</span><span class="op" id="2650227">.</span><span class="ident" id="2650228">common</span><span class="op" id="2650234">(</span><span class="op" id="2650235">)</span><span class="op" id="2650236">,</span>&nbsp;<span class="ident" id="2650238">unsafe</span><span class="op" id="2650244">.</span><span class="ident" id="2650245">Pointer</span><span class="op" id="2650252">(</span><span class="op" id="2650253">&amp;</span><span class="ident" id="2650254">x</span><span class="op" id="2650255">)</span><span class="op" id="2650256">,</span>&nbsp;<span class="ident" id="2650258">fl</span><span class="op" id="2650260">}</span><br>
<span class="lineno"></span><span class="op" id="2650262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2650265">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2650340">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2650423">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2650463">func</span>&nbsp;<span class="op" id="2650468">(</span><span class="ident" id="2650469">v</span>&nbsp;<span class="ident" id="2650471">Value</span><span class="op" id="2650476">)</span>&nbsp;<span class="ident" id="2650478">Slice3</span><span class="op" id="2650484">(</span><span class="ident" id="2650485">i</span><span class="op" id="2650486">,</span>&nbsp;<span class="ident" id="2650488">j</span><span class="op" id="2650489">,</span>&nbsp;<span class="ident" id="2650491">k</span>&nbsp;<span class="builtintype" id="2650493">int</span><span class="op" id="2650496">)</span>&nbsp;<span class="ident" id="2650498">Value</span>&nbsp;<span class="op" id="2650504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650507">var</span>&nbsp;<span class="op" id="2650511">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2650515">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2650520">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650526">typ</span>&nbsp;&nbsp;<span class="op" id="2650531">*</span><span class="ident" id="2650532">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650544">base</span>&nbsp;<span class="ident" id="2650549">unsafe</span><span class="op" id="2650555">.</span><span class="ident" id="2650556">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2650565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650568">switch</span>&nbsp;<span class="ident" id="2650575">kind</span>&nbsp;<span class="op" id="2650580">:=</span>&nbsp;<span class="ident" id="2650583">v</span><span class="op" id="2650584">.</span><span class="ident" id="2650585">kind</span><span class="op" id="2650589">(</span><span class="op" id="2650590">)</span><span class="op" id="2650591">;</span>&nbsp;<span class="ident" id="2650593">kind</span>&nbsp;<span class="op" id="2650598">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650601">default</span><span class="op" id="2650608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2650612">panic</span><span class="op" id="2650617">(</span><span class="op" id="2650618">&amp;</span><span class="ident" id="2650619">ValueError</span><span class="op" id="2650629">{</span><span class="string" id="2650630">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2650652">,</span>&nbsp;<span class="ident" id="2650654">v</span><span class="op" id="2650655">.</span><span class="ident" id="2650656">kind</span><span class="op" id="2650660">(</span><span class="op" id="2650661">)</span><span class="op" id="2650662">}</span><span class="op" id="2650663">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650667">case</span>&nbsp;<span class="ident" id="2650672">Array</span><span class="op" id="2650677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650681">if</span>&nbsp;<span class="ident" id="2650684">v</span><span class="op" id="2650685">.</span><span class="ident" id="2650686">flag</span><span class="op" id="2650690">&amp;</span><span class="ident" id="2650691">flagAddr</span>&nbsp;<span class="op" id="2650700">==</span>&nbsp;<span class="num" id="2650703">0</span>&nbsp;<span class="op" id="2650705">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2650710">panic</span><span class="op" id="2650715">(</span><span class="string" id="2650716">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2650768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2650772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650776">tt</span>&nbsp;<span class="op" id="2650779">:=</span>&nbsp;<span class="op" id="2650782">(</span><span class="op" id="2650783">*</span><span class="ident" id="2650784">arrayType</span><span class="op" id="2650793">)</span><span class="op" id="2650794">(</span><span class="ident" id="2650795">unsafe</span><span class="op" id="2650801">.</span><span class="ident" id="2650802">Pointer</span><span class="op" id="2650809">(</span><span class="ident" id="2650810">v</span><span class="op" id="2650811">.</span><span class="ident" id="2650812">typ</span><span class="op" id="2650815">)</span><span class="op" id="2650816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2650820">cap</span>&nbsp;<span class="op" id="2650824">=</span>&nbsp;<span class="builtintype" id="2650826">int</span><span class="op" id="2650829">(</span><span class="ident" id="2650830">tt</span><span class="op" id="2650832">.</span><span class="builtinfunc" id="2650833">len</span><span class="op" id="2650836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650840">typ</span>&nbsp;<span class="op" id="2650844">=</span>&nbsp;<span class="op" id="2650846">(</span><span class="op" id="2650847">*</span><span class="ident" id="2650848">sliceType</span><span class="op" id="2650857">)</span><span class="op" id="2650858">(</span><span class="ident" id="2650859">unsafe</span><span class="op" id="2650865">.</span><span class="ident" id="2650866">Pointer</span><span class="op" id="2650873">(</span><span class="ident" id="2650874">tt</span><span class="op" id="2650876">.</span><span class="ident" id="2650877">slice</span><span class="op" id="2650882">)</span><span class="op" id="2650883">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650887">base</span>&nbsp;<span class="op" id="2650892">=</span>&nbsp;<span class="ident" id="2650894">v</span><span class="op" id="2650895">.</span><span class="ident" id="2650896">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2650902">case</span>&nbsp;<span class="ident" id="2650907">Slice</span><span class="op" id="2650912">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650916">typ</span>&nbsp;<span class="op" id="2650920">=</span>&nbsp;<span class="op" id="2650922">(</span><span class="op" id="2650923">*</span><span class="ident" id="2650924">sliceType</span><span class="op" id="2650933">)</span><span class="op" id="2650934">(</span><span class="ident" id="2650935">unsafe</span><span class="op" id="2650941">.</span><span class="ident" id="2650942">Pointer</span><span class="op" id="2650949">(</span><span class="ident" id="2650950">v</span><span class="op" id="2650951">.</span><span class="ident" id="2650952">typ</span><span class="op" id="2650955">)</span><span class="op" id="2650956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650960">s</span>&nbsp;<span class="op" id="2650962">:=</span>&nbsp;<span class="op" id="2650965">(</span><span class="op" id="2650966">*</span><span class="ident" id="2650967">sliceHeader</span><span class="op" id="2650978">)</span><span class="op" id="2650979">(</span><span class="ident" id="2650980">v</span><span class="op" id="2650981">.</span><span class="ident" id="2650982">ptr</span><span class="op" id="2650985">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2650989">base</span>&nbsp;<span class="op" id="2650994">=</span>&nbsp;<span class="ident" id="2650996">s</span><span class="op" id="2650997">.</span><span class="ident" id="2650998">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2651005">cap</span>&nbsp;<span class="op" id="2651009">=</span>&nbsp;<span class="ident" id="2651011">s</span><span class="op" id="2651012">.</span><span class="ident" id="2651013">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2651018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651022">if</span>&nbsp;<span class="ident" id="2651025">i</span>&nbsp;<span class="op" id="2651027">&lt;</span>&nbsp;<span class="num" id="2651029">0</span>&nbsp;<span class="op" id="2651031">||</span>&nbsp;<span class="ident" id="2651034">j</span>&nbsp;<span class="op" id="2651036">&lt;</span>&nbsp;<span class="ident" id="2651038">i</span>&nbsp;<span class="op" id="2651040">||</span>&nbsp;<span class="ident" id="2651043">k</span>&nbsp;<span class="op" id="2651045">&lt;</span>&nbsp;<span class="ident" id="2651047">j</span>&nbsp;<span class="op" id="2651049">||</span>&nbsp;<span class="ident" id="2651052">k</span>&nbsp;<span class="op" id="2651054">&gt;</span>&nbsp;<span class="builtinfunc" id="2651056">cap</span>&nbsp;<span class="op" id="2651060">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2651064">panic</span><span class="op" id="2651069">(</span><span class="string" id="2651070">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2651119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2651122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2651126">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2651174">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651210">var</span>&nbsp;<span class="ident" id="2651214">x</span>&nbsp;<span class="op" id="2651216">[</span><span class="op" id="2651217">]</span><span class="ident" id="2651218">unsafe</span><span class="op" id="2651224">.</span><span class="ident" id="2651225">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2651235">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651276">s</span>&nbsp;<span class="op" id="2651278">:=</span>&nbsp;<span class="op" id="2651281">(</span><span class="op" id="2651282">*</span><span class="ident" id="2651283">sliceHeader</span><span class="op" id="2651294">)</span><span class="op" id="2651295">(</span><span class="ident" id="2651296">unsafe</span><span class="op" id="2651302">.</span><span class="ident" id="2651303">Pointer</span><span class="op" id="2651310">(</span><span class="op" id="2651311">&amp;</span><span class="ident" id="2651312">x</span><span class="op" id="2651313">)</span><span class="op" id="2651314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651317">s</span><span class="op" id="2651318">.</span><span class="ident" id="2651319">Len</span>&nbsp;<span class="op" id="2651323">=</span>&nbsp;<span class="ident" id="2651325">j</span>&nbsp;<span class="op" id="2651327">-</span>&nbsp;<span class="ident" id="2651329">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651332">s</span><span class="op" id="2651333">.</span><span class="ident" id="2651334">Cap</span>&nbsp;<span class="op" id="2651338">=</span>&nbsp;<span class="ident" id="2651340">k</span>&nbsp;<span class="op" id="2651342">-</span>&nbsp;<span class="ident" id="2651344">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651347">if</span>&nbsp;<span class="ident" id="2651350">k</span><span class="op" id="2651351">-</span><span class="ident" id="2651352">i</span>&nbsp;<span class="op" id="2651354">&gt;</span>&nbsp;<span class="num" id="2651356">0</span>&nbsp;<span class="op" id="2651358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651362">s</span><span class="op" id="2651363">.</span><span class="ident" id="2651364">Data</span>&nbsp;<span class="op" id="2651369">=</span>&nbsp;<span class="ident" id="2651371">unsafe</span><span class="op" id="2651377">.</span><span class="ident" id="2651378">Pointer</span><span class="op" id="2651385">(</span><span class="builtintype" id="2651386">uintptr</span><span class="op" id="2651393">(</span><span class="ident" id="2651394">base</span><span class="op" id="2651398">)</span>&nbsp;<span class="op" id="2651400">+</span>&nbsp;<span class="builtintype" id="2651402">uintptr</span><span class="op" id="2651409">(</span><span class="ident" id="2651410">i</span><span class="op" id="2651411">)</span><span class="op" id="2651412">*</span><span class="ident" id="2651413">typ</span><span class="op" id="2651416">.</span><span class="ident" id="2651417">elem</span><span class="op" id="2651421">.</span><span class="ident" id="2651422">Size</span><span class="op" id="2651426">(</span><span class="op" id="2651427">)</span><span class="op" id="2651428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2651431">}</span>&nbsp;<span class="keyword" id="2651433">else</span>&nbsp;<span class="op" id="2651438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2651442">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651509">s</span><span class="op" id="2651510">.</span><span class="ident" id="2651511">Data</span>&nbsp;<span class="op" id="2651516">=</span>&nbsp;<span class="ident" id="2651518">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2651524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2651528">fl</span>&nbsp;<span class="op" id="2651531">:=</span>&nbsp;<span class="ident" id="2651534">v</span><span class="op" id="2651535">.</span><span class="ident" id="2651536">flag</span><span class="op" id="2651540">&amp;</span><span class="ident" id="2651541">flagRO</span>&nbsp;<span class="op" id="2651548">|</span>&nbsp;<span class="ident" id="2651550">flagIndir</span>&nbsp;<span class="op" id="2651560">|</span>&nbsp;<span class="ident" id="2651562">flag</span><span class="op" id="2651566">(</span><span class="ident" id="2651567">Slice</span><span class="op" id="2651572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651575">return</span>&nbsp;<span class="ident" id="2651582">Value</span><span class="op" id="2651587">{</span><span class="ident" id="2651588">typ</span><span class="op" id="2651591">.</span><span class="ident" id="2651592">common</span><span class="op" id="2651598">(</span><span class="op" id="2651599">)</span><span class="op" id="2651600">,</span>&nbsp;<span class="ident" id="2651602">unsafe</span><span class="op" id="2651608">.</span><span class="ident" id="2651609">Pointer</span><span class="op" id="2651616">(</span><span class="op" id="2651617">&amp;</span><span class="ident" id="2651618">x</span><span class="op" id="2651619">)</span><span class="op" id="2651620">,</span>&nbsp;<span class="ident" id="2651622">fl</span><span class="op" id="2651624">}</span><br>
<span class="lineno">1590</span><span class="op" id="2651626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2651629">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2651693">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2651763">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2651837">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2651914">func</span>&nbsp;<span class="op" id="2651919">(</span><span class="ident" id="2651920">v</span>&nbsp;<span class="ident" id="2651922">Value</span><span class="op" id="2651927">)</span>&nbsp;<span class="ident" id="2651929">String</span><span class="op" id="2651935">(</span><span class="op" id="2651936">)</span>&nbsp;<span class="builtintype" id="2651938">string</span>&nbsp;<span class="op" id="2651945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651948">switch</span>&nbsp;<span class="ident" id="2651955">k</span>&nbsp;<span class="op" id="2651957">:=</span>&nbsp;<span class="ident" id="2651960">v</span><span class="op" id="2651961">.</span><span class="ident" id="2651962">kind</span><span class="op" id="2651966">(</span><span class="op" id="2651967">)</span><span class="op" id="2651968">;</span>&nbsp;<span class="ident" id="2651970">k</span>&nbsp;<span class="op" id="2651972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651975">case</span>&nbsp;<span class="ident" id="2651980">Invalid</span><span class="op" id="2651987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2651991">return</span>&nbsp;<span class="string" id="2651998">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2652017">case</span>&nbsp;<span class="ident" id="2652022">String</span><span class="op" id="2652028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2652032">return</span>&nbsp;<span class="op" id="2652039">*</span><span class="op" id="2652040">(</span><span class="op" id="2652041">*</span><span class="builtintype" id="2652042">string</span><span class="op" id="2652048">)</span><span class="op" id="2652049">(</span><span class="ident" id="2652050">v</span><span class="op" id="2652051">.</span><span class="ident" id="2652052">ptr</span><span class="op" id="2652055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2652058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2652061">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2652133">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2652189">return</span>&nbsp;<span class="string" id="2652196">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2652200">+</span>&nbsp;<span class="ident" id="2652202">v</span><span class="op" id="2652203">.</span><span class="ident" id="2652204">Type</span><span class="op" id="2652208">(</span><span class="op" id="2652209">)</span><span class="op" id="2652210">.</span><span class="ident" id="2652211">String</span><span class="op" id="2652217">(</span><span class="op" id="2652218">)</span>&nbsp;<span class="op" id="2652220">+</span>&nbsp;<span class="string" id="2652222">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2652232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2652235">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2652313">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2652351">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2652430">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2652517">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2652614">func</span>&nbsp;<span class="op" id="2652619">(</span><span class="ident" id="2652620">v</span>&nbsp;<span class="ident" id="2652622">Value</span><span class="op" id="2652627">)</span>&nbsp;<span class="ident" id="2652629">TryRecv</span><span class="op" id="2652636">(</span><span class="op" id="2652637">)</span>&nbsp;<span class="op" id="2652639">(</span><span class="ident" id="2652640">x</span>&nbsp;<span class="ident" id="2652642">Value</span><span class="op" id="2652647">,</span>&nbsp;<span class="ident" id="2652649">ok</span>&nbsp;<span class="builtintype" id="2652652">bool</span><span class="op" id="2652656">)</span>&nbsp;<span class="op" id="2652658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2652661">v</span><span class="op" id="2652662">.</span><span class="ident" id="2652663">mustBe</span><span class="op" id="2652669">(</span><span class="ident" id="2652670">Chan</span><span class="op" id="2652674">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2652677">v</span><span class="op" id="2652678">.</span><span class="ident" id="2652679">mustBeExported</span><span class="op" id="2652693">(</span><span class="op" id="2652694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2652697">return</span>&nbsp;<span class="ident" id="2652704">v</span><span class="op" id="2652705">.</span><span class="ident" id="2652706">recv</span><span class="op" id="2652710">(</span><span class="ident" id="2652711">true</span><span class="op" id="2652715">)</span><br>
<span class="lineno"></span><span class="op" id="2652717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2652720">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2652787">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2652825">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2652884">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2652957">func</span>&nbsp;<span class="op" id="2652962">(</span><span class="ident" id="2652963">v</span>&nbsp;<span class="ident" id="2652965">Value</span><span class="op" id="2652970">)</span>&nbsp;<span class="ident" id="2652972">TrySend</span><span class="op" id="2652979">(</span><span class="ident" id="2652980">x</span>&nbsp;<span class="ident" id="2652982">Value</span><span class="op" id="2652987">)</span>&nbsp;<span class="builtintype" id="2652989">bool</span>&nbsp;<span class="op" id="2652994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2652997">v</span><span class="op" id="2652998">.</span><span class="ident" id="2652999">mustBe</span><span class="op" id="2653005">(</span><span class="ident" id="2653006">Chan</span><span class="op" id="2653010">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653013">v</span><span class="op" id="2653014">.</span><span class="ident" id="2653015">mustBeExported</span><span class="op" id="2653029">(</span><span class="op" id="2653030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653033">return</span>&nbsp;<span class="ident" id="2653040">v</span><span class="op" id="2653041">.</span><span class="ident" id="2653042">send</span><span class="op" id="2653046">(</span><span class="ident" id="2653047">x</span><span class="op" id="2653048">,</span>&nbsp;<span class="ident" id="2653050">true</span><span class="op" id="2653054">)</span><br>
<span class="lineno"></span><span class="op" id="2653056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2653059">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2653085">func</span>&nbsp;<span class="op" id="2653090">(</span><span class="ident" id="2653091">v</span>&nbsp;<span class="ident" id="2653093">Value</span><span class="op" id="2653098">)</span>&nbsp;<span class="ident" id="2653100">Type</span><span class="op" id="2653104">(</span><span class="op" id="2653105">)</span>&nbsp;<span class="ident" id="2653107">Type</span>&nbsp;<span class="op" id="2653112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653115">f</span>&nbsp;<span class="op" id="2653117">:=</span>&nbsp;<span class="ident" id="2653120">v</span><span class="op" id="2653121">.</span><span class="ident" id="2653122">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653128">if</span>&nbsp;<span class="ident" id="2653131">f</span>&nbsp;<span class="op" id="2653133">==</span>&nbsp;<span class="num" id="2653136">0</span>&nbsp;<span class="op" id="2653138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2653142">panic</span><span class="op" id="2653147">(</span><span class="op" id="2653148">&amp;</span><span class="ident" id="2653149">ValueError</span><span class="op" id="2653159">{</span><span class="string" id="2653160">&#34;reflect.Value.Type&#34;</span><span class="op" id="2653180">,</span>&nbsp;<span class="ident" id="2653182">Invalid</span><span class="op" id="2653189">}</span><span class="op" id="2653190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2653193">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653196">if</span>&nbsp;<span class="ident" id="2653199">f</span><span class="op" id="2653200">&amp;</span><span class="ident" id="2653201">flagMethod</span>&nbsp;<span class="op" id="2653212">==</span>&nbsp;<span class="num" id="2653215">0</span>&nbsp;<span class="op" id="2653217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2653221">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653236">return</span>&nbsp;<span class="ident" id="2653243">v</span><span class="op" id="2653244">.</span><span class="ident" id="2653245">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2653250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2653254">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2653272">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653327">i</span>&nbsp;<span class="op" id="2653329">:=</span>&nbsp;<span class="builtintype" id="2653332">int</span><span class="op" id="2653335">(</span><span class="ident" id="2653336">v</span><span class="op" id="2653337">.</span><span class="ident" id="2653338">flag</span><span class="op" id="2653342">)</span>&nbsp;<span class="op" id="2653344">&gt;&gt;</span>&nbsp;<span class="ident" id="2653347">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653364">if</span>&nbsp;<span class="ident" id="2653367">v</span><span class="op" id="2653368">.</span><span class="ident" id="2653369">typ</span><span class="op" id="2653372">.</span><span class="ident" id="2653373">Kind</span><span class="op" id="2653377">(</span><span class="op" id="2653378">)</span>&nbsp;<span class="op" id="2653380">==</span>&nbsp;<span class="ident" id="2653383">Interface</span>&nbsp;<span class="op" id="2653393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2653397">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653423">tt</span>&nbsp;<span class="op" id="2653426">:=</span>&nbsp;<span class="op" id="2653429">(</span><span class="op" id="2653430">*</span><span class="ident" id="2653431">interfaceType</span><span class="op" id="2653444">)</span><span class="op" id="2653445">(</span><span class="ident" id="2653446">unsafe</span><span class="op" id="2653452">.</span><span class="ident" id="2653453">Pointer</span><span class="op" id="2653460">(</span><span class="ident" id="2653461">v</span><span class="op" id="2653462">.</span><span class="ident" id="2653463">typ</span><span class="op" id="2653466">)</span><span class="op" id="2653467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653471">if</span>&nbsp;<span class="builtintype" id="2653474">uint</span><span class="op" id="2653478">(</span><span class="ident" id="2653479">i</span><span class="op" id="2653480">)</span>&nbsp;<span class="op" id="2653482">&gt;=</span>&nbsp;<span class="builtintype" id="2653485">uint</span><span class="op" id="2653489">(</span><span class="builtinfunc" id="2653490">len</span><span class="op" id="2653493">(</span><span class="ident" id="2653494">tt</span><span class="op" id="2653496">.</span><span class="ident" id="2653497">methods</span><span class="op" id="2653504">)</span><span class="op" id="2653505">)</span>&nbsp;<span class="op" id="2653507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2653512">panic</span><span class="op" id="2653517">(</span><span class="string" id="2653518">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2653565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2653569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653573">m</span>&nbsp;<span class="op" id="2653575">:=</span>&nbsp;<span class="op" id="2653578">&amp;</span><span class="ident" id="2653579">tt</span><span class="op" id="2653581">.</span><span class="ident" id="2653582">methods</span><span class="op" id="2653589">[</span><span class="ident" id="2653590">i</span><span class="op" id="2653591">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653595">return</span>&nbsp;<span class="ident" id="2653602">m</span><span class="op" id="2653603">.</span><span class="ident" id="2653604">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2653609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2653612">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653641">ut</span>&nbsp;<span class="op" id="2653644">:=</span>&nbsp;<span class="ident" id="2653647">v</span><span class="op" id="2653648">.</span><span class="ident" id="2653649">typ</span><span class="op" id="2653652">.</span><span class="ident" id="2653653">uncommon</span><span class="op" id="2653661">(</span><span class="op" id="2653662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653665">if</span>&nbsp;<span class="ident" id="2653668">ut</span>&nbsp;<span class="op" id="2653671">==</span>&nbsp;<span class="ident" id="2653674">nil</span>&nbsp;<span class="op" id="2653678">||</span>&nbsp;<span class="builtintype" id="2653681">uint</span><span class="op" id="2653685">(</span><span class="ident" id="2653686">i</span><span class="op" id="2653687">)</span>&nbsp;<span class="op" id="2653689">&gt;=</span>&nbsp;<span class="builtintype" id="2653692">uint</span><span class="op" id="2653696">(</span><span class="builtinfunc" id="2653697">len</span><span class="op" id="2653700">(</span><span class="ident" id="2653701">ut</span><span class="op" id="2653703">.</span><span class="ident" id="2653704">methods</span><span class="op" id="2653711">)</span><span class="op" id="2653712">)</span>&nbsp;<span class="op" id="2653714">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2653718">panic</span><span class="op" id="2653723">(</span><span class="string" id="2653724">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2653771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2653774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653777">m</span>&nbsp;<span class="op" id="2653779">:=</span>&nbsp;<span class="op" id="2653782">&amp;</span><span class="ident" id="2653783">ut</span><span class="op" id="2653785">.</span><span class="ident" id="2653786">methods</span><span class="op" id="2653793">[</span><span class="ident" id="2653794">i</span><span class="op" id="2653795">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2653798">return</span>&nbsp;<span class="ident" id="2653805">m</span><span class="op" id="2653806">.</span><span class="ident" id="2653807">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2653812">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2653815">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2653866">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2653947">func</span>&nbsp;<span class="op" id="2653952">(</span><span class="ident" id="2653953">v</span>&nbsp;<span class="ident" id="2653955">Value</span><span class="op" id="2653960">)</span>&nbsp;<span class="ident" id="2653962">Uint</span><span class="op" id="2653966">(</span><span class="op" id="2653967">)</span>&nbsp;<span class="ident" id="2653969">uint64</span>&nbsp;<span class="op" id="2653976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653979">k</span>&nbsp;<span class="op" id="2653981">:=</span>&nbsp;<span class="ident" id="2653984">v</span><span class="op" id="2653985">.</span><span class="ident" id="2653986">kind</span><span class="op" id="2653990">(</span><span class="op" id="2653991">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2653994">p</span>&nbsp;<span class="op" id="2653996">:=</span>&nbsp;<span class="ident" id="2653999">v</span><span class="op" id="2654000">.</span><span class="ident" id="2654001">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654006">switch</span>&nbsp;<span class="ident" id="2654013">k</span>&nbsp;<span class="op" id="2654015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654018">case</span>&nbsp;<span class="ident" id="2654023">Uint</span><span class="op" id="2654027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654031">return</span>&nbsp;<span class="ident" id="2654038">uint64</span><span class="op" id="2654044">(</span><span class="op" id="2654045">*</span><span class="op" id="2654046">(</span><span class="op" id="2654047">*</span><span class="builtintype" id="2654048">uint</span><span class="op" id="2654052">)</span><span class="op" id="2654053">(</span><span class="ident" id="2654054">p</span><span class="op" id="2654055">)</span><span class="op" id="2654056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654059">case</span>&nbsp;<span class="ident" id="2654064">Uint8</span><span class="op" id="2654069">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654073">return</span>&nbsp;<span class="ident" id="2654080">uint64</span><span class="op" id="2654086">(</span><span class="op" id="2654087">*</span><span class="op" id="2654088">(</span><span class="op" id="2654089">*</span><span class="builtintype" id="2654090">uint8</span><span class="op" id="2654095">)</span><span class="op" id="2654096">(</span><span class="ident" id="2654097">p</span><span class="op" id="2654098">)</span><span class="op" id="2654099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654102">case</span>&nbsp;<span class="ident" id="2654107">Uint16</span><span class="op" id="2654113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654117">return</span>&nbsp;<span class="ident" id="2654124">uint64</span><span class="op" id="2654130">(</span><span class="op" id="2654131">*</span><span class="op" id="2654132">(</span><span class="op" id="2654133">*</span><span class="builtintype" id="2654134">uint16</span><span class="op" id="2654140">)</span><span class="op" id="2654141">(</span><span class="ident" id="2654142">p</span><span class="op" id="2654143">)</span><span class="op" id="2654144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654147">case</span>&nbsp;<span class="ident" id="2654152">Uint32</span><span class="op" id="2654158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654162">return</span>&nbsp;<span class="ident" id="2654169">uint64</span><span class="op" id="2654175">(</span><span class="op" id="2654176">*</span><span class="op" id="2654177">(</span><span class="op" id="2654178">*</span><span class="builtintype" id="2654179">uint32</span><span class="op" id="2654185">)</span><span class="op" id="2654186">(</span><span class="ident" id="2654187">p</span><span class="op" id="2654188">)</span><span class="op" id="2654189">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654192">case</span>&nbsp;<span class="ident" id="2654197">Uint64</span><span class="op" id="2654203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654207">return</span>&nbsp;<span class="ident" id="2654214">uint64</span><span class="op" id="2654220">(</span><span class="op" id="2654221">*</span><span class="op" id="2654222">(</span><span class="op" id="2654223">*</span><span class="ident" id="2654224">uint64</span><span class="op" id="2654230">)</span><span class="op" id="2654231">(</span><span class="ident" id="2654232">p</span><span class="op" id="2654233">)</span><span class="op" id="2654234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654237">case</span>&nbsp;<span class="ident" id="2654242">Uintptr</span><span class="op" id="2654249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654253">return</span>&nbsp;<span class="ident" id="2654260">uint64</span><span class="op" id="2654266">(</span><span class="op" id="2654267">*</span><span class="op" id="2654268">(</span><span class="op" id="2654269">*</span><span class="builtintype" id="2654270">uintptr</span><span class="op" id="2654277">)</span><span class="op" id="2654278">(</span><span class="ident" id="2654279">p</span><span class="op" id="2654280">)</span><span class="op" id="2654281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2654284">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2654287">panic</span><span class="op" id="2654292">(</span><span class="op" id="2654293">&amp;</span><span class="ident" id="2654294">ValueError</span><span class="op" id="2654304">{</span><span class="string" id="2654305">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2654325">,</span>&nbsp;<span class="ident" id="2654327">v</span><span class="op" id="2654328">.</span><span class="ident" id="2654329">kind</span><span class="op" id="2654333">(</span><span class="op" id="2654334">)</span><span class="op" id="2654335">}</span><span class="op" id="2654336">)</span><br>
<span class="lineno"></span><span class="op" id="2654338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2654341">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2654386">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2654455">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2654493">func</span>&nbsp;<span class="op" id="2654498">(</span><span class="ident" id="2654499">v</span>&nbsp;<span class="ident" id="2654501">Value</span><span class="op" id="2654506">)</span>&nbsp;<span class="ident" id="2654508">UnsafeAddr</span><span class="op" id="2654518">(</span><span class="op" id="2654519">)</span>&nbsp;<span class="builtintype" id="2654521">uintptr</span>&nbsp;<span class="op" id="2654529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2654532">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654552">if</span>&nbsp;<span class="ident" id="2654555">v</span><span class="op" id="2654556">.</span><span class="ident" id="2654557">typ</span>&nbsp;<span class="op" id="2654561">==</span>&nbsp;<span class="ident" id="2654564">nil</span>&nbsp;<span class="op" id="2654568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2654572">panic</span><span class="op" id="2654577">(</span><span class="op" id="2654578">&amp;</span><span class="ident" id="2654579">ValueError</span><span class="op" id="2654589">{</span><span class="string" id="2654590">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2654616">,</span>&nbsp;<span class="ident" id="2654618">Invalid</span><span class="op" id="2654625">}</span><span class="op" id="2654626">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2654629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654632">if</span>&nbsp;<span class="ident" id="2654635">v</span><span class="op" id="2654636">.</span><span class="ident" id="2654637">flag</span><span class="op" id="2654641">&amp;</span><span class="ident" id="2654642">flagAddr</span>&nbsp;<span class="op" id="2654651">==</span>&nbsp;<span class="num" id="2654654">0</span>&nbsp;<span class="op" id="2654656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2654660">panic</span><span class="op" id="2654665">(</span><span class="string" id="2654666">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2654715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2654718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2654721">return</span>&nbsp;<span class="builtintype" id="2654728">uintptr</span><span class="op" id="2654735">(</span><span class="ident" id="2654736">v</span><span class="op" id="2654737">.</span><span class="ident" id="2654738">ptr</span><span class="op" id="2654741">)</span><br>
<span class="lineno">1695</span><span class="op" id="2654743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2654746">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2654805">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2654872">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2654902">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2654970">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2655040">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2655103">type</span>&nbsp;<span class="ident" id="2655108">StringHeader</span>&nbsp;<span class="keyword" id="2655121">struct</span>&nbsp;<span class="op" id="2655128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655131">Data</span>&nbsp;<span class="builtintype" id="2655136">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655145">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2655150">int</span><br>
<span class="lineno"></span><span class="op" id="2655154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2655157">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2655233">type</span>&nbsp;<span class="ident" id="2655238">stringHeader</span>&nbsp;<span class="keyword" id="2655251">struct</span>&nbsp;<span class="op" id="2655258">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655261">Data</span>&nbsp;<span class="ident" id="2655266">unsafe</span><span class="op" id="2655272">.</span><span class="ident" id="2655273">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655282">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2655287">int</span><br>
<span class="lineno"></span><span class="op" id="2655291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2655294">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2655351">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2655418">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2655448">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2655516">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2655586">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2655649">type</span>&nbsp;<span class="ident" id="2655654">SliceHeader</span>&nbsp;<span class="keyword" id="2655666">struct</span>&nbsp;<span class="op" id="2655673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655676">Data</span>&nbsp;<span class="builtintype" id="2655681">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655690">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2655695">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655700">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2655705">int</span><br>
<span class="lineno"></span><span class="op" id="2655709">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2655712">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2655786">type</span>&nbsp;<span class="ident" id="2655791">sliceHeader</span>&nbsp;<span class="keyword" id="2655803">struct</span>&nbsp;<span class="op" id="2655810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655813">Data</span>&nbsp;<span class="ident" id="2655818">unsafe</span><span class="op" id="2655824">.</span><span class="ident" id="2655825">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655834">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2655839">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2655844">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2655849">int</span><br>
<span class="lineno"></span><span class="op" id="2655853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2655856">func</span>&nbsp;<span class="ident" id="2655861">typesMustMatch</span><span class="op" id="2655875">(</span><span class="ident" id="2655876">what</span>&nbsp;<span class="builtintype" id="2655881">string</span><span class="op" id="2655887">,</span>&nbsp;<span class="ident" id="2655889">t1</span><span class="op" id="2655891">,</span>&nbsp;<span class="ident" id="2655893">t2</span>&nbsp;<span class="ident" id="2655896">Type</span><span class="op" id="2655900">)</span>&nbsp;<span class="op" id="2655902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2655905">if</span>&nbsp;<span class="ident" id="2655908">t1</span>&nbsp;<span class="op" id="2655911">!=</span>&nbsp;<span class="ident" id="2655914">t2</span>&nbsp;<span class="op" id="2655917">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2655921">panic</span><span class="op" id="2655926">(</span><span class="ident" id="2655927">what</span>&nbsp;<span class="op" id="2655932">+</span>&nbsp;<span class="string" id="2655934">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2655939">+</span>&nbsp;<span class="ident" id="2655941">t1</span><span class="op" id="2655943">.</span><span class="ident" id="2655944">String</span><span class="op" id="2655950">(</span><span class="op" id="2655951">)</span>&nbsp;<span class="op" id="2655953">+</span>&nbsp;<span class="string" id="2655955">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2655962">+</span>&nbsp;<span class="ident" id="2655964">t2</span><span class="op" id="2655966">.</span><span class="ident" id="2655967">String</span><span class="op" id="2655973">(</span><span class="op" id="2655974">)</span><span class="op" id="2655975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2655978">}</span><br>
<span class="lineno"></span><span class="op" id="2655980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2655983">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2656059">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2656134">func</span>&nbsp;<span class="ident" id="2656139">grow</span><span class="op" id="2656143">(</span><span class="ident" id="2656144">s</span>&nbsp;<span class="ident" id="2656146">Value</span><span class="op" id="2656151">,</span>&nbsp;<span class="ident" id="2656153">extra</span>&nbsp;<span class="builtintype" id="2656159">int</span><span class="op" id="2656162">)</span>&nbsp;<span class="op" id="2656164">(</span><span class="ident" id="2656165">Value</span><span class="op" id="2656170">,</span>&nbsp;<span class="builtintype" id="2656172">int</span><span class="op" id="2656175">,</span>&nbsp;<span class="builtintype" id="2656177">int</span><span class="op" id="2656180">)</span>&nbsp;<span class="op" id="2656182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656185">i0</span>&nbsp;<span class="op" id="2656188">:=</span>&nbsp;<span class="ident" id="2656191">s</span><span class="op" id="2656192">.</span><span class="ident" id="2656193">Len</span><span class="op" id="2656196">(</span><span class="op" id="2656197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656200">i1</span>&nbsp;<span class="op" id="2656203">:=</span>&nbsp;<span class="ident" id="2656206">i0</span>&nbsp;<span class="op" id="2656209">+</span>&nbsp;<span class="ident" id="2656211">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656218">if</span>&nbsp;<span class="ident" id="2656221">i1</span>&nbsp;<span class="op" id="2656224">&lt;</span>&nbsp;<span class="ident" id="2656226">i0</span>&nbsp;<span class="op" id="2656229">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2656233">panic</span><span class="op" id="2656238">(</span><span class="string" id="2656239">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2656271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656277">m</span>&nbsp;<span class="op" id="2656279">:=</span>&nbsp;<span class="ident" id="2656282">s</span><span class="op" id="2656283">.</span><span class="ident" id="2656284">Cap</span><span class="op" id="2656287">(</span><span class="op" id="2656288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656291">if</span>&nbsp;<span class="ident" id="2656294">i1</span>&nbsp;<span class="op" id="2656297">&lt;=</span>&nbsp;<span class="ident" id="2656300">m</span>&nbsp;<span class="op" id="2656302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656306">return</span>&nbsp;<span class="ident" id="2656313">s</span><span class="op" id="2656314">.</span><span class="ident" id="2656315">Slice</span><span class="op" id="2656320">(</span><span class="num" id="2656321">0</span><span class="op" id="2656322">,</span>&nbsp;<span class="ident" id="2656324">i1</span><span class="op" id="2656326">)</span><span class="op" id="2656327">,</span>&nbsp;<span class="ident" id="2656329">i0</span><span class="op" id="2656331">,</span>&nbsp;<span class="ident" id="2656333">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656340">if</span>&nbsp;<span class="ident" id="2656343">m</span>&nbsp;<span class="op" id="2656345">==</span>&nbsp;<span class="num" id="2656348">0</span>&nbsp;<span class="op" id="2656350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656354">m</span>&nbsp;<span class="op" id="2656356">=</span>&nbsp;<span class="ident" id="2656358">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656365">}</span>&nbsp;<span class="keyword" id="2656367">else</span>&nbsp;<span class="op" id="2656372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656376">for</span>&nbsp;<span class="ident" id="2656380">m</span>&nbsp;<span class="op" id="2656382">&lt;</span>&nbsp;<span class="ident" id="2656384">i1</span>&nbsp;<span class="op" id="2656387">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656392">if</span>&nbsp;<span class="ident" id="2656395">i0</span>&nbsp;<span class="op" id="2656398">&lt;</span>&nbsp;<span class="num" id="2656400">1024</span>&nbsp;<span class="op" id="2656405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656411">m</span>&nbsp;<span class="op" id="2656413">+=</span>&nbsp;<span class="ident" id="2656416">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656421">}</span>&nbsp;<span class="keyword" id="2656423">else</span>&nbsp;<span class="op" id="2656428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656434">m</span>&nbsp;<span class="op" id="2656436">+=</span>&nbsp;<span class="ident" id="2656439">m</span>&nbsp;<span class="op" id="2656441">/</span>&nbsp;<span class="num" id="2656443">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656448">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656458">t</span>&nbsp;<span class="op" id="2656460">:=</span>&nbsp;<span class="ident" id="2656463">MakeSlice</span><span class="op" id="2656472">(</span><span class="ident" id="2656473">s</span><span class="op" id="2656474">.</span><span class="ident" id="2656475">Type</span><span class="op" id="2656479">(</span><span class="op" id="2656480">)</span><span class="op" id="2656481">,</span>&nbsp;<span class="ident" id="2656483">i1</span><span class="op" id="2656485">,</span>&nbsp;<span class="ident" id="2656487">m</span><span class="op" id="2656488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656491">Copy</span><span class="op" id="2656495">(</span><span class="ident" id="2656496">t</span><span class="op" id="2656497">,</span>&nbsp;<span class="ident" id="2656499">s</span><span class="op" id="2656500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656503">return</span>&nbsp;<span class="ident" id="2656510">t</span><span class="op" id="2656511">,</span>&nbsp;<span class="ident" id="2656513">i0</span><span class="op" id="2656515">,</span>&nbsp;<span class="ident" id="2656517">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2656520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2656523">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2656600">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2656676">func</span>&nbsp;<span class="ident" id="2656681">Append</span><span class="op" id="2656687">(</span><span class="ident" id="2656688">s</span>&nbsp;<span class="ident" id="2656690">Value</span><span class="op" id="2656695">,</span>&nbsp;<span class="ident" id="2656697">x</span>&nbsp;<span class="op" id="2656699">...</span><span class="ident" id="2656702">Value</span><span class="op" id="2656707">)</span>&nbsp;<span class="ident" id="2656709">Value</span>&nbsp;<span class="op" id="2656715">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656718">s</span><span class="op" id="2656719">.</span><span class="ident" id="2656720">mustBe</span><span class="op" id="2656726">(</span><span class="ident" id="2656727">Slice</span><span class="op" id="2656732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656735">s</span><span class="op" id="2656736">,</span>&nbsp;<span class="ident" id="2656738">i0</span><span class="op" id="2656740">,</span>&nbsp;<span class="ident" id="2656742">i1</span>&nbsp;<span class="op" id="2656745">:=</span>&nbsp;<span class="ident" id="2656748">grow</span><span class="op" id="2656752">(</span><span class="ident" id="2656753">s</span><span class="op" id="2656754">,</span>&nbsp;<span class="builtinfunc" id="2656756">len</span><span class="op" id="2656759">(</span><span class="ident" id="2656760">x</span><span class="op" id="2656761">)</span><span class="op" id="2656762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656765">for</span>&nbsp;<span class="ident" id="2656769">i</span><span class="op" id="2656770">,</span>&nbsp;<span class="ident" id="2656772">j</span>&nbsp;<span class="op" id="2656774">:=</span>&nbsp;<span class="ident" id="2656777">i0</span><span class="op" id="2656779">,</span>&nbsp;<span class="num" id="2656781">0</span><span class="op" id="2656782">;</span>&nbsp;<span class="ident" id="2656784">i</span>&nbsp;<span class="op" id="2656786">&lt;</span>&nbsp;<span class="ident" id="2656788">i1</span><span class="op" id="2656790">;</span>&nbsp;<span class="ident" id="2656792">i</span><span class="op" id="2656793">,</span>&nbsp;<span class="ident" id="2656795">j</span>&nbsp;<span class="op" id="2656797">=</span>&nbsp;<span class="ident" id="2656799">i</span><span class="op" id="2656800">+</span><span class="num" id="2656801">1</span><span class="op" id="2656802">,</span>&nbsp;<span class="ident" id="2656804">j</span><span class="op" id="2656805">+</span><span class="num" id="2656806">1</span>&nbsp;<span class="op" id="2656808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2656812">s</span><span class="op" id="2656813">.</span><span class="ident" id="2656814">Index</span><span class="op" id="2656819">(</span><span class="ident" id="2656820">i</span><span class="op" id="2656821">)</span><span class="op" id="2656822">.</span><span class="ident" id="2656823">Set</span><span class="op" id="2656826">(</span><span class="ident" id="2656827">x</span><span class="op" id="2656828">[</span><span class="ident" id="2656829">j</span><span class="op" id="2656830">]</span><span class="op" id="2656831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2656834">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2656837">return</span>&nbsp;<span class="ident" id="2656844">s</span><br>
<span class="lineno"></span><span class="op" id="2656846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2656849">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2656928">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2656983">func</span>&nbsp;<span class="ident" id="2656988">AppendSlice</span><span class="op" id="2656999">(</span><span class="ident" id="2657000">s</span><span class="op" id="2657001">,</span>&nbsp;<span class="ident" id="2657003">t</span>&nbsp;<span class="ident" id="2657005">Value</span><span class="op" id="2657010">)</span>&nbsp;<span class="ident" id="2657012">Value</span>&nbsp;<span class="op" id="2657018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657021">s</span><span class="op" id="2657022">.</span><span class="ident" id="2657023">mustBe</span><span class="op" id="2657029">(</span><span class="ident" id="2657030">Slice</span><span class="op" id="2657035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657038">t</span><span class="op" id="2657039">.</span><span class="ident" id="2657040">mustBe</span><span class="op" id="2657046">(</span><span class="ident" id="2657047">Slice</span><span class="op" id="2657052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657055">typesMustMatch</span><span class="op" id="2657069">(</span><span class="string" id="2657070">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2657091">,</span>&nbsp;<span class="ident" id="2657093">s</span><span class="op" id="2657094">.</span><span class="ident" id="2657095">Type</span><span class="op" id="2657099">(</span><span class="op" id="2657100">)</span><span class="op" id="2657101">.</span><span class="ident" id="2657102">Elem</span><span class="op" id="2657106">(</span><span class="op" id="2657107">)</span><span class="op" id="2657108">,</span>&nbsp;<span class="ident" id="2657110">t</span><span class="op" id="2657111">.</span><span class="ident" id="2657112">Type</span><span class="op" id="2657116">(</span><span class="op" id="2657117">)</span><span class="op" id="2657118">.</span><span class="ident" id="2657119">Elem</span><span class="op" id="2657123">(</span><span class="op" id="2657124">)</span><span class="op" id="2657125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657128">s</span><span class="op" id="2657129">,</span>&nbsp;<span class="ident" id="2657131">i0</span><span class="op" id="2657133">,</span>&nbsp;<span class="ident" id="2657135">i1</span>&nbsp;<span class="op" id="2657138">:=</span>&nbsp;<span class="ident" id="2657141">grow</span><span class="op" id="2657145">(</span><span class="ident" id="2657146">s</span><span class="op" id="2657147">,</span>&nbsp;<span class="ident" id="2657149">t</span><span class="op" id="2657150">.</span><span class="ident" id="2657151">Len</span><span class="op" id="2657154">(</span><span class="op" id="2657155">)</span><span class="op" id="2657156">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657159">Copy</span><span class="op" id="2657163">(</span><span class="ident" id="2657164">s</span><span class="op" id="2657165">.</span><span class="ident" id="2657166">Slice</span><span class="op" id="2657171">(</span><span class="ident" id="2657172">i0</span><span class="op" id="2657174">,</span>&nbsp;<span class="ident" id="2657176">i1</span><span class="op" id="2657178">)</span><span class="op" id="2657179">,</span>&nbsp;<span class="ident" id="2657181">t</span><span class="op" id="2657182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657185">return</span>&nbsp;<span class="ident" id="2657192">s</span><br>
<span class="lineno"></span><span class="op" id="2657194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2657197">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2657254">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2657304">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2657349">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2657404">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2657452">func</span>&nbsp;<span class="ident" id="2657457">Copy</span><span class="op" id="2657461">(</span><span class="ident" id="2657462">dst</span><span class="op" id="2657465">,</span>&nbsp;<span class="ident" id="2657467">src</span>&nbsp;<span class="ident" id="2657471">Value</span><span class="op" id="2657476">)</span>&nbsp;<span class="builtintype" id="2657478">int</span>&nbsp;<span class="op" id="2657482">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657485">dk</span>&nbsp;<span class="op" id="2657488">:=</span>&nbsp;<span class="ident" id="2657491">dst</span><span class="op" id="2657494">.</span><span class="ident" id="2657495">kind</span><span class="op" id="2657499">(</span><span class="op" id="2657500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657503">if</span>&nbsp;<span class="ident" id="2657506">dk</span>&nbsp;<span class="op" id="2657509">!=</span>&nbsp;<span class="ident" id="2657512">Array</span>&nbsp;<span class="op" id="2657518">&amp;&amp;</span>&nbsp;<span class="ident" id="2657521">dk</span>&nbsp;<span class="op" id="2657524">!=</span>&nbsp;<span class="ident" id="2657527">Slice</span>&nbsp;<span class="op" id="2657533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2657537">panic</span><span class="op" id="2657542">(</span><span class="op" id="2657543">&amp;</span><span class="ident" id="2657544">ValueError</span><span class="op" id="2657554">{</span><span class="string" id="2657555">&#34;reflect.Copy&#34;</span><span class="op" id="2657569">,</span>&nbsp;<span class="ident" id="2657571">dk</span><span class="op" id="2657573">}</span><span class="op" id="2657574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657580">if</span>&nbsp;<span class="ident" id="2657583">dk</span>&nbsp;<span class="op" id="2657586">==</span>&nbsp;<span class="ident" id="2657589">Array</span>&nbsp;<span class="op" id="2657595">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657599">dst</span><span class="op" id="2657602">.</span><span class="ident" id="2657603">mustBeAssignable</span><span class="op" id="2657619">(</span><span class="op" id="2657620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657626">dst</span><span class="op" id="2657629">.</span><span class="ident" id="2657630">mustBeExported</span><span class="op" id="2657644">(</span><span class="op" id="2657645">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657649">sk</span>&nbsp;<span class="op" id="2657652">:=</span>&nbsp;<span class="ident" id="2657655">src</span><span class="op" id="2657658">.</span><span class="ident" id="2657659">kind</span><span class="op" id="2657663">(</span><span class="op" id="2657664">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657667">if</span>&nbsp;<span class="ident" id="2657670">sk</span>&nbsp;<span class="op" id="2657673">!=</span>&nbsp;<span class="ident" id="2657676">Array</span>&nbsp;<span class="op" id="2657682">&amp;&amp;</span>&nbsp;<span class="ident" id="2657685">sk</span>&nbsp;<span class="op" id="2657688">!=</span>&nbsp;<span class="ident" id="2657691">Slice</span>&nbsp;<span class="op" id="2657697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2657701">panic</span><span class="op" id="2657706">(</span><span class="op" id="2657707">&amp;</span><span class="ident" id="2657708">ValueError</span><span class="op" id="2657718">{</span><span class="string" id="2657719">&#34;reflect.Copy&#34;</span><span class="op" id="2657733">,</span>&nbsp;<span class="ident" id="2657735">sk</span><span class="op" id="2657737">}</span><span class="op" id="2657738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657744">src</span><span class="op" id="2657747">.</span><span class="ident" id="2657748">mustBeExported</span><span class="op" id="2657762">(</span><span class="op" id="2657763">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657767">de</span>&nbsp;<span class="op" id="2657770">:=</span>&nbsp;<span class="ident" id="2657773">dst</span><span class="op" id="2657776">.</span><span class="ident" id="2657777">typ</span><span class="op" id="2657780">.</span><span class="ident" id="2657781">Elem</span><span class="op" id="2657785">(</span><span class="op" id="2657786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657789">se</span>&nbsp;<span class="op" id="2657792">:=</span>&nbsp;<span class="ident" id="2657795">src</span><span class="op" id="2657798">.</span><span class="ident" id="2657799">typ</span><span class="op" id="2657802">.</span><span class="ident" id="2657803">Elem</span><span class="op" id="2657807">(</span><span class="op" id="2657808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657811">typesMustMatch</span><span class="op" id="2657825">(</span><span class="string" id="2657826">&#34;reflect.Copy&#34;</span><span class="op" id="2657840">,</span>&nbsp;<span class="ident" id="2657842">de</span><span class="op" id="2657844">,</span>&nbsp;<span class="ident" id="2657846">se</span><span class="op" id="2657848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657852">n</span>&nbsp;<span class="op" id="2657854">:=</span>&nbsp;<span class="ident" id="2657857">dst</span><span class="op" id="2657860">.</span><span class="ident" id="2657861">Len</span><span class="op" id="2657864">(</span><span class="op" id="2657865">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657868">if</span>&nbsp;<span class="ident" id="2657871">sn</span>&nbsp;<span class="op" id="2657874">:=</span>&nbsp;<span class="ident" id="2657877">src</span><span class="op" id="2657880">.</span><span class="ident" id="2657881">Len</span><span class="op" id="2657884">(</span><span class="op" id="2657885">)</span><span class="op" id="2657886">;</span>&nbsp;<span class="ident" id="2657888">n</span>&nbsp;<span class="op" id="2657890">&gt;</span>&nbsp;<span class="ident" id="2657892">sn</span>&nbsp;<span class="op" id="2657895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657899">n</span>&nbsp;<span class="op" id="2657901">=</span>&nbsp;<span class="ident" id="2657903">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2657911">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657933">var</span>&nbsp;<span class="ident" id="2657937">da</span><span class="op" id="2657939">,</span>&nbsp;<span class="ident" id="2657941">sa</span>&nbsp;<span class="ident" id="2657944">unsafe</span><span class="op" id="2657950">.</span><span class="ident" id="2657951">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2657960">if</span>&nbsp;<span class="ident" id="2657963">dk</span>&nbsp;<span class="op" id="2657966">==</span>&nbsp;<span class="ident" id="2657969">Array</span>&nbsp;<span class="op" id="2657975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2657979">da</span>&nbsp;<span class="op" id="2657982">=</span>&nbsp;<span class="ident" id="2657984">dst</span><span class="op" id="2657987">.</span><span class="ident" id="2657988">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2657993">}</span>&nbsp;<span class="keyword" id="2657995">else</span>&nbsp;<span class="op" id="2658000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658004">da</span>&nbsp;<span class="op" id="2658007">=</span>&nbsp;<span class="op" id="2658009">(</span><span class="op" id="2658010">*</span><span class="ident" id="2658011">sliceHeader</span><span class="op" id="2658022">)</span><span class="op" id="2658023">(</span><span class="ident" id="2658024">dst</span><span class="op" id="2658027">.</span><span class="ident" id="2658028">ptr</span><span class="op" id="2658031">)</span><span class="op" id="2658032">.</span><span class="ident" id="2658033">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658042">if</span>&nbsp;<span class="ident" id="2658045">src</span><span class="op" id="2658048">.</span><span class="ident" id="2658049">flag</span><span class="op" id="2658053">&amp;</span><span class="ident" id="2658054">flagIndir</span>&nbsp;<span class="op" id="2658064">==</span>&nbsp;<span class="num" id="2658067">0</span>&nbsp;<span class="op" id="2658069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658073">sa</span>&nbsp;<span class="op" id="2658076">=</span>&nbsp;<span class="ident" id="2658078">unsafe</span><span class="op" id="2658084">.</span><span class="ident" id="2658085">Pointer</span><span class="op" id="2658092">(</span><span class="op" id="2658093">&amp;</span><span class="ident" id="2658094">src</span><span class="op" id="2658097">.</span><span class="ident" id="2658098">ptr</span><span class="op" id="2658101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658104">}</span>&nbsp;<span class="keyword" id="2658106">else</span>&nbsp;<span class="keyword" id="2658111">if</span>&nbsp;<span class="ident" id="2658114">sk</span>&nbsp;<span class="op" id="2658117">==</span>&nbsp;<span class="ident" id="2658120">Array</span>&nbsp;<span class="op" id="2658126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658130">sa</span>&nbsp;<span class="op" id="2658133">=</span>&nbsp;<span class="ident" id="2658135">src</span><span class="op" id="2658138">.</span><span class="ident" id="2658139">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658144">}</span>&nbsp;<span class="keyword" id="2658146">else</span>&nbsp;<span class="op" id="2658151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658155">sa</span>&nbsp;<span class="op" id="2658158">=</span>&nbsp;<span class="op" id="2658160">(</span><span class="op" id="2658161">*</span><span class="ident" id="2658162">sliceHeader</span><span class="op" id="2658173">)</span><span class="op" id="2658174">(</span><span class="ident" id="2658175">src</span><span class="op" id="2658178">.</span><span class="ident" id="2658179">ptr</span><span class="op" id="2658182">)</span><span class="op" id="2658183">.</span><span class="ident" id="2658184">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2658190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658193">memmove</span><span class="op" id="2658200">(</span><span class="ident" id="2658201">da</span><span class="op" id="2658203">,</span>&nbsp;<span class="ident" id="2658205">sa</span><span class="op" id="2658207">,</span>&nbsp;<span class="builtintype" id="2658209">uintptr</span><span class="op" id="2658216">(</span><span class="ident" id="2658217">n</span><span class="op" id="2658218">)</span><span class="op" id="2658219">*</span><span class="ident" id="2658220">de</span><span class="op" id="2658222">.</span><span class="ident" id="2658223">Size</span><span class="op" id="2658227">(</span><span class="op" id="2658228">)</span><span class="op" id="2658229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2658232">return</span>&nbsp;<span class="ident" id="2658239">n</span><br>
<span class="lineno">1835</span><span class="op" id="2658241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2658244">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2658299">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2658354">type</span>&nbsp;<span class="ident" id="2658359">runtimeSelect</span>&nbsp;<span class="keyword" id="2658373">struct</span>&nbsp;<span class="op" id="2658380">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658383">dir</span>&nbsp;<span class="builtintype" id="2658387">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658402">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658429">typ</span>&nbsp;<span class="op" id="2658433">*</span><span class="ident" id="2658434">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2658448">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658465">ch</span>&nbsp;&nbsp;<span class="ident" id="2658469">unsafe</span><span class="op" id="2658475">.</span><span class="ident" id="2658476">Pointer</span>&nbsp;<span class="comment" id="2658484">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2658496">val</span>&nbsp;<span class="ident" id="2658500">unsafe</span><span class="op" id="2658506">.</span><span class="ident" id="2658507">Pointer</span>&nbsp;<span class="comment" id="2658515">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2658575">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2658578">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2658646">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2658718">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2658788">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2658808">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2658822">func</span>&nbsp;<span class="ident" id="2658827">rselect</span><span class="op" id="2658834">(</span><span class="op" id="2658835">[</span><span class="op" id="2658836">]</span><span class="ident" id="2658837">runtimeSelect</span><span class="op" id="2658850">)</span>&nbsp;<span class="op" id="2658852">(</span><span class="ident" id="2658853">chosen</span>&nbsp;<span class="builtintype" id="2658860">int</span><span class="op" id="2658863">,</span>&nbsp;<span class="ident" id="2658865">recvOK</span>&nbsp;<span class="builtintype" id="2658872">bool</span><span class="op" id="2658876">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2658879">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2658950">type</span>&nbsp;<span class="ident" id="2658955">SelectDir</span>&nbsp;<span class="builtintype" id="2658965">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2658970">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2659037">const</span>&nbsp;<span class="op" id="2659043">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2659046">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2659060">SelectDir</span>&nbsp;<span class="op" id="2659070">=</span>&nbsp;<span class="ident" id="2659072">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2659078">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659102">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2659124">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659148">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2659165">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2659189">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2659200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2659203">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2659266">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2659331">//</span><br>
<span class="lineno"></span><span class="comment" id="2659334">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2659398">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2659436">//</span><br>
<span class="lineno"></span><span class="comment" id="2659439">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2659502">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2659593">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2659682">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2659774">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2659790">//</span><br>
<span class="lineno"></span><span class="comment" id="2659793">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2659859">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2659944">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2660035">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2660118">//</span><br>
<span class="lineno"></span><span class="keyword" id="2660121">type</span>&nbsp;<span class="ident" id="2660126">SelectCase</span>&nbsp;<span class="keyword" id="2660137">struct</span>&nbsp;<span class="op" id="2660144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2660147">Dir</span>&nbsp;&nbsp;<span class="ident" id="2660152">SelectDir</span>&nbsp;<span class="comment" id="2660162">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2660184">Chan</span>&nbsp;<span class="ident" id="2660189">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2660199">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2660240">Send</span>&nbsp;<span class="ident" id="2660245">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2660255">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2660283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2660286">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2660356">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2660431">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2660485">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2660557">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2660628">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2660705">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2660777">func</span>&nbsp;<span class="ident" id="2660782">Select</span><span class="op" id="2660788">(</span><span class="ident" id="2660789">cases</span>&nbsp;<span class="op" id="2660795">[</span><span class="op" id="2660796">]</span><span class="ident" id="2660797">SelectCase</span><span class="op" id="2660807">)</span>&nbsp;<span class="op" id="2660809">(</span><span class="ident" id="2660810">chosen</span>&nbsp;<span class="builtintype" id="2660817">int</span><span class="op" id="2660820">,</span>&nbsp;<span class="ident" id="2660822">recv</span>&nbsp;<span class="ident" id="2660827">Value</span><span class="op" id="2660832">,</span>&nbsp;<span class="ident" id="2660834">recvOK</span>&nbsp;<span class="builtintype" id="2660841">bool</span><span class="op" id="2660845">)</span>&nbsp;<span class="op" id="2660847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2660850">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2660924">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2660999">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661057">runcases</span>&nbsp;<span class="op" id="2661066">:=</span>&nbsp;<span class="builtinfunc" id="2661069">make</span><span class="op" id="2661073">(</span><span class="op" id="2661074">[</span><span class="op" id="2661075">]</span><span class="ident" id="2661076">runtimeSelect</span><span class="op" id="2661089">,</span>&nbsp;<span class="builtinfunc" id="2661091">len</span><span class="op" id="2661094">(</span><span class="ident" id="2661095">cases</span><span class="op" id="2661100">)</span><span class="op" id="2661101">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661104">haveDefault</span>&nbsp;<span class="op" id="2661116">:=</span>&nbsp;<span class="ident" id="2661119">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661126">for</span>&nbsp;<span class="ident" id="2661130">i</span><span class="op" id="2661131">,</span>&nbsp;<span class="ident" id="2661133">c</span>&nbsp;<span class="op" id="2661135">:=</span>&nbsp;<span class="keyword" id="2661138">range</span>&nbsp;<span class="ident" id="2661144">cases</span>&nbsp;<span class="op" id="2661150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661154">rc</span>&nbsp;<span class="op" id="2661157">:=</span>&nbsp;<span class="op" id="2661160">&amp;</span><span class="ident" id="2661161">runcases</span><span class="op" id="2661169">[</span><span class="ident" id="2661170">i</span><span class="op" id="2661171">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661175">rc</span><span class="op" id="2661177">.</span><span class="ident" id="2661178">dir</span>&nbsp;<span class="op" id="2661182">=</span>&nbsp;<span class="builtintype" id="2661184">uintptr</span><span class="op" id="2661191">(</span><span class="ident" id="2661192">c</span><span class="op" id="2661193">.</span><span class="ident" id="2661194">Dir</span><span class="op" id="2661197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661201">switch</span>&nbsp;<span class="ident" id="2661208">c</span><span class="op" id="2661209">.</span><span class="ident" id="2661210">Dir</span>&nbsp;<span class="op" id="2661214">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661218">default</span><span class="op" id="2661225">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661230">panic</span><span class="op" id="2661235">(</span><span class="string" id="2661236">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2661265">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661270">case</span>&nbsp;<span class="ident" id="2661275">SelectDefault</span><span class="op" id="2661288">:</span>&nbsp;<span class="comment" id="2661290">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661304">if</span>&nbsp;<span class="ident" id="2661307">haveDefault</span>&nbsp;<span class="op" id="2661319">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661325">panic</span><span class="op" id="2661330">(</span><span class="string" id="2661331">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2661371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661381">haveDefault</span>&nbsp;<span class="op" id="2661393">=</span>&nbsp;<span class="ident" id="2661395">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661403">if</span>&nbsp;<span class="ident" id="2661406">c</span><span class="op" id="2661407">.</span><span class="ident" id="2661408">Chan</span><span class="op" id="2661412">.</span><span class="ident" id="2661413">IsValid</span><span class="op" id="2661420">(</span><span class="op" id="2661421">)</span>&nbsp;<span class="op" id="2661423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661429">panic</span><span class="op" id="2661434">(</span><span class="string" id="2661435">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2661480">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661490">if</span>&nbsp;<span class="ident" id="2661493">c</span><span class="op" id="2661494">.</span><span class="ident" id="2661495">Send</span><span class="op" id="2661499">.</span><span class="ident" id="2661500">IsValid</span><span class="op" id="2661507">(</span><span class="op" id="2661508">)</span>&nbsp;<span class="op" id="2661510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661516">panic</span><span class="op" id="2661521">(</span><span class="string" id="2661522">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2661567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661577">case</span>&nbsp;<span class="ident" id="2661582">SelectSend</span><span class="op" id="2661592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661597">ch</span>&nbsp;<span class="op" id="2661600">:=</span>&nbsp;<span class="ident" id="2661603">c</span><span class="op" id="2661604">.</span><span class="ident" id="2661605">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661613">if</span>&nbsp;<span class="op" id="2661616">!</span><span class="ident" id="2661617">ch</span><span class="op" id="2661619">.</span><span class="ident" id="2661620">IsValid</span><span class="op" id="2661627">(</span><span class="op" id="2661628">)</span>&nbsp;<span class="op" id="2661630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661636">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661645">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661650">ch</span><span class="op" id="2661652">.</span><span class="ident" id="2661653">mustBe</span><span class="op" id="2661659">(</span><span class="ident" id="2661660">Chan</span><span class="op" id="2661664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661669">ch</span><span class="op" id="2661671">.</span><span class="ident" id="2661672">mustBeExported</span><span class="op" id="2661686">(</span><span class="op" id="2661687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661692">tt</span>&nbsp;<span class="op" id="2661695">:=</span>&nbsp;<span class="op" id="2661698">(</span><span class="op" id="2661699">*</span><span class="ident" id="2661700">chanType</span><span class="op" id="2661708">)</span><span class="op" id="2661709">(</span><span class="ident" id="2661710">unsafe</span><span class="op" id="2661716">.</span><span class="ident" id="2661717">Pointer</span><span class="op" id="2661724">(</span><span class="ident" id="2661725">ch</span><span class="op" id="2661727">.</span><span class="ident" id="2661728">typ</span><span class="op" id="2661731">)</span><span class="op" id="2661732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661737">if</span>&nbsp;<span class="ident" id="2661740">ChanDir</span><span class="op" id="2661747">(</span><span class="ident" id="2661748">tt</span><span class="op" id="2661750">.</span><span class="ident" id="2661751">dir</span><span class="op" id="2661754">)</span><span class="op" id="2661755">&amp;</span><span class="ident" id="2661756">SendDir</span>&nbsp;<span class="op" id="2661764">==</span>&nbsp;<span class="num" id="2661767">0</span>&nbsp;<span class="op" id="2661769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661775">panic</span><span class="op" id="2661780">(</span><span class="string" id="2661781">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2661835">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661845">rc</span><span class="op" id="2661847">.</span><span class="ident" id="2661848">ch</span>&nbsp;<span class="op" id="2661851">=</span>&nbsp;<span class="ident" id="2661853">ch</span><span class="op" id="2661855">.</span><span class="ident" id="2661856">pointer</span><span class="op" id="2661863">(</span><span class="op" id="2661864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661869">rc</span><span class="op" id="2661871">.</span><span class="ident" id="2661872">typ</span>&nbsp;<span class="op" id="2661876">=</span>&nbsp;<span class="op" id="2661878">&amp;</span><span class="ident" id="2661879">tt</span><span class="op" id="2661881">.</span><span class="ident" id="2661882">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661891">v</span>&nbsp;<span class="op" id="2661893">:=</span>&nbsp;<span class="ident" id="2661896">c</span><span class="op" id="2661897">.</span><span class="ident" id="2661898">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2661906">if</span>&nbsp;<span class="op" id="2661909">!</span><span class="ident" id="2661910">v</span><span class="op" id="2661911">.</span><span class="ident" id="2661912">IsValid</span><span class="op" id="2661919">(</span><span class="op" id="2661920">)</span>&nbsp;<span class="op" id="2661922">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2661928">panic</span><span class="op" id="2661933">(</span><span class="string" id="2661934">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2661983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2661988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2661993">v</span><span class="op" id="2661994">.</span><span class="ident" id="2661995">mustBeExported</span><span class="op" id="2662009">(</span><span class="op" id="2662010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662015">v</span>&nbsp;<span class="op" id="2662017">=</span>&nbsp;<span class="ident" id="2662019">v</span><span class="op" id="2662020">.</span><span class="ident" id="2662021">assignTo</span><span class="op" id="2662029">(</span><span class="string" id="2662030">&#34;reflect.Select&#34;</span><span class="op" id="2662046">,</span>&nbsp;<span class="ident" id="2662048">tt</span><span class="op" id="2662050">.</span><span class="ident" id="2662051">elem</span><span class="op" id="2662055">,</span>&nbsp;<span class="ident" id="2662057">nil</span><span class="op" id="2662060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662065">if</span>&nbsp;<span class="ident" id="2662068">v</span><span class="op" id="2662069">.</span><span class="ident" id="2662070">flag</span><span class="op" id="2662074">&amp;</span><span class="ident" id="2662075">flagIndir</span>&nbsp;<span class="op" id="2662085">!=</span>&nbsp;<span class="num" id="2662088">0</span>&nbsp;<span class="op" id="2662090">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662096">rc</span><span class="op" id="2662098">.</span><span class="ident" id="2662099">val</span>&nbsp;<span class="op" id="2662103">=</span>&nbsp;<span class="ident" id="2662105">v</span><span class="op" id="2662106">.</span><span class="ident" id="2662107">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662114">}</span>&nbsp;<span class="keyword" id="2662116">else</span>&nbsp;<span class="op" id="2662121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662127">rc</span><span class="op" id="2662129">.</span><span class="ident" id="2662130">val</span>&nbsp;<span class="op" id="2662134">=</span>&nbsp;<span class="ident" id="2662136">unsafe</span><span class="op" id="2662142">.</span><span class="ident" id="2662143">Pointer</span><span class="op" id="2662150">(</span><span class="op" id="2662151">&amp;</span><span class="ident" id="2662152">v</span><span class="op" id="2662153">.</span><span class="ident" id="2662154">ptr</span><span class="op" id="2662157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662167">case</span>&nbsp;<span class="ident" id="2662172">SelectRecv</span><span class="op" id="2662182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662187">if</span>&nbsp;<span class="ident" id="2662190">c</span><span class="op" id="2662191">.</span><span class="ident" id="2662192">Send</span><span class="op" id="2662196">.</span><span class="ident" id="2662197">IsValid</span><span class="op" id="2662204">(</span><span class="op" id="2662205">)</span>&nbsp;<span class="op" id="2662207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2662213">panic</span><span class="op" id="2662218">(</span><span class="string" id="2662219">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2662264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662274">ch</span>&nbsp;<span class="op" id="2662277">:=</span>&nbsp;<span class="ident" id="2662280">c</span><span class="op" id="2662281">.</span><span class="ident" id="2662282">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662290">if</span>&nbsp;<span class="op" id="2662293">!</span><span class="ident" id="2662294">ch</span><span class="op" id="2662296">.</span><span class="ident" id="2662297">IsValid</span><span class="op" id="2662304">(</span><span class="op" id="2662305">)</span>&nbsp;<span class="op" id="2662307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662313">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662327">ch</span><span class="op" id="2662329">.</span><span class="ident" id="2662330">mustBe</span><span class="op" id="2662336">(</span><span class="ident" id="2662337">Chan</span><span class="op" id="2662341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662346">ch</span><span class="op" id="2662348">.</span><span class="ident" id="2662349">mustBeExported</span><span class="op" id="2662363">(</span><span class="op" id="2662364">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662369">tt</span>&nbsp;<span class="op" id="2662372">:=</span>&nbsp;<span class="op" id="2662375">(</span><span class="op" id="2662376">*</span><span class="ident" id="2662377">chanType</span><span class="op" id="2662385">)</span><span class="op" id="2662386">(</span><span class="ident" id="2662387">unsafe</span><span class="op" id="2662393">.</span><span class="ident" id="2662394">Pointer</span><span class="op" id="2662401">(</span><span class="ident" id="2662402">ch</span><span class="op" id="2662404">.</span><span class="ident" id="2662405">typ</span><span class="op" id="2662408">)</span><span class="op" id="2662409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662414">if</span>&nbsp;<span class="ident" id="2662417">ChanDir</span><span class="op" id="2662424">(</span><span class="ident" id="2662425">tt</span><span class="op" id="2662427">.</span><span class="ident" id="2662428">dir</span><span class="op" id="2662431">)</span><span class="op" id="2662432">&amp;</span><span class="ident" id="2662433">RecvDir</span>&nbsp;<span class="op" id="2662441">==</span>&nbsp;<span class="num" id="2662444">0</span>&nbsp;<span class="op" id="2662446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2662452">panic</span><span class="op" id="2662457">(</span><span class="string" id="2662458">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2662512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662522">rc</span><span class="op" id="2662524">.</span><span class="ident" id="2662525">ch</span>&nbsp;<span class="op" id="2662528">=</span>&nbsp;<span class="ident" id="2662530">ch</span><span class="op" id="2662532">.</span><span class="ident" id="2662533">pointer</span><span class="op" id="2662540">(</span><span class="op" id="2662541">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662546">rc</span><span class="op" id="2662548">.</span><span class="ident" id="2662549">typ</span>&nbsp;<span class="op" id="2662553">=</span>&nbsp;<span class="op" id="2662555">&amp;</span><span class="ident" id="2662556">tt</span><span class="op" id="2662558">.</span><span class="ident" id="2662559">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662568">rc</span><span class="op" id="2662570">.</span><span class="ident" id="2662571">val</span>&nbsp;<span class="op" id="2662575">=</span>&nbsp;<span class="ident" id="2662577">unsafe_New</span><span class="op" id="2662587">(</span><span class="ident" id="2662588">tt</span><span class="op" id="2662590">.</span><span class="ident" id="2662591">elem</span><span class="op" id="2662595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662606">chosen</span><span class="op" id="2662612">,</span>&nbsp;<span class="ident" id="2662614">recvOK</span>&nbsp;<span class="op" id="2662621">=</span>&nbsp;<span class="ident" id="2662623">rselect</span><span class="op" id="2662630">(</span><span class="ident" id="2662631">runcases</span><span class="op" id="2662639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662642">if</span>&nbsp;<span class="ident" id="2662645">runcases</span><span class="op" id="2662653">[</span><span class="ident" id="2662654">chosen</span><span class="op" id="2662660">]</span><span class="op" id="2662661">.</span><span class="ident" id="2662662">dir</span>&nbsp;<span class="op" id="2662666">==</span>&nbsp;<span class="builtintype" id="2662669">uintptr</span><span class="op" id="2662676">(</span><span class="ident" id="2662677">SelectRecv</span><span class="op" id="2662687">)</span>&nbsp;<span class="op" id="2662689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662693">tt</span>&nbsp;<span class="op" id="2662696">:=</span>&nbsp;<span class="op" id="2662699">(</span><span class="op" id="2662700">*</span><span class="ident" id="2662701">chanType</span><span class="op" id="2662709">)</span><span class="op" id="2662710">(</span><span class="ident" id="2662711">unsafe</span><span class="op" id="2662717">.</span><span class="ident" id="2662718">Pointer</span><span class="op" id="2662725">(</span><span class="ident" id="2662726">runcases</span><span class="op" id="2662734">[</span><span class="ident" id="2662735">chosen</span><span class="op" id="2662741">]</span><span class="op" id="2662742">.</span><span class="ident" id="2662743">typ</span><span class="op" id="2662746">)</span><span class="op" id="2662747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662751">t</span>&nbsp;<span class="op" id="2662753">:=</span>&nbsp;<span class="ident" id="2662756">tt</span><span class="op" id="2662758">.</span><span class="ident" id="2662759">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662766">p</span>&nbsp;<span class="op" id="2662768">:=</span>&nbsp;<span class="ident" id="2662771">runcases</span><span class="op" id="2662779">[</span><span class="ident" id="2662780">chosen</span><span class="op" id="2662786">]</span><span class="op" id="2662787">.</span><span class="ident" id="2662788">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662794">fl</span>&nbsp;<span class="op" id="2662797">:=</span>&nbsp;<span class="ident" id="2662800">flag</span><span class="op" id="2662804">(</span><span class="ident" id="2662805">t</span><span class="op" id="2662806">.</span><span class="ident" id="2662807">Kind</span><span class="op" id="2662811">(</span><span class="op" id="2662812">)</span><span class="op" id="2662813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662817">if</span>&nbsp;<span class="ident" id="2662820">ifaceIndir</span><span class="op" id="2662830">(</span><span class="ident" id="2662831">t</span><span class="op" id="2662832">)</span>&nbsp;<span class="op" id="2662834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662839">recv</span>&nbsp;<span class="op" id="2662844">=</span>&nbsp;<span class="ident" id="2662846">Value</span><span class="op" id="2662851">{</span><span class="ident" id="2662852">t</span><span class="op" id="2662853">,</span>&nbsp;<span class="ident" id="2662855">p</span><span class="op" id="2662856">,</span>&nbsp;<span class="ident" id="2662858">fl</span>&nbsp;<span class="op" id="2662861">|</span>&nbsp;<span class="ident" id="2662863">flagIndir</span><span class="op" id="2662872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662876">}</span>&nbsp;<span class="keyword" id="2662878">else</span>&nbsp;<span class="op" id="2662883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2662888">recv</span>&nbsp;<span class="op" id="2662893">=</span>&nbsp;<span class="ident" id="2662895">Value</span><span class="op" id="2662900">{</span><span class="ident" id="2662901">t</span><span class="op" id="2662902">,</span>&nbsp;<span class="op" id="2662904">*</span><span class="op" id="2662905">(</span><span class="op" id="2662906">*</span><span class="ident" id="2662907">unsafe</span><span class="op" id="2662913">.</span><span class="ident" id="2662914">Pointer</span><span class="op" id="2662921">)</span><span class="op" id="2662922">(</span><span class="ident" id="2662923">p</span><span class="op" id="2662924">)</span><span class="op" id="2662925">,</span>&nbsp;<span class="ident" id="2662927">fl</span><span class="op" id="2662929">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2662936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2662939">return</span>&nbsp;<span class="ident" id="2662946">chosen</span><span class="op" id="2662952">,</span>&nbsp;<span class="ident" id="2662954">recv</span><span class="op" id="2662958">,</span>&nbsp;<span class="ident" id="2662960">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2662967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2662970">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2662994">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2663028">func</span>&nbsp;<span class="ident" id="2663033">unsafe_New</span><span class="op" id="2663043">(</span><span class="op" id="2663044">*</span><span class="ident" id="2663045">rtype</span><span class="op" id="2663050">)</span>&nbsp;<span class="ident" id="2663052">unsafe</span><span class="op" id="2663058">.</span><span class="ident" id="2663059">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2663067">func</span>&nbsp;<span class="ident" id="2663072">unsafe_NewArray</span><span class="op" id="2663087">(</span><span class="op" id="2663088">*</span><span class="ident" id="2663089">rtype</span><span class="op" id="2663094">,</span>&nbsp;<span class="builtintype" id="2663096">int</span><span class="op" id="2663099">)</span>&nbsp;<span class="ident" id="2663101">unsafe</span><span class="op" id="2663107">.</span><span class="ident" id="2663108">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2663117">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2663173">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2663228">func</span>&nbsp;<span class="ident" id="2663233">MakeSlice</span><span class="op" id="2663242">(</span><span class="ident" id="2663243">typ</span>&nbsp;<span class="ident" id="2663247">Type</span><span class="op" id="2663251">,</span>&nbsp;<span class="builtinfunc" id="2663253">len</span><span class="op" id="2663256">,</span>&nbsp;<span class="builtinfunc" id="2663258">cap</span>&nbsp;<span class="builtintype" id="2663262">int</span><span class="op" id="2663265">)</span>&nbsp;<span class="ident" id="2663267">Value</span>&nbsp;<span class="op" id="2663273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663276">if</span>&nbsp;<span class="ident" id="2663279">typ</span><span class="op" id="2663282">.</span><span class="ident" id="2663283">Kind</span><span class="op" id="2663287">(</span><span class="op" id="2663288">)</span>&nbsp;<span class="op" id="2663290">!=</span>&nbsp;<span class="ident" id="2663293">Slice</span>&nbsp;<span class="op" id="2663299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663303">panic</span><span class="op" id="2663308">(</span><span class="string" id="2663309">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2663346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663352">if</span>&nbsp;<span class="builtinfunc" id="2663355">len</span>&nbsp;<span class="op" id="2663359">&lt;</span>&nbsp;<span class="num" id="2663361">0</span>&nbsp;<span class="op" id="2663363">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663367">panic</span><span class="op" id="2663372">(</span><span class="string" id="2663373">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2663406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663412">if</span>&nbsp;<span class="builtinfunc" id="2663415">cap</span>&nbsp;<span class="op" id="2663419">&lt;</span>&nbsp;<span class="num" id="2663421">0</span>&nbsp;<span class="op" id="2663423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663427">panic</span><span class="op" id="2663432">(</span><span class="string" id="2663433">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2663466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663469">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663472">if</span>&nbsp;<span class="builtinfunc" id="2663475">len</span>&nbsp;<span class="op" id="2663479">&gt;</span>&nbsp;<span class="builtinfunc" id="2663481">cap</span>&nbsp;<span class="op" id="2663485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663489">panic</span><span class="op" id="2663494">(</span><span class="string" id="2663495">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2663525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2663532">s</span>&nbsp;<span class="op" id="2663534">:=</span>&nbsp;<span class="ident" id="2663537">sliceHeader</span><span class="op" id="2663548">{</span><span class="ident" id="2663549">unsafe_NewArray</span><span class="op" id="2663564">(</span><span class="ident" id="2663565">typ</span><span class="op" id="2663568">.</span><span class="ident" id="2663569">Elem</span><span class="op" id="2663573">(</span><span class="op" id="2663574">)</span><span class="op" id="2663575">.</span><span class="op" id="2663576">(</span><span class="op" id="2663577">*</span><span class="ident" id="2663578">rtype</span><span class="op" id="2663583">)</span><span class="op" id="2663584">,</span>&nbsp;<span class="builtinfunc" id="2663586">cap</span><span class="op" id="2663589">)</span><span class="op" id="2663590">,</span>&nbsp;<span class="builtinfunc" id="2663592">len</span><span class="op" id="2663595">,</span>&nbsp;<span class="builtinfunc" id="2663597">cap</span><span class="op" id="2663600">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663603">return</span>&nbsp;<span class="ident" id="2663610">Value</span><span class="op" id="2663615">{</span><span class="ident" id="2663616">typ</span><span class="op" id="2663619">.</span><span class="ident" id="2663620">common</span><span class="op" id="2663626">(</span><span class="op" id="2663627">)</span><span class="op" id="2663628">,</span>&nbsp;<span class="ident" id="2663630">unsafe</span><span class="op" id="2663636">.</span><span class="ident" id="2663637">Pointer</span><span class="op" id="2663644">(</span><span class="op" id="2663645">&amp;</span><span class="ident" id="2663646">s</span><span class="op" id="2663647">)</span><span class="op" id="2663648">,</span>&nbsp;<span class="ident" id="2663650">flagIndir</span>&nbsp;<span class="op" id="2663660">|</span>&nbsp;<span class="ident" id="2663662">flag</span><span class="op" id="2663666">(</span><span class="ident" id="2663667">Slice</span><span class="op" id="2663672">)</span><span class="op" id="2663673">}</span><br>
<span class="lineno"></span><span class="op" id="2663675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2663678">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2663753">func</span>&nbsp;<span class="ident" id="2663758">MakeChan</span><span class="op" id="2663766">(</span><span class="ident" id="2663767">typ</span>&nbsp;<span class="ident" id="2663771">Type</span><span class="op" id="2663775">,</span>&nbsp;<span class="ident" id="2663777">buffer</span>&nbsp;<span class="builtintype" id="2663784">int</span><span class="op" id="2663787">)</span>&nbsp;<span class="ident" id="2663789">Value</span>&nbsp;<span class="op" id="2663795">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663798">if</span>&nbsp;<span class="ident" id="2663801">typ</span><span class="op" id="2663804">.</span><span class="ident" id="2663805">Kind</span><span class="op" id="2663809">(</span><span class="op" id="2663810">)</span>&nbsp;<span class="op" id="2663812">!=</span>&nbsp;<span class="ident" id="2663815">Chan</span>&nbsp;<span class="op" id="2663820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663824">panic</span><span class="op" id="2663829">(</span><span class="string" id="2663830">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2663865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663871">if</span>&nbsp;<span class="ident" id="2663874">buffer</span>&nbsp;<span class="op" id="2663881">&lt;</span>&nbsp;<span class="num" id="2663883">0</span>&nbsp;<span class="op" id="2663885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663889">panic</span><span class="op" id="2663894">(</span><span class="string" id="2663895">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2663935">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2663938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2663941">if</span>&nbsp;<span class="ident" id="2663944">typ</span><span class="op" id="2663947">.</span><span class="ident" id="2663948">ChanDir</span><span class="op" id="2663955">(</span><span class="op" id="2663956">)</span>&nbsp;<span class="op" id="2663958">!=</span>&nbsp;<span class="ident" id="2663961">BothDir</span>&nbsp;<span class="op" id="2663969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2663973">panic</span><span class="op" id="2663978">(</span><span class="string" id="2663979">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2664026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2664029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2664032">ch</span>&nbsp;<span class="op" id="2664035">:=</span>&nbsp;<span class="ident" id="2664038">makechan</span><span class="op" id="2664046">(</span><span class="ident" id="2664047">typ</span><span class="op" id="2664050">.</span><span class="op" id="2664051">(</span><span class="op" id="2664052">*</span><span class="ident" id="2664053">rtype</span><span class="op" id="2664058">)</span><span class="op" id="2664059">,</span>&nbsp;<span class="ident" id="2664061">uint64</span><span class="op" id="2664067">(</span><span class="ident" id="2664068">buffer</span><span class="op" id="2664074">)</span><span class="op" id="2664075">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664078">return</span>&nbsp;<span class="ident" id="2664085">Value</span><span class="op" id="2664090">{</span><span class="ident" id="2664091">typ</span><span class="op" id="2664094">.</span><span class="ident" id="2664095">common</span><span class="op" id="2664101">(</span><span class="op" id="2664102">)</span><span class="op" id="2664103">,</span>&nbsp;<span class="ident" id="2664105">ch</span><span class="op" id="2664107">,</span>&nbsp;<span class="ident" id="2664109">flag</span><span class="op" id="2664113">(</span><span class="ident" id="2664114">Chan</span><span class="op" id="2664118">)</span><span class="op" id="2664119">}</span><br>
<span class="lineno"></span><span class="op" id="2664121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2664124">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2664176">func</span>&nbsp;<span class="ident" id="2664181">MakeMap</span><span class="op" id="2664188">(</span><span class="ident" id="2664189">typ</span>&nbsp;<span class="ident" id="2664193">Type</span><span class="op" id="2664197">)</span>&nbsp;<span class="ident" id="2664199">Value</span>&nbsp;<span class="op" id="2664205">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664208">if</span>&nbsp;<span class="ident" id="2664211">typ</span><span class="op" id="2664214">.</span><span class="ident" id="2664215">Kind</span><span class="op" id="2664219">(</span><span class="op" id="2664220">)</span>&nbsp;<span class="op" id="2664222">!=</span>&nbsp;<span class="ident" id="2664225">Map</span>&nbsp;<span class="op" id="2664229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2664233">panic</span><span class="op" id="2664238">(</span><span class="string" id="2664239">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2664272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2664275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2664278">m</span>&nbsp;<span class="op" id="2664280">:=</span>&nbsp;<span class="ident" id="2664283">makemap</span><span class="op" id="2664290">(</span><span class="ident" id="2664291">typ</span><span class="op" id="2664294">.</span><span class="op" id="2664295">(</span><span class="op" id="2664296">*</span><span class="ident" id="2664297">rtype</span><span class="op" id="2664302">)</span><span class="op" id="2664303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664306">return</span>&nbsp;<span class="ident" id="2664313">Value</span><span class="op" id="2664318">{</span><span class="ident" id="2664319">typ</span><span class="op" id="2664322">.</span><span class="ident" id="2664323">common</span><span class="op" id="2664329">(</span><span class="op" id="2664330">)</span><span class="op" id="2664331">,</span>&nbsp;<span class="ident" id="2664333">m</span><span class="op" id="2664334">,</span>&nbsp;<span class="ident" id="2664336">flag</span><span class="op" id="2664340">(</span><span class="ident" id="2664341">Map</span><span class="op" id="2664344">)</span><span class="op" id="2664345">}</span><br>
<span class="lineno">2030</span><span class="op" id="2664347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2664350">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2664398">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2664455">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2664501">func</span>&nbsp;<span class="ident" id="2664506">Indirect</span><span class="op" id="2664514">(</span><span class="ident" id="2664515">v</span>&nbsp;<span class="ident" id="2664517">Value</span><span class="op" id="2664522">)</span>&nbsp;<span class="ident" id="2664524">Value</span>&nbsp;<span class="op" id="2664530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664533">if</span>&nbsp;<span class="ident" id="2664536">v</span><span class="op" id="2664537">.</span><span class="ident" id="2664538">Kind</span><span class="op" id="2664542">(</span><span class="op" id="2664543">)</span>&nbsp;<span class="op" id="2664545">!=</span>&nbsp;<span class="ident" id="2664548">Ptr</span>&nbsp;<span class="op" id="2664552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664556">return</span>&nbsp;<span class="ident" id="2664563">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2664566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664569">return</span>&nbsp;<span class="ident" id="2664576">v</span><span class="op" id="2664577">.</span><span class="ident" id="2664578">Elem</span><span class="op" id="2664582">(</span><span class="op" id="2664583">)</span><br>
<span class="lineno">2040</span><span class="op" id="2664585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2664588">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2664653">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2664721">func</span>&nbsp;<span class="ident" id="2664726">ValueOf</span><span class="op" id="2664733">(</span><span class="ident" id="2664734">i</span>&nbsp;<span class="keyword" id="2664736">interface</span><span class="op" id="2664745">{</span><span class="op" id="2664746">}</span><span class="op" id="2664747">)</span>&nbsp;<span class="ident" id="2664749">Value</span>&nbsp;<span class="op" id="2664755">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664758">if</span>&nbsp;<span class="ident" id="2664761">i</span>&nbsp;<span class="op" id="2664763">==</span>&nbsp;<span class="ident" id="2664766">nil</span>&nbsp;<span class="op" id="2664770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2664774">return</span>&nbsp;<span class="ident" id="2664781">Value</span><span class="op" id="2664786">{</span><span class="op" id="2664787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2664790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2664794">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2664839">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2664893">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2664941">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2664984">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2665026">escapes</span><span class="op" id="2665033">(</span><span class="ident" id="2665034">i</span><span class="op" id="2665035">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665039">return</span>&nbsp;<span class="ident" id="2665046">unpackEface</span><span class="op" id="2665057">(</span><span class="ident" id="2665058">i</span><span class="op" id="2665059">)</span><br>
<span class="lineno"></span><span class="op" id="2665061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2665064">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2665140">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2665208">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2665245">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2665321">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2665380">func</span>&nbsp;<span class="ident" id="2665385">Zero</span><span class="op" id="2665389">(</span><span class="ident" id="2665390">typ</span>&nbsp;<span class="ident" id="2665394">Type</span><span class="op" id="2665398">)</span>&nbsp;<span class="ident" id="2665400">Value</span>&nbsp;<span class="op" id="2665406">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665409">if</span>&nbsp;<span class="ident" id="2665412">typ</span>&nbsp;<span class="op" id="2665416">==</span>&nbsp;<span class="ident" id="2665419">nil</span>&nbsp;<span class="op" id="2665423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2665427">panic</span><span class="op" id="2665432">(</span><span class="string" id="2665433">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2665453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2665456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2665459">t</span>&nbsp;<span class="op" id="2665461">:=</span>&nbsp;<span class="ident" id="2665464">typ</span><span class="op" id="2665467">.</span><span class="ident" id="2665468">common</span><span class="op" id="2665474">(</span><span class="op" id="2665475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2665478">fl</span>&nbsp;<span class="op" id="2665481">:=</span>&nbsp;<span class="ident" id="2665484">flag</span><span class="op" id="2665488">(</span><span class="ident" id="2665489">t</span><span class="op" id="2665490">.</span><span class="ident" id="2665491">Kind</span><span class="op" id="2665495">(</span><span class="op" id="2665496">)</span><span class="op" id="2665497">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665500">if</span>&nbsp;<span class="ident" id="2665503">ifaceIndir</span><span class="op" id="2665513">(</span><span class="ident" id="2665514">t</span><span class="op" id="2665515">)</span>&nbsp;<span class="op" id="2665517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665521">return</span>&nbsp;<span class="ident" id="2665528">Value</span><span class="op" id="2665533">{</span><span class="ident" id="2665534">t</span><span class="op" id="2665535">,</span>&nbsp;<span class="ident" id="2665537">unsafe_New</span><span class="op" id="2665547">(</span><span class="ident" id="2665548">typ</span><span class="op" id="2665551">.</span><span class="op" id="2665552">(</span><span class="op" id="2665553">*</span><span class="ident" id="2665554">rtype</span><span class="op" id="2665559">)</span><span class="op" id="2665560">)</span><span class="op" id="2665561">,</span>&nbsp;<span class="ident" id="2665563">fl</span>&nbsp;<span class="op" id="2665566">|</span>&nbsp;<span class="ident" id="2665568">flagIndir</span><span class="op" id="2665577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2665580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665583">return</span>&nbsp;<span class="ident" id="2665590">Value</span><span class="op" id="2665595">{</span><span class="ident" id="2665596">t</span><span class="op" id="2665597">,</span>&nbsp;<span class="ident" id="2665599">nil</span><span class="op" id="2665602">,</span>&nbsp;<span class="ident" id="2665604">fl</span><span class="op" id="2665606">}</span><br>
<span class="lineno"></span><span class="op" id="2665608">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2665611">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2665677">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2665755">func</span>&nbsp;<span class="ident" id="2665760">New</span><span class="op" id="2665763">(</span><span class="ident" id="2665764">typ</span>&nbsp;<span class="ident" id="2665768">Type</span><span class="op" id="2665772">)</span>&nbsp;<span class="ident" id="2665774">Value</span>&nbsp;<span class="op" id="2665780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665783">if</span>&nbsp;<span class="ident" id="2665786">typ</span>&nbsp;<span class="op" id="2665790">==</span>&nbsp;<span class="ident" id="2665793">nil</span>&nbsp;<span class="op" id="2665797">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2665801">panic</span><span class="op" id="2665806">(</span><span class="string" id="2665807">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2665826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2665829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2665832">ptr</span>&nbsp;<span class="op" id="2665836">:=</span>&nbsp;<span class="ident" id="2665839">unsafe_New</span><span class="op" id="2665849">(</span><span class="ident" id="2665850">typ</span><span class="op" id="2665853">.</span><span class="op" id="2665854">(</span><span class="op" id="2665855">*</span><span class="ident" id="2665856">rtype</span><span class="op" id="2665861">)</span><span class="op" id="2665862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2665865">fl</span>&nbsp;<span class="op" id="2665868">:=</span>&nbsp;<span class="ident" id="2665871">flag</span><span class="op" id="2665875">(</span><span class="ident" id="2665876">Ptr</span><span class="op" id="2665879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2665882">return</span>&nbsp;<span class="ident" id="2665889">Value</span><span class="op" id="2665894">{</span><span class="ident" id="2665895">typ</span><span class="op" id="2665898">.</span><span class="ident" id="2665899">common</span><span class="op" id="2665905">(</span><span class="op" id="2665906">)</span><span class="op" id="2665907">.</span><span class="ident" id="2665908">ptrTo</span><span class="op" id="2665913">(</span><span class="op" id="2665914">)</span><span class="op" id="2665915">,</span>&nbsp;<span class="ident" id="2665917">ptr</span><span class="op" id="2665920">,</span>&nbsp;<span class="ident" id="2665922">fl</span><span class="op" id="2665924">}</span><br>
<span class="lineno">2085</span><span class="op" id="2665926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2665929">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2665995">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2666039">func</span>&nbsp;<span class="ident" id="2666044">NewAt</span><span class="op" id="2666049">(</span><span class="ident" id="2666050">typ</span>&nbsp;<span class="ident" id="2666054">Type</span><span class="op" id="2666058">,</span>&nbsp;<span class="ident" id="2666060">p</span>&nbsp;<span class="ident" id="2666062">unsafe</span><span class="op" id="2666068">.</span><span class="ident" id="2666069">Pointer</span><span class="op" id="2666076">)</span>&nbsp;<span class="ident" id="2666078">Value</span>&nbsp;<span class="op" id="2666084">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666087">fl</span>&nbsp;<span class="op" id="2666090">:=</span>&nbsp;<span class="ident" id="2666093">flag</span><span class="op" id="2666097">(</span><span class="ident" id="2666098">Ptr</span><span class="op" id="2666101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666104">return</span>&nbsp;<span class="ident" id="2666111">Value</span><span class="op" id="2666116">{</span><span class="ident" id="2666117">typ</span><span class="op" id="2666120">.</span><span class="ident" id="2666121">common</span><span class="op" id="2666127">(</span><span class="op" id="2666128">)</span><span class="op" id="2666129">.</span><span class="ident" id="2666130">ptrTo</span><span class="op" id="2666135">(</span><span class="op" id="2666136">)</span><span class="op" id="2666137">,</span>&nbsp;<span class="ident" id="2666139">p</span><span class="op" id="2666140">,</span>&nbsp;<span class="ident" id="2666142">fl</span><span class="op" id="2666144">}</span><br>
<span class="lineno"></span><span class="op" id="2666146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2666149">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2666217">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2666261">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2666347">func</span>&nbsp;<span class="op" id="2666352">(</span><span class="ident" id="2666353">v</span>&nbsp;<span class="ident" id="2666355">Value</span><span class="op" id="2666360">)</span>&nbsp;<span class="ident" id="2666362">assignTo</span><span class="op" id="2666370">(</span><span class="ident" id="2666371">context</span>&nbsp;<span class="builtintype" id="2666379">string</span><span class="op" id="2666385">,</span>&nbsp;<span class="ident" id="2666387">dst</span>&nbsp;<span class="op" id="2666391">*</span><span class="ident" id="2666392">rtype</span><span class="op" id="2666397">,</span>&nbsp;<span class="ident" id="2666399">target</span>&nbsp;<span class="ident" id="2666406">unsafe</span><span class="op" id="2666412">.</span><span class="ident" id="2666413">Pointer</span><span class="op" id="2666420">)</span>&nbsp;<span class="ident" id="2666422">Value</span>&nbsp;<span class="op" id="2666428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666431">if</span>&nbsp;<span class="ident" id="2666434">v</span><span class="op" id="2666435">.</span><span class="ident" id="2666436">flag</span><span class="op" id="2666440">&amp;</span><span class="ident" id="2666441">flagMethod</span>&nbsp;<span class="op" id="2666452">!=</span>&nbsp;<span class="num" id="2666455">0</span>&nbsp;<span class="op" id="2666457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666461">v</span>&nbsp;<span class="op" id="2666463">=</span>&nbsp;<span class="ident" id="2666465">makeMethodValue</span><span class="op" id="2666480">(</span><span class="ident" id="2666481">context</span><span class="op" id="2666488">,</span>&nbsp;<span class="ident" id="2666490">v</span><span class="op" id="2666491">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2666494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666498">switch</span>&nbsp;<span class="op" id="2666505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666508">case</span>&nbsp;<span class="ident" id="2666513">directlyAssignable</span><span class="op" id="2666531">(</span><span class="ident" id="2666532">dst</span><span class="op" id="2666535">,</span>&nbsp;<span class="ident" id="2666537">v</span><span class="op" id="2666538">.</span><span class="ident" id="2666539">typ</span><span class="op" id="2666542">)</span><span class="op" id="2666543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2666547">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2666587">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666629">v</span><span class="op" id="2666630">.</span><span class="ident" id="2666631">typ</span>&nbsp;<span class="op" id="2666635">=</span>&nbsp;<span class="ident" id="2666637">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666643">fl</span>&nbsp;<span class="op" id="2666646">:=</span>&nbsp;<span class="ident" id="2666649">v</span><span class="op" id="2666650">.</span><span class="ident" id="2666651">flag</span>&nbsp;<span class="op" id="2666656">&amp;</span>&nbsp;<span class="op" id="2666658">(</span><span class="ident" id="2666659">flagRO</span>&nbsp;<span class="op" id="2666666">|</span>&nbsp;<span class="ident" id="2666668">flagAddr</span>&nbsp;<span class="op" id="2666677">|</span>&nbsp;<span class="ident" id="2666679">flagIndir</span><span class="op" id="2666688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666692">fl</span>&nbsp;<span class="op" id="2666695">|=</span>&nbsp;<span class="ident" id="2666698">flag</span><span class="op" id="2666702">(</span><span class="ident" id="2666703">dst</span><span class="op" id="2666706">.</span><span class="ident" id="2666707">Kind</span><span class="op" id="2666711">(</span><span class="op" id="2666712">)</span><span class="op" id="2666713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666717">return</span>&nbsp;<span class="ident" id="2666724">Value</span><span class="op" id="2666729">{</span><span class="ident" id="2666730">dst</span><span class="op" id="2666733">,</span>&nbsp;<span class="ident" id="2666735">v</span><span class="op" id="2666736">.</span><span class="ident" id="2666737">ptr</span><span class="op" id="2666740">,</span>&nbsp;<span class="ident" id="2666742">fl</span><span class="op" id="2666744">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666748">case</span>&nbsp;<span class="ident" id="2666753">implements</span><span class="op" id="2666763">(</span><span class="ident" id="2666764">dst</span><span class="op" id="2666767">,</span>&nbsp;<span class="ident" id="2666769">v</span><span class="op" id="2666770">.</span><span class="ident" id="2666771">typ</span><span class="op" id="2666774">)</span><span class="op" id="2666775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666779">if</span>&nbsp;<span class="ident" id="2666782">target</span>&nbsp;<span class="op" id="2666789">==</span>&nbsp;<span class="ident" id="2666792">nil</span>&nbsp;<span class="op" id="2666796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666801">target</span>&nbsp;<span class="op" id="2666808">=</span>&nbsp;<span class="ident" id="2666810">unsafe_New</span><span class="op" id="2666820">(</span><span class="ident" id="2666821">dst</span><span class="op" id="2666824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2666828">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666832">x</span>&nbsp;<span class="op" id="2666834">:=</span>&nbsp;<span class="ident" id="2666837">valueInterface</span><span class="op" id="2666851">(</span><span class="ident" id="2666852">v</span><span class="op" id="2666853">,</span>&nbsp;<span class="ident" id="2666855">false</span><span class="op" id="2666860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666864">if</span>&nbsp;<span class="ident" id="2666867">dst</span><span class="op" id="2666870">.</span><span class="ident" id="2666871">NumMethod</span><span class="op" id="2666880">(</span><span class="op" id="2666881">)</span>&nbsp;<span class="op" id="2666883">==</span>&nbsp;<span class="num" id="2666886">0</span>&nbsp;<span class="op" id="2666888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2666893">*</span><span class="op" id="2666894">(</span><span class="op" id="2666895">*</span><span class="keyword" id="2666896">interface</span><span class="op" id="2666905">{</span><span class="op" id="2666906">}</span><span class="op" id="2666907">)</span><span class="op" id="2666908">(</span><span class="ident" id="2666909">target</span><span class="op" id="2666915">)</span>&nbsp;<span class="op" id="2666917">=</span>&nbsp;<span class="ident" id="2666919">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2666923">}</span>&nbsp;<span class="keyword" id="2666925">else</span>&nbsp;<span class="op" id="2666930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2666935">ifaceE2I</span><span class="op" id="2666943">(</span><span class="ident" id="2666944">dst</span><span class="op" id="2666947">,</span>&nbsp;<span class="ident" id="2666949">x</span><span class="op" id="2666950">,</span>&nbsp;<span class="ident" id="2666952">target</span><span class="op" id="2666958">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2666962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2666966">return</span>&nbsp;<span class="ident" id="2666973">Value</span><span class="op" id="2666978">{</span><span class="ident" id="2666979">dst</span><span class="op" id="2666982">,</span>&nbsp;<span class="ident" id="2666984">target</span><span class="op" id="2666990">,</span>&nbsp;<span class="ident" id="2666992">flagIndir</span>&nbsp;<span class="op" id="2667002">|</span>&nbsp;<span class="ident" id="2667004">flag</span><span class="op" id="2667008">(</span><span class="ident" id="2667009">Interface</span><span class="op" id="2667018">)</span><span class="op" id="2667019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2667022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2667026">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2667038">panic</span><span class="op" id="2667043">(</span><span class="ident" id="2667044">context</span>&nbsp;<span class="op" id="2667052">+</span>&nbsp;<span class="string" id="2667054">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2667073">+</span>&nbsp;<span class="ident" id="2667075">v</span><span class="op" id="2667076">.</span><span class="ident" id="2667077">typ</span><span class="op" id="2667080">.</span><span class="ident" id="2667081">String</span><span class="op" id="2667087">(</span><span class="op" id="2667088">)</span>&nbsp;<span class="op" id="2667090">+</span>&nbsp;<span class="string" id="2667092">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2667122">+</span>&nbsp;<span class="ident" id="2667124">dst</span><span class="op" id="2667127">.</span><span class="ident" id="2667128">String</span><span class="op" id="2667134">(</span><span class="op" id="2667135">)</span><span class="op" id="2667136">)</span><br>
<span class="lineno"></span><span class="op" id="2667138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2667141">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2667193">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2667253">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2667298">func</span>&nbsp;<span class="op" id="2667303">(</span><span class="ident" id="2667304">v</span>&nbsp;<span class="ident" id="2667306">Value</span><span class="op" id="2667311">)</span>&nbsp;<span class="ident" id="2667313">Convert</span><span class="op" id="2667320">(</span><span class="ident" id="2667321">t</span>&nbsp;<span class="ident" id="2667323">Type</span><span class="op" id="2667327">)</span>&nbsp;<span class="ident" id="2667329">Value</span>&nbsp;<span class="op" id="2667335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667338">if</span>&nbsp;<span class="ident" id="2667341">v</span><span class="op" id="2667342">.</span><span class="ident" id="2667343">flag</span><span class="op" id="2667347">&amp;</span><span class="ident" id="2667348">flagMethod</span>&nbsp;<span class="op" id="2667359">!=</span>&nbsp;<span class="num" id="2667362">0</span>&nbsp;<span class="op" id="2667364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2667368">v</span>&nbsp;<span class="op" id="2667370">=</span>&nbsp;<span class="ident" id="2667372">makeMethodValue</span><span class="op" id="2667387">(</span><span class="string" id="2667388">&#34;Convert&#34;</span><span class="op" id="2667397">,</span>&nbsp;<span class="ident" id="2667399">v</span><span class="op" id="2667400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2667403">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2667406">op</span>&nbsp;<span class="op" id="2667409">:=</span>&nbsp;<span class="ident" id="2667412">convertOp</span><span class="op" id="2667421">(</span><span class="ident" id="2667422">t</span><span class="op" id="2667423">.</span><span class="ident" id="2667424">common</span><span class="op" id="2667430">(</span><span class="op" id="2667431">)</span><span class="op" id="2667432">,</span>&nbsp;<span class="ident" id="2667434">v</span><span class="op" id="2667435">.</span><span class="ident" id="2667436">typ</span><span class="op" id="2667439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667442">if</span>&nbsp;<span class="ident" id="2667445">op</span>&nbsp;<span class="op" id="2667448">==</span>&nbsp;<span class="ident" id="2667451">nil</span>&nbsp;<span class="op" id="2667455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2667459">panic</span><span class="op" id="2667464">(</span><span class="string" id="2667465">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2667505">+</span>&nbsp;<span class="ident" id="2667507">v</span><span class="op" id="2667508">.</span><span class="ident" id="2667509">typ</span><span class="op" id="2667512">.</span><span class="ident" id="2667513">String</span><span class="op" id="2667519">(</span><span class="op" id="2667520">)</span>&nbsp;<span class="op" id="2667522">+</span>&nbsp;<span class="string" id="2667524">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2667556">+</span>&nbsp;<span class="ident" id="2667558">t</span><span class="op" id="2667559">.</span><span class="ident" id="2667560">String</span><span class="op" id="2667566">(</span><span class="op" id="2667567">)</span><span class="op" id="2667568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2667571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667574">return</span>&nbsp;<span class="ident" id="2667581">op</span><span class="op" id="2667583">(</span><span class="ident" id="2667584">v</span><span class="op" id="2667585">,</span>&nbsp;<span class="ident" id="2667587">t</span><span class="op" id="2667588">)</span><br>
<span class="lineno">2140</span><span class="op" id="2667590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2667593">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2667658">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2667738">func</span>&nbsp;<span class="ident" id="2667743">convertOp</span><span class="op" id="2667752">(</span><span class="ident" id="2667753">dst</span><span class="op" id="2667756">,</span>&nbsp;<span class="ident" id="2667758">src</span>&nbsp;<span class="op" id="2667762">*</span><span class="ident" id="2667763">rtype</span><span class="op" id="2667768">)</span>&nbsp;<span class="keyword" id="2667770">func</span><span class="op" id="2667774">(</span><span class="ident" id="2667775">Value</span><span class="op" id="2667780">,</span>&nbsp;<span class="ident" id="2667782">Type</span><span class="op" id="2667786">)</span>&nbsp;<span class="ident" id="2667788">Value</span>&nbsp;<span class="op" id="2667794">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667797">switch</span>&nbsp;<span class="ident" id="2667804">src</span><span class="op" id="2667807">.</span><span class="ident" id="2667808">Kind</span><span class="op" id="2667812">(</span><span class="op" id="2667813">)</span>&nbsp;<span class="op" id="2667815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667818">case</span>&nbsp;<span class="ident" id="2667823">Int</span><span class="op" id="2667826">,</span>&nbsp;<span class="ident" id="2667828">Int8</span><span class="op" id="2667832">,</span>&nbsp;<span class="ident" id="2667834">Int16</span><span class="op" id="2667839">,</span>&nbsp;<span class="ident" id="2667841">Int32</span><span class="op" id="2667846">,</span>&nbsp;<span class="ident" id="2667848">Int64</span><span class="op" id="2667853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667857">switch</span>&nbsp;<span class="ident" id="2667864">dst</span><span class="op" id="2667867">.</span><span class="ident" id="2667868">Kind</span><span class="op" id="2667872">(</span><span class="op" id="2667873">)</span>&nbsp;<span class="op" id="2667875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667879">case</span>&nbsp;<span class="ident" id="2667884">Int</span><span class="op" id="2667887">,</span>&nbsp;<span class="ident" id="2667889">Int8</span><span class="op" id="2667893">,</span>&nbsp;<span class="ident" id="2667895">Int16</span><span class="op" id="2667900">,</span>&nbsp;<span class="ident" id="2667902">Int32</span><span class="op" id="2667907">,</span>&nbsp;<span class="ident" id="2667909">Int64</span><span class="op" id="2667914">,</span>&nbsp;<span class="ident" id="2667916">Uint</span><span class="op" id="2667920">,</span>&nbsp;<span class="ident" id="2667922">Uint8</span><span class="op" id="2667927">,</span>&nbsp;<span class="ident" id="2667929">Uint16</span><span class="op" id="2667935">,</span>&nbsp;<span class="ident" id="2667937">Uint32</span><span class="op" id="2667943">,</span>&nbsp;<span class="ident" id="2667945">Uint64</span><span class="op" id="2667951">,</span>&nbsp;<span class="ident" id="2667953">Uintptr</span><span class="op" id="2667960">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667965">return</span>&nbsp;<span class="ident" id="2667972">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2667981">case</span>&nbsp;<span class="ident" id="2667986">Float32</span><span class="op" id="2667993">,</span>&nbsp;<span class="ident" id="2667995">Float64</span><span class="op" id="2668002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668007">return</span>&nbsp;<span class="ident" id="2668014">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668028">case</span>&nbsp;<span class="ident" id="2668033">String</span><span class="op" id="2668039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668044">return</span>&nbsp;<span class="ident" id="2668051">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668066">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668070">case</span>&nbsp;<span class="ident" id="2668075">Uint</span><span class="op" id="2668079">,</span>&nbsp;<span class="ident" id="2668081">Uint8</span><span class="op" id="2668086">,</span>&nbsp;<span class="ident" id="2668088">Uint16</span><span class="op" id="2668094">,</span>&nbsp;<span class="ident" id="2668096">Uint32</span><span class="op" id="2668102">,</span>&nbsp;<span class="ident" id="2668104">Uint64</span><span class="op" id="2668110">,</span>&nbsp;<span class="ident" id="2668112">Uintptr</span><span class="op" id="2668119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668123">switch</span>&nbsp;<span class="ident" id="2668130">dst</span><span class="op" id="2668133">.</span><span class="ident" id="2668134">Kind</span><span class="op" id="2668138">(</span><span class="op" id="2668139">)</span>&nbsp;<span class="op" id="2668141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668145">case</span>&nbsp;<span class="ident" id="2668150">Int</span><span class="op" id="2668153">,</span>&nbsp;<span class="ident" id="2668155">Int8</span><span class="op" id="2668159">,</span>&nbsp;<span class="ident" id="2668161">Int16</span><span class="op" id="2668166">,</span>&nbsp;<span class="ident" id="2668168">Int32</span><span class="op" id="2668173">,</span>&nbsp;<span class="ident" id="2668175">Int64</span><span class="op" id="2668180">,</span>&nbsp;<span class="ident" id="2668182">Uint</span><span class="op" id="2668186">,</span>&nbsp;<span class="ident" id="2668188">Uint8</span><span class="op" id="2668193">,</span>&nbsp;<span class="ident" id="2668195">Uint16</span><span class="op" id="2668201">,</span>&nbsp;<span class="ident" id="2668203">Uint32</span><span class="op" id="2668209">,</span>&nbsp;<span class="ident" id="2668211">Uint64</span><span class="op" id="2668217">,</span>&nbsp;<span class="ident" id="2668219">Uintptr</span><span class="op" id="2668226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668231">return</span>&nbsp;<span class="ident" id="2668238">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668248">case</span>&nbsp;<span class="ident" id="2668253">Float32</span><span class="op" id="2668260">,</span>&nbsp;<span class="ident" id="2668262">Float64</span><span class="op" id="2668269">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668274">return</span>&nbsp;<span class="ident" id="2668281">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668296">case</span>&nbsp;<span class="ident" id="2668301">String</span><span class="op" id="2668307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668312">return</span>&nbsp;<span class="ident" id="2668319">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668335">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668339">case</span>&nbsp;<span class="ident" id="2668344">Float32</span><span class="op" id="2668351">,</span>&nbsp;<span class="ident" id="2668353">Float64</span><span class="op" id="2668360">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668364">switch</span>&nbsp;<span class="ident" id="2668371">dst</span><span class="op" id="2668374">.</span><span class="ident" id="2668375">Kind</span><span class="op" id="2668379">(</span><span class="op" id="2668380">)</span>&nbsp;<span class="op" id="2668382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668386">case</span>&nbsp;<span class="ident" id="2668391">Int</span><span class="op" id="2668394">,</span>&nbsp;<span class="ident" id="2668396">Int8</span><span class="op" id="2668400">,</span>&nbsp;<span class="ident" id="2668402">Int16</span><span class="op" id="2668407">,</span>&nbsp;<span class="ident" id="2668409">Int32</span><span class="op" id="2668414">,</span>&nbsp;<span class="ident" id="2668416">Int64</span><span class="op" id="2668421">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668426">return</span>&nbsp;<span class="ident" id="2668433">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668447">case</span>&nbsp;<span class="ident" id="2668452">Uint</span><span class="op" id="2668456">,</span>&nbsp;<span class="ident" id="2668458">Uint8</span><span class="op" id="2668463">,</span>&nbsp;<span class="ident" id="2668465">Uint16</span><span class="op" id="2668471">,</span>&nbsp;<span class="ident" id="2668473">Uint32</span><span class="op" id="2668479">,</span>&nbsp;<span class="ident" id="2668481">Uint64</span><span class="op" id="2668487">,</span>&nbsp;<span class="ident" id="2668489">Uintptr</span><span class="op" id="2668496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668501">return</span>&nbsp;<span class="ident" id="2668508">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668523">case</span>&nbsp;<span class="ident" id="2668528">Float32</span><span class="op" id="2668535">,</span>&nbsp;<span class="ident" id="2668537">Float64</span><span class="op" id="2668544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668549">return</span>&nbsp;<span class="ident" id="2668556">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668567">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668571">case</span>&nbsp;<span class="ident" id="2668576">Complex64</span><span class="op" id="2668585">,</span>&nbsp;<span class="ident" id="2668587">Complex128</span><span class="op" id="2668597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668601">switch</span>&nbsp;<span class="ident" id="2668608">dst</span><span class="op" id="2668611">.</span><span class="ident" id="2668612">Kind</span><span class="op" id="2668616">(</span><span class="op" id="2668617">)</span>&nbsp;<span class="op" id="2668619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668623">case</span>&nbsp;<span class="ident" id="2668628">Complex64</span><span class="op" id="2668637">,</span>&nbsp;<span class="ident" id="2668639">Complex128</span><span class="op" id="2668649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668654">return</span>&nbsp;<span class="ident" id="2668661">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668678">case</span>&nbsp;<span class="ident" id="2668683">String</span><span class="op" id="2668689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668693">if</span>&nbsp;<span class="ident" id="2668696">dst</span><span class="op" id="2668699">.</span><span class="ident" id="2668700">Kind</span><span class="op" id="2668704">(</span><span class="op" id="2668705">)</span>&nbsp;<span class="op" id="2668707">==</span>&nbsp;<span class="ident" id="2668710">Slice</span>&nbsp;<span class="op" id="2668716">&amp;&amp;</span>&nbsp;<span class="ident" id="2668719">dst</span><span class="op" id="2668722">.</span><span class="ident" id="2668723">Elem</span><span class="op" id="2668727">(</span><span class="op" id="2668728">)</span><span class="op" id="2668729">.</span><span class="ident" id="2668730">PkgPath</span><span class="op" id="2668737">(</span><span class="op" id="2668738">)</span>&nbsp;<span class="op" id="2668740">==</span>&nbsp;<span class="string" id="2668743">&#34;&#34;</span>&nbsp;<span class="op" id="2668746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668751">switch</span>&nbsp;<span class="ident" id="2668758">dst</span><span class="op" id="2668761">.</span><span class="ident" id="2668762">Elem</span><span class="op" id="2668766">(</span><span class="op" id="2668767">)</span><span class="op" id="2668768">.</span><span class="ident" id="2668769">Kind</span><span class="op" id="2668773">(</span><span class="op" id="2668774">)</span>&nbsp;<span class="op" id="2668776">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668781">case</span>&nbsp;<span class="ident" id="2668786">Uint8</span><span class="op" id="2668791">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668797">return</span>&nbsp;<span class="ident" id="2668804">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668822">case</span>&nbsp;<span class="ident" id="2668827">Int32</span><span class="op" id="2668832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668838">return</span>&nbsp;<span class="ident" id="2668845">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668863">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2668867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668871">case</span>&nbsp;<span class="ident" id="2668876">Slice</span><span class="op" id="2668881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668885">if</span>&nbsp;<span class="ident" id="2668888">dst</span><span class="op" id="2668891">.</span><span class="ident" id="2668892">Kind</span><span class="op" id="2668896">(</span><span class="op" id="2668897">)</span>&nbsp;<span class="op" id="2668899">==</span>&nbsp;<span class="ident" id="2668902">String</span>&nbsp;<span class="op" id="2668909">&amp;&amp;</span>&nbsp;<span class="ident" id="2668912">src</span><span class="op" id="2668915">.</span><span class="ident" id="2668916">Elem</span><span class="op" id="2668920">(</span><span class="op" id="2668921">)</span><span class="op" id="2668922">.</span><span class="ident" id="2668923">PkgPath</span><span class="op" id="2668930">(</span><span class="op" id="2668931">)</span>&nbsp;<span class="op" id="2668933">==</span>&nbsp;<span class="string" id="2668936">&#34;&#34;</span>&nbsp;<span class="op" id="2668939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668944">switch</span>&nbsp;<span class="ident" id="2668951">src</span><span class="op" id="2668954">.</span><span class="ident" id="2668955">Elem</span><span class="op" id="2668959">(</span><span class="op" id="2668960">)</span><span class="op" id="2668961">.</span><span class="ident" id="2668962">Kind</span><span class="op" id="2668966">(</span><span class="op" id="2668967">)</span>&nbsp;<span class="op" id="2668969">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668974">case</span>&nbsp;<span class="ident" id="2668979">Uint8</span><span class="op" id="2668984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2668990">return</span>&nbsp;<span class="ident" id="2668997">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669015">case</span>&nbsp;<span class="ident" id="2669020">Int32</span><span class="op" id="2669025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669031">return</span>&nbsp;<span class="ident" id="2669038">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669056">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669063">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2669067">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669110">if</span>&nbsp;<span class="ident" id="2669113">haveIdenticalUnderlyingType</span><span class="op" id="2669140">(</span><span class="ident" id="2669141">dst</span><span class="op" id="2669144">,</span>&nbsp;<span class="ident" id="2669146">src</span><span class="op" id="2669149">)</span>&nbsp;<span class="op" id="2669151">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669155">return</span>&nbsp;<span class="ident" id="2669162">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2669177">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669251">if</span>&nbsp;<span class="ident" id="2669254">dst</span><span class="op" id="2669257">.</span><span class="ident" id="2669258">Kind</span><span class="op" id="2669262">(</span><span class="op" id="2669263">)</span>&nbsp;<span class="op" id="2669265">==</span>&nbsp;<span class="ident" id="2669268">Ptr</span>&nbsp;<span class="op" id="2669272">&amp;&amp;</span>&nbsp;<span class="ident" id="2669275">dst</span><span class="op" id="2669278">.</span><span class="ident" id="2669279">Name</span><span class="op" id="2669283">(</span><span class="op" id="2669284">)</span>&nbsp;<span class="op" id="2669286">==</span>&nbsp;<span class="string" id="2669289">&#34;&#34;</span>&nbsp;<span class="op" id="2669292">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2669297">src</span><span class="op" id="2669300">.</span><span class="ident" id="2669301">Kind</span><span class="op" id="2669305">(</span><span class="op" id="2669306">)</span>&nbsp;<span class="op" id="2669308">==</span>&nbsp;<span class="ident" id="2669311">Ptr</span>&nbsp;<span class="op" id="2669315">&amp;&amp;</span>&nbsp;<span class="ident" id="2669318">src</span><span class="op" id="2669321">.</span><span class="ident" id="2669322">Name</span><span class="op" id="2669326">(</span><span class="op" id="2669327">)</span>&nbsp;<span class="op" id="2669329">==</span>&nbsp;<span class="string" id="2669332">&#34;&#34;</span>&nbsp;<span class="op" id="2669335">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2669340">haveIdenticalUnderlyingType</span><span class="op" id="2669367">(</span><span class="ident" id="2669368">dst</span><span class="op" id="2669371">.</span><span class="ident" id="2669372">Elem</span><span class="op" id="2669376">(</span><span class="op" id="2669377">)</span><span class="op" id="2669378">.</span><span class="ident" id="2669379">common</span><span class="op" id="2669385">(</span><span class="op" id="2669386">)</span><span class="op" id="2669387">,</span>&nbsp;<span class="ident" id="2669389">src</span><span class="op" id="2669392">.</span><span class="ident" id="2669393">Elem</span><span class="op" id="2669397">(</span><span class="op" id="2669398">)</span><span class="op" id="2669399">.</span><span class="ident" id="2669400">common</span><span class="op" id="2669406">(</span><span class="op" id="2669407">)</span><span class="op" id="2669408">)</span>&nbsp;<span class="op" id="2669410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669414">return</span>&nbsp;<span class="ident" id="2669421">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669436">if</span>&nbsp;<span class="ident" id="2669439">implements</span><span class="op" id="2669449">(</span><span class="ident" id="2669450">dst</span><span class="op" id="2669453">,</span>&nbsp;<span class="ident" id="2669455">src</span><span class="op" id="2669458">)</span>&nbsp;<span class="op" id="2669460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669464">if</span>&nbsp;<span class="ident" id="2669467">src</span><span class="op" id="2669470">.</span><span class="ident" id="2669471">Kind</span><span class="op" id="2669475">(</span><span class="op" id="2669476">)</span>&nbsp;<span class="op" id="2669478">==</span>&nbsp;<span class="ident" id="2669481">Interface</span>&nbsp;<span class="op" id="2669491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669496">return</span>&nbsp;<span class="ident" id="2669503">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669516">return</span>&nbsp;<span class="ident" id="2669523">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669535">return</span>&nbsp;<span class="ident" id="2669542">nil</span><br>
<span class="lineno"></span><span class="op" id="2669546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2669549">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2669622">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2669667">func</span>&nbsp;<span class="ident" id="2669672">makeInt</span><span class="op" id="2669679">(</span><span class="ident" id="2669680">f</span>&nbsp;<span class="ident" id="2669682">flag</span><span class="op" id="2669686">,</span>&nbsp;<span class="ident" id="2669688">bits</span>&nbsp;<span class="ident" id="2669693">uint64</span><span class="op" id="2669699">,</span>&nbsp;<span class="ident" id="2669701">t</span>&nbsp;<span class="ident" id="2669703">Type</span><span class="op" id="2669707">)</span>&nbsp;<span class="ident" id="2669709">Value</span>&nbsp;<span class="op" id="2669715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2669718">typ</span>&nbsp;<span class="op" id="2669722">:=</span>&nbsp;<span class="ident" id="2669725">t</span><span class="op" id="2669726">.</span><span class="ident" id="2669727">common</span><span class="op" id="2669733">(</span><span class="op" id="2669734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2669737">ptr</span>&nbsp;<span class="op" id="2669741">:=</span>&nbsp;<span class="ident" id="2669744">unsafe_New</span><span class="op" id="2669754">(</span><span class="ident" id="2669755">typ</span><span class="op" id="2669758">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669761">switch</span>&nbsp;<span class="ident" id="2669768">typ</span><span class="op" id="2669771">.</span><span class="ident" id="2669772">size</span>&nbsp;<span class="op" id="2669777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669780">case</span>&nbsp;<span class="num" id="2669785">1</span><span class="op" id="2669786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669790">*</span><span class="op" id="2669791">(</span><span class="op" id="2669792">*</span><span class="builtintype" id="2669793">uint8</span><span class="op" id="2669798">)</span><span class="op" id="2669799">(</span><span class="ident" id="2669800">unsafe</span><span class="op" id="2669806">.</span><span class="ident" id="2669807">Pointer</span><span class="op" id="2669814">(</span><span class="ident" id="2669815">ptr</span><span class="op" id="2669818">)</span><span class="op" id="2669819">)</span>&nbsp;<span class="op" id="2669821">=</span>&nbsp;<span class="builtintype" id="2669823">uint8</span><span class="op" id="2669828">(</span><span class="ident" id="2669829">bits</span><span class="op" id="2669833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669836">case</span>&nbsp;<span class="num" id="2669841">2</span><span class="op" id="2669842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669846">*</span><span class="op" id="2669847">(</span><span class="op" id="2669848">*</span><span class="builtintype" id="2669849">uint16</span><span class="op" id="2669855">)</span><span class="op" id="2669856">(</span><span class="ident" id="2669857">unsafe</span><span class="op" id="2669863">.</span><span class="ident" id="2669864">Pointer</span><span class="op" id="2669871">(</span><span class="ident" id="2669872">ptr</span><span class="op" id="2669875">)</span><span class="op" id="2669876">)</span>&nbsp;<span class="op" id="2669878">=</span>&nbsp;<span class="builtintype" id="2669880">uint16</span><span class="op" id="2669886">(</span><span class="ident" id="2669887">bits</span><span class="op" id="2669891">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669894">case</span>&nbsp;<span class="num" id="2669899">4</span><span class="op" id="2669900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669904">*</span><span class="op" id="2669905">(</span><span class="op" id="2669906">*</span><span class="builtintype" id="2669907">uint32</span><span class="op" id="2669913">)</span><span class="op" id="2669914">(</span><span class="ident" id="2669915">unsafe</span><span class="op" id="2669921">.</span><span class="ident" id="2669922">Pointer</span><span class="op" id="2669929">(</span><span class="ident" id="2669930">ptr</span><span class="op" id="2669933">)</span><span class="op" id="2669934">)</span>&nbsp;<span class="op" id="2669936">=</span>&nbsp;<span class="builtintype" id="2669938">uint32</span><span class="op" id="2669944">(</span><span class="ident" id="2669945">bits</span><span class="op" id="2669949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2669952">case</span>&nbsp;<span class="num" id="2669957">8</span><span class="op" id="2669958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2669962">*</span><span class="op" id="2669963">(</span><span class="op" id="2669964">*</span><span class="ident" id="2669965">uint64</span><span class="op" id="2669971">)</span><span class="op" id="2669972">(</span><span class="ident" id="2669973">unsafe</span><span class="op" id="2669979">.</span><span class="ident" id="2669980">Pointer</span><span class="op" id="2669987">(</span><span class="ident" id="2669988">ptr</span><span class="op" id="2669991">)</span><span class="op" id="2669992">)</span>&nbsp;<span class="op" id="2669994">=</span>&nbsp;<span class="ident" id="2669996">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670002">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670005">return</span>&nbsp;<span class="ident" id="2670012">Value</span><span class="op" id="2670017">{</span><span class="ident" id="2670018">typ</span><span class="op" id="2670021">,</span>&nbsp;<span class="ident" id="2670023">ptr</span><span class="op" id="2670026">,</span>&nbsp;<span class="ident" id="2670028">f</span>&nbsp;<span class="op" id="2670030">|</span>&nbsp;<span class="ident" id="2670032">flagIndir</span>&nbsp;<span class="op" id="2670042">|</span>&nbsp;<span class="ident" id="2670044">flag</span><span class="op" id="2670048">(</span><span class="ident" id="2670049">typ</span><span class="op" id="2670052">.</span><span class="ident" id="2670053">Kind</span><span class="op" id="2670057">(</span><span class="op" id="2670058">)</span><span class="op" id="2670059">)</span><span class="op" id="2670060">}</span><br>
<span class="lineno"></span><span class="op" id="2670062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2670065">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2670148">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2670189">func</span>&nbsp;<span class="ident" id="2670194">makeFloat</span><span class="op" id="2670203">(</span><span class="ident" id="2670204">f</span>&nbsp;<span class="ident" id="2670206">flag</span><span class="op" id="2670210">,</span>&nbsp;<span class="ident" id="2670212">v</span>&nbsp;<span class="builtintype" id="2670214">float64</span><span class="op" id="2670221">,</span>&nbsp;<span class="ident" id="2670223">t</span>&nbsp;<span class="ident" id="2670225">Type</span><span class="op" id="2670229">)</span>&nbsp;<span class="ident" id="2670231">Value</span>&nbsp;<span class="op" id="2670237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670240">typ</span>&nbsp;<span class="op" id="2670244">:=</span>&nbsp;<span class="ident" id="2670247">t</span><span class="op" id="2670248">.</span><span class="ident" id="2670249">common</span><span class="op" id="2670255">(</span><span class="op" id="2670256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670259">ptr</span>&nbsp;<span class="op" id="2670263">:=</span>&nbsp;<span class="ident" id="2670266">unsafe_New</span><span class="op" id="2670276">(</span><span class="ident" id="2670277">typ</span><span class="op" id="2670280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670283">switch</span>&nbsp;<span class="ident" id="2670290">typ</span><span class="op" id="2670293">.</span><span class="ident" id="2670294">size</span>&nbsp;<span class="op" id="2670299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670302">case</span>&nbsp;<span class="num" id="2670307">4</span><span class="op" id="2670308">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670312">*</span><span class="op" id="2670313">(</span><span class="op" id="2670314">*</span><span class="builtintype" id="2670315">float32</span><span class="op" id="2670322">)</span><span class="op" id="2670323">(</span><span class="ident" id="2670324">unsafe</span><span class="op" id="2670330">.</span><span class="ident" id="2670331">Pointer</span><span class="op" id="2670338">(</span><span class="ident" id="2670339">ptr</span><span class="op" id="2670342">)</span><span class="op" id="2670343">)</span>&nbsp;<span class="op" id="2670345">=</span>&nbsp;<span class="builtintype" id="2670347">float32</span><span class="op" id="2670354">(</span><span class="ident" id="2670355">v</span><span class="op" id="2670356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670359">case</span>&nbsp;<span class="num" id="2670364">8</span><span class="op" id="2670365">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670369">*</span><span class="op" id="2670370">(</span><span class="op" id="2670371">*</span><span class="builtintype" id="2670372">float64</span><span class="op" id="2670379">)</span><span class="op" id="2670380">(</span><span class="ident" id="2670381">unsafe</span><span class="op" id="2670387">.</span><span class="ident" id="2670388">Pointer</span><span class="op" id="2670395">(</span><span class="ident" id="2670396">ptr</span><span class="op" id="2670399">)</span><span class="op" id="2670400">)</span>&nbsp;<span class="op" id="2670402">=</span>&nbsp;<span class="ident" id="2670404">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670410">return</span>&nbsp;<span class="ident" id="2670417">Value</span><span class="op" id="2670422">{</span><span class="ident" id="2670423">typ</span><span class="op" id="2670426">,</span>&nbsp;<span class="ident" id="2670428">ptr</span><span class="op" id="2670431">,</span>&nbsp;<span class="ident" id="2670433">f</span>&nbsp;<span class="op" id="2670435">|</span>&nbsp;<span class="ident" id="2670437">flagIndir</span>&nbsp;<span class="op" id="2670447">|</span>&nbsp;<span class="ident" id="2670449">flag</span><span class="op" id="2670453">(</span><span class="ident" id="2670454">typ</span><span class="op" id="2670457">.</span><span class="ident" id="2670458">Kind</span><span class="op" id="2670462">(</span><span class="op" id="2670463">)</span><span class="op" id="2670464">)</span><span class="op" id="2670465">}</span><br>
<span class="lineno">2255</span><span class="op" id="2670467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2670470">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2670557">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2670603">func</span>&nbsp;<span class="ident" id="2670608">makeComplex</span><span class="op" id="2670619">(</span><span class="ident" id="2670620">f</span>&nbsp;<span class="ident" id="2670622">flag</span><span class="op" id="2670626">,</span>&nbsp;<span class="ident" id="2670628">v</span>&nbsp;<span class="builtintype" id="2670630">complex128</span><span class="op" id="2670640">,</span>&nbsp;<span class="ident" id="2670642">t</span>&nbsp;<span class="ident" id="2670644">Type</span><span class="op" id="2670648">)</span>&nbsp;<span class="ident" id="2670650">Value</span>&nbsp;<span class="op" id="2670656">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670659">typ</span>&nbsp;<span class="op" id="2670663">:=</span>&nbsp;<span class="ident" id="2670666">t</span><span class="op" id="2670667">.</span><span class="ident" id="2670668">common</span><span class="op" id="2670674">(</span><span class="op" id="2670675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670678">ptr</span>&nbsp;<span class="op" id="2670682">:=</span>&nbsp;<span class="ident" id="2670685">unsafe_New</span><span class="op" id="2670695">(</span><span class="ident" id="2670696">typ</span><span class="op" id="2670699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670702">switch</span>&nbsp;<span class="ident" id="2670709">typ</span><span class="op" id="2670712">.</span><span class="ident" id="2670713">size</span>&nbsp;<span class="op" id="2670718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670721">case</span>&nbsp;<span class="num" id="2670726">8</span><span class="op" id="2670727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670731">*</span><span class="op" id="2670732">(</span><span class="op" id="2670733">*</span><span class="builtintype" id="2670734">complex64</span><span class="op" id="2670743">)</span><span class="op" id="2670744">(</span><span class="ident" id="2670745">unsafe</span><span class="op" id="2670751">.</span><span class="ident" id="2670752">Pointer</span><span class="op" id="2670759">(</span><span class="ident" id="2670760">ptr</span><span class="op" id="2670763">)</span><span class="op" id="2670764">)</span>&nbsp;<span class="op" id="2670766">=</span>&nbsp;<span class="builtintype" id="2670768">complex64</span><span class="op" id="2670777">(</span><span class="ident" id="2670778">v</span><span class="op" id="2670779">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670782">case</span>&nbsp;<span class="num" id="2670787">16</span><span class="op" id="2670789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670793">*</span><span class="op" id="2670794">(</span><span class="op" id="2670795">*</span><span class="builtintype" id="2670796">complex128</span><span class="op" id="2670806">)</span><span class="op" id="2670807">(</span><span class="ident" id="2670808">unsafe</span><span class="op" id="2670814">.</span><span class="ident" id="2670815">Pointer</span><span class="op" id="2670822">(</span><span class="ident" id="2670823">ptr</span><span class="op" id="2670826">)</span><span class="op" id="2670827">)</span>&nbsp;<span class="op" id="2670829">=</span>&nbsp;<span class="ident" id="2670831">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2670834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2670837">return</span>&nbsp;<span class="ident" id="2670844">Value</span><span class="op" id="2670849">{</span><span class="ident" id="2670850">typ</span><span class="op" id="2670853">,</span>&nbsp;<span class="ident" id="2670855">ptr</span><span class="op" id="2670858">,</span>&nbsp;<span class="ident" id="2670860">f</span>&nbsp;<span class="op" id="2670862">|</span>&nbsp;<span class="ident" id="2670864">flagIndir</span>&nbsp;<span class="op" id="2670874">|</span>&nbsp;<span class="ident" id="2670876">flag</span><span class="op" id="2670880">(</span><span class="ident" id="2670881">typ</span><span class="op" id="2670884">.</span><span class="ident" id="2670885">Kind</span><span class="op" id="2670889">(</span><span class="op" id="2670890">)</span><span class="op" id="2670891">)</span><span class="op" id="2670892">}</span><br>
<span class="lineno"></span><span class="op" id="2670894">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2670897">func</span>&nbsp;<span class="ident" id="2670902">makeString</span><span class="op" id="2670912">(</span><span class="ident" id="2670913">f</span>&nbsp;<span class="ident" id="2670915">flag</span><span class="op" id="2670919">,</span>&nbsp;<span class="ident" id="2670921">v</span>&nbsp;<span class="builtintype" id="2670923">string</span><span class="op" id="2670929">,</span>&nbsp;<span class="ident" id="2670931">t</span>&nbsp;<span class="ident" id="2670933">Type</span><span class="op" id="2670937">)</span>&nbsp;<span class="ident" id="2670939">Value</span>&nbsp;<span class="op" id="2670945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670948">ret</span>&nbsp;<span class="op" id="2670952">:=</span>&nbsp;<span class="ident" id="2670955">New</span><span class="op" id="2670958">(</span><span class="ident" id="2670959">t</span><span class="op" id="2670960">)</span><span class="op" id="2670961">.</span><span class="ident" id="2670962">Elem</span><span class="op" id="2670966">(</span><span class="op" id="2670967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670970">ret</span><span class="op" id="2670973">.</span><span class="ident" id="2670974">SetString</span><span class="op" id="2670983">(</span><span class="ident" id="2670984">v</span><span class="op" id="2670985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2670988">ret</span><span class="op" id="2670991">.</span><span class="ident" id="2670992">flag</span>&nbsp;<span class="op" id="2670997">=</span>&nbsp;<span class="ident" id="2670999">ret</span><span class="op" id="2671002">.</span><span class="ident" id="2671003">flag</span><span class="op" id="2671007">&amp;^</span><span class="ident" id="2671009">flagAddr</span>&nbsp;<span class="op" id="2671018">|</span>&nbsp;<span class="ident" id="2671020">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671023">return</span>&nbsp;<span class="ident" id="2671030">ret</span><br>
<span class="lineno"></span><span class="op" id="2671034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2671037">func</span>&nbsp;<span class="ident" id="2671042">makeBytes</span><span class="op" id="2671051">(</span><span class="ident" id="2671052">f</span>&nbsp;<span class="ident" id="2671054">flag</span><span class="op" id="2671058">,</span>&nbsp;<span class="ident" id="2671060">v</span>&nbsp;<span class="op" id="2671062">[</span><span class="op" id="2671063">]</span><span class="builtintype" id="2671064">byte</span><span class="op" id="2671068">,</span>&nbsp;<span class="ident" id="2671070">t</span>&nbsp;<span class="ident" id="2671072">Type</span><span class="op" id="2671076">)</span>&nbsp;<span class="ident" id="2671078">Value</span>&nbsp;<span class="op" id="2671084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671087">ret</span>&nbsp;<span class="op" id="2671091">:=</span>&nbsp;<span class="ident" id="2671094">New</span><span class="op" id="2671097">(</span><span class="ident" id="2671098">t</span><span class="op" id="2671099">)</span><span class="op" id="2671100">.</span><span class="ident" id="2671101">Elem</span><span class="op" id="2671105">(</span><span class="op" id="2671106">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671109">ret</span><span class="op" id="2671112">.</span><span class="ident" id="2671113">SetBytes</span><span class="op" id="2671121">(</span><span class="ident" id="2671122">v</span><span class="op" id="2671123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671126">ret</span><span class="op" id="2671129">.</span><span class="ident" id="2671130">flag</span>&nbsp;<span class="op" id="2671135">=</span>&nbsp;<span class="ident" id="2671137">ret</span><span class="op" id="2671140">.</span><span class="ident" id="2671141">flag</span><span class="op" id="2671145">&amp;^</span><span class="ident" id="2671147">flagAddr</span>&nbsp;<span class="op" id="2671156">|</span>&nbsp;<span class="ident" id="2671158">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671161">return</span>&nbsp;<span class="ident" id="2671168">ret</span><br>
<span class="lineno"></span><span class="op" id="2671172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2671175">func</span>&nbsp;<span class="ident" id="2671180">makeRunes</span><span class="op" id="2671189">(</span><span class="ident" id="2671190">f</span>&nbsp;<span class="ident" id="2671192">flag</span><span class="op" id="2671196">,</span>&nbsp;<span class="ident" id="2671198">v</span>&nbsp;<span class="op" id="2671200">[</span><span class="op" id="2671201">]</span><span class="builtintype" id="2671202">rune</span><span class="op" id="2671206">,</span>&nbsp;<span class="ident" id="2671208">t</span>&nbsp;<span class="ident" id="2671210">Type</span><span class="op" id="2671214">)</span>&nbsp;<span class="ident" id="2671216">Value</span>&nbsp;<span class="op" id="2671222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671225">ret</span>&nbsp;<span class="op" id="2671229">:=</span>&nbsp;<span class="ident" id="2671232">New</span><span class="op" id="2671235">(</span><span class="ident" id="2671236">t</span><span class="op" id="2671237">)</span><span class="op" id="2671238">.</span><span class="ident" id="2671239">Elem</span><span class="op" id="2671243">(</span><span class="op" id="2671244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671247">ret</span><span class="op" id="2671250">.</span><span class="ident" id="2671251">setRunes</span><span class="op" id="2671259">(</span><span class="ident" id="2671260">v</span><span class="op" id="2671261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671264">ret</span><span class="op" id="2671267">.</span><span class="ident" id="2671268">flag</span>&nbsp;<span class="op" id="2671273">=</span>&nbsp;<span class="ident" id="2671275">ret</span><span class="op" id="2671278">.</span><span class="ident" id="2671279">flag</span><span class="op" id="2671283">&amp;^</span><span class="ident" id="2671285">flagAddr</span>&nbsp;<span class="op" id="2671294">|</span>&nbsp;<span class="ident" id="2671296">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671299">return</span>&nbsp;<span class="ident" id="2671306">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2671310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671313">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2671369">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2671441">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2671513">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671572">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2671604">func</span>&nbsp;<span class="ident" id="2671609">cvtInt</span><span class="op" id="2671615">(</span><span class="ident" id="2671616">v</span>&nbsp;<span class="ident" id="2671618">Value</span><span class="op" id="2671623">,</span>&nbsp;<span class="ident" id="2671625">t</span>&nbsp;<span class="ident" id="2671627">Type</span><span class="op" id="2671631">)</span>&nbsp;<span class="ident" id="2671633">Value</span>&nbsp;<span class="op" id="2671639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671642">return</span>&nbsp;<span class="ident" id="2671649">makeInt</span><span class="op" id="2671656">(</span><span class="ident" id="2671657">v</span><span class="op" id="2671658">.</span><span class="ident" id="2671659">flag</span><span class="op" id="2671663">&amp;</span><span class="ident" id="2671664">flagRO</span><span class="op" id="2671670">,</span>&nbsp;<span class="ident" id="2671672">uint64</span><span class="op" id="2671678">(</span><span class="ident" id="2671679">v</span><span class="op" id="2671680">.</span><span class="ident" id="2671681">Int</span><span class="op" id="2671684">(</span><span class="op" id="2671685">)</span><span class="op" id="2671686">)</span><span class="op" id="2671687">,</span>&nbsp;<span class="ident" id="2671689">t</span><span class="op" id="2671690">)</span><br>
<span class="lineno">2300</span><span class="op" id="2671692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671695">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2671728">func</span>&nbsp;<span class="ident" id="2671733">cvtUint</span><span class="op" id="2671740">(</span><span class="ident" id="2671741">v</span>&nbsp;<span class="ident" id="2671743">Value</span><span class="op" id="2671748">,</span>&nbsp;<span class="ident" id="2671750">t</span>&nbsp;<span class="ident" id="2671752">Type</span><span class="op" id="2671756">)</span>&nbsp;<span class="ident" id="2671758">Value</span>&nbsp;<span class="op" id="2671764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671767">return</span>&nbsp;<span class="ident" id="2671774">makeInt</span><span class="op" id="2671781">(</span><span class="ident" id="2671782">v</span><span class="op" id="2671783">.</span><span class="ident" id="2671784">flag</span><span class="op" id="2671788">&amp;</span><span class="ident" id="2671789">flagRO</span><span class="op" id="2671795">,</span>&nbsp;<span class="ident" id="2671797">v</span><span class="op" id="2671798">.</span><span class="ident" id="2671799">Uint</span><span class="op" id="2671803">(</span><span class="op" id="2671804">)</span><span class="op" id="2671805">,</span>&nbsp;<span class="ident" id="2671807">t</span><span class="op" id="2671808">)</span><br>
<span class="lineno">2305</span><span class="op" id="2671810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671813">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2671844">func</span>&nbsp;<span class="ident" id="2671849">cvtFloatInt</span><span class="op" id="2671860">(</span><span class="ident" id="2671861">v</span>&nbsp;<span class="ident" id="2671863">Value</span><span class="op" id="2671868">,</span>&nbsp;<span class="ident" id="2671870">t</span>&nbsp;<span class="ident" id="2671872">Type</span><span class="op" id="2671876">)</span>&nbsp;<span class="ident" id="2671878">Value</span>&nbsp;<span class="op" id="2671884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671887">return</span>&nbsp;<span class="ident" id="2671894">makeInt</span><span class="op" id="2671901">(</span><span class="ident" id="2671902">v</span><span class="op" id="2671903">.</span><span class="ident" id="2671904">flag</span><span class="op" id="2671908">&amp;</span><span class="ident" id="2671909">flagRO</span><span class="op" id="2671915">,</span>&nbsp;<span class="ident" id="2671917">uint64</span><span class="op" id="2671923">(</span><span class="ident" id="2671924">int64</span><span class="op" id="2671929">(</span><span class="ident" id="2671930">v</span><span class="op" id="2671931">.</span><span class="ident" id="2671932">Float</span><span class="op" id="2671937">(</span><span class="op" id="2671938">)</span><span class="op" id="2671939">)</span><span class="op" id="2671940">)</span><span class="op" id="2671941">,</span>&nbsp;<span class="ident" id="2671943">t</span><span class="op" id="2671944">)</span><br>
<span class="lineno">2310</span><span class="op" id="2671946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671949">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2671981">func</span>&nbsp;<span class="ident" id="2671986">cvtFloatUint</span><span class="op" id="2671998">(</span><span class="ident" id="2671999">v</span>&nbsp;<span class="ident" id="2672001">Value</span><span class="op" id="2672006">,</span>&nbsp;<span class="ident" id="2672008">t</span>&nbsp;<span class="ident" id="2672010">Type</span><span class="op" id="2672014">)</span>&nbsp;<span class="ident" id="2672016">Value</span>&nbsp;<span class="op" id="2672022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672025">return</span>&nbsp;<span class="ident" id="2672032">makeInt</span><span class="op" id="2672039">(</span><span class="ident" id="2672040">v</span><span class="op" id="2672041">.</span><span class="ident" id="2672042">flag</span><span class="op" id="2672046">&amp;</span><span class="ident" id="2672047">flagRO</span><span class="op" id="2672053">,</span>&nbsp;<span class="ident" id="2672055">uint64</span><span class="op" id="2672061">(</span><span class="ident" id="2672062">v</span><span class="op" id="2672063">.</span><span class="ident" id="2672064">Float</span><span class="op" id="2672069">(</span><span class="op" id="2672070">)</span><span class="op" id="2672071">)</span><span class="op" id="2672072">,</span>&nbsp;<span class="ident" id="2672074">t</span><span class="op" id="2672075">)</span><br>
<span class="lineno">2315</span><span class="op" id="2672077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672080">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2672111">func</span>&nbsp;<span class="ident" id="2672116">cvtIntFloat</span><span class="op" id="2672127">(</span><span class="ident" id="2672128">v</span>&nbsp;<span class="ident" id="2672130">Value</span><span class="op" id="2672135">,</span>&nbsp;<span class="ident" id="2672137">t</span>&nbsp;<span class="ident" id="2672139">Type</span><span class="op" id="2672143">)</span>&nbsp;<span class="ident" id="2672145">Value</span>&nbsp;<span class="op" id="2672151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672154">return</span>&nbsp;<span class="ident" id="2672161">makeFloat</span><span class="op" id="2672170">(</span><span class="ident" id="2672171">v</span><span class="op" id="2672172">.</span><span class="ident" id="2672173">flag</span><span class="op" id="2672177">&amp;</span><span class="ident" id="2672178">flagRO</span><span class="op" id="2672184">,</span>&nbsp;<span class="builtintype" id="2672186">float64</span><span class="op" id="2672193">(</span><span class="ident" id="2672194">v</span><span class="op" id="2672195">.</span><span class="ident" id="2672196">Int</span><span class="op" id="2672199">(</span><span class="op" id="2672200">)</span><span class="op" id="2672201">)</span><span class="op" id="2672202">,</span>&nbsp;<span class="ident" id="2672204">t</span><span class="op" id="2672205">)</span><br>
<span class="lineno">2320</span><span class="op" id="2672207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672210">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2672242">func</span>&nbsp;<span class="ident" id="2672247">cvtUintFloat</span><span class="op" id="2672259">(</span><span class="ident" id="2672260">v</span>&nbsp;<span class="ident" id="2672262">Value</span><span class="op" id="2672267">,</span>&nbsp;<span class="ident" id="2672269">t</span>&nbsp;<span class="ident" id="2672271">Type</span><span class="op" id="2672275">)</span>&nbsp;<span class="ident" id="2672277">Value</span>&nbsp;<span class="op" id="2672283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672286">return</span>&nbsp;<span class="ident" id="2672293">makeFloat</span><span class="op" id="2672302">(</span><span class="ident" id="2672303">v</span><span class="op" id="2672304">.</span><span class="ident" id="2672305">flag</span><span class="op" id="2672309">&amp;</span><span class="ident" id="2672310">flagRO</span><span class="op" id="2672316">,</span>&nbsp;<span class="builtintype" id="2672318">float64</span><span class="op" id="2672325">(</span><span class="ident" id="2672326">v</span><span class="op" id="2672327">.</span><span class="ident" id="2672328">Uint</span><span class="op" id="2672332">(</span><span class="op" id="2672333">)</span><span class="op" id="2672334">)</span><span class="op" id="2672335">,</span>&nbsp;<span class="ident" id="2672337">t</span><span class="op" id="2672338">)</span><br>
<span class="lineno">2325</span><span class="op" id="2672340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672343">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2672376">func</span>&nbsp;<span class="ident" id="2672381">cvtFloat</span><span class="op" id="2672389">(</span><span class="ident" id="2672390">v</span>&nbsp;<span class="ident" id="2672392">Value</span><span class="op" id="2672397">,</span>&nbsp;<span class="ident" id="2672399">t</span>&nbsp;<span class="ident" id="2672401">Type</span><span class="op" id="2672405">)</span>&nbsp;<span class="ident" id="2672407">Value</span>&nbsp;<span class="op" id="2672413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672416">return</span>&nbsp;<span class="ident" id="2672423">makeFloat</span><span class="op" id="2672432">(</span><span class="ident" id="2672433">v</span><span class="op" id="2672434">.</span><span class="ident" id="2672435">flag</span><span class="op" id="2672439">&amp;</span><span class="ident" id="2672440">flagRO</span><span class="op" id="2672446">,</span>&nbsp;<span class="ident" id="2672448">v</span><span class="op" id="2672449">.</span><span class="ident" id="2672450">Float</span><span class="op" id="2672455">(</span><span class="op" id="2672456">)</span><span class="op" id="2672457">,</span>&nbsp;<span class="ident" id="2672459">t</span><span class="op" id="2672460">)</span><br>
<span class="lineno">2330</span><span class="op" id="2672462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672465">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2672502">func</span>&nbsp;<span class="ident" id="2672507">cvtComplex</span><span class="op" id="2672517">(</span><span class="ident" id="2672518">v</span>&nbsp;<span class="ident" id="2672520">Value</span><span class="op" id="2672525">,</span>&nbsp;<span class="ident" id="2672527">t</span>&nbsp;<span class="ident" id="2672529">Type</span><span class="op" id="2672533">)</span>&nbsp;<span class="ident" id="2672535">Value</span>&nbsp;<span class="op" id="2672541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672544">return</span>&nbsp;<span class="ident" id="2672551">makeComplex</span><span class="op" id="2672562">(</span><span class="ident" id="2672563">v</span><span class="op" id="2672564">.</span><span class="ident" id="2672565">flag</span><span class="op" id="2672569">&amp;</span><span class="ident" id="2672570">flagRO</span><span class="op" id="2672576">,</span>&nbsp;<span class="ident" id="2672578">v</span><span class="op" id="2672579">.</span><span class="ident" id="2672580">Complex</span><span class="op" id="2672587">(</span><span class="op" id="2672588">)</span><span class="op" id="2672589">,</span>&nbsp;<span class="ident" id="2672591">t</span><span class="op" id="2672592">)</span><br>
<span class="lineno">2335</span><span class="op" id="2672594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672597">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2672627">func</span>&nbsp;<span class="ident" id="2672632">cvtIntString</span><span class="op" id="2672644">(</span><span class="ident" id="2672645">v</span>&nbsp;<span class="ident" id="2672647">Value</span><span class="op" id="2672652">,</span>&nbsp;<span class="ident" id="2672654">t</span>&nbsp;<span class="ident" id="2672656">Type</span><span class="op" id="2672660">)</span>&nbsp;<span class="ident" id="2672662">Value</span>&nbsp;<span class="op" id="2672668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672671">return</span>&nbsp;<span class="ident" id="2672678">makeString</span><span class="op" id="2672688">(</span><span class="ident" id="2672689">v</span><span class="op" id="2672690">.</span><span class="ident" id="2672691">flag</span><span class="op" id="2672695">&amp;</span><span class="ident" id="2672696">flagRO</span><span class="op" id="2672702">,</span>&nbsp;<span class="builtintype" id="2672704">string</span><span class="op" id="2672710">(</span><span class="ident" id="2672711">v</span><span class="op" id="2672712">.</span><span class="ident" id="2672713">Int</span><span class="op" id="2672716">(</span><span class="op" id="2672717">)</span><span class="op" id="2672718">)</span><span class="op" id="2672719">,</span>&nbsp;<span class="ident" id="2672721">t</span><span class="op" id="2672722">)</span><br>
<span class="lineno">2340</span><span class="op" id="2672724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672727">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2672758">func</span>&nbsp;<span class="ident" id="2672763">cvtUintString</span><span class="op" id="2672776">(</span><span class="ident" id="2672777">v</span>&nbsp;<span class="ident" id="2672779">Value</span><span class="op" id="2672784">,</span>&nbsp;<span class="ident" id="2672786">t</span>&nbsp;<span class="ident" id="2672788">Type</span><span class="op" id="2672792">)</span>&nbsp;<span class="ident" id="2672794">Value</span>&nbsp;<span class="op" id="2672800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672803">return</span>&nbsp;<span class="ident" id="2672810">makeString</span><span class="op" id="2672820">(</span><span class="ident" id="2672821">v</span><span class="op" id="2672822">.</span><span class="ident" id="2672823">flag</span><span class="op" id="2672827">&amp;</span><span class="ident" id="2672828">flagRO</span><span class="op" id="2672834">,</span>&nbsp;<span class="builtintype" id="2672836">string</span><span class="op" id="2672842">(</span><span class="ident" id="2672843">v</span><span class="op" id="2672844">.</span><span class="ident" id="2672845">Uint</span><span class="op" id="2672849">(</span><span class="op" id="2672850">)</span><span class="op" id="2672851">)</span><span class="op" id="2672852">,</span>&nbsp;<span class="ident" id="2672854">t</span><span class="op" id="2672855">)</span><br>
<span class="lineno">2345</span><span class="op" id="2672857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672860">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2672891">func</span>&nbsp;<span class="ident" id="2672896">cvtBytesString</span><span class="op" id="2672910">(</span><span class="ident" id="2672911">v</span>&nbsp;<span class="ident" id="2672913">Value</span><span class="op" id="2672918">,</span>&nbsp;<span class="ident" id="2672920">t</span>&nbsp;<span class="ident" id="2672922">Type</span><span class="op" id="2672926">)</span>&nbsp;<span class="ident" id="2672928">Value</span>&nbsp;<span class="op" id="2672934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672937">return</span>&nbsp;<span class="ident" id="2672944">makeString</span><span class="op" id="2672954">(</span><span class="ident" id="2672955">v</span><span class="op" id="2672956">.</span><span class="ident" id="2672957">flag</span><span class="op" id="2672961">&amp;</span><span class="ident" id="2672962">flagRO</span><span class="op" id="2672968">,</span>&nbsp;<span class="builtintype" id="2672970">string</span><span class="op" id="2672976">(</span><span class="ident" id="2672977">v</span><span class="op" id="2672978">.</span><span class="ident" id="2672979">Bytes</span><span class="op" id="2672984">(</span><span class="op" id="2672985">)</span><span class="op" id="2672986">)</span><span class="op" id="2672987">,</span>&nbsp;<span class="ident" id="2672989">t</span><span class="op" id="2672990">)</span><br>
<span class="lineno">2350</span><span class="op" id="2672992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2672995">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2673026">func</span>&nbsp;<span class="ident" id="2673031">cvtStringBytes</span><span class="op" id="2673045">(</span><span class="ident" id="2673046">v</span>&nbsp;<span class="ident" id="2673048">Value</span><span class="op" id="2673053">,</span>&nbsp;<span class="ident" id="2673055">t</span>&nbsp;<span class="ident" id="2673057">Type</span><span class="op" id="2673061">)</span>&nbsp;<span class="ident" id="2673063">Value</span>&nbsp;<span class="op" id="2673069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673072">return</span>&nbsp;<span class="ident" id="2673079">makeBytes</span><span class="op" id="2673088">(</span><span class="ident" id="2673089">v</span><span class="op" id="2673090">.</span><span class="ident" id="2673091">flag</span><span class="op" id="2673095">&amp;</span><span class="ident" id="2673096">flagRO</span><span class="op" id="2673102">,</span>&nbsp;<span class="op" id="2673104">[</span><span class="op" id="2673105">]</span><span class="builtintype" id="2673106">byte</span><span class="op" id="2673110">(</span><span class="ident" id="2673111">v</span><span class="op" id="2673112">.</span><span class="ident" id="2673113">String</span><span class="op" id="2673119">(</span><span class="op" id="2673120">)</span><span class="op" id="2673121">)</span><span class="op" id="2673122">,</span>&nbsp;<span class="ident" id="2673124">t</span><span class="op" id="2673125">)</span><br>
<span class="lineno">2355</span><span class="op" id="2673127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2673130">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2673161">func</span>&nbsp;<span class="ident" id="2673166">cvtRunesString</span><span class="op" id="2673180">(</span><span class="ident" id="2673181">v</span>&nbsp;<span class="ident" id="2673183">Value</span><span class="op" id="2673188">,</span>&nbsp;<span class="ident" id="2673190">t</span>&nbsp;<span class="ident" id="2673192">Type</span><span class="op" id="2673196">)</span>&nbsp;<span class="ident" id="2673198">Value</span>&nbsp;<span class="op" id="2673204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673207">return</span>&nbsp;<span class="ident" id="2673214">makeString</span><span class="op" id="2673224">(</span><span class="ident" id="2673225">v</span><span class="op" id="2673226">.</span><span class="ident" id="2673227">flag</span><span class="op" id="2673231">&amp;</span><span class="ident" id="2673232">flagRO</span><span class="op" id="2673238">,</span>&nbsp;<span class="builtintype" id="2673240">string</span><span class="op" id="2673246">(</span><span class="ident" id="2673247">v</span><span class="op" id="2673248">.</span><span class="ident" id="2673249">runes</span><span class="op" id="2673254">(</span><span class="op" id="2673255">)</span><span class="op" id="2673256">)</span><span class="op" id="2673257">,</span>&nbsp;<span class="ident" id="2673259">t</span><span class="op" id="2673260">)</span><br>
<span class="lineno">2360</span><span class="op" id="2673262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2673265">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2673296">func</span>&nbsp;<span class="ident" id="2673301">cvtStringRunes</span><span class="op" id="2673315">(</span><span class="ident" id="2673316">v</span>&nbsp;<span class="ident" id="2673318">Value</span><span class="op" id="2673323">,</span>&nbsp;<span class="ident" id="2673325">t</span>&nbsp;<span class="ident" id="2673327">Type</span><span class="op" id="2673331">)</span>&nbsp;<span class="ident" id="2673333">Value</span>&nbsp;<span class="op" id="2673339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673342">return</span>&nbsp;<span class="ident" id="2673349">makeRunes</span><span class="op" id="2673358">(</span><span class="ident" id="2673359">v</span><span class="op" id="2673360">.</span><span class="ident" id="2673361">flag</span><span class="op" id="2673365">&amp;</span><span class="ident" id="2673366">flagRO</span><span class="op" id="2673372">,</span>&nbsp;<span class="op" id="2673374">[</span><span class="op" id="2673375">]</span><span class="builtintype" id="2673376">rune</span><span class="op" id="2673380">(</span><span class="ident" id="2673381">v</span><span class="op" id="2673382">.</span><span class="ident" id="2673383">String</span><span class="op" id="2673389">(</span><span class="op" id="2673390">)</span><span class="op" id="2673391">)</span><span class="op" id="2673392">,</span>&nbsp;<span class="ident" id="2673394">t</span><span class="op" id="2673395">)</span><br>
<span class="lineno">2365</span><span class="op" id="2673397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2673400">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2673426">func</span>&nbsp;<span class="ident" id="2673431">cvtDirect</span><span class="op" id="2673440">(</span><span class="ident" id="2673441">v</span>&nbsp;<span class="ident" id="2673443">Value</span><span class="op" id="2673448">,</span>&nbsp;<span class="ident" id="2673450">typ</span>&nbsp;<span class="ident" id="2673454">Type</span><span class="op" id="2673458">)</span>&nbsp;<span class="ident" id="2673460">Value</span>&nbsp;<span class="op" id="2673466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673469">f</span>&nbsp;<span class="op" id="2673471">:=</span>&nbsp;<span class="ident" id="2673474">v</span><span class="op" id="2673475">.</span><span class="ident" id="2673476">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673482">t</span>&nbsp;<span class="op" id="2673484">:=</span>&nbsp;<span class="ident" id="2673487">typ</span><span class="op" id="2673490">.</span><span class="ident" id="2673491">common</span><span class="op" id="2673497">(</span><span class="op" id="2673498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673501">ptr</span>&nbsp;<span class="op" id="2673505">:=</span>&nbsp;<span class="ident" id="2673508">v</span><span class="op" id="2673509">.</span><span class="ident" id="2673510">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673515">if</span>&nbsp;<span class="ident" id="2673518">f</span><span class="op" id="2673519">&amp;</span><span class="ident" id="2673520">flagAddr</span>&nbsp;<span class="op" id="2673529">!=</span>&nbsp;<span class="num" id="2673532">0</span>&nbsp;<span class="op" id="2673534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2673538">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673580">c</span>&nbsp;<span class="op" id="2673582">:=</span>&nbsp;<span class="ident" id="2673585">unsafe_New</span><span class="op" id="2673595">(</span><span class="ident" id="2673596">t</span><span class="op" id="2673597">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673601">memmove</span><span class="op" id="2673608">(</span><span class="ident" id="2673609">c</span><span class="op" id="2673610">,</span>&nbsp;<span class="ident" id="2673612">ptr</span><span class="op" id="2673615">,</span>&nbsp;<span class="ident" id="2673617">t</span><span class="op" id="2673618">.</span><span class="ident" id="2673619">size</span><span class="op" id="2673623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673627">ptr</span>&nbsp;<span class="op" id="2673631">=</span>&nbsp;<span class="ident" id="2673633">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673637">f</span>&nbsp;<span class="op" id="2673639">&amp;^=</span>&nbsp;<span class="ident" id="2673643">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2673653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673656">return</span>&nbsp;<span class="ident" id="2673663">Value</span><span class="op" id="2673668">{</span><span class="ident" id="2673669">t</span><span class="op" id="2673670">,</span>&nbsp;<span class="ident" id="2673672">ptr</span><span class="op" id="2673675">,</span>&nbsp;<span class="ident" id="2673677">v</span><span class="op" id="2673678">.</span><span class="ident" id="2673679">flag</span><span class="op" id="2673683">&amp;</span><span class="ident" id="2673684">flagRO</span>&nbsp;<span class="op" id="2673691">|</span>&nbsp;<span class="ident" id="2673693">f</span><span class="op" id="2673694">}</span>&nbsp;<span class="comment" id="2673696">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2673721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2673724">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2673760">func</span>&nbsp;<span class="ident" id="2673765">cvtT2I</span><span class="op" id="2673771">(</span><span class="ident" id="2673772">v</span>&nbsp;<span class="ident" id="2673774">Value</span><span class="op" id="2673779">,</span>&nbsp;<span class="ident" id="2673781">typ</span>&nbsp;<span class="ident" id="2673785">Type</span><span class="op" id="2673789">)</span>&nbsp;<span class="ident" id="2673791">Value</span>&nbsp;<span class="op" id="2673797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673800">target</span>&nbsp;<span class="op" id="2673807">:=</span>&nbsp;<span class="ident" id="2673810">unsafe_New</span><span class="op" id="2673820">(</span><span class="ident" id="2673821">typ</span><span class="op" id="2673824">.</span><span class="ident" id="2673825">common</span><span class="op" id="2673831">(</span><span class="op" id="2673832">)</span><span class="op" id="2673833">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673836">x</span>&nbsp;<span class="op" id="2673838">:=</span>&nbsp;<span class="ident" id="2673841">valueInterface</span><span class="op" id="2673855">(</span><span class="ident" id="2673856">v</span><span class="op" id="2673857">,</span>&nbsp;<span class="ident" id="2673859">false</span><span class="op" id="2673864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673867">if</span>&nbsp;<span class="ident" id="2673870">typ</span><span class="op" id="2673873">.</span><span class="ident" id="2673874">NumMethod</span><span class="op" id="2673883">(</span><span class="op" id="2673884">)</span>&nbsp;<span class="op" id="2673886">==</span>&nbsp;<span class="num" id="2673889">0</span>&nbsp;<span class="op" id="2673891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2673895">*</span><span class="op" id="2673896">(</span><span class="op" id="2673897">*</span><span class="keyword" id="2673898">interface</span><span class="op" id="2673907">{</span><span class="op" id="2673908">}</span><span class="op" id="2673909">)</span><span class="op" id="2673910">(</span><span class="ident" id="2673911">target</span><span class="op" id="2673917">)</span>&nbsp;<span class="op" id="2673919">=</span>&nbsp;<span class="ident" id="2673921">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2673924">}</span>&nbsp;<span class="keyword" id="2673926">else</span>&nbsp;<span class="op" id="2673931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2673935">ifaceE2I</span><span class="op" id="2673943">(</span><span class="ident" id="2673944">typ</span><span class="op" id="2673947">.</span><span class="op" id="2673948">(</span><span class="op" id="2673949">*</span><span class="ident" id="2673950">rtype</span><span class="op" id="2673955">)</span><span class="op" id="2673956">,</span>&nbsp;<span class="ident" id="2673958">x</span><span class="op" id="2673959">,</span>&nbsp;<span class="ident" id="2673961">target</span><span class="op" id="2673967">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2673970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2673973">return</span>&nbsp;<span class="ident" id="2673980">Value</span><span class="op" id="2673985">{</span><span class="ident" id="2673986">typ</span><span class="op" id="2673989">.</span><span class="ident" id="2673990">common</span><span class="op" id="2673996">(</span><span class="op" id="2673997">)</span><span class="op" id="2673998">,</span>&nbsp;<span class="ident" id="2674000">target</span><span class="op" id="2674006">,</span>&nbsp;<span class="ident" id="2674008">v</span><span class="op" id="2674009">.</span><span class="ident" id="2674010">flag</span><span class="op" id="2674014">&amp;</span><span class="ident" id="2674015">flagRO</span>&nbsp;<span class="op" id="2674022">|</span>&nbsp;<span class="ident" id="2674024">flagIndir</span>&nbsp;<span class="op" id="2674034">|</span>&nbsp;<span class="ident" id="2674036">flag</span><span class="op" id="2674040">(</span><span class="ident" id="2674041">Interface</span><span class="op" id="2674050">)</span><span class="op" id="2674051">}</span><br>
<span class="lineno"></span><span class="op" id="2674053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2674056">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2674093">func</span>&nbsp;<span class="ident" id="2674098">cvtI2I</span><span class="op" id="2674104">(</span><span class="ident" id="2674105">v</span>&nbsp;<span class="ident" id="2674107">Value</span><span class="op" id="2674112">,</span>&nbsp;<span class="ident" id="2674114">typ</span>&nbsp;<span class="ident" id="2674118">Type</span><span class="op" id="2674122">)</span>&nbsp;<span class="ident" id="2674124">Value</span>&nbsp;<span class="op" id="2674130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2674133">if</span>&nbsp;<span class="ident" id="2674136">v</span><span class="op" id="2674137">.</span><span class="ident" id="2674138">IsNil</span><span class="op" id="2674143">(</span><span class="op" id="2674144">)</span>&nbsp;<span class="op" id="2674146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2674150">ret</span>&nbsp;<span class="op" id="2674154">:=</span>&nbsp;<span class="ident" id="2674157">Zero</span><span class="op" id="2674161">(</span><span class="ident" id="2674162">typ</span><span class="op" id="2674165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2674169">ret</span><span class="op" id="2674172">.</span><span class="ident" id="2674173">flag</span>&nbsp;<span class="op" id="2674178">|=</span>&nbsp;<span class="ident" id="2674181">v</span><span class="op" id="2674182">.</span><span class="ident" id="2674183">flag</span>&nbsp;<span class="op" id="2674188">&amp;</span>&nbsp;<span class="ident" id="2674190">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2674199">return</span>&nbsp;<span class="ident" id="2674206">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2674211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2674214">return</span>&nbsp;<span class="ident" id="2674221">cvtT2I</span><span class="op" id="2674227">(</span><span class="ident" id="2674228">v</span><span class="op" id="2674229">.</span><span class="ident" id="2674230">Elem</span><span class="op" id="2674234">(</span><span class="op" id="2674235">)</span><span class="op" id="2674236">,</span>&nbsp;<span class="ident" id="2674238">typ</span><span class="op" id="2674241">)</span><br>
<span class="lineno"></span><span class="op" id="2674243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2674246">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2674275">func</span>&nbsp;<span class="ident" id="2674280">chancap</span><span class="op" id="2674287">(</span><span class="ident" id="2674288">ch</span>&nbsp;<span class="ident" id="2674291">unsafe</span><span class="op" id="2674297">.</span><span class="ident" id="2674298">Pointer</span><span class="op" id="2674305">)</span>&nbsp;<span class="builtintype" id="2674307">int</span><br>
<span class="lineno"></span><span class="keyword" id="2674311">func</span>&nbsp;<span class="ident" id="2674316">chanclose</span><span class="op" id="2674325">(</span><span class="ident" id="2674326">ch</span>&nbsp;<span class="ident" id="2674329">unsafe</span><span class="op" id="2674335">.</span><span class="ident" id="2674336">Pointer</span><span class="op" id="2674343">)</span><br>
<span class="lineno"></span><span class="keyword" id="2674345">func</span>&nbsp;<span class="ident" id="2674350">chanlen</span><span class="op" id="2674357">(</span><span class="ident" id="2674358">ch</span>&nbsp;<span class="ident" id="2674361">unsafe</span><span class="op" id="2674367">.</span><span class="ident" id="2674368">Pointer</span><span class="op" id="2674375">)</span>&nbsp;<span class="builtintype" id="2674377">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2674382">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2674396">func</span>&nbsp;<span class="ident" id="2674401">chanrecv</span><span class="op" id="2674409">(</span><span class="ident" id="2674410">t</span>&nbsp;<span class="op" id="2674412">*</span><span class="ident" id="2674413">rtype</span><span class="op" id="2674418">,</span>&nbsp;<span class="ident" id="2674420">ch</span>&nbsp;<span class="ident" id="2674423">unsafe</span><span class="op" id="2674429">.</span><span class="ident" id="2674430">Pointer</span><span class="op" id="2674437">,</span>&nbsp;<span class="ident" id="2674439">nb</span>&nbsp;<span class="builtintype" id="2674442">bool</span><span class="op" id="2674446">,</span>&nbsp;<span class="ident" id="2674448">val</span>&nbsp;<span class="ident" id="2674452">unsafe</span><span class="op" id="2674458">.</span><span class="ident" id="2674459">Pointer</span><span class="op" id="2674466">)</span>&nbsp;<span class="op" id="2674468">(</span><span class="ident" id="2674469">selected</span><span class="op" id="2674477">,</span>&nbsp;<span class="ident" id="2674479">received</span>&nbsp;<span class="builtintype" id="2674488">bool</span><span class="op" id="2674492">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2674495">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2674509">func</span>&nbsp;<span class="ident" id="2674514">chansend</span><span class="op" id="2674522">(</span><span class="ident" id="2674523">t</span>&nbsp;<span class="op" id="2674525">*</span><span class="ident" id="2674526">rtype</span><span class="op" id="2674531">,</span>&nbsp;<span class="ident" id="2674533">ch</span>&nbsp;<span class="ident" id="2674536">unsafe</span><span class="op" id="2674542">.</span><span class="ident" id="2674543">Pointer</span><span class="op" id="2674550">,</span>&nbsp;<span class="ident" id="2674552">val</span>&nbsp;<span class="ident" id="2674556">unsafe</span><span class="op" id="2674562">.</span><span class="ident" id="2674563">Pointer</span><span class="op" id="2674570">,</span>&nbsp;<span class="ident" id="2674572">nb</span>&nbsp;<span class="builtintype" id="2674575">bool</span><span class="op" id="2674579">)</span>&nbsp;<span class="builtintype" id="2674581">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2674587">func</span>&nbsp;<span class="ident" id="2674592">makechan</span><span class="op" id="2674600">(</span><span class="ident" id="2674601">typ</span>&nbsp;<span class="op" id="2674605">*</span><span class="ident" id="2674606">rtype</span><span class="op" id="2674611">,</span>&nbsp;<span class="ident" id="2674613">size</span>&nbsp;<span class="ident" id="2674618">uint64</span><span class="op" id="2674624">)</span>&nbsp;<span class="op" id="2674626">(</span><span class="ident" id="2674627">ch</span>&nbsp;<span class="ident" id="2674630">unsafe</span><span class="op" id="2674636">.</span><span class="ident" id="2674637">Pointer</span><span class="op" id="2674644">)</span><br>
<span class="lineno"></span><span class="keyword" id="2674646">func</span>&nbsp;<span class="ident" id="2674651">makemap</span><span class="op" id="2674658">(</span><span class="ident" id="2674659">t</span>&nbsp;<span class="op" id="2674661">*</span><span class="ident" id="2674662">rtype</span><span class="op" id="2674667">)</span>&nbsp;<span class="op" id="2674669">(</span><span class="ident" id="2674670">m</span>&nbsp;<span class="ident" id="2674672">unsafe</span><span class="op" id="2674678">.</span><span class="ident" id="2674679">Pointer</span><span class="op" id="2674686">)</span><br>
<span class="lineno"></span><span class="keyword" id="2674688">func</span>&nbsp;<span class="ident" id="2674693">mapaccess</span><span class="op" id="2674702">(</span><span class="ident" id="2674703">t</span>&nbsp;<span class="op" id="2674705">*</span><span class="ident" id="2674706">rtype</span><span class="op" id="2674711">,</span>&nbsp;<span class="ident" id="2674713">m</span>&nbsp;<span class="ident" id="2674715">unsafe</span><span class="op" id="2674721">.</span><span class="ident" id="2674722">Pointer</span><span class="op" id="2674729">,</span>&nbsp;<span class="ident" id="2674731">key</span>&nbsp;<span class="ident" id="2674735">unsafe</span><span class="op" id="2674741">.</span><span class="ident" id="2674742">Pointer</span><span class="op" id="2674749">)</span>&nbsp;<span class="op" id="2674751">(</span><span class="ident" id="2674752">val</span>&nbsp;<span class="ident" id="2674756">unsafe</span><span class="op" id="2674762">.</span><span class="ident" id="2674763">Pointer</span><span class="op" id="2674770">)</span><br>
<span class="lineno"></span><span class="keyword" id="2674772">func</span>&nbsp;<span class="ident" id="2674777">mapassign</span><span class="op" id="2674786">(</span><span class="ident" id="2674787">t</span>&nbsp;<span class="op" id="2674789">*</span><span class="ident" id="2674790">rtype</span><span class="op" id="2674795">,</span>&nbsp;<span class="ident" id="2674797">m</span>&nbsp;<span class="ident" id="2674799">unsafe</span><span class="op" id="2674805">.</span><span class="ident" id="2674806">Pointer</span><span class="op" id="2674813">,</span>&nbsp;<span class="ident" id="2674815">key</span><span class="op" id="2674818">,</span>&nbsp;<span class="ident" id="2674820">val</span>&nbsp;<span class="ident" id="2674824">unsafe</span><span class="op" id="2674830">.</span><span class="ident" id="2674831">Pointer</span><span class="op" id="2674838">)</span><br>
<span class="lineno"></span><span class="keyword" id="2674840">func</span>&nbsp;<span class="ident" id="2674845">mapdelete</span><span class="op" id="2674854">(</span><span class="ident" id="2674855">t</span>&nbsp;<span class="op" id="2674857">*</span><span class="ident" id="2674858">rtype</span><span class="op" id="2674863">,</span>&nbsp;<span class="ident" id="2674865">m</span>&nbsp;<span class="ident" id="2674867">unsafe</span><span class="op" id="2674873">.</span><span class="ident" id="2674874">Pointer</span><span class="op" id="2674881">,</span>&nbsp;<span class="ident" id="2674883">key</span>&nbsp;<span class="ident" id="2674887">unsafe</span><span class="op" id="2674893">.</span><span class="ident" id="2674894">Pointer</span><span class="op" id="2674901">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2674903">func</span>&nbsp;<span class="ident" id="2674908">mapiterinit</span><span class="op" id="2674919">(</span><span class="ident" id="2674920">t</span>&nbsp;<span class="op" id="2674922">*</span><span class="ident" id="2674923">rtype</span><span class="op" id="2674928">,</span>&nbsp;<span class="ident" id="2674930">m</span>&nbsp;<span class="ident" id="2674932">unsafe</span><span class="op" id="2674938">.</span><span class="ident" id="2674939">Pointer</span><span class="op" id="2674946">)</span>&nbsp;<span class="ident" id="2674948">unsafe</span><span class="op" id="2674954">.</span><span class="ident" id="2674955">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2674963">func</span>&nbsp;<span class="ident" id="2674968">mapiterkey</span><span class="op" id="2674978">(</span><span class="ident" id="2674979">it</span>&nbsp;<span class="ident" id="2674982">unsafe</span><span class="op" id="2674988">.</span><span class="ident" id="2674989">Pointer</span><span class="op" id="2674996">)</span>&nbsp;<span class="op" id="2674998">(</span><span class="ident" id="2674999">key</span>&nbsp;<span class="ident" id="2675003">unsafe</span><span class="op" id="2675009">.</span><span class="ident" id="2675010">Pointer</span><span class="op" id="2675017">)</span><br>
<span class="lineno"></span><span class="keyword" id="2675019">func</span>&nbsp;<span class="ident" id="2675024">mapiternext</span><span class="op" id="2675035">(</span><span class="ident" id="2675036">it</span>&nbsp;<span class="ident" id="2675039">unsafe</span><span class="op" id="2675045">.</span><span class="ident" id="2675046">Pointer</span><span class="op" id="2675053">)</span><br>
<span class="lineno"></span><span class="keyword" id="2675055">func</span>&nbsp;<span class="ident" id="2675060">maplen</span><span class="op" id="2675066">(</span><span class="ident" id="2675067">m</span>&nbsp;<span class="ident" id="2675069">unsafe</span><span class="op" id="2675075">.</span><span class="ident" id="2675076">Pointer</span><span class="op" id="2675083">)</span>&nbsp;<span class="builtintype" id="2675085">int</span><br>
<span class="lineno"></span><span class="keyword" id="2675089">func</span>&nbsp;<span class="ident" id="2675094">call</span><span class="op" id="2675098">(</span><span class="ident" id="2675099">fn</span><span class="op" id="2675101">,</span>&nbsp;<span class="ident" id="2675103">arg</span>&nbsp;<span class="ident" id="2675107">unsafe</span><span class="op" id="2675113">.</span><span class="ident" id="2675114">Pointer</span><span class="op" id="2675121">,</span>&nbsp;<span class="ident" id="2675123">n</span>&nbsp;<span class="builtintype" id="2675125">uint32</span><span class="op" id="2675131">,</span>&nbsp;<span class="ident" id="2675133">retoffset</span>&nbsp;<span class="builtintype" id="2675143">uint32</span><span class="op" id="2675149">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2675152">func</span>&nbsp;<span class="ident" id="2675157">ifaceE2I</span><span class="op" id="2675165">(</span><span class="ident" id="2675166">t</span>&nbsp;<span class="op" id="2675168">*</span><span class="ident" id="2675169">rtype</span><span class="op" id="2675174">,</span>&nbsp;<span class="ident" id="2675176">src</span>&nbsp;<span class="keyword" id="2675180">interface</span><span class="op" id="2675189">{</span><span class="op" id="2675190">}</span><span class="op" id="2675191">,</span>&nbsp;<span class="ident" id="2675193">dst</span>&nbsp;<span class="ident" id="2675197">unsafe</span><span class="op" id="2675203">.</span><span class="ident" id="2675204">Pointer</span><span class="op" id="2675211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2675214">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2675228">func</span>&nbsp;<span class="ident" id="2675233">memmove</span><span class="op" id="2675240">(</span><span class="ident" id="2675241">adst</span><span class="op" id="2675245">,</span>&nbsp;<span class="ident" id="2675247">asrc</span>&nbsp;<span class="ident" id="2675252">unsafe</span><span class="op" id="2675258">.</span><span class="ident" id="2675259">Pointer</span><span class="op" id="2675266">,</span>&nbsp;<span class="ident" id="2675268">n</span>&nbsp;<span class="builtintype" id="2675270">uintptr</span><span class="op" id="2675277">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2675280">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2675334">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2675395">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2675426">func</span>&nbsp;<span class="ident" id="2675431">escapes</span><span class="op" id="2675438">(</span><span class="ident" id="2675439">x</span>&nbsp;<span class="keyword" id="2675441">interface</span><span class="op" id="2675450">{</span><span class="op" id="2675451">}</span><span class="op" id="2675452">)</span>&nbsp;<span class="op" id="2675454">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2675457">if</span>&nbsp;<span class="ident" id="2675460">dummy</span><span class="op" id="2675465">.</span><span class="ident" id="2675466">b</span>&nbsp;<span class="op" id="2675468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2675472">dummy</span><span class="op" id="2675477">.</span><span class="ident" id="2675478">x</span>&nbsp;<span class="op" id="2675480">=</span>&nbsp;<span class="ident" id="2675482">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2675485">}</span><br>
<span class="lineno"></span><span class="op" id="2675487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2675490">var</span>&nbsp;<span class="ident" id="2675494">dummy</span>&nbsp;<span class="keyword" id="2675500">struct</span>&nbsp;<span class="op" id="2675507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2675510">b</span>&nbsp;<span class="builtintype" id="2675512">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2675518">x</span>&nbsp;<span class="keyword" id="2675520">interface</span><span class="op" id="2675529">{</span><span class="op" id="2675530">}</span><br>
<span class="lineno"></span><span class="op" id="2675532">}</span>
</div>
</body>
</html>
