<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5647866">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5647922">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5647976">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5648027">package</span>&nbsp;<span class="ident" id="5648035">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5648042">import</span>&nbsp;<span class="op" id="5648049">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5648052">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5648059">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5648069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5648072">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5648143">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5648211">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5648277">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5648345">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5648385">type</span>&nbsp;<span class="ident" id="5648390">typeUnit</span>&nbsp;<span class="keyword" id="5648399">struct</span>&nbsp;<span class="op" id="5648406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648409">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648415">toff</span>&nbsp;&nbsp;<span class="ident" id="5648421">Offset</span>&nbsp;<span class="comment" id="5648428">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648470">name</span>&nbsp;&nbsp;<span class="builtintype" id="5648476">string</span>&nbsp;<span class="comment" id="5648483">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648516">cache</span>&nbsp;<span class="ident" id="5648522">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5648529">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5648562">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5648565">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5648598">func</span>&nbsp;<span class="op" id="5648603">(</span><span class="ident" id="5648604">d</span>&nbsp;<span class="op" id="5648606">*</span><span class="ident" id="5648607">Data</span><span class="op" id="5648611">)</span>&nbsp;<span class="ident" id="5648613">parseTypes</span><span class="op" id="5648623">(</span><span class="ident" id="5648624">name</span>&nbsp;<span class="builtintype" id="5648629">string</span><span class="op" id="5648635">,</span>&nbsp;<span class="ident" id="5648637">types</span>&nbsp;<span class="op" id="5648643">[</span><span class="op" id="5648644">]</span><span class="builtintype" id="5648645">byte</span><span class="op" id="5648649">)</span>&nbsp;<span class="builtintype" id="5648651">error</span>&nbsp;<span class="op" id="5648657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648660">b</span>&nbsp;<span class="op" id="5648662">:=</span>&nbsp;<span class="ident" id="5648665">makeBuf</span><span class="op" id="5648672">(</span><span class="ident" id="5648673">d</span><span class="op" id="5648674">,</span>&nbsp;<span class="ident" id="5648676">unknownFormat</span><span class="op" id="5648689">{</span><span class="op" id="5648690">}</span><span class="op" id="5648691">,</span>&nbsp;<span class="ident" id="5648693">name</span><span class="op" id="5648697">,</span>&nbsp;<span class="num" id="5648699">0</span><span class="op" id="5648700">,</span>&nbsp;<span class="ident" id="5648702">types</span><span class="op" id="5648707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648710">for</span>&nbsp;<span class="builtinfunc" id="5648714">len</span><span class="op" id="5648717">(</span><span class="ident" id="5648718">b</span><span class="op" id="5648719">.</span><span class="ident" id="5648720">data</span><span class="op" id="5648724">)</span>&nbsp;<span class="op" id="5648726">&gt;</span>&nbsp;<span class="num" id="5648728">0</span>&nbsp;<span class="op" id="5648730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648734">base</span>&nbsp;<span class="op" id="5648739">:=</span>&nbsp;<span class="ident" id="5648742">b</span><span class="op" id="5648743">.</span><span class="ident" id="5648744">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648750">dwarf64</span>&nbsp;<span class="op" id="5648758">:=</span>&nbsp;<span class="builtintype" id="5648761">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648769">n</span>&nbsp;<span class="op" id="5648771">:=</span>&nbsp;<span class="ident" id="5648774">b</span><span class="op" id="5648775">.</span><span class="builtintype" id="5648776">uint32</span><span class="op" id="5648782">(</span><span class="op" id="5648783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648787">if</span>&nbsp;<span class="ident" id="5648790">n</span>&nbsp;<span class="op" id="5648792">==</span>&nbsp;<span class="num" id="5648795">0xffffffff</span>&nbsp;<span class="op" id="5648806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648811">n64</span>&nbsp;<span class="op" id="5648815">:=</span>&nbsp;<span class="ident" id="5648818">b</span><span class="op" id="5648819">.</span><span class="ident" id="5648820">uint64</span><span class="op" id="5648826">(</span><span class="op" id="5648827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648832">if</span>&nbsp;<span class="ident" id="5648835">n64</span>&nbsp;<span class="op" id="5648839">!=</span>&nbsp;<span class="ident" id="5648842">uint64</span><span class="op" id="5648848">(</span><span class="builtintype" id="5648849">uint32</span><span class="op" id="5648855">(</span><span class="ident" id="5648856">n64</span><span class="op" id="5648859">)</span><span class="op" id="5648860">)</span>&nbsp;<span class="op" id="5648862">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648868">b</span><span class="op" id="5648869">.</span><span class="builtintype" id="5648870">error</span><span class="op" id="5648875">(</span><span class="string" id="5648876">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5648903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648909">return</span>&nbsp;<span class="ident" id="5648916">b</span><span class="op" id="5648917">.</span><span class="ident" id="5648918">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648930">n</span>&nbsp;<span class="op" id="5648932">=</span>&nbsp;<span class="builtintype" id="5648934">uint32</span><span class="op" id="5648940">(</span><span class="ident" id="5648941">n64</span><span class="op" id="5648944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648949">dwarf64</span>&nbsp;<span class="op" id="5648957">=</span>&nbsp;<span class="builtintype" id="5648959">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648970">hdroff</span>&nbsp;<span class="op" id="5648977">:=</span>&nbsp;<span class="ident" id="5648980">b</span><span class="op" id="5648981">.</span><span class="ident" id="5648982">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648988">vers</span>&nbsp;<span class="op" id="5648993">:=</span>&nbsp;<span class="ident" id="5648996">b</span><span class="op" id="5648997">.</span><span class="builtintype" id="5648998">uint16</span><span class="op" id="5649004">(</span><span class="op" id="5649005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649009">if</span>&nbsp;<span class="ident" id="5649012">vers</span>&nbsp;<span class="op" id="5649017">!=</span>&nbsp;<span class="num" id="5649020">4</span>&nbsp;<span class="op" id="5649022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649027">b</span><span class="op" id="5649028">.</span><span class="builtintype" id="5649029">error</span><span class="op" id="5649034">(</span><span class="string" id="5649035">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5649064">+</span>&nbsp;<span class="ident" id="5649066">strconv</span><span class="op" id="5649073">.</span><span class="ident" id="5649074">Itoa</span><span class="op" id="5649078">(</span><span class="builtintype" id="5649079">int</span><span class="op" id="5649082">(</span><span class="ident" id="5649083">vers</span><span class="op" id="5649087">)</span><span class="op" id="5649088">)</span><span class="op" id="5649089">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649094">return</span>&nbsp;<span class="ident" id="5649101">b</span><span class="op" id="5649102">.</span><span class="ident" id="5649103">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649113">var</span>&nbsp;<span class="ident" id="5649117">ao</span>&nbsp;<span class="builtintype" id="5649120">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649129">if</span>&nbsp;<span class="op" id="5649132">!</span><span class="ident" id="5649133">dwarf64</span>&nbsp;<span class="op" id="5649141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649146">ao</span>&nbsp;<span class="op" id="5649149">=</span>&nbsp;<span class="ident" id="5649151">b</span><span class="op" id="5649152">.</span><span class="builtintype" id="5649153">uint32</span><span class="op" id="5649159">(</span><span class="op" id="5649160">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649164">}</span>&nbsp;<span class="keyword" id="5649166">else</span>&nbsp;<span class="op" id="5649171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649176">ao64</span>&nbsp;<span class="op" id="5649181">:=</span>&nbsp;<span class="ident" id="5649184">b</span><span class="op" id="5649185">.</span><span class="ident" id="5649186">uint64</span><span class="op" id="5649192">(</span><span class="op" id="5649193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649198">if</span>&nbsp;<span class="ident" id="5649201">ao64</span>&nbsp;<span class="op" id="5649206">!=</span>&nbsp;<span class="ident" id="5649209">uint64</span><span class="op" id="5649215">(</span><span class="builtintype" id="5649216">uint32</span><span class="op" id="5649222">(</span><span class="ident" id="5649223">ao64</span><span class="op" id="5649227">)</span><span class="op" id="5649228">)</span>&nbsp;<span class="op" id="5649230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649236">b</span><span class="op" id="5649237">.</span><span class="builtintype" id="5649238">error</span><span class="op" id="5649243">(</span><span class="string" id="5649244">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5649278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649284">return</span>&nbsp;<span class="ident" id="5649291">b</span><span class="op" id="5649292">.</span><span class="ident" id="5649293">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649305">ao</span>&nbsp;<span class="op" id="5649308">=</span>&nbsp;<span class="builtintype" id="5649310">uint32</span><span class="op" id="5649316">(</span><span class="ident" id="5649317">ao64</span><span class="op" id="5649321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649329">atable</span><span class="op" id="5649335">,</span>&nbsp;<span class="ident" id="5649337">err</span>&nbsp;<span class="op" id="5649341">:=</span>&nbsp;<span class="ident" id="5649344">d</span><span class="op" id="5649345">.</span><span class="ident" id="5649346">parseAbbrev</span><span class="op" id="5649357">(</span><span class="ident" id="5649358">ao</span><span class="op" id="5649360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649364">if</span>&nbsp;<span class="ident" id="5649367">err</span>&nbsp;<span class="op" id="5649371">!=</span>&nbsp;<span class="ident" id="5649374">nil</span>&nbsp;<span class="op" id="5649378">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649383">return</span>&nbsp;<span class="ident" id="5649390">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649400">asize</span>&nbsp;<span class="op" id="5649406">:=</span>&nbsp;<span class="ident" id="5649409">b</span><span class="op" id="5649410">.</span><span class="builtintype" id="5649411">uint8</span><span class="op" id="5649416">(</span><span class="op" id="5649417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649421">sig</span>&nbsp;<span class="op" id="5649425">:=</span>&nbsp;<span class="ident" id="5649428">b</span><span class="op" id="5649429">.</span><span class="ident" id="5649430">uint64</span><span class="op" id="5649436">(</span><span class="op" id="5649437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649442">var</span>&nbsp;<span class="ident" id="5649446">toff</span>&nbsp;<span class="builtintype" id="5649451">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649460">if</span>&nbsp;<span class="op" id="5649463">!</span><span class="ident" id="5649464">dwarf64</span>&nbsp;<span class="op" id="5649472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649477">toff</span>&nbsp;<span class="op" id="5649482">=</span>&nbsp;<span class="ident" id="5649484">b</span><span class="op" id="5649485">.</span><span class="builtintype" id="5649486">uint32</span><span class="op" id="5649492">(</span><span class="op" id="5649493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649497">}</span>&nbsp;<span class="keyword" id="5649499">else</span>&nbsp;<span class="op" id="5649504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649509">to64</span>&nbsp;<span class="op" id="5649514">:=</span>&nbsp;<span class="ident" id="5649517">b</span><span class="op" id="5649518">.</span><span class="ident" id="5649519">uint64</span><span class="op" id="5649525">(</span><span class="op" id="5649526">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649531">if</span>&nbsp;<span class="ident" id="5649534">to64</span>&nbsp;<span class="op" id="5649539">!=</span>&nbsp;<span class="ident" id="5649542">uint64</span><span class="op" id="5649548">(</span><span class="builtintype" id="5649549">uint32</span><span class="op" id="5649555">(</span><span class="ident" id="5649556">to64</span><span class="op" id="5649560">)</span><span class="op" id="5649561">)</span>&nbsp;<span class="op" id="5649563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649569">b</span><span class="op" id="5649570">.</span><span class="builtintype" id="5649571">error</span><span class="op" id="5649576">(</span><span class="string" id="5649577">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5649609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649615">return</span>&nbsp;<span class="ident" id="5649622">b</span><span class="op" id="5649623">.</span><span class="ident" id="5649624">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649636">toff</span>&nbsp;<span class="op" id="5649641">=</span>&nbsp;<span class="builtintype" id="5649643">uint32</span><span class="op" id="5649649">(</span><span class="ident" id="5649650">to64</span><span class="op" id="5649654">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649663">boff</span>&nbsp;<span class="op" id="5649668">:=</span>&nbsp;<span class="ident" id="5649671">b</span><span class="op" id="5649672">.</span><span class="ident" id="5649673">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649679">d</span><span class="op" id="5649680">.</span><span class="ident" id="5649681">typeSigs</span><span class="op" id="5649689">[</span><span class="ident" id="5649690">sig</span><span class="op" id="5649693">]</span>&nbsp;<span class="op" id="5649695">=</span>&nbsp;<span class="op" id="5649697">&amp;</span><span class="ident" id="5649698">typeUnit</span><span class="op" id="5649706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649711">unit</span><span class="op" id="5649715">:</span>&nbsp;<span class="ident" id="5649717">unit</span><span class="op" id="5649721">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649727">base</span><span class="op" id="5649731">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5649735">base</span><span class="op" id="5649739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649745">off</span><span class="op" id="5649748">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5649753">boff</span><span class="op" id="5649757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649763">data</span><span class="op" id="5649767">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5649771">b</span><span class="op" id="5649772">.</span><span class="ident" id="5649773">bytes</span><span class="op" id="5649778">(</span><span class="builtintype" id="5649779">int</span><span class="op" id="5649782">(</span><span class="ident" id="5649783">Offset</span><span class="op" id="5649789">(</span><span class="ident" id="5649790">n</span><span class="op" id="5649791">)</span>&nbsp;<span class="op" id="5649793">-</span>&nbsp;<span class="op" id="5649795">(</span><span class="ident" id="5649796">b</span><span class="op" id="5649797">.</span><span class="ident" id="5649798">off</span>&nbsp;<span class="op" id="5649802">-</span>&nbsp;<span class="ident" id="5649804">hdroff</span><span class="op" id="5649810">)</span><span class="op" id="5649811">)</span><span class="op" id="5649812">)</span><span class="op" id="5649813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649819">atable</span><span class="op" id="5649825">:</span>&nbsp;<span class="ident" id="5649827">atable</span><span class="op" id="5649833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649839">asize</span><span class="op" id="5649844">:</span>&nbsp;&nbsp;<span class="builtintype" id="5649847">int</span><span class="op" id="5649850">(</span><span class="ident" id="5649851">asize</span><span class="op" id="5649856">)</span><span class="op" id="5649857">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649863">vers</span><span class="op" id="5649867">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5649871">int</span><span class="op" id="5649874">(</span><span class="ident" id="5649875">vers</span><span class="op" id="5649879">)</span><span class="op" id="5649880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649886">is64</span><span class="op" id="5649890">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5649894">dwarf64</span><span class="op" id="5649901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649906">}</span><span class="op" id="5649907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649912">toff</span><span class="op" id="5649916">:</span>&nbsp;<span class="ident" id="5649918">Offset</span><span class="op" id="5649924">(</span><span class="ident" id="5649925">toff</span><span class="op" id="5649929">)</span><span class="op" id="5649930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5649935">name</span><span class="op" id="5649939">:</span>&nbsp;<span class="ident" id="5649941">name</span><span class="op" id="5649945">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649953">if</span>&nbsp;<span class="ident" id="5649956">b</span><span class="op" id="5649957">.</span><span class="ident" id="5649958">err</span>&nbsp;<span class="op" id="5649962">!=</span>&nbsp;<span class="ident" id="5649965">nil</span>&nbsp;<span class="op" id="5649969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649974">return</span>&nbsp;<span class="ident" id="5649981">b</span><span class="op" id="5649982">.</span><span class="ident" id="5649983">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649992">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649995">return</span>&nbsp;<span class="ident" id="5650002">nil</span><br>
<span class="lineno"></span><span class="op" id="5650006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650009">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5650050">func</span>&nbsp;<span class="op" id="5650055">(</span><span class="ident" id="5650056">d</span>&nbsp;<span class="op" id="5650058">*</span><span class="ident" id="5650059">Data</span><span class="op" id="5650063">)</span>&nbsp;<span class="ident" id="5650065">sigToType</span><span class="op" id="5650074">(</span><span class="ident" id="5650075">sig</span>&nbsp;<span class="ident" id="5650079">uint64</span><span class="op" id="5650085">)</span>&nbsp;<span class="op" id="5650087">(</span><span class="ident" id="5650088">Type</span><span class="op" id="5650092">,</span>&nbsp;<span class="builtintype" id="5650094">error</span><span class="op" id="5650099">)</span>&nbsp;<span class="op" id="5650101">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650104">tu</span>&nbsp;<span class="op" id="5650107">:=</span>&nbsp;<span class="ident" id="5650110">d</span><span class="op" id="5650111">.</span><span class="ident" id="5650112">typeSigs</span><span class="op" id="5650120">[</span><span class="ident" id="5650121">sig</span><span class="op" id="5650124">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650127">if</span>&nbsp;<span class="ident" id="5650130">tu</span>&nbsp;<span class="op" id="5650133">==</span>&nbsp;<span class="ident" id="5650136">nil</span>&nbsp;<span class="op" id="5650140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650144">return</span>&nbsp;<span class="ident" id="5650151">nil</span><span class="op" id="5650154">,</span>&nbsp;<span class="ident" id="5650156">fmt</span><span class="op" id="5650159">.</span><span class="ident" id="5650160">Errorf</span><span class="op" id="5650166">(</span><span class="string" id="5650167">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5650199">,</span>&nbsp;<span class="ident" id="5650201">sig</span><span class="op" id="5650204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650210">if</span>&nbsp;<span class="ident" id="5650213">tu</span><span class="op" id="5650215">.</span><span class="ident" id="5650216">cache</span>&nbsp;<span class="op" id="5650222">!=</span>&nbsp;<span class="ident" id="5650225">nil</span>&nbsp;<span class="op" id="5650229">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650233">return</span>&nbsp;<span class="ident" id="5650240">tu</span><span class="op" id="5650242">.</span><span class="ident" id="5650243">cache</span><span class="op" id="5650248">,</span>&nbsp;<span class="ident" id="5650250">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650259">b</span>&nbsp;<span class="op" id="5650261">:=</span>&nbsp;<span class="ident" id="5650264">makeBuf</span><span class="op" id="5650271">(</span><span class="ident" id="5650272">d</span><span class="op" id="5650273">,</span>&nbsp;<span class="ident" id="5650275">tu</span><span class="op" id="5650277">,</span>&nbsp;<span class="ident" id="5650279">tu</span><span class="op" id="5650281">.</span><span class="ident" id="5650282">name</span><span class="op" id="5650286">,</span>&nbsp;<span class="ident" id="5650288">tu</span><span class="op" id="5650290">.</span><span class="ident" id="5650291">off</span><span class="op" id="5650294">,</span>&nbsp;<span class="ident" id="5650296">tu</span><span class="op" id="5650298">.</span><span class="ident" id="5650299">data</span><span class="op" id="5650303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650306">r</span>&nbsp;<span class="op" id="5650308">:=</span>&nbsp;<span class="op" id="5650311">&amp;</span><span class="ident" id="5650312">typeUnitReader</span><span class="op" id="5650326">{</span><span class="ident" id="5650327">d</span><span class="op" id="5650328">:</span>&nbsp;<span class="ident" id="5650330">d</span><span class="op" id="5650331">,</span>&nbsp;<span class="ident" id="5650333">tu</span><span class="op" id="5650335">:</span>&nbsp;<span class="ident" id="5650337">tu</span><span class="op" id="5650339">,</span>&nbsp;<span class="ident" id="5650341">b</span><span class="op" id="5650342">:</span>&nbsp;<span class="ident" id="5650344">b</span><span class="op" id="5650345">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650348">t</span><span class="op" id="5650349">,</span>&nbsp;<span class="ident" id="5650351">err</span>&nbsp;<span class="op" id="5650355">:=</span>&nbsp;<span class="ident" id="5650358">d</span><span class="op" id="5650359">.</span><span class="ident" id="5650360">readType</span><span class="op" id="5650368">(</span><span class="ident" id="5650369">tu</span><span class="op" id="5650371">.</span><span class="ident" id="5650372">name</span><span class="op" id="5650376">,</span>&nbsp;<span class="ident" id="5650378">r</span><span class="op" id="5650379">,</span>&nbsp;<span class="ident" id="5650381">Offset</span><span class="op" id="5650387">(</span><span class="ident" id="5650388">tu</span><span class="op" id="5650390">.</span><span class="ident" id="5650391">toff</span><span class="op" id="5650395">)</span><span class="op" id="5650396">,</span>&nbsp;<span class="builtinfunc" id="5650398">make</span><span class="op" id="5650402">(</span><span class="keyword" id="5650403">map</span><span class="op" id="5650406">[</span><span class="ident" id="5650407">Offset</span><span class="op" id="5650413">]</span><span class="ident" id="5650414">Type</span><span class="op" id="5650418">)</span><span class="op" id="5650419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650422">if</span>&nbsp;<span class="ident" id="5650425">err</span>&nbsp;<span class="op" id="5650429">!=</span>&nbsp;<span class="ident" id="5650432">nil</span>&nbsp;<span class="op" id="5650436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650440">return</span>&nbsp;<span class="ident" id="5650447">nil</span><span class="op" id="5650450">,</span>&nbsp;<span class="ident" id="5650452">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650461">tu</span><span class="op" id="5650463">.</span><span class="ident" id="5650464">cache</span>&nbsp;<span class="op" id="5650470">=</span>&nbsp;<span class="ident" id="5650472">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650475">return</span>&nbsp;<span class="ident" id="5650482">t</span><span class="op" id="5650483">,</span>&nbsp;<span class="ident" id="5650485">nil</span><br>
<span class="lineno"></span><span class="op" id="5650489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650492">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5650545">type</span>&nbsp;<span class="ident" id="5650550">typeUnitReader</span>&nbsp;<span class="keyword" id="5650565">struct</span>&nbsp;<span class="op" id="5650572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650575">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5650579">*</span><span class="ident" id="5650580">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650586">tu</span>&nbsp;&nbsp;<span class="op" id="5650590">*</span><span class="ident" id="5650591">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650601">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5650605">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650610">err</span>&nbsp;<span class="builtintype" id="5650614">error</span><br>
<span class="lineno">125</span><span class="op" id="5650620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650623">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5650667">func</span>&nbsp;<span class="op" id="5650672">(</span><span class="ident" id="5650673">tur</span>&nbsp;<span class="op" id="5650677">*</span><span class="ident" id="5650678">typeUnitReader</span><span class="op" id="5650692">)</span>&nbsp;<span class="ident" id="5650694">Seek</span><span class="op" id="5650698">(</span><span class="ident" id="5650699">off</span>&nbsp;<span class="ident" id="5650703">Offset</span><span class="op" id="5650709">)</span>&nbsp;<span class="op" id="5650711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650714">tur</span><span class="op" id="5650717">.</span><span class="ident" id="5650718">err</span>&nbsp;<span class="op" id="5650722">=</span>&nbsp;<span class="ident" id="5650724">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650729">doff</span>&nbsp;<span class="op" id="5650734">:=</span>&nbsp;<span class="ident" id="5650737">off</span>&nbsp;<span class="op" id="5650741">-</span>&nbsp;<span class="ident" id="5650743">tur</span><span class="op" id="5650746">.</span><span class="ident" id="5650747">tu</span><span class="op" id="5650749">.</span><span class="ident" id="5650750">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650755">if</span>&nbsp;<span class="ident" id="5650758">doff</span>&nbsp;<span class="op" id="5650763">&lt;</span>&nbsp;<span class="num" id="5650765">0</span>&nbsp;<span class="op" id="5650767">||</span>&nbsp;<span class="ident" id="5650770">doff</span>&nbsp;<span class="op" id="5650775">&gt;=</span>&nbsp;<span class="ident" id="5650778">Offset</span><span class="op" id="5650784">(</span><span class="builtinfunc" id="5650785">len</span><span class="op" id="5650788">(</span><span class="ident" id="5650789">tur</span><span class="op" id="5650792">.</span><span class="ident" id="5650793">tu</span><span class="op" id="5650795">.</span><span class="ident" id="5650796">data</span><span class="op" id="5650800">)</span><span class="op" id="5650801">)</span>&nbsp;<span class="op" id="5650803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650807">tur</span><span class="op" id="5650810">.</span><span class="ident" id="5650811">err</span>&nbsp;<span class="op" id="5650815">=</span>&nbsp;<span class="ident" id="5650817">fmt</span><span class="op" id="5650820">.</span><span class="ident" id="5650821">Errorf</span><span class="op" id="5650827">(</span><span class="string" id="5650828">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5650864">,</span>&nbsp;<span class="ident" id="5650866">tur</span><span class="op" id="5650869">.</span><span class="ident" id="5650870">tu</span><span class="op" id="5650872">.</span><span class="ident" id="5650873">name</span><span class="op" id="5650877">,</span>&nbsp;<span class="ident" id="5650879">doff</span><span class="op" id="5650883">,</span>&nbsp;<span class="builtinfunc" id="5650885">len</span><span class="op" id="5650888">(</span><span class="ident" id="5650889">tur</span><span class="op" id="5650892">.</span><span class="ident" id="5650893">tu</span><span class="op" id="5650895">.</span><span class="ident" id="5650896">data</span><span class="op" id="5650900">)</span><span class="op" id="5650901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5650905">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5650913">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5650916">tur</span><span class="op" id="5650919">.</span><span class="ident" id="5650920">b</span>&nbsp;<span class="op" id="5650922">=</span>&nbsp;<span class="ident" id="5650924">makeBuf</span><span class="op" id="5650931">(</span><span class="ident" id="5650932">tur</span><span class="op" id="5650935">.</span><span class="ident" id="5650936">d</span><span class="op" id="5650937">,</span>&nbsp;<span class="ident" id="5650939">tur</span><span class="op" id="5650942">.</span><span class="ident" id="5650943">tu</span><span class="op" id="5650945">,</span>&nbsp;<span class="ident" id="5650947">tur</span><span class="op" id="5650950">.</span><span class="ident" id="5650951">tu</span><span class="op" id="5650953">.</span><span class="ident" id="5650954">name</span><span class="op" id="5650958">,</span>&nbsp;<span class="ident" id="5650960">off</span><span class="op" id="5650963">,</span>&nbsp;<span class="ident" id="5650965">tur</span><span class="op" id="5650968">.</span><span class="ident" id="5650969">tu</span><span class="op" id="5650971">.</span><span class="ident" id="5650972">data</span><span class="op" id="5650976">[</span><span class="ident" id="5650977">doff</span><span class="op" id="5650981">:</span><span class="op" id="5650982">]</span><span class="op" id="5650983">)</span><br>
<span class="lineno"></span><span class="op" id="5650985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5650988">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5651037">func</span>&nbsp;<span class="op" id="5651042">(</span><span class="ident" id="5651043">tur</span>&nbsp;<span class="op" id="5651047">*</span><span class="ident" id="5651048">typeUnitReader</span><span class="op" id="5651062">)</span>&nbsp;<span class="ident" id="5651064">Next</span><span class="op" id="5651068">(</span><span class="op" id="5651069">)</span>&nbsp;<span class="op" id="5651071">(</span><span class="op" id="5651072">*</span><span class="ident" id="5651073">Entry</span><span class="op" id="5651078">,</span>&nbsp;<span class="builtintype" id="5651080">error</span><span class="op" id="5651085">)</span>&nbsp;<span class="op" id="5651087">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651090">if</span>&nbsp;<span class="ident" id="5651093">tur</span><span class="op" id="5651096">.</span><span class="ident" id="5651097">err</span>&nbsp;<span class="op" id="5651101">!=</span>&nbsp;<span class="ident" id="5651104">nil</span>&nbsp;<span class="op" id="5651108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651112">return</span>&nbsp;<span class="ident" id="5651119">nil</span><span class="op" id="5651122">,</span>&nbsp;<span class="ident" id="5651124">tur</span><span class="op" id="5651127">.</span><span class="ident" id="5651128">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651136">if</span>&nbsp;<span class="builtinfunc" id="5651139">len</span><span class="op" id="5651142">(</span><span class="ident" id="5651143">tur</span><span class="op" id="5651146">.</span><span class="ident" id="5651147">tu</span><span class="op" id="5651149">.</span><span class="ident" id="5651150">data</span><span class="op" id="5651154">)</span>&nbsp;<span class="op" id="5651156">==</span>&nbsp;<span class="num" id="5651159">0</span>&nbsp;<span class="op" id="5651161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651165">return</span>&nbsp;<span class="ident" id="5651172">nil</span><span class="op" id="5651175">,</span>&nbsp;<span class="ident" id="5651177">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651185">e</span>&nbsp;<span class="op" id="5651187">:=</span>&nbsp;<span class="ident" id="5651190">tur</span><span class="op" id="5651193">.</span><span class="ident" id="5651194">b</span><span class="op" id="5651195">.</span><span class="ident" id="5651196">entry</span><span class="op" id="5651201">(</span><span class="ident" id="5651202">tur</span><span class="op" id="5651205">.</span><span class="ident" id="5651206">tu</span><span class="op" id="5651208">.</span><span class="ident" id="5651209">atable</span><span class="op" id="5651215">,</span>&nbsp;<span class="ident" id="5651217">tur</span><span class="op" id="5651220">.</span><span class="ident" id="5651221">tu</span><span class="op" id="5651223">.</span><span class="ident" id="5651224">base</span><span class="op" id="5651228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651231">if</span>&nbsp;<span class="ident" id="5651234">tur</span><span class="op" id="5651237">.</span><span class="ident" id="5651238">b</span><span class="op" id="5651239">.</span><span class="ident" id="5651240">err</span>&nbsp;<span class="op" id="5651244">!=</span>&nbsp;<span class="ident" id="5651247">nil</span>&nbsp;<span class="op" id="5651251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651255">tur</span><span class="op" id="5651258">.</span><span class="ident" id="5651259">err</span>&nbsp;<span class="op" id="5651263">=</span>&nbsp;<span class="ident" id="5651265">tur</span><span class="op" id="5651268">.</span><span class="ident" id="5651269">b</span><span class="op" id="5651270">.</span><span class="ident" id="5651271">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651277">return</span>&nbsp;<span class="ident" id="5651284">nil</span><span class="op" id="5651287">,</span>&nbsp;<span class="ident" id="5651289">tur</span><span class="op" id="5651292">.</span><span class="ident" id="5651293">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651301">return</span>&nbsp;<span class="ident" id="5651308">e</span><span class="op" id="5651309">,</span>&nbsp;<span class="ident" id="5651311">nil</span><br>
<span class="lineno"></span><span class="op" id="5651315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5651318">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5651367">func</span>&nbsp;<span class="op" id="5651372">(</span><span class="ident" id="5651373">tur</span>&nbsp;<span class="op" id="5651377">*</span><span class="ident" id="5651378">typeUnitReader</span><span class="op" id="5651392">)</span>&nbsp;<span class="ident" id="5651394">clone</span><span class="op" id="5651399">(</span><span class="op" id="5651400">)</span>&nbsp;<span class="ident" id="5651402">typeReader</span>&nbsp;<span class="op" id="5651413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651416">return</span>&nbsp;<span class="op" id="5651423">&amp;</span><span class="ident" id="5651424">typeUnitReader</span><span class="op" id="5651438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651442">d</span><span class="op" id="5651443">:</span>&nbsp;&nbsp;<span class="ident" id="5651446">tur</span><span class="op" id="5651449">.</span><span class="ident" id="5651450">d</span><span class="op" id="5651451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651455">tu</span><span class="op" id="5651457">:</span>&nbsp;<span class="ident" id="5651459">tur</span><span class="op" id="5651462">.</span><span class="ident" id="5651463">tu</span><span class="op" id="5651465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5651469">b</span><span class="op" id="5651470">:</span>&nbsp;&nbsp;<span class="ident" id="5651473">makeBuf</span><span class="op" id="5651480">(</span><span class="ident" id="5651481">tur</span><span class="op" id="5651484">.</span><span class="ident" id="5651485">d</span><span class="op" id="5651486">,</span>&nbsp;<span class="ident" id="5651488">tur</span><span class="op" id="5651491">.</span><span class="ident" id="5651492">tu</span><span class="op" id="5651494">,</span>&nbsp;<span class="ident" id="5651496">tur</span><span class="op" id="5651499">.</span><span class="ident" id="5651500">tu</span><span class="op" id="5651502">.</span><span class="ident" id="5651503">name</span><span class="op" id="5651507">,</span>&nbsp;<span class="ident" id="5651509">tur</span><span class="op" id="5651512">.</span><span class="ident" id="5651513">tu</span><span class="op" id="5651515">.</span><span class="ident" id="5651516">off</span><span class="op" id="5651519">,</span>&nbsp;<span class="ident" id="5651521">tur</span><span class="op" id="5651524">.</span><span class="ident" id="5651525">tu</span><span class="op" id="5651527">.</span><span class="ident" id="5651528">data</span><span class="op" id="5651532">)</span><span class="op" id="5651533">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651536">}</span><br>
<span class="lineno"></span><span class="op" id="5651538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5651541">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5651579">func</span>&nbsp;<span class="op" id="5651584">(</span><span class="ident" id="5651585">tur</span>&nbsp;<span class="op" id="5651589">*</span><span class="ident" id="5651590">typeUnitReader</span><span class="op" id="5651604">)</span>&nbsp;<span class="ident" id="5651606">offset</span><span class="op" id="5651612">(</span><span class="op" id="5651613">)</span>&nbsp;<span class="ident" id="5651615">Offset</span>&nbsp;<span class="op" id="5651622">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5651625">return</span>&nbsp;<span class="ident" id="5651632">tur</span><span class="op" id="5651635">.</span><span class="ident" id="5651636">b</span><span class="op" id="5651637">.</span><span class="ident" id="5651638">off</span><br>
<span class="lineno"></span><span class="op" id="5651642">}</span>
</div>
</body>
</html>
