<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3436507">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3436562">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3436616">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3436667">package</span>&nbsp;<span class="ident" id="3436675">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3436681">import</span>&nbsp;<span class="op" id="3436688">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3436691">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3436701">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3436704">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3436777">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="3436845">type</span>&nbsp;<span class="ident" id="3436850">tagOptions</span>&nbsp;<span class="builtintype" id="3436861">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3436869">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3436932">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="3436960">func</span>&nbsp;<span class="ident" id="3436965">parseTag</span><span class="op" id="3436973">(</span><span class="ident" id="3436974">tag</span>&nbsp;<span class="builtintype" id="3436978">string</span><span class="op" id="3436984">)</span>&nbsp;<span class="op" id="3436986">(</span><span class="builtintype" id="3436987">string</span><span class="op" id="3436993">,</span>&nbsp;<span class="ident" id="3436995">tagOptions</span><span class="op" id="3437005">)</span>&nbsp;<span class="op" id="3437007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437010">if</span>&nbsp;<span class="ident" id="3437013">idx</span>&nbsp;<span class="op" id="3437017">:=</span>&nbsp;<span class="ident" id="3437020">strings</span><span class="op" id="3437027">.</span><span class="ident" id="3437028">Index</span><span class="op" id="3437033">(</span><span class="ident" id="3437034">tag</span><span class="op" id="3437037">,</span>&nbsp;<span class="string" id="3437039">&#34;,&#34;</span><span class="op" id="3437042">)</span><span class="op" id="3437043">;</span>&nbsp;<span class="ident" id="3437045">idx</span>&nbsp;<span class="op" id="3437049">!=</span>&nbsp;<span class="op" id="3437052">-</span><span class="num" id="3437053">1</span>&nbsp;<span class="op" id="3437055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437059">return</span>&nbsp;<span class="ident" id="3437066">tag</span><span class="op" id="3437069">[</span><span class="op" id="3437070">:</span><span class="ident" id="3437071">idx</span><span class="op" id="3437074">]</span><span class="op" id="3437075">,</span>&nbsp;<span class="ident" id="3437077">tagOptions</span><span class="op" id="3437087">(</span><span class="ident" id="3437088">tag</span><span class="op" id="3437091">[</span><span class="ident" id="3437092">idx</span><span class="op" id="3437095">+</span><span class="num" id="3437096">1</span><span class="op" id="3437097">:</span><span class="op" id="3437098">]</span><span class="op" id="3437099">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3437102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437105">return</span>&nbsp;<span class="ident" id="3437112">tag</span><span class="op" id="3437115">,</span>&nbsp;<span class="ident" id="3437117">tagOptions</span><span class="op" id="3437127">(</span><span class="string" id="3437128">&#34;&#34;</span><span class="op" id="3437130">)</span><br>
<span class="lineno"></span><span class="op" id="3437132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3437135">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="3437197">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3437266">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="3437296">func</span>&nbsp;<span class="op" id="3437301">(</span><span class="ident" id="3437302">o</span>&nbsp;<span class="ident" id="3437304">tagOptions</span><span class="op" id="3437314">)</span>&nbsp;<span class="ident" id="3437316">Contains</span><span class="op" id="3437324">(</span><span class="ident" id="3437325">optionName</span>&nbsp;<span class="builtintype" id="3437336">string</span><span class="op" id="3437342">)</span>&nbsp;<span class="builtintype" id="3437344">bool</span>&nbsp;<span class="op" id="3437349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437352">if</span>&nbsp;<span class="builtinfunc" id="3437355">len</span><span class="op" id="3437358">(</span><span class="ident" id="3437359">o</span><span class="op" id="3437360">)</span>&nbsp;<span class="op" id="3437362">==</span>&nbsp;<span class="num" id="3437365">0</span>&nbsp;<span class="op" id="3437367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437371">return</span>&nbsp;<span class="builtintype" id="3437378">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3437385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3437388">s</span>&nbsp;<span class="op" id="3437390">:=</span>&nbsp;<span class="builtintype" id="3437393">string</span><span class="op" id="3437399">(</span><span class="ident" id="3437400">o</span><span class="op" id="3437401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437404">for</span>&nbsp;<span class="ident" id="3437408">s</span>&nbsp;<span class="op" id="3437410">!=</span>&nbsp;<span class="string" id="3437413">&#34;&#34;</span>&nbsp;<span class="op" id="3437416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437420">var</span>&nbsp;<span class="ident" id="3437424">next</span>&nbsp;<span class="builtintype" id="3437429">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3437438">i</span>&nbsp;<span class="op" id="3437440">:=</span>&nbsp;<span class="ident" id="3437443">strings</span><span class="op" id="3437450">.</span><span class="ident" id="3437451">Index</span><span class="op" id="3437456">(</span><span class="ident" id="3437457">s</span><span class="op" id="3437458">,</span>&nbsp;<span class="string" id="3437460">&#34;,&#34;</span><span class="op" id="3437463">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437467">if</span>&nbsp;<span class="ident" id="3437470">i</span>&nbsp;<span class="op" id="3437472">&gt;=</span>&nbsp;<span class="num" id="3437475">0</span>&nbsp;<span class="op" id="3437477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3437482">s</span><span class="op" id="3437483">,</span>&nbsp;<span class="ident" id="3437485">next</span>&nbsp;<span class="op" id="3437490">=</span>&nbsp;<span class="ident" id="3437492">s</span><span class="op" id="3437493">[</span><span class="op" id="3437494">:</span><span class="ident" id="3437495">i</span><span class="op" id="3437496">]</span><span class="op" id="3437497">,</span>&nbsp;<span class="ident" id="3437499">s</span><span class="op" id="3437500">[</span><span class="ident" id="3437501">i</span><span class="op" id="3437502">+</span><span class="num" id="3437503">1</span><span class="op" id="3437504">:</span><span class="op" id="3437505">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3437509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437513">if</span>&nbsp;<span class="ident" id="3437516">s</span>&nbsp;<span class="op" id="3437518">==</span>&nbsp;<span class="ident" id="3437521">optionName</span>&nbsp;<span class="op" id="3437532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437537">return</span>&nbsp;<span class="builtintype" id="3437544">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3437551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3437555">s</span>&nbsp;<span class="op" id="3437557">=</span>&nbsp;<span class="ident" id="3437559">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3437565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3437568">return</span>&nbsp;<span class="builtintype" id="3437575">false</span><br>
<span class="lineno"></span><span class="op" id="3437581">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
