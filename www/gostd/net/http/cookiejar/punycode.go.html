<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6187610">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6187665">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6187719">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6187770">package</span>&nbsp;<span class="ident" id="6187778">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6187789">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6187852">import</span>&nbsp;<span class="op" id="6187859">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6187862">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6187869">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6187880">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6187895">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6187898">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="6187952">//</span><br>
<span class="lineno"></span><span class="comment" id="6187955">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="6188034">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="6188084">const</span>&nbsp;<span class="op" id="6188090">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188093">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188105">int32</span>&nbsp;<span class="op" id="6188111">=</span>&nbsp;<span class="num" id="6188113">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188117">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188129">int32</span>&nbsp;<span class="op" id="6188135">=</span>&nbsp;<span class="num" id="6188137">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188142">initialBias</span>&nbsp;<span class="builtintype" id="6188154">int32</span>&nbsp;<span class="op" id="6188160">=</span>&nbsp;<span class="num" id="6188162">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188166">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188178">int32</span>&nbsp;<span class="op" id="6188184">=</span>&nbsp;<span class="num" id="6188186">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188191">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188203">int32</span>&nbsp;<span class="op" id="6188209">=</span>&nbsp;<span class="num" id="6188211">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188215">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188227">int32</span>&nbsp;<span class="op" id="6188233">=</span>&nbsp;<span class="num" id="6188235">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188239">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6188251">int32</span>&nbsp;<span class="op" id="6188257">=</span>&nbsp;<span class="num" id="6188259">1</span><br>
<span class="lineno"></span><span class="op" id="6188261">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6188264">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="6188342">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="6188357">//</span><br>
<span class="lineno"></span><span class="comment" id="6188360">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="6188432">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="6188512">func</span>&nbsp;<span class="ident" id="6188517">encode</span><span class="op" id="6188523">(</span><span class="ident" id="6188524">prefix</span><span class="op" id="6188530">,</span>&nbsp;<span class="ident" id="6188532">s</span>&nbsp;<span class="builtintype" id="6188534">string</span><span class="op" id="6188540">)</span>&nbsp;<span class="op" id="6188542">(</span><span class="builtintype" id="6188543">string</span><span class="op" id="6188549">,</span>&nbsp;<span class="builtintype" id="6188551">error</span><span class="op" id="6188556">)</span>&nbsp;<span class="op" id="6188558">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188561">output</span>&nbsp;<span class="op" id="6188568">:=</span>&nbsp;<span class="builtinfunc" id="6188571">make</span><span class="op" id="6188575">(</span><span class="op" id="6188576">[</span><span class="op" id="6188577">]</span><span class="builtintype" id="6188578">byte</span><span class="op" id="6188582">,</span>&nbsp;<span class="builtinfunc" id="6188584">len</span><span class="op" id="6188587">(</span><span class="ident" id="6188588">prefix</span><span class="op" id="6188594">)</span><span class="op" id="6188595">,</span>&nbsp;<span class="builtinfunc" id="6188597">len</span><span class="op" id="6188600">(</span><span class="ident" id="6188601">prefix</span><span class="op" id="6188607">)</span><span class="op" id="6188608">+</span><span class="num" id="6188609">1</span><span class="op" id="6188610">+</span><span class="num" id="6188611">2</span><span class="op" id="6188612">*</span><span class="builtinfunc" id="6188613">len</span><span class="op" id="6188616">(</span><span class="ident" id="6188617">s</span><span class="op" id="6188618">)</span><span class="op" id="6188619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6188622">copy</span><span class="op" id="6188626">(</span><span class="ident" id="6188627">output</span><span class="op" id="6188633">,</span>&nbsp;<span class="ident" id="6188635">prefix</span><span class="op" id="6188641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188644">delta</span><span class="op" id="6188649">,</span>&nbsp;<span class="ident" id="6188651">n</span><span class="op" id="6188652">,</span>&nbsp;<span class="ident" id="6188654">bias</span>&nbsp;<span class="op" id="6188659">:=</span>&nbsp;<span class="builtintype" id="6188662">int32</span><span class="op" id="6188667">(</span><span class="num" id="6188668">0</span><span class="op" id="6188669">)</span><span class="op" id="6188670">,</span>&nbsp;<span class="ident" id="6188672">initialN</span><span class="op" id="6188680">,</span>&nbsp;<span class="ident" id="6188682">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188695">b</span><span class="op" id="6188696">,</span>&nbsp;<span class="ident" id="6188698">remaining</span>&nbsp;<span class="op" id="6188708">:=</span>&nbsp;<span class="builtintype" id="6188711">int32</span><span class="op" id="6188716">(</span><span class="num" id="6188717">0</span><span class="op" id="6188718">)</span><span class="op" id="6188719">,</span>&nbsp;<span class="builtintype" id="6188721">int32</span><span class="op" id="6188726">(</span><span class="num" id="6188727">0</span><span class="op" id="6188728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188731">for</span>&nbsp;<span class="ident" id="6188735">_</span><span class="op" id="6188736">,</span>&nbsp;<span class="ident" id="6188738">r</span>&nbsp;<span class="op" id="6188740">:=</span>&nbsp;<span class="keyword" id="6188743">range</span>&nbsp;<span class="ident" id="6188749">s</span>&nbsp;<span class="op" id="6188751">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188755">if</span>&nbsp;<span class="ident" id="6188758">r</span>&nbsp;<span class="op" id="6188760">&lt;</span>&nbsp;<span class="num" id="6188762">0x80</span>&nbsp;<span class="op" id="6188767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188772">b</span><span class="op" id="6188773">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188779">output</span>&nbsp;<span class="op" id="6188786">=</span>&nbsp;<span class="builtinfunc" id="6188788">append</span><span class="op" id="6188794">(</span><span class="ident" id="6188795">output</span><span class="op" id="6188801">,</span>&nbsp;<span class="builtintype" id="6188803">byte</span><span class="op" id="6188807">(</span><span class="ident" id="6188808">r</span><span class="op" id="6188809">)</span><span class="op" id="6188810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188814">}</span>&nbsp;<span class="keyword" id="6188816">else</span>&nbsp;<span class="op" id="6188821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188826">remaining</span><span class="op" id="6188835">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188846">h</span>&nbsp;<span class="op" id="6188848">:=</span>&nbsp;<span class="ident" id="6188851">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188854">if</span>&nbsp;<span class="ident" id="6188857">b</span>&nbsp;<span class="op" id="6188859">&gt;</span>&nbsp;<span class="num" id="6188861">0</span>&nbsp;<span class="op" id="6188863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188867">output</span>&nbsp;<span class="op" id="6188874">=</span>&nbsp;<span class="builtinfunc" id="6188876">append</span><span class="op" id="6188882">(</span><span class="ident" id="6188883">output</span><span class="op" id="6188889">,</span>&nbsp;<span class="string" id="6188891">&#39;-&#39;</span><span class="op" id="6188894">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188900">for</span>&nbsp;<span class="ident" id="6188904">remaining</span>&nbsp;<span class="op" id="6188914">!=</span>&nbsp;<span class="num" id="6188917">0</span>&nbsp;<span class="op" id="6188919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188923">m</span>&nbsp;<span class="op" id="6188925">:=</span>&nbsp;<span class="builtintype" id="6188928">int32</span><span class="op" id="6188933">(</span><span class="num" id="6188934">0x7fffffff</span><span class="op" id="6188944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188948">for</span>&nbsp;<span class="ident" id="6188952">_</span><span class="op" id="6188953">,</span>&nbsp;<span class="ident" id="6188955">r</span>&nbsp;<span class="op" id="6188957">:=</span>&nbsp;<span class="keyword" id="6188960">range</span>&nbsp;<span class="ident" id="6188966">s</span>&nbsp;<span class="op" id="6188968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188973">if</span>&nbsp;<span class="ident" id="6188976">m</span>&nbsp;<span class="op" id="6188978">&gt;</span>&nbsp;<span class="ident" id="6188980">r</span>&nbsp;<span class="op" id="6188982">&amp;&amp;</span>&nbsp;<span class="ident" id="6188985">r</span>&nbsp;<span class="op" id="6188987">&gt;=</span>&nbsp;<span class="ident" id="6188990">n</span>&nbsp;<span class="op" id="6188992">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188998">m</span>&nbsp;<span class="op" id="6189000">=</span>&nbsp;<span class="ident" id="6189002">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189015">delta</span>&nbsp;<span class="op" id="6189021">+=</span>&nbsp;<span class="op" id="6189024">(</span><span class="ident" id="6189025">m</span>&nbsp;<span class="op" id="6189027">-</span>&nbsp;<span class="ident" id="6189029">n</span><span class="op" id="6189030">)</span>&nbsp;<span class="op" id="6189032">*</span>&nbsp;<span class="op" id="6189034">(</span><span class="ident" id="6189035">h</span>&nbsp;<span class="op" id="6189037">+</span>&nbsp;<span class="num" id="6189039">1</span><span class="op" id="6189040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189044">if</span>&nbsp;<span class="ident" id="6189047">delta</span>&nbsp;<span class="op" id="6189053">&lt;</span>&nbsp;<span class="num" id="6189055">0</span>&nbsp;<span class="op" id="6189057">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189062">return</span>&nbsp;<span class="string" id="6189069">&#34;&#34;</span><span class="op" id="6189071">,</span>&nbsp;<span class="ident" id="6189073">fmt</span><span class="op" id="6189076">.</span><span class="ident" id="6189077">Errorf</span><span class="op" id="6189083">(</span><span class="string" id="6189084">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6189113">,</span>&nbsp;<span class="ident" id="6189115">s</span><span class="op" id="6189116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189124">n</span>&nbsp;<span class="op" id="6189126">=</span>&nbsp;<span class="ident" id="6189128">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189132">for</span>&nbsp;<span class="ident" id="6189136">_</span><span class="op" id="6189137">,</span>&nbsp;<span class="ident" id="6189139">r</span>&nbsp;<span class="op" id="6189141">:=</span>&nbsp;<span class="keyword" id="6189144">range</span>&nbsp;<span class="ident" id="6189150">s</span>&nbsp;<span class="op" id="6189152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189157">if</span>&nbsp;<span class="ident" id="6189160">r</span>&nbsp;<span class="op" id="6189162">&lt;</span>&nbsp;<span class="ident" id="6189164">n</span>&nbsp;<span class="op" id="6189166">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189172">delta</span><span class="op" id="6189177">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189184">if</span>&nbsp;<span class="ident" id="6189187">delta</span>&nbsp;<span class="op" id="6189193">&lt;</span>&nbsp;<span class="num" id="6189195">0</span>&nbsp;<span class="op" id="6189197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189204">return</span>&nbsp;<span class="string" id="6189211">&#34;&#34;</span><span class="op" id="6189213">,</span>&nbsp;<span class="ident" id="6189215">fmt</span><span class="op" id="6189218">.</span><span class="ident" id="6189219">Errorf</span><span class="op" id="6189225">(</span><span class="string" id="6189226">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6189255">,</span>&nbsp;<span class="ident" id="6189257">s</span><span class="op" id="6189258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189270">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189287">if</span>&nbsp;<span class="ident" id="6189290">r</span>&nbsp;<span class="op" id="6189292">&gt;</span>&nbsp;<span class="ident" id="6189294">n</span>&nbsp;<span class="op" id="6189296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189302">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189319">q</span>&nbsp;<span class="op" id="6189321">:=</span>&nbsp;<span class="ident" id="6189324">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189333">for</span>&nbsp;<span class="ident" id="6189337">k</span>&nbsp;<span class="op" id="6189339">:=</span>&nbsp;<span class="ident" id="6189342">base</span><span class="op" id="6189346">;</span>&nbsp;<span class="op" id="6189348">;</span>&nbsp;<span class="ident" id="6189350">k</span>&nbsp;<span class="op" id="6189352">+=</span>&nbsp;<span class="ident" id="6189355">base</span>&nbsp;<span class="op" id="6189360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189366">t</span>&nbsp;<span class="op" id="6189368">:=</span>&nbsp;<span class="ident" id="6189371">k</span>&nbsp;<span class="op" id="6189373">-</span>&nbsp;<span class="ident" id="6189375">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189384">if</span>&nbsp;<span class="ident" id="6189387">t</span>&nbsp;<span class="op" id="6189389">&lt;</span>&nbsp;<span class="ident" id="6189391">tmin</span>&nbsp;<span class="op" id="6189396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189403">t</span>&nbsp;<span class="op" id="6189405">=</span>&nbsp;<span class="ident" id="6189407">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189416">}</span>&nbsp;<span class="keyword" id="6189418">else</span>&nbsp;<span class="keyword" id="6189423">if</span>&nbsp;<span class="ident" id="6189426">t</span>&nbsp;<span class="op" id="6189428">&gt;</span>&nbsp;<span class="ident" id="6189430">tmax</span>&nbsp;<span class="op" id="6189435">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189442">t</span>&nbsp;<span class="op" id="6189444">=</span>&nbsp;<span class="ident" id="6189446">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189461">if</span>&nbsp;<span class="ident" id="6189464">q</span>&nbsp;<span class="op" id="6189466">&lt;</span>&nbsp;<span class="ident" id="6189468">t</span>&nbsp;<span class="op" id="6189470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189477">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189487">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189493">output</span>&nbsp;<span class="op" id="6189500">=</span>&nbsp;<span class="builtinfunc" id="6189502">append</span><span class="op" id="6189508">(</span><span class="ident" id="6189509">output</span><span class="op" id="6189515">,</span>&nbsp;<span class="ident" id="6189517">encodeDigit</span><span class="op" id="6189528">(</span><span class="ident" id="6189529">t</span><span class="op" id="6189530">+</span><span class="op" id="6189531">(</span><span class="ident" id="6189532">q</span><span class="op" id="6189533">-</span><span class="ident" id="6189534">t</span><span class="op" id="6189535">)</span><span class="op" id="6189536">%</span><span class="op" id="6189537">(</span><span class="ident" id="6189538">base</span><span class="op" id="6189542">-</span><span class="ident" id="6189543">t</span><span class="op" id="6189544">)</span><span class="op" id="6189545">)</span><span class="op" id="6189546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189552">q</span>&nbsp;<span class="op" id="6189554">=</span>&nbsp;<span class="op" id="6189556">(</span><span class="ident" id="6189557">q</span>&nbsp;<span class="op" id="6189559">-</span>&nbsp;<span class="ident" id="6189561">t</span><span class="op" id="6189562">)</span>&nbsp;<span class="op" id="6189564">/</span>&nbsp;<span class="op" id="6189566">(</span><span class="ident" id="6189567">base</span>&nbsp;<span class="op" id="6189572">-</span>&nbsp;<span class="ident" id="6189574">t</span><span class="op" id="6189575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189585">output</span>&nbsp;<span class="op" id="6189592">=</span>&nbsp;<span class="builtinfunc" id="6189594">append</span><span class="op" id="6189600">(</span><span class="ident" id="6189601">output</span><span class="op" id="6189607">,</span>&nbsp;<span class="ident" id="6189609">encodeDigit</span><span class="op" id="6189620">(</span><span class="ident" id="6189621">q</span><span class="op" id="6189622">)</span><span class="op" id="6189623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189628">bias</span>&nbsp;<span class="op" id="6189633">=</span>&nbsp;<span class="ident" id="6189635">adapt</span><span class="op" id="6189640">(</span><span class="ident" id="6189641">delta</span><span class="op" id="6189646">,</span>&nbsp;<span class="ident" id="6189648">h</span><span class="op" id="6189649">+</span><span class="num" id="6189650">1</span><span class="op" id="6189651">,</span>&nbsp;<span class="ident" id="6189653">h</span>&nbsp;<span class="op" id="6189655">==</span>&nbsp;<span class="ident" id="6189658">b</span><span class="op" id="6189659">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189664">delta</span>&nbsp;<span class="op" id="6189670">=</span>&nbsp;<span class="num" id="6189672">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189677">h</span><span class="op" id="6189678">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189684">remaining</span><span class="op" id="6189693">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189702">delta</span><span class="op" id="6189707">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189712">n</span><span class="op" id="6189713">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189720">return</span>&nbsp;<span class="builtintype" id="6189727">string</span><span class="op" id="6189733">(</span><span class="ident" id="6189734">output</span><span class="op" id="6189740">)</span><span class="op" id="6189741">,</span>&nbsp;<span class="ident" id="6189743">nil</span><br>
<span class="lineno"></span><span class="op" id="6189747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6189750">func</span>&nbsp;<span class="ident" id="6189755">encodeDigit</span><span class="op" id="6189766">(</span><span class="ident" id="6189767">digit</span>&nbsp;<span class="builtintype" id="6189773">int32</span><span class="op" id="6189778">)</span>&nbsp;<span class="builtintype" id="6189780">byte</span>&nbsp;<span class="op" id="6189785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189788">switch</span>&nbsp;<span class="op" id="6189795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189798">case</span>&nbsp;<span class="num" id="6189803">0</span>&nbsp;<span class="op" id="6189805">&lt;=</span>&nbsp;<span class="ident" id="6189808">digit</span>&nbsp;<span class="op" id="6189814">&amp;&amp;</span>&nbsp;<span class="ident" id="6189817">digit</span>&nbsp;<span class="op" id="6189823">&lt;</span>&nbsp;<span class="num" id="6189825">26</span><span class="op" id="6189827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189831">return</span>&nbsp;<span class="builtintype" id="6189838">byte</span><span class="op" id="6189842">(</span><span class="ident" id="6189843">digit</span>&nbsp;<span class="op" id="6189849">+</span>&nbsp;<span class="string" id="6189851">&#39;a&#39;</span><span class="op" id="6189854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189857">case</span>&nbsp;<span class="num" id="6189862">26</span>&nbsp;<span class="op" id="6189865">&lt;=</span>&nbsp;<span class="ident" id="6189868">digit</span>&nbsp;<span class="op" id="6189874">&amp;&amp;</span>&nbsp;<span class="ident" id="6189877">digit</span>&nbsp;<span class="op" id="6189883">&lt;</span>&nbsp;<span class="num" id="6189885">36</span><span class="op" id="6189887">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189891">return</span>&nbsp;<span class="builtintype" id="6189898">byte</span><span class="op" id="6189902">(</span><span class="ident" id="6189903">digit</span>&nbsp;<span class="op" id="6189909">+</span>&nbsp;<span class="op" id="6189911">(</span><span class="string" id="6189912">&#39;0&#39;</span>&nbsp;<span class="op" id="6189916">-</span>&nbsp;<span class="num" id="6189918">26</span><span class="op" id="6189920">)</span><span class="op" id="6189921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6189927">panic</span><span class="op" id="6189932">(</span><span class="string" id="6189933">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="6189981">)</span><br>
<span class="lineno"></span><span class="op" id="6189983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6189986">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="6190053">func</span>&nbsp;<span class="ident" id="6190058">adapt</span><span class="op" id="6190063">(</span><span class="ident" id="6190064">delta</span><span class="op" id="6190069">,</span>&nbsp;<span class="ident" id="6190071">numPoints</span>&nbsp;<span class="builtintype" id="6190081">int32</span><span class="op" id="6190086">,</span>&nbsp;<span class="ident" id="6190088">firstTime</span>&nbsp;<span class="builtintype" id="6190098">bool</span><span class="op" id="6190102">)</span>&nbsp;<span class="builtintype" id="6190104">int32</span>&nbsp;<span class="op" id="6190110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190113">if</span>&nbsp;<span class="ident" id="6190116">firstTime</span>&nbsp;<span class="op" id="6190126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190130">delta</span>&nbsp;<span class="op" id="6190136">/=</span>&nbsp;<span class="ident" id="6190139">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190145">}</span>&nbsp;<span class="keyword" id="6190147">else</span>&nbsp;<span class="op" id="6190152">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190156">delta</span>&nbsp;<span class="op" id="6190162">/=</span>&nbsp;<span class="num" id="6190165">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190171">delta</span>&nbsp;<span class="op" id="6190177">+=</span>&nbsp;<span class="ident" id="6190180">delta</span>&nbsp;<span class="op" id="6190186">/</span>&nbsp;<span class="ident" id="6190188">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190199">k</span>&nbsp;<span class="op" id="6190201">:=</span>&nbsp;<span class="builtintype" id="6190204">int32</span><span class="op" id="6190209">(</span><span class="num" id="6190210">0</span><span class="op" id="6190211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190214">for</span>&nbsp;<span class="ident" id="6190218">delta</span>&nbsp;<span class="op" id="6190224">&gt;</span>&nbsp;<span class="op" id="6190226">(</span><span class="op" id="6190227">(</span><span class="ident" id="6190228">base</span><span class="op" id="6190232">-</span><span class="ident" id="6190233">tmin</span><span class="op" id="6190237">)</span><span class="op" id="6190238">*</span><span class="ident" id="6190239">tmax</span><span class="op" id="6190243">)</span><span class="op" id="6190244">/</span><span class="num" id="6190245">2</span>&nbsp;<span class="op" id="6190247">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190251">delta</span>&nbsp;<span class="op" id="6190257">/=</span>&nbsp;<span class="ident" id="6190260">base</span>&nbsp;<span class="op" id="6190265">-</span>&nbsp;<span class="ident" id="6190267">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190274">k</span>&nbsp;<span class="op" id="6190276">+=</span>&nbsp;<span class="ident" id="6190279">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190288">return</span>&nbsp;<span class="ident" id="6190295">k</span>&nbsp;<span class="op" id="6190297">+</span>&nbsp;<span class="op" id="6190299">(</span><span class="ident" id="6190300">base</span><span class="op" id="6190304">-</span><span class="ident" id="6190305">tmin</span><span class="op" id="6190309">+</span><span class="num" id="6190310">1</span><span class="op" id="6190311">)</span><span class="op" id="6190312">*</span><span class="ident" id="6190313">delta</span><span class="op" id="6190318">/</span><span class="op" id="6190319">(</span><span class="ident" id="6190320">delta</span><span class="op" id="6190325">+</span><span class="ident" id="6190326">skew</span><span class="op" id="6190330">)</span><br>
<span class="lineno"></span><span class="op" id="6190332">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6190335">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6190412">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6190461">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="6190515">const</span>&nbsp;<span class="ident" id="6190521">acePrefix</span>&nbsp;<span class="op" id="6190531">=</span>&nbsp;<span class="string" id="6190533">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6190541">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="6190618">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6190688">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="6190722">func</span>&nbsp;<span class="ident" id="6190727">toASCII</span><span class="op" id="6190734">(</span><span class="ident" id="6190735">s</span>&nbsp;<span class="builtintype" id="6190737">string</span><span class="op" id="6190743">)</span>&nbsp;<span class="op" id="6190745">(</span><span class="builtintype" id="6190746">string</span><span class="op" id="6190752">,</span>&nbsp;<span class="builtintype" id="6190754">error</span><span class="op" id="6190759">)</span>&nbsp;<span class="op" id="6190761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190764">if</span>&nbsp;<span class="ident" id="6190767">ascii</span><span class="op" id="6190772">(</span><span class="ident" id="6190773">s</span><span class="op" id="6190774">)</span>&nbsp;<span class="op" id="6190776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190780">return</span>&nbsp;<span class="ident" id="6190787">s</span><span class="op" id="6190788">,</span>&nbsp;<span class="ident" id="6190790">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190798">labels</span>&nbsp;<span class="op" id="6190805">:=</span>&nbsp;<span class="ident" id="6190808">strings</span><span class="op" id="6190815">.</span><span class="ident" id="6190816">Split</span><span class="op" id="6190821">(</span><span class="ident" id="6190822">s</span><span class="op" id="6190823">,</span>&nbsp;<span class="string" id="6190825">&#34;.&#34;</span><span class="op" id="6190828">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190831">for</span>&nbsp;<span class="ident" id="6190835">i</span><span class="op" id="6190836">,</span>&nbsp;<span class="ident" id="6190838">label</span>&nbsp;<span class="op" id="6190844">:=</span>&nbsp;<span class="keyword" id="6190847">range</span>&nbsp;<span class="ident" id="6190853">labels</span>&nbsp;<span class="op" id="6190860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190864">if</span>&nbsp;<span class="op" id="6190867">!</span><span class="ident" id="6190868">ascii</span><span class="op" id="6190873">(</span><span class="ident" id="6190874">label</span><span class="op" id="6190879">)</span>&nbsp;<span class="op" id="6190881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190886">a</span><span class="op" id="6190887">,</span>&nbsp;<span class="ident" id="6190889">err</span>&nbsp;<span class="op" id="6190893">:=</span>&nbsp;<span class="ident" id="6190896">encode</span><span class="op" id="6190902">(</span><span class="ident" id="6190903">acePrefix</span><span class="op" id="6190912">,</span>&nbsp;<span class="ident" id="6190914">label</span><span class="op" id="6190919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190924">if</span>&nbsp;<span class="ident" id="6190927">err</span>&nbsp;<span class="op" id="6190931">!=</span>&nbsp;<span class="ident" id="6190934">nil</span>&nbsp;<span class="op" id="6190938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190944">return</span>&nbsp;<span class="string" id="6190951">&#34;&#34;</span><span class="op" id="6190953">,</span>&nbsp;<span class="ident" id="6190955">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190967">labels</span><span class="op" id="6190973">[</span><span class="ident" id="6190974">i</span><span class="op" id="6190975">]</span>&nbsp;<span class="op" id="6190977">=</span>&nbsp;<span class="ident" id="6190979">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190989">return</span>&nbsp;<span class="ident" id="6190996">strings</span><span class="op" id="6191003">.</span><span class="ident" id="6191004">Join</span><span class="op" id="6191008">(</span><span class="ident" id="6191009">labels</span><span class="op" id="6191015">,</span>&nbsp;<span class="string" id="6191017">&#34;.&#34;</span><span class="op" id="6191020">)</span><span class="op" id="6191021">,</span>&nbsp;<span class="ident" id="6191023">nil</span><br>
<span class="lineno">150</span><span class="op" id="6191027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6191030">func</span>&nbsp;<span class="ident" id="6191035">ascii</span><span class="op" id="6191040">(</span><span class="ident" id="6191041">s</span>&nbsp;<span class="builtintype" id="6191043">string</span><span class="op" id="6191049">)</span>&nbsp;<span class="builtintype" id="6191051">bool</span>&nbsp;<span class="op" id="6191056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191059">for</span>&nbsp;<span class="ident" id="6191063">i</span>&nbsp;<span class="op" id="6191065">:=</span>&nbsp;<span class="num" id="6191068">0</span><span class="op" id="6191069">;</span>&nbsp;<span class="ident" id="6191071">i</span>&nbsp;<span class="op" id="6191073">&lt;</span>&nbsp;<span class="builtinfunc" id="6191075">len</span><span class="op" id="6191078">(</span><span class="ident" id="6191079">s</span><span class="op" id="6191080">)</span><span class="op" id="6191081">;</span>&nbsp;<span class="ident" id="6191083">i</span><span class="op" id="6191084">++</span>&nbsp;<span class="op" id="6191087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191091">if</span>&nbsp;<span class="ident" id="6191094">s</span><span class="op" id="6191095">[</span><span class="ident" id="6191096">i</span><span class="op" id="6191097">]</span>&nbsp;<span class="op" id="6191099">&gt;=</span>&nbsp;<span class="ident" id="6191102">utf8</span><span class="op" id="6191106">.</span><span class="ident" id="6191107">RuneSelf</span>&nbsp;<span class="op" id="6191116">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191121">return</span>&nbsp;<span class="builtintype" id="6191128">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191142">return</span>&nbsp;<span class="builtintype" id="6191149">true</span><br>
<span class="lineno"></span><span class="op" id="6191154">}</span>
</div>
</body>
</html>
