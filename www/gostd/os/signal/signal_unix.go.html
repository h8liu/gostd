<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6375096">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6375151">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6375205">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6375256">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6375334">package</span>&nbsp;<span class="ident" id="6375342">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6375350">import</span>&nbsp;<span class="op" id="6375357">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6375360">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6375366">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="6375376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6375379">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="6375395">func</span>&nbsp;<span class="ident" id="6375400">signal_disable</span><span class="op" id="6375414">(</span><span class="builtintype" id="6375415">uint32</span><span class="op" id="6375421">)</span><br>
<span class="lineno"></span><span class="keyword" id="6375423">func</span>&nbsp;<span class="ident" id="6375428">signal_enable</span><span class="op" id="6375441">(</span><span class="builtintype" id="6375442">uint32</span><span class="op" id="6375448">)</span><br>
<span class="lineno"></span><span class="keyword" id="6375450">func</span>&nbsp;<span class="ident" id="6375455">signal_recv</span><span class="op" id="6375466">(</span><span class="op" id="6375467">)</span>&nbsp;<span class="builtintype" id="6375469">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6375477">func</span>&nbsp;<span class="ident" id="6375482">loop</span><span class="op" id="6375486">(</span><span class="op" id="6375487">)</span>&nbsp;<span class="op" id="6375489">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375492">for</span>&nbsp;<span class="op" id="6375496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375500">process</span><span class="op" id="6375507">(</span><span class="ident" id="6375508">syscall</span><span class="op" id="6375515">.</span><span class="ident" id="6375516">Signal</span><span class="op" id="6375522">(</span><span class="ident" id="6375523">signal_recv</span><span class="op" id="6375534">(</span><span class="op" id="6375535">)</span><span class="op" id="6375536">)</span><span class="op" id="6375537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6375540">}</span><br>
<span class="lineno"></span><span class="op" id="6375542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6375545">func</span>&nbsp;<span class="ident" id="6375550">init</span><span class="op" id="6375554">(</span><span class="op" id="6375555">)</span>&nbsp;<span class="op" id="6375557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375560">signal_enable</span><span class="op" id="6375573">(</span><span class="num" id="6375574">0</span><span class="op" id="6375575">)</span>&nbsp;<span class="comment" id="6375577">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375605">go</span>&nbsp;<span class="ident" id="6375608">loop</span><span class="op" id="6375612">(</span><span class="op" id="6375613">)</span><br>
<span class="lineno"></span><span class="op" id="6375615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6375618">const</span>&nbsp;<span class="op" id="6375624">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375627">numSig</span>&nbsp;<span class="op" id="6375634">=</span>&nbsp;<span class="num" id="6375636">65</span>&nbsp;<span class="comment" id="6375639">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="6375665">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6375668">func</span>&nbsp;<span class="ident" id="6375673">signum</span><span class="op" id="6375679">(</span><span class="ident" id="6375680">sig</span>&nbsp;<span class="ident" id="6375684">os</span><span class="op" id="6375686">.</span><span class="ident" id="6375687">Signal</span><span class="op" id="6375693">)</span>&nbsp;<span class="builtintype" id="6375695">int</span>&nbsp;<span class="op" id="6375699">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375702">switch</span>&nbsp;<span class="ident" id="6375709">sig</span>&nbsp;<span class="op" id="6375713">:=</span>&nbsp;<span class="ident" id="6375716">sig</span><span class="op" id="6375719">.</span><span class="op" id="6375720">(</span><span class="keyword" id="6375721">type</span><span class="op" id="6375725">)</span>&nbsp;<span class="op" id="6375727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375730">case</span>&nbsp;<span class="ident" id="6375735">syscall</span><span class="op" id="6375742">.</span><span class="ident" id="6375743">Signal</span><span class="op" id="6375749">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375753">i</span>&nbsp;<span class="op" id="6375755">:=</span>&nbsp;<span class="builtintype" id="6375758">int</span><span class="op" id="6375761">(</span><span class="ident" id="6375762">sig</span><span class="op" id="6375765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375769">if</span>&nbsp;<span class="ident" id="6375772">i</span>&nbsp;<span class="op" id="6375774">&lt;</span>&nbsp;<span class="num" id="6375776">0</span>&nbsp;<span class="op" id="6375778">||</span>&nbsp;<span class="ident" id="6375781">i</span>&nbsp;<span class="op" id="6375783">&gt;=</span>&nbsp;<span class="ident" id="6375786">numSig</span>&nbsp;<span class="op" id="6375793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375798">return</span>&nbsp;<span class="op" id="6375805">-</span><span class="num" id="6375806">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6375810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375814">return</span>&nbsp;<span class="ident" id="6375821">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375824">default</span><span class="op" id="6375831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6375835">return</span>&nbsp;<span class="op" id="6375842">-</span><span class="num" id="6375843">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6375846">}</span><br>
<span class="lineno">45</span><span class="op" id="6375848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6375851">func</span>&nbsp;<span class="ident" id="6375856">enableSignal</span><span class="op" id="6375868">(</span><span class="ident" id="6375869">sig</span>&nbsp;<span class="builtintype" id="6375873">int</span><span class="op" id="6375876">)</span>&nbsp;<span class="op" id="6375878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375881">signal_enable</span><span class="op" id="6375894">(</span><span class="builtintype" id="6375895">uint32</span><span class="op" id="6375901">(</span><span class="ident" id="6375902">sig</span><span class="op" id="6375905">)</span><span class="op" id="6375906">)</span><br>
<span class="lineno"></span><span class="op" id="6375908">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6375911">func</span>&nbsp;<span class="ident" id="6375916">disableSignal</span><span class="op" id="6375929">(</span><span class="ident" id="6375930">sig</span>&nbsp;<span class="builtintype" id="6375934">int</span><span class="op" id="6375937">)</span>&nbsp;<span class="op" id="6375939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6375942">signal_disable</span><span class="op" id="6375956">(</span><span class="builtintype" id="6375957">uint32</span><span class="op" id="6375963">(</span><span class="ident" id="6375964">sig</span><span class="op" id="6375967">)</span><span class="op" id="6375968">)</span><br>
<span class="lineno"></span><span class="op" id="6375970">}</span>
</div>
</body>
</html>
