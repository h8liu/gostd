<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7309379">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7309434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7309488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7309539">package</span>&nbsp;<span class="ident" id="7309547">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7309553">import</span>&nbsp;<span class="op" id="7309560">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7309563">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7309574">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7309580">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7309590">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7309593">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="7309609">//&nbsp;&nbsp;&nbsp;&nbsptest&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7309628">var</span>&nbsp;<span class="ident" id="7309632">UseProxyTests</span>&nbsp;<span class="op" id="7309646">=</span>&nbsp;<span class="op" id="7309648">[</span><span class="op" id="7309649">]</span><span class="keyword" id="7309650">struct</span>&nbsp;<span class="op" id="7309657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309660">host</span>&nbsp;&nbsp;<span class="builtintype" id="7309666">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7309674">match</span>&nbsp;<span class="builtintype" id="7309680">bool</span><br>
<span class="lineno"></span><span class="op" id="7309685">}</span><span class="op" id="7309686">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7309689">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309716">{</span><span class="string" id="7309717">&#34;localhost:80&#34;</span><span class="op" id="7309731">,</span>&nbsp;<span class="builtintype" id="7309733">false</span><span class="op" id="7309738">}</span><span class="op" id="7309739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309742">{</span><span class="string" id="7309743">&#34;127.0.0.1&#34;</span><span class="op" id="7309754">,</span>&nbsp;<span class="builtintype" id="7309756">false</span><span class="op" id="7309761">}</span><span class="op" id="7309762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309765">{</span><span class="string" id="7309766">&#34;127.0.0.2&#34;</span><span class="op" id="7309777">,</span>&nbsp;<span class="builtintype" id="7309779">false</span><span class="op" id="7309784">}</span><span class="op" id="7309785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309788">{</span><span class="string" id="7309789">&#34;[::1]&#34;</span><span class="op" id="7309796">,</span>&nbsp;<span class="builtintype" id="7309798">false</span><span class="op" id="7309803">}</span><span class="op" id="7309804">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309807">{</span><span class="string" id="7309808">&#34;[::2]&#34;</span><span class="op" id="7309815">,</span>&nbsp;<span class="builtintype" id="7309817">true</span><span class="op" id="7309821">}</span><span class="op" id="7309822">,</span>&nbsp;<span class="comment" id="7309824">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309852">{</span><span class="string" id="7309853">&#34;barbaz.net&#34;</span><span class="op" id="7309865">,</span>&nbsp;<span class="builtintype" id="7309867">false</span><span class="op" id="7309872">}</span><span class="op" id="7309873">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7309879">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309904">{</span><span class="string" id="7309905">&#34;foobar.com&#34;</span><span class="op" id="7309917">,</span>&nbsp;<span class="builtintype" id="7309919">false</span><span class="op" id="7309924">}</span><span class="op" id="7309925">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7309931">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7309957">{</span><span class="string" id="7309958">&#34;foofoobar.com&#34;</span><span class="op" id="7309973">,</span>&nbsp;<span class="builtintype" id="7309975">true</span><span class="op" id="7309979">}</span><span class="op" id="7309980">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7309984">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310022">{</span><span class="string" id="7310023">&#34;baz.com&#34;</span><span class="op" id="7310032">,</span>&nbsp;<span class="builtintype" id="7310034">true</span><span class="op" id="7310038">}</span><span class="op" id="7310039">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7310049">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310087">{</span><span class="string" id="7310088">&#34;localhost.net&#34;</span><span class="op" id="7310103">,</span>&nbsp;<span class="builtintype" id="7310105">true</span><span class="op" id="7310109">}</span><span class="op" id="7310110">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7310114">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310149">{</span><span class="string" id="7310150">&#34;local.localhost&#34;</span><span class="op" id="7310167">,</span>&nbsp;<span class="builtintype" id="7310169">true</span><span class="op" id="7310173">}</span><span class="op" id="7310174">,</span>&nbsp;<span class="comment" id="7310176">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310211">{</span><span class="string" id="7310212">&#34;barbarbaz.net&#34;</span><span class="op" id="7310227">,</span>&nbsp;<span class="builtintype" id="7310229">true</span><span class="op" id="7310233">}</span><span class="op" id="7310234">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7310238">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310280">{</span><span class="string" id="7310281">&#34;www.foobar.com&#34;</span><span class="op" id="7310297">,</span>&nbsp;<span class="builtintype" id="7310299">false</span><span class="op" id="7310304">}</span><span class="op" id="7310305">,</span>&nbsp;<span class="comment" id="7310307">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="7310355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7310358">func</span>&nbsp;<span class="ident" id="7310363">TestUseProxy</span><span class="op" id="7310375">(</span><span class="ident" id="7310376">t</span>&nbsp;<span class="op" id="7310378">*</span><span class="ident" id="7310379">testing</span><span class="op" id="7310386">.</span><span class="ident" id="7310387">T</span><span class="op" id="7310388">)</span>&nbsp;<span class="op" id="7310390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310393">ResetProxyEnv</span><span class="op" id="7310406">(</span><span class="op" id="7310407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310410">os</span><span class="op" id="7310412">.</span><span class="ident" id="7310413">Setenv</span><span class="op" id="7310419">(</span><span class="string" id="7310420">&#34;NO_PROXY&#34;</span><span class="op" id="7310430">,</span>&nbsp;<span class="string" id="7310432">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="7310457">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310460">for</span>&nbsp;<span class="ident" id="7310464">_</span><span class="op" id="7310465">,</span>&nbsp;<span class="ident" id="7310467">test</span>&nbsp;<span class="op" id="7310472">:=</span>&nbsp;<span class="keyword" id="7310475">range</span>&nbsp;<span class="ident" id="7310481">UseProxyTests</span>&nbsp;<span class="op" id="7310495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310499">if</span>&nbsp;<span class="ident" id="7310502">useProxy</span><span class="op" id="7310510">(</span><span class="ident" id="7310511">test</span><span class="op" id="7310515">.</span><span class="ident" id="7310516">host</span><span class="op" id="7310520">+</span><span class="string" id="7310521">&#34;:80&#34;</span><span class="op" id="7310526">)</span>&nbsp;<span class="op" id="7310528">!=</span>&nbsp;<span class="ident" id="7310531">test</span><span class="op" id="7310535">.</span><span class="ident" id="7310536">match</span>&nbsp;<span class="op" id="7310542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310547">t</span><span class="op" id="7310548">.</span><span class="ident" id="7310549">Errorf</span><span class="op" id="7310555">(</span><span class="string" id="7310556">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7310584">,</span>&nbsp;<span class="ident" id="7310586">test</span><span class="op" id="7310590">.</span><span class="ident" id="7310591">host</span><span class="op" id="7310595">,</span>&nbsp;<span class="op" id="7310597">!</span><span class="ident" id="7310598">test</span><span class="op" id="7310602">.</span><span class="ident" id="7310603">match</span><span class="op" id="7310608">,</span>&nbsp;<span class="ident" id="7310610">test</span><span class="op" id="7310614">.</span><span class="ident" id="7310615">match</span><span class="op" id="7310620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310627">}</span><br>
<span class="lineno">45</span><span class="op" id="7310629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7310632">var</span>&nbsp;<span class="ident" id="7310636">cacheKeysTests</span>&nbsp;<span class="op" id="7310651">=</span>&nbsp;<span class="op" id="7310653">[</span><span class="op" id="7310654">]</span><span class="keyword" id="7310655">struct</span>&nbsp;<span class="op" id="7310662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310665">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="7310672">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310680">scheme</span>&nbsp;<span class="builtintype" id="7310687">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310695">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7310702">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7310710">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7310717">string</span><br>
<span class="lineno"></span><span class="op" id="7310724">}</span><span class="op" id="7310725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310728">{</span><span class="string" id="7310729">&#34;&#34;</span><span class="op" id="7310731">,</span>&nbsp;<span class="string" id="7310733">&#34;http&#34;</span><span class="op" id="7310739">,</span>&nbsp;<span class="string" id="7310741">&#34;foo.com&#34;</span><span class="op" id="7310750">,</span>&nbsp;<span class="string" id="7310752">&#34;|http|foo.com&#34;</span><span class="op" id="7310767">}</span><span class="op" id="7310768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310771">{</span><span class="string" id="7310772">&#34;&#34;</span><span class="op" id="7310774">,</span>&nbsp;<span class="string" id="7310776">&#34;https&#34;</span><span class="op" id="7310783">,</span>&nbsp;<span class="string" id="7310785">&#34;foo.com&#34;</span><span class="op" id="7310794">,</span>&nbsp;<span class="string" id="7310796">&#34;|https|foo.com&#34;</span><span class="op" id="7310812">}</span><span class="op" id="7310813">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310816">{</span><span class="string" id="7310817">&#34;http://foo.com&#34;</span><span class="op" id="7310833">,</span>&nbsp;<span class="string" id="7310835">&#34;http&#34;</span><span class="op" id="7310841">,</span>&nbsp;<span class="string" id="7310843">&#34;foo.com&#34;</span><span class="op" id="7310852">,</span>&nbsp;<span class="string" id="7310854">&#34;http://foo.com|http|&#34;</span><span class="op" id="7310876">}</span><span class="op" id="7310877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7310880">{</span><span class="string" id="7310881">&#34;http://foo.com&#34;</span><span class="op" id="7310897">,</span>&nbsp;<span class="string" id="7310899">&#34;https&#34;</span><span class="op" id="7310906">,</span>&nbsp;<span class="string" id="7310908">&#34;foo.com&#34;</span><span class="op" id="7310917">,</span>&nbsp;<span class="string" id="7310919">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="7310949">}</span><span class="op" id="7310950">,</span><br>
<span class="lineno"></span><span class="op" id="7310952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7310955">func</span>&nbsp;<span class="ident" id="7310960">TestCacheKeys</span><span class="op" id="7310973">(</span><span class="ident" id="7310974">t</span>&nbsp;<span class="op" id="7310976">*</span><span class="ident" id="7310977">testing</span><span class="op" id="7310984">.</span><span class="ident" id="7310985">T</span><span class="op" id="7310986">)</span>&nbsp;<span class="op" id="7310988">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7310991">for</span>&nbsp;<span class="ident" id="7310995">_</span><span class="op" id="7310996">,</span>&nbsp;<span class="ident" id="7310998">tt</span>&nbsp;<span class="op" id="7311001">:=</span>&nbsp;<span class="keyword" id="7311004">range</span>&nbsp;<span class="ident" id="7311010">cacheKeysTests</span>&nbsp;<span class="op" id="7311025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311029">var</span>&nbsp;<span class="ident" id="7311033">proxy</span>&nbsp;<span class="op" id="7311039">*</span><span class="ident" id="7311040">url</span><span class="op" id="7311043">.</span><span class="ident" id="7311044">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311050">if</span>&nbsp;<span class="ident" id="7311053">tt</span><span class="op" id="7311055">.</span><span class="ident" id="7311056">proxy</span>&nbsp;<span class="op" id="7311062">!=</span>&nbsp;<span class="string" id="7311065">&#34;&#34;</span>&nbsp;<span class="op" id="7311068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311073">u</span><span class="op" id="7311074">,</span>&nbsp;<span class="ident" id="7311076">err</span>&nbsp;<span class="op" id="7311080">:=</span>&nbsp;<span class="ident" id="7311083">url</span><span class="op" id="7311086">.</span><span class="ident" id="7311087">Parse</span><span class="op" id="7311092">(</span><span class="ident" id="7311093">tt</span><span class="op" id="7311095">.</span><span class="ident" id="7311096">proxy</span><span class="op" id="7311101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311106">if</span>&nbsp;<span class="ident" id="7311109">err</span>&nbsp;<span class="op" id="7311113">!=</span>&nbsp;<span class="ident" id="7311116">nil</span>&nbsp;<span class="op" id="7311120">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311126">t</span><span class="op" id="7311127">.</span><span class="ident" id="7311128">Fatal</span><span class="op" id="7311133">(</span><span class="ident" id="7311134">err</span><span class="op" id="7311137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311147">proxy</span>&nbsp;<span class="op" id="7311153">=</span>&nbsp;<span class="ident" id="7311155">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311163">cm</span>&nbsp;<span class="op" id="7311166">:=</span>&nbsp;<span class="ident" id="7311169">connectMethod</span><span class="op" id="7311182">{</span><span class="ident" id="7311183">proxy</span><span class="op" id="7311188">,</span>&nbsp;<span class="ident" id="7311190">tt</span><span class="op" id="7311192">.</span><span class="ident" id="7311193">scheme</span><span class="op" id="7311199">,</span>&nbsp;<span class="ident" id="7311201">tt</span><span class="op" id="7311203">.</span><span class="ident" id="7311204">addr</span><span class="op" id="7311208">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311212">if</span>&nbsp;<span class="ident" id="7311215">got</span>&nbsp;<span class="op" id="7311219">:=</span>&nbsp;<span class="ident" id="7311222">cm</span><span class="op" id="7311224">.</span><span class="ident" id="7311225">key</span><span class="op" id="7311228">(</span><span class="op" id="7311229">)</span><span class="op" id="7311230">.</span><span class="ident" id="7311231">String</span><span class="op" id="7311237">(</span><span class="op" id="7311238">)</span><span class="op" id="7311239">;</span>&nbsp;<span class="ident" id="7311241">got</span>&nbsp;<span class="op" id="7311245">!=</span>&nbsp;<span class="ident" id="7311248">tt</span><span class="op" id="7311250">.</span><span class="ident" id="7311251">key</span>&nbsp;<span class="op" id="7311255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311260">t</span><span class="op" id="7311261">.</span><span class="ident" id="7311262">Fatalf</span><span class="op" id="7311268">(</span><span class="string" id="7311269">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7311307">,</span>&nbsp;<span class="ident" id="7311309">tt</span><span class="op" id="7311311">.</span><span class="ident" id="7311312">proxy</span><span class="op" id="7311317">,</span>&nbsp;<span class="ident" id="7311319">tt</span><span class="op" id="7311321">.</span><span class="ident" id="7311322">scheme</span><span class="op" id="7311328">,</span>&nbsp;<span class="ident" id="7311330">tt</span><span class="op" id="7311332">.</span><span class="ident" id="7311333">addr</span><span class="op" id="7311337">,</span>&nbsp;<span class="ident" id="7311339">got</span><span class="op" id="7311342">,</span>&nbsp;<span class="ident" id="7311344">tt</span><span class="op" id="7311346">.</span><span class="ident" id="7311347">key</span><span class="op" id="7311350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311357">}</span><br>
<span class="lineno"></span><span class="op" id="7311359">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7311362">func</span>&nbsp;<span class="ident" id="7311367">ResetProxyEnv</span><span class="op" id="7311380">(</span><span class="op" id="7311381">)</span>&nbsp;<span class="op" id="7311383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7311386">for</span>&nbsp;<span class="ident" id="7311390">_</span><span class="op" id="7311391">,</span>&nbsp;<span class="ident" id="7311393">v</span>&nbsp;<span class="op" id="7311395">:=</span>&nbsp;<span class="keyword" id="7311398">range</span>&nbsp;<span class="op" id="7311404">[</span><span class="op" id="7311405">]</span><span class="builtintype" id="7311406">string</span><span class="op" id="7311412">{</span><span class="string" id="7311413">&#34;HTTP_PROXY&#34;</span><span class="op" id="7311425">,</span>&nbsp;<span class="string" id="7311427">&#34;http_proxy&#34;</span><span class="op" id="7311439">,</span>&nbsp;<span class="string" id="7311441">&#34;NO_PROXY&#34;</span><span class="op" id="7311451">,</span>&nbsp;<span class="string" id="7311453">&#34;no_proxy&#34;</span><span class="op" id="7311463">}</span>&nbsp;<span class="op" id="7311465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311469">os</span><span class="op" id="7311471">.</span><span class="ident" id="7311472">Setenv</span><span class="op" id="7311478">(</span><span class="ident" id="7311479">v</span><span class="op" id="7311480">,</span>&nbsp;<span class="string" id="7311482">&#34;&#34;</span><span class="op" id="7311484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7311487">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7311490">ResetCachedEnvironment</span><span class="op" id="7311512">(</span><span class="op" id="7311513">)</span><br>
<span class="lineno"></span><span class="op" id="7311515">}</span>
</div>
</body>
</html>
