<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2671000">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2671056">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2671110">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2671161">package</span>&nbsp;<span class="ident" id="2671169">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2671174">import</span>&nbsp;<span class="op" id="2671181">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2671184">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2671190">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2671196">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2671206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671209">//&nbsp;maxSendfileSize&nbsp;is&nbsp;the&nbsp;largest&nbsp;chunk&nbsp;size&nbsp;we&nbsp;ask&nbsp;the&nbsp;kernel&nbsp;to&nbsp;copy</span><br>
<span class="lineno"></span><span class="comment" id="2671280">//&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">15</span><span class="keyword" id="2671294">const</span>&nbsp;<span class="ident" id="2671300">maxSendfileSize</span>&nbsp;<span class="builtintype" id="2671316">int</span>&nbsp;<span class="op" id="2671320">=</span>&nbsp;<span class="num" id="2671322">4</span>&nbsp;<span class="op" id="2671324">&lt;&lt;</span>&nbsp;<span class="num" id="2671327">20</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2671331">//&nbsp;sendFile&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;r&nbsp;to&nbsp;c&nbsp;using&nbsp;the&nbsp;sendfile</span><br>
<span class="lineno"></span><span class="comment" id="2671392">//&nbsp;system&nbsp;call&nbsp;to&nbsp;minimize&nbsp;copies.</span><br>
<span class="lineno"></span><span class="comment" id="2671427">//</span><br>
<span class="lineno">20</span><span class="comment" id="2671430">//&nbsp;if&nbsp;handled&nbsp;==&nbsp;true,&nbsp;sendFile&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="2671505">//&nbsp;non-EOF&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="2671523">//</span><br>
<span class="lineno"></span><span class="comment" id="2671526">//&nbsp;if&nbsp;handled&nbsp;==&nbsp;false,&nbsp;sendFile&nbsp;performed&nbsp;no&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="2671578">func</span>&nbsp;<span class="ident" id="2671583">sendFile</span><span class="op" id="2671591">(</span><span class="ident" id="2671592">c</span>&nbsp;<span class="op" id="2671594">*</span><span class="ident" id="2671595"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2671600">,</span>&nbsp;<span class="ident" id="2671602">r</span>&nbsp;<span class="ident" id="2671604"><a href="/net/sendfile_linux.go.html#2671184">io</a></span><span class="op" id="2671606">.</span><span class="ident" id="2671607">Reader</span><span class="op" id="2671613">)</span>&nbsp;<span class="op" id="2671615">(</span><span class="ident" id="2671616">written</span>&nbsp;<span class="ident" id="2671624">int64</span><span class="op" id="2671629">,</span>&nbsp;<span class="ident" id="2671631">err</span>&nbsp;<span class="builtintype" id="2671635">error</span><span class="op" id="2671640">,</span>&nbsp;<span class="ident" id="2671642">handled</span>&nbsp;<span class="builtintype" id="2671650">bool</span><span class="op" id="2671654">)</span>&nbsp;<span class="op" id="2671656">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671659">var</span>&nbsp;<span class="ident" id="2671663">remain</span>&nbsp;<span class="ident" id="2671670">int64</span>&nbsp;<span class="op" id="2671676">=</span>&nbsp;<span class="num" id="2671678">1</span>&nbsp;<span class="op" id="2671680">&lt;&lt;</span>&nbsp;<span class="num" id="2671683">62</span>&nbsp;<span class="comment" id="2671686">//&nbsp;by&nbsp;default,&nbsp;copy&nbsp;until&nbsp;EOF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671718">lr</span><span class="op" id="2671720">,</span>&nbsp;<span class="ident" id="2671722">ok</span>&nbsp;<span class="op" id="2671725">:=</span>&nbsp;<span class="ident" id="2671728"><a href="/net/sendfile_linux.go.html#2671602">r</a></span><span class="op" id="2671729">.</span><span class="op" id="2671730">(</span><span class="op" id="2671731">*</span><span class="ident" id="2671732"><a href="/net/sendfile_linux.go.html#2671184">io</a></span><span class="op" id="2671734">.</span><span class="ident" id="2671735">LimitedReader</span><span class="op" id="2671748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671751">if</span>&nbsp;<span class="ident" id="2671754"><a href="/net/sendfile_linux.go.html#2671722">ok</a></span>&nbsp;<span class="op" id="2671757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671761"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span><span class="op" id="2671767">,</span>&nbsp;<span class="ident" id="2671769"><a href="/net/sendfile_linux.go.html#2671602">r</a></span>&nbsp;<span class="op" id="2671771">=</span>&nbsp;<span class="ident" id="2671773"><a href="/net/sendfile_linux.go.html#2671718">lr</a></span><span class="op" id="2671775">.</span><span class="ident" id="2671776">N</span><span class="op" id="2671777">,</span>&nbsp;<span class="ident" id="2671779"><a href="/net/sendfile_linux.go.html#2671718">lr</a></span><span class="op" id="2671781">.</span><span class="ident" id="2671782">R</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671786">if</span>&nbsp;<span class="ident" id="2671789"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span>&nbsp;<span class="op" id="2671796">&lt;=</span>&nbsp;<span class="num" id="2671799">0</span>&nbsp;<span class="op" id="2671801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671806">return</span>&nbsp;<span class="num" id="2671813">0</span><span class="op" id="2671814">,</span>&nbsp;<span class="ident" id="2671816">nil</span><span class="op" id="2671819">,</span>&nbsp;<span class="ident" id="2671821">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2671828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2671831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671834">f</span><span class="op" id="2671835">,</span>&nbsp;<span class="ident" id="2671837"><a href="/net/sendfile_linux.go.html#2671722">ok</a></span>&nbsp;<span class="op" id="2671840">:=</span>&nbsp;<span class="ident" id="2671843"><a href="/net/sendfile_linux.go.html#2671602">r</a></span><span class="op" id="2671844">.</span><span class="op" id="2671845">(</span><span class="op" id="2671846">*</span><span class="ident" id="2671847"><a href="/net/sendfile_linux.go.html#2671190">os</a></span><span class="op" id="2671849">.</span><span class="ident" id="2671850">File</span><span class="op" id="2671854">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671857">if</span>&nbsp;<span class="op" id="2671860">!</span><span class="ident" id="2671861"><a href="/net/sendfile_linux.go.html#2671722">ok</a></span>&nbsp;<span class="op" id="2671864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671868">return</span>&nbsp;<span class="num" id="2671875">0</span><span class="op" id="2671876">,</span>&nbsp;<span class="ident" id="2671878">nil</span><span class="op" id="2671881">,</span>&nbsp;<span class="ident" id="2671883">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2671890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671894">if</span>&nbsp;<span class="ident" id="2671897">err</span>&nbsp;<span class="op" id="2671901">:=</span>&nbsp;<span class="ident" id="2671904"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2671905">.</span><span class="ident" id="2671906">writeLock</span><span class="op" id="2671915">(</span><span class="op" id="2671916">)</span><span class="op" id="2671917">;</span>&nbsp;<span class="ident" id="2671919"><a href="/net/sendfile_linux.go.html#2671897">err</a></span>&nbsp;<span class="op" id="2671923">!=</span>&nbsp;<span class="ident" id="2671926">nil</span>&nbsp;<span class="op" id="2671930">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671934">return</span>&nbsp;<span class="num" id="2671941">0</span><span class="op" id="2671942">,</span>&nbsp;<span class="ident" id="2671944"><a href="/net/sendfile_linux.go.html#2671897">err</a></span><span class="op" id="2671947">,</span>&nbsp;<span class="ident" id="2671949">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2671955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2671958">defer</span>&nbsp;<span class="ident" id="2671964"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2671965">.</span><span class="ident" id="2671966">writeUnlock</span><span class="op" id="2671977">(</span><span class="op" id="2671978">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671982">dst</span>&nbsp;<span class="op" id="2671986">:=</span>&nbsp;<span class="ident" id="2671989"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2671990">.</span><span class="ident" id="2671991">sysfd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2671998">src</span>&nbsp;<span class="op" id="2672002">:=</span>&nbsp;<span class="builtintype" id="2672005">int</span><span class="op" id="2672008">(</span><span class="ident" id="2672009"><a href="/net/sendfile_linux.go.html#2671834">f</a></span><span class="op" id="2672010">.</span><span class="ident" id="2672011">Fd</span><span class="op" id="2672013">(</span><span class="op" id="2672014">)</span><span class="op" id="2672015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672018">for</span>&nbsp;<span class="ident" id="2672022"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span>&nbsp;<span class="op" id="2672029">&gt;</span>&nbsp;<span class="num" id="2672031">0</span>&nbsp;<span class="op" id="2672033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672037">n</span>&nbsp;<span class="op" id="2672039">:=</span>&nbsp;<span class="ident" id="2672042"><a href="/net/sendfile_linux.go.html#2671300">maxSendfileSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672060">if</span>&nbsp;<span class="ident" id="2672063">int64</span><span class="op" id="2672068">(</span><span class="ident" id="2672069"><a href="/net/sendfile_linux.go.html#2672037">n</a></span><span class="op" id="2672070">)</span>&nbsp;<span class="op" id="2672072">&gt;</span>&nbsp;<span class="ident" id="2672074"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span>&nbsp;<span class="op" id="2672081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672086"><a href="/net/sendfile_linux.go.html#2672037">n</a></span>&nbsp;<span class="op" id="2672088">=</span>&nbsp;<span class="builtintype" id="2672090">int</span><span class="op" id="2672093">(</span><span class="ident" id="2672094"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span><span class="op" id="2672100">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672108"><a href="/net/sendfile_linux.go.html#2672037">n</a></span><span class="op" id="2672109">,</span>&nbsp;<span class="ident" id="2672111">err1</span>&nbsp;<span class="op" id="2672116">:=</span>&nbsp;<span class="ident" id="2672119"><a href="/net/sendfile_linux.go.html#2671196">syscall</a></span><span class="op" id="2672126">.</span><span class="ident" id="2672127">Sendfile</span><span class="op" id="2672135">(</span><span class="ident" id="2672136"><a href="/net/sendfile_linux.go.html#2671982">dst</a></span><span class="op" id="2672139">,</span>&nbsp;<span class="ident" id="2672141"><a href="/net/sendfile_linux.go.html#2671998">src</a></span><span class="op" id="2672144">,</span>&nbsp;<span class="ident" id="2672146">nil</span><span class="op" id="2672149">,</span>&nbsp;<span class="ident" id="2672151"><a href="/net/sendfile_linux.go.html#2672037">n</a></span><span class="op" id="2672152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672156">if</span>&nbsp;<span class="ident" id="2672159"><a href="/net/sendfile_linux.go.html#2672037">n</a></span>&nbsp;<span class="op" id="2672161">&gt;</span>&nbsp;<span class="num" id="2672163">0</span>&nbsp;<span class="op" id="2672165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672170"><a href="/net/sendfile_linux.go.html#2671616">written</a></span>&nbsp;<span class="op" id="2672178">+=</span>&nbsp;<span class="ident" id="2672181">int64</span><span class="op" id="2672186">(</span><span class="ident" id="2672187"><a href="/net/sendfile_linux.go.html#2672037">n</a></span><span class="op" id="2672188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672193"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span>&nbsp;<span class="op" id="2672200">-=</span>&nbsp;<span class="ident" id="2672203">int64</span><span class="op" id="2672208">(</span><span class="ident" id="2672209"><a href="/net/sendfile_linux.go.html#2672037">n</a></span><span class="op" id="2672210">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672218">if</span>&nbsp;<span class="ident" id="2672221"><a href="/net/sendfile_linux.go.html#2672037">n</a></span>&nbsp;<span class="op" id="2672223">==</span>&nbsp;<span class="num" id="2672226">0</span>&nbsp;<span class="op" id="2672228">&amp;&amp;</span>&nbsp;<span class="ident" id="2672231"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span>&nbsp;<span class="op" id="2672236">==</span>&nbsp;<span class="ident" id="2672239">nil</span>&nbsp;<span class="op" id="2672243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672248">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672260">if</span>&nbsp;<span class="ident" id="2672263"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span>&nbsp;<span class="op" id="2672268">==</span>&nbsp;<span class="ident" id="2672271"><a href="/net/sendfile_linux.go.html#2671196">syscall</a></span><span class="op" id="2672278">.</span><span class="ident" id="2672279">EAGAIN</span>&nbsp;<span class="op" id="2672286">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672291">if</span>&nbsp;<span class="ident" id="2672294"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span>&nbsp;<span class="op" id="2672299">=</span>&nbsp;<span class="ident" id="2672301"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2672302">.</span><span class="ident" id="2672303">pd</span><span class="op" id="2672305">.</span><span class="ident" id="2672306">WaitWrite</span><span class="op" id="2672315">(</span><span class="op" id="2672316">)</span><span class="op" id="2672317">;</span>&nbsp;<span class="ident" id="2672319"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span>&nbsp;<span class="op" id="2672324">==</span>&nbsp;<span class="ident" id="2672327">nil</span>&nbsp;<span class="op" id="2672331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672337">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672357">if</span>&nbsp;<span class="ident" id="2672360"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span>&nbsp;<span class="op" id="2672365">!=</span>&nbsp;<span class="ident" id="2672368">nil</span>&nbsp;<span class="op" id="2672372">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2672377">//&nbsp;This&nbsp;includes&nbsp;syscall.ENOSYS&nbsp;(no&nbsp;kernel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2672423">//&nbsp;support)&nbsp;and&nbsp;syscall.EINVAL&nbsp;(fd&nbsp;types&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2672473">//&nbsp;don&#39;t&nbsp;implement&nbsp;sendfile&nbsp;together)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672514"><a href="/net/sendfile_linux.go.html#2671631">err</a></span>&nbsp;<span class="op" id="2672518">=</span>&nbsp;<span class="op" id="2672520">&amp;</span><span class="ident" id="2672521"><a href="/net/net.go.html#2659621">OpError</a></span><span class="op" id="2672528">{</span><span class="string" id="2672529">&#34;sendfile&#34;</span><span class="op" id="2672539">,</span>&nbsp;<span class="ident" id="2672541"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2672542">.</span><span class="ident" id="2672543">net</span><span class="op" id="2672546">,</span>&nbsp;<span class="ident" id="2672548"><a href="/net/sendfile_linux.go.html#2671592">c</a></span><span class="op" id="2672549">.</span><span class="ident" id="2672550">raddr</span><span class="op" id="2672555">,</span>&nbsp;<span class="ident" id="2672557"><a href="/net/sendfile_linux.go.html#2672111">err1</a></span><span class="op" id="2672561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672566">break</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672580">if</span>&nbsp;<span class="ident" id="2672583"><a href="/net/sendfile_linux.go.html#2671718">lr</a></span>&nbsp;<span class="op" id="2672586">!=</span>&nbsp;<span class="ident" id="2672589">nil</span>&nbsp;<span class="op" id="2672593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2672597"><a href="/net/sendfile_linux.go.html#2671718">lr</a></span><span class="op" id="2672599">.</span><span class="ident" id="2672600">N</span>&nbsp;<span class="op" id="2672602">=</span>&nbsp;<span class="ident" id="2672604"><a href="/net/sendfile_linux.go.html#2671663">remain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2672612">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2672615">return</span>&nbsp;<span class="ident" id="2672622"><a href="/net/sendfile_linux.go.html#2671616">written</a></span><span class="op" id="2672629">,</span>&nbsp;<span class="ident" id="2672631"><a href="/net/sendfile_linux.go.html#2671631">err</a></span><span class="op" id="2672634">,</span>&nbsp;<span class="ident" id="2672636"><a href="/net/sendfile_linux.go.html#2671616">written</a></span>&nbsp;<span class="op" id="2672644">&gt;</span>&nbsp;<span class="num" id="2672646">0</span><br>
<span class="lineno"></span><span class="op" id="2672648">}</span>
</div>
</body>
</html>
