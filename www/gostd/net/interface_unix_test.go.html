<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6609784">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6609840">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6609894">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6609945">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6610002">package</span>&nbsp;<span class="ident" id="6610010">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6610015">import</span>&nbsp;<span class="op" id="6610022">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6610025">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6610031">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6610042">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6610053">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6610064">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6610071">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6610074">type</span>&nbsp;<span class="ident" id="6610079">testInterface</span>&nbsp;<span class="keyword" id="6610093">struct</span>&nbsp;<span class="op" id="6610100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610103">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6610116">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610124">local</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6610137">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610145">remote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6610158">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610166">setupCmds</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6610179">[</span><span class="op" id="6610180">]</span><span class="op" id="6610181">*</span><span class="ident" id="6610182">exec</span><span class="op" id="6610186">.</span><span class="ident" id="6610187">Cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610192">teardownCmds</span>&nbsp;<span class="op" id="6610205">[</span><span class="op" id="6610206">]</span><span class="op" id="6610207">*</span><span class="ident" id="6610208">exec</span><span class="op" id="6610212">.</span><span class="ident" id="6610213">Cmd</span><br>
<span class="lineno"></span><span class="op" id="6610217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6610220">func</span>&nbsp;<span class="op" id="6610225">(</span><span class="ident" id="6610226">ti</span>&nbsp;<span class="op" id="6610229">*</span><span class="ident" id="6610230">testInterface</span><span class="op" id="6610243">)</span>&nbsp;<span class="ident" id="6610245">setup</span><span class="op" id="6610250">(</span><span class="op" id="6610251">)</span>&nbsp;<span class="builtintype" id="6610253">error</span>&nbsp;<span class="op" id="6610259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610262">for</span>&nbsp;<span class="ident" id="6610266">_</span><span class="op" id="6610267">,</span>&nbsp;<span class="ident" id="6610269">cmd</span>&nbsp;<span class="op" id="6610273">:=</span>&nbsp;<span class="keyword" id="6610276">range</span>&nbsp;<span class="ident" id="6610282">ti</span><span class="op" id="6610284">.</span><span class="ident" id="6610285">setupCmds</span>&nbsp;<span class="op" id="6610295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610299">if</span>&nbsp;<span class="ident" id="6610302">err</span>&nbsp;<span class="op" id="6610306">:=</span>&nbsp;<span class="ident" id="6610309">cmd</span><span class="op" id="6610312">.</span><span class="ident" id="6610313">Run</span><span class="op" id="6610316">(</span><span class="op" id="6610317">)</span><span class="op" id="6610318">;</span>&nbsp;<span class="ident" id="6610320">err</span>&nbsp;<span class="op" id="6610324">!=</span>&nbsp;<span class="ident" id="6610327">nil</span>&nbsp;<span class="op" id="6610331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610336">return</span>&nbsp;<span class="ident" id="6610343">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610349">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610355">return</span>&nbsp;<span class="ident" id="6610362">nil</span><br>
<span class="lineno"></span><span class="op" id="6610366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6610369">func</span>&nbsp;<span class="op" id="6610374">(</span><span class="ident" id="6610375">ti</span>&nbsp;<span class="op" id="6610378">*</span><span class="ident" id="6610379">testInterface</span><span class="op" id="6610392">)</span>&nbsp;<span class="ident" id="6610394">teardown</span><span class="op" id="6610402">(</span><span class="op" id="6610403">)</span>&nbsp;<span class="builtintype" id="6610405">error</span>&nbsp;<span class="op" id="6610411">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610414">for</span>&nbsp;<span class="ident" id="6610418">_</span><span class="op" id="6610419">,</span>&nbsp;<span class="ident" id="6610421">cmd</span>&nbsp;<span class="op" id="6610425">:=</span>&nbsp;<span class="keyword" id="6610428">range</span>&nbsp;<span class="ident" id="6610434">ti</span><span class="op" id="6610436">.</span><span class="ident" id="6610437">teardownCmds</span>&nbsp;<span class="op" id="6610450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610454">if</span>&nbsp;<span class="ident" id="6610457">err</span>&nbsp;<span class="op" id="6610461">:=</span>&nbsp;<span class="ident" id="6610464">cmd</span><span class="op" id="6610467">.</span><span class="ident" id="6610468">Run</span><span class="op" id="6610471">(</span><span class="op" id="6610472">)</span><span class="op" id="6610473">;</span>&nbsp;<span class="ident" id="6610475">err</span>&nbsp;<span class="op" id="6610479">!=</span>&nbsp;<span class="ident" id="6610482">nil</span>&nbsp;<span class="op" id="6610486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610491">return</span>&nbsp;<span class="ident" id="6610498">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610507">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610510">return</span>&nbsp;<span class="ident" id="6610517">nil</span><br>
<span class="lineno"></span><span class="op" id="6610521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6610524">func</span>&nbsp;<span class="ident" id="6610529">TestPointToPointInterface</span><span class="op" id="6610554">(</span><span class="ident" id="6610555">t</span>&nbsp;<span class="op" id="6610557">*</span><span class="ident" id="6610558">testing</span><span class="op" id="6610565">.</span><span class="ident" id="6610566">T</span><span class="op" id="6610567">)</span>&nbsp;<span class="op" id="6610569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610572">if</span>&nbsp;<span class="ident" id="6610575">testing</span><span class="op" id="6610582">.</span><span class="ident" id="6610583">Short</span><span class="op" id="6610588">(</span><span class="op" id="6610589">)</span>&nbsp;<span class="op" id="6610591">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610595">t</span><span class="op" id="6610596">.</span><span class="ident" id="6610597">Skip</span><span class="op" id="6610601">(</span><span class="string" id="6610602">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6610631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610637">switch</span>&nbsp;<span class="op" id="6610644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610647">case</span>&nbsp;<span class="ident" id="6610652">runtime</span><span class="op" id="6610659">.</span><span class="ident" id="6610660">GOOS</span>&nbsp;<span class="op" id="6610665">==</span>&nbsp;<span class="string" id="6610668">&#34;darwin&#34;</span><span class="op" id="6610676">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610680">t</span><span class="op" id="6610681">.</span><span class="ident" id="6610682">Skipf</span><span class="op" id="6610687">(</span><span class="string" id="6610688">&#34;skipping&nbsp;read&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6610714">,</span>&nbsp;<span class="ident" id="6610716">runtime</span><span class="op" id="6610723">.</span><span class="ident" id="6610724">GOOS</span><span class="op" id="6610728">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610734">if</span>&nbsp;<span class="ident" id="6610737">os</span><span class="op" id="6610739">.</span><span class="ident" id="6610740">Getuid</span><span class="op" id="6610746">(</span><span class="op" id="6610747">)</span>&nbsp;<span class="op" id="6610749">!=</span>&nbsp;<span class="num" id="6610752">0</span>&nbsp;<span class="op" id="6610754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610758">t</span><span class="op" id="6610759">.</span><span class="ident" id="6610760">Skip</span><span class="op" id="6610764">(</span><span class="string" id="6610765">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6610794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6610797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610801">local</span><span class="op" id="6610806">,</span>&nbsp;<span class="ident" id="6610808">remote</span>&nbsp;<span class="op" id="6610815">:=</span>&nbsp;<span class="string" id="6610818">&#34;169.254.0.1&#34;</span><span class="op" id="6610831">,</span>&nbsp;<span class="string" id="6610833">&#34;169.254.0.254&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610850">ip</span>&nbsp;<span class="op" id="6610853">:=</span>&nbsp;<span class="ident" id="6610856">ParseIP</span><span class="op" id="6610863">(</span><span class="ident" id="6610864">remote</span><span class="op" id="6610870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610873">for</span>&nbsp;<span class="ident" id="6610877">i</span>&nbsp;<span class="op" id="6610879">:=</span>&nbsp;<span class="num" id="6610882">0</span><span class="op" id="6610883">;</span>&nbsp;<span class="ident" id="6610885">i</span>&nbsp;<span class="op" id="6610887">&lt;</span>&nbsp;<span class="num" id="6610889">3</span><span class="op" id="6610890">;</span>&nbsp;<span class="ident" id="6610892">i</span><span class="op" id="6610893">++</span>&nbsp;<span class="op" id="6610896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610900">ti</span>&nbsp;<span class="op" id="6610903">:=</span>&nbsp;<span class="op" id="6610906">&amp;</span><span class="ident" id="6610907">testInterface</span><span class="op" id="6610920">{</span><span class="op" id="6610921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6610925">if</span>&nbsp;<span class="ident" id="6610928">err</span>&nbsp;<span class="op" id="6610932">:=</span>&nbsp;<span class="ident" id="6610935">ti</span><span class="op" id="6610937">.</span><span class="ident" id="6610938">setPointToPoint</span><span class="op" id="6610953">(</span><span class="num" id="6610954">5963</span><span class="op" id="6610958">+</span><span class="ident" id="6610959">i</span><span class="op" id="6610960">,</span>&nbsp;<span class="ident" id="6610962">local</span><span class="op" id="6610967">,</span>&nbsp;<span class="ident" id="6610969">remote</span><span class="op" id="6610975">)</span><span class="op" id="6610976">;</span>&nbsp;<span class="ident" id="6610978">err</span>&nbsp;<span class="op" id="6610982">!=</span>&nbsp;<span class="ident" id="6610985">nil</span>&nbsp;<span class="op" id="6610989">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6610994">t</span><span class="op" id="6610995">.</span><span class="ident" id="6610996">Skipf</span><span class="op" id="6611001">(</span><span class="string" id="6611002">&#34;test&nbsp;requries&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="6611038">,</span>&nbsp;<span class="ident" id="6611040">err</span><span class="op" id="6611043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611051">if</span>&nbsp;<span class="ident" id="6611054">err</span>&nbsp;<span class="op" id="6611058">:=</span>&nbsp;<span class="ident" id="6611061">ti</span><span class="op" id="6611063">.</span><span class="ident" id="6611064">setup</span><span class="op" id="6611069">(</span><span class="op" id="6611070">)</span><span class="op" id="6611071">;</span>&nbsp;<span class="ident" id="6611073">err</span>&nbsp;<span class="op" id="6611077">!=</span>&nbsp;<span class="ident" id="6611080">nil</span>&nbsp;<span class="op" id="6611084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611089">t</span><span class="op" id="6611090">.</span><span class="ident" id="6611091">Fatalf</span><span class="op" id="6611097">(</span><span class="string" id="6611098">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6611130">,</span>&nbsp;<span class="ident" id="6611132">err</span><span class="op" id="6611135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611139">}</span>&nbsp;<span class="keyword" id="6611141">else</span>&nbsp;<span class="op" id="6611146">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611151">time</span><span class="op" id="6611155">.</span><span class="ident" id="6611156">Sleep</span><span class="op" id="6611161">(</span><span class="num" id="6611162">3</span>&nbsp;<span class="op" id="6611164">*</span>&nbsp;<span class="ident" id="6611166">time</span><span class="op" id="6611170">.</span><span class="ident" id="6611171">Millisecond</span><span class="op" id="6611182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611190">ift</span><span class="op" id="6611193">,</span>&nbsp;<span class="ident" id="6611195">err</span>&nbsp;<span class="op" id="6611199">:=</span>&nbsp;<span class="ident" id="6611202">Interfaces</span><span class="op" id="6611212">(</span><span class="op" id="6611213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611217">if</span>&nbsp;<span class="ident" id="6611220">err</span>&nbsp;<span class="op" id="6611224">!=</span>&nbsp;<span class="ident" id="6611227">nil</span>&nbsp;<span class="op" id="6611231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611236">ti</span><span class="op" id="6611238">.</span><span class="ident" id="6611239">teardown</span><span class="op" id="6611247">(</span><span class="op" id="6611248">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611253">t</span><span class="op" id="6611254">.</span><span class="ident" id="6611255">Fatalf</span><span class="op" id="6611261">(</span><span class="string" id="6611262">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6611285">,</span>&nbsp;<span class="ident" id="6611287">err</span><span class="op" id="6611290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611298">for</span>&nbsp;<span class="ident" id="6611302">_</span><span class="op" id="6611303">,</span>&nbsp;<span class="ident" id="6611305">ifi</span>&nbsp;<span class="op" id="6611309">:=</span>&nbsp;<span class="keyword" id="6611312">range</span>&nbsp;<span class="ident" id="6611318">ift</span>&nbsp;<span class="op" id="6611322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611327">if</span>&nbsp;<span class="ident" id="6611330">ti</span><span class="op" id="6611332">.</span><span class="ident" id="6611333">name</span>&nbsp;<span class="op" id="6611338">==</span>&nbsp;<span class="ident" id="6611341">ifi</span><span class="op" id="6611344">.</span><span class="ident" id="6611345">Name</span>&nbsp;<span class="op" id="6611350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611356">ifat</span><span class="op" id="6611360">,</span>&nbsp;<span class="ident" id="6611362">err</span>&nbsp;<span class="op" id="6611366">:=</span>&nbsp;<span class="ident" id="6611369">ifi</span><span class="op" id="6611372">.</span><span class="ident" id="6611373">Addrs</span><span class="op" id="6611378">(</span><span class="op" id="6611379">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611385">if</span>&nbsp;<span class="ident" id="6611388">err</span>&nbsp;<span class="op" id="6611392">!=</span>&nbsp;<span class="ident" id="6611395">nil</span>&nbsp;<span class="op" id="6611399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611406">ti</span><span class="op" id="6611408">.</span><span class="ident" id="6611409">teardown</span><span class="op" id="6611417">(</span><span class="op" id="6611418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611425">t</span><span class="op" id="6611426">.</span><span class="ident" id="6611427">Fatalf</span><span class="op" id="6611433">(</span><span class="string" id="6611434">&#34;Interface.Addrs&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6611462">,</span>&nbsp;<span class="ident" id="6611464">err</span><span class="op" id="6611467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611479">for</span>&nbsp;<span class="ident" id="6611483">_</span><span class="op" id="6611484">,</span>&nbsp;<span class="ident" id="6611486">ifa</span>&nbsp;<span class="op" id="6611490">:=</span>&nbsp;<span class="keyword" id="6611493">range</span>&nbsp;<span class="ident" id="6611499">ifat</span>&nbsp;<span class="op" id="6611504">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611511">if</span>&nbsp;<span class="ident" id="6611514">ip</span><span class="op" id="6611516">.</span><span class="ident" id="6611517">Equal</span><span class="op" id="6611522">(</span><span class="ident" id="6611523">ifa</span><span class="op" id="6611526">.</span><span class="op" id="6611527">(</span><span class="op" id="6611528">*</span><span class="ident" id="6611529">IPNet</span><span class="op" id="6611534">)</span><span class="op" id="6611535">.</span><span class="ident" id="6611536">IP</span><span class="op" id="6611538">)</span>&nbsp;<span class="op" id="6611540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611548">ti</span><span class="op" id="6611550">.</span><span class="ident" id="6611551">teardown</span><span class="op" id="6611559">(</span><span class="op" id="6611560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611568">t</span><span class="op" id="6611569">.</span><span class="ident" id="6611570">Fatalf</span><span class="op" id="6611576">(</span><span class="string" id="6611577">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6611594">,</span>&nbsp;<span class="ident" id="6611596">ip</span><span class="op" id="6611598">,</span>&nbsp;<span class="ident" id="6611600">local</span><span class="op" id="6611605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611618">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611631">if</span>&nbsp;<span class="ident" id="6611634">err</span>&nbsp;<span class="op" id="6611638">:=</span>&nbsp;<span class="ident" id="6611641">ti</span><span class="op" id="6611643">.</span><span class="ident" id="6611644">teardown</span><span class="op" id="6611652">(</span><span class="op" id="6611653">)</span><span class="op" id="6611654">;</span>&nbsp;<span class="ident" id="6611656">err</span>&nbsp;<span class="op" id="6611660">!=</span>&nbsp;<span class="ident" id="6611663">nil</span>&nbsp;<span class="op" id="6611667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611672">t</span><span class="op" id="6611673">.</span><span class="ident" id="6611674">Fatalf</span><span class="op" id="6611680">(</span><span class="string" id="6611681">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6611716">,</span>&nbsp;<span class="ident" id="6611718">err</span><span class="op" id="6611721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611725">}</span>&nbsp;<span class="keyword" id="6611727">else</span>&nbsp;<span class="op" id="6611732">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611737">time</span><span class="op" id="6611741">.</span><span class="ident" id="6611742">Sleep</span><span class="op" id="6611747">(</span><span class="num" id="6611748">3</span>&nbsp;<span class="op" id="6611750">*</span>&nbsp;<span class="ident" id="6611752">time</span><span class="op" id="6611756">.</span><span class="ident" id="6611757">Millisecond</span><span class="op" id="6611768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611775">}</span><br>
<span class="lineno"></span><span class="op" id="6611777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6611780">func</span>&nbsp;<span class="ident" id="6611785">TestInterfaceArrivalAndDeparture</span><span class="op" id="6611817">(</span><span class="ident" id="6611818">t</span>&nbsp;<span class="op" id="6611820">*</span><span class="ident" id="6611821">testing</span><span class="op" id="6611828">.</span><span class="ident" id="6611829">T</span><span class="op" id="6611830">)</span>&nbsp;<span class="op" id="6611832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611835">if</span>&nbsp;<span class="ident" id="6611838">testing</span><span class="op" id="6611845">.</span><span class="ident" id="6611846">Short</span><span class="op" id="6611851">(</span><span class="op" id="6611852">)</span>&nbsp;<span class="op" id="6611854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611858">t</span><span class="op" id="6611859">.</span><span class="ident" id="6611860">Skip</span><span class="op" id="6611864">(</span><span class="string" id="6611865">&#34;skipping&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6611894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611900">if</span>&nbsp;<span class="ident" id="6611903">os</span><span class="op" id="6611905">.</span><span class="ident" id="6611906">Getuid</span><span class="op" id="6611912">(</span><span class="op" id="6611913">)</span>&nbsp;<span class="op" id="6611915">!=</span>&nbsp;<span class="num" id="6611918">0</span>&nbsp;<span class="op" id="6611920">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611924">t</span><span class="op" id="6611925">.</span><span class="ident" id="6611926">Skip</span><span class="op" id="6611930">(</span><span class="string" id="6611931">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6611960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6611963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6611967">for</span>&nbsp;<span class="ident" id="6611971">i</span>&nbsp;<span class="op" id="6611973">:=</span>&nbsp;<span class="num" id="6611976">0</span><span class="op" id="6611977">;</span>&nbsp;<span class="ident" id="6611979">i</span>&nbsp;<span class="op" id="6611981">&lt;</span>&nbsp;<span class="num" id="6611983">3</span><span class="op" id="6611984">;</span>&nbsp;<span class="ident" id="6611986">i</span><span class="op" id="6611987">++</span>&nbsp;<span class="op" id="6611990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6611994">ift1</span><span class="op" id="6611998">,</span>&nbsp;<span class="ident" id="6612000">err</span>&nbsp;<span class="op" id="6612004">:=</span>&nbsp;<span class="ident" id="6612007">Interfaces</span><span class="op" id="6612017">(</span><span class="op" id="6612018">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612022">if</span>&nbsp;<span class="ident" id="6612025">err</span>&nbsp;<span class="op" id="6612029">!=</span>&nbsp;<span class="ident" id="6612032">nil</span>&nbsp;<span class="op" id="6612036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612041">t</span><span class="op" id="6612042">.</span><span class="ident" id="6612043">Fatalf</span><span class="op" id="6612049">(</span><span class="string" id="6612050">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6612073">,</span>&nbsp;<span class="ident" id="6612075">err</span><span class="op" id="6612078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612086">ti</span>&nbsp;<span class="op" id="6612089">:=</span>&nbsp;<span class="op" id="6612092">&amp;</span><span class="ident" id="6612093">testInterface</span><span class="op" id="6612106">{</span><span class="op" id="6612107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612111">if</span>&nbsp;<span class="ident" id="6612114">err</span>&nbsp;<span class="op" id="6612118">:=</span>&nbsp;<span class="ident" id="6612121">ti</span><span class="op" id="6612123">.</span><span class="ident" id="6612124">setBroadcast</span><span class="op" id="6612136">(</span><span class="num" id="6612137">5682</span>&nbsp;<span class="op" id="6612142">+</span>&nbsp;<span class="ident" id="6612144">i</span><span class="op" id="6612145">)</span><span class="op" id="6612146">;</span>&nbsp;<span class="ident" id="6612148">err</span>&nbsp;<span class="op" id="6612152">!=</span>&nbsp;<span class="ident" id="6612155">nil</span>&nbsp;<span class="op" id="6612159">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612164">t</span><span class="op" id="6612165">.</span><span class="ident" id="6612166">Skipf</span><span class="op" id="6612171">(</span><span class="string" id="6612172">&#34;test&nbsp;requires&nbsp;external&nbsp;command:&nbsp;%v&#34;</span><span class="op" id="6612208">,</span>&nbsp;<span class="ident" id="6612210">err</span><span class="op" id="6612213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612221">if</span>&nbsp;<span class="ident" id="6612224">err</span>&nbsp;<span class="op" id="6612228">:=</span>&nbsp;<span class="ident" id="6612231">ti</span><span class="op" id="6612233">.</span><span class="ident" id="6612234">setup</span><span class="op" id="6612239">(</span><span class="op" id="6612240">)</span><span class="op" id="6612241">;</span>&nbsp;<span class="ident" id="6612243">err</span>&nbsp;<span class="op" id="6612247">!=</span>&nbsp;<span class="ident" id="6612250">nil</span>&nbsp;<span class="op" id="6612254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612259">t</span><span class="op" id="6612260">.</span><span class="ident" id="6612261">Fatalf</span><span class="op" id="6612267">(</span><span class="string" id="6612268">&#34;testInterface.setup&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6612300">,</span>&nbsp;<span class="ident" id="6612302">err</span><span class="op" id="6612305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612309">}</span>&nbsp;<span class="keyword" id="6612311">else</span>&nbsp;<span class="op" id="6612316">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612321">time</span><span class="op" id="6612325">.</span><span class="ident" id="6612326">Sleep</span><span class="op" id="6612331">(</span><span class="num" id="6612332">3</span>&nbsp;<span class="op" id="6612334">*</span>&nbsp;<span class="ident" id="6612336">time</span><span class="op" id="6612340">.</span><span class="ident" id="6612341">Millisecond</span><span class="op" id="6612352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612360">ift2</span><span class="op" id="6612364">,</span>&nbsp;<span class="ident" id="6612366">err</span>&nbsp;<span class="op" id="6612370">:=</span>&nbsp;<span class="ident" id="6612373">Interfaces</span><span class="op" id="6612383">(</span><span class="op" id="6612384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612388">if</span>&nbsp;<span class="ident" id="6612391">err</span>&nbsp;<span class="op" id="6612395">!=</span>&nbsp;<span class="ident" id="6612398">nil</span>&nbsp;<span class="op" id="6612402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612407">ti</span><span class="op" id="6612409">.</span><span class="ident" id="6612410">teardown</span><span class="op" id="6612418">(</span><span class="op" id="6612419">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612424">t</span><span class="op" id="6612425">.</span><span class="ident" id="6612426">Fatalf</span><span class="op" id="6612432">(</span><span class="string" id="6612433">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6612456">,</span>&nbsp;<span class="ident" id="6612458">err</span><span class="op" id="6612461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612469">if</span>&nbsp;<span class="builtinfunc" id="6612472">len</span><span class="op" id="6612475">(</span><span class="ident" id="6612476">ift2</span><span class="op" id="6612480">)</span>&nbsp;<span class="op" id="6612482">&lt;=</span>&nbsp;<span class="builtinfunc" id="6612485">len</span><span class="op" id="6612488">(</span><span class="ident" id="6612489">ift1</span><span class="op" id="6612493">)</span>&nbsp;<span class="op" id="6612495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612500">for</span>&nbsp;<span class="ident" id="6612504">_</span><span class="op" id="6612505">,</span>&nbsp;<span class="ident" id="6612507">ifi</span>&nbsp;<span class="op" id="6612511">:=</span>&nbsp;<span class="keyword" id="6612514">range</span>&nbsp;<span class="ident" id="6612520">ift1</span>&nbsp;<span class="op" id="6612525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612531">t</span><span class="op" id="6612532">.</span><span class="ident" id="6612533">Logf</span><span class="op" id="6612537">(</span><span class="string" id="6612538">&#34;before:&nbsp;%v&#34;</span><span class="op" id="6612550">,</span>&nbsp;<span class="ident" id="6612552">ifi</span><span class="op" id="6612555">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612565">for</span>&nbsp;<span class="ident" id="6612569">_</span><span class="op" id="6612570">,</span>&nbsp;<span class="ident" id="6612572">ifi</span>&nbsp;<span class="op" id="6612576">:=</span>&nbsp;<span class="keyword" id="6612579">range</span>&nbsp;<span class="ident" id="6612585">ift2</span>&nbsp;<span class="op" id="6612590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612596">t</span><span class="op" id="6612597">.</span><span class="ident" id="6612598">Logf</span><span class="op" id="6612602">(</span><span class="string" id="6612603">&#34;after:&nbsp;%v&#34;</span><span class="op" id="6612614">,</span>&nbsp;<span class="ident" id="6612616">ifi</span><span class="op" id="6612619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612629">ti</span><span class="op" id="6612631">.</span><span class="ident" id="6612632">teardown</span><span class="op" id="6612640">(</span><span class="op" id="6612641">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612646">t</span><span class="op" id="6612647">.</span><span class="ident" id="6612648">Fatalf</span><span class="op" id="6612654">(</span><span class="string" id="6612655">&#34;got&nbsp;%v;&nbsp;want&nbsp;gt&nbsp;%v&#34;</span><span class="op" id="6612675">,</span>&nbsp;<span class="builtinfunc" id="6612677">len</span><span class="op" id="6612680">(</span><span class="ident" id="6612681">ift2</span><span class="op" id="6612685">)</span><span class="op" id="6612686">,</span>&nbsp;<span class="builtinfunc" id="6612688">len</span><span class="op" id="6612691">(</span><span class="ident" id="6612692">ift1</span><span class="op" id="6612696">)</span><span class="op" id="6612697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612705">if</span>&nbsp;<span class="ident" id="6612708">err</span>&nbsp;<span class="op" id="6612712">:=</span>&nbsp;<span class="ident" id="6612715">ti</span><span class="op" id="6612717">.</span><span class="ident" id="6612718">teardown</span><span class="op" id="6612726">(</span><span class="op" id="6612727">)</span><span class="op" id="6612728">;</span>&nbsp;<span class="ident" id="6612730">err</span>&nbsp;<span class="op" id="6612734">!=</span>&nbsp;<span class="ident" id="6612737">nil</span>&nbsp;<span class="op" id="6612741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612746">t</span><span class="op" id="6612747">.</span><span class="ident" id="6612748">Fatalf</span><span class="op" id="6612754">(</span><span class="string" id="6612755">&#34;testInterface.teardown&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6612790">,</span>&nbsp;<span class="ident" id="6612792">err</span><span class="op" id="6612795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612799">}</span>&nbsp;<span class="keyword" id="6612801">else</span>&nbsp;<span class="op" id="6612806">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612811">time</span><span class="op" id="6612815">.</span><span class="ident" id="6612816">Sleep</span><span class="op" id="6612821">(</span><span class="num" id="6612822">3</span>&nbsp;<span class="op" id="6612824">*</span>&nbsp;<span class="ident" id="6612826">time</span><span class="op" id="6612830">.</span><span class="ident" id="6612831">Millisecond</span><span class="op" id="6612842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612850">ift3</span><span class="op" id="6612854">,</span>&nbsp;<span class="ident" id="6612856">err</span>&nbsp;<span class="op" id="6612860">:=</span>&nbsp;<span class="ident" id="6612863">Interfaces</span><span class="op" id="6612873">(</span><span class="op" id="6612874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612878">if</span>&nbsp;<span class="ident" id="6612881">err</span>&nbsp;<span class="op" id="6612885">!=</span>&nbsp;<span class="ident" id="6612888">nil</span>&nbsp;<span class="op" id="6612892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6612897">t</span><span class="op" id="6612898">.</span><span class="ident" id="6612899">Fatalf</span><span class="op" id="6612905">(</span><span class="string" id="6612906">&#34;Interfaces&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6612929">,</span>&nbsp;<span class="ident" id="6612931">err</span><span class="op" id="6612934">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6612938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612942">if</span>&nbsp;<span class="builtinfunc" id="6612945">len</span><span class="op" id="6612948">(</span><span class="ident" id="6612949">ift3</span><span class="op" id="6612953">)</span>&nbsp;<span class="op" id="6612955">&gt;=</span>&nbsp;<span class="builtinfunc" id="6612958">len</span><span class="op" id="6612961">(</span><span class="ident" id="6612962">ift2</span><span class="op" id="6612966">)</span>&nbsp;<span class="op" id="6612968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6612973">for</span>&nbsp;<span class="ident" id="6612977">_</span><span class="op" id="6612978">,</span>&nbsp;<span class="ident" id="6612980">ifi</span>&nbsp;<span class="op" id="6612984">:=</span>&nbsp;<span class="keyword" id="6612987">range</span>&nbsp;<span class="ident" id="6612993">ift2</span>&nbsp;<span class="op" id="6612998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6613004">t</span><span class="op" id="6613005">.</span><span class="ident" id="6613006">Logf</span><span class="op" id="6613010">(</span><span class="string" id="6613011">&#34;before:&nbsp;%v&#34;</span><span class="op" id="6613023">,</span>&nbsp;<span class="ident" id="6613025">ifi</span><span class="op" id="6613028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6613033">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6613038">for</span>&nbsp;<span class="ident" id="6613042">_</span><span class="op" id="6613043">,</span>&nbsp;<span class="ident" id="6613045">ifi</span>&nbsp;<span class="op" id="6613049">:=</span>&nbsp;<span class="keyword" id="6613052">range</span>&nbsp;<span class="ident" id="6613058">ift3</span>&nbsp;<span class="op" id="6613063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6613069">t</span><span class="op" id="6613070">.</span><span class="ident" id="6613071">Logf</span><span class="op" id="6613075">(</span><span class="string" id="6613076">&#34;after:&nbsp;%v&#34;</span><span class="op" id="6613087">,</span>&nbsp;<span class="ident" id="6613089">ifi</span><span class="op" id="6613092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6613097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6613102">t</span><span class="op" id="6613103">.</span><span class="ident" id="6613104">Fatalf</span><span class="op" id="6613110">(</span><span class="string" id="6613111">&#34;got&nbsp;%v;&nbsp;want&nbsp;lt&nbsp;%v&#34;</span><span class="op" id="6613131">,</span>&nbsp;<span class="builtinfunc" id="6613133">len</span><span class="op" id="6613136">(</span><span class="ident" id="6613137">ift3</span><span class="op" id="6613141">)</span><span class="op" id="6613142">,</span>&nbsp;<span class="builtinfunc" id="6613144">len</span><span class="op" id="6613147">(</span><span class="ident" id="6613148">ift2</span><span class="op" id="6613152">)</span><span class="op" id="6613153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6613157">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6613160">}</span><br>
<span class="lineno"></span><span class="op" id="6613162">}</span>
</div>
</body>
</html>
