<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4869384">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4869439">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4869493">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4869544">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="4869595">package</span>&nbsp;<span class="ident" id="4869603">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4869610">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="4869687">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="4869719">type</span>&nbsp;<span class="ident" id="4869724">Color</span>&nbsp;<span class="keyword" id="4869730">interface</span>&nbsp;<span class="op" id="4869740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4869743">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4869818">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4869894">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4869970">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869984">RGBA</span><span class="op" id="4869988">(</span><span class="op" id="4869989">)</span>&nbsp;<span class="op" id="4869991">(</span><span class="ident" id="4869992">r</span><span class="op" id="4869993">,</span>&nbsp;<span class="ident" id="4869995">g</span><span class="op" id="4869996">,</span>&nbsp;<span class="ident" id="4869998">b</span><span class="op" id="4869999">,</span>&nbsp;<span class="ident" id="4870001">a</span>&nbsp;<span class="builtintype" id="4870003">uint32</span><span class="op" id="4870009">)</span><br>
<span class="lineno"></span><span class="op" id="4870011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4870014">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="4870081">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="4870138">type</span>&nbsp;<span class="ident" id="4870143">RGBA</span>&nbsp;<span class="keyword" id="4870148">struct</span>&nbsp;<span class="op" id="4870155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870158">R</span><span class="op" id="4870159">,</span>&nbsp;<span class="ident" id="4870161">G</span><span class="op" id="4870162">,</span>&nbsp;<span class="ident" id="4870164">B</span><span class="op" id="4870165">,</span>&nbsp;<span class="ident" id="4870167">A</span>&nbsp;<span class="builtintype" id="4870169">uint8</span><br>
<span class="lineno"></span><span class="op" id="4870175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4870178">func</span>&nbsp;<span class="op" id="4870183">(</span><span class="ident" id="4870184">c</span>&nbsp;<span class="ident" id="4870186">RGBA</span><span class="op" id="4870190">)</span>&nbsp;<span class="ident" id="4870192">RGBA</span><span class="op" id="4870196">(</span><span class="op" id="4870197">)</span>&nbsp;<span class="op" id="4870199">(</span><span class="ident" id="4870200">r</span><span class="op" id="4870201">,</span>&nbsp;<span class="ident" id="4870203">g</span><span class="op" id="4870204">,</span>&nbsp;<span class="ident" id="4870206">b</span><span class="op" id="4870207">,</span>&nbsp;<span class="ident" id="4870209">a</span>&nbsp;<span class="builtintype" id="4870211">uint32</span><span class="op" id="4870217">)</span>&nbsp;<span class="op" id="4870219">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870222">r</span>&nbsp;<span class="op" id="4870224">=</span>&nbsp;<span class="builtintype" id="4870226">uint32</span><span class="op" id="4870232">(</span><span class="ident" id="4870233">c</span><span class="op" id="4870234">.</span><span class="ident" id="4870235">R</span><span class="op" id="4870236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870239">r</span>&nbsp;<span class="op" id="4870241">|=</span>&nbsp;<span class="ident" id="4870244">r</span>&nbsp;<span class="op" id="4870246">&lt;&lt;</span>&nbsp;<span class="num" id="4870249">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870252">g</span>&nbsp;<span class="op" id="4870254">=</span>&nbsp;<span class="builtintype" id="4870256">uint32</span><span class="op" id="4870262">(</span><span class="ident" id="4870263">c</span><span class="op" id="4870264">.</span><span class="ident" id="4870265">G</span><span class="op" id="4870266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870269">g</span>&nbsp;<span class="op" id="4870271">|=</span>&nbsp;<span class="ident" id="4870274">g</span>&nbsp;<span class="op" id="4870276">&lt;&lt;</span>&nbsp;<span class="num" id="4870279">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870282">b</span>&nbsp;<span class="op" id="4870284">=</span>&nbsp;<span class="builtintype" id="4870286">uint32</span><span class="op" id="4870292">(</span><span class="ident" id="4870293">c</span><span class="op" id="4870294">.</span><span class="ident" id="4870295">B</span><span class="op" id="4870296">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870299">b</span>&nbsp;<span class="op" id="4870301">|=</span>&nbsp;<span class="ident" id="4870304">b</span>&nbsp;<span class="op" id="4870306">&lt;&lt;</span>&nbsp;<span class="num" id="4870309">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870312">a</span>&nbsp;<span class="op" id="4870314">=</span>&nbsp;<span class="builtintype" id="4870316">uint32</span><span class="op" id="4870322">(</span><span class="ident" id="4870323">c</span><span class="op" id="4870324">.</span><span class="ident" id="4870325">A</span><span class="op" id="4870326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870329">a</span>&nbsp;<span class="op" id="4870331">|=</span>&nbsp;<span class="ident" id="4870334">a</span>&nbsp;<span class="op" id="4870336">&lt;&lt;</span>&nbsp;<span class="num" id="4870339">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870342">return</span><br>
<span class="lineno"></span><span class="op" id="4870349">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4870352">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="4870409">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="4870467">type</span>&nbsp;<span class="ident" id="4870472">RGBA64</span>&nbsp;<span class="keyword" id="4870479">struct</span>&nbsp;<span class="op" id="4870486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870489">R</span><span class="op" id="4870490">,</span>&nbsp;<span class="ident" id="4870492">G</span><span class="op" id="4870493">,</span>&nbsp;<span class="ident" id="4870495">B</span><span class="op" id="4870496">,</span>&nbsp;<span class="ident" id="4870498">A</span>&nbsp;<span class="builtintype" id="4870500">uint16</span><br>
<span class="lineno">40</span><span class="op" id="4870507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4870510">func</span>&nbsp;<span class="op" id="4870515">(</span><span class="ident" id="4870516">c</span>&nbsp;<span class="ident" id="4870518">RGBA64</span><span class="op" id="4870524">)</span>&nbsp;<span class="ident" id="4870526">RGBA</span><span class="op" id="4870530">(</span><span class="op" id="4870531">)</span>&nbsp;<span class="op" id="4870533">(</span><span class="ident" id="4870534">r</span><span class="op" id="4870535">,</span>&nbsp;<span class="ident" id="4870537">g</span><span class="op" id="4870538">,</span>&nbsp;<span class="ident" id="4870540">b</span><span class="op" id="4870541">,</span>&nbsp;<span class="ident" id="4870543">a</span>&nbsp;<span class="builtintype" id="4870545">uint32</span><span class="op" id="4870551">)</span>&nbsp;<span class="op" id="4870553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870556">return</span>&nbsp;<span class="builtintype" id="4870563">uint32</span><span class="op" id="4870569">(</span><span class="ident" id="4870570">c</span><span class="op" id="4870571">.</span><span class="ident" id="4870572">R</span><span class="op" id="4870573">)</span><span class="op" id="4870574">,</span>&nbsp;<span class="builtintype" id="4870576">uint32</span><span class="op" id="4870582">(</span><span class="ident" id="4870583">c</span><span class="op" id="4870584">.</span><span class="ident" id="4870585">G</span><span class="op" id="4870586">)</span><span class="op" id="4870587">,</span>&nbsp;<span class="builtintype" id="4870589">uint32</span><span class="op" id="4870595">(</span><span class="ident" id="4870596">c</span><span class="op" id="4870597">.</span><span class="ident" id="4870598">B</span><span class="op" id="4870599">)</span><span class="op" id="4870600">,</span>&nbsp;<span class="builtintype" id="4870602">uint32</span><span class="op" id="4870608">(</span><span class="ident" id="4870609">c</span><span class="op" id="4870610">.</span><span class="ident" id="4870611">A</span><span class="op" id="4870612">)</span><br>
<span class="lineno"></span><span class="op" id="4870614">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4870617">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4870677">type</span>&nbsp;<span class="ident" id="4870682">NRGBA</span>&nbsp;<span class="keyword" id="4870688">struct</span>&nbsp;<span class="op" id="4870695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870698">R</span><span class="op" id="4870699">,</span>&nbsp;<span class="ident" id="4870701">G</span><span class="op" id="4870702">,</span>&nbsp;<span class="ident" id="4870704">B</span><span class="op" id="4870705">,</span>&nbsp;<span class="ident" id="4870707">A</span>&nbsp;<span class="builtintype" id="4870709">uint8</span><br>
<span class="lineno"></span><span class="op" id="4870715">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4870718">func</span>&nbsp;<span class="op" id="4870723">(</span><span class="ident" id="4870724">c</span>&nbsp;<span class="ident" id="4870726">NRGBA</span><span class="op" id="4870731">)</span>&nbsp;<span class="ident" id="4870733">RGBA</span><span class="op" id="4870737">(</span><span class="op" id="4870738">)</span>&nbsp;<span class="op" id="4870740">(</span><span class="ident" id="4870741">r</span><span class="op" id="4870742">,</span>&nbsp;<span class="ident" id="4870744">g</span><span class="op" id="4870745">,</span>&nbsp;<span class="ident" id="4870747">b</span><span class="op" id="4870748">,</span>&nbsp;<span class="ident" id="4870750">a</span>&nbsp;<span class="builtintype" id="4870752">uint32</span><span class="op" id="4870758">)</span>&nbsp;<span class="op" id="4870760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870763">r</span>&nbsp;<span class="op" id="4870765">=</span>&nbsp;<span class="builtintype" id="4870767">uint32</span><span class="op" id="4870773">(</span><span class="ident" id="4870774">c</span><span class="op" id="4870775">.</span><span class="ident" id="4870776">R</span><span class="op" id="4870777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870780">r</span>&nbsp;<span class="op" id="4870782">|=</span>&nbsp;<span class="ident" id="4870785">r</span>&nbsp;<span class="op" id="4870787">&lt;&lt;</span>&nbsp;<span class="num" id="4870790">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870793">r</span>&nbsp;<span class="op" id="4870795">*=</span>&nbsp;<span class="builtintype" id="4870798">uint32</span><span class="op" id="4870804">(</span><span class="ident" id="4870805">c</span><span class="op" id="4870806">.</span><span class="ident" id="4870807">A</span><span class="op" id="4870808">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870811">r</span>&nbsp;<span class="op" id="4870813">/=</span>&nbsp;<span class="num" id="4870816">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870822">g</span>&nbsp;<span class="op" id="4870824">=</span>&nbsp;<span class="builtintype" id="4870826">uint32</span><span class="op" id="4870832">(</span><span class="ident" id="4870833">c</span><span class="op" id="4870834">.</span><span class="ident" id="4870835">G</span><span class="op" id="4870836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870839">g</span>&nbsp;<span class="op" id="4870841">|=</span>&nbsp;<span class="ident" id="4870844">g</span>&nbsp;<span class="op" id="4870846">&lt;&lt;</span>&nbsp;<span class="num" id="4870849">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870852">g</span>&nbsp;<span class="op" id="4870854">*=</span>&nbsp;<span class="builtintype" id="4870857">uint32</span><span class="op" id="4870863">(</span><span class="ident" id="4870864">c</span><span class="op" id="4870865">.</span><span class="ident" id="4870866">A</span><span class="op" id="4870867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870870">g</span>&nbsp;<span class="op" id="4870872">/=</span>&nbsp;<span class="num" id="4870875">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870881">b</span>&nbsp;<span class="op" id="4870883">=</span>&nbsp;<span class="builtintype" id="4870885">uint32</span><span class="op" id="4870891">(</span><span class="ident" id="4870892">c</span><span class="op" id="4870893">.</span><span class="ident" id="4870894">B</span><span class="op" id="4870895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870898">b</span>&nbsp;<span class="op" id="4870900">|=</span>&nbsp;<span class="ident" id="4870903">b</span>&nbsp;<span class="op" id="4870905">&lt;&lt;</span>&nbsp;<span class="num" id="4870908">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870911">b</span>&nbsp;<span class="op" id="4870913">*=</span>&nbsp;<span class="builtintype" id="4870916">uint32</span><span class="op" id="4870922">(</span><span class="ident" id="4870923">c</span><span class="op" id="4870924">.</span><span class="ident" id="4870925">A</span><span class="op" id="4870926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870929">b</span>&nbsp;<span class="op" id="4870931">/=</span>&nbsp;<span class="num" id="4870934">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870940">a</span>&nbsp;<span class="op" id="4870942">=</span>&nbsp;<span class="builtintype" id="4870944">uint32</span><span class="op" id="4870950">(</span><span class="ident" id="4870951">c</span><span class="op" id="4870952">.</span><span class="ident" id="4870953">A</span><span class="op" id="4870954">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870957">a</span>&nbsp;<span class="op" id="4870959">|=</span>&nbsp;<span class="ident" id="4870962">a</span>&nbsp;<span class="op" id="4870964">&lt;&lt;</span>&nbsp;<span class="num" id="4870967">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870970">return</span><br>
<span class="lineno"></span><span class="op" id="4870977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4870980">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="4871042">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="4871100">type</span>&nbsp;<span class="ident" id="4871105">NRGBA64</span>&nbsp;<span class="keyword" id="4871113">struct</span>&nbsp;<span class="op" id="4871120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871123">R</span><span class="op" id="4871124">,</span>&nbsp;<span class="ident" id="4871126">G</span><span class="op" id="4871127">,</span>&nbsp;<span class="ident" id="4871129">B</span><span class="op" id="4871130">,</span>&nbsp;<span class="ident" id="4871132">A</span>&nbsp;<span class="builtintype" id="4871134">uint16</span><br>
<span class="lineno"></span><span class="op" id="4871141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4871144">func</span>&nbsp;<span class="op" id="4871149">(</span><span class="ident" id="4871150">c</span>&nbsp;<span class="ident" id="4871152">NRGBA64</span><span class="op" id="4871159">)</span>&nbsp;<span class="ident" id="4871161">RGBA</span><span class="op" id="4871165">(</span><span class="op" id="4871166">)</span>&nbsp;<span class="op" id="4871168">(</span><span class="ident" id="4871169">r</span><span class="op" id="4871170">,</span>&nbsp;<span class="ident" id="4871172">g</span><span class="op" id="4871173">,</span>&nbsp;<span class="ident" id="4871175">b</span><span class="op" id="4871176">,</span>&nbsp;<span class="ident" id="4871178">a</span>&nbsp;<span class="builtintype" id="4871180">uint32</span><span class="op" id="4871186">)</span>&nbsp;<span class="op" id="4871188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871191">r</span>&nbsp;<span class="op" id="4871193">=</span>&nbsp;<span class="builtintype" id="4871195">uint32</span><span class="op" id="4871201">(</span><span class="ident" id="4871202">c</span><span class="op" id="4871203">.</span><span class="ident" id="4871204">R</span><span class="op" id="4871205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871208">r</span>&nbsp;<span class="op" id="4871210">*=</span>&nbsp;<span class="builtintype" id="4871213">uint32</span><span class="op" id="4871219">(</span><span class="ident" id="4871220">c</span><span class="op" id="4871221">.</span><span class="ident" id="4871222">A</span><span class="op" id="4871223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871226">r</span>&nbsp;<span class="op" id="4871228">/=</span>&nbsp;<span class="num" id="4871231">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871239">g</span>&nbsp;<span class="op" id="4871241">=</span>&nbsp;<span class="builtintype" id="4871243">uint32</span><span class="op" id="4871249">(</span><span class="ident" id="4871250">c</span><span class="op" id="4871251">.</span><span class="ident" id="4871252">G</span><span class="op" id="4871253">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871256">g</span>&nbsp;<span class="op" id="4871258">*=</span>&nbsp;<span class="builtintype" id="4871261">uint32</span><span class="op" id="4871267">(</span><span class="ident" id="4871268">c</span><span class="op" id="4871269">.</span><span class="ident" id="4871270">A</span><span class="op" id="4871271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871274">g</span>&nbsp;<span class="op" id="4871276">/=</span>&nbsp;<span class="num" id="4871279">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871287">b</span>&nbsp;<span class="op" id="4871289">=</span>&nbsp;<span class="builtintype" id="4871291">uint32</span><span class="op" id="4871297">(</span><span class="ident" id="4871298">c</span><span class="op" id="4871299">.</span><span class="ident" id="4871300">B</span><span class="op" id="4871301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871304">b</span>&nbsp;<span class="op" id="4871306">*=</span>&nbsp;<span class="builtintype" id="4871309">uint32</span><span class="op" id="4871315">(</span><span class="ident" id="4871316">c</span><span class="op" id="4871317">.</span><span class="ident" id="4871318">A</span><span class="op" id="4871319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871322">b</span>&nbsp;<span class="op" id="4871324">/=</span>&nbsp;<span class="num" id="4871327">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871335">a</span>&nbsp;<span class="op" id="4871337">=</span>&nbsp;<span class="builtintype" id="4871339">uint32</span><span class="op" id="4871345">(</span><span class="ident" id="4871346">c</span><span class="op" id="4871347">.</span><span class="ident" id="4871348">A</span><span class="op" id="4871349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871352">return</span><br>
<span class="lineno"></span><span class="op" id="4871359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4871362">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="4871404">type</span>&nbsp;<span class="ident" id="4871409">Alpha</span>&nbsp;<span class="keyword" id="4871415">struct</span>&nbsp;<span class="op" id="4871422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871425">A</span>&nbsp;<span class="builtintype" id="4871427">uint8</span><br>
<span class="lineno"></span><span class="op" id="4871433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4871436">func</span>&nbsp;<span class="op" id="4871441">(</span><span class="ident" id="4871442">c</span>&nbsp;<span class="ident" id="4871444">Alpha</span><span class="op" id="4871449">)</span>&nbsp;<span class="ident" id="4871451">RGBA</span><span class="op" id="4871455">(</span><span class="op" id="4871456">)</span>&nbsp;<span class="op" id="4871458">(</span><span class="ident" id="4871459">r</span><span class="op" id="4871460">,</span>&nbsp;<span class="ident" id="4871462">g</span><span class="op" id="4871463">,</span>&nbsp;<span class="ident" id="4871465">b</span><span class="op" id="4871466">,</span>&nbsp;<span class="ident" id="4871468">a</span>&nbsp;<span class="builtintype" id="4871470">uint32</span><span class="op" id="4871476">)</span>&nbsp;<span class="op" id="4871478">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871481">a</span>&nbsp;<span class="op" id="4871483">=</span>&nbsp;<span class="builtintype" id="4871485">uint32</span><span class="op" id="4871491">(</span><span class="ident" id="4871492">c</span><span class="op" id="4871493">.</span><span class="ident" id="4871494">A</span><span class="op" id="4871495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871498">a</span>&nbsp;<span class="op" id="4871500">|=</span>&nbsp;<span class="ident" id="4871503">a</span>&nbsp;<span class="op" id="4871505">&lt;&lt;</span>&nbsp;<span class="num" id="4871508">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871511">return</span>&nbsp;<span class="ident" id="4871518">a</span><span class="op" id="4871519">,</span>&nbsp;<span class="ident" id="4871521">a</span><span class="op" id="4871522">,</span>&nbsp;<span class="ident" id="4871524">a</span><span class="op" id="4871525">,</span>&nbsp;<span class="ident" id="4871527">a</span><br>
<span class="lineno"></span><span class="op" id="4871529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="4871532">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4871576">type</span>&nbsp;<span class="ident" id="4871581">Alpha16</span>&nbsp;<span class="keyword" id="4871589">struct</span>&nbsp;<span class="op" id="4871596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871599">A</span>&nbsp;<span class="builtintype" id="4871601">uint16</span><br>
<span class="lineno"></span><span class="op" id="4871608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="4871611">func</span>&nbsp;<span class="op" id="4871616">(</span><span class="ident" id="4871617">c</span>&nbsp;<span class="ident" id="4871619">Alpha16</span><span class="op" id="4871626">)</span>&nbsp;<span class="ident" id="4871628">RGBA</span><span class="op" id="4871632">(</span><span class="op" id="4871633">)</span>&nbsp;<span class="op" id="4871635">(</span><span class="ident" id="4871636">r</span><span class="op" id="4871637">,</span>&nbsp;<span class="ident" id="4871639">g</span><span class="op" id="4871640">,</span>&nbsp;<span class="ident" id="4871642">b</span><span class="op" id="4871643">,</span>&nbsp;<span class="ident" id="4871645">a</span>&nbsp;<span class="builtintype" id="4871647">uint32</span><span class="op" id="4871653">)</span>&nbsp;<span class="op" id="4871655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871658">a</span>&nbsp;<span class="op" id="4871660">=</span>&nbsp;<span class="builtintype" id="4871662">uint32</span><span class="op" id="4871668">(</span><span class="ident" id="4871669">c</span><span class="op" id="4871670">.</span><span class="ident" id="4871671">A</span><span class="op" id="4871672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871675">return</span>&nbsp;<span class="ident" id="4871682">a</span><span class="op" id="4871683">,</span>&nbsp;<span class="ident" id="4871685">a</span><span class="op" id="4871686">,</span>&nbsp;<span class="ident" id="4871688">a</span><span class="op" id="4871689">,</span>&nbsp;<span class="ident" id="4871691">a</span><br>
<span class="lineno"></span><span class="op" id="4871693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="4871696">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4871741">type</span>&nbsp;<span class="ident" id="4871746">Gray</span>&nbsp;<span class="keyword" id="4871751">struct</span>&nbsp;<span class="op" id="4871758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871761">Y</span>&nbsp;<span class="builtintype" id="4871763">uint8</span><br>
<span class="lineno"></span><span class="op" id="4871769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="4871772">func</span>&nbsp;<span class="op" id="4871777">(</span><span class="ident" id="4871778">c</span>&nbsp;<span class="ident" id="4871780">Gray</span><span class="op" id="4871784">)</span>&nbsp;<span class="ident" id="4871786">RGBA</span><span class="op" id="4871790">(</span><span class="op" id="4871791">)</span>&nbsp;<span class="op" id="4871793">(</span><span class="ident" id="4871794">r</span><span class="op" id="4871795">,</span>&nbsp;<span class="ident" id="4871797">g</span><span class="op" id="4871798">,</span>&nbsp;<span class="ident" id="4871800">b</span><span class="op" id="4871801">,</span>&nbsp;<span class="ident" id="4871803">a</span>&nbsp;<span class="builtintype" id="4871805">uint32</span><span class="op" id="4871811">)</span>&nbsp;<span class="op" id="4871813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871816">y</span>&nbsp;<span class="op" id="4871818">:=</span>&nbsp;<span class="builtintype" id="4871821">uint32</span><span class="op" id="4871827">(</span><span class="ident" id="4871828">c</span><span class="op" id="4871829">.</span><span class="ident" id="4871830">Y</span><span class="op" id="4871831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871834">y</span>&nbsp;<span class="op" id="4871836">|=</span>&nbsp;<span class="ident" id="4871839">y</span>&nbsp;<span class="op" id="4871841">&lt;&lt;</span>&nbsp;<span class="num" id="4871844">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871847">return</span>&nbsp;<span class="ident" id="4871854">y</span><span class="op" id="4871855">,</span>&nbsp;<span class="ident" id="4871857">y</span><span class="op" id="4871858">,</span>&nbsp;<span class="ident" id="4871860">y</span><span class="op" id="4871861">,</span>&nbsp;<span class="num" id="4871863">0xffff</span><br>
<span class="lineno"></span><span class="op" id="4871870">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="4871873">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="4871920">type</span>&nbsp;<span class="ident" id="4871925">Gray16</span>&nbsp;<span class="keyword" id="4871932">struct</span>&nbsp;<span class="op" id="4871939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871942">Y</span>&nbsp;<span class="builtintype" id="4871944">uint16</span><br>
<span class="lineno"></span><span class="op" id="4871951">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="4871954">func</span>&nbsp;<span class="op" id="4871959">(</span><span class="ident" id="4871960">c</span>&nbsp;<span class="ident" id="4871962">Gray16</span><span class="op" id="4871968">)</span>&nbsp;<span class="ident" id="4871970">RGBA</span><span class="op" id="4871974">(</span><span class="op" id="4871975">)</span>&nbsp;<span class="op" id="4871977">(</span><span class="ident" id="4871978">r</span><span class="op" id="4871979">,</span>&nbsp;<span class="ident" id="4871981">g</span><span class="op" id="4871982">,</span>&nbsp;<span class="ident" id="4871984">b</span><span class="op" id="4871985">,</span>&nbsp;<span class="ident" id="4871987">a</span>&nbsp;<span class="builtintype" id="4871989">uint32</span><span class="op" id="4871995">)</span>&nbsp;<span class="op" id="4871997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872000">y</span>&nbsp;<span class="op" id="4872002">:=</span>&nbsp;<span class="builtintype" id="4872005">uint32</span><span class="op" id="4872011">(</span><span class="ident" id="4872012">c</span><span class="op" id="4872013">.</span><span class="ident" id="4872014">Y</span><span class="op" id="4872015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872018">return</span>&nbsp;<span class="ident" id="4872025">y</span><span class="op" id="4872026">,</span>&nbsp;<span class="ident" id="4872028">y</span><span class="op" id="4872029">,</span>&nbsp;<span class="ident" id="4872031">y</span><span class="op" id="4872032">,</span>&nbsp;<span class="num" id="4872034">0xffff</span><br>
<span class="lineno"></span><span class="op" id="4872041">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="4872044">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="4872123">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="4872140">type</span>&nbsp;<span class="ident" id="4872145">Model</span>&nbsp;<span class="keyword" id="4872151">interface</span>&nbsp;<span class="op" id="4872161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872164">Convert</span><span class="op" id="4872171">(</span><span class="ident" id="4872172">c</span>&nbsp;<span class="ident" id="4872174">Color</span><span class="op" id="4872179">)</span>&nbsp;<span class="ident" id="4872181">Color</span><br>
<span class="lineno">135</span><span class="op" id="4872187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4872190">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="4872263">func</span>&nbsp;<span class="ident" id="4872268">ModelFunc</span><span class="op" id="4872277">(</span><span class="ident" id="4872278">f</span>&nbsp;<span class="keyword" id="4872280">func</span><span class="op" id="4872284">(</span><span class="ident" id="4872285">Color</span><span class="op" id="4872290">)</span>&nbsp;<span class="ident" id="4872292">Color</span><span class="op" id="4872297">)</span>&nbsp;<span class="ident" id="4872299">Model</span>&nbsp;<span class="op" id="4872305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872308">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872357">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872406">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872456">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872506">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872536">return</span>&nbsp;<span class="op" id="4872543">&amp;</span><span class="ident" id="4872544">modelFunc</span><span class="op" id="4872553">{</span><span class="ident" id="4872554">f</span><span class="op" id="4872555">}</span><br>
<span class="lineno">145</span><span class="op" id="4872557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4872560">type</span>&nbsp;<span class="ident" id="4872565">modelFunc</span>&nbsp;<span class="keyword" id="4872575">struct</span>&nbsp;<span class="op" id="4872582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872585">f</span>&nbsp;<span class="keyword" id="4872587">func</span><span class="op" id="4872591">(</span><span class="ident" id="4872592">Color</span><span class="op" id="4872597">)</span>&nbsp;<span class="ident" id="4872599">Color</span><br>
<span class="lineno"></span><span class="op" id="4872605">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="4872608">func</span>&nbsp;<span class="op" id="4872613">(</span><span class="ident" id="4872614">m</span>&nbsp;<span class="op" id="4872616">*</span><span class="ident" id="4872617">modelFunc</span><span class="op" id="4872626">)</span>&nbsp;<span class="ident" id="4872628">Convert</span><span class="op" id="4872635">(</span><span class="ident" id="4872636">c</span>&nbsp;<span class="ident" id="4872638">Color</span><span class="op" id="4872643">)</span>&nbsp;<span class="ident" id="4872645">Color</span>&nbsp;<span class="op" id="4872651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872654">return</span>&nbsp;<span class="ident" id="4872661">m</span><span class="op" id="4872662">.</span><span class="ident" id="4872663">f</span><span class="op" id="4872664">(</span><span class="ident" id="4872665">c</span><span class="op" id="4872666">)</span><br>
<span class="lineno"></span><span class="op" id="4872668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4872671">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="4872711">var</span>&nbsp;<span class="op" id="4872715">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872718">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4872731">Model</span>&nbsp;<span class="op" id="4872737">=</span>&nbsp;<span class="ident" id="4872739">ModelFunc</span><span class="op" id="4872748">(</span><span class="ident" id="4872749">rgbaModel</span><span class="op" id="4872758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872761">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="4872774">Model</span>&nbsp;<span class="op" id="4872780">=</span>&nbsp;<span class="ident" id="4872782">ModelFunc</span><span class="op" id="4872791">(</span><span class="ident" id="4872792">rgba64Model</span><span class="op" id="4872803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872806">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4872819">Model</span>&nbsp;<span class="op" id="4872825">=</span>&nbsp;<span class="ident" id="4872827">ModelFunc</span><span class="op" id="4872836">(</span><span class="ident" id="4872837">nrgbaModel</span><span class="op" id="4872847">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872850">NRGBA64Model</span>&nbsp;<span class="ident" id="4872863">Model</span>&nbsp;<span class="op" id="4872869">=</span>&nbsp;<span class="ident" id="4872871">ModelFunc</span><span class="op" id="4872880">(</span><span class="ident" id="4872881">nrgba64Model</span><span class="op" id="4872893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872896">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4872909">Model</span>&nbsp;<span class="op" id="4872915">=</span>&nbsp;<span class="ident" id="4872917">ModelFunc</span><span class="op" id="4872926">(</span><span class="ident" id="4872927">alphaModel</span><span class="op" id="4872937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872940">Alpha16Model</span>&nbsp;<span class="ident" id="4872953">Model</span>&nbsp;<span class="op" id="4872959">=</span>&nbsp;<span class="ident" id="4872961">ModelFunc</span><span class="op" id="4872970">(</span><span class="ident" id="4872971">alpha16Model</span><span class="op" id="4872983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872986">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4872999">Model</span>&nbsp;<span class="op" id="4873005">=</span>&nbsp;<span class="ident" id="4873007">ModelFunc</span><span class="op" id="4873016">(</span><span class="ident" id="4873017">grayModel</span><span class="op" id="4873026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873029">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="4873042">Model</span>&nbsp;<span class="op" id="4873048">=</span>&nbsp;<span class="ident" id="4873050">ModelFunc</span><span class="op" id="4873059">(</span><span class="ident" id="4873060">gray16Model</span><span class="op" id="4873071">)</span><br>
<span class="lineno">165</span><span class="op" id="4873073">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4873076">func</span>&nbsp;<span class="ident" id="4873081">rgbaModel</span><span class="op" id="4873090">(</span><span class="ident" id="4873091">c</span>&nbsp;<span class="ident" id="4873093">Color</span><span class="op" id="4873098">)</span>&nbsp;<span class="ident" id="4873100">Color</span>&nbsp;<span class="op" id="4873106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873109">if</span>&nbsp;<span class="ident" id="4873112">_</span><span class="op" id="4873113">,</span>&nbsp;<span class="ident" id="4873115">ok</span>&nbsp;<span class="op" id="4873118">:=</span>&nbsp;<span class="ident" id="4873121">c</span><span class="op" id="4873122">.</span><span class="op" id="4873123">(</span><span class="ident" id="4873124">RGBA</span><span class="op" id="4873128">)</span><span class="op" id="4873129">;</span>&nbsp;<span class="ident" id="4873131">ok</span>&nbsp;<span class="op" id="4873134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873138">return</span>&nbsp;<span class="ident" id="4873145">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873151">r</span><span class="op" id="4873152">,</span>&nbsp;<span class="ident" id="4873154">g</span><span class="op" id="4873155">,</span>&nbsp;<span class="ident" id="4873157">b</span><span class="op" id="4873158">,</span>&nbsp;<span class="ident" id="4873160">a</span>&nbsp;<span class="op" id="4873162">:=</span>&nbsp;<span class="ident" id="4873165">c</span><span class="op" id="4873166">.</span><span class="ident" id="4873167">RGBA</span><span class="op" id="4873171">(</span><span class="op" id="4873172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873175">return</span>&nbsp;<span class="ident" id="4873182">RGBA</span><span class="op" id="4873186">{</span><span class="builtintype" id="4873187">uint8</span><span class="op" id="4873192">(</span><span class="ident" id="4873193">r</span>&nbsp;<span class="op" id="4873195">&gt;&gt;</span>&nbsp;<span class="num" id="4873198">8</span><span class="op" id="4873199">)</span><span class="op" id="4873200">,</span>&nbsp;<span class="builtintype" id="4873202">uint8</span><span class="op" id="4873207">(</span><span class="ident" id="4873208">g</span>&nbsp;<span class="op" id="4873210">&gt;&gt;</span>&nbsp;<span class="num" id="4873213">8</span><span class="op" id="4873214">)</span><span class="op" id="4873215">,</span>&nbsp;<span class="builtintype" id="4873217">uint8</span><span class="op" id="4873222">(</span><span class="ident" id="4873223">b</span>&nbsp;<span class="op" id="4873225">&gt;&gt;</span>&nbsp;<span class="num" id="4873228">8</span><span class="op" id="4873229">)</span><span class="op" id="4873230">,</span>&nbsp;<span class="builtintype" id="4873232">uint8</span><span class="op" id="4873237">(</span><span class="ident" id="4873238">a</span>&nbsp;<span class="op" id="4873240">&gt;&gt;</span>&nbsp;<span class="num" id="4873243">8</span><span class="op" id="4873244">)</span><span class="op" id="4873245">}</span><br>
<span class="lineno"></span><span class="op" id="4873247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="4873250">func</span>&nbsp;<span class="ident" id="4873255">rgba64Model</span><span class="op" id="4873266">(</span><span class="ident" id="4873267">c</span>&nbsp;<span class="ident" id="4873269">Color</span><span class="op" id="4873274">)</span>&nbsp;<span class="ident" id="4873276">Color</span>&nbsp;<span class="op" id="4873282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873285">if</span>&nbsp;<span class="ident" id="4873288">_</span><span class="op" id="4873289">,</span>&nbsp;<span class="ident" id="4873291">ok</span>&nbsp;<span class="op" id="4873294">:=</span>&nbsp;<span class="ident" id="4873297">c</span><span class="op" id="4873298">.</span><span class="op" id="4873299">(</span><span class="ident" id="4873300">RGBA64</span><span class="op" id="4873306">)</span><span class="op" id="4873307">;</span>&nbsp;<span class="ident" id="4873309">ok</span>&nbsp;<span class="op" id="4873312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873316">return</span>&nbsp;<span class="ident" id="4873323">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873329">r</span><span class="op" id="4873330">,</span>&nbsp;<span class="ident" id="4873332">g</span><span class="op" id="4873333">,</span>&nbsp;<span class="ident" id="4873335">b</span><span class="op" id="4873336">,</span>&nbsp;<span class="ident" id="4873338">a</span>&nbsp;<span class="op" id="4873340">:=</span>&nbsp;<span class="ident" id="4873343">c</span><span class="op" id="4873344">.</span><span class="ident" id="4873345">RGBA</span><span class="op" id="4873349">(</span><span class="op" id="4873350">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873353">return</span>&nbsp;<span class="ident" id="4873360">RGBA64</span><span class="op" id="4873366">{</span><span class="builtintype" id="4873367">uint16</span><span class="op" id="4873373">(</span><span class="ident" id="4873374">r</span><span class="op" id="4873375">)</span><span class="op" id="4873376">,</span>&nbsp;<span class="builtintype" id="4873378">uint16</span><span class="op" id="4873384">(</span><span class="ident" id="4873385">g</span><span class="op" id="4873386">)</span><span class="op" id="4873387">,</span>&nbsp;<span class="builtintype" id="4873389">uint16</span><span class="op" id="4873395">(</span><span class="ident" id="4873396">b</span><span class="op" id="4873397">)</span><span class="op" id="4873398">,</span>&nbsp;<span class="builtintype" id="4873400">uint16</span><span class="op" id="4873406">(</span><span class="ident" id="4873407">a</span><span class="op" id="4873408">)</span><span class="op" id="4873409">}</span><br>
<span class="lineno"></span><span class="op" id="4873411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4873414">func</span>&nbsp;<span class="ident" id="4873419">nrgbaModel</span><span class="op" id="4873429">(</span><span class="ident" id="4873430">c</span>&nbsp;<span class="ident" id="4873432">Color</span><span class="op" id="4873437">)</span>&nbsp;<span class="ident" id="4873439">Color</span>&nbsp;<span class="op" id="4873445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873448">if</span>&nbsp;<span class="ident" id="4873451">_</span><span class="op" id="4873452">,</span>&nbsp;<span class="ident" id="4873454">ok</span>&nbsp;<span class="op" id="4873457">:=</span>&nbsp;<span class="ident" id="4873460">c</span><span class="op" id="4873461">.</span><span class="op" id="4873462">(</span><span class="ident" id="4873463">NRGBA</span><span class="op" id="4873468">)</span><span class="op" id="4873469">;</span>&nbsp;<span class="ident" id="4873471">ok</span>&nbsp;<span class="op" id="4873474">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873478">return</span>&nbsp;<span class="ident" id="4873485">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873491">r</span><span class="op" id="4873492">,</span>&nbsp;<span class="ident" id="4873494">g</span><span class="op" id="4873495">,</span>&nbsp;<span class="ident" id="4873497">b</span><span class="op" id="4873498">,</span>&nbsp;<span class="ident" id="4873500">a</span>&nbsp;<span class="op" id="4873502">:=</span>&nbsp;<span class="ident" id="4873505">c</span><span class="op" id="4873506">.</span><span class="ident" id="4873507">RGBA</span><span class="op" id="4873511">(</span><span class="op" id="4873512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873515">if</span>&nbsp;<span class="ident" id="4873518">a</span>&nbsp;<span class="op" id="4873520">==</span>&nbsp;<span class="num" id="4873523">0xffff</span>&nbsp;<span class="op" id="4873530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873534">return</span>&nbsp;<span class="ident" id="4873541">NRGBA</span><span class="op" id="4873546">{</span><span class="builtintype" id="4873547">uint8</span><span class="op" id="4873552">(</span><span class="ident" id="4873553">r</span>&nbsp;<span class="op" id="4873555">&gt;&gt;</span>&nbsp;<span class="num" id="4873558">8</span><span class="op" id="4873559">)</span><span class="op" id="4873560">,</span>&nbsp;<span class="builtintype" id="4873562">uint8</span><span class="op" id="4873567">(</span><span class="ident" id="4873568">g</span>&nbsp;<span class="op" id="4873570">&gt;&gt;</span>&nbsp;<span class="num" id="4873573">8</span><span class="op" id="4873574">)</span><span class="op" id="4873575">,</span>&nbsp;<span class="builtintype" id="4873577">uint8</span><span class="op" id="4873582">(</span><span class="ident" id="4873583">b</span>&nbsp;<span class="op" id="4873585">&gt;&gt;</span>&nbsp;<span class="num" id="4873588">8</span><span class="op" id="4873589">)</span><span class="op" id="4873590">,</span>&nbsp;<span class="num" id="4873592">0xff</span><span class="op" id="4873596">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873602">if</span>&nbsp;<span class="ident" id="4873605">a</span>&nbsp;<span class="op" id="4873607">==</span>&nbsp;<span class="num" id="4873610">0</span>&nbsp;<span class="op" id="4873612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873616">return</span>&nbsp;<span class="ident" id="4873623">NRGBA</span><span class="op" id="4873628">{</span><span class="num" id="4873629">0</span><span class="op" id="4873630">,</span>&nbsp;<span class="num" id="4873632">0</span><span class="op" id="4873633">,</span>&nbsp;<span class="num" id="4873635">0</span><span class="op" id="4873636">,</span>&nbsp;<span class="num" id="4873638">0</span><span class="op" id="4873639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4873645">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873746">r</span>&nbsp;<span class="op" id="4873748">=</span>&nbsp;<span class="op" id="4873750">(</span><span class="ident" id="4873751">r</span>&nbsp;<span class="op" id="4873753">*</span>&nbsp;<span class="num" id="4873755">0xffff</span><span class="op" id="4873761">)</span>&nbsp;<span class="op" id="4873763">/</span>&nbsp;<span class="ident" id="4873765">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873768">g</span>&nbsp;<span class="op" id="4873770">=</span>&nbsp;<span class="op" id="4873772">(</span><span class="ident" id="4873773">g</span>&nbsp;<span class="op" id="4873775">*</span>&nbsp;<span class="num" id="4873777">0xffff</span><span class="op" id="4873783">)</span>&nbsp;<span class="op" id="4873785">/</span>&nbsp;<span class="ident" id="4873787">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873790">b</span>&nbsp;<span class="op" id="4873792">=</span>&nbsp;<span class="op" id="4873794">(</span><span class="ident" id="4873795">b</span>&nbsp;<span class="op" id="4873797">*</span>&nbsp;<span class="num" id="4873799">0xffff</span><span class="op" id="4873805">)</span>&nbsp;<span class="op" id="4873807">/</span>&nbsp;<span class="ident" id="4873809">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873812">return</span>&nbsp;<span class="ident" id="4873819">NRGBA</span><span class="op" id="4873824">{</span><span class="builtintype" id="4873825">uint8</span><span class="op" id="4873830">(</span><span class="ident" id="4873831">r</span>&nbsp;<span class="op" id="4873833">&gt;&gt;</span>&nbsp;<span class="num" id="4873836">8</span><span class="op" id="4873837">)</span><span class="op" id="4873838">,</span>&nbsp;<span class="builtintype" id="4873840">uint8</span><span class="op" id="4873845">(</span><span class="ident" id="4873846">g</span>&nbsp;<span class="op" id="4873848">&gt;&gt;</span>&nbsp;<span class="num" id="4873851">8</span><span class="op" id="4873852">)</span><span class="op" id="4873853">,</span>&nbsp;<span class="builtintype" id="4873855">uint8</span><span class="op" id="4873860">(</span><span class="ident" id="4873861">b</span>&nbsp;<span class="op" id="4873863">&gt;&gt;</span>&nbsp;<span class="num" id="4873866">8</span><span class="op" id="4873867">)</span><span class="op" id="4873868">,</span>&nbsp;<span class="builtintype" id="4873870">uint8</span><span class="op" id="4873875">(</span><span class="ident" id="4873876">a</span>&nbsp;<span class="op" id="4873878">&gt;&gt;</span>&nbsp;<span class="num" id="4873881">8</span><span class="op" id="4873882">)</span><span class="op" id="4873883">}</span><br>
<span class="lineno"></span><span class="op" id="4873885">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="4873888">func</span>&nbsp;<span class="ident" id="4873893">nrgba64Model</span><span class="op" id="4873905">(</span><span class="ident" id="4873906">c</span>&nbsp;<span class="ident" id="4873908">Color</span><span class="op" id="4873913">)</span>&nbsp;<span class="ident" id="4873915">Color</span>&nbsp;<span class="op" id="4873921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873924">if</span>&nbsp;<span class="ident" id="4873927">_</span><span class="op" id="4873928">,</span>&nbsp;<span class="ident" id="4873930">ok</span>&nbsp;<span class="op" id="4873933">:=</span>&nbsp;<span class="ident" id="4873936">c</span><span class="op" id="4873937">.</span><span class="op" id="4873938">(</span><span class="ident" id="4873939">NRGBA64</span><span class="op" id="4873946">)</span><span class="op" id="4873947">;</span>&nbsp;<span class="ident" id="4873949">ok</span>&nbsp;<span class="op" id="4873952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873956">return</span>&nbsp;<span class="ident" id="4873963">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873966">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873969">r</span><span class="op" id="4873970">,</span>&nbsp;<span class="ident" id="4873972">g</span><span class="op" id="4873973">,</span>&nbsp;<span class="ident" id="4873975">b</span><span class="op" id="4873976">,</span>&nbsp;<span class="ident" id="4873978">a</span>&nbsp;<span class="op" id="4873980">:=</span>&nbsp;<span class="ident" id="4873983">c</span><span class="op" id="4873984">.</span><span class="ident" id="4873985">RGBA</span><span class="op" id="4873989">(</span><span class="op" id="4873990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873993">if</span>&nbsp;<span class="ident" id="4873996">a</span>&nbsp;<span class="op" id="4873998">==</span>&nbsp;<span class="num" id="4874001">0xffff</span>&nbsp;<span class="op" id="4874008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874012">return</span>&nbsp;<span class="ident" id="4874019">NRGBA64</span><span class="op" id="4874026">{</span><span class="builtintype" id="4874027">uint16</span><span class="op" id="4874033">(</span><span class="ident" id="4874034">r</span><span class="op" id="4874035">)</span><span class="op" id="4874036">,</span>&nbsp;<span class="builtintype" id="4874038">uint16</span><span class="op" id="4874044">(</span><span class="ident" id="4874045">g</span><span class="op" id="4874046">)</span><span class="op" id="4874047">,</span>&nbsp;<span class="builtintype" id="4874049">uint16</span><span class="op" id="4874055">(</span><span class="ident" id="4874056">b</span><span class="op" id="4874057">)</span><span class="op" id="4874058">,</span>&nbsp;<span class="num" id="4874060">0xffff</span><span class="op" id="4874066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874072">if</span>&nbsp;<span class="ident" id="4874075">a</span>&nbsp;<span class="op" id="4874077">==</span>&nbsp;<span class="num" id="4874080">0</span>&nbsp;<span class="op" id="4874082">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874086">return</span>&nbsp;<span class="ident" id="4874093">NRGBA64</span><span class="op" id="4874100">{</span><span class="num" id="4874101">0</span><span class="op" id="4874102">,</span>&nbsp;<span class="num" id="4874104">0</span><span class="op" id="4874105">,</span>&nbsp;<span class="num" id="4874107">0</span><span class="op" id="4874108">,</span>&nbsp;<span class="num" id="4874110">0</span><span class="op" id="4874111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4874117">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874218">r</span>&nbsp;<span class="op" id="4874220">=</span>&nbsp;<span class="op" id="4874222">(</span><span class="ident" id="4874223">r</span>&nbsp;<span class="op" id="4874225">*</span>&nbsp;<span class="num" id="4874227">0xffff</span><span class="op" id="4874233">)</span>&nbsp;<span class="op" id="4874235">/</span>&nbsp;<span class="ident" id="4874237">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874240">g</span>&nbsp;<span class="op" id="4874242">=</span>&nbsp;<span class="op" id="4874244">(</span><span class="ident" id="4874245">g</span>&nbsp;<span class="op" id="4874247">*</span>&nbsp;<span class="num" id="4874249">0xffff</span><span class="op" id="4874255">)</span>&nbsp;<span class="op" id="4874257">/</span>&nbsp;<span class="ident" id="4874259">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874262">b</span>&nbsp;<span class="op" id="4874264">=</span>&nbsp;<span class="op" id="4874266">(</span><span class="ident" id="4874267">b</span>&nbsp;<span class="op" id="4874269">*</span>&nbsp;<span class="num" id="4874271">0xffff</span><span class="op" id="4874277">)</span>&nbsp;<span class="op" id="4874279">/</span>&nbsp;<span class="ident" id="4874281">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874284">return</span>&nbsp;<span class="ident" id="4874291">NRGBA64</span><span class="op" id="4874298">{</span><span class="builtintype" id="4874299">uint16</span><span class="op" id="4874305">(</span><span class="ident" id="4874306">r</span><span class="op" id="4874307">)</span><span class="op" id="4874308">,</span>&nbsp;<span class="builtintype" id="4874310">uint16</span><span class="op" id="4874316">(</span><span class="ident" id="4874317">g</span><span class="op" id="4874318">)</span><span class="op" id="4874319">,</span>&nbsp;<span class="builtintype" id="4874321">uint16</span><span class="op" id="4874327">(</span><span class="ident" id="4874328">b</span><span class="op" id="4874329">)</span><span class="op" id="4874330">,</span>&nbsp;<span class="builtintype" id="4874332">uint16</span><span class="op" id="4874338">(</span><span class="ident" id="4874339">a</span><span class="op" id="4874340">)</span><span class="op" id="4874341">}</span><br>
<span class="lineno"></span><span class="op" id="4874343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4874346">func</span>&nbsp;<span class="ident" id="4874351">alphaModel</span><span class="op" id="4874361">(</span><span class="ident" id="4874362">c</span>&nbsp;<span class="ident" id="4874364">Color</span><span class="op" id="4874369">)</span>&nbsp;<span class="ident" id="4874371">Color</span>&nbsp;<span class="op" id="4874377">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874380">if</span>&nbsp;<span class="ident" id="4874383">_</span><span class="op" id="4874384">,</span>&nbsp;<span class="ident" id="4874386">ok</span>&nbsp;<span class="op" id="4874389">:=</span>&nbsp;<span class="ident" id="4874392">c</span><span class="op" id="4874393">.</span><span class="op" id="4874394">(</span><span class="ident" id="4874395">Alpha</span><span class="op" id="4874400">)</span><span class="op" id="4874401">;</span>&nbsp;<span class="ident" id="4874403">ok</span>&nbsp;<span class="op" id="4874406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874410">return</span>&nbsp;<span class="ident" id="4874417">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874423">_</span><span class="op" id="4874424">,</span>&nbsp;<span class="ident" id="4874426">_</span><span class="op" id="4874427">,</span>&nbsp;<span class="ident" id="4874429">_</span><span class="op" id="4874430">,</span>&nbsp;<span class="ident" id="4874432">a</span>&nbsp;<span class="op" id="4874434">:=</span>&nbsp;<span class="ident" id="4874437">c</span><span class="op" id="4874438">.</span><span class="ident" id="4874439">RGBA</span><span class="op" id="4874443">(</span><span class="op" id="4874444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874447">return</span>&nbsp;<span class="ident" id="4874454">Alpha</span><span class="op" id="4874459">{</span><span class="builtintype" id="4874460">uint8</span><span class="op" id="4874465">(</span><span class="ident" id="4874466">a</span>&nbsp;<span class="op" id="4874468">&gt;&gt;</span>&nbsp;<span class="num" id="4874471">8</span><span class="op" id="4874472">)</span><span class="op" id="4874473">}</span><br>
<span class="lineno">225</span><span class="op" id="4874475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4874478">func</span>&nbsp;<span class="ident" id="4874483">alpha16Model</span><span class="op" id="4874495">(</span><span class="ident" id="4874496">c</span>&nbsp;<span class="ident" id="4874498">Color</span><span class="op" id="4874503">)</span>&nbsp;<span class="ident" id="4874505">Color</span>&nbsp;<span class="op" id="4874511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874514">if</span>&nbsp;<span class="ident" id="4874517">_</span><span class="op" id="4874518">,</span>&nbsp;<span class="ident" id="4874520">ok</span>&nbsp;<span class="op" id="4874523">:=</span>&nbsp;<span class="ident" id="4874526">c</span><span class="op" id="4874527">.</span><span class="op" id="4874528">(</span><span class="ident" id="4874529">Alpha16</span><span class="op" id="4874536">)</span><span class="op" id="4874537">;</span>&nbsp;<span class="ident" id="4874539">ok</span>&nbsp;<span class="op" id="4874542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874546">return</span>&nbsp;<span class="ident" id="4874553">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874559">_</span><span class="op" id="4874560">,</span>&nbsp;<span class="ident" id="4874562">_</span><span class="op" id="4874563">,</span>&nbsp;<span class="ident" id="4874565">_</span><span class="op" id="4874566">,</span>&nbsp;<span class="ident" id="4874568">a</span>&nbsp;<span class="op" id="4874570">:=</span>&nbsp;<span class="ident" id="4874573">c</span><span class="op" id="4874574">.</span><span class="ident" id="4874575">RGBA</span><span class="op" id="4874579">(</span><span class="op" id="4874580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874583">return</span>&nbsp;<span class="ident" id="4874590">Alpha16</span><span class="op" id="4874597">{</span><span class="builtintype" id="4874598">uint16</span><span class="op" id="4874604">(</span><span class="ident" id="4874605">a</span><span class="op" id="4874606">)</span><span class="op" id="4874607">}</span><br>
<span class="lineno"></span><span class="op" id="4874609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4874612">func</span>&nbsp;<span class="ident" id="4874617">grayModel</span><span class="op" id="4874626">(</span><span class="ident" id="4874627">c</span>&nbsp;<span class="ident" id="4874629">Color</span><span class="op" id="4874634">)</span>&nbsp;<span class="ident" id="4874636">Color</span>&nbsp;<span class="op" id="4874642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874645">if</span>&nbsp;<span class="ident" id="4874648">_</span><span class="op" id="4874649">,</span>&nbsp;<span class="ident" id="4874651">ok</span>&nbsp;<span class="op" id="4874654">:=</span>&nbsp;<span class="ident" id="4874657">c</span><span class="op" id="4874658">.</span><span class="op" id="4874659">(</span><span class="ident" id="4874660">Gray</span><span class="op" id="4874664">)</span><span class="op" id="4874665">;</span>&nbsp;<span class="ident" id="4874667">ok</span>&nbsp;<span class="op" id="4874670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874674">return</span>&nbsp;<span class="ident" id="4874681">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874687">r</span><span class="op" id="4874688">,</span>&nbsp;<span class="ident" id="4874690">g</span><span class="op" id="4874691">,</span>&nbsp;<span class="ident" id="4874693">b</span><span class="op" id="4874694">,</span>&nbsp;<span class="ident" id="4874696">_</span>&nbsp;<span class="op" id="4874698">:=</span>&nbsp;<span class="ident" id="4874701">c</span><span class="op" id="4874702">.</span><span class="ident" id="4874703">RGBA</span><span class="op" id="4874707">(</span><span class="op" id="4874708">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874711">y</span>&nbsp;<span class="op" id="4874713">:=</span>&nbsp;<span class="op" id="4874716">(</span><span class="num" id="4874717">299</span><span class="op" id="4874720">*</span><span class="ident" id="4874721">r</span>&nbsp;<span class="op" id="4874723">+</span>&nbsp;<span class="num" id="4874725">587</span><span class="op" id="4874728">*</span><span class="ident" id="4874729">g</span>&nbsp;<span class="op" id="4874731">+</span>&nbsp;<span class="num" id="4874733">114</span><span class="op" id="4874736">*</span><span class="ident" id="4874737">b</span>&nbsp;<span class="op" id="4874739">+</span>&nbsp;<span class="num" id="4874741">500</span><span class="op" id="4874744">)</span>&nbsp;<span class="op" id="4874746">/</span>&nbsp;<span class="num" id="4874748">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874754">return</span>&nbsp;<span class="ident" id="4874761">Gray</span><span class="op" id="4874765">{</span><span class="builtintype" id="4874766">uint8</span><span class="op" id="4874771">(</span><span class="ident" id="4874772">y</span>&nbsp;<span class="op" id="4874774">&gt;&gt;</span>&nbsp;<span class="num" id="4874777">8</span><span class="op" id="4874778">)</span><span class="op" id="4874779">}</span><br>
<span class="lineno"></span><span class="op" id="4874781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4874784">func</span>&nbsp;<span class="ident" id="4874789">gray16Model</span><span class="op" id="4874800">(</span><span class="ident" id="4874801">c</span>&nbsp;<span class="ident" id="4874803">Color</span><span class="op" id="4874808">)</span>&nbsp;<span class="ident" id="4874810">Color</span>&nbsp;<span class="op" id="4874816">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874819">if</span>&nbsp;<span class="ident" id="4874822">_</span><span class="op" id="4874823">,</span>&nbsp;<span class="ident" id="4874825">ok</span>&nbsp;<span class="op" id="4874828">:=</span>&nbsp;<span class="ident" id="4874831">c</span><span class="op" id="4874832">.</span><span class="op" id="4874833">(</span><span class="ident" id="4874834">Gray16</span><span class="op" id="4874840">)</span><span class="op" id="4874841">;</span>&nbsp;<span class="ident" id="4874843">ok</span>&nbsp;<span class="op" id="4874846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874850">return</span>&nbsp;<span class="ident" id="4874857">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874863">r</span><span class="op" id="4874864">,</span>&nbsp;<span class="ident" id="4874866">g</span><span class="op" id="4874867">,</span>&nbsp;<span class="ident" id="4874869">b</span><span class="op" id="4874870">,</span>&nbsp;<span class="ident" id="4874872">_</span>&nbsp;<span class="op" id="4874874">:=</span>&nbsp;<span class="ident" id="4874877">c</span><span class="op" id="4874878">.</span><span class="ident" id="4874879">RGBA</span><span class="op" id="4874883">(</span><span class="op" id="4874884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874887">y</span>&nbsp;<span class="op" id="4874889">:=</span>&nbsp;<span class="op" id="4874892">(</span><span class="num" id="4874893">299</span><span class="op" id="4874896">*</span><span class="ident" id="4874897">r</span>&nbsp;<span class="op" id="4874899">+</span>&nbsp;<span class="num" id="4874901">587</span><span class="op" id="4874904">*</span><span class="ident" id="4874905">g</span>&nbsp;<span class="op" id="4874907">+</span>&nbsp;<span class="num" id="4874909">114</span><span class="op" id="4874912">*</span><span class="ident" id="4874913">b</span>&nbsp;<span class="op" id="4874915">+</span>&nbsp;<span class="num" id="4874917">500</span><span class="op" id="4874920">)</span>&nbsp;<span class="op" id="4874922">/</span>&nbsp;<span class="num" id="4874924">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874930">return</span>&nbsp;<span class="ident" id="4874937">Gray16</span><span class="op" id="4874943">{</span><span class="builtintype" id="4874944">uint16</span><span class="op" id="4874950">(</span><span class="ident" id="4874951">y</span><span class="op" id="4874952">)</span><span class="op" id="4874953">}</span><br>
<span class="lineno"></span><span class="op" id="4874955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4874958">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="4874993">type</span>&nbsp;<span class="ident" id="4874998">Palette</span>&nbsp;<span class="op" id="4875006">[</span><span class="op" id="4875007">]</span><span class="ident" id="4875008">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="4875015">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4875091">func</span>&nbsp;<span class="op" id="4875096">(</span><span class="ident" id="4875097">p</span>&nbsp;<span class="ident" id="4875099">Palette</span><span class="op" id="4875106">)</span>&nbsp;<span class="ident" id="4875108">Convert</span><span class="op" id="4875115">(</span><span class="ident" id="4875116">c</span>&nbsp;<span class="ident" id="4875118">Color</span><span class="op" id="4875123">)</span>&nbsp;<span class="ident" id="4875125">Color</span>&nbsp;<span class="op" id="4875131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875134">if</span>&nbsp;<span class="builtinfunc" id="4875137">len</span><span class="op" id="4875140">(</span><span class="ident" id="4875141">p</span><span class="op" id="4875142">)</span>&nbsp;<span class="op" id="4875144">==</span>&nbsp;<span class="num" id="4875147">0</span>&nbsp;<span class="op" id="4875149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875153">return</span>&nbsp;<span class="ident" id="4875160">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875168">return</span>&nbsp;<span class="ident" id="4875175">p</span><span class="op" id="4875176">[</span><span class="ident" id="4875177">p</span><span class="op" id="4875178">.</span><span class="ident" id="4875179">Index</span><span class="op" id="4875184">(</span><span class="ident" id="4875185">c</span><span class="op" id="4875186">)</span><span class="op" id="4875187">]</span><br>
<span class="lineno"></span><span class="op" id="4875189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4875192">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="4875266">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="4875282">func</span>&nbsp;<span class="op" id="4875287">(</span><span class="ident" id="4875288">p</span>&nbsp;<span class="ident" id="4875290">Palette</span><span class="op" id="4875297">)</span>&nbsp;<span class="ident" id="4875299">Index</span><span class="op" id="4875304">(</span><span class="ident" id="4875305">c</span>&nbsp;<span class="ident" id="4875307">Color</span><span class="op" id="4875312">)</span>&nbsp;<span class="builtintype" id="4875314">int</span>&nbsp;<span class="op" id="4875318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4875321">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875388">cr</span><span class="op" id="4875390">,</span>&nbsp;<span class="ident" id="4875392">cg</span><span class="op" id="4875394">,</span>&nbsp;<span class="ident" id="4875396">cb</span><span class="op" id="4875398">,</span>&nbsp;<span class="ident" id="4875400">_</span>&nbsp;<span class="op" id="4875402">:=</span>&nbsp;<span class="ident" id="4875405">c</span><span class="op" id="4875406">.</span><span class="ident" id="4875407">RGBA</span><span class="op" id="4875411">(</span><span class="op" id="4875412">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875415">ret</span><span class="op" id="4875418">,</span>&nbsp;<span class="ident" id="4875420">bestSSD</span>&nbsp;<span class="op" id="4875428">:=</span>&nbsp;<span class="num" id="4875431">0</span><span class="op" id="4875432">,</span>&nbsp;<span class="builtintype" id="4875434">uint32</span><span class="op" id="4875440">(</span><span class="num" id="4875441">1</span><span class="op" id="4875442">&lt;&lt;</span><span class="num" id="4875444">32</span><span class="op" id="4875446">-</span><span class="num" id="4875447">1</span><span class="op" id="4875448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875451">for</span>&nbsp;<span class="ident" id="4875455">i</span><span class="op" id="4875456">,</span>&nbsp;<span class="ident" id="4875458">v</span>&nbsp;<span class="op" id="4875460">:=</span>&nbsp;<span class="keyword" id="4875463">range</span>&nbsp;<span class="ident" id="4875469">p</span>&nbsp;<span class="op" id="4875471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875475">vr</span><span class="op" id="4875477">,</span>&nbsp;<span class="ident" id="4875479">vg</span><span class="op" id="4875481">,</span>&nbsp;<span class="ident" id="4875483">vb</span><span class="op" id="4875485">,</span>&nbsp;<span class="ident" id="4875487">_</span>&nbsp;<span class="op" id="4875489">:=</span>&nbsp;<span class="ident" id="4875492">v</span><span class="op" id="4875493">.</span><span class="ident" id="4875494">RGBA</span><span class="op" id="4875498">(</span><span class="op" id="4875499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4875503">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4875564">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875593">delta</span>&nbsp;<span class="op" id="4875599">:=</span>&nbsp;<span class="op" id="4875602">(</span><span class="builtintype" id="4875603">int32</span><span class="op" id="4875608">(</span><span class="ident" id="4875609">cr</span><span class="op" id="4875611">)</span>&nbsp;<span class="op" id="4875613">-</span>&nbsp;<span class="builtintype" id="4875615">int32</span><span class="op" id="4875620">(</span><span class="ident" id="4875621">vr</span><span class="op" id="4875623">)</span><span class="op" id="4875624">)</span>&nbsp;<span class="op" id="4875626">&gt;&gt;</span>&nbsp;<span class="num" id="4875629">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875633">ssd</span>&nbsp;<span class="op" id="4875637">:=</span>&nbsp;<span class="builtintype" id="4875640">uint32</span><span class="op" id="4875646">(</span><span class="ident" id="4875647">delta</span>&nbsp;<span class="op" id="4875653">*</span>&nbsp;<span class="ident" id="4875655">delta</span><span class="op" id="4875660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875664">delta</span>&nbsp;<span class="op" id="4875670">=</span>&nbsp;<span class="op" id="4875672">(</span><span class="builtintype" id="4875673">int32</span><span class="op" id="4875678">(</span><span class="ident" id="4875679">cg</span><span class="op" id="4875681">)</span>&nbsp;<span class="op" id="4875683">-</span>&nbsp;<span class="builtintype" id="4875685">int32</span><span class="op" id="4875690">(</span><span class="ident" id="4875691">vg</span><span class="op" id="4875693">)</span><span class="op" id="4875694">)</span>&nbsp;<span class="op" id="4875696">&gt;&gt;</span>&nbsp;<span class="num" id="4875699">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875703">ssd</span>&nbsp;<span class="op" id="4875707">+=</span>&nbsp;<span class="builtintype" id="4875710">uint32</span><span class="op" id="4875716">(</span><span class="ident" id="4875717">delta</span>&nbsp;<span class="op" id="4875723">*</span>&nbsp;<span class="ident" id="4875725">delta</span><span class="op" id="4875730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875734">delta</span>&nbsp;<span class="op" id="4875740">=</span>&nbsp;<span class="op" id="4875742">(</span><span class="builtintype" id="4875743">int32</span><span class="op" id="4875748">(</span><span class="ident" id="4875749">cb</span><span class="op" id="4875751">)</span>&nbsp;<span class="op" id="4875753">-</span>&nbsp;<span class="builtintype" id="4875755">int32</span><span class="op" id="4875760">(</span><span class="ident" id="4875761">vb</span><span class="op" id="4875763">)</span><span class="op" id="4875764">)</span>&nbsp;<span class="op" id="4875766">&gt;&gt;</span>&nbsp;<span class="num" id="4875769">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875773">ssd</span>&nbsp;<span class="op" id="4875777">+=</span>&nbsp;<span class="builtintype" id="4875780">uint32</span><span class="op" id="4875786">(</span><span class="ident" id="4875787">delta</span>&nbsp;<span class="op" id="4875793">*</span>&nbsp;<span class="ident" id="4875795">delta</span><span class="op" id="4875800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875804">if</span>&nbsp;<span class="ident" id="4875807">ssd</span>&nbsp;<span class="op" id="4875811">&lt;</span>&nbsp;<span class="ident" id="4875813">bestSSD</span>&nbsp;<span class="op" id="4875821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875826">if</span>&nbsp;<span class="ident" id="4875829">ssd</span>&nbsp;<span class="op" id="4875833">==</span>&nbsp;<span class="num" id="4875836">0</span>&nbsp;<span class="op" id="4875838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875844">return</span>&nbsp;<span class="ident" id="4875851">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875856">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875861">ret</span><span class="op" id="4875864">,</span>&nbsp;<span class="ident" id="4875866">bestSSD</span>&nbsp;<span class="op" id="4875874">=</span>&nbsp;<span class="ident" id="4875876">i</span><span class="op" id="4875877">,</span>&nbsp;<span class="ident" id="4875879">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875891">return</span>&nbsp;<span class="ident" id="4875898">ret</span><br>
<span class="lineno"></span><span class="op" id="4875902">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="4875905">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="4875925">var</span>&nbsp;<span class="op" id="4875929">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875932">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4875944">=</span>&nbsp;<span class="ident" id="4875946">Gray16</span><span class="op" id="4875952">{</span><span class="num" id="4875953">0</span><span class="op" id="4875954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875957">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4875969">=</span>&nbsp;<span class="ident" id="4875971">Gray16</span><span class="op" id="4875977">{</span><span class="num" id="4875978">0xffff</span><span class="op" id="4875984">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875987">Transparent</span>&nbsp;<span class="op" id="4875999">=</span>&nbsp;<span class="ident" id="4876001">Alpha16</span><span class="op" id="4876008">{</span><span class="num" id="4876009">0</span><span class="op" id="4876010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876013">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4876025">=</span>&nbsp;<span class="ident" id="4876027">Alpha16</span><span class="op" id="4876034">{</span><span class="num" id="4876035">0xffff</span><span class="op" id="4876041">}</span><br>
<span class="lineno"></span><span class="op" id="4876043">)</span>
</div>
</body>
</html>
