<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html" class="current">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2076363">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2076418">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2076472">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2076523">package</span>&nbsp;<span class="ident" id="2076531">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2076540">import</span>&nbsp;<span class="string" id="2076547">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2076557">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2076629">var</span>&nbsp;<span class="ident" id="2076633">ErrRange</span>&nbsp;<span class="op" id="2076642">=</span>&nbsp;<span class="ident" id="2076644">errors</span><span class="op" id="2076650">.</span><span class="ident" id="2076651">New</span><span class="op" id="2076654">(</span><span class="string" id="2076655">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2076675">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2076678">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2076766">var</span>&nbsp;<span class="ident" id="2076770">ErrSyntax</span>&nbsp;<span class="op" id="2076780">=</span>&nbsp;<span class="ident" id="2076782">errors</span><span class="op" id="2076788">.</span><span class="ident" id="2076789">New</span><span class="op" id="2076792">(</span><span class="string" id="2076793">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2076809">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2076812">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2076855">type</span>&nbsp;<span class="ident" id="2076860">NumError</span>&nbsp;<span class="keyword" id="2076869">struct</span>&nbsp;<span class="op" id="2076876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076879">Func</span>&nbsp;<span class="builtintype" id="2076884">string</span>&nbsp;<span class="comment" id="2076891">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076961">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2076966">string</span>&nbsp;<span class="comment" id="2076973">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2076987">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2076992">error</span>&nbsp;&nbsp;<span class="comment" id="2076999">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2077057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2077060">func</span>&nbsp;<span class="op" id="2077065">(</span><span class="ident" id="2077066">e</span>&nbsp;<span class="op" id="2077068">*</span><span class="ident" id="2077069">NumError</span><span class="op" id="2077077">)</span>&nbsp;<span class="ident" id="2077079">Error</span><span class="op" id="2077084">(</span><span class="op" id="2077085">)</span>&nbsp;<span class="builtintype" id="2077087">string</span>&nbsp;<span class="op" id="2077094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077097">return</span>&nbsp;<span class="string" id="2077104">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2077115">+</span>&nbsp;<span class="ident" id="2077117">e</span><span class="op" id="2077118">.</span><span class="ident" id="2077119">Func</span>&nbsp;<span class="op" id="2077124">+</span>&nbsp;<span class="string" id="2077126">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2077131">+</span>&nbsp;<span class="string" id="2077133">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2077144">+</span>&nbsp;<span class="ident" id="2077146">Quote</span><span class="op" id="2077151">(</span><span class="ident" id="2077152">e</span><span class="op" id="2077153">.</span><span class="ident" id="2077154">Num</span><span class="op" id="2077157">)</span>&nbsp;<span class="op" id="2077159">+</span>&nbsp;<span class="string" id="2077161">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2077166">+</span>&nbsp;<span class="ident" id="2077168">e</span><span class="op" id="2077169">.</span><span class="ident" id="2077170">Err</span><span class="op" id="2077173">.</span><span class="ident" id="2077174">Error</span><span class="op" id="2077179">(</span><span class="op" id="2077180">)</span><br>
<span class="lineno"></span><span class="op" id="2077182">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2077185">func</span>&nbsp;<span class="ident" id="2077190">syntaxError</span><span class="op" id="2077201">(</span><span class="ident" id="2077202">fn</span><span class="op" id="2077204">,</span>&nbsp;<span class="ident" id="2077206">str</span>&nbsp;<span class="builtintype" id="2077210">string</span><span class="op" id="2077216">)</span>&nbsp;<span class="op" id="2077218">*</span><span class="ident" id="2077219">NumError</span>&nbsp;<span class="op" id="2077228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077231">return</span>&nbsp;<span class="op" id="2077238">&amp;</span><span class="ident" id="2077239">NumError</span><span class="op" id="2077247">{</span><span class="ident" id="2077248">fn</span><span class="op" id="2077250">,</span>&nbsp;<span class="ident" id="2077252">str</span><span class="op" id="2077255">,</span>&nbsp;<span class="ident" id="2077257">ErrSyntax</span><span class="op" id="2077266">}</span><br>
<span class="lineno"></span><span class="op" id="2077268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2077271">func</span>&nbsp;<span class="ident" id="2077276">rangeError</span><span class="op" id="2077286">(</span><span class="ident" id="2077287">fn</span><span class="op" id="2077289">,</span>&nbsp;<span class="ident" id="2077291">str</span>&nbsp;<span class="builtintype" id="2077295">string</span><span class="op" id="2077301">)</span>&nbsp;<span class="op" id="2077303">*</span><span class="ident" id="2077304">NumError</span>&nbsp;<span class="op" id="2077313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077316">return</span>&nbsp;<span class="op" id="2077323">&amp;</span><span class="ident" id="2077324">NumError</span><span class="op" id="2077332">{</span><span class="ident" id="2077333">fn</span><span class="op" id="2077335">,</span>&nbsp;<span class="ident" id="2077337">str</span><span class="op" id="2077340">,</span>&nbsp;<span class="ident" id="2077342">ErrRange</span><span class="op" id="2077350">}</span><br>
<span class="lineno"></span><span class="op" id="2077352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2077355">const</span>&nbsp;<span class="ident" id="2077361">intSize</span>&nbsp;<span class="op" id="2077369">=</span>&nbsp;<span class="num" id="2077371">32</span>&nbsp;<span class="op" id="2077374">&lt;&lt;</span>&nbsp;<span class="op" id="2077377">(</span><span class="op" id="2077378">^</span><span class="builtintype" id="2077379">uint</span><span class="op" id="2077383">(</span><span class="num" id="2077384">0</span><span class="op" id="2077385">)</span>&nbsp;<span class="op" id="2077387">&gt;&gt;</span>&nbsp;<span class="num" id="2077390">63</span><span class="op" id="2077392">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2077395">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2077451">const</span>&nbsp;<span class="ident" id="2077457">IntSize</span>&nbsp;<span class="op" id="2077465">=</span>&nbsp;<span class="ident" id="2077467">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2077476">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2077532">func</span>&nbsp;<span class="ident" id="2077537">cutoff64</span><span class="op" id="2077545">(</span><span class="ident" id="2077546">base</span>&nbsp;<span class="builtintype" id="2077551">int</span><span class="op" id="2077554">)</span>&nbsp;<span class="ident" id="2077556">uint64</span>&nbsp;<span class="op" id="2077563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077566">if</span>&nbsp;<span class="ident" id="2077569">base</span>&nbsp;<span class="op" id="2077574">&lt;</span>&nbsp;<span class="num" id="2077576">2</span>&nbsp;<span class="op" id="2077578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077582">return</span>&nbsp;<span class="num" id="2077589">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077595">return</span>&nbsp;<span class="op" id="2077602">(</span><span class="num" id="2077603">1</span><span class="op" id="2077604">&lt;&lt;</span><span class="num" id="2077606">64</span><span class="op" id="2077608">-</span><span class="num" id="2077609">1</span><span class="op" id="2077610">)</span><span class="op" id="2077611">/</span><span class="ident" id="2077612">uint64</span><span class="op" id="2077618">(</span><span class="ident" id="2077619">base</span><span class="op" id="2077623">)</span>&nbsp;<span class="op" id="2077625">+</span>&nbsp;<span class="num" id="2077627">1</span><br>
<span class="lineno">45</span><span class="op" id="2077629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2077632">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2077688">func</span>&nbsp;<span class="ident" id="2077693">ParseUint</span><span class="op" id="2077702">(</span><span class="ident" id="2077703">s</span>&nbsp;<span class="builtintype" id="2077705">string</span><span class="op" id="2077711">,</span>&nbsp;<span class="ident" id="2077713">base</span>&nbsp;<span class="builtintype" id="2077718">int</span><span class="op" id="2077721">,</span>&nbsp;<span class="ident" id="2077723">bitSize</span>&nbsp;<span class="builtintype" id="2077731">int</span><span class="op" id="2077734">)</span>&nbsp;<span class="op" id="2077736">(</span><span class="ident" id="2077737">n</span>&nbsp;<span class="ident" id="2077739">uint64</span><span class="op" id="2077745">,</span>&nbsp;<span class="ident" id="2077747">err</span>&nbsp;<span class="builtintype" id="2077751">error</span><span class="op" id="2077756">)</span>&nbsp;<span class="op" id="2077758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077761">var</span>&nbsp;<span class="ident" id="2077765">cutoff</span><span class="op" id="2077771">,</span>&nbsp;<span class="ident" id="2077773">maxVal</span>&nbsp;<span class="ident" id="2077780">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077789">if</span>&nbsp;<span class="ident" id="2077792">bitSize</span>&nbsp;<span class="op" id="2077800">==</span>&nbsp;<span class="num" id="2077803">0</span>&nbsp;<span class="op" id="2077805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077809">bitSize</span>&nbsp;<span class="op" id="2077817">=</span>&nbsp;<span class="builtintype" id="2077819">int</span><span class="op" id="2077822">(</span><span class="ident" id="2077823">IntSize</span><span class="op" id="2077830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2077833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077837">s0</span>&nbsp;<span class="op" id="2077840">:=</span>&nbsp;<span class="ident" id="2077843">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077846">switch</span>&nbsp;<span class="op" id="2077853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077856">case</span>&nbsp;<span class="builtinfunc" id="2077861">len</span><span class="op" id="2077864">(</span><span class="ident" id="2077865">s</span><span class="op" id="2077866">)</span>&nbsp;<span class="op" id="2077868">&lt;</span>&nbsp;<span class="num" id="2077870">1</span><span class="op" id="2077871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2077875">err</span>&nbsp;<span class="op" id="2077879">=</span>&nbsp;<span class="ident" id="2077881">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077893">goto</span>&nbsp;<span class="ident" id="2077898">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077906">case</span>&nbsp;<span class="num" id="2077911">2</span>&nbsp;<span class="op" id="2077913">&lt;=</span>&nbsp;<span class="ident" id="2077916">base</span>&nbsp;<span class="op" id="2077921">&amp;&amp;</span>&nbsp;<span class="ident" id="2077924">base</span>&nbsp;<span class="op" id="2077929">&lt;=</span>&nbsp;<span class="num" id="2077932">36</span><span class="op" id="2077934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2077938">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2077969">case</span>&nbsp;<span class="ident" id="2077974">base</span>&nbsp;<span class="op" id="2077979">==</span>&nbsp;<span class="num" id="2077982">0</span><span class="op" id="2077983">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2077987">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078020">switch</span>&nbsp;<span class="op" id="2078027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078031">case</span>&nbsp;<span class="ident" id="2078036">s</span><span class="op" id="2078037">[</span><span class="num" id="2078038">0</span><span class="op" id="2078039">]</span>&nbsp;<span class="op" id="2078041">==</span>&nbsp;<span class="string" id="2078044">&#39;0&#39;</span>&nbsp;<span class="op" id="2078048">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2078051">len</span><span class="op" id="2078054">(</span><span class="ident" id="2078055">s</span><span class="op" id="2078056">)</span>&nbsp;<span class="op" id="2078058">&gt;</span>&nbsp;<span class="num" id="2078060">1</span>&nbsp;<span class="op" id="2078062">&amp;&amp;</span>&nbsp;<span class="op" id="2078065">(</span><span class="ident" id="2078066">s</span><span class="op" id="2078067">[</span><span class="num" id="2078068">1</span><span class="op" id="2078069">]</span>&nbsp;<span class="op" id="2078071">==</span>&nbsp;<span class="string" id="2078074">&#39;x&#39;</span>&nbsp;<span class="op" id="2078078">||</span>&nbsp;<span class="ident" id="2078081">s</span><span class="op" id="2078082">[</span><span class="num" id="2078083">1</span><span class="op" id="2078084">]</span>&nbsp;<span class="op" id="2078086">==</span>&nbsp;<span class="string" id="2078089">&#39;X&#39;</span><span class="op" id="2078092">)</span><span class="op" id="2078093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078098">base</span>&nbsp;<span class="op" id="2078103">=</span>&nbsp;<span class="num" id="2078105">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078111">s</span>&nbsp;<span class="op" id="2078113">=</span>&nbsp;<span class="ident" id="2078115">s</span><span class="op" id="2078116">[</span><span class="num" id="2078117">2</span><span class="op" id="2078118">:</span><span class="op" id="2078119">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078124">if</span>&nbsp;<span class="builtinfunc" id="2078127">len</span><span class="op" id="2078130">(</span><span class="ident" id="2078131">s</span><span class="op" id="2078132">)</span>&nbsp;<span class="op" id="2078134">&lt;</span>&nbsp;<span class="num" id="2078136">1</span>&nbsp;<span class="op" id="2078138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078144">err</span>&nbsp;<span class="op" id="2078148">=</span>&nbsp;<span class="ident" id="2078150">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078164">goto</span>&nbsp;<span class="ident" id="2078169">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078182">case</span>&nbsp;<span class="ident" id="2078187">s</span><span class="op" id="2078188">[</span><span class="num" id="2078189">0</span><span class="op" id="2078190">]</span>&nbsp;<span class="op" id="2078192">==</span>&nbsp;<span class="string" id="2078195">&#39;0&#39;</span><span class="op" id="2078198">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078203">base</span>&nbsp;<span class="op" id="2078208">=</span>&nbsp;<span class="num" id="2078210">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078214">default</span><span class="op" id="2078221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078226">base</span>&nbsp;<span class="op" id="2078231">=</span>&nbsp;<span class="num" id="2078233">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078242">default</span><span class="op" id="2078249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078253">err</span>&nbsp;<span class="op" id="2078257">=</span>&nbsp;<span class="ident" id="2078259">errors</span><span class="op" id="2078265">.</span><span class="ident" id="2078266">New</span><span class="op" id="2078269">(</span><span class="string" id="2078270">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2078286">+</span>&nbsp;<span class="ident" id="2078288">Itoa</span><span class="op" id="2078292">(</span><span class="ident" id="2078293">base</span><span class="op" id="2078297">)</span><span class="op" id="2078298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078302">goto</span>&nbsp;<span class="ident" id="2078307">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078318">n</span>&nbsp;<span class="op" id="2078320">=</span>&nbsp;<span class="num" id="2078322">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078325">cutoff</span>&nbsp;<span class="op" id="2078332">=</span>&nbsp;<span class="ident" id="2078334">cutoff64</span><span class="op" id="2078342">(</span><span class="ident" id="2078343">base</span><span class="op" id="2078347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078350">maxVal</span>&nbsp;<span class="op" id="2078357">=</span>&nbsp;<span class="num" id="2078359">1</span><span class="op" id="2078360">&lt;&lt;</span><span class="builtintype" id="2078362">uint</span><span class="op" id="2078366">(</span><span class="ident" id="2078367">bitSize</span><span class="op" id="2078374">)</span>&nbsp;<span class="op" id="2078376">-</span>&nbsp;<span class="num" id="2078378">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078382">for</span>&nbsp;<span class="ident" id="2078386">i</span>&nbsp;<span class="op" id="2078388">:=</span>&nbsp;<span class="num" id="2078391">0</span><span class="op" id="2078392">;</span>&nbsp;<span class="ident" id="2078394">i</span>&nbsp;<span class="op" id="2078396">&lt;</span>&nbsp;<span class="builtinfunc" id="2078398">len</span><span class="op" id="2078401">(</span><span class="ident" id="2078402">s</span><span class="op" id="2078403">)</span><span class="op" id="2078404">;</span>&nbsp;<span class="ident" id="2078406">i</span><span class="op" id="2078407">++</span>&nbsp;<span class="op" id="2078410">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078414">var</span>&nbsp;<span class="ident" id="2078418">v</span>&nbsp;<span class="builtintype" id="2078420">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078427">d</span>&nbsp;<span class="op" id="2078429">:=</span>&nbsp;<span class="ident" id="2078432">s</span><span class="op" id="2078433">[</span><span class="ident" id="2078434">i</span><span class="op" id="2078435">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078439">switch</span>&nbsp;<span class="op" id="2078446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078450">case</span>&nbsp;<span class="string" id="2078455">&#39;0&#39;</span>&nbsp;<span class="op" id="2078459">&lt;=</span>&nbsp;<span class="ident" id="2078462">d</span>&nbsp;<span class="op" id="2078464">&amp;&amp;</span>&nbsp;<span class="ident" id="2078467">d</span>&nbsp;<span class="op" id="2078469">&lt;=</span>&nbsp;<span class="string" id="2078472">&#39;9&#39;</span><span class="op" id="2078475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078480">v</span>&nbsp;<span class="op" id="2078482">=</span>&nbsp;<span class="ident" id="2078484">d</span>&nbsp;<span class="op" id="2078486">-</span>&nbsp;<span class="string" id="2078488">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078494">case</span>&nbsp;<span class="string" id="2078499">&#39;a&#39;</span>&nbsp;<span class="op" id="2078503">&lt;=</span>&nbsp;<span class="ident" id="2078506">d</span>&nbsp;<span class="op" id="2078508">&amp;&amp;</span>&nbsp;<span class="ident" id="2078511">d</span>&nbsp;<span class="op" id="2078513">&lt;=</span>&nbsp;<span class="string" id="2078516">&#39;z&#39;</span><span class="op" id="2078519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078524">v</span>&nbsp;<span class="op" id="2078526">=</span>&nbsp;<span class="ident" id="2078528">d</span>&nbsp;<span class="op" id="2078530">-</span>&nbsp;<span class="string" id="2078532">&#39;a&#39;</span>&nbsp;<span class="op" id="2078536">+</span>&nbsp;<span class="num" id="2078538">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078543">case</span>&nbsp;<span class="string" id="2078548">&#39;A&#39;</span>&nbsp;<span class="op" id="2078552">&lt;=</span>&nbsp;<span class="ident" id="2078555">d</span>&nbsp;<span class="op" id="2078557">&amp;&amp;</span>&nbsp;<span class="ident" id="2078560">d</span>&nbsp;<span class="op" id="2078562">&lt;=</span>&nbsp;<span class="string" id="2078565">&#39;Z&#39;</span><span class="op" id="2078568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078573">v</span>&nbsp;<span class="op" id="2078575">=</span>&nbsp;<span class="ident" id="2078577">d</span>&nbsp;<span class="op" id="2078579">-</span>&nbsp;<span class="string" id="2078581">&#39;A&#39;</span>&nbsp;<span class="op" id="2078585">+</span>&nbsp;<span class="num" id="2078587">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078592">default</span><span class="op" id="2078599">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078604">n</span>&nbsp;<span class="op" id="2078606">=</span>&nbsp;<span class="num" id="2078608">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078613">err</span>&nbsp;<span class="op" id="2078617">=</span>&nbsp;<span class="ident" id="2078619">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078632">goto</span>&nbsp;<span class="ident" id="2078637">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078649">if</span>&nbsp;<span class="builtintype" id="2078652">int</span><span class="op" id="2078655">(</span><span class="ident" id="2078656">v</span><span class="op" id="2078657">)</span>&nbsp;<span class="op" id="2078659">&gt;=</span>&nbsp;<span class="ident" id="2078662">base</span>&nbsp;<span class="op" id="2078667">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078672">n</span>&nbsp;<span class="op" id="2078674">=</span>&nbsp;<span class="num" id="2078676">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078681">err</span>&nbsp;<span class="op" id="2078685">=</span>&nbsp;<span class="ident" id="2078687">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078700">goto</span>&nbsp;<span class="ident" id="2078705">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078718">if</span>&nbsp;<span class="ident" id="2078721">n</span>&nbsp;<span class="op" id="2078723">&gt;=</span>&nbsp;<span class="ident" id="2078726">cutoff</span>&nbsp;<span class="op" id="2078733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2078738">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078761">n</span>&nbsp;<span class="op" id="2078763">=</span>&nbsp;<span class="num" id="2078765">1</span><span class="op" id="2078766">&lt;&lt;</span><span class="num" id="2078768">64</span>&nbsp;<span class="op" id="2078771">-</span>&nbsp;<span class="num" id="2078773">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078778">err</span>&nbsp;<span class="op" id="2078782">=</span>&nbsp;<span class="ident" id="2078784">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078796">goto</span>&nbsp;<span class="ident" id="2078801">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078813">n</span>&nbsp;<span class="op" id="2078815">*=</span>&nbsp;<span class="ident" id="2078818">uint64</span><span class="op" id="2078824">(</span><span class="ident" id="2078825">base</span><span class="op" id="2078829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078834">n1</span>&nbsp;<span class="op" id="2078837">:=</span>&nbsp;<span class="ident" id="2078840">n</span>&nbsp;<span class="op" id="2078842">+</span>&nbsp;<span class="ident" id="2078844">uint64</span><span class="op" id="2078850">(</span><span class="ident" id="2078851">v</span><span class="op" id="2078852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078856">if</span>&nbsp;<span class="ident" id="2078859">n1</span>&nbsp;<span class="op" id="2078862">&lt;</span>&nbsp;<span class="ident" id="2078864">n</span>&nbsp;<span class="op" id="2078866">||</span>&nbsp;<span class="ident" id="2078869">n1</span>&nbsp;<span class="op" id="2078872">&gt;</span>&nbsp;<span class="ident" id="2078874">maxVal</span>&nbsp;<span class="op" id="2078881">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2078886">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078906">n</span>&nbsp;<span class="op" id="2078908">=</span>&nbsp;<span class="num" id="2078910">1</span><span class="op" id="2078911">&lt;&lt;</span><span class="num" id="2078913">64</span>&nbsp;<span class="op" id="2078916">-</span>&nbsp;<span class="num" id="2078918">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078923">err</span>&nbsp;<span class="op" id="2078927">=</span>&nbsp;<span class="ident" id="2078929">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078941">goto</span>&nbsp;<span class="ident" id="2078946">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078954">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2078958">n</span>&nbsp;<span class="op" id="2078960">=</span>&nbsp;<span class="ident" id="2078962">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2078966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078970">return</span>&nbsp;<span class="ident" id="2078977">n</span><span class="op" id="2078978">,</span>&nbsp;<span class="builtintype" id="2078980">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2078985">Error</span><span class="op" id="2078990">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2078993">return</span>&nbsp;<span class="ident" id="2079000">n</span><span class="op" id="2079001">,</span>&nbsp;<span class="op" id="2079003">&amp;</span><span class="ident" id="2079004">NumError</span><span class="op" id="2079012">{</span><span class="string" id="2079013">&#34;ParseUint&#34;</span><span class="op" id="2079024">,</span>&nbsp;<span class="ident" id="2079026">s0</span><span class="op" id="2079028">,</span>&nbsp;<span class="ident" id="2079030">err</span><span class="op" id="2079033">}</span><br>
<span class="lineno"></span><span class="op" id="2079035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2079038">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2079104">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2079169">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2079233">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2079264">//</span><br>
<span class="lineno"></span><span class="comment" id="2079267">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2079318">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2079384">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2079437">//</span><br>
<span class="lineno"></span><span class="comment" id="2079440">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2079505">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2079568">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2079628">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2079690">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2079754">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2079812">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2079845">func</span>&nbsp;<span class="ident" id="2079850">ParseInt</span><span class="op" id="2079858">(</span><span class="ident" id="2079859">s</span>&nbsp;<span class="builtintype" id="2079861">string</span><span class="op" id="2079867">,</span>&nbsp;<span class="ident" id="2079869">base</span>&nbsp;<span class="builtintype" id="2079874">int</span><span class="op" id="2079877">,</span>&nbsp;<span class="ident" id="2079879">bitSize</span>&nbsp;<span class="builtintype" id="2079887">int</span><span class="op" id="2079890">)</span>&nbsp;<span class="op" id="2079892">(</span><span class="ident" id="2079893">i</span>&nbsp;<span class="ident" id="2079895">int64</span><span class="op" id="2079900">,</span>&nbsp;<span class="ident" id="2079902">err</span>&nbsp;<span class="builtintype" id="2079906">error</span><span class="op" id="2079911">)</span>&nbsp;<span class="op" id="2079913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079916">const</span>&nbsp;<span class="ident" id="2079922">fnParseInt</span>&nbsp;<span class="op" id="2079933">=</span>&nbsp;<span class="string" id="2079935">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2079948">if</span>&nbsp;<span class="ident" id="2079951">bitSize</span>&nbsp;<span class="op" id="2079959">==</span>&nbsp;<span class="num" id="2079962">0</span>&nbsp;<span class="op" id="2079964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2079968">bitSize</span>&nbsp;<span class="op" id="2079976">=</span>&nbsp;<span class="builtintype" id="2079978">int</span><span class="op" id="2079981">(</span><span class="ident" id="2079982">IntSize</span><span class="op" id="2079989">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2079992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2079996">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080018">if</span>&nbsp;<span class="builtinfunc" id="2080021">len</span><span class="op" id="2080024">(</span><span class="ident" id="2080025">s</span><span class="op" id="2080026">)</span>&nbsp;<span class="op" id="2080028">==</span>&nbsp;<span class="num" id="2080031">0</span>&nbsp;<span class="op" id="2080033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080037">return</span>&nbsp;<span class="num" id="2080044">0</span><span class="op" id="2080045">,</span>&nbsp;<span class="ident" id="2080047">syntaxError</span><span class="op" id="2080058">(</span><span class="ident" id="2080059">fnParseInt</span><span class="op" id="2080069">,</span>&nbsp;<span class="ident" id="2080071">s</span><span class="op" id="2080072">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2080079">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080106">s0</span>&nbsp;<span class="op" id="2080109">:=</span>&nbsp;<span class="ident" id="2080112">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080115">neg</span>&nbsp;<span class="op" id="2080119">:=</span>&nbsp;<span class="builtintype" id="2080122">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080129">if</span>&nbsp;<span class="ident" id="2080132">s</span><span class="op" id="2080133">[</span><span class="num" id="2080134">0</span><span class="op" id="2080135">]</span>&nbsp;<span class="op" id="2080137">==</span>&nbsp;<span class="string" id="2080140">&#39;+&#39;</span>&nbsp;<span class="op" id="2080144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080148">s</span>&nbsp;<span class="op" id="2080150">=</span>&nbsp;<span class="ident" id="2080152">s</span><span class="op" id="2080153">[</span><span class="num" id="2080154">1</span><span class="op" id="2080155">:</span><span class="op" id="2080156">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080159">}</span>&nbsp;<span class="keyword" id="2080161">else</span>&nbsp;<span class="keyword" id="2080166">if</span>&nbsp;<span class="ident" id="2080169">s</span><span class="op" id="2080170">[</span><span class="num" id="2080171">0</span><span class="op" id="2080172">]</span>&nbsp;<span class="op" id="2080174">==</span>&nbsp;<span class="string" id="2080177">&#39;-&#39;</span>&nbsp;<span class="op" id="2080181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080185">neg</span>&nbsp;<span class="op" id="2080189">=</span>&nbsp;<span class="builtintype" id="2080191">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080198">s</span>&nbsp;<span class="op" id="2080200">=</span>&nbsp;<span class="ident" id="2080202">s</span><span class="op" id="2080203">[</span><span class="num" id="2080204">1</span><span class="op" id="2080205">:</span><span class="op" id="2080206">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2080213">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080251">var</span>&nbsp;<span class="ident" id="2080255">un</span>&nbsp;<span class="ident" id="2080258">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080266">un</span><span class="op" id="2080268">,</span>&nbsp;<span class="ident" id="2080270">err</span>&nbsp;<span class="op" id="2080274">=</span>&nbsp;<span class="ident" id="2080276">ParseUint</span><span class="op" id="2080285">(</span><span class="ident" id="2080286">s</span><span class="op" id="2080287">,</span>&nbsp;<span class="ident" id="2080289">base</span><span class="op" id="2080293">,</span>&nbsp;<span class="ident" id="2080295">bitSize</span><span class="op" id="2080302">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080305">if</span>&nbsp;<span class="ident" id="2080308">err</span>&nbsp;<span class="op" id="2080312">!=</span>&nbsp;<span class="builtintype" id="2080315">nil</span>&nbsp;<span class="op" id="2080319">&amp;&amp;</span>&nbsp;<span class="ident" id="2080322">err</span><span class="op" id="2080325">.</span><span class="op" id="2080326">(</span><span class="op" id="2080327">*</span><span class="ident" id="2080328">NumError</span><span class="op" id="2080336">)</span><span class="op" id="2080337">.</span><span class="ident" id="2080338">Err</span>&nbsp;<span class="op" id="2080342">!=</span>&nbsp;<span class="ident" id="2080345">ErrRange</span>&nbsp;<span class="op" id="2080354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080358">err</span><span class="op" id="2080361">.</span><span class="op" id="2080362">(</span><span class="op" id="2080363">*</span><span class="ident" id="2080364">NumError</span><span class="op" id="2080372">)</span><span class="op" id="2080373">.</span><span class="ident" id="2080374">Func</span>&nbsp;<span class="op" id="2080379">=</span>&nbsp;<span class="ident" id="2080381">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080394">err</span><span class="op" id="2080397">.</span><span class="op" id="2080398">(</span><span class="op" id="2080399">*</span><span class="ident" id="2080400">NumError</span><span class="op" id="2080408">)</span><span class="op" id="2080409">.</span><span class="ident" id="2080410">Num</span>&nbsp;<span class="op" id="2080414">=</span>&nbsp;<span class="ident" id="2080416">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080421">return</span>&nbsp;<span class="num" id="2080428">0</span><span class="op" id="2080429">,</span>&nbsp;<span class="ident" id="2080431">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080436">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080439">cutoff</span>&nbsp;<span class="op" id="2080446">:=</span>&nbsp;<span class="ident" id="2080449">uint64</span><span class="op" id="2080455">(</span><span class="num" id="2080456">1</span>&nbsp;<span class="op" id="2080458">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2080461">uint</span><span class="op" id="2080465">(</span><span class="ident" id="2080466">bitSize</span><span class="op" id="2080473">-</span><span class="num" id="2080474">1</span><span class="op" id="2080475">)</span><span class="op" id="2080476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080479">if</span>&nbsp;<span class="op" id="2080482">!</span><span class="ident" id="2080483">neg</span>&nbsp;<span class="op" id="2080487">&amp;&amp;</span>&nbsp;<span class="ident" id="2080490">un</span>&nbsp;<span class="op" id="2080493">&gt;=</span>&nbsp;<span class="ident" id="2080496">cutoff</span>&nbsp;<span class="op" id="2080503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080507">return</span>&nbsp;<span class="ident" id="2080514">int64</span><span class="op" id="2080519">(</span><span class="ident" id="2080520">cutoff</span>&nbsp;<span class="op" id="2080527">-</span>&nbsp;<span class="num" id="2080529">1</span><span class="op" id="2080530">)</span><span class="op" id="2080531">,</span>&nbsp;<span class="ident" id="2080533">rangeError</span><span class="op" id="2080543">(</span><span class="ident" id="2080544">fnParseInt</span><span class="op" id="2080554">,</span>&nbsp;<span class="ident" id="2080556">s0</span><span class="op" id="2080558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080564">if</span>&nbsp;<span class="ident" id="2080567">neg</span>&nbsp;<span class="op" id="2080571">&amp;&amp;</span>&nbsp;<span class="ident" id="2080574">un</span>&nbsp;<span class="op" id="2080577">&gt;</span>&nbsp;<span class="ident" id="2080579">cutoff</span>&nbsp;<span class="op" id="2080586">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080590">return</span>&nbsp;<span class="op" id="2080597">-</span><span class="ident" id="2080598">int64</span><span class="op" id="2080603">(</span><span class="ident" id="2080604">cutoff</span><span class="op" id="2080610">)</span><span class="op" id="2080611">,</span>&nbsp;<span class="ident" id="2080613">rangeError</span><span class="op" id="2080623">(</span><span class="ident" id="2080624">fnParseInt</span><span class="op" id="2080634">,</span>&nbsp;<span class="ident" id="2080636">s0</span><span class="op" id="2080638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080644">n</span>&nbsp;<span class="op" id="2080646">:=</span>&nbsp;<span class="ident" id="2080649">int64</span><span class="op" id="2080654">(</span><span class="ident" id="2080655">un</span><span class="op" id="2080657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080660">if</span>&nbsp;<span class="ident" id="2080663">neg</span>&nbsp;<span class="op" id="2080667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080671">n</span>&nbsp;<span class="op" id="2080673">=</span>&nbsp;<span class="op" id="2080675">-</span><span class="ident" id="2080676">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2080679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080682">return</span>&nbsp;<span class="ident" id="2080689">n</span><span class="op" id="2080690">,</span>&nbsp;<span class="builtintype" id="2080692">nil</span><br>
<span class="lineno"></span><span class="op" id="2080696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2080699">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2080744">func</span>&nbsp;<span class="ident" id="2080749">Atoi</span><span class="op" id="2080753">(</span><span class="ident" id="2080754">s</span>&nbsp;<span class="builtintype" id="2080756">string</span><span class="op" id="2080762">)</span>&nbsp;<span class="op" id="2080764">(</span><span class="ident" id="2080765">i</span>&nbsp;<span class="builtintype" id="2080767">int</span><span class="op" id="2080770">,</span>&nbsp;<span class="ident" id="2080772">err</span>&nbsp;<span class="builtintype" id="2080776">error</span><span class="op" id="2080781">)</span>&nbsp;<span class="op" id="2080783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2080786">i64</span><span class="op" id="2080789">,</span>&nbsp;<span class="ident" id="2080791">err</span>&nbsp;<span class="op" id="2080795">:=</span>&nbsp;<span class="ident" id="2080798">ParseInt</span><span class="op" id="2080806">(</span><span class="ident" id="2080807">s</span><span class="op" id="2080808">,</span>&nbsp;<span class="num" id="2080810">10</span><span class="op" id="2080812">,</span>&nbsp;<span class="num" id="2080814">0</span><span class="op" id="2080815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2080818">return</span>&nbsp;<span class="builtintype" id="2080825">int</span><span class="op" id="2080828">(</span><span class="ident" id="2080829">i64</span><span class="op" id="2080832">)</span><span class="op" id="2080833">,</span>&nbsp;<span class="ident" id="2080835">err</span><br>
<span class="lineno"></span><span class="op" id="2080839">}</span>
</div>
</body>
</html>
