<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7677558">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7677614">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7677668">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7677719">package</span>&nbsp;<span class="ident" id="7677727">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7677734">import</span>&nbsp;<span class="op" id="7677741">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7677744">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7677755">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7677765">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7677768">var</span>&nbsp;<span class="op" id="7677772">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677775">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7677785">=</span>&nbsp;<span class="ident" id="7677787">runtime</span><span class="op" id="7677794">.</span><span class="ident" id="7677795">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677801">thisArch</span>&nbsp;&nbsp;<span class="op" id="7677811">=</span>&nbsp;<span class="ident" id="7677813">runtime</span><span class="op" id="7677820">.</span><span class="ident" id="7677821">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677829">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7677839">=</span>&nbsp;<span class="ident" id="7677841">anotherOS</span><span class="op" id="7677850">(</span><span class="op" id="7677851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7677854">otherArch</span>&nbsp;<span class="op" id="7677864">=</span>&nbsp;<span class="ident" id="7677866">anotherArch</span><span class="op" id="7677877">(</span><span class="op" id="7677878">)</span><br>
<span class="lineno"></span><span class="op" id="7677880">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7677883">func</span>&nbsp;<span class="ident" id="7677888">anotherOS</span><span class="op" id="7677897">(</span><span class="op" id="7677898">)</span>&nbsp;<span class="builtintype" id="7677900">string</span>&nbsp;<span class="op" id="7677907">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677910">if</span>&nbsp;<span class="ident" id="7677913">thisOS</span>&nbsp;<span class="op" id="7677920">!=</span>&nbsp;<span class="string" id="7677923">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7677932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677936">return</span>&nbsp;<span class="string" id="7677943">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7677953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7677956">return</span>&nbsp;<span class="string" id="7677963">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7677971">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7677974">func</span>&nbsp;<span class="ident" id="7677979">anotherArch</span><span class="op" id="7677990">(</span><span class="op" id="7677991">)</span>&nbsp;<span class="builtintype" id="7677993">string</span>&nbsp;<span class="op" id="7678000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678003">if</span>&nbsp;<span class="ident" id="7678006">thisArch</span>&nbsp;<span class="op" id="7678015">!=</span>&nbsp;<span class="string" id="7678018">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7678026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678030">return</span>&nbsp;<span class="string" id="7678037">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678046">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678049">return</span>&nbsp;<span class="string" id="7678056">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7678062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7678065">type</span>&nbsp;<span class="ident" id="7678070">GoodFileTest</span>&nbsp;<span class="keyword" id="7678083">struct</span>&nbsp;<span class="op" id="7678090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678093">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7678100">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678108">result</span>&nbsp;<span class="builtintype" id="7678115">bool</span><br>
<span class="lineno"></span><span class="op" id="7678120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7678123">var</span>&nbsp;<span class="ident" id="7678127">tests</span>&nbsp;<span class="op" id="7678133">=</span>&nbsp;<span class="op" id="7678135">[</span><span class="op" id="7678136">]</span><span class="ident" id="7678137">GoodFileTest</span><span class="op" id="7678149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678152">{</span><span class="string" id="7678153">&#34;file.go&#34;</span><span class="op" id="7678162">,</span>&nbsp;<span class="builtintype" id="7678164">true</span><span class="op" id="7678168">}</span><span class="op" id="7678169">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678172">{</span><span class="string" id="7678173">&#34;file.c&#34;</span><span class="op" id="7678181">,</span>&nbsp;<span class="builtintype" id="7678183">true</span><span class="op" id="7678187">}</span><span class="op" id="7678188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678191">{</span><span class="string" id="7678192">&#34;file_foo.go&#34;</span><span class="op" id="7678205">,</span>&nbsp;<span class="builtintype" id="7678207">true</span><span class="op" id="7678211">}</span><span class="op" id="7678212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678215">{</span><span class="string" id="7678216">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678224">+</span>&nbsp;<span class="ident" id="7678226">thisArch</span>&nbsp;<span class="op" id="7678235">+</span>&nbsp;<span class="string" id="7678237">&#34;.go&#34;</span><span class="op" id="7678242">,</span>&nbsp;<span class="builtintype" id="7678244">true</span><span class="op" id="7678248">}</span><span class="op" id="7678249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678252">{</span><span class="string" id="7678253">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678261">+</span>&nbsp;<span class="ident" id="7678263">otherArch</span>&nbsp;<span class="op" id="7678273">+</span>&nbsp;<span class="string" id="7678275">&#34;.go&#34;</span><span class="op" id="7678280">,</span>&nbsp;<span class="builtintype" id="7678282">false</span><span class="op" id="7678287">}</span><span class="op" id="7678288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678291">{</span><span class="string" id="7678292">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678300">+</span>&nbsp;<span class="ident" id="7678302">thisOS</span>&nbsp;<span class="op" id="7678309">+</span>&nbsp;<span class="string" id="7678311">&#34;.go&#34;</span><span class="op" id="7678316">,</span>&nbsp;<span class="builtintype" id="7678318">true</span><span class="op" id="7678322">}</span><span class="op" id="7678323">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678326">{</span><span class="string" id="7678327">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678335">+</span>&nbsp;<span class="ident" id="7678337">otherOS</span>&nbsp;<span class="op" id="7678345">+</span>&nbsp;<span class="string" id="7678347">&#34;.go&#34;</span><span class="op" id="7678352">,</span>&nbsp;<span class="builtintype" id="7678354">false</span><span class="op" id="7678359">}</span><span class="op" id="7678360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678363">{</span><span class="string" id="7678364">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678372">+</span>&nbsp;<span class="ident" id="7678374">thisOS</span>&nbsp;<span class="op" id="7678381">+</span>&nbsp;<span class="string" id="7678383">&#34;_&#34;</span>&nbsp;<span class="op" id="7678387">+</span>&nbsp;<span class="ident" id="7678389">thisArch</span>&nbsp;<span class="op" id="7678398">+</span>&nbsp;<span class="string" id="7678400">&#34;.go&#34;</span><span class="op" id="7678405">,</span>&nbsp;<span class="builtintype" id="7678407">true</span><span class="op" id="7678411">}</span><span class="op" id="7678412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678415">{</span><span class="string" id="7678416">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678424">+</span>&nbsp;<span class="ident" id="7678426">otherOS</span>&nbsp;<span class="op" id="7678434">+</span>&nbsp;<span class="string" id="7678436">&#34;_&#34;</span>&nbsp;<span class="op" id="7678440">+</span>&nbsp;<span class="ident" id="7678442">thisArch</span>&nbsp;<span class="op" id="7678451">+</span>&nbsp;<span class="string" id="7678453">&#34;.go&#34;</span><span class="op" id="7678458">,</span>&nbsp;<span class="builtintype" id="7678460">false</span><span class="op" id="7678465">}</span><span class="op" id="7678466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678469">{</span><span class="string" id="7678470">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678478">+</span>&nbsp;<span class="ident" id="7678480">thisOS</span>&nbsp;<span class="op" id="7678487">+</span>&nbsp;<span class="string" id="7678489">&#34;_&#34;</span>&nbsp;<span class="op" id="7678493">+</span>&nbsp;<span class="ident" id="7678495">otherArch</span>&nbsp;<span class="op" id="7678505">+</span>&nbsp;<span class="string" id="7678507">&#34;.go&#34;</span><span class="op" id="7678512">,</span>&nbsp;<span class="builtintype" id="7678514">false</span><span class="op" id="7678519">}</span><span class="op" id="7678520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678523">{</span><span class="string" id="7678524">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678532">+</span>&nbsp;<span class="ident" id="7678534">otherOS</span>&nbsp;<span class="op" id="7678542">+</span>&nbsp;<span class="string" id="7678544">&#34;_&#34;</span>&nbsp;<span class="op" id="7678548">+</span>&nbsp;<span class="ident" id="7678550">otherArch</span>&nbsp;<span class="op" id="7678560">+</span>&nbsp;<span class="string" id="7678562">&#34;.go&#34;</span><span class="op" id="7678567">,</span>&nbsp;<span class="builtintype" id="7678569">false</span><span class="op" id="7678574">}</span><span class="op" id="7678575">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678578">{</span><span class="string" id="7678579">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7678591">+</span>&nbsp;<span class="ident" id="7678593">thisArch</span>&nbsp;<span class="op" id="7678602">+</span>&nbsp;<span class="string" id="7678604">&#34;.go&#34;</span><span class="op" id="7678609">,</span>&nbsp;<span class="builtintype" id="7678611">true</span><span class="op" id="7678615">}</span><span class="op" id="7678616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678619">{</span><span class="string" id="7678620">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7678632">+</span>&nbsp;<span class="ident" id="7678634">otherArch</span>&nbsp;<span class="op" id="7678644">+</span>&nbsp;<span class="string" id="7678646">&#34;.go&#34;</span><span class="op" id="7678651">,</span>&nbsp;<span class="builtintype" id="7678653">false</span><span class="op" id="7678658">}</span><span class="op" id="7678659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678662">{</span><span class="string" id="7678663">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678671">+</span>&nbsp;<span class="ident" id="7678673">thisOS</span>&nbsp;<span class="op" id="7678680">+</span>&nbsp;<span class="string" id="7678682">&#34;.c&#34;</span><span class="op" id="7678686">,</span>&nbsp;<span class="builtintype" id="7678688">true</span><span class="op" id="7678692">}</span><span class="op" id="7678693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678696">{</span><span class="string" id="7678697">&#34;file_&#34;</span>&nbsp;<span class="op" id="7678705">+</span>&nbsp;<span class="ident" id="7678707">otherOS</span>&nbsp;<span class="op" id="7678715">+</span>&nbsp;<span class="string" id="7678717">&#34;.c&#34;</span><span class="op" id="7678721">,</span>&nbsp;<span class="builtintype" id="7678723">false</span><span class="op" id="7678728">}</span><span class="op" id="7678729">,</span><br>
<span class="lineno"></span><span class="op" id="7678731">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7678734">func</span>&nbsp;<span class="ident" id="7678739">TestGoodOSArch</span><span class="op" id="7678753">(</span><span class="ident" id="7678754">t</span>&nbsp;<span class="op" id="7678756">*</span><span class="ident" id="7678757">testing</span><span class="op" id="7678764">.</span><span class="ident" id="7678765">T</span><span class="op" id="7678766">)</span>&nbsp;<span class="op" id="7678768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678771">for</span>&nbsp;<span class="ident" id="7678775">_</span><span class="op" id="7678776">,</span>&nbsp;<span class="ident" id="7678778">test</span>&nbsp;<span class="op" id="7678783">:=</span>&nbsp;<span class="keyword" id="7678786">range</span>&nbsp;<span class="ident" id="7678792">tests</span>&nbsp;<span class="op" id="7678798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7678802">if</span>&nbsp;<span class="ident" id="7678805">Default</span><span class="op" id="7678812">.</span><span class="ident" id="7678813">goodOSArchFile</span><span class="op" id="7678827">(</span><span class="ident" id="7678828">test</span><span class="op" id="7678832">.</span><span class="ident" id="7678833">name</span><span class="op" id="7678837">,</span>&nbsp;<span class="builtinfunc" id="7678839">make</span><span class="op" id="7678843">(</span><span class="keyword" id="7678844">map</span><span class="op" id="7678847">[</span><span class="builtintype" id="7678848">string</span><span class="op" id="7678854">]</span><span class="builtintype" id="7678855">bool</span><span class="op" id="7678859">)</span><span class="op" id="7678860">)</span>&nbsp;<span class="op" id="7678862">!=</span>&nbsp;<span class="ident" id="7678865">test</span><span class="op" id="7678869">.</span><span class="ident" id="7678870">result</span>&nbsp;<span class="op" id="7678877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7678882">t</span><span class="op" id="7678883">.</span><span class="ident" id="7678884">Fatalf</span><span class="op" id="7678890">(</span><span class="string" id="7678891">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7678917">,</span>&nbsp;<span class="ident" id="7678919">test</span><span class="op" id="7678923">.</span><span class="ident" id="7678924">name</span><span class="op" id="7678928">,</span>&nbsp;<span class="ident" id="7678930">test</span><span class="op" id="7678934">.</span><span class="ident" id="7678935">result</span><span class="op" id="7678941">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7678948">}</span><br>
<span class="lineno"></span><span class="op" id="7678950">}</span>
</div>
</body>
</html>
