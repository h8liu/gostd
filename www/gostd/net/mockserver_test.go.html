<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8265889">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8265944">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8265998">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8266049">package</span>&nbsp;<span class="ident" id="8266057">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266062">import</span>&nbsp;<span class="string" id="8266069">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266077">type</span>&nbsp;<span class="ident" id="8266082">streamListener</span>&nbsp;<span class="keyword" id="8266097">struct</span>&nbsp;<span class="op" id="8266104">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266107">net</span><span class="op" id="8266110">,</span>&nbsp;<span class="ident" id="8266112">addr</span>&nbsp;<span class="builtintype" id="8266117">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266125">ln</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8266135">Listener</span><br>
<span class="lineno"></span><span class="op" id="8266144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266147">type</span>&nbsp;<span class="ident" id="8266152">dualStackServer</span>&nbsp;<span class="keyword" id="8266168">struct</span>&nbsp;<span class="op" id="8266175">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266178">lnmu</span>&nbsp;<span class="ident" id="8266183">sync</span><span class="op" id="8266187">.</span><span class="ident" id="8266188">RWMutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266197">lns</span>&nbsp;&nbsp;<span class="op" id="8266202">[</span><span class="op" id="8266203">]</span><span class="ident" id="8266204">streamListener</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266220">port</span>&nbsp;<span class="builtintype" id="8266225">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266234">cmu</span>&nbsp;<span class="ident" id="8266238">sync</span><span class="op" id="8266242">.</span><span class="ident" id="8266243">RWMutex</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266252">cs</span>&nbsp;&nbsp;<span class="op" id="8266256">[</span><span class="op" id="8266257">]</span><span class="ident" id="8266258">Conn</span>&nbsp;<span class="comment" id="8266263">//&nbsp;established&nbsp;connections&nbsp;at&nbsp;the&nbsp;passive&nbsp;open&nbsp;side</span><br>
<span class="lineno"></span><span class="op" id="8266315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266318">func</span>&nbsp;<span class="op" id="8266323">(</span><span class="ident" id="8266324">dss</span>&nbsp;<span class="op" id="8266328">*</span><span class="ident" id="8266329">dualStackServer</span><span class="op" id="8266344">)</span>&nbsp;<span class="ident" id="8266346">buildup</span><span class="op" id="8266353">(</span><span class="ident" id="8266354">server</span>&nbsp;<span class="keyword" id="8266361">func</span><span class="op" id="8266365">(</span><span class="op" id="8266366">*</span><span class="ident" id="8266367">dualStackServer</span><span class="op" id="8266382">,</span>&nbsp;<span class="ident" id="8266384">Listener</span><span class="op" id="8266392">)</span><span class="op" id="8266393">)</span>&nbsp;<span class="builtintype" id="8266395">error</span>&nbsp;<span class="op" id="8266401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266404">for</span>&nbsp;<span class="ident" id="8266408">i</span>&nbsp;<span class="op" id="8266410">:=</span>&nbsp;<span class="keyword" id="8266413">range</span>&nbsp;<span class="ident" id="8266419">dss</span><span class="op" id="8266422">.</span><span class="ident" id="8266423">lns</span>&nbsp;<span class="op" id="8266427">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266431">go</span>&nbsp;<span class="ident" id="8266434">server</span><span class="op" id="8266440">(</span><span class="ident" id="8266441">dss</span><span class="op" id="8266444">,</span>&nbsp;<span class="ident" id="8266446">dss</span><span class="op" id="8266449">.</span><span class="ident" id="8266450">lns</span><span class="op" id="8266453">[</span><span class="ident" id="8266454">i</span><span class="op" id="8266455">]</span><span class="op" id="8266456">.</span><span class="ident" id="8266457">ln</span><span class="op" id="8266459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266465">return</span>&nbsp;<span class="ident" id="8266472">nil</span><br>
<span class="lineno"></span><span class="op" id="8266476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8266479">func</span>&nbsp;<span class="op" id="8266484">(</span><span class="ident" id="8266485">dss</span>&nbsp;<span class="op" id="8266489">*</span><span class="ident" id="8266490">dualStackServer</span><span class="op" id="8266505">)</span>&nbsp;<span class="ident" id="8266507">putConn</span><span class="op" id="8266514">(</span><span class="ident" id="8266515">c</span>&nbsp;<span class="ident" id="8266517">Conn</span><span class="op" id="8266521">)</span>&nbsp;<span class="builtintype" id="8266523">error</span>&nbsp;<span class="op" id="8266529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266532">dss</span><span class="op" id="8266535">.</span><span class="ident" id="8266536">cmu</span><span class="op" id="8266539">.</span><span class="ident" id="8266540">Lock</span><span class="op" id="8266544">(</span><span class="op" id="8266545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266548">dss</span><span class="op" id="8266551">.</span><span class="ident" id="8266552">cs</span>&nbsp;<span class="op" id="8266555">=</span>&nbsp;<span class="builtinfunc" id="8266557">append</span><span class="op" id="8266563">(</span><span class="ident" id="8266564">dss</span><span class="op" id="8266567">.</span><span class="ident" id="8266568">cs</span><span class="op" id="8266570">,</span>&nbsp;<span class="ident" id="8266572">c</span><span class="op" id="8266573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266576">dss</span><span class="op" id="8266579">.</span><span class="ident" id="8266580">cmu</span><span class="op" id="8266583">.</span><span class="ident" id="8266584">Unlock</span><span class="op" id="8266590">(</span><span class="op" id="8266591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266594">return</span>&nbsp;<span class="ident" id="8266601">nil</span><br>
<span class="lineno">35</span><span class="op" id="8266605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266608">func</span>&nbsp;<span class="op" id="8266613">(</span><span class="ident" id="8266614">dss</span>&nbsp;<span class="op" id="8266618">*</span><span class="ident" id="8266619">dualStackServer</span><span class="op" id="8266634">)</span>&nbsp;<span class="ident" id="8266636">teardownNetwork</span><span class="op" id="8266651">(</span><span class="ident" id="8266652">net</span>&nbsp;<span class="builtintype" id="8266656">string</span><span class="op" id="8266662">)</span>&nbsp;<span class="builtintype" id="8266664">error</span>&nbsp;<span class="op" id="8266670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266673">dss</span><span class="op" id="8266676">.</span><span class="ident" id="8266677">lnmu</span><span class="op" id="8266681">.</span><span class="ident" id="8266682">Lock</span><span class="op" id="8266686">(</span><span class="op" id="8266687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266690">for</span>&nbsp;<span class="ident" id="8266694">i</span>&nbsp;<span class="op" id="8266696">:=</span>&nbsp;<span class="keyword" id="8266699">range</span>&nbsp;<span class="ident" id="8266705">dss</span><span class="op" id="8266708">.</span><span class="ident" id="8266709">lns</span>&nbsp;<span class="op" id="8266713">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266717">if</span>&nbsp;<span class="ident" id="8266720">net</span>&nbsp;<span class="op" id="8266724">==</span>&nbsp;<span class="ident" id="8266727">dss</span><span class="op" id="8266730">.</span><span class="ident" id="8266731">lns</span><span class="op" id="8266734">[</span><span class="ident" id="8266735">i</span><span class="op" id="8266736">]</span><span class="op" id="8266737">.</span><span class="ident" id="8266738">net</span>&nbsp;<span class="op" id="8266742">&amp;&amp;</span>&nbsp;<span class="ident" id="8266745">dss</span><span class="op" id="8266748">.</span><span class="ident" id="8266749">lns</span><span class="op" id="8266752">[</span><span class="ident" id="8266753">i</span><span class="op" id="8266754">]</span><span class="op" id="8266755">.</span><span class="ident" id="8266756">ln</span>&nbsp;<span class="op" id="8266759">!=</span>&nbsp;<span class="ident" id="8266762">nil</span>&nbsp;<span class="op" id="8266766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266771">dss</span><span class="op" id="8266774">.</span><span class="ident" id="8266775">lns</span><span class="op" id="8266778">[</span><span class="ident" id="8266779">i</span><span class="op" id="8266780">]</span><span class="op" id="8266781">.</span><span class="ident" id="8266782">ln</span><span class="op" id="8266784">.</span><span class="ident" id="8266785">Close</span><span class="op" id="8266790">(</span><span class="op" id="8266791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266796">dss</span><span class="op" id="8266799">.</span><span class="ident" id="8266800">lns</span><span class="op" id="8266803">[</span><span class="ident" id="8266804">i</span><span class="op" id="8266805">]</span><span class="op" id="8266806">.</span><span class="ident" id="8266807">ln</span>&nbsp;<span class="op" id="8266810">=</span>&nbsp;<span class="ident" id="8266812">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8266821">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266824">dss</span><span class="op" id="8266827">.</span><span class="ident" id="8266828">lnmu</span><span class="op" id="8266832">.</span><span class="ident" id="8266833">Unlock</span><span class="op" id="8266839">(</span><span class="op" id="8266840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266843">return</span>&nbsp;<span class="ident" id="8266850">nil</span><br>
<span class="lineno"></span><span class="op" id="8266854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8266857">func</span>&nbsp;<span class="op" id="8266862">(</span><span class="ident" id="8266863">dss</span>&nbsp;<span class="op" id="8266867">*</span><span class="ident" id="8266868">dualStackServer</span><span class="op" id="8266883">)</span>&nbsp;<span class="ident" id="8266885">teardown</span><span class="op" id="8266893">(</span><span class="op" id="8266894">)</span>&nbsp;<span class="builtintype" id="8266896">error</span>&nbsp;<span class="op" id="8266902">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266905">dss</span><span class="op" id="8266908">.</span><span class="ident" id="8266909">lnmu</span><span class="op" id="8266913">.</span><span class="ident" id="8266914">Lock</span><span class="op" id="8266918">(</span><span class="op" id="8266919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266922">for</span>&nbsp;<span class="ident" id="8266926">i</span>&nbsp;<span class="op" id="8266928">:=</span>&nbsp;<span class="keyword" id="8266931">range</span>&nbsp;<span class="ident" id="8266937">dss</span><span class="op" id="8266940">.</span><span class="ident" id="8266941">lns</span>&nbsp;<span class="op" id="8266945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8266949">if</span>&nbsp;<span class="ident" id="8266952">dss</span><span class="op" id="8266955">.</span><span class="ident" id="8266956">lns</span><span class="op" id="8266959">[</span><span class="ident" id="8266960">i</span><span class="op" id="8266961">]</span><span class="op" id="8266962">.</span><span class="ident" id="8266963">ln</span>&nbsp;<span class="op" id="8266966">!=</span>&nbsp;<span class="ident" id="8266969">nil</span>&nbsp;<span class="op" id="8266973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8266978">dss</span><span class="op" id="8266981">.</span><span class="ident" id="8266982">lns</span><span class="op" id="8266985">[</span><span class="ident" id="8266986">i</span><span class="op" id="8266987">]</span><span class="op" id="8266988">.</span><span class="ident" id="8266989">ln</span><span class="op" id="8266991">.</span><span class="ident" id="8266992">Close</span><span class="op" id="8266997">(</span><span class="op" id="8266998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267002">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267008">dss</span><span class="op" id="8267011">.</span><span class="ident" id="8267012">lnmu</span><span class="op" id="8267016">.</span><span class="ident" id="8267017">Unlock</span><span class="op" id="8267023">(</span><span class="op" id="8267024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267027">dss</span><span class="op" id="8267030">.</span><span class="ident" id="8267031">cmu</span><span class="op" id="8267034">.</span><span class="ident" id="8267035">Lock</span><span class="op" id="8267039">(</span><span class="op" id="8267040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267043">for</span>&nbsp;<span class="ident" id="8267047">_</span><span class="op" id="8267048">,</span>&nbsp;<span class="ident" id="8267050">c</span>&nbsp;<span class="op" id="8267052">:=</span>&nbsp;<span class="keyword" id="8267055">range</span>&nbsp;<span class="ident" id="8267061">dss</span><span class="op" id="8267064">.</span><span class="ident" id="8267065">cs</span>&nbsp;<span class="op" id="8267068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267072">c</span><span class="op" id="8267073">.</span><span class="ident" id="8267074">Close</span><span class="op" id="8267079">(</span><span class="op" id="8267080">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267086">dss</span><span class="op" id="8267089">.</span><span class="ident" id="8267090">cmu</span><span class="op" id="8267093">.</span><span class="ident" id="8267094">Unlock</span><span class="op" id="8267100">(</span><span class="op" id="8267101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267104">return</span>&nbsp;<span class="ident" id="8267111">nil</span><br>
<span class="lineno"></span><span class="op" id="8267115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8267118">func</span>&nbsp;<span class="ident" id="8267123">newDualStackServer</span><span class="op" id="8267141">(</span><span class="ident" id="8267142">lns</span>&nbsp;<span class="op" id="8267146">[</span><span class="op" id="8267147">]</span><span class="ident" id="8267148">streamListener</span><span class="op" id="8267162">)</span>&nbsp;<span class="op" id="8267164">(</span><span class="op" id="8267165">*</span><span class="ident" id="8267166">dualStackServer</span><span class="op" id="8267181">,</span>&nbsp;<span class="builtintype" id="8267183">error</span><span class="op" id="8267188">)</span>&nbsp;<span class="op" id="8267190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267193">dss</span>&nbsp;<span class="op" id="8267197">:=</span>&nbsp;<span class="op" id="8267200">&amp;</span><span class="ident" id="8267201">dualStackServer</span><span class="op" id="8267216">{</span><span class="ident" id="8267217">lns</span><span class="op" id="8267220">:</span>&nbsp;<span class="ident" id="8267222">lns</span><span class="op" id="8267225">,</span>&nbsp;<span class="ident" id="8267227">port</span><span class="op" id="8267231">:</span>&nbsp;<span class="string" id="8267233">&#34;0&#34;</span><span class="op" id="8267236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267239">for</span>&nbsp;<span class="ident" id="8267243">i</span>&nbsp;<span class="op" id="8267245">:=</span>&nbsp;<span class="keyword" id="8267248">range</span>&nbsp;<span class="ident" id="8267254">dss</span><span class="op" id="8267257">.</span><span class="ident" id="8267258">lns</span>&nbsp;<span class="op" id="8267262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267266">ln</span><span class="op" id="8267268">,</span>&nbsp;<span class="ident" id="8267270">err</span>&nbsp;<span class="op" id="8267274">:=</span>&nbsp;<span class="ident" id="8267277">Listen</span><span class="op" id="8267283">(</span><span class="ident" id="8267284">dss</span><span class="op" id="8267287">.</span><span class="ident" id="8267288">lns</span><span class="op" id="8267291">[</span><span class="ident" id="8267292">i</span><span class="op" id="8267293">]</span><span class="op" id="8267294">.</span><span class="ident" id="8267295">net</span><span class="op" id="8267298">,</span>&nbsp;<span class="ident" id="8267300">dss</span><span class="op" id="8267303">.</span><span class="ident" id="8267304">lns</span><span class="op" id="8267307">[</span><span class="ident" id="8267308">i</span><span class="op" id="8267309">]</span><span class="op" id="8267310">.</span><span class="ident" id="8267311">addr</span><span class="op" id="8267315">+</span><span class="string" id="8267316">&#34;:&#34;</span><span class="op" id="8267319">+</span><span class="ident" id="8267320">dss</span><span class="op" id="8267323">.</span><span class="ident" id="8267324">port</span><span class="op" id="8267328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267332">if</span>&nbsp;<span class="ident" id="8267335">err</span>&nbsp;<span class="op" id="8267339">!=</span>&nbsp;<span class="ident" id="8267342">nil</span>&nbsp;<span class="op" id="8267346">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267351">dss</span><span class="op" id="8267354">.</span><span class="ident" id="8267355">teardown</span><span class="op" id="8267363">(</span><span class="op" id="8267364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267369">return</span>&nbsp;<span class="ident" id="8267376">nil</span><span class="op" id="8267379">,</span>&nbsp;<span class="ident" id="8267381">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267391">dss</span><span class="op" id="8267394">.</span><span class="ident" id="8267395">lns</span><span class="op" id="8267398">[</span><span class="ident" id="8267399">i</span><span class="op" id="8267400">]</span><span class="op" id="8267401">.</span><span class="ident" id="8267402">ln</span>&nbsp;<span class="op" id="8267405">=</span>&nbsp;<span class="ident" id="8267407">ln</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267412">if</span>&nbsp;<span class="ident" id="8267415">dss</span><span class="op" id="8267418">.</span><span class="ident" id="8267419">port</span>&nbsp;<span class="op" id="8267424">==</span>&nbsp;<span class="string" id="8267427">&#34;0&#34;</span>&nbsp;<span class="op" id="8267431">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267436">if</span>&nbsp;<span class="ident" id="8267439">_</span><span class="op" id="8267440">,</span>&nbsp;<span class="ident" id="8267442">dss</span><span class="op" id="8267445">.</span><span class="ident" id="8267446">port</span><span class="op" id="8267450">,</span>&nbsp;<span class="ident" id="8267452">err</span>&nbsp;<span class="op" id="8267456">=</span>&nbsp;<span class="ident" id="8267458">SplitHostPort</span><span class="op" id="8267471">(</span><span class="ident" id="8267472">ln</span><span class="op" id="8267474">.</span><span class="ident" id="8267475">Addr</span><span class="op" id="8267479">(</span><span class="op" id="8267480">)</span><span class="op" id="8267481">.</span><span class="ident" id="8267482">String</span><span class="op" id="8267488">(</span><span class="op" id="8267489">)</span><span class="op" id="8267490">)</span><span class="op" id="8267491">;</span>&nbsp;<span class="ident" id="8267493">err</span>&nbsp;<span class="op" id="8267497">!=</span>&nbsp;<span class="ident" id="8267500">nil</span>&nbsp;<span class="op" id="8267504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8267510">dss</span><span class="op" id="8267513">.</span><span class="ident" id="8267514">teardown</span><span class="op" id="8267522">(</span><span class="op" id="8267523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267529">return</span>&nbsp;<span class="ident" id="8267536">nil</span><span class="op" id="8267539">,</span>&nbsp;<span class="ident" id="8267541">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267552">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8267555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8267558">return</span>&nbsp;<span class="ident" id="8267565">dss</span><span class="op" id="8267568">,</span>&nbsp;<span class="ident" id="8267570">nil</span><br>
<span class="lineno"></span><span class="op" id="8267574">}</span>
</div>
</body>
</html>
