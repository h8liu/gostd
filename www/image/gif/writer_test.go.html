<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6736162">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6736217">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6736271">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6736322">package</span>&nbsp;<span class="ident" id="6736330">gif</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736335">import</span>&nbsp;<span class="op" id="6736342">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736345">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736354">&#34;image&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736363">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736378">_</span>&nbsp;<span class="string" id="6736380">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736393">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736406">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736419">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736425">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6736435">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736438">func</span>&nbsp;<span class="ident" id="6736443">readImg</span><span class="op" id="6736450">(</span><span class="ident" id="6736451">filename</span>&nbsp;<span class="builtintype" id="6736460">string</span><span class="op" id="6736466">)</span>&nbsp;<span class="op" id="6736468">(</span><span class="ident" id="6736469"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6736474">.</span><span class="ident" id="6736475">Image</span><span class="op" id="6736480">,</span>&nbsp;<span class="builtintype" id="6736482">error</span><span class="op" id="6736487">)</span>&nbsp;<span class="op" id="6736489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736492">f</span><span class="op" id="6736493">,</span>&nbsp;<span class="ident" id="6736495">err</span>&nbsp;<span class="op" id="6736499">:=</span>&nbsp;<span class="ident" id="6736502"><a href="/image/gif/writer_test.go.html#6736419">os</a></span><span class="op" id="6736504">.</span><span class="ident" id="6736505">Open</span><span class="op" id="6736509">(</span><span class="ident" id="6736510"><a href="/image/gif/writer_test.go.html#6736451">filename</a></span><span class="op" id="6736518">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736521">if</span>&nbsp;<span class="ident" id="6736524"><a href="/image/gif/writer_test.go.html#6736495">err</a></span>&nbsp;<span class="op" id="6736528">!=</span>&nbsp;<span class="ident" id="6736531">nil</span>&nbsp;<span class="op" id="6736535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736539">return</span>&nbsp;<span class="ident" id="6736546">nil</span><span class="op" id="6736549">,</span>&nbsp;<span class="ident" id="6736551"><a href="/image/gif/writer_test.go.html#6736495">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736559">defer</span>&nbsp;<span class="ident" id="6736565"><a href="/image/gif/writer_test.go.html#6736492">f</a></span><span class="op" id="6736566">.</span><span class="ident" id="6736567">Close</span><span class="op" id="6736572">(</span><span class="op" id="6736573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736576">m</span><span class="op" id="6736577">,</span>&nbsp;<span class="ident" id="6736579">_</span><span class="op" id="6736580">,</span>&nbsp;<span class="ident" id="6736582"><a href="/image/gif/writer_test.go.html#6736495">err</a></span>&nbsp;<span class="op" id="6736586">:=</span>&nbsp;<span class="ident" id="6736589"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6736594">.</span><span class="ident" id="6736595">Decode</span><span class="op" id="6736601">(</span><span class="ident" id="6736602"><a href="/image/gif/writer_test.go.html#6736492">f</a></span><span class="op" id="6736603">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736606">return</span>&nbsp;<span class="ident" id="6736613"><a href="/image/gif/writer_test.go.html#6736576">m</a></span><span class="op" id="6736614">,</span>&nbsp;<span class="ident" id="6736616"><a href="/image/gif/writer_test.go.html#6736495">err</a></span><br>
<span class="lineno"></span><span class="op" id="6736620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736623">func</span>&nbsp;<span class="ident" id="6736628">readGIF</span><span class="op" id="6736635">(</span><span class="ident" id="6736636">filename</span>&nbsp;<span class="builtintype" id="6736645">string</span><span class="op" id="6736651">)</span>&nbsp;<span class="op" id="6736653">(</span><span class="op" id="6736654">*</span><span class="ident" id="6736655"><a href="/image/gif/reader.go.html#6264003">GIF</a></span><span class="op" id="6736658">,</span>&nbsp;<span class="builtintype" id="6736660">error</span><span class="op" id="6736665">)</span>&nbsp;<span class="op" id="6736667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736670">f</span><span class="op" id="6736671">,</span>&nbsp;<span class="ident" id="6736673">err</span>&nbsp;<span class="op" id="6736677">:=</span>&nbsp;<span class="ident" id="6736680"><a href="/image/gif/writer_test.go.html#6736419">os</a></span><span class="op" id="6736682">.</span><span class="ident" id="6736683">Open</span><span class="op" id="6736687">(</span><span class="ident" id="6736688"><a href="/image/gif/writer_test.go.html#6736636">filename</a></span><span class="op" id="6736696">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736699">if</span>&nbsp;<span class="ident" id="6736702"><a href="/image/gif/writer_test.go.html#6736673">err</a></span>&nbsp;<span class="op" id="6736706">!=</span>&nbsp;<span class="ident" id="6736709">nil</span>&nbsp;<span class="op" id="6736713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736717">return</span>&nbsp;<span class="ident" id="6736724">nil</span><span class="op" id="6736727">,</span>&nbsp;<span class="ident" id="6736729"><a href="/image/gif/writer_test.go.html#6736673">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736737">defer</span>&nbsp;<span class="ident" id="6736743"><a href="/image/gif/writer_test.go.html#6736670">f</a></span><span class="op" id="6736744">.</span><span class="ident" id="6736745">Close</span><span class="op" id="6736750">(</span><span class="op" id="6736751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736754">return</span>&nbsp;<span class="ident" id="6736761"><a href="/image/gif/reader.go.html#6264324">DecodeAll</a></span><span class="op" id="6736770">(</span><span class="ident" id="6736771"><a href="/image/gif/writer_test.go.html#6736670">f</a></span><span class="op" id="6736772">)</span><br>
<span class="lineno">35</span><span class="op" id="6736774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736777">func</span>&nbsp;<span class="ident" id="6736782">delta</span><span class="op" id="6736787">(</span><span class="ident" id="6736788">u0</span><span class="op" id="6736790">,</span>&nbsp;<span class="ident" id="6736792">u1</span>&nbsp;<span class="builtintype" id="6736795">uint32</span><span class="op" id="6736801">)</span>&nbsp;<span class="ident" id="6736803">int64</span>&nbsp;<span class="op" id="6736809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736812">d</span>&nbsp;<span class="op" id="6736814">:=</span>&nbsp;<span class="ident" id="6736817">int64</span><span class="op" id="6736822">(</span><span class="ident" id="6736823"><a href="/image/gif/writer_test.go.html#6736788">u0</a></span><span class="op" id="6736825">)</span>&nbsp;<span class="op" id="6736827">-</span>&nbsp;<span class="ident" id="6736829">int64</span><span class="op" id="6736834">(</span><span class="ident" id="6736835"><a href="/image/gif/writer_test.go.html#6736792">u1</a></span><span class="op" id="6736837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736840">if</span>&nbsp;<span class="ident" id="6736843"><a href="/image/gif/writer_test.go.html#6736812">d</a></span>&nbsp;<span class="op" id="6736845">&lt;</span>&nbsp;<span class="num" id="6736847">0</span>&nbsp;<span class="op" id="6736849">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736853">return</span>&nbsp;<span class="op" id="6736860">-</span><span class="ident" id="6736861"><a href="/image/gif/writer_test.go.html#6736812">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736867">return</span>&nbsp;<span class="ident" id="6736874"><a href="/image/gif/writer_test.go.html#6736812">d</a></span><br>
<span class="lineno"></span><span class="op" id="6736876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="6736879">//&nbsp;averageDelta&nbsp;returns&nbsp;the&nbsp;average&nbsp;delta&nbsp;in&nbsp;RGB&nbsp;space.&nbsp;The&nbsp;two&nbsp;images&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="6736955">//&nbsp;have&nbsp;the&nbsp;same&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="6736980">func</span>&nbsp;<span class="ident" id="6736985">averageDelta</span><span class="op" id="6736997">(</span><span class="ident" id="6736998">m0</span><span class="op" id="6737000">,</span>&nbsp;<span class="ident" id="6737002">m1</span>&nbsp;<span class="ident" id="6737005"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6737010">.</span><span class="ident" id="6737011">Image</span><span class="op" id="6737016">)</span>&nbsp;<span class="ident" id="6737018">int64</span>&nbsp;<span class="op" id="6737024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737027">b</span>&nbsp;<span class="op" id="6737029">:=</span>&nbsp;<span class="ident" id="6737032"><a href="/image/gif/writer_test.go.html#6736998">m0</a></span><span class="op" id="6737034">.</span><span class="ident" id="6737035">Bounds</span><span class="op" id="6737041">(</span><span class="op" id="6737042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737045">var</span>&nbsp;<span class="ident" id="6737049">sum</span><span class="op" id="6737052">,</span>&nbsp;<span class="ident" id="6737054">n</span>&nbsp;<span class="ident" id="6737056">int64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737063">for</span>&nbsp;<span class="ident" id="6737067">y</span>&nbsp;<span class="op" id="6737069">:=</span>&nbsp;<span class="ident" id="6737072"><a href="/image/gif/writer_test.go.html#6737027">b</a></span><span class="op" id="6737073">.</span><span class="ident" id="6737074">Min</span><span class="op" id="6737077">.</span><span class="ident" id="6737078">Y</span><span class="op" id="6737079">;</span>&nbsp;<span class="ident" id="6737081"><a href="/image/gif/writer_test.go.html#6737067">y</a></span>&nbsp;<span class="op" id="6737083">&lt;</span>&nbsp;<span class="ident" id="6737085"><a href="/image/gif/writer_test.go.html#6737027">b</a></span><span class="op" id="6737086">.</span><span class="ident" id="6737087">Max</span><span class="op" id="6737090">.</span><span class="ident" id="6737091">Y</span><span class="op" id="6737092">;</span>&nbsp;<span class="ident" id="6737094"><a href="/image/gif/writer_test.go.html#6737067">y</a></span><span class="op" id="6737095">++</span>&nbsp;<span class="op" id="6737098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737102">for</span>&nbsp;<span class="ident" id="6737106">x</span>&nbsp;<span class="op" id="6737108">:=</span>&nbsp;<span class="ident" id="6737111"><a href="/image/gif/writer_test.go.html#6737027">b</a></span><span class="op" id="6737112">.</span><span class="ident" id="6737113">Min</span><span class="op" id="6737116">.</span><span class="ident" id="6737117">X</span><span class="op" id="6737118">;</span>&nbsp;<span class="ident" id="6737120"><a href="/image/gif/writer_test.go.html#6737106">x</a></span>&nbsp;<span class="op" id="6737122">&lt;</span>&nbsp;<span class="ident" id="6737124"><a href="/image/gif/writer_test.go.html#6737027">b</a></span><span class="op" id="6737125">.</span><span class="ident" id="6737126">Max</span><span class="op" id="6737129">.</span><span class="ident" id="6737130">X</span><span class="op" id="6737131">;</span>&nbsp;<span class="ident" id="6737133"><a href="/image/gif/writer_test.go.html#6737106">x</a></span><span class="op" id="6737134">++</span>&nbsp;<span class="op" id="6737137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737142">c0</span>&nbsp;<span class="op" id="6737145">:=</span>&nbsp;<span class="ident" id="6737148"><a href="/image/gif/writer_test.go.html#6736998">m0</a></span><span class="op" id="6737150">.</span><span class="ident" id="6737151">At</span><span class="op" id="6737153">(</span><span class="ident" id="6737154"><a href="/image/gif/writer_test.go.html#6737106">x</a></span><span class="op" id="6737155">,</span>&nbsp;<span class="ident" id="6737157"><a href="/image/gif/writer_test.go.html#6737067">y</a></span><span class="op" id="6737158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737163">c1</span>&nbsp;<span class="op" id="6737166">:=</span>&nbsp;<span class="ident" id="6737169"><a href="/image/gif/writer_test.go.html#6737002">m1</a></span><span class="op" id="6737171">.</span><span class="ident" id="6737172">At</span><span class="op" id="6737174">(</span><span class="ident" id="6737175"><a href="/image/gif/writer_test.go.html#6737106">x</a></span><span class="op" id="6737176">,</span>&nbsp;<span class="ident" id="6737178"><a href="/image/gif/writer_test.go.html#6737067">y</a></span><span class="op" id="6737179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737184">r0</span><span class="op" id="6737186">,</span>&nbsp;<span class="ident" id="6737188">g0</span><span class="op" id="6737190">,</span>&nbsp;<span class="ident" id="6737192">b0</span><span class="op" id="6737194">,</span>&nbsp;<span class="ident" id="6737196">_</span>&nbsp;<span class="op" id="6737198">:=</span>&nbsp;<span class="ident" id="6737201"><a href="/image/gif/writer_test.go.html#6737142">c0</a></span><span class="op" id="6737203">.</span><span class="ident" id="6737204">RGBA</span><span class="op" id="6737208">(</span><span class="op" id="6737209">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737214">r1</span><span class="op" id="6737216">,</span>&nbsp;<span class="ident" id="6737218">g1</span><span class="op" id="6737220">,</span>&nbsp;<span class="ident" id="6737222">b1</span><span class="op" id="6737224">,</span>&nbsp;<span class="ident" id="6737226">_</span>&nbsp;<span class="op" id="6737228">:=</span>&nbsp;<span class="ident" id="6737231"><a href="/image/gif/writer_test.go.html#6737163">c1</a></span><span class="op" id="6737233">.</span><span class="ident" id="6737234">RGBA</span><span class="op" id="6737238">(</span><span class="op" id="6737239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737244"><a href="/image/gif/writer_test.go.html#6737049">sum</a></span>&nbsp;<span class="op" id="6737248">+=</span>&nbsp;<span class="ident" id="6737251"><a href="/image/gif/writer_test.go.html#6736782">delta</a></span><span class="op" id="6737256">(</span><span class="ident" id="6737257"><a href="/image/gif/writer_test.go.html#6737184">r0</a></span><span class="op" id="6737259">,</span>&nbsp;<span class="ident" id="6737261"><a href="/image/gif/writer_test.go.html#6737214">r1</a></span><span class="op" id="6737263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737268"><a href="/image/gif/writer_test.go.html#6737049">sum</a></span>&nbsp;<span class="op" id="6737272">+=</span>&nbsp;<span class="ident" id="6737275"><a href="/image/gif/writer_test.go.html#6736782">delta</a></span><span class="op" id="6737280">(</span><span class="ident" id="6737281"><a href="/image/gif/writer_test.go.html#6737188">g0</a></span><span class="op" id="6737283">,</span>&nbsp;<span class="ident" id="6737285"><a href="/image/gif/writer_test.go.html#6737218">g1</a></span><span class="op" id="6737287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737292"><a href="/image/gif/writer_test.go.html#6737049">sum</a></span>&nbsp;<span class="op" id="6737296">+=</span>&nbsp;<span class="ident" id="6737299"><a href="/image/gif/writer_test.go.html#6736782">delta</a></span><span class="op" id="6737304">(</span><span class="ident" id="6737305"><a href="/image/gif/writer_test.go.html#6737192">b0</a></span><span class="op" id="6737307">,</span>&nbsp;<span class="ident" id="6737309"><a href="/image/gif/writer_test.go.html#6737222">b1</a></span><span class="op" id="6737311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737316"><a href="/image/gif/writer_test.go.html#6737054">n</a></span>&nbsp;<span class="op" id="6737318">+=</span>&nbsp;<span class="num" id="6737321">3</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737331">return</span>&nbsp;<span class="ident" id="6737338"><a href="/image/gif/writer_test.go.html#6737049">sum</a></span>&nbsp;<span class="op" id="6737342">/</span>&nbsp;<span class="ident" id="6737344"><a href="/image/gif/writer_test.go.html#6737054">n</a></span><br>
<span class="lineno"></span><span class="op" id="6737346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6737349">var</span>&nbsp;<span class="ident" id="6737353">testCase</span>&nbsp;<span class="op" id="6737362">=</span>&nbsp;<span class="op" id="6737364">[</span><span class="op" id="6737365">]</span><span class="keyword" id="6737366">struct</span>&nbsp;<span class="op" id="6737373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737376">filename</span>&nbsp;&nbsp;<span class="builtintype" id="6737386">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737394">tolerance</span>&nbsp;<span class="ident" id="6737404">int64</span><br>
<span class="lineno"></span><span class="op" id="6737410">}</span><span class="op" id="6737411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737414">{</span><span class="string" id="6737415">&#34;../testdata/video-001.png&#34;</span><span class="op" id="6737442">,</span>&nbsp;<span class="num" id="6737444">1</span>&nbsp;<span class="op" id="6737446">&lt;&lt;</span>&nbsp;<span class="num" id="6737449">12</span><span class="op" id="6737451">}</span><span class="op" id="6737452">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737455">{</span><span class="string" id="6737456">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6737483">,</span>&nbsp;<span class="num" id="6737485">0</span><span class="op" id="6737486">}</span><span class="op" id="6737487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737490">{</span><span class="string" id="6737491">&#34;../testdata/video-001.interlaced.gif&#34;</span><span class="op" id="6737529">,</span>&nbsp;<span class="num" id="6737531">0</span><span class="op" id="6737532">}</span><span class="op" id="6737533">,</span><br>
<span class="lineno"></span><span class="op" id="6737535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6737538">func</span>&nbsp;<span class="ident" id="6737543">TestWriter</span><span class="op" id="6737553">(</span><span class="ident" id="6737554">t</span>&nbsp;<span class="op" id="6737556">*</span><span class="ident" id="6737557"><a href="/image/gif/writer_test.go.html#6736425">testing</a></span><span class="op" id="6737564">.</span><span class="ident" id="6737565">T</span><span class="op" id="6737566">)</span>&nbsp;<span class="op" id="6737568">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737571">for</span>&nbsp;<span class="ident" id="6737575">_</span><span class="op" id="6737576">,</span>&nbsp;<span class="ident" id="6737578">tc</span>&nbsp;<span class="op" id="6737581">:=</span>&nbsp;<span class="keyword" id="6737584">range</span>&nbsp;<span class="ident" id="6737590"><a href="/image/gif/writer_test.go.html#6737353">testCase</a></span>&nbsp;<span class="op" id="6737599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737603">m0</span><span class="op" id="6737605">,</span>&nbsp;<span class="ident" id="6737607">err</span>&nbsp;<span class="op" id="6737611">:=</span>&nbsp;<span class="ident" id="6737614"><a href="/image/gif/writer_test.go.html#6736443">readImg</a></span><span class="op" id="6737621">(</span><span class="ident" id="6737622"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6737624">.</span><span class="ident" id="6737625">filename</span><span class="op" id="6737633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737637">if</span>&nbsp;<span class="ident" id="6737640"><a href="/image/gif/writer_test.go.html#6737607">err</a></span>&nbsp;<span class="op" id="6737644">!=</span>&nbsp;<span class="ident" id="6737647">nil</span>&nbsp;<span class="op" id="6737651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737656"><a href="/image/gif/writer_test.go.html#6737554">t</a></span><span class="op" id="6737657">.</span><span class="ident" id="6737658">Error</span><span class="op" id="6737663">(</span><span class="ident" id="6737664"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6737666">.</span><span class="ident" id="6737667">filename</span><span class="op" id="6737675">,</span>&nbsp;<span class="ident" id="6737677"><a href="/image/gif/writer_test.go.html#6737607">err</a></span><span class="op" id="6737680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737685">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737700">var</span>&nbsp;<span class="ident" id="6737704">buf</span>&nbsp;<span class="ident" id="6737708"><a href="/image/gif/writer_test.go.html#6736345">bytes</a></span><span class="op" id="6737713">.</span><span class="ident" id="6737714">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737723"><a href="/image/gif/writer_test.go.html#6737607">err</a></span>&nbsp;<span class="op" id="6737727">=</span>&nbsp;<span class="ident" id="6737729"><a href="/image/gif/writer.go.html#6271701">Encode</a></span><span class="op" id="6737735">(</span><span class="op" id="6737736">&amp;</span><span class="ident" id="6737737"><a href="/image/gif/writer_test.go.html#6737704">buf</a></span><span class="op" id="6737740">,</span>&nbsp;<span class="ident" id="6737742"><a href="/image/gif/writer_test.go.html#6737603">m0</a></span><span class="op" id="6737744">,</span>&nbsp;<span class="ident" id="6737746">nil</span><span class="op" id="6737749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737753">if</span>&nbsp;<span class="ident" id="6737756"><a href="/image/gif/writer_test.go.html#6737607">err</a></span>&nbsp;<span class="op" id="6737760">!=</span>&nbsp;<span class="ident" id="6737763">nil</span>&nbsp;<span class="op" id="6737767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737772"><a href="/image/gif/writer_test.go.html#6737554">t</a></span><span class="op" id="6737773">.</span><span class="ident" id="6737774">Error</span><span class="op" id="6737779">(</span><span class="ident" id="6737780"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6737782">.</span><span class="ident" id="6737783">filename</span><span class="op" id="6737791">,</span>&nbsp;<span class="ident" id="6737793"><a href="/image/gif/writer_test.go.html#6737607">err</a></span><span class="op" id="6737796">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737801">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737816">m1</span><span class="op" id="6737818">,</span>&nbsp;<span class="ident" id="6737820"><a href="/image/gif/writer_test.go.html#6737607">err</a></span>&nbsp;<span class="op" id="6737824">:=</span>&nbsp;<span class="ident" id="6737827"><a href="/image/gif/reader.go.html#6263779">Decode</a></span><span class="op" id="6737833">(</span><span class="op" id="6737834">&amp;</span><span class="ident" id="6737835"><a href="/image/gif/writer_test.go.html#6737704">buf</a></span><span class="op" id="6737838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737842">if</span>&nbsp;<span class="ident" id="6737845"><a href="/image/gif/writer_test.go.html#6737607">err</a></span>&nbsp;<span class="op" id="6737849">!=</span>&nbsp;<span class="ident" id="6737852">nil</span>&nbsp;<span class="op" id="6737856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737861"><a href="/image/gif/writer_test.go.html#6737554">t</a></span><span class="op" id="6737862">.</span><span class="ident" id="6737863">Error</span><span class="op" id="6737868">(</span><span class="ident" id="6737869"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6737871">.</span><span class="ident" id="6737872">filename</span><span class="op" id="6737880">,</span>&nbsp;<span class="ident" id="6737882"><a href="/image/gif/writer_test.go.html#6737607">err</a></span><span class="op" id="6737885">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737890">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6737901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6737905">if</span>&nbsp;<span class="ident" id="6737908"><a href="/image/gif/writer_test.go.html#6737603">m0</a></span><span class="op" id="6737910">.</span><span class="ident" id="6737911">Bounds</span><span class="op" id="6737917">(</span><span class="op" id="6737918">)</span>&nbsp;<span class="op" id="6737920">!=</span>&nbsp;<span class="ident" id="6737923"><a href="/image/gif/writer_test.go.html#6737816">m1</a></span><span class="op" id="6737925">.</span><span class="ident" id="6737926">Bounds</span><span class="op" id="6737932">(</span><span class="op" id="6737933">)</span>&nbsp;<span class="op" id="6737935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6737940"><a href="/image/gif/writer_test.go.html#6737554">t</a></span><span class="op" id="6737941">.</span><span class="ident" id="6737942">Errorf</span><span class="op" id="6737948">(</span><span class="string" id="6737949">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6737979">,</span>&nbsp;<span class="ident" id="6737981"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6737983">.</span><span class="ident" id="6737984">filename</span><span class="op" id="6737992">,</span>&nbsp;<span class="ident" id="6737994"><a href="/image/gif/writer_test.go.html#6737603">m0</a></span><span class="op" id="6737996">.</span><span class="ident" id="6737997">Bounds</span><span class="op" id="6738003">(</span><span class="op" id="6738004">)</span><span class="op" id="6738005">,</span>&nbsp;<span class="ident" id="6738007"><a href="/image/gif/writer_test.go.html#6737816">m1</a></span><span class="op" id="6738009">.</span><span class="ident" id="6738010">Bounds</span><span class="op" id="6738016">(</span><span class="op" id="6738017">)</span><span class="op" id="6738018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738023">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6738038">//&nbsp;Compare&nbsp;the&nbsp;average&nbsp;delta&nbsp;to&nbsp;the&nbsp;tolerance&nbsp;level.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738093">avgDelta</span>&nbsp;<span class="op" id="6738102">:=</span>&nbsp;<span class="ident" id="6738105"><a href="/image/gif/writer_test.go.html#6736985">averageDelta</a></span><span class="op" id="6738117">(</span><span class="ident" id="6738118"><a href="/image/gif/writer_test.go.html#6737603">m0</a></span><span class="op" id="6738120">,</span>&nbsp;<span class="ident" id="6738122"><a href="/image/gif/writer_test.go.html#6737816">m1</a></span><span class="op" id="6738124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738128">if</span>&nbsp;<span class="ident" id="6738131"><a href="/image/gif/writer_test.go.html#6738093">avgDelta</a></span>&nbsp;<span class="op" id="6738140">&gt;</span>&nbsp;<span class="ident" id="6738142"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6738144">.</span><span class="ident" id="6738145">tolerance</span>&nbsp;<span class="op" id="6738155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738160"><a href="/image/gif/writer_test.go.html#6737554">t</a></span><span class="op" id="6738161">.</span><span class="ident" id="6738162">Errorf</span><span class="op" id="6738168">(</span><span class="string" id="6738169">&#34;%s:&nbsp;average&nbsp;delta&nbsp;is&nbsp;too&nbsp;high.&nbsp;expected:&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6738222">,</span>&nbsp;<span class="ident" id="6738224"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6738226">.</span><span class="ident" id="6738227">filename</span><span class="op" id="6738235">,</span>&nbsp;<span class="ident" id="6738237"><a href="/image/gif/writer_test.go.html#6737578">tc</a></span><span class="op" id="6738239">.</span><span class="ident" id="6738240">tolerance</span><span class="op" id="6738249">,</span>&nbsp;<span class="ident" id="6738251"><a href="/image/gif/writer_test.go.html#6738093">avgDelta</a></span><span class="op" id="6738259">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738264">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738278">}</span><br>
<span class="lineno"></span><span class="op" id="6738280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6738283">func</span>&nbsp;<span class="ident" id="6738288">TestSubImage</span><span class="op" id="6738300">(</span><span class="ident" id="6738301">t</span>&nbsp;<span class="op" id="6738303">*</span><span class="ident" id="6738304"><a href="/image/gif/writer_test.go.html#6736425">testing</a></span><span class="op" id="6738311">.</span><span class="ident" id="6738312">T</span><span class="op" id="6738313">)</span>&nbsp;<span class="op" id="6738315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738318">m0</span><span class="op" id="6738320">,</span>&nbsp;<span class="ident" id="6738322">err</span>&nbsp;<span class="op" id="6738326">:=</span>&nbsp;<span class="ident" id="6738329"><a href="/image/gif/writer_test.go.html#6736443">readImg</a></span><span class="op" id="6738336">(</span><span class="string" id="6738337">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6738364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738367">if</span>&nbsp;<span class="ident" id="6738370"><a href="/image/gif/writer_test.go.html#6738322">err</a></span>&nbsp;<span class="op" id="6738374">!=</span>&nbsp;<span class="ident" id="6738377">nil</span>&nbsp;<span class="op" id="6738381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738385"><a href="/image/gif/writer_test.go.html#6738301">t</a></span><span class="op" id="6738386">.</span><span class="ident" id="6738387">Fatalf</span><span class="op" id="6738393">(</span><span class="string" id="6738394">&#34;readImg:&nbsp;%v&#34;</span><span class="op" id="6738407">,</span>&nbsp;<span class="ident" id="6738409"><a href="/image/gif/writer_test.go.html#6738322">err</a></span><span class="op" id="6738412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738415">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738418"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span>&nbsp;<span class="op" id="6738421">=</span>&nbsp;<span class="ident" id="6738423"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span><span class="op" id="6738425">.</span><span class="op" id="6738426">(</span><span class="op" id="6738427">*</span><span class="ident" id="6738428"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6738433">.</span><span class="ident" id="6738434">Paletted</span><span class="op" id="6738442">)</span><span class="op" id="6738443">.</span><span class="ident" id="6738444">SubImage</span><span class="op" id="6738452">(</span><span class="ident" id="6738453"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6738458">.</span><span class="ident" id="6738459">Rect</span><span class="op" id="6738463">(</span><span class="num" id="6738464">0</span><span class="op" id="6738465">,</span>&nbsp;<span class="num" id="6738467">0</span><span class="op" id="6738468">,</span>&nbsp;<span class="num" id="6738470">50</span><span class="op" id="6738472">,</span>&nbsp;<span class="num" id="6738474">30</span><span class="op" id="6738476">)</span><span class="op" id="6738477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738480">var</span>&nbsp;<span class="ident" id="6738484">buf</span>&nbsp;<span class="ident" id="6738488"><a href="/image/gif/writer_test.go.html#6736345">bytes</a></span><span class="op" id="6738493">.</span><span class="ident" id="6738494">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738502"><a href="/image/gif/writer_test.go.html#6738322">err</a></span>&nbsp;<span class="op" id="6738506">=</span>&nbsp;<span class="ident" id="6738508"><a href="/image/gif/writer.go.html#6271701">Encode</a></span><span class="op" id="6738514">(</span><span class="op" id="6738515">&amp;</span><span class="ident" id="6738516"><a href="/image/gif/writer_test.go.html#6738484">buf</a></span><span class="op" id="6738519">,</span>&nbsp;<span class="ident" id="6738521"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span><span class="op" id="6738523">,</span>&nbsp;<span class="ident" id="6738525">nil</span><span class="op" id="6738528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738531">if</span>&nbsp;<span class="ident" id="6738534"><a href="/image/gif/writer_test.go.html#6738322">err</a></span>&nbsp;<span class="op" id="6738538">!=</span>&nbsp;<span class="ident" id="6738541">nil</span>&nbsp;<span class="op" id="6738545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738549"><a href="/image/gif/writer_test.go.html#6738301">t</a></span><span class="op" id="6738550">.</span><span class="ident" id="6738551">Fatalf</span><span class="op" id="6738557">(</span><span class="string" id="6738558">&#34;Encode:&nbsp;%v&#34;</span><span class="op" id="6738570">,</span>&nbsp;<span class="ident" id="6738572"><a href="/image/gif/writer_test.go.html#6738322">err</a></span><span class="op" id="6738575">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738581">m1</span><span class="op" id="6738583">,</span>&nbsp;<span class="ident" id="6738585"><a href="/image/gif/writer_test.go.html#6738322">err</a></span>&nbsp;<span class="op" id="6738589">:=</span>&nbsp;<span class="ident" id="6738592"><a href="/image/gif/reader.go.html#6263779">Decode</a></span><span class="op" id="6738598">(</span><span class="op" id="6738599">&amp;</span><span class="ident" id="6738600"><a href="/image/gif/writer_test.go.html#6738484">buf</a></span><span class="op" id="6738603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738606">if</span>&nbsp;<span class="ident" id="6738609"><a href="/image/gif/writer_test.go.html#6738322">err</a></span>&nbsp;<span class="op" id="6738613">!=</span>&nbsp;<span class="ident" id="6738616">nil</span>&nbsp;<span class="op" id="6738620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738624"><a href="/image/gif/writer_test.go.html#6738301">t</a></span><span class="op" id="6738625">.</span><span class="ident" id="6738626">Fatalf</span><span class="op" id="6738632">(</span><span class="string" id="6738633">&#34;Decode:&nbsp;%v&#34;</span><span class="op" id="6738645">,</span>&nbsp;<span class="ident" id="6738647"><a href="/image/gif/writer_test.go.html#6738322">err</a></span><span class="op" id="6738650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738653">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738656">if</span>&nbsp;<span class="ident" id="6738659"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span><span class="op" id="6738661">.</span><span class="ident" id="6738662">Bounds</span><span class="op" id="6738668">(</span><span class="op" id="6738669">)</span>&nbsp;<span class="op" id="6738671">!=</span>&nbsp;<span class="ident" id="6738674"><a href="/image/gif/writer_test.go.html#6738581">m1</a></span><span class="op" id="6738676">.</span><span class="ident" id="6738677">Bounds</span><span class="op" id="6738683">(</span><span class="op" id="6738684">)</span>&nbsp;<span class="op" id="6738686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738690"><a href="/image/gif/writer_test.go.html#6738301">t</a></span><span class="op" id="6738691">.</span><span class="ident" id="6738692">Fatalf</span><span class="op" id="6738698">(</span><span class="string" id="6738699">&#34;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6738725">,</span>&nbsp;<span class="ident" id="6738727"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span><span class="op" id="6738729">.</span><span class="ident" id="6738730">Bounds</span><span class="op" id="6738736">(</span><span class="op" id="6738737">)</span><span class="op" id="6738738">,</span>&nbsp;<span class="ident" id="6738740"><a href="/image/gif/writer_test.go.html#6738581">m1</a></span><span class="op" id="6738742">.</span><span class="ident" id="6738743">Bounds</span><span class="op" id="6738749">(</span><span class="op" id="6738750">)</span><span class="op" id="6738751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738754">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6738757">if</span>&nbsp;<span class="ident" id="6738760"><a href="/image/gif/writer_test.go.html#6736985">averageDelta</a></span><span class="op" id="6738772">(</span><span class="ident" id="6738773"><a href="/image/gif/writer_test.go.html#6738318">m0</a></span><span class="op" id="6738775">,</span>&nbsp;<span class="ident" id="6738777"><a href="/image/gif/writer_test.go.html#6738581">m1</a></span><span class="op" id="6738779">)</span>&nbsp;<span class="op" id="6738781">!=</span>&nbsp;<span class="num" id="6738784">0</span>&nbsp;<span class="op" id="6738786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738790"><a href="/image/gif/writer_test.go.html#6738301">t</a></span><span class="op" id="6738791">.</span><span class="ident" id="6738792">Fatalf</span><span class="op" id="6738798">(</span><span class="string" id="6738799">&#34;images&nbsp;differ&#34;</span><span class="op" id="6738814">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6738817">}</span><br>
<span class="lineno"></span><span class="op" id="6738819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738822">var</span>&nbsp;<span class="ident" id="6738826">frames</span>&nbsp;<span class="op" id="6738833">=</span>&nbsp;<span class="op" id="6738835">[</span><span class="op" id="6738836">]</span><span class="builtintype" id="6738837">string</span><span class="op" id="6738843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6738846">&#34;../testdata/video-001.gif&#34;</span><span class="op" id="6738873">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6738876">&#34;../testdata/video-005.gray.gif&#34;</span><span class="op" id="6738908">,</span><br>
<span class="lineno"></span><span class="op" id="6738910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6738913">func</span>&nbsp;<span class="ident" id="6738918">TestEncodeAll</span><span class="op" id="6738931">(</span><span class="ident" id="6738932">t</span>&nbsp;<span class="op" id="6738934">*</span><span class="ident" id="6738935"><a href="/image/gif/writer_test.go.html#6736425">testing</a></span><span class="op" id="6738942">.</span><span class="ident" id="6738943">T</span><span class="op" id="6738944">)</span>&nbsp;<span class="op" id="6738946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738949">g0</span>&nbsp;<span class="op" id="6738952">:=</span>&nbsp;<span class="op" id="6738955">&amp;</span><span class="ident" id="6738956"><a href="/image/gif/reader.go.html#6264003">GIF</a></span><span class="op" id="6738959">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6738963">Image</span><span class="op" id="6738968">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6738974">make</span><span class="op" id="6738978">(</span><span class="op" id="6738979">[</span><span class="op" id="6738980">]</span><span class="op" id="6738981">*</span><span class="ident" id="6738982"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6738987">.</span><span class="ident" id="6738988">Paletted</span><span class="op" id="6738996">,</span>&nbsp;<span class="builtinfunc" id="6738998">len</span><span class="op" id="6739001">(</span><span class="ident" id="6739002"><a href="/image/gif/writer_test.go.html#6738826">frames</a></span><span class="op" id="6739008">)</span><span class="op" id="6739009">)</span><span class="op" id="6739010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739014">Delay</span><span class="op" id="6739019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6739025">make</span><span class="op" id="6739029">(</span><span class="op" id="6739030">[</span><span class="op" id="6739031">]</span><span class="builtintype" id="6739032">int</span><span class="op" id="6739035">,</span>&nbsp;<span class="builtinfunc" id="6739037">len</span><span class="op" id="6739040">(</span><span class="ident" id="6739041"><a href="/image/gif/writer_test.go.html#6738826">frames</a></span><span class="op" id="6739047">)</span><span class="op" id="6739048">)</span><span class="op" id="6739049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739053">LoopCount</span><span class="op" id="6739062">:</span>&nbsp;<span class="num" id="6739064">5</span><span class="op" id="6739065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739071">for</span>&nbsp;<span class="ident" id="6739075">i</span><span class="op" id="6739076">,</span>&nbsp;<span class="ident" id="6739078">f</span>&nbsp;<span class="op" id="6739080">:=</span>&nbsp;<span class="keyword" id="6739083">range</span>&nbsp;<span class="ident" id="6739089"><a href="/image/gif/writer_test.go.html#6738826">frames</a></span>&nbsp;<span class="op" id="6739096">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739100">m</span><span class="op" id="6739101">,</span>&nbsp;<span class="ident" id="6739103">err</span>&nbsp;<span class="op" id="6739107">:=</span>&nbsp;<span class="ident" id="6739110"><a href="/image/gif/writer_test.go.html#6736628">readGIF</a></span><span class="op" id="6739117">(</span><span class="ident" id="6739118"><a href="/image/gif/writer_test.go.html#6739078">f</a></span><span class="op" id="6739119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739123">if</span>&nbsp;<span class="ident" id="6739126"><a href="/image/gif/writer_test.go.html#6739103">err</a></span>&nbsp;<span class="op" id="6739130">!=</span>&nbsp;<span class="ident" id="6739133">nil</span>&nbsp;<span class="op" id="6739137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739142"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739143">.</span><span class="ident" id="6739144">Fatal</span><span class="op" id="6739149">(</span><span class="ident" id="6739150"><a href="/image/gif/writer_test.go.html#6739078">f</a></span><span class="op" id="6739151">,</span>&nbsp;<span class="ident" id="6739153"><a href="/image/gif/writer_test.go.html#6739103">err</a></span><span class="op" id="6739156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739164"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739166">.</span><span class="ident" id="6739167">Image</span><span class="op" id="6739172">[</span><span class="ident" id="6739173"><a href="/image/gif/writer_test.go.html#6739075">i</a></span><span class="op" id="6739174">]</span>&nbsp;<span class="op" id="6739176">=</span>&nbsp;<span class="ident" id="6739178"><a href="/image/gif/writer_test.go.html#6739100">m</a></span><span class="op" id="6739179">.</span><span class="ident" id="6739180">Image</span><span class="op" id="6739185">[</span><span class="num" id="6739186">0</span><span class="op" id="6739187">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739193">var</span>&nbsp;<span class="ident" id="6739197">buf</span>&nbsp;<span class="ident" id="6739201"><a href="/image/gif/writer_test.go.html#6736345">bytes</a></span><span class="op" id="6739206">.</span><span class="ident" id="6739207">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739215">if</span>&nbsp;<span class="ident" id="6739218">err</span>&nbsp;<span class="op" id="6739222">:=</span>&nbsp;<span class="ident" id="6739225"><a href="/image/gif/writer.go.html#6271135">EncodeAll</a></span><span class="op" id="6739234">(</span><span class="op" id="6739235">&amp;</span><span class="ident" id="6739236"><a href="/image/gif/writer_test.go.html#6739197">buf</a></span><span class="op" id="6739239">,</span>&nbsp;<span class="ident" id="6739241"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739243">)</span><span class="op" id="6739244">;</span>&nbsp;<span class="ident" id="6739246"><a href="/image/gif/writer_test.go.html#6739218">err</a></span>&nbsp;<span class="op" id="6739250">!=</span>&nbsp;<span class="ident" id="6739253">nil</span>&nbsp;<span class="op" id="6739257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739261"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739262">.</span><span class="ident" id="6739263">Fatal</span><span class="op" id="6739268">(</span><span class="string" id="6739269">&#34;EncodeAll:&#34;</span><span class="op" id="6739281">,</span>&nbsp;<span class="ident" id="6739283"><a href="/image/gif/writer_test.go.html#6739218">err</a></span><span class="op" id="6739286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739289">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739292">g1</span><span class="op" id="6739294">,</span>&nbsp;<span class="ident" id="6739296">err</span>&nbsp;<span class="op" id="6739300">:=</span>&nbsp;<span class="ident" id="6739303"><a href="/image/gif/reader.go.html#6264324">DecodeAll</a></span><span class="op" id="6739312">(</span><span class="op" id="6739313">&amp;</span><span class="ident" id="6739314"><a href="/image/gif/writer_test.go.html#6739197">buf</a></span><span class="op" id="6739317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739320">if</span>&nbsp;<span class="ident" id="6739323"><a href="/image/gif/writer_test.go.html#6739296">err</a></span>&nbsp;<span class="op" id="6739327">!=</span>&nbsp;<span class="ident" id="6739330">nil</span>&nbsp;<span class="op" id="6739334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739338"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739339">.</span><span class="ident" id="6739340">Fatal</span><span class="op" id="6739345">(</span><span class="string" id="6739346">&#34;DecodeAll:&#34;</span><span class="op" id="6739358">,</span>&nbsp;<span class="ident" id="6739360"><a href="/image/gif/writer_test.go.html#6739296">err</a></span><span class="op" id="6739363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739369">if</span>&nbsp;<span class="ident" id="6739372"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739374">.</span><span class="ident" id="6739375">LoopCount</span>&nbsp;<span class="op" id="6739385">!=</span>&nbsp;<span class="ident" id="6739388"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739390">.</span><span class="ident" id="6739391">LoopCount</span>&nbsp;<span class="op" id="6739401">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739405"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739406">.</span><span class="ident" id="6739407">Errorf</span><span class="op" id="6739413">(</span><span class="string" id="6739414">&#34;loop&nbsp;counts&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="6739445">,</span>&nbsp;<span class="ident" id="6739447"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739449">.</span><span class="ident" id="6739450">LoopCount</span><span class="op" id="6739459">,</span>&nbsp;<span class="ident" id="6739461"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739463">.</span><span class="ident" id="6739464">LoopCount</span><span class="op" id="6739473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739479">for</span>&nbsp;<span class="ident" id="6739483">i</span>&nbsp;<span class="op" id="6739485">:=</span>&nbsp;<span class="keyword" id="6739488">range</span>&nbsp;<span class="ident" id="6739494"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739496">.</span><span class="ident" id="6739497">Image</span>&nbsp;<span class="op" id="6739503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739507">m0</span><span class="op" id="6739509">,</span>&nbsp;<span class="ident" id="6739511">m1</span>&nbsp;<span class="op" id="6739514">:=</span>&nbsp;<span class="ident" id="6739517"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739519">.</span><span class="ident" id="6739520">Image</span><span class="op" id="6739525">[</span><span class="ident" id="6739526"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739527">]</span><span class="op" id="6739528">,</span>&nbsp;<span class="ident" id="6739530"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739532">.</span><span class="ident" id="6739533">Image</span><span class="op" id="6739538">[</span><span class="ident" id="6739539"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739540">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739544">if</span>&nbsp;<span class="ident" id="6739547"><a href="/image/gif/writer_test.go.html#6739507">m0</a></span><span class="op" id="6739549">.</span><span class="ident" id="6739550">Bounds</span><span class="op" id="6739556">(</span><span class="op" id="6739557">)</span>&nbsp;<span class="op" id="6739559">!=</span>&nbsp;<span class="ident" id="6739562"><a href="/image/gif/writer_test.go.html#6739511">m1</a></span><span class="op" id="6739564">.</span><span class="ident" id="6739565">Bounds</span><span class="op" id="6739571">(</span><span class="op" id="6739572">)</span>&nbsp;<span class="op" id="6739574">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739579"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739580">.</span><span class="ident" id="6739581">Errorf</span><span class="op" id="6739587">(</span><span class="string" id="6739588">&#34;%s,&nbsp;bounds&nbsp;differ:&nbsp;%v&nbsp;and&nbsp;%v&#34;</span><span class="op" id="6739618">,</span>&nbsp;<span class="ident" id="6739620"><a href="/image/gif/writer_test.go.html#6738826">frames</a></span><span class="op" id="6739626">[</span><span class="ident" id="6739627"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739628">]</span><span class="op" id="6739629">,</span>&nbsp;<span class="ident" id="6739631"><a href="/image/gif/writer_test.go.html#6739507">m0</a></span><span class="op" id="6739633">.</span><span class="ident" id="6739634">Bounds</span><span class="op" id="6739640">(</span><span class="op" id="6739641">)</span><span class="op" id="6739642">,</span>&nbsp;<span class="ident" id="6739644"><a href="/image/gif/writer_test.go.html#6739511">m1</a></span><span class="op" id="6739646">.</span><span class="ident" id="6739647">Bounds</span><span class="op" id="6739653">(</span><span class="op" id="6739654">)</span><span class="op" id="6739655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739663">d0</span><span class="op" id="6739665">,</span>&nbsp;<span class="ident" id="6739667">d1</span>&nbsp;<span class="op" id="6739670">:=</span>&nbsp;<span class="ident" id="6739673"><a href="/image/gif/writer_test.go.html#6738949">g0</a></span><span class="op" id="6739675">.</span><span class="ident" id="6739676">Delay</span><span class="op" id="6739681">[</span><span class="ident" id="6739682"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739683">]</span><span class="op" id="6739684">,</span>&nbsp;<span class="ident" id="6739686"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739688">.</span><span class="ident" id="6739689">Delay</span><span class="op" id="6739694">[</span><span class="ident" id="6739695"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739696">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739700">if</span>&nbsp;<span class="ident" id="6739703"><a href="/image/gif/writer_test.go.html#6739663">d0</a></span>&nbsp;<span class="op" id="6739706">!=</span>&nbsp;<span class="ident" id="6739709"><a href="/image/gif/writer_test.go.html#6739667">d1</a></span>&nbsp;<span class="op" id="6739712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739717"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739718">.</span><span class="ident" id="6739719">Errorf</span><span class="op" id="6739725">(</span><span class="string" id="6739726">&#34;%s:&nbsp;delay&nbsp;values&nbsp;differ:&nbsp;%d&nbsp;and&nbsp;%d&#34;</span><span class="op" id="6739762">,</span>&nbsp;<span class="ident" id="6739764"><a href="/image/gif/writer_test.go.html#6738826">frames</a></span><span class="op" id="6739770">[</span><span class="ident" id="6739771"><a href="/image/gif/writer_test.go.html#6739483">i</a></span><span class="op" id="6739772">]</span><span class="op" id="6739773">,</span>&nbsp;<span class="ident" id="6739775"><a href="/image/gif/writer_test.go.html#6739663">d0</a></span><span class="op" id="6739777">,</span>&nbsp;<span class="ident" id="6739779"><a href="/image/gif/writer_test.go.html#6739667">d1</a></span><span class="op" id="6739781">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739792"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739794">.</span><span class="ident" id="6739795">Delay</span>&nbsp;<span class="op" id="6739801">=</span>&nbsp;<span class="builtinfunc" id="6739803">make</span><span class="op" id="6739807">(</span><span class="op" id="6739808">[</span><span class="op" id="6739809">]</span><span class="builtintype" id="6739810">int</span><span class="op" id="6739813">,</span>&nbsp;<span class="num" id="6739815">1</span><span class="op" id="6739816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739819">if</span>&nbsp;<span class="ident" id="6739822">err</span>&nbsp;<span class="op" id="6739826">:=</span>&nbsp;<span class="ident" id="6739829"><a href="/image/gif/writer.go.html#6271135">EncodeAll</a></span><span class="op" id="6739838">(</span><span class="ident" id="6739839"><a href="/image/gif/writer_test.go.html#6736393">ioutil</a></span><span class="op" id="6739845">.</span><span class="ident" id="6739846">Discard</span><span class="op" id="6739853">,</span>&nbsp;<span class="ident" id="6739855"><a href="/image/gif/writer_test.go.html#6739292">g1</a></span><span class="op" id="6739857">)</span><span class="op" id="6739858">;</span>&nbsp;<span class="ident" id="6739860"><a href="/image/gif/writer_test.go.html#6739822">err</a></span>&nbsp;<span class="op" id="6739864">==</span>&nbsp;<span class="ident" id="6739867">nil</span>&nbsp;<span class="op" id="6739871">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6739875"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6739876">.</span><span class="ident" id="6739877">Error</span><span class="op" id="6739882">(</span><span class="string" id="6739883">&#34;expected&nbsp;error&nbsp;from&nbsp;mismatched&nbsp;delay&nbsp;and&nbsp;image&nbsp;slice&nbsp;lengths&#34;</span><span class="op" id="6739945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6739948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6739951">if</span>&nbsp;<span class="ident" id="6739954">err</span>&nbsp;<span class="op" id="6739958">:=</span>&nbsp;<span class="ident" id="6739961"><a href="/image/gif/writer.go.html#6271135">EncodeAll</a></span><span class="op" id="6739970">(</span><span class="ident" id="6739971"><a href="/image/gif/writer_test.go.html#6736393">ioutil</a></span><span class="op" id="6739977">.</span><span class="ident" id="6739978">Discard</span><span class="op" id="6739985">,</span>&nbsp;<span class="op" id="6739987">&amp;</span><span class="ident" id="6739988"><a href="/image/gif/reader.go.html#6264003">GIF</a></span><span class="op" id="6739991">{</span><span class="op" id="6739992">}</span><span class="op" id="6739993">)</span><span class="op" id="6739994">;</span>&nbsp;<span class="ident" id="6739996"><a href="/image/gif/writer_test.go.html#6739954">err</a></span>&nbsp;<span class="op" id="6740000">==</span>&nbsp;<span class="ident" id="6740003">nil</span>&nbsp;<span class="op" id="6740007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740011"><a href="/image/gif/writer_test.go.html#6738932">t</a></span><span class="op" id="6740012">.</span><span class="ident" id="6740013">Error</span><span class="op" id="6740018">(</span><span class="string" id="6740019">&#34;expected&nbsp;error&nbsp;from&nbsp;providing&nbsp;empty&nbsp;gif&#34;</span><span class="op" id="6740060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740063">}</span><br>
<span class="lineno">175</span><span class="op" id="6740065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6740068">func</span>&nbsp;<span class="ident" id="6740073">BenchmarkEncode</span><span class="op" id="6740088">(</span><span class="ident" id="6740089">b</span>&nbsp;<span class="op" id="6740091">*</span><span class="ident" id="6740092"><a href="/image/gif/writer_test.go.html#6736425">testing</a></span><span class="op" id="6740099">.</span><span class="ident" id="6740100">B</span><span class="op" id="6740101">)</span>&nbsp;<span class="op" id="6740103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740106"><a href="/image/gif/writer_test.go.html#6740089">b</a></span><span class="op" id="6740107">.</span><span class="ident" id="6740108">StopTimer</span><span class="op" id="6740117">(</span><span class="op" id="6740118">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740122">bo</span>&nbsp;<span class="op" id="6740125">:=</span>&nbsp;<span class="ident" id="6740128"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6740133">.</span><span class="ident" id="6740134">Rect</span><span class="op" id="6740138">(</span><span class="num" id="6740139">0</span><span class="op" id="6740140">,</span>&nbsp;<span class="num" id="6740142">0</span><span class="op" id="6740143">,</span>&nbsp;<span class="num" id="6740145">640</span><span class="op" id="6740148">,</span>&nbsp;<span class="num" id="6740150">480</span><span class="op" id="6740153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740156">rnd</span>&nbsp;<span class="op" id="6740160">:=</span>&nbsp;<span class="ident" id="6740163"><a href="/image/gif/writer_test.go.html#6736406">rand</a></span><span class="op" id="6740167">.</span><span class="ident" id="6740168">New</span><span class="op" id="6740171">(</span><span class="ident" id="6740172"><a href="/image/gif/writer_test.go.html#6736406">rand</a></span><span class="op" id="6740176">.</span><span class="ident" id="6740177">NewSource</span><span class="op" id="6740186">(</span><span class="num" id="6740187">123</span><span class="op" id="6740190">)</span><span class="op" id="6740191">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6740195">//&nbsp;Restrict&nbsp;to&nbsp;a&nbsp;256-color&nbsp;paletted&nbsp;image&nbsp;to&nbsp;avoid&nbsp;quantization&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740266">palette</span>&nbsp;<span class="op" id="6740274">:=</span>&nbsp;<span class="builtinfunc" id="6740277">make</span><span class="op" id="6740281">(</span><span class="ident" id="6740282"><a href="/image/gif/writer_test.go.html#6736363">color</a></span><span class="op" id="6740287">.</span><span class="ident" id="6740288">Palette</span><span class="op" id="6740295">,</span>&nbsp;<span class="num" id="6740297">256</span><span class="op" id="6740300">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740303">for</span>&nbsp;<span class="ident" id="6740307">i</span>&nbsp;<span class="op" id="6740309">:=</span>&nbsp;<span class="keyword" id="6740312">range</span>&nbsp;<span class="ident" id="6740318"><a href="/image/gif/writer_test.go.html#6740266">palette</a></span>&nbsp;<span class="op" id="6740326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740330"><a href="/image/gif/writer_test.go.html#6740266">palette</a></span><span class="op" id="6740337">[</span><span class="ident" id="6740338"><a href="/image/gif/writer_test.go.html#6740307">i</a></span><span class="op" id="6740339">]</span>&nbsp;<span class="op" id="6740341">=</span>&nbsp;<span class="ident" id="6740343"><a href="/image/gif/writer_test.go.html#6736363">color</a></span><span class="op" id="6740348">.</span><span class="ident" id="6740349">RGBA</span><span class="op" id="6740353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6740358">uint8</span><span class="op" id="6740363">(</span><span class="ident" id="6740364"><a href="/image/gif/writer_test.go.html#6740156">rnd</a></span><span class="op" id="6740367">.</span><span class="ident" id="6740368">Intn</span><span class="op" id="6740372">(</span><span class="num" id="6740373">256</span><span class="op" id="6740376">)</span><span class="op" id="6740377">)</span><span class="op" id="6740378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6740383">uint8</span><span class="op" id="6740388">(</span><span class="ident" id="6740389"><a href="/image/gif/writer_test.go.html#6740156">rnd</a></span><span class="op" id="6740392">.</span><span class="ident" id="6740393">Intn</span><span class="op" id="6740397">(</span><span class="num" id="6740398">256</span><span class="op" id="6740401">)</span><span class="op" id="6740402">)</span><span class="op" id="6740403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6740408">uint8</span><span class="op" id="6740413">(</span><span class="ident" id="6740414"><a href="/image/gif/writer_test.go.html#6740156">rnd</a></span><span class="op" id="6740417">.</span><span class="ident" id="6740418">Intn</span><span class="op" id="6740422">(</span><span class="num" id="6740423">256</span><span class="op" id="6740426">)</span><span class="op" id="6740427">)</span><span class="op" id="6740428">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6740433">255</span><span class="op" id="6740436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740446">img</span>&nbsp;<span class="op" id="6740450">:=</span>&nbsp;<span class="ident" id="6740453"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6740458">.</span><span class="ident" id="6740459">NewPaletted</span><span class="op" id="6740470">(</span><span class="ident" id="6740471"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6740476">.</span><span class="ident" id="6740477">Rect</span><span class="op" id="6740481">(</span><span class="num" id="6740482">0</span><span class="op" id="6740483">,</span>&nbsp;<span class="num" id="6740485">0</span><span class="op" id="6740486">,</span>&nbsp;<span class="num" id="6740488">640</span><span class="op" id="6740491">,</span>&nbsp;<span class="num" id="6740493">480</span><span class="op" id="6740496">)</span><span class="op" id="6740497">,</span>&nbsp;<span class="ident" id="6740499"><a href="/image/gif/writer_test.go.html#6740266">palette</a></span><span class="op" id="6740506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740509">for</span>&nbsp;<span class="ident" id="6740513">y</span>&nbsp;<span class="op" id="6740515">:=</span>&nbsp;<span class="ident" id="6740518"><a href="/image/gif/writer_test.go.html#6740122">bo</a></span><span class="op" id="6740520">.</span><span class="ident" id="6740521">Min</span><span class="op" id="6740524">.</span><span class="ident" id="6740525">Y</span><span class="op" id="6740526">;</span>&nbsp;<span class="ident" id="6740528"><a href="/image/gif/writer_test.go.html#6740513">y</a></span>&nbsp;<span class="op" id="6740530">&lt;</span>&nbsp;<span class="ident" id="6740532"><a href="/image/gif/writer_test.go.html#6740122">bo</a></span><span class="op" id="6740534">.</span><span class="ident" id="6740535">Max</span><span class="op" id="6740538">.</span><span class="ident" id="6740539">Y</span><span class="op" id="6740540">;</span>&nbsp;<span class="ident" id="6740542"><a href="/image/gif/writer_test.go.html#6740513">y</a></span><span class="op" id="6740543">++</span>&nbsp;<span class="op" id="6740546">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740550">for</span>&nbsp;<span class="ident" id="6740554">x</span>&nbsp;<span class="op" id="6740556">:=</span>&nbsp;<span class="ident" id="6740559"><a href="/image/gif/writer_test.go.html#6740122">bo</a></span><span class="op" id="6740561">.</span><span class="ident" id="6740562">Min</span><span class="op" id="6740565">.</span><span class="ident" id="6740566">X</span><span class="op" id="6740567">;</span>&nbsp;<span class="ident" id="6740569"><a href="/image/gif/writer_test.go.html#6740554">x</a></span>&nbsp;<span class="op" id="6740571">&lt;</span>&nbsp;<span class="ident" id="6740573"><a href="/image/gif/writer_test.go.html#6740122">bo</a></span><span class="op" id="6740575">.</span><span class="ident" id="6740576">Max</span><span class="op" id="6740579">.</span><span class="ident" id="6740580">X</span><span class="op" id="6740581">;</span>&nbsp;<span class="ident" id="6740583"><a href="/image/gif/writer_test.go.html#6740554">x</a></span><span class="op" id="6740584">++</span>&nbsp;<span class="op" id="6740587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740592"><a href="/image/gif/writer_test.go.html#6740446">img</a></span><span class="op" id="6740595">.</span><span class="ident" id="6740596">Set</span><span class="op" id="6740599">(</span><span class="ident" id="6740600"><a href="/image/gif/writer_test.go.html#6740554">x</a></span><span class="op" id="6740601">,</span>&nbsp;<span class="ident" id="6740603"><a href="/image/gif/writer_test.go.html#6740513">y</a></span><span class="op" id="6740604">,</span>&nbsp;<span class="ident" id="6740606"><a href="/image/gif/writer_test.go.html#6740266">palette</a></span><span class="op" id="6740613">[</span><span class="ident" id="6740614"><a href="/image/gif/writer_test.go.html#6740156">rnd</a></span><span class="op" id="6740617">.</span><span class="ident" id="6740618">Intn</span><span class="op" id="6740622">(</span><span class="num" id="6740623">256</span><span class="op" id="6740626">)</span><span class="op" id="6740627">]</span><span class="op" id="6740628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740639"><a href="/image/gif/writer_test.go.html#6740089">b</a></span><span class="op" id="6740640">.</span><span class="ident" id="6740641">SetBytes</span><span class="op" id="6740649">(</span><span class="num" id="6740650">640</span>&nbsp;<span class="op" id="6740654">*</span>&nbsp;<span class="num" id="6740656">480</span>&nbsp;<span class="op" id="6740660">*</span>&nbsp;<span class="num" id="6740662">4</span><span class="op" id="6740663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740666"><a href="/image/gif/writer_test.go.html#6740089">b</a></span><span class="op" id="6740667">.</span><span class="ident" id="6740668">StartTimer</span><span class="op" id="6740678">(</span><span class="op" id="6740679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740682">for</span>&nbsp;<span class="ident" id="6740686">i</span>&nbsp;<span class="op" id="6740688">:=</span>&nbsp;<span class="num" id="6740691">0</span><span class="op" id="6740692">;</span>&nbsp;<span class="ident" id="6740694"><a href="/image/gif/writer_test.go.html#6740686">i</a></span>&nbsp;<span class="op" id="6740696">&lt;</span>&nbsp;<span class="ident" id="6740698"><a href="/image/gif/writer_test.go.html#6740089">b</a></span><span class="op" id="6740699">.</span><span class="ident" id="6740700">N</span><span class="op" id="6740701">;</span>&nbsp;<span class="ident" id="6740703"><a href="/image/gif/writer_test.go.html#6740686">i</a></span><span class="op" id="6740704">++</span>&nbsp;<span class="op" id="6740707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740711"><a href="/image/gif/writer.go.html#6271701">Encode</a></span><span class="op" id="6740717">(</span><span class="ident" id="6740718"><a href="/image/gif/writer_test.go.html#6736393">ioutil</a></span><span class="op" id="6740724">.</span><span class="ident" id="6740725">Discard</span><span class="op" id="6740732">,</span>&nbsp;<span class="ident" id="6740734"><a href="/image/gif/writer_test.go.html#6740446">img</a></span><span class="op" id="6740737">,</span>&nbsp;<span class="ident" id="6740739">nil</span><span class="op" id="6740742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6740745">}</span><br>
<span class="lineno">205</span><span class="op" id="6740747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6740750">func</span>&nbsp;<span class="ident" id="6740755">BenchmarkQuantizedEncode</span><span class="op" id="6740779">(</span><span class="ident" id="6740780">b</span>&nbsp;<span class="op" id="6740782">*</span><span class="ident" id="6740783"><a href="/image/gif/writer_test.go.html#6736425">testing</a></span><span class="op" id="6740790">.</span><span class="ident" id="6740791">B</span><span class="op" id="6740792">)</span>&nbsp;<span class="op" id="6740794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740797"><a href="/image/gif/writer_test.go.html#6740780">b</a></span><span class="op" id="6740798">.</span><span class="ident" id="6740799">StopTimer</span><span class="op" id="6740808">(</span><span class="op" id="6740809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740812">img</span>&nbsp;<span class="op" id="6740816">:=</span>&nbsp;<span class="ident" id="6740819"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6740824">.</span><span class="ident" id="6740825">NewRGBA</span><span class="op" id="6740832">(</span><span class="ident" id="6740833"><a href="/image/gif/writer_test.go.html#6736354">image</a></span><span class="op" id="6740838">.</span><span class="ident" id="6740839">Rect</span><span class="op" id="6740843">(</span><span class="num" id="6740844">0</span><span class="op" id="6740845">,</span>&nbsp;<span class="num" id="6740847">0</span><span class="op" id="6740848">,</span>&nbsp;<span class="num" id="6740850">640</span><span class="op" id="6740853">,</span>&nbsp;<span class="num" id="6740855">480</span><span class="op" id="6740858">)</span><span class="op" id="6740859">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740862">bo</span>&nbsp;<span class="op" id="6740865">:=</span>&nbsp;<span class="ident" id="6740868"><a href="/image/gif/writer_test.go.html#6740812">img</a></span><span class="op" id="6740871">.</span><span class="ident" id="6740872">Bounds</span><span class="op" id="6740878">(</span><span class="op" id="6740879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6740882">rnd</span>&nbsp;<span class="op" id="6740886">:=</span>&nbsp;<span class="ident" id="6740889"><a href="/image/gif/writer_test.go.html#6736406">rand</a></span><span class="op" id="6740893">.</span><span class="ident" id="6740894">New</span><span class="op" id="6740897">(</span><span class="ident" id="6740898"><a href="/image/gif/writer_test.go.html#6736406">rand</a></span><span class="op" id="6740902">.</span><span class="ident" id="6740903">NewSource</span><span class="op" id="6740912">(</span><span class="num" id="6740913">123</span><span class="op" id="6740916">)</span><span class="op" id="6740917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740920">for</span>&nbsp;<span class="ident" id="6740924">y</span>&nbsp;<span class="op" id="6740926">:=</span>&nbsp;<span class="ident" id="6740929"><a href="/image/gif/writer_test.go.html#6740862">bo</a></span><span class="op" id="6740931">.</span><span class="ident" id="6740932">Min</span><span class="op" id="6740935">.</span><span class="ident" id="6740936">Y</span><span class="op" id="6740937">;</span>&nbsp;<span class="ident" id="6740939"><a href="/image/gif/writer_test.go.html#6740924">y</a></span>&nbsp;<span class="op" id="6740941">&lt;</span>&nbsp;<span class="ident" id="6740943"><a href="/image/gif/writer_test.go.html#6740862">bo</a></span><span class="op" id="6740945">.</span><span class="ident" id="6740946">Max</span><span class="op" id="6740949">.</span><span class="ident" id="6740950">Y</span><span class="op" id="6740951">;</span>&nbsp;<span class="ident" id="6740953"><a href="/image/gif/writer_test.go.html#6740924">y</a></span><span class="op" id="6740954">++</span>&nbsp;<span class="op" id="6740957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6740961">for</span>&nbsp;<span class="ident" id="6740965">x</span>&nbsp;<span class="op" id="6740967">:=</span>&nbsp;<span class="ident" id="6740970"><a href="/image/gif/writer_test.go.html#6740862">bo</a></span><span class="op" id="6740972">.</span><span class="ident" id="6740973">Min</span><span class="op" id="6740976">.</span><span class="ident" id="6740977">X</span><span class="op" id="6740978">;</span>&nbsp;<span class="ident" id="6740980"><a href="/image/gif/writer_test.go.html#6740965">x</a></span>&nbsp;<span class="op" id="6740982">&lt;</span>&nbsp;<span class="ident" id="6740984"><a href="/image/gif/writer_test.go.html#6740862">bo</a></span><span class="op" id="6740986">.</span><span class="ident" id="6740987">Max</span><span class="op" id="6740990">.</span><span class="ident" id="6740991">X</span><span class="op" id="6740992">;</span>&nbsp;<span class="ident" id="6740994"><a href="/image/gif/writer_test.go.html#6740965">x</a></span><span class="op" id="6740995">++</span>&nbsp;<span class="op" id="6740998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741003"><a href="/image/gif/writer_test.go.html#6740812">img</a></span><span class="op" id="6741006">.</span><span class="ident" id="6741007">SetRGBA</span><span class="op" id="6741014">(</span><span class="ident" id="6741015"><a href="/image/gif/writer_test.go.html#6740965">x</a></span><span class="op" id="6741016">,</span>&nbsp;<span class="ident" id="6741018"><a href="/image/gif/writer_test.go.html#6740924">y</a></span><span class="op" id="6741019">,</span>&nbsp;<span class="ident" id="6741021"><a href="/image/gif/writer_test.go.html#6736363">color</a></span><span class="op" id="6741026">.</span><span class="ident" id="6741027">RGBA</span><span class="op" id="6741031">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6741037">uint8</span><span class="op" id="6741042">(</span><span class="ident" id="6741043"><a href="/image/gif/writer_test.go.html#6740882">rnd</a></span><span class="op" id="6741046">.</span><span class="ident" id="6741047">Intn</span><span class="op" id="6741051">(</span><span class="num" id="6741052">256</span><span class="op" id="6741055">)</span><span class="op" id="6741056">)</span><span class="op" id="6741057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6741063">uint8</span><span class="op" id="6741068">(</span><span class="ident" id="6741069"><a href="/image/gif/writer_test.go.html#6740882">rnd</a></span><span class="op" id="6741072">.</span><span class="ident" id="6741073">Intn</span><span class="op" id="6741077">(</span><span class="num" id="6741078">256</span><span class="op" id="6741081">)</span><span class="op" id="6741082">)</span><span class="op" id="6741083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="6741089">uint8</span><span class="op" id="6741094">(</span><span class="ident" id="6741095"><a href="/image/gif/writer_test.go.html#6740882">rnd</a></span><span class="op" id="6741098">.</span><span class="ident" id="6741099">Intn</span><span class="op" id="6741103">(</span><span class="num" id="6741104">256</span><span class="op" id="6741107">)</span><span class="op" id="6741108">)</span><span class="op" id="6741109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6741115">255</span><span class="op" id="6741118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741123">}</span><span class="op" id="6741124">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741134"><a href="/image/gif/writer_test.go.html#6740780">b</a></span><span class="op" id="6741135">.</span><span class="ident" id="6741136">SetBytes</span><span class="op" id="6741144">(</span><span class="num" id="6741145">640</span>&nbsp;<span class="op" id="6741149">*</span>&nbsp;<span class="num" id="6741151">480</span>&nbsp;<span class="op" id="6741155">*</span>&nbsp;<span class="num" id="6741157">4</span><span class="op" id="6741158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741161"><a href="/image/gif/writer_test.go.html#6740780">b</a></span><span class="op" id="6741162">.</span><span class="ident" id="6741163">StartTimer</span><span class="op" id="6741173">(</span><span class="op" id="6741174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6741177">for</span>&nbsp;<span class="ident" id="6741181">i</span>&nbsp;<span class="op" id="6741183">:=</span>&nbsp;<span class="num" id="6741186">0</span><span class="op" id="6741187">;</span>&nbsp;<span class="ident" id="6741189"><a href="/image/gif/writer_test.go.html#6741181">i</a></span>&nbsp;<span class="op" id="6741191">&lt;</span>&nbsp;<span class="ident" id="6741193"><a href="/image/gif/writer_test.go.html#6740780">b</a></span><span class="op" id="6741194">.</span><span class="ident" id="6741195">N</span><span class="op" id="6741196">;</span>&nbsp;<span class="ident" id="6741198"><a href="/image/gif/writer_test.go.html#6741181">i</a></span><span class="op" id="6741199">++</span>&nbsp;<span class="op" id="6741202">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6741206"><a href="/image/gif/writer.go.html#6271701">Encode</a></span><span class="op" id="6741212">(</span><span class="ident" id="6741213"><a href="/image/gif/writer_test.go.html#6736393">ioutil</a></span><span class="op" id="6741219">.</span><span class="ident" id="6741220">Discard</span><span class="op" id="6741227">,</span>&nbsp;<span class="ident" id="6741229"><a href="/image/gif/writer_test.go.html#6740812">img</a></span><span class="op" id="6741232">,</span>&nbsp;<span class="ident" id="6741234">nil</span><span class="op" id="6741237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6741240">}</span><br>
<span class="lineno"></span><span class="op" id="6741242">}</span>
</div>
</body>
</html>
