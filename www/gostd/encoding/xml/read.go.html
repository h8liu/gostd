<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5680286">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5680342">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5680396">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5680447">package</span>&nbsp;<span class="ident" id="5680455">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5680460">import</span>&nbsp;<span class="op" id="5680467">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680470">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680479">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680491">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680501">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680508">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680519">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5680530">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5680540">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5680543">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="5680627">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="5680691">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="5680760">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="5680780">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="5680843">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5680867">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="5680933">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="5680998">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5681064">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5681078">//</span><br>
<span class="lineno"></span><span class="comment" id="5681081">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="5681147">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="5681216">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5681282">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="5681298">//</span><br>
<span class="lineno"></span><span class="comment" id="5681301">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="5681373">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5681449">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="5681513">//</span><br>
<span class="lineno"></span><span class="comment" id="5681516">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5681583">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="5681656">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="5681723">//</span><br>
<span class="lineno"></span><span class="comment" id="5681726">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="5681791">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5681849">//</span><br>
<span class="lineno">45</span><span class="comment" id="5681852">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="5681914">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="5681980">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5682051">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5682077">//</span><br>
<span class="lineno">50</span><span class="comment" id="5682080">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5682144">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5682215">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5682288">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5682349">//</span><br>
<span class="lineno">55</span><span class="comment" id="5682352">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5682416">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5682488">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5682545">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5682613">//</span><br>
<span class="lineno">60</span><span class="comment" id="5682616">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5682685">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5682753">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5682820">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="5682863">//</span><br>
<span class="lineno">65</span><span class="comment" id="5682866">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5682934">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5683001">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5683075">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5683147">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="5683216">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5683261">//</span><br>
<span class="lineno"></span><span class="comment" id="5683264">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5683332">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5683397">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="5683464">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5683510">//</span><br>
<span class="lineno"></span><span class="comment" id="5683513">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5683583">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5683659">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="5683710">//</span><br>
<span class="lineno"></span><span class="comment" id="5683713">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5683786">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="5683857">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5683918">//</span><br>
<span class="lineno">85</span><span class="comment" id="5683921">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5683989">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="5684034">//</span><br>
<span class="lineno"></span><span class="comment" id="5684037">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="5684100">//</span><br>
<span class="lineno">90</span><span class="comment" id="5684103">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5684172">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5684239">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="5684281">//</span><br>
<span class="lineno"></span><span class="comment" id="5684284">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="5684353">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="5684390">//</span><br>
<span class="lineno"></span><span class="comment" id="5684393">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5684464">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5684529">//</span><br>
<span class="lineno">100</span><span class="comment" id="5684532">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5684597">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5684659">//</span><br>
<span class="lineno"></span><span class="comment" id="5684662">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5684731">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="5684793">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5684861">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="5684874">//</span><br>
<span class="lineno"></span><span class="comment" id="5684877">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5684942">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="5684959">//</span><br>
<span class="lineno"></span><span class="comment" id="5684962">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="5685031">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5685107">//</span><br>
<span class="lineno"></span><span class="keyword" id="5685110">func</span>&nbsp;<span class="ident" id="5685115">Unmarshal</span><span class="op" id="5685124">(</span><span class="ident" id="5685125">data</span>&nbsp;<span class="op" id="5685130">[</span><span class="op" id="5685131">]</span><span class="builtintype" id="5685132">byte</span><span class="op" id="5685136">,</span>&nbsp;<span class="ident" id="5685138">v</span>&nbsp;<span class="keyword" id="5685140">interface</span><span class="op" id="5685149">{</span><span class="op" id="5685150">}</span><span class="op" id="5685151">)</span>&nbsp;<span class="builtintype" id="5685153">error</span>&nbsp;<span class="op" id="5685159">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5685162">return</span>&nbsp;<span class="ident" id="5685169">NewDecoder</span><span class="op" id="5685179">(</span><span class="ident" id="5685180">bytes</span><span class="op" id="5685185">.</span><span class="ident" id="5685186">NewReader</span><span class="op" id="5685195">(</span><span class="ident" id="5685196">data</span><span class="op" id="5685200">)</span><span class="op" id="5685201">)</span><span class="op" id="5685202">.</span><span class="ident" id="5685203">Decode</span><span class="op" id="5685209">(</span><span class="ident" id="5685210">v</span><span class="op" id="5685211">)</span><br>
<span class="lineno"></span><span class="op" id="5685213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5685216">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="5685280">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="5685317">func</span>&nbsp;<span class="op" id="5685322">(</span><span class="ident" id="5685323">d</span>&nbsp;<span class="op" id="5685325">*</span><span class="ident" id="5685326">Decoder</span><span class="op" id="5685333">)</span>&nbsp;<span class="ident" id="5685335">Decode</span><span class="op" id="5685341">(</span><span class="ident" id="5685342">v</span>&nbsp;<span class="keyword" id="5685344">interface</span><span class="op" id="5685353">{</span><span class="op" id="5685354">}</span><span class="op" id="5685355">)</span>&nbsp;<span class="builtintype" id="5685357">error</span>&nbsp;<span class="op" id="5685363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5685366">return</span>&nbsp;<span class="ident" id="5685373">d</span><span class="op" id="5685374">.</span><span class="ident" id="5685375">DecodeElement</span><span class="op" id="5685388">(</span><span class="ident" id="5685389">v</span><span class="op" id="5685390">,</span>&nbsp;<span class="ident" id="5685392">nil</span><span class="op" id="5685395">)</span><br>
<span class="lineno"></span><span class="op" id="5685397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5685400">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="5685463">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5685519">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="5685582">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="5685641">func</span>&nbsp;<span class="op" id="5685646">(</span><span class="ident" id="5685647">d</span>&nbsp;<span class="op" id="5685649">*</span><span class="ident" id="5685650">Decoder</span><span class="op" id="5685657">)</span>&nbsp;<span class="ident" id="5685659">DecodeElement</span><span class="op" id="5685672">(</span><span class="ident" id="5685673">v</span>&nbsp;<span class="keyword" id="5685675">interface</span><span class="op" id="5685684">{</span><span class="op" id="5685685">}</span><span class="op" id="5685686">,</span>&nbsp;<span class="ident" id="5685688">start</span>&nbsp;<span class="op" id="5685694">*</span><span class="ident" id="5685695">StartElement</span><span class="op" id="5685707">)</span>&nbsp;<span class="builtintype" id="5685709">error</span>&nbsp;<span class="op" id="5685715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5685718">val</span>&nbsp;<span class="op" id="5685722">:=</span>&nbsp;<span class="ident" id="5685725">reflect</span><span class="op" id="5685732">.</span><span class="ident" id="5685733">ValueOf</span><span class="op" id="5685740">(</span><span class="ident" id="5685741">v</span><span class="op" id="5685742">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5685745">if</span>&nbsp;<span class="ident" id="5685748">val</span><span class="op" id="5685751">.</span><span class="ident" id="5685752">Kind</span><span class="op" id="5685756">(</span><span class="op" id="5685757">)</span>&nbsp;<span class="op" id="5685759">!=</span>&nbsp;<span class="ident" id="5685762">reflect</span><span class="op" id="5685769">.</span><span class="ident" id="5685770">Ptr</span>&nbsp;<span class="op" id="5685774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5685778">return</span>&nbsp;<span class="ident" id="5685785">errors</span><span class="op" id="5685791">.</span><span class="ident" id="5685792">New</span><span class="op" id="5685795">(</span><span class="string" id="5685796">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="5685829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5685832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5685835">return</span>&nbsp;<span class="ident" id="5685842">d</span><span class="op" id="5685843">.</span><span class="ident" id="5685844">unmarshal</span><span class="op" id="5685853">(</span><span class="ident" id="5685854">val</span><span class="op" id="5685857">.</span><span class="ident" id="5685858">Elem</span><span class="op" id="5685862">(</span><span class="op" id="5685863">)</span><span class="op" id="5685864">,</span>&nbsp;<span class="ident" id="5685866">start</span><span class="op" id="5685871">)</span><br>
<span class="lineno"></span><span class="op" id="5685873">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="5685876">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="5685947">type</span>&nbsp;<span class="ident" id="5685952">UnmarshalError</span>&nbsp;<span class="builtintype" id="5685967">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5685975">func</span>&nbsp;<span class="op" id="5685980">(</span><span class="ident" id="5685981">e</span>&nbsp;<span class="ident" id="5685983">UnmarshalError</span><span class="op" id="5685997">)</span>&nbsp;<span class="ident" id="5685999">Error</span><span class="op" id="5686004">(</span><span class="op" id="5686005">)</span>&nbsp;<span class="builtintype" id="5686007">string</span>&nbsp;<span class="op" id="5686014">{</span>&nbsp;<span class="keyword" id="5686016">return</span>&nbsp;<span class="builtintype" id="5686023">string</span><span class="op" id="5686029">(</span><span class="ident" id="5686030">e</span><span class="op" id="5686031">)</span>&nbsp;<span class="op" id="5686033">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="5686036">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5686110">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5686155">//</span><br>
<span class="lineno"></span><span class="comment" id="5686158">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="5686203">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5686246">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5686311">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5686334">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5686388">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="5686447">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="5686507">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5686565">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="5686598">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5686658">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="5686693">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="5686733">type</span>&nbsp;<span class="ident" id="5686738">Unmarshaler</span>&nbsp;<span class="keyword" id="5686750">interface</span>&nbsp;<span class="op" id="5686760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5686763">UnmarshalXML</span><span class="op" id="5686775">(</span><span class="ident" id="5686776">d</span>&nbsp;<span class="op" id="5686778">*</span><span class="ident" id="5686779">Decoder</span><span class="op" id="5686786">,</span>&nbsp;<span class="ident" id="5686788">start</span>&nbsp;<span class="ident" id="5686794">StartElement</span><span class="op" id="5686806">)</span>&nbsp;<span class="builtintype" id="5686808">error</span><br>
<span class="lineno"></span><span class="op" id="5686814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5686817">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="5686895">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="5686942">//</span><br>
<span class="lineno"></span><span class="comment" id="5686945">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="5686997">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="5687062">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="5687085">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5687145">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="5687180">type</span>&nbsp;<span class="ident" id="5687185">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="5687201">interface</span>&nbsp;<span class="op" id="5687211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687214">UnmarshalXMLAttr</span><span class="op" id="5687230">(</span><span class="ident" id="5687231">attr</span>&nbsp;<span class="ident" id="5687236">Attr</span><span class="op" id="5687240">)</span>&nbsp;<span class="builtintype" id="5687242">error</span><br>
<span class="lineno">170</span><span class="op" id="5687248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5687251">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5687339">func</span>&nbsp;<span class="ident" id="5687344">receiverType</span><span class="op" id="5687356">(</span><span class="ident" id="5687357">val</span>&nbsp;<span class="keyword" id="5687361">interface</span><span class="op" id="5687370">{</span><span class="op" id="5687371">}</span><span class="op" id="5687372">)</span>&nbsp;<span class="builtintype" id="5687374">string</span>&nbsp;<span class="op" id="5687381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687384">t</span>&nbsp;<span class="op" id="5687386">:=</span>&nbsp;<span class="ident" id="5687389">reflect</span><span class="op" id="5687396">.</span><span class="ident" id="5687397">TypeOf</span><span class="op" id="5687403">(</span><span class="ident" id="5687404">val</span><span class="op" id="5687407">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687410">if</span>&nbsp;<span class="ident" id="5687413">t</span><span class="op" id="5687414">.</span><span class="ident" id="5687415">Name</span><span class="op" id="5687419">(</span><span class="op" id="5687420">)</span>&nbsp;<span class="op" id="5687422">!=</span>&nbsp;<span class="string" id="5687425">&#34;&#34;</span>&nbsp;<span class="op" id="5687428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687432">return</span>&nbsp;<span class="ident" id="5687439">t</span><span class="op" id="5687440">.</span><span class="ident" id="5687441">String</span><span class="op" id="5687447">(</span><span class="op" id="5687448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5687451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687454">return</span>&nbsp;<span class="string" id="5687461">&#34;(&#34;</span>&nbsp;<span class="op" id="5687465">+</span>&nbsp;<span class="ident" id="5687467">t</span><span class="op" id="5687468">.</span><span class="ident" id="5687469">String</span><span class="op" id="5687475">(</span><span class="op" id="5687476">)</span>&nbsp;<span class="op" id="5687478">+</span>&nbsp;<span class="string" id="5687480">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="5687484">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="5687487">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5687551">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="5687595">func</span>&nbsp;<span class="op" id="5687600">(</span><span class="ident" id="5687601">p</span>&nbsp;<span class="op" id="5687603">*</span><span class="ident" id="5687604">Decoder</span><span class="op" id="5687611">)</span>&nbsp;<span class="ident" id="5687613">unmarshalInterface</span><span class="op" id="5687631">(</span><span class="ident" id="5687632">val</span>&nbsp;<span class="ident" id="5687636">Unmarshaler</span><span class="op" id="5687647">,</span>&nbsp;<span class="ident" id="5687649">start</span>&nbsp;<span class="op" id="5687655">*</span><span class="ident" id="5687656">StartElement</span><span class="op" id="5687668">)</span>&nbsp;<span class="builtintype" id="5687670">error</span>&nbsp;<span class="op" id="5687676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5687679">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687748">p</span><span class="op" id="5687749">.</span><span class="ident" id="5687750">pushEOF</span><span class="op" id="5687757">(</span><span class="op" id="5687758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687762">p</span><span class="op" id="5687763">.</span><span class="ident" id="5687764">unmarshalDepth</span><span class="op" id="5687778">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687782">err</span>&nbsp;<span class="op" id="5687786">:=</span>&nbsp;<span class="ident" id="5687789">val</span><span class="op" id="5687792">.</span><span class="ident" id="5687793">UnmarshalXML</span><span class="op" id="5687805">(</span><span class="ident" id="5687806">p</span><span class="op" id="5687807">,</span>&nbsp;<span class="op" id="5687809">*</span><span class="ident" id="5687810">start</span><span class="op" id="5687815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687818">p</span><span class="op" id="5687819">.</span><span class="ident" id="5687820">unmarshalDepth</span><span class="op" id="5687834">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687838">if</span>&nbsp;<span class="ident" id="5687841">err</span>&nbsp;<span class="op" id="5687845">!=</span>&nbsp;<span class="ident" id="5687848">nil</span>&nbsp;<span class="op" id="5687852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5687856">p</span><span class="op" id="5687857">.</span><span class="ident" id="5687858">popEOF</span><span class="op" id="5687864">(</span><span class="op" id="5687865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687869">return</span>&nbsp;<span class="ident" id="5687876">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5687881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687885">if</span>&nbsp;<span class="op" id="5687888">!</span><span class="ident" id="5687889">p</span><span class="op" id="5687890">.</span><span class="ident" id="5687891">popEOF</span><span class="op" id="5687897">(</span><span class="op" id="5687898">)</span>&nbsp;<span class="op" id="5687900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5687904">return</span>&nbsp;<span class="ident" id="5687911">fmt</span><span class="op" id="5687914">.</span><span class="ident" id="5687915">Errorf</span><span class="op" id="5687921">(</span><span class="string" id="5687922">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="5687980">,</span>&nbsp;<span class="ident" id="5687982">receiverType</span><span class="op" id="5687994">(</span><span class="ident" id="5687995">val</span><span class="op" id="5687998">)</span><span class="op" id="5687999">,</span>&nbsp;<span class="ident" id="5688001">start</span><span class="op" id="5688006">.</span><span class="ident" id="5688007">Name</span><span class="op" id="5688011">.</span><span class="ident" id="5688012">Local</span><span class="op" id="5688017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688024">return</span>&nbsp;<span class="ident" id="5688031">nil</span><br>
<span class="lineno">200</span><span class="op" id="5688035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5688038">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5688106">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="5688170">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="5688208">func</span>&nbsp;<span class="op" id="5688213">(</span><span class="ident" id="5688214">p</span>&nbsp;<span class="op" id="5688216">*</span><span class="ident" id="5688217">Decoder</span><span class="op" id="5688224">)</span>&nbsp;<span class="ident" id="5688226">unmarshalTextInterface</span><span class="op" id="5688248">(</span><span class="ident" id="5688249">val</span>&nbsp;<span class="ident" id="5688253">encoding</span><span class="op" id="5688261">.</span><span class="ident" id="5688262">TextUnmarshaler</span><span class="op" id="5688277">,</span>&nbsp;<span class="ident" id="5688279">start</span>&nbsp;<span class="op" id="5688285">*</span><span class="ident" id="5688286">StartElement</span><span class="op" id="5688298">)</span>&nbsp;<span class="builtintype" id="5688300">error</span>&nbsp;<span class="op" id="5688306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688309">var</span>&nbsp;<span class="ident" id="5688313">buf</span>&nbsp;<span class="op" id="5688317">[</span><span class="op" id="5688318">]</span><span class="builtintype" id="5688319">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688325">depth</span>&nbsp;<span class="op" id="5688331">:=</span>&nbsp;<span class="num" id="5688334">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688337">for</span>&nbsp;<span class="ident" id="5688341">depth</span>&nbsp;<span class="op" id="5688347">&gt;</span>&nbsp;<span class="num" id="5688349">0</span>&nbsp;<span class="op" id="5688351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688355">t</span><span class="op" id="5688356">,</span>&nbsp;<span class="ident" id="5688358">err</span>&nbsp;<span class="op" id="5688362">:=</span>&nbsp;<span class="ident" id="5688365">p</span><span class="op" id="5688366">.</span><span class="ident" id="5688367">Token</span><span class="op" id="5688372">(</span><span class="op" id="5688373">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688377">if</span>&nbsp;<span class="ident" id="5688380">err</span>&nbsp;<span class="op" id="5688384">!=</span>&nbsp;<span class="ident" id="5688387">nil</span>&nbsp;<span class="op" id="5688391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688396">return</span>&nbsp;<span class="ident" id="5688403">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688413">switch</span>&nbsp;<span class="ident" id="5688420">t</span>&nbsp;<span class="op" id="5688422">:=</span>&nbsp;<span class="ident" id="5688425">t</span><span class="op" id="5688426">.</span><span class="op" id="5688427">(</span><span class="keyword" id="5688428">type</span><span class="op" id="5688432">)</span>&nbsp;<span class="op" id="5688434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688438">case</span>&nbsp;<span class="ident" id="5688443">CharData</span><span class="op" id="5688451">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688456">if</span>&nbsp;<span class="ident" id="5688459">depth</span>&nbsp;<span class="op" id="5688465">==</span>&nbsp;<span class="num" id="5688468">1</span>&nbsp;<span class="op" id="5688470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688476">buf</span>&nbsp;<span class="op" id="5688480">=</span>&nbsp;<span class="builtinfunc" id="5688482">append</span><span class="op" id="5688488">(</span><span class="ident" id="5688489">buf</span><span class="op" id="5688492">,</span>&nbsp;<span class="ident" id="5688494">t</span><span class="op" id="5688495">...</span><span class="op" id="5688498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688507">case</span>&nbsp;<span class="ident" id="5688512">StartElement</span><span class="op" id="5688524">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688529">depth</span><span class="op" id="5688534">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688539">case</span>&nbsp;<span class="ident" id="5688544">EndElement</span><span class="op" id="5688554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688559">depth</span><span class="op" id="5688564">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688575">return</span>&nbsp;<span class="ident" id="5688582">val</span><span class="op" id="5688585">.</span><span class="ident" id="5688586">UnmarshalText</span><span class="op" id="5688599">(</span><span class="ident" id="5688600">buf</span><span class="op" id="5688603">)</span><br>
<span class="lineno">225</span><span class="op" id="5688605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5688608">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5688669">func</span>&nbsp;<span class="op" id="5688674">(</span><span class="ident" id="5688675">p</span>&nbsp;<span class="op" id="5688677">*</span><span class="ident" id="5688678">Decoder</span><span class="op" id="5688685">)</span>&nbsp;<span class="ident" id="5688687">unmarshalAttr</span><span class="op" id="5688700">(</span><span class="ident" id="5688701">val</span>&nbsp;<span class="ident" id="5688705">reflect</span><span class="op" id="5688712">.</span><span class="ident" id="5688713">Value</span><span class="op" id="5688718">,</span>&nbsp;<span class="ident" id="5688720">attr</span>&nbsp;<span class="ident" id="5688725">Attr</span><span class="op" id="5688729">)</span>&nbsp;<span class="builtintype" id="5688731">error</span>&nbsp;<span class="op" id="5688737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688740">if</span>&nbsp;<span class="ident" id="5688743">val</span><span class="op" id="5688746">.</span><span class="ident" id="5688747">Kind</span><span class="op" id="5688751">(</span><span class="op" id="5688752">)</span>&nbsp;<span class="op" id="5688754">==</span>&nbsp;<span class="ident" id="5688757">reflect</span><span class="op" id="5688764">.</span><span class="ident" id="5688765">Ptr</span>&nbsp;<span class="op" id="5688769">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688773">if</span>&nbsp;<span class="ident" id="5688776">val</span><span class="op" id="5688779">.</span><span class="ident" id="5688780">IsNil</span><span class="op" id="5688785">(</span><span class="op" id="5688786">)</span>&nbsp;<span class="op" id="5688788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688793">val</span><span class="op" id="5688796">.</span><span class="ident" id="5688797">Set</span><span class="op" id="5688800">(</span><span class="ident" id="5688801">reflect</span><span class="op" id="5688808">.</span><span class="ident" id="5688809">New</span><span class="op" id="5688812">(</span><span class="ident" id="5688813">val</span><span class="op" id="5688816">.</span><span class="ident" id="5688817">Type</span><span class="op" id="5688821">(</span><span class="op" id="5688822">)</span><span class="op" id="5688823">.</span><span class="ident" id="5688824">Elem</span><span class="op" id="5688828">(</span><span class="op" id="5688829">)</span><span class="op" id="5688830">)</span><span class="op" id="5688831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5688839">val</span>&nbsp;<span class="op" id="5688843">=</span>&nbsp;<span class="ident" id="5688845">val</span><span class="op" id="5688848">.</span><span class="ident" id="5688849">Elem</span><span class="op" id="5688853">(</span><span class="op" id="5688854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5688857">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5688861">if</span>&nbsp;<span class="ident" id="5688864">val</span><span class="op" id="5688867">.</span><span class="ident" id="5688868">CanInterface</span><span class="op" id="5688880">(</span><span class="op" id="5688881">)</span>&nbsp;<span class="op" id="5688883">&amp;&amp;</span>&nbsp;<span class="ident" id="5688886">val</span><span class="op" id="5688889">.</span><span class="ident" id="5688890">Type</span><span class="op" id="5688894">(</span><span class="op" id="5688895">)</span><span class="op" id="5688896">.</span><span class="ident" id="5688897">Implements</span><span class="op" id="5688907">(</span><span class="ident" id="5688908">unmarshalerAttrType</span><span class="op" id="5688927">)</span>&nbsp;<span class="op" id="5688929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5688933">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5688990">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689054">return</span>&nbsp;<span class="ident" id="5689061">val</span><span class="op" id="5689064">.</span><span class="ident" id="5689065">Interface</span><span class="op" id="5689074">(</span><span class="op" id="5689075">)</span><span class="op" id="5689076">.</span><span class="op" id="5689077">(</span><span class="ident" id="5689078">UnmarshalerAttr</span><span class="op" id="5689093">)</span><span class="op" id="5689094">.</span><span class="ident" id="5689095">UnmarshalXMLAttr</span><span class="op" id="5689111">(</span><span class="ident" id="5689112">attr</span><span class="op" id="5689116">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689122">if</span>&nbsp;<span class="ident" id="5689125">val</span><span class="op" id="5689128">.</span><span class="ident" id="5689129">CanAddr</span><span class="op" id="5689136">(</span><span class="op" id="5689137">)</span>&nbsp;<span class="op" id="5689139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689143">pv</span>&nbsp;<span class="op" id="5689146">:=</span>&nbsp;<span class="ident" id="5689149">val</span><span class="op" id="5689152">.</span><span class="ident" id="5689153">Addr</span><span class="op" id="5689157">(</span><span class="op" id="5689158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689162">if</span>&nbsp;<span class="ident" id="5689165">pv</span><span class="op" id="5689167">.</span><span class="ident" id="5689168">CanInterface</span><span class="op" id="5689180">(</span><span class="op" id="5689181">)</span>&nbsp;<span class="op" id="5689183">&amp;&amp;</span>&nbsp;<span class="ident" id="5689186">pv</span><span class="op" id="5689188">.</span><span class="ident" id="5689189">Type</span><span class="op" id="5689193">(</span><span class="op" id="5689194">)</span><span class="op" id="5689195">.</span><span class="ident" id="5689196">Implements</span><span class="op" id="5689206">(</span><span class="ident" id="5689207">unmarshalerAttrType</span><span class="op" id="5689226">)</span>&nbsp;<span class="op" id="5689228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689233">return</span>&nbsp;<span class="ident" id="5689240">pv</span><span class="op" id="5689242">.</span><span class="ident" id="5689243">Interface</span><span class="op" id="5689252">(</span><span class="op" id="5689253">)</span><span class="op" id="5689254">.</span><span class="op" id="5689255">(</span><span class="ident" id="5689256">UnmarshalerAttr</span><span class="op" id="5689271">)</span><span class="op" id="5689272">.</span><span class="ident" id="5689273">UnmarshalXMLAttr</span><span class="op" id="5689289">(</span><span class="ident" id="5689290">attr</span><span class="op" id="5689294">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5689305">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689363">if</span>&nbsp;<span class="ident" id="5689366">val</span><span class="op" id="5689369">.</span><span class="ident" id="5689370">CanInterface</span><span class="op" id="5689382">(</span><span class="op" id="5689383">)</span>&nbsp;<span class="op" id="5689385">&amp;&amp;</span>&nbsp;<span class="ident" id="5689388">val</span><span class="op" id="5689391">.</span><span class="ident" id="5689392">Type</span><span class="op" id="5689396">(</span><span class="op" id="5689397">)</span><span class="op" id="5689398">.</span><span class="ident" id="5689399">Implements</span><span class="op" id="5689409">(</span><span class="ident" id="5689410">textUnmarshalerType</span><span class="op" id="5689429">)</span>&nbsp;<span class="op" id="5689431">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5689435">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5689492">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689556">return</span>&nbsp;<span class="ident" id="5689563">val</span><span class="op" id="5689566">.</span><span class="ident" id="5689567">Interface</span><span class="op" id="5689576">(</span><span class="op" id="5689577">)</span><span class="op" id="5689578">.</span><span class="op" id="5689579">(</span><span class="ident" id="5689580">encoding</span><span class="op" id="5689588">.</span><span class="ident" id="5689589">TextUnmarshaler</span><span class="op" id="5689604">)</span><span class="op" id="5689605">.</span><span class="ident" id="5689606">UnmarshalText</span><span class="op" id="5689619">(</span><span class="op" id="5689620">[</span><span class="op" id="5689621">]</span><span class="builtintype" id="5689622">byte</span><span class="op" id="5689626">(</span><span class="ident" id="5689627">attr</span><span class="op" id="5689631">.</span><span class="ident" id="5689632">Value</span><span class="op" id="5689637">)</span><span class="op" id="5689638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689644">if</span>&nbsp;<span class="ident" id="5689647">val</span><span class="op" id="5689650">.</span><span class="ident" id="5689651">CanAddr</span><span class="op" id="5689658">(</span><span class="op" id="5689659">)</span>&nbsp;<span class="op" id="5689661">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689665">pv</span>&nbsp;<span class="op" id="5689668">:=</span>&nbsp;<span class="ident" id="5689671">val</span><span class="op" id="5689674">.</span><span class="ident" id="5689675">Addr</span><span class="op" id="5689679">(</span><span class="op" id="5689680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689684">if</span>&nbsp;<span class="ident" id="5689687">pv</span><span class="op" id="5689689">.</span><span class="ident" id="5689690">CanInterface</span><span class="op" id="5689702">(</span><span class="op" id="5689703">)</span>&nbsp;<span class="op" id="5689705">&amp;&amp;</span>&nbsp;<span class="ident" id="5689708">pv</span><span class="op" id="5689710">.</span><span class="ident" id="5689711">Type</span><span class="op" id="5689715">(</span><span class="op" id="5689716">)</span><span class="op" id="5689717">.</span><span class="ident" id="5689718">Implements</span><span class="op" id="5689728">(</span><span class="ident" id="5689729">textUnmarshalerType</span><span class="op" id="5689748">)</span>&nbsp;<span class="op" id="5689750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689755">return</span>&nbsp;<span class="ident" id="5689762">pv</span><span class="op" id="5689764">.</span><span class="ident" id="5689765">Interface</span><span class="op" id="5689774">(</span><span class="op" id="5689775">)</span><span class="op" id="5689776">.</span><span class="op" id="5689777">(</span><span class="ident" id="5689778">encoding</span><span class="op" id="5689786">.</span><span class="ident" id="5689787">TextUnmarshaler</span><span class="op" id="5689802">)</span><span class="op" id="5689803">.</span><span class="ident" id="5689804">UnmarshalText</span><span class="op" id="5689817">(</span><span class="op" id="5689818">[</span><span class="op" id="5689819">]</span><span class="builtintype" id="5689820">byte</span><span class="op" id="5689824">(</span><span class="ident" id="5689825">attr</span><span class="op" id="5689829">.</span><span class="ident" id="5689830">Value</span><span class="op" id="5689835">)</span><span class="op" id="5689836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5689843">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689847">copyValue</span><span class="op" id="5689856">(</span><span class="ident" id="5689857">val</span><span class="op" id="5689860">,</span>&nbsp;<span class="op" id="5689862">[</span><span class="op" id="5689863">]</span><span class="builtintype" id="5689864">byte</span><span class="op" id="5689868">(</span><span class="ident" id="5689869">attr</span><span class="op" id="5689873">.</span><span class="ident" id="5689874">Value</span><span class="op" id="5689879">)</span><span class="op" id="5689880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5689883">return</span>&nbsp;<span class="ident" id="5689890">nil</span><br>
<span class="lineno"></span><span class="op" id="5689894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5689897">var</span>&nbsp;<span class="op" id="5689901">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689904">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5689924">=</span>&nbsp;<span class="ident" id="5689926">reflect</span><span class="op" id="5689933">.</span><span class="ident" id="5689934">TypeOf</span><span class="op" id="5689940">(</span><span class="op" id="5689941">(</span><span class="op" id="5689942">*</span><span class="ident" id="5689943">Unmarshaler</span><span class="op" id="5689954">)</span><span class="op" id="5689955">(</span><span class="ident" id="5689956">nil</span><span class="op" id="5689959">)</span><span class="op" id="5689960">)</span><span class="op" id="5689961">.</span><span class="ident" id="5689962">Elem</span><span class="op" id="5689966">(</span><span class="op" id="5689967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5689970">unmarshalerAttrType</span>&nbsp;<span class="op" id="5689990">=</span>&nbsp;<span class="ident" id="5689992">reflect</span><span class="op" id="5689999">.</span><span class="ident" id="5690000">TypeOf</span><span class="op" id="5690006">(</span><span class="op" id="5690007">(</span><span class="op" id="5690008">*</span><span class="ident" id="5690009">UnmarshalerAttr</span><span class="op" id="5690024">)</span><span class="op" id="5690025">(</span><span class="ident" id="5690026">nil</span><span class="op" id="5690029">)</span><span class="op" id="5690030">)</span><span class="op" id="5690031">.</span><span class="ident" id="5690032">Elem</span><span class="op" id="5690036">(</span><span class="op" id="5690037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690040">textUnmarshalerType</span>&nbsp;<span class="op" id="5690060">=</span>&nbsp;<span class="ident" id="5690062">reflect</span><span class="op" id="5690069">.</span><span class="ident" id="5690070">TypeOf</span><span class="op" id="5690076">(</span><span class="op" id="5690077">(</span><span class="op" id="5690078">*</span><span class="ident" id="5690079">encoding</span><span class="op" id="5690087">.</span><span class="ident" id="5690088">TextUnmarshaler</span><span class="op" id="5690103">)</span><span class="op" id="5690104">(</span><span class="ident" id="5690105">nil</span><span class="op" id="5690108">)</span><span class="op" id="5690109">)</span><span class="op" id="5690110">.</span><span class="ident" id="5690111">Elem</span><span class="op" id="5690115">(</span><span class="op" id="5690116">)</span><br>
<span class="lineno"></span><span class="op" id="5690118">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5690121">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="5690165">func</span>&nbsp;<span class="op" id="5690170">(</span><span class="ident" id="5690171">p</span>&nbsp;<span class="op" id="5690173">*</span><span class="ident" id="5690174">Decoder</span><span class="op" id="5690181">)</span>&nbsp;<span class="ident" id="5690183">unmarshal</span><span class="op" id="5690192">(</span><span class="ident" id="5690193">val</span>&nbsp;<span class="ident" id="5690197">reflect</span><span class="op" id="5690204">.</span><span class="ident" id="5690205">Value</span><span class="op" id="5690210">,</span>&nbsp;<span class="ident" id="5690212">start</span>&nbsp;<span class="op" id="5690218">*</span><span class="ident" id="5690219">StartElement</span><span class="op" id="5690231">)</span>&nbsp;<span class="builtintype" id="5690233">error</span>&nbsp;<span class="op" id="5690239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690242">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690280">if</span>&nbsp;<span class="ident" id="5690283">start</span>&nbsp;<span class="op" id="5690289">==</span>&nbsp;<span class="ident" id="5690292">nil</span>&nbsp;<span class="op" id="5690296">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690300">for</span>&nbsp;<span class="op" id="5690304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690309">tok</span><span class="op" id="5690312">,</span>&nbsp;<span class="ident" id="5690314">err</span>&nbsp;<span class="op" id="5690318">:=</span>&nbsp;<span class="ident" id="5690321">p</span><span class="op" id="5690322">.</span><span class="ident" id="5690323">Token</span><span class="op" id="5690328">(</span><span class="op" id="5690329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690334">if</span>&nbsp;<span class="ident" id="5690337">err</span>&nbsp;<span class="op" id="5690341">!=</span>&nbsp;<span class="ident" id="5690344">nil</span>&nbsp;<span class="op" id="5690348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690354">return</span>&nbsp;<span class="ident" id="5690361">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690368">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690373">if</span>&nbsp;<span class="ident" id="5690376">t</span><span class="op" id="5690377">,</span>&nbsp;<span class="ident" id="5690379">ok</span>&nbsp;<span class="op" id="5690382">:=</span>&nbsp;<span class="ident" id="5690385">tok</span><span class="op" id="5690388">.</span><span class="op" id="5690389">(</span><span class="ident" id="5690390">StartElement</span><span class="op" id="5690402">)</span><span class="op" id="5690403">;</span>&nbsp;<span class="ident" id="5690405">ok</span>&nbsp;<span class="op" id="5690408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690414">start</span>&nbsp;<span class="op" id="5690420">=</span>&nbsp;<span class="op" id="5690422">&amp;</span><span class="ident" id="5690423">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690429">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690442">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690449">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690511">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690537">if</span>&nbsp;<span class="ident" id="5690540">val</span><span class="op" id="5690543">.</span><span class="ident" id="5690544">Kind</span><span class="op" id="5690548">(</span><span class="op" id="5690549">)</span>&nbsp;<span class="op" id="5690551">==</span>&nbsp;<span class="ident" id="5690554">reflect</span><span class="op" id="5690561">.</span><span class="ident" id="5690562">Interface</span>&nbsp;<span class="op" id="5690572">&amp;&amp;</span>&nbsp;<span class="op" id="5690575">!</span><span class="ident" id="5690576">val</span><span class="op" id="5690579">.</span><span class="ident" id="5690580">IsNil</span><span class="op" id="5690585">(</span><span class="op" id="5690586">)</span>&nbsp;<span class="op" id="5690588">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690592">e</span>&nbsp;<span class="op" id="5690594">:=</span>&nbsp;<span class="ident" id="5690597">val</span><span class="op" id="5690600">.</span><span class="ident" id="5690601">Elem</span><span class="op" id="5690605">(</span><span class="op" id="5690606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690610">if</span>&nbsp;<span class="ident" id="5690613">e</span><span class="op" id="5690614">.</span><span class="ident" id="5690615">Kind</span><span class="op" id="5690619">(</span><span class="op" id="5690620">)</span>&nbsp;<span class="op" id="5690622">==</span>&nbsp;<span class="ident" id="5690625">reflect</span><span class="op" id="5690632">.</span><span class="ident" id="5690633">Ptr</span>&nbsp;<span class="op" id="5690637">&amp;&amp;</span>&nbsp;<span class="op" id="5690640">!</span><span class="ident" id="5690641">e</span><span class="op" id="5690642">.</span><span class="ident" id="5690643">IsNil</span><span class="op" id="5690648">(</span><span class="op" id="5690649">)</span>&nbsp;<span class="op" id="5690651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690656">val</span>&nbsp;<span class="op" id="5690660">=</span>&nbsp;<span class="ident" id="5690662">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690669">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690673">if</span>&nbsp;<span class="ident" id="5690676">val</span><span class="op" id="5690679">.</span><span class="ident" id="5690680">Kind</span><span class="op" id="5690684">(</span><span class="op" id="5690685">)</span>&nbsp;<span class="op" id="5690687">==</span>&nbsp;<span class="ident" id="5690690">reflect</span><span class="op" id="5690697">.</span><span class="ident" id="5690698">Ptr</span>&nbsp;<span class="op" id="5690702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690706">if</span>&nbsp;<span class="ident" id="5690709">val</span><span class="op" id="5690712">.</span><span class="ident" id="5690713">IsNil</span><span class="op" id="5690718">(</span><span class="op" id="5690719">)</span>&nbsp;<span class="op" id="5690721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690726">val</span><span class="op" id="5690729">.</span><span class="ident" id="5690730">Set</span><span class="op" id="5690733">(</span><span class="ident" id="5690734">reflect</span><span class="op" id="5690741">.</span><span class="ident" id="5690742">New</span><span class="op" id="5690745">(</span><span class="ident" id="5690746">val</span><span class="op" id="5690749">.</span><span class="ident" id="5690750">Type</span><span class="op" id="5690754">(</span><span class="op" id="5690755">)</span><span class="op" id="5690756">.</span><span class="ident" id="5690757">Elem</span><span class="op" id="5690761">(</span><span class="op" id="5690762">)</span><span class="op" id="5690763">)</span><span class="op" id="5690764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690768">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5690772">val</span>&nbsp;<span class="op" id="5690776">=</span>&nbsp;<span class="ident" id="5690778">val</span><span class="op" id="5690781">.</span><span class="ident" id="5690782">Elem</span><span class="op" id="5690786">(</span><span class="op" id="5690787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5690790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690794">if</span>&nbsp;<span class="ident" id="5690797">val</span><span class="op" id="5690800">.</span><span class="ident" id="5690801">CanInterface</span><span class="op" id="5690813">(</span><span class="op" id="5690814">)</span>&nbsp;<span class="op" id="5690816">&amp;&amp;</span>&nbsp;<span class="ident" id="5690819">val</span><span class="op" id="5690822">.</span><span class="ident" id="5690823">Type</span><span class="op" id="5690827">(</span><span class="op" id="5690828">)</span><span class="op" id="5690829">.</span><span class="ident" id="5690830">Implements</span><span class="op" id="5690840">(</span><span class="ident" id="5690841">unmarshalerType</span><span class="op" id="5690856">)</span>&nbsp;<span class="op" id="5690858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690862">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5690919">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5690983">return</span>&nbsp;<span class="ident" id="5690990">p</span><span class="op" id="5690991">.</span><span class="ident" id="5690992">unmarshalInterface</span><span class="op" id="5691010">(</span><span class="ident" id="5691011">val</span><span class="op" id="5691014">.</span><span class="ident" id="5691015">Interface</span><span class="op" id="5691024">(</span><span class="op" id="5691025">)</span><span class="op" id="5691026">.</span><span class="op" id="5691027">(</span><span class="ident" id="5691028">Unmarshaler</span><span class="op" id="5691039">)</span><span class="op" id="5691040">,</span>&nbsp;<span class="ident" id="5691042">start</span><span class="op" id="5691047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691054">if</span>&nbsp;<span class="ident" id="5691057">val</span><span class="op" id="5691060">.</span><span class="ident" id="5691061">CanAddr</span><span class="op" id="5691068">(</span><span class="op" id="5691069">)</span>&nbsp;<span class="op" id="5691071">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691075">pv</span>&nbsp;<span class="op" id="5691078">:=</span>&nbsp;<span class="ident" id="5691081">val</span><span class="op" id="5691084">.</span><span class="ident" id="5691085">Addr</span><span class="op" id="5691089">(</span><span class="op" id="5691090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691094">if</span>&nbsp;<span class="ident" id="5691097">pv</span><span class="op" id="5691099">.</span><span class="ident" id="5691100">CanInterface</span><span class="op" id="5691112">(</span><span class="op" id="5691113">)</span>&nbsp;<span class="op" id="5691115">&amp;&amp;</span>&nbsp;<span class="ident" id="5691118">pv</span><span class="op" id="5691120">.</span><span class="ident" id="5691121">Type</span><span class="op" id="5691125">(</span><span class="op" id="5691126">)</span><span class="op" id="5691127">.</span><span class="ident" id="5691128">Implements</span><span class="op" id="5691138">(</span><span class="ident" id="5691139">unmarshalerType</span><span class="op" id="5691154">)</span>&nbsp;<span class="op" id="5691156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691161">return</span>&nbsp;<span class="ident" id="5691168">p</span><span class="op" id="5691169">.</span><span class="ident" id="5691170">unmarshalInterface</span><span class="op" id="5691188">(</span><span class="ident" id="5691189">pv</span><span class="op" id="5691191">.</span><span class="ident" id="5691192">Interface</span><span class="op" id="5691201">(</span><span class="op" id="5691202">)</span><span class="op" id="5691203">.</span><span class="op" id="5691204">(</span><span class="ident" id="5691205">Unmarshaler</span><span class="op" id="5691216">)</span><span class="op" id="5691217">,</span>&nbsp;<span class="ident" id="5691219">start</span><span class="op" id="5691224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691231">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691235">if</span>&nbsp;<span class="ident" id="5691238">val</span><span class="op" id="5691241">.</span><span class="ident" id="5691242">CanInterface</span><span class="op" id="5691254">(</span><span class="op" id="5691255">)</span>&nbsp;<span class="op" id="5691257">&amp;&amp;</span>&nbsp;<span class="ident" id="5691260">val</span><span class="op" id="5691263">.</span><span class="ident" id="5691264">Type</span><span class="op" id="5691268">(</span><span class="op" id="5691269">)</span><span class="op" id="5691270">.</span><span class="ident" id="5691271">Implements</span><span class="op" id="5691281">(</span><span class="ident" id="5691282">textUnmarshalerType</span><span class="op" id="5691301">)</span>&nbsp;<span class="op" id="5691303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691307">return</span>&nbsp;<span class="ident" id="5691314">p</span><span class="op" id="5691315">.</span><span class="ident" id="5691316">unmarshalTextInterface</span><span class="op" id="5691338">(</span><span class="ident" id="5691339">val</span><span class="op" id="5691342">.</span><span class="ident" id="5691343">Interface</span><span class="op" id="5691352">(</span><span class="op" id="5691353">)</span><span class="op" id="5691354">.</span><span class="op" id="5691355">(</span><span class="ident" id="5691356">encoding</span><span class="op" id="5691364">.</span><span class="ident" id="5691365">TextUnmarshaler</span><span class="op" id="5691380">)</span><span class="op" id="5691381">,</span>&nbsp;<span class="ident" id="5691383">start</span><span class="op" id="5691388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691395">if</span>&nbsp;<span class="ident" id="5691398">val</span><span class="op" id="5691401">.</span><span class="ident" id="5691402">CanAddr</span><span class="op" id="5691409">(</span><span class="op" id="5691410">)</span>&nbsp;<span class="op" id="5691412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691416">pv</span>&nbsp;<span class="op" id="5691419">:=</span>&nbsp;<span class="ident" id="5691422">val</span><span class="op" id="5691425">.</span><span class="ident" id="5691426">Addr</span><span class="op" id="5691430">(</span><span class="op" id="5691431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691435">if</span>&nbsp;<span class="ident" id="5691438">pv</span><span class="op" id="5691440">.</span><span class="ident" id="5691441">CanInterface</span><span class="op" id="5691453">(</span><span class="op" id="5691454">)</span>&nbsp;<span class="op" id="5691456">&amp;&amp;</span>&nbsp;<span class="ident" id="5691459">pv</span><span class="op" id="5691461">.</span><span class="ident" id="5691462">Type</span><span class="op" id="5691466">(</span><span class="op" id="5691467">)</span><span class="op" id="5691468">.</span><span class="ident" id="5691469">Implements</span><span class="op" id="5691479">(</span><span class="ident" id="5691480">textUnmarshalerType</span><span class="op" id="5691499">)</span>&nbsp;<span class="op" id="5691501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691506">return</span>&nbsp;<span class="ident" id="5691513">p</span><span class="op" id="5691514">.</span><span class="ident" id="5691515">unmarshalTextInterface</span><span class="op" id="5691537">(</span><span class="ident" id="5691538">pv</span><span class="op" id="5691540">.</span><span class="ident" id="5691541">Interface</span><span class="op" id="5691550">(</span><span class="op" id="5691551">)</span><span class="op" id="5691552">.</span><span class="op" id="5691553">(</span><span class="ident" id="5691554">encoding</span><span class="op" id="5691562">.</span><span class="ident" id="5691563">TextUnmarshaler</span><span class="op" id="5691578">)</span><span class="op" id="5691579">,</span>&nbsp;<span class="ident" id="5691581">start</span><span class="op" id="5691586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691590">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691597">var</span>&nbsp;<span class="op" id="5691601">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691605">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5691618">[</span><span class="op" id="5691619">]</span><span class="builtintype" id="5691620">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691627">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5691640">reflect</span><span class="op" id="5691647">.</span><span class="ident" id="5691648">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691656">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5691669">[</span><span class="op" id="5691670">]</span><span class="builtintype" id="5691671">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691678">saveComment</span>&nbsp;&nbsp;<span class="ident" id="5691691">reflect</span><span class="op" id="5691698">.</span><span class="ident" id="5691699">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691707">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5691720">reflect</span><span class="op" id="5691727">.</span><span class="ident" id="5691728">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691736">saveXMLIndex</span>&nbsp;<span class="builtintype" id="5691749">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691755">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="5691768">[</span><span class="op" id="5691769">]</span><span class="builtintype" id="5691770">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691777">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5691790">reflect</span><span class="op" id="5691797">.</span><span class="ident" id="5691798">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691806">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5691819">reflect</span><span class="op" id="5691826">.</span><span class="ident" id="5691827">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691835">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5691848">*</span><span class="ident" id="5691849">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5691860">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5691873">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5691880">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691884">switch</span>&nbsp;<span class="ident" id="5691891">v</span>&nbsp;<span class="op" id="5691893">:=</span>&nbsp;<span class="ident" id="5691896">val</span><span class="op" id="5691899">;</span>&nbsp;<span class="ident" id="5691901">v</span><span class="op" id="5691902">.</span><span class="ident" id="5691903">Kind</span><span class="op" id="5691907">(</span><span class="op" id="5691908">)</span>&nbsp;<span class="op" id="5691910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691913">default</span><span class="op" id="5691920">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691924">return</span>&nbsp;<span class="ident" id="5691931">errors</span><span class="op" id="5691937">.</span><span class="ident" id="5691938">New</span><span class="op" id="5691941">(</span><span class="string" id="5691942">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5691958">+</span>&nbsp;<span class="ident" id="5691960">v</span><span class="op" id="5691961">.</span><span class="ident" id="5691962">Type</span><span class="op" id="5691966">(</span><span class="op" id="5691967">)</span><span class="op" id="5691968">.</span><span class="ident" id="5691969">String</span><span class="op" id="5691975">(</span><span class="op" id="5691976">)</span><span class="op" id="5691977">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5691981">case</span>&nbsp;<span class="ident" id="5691986">reflect</span><span class="op" id="5691993">.</span><span class="ident" id="5691994">Interface</span><span class="op" id="5692003">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692007">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692064">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692119">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692157">return</span>&nbsp;<span class="ident" id="5692164">p</span><span class="op" id="5692165">.</span><span class="ident" id="5692166">Skip</span><span class="op" id="5692170">(</span><span class="op" id="5692171">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692175">case</span>&nbsp;<span class="ident" id="5692180">reflect</span><span class="op" id="5692187">.</span><span class="ident" id="5692188">Slice</span><span class="op" id="5692193">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692197">typ</span>&nbsp;<span class="op" id="5692201">:=</span>&nbsp;<span class="ident" id="5692204">v</span><span class="op" id="5692205">.</span><span class="ident" id="5692206">Type</span><span class="op" id="5692210">(</span><span class="op" id="5692211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692215">if</span>&nbsp;<span class="ident" id="5692218">typ</span><span class="op" id="5692221">.</span><span class="ident" id="5692222">Elem</span><span class="op" id="5692226">(</span><span class="op" id="5692227">)</span><span class="op" id="5692228">.</span><span class="ident" id="5692229">Kind</span><span class="op" id="5692233">(</span><span class="op" id="5692234">)</span>&nbsp;<span class="op" id="5692236">==</span>&nbsp;<span class="ident" id="5692239">reflect</span><span class="op" id="5692246">.</span><span class="ident" id="5692247">Uint8</span>&nbsp;<span class="op" id="5692253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692258">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692271">saveData</span>&nbsp;<span class="op" id="5692280">=</span>&nbsp;<span class="ident" id="5692282">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692287">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692300">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692330">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692347">n</span>&nbsp;<span class="op" id="5692349">:=</span>&nbsp;<span class="ident" id="5692352">v</span><span class="op" id="5692353">.</span><span class="ident" id="5692354">Len</span><span class="op" id="5692357">(</span><span class="op" id="5692358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692362">if</span>&nbsp;<span class="ident" id="5692365">n</span>&nbsp;<span class="op" id="5692367">&gt;=</span>&nbsp;<span class="ident" id="5692370">v</span><span class="op" id="5692371">.</span><span class="ident" id="5692372">Cap</span><span class="op" id="5692375">(</span><span class="op" id="5692376">)</span>&nbsp;<span class="op" id="5692378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692383">ncap</span>&nbsp;<span class="op" id="5692388">:=</span>&nbsp;<span class="num" id="5692391">2</span>&nbsp;<span class="op" id="5692393">*</span>&nbsp;<span class="ident" id="5692395">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692400">if</span>&nbsp;<span class="ident" id="5692403">ncap</span>&nbsp;<span class="op" id="5692408">&lt;</span>&nbsp;<span class="num" id="5692410">4</span>&nbsp;<span class="op" id="5692412">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692418">ncap</span>&nbsp;<span class="op" id="5692423">=</span>&nbsp;<span class="num" id="5692425">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5692435">new</span>&nbsp;<span class="op" id="5692439">:=</span>&nbsp;<span class="ident" id="5692442">reflect</span><span class="op" id="5692449">.</span><span class="ident" id="5692450">MakeSlice</span><span class="op" id="5692459">(</span><span class="ident" id="5692460">typ</span><span class="op" id="5692463">,</span>&nbsp;<span class="ident" id="5692465">n</span><span class="op" id="5692466">,</span>&nbsp;<span class="ident" id="5692468">ncap</span><span class="op" id="5692472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692477">reflect</span><span class="op" id="5692484">.</span><span class="ident" id="5692485">Copy</span><span class="op" id="5692489">(</span><span class="builtinfunc" id="5692490">new</span><span class="op" id="5692493">,</span>&nbsp;<span class="ident" id="5692495">v</span><span class="op" id="5692496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692501">v</span><span class="op" id="5692502">.</span><span class="ident" id="5692503">Set</span><span class="op" id="5692506">(</span><span class="builtinfunc" id="5692507">new</span><span class="op" id="5692510">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692518">v</span><span class="op" id="5692519">.</span><span class="ident" id="5692520">SetLen</span><span class="op" id="5692526">(</span><span class="ident" id="5692527">n</span>&nbsp;<span class="op" id="5692529">+</span>&nbsp;<span class="num" id="5692531">1</span><span class="op" id="5692532">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5692537">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692576">if</span>&nbsp;<span class="ident" id="5692579">err</span>&nbsp;<span class="op" id="5692583">:=</span>&nbsp;<span class="ident" id="5692586">p</span><span class="op" id="5692587">.</span><span class="ident" id="5692588">unmarshal</span><span class="op" id="5692597">(</span><span class="ident" id="5692598">v</span><span class="op" id="5692599">.</span><span class="ident" id="5692600">Index</span><span class="op" id="5692605">(</span><span class="ident" id="5692606">n</span><span class="op" id="5692607">)</span><span class="op" id="5692608">,</span>&nbsp;<span class="ident" id="5692610">start</span><span class="op" id="5692615">)</span><span class="op" id="5692616">;</span>&nbsp;<span class="ident" id="5692618">err</span>&nbsp;<span class="op" id="5692622">!=</span>&nbsp;<span class="ident" id="5692625">nil</span>&nbsp;<span class="op" id="5692629">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692634">v</span><span class="op" id="5692635">.</span><span class="ident" id="5692636">SetLen</span><span class="op" id="5692642">(</span><span class="ident" id="5692643">n</span><span class="op" id="5692644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692649">return</span>&nbsp;<span class="ident" id="5692656">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5692662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692666">return</span>&nbsp;<span class="ident" id="5692673">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692679">case</span>&nbsp;<span class="ident" id="5692684">reflect</span><span class="op" id="5692691">.</span><span class="ident" id="5692692">Bool</span><span class="op" id="5692696">,</span>&nbsp;<span class="ident" id="5692698">reflect</span><span class="op" id="5692705">.</span><span class="ident" id="5692706">Float32</span><span class="op" id="5692713">,</span>&nbsp;<span class="ident" id="5692715">reflect</span><span class="op" id="5692722">.</span><span class="ident" id="5692723">Float64</span><span class="op" id="5692730">,</span>&nbsp;<span class="ident" id="5692732">reflect</span><span class="op" id="5692739">.</span><span class="ident" id="5692740">Int</span><span class="op" id="5692743">,</span>&nbsp;<span class="ident" id="5692745">reflect</span><span class="op" id="5692752">.</span><span class="ident" id="5692753">Int8</span><span class="op" id="5692757">,</span>&nbsp;<span class="ident" id="5692759">reflect</span><span class="op" id="5692766">.</span><span class="ident" id="5692767">Int16</span><span class="op" id="5692772">,</span>&nbsp;<span class="ident" id="5692774">reflect</span><span class="op" id="5692781">.</span><span class="ident" id="5692782">Int32</span><span class="op" id="5692787">,</span>&nbsp;<span class="ident" id="5692789">reflect</span><span class="op" id="5692796">.</span><span class="ident" id="5692797">Int64</span><span class="op" id="5692802">,</span>&nbsp;<span class="ident" id="5692804">reflect</span><span class="op" id="5692811">.</span><span class="ident" id="5692812">Uint</span><span class="op" id="5692816">,</span>&nbsp;<span class="ident" id="5692818">reflect</span><span class="op" id="5692825">.</span><span class="ident" id="5692826">Uint8</span><span class="op" id="5692831">,</span>&nbsp;<span class="ident" id="5692833">reflect</span><span class="op" id="5692840">.</span><span class="ident" id="5692841">Uint16</span><span class="op" id="5692847">,</span>&nbsp;<span class="ident" id="5692849">reflect</span><span class="op" id="5692856">.</span><span class="ident" id="5692857">Uint32</span><span class="op" id="5692863">,</span>&nbsp;<span class="ident" id="5692865">reflect</span><span class="op" id="5692872">.</span><span class="ident" id="5692873">Uint64</span><span class="op" id="5692879">,</span>&nbsp;<span class="ident" id="5692881">reflect</span><span class="op" id="5692888">.</span><span class="ident" id="5692889">Uintptr</span><span class="op" id="5692896">,</span>&nbsp;<span class="ident" id="5692898">reflect</span><span class="op" id="5692905">.</span><span class="ident" id="5692906">String</span><span class="op" id="5692912">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692916">saveData</span>&nbsp;<span class="op" id="5692925">=</span>&nbsp;<span class="ident" id="5692927">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692931">case</span>&nbsp;<span class="ident" id="5692936">reflect</span><span class="op" id="5692943">.</span><span class="ident" id="5692944">Struct</span><span class="op" id="5692950">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692954">typ</span>&nbsp;<span class="op" id="5692958">:=</span>&nbsp;<span class="ident" id="5692961">v</span><span class="op" id="5692962">.</span><span class="ident" id="5692963">Type</span><span class="op" id="5692967">(</span><span class="op" id="5692968">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5692972">if</span>&nbsp;<span class="ident" id="5692975">typ</span>&nbsp;<span class="op" id="5692979">==</span>&nbsp;<span class="ident" id="5692982">nameType</span>&nbsp;<span class="op" id="5692991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5692996">v</span><span class="op" id="5692997">.</span><span class="ident" id="5692998">Set</span><span class="op" id="5693001">(</span><span class="ident" id="5693002">reflect</span><span class="op" id="5693009">.</span><span class="ident" id="5693010">ValueOf</span><span class="op" id="5693017">(</span><span class="ident" id="5693018">start</span><span class="op" id="5693023">.</span><span class="ident" id="5693024">Name</span><span class="op" id="5693028">)</span><span class="op" id="5693029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693034">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693047">sv</span>&nbsp;<span class="op" id="5693050">=</span>&nbsp;<span class="ident" id="5693052">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693056">tinfo</span><span class="op" id="5693061">,</span>&nbsp;<span class="ident" id="5693063">err</span>&nbsp;<span class="op" id="5693067">=</span>&nbsp;<span class="ident" id="5693069">getTypeInfo</span><span class="op" id="5693080">(</span><span class="ident" id="5693081">typ</span><span class="op" id="5693084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693088">if</span>&nbsp;<span class="ident" id="5693091">err</span>&nbsp;<span class="op" id="5693095">!=</span>&nbsp;<span class="ident" id="5693098">nil</span>&nbsp;<span class="op" id="5693102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693107">return</span>&nbsp;<span class="ident" id="5693114">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693120">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5693125">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693164">if</span>&nbsp;<span class="ident" id="5693167">tinfo</span><span class="op" id="5693172">.</span><span class="ident" id="5693173">xmlname</span>&nbsp;<span class="op" id="5693181">!=</span>&nbsp;<span class="ident" id="5693184">nil</span>&nbsp;<span class="op" id="5693188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693193">finfo</span>&nbsp;<span class="op" id="5693199">:=</span>&nbsp;<span class="ident" id="5693202">tinfo</span><span class="op" id="5693207">.</span><span class="ident" id="5693208">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693219">if</span>&nbsp;<span class="ident" id="5693222">finfo</span><span class="op" id="5693227">.</span><span class="ident" id="5693228">name</span>&nbsp;<span class="op" id="5693233">!=</span>&nbsp;<span class="string" id="5693236">&#34;&#34;</span>&nbsp;<span class="op" id="5693239">&amp;&amp;</span>&nbsp;<span class="ident" id="5693242">finfo</span><span class="op" id="5693247">.</span><span class="ident" id="5693248">name</span>&nbsp;<span class="op" id="5693253">!=</span>&nbsp;<span class="ident" id="5693256">start</span><span class="op" id="5693261">.</span><span class="ident" id="5693262">Name</span><span class="op" id="5693266">.</span><span class="ident" id="5693267">Local</span>&nbsp;<span class="op" id="5693273">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693279">return</span>&nbsp;<span class="ident" id="5693286">UnmarshalError</span><span class="op" id="5693300">(</span><span class="string" id="5693301">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5693327">+</span>&nbsp;<span class="ident" id="5693329">finfo</span><span class="op" id="5693334">.</span><span class="ident" id="5693335">name</span>&nbsp;<span class="op" id="5693340">+</span>&nbsp;<span class="string" id="5693342">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5693357">+</span>&nbsp;<span class="ident" id="5693359">start</span><span class="op" id="5693364">.</span><span class="ident" id="5693365">Name</span><span class="op" id="5693369">.</span><span class="ident" id="5693370">Local</span>&nbsp;<span class="op" id="5693376">+</span>&nbsp;<span class="string" id="5693378">&#34;&gt;&#34;</span><span class="op" id="5693381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693391">if</span>&nbsp;<span class="ident" id="5693394">finfo</span><span class="op" id="5693399">.</span><span class="ident" id="5693400">xmlns</span>&nbsp;<span class="op" id="5693406">!=</span>&nbsp;<span class="string" id="5693409">&#34;&#34;</span>&nbsp;<span class="op" id="5693412">&amp;&amp;</span>&nbsp;<span class="ident" id="5693415">finfo</span><span class="op" id="5693420">.</span><span class="ident" id="5693421">xmlns</span>&nbsp;<span class="op" id="5693427">!=</span>&nbsp;<span class="ident" id="5693430">start</span><span class="op" id="5693435">.</span><span class="ident" id="5693436">Name</span><span class="op" id="5693440">.</span><span class="ident" id="5693441">Space</span>&nbsp;<span class="op" id="5693447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693453">e</span>&nbsp;<span class="op" id="5693455">:=</span>&nbsp;<span class="string" id="5693458">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="5693479">+</span>&nbsp;<span class="ident" id="5693481">finfo</span><span class="op" id="5693486">.</span><span class="ident" id="5693487">name</span>&nbsp;<span class="op" id="5693492">+</span>&nbsp;<span class="string" id="5693494">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="5693513">+</span>&nbsp;<span class="ident" id="5693515">finfo</span><span class="op" id="5693520">.</span><span class="ident" id="5693521">xmlns</span>&nbsp;<span class="op" id="5693527">+</span>&nbsp;<span class="string" id="5693529">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693546">if</span>&nbsp;<span class="ident" id="5693549">start</span><span class="op" id="5693554">.</span><span class="ident" id="5693555">Name</span><span class="op" id="5693559">.</span><span class="ident" id="5693560">Space</span>&nbsp;<span class="op" id="5693566">==</span>&nbsp;<span class="string" id="5693569">&#34;&#34;</span>&nbsp;<span class="op" id="5693572">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693579">e</span>&nbsp;<span class="op" id="5693581">+=</span>&nbsp;<span class="string" id="5693584">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693604">}</span>&nbsp;<span class="keyword" id="5693606">else</span>&nbsp;<span class="op" id="5693611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693618">e</span>&nbsp;<span class="op" id="5693620">+=</span>&nbsp;<span class="ident" id="5693623">start</span><span class="op" id="5693628">.</span><span class="ident" id="5693629">Name</span><span class="op" id="5693633">.</span><span class="ident" id="5693634">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693650">return</span>&nbsp;<span class="ident" id="5693657">UnmarshalError</span><span class="op" id="5693671">(</span><span class="ident" id="5693672">e</span><span class="op" id="5693673">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693683">fv</span>&nbsp;<span class="op" id="5693686">:=</span>&nbsp;<span class="ident" id="5693689">finfo</span><span class="op" id="5693694">.</span><span class="ident" id="5693695">value</span><span class="op" id="5693700">(</span><span class="ident" id="5693701">sv</span><span class="op" id="5693703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693708">if</span>&nbsp;<span class="ident" id="5693711">_</span><span class="op" id="5693712">,</span>&nbsp;<span class="ident" id="5693714">ok</span>&nbsp;<span class="op" id="5693717">:=</span>&nbsp;<span class="ident" id="5693720">fv</span><span class="op" id="5693722">.</span><span class="ident" id="5693723">Interface</span><span class="op" id="5693732">(</span><span class="op" id="5693733">)</span><span class="op" id="5693734">.</span><span class="op" id="5693735">(</span><span class="ident" id="5693736">Name</span><span class="op" id="5693740">)</span><span class="op" id="5693741">;</span>&nbsp;<span class="ident" id="5693743">ok</span>&nbsp;<span class="op" id="5693746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693752">fv</span><span class="op" id="5693754">.</span><span class="ident" id="5693755">Set</span><span class="op" id="5693758">(</span><span class="ident" id="5693759">reflect</span><span class="op" id="5693766">.</span><span class="ident" id="5693767">ValueOf</span><span class="op" id="5693774">(</span><span class="ident" id="5693775">start</span><span class="op" id="5693780">.</span><span class="ident" id="5693781">Name</span><span class="op" id="5693785">)</span><span class="op" id="5693786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693791">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5693795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5693800">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5693824">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693897">for</span>&nbsp;<span class="ident" id="5693901">i</span>&nbsp;<span class="op" id="5693903">:=</span>&nbsp;<span class="keyword" id="5693906">range</span>&nbsp;<span class="ident" id="5693912">tinfo</span><span class="op" id="5693917">.</span><span class="ident" id="5693918">fields</span>&nbsp;<span class="op" id="5693925">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5693930">finfo</span>&nbsp;<span class="op" id="5693936">:=</span>&nbsp;<span class="op" id="5693939">&amp;</span><span class="ident" id="5693940">tinfo</span><span class="op" id="5693945">.</span><span class="ident" id="5693946">fields</span><span class="op" id="5693952">[</span><span class="ident" id="5693953">i</span><span class="op" id="5693954">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693959">switch</span>&nbsp;<span class="ident" id="5693966">finfo</span><span class="op" id="5693971">.</span><span class="ident" id="5693972">flags</span>&nbsp;<span class="op" id="5693978">&amp;</span>&nbsp;<span class="ident" id="5693980">fMode</span>&nbsp;<span class="op" id="5693986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5693991">case</span>&nbsp;<span class="ident" id="5693996">fAttr</span><span class="op" id="5694001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694007">strv</span>&nbsp;<span class="op" id="5694012">:=</span>&nbsp;<span class="ident" id="5694015">finfo</span><span class="op" id="5694020">.</span><span class="ident" id="5694021">value</span><span class="op" id="5694026">(</span><span class="ident" id="5694027">sv</span><span class="op" id="5694029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5694035">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694062">for</span>&nbsp;<span class="ident" id="5694066">_</span><span class="op" id="5694067">,</span>&nbsp;<span class="ident" id="5694069">a</span>&nbsp;<span class="op" id="5694071">:=</span>&nbsp;<span class="keyword" id="5694074">range</span>&nbsp;<span class="ident" id="5694080">start</span><span class="op" id="5694085">.</span><span class="ident" id="5694086">Attr</span>&nbsp;<span class="op" id="5694091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694098">if</span>&nbsp;<span class="ident" id="5694101">a</span><span class="op" id="5694102">.</span><span class="ident" id="5694103">Name</span><span class="op" id="5694107">.</span><span class="ident" id="5694108">Local</span>&nbsp;<span class="op" id="5694114">==</span>&nbsp;<span class="ident" id="5694117">finfo</span><span class="op" id="5694122">.</span><span class="ident" id="5694123">name</span>&nbsp;<span class="op" id="5694128">&amp;&amp;</span>&nbsp;<span class="op" id="5694131">(</span><span class="ident" id="5694132">finfo</span><span class="op" id="5694137">.</span><span class="ident" id="5694138">xmlns</span>&nbsp;<span class="op" id="5694144">==</span>&nbsp;<span class="string" id="5694147">&#34;&#34;</span>&nbsp;<span class="op" id="5694150">||</span>&nbsp;<span class="ident" id="5694153">finfo</span><span class="op" id="5694158">.</span><span class="ident" id="5694159">xmlns</span>&nbsp;<span class="op" id="5694165">==</span>&nbsp;<span class="ident" id="5694168">a</span><span class="op" id="5694169">.</span><span class="ident" id="5694170">Name</span><span class="op" id="5694174">.</span><span class="ident" id="5694175">Space</span><span class="op" id="5694180">)</span>&nbsp;<span class="op" id="5694182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694190">if</span>&nbsp;<span class="ident" id="5694193">err</span>&nbsp;<span class="op" id="5694197">:=</span>&nbsp;<span class="ident" id="5694200">p</span><span class="op" id="5694201">.</span><span class="ident" id="5694202">unmarshalAttr</span><span class="op" id="5694215">(</span><span class="ident" id="5694216">strv</span><span class="op" id="5694220">,</span>&nbsp;<span class="ident" id="5694222">a</span><span class="op" id="5694223">)</span><span class="op" id="5694224">;</span>&nbsp;<span class="ident" id="5694226">err</span>&nbsp;<span class="op" id="5694230">!=</span>&nbsp;<span class="ident" id="5694233">nil</span>&nbsp;<span class="op" id="5694237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694246">return</span>&nbsp;<span class="ident" id="5694253">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694263">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694271">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694294">case</span>&nbsp;<span class="ident" id="5694299">fCharData</span><span class="op" id="5694308">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694314">if</span>&nbsp;<span class="op" id="5694317">!</span><span class="ident" id="5694318">saveData</span><span class="op" id="5694326">.</span><span class="ident" id="5694327">IsValid</span><span class="op" id="5694334">(</span><span class="op" id="5694335">)</span>&nbsp;<span class="op" id="5694337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694344">saveData</span>&nbsp;<span class="op" id="5694353">=</span>&nbsp;<span class="ident" id="5694355">finfo</span><span class="op" id="5694360">.</span><span class="ident" id="5694361">value</span><span class="op" id="5694366">(</span><span class="ident" id="5694367">sv</span><span class="op" id="5694369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694381">case</span>&nbsp;<span class="ident" id="5694386">fComment</span><span class="op" id="5694394">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694400">if</span>&nbsp;<span class="op" id="5694403">!</span><span class="ident" id="5694404">saveComment</span><span class="op" id="5694415">.</span><span class="ident" id="5694416">IsValid</span><span class="op" id="5694423">(</span><span class="op" id="5694424">)</span>&nbsp;<span class="op" id="5694426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694433">saveComment</span>&nbsp;<span class="op" id="5694445">=</span>&nbsp;<span class="ident" id="5694447">finfo</span><span class="op" id="5694452">.</span><span class="ident" id="5694453">value</span><span class="op" id="5694458">(</span><span class="ident" id="5694459">sv</span><span class="op" id="5694461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694473">case</span>&nbsp;<span class="ident" id="5694478">fAny</span><span class="op" id="5694482">,</span>&nbsp;<span class="ident" id="5694484">fAny</span>&nbsp;<span class="op" id="5694489">|</span>&nbsp;<span class="ident" id="5694491">fElement</span><span class="op" id="5694499">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694505">if</span>&nbsp;<span class="op" id="5694508">!</span><span class="ident" id="5694509">saveAny</span><span class="op" id="5694516">.</span><span class="ident" id="5694517">IsValid</span><span class="op" id="5694524">(</span><span class="op" id="5694525">)</span>&nbsp;<span class="op" id="5694527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694534">saveAny</span>&nbsp;<span class="op" id="5694542">=</span>&nbsp;<span class="ident" id="5694544">finfo</span><span class="op" id="5694549">.</span><span class="ident" id="5694550">value</span><span class="op" id="5694555">(</span><span class="ident" id="5694556">sv</span><span class="op" id="5694558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694570">case</span>&nbsp;<span class="ident" id="5694575">fInnerXml</span><span class="op" id="5694584">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694590">if</span>&nbsp;<span class="op" id="5694593">!</span><span class="ident" id="5694594">saveXML</span><span class="op" id="5694601">.</span><span class="ident" id="5694602">IsValid</span><span class="op" id="5694609">(</span><span class="op" id="5694610">)</span>&nbsp;<span class="op" id="5694612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694619">saveXML</span>&nbsp;<span class="op" id="5694627">=</span>&nbsp;<span class="ident" id="5694629">finfo</span><span class="op" id="5694634">.</span><span class="ident" id="5694635">value</span><span class="op" id="5694640">(</span><span class="ident" id="5694641">sv</span><span class="op" id="5694643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694650">if</span>&nbsp;<span class="ident" id="5694653">p</span><span class="op" id="5694654">.</span><span class="ident" id="5694655">saved</span>&nbsp;<span class="op" id="5694661">==</span>&nbsp;<span class="ident" id="5694664">nil</span>&nbsp;<span class="op" id="5694668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694676">saveXMLIndex</span>&nbsp;<span class="op" id="5694689">=</span>&nbsp;<span class="num" id="5694691">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694699">p</span><span class="op" id="5694700">.</span><span class="ident" id="5694701">saved</span>&nbsp;<span class="op" id="5694707">=</span>&nbsp;<span class="builtinfunc" id="5694709">new</span><span class="op" id="5694712">(</span><span class="ident" id="5694713">bytes</span><span class="op" id="5694718">.</span><span class="ident" id="5694719">Buffer</span><span class="op" id="5694725">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694732">}</span>&nbsp;<span class="keyword" id="5694734">else</span>&nbsp;<span class="op" id="5694739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694747">saveXMLIndex</span>&nbsp;<span class="op" id="5694760">=</span>&nbsp;<span class="ident" id="5694762">p</span><span class="op" id="5694763">.</span><span class="ident" id="5694764">savedOffset</span><span class="op" id="5694775">(</span><span class="op" id="5694776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694794">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5694805">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5694827">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="5694866">Loop</span><span class="op" id="5694870">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694873">for</span>&nbsp;<span class="op" id="5694877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694881">var</span>&nbsp;<span class="ident" id="5694885">savedOffset</span>&nbsp;<span class="builtintype" id="5694897">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694903">if</span>&nbsp;<span class="ident" id="5694906">saveXML</span><span class="op" id="5694913">.</span><span class="ident" id="5694914">IsValid</span><span class="op" id="5694921">(</span><span class="op" id="5694922">)</span>&nbsp;<span class="op" id="5694924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694929">savedOffset</span>&nbsp;<span class="op" id="5694941">=</span>&nbsp;<span class="ident" id="5694943">p</span><span class="op" id="5694944">.</span><span class="ident" id="5694945">savedOffset</span><span class="op" id="5694956">(</span><span class="op" id="5694957">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5694961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5694965">tok</span><span class="op" id="5694968">,</span>&nbsp;<span class="ident" id="5694970">err</span>&nbsp;<span class="op" id="5694974">:=</span>&nbsp;<span class="ident" id="5694977">p</span><span class="op" id="5694978">.</span><span class="ident" id="5694979">Token</span><span class="op" id="5694984">(</span><span class="op" id="5694985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5694989">if</span>&nbsp;<span class="ident" id="5694992">err</span>&nbsp;<span class="op" id="5694996">!=</span>&nbsp;<span class="ident" id="5694999">nil</span>&nbsp;<span class="op" id="5695003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695008">return</span>&nbsp;<span class="ident" id="5695015">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695021">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695025">switch</span>&nbsp;<span class="ident" id="5695032">t</span>&nbsp;<span class="op" id="5695034">:=</span>&nbsp;<span class="ident" id="5695037">tok</span><span class="op" id="5695040">.</span><span class="op" id="5695041">(</span><span class="keyword" id="5695042">type</span><span class="op" id="5695046">)</span>&nbsp;<span class="op" id="5695048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695052">case</span>&nbsp;<span class="ident" id="5695057">StartElement</span><span class="op" id="5695069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695074">consumed</span>&nbsp;<span class="op" id="5695083">:=</span>&nbsp;<span class="builtintype" id="5695086">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695095">if</span>&nbsp;<span class="ident" id="5695098">sv</span><span class="op" id="5695100">.</span><span class="ident" id="5695101">IsValid</span><span class="op" id="5695108">(</span><span class="op" id="5695109">)</span>&nbsp;<span class="op" id="5695111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695117">consumed</span><span class="op" id="5695125">,</span>&nbsp;<span class="ident" id="5695127">err</span>&nbsp;<span class="op" id="5695131">=</span>&nbsp;<span class="ident" id="5695133">p</span><span class="op" id="5695134">.</span><span class="ident" id="5695135">unmarshalPath</span><span class="op" id="5695148">(</span><span class="ident" id="5695149">tinfo</span><span class="op" id="5695154">,</span>&nbsp;<span class="ident" id="5695156">sv</span><span class="op" id="5695158">,</span>&nbsp;<span class="ident" id="5695160">nil</span><span class="op" id="5695163">,</span>&nbsp;<span class="op" id="5695165">&amp;</span><span class="ident" id="5695166">t</span><span class="op" id="5695167">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695173">if</span>&nbsp;<span class="ident" id="5695176">err</span>&nbsp;<span class="op" id="5695180">!=</span>&nbsp;<span class="ident" id="5695183">nil</span>&nbsp;<span class="op" id="5695187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695194">return</span>&nbsp;<span class="ident" id="5695201">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695215">if</span>&nbsp;<span class="op" id="5695218">!</span><span class="ident" id="5695219">consumed</span>&nbsp;<span class="op" id="5695228">&amp;&amp;</span>&nbsp;<span class="ident" id="5695231">saveAny</span><span class="op" id="5695238">.</span><span class="ident" id="5695239">IsValid</span><span class="op" id="5695246">(</span><span class="op" id="5695247">)</span>&nbsp;<span class="op" id="5695249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695256">consumed</span>&nbsp;<span class="op" id="5695265">=</span>&nbsp;<span class="builtintype" id="5695267">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695277">if</span>&nbsp;<span class="ident" id="5695280">err</span>&nbsp;<span class="op" id="5695284">:=</span>&nbsp;<span class="ident" id="5695287">p</span><span class="op" id="5695288">.</span><span class="ident" id="5695289">unmarshal</span><span class="op" id="5695298">(</span><span class="ident" id="5695299">saveAny</span><span class="op" id="5695306">,</span>&nbsp;<span class="op" id="5695308">&amp;</span><span class="ident" id="5695309">t</span><span class="op" id="5695310">)</span><span class="op" id="5695311">;</span>&nbsp;<span class="ident" id="5695313">err</span>&nbsp;<span class="op" id="5695317">!=</span>&nbsp;<span class="ident" id="5695320">nil</span>&nbsp;<span class="op" id="5695324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695332">return</span>&nbsp;<span class="ident" id="5695339">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695359">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695364">if</span>&nbsp;<span class="op" id="5695367">!</span><span class="ident" id="5695368">consumed</span>&nbsp;<span class="op" id="5695377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695383">if</span>&nbsp;<span class="ident" id="5695386">err</span>&nbsp;<span class="op" id="5695390">:=</span>&nbsp;<span class="ident" id="5695393">p</span><span class="op" id="5695394">.</span><span class="ident" id="5695395">Skip</span><span class="op" id="5695399">(</span><span class="op" id="5695400">)</span><span class="op" id="5695401">;</span>&nbsp;<span class="ident" id="5695403">err</span>&nbsp;<span class="op" id="5695407">!=</span>&nbsp;<span class="ident" id="5695410">nil</span>&nbsp;<span class="op" id="5695414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695421">return</span>&nbsp;<span class="ident" id="5695428">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695441">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695446">case</span>&nbsp;<span class="ident" id="5695451">EndElement</span><span class="op" id="5695461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695466">if</span>&nbsp;<span class="ident" id="5695469">saveXML</span><span class="op" id="5695476">.</span><span class="ident" id="5695477">IsValid</span><span class="op" id="5695484">(</span><span class="op" id="5695485">)</span>&nbsp;<span class="op" id="5695487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695493">saveXMLData</span>&nbsp;<span class="op" id="5695505">=</span>&nbsp;<span class="ident" id="5695507">p</span><span class="op" id="5695508">.</span><span class="ident" id="5695509">saved</span><span class="op" id="5695514">.</span><span class="ident" id="5695515">Bytes</span><span class="op" id="5695520">(</span><span class="op" id="5695521">)</span><span class="op" id="5695522">[</span><span class="ident" id="5695523">saveXMLIndex</span><span class="op" id="5695535">:</span><span class="ident" id="5695536">savedOffset</span><span class="op" id="5695547">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695553">if</span>&nbsp;<span class="ident" id="5695556">saveXMLIndex</span>&nbsp;<span class="op" id="5695569">==</span>&nbsp;<span class="num" id="5695572">0</span>&nbsp;<span class="op" id="5695574">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695581">p</span><span class="op" id="5695582">.</span><span class="ident" id="5695583">saved</span>&nbsp;<span class="op" id="5695589">=</span>&nbsp;<span class="ident" id="5695591">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695609">break</span>&nbsp;<span class="ident" id="5695615">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695623">case</span>&nbsp;<span class="ident" id="5695628">CharData</span><span class="op" id="5695636">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695641">if</span>&nbsp;<span class="ident" id="5695644">saveData</span><span class="op" id="5695652">.</span><span class="ident" id="5695653">IsValid</span><span class="op" id="5695660">(</span><span class="op" id="5695661">)</span>&nbsp;<span class="op" id="5695663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695669">data</span>&nbsp;<span class="op" id="5695674">=</span>&nbsp;<span class="builtinfunc" id="5695676">append</span><span class="op" id="5695682">(</span><span class="ident" id="5695683">data</span><span class="op" id="5695687">,</span>&nbsp;<span class="ident" id="5695689">t</span><span class="op" id="5695690">...</span><span class="op" id="5695693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695703">case</span>&nbsp;<span class="ident" id="5695708">Comment</span><span class="op" id="5695715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695720">if</span>&nbsp;<span class="ident" id="5695723">saveComment</span><span class="op" id="5695734">.</span><span class="ident" id="5695735">IsValid</span><span class="op" id="5695742">(</span><span class="op" id="5695743">)</span>&nbsp;<span class="op" id="5695745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5695751">comment</span>&nbsp;<span class="op" id="5695759">=</span>&nbsp;<span class="builtinfunc" id="5695761">append</span><span class="op" id="5695767">(</span><span class="ident" id="5695768">comment</span><span class="op" id="5695775">,</span>&nbsp;<span class="ident" id="5695777">t</span><span class="op" id="5695778">...</span><span class="op" id="5695781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695790">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5695793">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695797">if</span>&nbsp;<span class="ident" id="5695800">saveData</span><span class="op" id="5695808">.</span><span class="ident" id="5695809">IsValid</span><span class="op" id="5695816">(</span><span class="op" id="5695817">)</span>&nbsp;<span class="op" id="5695819">&amp;&amp;</span>&nbsp;<span class="ident" id="5695822">saveData</span><span class="op" id="5695830">.</span><span class="ident" id="5695831">CanInterface</span><span class="op" id="5695843">(</span><span class="op" id="5695844">)</span>&nbsp;<span class="op" id="5695846">&amp;&amp;</span>&nbsp;<span class="ident" id="5695849">saveData</span><span class="op" id="5695857">.</span><span class="ident" id="5695858">Type</span><span class="op" id="5695862">(</span><span class="op" id="5695863">)</span><span class="op" id="5695864">.</span><span class="ident" id="5695865">Implements</span><span class="op" id="5695875">(</span><span class="ident" id="5695876">textUnmarshalerType</span><span class="op" id="5695895">)</span>&nbsp;<span class="op" id="5695897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695901">if</span>&nbsp;<span class="ident" id="5695904">err</span>&nbsp;<span class="op" id="5695908">:=</span>&nbsp;<span class="ident" id="5695911">saveData</span><span class="op" id="5695919">.</span><span class="ident" id="5695920">Interface</span><span class="op" id="5695929">(</span><span class="op" id="5695930">)</span><span class="op" id="5695931">.</span><span class="op" id="5695932">(</span><span class="ident" id="5695933">encoding</span><span class="op" id="5695941">.</span><span class="ident" id="5695942">TextUnmarshaler</span><span class="op" id="5695957">)</span><span class="op" id="5695958">.</span><span class="ident" id="5695959">UnmarshalText</span><span class="op" id="5695972">(</span><span class="ident" id="5695973">data</span><span class="op" id="5695977">)</span><span class="op" id="5695978">;</span>&nbsp;<span class="ident" id="5695980">err</span>&nbsp;<span class="op" id="5695984">!=</span>&nbsp;<span class="ident" id="5695987">nil</span>&nbsp;<span class="op" id="5695991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5695996">return</span>&nbsp;<span class="ident" id="5696003">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696013">saveData</span>&nbsp;<span class="op" id="5696022">=</span>&nbsp;<span class="ident" id="5696024">reflect</span><span class="op" id="5696031">.</span><span class="ident" id="5696032">Value</span><span class="op" id="5696037">{</span><span class="op" id="5696038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696045">if</span>&nbsp;<span class="ident" id="5696048">saveData</span><span class="op" id="5696056">.</span><span class="ident" id="5696057">IsValid</span><span class="op" id="5696064">(</span><span class="op" id="5696065">)</span>&nbsp;<span class="op" id="5696067">&amp;&amp;</span>&nbsp;<span class="ident" id="5696070">saveData</span><span class="op" id="5696078">.</span><span class="ident" id="5696079">CanAddr</span><span class="op" id="5696086">(</span><span class="op" id="5696087">)</span>&nbsp;<span class="op" id="5696089">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696093">pv</span>&nbsp;<span class="op" id="5696096">:=</span>&nbsp;<span class="ident" id="5696099">saveData</span><span class="op" id="5696107">.</span><span class="ident" id="5696108">Addr</span><span class="op" id="5696112">(</span><span class="op" id="5696113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696117">if</span>&nbsp;<span class="ident" id="5696120">pv</span><span class="op" id="5696122">.</span><span class="ident" id="5696123">CanInterface</span><span class="op" id="5696135">(</span><span class="op" id="5696136">)</span>&nbsp;<span class="op" id="5696138">&amp;&amp;</span>&nbsp;<span class="ident" id="5696141">pv</span><span class="op" id="5696143">.</span><span class="ident" id="5696144">Type</span><span class="op" id="5696148">(</span><span class="op" id="5696149">)</span><span class="op" id="5696150">.</span><span class="ident" id="5696151">Implements</span><span class="op" id="5696161">(</span><span class="ident" id="5696162">textUnmarshalerType</span><span class="op" id="5696181">)</span>&nbsp;<span class="op" id="5696183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696188">if</span>&nbsp;<span class="ident" id="5696191">err</span>&nbsp;<span class="op" id="5696195">:=</span>&nbsp;<span class="ident" id="5696198">pv</span><span class="op" id="5696200">.</span><span class="ident" id="5696201">Interface</span><span class="op" id="5696210">(</span><span class="op" id="5696211">)</span><span class="op" id="5696212">.</span><span class="op" id="5696213">(</span><span class="ident" id="5696214">encoding</span><span class="op" id="5696222">.</span><span class="ident" id="5696223">TextUnmarshaler</span><span class="op" id="5696238">)</span><span class="op" id="5696239">.</span><span class="ident" id="5696240">UnmarshalText</span><span class="op" id="5696253">(</span><span class="ident" id="5696254">data</span><span class="op" id="5696258">)</span><span class="op" id="5696259">;</span>&nbsp;<span class="ident" id="5696261">err</span>&nbsp;<span class="op" id="5696265">!=</span>&nbsp;<span class="ident" id="5696268">nil</span>&nbsp;<span class="op" id="5696272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696278">return</span>&nbsp;<span class="ident" id="5696285">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696292">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696297">saveData</span>&nbsp;<span class="op" id="5696306">=</span>&nbsp;<span class="ident" id="5696308">reflect</span><span class="op" id="5696315">.</span><span class="ident" id="5696316">Value</span><span class="op" id="5696321">{</span><span class="op" id="5696322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696333">if</span>&nbsp;<span class="ident" id="5696336">err</span>&nbsp;<span class="op" id="5696340">:=</span>&nbsp;<span class="ident" id="5696343">copyValue</span><span class="op" id="5696352">(</span><span class="ident" id="5696353">saveData</span><span class="op" id="5696361">,</span>&nbsp;<span class="ident" id="5696363">data</span><span class="op" id="5696367">)</span><span class="op" id="5696368">;</span>&nbsp;<span class="ident" id="5696370">err</span>&nbsp;<span class="op" id="5696374">!=</span>&nbsp;<span class="ident" id="5696377">nil</span>&nbsp;<span class="op" id="5696381">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696385">return</span>&nbsp;<span class="ident" id="5696392">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696401">switch</span>&nbsp;<span class="ident" id="5696408">t</span>&nbsp;<span class="op" id="5696410">:=</span>&nbsp;<span class="ident" id="5696413">saveComment</span><span class="op" id="5696424">;</span>&nbsp;<span class="ident" id="5696426">t</span><span class="op" id="5696427">.</span><span class="ident" id="5696428">Kind</span><span class="op" id="5696432">(</span><span class="op" id="5696433">)</span>&nbsp;<span class="op" id="5696435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696438">case</span>&nbsp;<span class="ident" id="5696443">reflect</span><span class="op" id="5696450">.</span><span class="ident" id="5696451">String</span><span class="op" id="5696457">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696461">t</span><span class="op" id="5696462">.</span><span class="ident" id="5696463">SetString</span><span class="op" id="5696472">(</span><span class="builtintype" id="5696473">string</span><span class="op" id="5696479">(</span><span class="ident" id="5696480">comment</span><span class="op" id="5696487">)</span><span class="op" id="5696488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696491">case</span>&nbsp;<span class="ident" id="5696496">reflect</span><span class="op" id="5696503">.</span><span class="ident" id="5696504">Slice</span><span class="op" id="5696509">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696513">t</span><span class="op" id="5696514">.</span><span class="ident" id="5696515">Set</span><span class="op" id="5696518">(</span><span class="ident" id="5696519">reflect</span><span class="op" id="5696526">.</span><span class="ident" id="5696527">ValueOf</span><span class="op" id="5696534">(</span><span class="ident" id="5696535">comment</span><span class="op" id="5696542">)</span><span class="op" id="5696543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696550">switch</span>&nbsp;<span class="ident" id="5696557">t</span>&nbsp;<span class="op" id="5696559">:=</span>&nbsp;<span class="ident" id="5696562">saveXML</span><span class="op" id="5696569">;</span>&nbsp;<span class="ident" id="5696571">t</span><span class="op" id="5696572">.</span><span class="ident" id="5696573">Kind</span><span class="op" id="5696577">(</span><span class="op" id="5696578">)</span>&nbsp;<span class="op" id="5696580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696583">case</span>&nbsp;<span class="ident" id="5696588">reflect</span><span class="op" id="5696595">.</span><span class="ident" id="5696596">String</span><span class="op" id="5696602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696606">t</span><span class="op" id="5696607">.</span><span class="ident" id="5696608">SetString</span><span class="op" id="5696617">(</span><span class="builtintype" id="5696618">string</span><span class="op" id="5696624">(</span><span class="ident" id="5696625">saveXMLData</span><span class="op" id="5696636">)</span><span class="op" id="5696637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696640">case</span>&nbsp;<span class="ident" id="5696645">reflect</span><span class="op" id="5696652">.</span><span class="ident" id="5696653">Slice</span><span class="op" id="5696658">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696662">t</span><span class="op" id="5696663">.</span><span class="ident" id="5696664">Set</span><span class="op" id="5696667">(</span><span class="ident" id="5696668">reflect</span><span class="op" id="5696675">.</span><span class="ident" id="5696676">ValueOf</span><span class="op" id="5696683">(</span><span class="ident" id="5696684">saveXMLData</span><span class="op" id="5696695">)</span><span class="op" id="5696696">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696703">return</span>&nbsp;<span class="ident" id="5696710">nil</span><br>
<span class="lineno"></span><span class="op" id="5696714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5696717">func</span>&nbsp;<span class="ident" id="5696722">copyValue</span><span class="op" id="5696731">(</span><span class="ident" id="5696732">dst</span>&nbsp;<span class="ident" id="5696736">reflect</span><span class="op" id="5696743">.</span><span class="ident" id="5696744">Value</span><span class="op" id="5696749">,</span>&nbsp;<span class="ident" id="5696751">src</span>&nbsp;<span class="op" id="5696755">[</span><span class="op" id="5696756">]</span><span class="builtintype" id="5696757">byte</span><span class="op" id="5696761">)</span>&nbsp;<span class="op" id="5696763">(</span><span class="ident" id="5696764">err</span>&nbsp;<span class="builtintype" id="5696768">error</span><span class="op" id="5696773">)</span>&nbsp;<span class="op" id="5696775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696778">dst0</span>&nbsp;<span class="op" id="5696783">:=</span>&nbsp;<span class="ident" id="5696786">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696792">if</span>&nbsp;<span class="ident" id="5696795">dst</span><span class="op" id="5696798">.</span><span class="ident" id="5696799">Kind</span><span class="op" id="5696803">(</span><span class="op" id="5696804">)</span>&nbsp;<span class="op" id="5696806">==</span>&nbsp;<span class="ident" id="5696809">reflect</span><span class="op" id="5696816">.</span><span class="ident" id="5696817">Ptr</span>&nbsp;<span class="op" id="5696821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696825">if</span>&nbsp;<span class="ident" id="5696828">dst</span><span class="op" id="5696831">.</span><span class="ident" id="5696832">IsNil</span><span class="op" id="5696837">(</span><span class="op" id="5696838">)</span>&nbsp;<span class="op" id="5696840">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696845">dst</span><span class="op" id="5696848">.</span><span class="ident" id="5696849">Set</span><span class="op" id="5696852">(</span><span class="ident" id="5696853">reflect</span><span class="op" id="5696860">.</span><span class="ident" id="5696861">New</span><span class="op" id="5696864">(</span><span class="ident" id="5696865">dst</span><span class="op" id="5696868">.</span><span class="ident" id="5696869">Type</span><span class="op" id="5696873">(</span><span class="op" id="5696874">)</span><span class="op" id="5696875">.</span><span class="ident" id="5696876">Elem</span><span class="op" id="5696880">(</span><span class="op" id="5696881">)</span><span class="op" id="5696882">)</span><span class="op" id="5696883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5696891">dst</span>&nbsp;<span class="op" id="5696895">=</span>&nbsp;<span class="ident" id="5696897">dst</span><span class="op" id="5696900">.</span><span class="ident" id="5696901">Elem</span><span class="op" id="5696905">(</span><span class="op" id="5696906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5696909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5696913">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696940">switch</span>&nbsp;<span class="ident" id="5696947">dst</span><span class="op" id="5696950">.</span><span class="ident" id="5696951">Kind</span><span class="op" id="5696955">(</span><span class="op" id="5696956">)</span>&nbsp;<span class="op" id="5696958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5696961">case</span>&nbsp;<span class="ident" id="5696966">reflect</span><span class="op" id="5696973">.</span><span class="ident" id="5696974">Invalid</span><span class="op" id="5696981">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5696985">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697009">default</span><span class="op" id="5697016">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697020">return</span>&nbsp;<span class="ident" id="5697027">errors</span><span class="op" id="5697033">.</span><span class="ident" id="5697034">New</span><span class="op" id="5697037">(</span><span class="string" id="5697038">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="5697063">+</span>&nbsp;<span class="ident" id="5697065">dst0</span><span class="op" id="5697069">.</span><span class="ident" id="5697070">Type</span><span class="op" id="5697074">(</span><span class="op" id="5697075">)</span><span class="op" id="5697076">.</span><span class="ident" id="5697077">String</span><span class="op" id="5697083">(</span><span class="op" id="5697084">)</span><span class="op" id="5697085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697088">case</span>&nbsp;<span class="ident" id="5697093">reflect</span><span class="op" id="5697100">.</span><span class="ident" id="5697101">Int</span><span class="op" id="5697104">,</span>&nbsp;<span class="ident" id="5697106">reflect</span><span class="op" id="5697113">.</span><span class="ident" id="5697114">Int8</span><span class="op" id="5697118">,</span>&nbsp;<span class="ident" id="5697120">reflect</span><span class="op" id="5697127">.</span><span class="ident" id="5697128">Int16</span><span class="op" id="5697133">,</span>&nbsp;<span class="ident" id="5697135">reflect</span><span class="op" id="5697142">.</span><span class="ident" id="5697143">Int32</span><span class="op" id="5697148">,</span>&nbsp;<span class="ident" id="5697150">reflect</span><span class="op" id="5697157">.</span><span class="ident" id="5697158">Int64</span><span class="op" id="5697163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697167">itmp</span><span class="op" id="5697171">,</span>&nbsp;<span class="ident" id="5697173">err</span>&nbsp;<span class="op" id="5697177">:=</span>&nbsp;<span class="ident" id="5697180">strconv</span><span class="op" id="5697187">.</span><span class="ident" id="5697188">ParseInt</span><span class="op" id="5697196">(</span><span class="builtintype" id="5697197">string</span><span class="op" id="5697203">(</span><span class="ident" id="5697204">src</span><span class="op" id="5697207">)</span><span class="op" id="5697208">,</span>&nbsp;<span class="num" id="5697210">10</span><span class="op" id="5697212">,</span>&nbsp;<span class="ident" id="5697214">dst</span><span class="op" id="5697217">.</span><span class="ident" id="5697218">Type</span><span class="op" id="5697222">(</span><span class="op" id="5697223">)</span><span class="op" id="5697224">.</span><span class="ident" id="5697225">Bits</span><span class="op" id="5697229">(</span><span class="op" id="5697230">)</span><span class="op" id="5697231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697235">if</span>&nbsp;<span class="ident" id="5697238">err</span>&nbsp;<span class="op" id="5697242">!=</span>&nbsp;<span class="ident" id="5697245">nil</span>&nbsp;<span class="op" id="5697249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697254">return</span>&nbsp;<span class="ident" id="5697261">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697271">dst</span><span class="op" id="5697274">.</span><span class="ident" id="5697275">SetInt</span><span class="op" id="5697281">(</span><span class="ident" id="5697282">itmp</span><span class="op" id="5697286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697289">case</span>&nbsp;<span class="ident" id="5697294">reflect</span><span class="op" id="5697301">.</span><span class="ident" id="5697302">Uint</span><span class="op" id="5697306">,</span>&nbsp;<span class="ident" id="5697308">reflect</span><span class="op" id="5697315">.</span><span class="ident" id="5697316">Uint8</span><span class="op" id="5697321">,</span>&nbsp;<span class="ident" id="5697323">reflect</span><span class="op" id="5697330">.</span><span class="ident" id="5697331">Uint16</span><span class="op" id="5697337">,</span>&nbsp;<span class="ident" id="5697339">reflect</span><span class="op" id="5697346">.</span><span class="ident" id="5697347">Uint32</span><span class="op" id="5697353">,</span>&nbsp;<span class="ident" id="5697355">reflect</span><span class="op" id="5697362">.</span><span class="ident" id="5697363">Uint64</span><span class="op" id="5697369">,</span>&nbsp;<span class="ident" id="5697371">reflect</span><span class="op" id="5697378">.</span><span class="ident" id="5697379">Uintptr</span><span class="op" id="5697386">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697390">utmp</span><span class="op" id="5697394">,</span>&nbsp;<span class="ident" id="5697396">err</span>&nbsp;<span class="op" id="5697400">:=</span>&nbsp;<span class="ident" id="5697403">strconv</span><span class="op" id="5697410">.</span><span class="ident" id="5697411">ParseUint</span><span class="op" id="5697420">(</span><span class="builtintype" id="5697421">string</span><span class="op" id="5697427">(</span><span class="ident" id="5697428">src</span><span class="op" id="5697431">)</span><span class="op" id="5697432">,</span>&nbsp;<span class="num" id="5697434">10</span><span class="op" id="5697436">,</span>&nbsp;<span class="ident" id="5697438">dst</span><span class="op" id="5697441">.</span><span class="ident" id="5697442">Type</span><span class="op" id="5697446">(</span><span class="op" id="5697447">)</span><span class="op" id="5697448">.</span><span class="ident" id="5697449">Bits</span><span class="op" id="5697453">(</span><span class="op" id="5697454">)</span><span class="op" id="5697455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697459">if</span>&nbsp;<span class="ident" id="5697462">err</span>&nbsp;<span class="op" id="5697466">!=</span>&nbsp;<span class="ident" id="5697469">nil</span>&nbsp;<span class="op" id="5697473">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697478">return</span>&nbsp;<span class="ident" id="5697485">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697495">dst</span><span class="op" id="5697498">.</span><span class="ident" id="5697499">SetUint</span><span class="op" id="5697506">(</span><span class="ident" id="5697507">utmp</span><span class="op" id="5697511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697514">case</span>&nbsp;<span class="ident" id="5697519">reflect</span><span class="op" id="5697526">.</span><span class="ident" id="5697527">Float32</span><span class="op" id="5697534">,</span>&nbsp;<span class="ident" id="5697536">reflect</span><span class="op" id="5697543">.</span><span class="ident" id="5697544">Float64</span><span class="op" id="5697551">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697555">ftmp</span><span class="op" id="5697559">,</span>&nbsp;<span class="ident" id="5697561">err</span>&nbsp;<span class="op" id="5697565">:=</span>&nbsp;<span class="ident" id="5697568">strconv</span><span class="op" id="5697575">.</span><span class="ident" id="5697576">ParseFloat</span><span class="op" id="5697586">(</span><span class="builtintype" id="5697587">string</span><span class="op" id="5697593">(</span><span class="ident" id="5697594">src</span><span class="op" id="5697597">)</span><span class="op" id="5697598">,</span>&nbsp;<span class="ident" id="5697600">dst</span><span class="op" id="5697603">.</span><span class="ident" id="5697604">Type</span><span class="op" id="5697608">(</span><span class="op" id="5697609">)</span><span class="op" id="5697610">.</span><span class="ident" id="5697611">Bits</span><span class="op" id="5697615">(</span><span class="op" id="5697616">)</span><span class="op" id="5697617">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697621">if</span>&nbsp;<span class="ident" id="5697624">err</span>&nbsp;<span class="op" id="5697628">!=</span>&nbsp;<span class="ident" id="5697631">nil</span>&nbsp;<span class="op" id="5697635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697640">return</span>&nbsp;<span class="ident" id="5697647">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697657">dst</span><span class="op" id="5697660">.</span><span class="ident" id="5697661">SetFloat</span><span class="op" id="5697669">(</span><span class="ident" id="5697670">ftmp</span><span class="op" id="5697674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697677">case</span>&nbsp;<span class="ident" id="5697682">reflect</span><span class="op" id="5697689">.</span><span class="ident" id="5697690">Bool</span><span class="op" id="5697694">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697698">value</span><span class="op" id="5697703">,</span>&nbsp;<span class="ident" id="5697705">err</span>&nbsp;<span class="op" id="5697709">:=</span>&nbsp;<span class="ident" id="5697712">strconv</span><span class="op" id="5697719">.</span><span class="ident" id="5697720">ParseBool</span><span class="op" id="5697729">(</span><span class="ident" id="5697730">strings</span><span class="op" id="5697737">.</span><span class="ident" id="5697738">TrimSpace</span><span class="op" id="5697747">(</span><span class="builtintype" id="5697748">string</span><span class="op" id="5697754">(</span><span class="ident" id="5697755">src</span><span class="op" id="5697758">)</span><span class="op" id="5697759">)</span><span class="op" id="5697760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697764">if</span>&nbsp;<span class="ident" id="5697767">err</span>&nbsp;<span class="op" id="5697771">!=</span>&nbsp;<span class="ident" id="5697774">nil</span>&nbsp;<span class="op" id="5697778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697783">return</span>&nbsp;<span class="ident" id="5697790">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697800">dst</span><span class="op" id="5697803">.</span><span class="ident" id="5697804">SetBool</span><span class="op" id="5697811">(</span><span class="ident" id="5697812">value</span><span class="op" id="5697817">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697820">case</span>&nbsp;<span class="ident" id="5697825">reflect</span><span class="op" id="5697832">.</span><span class="ident" id="5697833">String</span><span class="op" id="5697839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697843">dst</span><span class="op" id="5697846">.</span><span class="ident" id="5697847">SetString</span><span class="op" id="5697856">(</span><span class="builtintype" id="5697857">string</span><span class="op" id="5697863">(</span><span class="ident" id="5697864">src</span><span class="op" id="5697867">)</span><span class="op" id="5697868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697871">case</span>&nbsp;<span class="ident" id="5697876">reflect</span><span class="op" id="5697883">.</span><span class="ident" id="5697884">Slice</span><span class="op" id="5697889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697893">if</span>&nbsp;<span class="builtinfunc" id="5697896">len</span><span class="op" id="5697899">(</span><span class="ident" id="5697900">src</span><span class="op" id="5697903">)</span>&nbsp;<span class="op" id="5697905">==</span>&nbsp;<span class="num" id="5697908">0</span>&nbsp;<span class="op" id="5697910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5697915">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697946">src</span>&nbsp;<span class="op" id="5697950">=</span>&nbsp;<span class="op" id="5697952">[</span><span class="op" id="5697953">]</span><span class="builtintype" id="5697954">byte</span><span class="op" id="5697958">{</span><span class="op" id="5697959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5697967">dst</span><span class="op" id="5697970">.</span><span class="ident" id="5697971">SetBytes</span><span class="op" id="5697979">(</span><span class="ident" id="5697980">src</span><span class="op" id="5697983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5697986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5697989">return</span>&nbsp;<span class="ident" id="5697996">nil</span><br>
<span class="lineno">605</span><span class="op" id="5698000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5698003">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="5698067">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="5698106">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="5698175">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5698242">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="5698309">func</span>&nbsp;<span class="op" id="5698314">(</span><span class="ident" id="5698315">p</span>&nbsp;<span class="op" id="5698317">*</span><span class="ident" id="5698318">Decoder</span><span class="op" id="5698325">)</span>&nbsp;<span class="ident" id="5698327">unmarshalPath</span><span class="op" id="5698340">(</span><span class="ident" id="5698341">tinfo</span>&nbsp;<span class="op" id="5698347">*</span><span class="ident" id="5698348">typeInfo</span><span class="op" id="5698356">,</span>&nbsp;<span class="ident" id="5698358">sv</span>&nbsp;<span class="ident" id="5698361">reflect</span><span class="op" id="5698368">.</span><span class="ident" id="5698369">Value</span><span class="op" id="5698374">,</span>&nbsp;<span class="ident" id="5698376">parents</span>&nbsp;<span class="op" id="5698384">[</span><span class="op" id="5698385">]</span><span class="builtintype" id="5698386">string</span><span class="op" id="5698392">,</span>&nbsp;<span class="ident" id="5698394">start</span>&nbsp;<span class="op" id="5698400">*</span><span class="ident" id="5698401">StartElement</span><span class="op" id="5698413">)</span>&nbsp;<span class="op" id="5698415">(</span><span class="ident" id="5698416">consumed</span>&nbsp;<span class="builtintype" id="5698425">bool</span><span class="op" id="5698429">,</span>&nbsp;<span class="ident" id="5698431">err</span>&nbsp;<span class="builtintype" id="5698435">error</span><span class="op" id="5698440">)</span>&nbsp;<span class="op" id="5698442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698445">recurse</span>&nbsp;<span class="op" id="5698453">:=</span>&nbsp;<span class="builtintype" id="5698456">false</span><br>
<span class="lineno"></span><span class="ident" id="5698462">Loop</span><span class="op" id="5698466">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698469">for</span>&nbsp;<span class="ident" id="5698473">i</span>&nbsp;<span class="op" id="5698475">:=</span>&nbsp;<span class="keyword" id="5698478">range</span>&nbsp;<span class="ident" id="5698484">tinfo</span><span class="op" id="5698489">.</span><span class="ident" id="5698490">fields</span>&nbsp;<span class="op" id="5698497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5698501">finfo</span>&nbsp;<span class="op" id="5698507">:=</span>&nbsp;<span class="op" id="5698510">&amp;</span><span class="ident" id="5698511">tinfo</span><span class="op" id="5698516">.</span><span class="ident" id="5698517">fields</span><span class="op" id="5698523">[</span><span class="ident" id="5698524">i</span><span class="op" id="5698525">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698529">if</span>&nbsp;<span class="ident" id="5698532">finfo</span><span class="op" id="5698537">.</span><span class="ident" id="5698538">flags</span><span class="op" id="5698543">&amp;</span><span class="ident" id="5698544">fElement</span>&nbsp;<span class="op" id="5698553">==</span>&nbsp;<span class="num" id="5698556">0</span>&nbsp;<span class="op" id="5698558">||</span>&nbsp;<span class="builtinfunc" id="5698561">len</span><span class="op" id="5698564">(</span><span class="ident" id="5698565">finfo</span><span class="op" id="5698570">.</span><span class="ident" id="5698571">parents</span><span class="op" id="5698578">)</span>&nbsp;<span class="op" id="5698580">&lt;</span>&nbsp;<span class="builtinfunc" id="5698582">len</span><span class="op" id="5698585">(</span><span class="ident" id="5698586">parents</span><span class="op" id="5698593">)</span>&nbsp;<span class="op" id="5698595">||</span>&nbsp;<span class="ident" id="5698598">finfo</span><span class="op" id="5698603">.</span><span class="ident" id="5698604">xmlns</span>&nbsp;<span class="op" id="5698610">!=</span>&nbsp;<span class="string" id="5698613">&#34;&#34;</span>&nbsp;<span class="op" id="5698616">&amp;&amp;</span>&nbsp;<span class="ident" id="5698619">finfo</span><span class="op" id="5698624">.</span><span class="ident" id="5698625">xmlns</span>&nbsp;<span class="op" id="5698631">!=</span>&nbsp;<span class="ident" id="5698634">start</span><span class="op" id="5698639">.</span><span class="ident" id="5698640">Name</span><span class="op" id="5698644">.</span><span class="ident" id="5698645">Space</span>&nbsp;<span class="op" id="5698651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698656">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698667">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698671">for</span>&nbsp;<span class="ident" id="5698675">j</span>&nbsp;<span class="op" id="5698677">:=</span>&nbsp;<span class="keyword" id="5698680">range</span>&nbsp;<span class="ident" id="5698686">parents</span>&nbsp;<span class="op" id="5698694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698699">if</span>&nbsp;<span class="ident" id="5698702">parents</span><span class="op" id="5698709">[</span><span class="ident" id="5698710">j</span><span class="op" id="5698711">]</span>&nbsp;<span class="op" id="5698713">!=</span>&nbsp;<span class="ident" id="5698716">finfo</span><span class="op" id="5698721">.</span><span class="ident" id="5698722">parents</span><span class="op" id="5698729">[</span><span class="ident" id="5698730">j</span><span class="op" id="5698731">]</span>&nbsp;<span class="op" id="5698733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698739">continue</span>&nbsp;<span class="ident" id="5698748">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698760">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698764">if</span>&nbsp;<span class="builtinfunc" id="5698767">len</span><span class="op" id="5698770">(</span><span class="ident" id="5698771">finfo</span><span class="op" id="5698776">.</span><span class="ident" id="5698777">parents</span><span class="op" id="5698784">)</span>&nbsp;<span class="op" id="5698786">==</span>&nbsp;<span class="builtinfunc" id="5698789">len</span><span class="op" id="5698792">(</span><span class="ident" id="5698793">parents</span><span class="op" id="5698800">)</span>&nbsp;<span class="op" id="5698802">&amp;&amp;</span>&nbsp;<span class="ident" id="5698805">finfo</span><span class="op" id="5698810">.</span><span class="ident" id="5698811">name</span>&nbsp;<span class="op" id="5698816">==</span>&nbsp;<span class="ident" id="5698819">start</span><span class="op" id="5698824">.</span><span class="ident" id="5698825">Name</span><span class="op" id="5698829">.</span><span class="ident" id="5698830">Local</span>&nbsp;<span class="op" id="5698836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5698841">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698890">return</span>&nbsp;<span class="builtintype" id="5698897">true</span><span class="op" id="5698901">,</span>&nbsp;<span class="ident" id="5698903">p</span><span class="op" id="5698904">.</span><span class="ident" id="5698905">unmarshal</span><span class="op" id="5698914">(</span><span class="ident" id="5698915">finfo</span><span class="op" id="5698920">.</span><span class="ident" id="5698921">value</span><span class="op" id="5698926">(</span><span class="ident" id="5698927">sv</span><span class="op" id="5698929">)</span><span class="op" id="5698930">,</span>&nbsp;<span class="ident" id="5698932">start</span><span class="op" id="5698937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5698941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5698945">if</span>&nbsp;<span class="builtinfunc" id="5698948">len</span><span class="op" id="5698951">(</span><span class="ident" id="5698952">finfo</span><span class="op" id="5698957">.</span><span class="ident" id="5698958">parents</span><span class="op" id="5698965">)</span>&nbsp;<span class="op" id="5698967">&gt;</span>&nbsp;<span class="builtinfunc" id="5698969">len</span><span class="op" id="5698972">(</span><span class="ident" id="5698973">parents</span><span class="op" id="5698980">)</span>&nbsp;<span class="op" id="5698982">&amp;&amp;</span>&nbsp;<span class="ident" id="5698985">finfo</span><span class="op" id="5698990">.</span><span class="ident" id="5698991">parents</span><span class="op" id="5698998">[</span><span class="builtinfunc" id="5698999">len</span><span class="op" id="5699002">(</span><span class="ident" id="5699003">parents</span><span class="op" id="5699010">)</span><span class="op" id="5699011">]</span>&nbsp;<span class="op" id="5699013">==</span>&nbsp;<span class="ident" id="5699016">start</span><span class="op" id="5699021">.</span><span class="ident" id="5699022">Name</span><span class="op" id="5699026">.</span><span class="ident" id="5699027">Local</span>&nbsp;<span class="op" id="5699033">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699038">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699091">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699147">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699188">recurse</span>&nbsp;<span class="op" id="5699196">=</span>&nbsp;<span class="builtintype" id="5699198">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699207">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699255">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699288">parents</span>&nbsp;<span class="op" id="5699296">=</span>&nbsp;<span class="ident" id="5699298">finfo</span><span class="op" id="5699303">.</span><span class="ident" id="5699304">parents</span><span class="op" id="5699311">[</span><span class="op" id="5699312">:</span><span class="builtinfunc" id="5699313">len</span><span class="op" id="5699316">(</span><span class="ident" id="5699317">parents</span><span class="op" id="5699324">)</span><span class="op" id="5699325">+</span><span class="num" id="5699326">1</span><span class="op" id="5699327">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699332">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699340">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699346">if</span>&nbsp;<span class="op" id="5699349">!</span><span class="ident" id="5699350">recurse</span>&nbsp;<span class="op" id="5699358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699362">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699406">return</span>&nbsp;<span class="builtintype" id="5699413">false</span><span class="op" id="5699418">,</span>&nbsp;<span class="ident" id="5699420">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699425">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699428">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699490">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5699551">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699599">for</span>&nbsp;<span class="op" id="5699603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699607">var</span>&nbsp;<span class="ident" id="5699611">tok</span>&nbsp;<span class="ident" id="5699615">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699623">tok</span><span class="op" id="5699626">,</span>&nbsp;<span class="ident" id="5699628">err</span>&nbsp;<span class="op" id="5699632">=</span>&nbsp;<span class="ident" id="5699634">p</span><span class="op" id="5699635">.</span><span class="ident" id="5699636">Token</span><span class="op" id="5699641">(</span><span class="op" id="5699642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699646">if</span>&nbsp;<span class="ident" id="5699649">err</span>&nbsp;<span class="op" id="5699653">!=</span>&nbsp;<span class="ident" id="5699656">nil</span>&nbsp;<span class="op" id="5699660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699665">return</span>&nbsp;<span class="builtintype" id="5699672">true</span><span class="op" id="5699676">,</span>&nbsp;<span class="ident" id="5699678">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699688">switch</span>&nbsp;<span class="ident" id="5699695">t</span>&nbsp;<span class="op" id="5699697">:=</span>&nbsp;<span class="ident" id="5699700">tok</span><span class="op" id="5699703">.</span><span class="op" id="5699704">(</span><span class="keyword" id="5699705">type</span><span class="op" id="5699709">)</span>&nbsp;<span class="op" id="5699711">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699715">case</span>&nbsp;<span class="ident" id="5699720">StartElement</span><span class="op" id="5699732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5699737">consumed2</span><span class="op" id="5699746">,</span>&nbsp;<span class="ident" id="5699748">err</span>&nbsp;<span class="op" id="5699752">:=</span>&nbsp;<span class="ident" id="5699755">p</span><span class="op" id="5699756">.</span><span class="ident" id="5699757">unmarshalPath</span><span class="op" id="5699770">(</span><span class="ident" id="5699771">tinfo</span><span class="op" id="5699776">,</span>&nbsp;<span class="ident" id="5699778">sv</span><span class="op" id="5699780">,</span>&nbsp;<span class="ident" id="5699782">parents</span><span class="op" id="5699789">,</span>&nbsp;<span class="op" id="5699791">&amp;</span><span class="ident" id="5699792">t</span><span class="op" id="5699793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699798">if</span>&nbsp;<span class="ident" id="5699801">err</span>&nbsp;<span class="op" id="5699805">!=</span>&nbsp;<span class="ident" id="5699808">nil</span>&nbsp;<span class="op" id="5699812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699818">return</span>&nbsp;<span class="builtintype" id="5699825">true</span><span class="op" id="5699829">,</span>&nbsp;<span class="ident" id="5699831">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699838">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699843">if</span>&nbsp;<span class="op" id="5699846">!</span><span class="ident" id="5699847">consumed2</span>&nbsp;<span class="op" id="5699857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699863">if</span>&nbsp;<span class="ident" id="5699866">err</span>&nbsp;<span class="op" id="5699870">:=</span>&nbsp;<span class="ident" id="5699873">p</span><span class="op" id="5699874">.</span><span class="ident" id="5699875">Skip</span><span class="op" id="5699879">(</span><span class="op" id="5699880">)</span><span class="op" id="5699881">;</span>&nbsp;<span class="ident" id="5699883">err</span>&nbsp;<span class="op" id="5699887">!=</span>&nbsp;<span class="ident" id="5699890">nil</span>&nbsp;<span class="op" id="5699894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699901">return</span>&nbsp;<span class="builtintype" id="5699908">true</span><span class="op" id="5699912">,</span>&nbsp;<span class="ident" id="5699914">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699927">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699931">case</span>&nbsp;<span class="ident" id="5699936">EndElement</span><span class="op" id="5699946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5699951">return</span>&nbsp;<span class="builtintype" id="5699958">true</span><span class="op" id="5699962">,</span>&nbsp;<span class="ident" id="5699964">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5699973">}</span><br>
<span class="lineno"></span><span class="op" id="5699975">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5699978">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="5700037">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="5700097">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5700165">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="5700192">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5700256">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="5700322">func</span>&nbsp;<span class="op" id="5700327">(</span><span class="ident" id="5700328">d</span>&nbsp;<span class="op" id="5700330">*</span><span class="ident" id="5700331">Decoder</span><span class="op" id="5700338">)</span>&nbsp;<span class="ident" id="5700340">Skip</span><span class="op" id="5700344">(</span><span class="op" id="5700345">)</span>&nbsp;<span class="builtintype" id="5700347">error</span>&nbsp;<span class="op" id="5700353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700356">for</span>&nbsp;<span class="op" id="5700360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5700364">tok</span><span class="op" id="5700367">,</span>&nbsp;<span class="ident" id="5700369">err</span>&nbsp;<span class="op" id="5700373">:=</span>&nbsp;<span class="ident" id="5700376">d</span><span class="op" id="5700377">.</span><span class="ident" id="5700378">Token</span><span class="op" id="5700383">(</span><span class="op" id="5700384">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700388">if</span>&nbsp;<span class="ident" id="5700391">err</span>&nbsp;<span class="op" id="5700395">!=</span>&nbsp;<span class="ident" id="5700398">nil</span>&nbsp;<span class="op" id="5700402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700407">return</span>&nbsp;<span class="ident" id="5700414">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700424">switch</span>&nbsp;<span class="ident" id="5700431">tok</span><span class="op" id="5700434">.</span><span class="op" id="5700435">(</span><span class="keyword" id="5700436">type</span><span class="op" id="5700440">)</span>&nbsp;<span class="op" id="5700442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700446">case</span>&nbsp;<span class="ident" id="5700451">StartElement</span><span class="op" id="5700463">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700468">if</span>&nbsp;<span class="ident" id="5700471">err</span>&nbsp;<span class="op" id="5700475">:=</span>&nbsp;<span class="ident" id="5700478">d</span><span class="op" id="5700479">.</span><span class="ident" id="5700480">Skip</span><span class="op" id="5700484">(</span><span class="op" id="5700485">)</span><span class="op" id="5700486">;</span>&nbsp;<span class="ident" id="5700488">err</span>&nbsp;<span class="op" id="5700492">!=</span>&nbsp;<span class="ident" id="5700495">nil</span>&nbsp;<span class="op" id="5700499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700505">return</span>&nbsp;<span class="ident" id="5700512">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700523">case</span>&nbsp;<span class="ident" id="5700528">EndElement</span><span class="op" id="5700538">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5700543">return</span>&nbsp;<span class="ident" id="5700550">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5700559">}</span><br>
<span class="lineno"></span><span class="op" id="5700561">}</span>
</div>
</body>
</html>
