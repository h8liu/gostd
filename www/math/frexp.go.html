<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1460069">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1460124">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1460178">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1460229">package</span>&nbsp;<span class="ident" id="1460237">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1460243">//&nbsp;Frexp&nbsp;breaks&nbsp;f&nbsp;into&nbsp;a&nbsp;normalized&nbsp;fraction</span><br>
<span class="lineno"></span><span class="comment" id="1460288">//&nbsp;and&nbsp;an&nbsp;integral&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="comment" id="1460321">//&nbsp;It&nbsp;returns&nbsp;frac&nbsp;and&nbsp;exp&nbsp;satisfying&nbsp;f&nbsp;==&nbsp;frac&nbsp;×&nbsp;2**exp,</span><br>
<span class="lineno">10</span><span class="comment" id="1460380">//&nbsp;with&nbsp;the&nbsp;absolute&nbsp;value&nbsp;of&nbsp;frac&nbsp;in&nbsp;the&nbsp;interval&nbsp;[½,&nbsp;1).</span><br>
<span class="lineno"></span><span class="comment" id="1460440">//</span><br>
<span class="lineno"></span><span class="comment" id="1460443">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="1460465">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±0)&nbsp;=&nbsp;±0,&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="1460488">//&nbsp;&nbsp;&nbsp;&nbspFrexp(±Inf)&nbsp;=&nbsp;±Inf,&nbsp;0</span><br>
<span class="lineno">15</span><span class="comment" id="1460515">//&nbsp;&nbsp;&nbsp;&nbspFrexp(NaN)&nbsp;=&nbsp;NaN,&nbsp;0</span><br>
<span class="lineno"></span><span class="keyword" id="1460538">func</span>&nbsp;<span class="ident" id="1460543">Frexp</span><span class="op" id="1460548">(</span><span class="ident" id="1460549">f</span>&nbsp;<span class="builtintype" id="1460551">float64</span><span class="op" id="1460558">)</span>&nbsp;<span class="op" id="1460560">(</span><span class="ident" id="1460561">frac</span>&nbsp;<span class="builtintype" id="1460566">float64</span><span class="op" id="1460573">,</span>&nbsp;<span class="ident" id="1460575">exp</span>&nbsp;<span class="builtintype" id="1460579">int</span><span class="op" id="1460582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1460585">func</span>&nbsp;<span class="ident" id="1460590">frexp</span><span class="op" id="1460595">(</span><span class="ident" id="1460596">f</span>&nbsp;<span class="builtintype" id="1460598">float64</span><span class="op" id="1460605">)</span>&nbsp;<span class="op" id="1460607">(</span><span class="ident" id="1460608">frac</span>&nbsp;<span class="builtintype" id="1460613">float64</span><span class="op" id="1460620">,</span>&nbsp;<span class="ident" id="1460622">exp</span>&nbsp;<span class="builtintype" id="1460626">int</span><span class="op" id="1460629">)</span>&nbsp;<span class="op" id="1460631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1460634">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460652">switch</span>&nbsp;<span class="op" id="1460659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460662">case</span>&nbsp;<span class="ident" id="1460667"><a href="/math/frexp.go.html#1460596">f</a></span>&nbsp;<span class="op" id="1460669">==</span>&nbsp;<span class="num" id="1460672">0</span><span class="op" id="1460673">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460677">return</span>&nbsp;<span class="ident" id="1460684"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460685">,</span>&nbsp;<span class="num" id="1460687">0</span>&nbsp;<span class="comment" id="1460689">//&nbsp;correctly&nbsp;return&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460713">case</span>&nbsp;<span class="ident" id="1460718"><a href="/math/bits.go.html#1427892">IsInf</a></span><span class="op" id="1460723">(</span><span class="ident" id="1460724"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460725">,</span>&nbsp;<span class="num" id="1460727">0</span><span class="op" id="1460728">)</span>&nbsp;<span class="op" id="1460730">||</span>&nbsp;<span class="ident" id="1460733"><a href="/math/bits.go.html#1427394">IsNaN</a></span><span class="op" id="1460738">(</span><span class="ident" id="1460739"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460740">)</span><span class="op" id="1460741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460745">return</span>&nbsp;<span class="ident" id="1460752"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460753">,</span>&nbsp;<span class="num" id="1460755">0</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1460758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460761"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460762">,</span>&nbsp;<span class="ident" id="1460764"><a href="/math/frexp.go.html#1460622">exp</a></span>&nbsp;<span class="op" id="1460768">=</span>&nbsp;<span class="ident" id="1460770"><a href="/math/bits.go.html#1428329">normalize</a></span><span class="op" id="1460779">(</span><span class="ident" id="1460780"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460784">x</span>&nbsp;<span class="op" id="1460786">:=</span>&nbsp;<span class="ident" id="1460789"><a href="/math/unsafe.go.html#1556032">Float64bits</a></span><span class="op" id="1460800">(</span><span class="ident" id="1460801"><a href="/math/frexp.go.html#1460596">f</a></span><span class="op" id="1460802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460805"><a href="/math/frexp.go.html#1460622">exp</a></span>&nbsp;<span class="op" id="1460809">+=</span>&nbsp;<span class="builtintype" id="1460812">int</span><span class="op" id="1460815">(</span><span class="op" id="1460816">(</span><span class="ident" id="1460817"><a href="/math/frexp.go.html#1460784">x</a></span><span class="op" id="1460818">&gt;&gt;</span><span class="ident" id="1460820"><a href="/math/bits.go.html#1426968">shift</a></span><span class="op" id="1460825">)</span><span class="op" id="1460826">&amp;</span><span class="ident" id="1460827"><a href="/math/bits.go.html#1426950">mask</a></span><span class="op" id="1460831">)</span>&nbsp;<span class="op" id="1460833">-</span>&nbsp;<span class="ident" id="1460835"><a href="/math/bits.go.html#1426992">bias</a></span>&nbsp;<span class="op" id="1460840">+</span>&nbsp;<span class="num" id="1460842">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460845"><a href="/math/frexp.go.html#1460784">x</a></span>&nbsp;<span class="op" id="1460847">&amp;^=</span>&nbsp;<span class="ident" id="1460851"><a href="/math/bits.go.html#1426950">mask</a></span>&nbsp;<span class="op" id="1460856">&lt;&lt;</span>&nbsp;<span class="ident" id="1460859"><a href="/math/bits.go.html#1426968">shift</a></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460866"><a href="/math/frexp.go.html#1460784">x</a></span>&nbsp;<span class="op" id="1460868">|=</span>&nbsp;<span class="op" id="1460871">(</span><span class="op" id="1460872">-</span><span class="num" id="1460873">1</span>&nbsp;<span class="op" id="1460875">+</span>&nbsp;<span class="ident" id="1460877"><a href="/math/bits.go.html#1426992">bias</a></span><span class="op" id="1460881">)</span>&nbsp;<span class="op" id="1460883">&lt;&lt;</span>&nbsp;<span class="ident" id="1460886"><a href="/math/bits.go.html#1426968">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1460893"><a href="/math/frexp.go.html#1460608">frac</a></span>&nbsp;<span class="op" id="1460898">=</span>&nbsp;<span class="ident" id="1460900"><a href="/math/unsafe.go.html#1556218">Float64frombits</a></span><span class="op" id="1460915">(</span><span class="ident" id="1460916"><a href="/math/frexp.go.html#1460784">x</a></span><span class="op" id="1460917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1460920">return</span><br>
<span class="lineno"></span><span class="op" id="1460927">}</span>
</div>
</body>
</html>
