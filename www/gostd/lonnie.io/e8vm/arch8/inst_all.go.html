<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5052129">package</span>&nbsp;<span class="ident" id="5052137">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5052144">//&nbsp;InstArch8&nbsp;dispatches&nbsp;and&nbsp;executes&nbsp;an&nbsp;arch8&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="keyword" id="5052203">type</span>&nbsp;<span class="ident" id="5052208">instArch8</span>&nbsp;<span class="keyword" id="5052218">struct</span>&nbsp;<span class="op" id="5052225">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052228">reg</span>&nbsp;<span class="ident" id="5052232">instReg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052241">imm</span>&nbsp;<span class="ident" id="5052245">instImm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052254">br</span>&nbsp;&nbsp;<span class="ident" id="5052258">instBr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052266">sys</span>&nbsp;<span class="ident" id="5052270">instSys</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052279">jmp</span>&nbsp;<span class="ident" id="5052283">instJmp</span><br>
<span class="lineno">10</span><span class="op" id="5052291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5052294">//&nbsp;I&nbsp;executes&nbsp;an&nbsp;arch8&nbsp;instructino</span><br>
<span class="lineno"></span><span class="keyword" id="5052329">func</span>&nbsp;<span class="op" id="5052334">(</span><span class="ident" id="5052335">i</span>&nbsp;<span class="op" id="5052337">*</span><span class="ident" id="5052338">instArch8</span><span class="op" id="5052347">)</span>&nbsp;<span class="ident" id="5052349">I</span><span class="op" id="5052350">(</span><span class="ident" id="5052351">cpu</span>&nbsp;<span class="op" id="5052355">*</span><span class="ident" id="5052356">cpu</span><span class="op" id="5052359">,</span>&nbsp;<span class="ident" id="5052361">in</span>&nbsp;<span class="builtintype" id="5052364">uint32</span><span class="op" id="5052370">)</span>&nbsp;<span class="op" id="5052372">*</span><span class="ident" id="5052373">Excep</span>&nbsp;<span class="op" id="5052379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052382">if</span>&nbsp;<span class="op" id="5052385">(</span><span class="ident" id="5052386">in</span>&nbsp;<span class="op" id="5052389">&gt;&gt;</span>&nbsp;<span class="num" id="5052392">31</span><span class="op" id="5052394">)</span>&nbsp;<span class="op" id="5052396">==</span>&nbsp;<span class="num" id="5052399">0</span>&nbsp;<span class="op" id="5052401">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5052405">op</span>&nbsp;<span class="op" id="5052408">:=</span>&nbsp;<span class="op" id="5052411">(</span><span class="ident" id="5052412">in</span>&nbsp;<span class="op" id="5052415">&gt;&gt;</span>&nbsp;<span class="num" id="5052418">24</span><span class="op" id="5052420">)</span>&nbsp;<span class="op" id="5052422">&amp;</span>&nbsp;<span class="num" id="5052424">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052431">switch</span>&nbsp;<span class="op" id="5052438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052442">case</span>&nbsp;<span class="ident" id="5052447">op</span>&nbsp;<span class="op" id="5052450">==</span>&nbsp;<span class="num" id="5052453">0</span><span class="op" id="5052454">:</span>&nbsp;<span class="comment" id="5052456">//&nbsp;op&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052470">return</span>&nbsp;<span class="ident" id="5052477">i</span><span class="op" id="5052478">.</span><span class="ident" id="5052479">reg</span><span class="op" id="5052482">.</span><span class="ident" id="5052483">I</span><span class="op" id="5052484">(</span><span class="ident" id="5052485">cpu</span><span class="op" id="5052488">,</span>&nbsp;<span class="ident" id="5052490">in</span><span class="op" id="5052492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052496">case</span>&nbsp;<span class="ident" id="5052501">op</span>&nbsp;<span class="op" id="5052504">&lt;</span>&nbsp;<span class="num" id="5052506">32</span><span class="op" id="5052508">:</span>&nbsp;<span class="comment" id="5052510">//&nbsp;op&nbsp;in&nbsp;(0,&nbsp;32)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052530">return</span>&nbsp;<span class="ident" id="5052537">i</span><span class="op" id="5052538">.</span><span class="ident" id="5052539">imm</span><span class="op" id="5052542">.</span><span class="ident" id="5052543">I</span><span class="op" id="5052544">(</span><span class="ident" id="5052545">cpu</span><span class="op" id="5052548">,</span>&nbsp;<span class="ident" id="5052550">in</span><span class="op" id="5052552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052556">case</span>&nbsp;<span class="ident" id="5052561">op</span>&nbsp;<span class="op" id="5052564">&lt;</span>&nbsp;<span class="num" id="5052566">64</span><span class="op" id="5052568">:</span>&nbsp;<span class="comment" id="5052570">//&nbsp;op&nbsp;in&nbsp;[32,&nbsp;64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052591">return</span>&nbsp;<span class="ident" id="5052598">i</span><span class="op" id="5052599">.</span><span class="ident" id="5052600">br</span><span class="op" id="5052602">.</span><span class="ident" id="5052603">I</span><span class="op" id="5052604">(</span><span class="ident" id="5052605">cpu</span><span class="op" id="5052608">,</span>&nbsp;<span class="ident" id="5052610">in</span><span class="op" id="5052612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052616">case</span>&nbsp;<span class="ident" id="5052621">op</span>&nbsp;<span class="op" id="5052624">&lt;</span>&nbsp;<span class="num" id="5052626">128</span><span class="op" id="5052629">:</span>&nbsp;<span class="comment" id="5052631">//&nbsp;op&nbsp;in&nbsp;[64,&nbsp;128)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052653">return</span>&nbsp;<span class="ident" id="5052660">i</span><span class="op" id="5052661">.</span><span class="ident" id="5052662">sys</span><span class="op" id="5052665">.</span><span class="ident" id="5052666">I</span><span class="op" id="5052667">(</span><span class="ident" id="5052668">cpu</span><span class="op" id="5052671">,</span>&nbsp;<span class="ident" id="5052673">in</span><span class="op" id="5052675">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052679">default</span><span class="op" id="5052686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5052691">panic</span><span class="op" id="5052696">(</span><span class="string" id="5052697">&#34;bug&#34;</span><span class="op" id="5052702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5052709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5052713">return</span>&nbsp;<span class="ident" id="5052720">i</span><span class="op" id="5052721">.</span><span class="ident" id="5052722">jmp</span><span class="op" id="5052725">.</span><span class="ident" id="5052726">I</span><span class="op" id="5052727">(</span><span class="ident" id="5052728">cpu</span><span class="op" id="5052731">,</span>&nbsp;<span class="ident" id="5052733">in</span><span class="op" id="5052735">)</span><br>
<span class="lineno"></span><span class="op" id="5052737">}</span>
</div>
</body>
</html>
