<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5195336">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5195391">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5195445">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5195496">//&nbsp;Package&nbsp;tar&nbsp;implements&nbsp;access&nbsp;to&nbsp;tar&nbsp;archives.</span><br>
<span class="lineno"></span><span class="comment" id="5195546">//&nbsp;It&nbsp;aims&nbsp;to&nbsp;cover&nbsp;most&nbsp;of&nbsp;the&nbsp;variations,&nbsp;including&nbsp;those&nbsp;produced</span><br>
<span class="lineno"></span><span class="comment" id="5195615">//&nbsp;by&nbsp;GNU&nbsp;and&nbsp;BSD&nbsp;tars.</span><br>
<span class="lineno"></span><span class="comment" id="5195639">//</span><br>
<span class="lineno"></span><span class="comment" id="5195642">//&nbsp;References:</span><br>
<span class="lineno">10</span><span class="comment" id="5195657">//&nbsp;&nbsp;&nbsp;http://www.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=5</span><br>
<span class="lineno"></span><span class="comment" id="5195717">//&nbsp;&nbsp;&nbsp;http://www.gnu.org/software/tar/manual/html_node/Standard.html</span><br>
<span class="lineno"></span><span class="comment" id="5195785">//&nbsp;&nbsp;&nbsp;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html</span><br>
<span class="lineno"></span><span class="keyword" id="5195857">package</span>&nbsp;<span class="ident" id="5195865">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5195870">import</span>&nbsp;<span class="op" id="5195877">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195880">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195889">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195899">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195906">&#34;os&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195912">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5195920">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5195927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5195930">const</span>&nbsp;<span class="op" id="5195936">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195939">blockSize</span>&nbsp;<span class="op" id="5195949">=</span>&nbsp;<span class="num" id="5195951">512</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5195957">//&nbsp;Types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5195967">TypeReg</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5195985">=</span>&nbsp;<span class="string" id="5195987">&#39;0&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5195994">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196011">TypeRegA</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196029">=</span>&nbsp;<span class="string" id="5196031">&#39;\x00&#39;</span>&nbsp;<span class="comment" id="5196038">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196055">TypeLink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196073">=</span>&nbsp;<span class="string" id="5196075">&#39;1&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196082">//&nbsp;hard&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196096">TypeSymlink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196114">=</span>&nbsp;<span class="string" id="5196116">&#39;2&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196123">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196141">TypeChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196159">=</span>&nbsp;<span class="string" id="5196161">&#39;3&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196168">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196194">TypeBlock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196212">=</span>&nbsp;<span class="string" id="5196214">&#39;4&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196221">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196243">TypeDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196261">=</span>&nbsp;<span class="string" id="5196263">&#39;5&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196270">//&nbsp;directory</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196284">TypeFifo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196302">=</span>&nbsp;<span class="string" id="5196304">&#39;6&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196311">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196325">TypeCont</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196343">=</span>&nbsp;<span class="string" id="5196345">&#39;7&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196352">//&nbsp;reserved</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196365">TypeXHeader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196383">=</span>&nbsp;<span class="string" id="5196385">&#39;x&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196392">//&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196412">TypeXGlobalHeader</span>&nbsp;<span class="op" id="5196430">=</span>&nbsp;<span class="string" id="5196432">&#39;g&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196439">//&nbsp;global&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196466">TypeGNULongName</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5196484">=</span>&nbsp;<span class="string" id="5196486">&#39;L&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196493">//&nbsp;Next&nbsp;file&nbsp;has&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196523">TypeGNULongLink</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5196541">=</span>&nbsp;<span class="string" id="5196543">&#39;K&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196550">//&nbsp;Next&nbsp;file&nbsp;symlinks&nbsp;to&nbsp;a&nbsp;file&nbsp;w/&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196598">TypeGNUSparse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5196616">=</span>&nbsp;<span class="string" id="5196618">&#39;S&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196625">//&nbsp;sparse&nbsp;file</span><br>
<span class="lineno"></span><span class="op" id="5196640">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5196643">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;a&nbsp;single&nbsp;header&nbsp;in&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno">45</span><span class="comment" id="5196700">//&nbsp;Some&nbsp;fields&nbsp;may&nbsp;not&nbsp;be&nbsp;populated.</span><br>
<span class="lineno"></span><span class="keyword" id="5196737">type</span>&nbsp;<span class="ident" id="5196742">Header</span>&nbsp;<span class="keyword" id="5196749">struct</span>&nbsp;<span class="op" id="5196756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196759">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5196770">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196780">//&nbsp;name&nbsp;of&nbsp;header&nbsp;file&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196810">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5196821">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196831">//&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196860">Uid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5196871">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196881">//&nbsp;user&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196902">Gid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5196913">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196923">//&nbsp;group&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196945">Size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5196956">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5196966">//&nbsp;length&nbsp;in&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5196986">ModTime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5196997"><a href="/archive/tar/common.go.html#5195920">time</a></span><span class="op" id="5197001">.</span><span class="ident" id="5197002">Time</span>&nbsp;<span class="comment" id="5197007">//&nbsp;modified&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197025">Typeflag</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197036">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197046">//&nbsp;type&nbsp;of&nbsp;header&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197071">Linkname</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197082">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197092">//&nbsp;target&nbsp;name&nbsp;of&nbsp;link</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197116">Uname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197127">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197137">//&nbsp;user&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197160">Gname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5197171">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197181">//&nbsp;group&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197205">Devmajor</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5197216">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197226">//&nbsp;major&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197272">Devminor</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5197283">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5197293">//&nbsp;minor&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197339">AccessTime</span>&nbsp;<span class="ident" id="5197350"><a href="/archive/tar/common.go.html#5195920">time</a></span><span class="op" id="5197354">.</span><span class="ident" id="5197355">Time</span>&nbsp;<span class="comment" id="5197360">//&nbsp;access&nbsp;time</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197376">ChangeTime</span>&nbsp;<span class="ident" id="5197387"><a href="/archive/tar/common.go.html#5195920">time</a></span><span class="op" id="5197391">.</span><span class="ident" id="5197392">Time</span>&nbsp;<span class="comment" id="5197397">//&nbsp;status&nbsp;change&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197420">Xattrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5197431">map</span><span class="op" id="5197434">[</span><span class="builtintype" id="5197435">string</span><span class="op" id="5197441">]</span><span class="builtintype" id="5197442">string</span><br>
<span class="lineno"></span><span class="op" id="5197449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5197452">//&nbsp;File&nbsp;name&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno">65</span><span class="keyword" id="5197494">const</span>&nbsp;<span class="op" id="5197500">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197503">fileNameSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5197522">=</span>&nbsp;<span class="num" id="5197524">100</span>&nbsp;<span class="comment" id="5197528">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;a&nbsp;standard&nbsp;tar&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197580">fileNamePrefixSize</span>&nbsp;<span class="op" id="5197599">=</span>&nbsp;<span class="num" id="5197601">155</span>&nbsp;<span class="comment" id="5197605">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;ustar&nbsp;extension&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="op" id="5197649">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="5197652">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;Header.</span><br>
<span class="lineno"></span><span class="keyword" id="5197703">func</span>&nbsp;<span class="op" id="5197708">(</span><span class="ident" id="5197709">h</span>&nbsp;<span class="op" id="5197711">*</span><span class="ident" id="5197712"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="5197718">)</span>&nbsp;<span class="ident" id="5197720">FileInfo</span><span class="op" id="5197728">(</span><span class="op" id="5197729">)</span>&nbsp;<span class="ident" id="5197731"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5197733">.</span><span class="ident" id="5197734">FileInfo</span>&nbsp;<span class="op" id="5197743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5197746">return</span>&nbsp;<span class="ident" id="5197753"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5197767">{</span><span class="ident" id="5197768"><a href="/archive/tar/common.go.html#5197709">h</a></span><span class="op" id="5197769">}</span><br>
<span class="lineno"></span><span class="op" id="5197771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5197774">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5197816">type</span>&nbsp;<span class="ident" id="5197821">headerFileInfo</span>&nbsp;<span class="keyword" id="5197836">struct</span>&nbsp;<span class="op" id="5197843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5197846">h</span>&nbsp;<span class="op" id="5197848">*</span><span class="ident" id="5197849"><a href="/archive/tar/common.go.html#5196742">Header</a></span><br>
<span class="lineno"></span><span class="op" id="5197856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="5197859">func</span>&nbsp;<span class="op" id="5197864">(</span><span class="ident" id="5197865">fi</span>&nbsp;<span class="ident" id="5197868"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5197882">)</span>&nbsp;<span class="ident" id="5197884">Size</span><span class="op" id="5197888">(</span><span class="op" id="5197889">)</span>&nbsp;<span class="ident" id="5197891">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5197904">{</span>&nbsp;<span class="keyword" id="5197906">return</span>&nbsp;<span class="ident" id="5197913"><a href="/archive/tar/common.go.html#5197865">fi</a></span><span class="op" id="5197915">.</span><span class="ident" id="5197916">h</span><span class="op" id="5197917">.</span><span class="ident" id="5197918">Size</span>&nbsp;<span class="op" id="5197923">}</span><br>
<span class="lineno"></span><span class="keyword" id="5197925">func</span>&nbsp;<span class="op" id="5197930">(</span><span class="ident" id="5197931">fi</span>&nbsp;<span class="ident" id="5197934"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5197948">)</span>&nbsp;<span class="ident" id="5197950">IsDir</span><span class="op" id="5197955">(</span><span class="op" id="5197956">)</span>&nbsp;<span class="builtintype" id="5197958">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5197970">{</span>&nbsp;<span class="keyword" id="5197972">return</span>&nbsp;<span class="ident" id="5197979"><a href="/archive/tar/common.go.html#5197931">fi</a></span><span class="op" id="5197981">.</span><span class="ident" id="5197982">Mode</span><span class="op" id="5197986">(</span><span class="op" id="5197987">)</span><span class="op" id="5197988">.</span><span class="ident" id="5197989">IsDir</span><span class="op" id="5197994">(</span><span class="op" id="5197995">)</span>&nbsp;<span class="op" id="5197997">}</span><br>
<span class="lineno"></span><span class="keyword" id="5197999">func</span>&nbsp;<span class="op" id="5198004">(</span><span class="ident" id="5198005">fi</span>&nbsp;<span class="ident" id="5198008"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5198022">)</span>&nbsp;<span class="ident" id="5198024">ModTime</span><span class="op" id="5198031">(</span><span class="op" id="5198032">)</span>&nbsp;<span class="ident" id="5198034"><a href="/archive/tar/common.go.html#5195920">time</a></span><span class="op" id="5198038">.</span><span class="ident" id="5198039">Time</span>&nbsp;<span class="op" id="5198044">{</span>&nbsp;<span class="keyword" id="5198046">return</span>&nbsp;<span class="ident" id="5198053"><a href="/archive/tar/common.go.html#5198005">fi</a></span><span class="op" id="5198055">.</span><span class="ident" id="5198056">h</span><span class="op" id="5198057">.</span><span class="ident" id="5198058">ModTime</span>&nbsp;<span class="op" id="5198066">}</span><br>
<span class="lineno"></span><span class="keyword" id="5198068">func</span>&nbsp;<span class="op" id="5198073">(</span><span class="ident" id="5198074">fi</span>&nbsp;<span class="ident" id="5198077"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5198091">)</span>&nbsp;<span class="ident" id="5198093">Sys</span><span class="op" id="5198096">(</span><span class="op" id="5198097">)</span>&nbsp;<span class="keyword" id="5198099">interface</span><span class="op" id="5198108">{</span><span class="op" id="5198109">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5198113">{</span>&nbsp;<span class="keyword" id="5198115">return</span>&nbsp;<span class="ident" id="5198122"><a href="/archive/tar/common.go.html#5198074">fi</a></span><span class="op" id="5198124">.</span><span class="ident" id="5198125">h</span>&nbsp;<span class="op" id="5198127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="5198130">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5198173">func</span>&nbsp;<span class="op" id="5198178">(</span><span class="ident" id="5198179">fi</span>&nbsp;<span class="ident" id="5198182"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5198196">)</span>&nbsp;<span class="ident" id="5198198">Name</span><span class="op" id="5198202">(</span><span class="op" id="5198203">)</span>&nbsp;<span class="builtintype" id="5198205">string</span>&nbsp;<span class="op" id="5198212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198215">if</span>&nbsp;<span class="ident" id="5198218"><a href="/archive/tar/common.go.html#5198179">fi</a></span><span class="op" id="5198220">.</span><span class="ident" id="5198221">IsDir</span><span class="op" id="5198226">(</span><span class="op" id="5198227">)</span>&nbsp;<span class="op" id="5198229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198233">return</span>&nbsp;<span class="ident" id="5198240"><a href="/archive/tar/common.go.html#5195912">path</a></span><span class="op" id="5198244">.</span><span class="ident" id="5198245">Base</span><span class="op" id="5198249">(</span><span class="ident" id="5198250"><a href="/archive/tar/common.go.html#5195912">path</a></span><span class="op" id="5198254">.</span><span class="ident" id="5198255">Clean</span><span class="op" id="5198260">(</span><span class="ident" id="5198261"><a href="/archive/tar/common.go.html#5198179">fi</a></span><span class="op" id="5198263">.</span><span class="ident" id="5198264">h</span><span class="op" id="5198265">.</span><span class="ident" id="5198266">Name</span><span class="op" id="5198270">)</span><span class="op" id="5198271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198274">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198277">return</span>&nbsp;<span class="ident" id="5198284"><a href="/archive/tar/common.go.html#5195912">path</a></span><span class="op" id="5198288">.</span><span class="ident" id="5198289">Base</span><span class="op" id="5198293">(</span><span class="ident" id="5198294"><a href="/archive/tar/common.go.html#5198179">fi</a></span><span class="op" id="5198296">.</span><span class="ident" id="5198297">h</span><span class="op" id="5198298">.</span><span class="ident" id="5198299">Name</span><span class="op" id="5198303">)</span><br>
<span class="lineno"></span><span class="op" id="5198305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5198308">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;headerFileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="5198377">func</span>&nbsp;<span class="op" id="5198382">(</span><span class="ident" id="5198383">fi</span>&nbsp;<span class="ident" id="5198386"><a href="/archive/tar/common.go.html#5197821">headerFileInfo</a></span><span class="op" id="5198400">)</span>&nbsp;<span class="ident" id="5198402">Mode</span><span class="op" id="5198406">(</span><span class="op" id="5198407">)</span>&nbsp;<span class="op" id="5198409">(</span><span class="ident" id="5198410">mode</span>&nbsp;<span class="ident" id="5198415"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198417">.</span><span class="ident" id="5198418">FileMode</span><span class="op" id="5198426">)</span>&nbsp;<span class="op" id="5198428">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198431">//&nbsp;Set&nbsp;file&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198461"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198466">=</span>&nbsp;<span class="ident" id="5198468"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198470">.</span><span class="ident" id="5198471">FileMode</span><span class="op" id="5198479">(</span><span class="ident" id="5198480"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5198482">.</span><span class="ident" id="5198483">h</span><span class="op" id="5198484">.</span><span class="ident" id="5198485">Mode</span><span class="op" id="5198489">)</span><span class="op" id="5198490">.</span><span class="ident" id="5198491">Perm</span><span class="op" id="5198495">(</span><span class="op" id="5198496">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198500">//&nbsp;Set&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198540">if</span>&nbsp;<span class="ident" id="5198543"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5198545">.</span><span class="ident" id="5198546">h</span><span class="op" id="5198547">.</span><span class="ident" id="5198548">Mode</span><span class="op" id="5198552">&amp;</span><span class="ident" id="5198553"><a href="/archive/tar/common.go.html#5199852">c_ISUID</a></span>&nbsp;<span class="op" id="5198561">!=</span>&nbsp;<span class="num" id="5198564">0</span>&nbsp;<span class="op" id="5198566">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198570">//&nbsp;setuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198582"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198587">|=</span>&nbsp;<span class="ident" id="5198590"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198592">.</span><span class="ident" id="5198593">ModeSetuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198608">if</span>&nbsp;<span class="ident" id="5198611"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5198613">.</span><span class="ident" id="5198614">h</span><span class="op" id="5198615">.</span><span class="ident" id="5198616">Mode</span><span class="op" id="5198620">&amp;</span><span class="ident" id="5198621"><a href="/archive/tar/common.go.html#5199883">c_ISGID</a></span>&nbsp;<span class="op" id="5198629">!=</span>&nbsp;<span class="num" id="5198632">0</span>&nbsp;<span class="op" id="5198634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198638">//&nbsp;setgid</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198650"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198655">|=</span>&nbsp;<span class="ident" id="5198658"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198660">.</span><span class="ident" id="5198661">ModeSetgid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198676">if</span>&nbsp;<span class="ident" id="5198679"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5198681">.</span><span class="ident" id="5198682">h</span><span class="op" id="5198683">.</span><span class="ident" id="5198684">Mode</span><span class="op" id="5198688">&amp;</span><span class="ident" id="5198689"><a href="/archive/tar/common.go.html#5199914">c_ISVTX</a></span>&nbsp;<span class="op" id="5198697">!=</span>&nbsp;<span class="num" id="5198700">0</span>&nbsp;<span class="op" id="5198702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198706">//&nbsp;sticky</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198718"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198723">|=</span>&nbsp;<span class="ident" id="5198726"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198728">.</span><span class="ident" id="5198729">ModeSticky</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198745">//&nbsp;Set&nbsp;file&nbsp;mode&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198769">//&nbsp;clear&nbsp;perm,&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198817">m</span>&nbsp;<span class="op" id="5198819">:=</span>&nbsp;<span class="ident" id="5198822"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198824">.</span><span class="ident" id="5198825">FileMode</span><span class="op" id="5198833">(</span><span class="ident" id="5198834"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5198836">.</span><span class="ident" id="5198837">h</span><span class="op" id="5198838">.</span><span class="ident" id="5198839">Mode</span><span class="op" id="5198843">)</span>&nbsp;<span class="op" id="5198845">&amp;^</span>&nbsp;<span class="num" id="5198848">07777</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198855">if</span>&nbsp;<span class="ident" id="5198858"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5198860">==</span>&nbsp;<span class="ident" id="5198863"><a href="/archive/tar/common.go.html#5199960">c_ISDIR</a></span>&nbsp;<span class="op" id="5198871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198875">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198890"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198895">|=</span>&nbsp;<span class="ident" id="5198898"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198900">.</span><span class="ident" id="5198901">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198913">if</span>&nbsp;<span class="ident" id="5198916"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5198918">==</span>&nbsp;<span class="ident" id="5198921"><a href="/archive/tar/common.go.html#5199993">c_ISFIFO</a></span>&nbsp;<span class="op" id="5198930">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5198934">//&nbsp;named&nbsp;pipe&nbsp;(FIFO)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5198957"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5198962">|=</span>&nbsp;<span class="ident" id="5198965"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5198967">.</span><span class="ident" id="5198968">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5198983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5198986">if</span>&nbsp;<span class="ident" id="5198989"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5198991">==</span>&nbsp;<span class="ident" id="5198994"><a href="/archive/tar/common.go.html#5200057">c_ISLNK</a></span>&nbsp;<span class="op" id="5199002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199006">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199025"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199030">|=</span>&nbsp;<span class="ident" id="5199033"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199035">.</span><span class="ident" id="5199036">ModeSymlink</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199052">if</span>&nbsp;<span class="ident" id="5199055"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5199057">==</span>&nbsp;<span class="ident" id="5199060"><a href="/archive/tar/common.go.html#5200094">c_ISBLK</a></span>&nbsp;<span class="op" id="5199068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199072">//&nbsp;device&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199089"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199094">|=</span>&nbsp;<span class="ident" id="5199097"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199099">.</span><span class="ident" id="5199100">ModeDevice</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199115">if</span>&nbsp;<span class="ident" id="5199118"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5199120">==</span>&nbsp;<span class="ident" id="5199123"><a href="/archive/tar/common.go.html#5200136">c_ISCHR</a></span>&nbsp;<span class="op" id="5199131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199135">//&nbsp;Unix&nbsp;character&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199162"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199167">|=</span>&nbsp;<span class="ident" id="5199170"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199172">.</span><span class="ident" id="5199173">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199186"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199191">|=</span>&nbsp;<span class="ident" id="5199194"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199196">.</span><span class="ident" id="5199197">ModeCharDevice</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199216">if</span>&nbsp;<span class="ident" id="5199219"><a href="/archive/tar/common.go.html#5198817">m</a></span>&nbsp;<span class="op" id="5199221">==</span>&nbsp;<span class="ident" id="5199224"><a href="/archive/tar/common.go.html#5200182">c_ISSOCK</a></span>&nbsp;<span class="op" id="5199233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199237">//&nbsp;Unix&nbsp;domain&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199261"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199266">|=</span>&nbsp;<span class="ident" id="5199269"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199271">.</span><span class="ident" id="5199272">ModeSocket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199284">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199288">switch</span>&nbsp;<span class="ident" id="5199295"><a href="/archive/tar/common.go.html#5198383">fi</a></span><span class="op" id="5199297">.</span><span class="ident" id="5199298">h</span><span class="op" id="5199299">.</span><span class="ident" id="5199300">Typeflag</span>&nbsp;<span class="op" id="5199309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199312">case</span>&nbsp;<span class="ident" id="5199317"><a href="/archive/tar/common.go.html#5196055">TypeLink</a></span><span class="op" id="5199325">,</span>&nbsp;<span class="ident" id="5199327"><a href="/archive/tar/common.go.html#5196096">TypeSymlink</a></span><span class="op" id="5199338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199342">//&nbsp;hard&nbsp;link,&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199372"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199377">|=</span>&nbsp;<span class="ident" id="5199380"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199382">.</span><span class="ident" id="5199383">ModeSymlink</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199396">case</span>&nbsp;<span class="ident" id="5199401"><a href="/archive/tar/common.go.html#5196141">TypeChar</a></span><span class="op" id="5199409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199413">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199440"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199445">|=</span>&nbsp;<span class="ident" id="5199448"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199450">.</span><span class="ident" id="5199451">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199464"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199469">|=</span>&nbsp;<span class="ident" id="5199472"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199474">.</span><span class="ident" id="5199475">ModeCharDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199491">case</span>&nbsp;<span class="ident" id="5199496"><a href="/archive/tar/common.go.html#5196194">TypeBlock</a></span><span class="op" id="5199505">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199509">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199532"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199537">|=</span>&nbsp;<span class="ident" id="5199540"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199542">.</span><span class="ident" id="5199543">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199555">case</span>&nbsp;<span class="ident" id="5199560"><a href="/archive/tar/common.go.html#5196243">TypeDir</a></span><span class="op" id="5199567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199571">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199586"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199591">|=</span>&nbsp;<span class="ident" id="5199594"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199596">.</span><span class="ident" id="5199597">ModeDir</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199606">case</span>&nbsp;<span class="ident" id="5199611"><a href="/archive/tar/common.go.html#5196284">TypeFifo</a></span><span class="op" id="5199619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5199623">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199638"><a href="/archive/tar/common.go.html#5198410">mode</a></span>&nbsp;<span class="op" id="5199643">|=</span>&nbsp;<span class="ident" id="5199646"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199648">.</span><span class="ident" id="5199649">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5199664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5199668">return</span>&nbsp;<span class="ident" id="5199675"><a href="/archive/tar/common.go.html#5198410">mode</a></span><br>
<span class="lineno"></span><span class="op" id="5199680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5199683">//&nbsp;sysStat,&nbsp;if&nbsp;non-nil,&nbsp;populates&nbsp;h&nbsp;from&nbsp;system-dependent&nbsp;fields&nbsp;of&nbsp;fi.</span><br>
<span class="lineno"></span><span class="keyword" id="5199755">var</span>&nbsp;<span class="ident" id="5199759">sysStat</span>&nbsp;<span class="keyword" id="5199767">func</span><span class="op" id="5199771">(</span><span class="ident" id="5199772">fi</span>&nbsp;<span class="ident" id="5199775"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5199777">.</span><span class="ident" id="5199778">FileInfo</span><span class="op" id="5199786">,</span>&nbsp;<span class="ident" id="5199788">h</span>&nbsp;<span class="op" id="5199790">*</span><span class="ident" id="5199791"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="5199797">)</span>&nbsp;<span class="builtintype" id="5199799">error</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="5199806">//&nbsp;Mode&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="5199843">const</span>&nbsp;<span class="op" id="5199849">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199852">c_ISUID</span>&nbsp;&nbsp;<span class="op" id="5199861">=</span>&nbsp;<span class="num" id="5199863">04000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5199871">//&nbsp;Set&nbsp;uid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199883">c_ISGID</span>&nbsp;&nbsp;<span class="op" id="5199892">=</span>&nbsp;<span class="num" id="5199894">02000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5199902">//&nbsp;Set&nbsp;gid</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199914">c_ISVTX</span>&nbsp;&nbsp;<span class="op" id="5199923">=</span>&nbsp;<span class="num" id="5199925">01000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5199933">//&nbsp;Save&nbsp;text&nbsp;(sticky&nbsp;bit)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199960">c_ISDIR</span>&nbsp;&nbsp;<span class="op" id="5199969">=</span>&nbsp;<span class="num" id="5199971">040000</span>&nbsp;&nbsp;<span class="comment" id="5199979">//&nbsp;Directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5199993">c_ISFIFO</span>&nbsp;<span class="op" id="5200002">=</span>&nbsp;<span class="num" id="5200004">010000</span>&nbsp;&nbsp;<span class="comment" id="5200012">//&nbsp;FIFO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200021">c_ISREG</span>&nbsp;&nbsp;<span class="op" id="5200030">=</span>&nbsp;<span class="num" id="5200032">0100000</span>&nbsp;<span class="comment" id="5200040">//&nbsp;Regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200057">c_ISLNK</span>&nbsp;&nbsp;<span class="op" id="5200066">=</span>&nbsp;<span class="num" id="5200068">0120000</span>&nbsp;<span class="comment" id="5200076">//&nbsp;Symbolic&nbsp;link</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200094">c_ISBLK</span>&nbsp;&nbsp;<span class="op" id="5200103">=</span>&nbsp;<span class="num" id="5200105">060000</span>&nbsp;&nbsp;<span class="comment" id="5200113">//&nbsp;Block&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200136">c_ISCHR</span>&nbsp;&nbsp;<span class="op" id="5200145">=</span>&nbsp;<span class="num" id="5200147">020000</span>&nbsp;&nbsp;<span class="comment" id="5200155">//&nbsp;Character&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200182">c_ISSOCK</span>&nbsp;<span class="op" id="5200191">=</span>&nbsp;<span class="num" id="5200193">0140000</span>&nbsp;<span class="comment" id="5200201">//&nbsp;Socket</span><br>
<span class="lineno"></span><span class="op" id="5200211">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="5200214">//&nbsp;Keywords&nbsp;for&nbsp;the&nbsp;PAX&nbsp;Extended&nbsp;Header</span><br>
<span class="lineno"></span><span class="keyword" id="5200254">const</span>&nbsp;<span class="op" id="5200260">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200263">paxAtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200275">=</span>&nbsp;<span class="string" id="5200277">&#34;atime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200286">paxCharset</span>&nbsp;&nbsp;<span class="op" id="5200298">=</span>&nbsp;<span class="string" id="5200300">&#34;charset&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200311">paxComment</span>&nbsp;&nbsp;<span class="op" id="5200323">=</span>&nbsp;<span class="string" id="5200325">&#34;comment&#34;</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200336">paxCtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200348">=</span>&nbsp;<span class="string" id="5200350">&#34;ctime&#34;</span>&nbsp;<span class="comment" id="5200358">//&nbsp;please&nbsp;note&nbsp;that&nbsp;ctime&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;pax&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200412">paxGid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200424">=</span>&nbsp;<span class="string" id="5200426">&#34;gid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200433">paxGname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200445">=</span>&nbsp;<span class="string" id="5200447">&#34;gname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200456">paxLinkpath</span>&nbsp;<span class="op" id="5200468">=</span>&nbsp;<span class="string" id="5200470">&#34;linkpath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200482">paxMtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200494">=</span>&nbsp;<span class="string" id="5200496">&#34;mtime&#34;</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200505">paxPath</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200517">=</span>&nbsp;<span class="string" id="5200519">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200527">paxSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200539">=</span>&nbsp;<span class="string" id="5200541">&#34;size&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200549">paxUid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200561">=</span>&nbsp;<span class="string" id="5200563">&#34;uid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200570">paxUname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200582">=</span>&nbsp;<span class="string" id="5200584">&#34;uname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200593">paxXattr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200605">=</span>&nbsp;<span class="string" id="5200607">&#34;SCHILY.xattr.&#34;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5200624">paxNone</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5200636">=</span>&nbsp;<span class="string" id="5200638">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="5200641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5200644">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;Header&nbsp;from&nbsp;fi.</span><br>
<span class="lineno"></span><span class="comment" id="5200708">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;symlink,&nbsp;FileInfoHeader&nbsp;records&nbsp;link&nbsp;as&nbsp;the&nbsp;link&nbsp;target.</span><br>
<span class="lineno">200</span><span class="comment" id="5200786">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;directory,&nbsp;a&nbsp;slash&nbsp;is&nbsp;appended&nbsp;to&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5200851">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5200918">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5200989">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5201058">func</span>&nbsp;<span class="ident" id="5201063">FileInfoHeader</span><span class="op" id="5201077">(</span><span class="ident" id="5201078">fi</span>&nbsp;<span class="ident" id="5201081"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201083">.</span><span class="ident" id="5201084">FileInfo</span><span class="op" id="5201092">,</span>&nbsp;<span class="ident" id="5201094">link</span>&nbsp;<span class="builtintype" id="5201099">string</span><span class="op" id="5201105">)</span>&nbsp;<span class="op" id="5201107">(</span><span class="op" id="5201108">*</span><span class="ident" id="5201109"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="5201115">,</span>&nbsp;<span class="builtintype" id="5201117">error</span><span class="op" id="5201122">)</span>&nbsp;<span class="op" id="5201124">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201127">if</span>&nbsp;<span class="ident" id="5201130"><a href="/archive/tar/common.go.html#5201078">fi</a></span>&nbsp;<span class="op" id="5201133">==</span>&nbsp;<span class="ident" id="5201136">nil</span>&nbsp;<span class="op" id="5201140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201144">return</span>&nbsp;<span class="ident" id="5201151">nil</span><span class="op" id="5201154">,</span>&nbsp;<span class="ident" id="5201156"><a href="/archive/tar/common.go.html#5195889">errors</a></span><span class="op" id="5201162">.</span><span class="ident" id="5201163">New</span><span class="op" id="5201166">(</span><span class="string" id="5201167">&#34;tar:&nbsp;FileInfo&nbsp;is&nbsp;nil&#34;</span><span class="op" id="5201189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201195">fm</span>&nbsp;<span class="op" id="5201198">:=</span>&nbsp;<span class="ident" id="5201201"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5201203">.</span><span class="ident" id="5201204">Mode</span><span class="op" id="5201208">(</span><span class="op" id="5201209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201212">h</span>&nbsp;<span class="op" id="5201214">:=</span>&nbsp;<span class="op" id="5201217">&amp;</span><span class="ident" id="5201218"><a href="/archive/tar/common.go.html#5196742">Header</a></span><span class="op" id="5201224">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201228">Name</span><span class="op" id="5201232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5201237"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5201239">.</span><span class="ident" id="5201240">Name</span><span class="op" id="5201244">(</span><span class="op" id="5201245">)</span><span class="op" id="5201246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201250">ModTime</span><span class="op" id="5201257">:</span>&nbsp;<span class="ident" id="5201259"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5201261">.</span><span class="ident" id="5201262">ModTime</span><span class="op" id="5201269">(</span><span class="op" id="5201270">)</span><span class="op" id="5201271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201275">Mode</span><span class="op" id="5201279">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5201284">int64</span><span class="op" id="5201289">(</span><span class="ident" id="5201290"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201292">.</span><span class="ident" id="5201293">Perm</span><span class="op" id="5201297">(</span><span class="op" id="5201298">)</span><span class="op" id="5201299">)</span><span class="op" id="5201300">,</span>&nbsp;<span class="comment" id="5201302">//&nbsp;or&#39;d&nbsp;with&nbsp;c_IS*&nbsp;constants&nbsp;later</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201341">switch</span>&nbsp;<span class="op" id="5201348">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201351">case</span>&nbsp;<span class="ident" id="5201356"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201358">.</span><span class="ident" id="5201359">IsRegular</span><span class="op" id="5201368">(</span><span class="op" id="5201369">)</span><span class="op" id="5201370">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201374"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201375">.</span><span class="ident" id="5201376">Mode</span>&nbsp;<span class="op" id="5201381">|=</span>&nbsp;<span class="ident" id="5201384"><a href="/archive/tar/common.go.html#5200021">c_ISREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201394"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201395">.</span><span class="ident" id="5201396">Typeflag</span>&nbsp;<span class="op" id="5201405">=</span>&nbsp;<span class="ident" id="5201407"><a href="/archive/tar/common.go.html#5195967">TypeReg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201417"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201418">.</span><span class="ident" id="5201419">Size</span>&nbsp;<span class="op" id="5201424">=</span>&nbsp;<span class="ident" id="5201426"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5201428">.</span><span class="ident" id="5201429">Size</span><span class="op" id="5201433">(</span><span class="op" id="5201434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201437">case</span>&nbsp;<span class="ident" id="5201442"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5201444">.</span><span class="ident" id="5201445">IsDir</span><span class="op" id="5201450">(</span><span class="op" id="5201451">)</span><span class="op" id="5201452">:</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201456"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201457">.</span><span class="ident" id="5201458">Typeflag</span>&nbsp;<span class="op" id="5201467">=</span>&nbsp;<span class="ident" id="5201469"><a href="/archive/tar/common.go.html#5196243">TypeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201479"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201480">.</span><span class="ident" id="5201481">Mode</span>&nbsp;<span class="op" id="5201486">|=</span>&nbsp;<span class="ident" id="5201489"><a href="/archive/tar/common.go.html#5199960">c_ISDIR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201499"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201500">.</span><span class="ident" id="5201501">Name</span>&nbsp;<span class="op" id="5201506">+=</span>&nbsp;<span class="string" id="5201509">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201514">case</span>&nbsp;<span class="ident" id="5201519"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201521">&amp;</span><span class="ident" id="5201522"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201524">.</span><span class="ident" id="5201525">ModeSymlink</span>&nbsp;<span class="op" id="5201537">!=</span>&nbsp;<span class="num" id="5201540">0</span><span class="op" id="5201541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201545"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201546">.</span><span class="ident" id="5201547">Typeflag</span>&nbsp;<span class="op" id="5201556">=</span>&nbsp;<span class="ident" id="5201558"><a href="/archive/tar/common.go.html#5196096">TypeSymlink</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201572"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201573">.</span><span class="ident" id="5201574">Mode</span>&nbsp;<span class="op" id="5201579">|=</span>&nbsp;<span class="ident" id="5201582"><a href="/archive/tar/common.go.html#5200057">c_ISLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201592"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201593">.</span><span class="ident" id="5201594">Linkname</span>&nbsp;<span class="op" id="5201603">=</span>&nbsp;<span class="ident" id="5201605"><a href="/archive/tar/common.go.html#5201094">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201611">case</span>&nbsp;<span class="ident" id="5201616"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201618">&amp;</span><span class="ident" id="5201619"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201621">.</span><span class="ident" id="5201622">ModeDevice</span>&nbsp;<span class="op" id="5201633">!=</span>&nbsp;<span class="num" id="5201636">0</span><span class="op" id="5201637">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201641">if</span>&nbsp;<span class="ident" id="5201644"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201646">&amp;</span><span class="ident" id="5201647"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201649">.</span><span class="ident" id="5201650">ModeCharDevice</span>&nbsp;<span class="op" id="5201665">!=</span>&nbsp;<span class="num" id="5201668">0</span>&nbsp;<span class="op" id="5201670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201675"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201676">.</span><span class="ident" id="5201677">Mode</span>&nbsp;<span class="op" id="5201682">|=</span>&nbsp;<span class="ident" id="5201685"><a href="/archive/tar/common.go.html#5200136">c_ISCHR</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201696"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201697">.</span><span class="ident" id="5201698">Typeflag</span>&nbsp;<span class="op" id="5201707">=</span>&nbsp;<span class="ident" id="5201709"><a href="/archive/tar/common.go.html#5196141">TypeChar</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201720">}</span>&nbsp;<span class="keyword" id="5201722">else</span>&nbsp;<span class="op" id="5201727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201732"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201733">.</span><span class="ident" id="5201734">Mode</span>&nbsp;<span class="op" id="5201739">|=</span>&nbsp;<span class="ident" id="5201742"><a href="/archive/tar/common.go.html#5200094">c_ISBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201753"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201754">.</span><span class="ident" id="5201755">Typeflag</span>&nbsp;<span class="op" id="5201764">=</span>&nbsp;<span class="ident" id="5201766"><a href="/archive/tar/common.go.html#5196194">TypeBlock</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201778">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201781">case</span>&nbsp;<span class="ident" id="5201786"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201788">&amp;</span><span class="ident" id="5201789"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201791">.</span><span class="ident" id="5201792">ModeNamedPipe</span>&nbsp;<span class="op" id="5201806">!=</span>&nbsp;<span class="num" id="5201809">0</span><span class="op" id="5201810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201814"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201815">.</span><span class="ident" id="5201816">Typeflag</span>&nbsp;<span class="op" id="5201825">=</span>&nbsp;<span class="ident" id="5201827"><a href="/archive/tar/common.go.html#5196284">TypeFifo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201838"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201839">.</span><span class="ident" id="5201840">Mode</span>&nbsp;<span class="op" id="5201845">|=</span>&nbsp;<span class="ident" id="5201848"><a href="/archive/tar/common.go.html#5199993">c_ISFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201858">case</span>&nbsp;<span class="ident" id="5201863"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201865">&amp;</span><span class="ident" id="5201866"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201868">.</span><span class="ident" id="5201869">ModeSocket</span>&nbsp;<span class="op" id="5201880">!=</span>&nbsp;<span class="num" id="5201883">0</span><span class="op" id="5201884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5201888"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5201889">.</span><span class="ident" id="5201890">Mode</span>&nbsp;<span class="op" id="5201895">|=</span>&nbsp;<span class="ident" id="5201898"><a href="/archive/tar/common.go.html#5200182">c_ISSOCK</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201908">default</span><span class="op" id="5201915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201919">return</span>&nbsp;<span class="ident" id="5201926">nil</span><span class="op" id="5201929">,</span>&nbsp;<span class="ident" id="5201931"><a href="/archive/tar/common.go.html#5195899">fmt</a></span><span class="op" id="5201934">.</span><span class="ident" id="5201935">Errorf</span><span class="op" id="5201941">(</span><span class="string" id="5201942">&#34;archive/tar:&nbsp;unknown&nbsp;file&nbsp;mode&nbsp;%v&#34;</span><span class="op" id="5201977">,</span>&nbsp;<span class="ident" id="5201979"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5201984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5201987">if</span>&nbsp;<span class="ident" id="5201990"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5201992">&amp;</span><span class="ident" id="5201993"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5201995">.</span><span class="ident" id="5201996">ModeSetuid</span>&nbsp;<span class="op" id="5202007">!=</span>&nbsp;<span class="num" id="5202010">0</span>&nbsp;<span class="op" id="5202012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202016"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202017">.</span><span class="ident" id="5202018">Mode</span>&nbsp;<span class="op" id="5202023">|=</span>&nbsp;<span class="ident" id="5202026"><a href="/archive/tar/common.go.html#5199852">c_ISUID</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202038">if</span>&nbsp;<span class="ident" id="5202041"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5202043">&amp;</span><span class="ident" id="5202044"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5202046">.</span><span class="ident" id="5202047">ModeSetgid</span>&nbsp;<span class="op" id="5202058">!=</span>&nbsp;<span class="num" id="5202061">0</span>&nbsp;<span class="op" id="5202063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202067"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202068">.</span><span class="ident" id="5202069">Mode</span>&nbsp;<span class="op" id="5202074">|=</span>&nbsp;<span class="ident" id="5202077"><a href="/archive/tar/common.go.html#5199883">c_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202089">if</span>&nbsp;<span class="ident" id="5202092"><a href="/archive/tar/common.go.html#5201195">fm</a></span><span class="op" id="5202094">&amp;</span><span class="ident" id="5202095"><a href="/archive/tar/common.go.html#5195906">os</a></span><span class="op" id="5202097">.</span><span class="ident" id="5202098">ModeSticky</span>&nbsp;<span class="op" id="5202109">!=</span>&nbsp;<span class="num" id="5202112">0</span>&nbsp;<span class="op" id="5202114">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202118"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202119">.</span><span class="ident" id="5202120">Mode</span>&nbsp;<span class="op" id="5202125">|=</span>&nbsp;<span class="ident" id="5202128"><a href="/archive/tar/common.go.html#5199914">c_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202140">if</span>&nbsp;<span class="ident" id="5202143"><a href="/archive/tar/common.go.html#5199759">sysStat</a></span>&nbsp;<span class="op" id="5202151">!=</span>&nbsp;<span class="ident" id="5202154">nil</span>&nbsp;<span class="op" id="5202158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202162">return</span>&nbsp;<span class="ident" id="5202169"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202170">,</span>&nbsp;<span class="ident" id="5202172"><a href="/archive/tar/common.go.html#5199759">sysStat</a></span><span class="op" id="5202179">(</span><span class="ident" id="5202180"><a href="/archive/tar/common.go.html#5201078">fi</a></span><span class="op" id="5202182">,</span>&nbsp;<span class="ident" id="5202184"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202188">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202191">return</span>&nbsp;<span class="ident" id="5202198"><a href="/archive/tar/common.go.html#5201212">h</a></span><span class="op" id="5202199">,</span>&nbsp;<span class="ident" id="5202201">nil</span><br>
<span class="lineno"></span><span class="op" id="5202205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202208">var</span>&nbsp;<span class="ident" id="5202212">zeroBlock</span>&nbsp;<span class="op" id="5202222">=</span>&nbsp;<span class="builtinfunc" id="5202224">make</span><span class="op" id="5202228">(</span><span class="op" id="5202229">[</span><span class="op" id="5202230">]</span><span class="builtintype" id="5202231">byte</span><span class="op" id="5202235">,</span>&nbsp;<span class="ident" id="5202237"><a href="/archive/tar/common.go.html#5195939">blockSize</a></span><span class="op" id="5202246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5202249">//&nbsp;POSIX&nbsp;specifies&nbsp;a&nbsp;sum&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;byte&nbsp;values,&nbsp;but&nbsp;the&nbsp;Sun&nbsp;tar&nbsp;uses&nbsp;signed&nbsp;byte&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="5202344">//&nbsp;We&nbsp;compute&nbsp;and&nbsp;return&nbsp;both.</span><br>
<span class="lineno"></span><span class="keyword" id="5202375">func</span>&nbsp;<span class="ident" id="5202380">checksum</span><span class="op" id="5202388">(</span><span class="ident" id="5202389">header</span>&nbsp;<span class="op" id="5202396">[</span><span class="op" id="5202397">]</span><span class="builtintype" id="5202398">byte</span><span class="op" id="5202402">)</span>&nbsp;<span class="op" id="5202404">(</span><span class="ident" id="5202405">unsigned</span>&nbsp;<span class="ident" id="5202414">int64</span><span class="op" id="5202419">,</span>&nbsp;<span class="ident" id="5202421">signed</span>&nbsp;<span class="ident" id="5202428">int64</span><span class="op" id="5202433">)</span>&nbsp;<span class="op" id="5202435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202438">for</span>&nbsp;<span class="ident" id="5202442">i</span>&nbsp;<span class="op" id="5202444">:=</span>&nbsp;<span class="num" id="5202447">0</span><span class="op" id="5202448">;</span>&nbsp;<span class="ident" id="5202450"><a href="/archive/tar/common.go.html#5202442">i</a></span>&nbsp;<span class="op" id="5202452">&lt;</span>&nbsp;<span class="builtinfunc" id="5202454">len</span><span class="op" id="5202457">(</span><span class="ident" id="5202458"><a href="/archive/tar/common.go.html#5202389">header</a></span><span class="op" id="5202464">)</span><span class="op" id="5202465">;</span>&nbsp;<span class="ident" id="5202467"><a href="/archive/tar/common.go.html#5202442">i</a></span><span class="op" id="5202468">++</span>&nbsp;<span class="op" id="5202471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202475">if</span>&nbsp;<span class="ident" id="5202478"><a href="/archive/tar/common.go.html#5202442">i</a></span>&nbsp;<span class="op" id="5202480">==</span>&nbsp;<span class="num" id="5202483">148</span>&nbsp;<span class="op" id="5202487">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5202492">//&nbsp;The&nbsp;chksum&nbsp;field&nbsp;(header[148:156])&nbsp;is&nbsp;special:&nbsp;it&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;space&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202582"><a href="/archive/tar/common.go.html#5202405">unsigned</a></span>&nbsp;<span class="op" id="5202591">+=</span>&nbsp;<span class="string" id="5202594">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5202598">*</span>&nbsp;<span class="num" id="5202600">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202605"><a href="/archive/tar/common.go.html#5202421">signed</a></span>&nbsp;<span class="op" id="5202612">+=</span>&nbsp;<span class="string" id="5202615">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5202619">*</span>&nbsp;<span class="num" id="5202621">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202626"><a href="/archive/tar/common.go.html#5202442">i</a></span>&nbsp;<span class="op" id="5202628">+=</span>&nbsp;<span class="num" id="5202631">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202636">continue</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202651"><a href="/archive/tar/common.go.html#5202405">unsigned</a></span>&nbsp;<span class="op" id="5202660">+=</span>&nbsp;<span class="ident" id="5202663">int64</span><span class="op" id="5202668">(</span><span class="ident" id="5202669"><a href="/archive/tar/common.go.html#5202389">header</a></span><span class="op" id="5202675">[</span><span class="ident" id="5202676"><a href="/archive/tar/common.go.html#5202442">i</a></span><span class="op" id="5202677">]</span><span class="op" id="5202678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202682"><a href="/archive/tar/common.go.html#5202421">signed</a></span>&nbsp;<span class="op" id="5202689">+=</span>&nbsp;<span class="ident" id="5202692">int64</span><span class="op" id="5202697">(</span><span class="builtintype" id="5202698">int8</span><span class="op" id="5202702">(</span><span class="ident" id="5202703"><a href="/archive/tar/common.go.html#5202389">header</a></span><span class="op" id="5202709">[</span><span class="ident" id="5202710"><a href="/archive/tar/common.go.html#5202442">i</a></span><span class="op" id="5202711">]</span><span class="op" id="5202712">)</span><span class="op" id="5202713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202719">return</span><br>
<span class="lineno">275</span><span class="op" id="5202726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202729">type</span>&nbsp;<span class="ident" id="5202734">slicer</span>&nbsp;<span class="op" id="5202741">[</span><span class="op" id="5202742">]</span><span class="builtintype" id="5202743">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202749">func</span>&nbsp;<span class="op" id="5202754">(</span><span class="ident" id="5202755">sp</span>&nbsp;<span class="op" id="5202758">*</span><span class="ident" id="5202759"><a href="/archive/tar/common.go.html#5202734">slicer</a></span><span class="op" id="5202765">)</span>&nbsp;<span class="ident" id="5202767">next</span><span class="op" id="5202771">(</span><span class="ident" id="5202772">n</span>&nbsp;<span class="builtintype" id="5202774">int</span><span class="op" id="5202777">)</span>&nbsp;<span class="op" id="5202779">(</span><span class="ident" id="5202780">b</span>&nbsp;<span class="op" id="5202782">[</span><span class="op" id="5202783">]</span><span class="builtintype" id="5202784">byte</span><span class="op" id="5202788">)</span>&nbsp;<span class="op" id="5202790">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202793">s</span>&nbsp;<span class="op" id="5202795">:=</span>&nbsp;<span class="op" id="5202798">*</span><span class="ident" id="5202799"><a href="/archive/tar/common.go.html#5202755">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5202803"><a href="/archive/tar/common.go.html#5202780">b</a></span><span class="op" id="5202804">,</span>&nbsp;<span class="op" id="5202806">*</span><span class="ident" id="5202807"><a href="/archive/tar/common.go.html#5202755">sp</a></span>&nbsp;<span class="op" id="5202810">=</span>&nbsp;<span class="ident" id="5202812"><a href="/archive/tar/common.go.html#5202793">s</a></span><span class="op" id="5202813">[</span><span class="num" id="5202814">0</span><span class="op" id="5202815">:</span><span class="ident" id="5202816"><a href="/archive/tar/common.go.html#5202772">n</a></span><span class="op" id="5202817">]</span><span class="op" id="5202818">,</span>&nbsp;<span class="ident" id="5202820"><a href="/archive/tar/common.go.html#5202793">s</a></span><span class="op" id="5202821">[</span><span class="ident" id="5202822"><a href="/archive/tar/common.go.html#5202772">n</a></span><span class="op" id="5202823">:</span><span class="op" id="5202824">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202827">return</span><br>
<span class="lineno"></span><span class="op" id="5202834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5202837">func</span>&nbsp;<span class="ident" id="5202842">isASCII</span><span class="op" id="5202849">(</span><span class="ident" id="5202850">s</span>&nbsp;<span class="builtintype" id="5202852">string</span><span class="op" id="5202858">)</span>&nbsp;<span class="builtintype" id="5202860">bool</span>&nbsp;<span class="op" id="5202865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202868">for</span>&nbsp;<span class="ident" id="5202872">_</span><span class="op" id="5202873">,</span>&nbsp;<span class="ident" id="5202875">c</span>&nbsp;<span class="op" id="5202877">:=</span>&nbsp;<span class="keyword" id="5202880">range</span>&nbsp;<span class="ident" id="5202886"><a href="/archive/tar/common.go.html#5202850">s</a></span>&nbsp;<span class="op" id="5202888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202892">if</span>&nbsp;<span class="ident" id="5202895"><a href="/archive/tar/common.go.html#5202875">c</a></span>&nbsp;<span class="op" id="5202897">&gt;=</span>&nbsp;<span class="num" id="5202900">0x80</span>&nbsp;<span class="op" id="5202905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202910">return</span>&nbsp;<span class="ident" id="5202917">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202925">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5202928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202931">return</span>&nbsp;<span class="ident" id="5202938">true</span><br>
<span class="lineno"></span><span class="op" id="5202943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5202946">func</span>&nbsp;<span class="ident" id="5202951">toASCII</span><span class="op" id="5202958">(</span><span class="ident" id="5202959">s</span>&nbsp;<span class="builtintype" id="5202961">string</span><span class="op" id="5202967">)</span>&nbsp;<span class="builtintype" id="5202969">string</span>&nbsp;<span class="op" id="5202976">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202979">if</span>&nbsp;<span class="ident" id="5202982"><a href="/archive/tar/common.go.html#5202842">isASCII</a></span><span class="op" id="5202989">(</span><span class="ident" id="5202990"><a href="/archive/tar/common.go.html#5202959">s</a></span><span class="op" id="5202991">)</span>&nbsp;<span class="op" id="5202993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5202997">return</span>&nbsp;<span class="ident" id="5203004"><a href="/archive/tar/common.go.html#5202959">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203010">var</span>&nbsp;<span class="ident" id="5203014">buf</span>&nbsp;<span class="ident" id="5203018"><a href="/archive/tar/common.go.html#5195880">bytes</a></span><span class="op" id="5203023">.</span><span class="ident" id="5203024">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203032">for</span>&nbsp;<span class="ident" id="5203036">_</span><span class="op" id="5203037">,</span>&nbsp;<span class="ident" id="5203039">c</span>&nbsp;<span class="op" id="5203041">:=</span>&nbsp;<span class="keyword" id="5203044">range</span>&nbsp;<span class="ident" id="5203050"><a href="/archive/tar/common.go.html#5202959">s</a></span>&nbsp;<span class="op" id="5203052">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203056">if</span>&nbsp;<span class="ident" id="5203059"><a href="/archive/tar/common.go.html#5203039">c</a></span>&nbsp;<span class="op" id="5203061">&lt;</span>&nbsp;<span class="num" id="5203063">0x80</span>&nbsp;<span class="op" id="5203068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5203073"><a href="/archive/tar/common.go.html#5203014">buf</a></span><span class="op" id="5203076">.</span><span class="ident" id="5203077">WriteByte</span><span class="op" id="5203086">(</span><span class="builtintype" id="5203087">byte</span><span class="op" id="5203091">(</span><span class="ident" id="5203092"><a href="/archive/tar/common.go.html#5203039">c</a></span><span class="op" id="5203093">)</span><span class="op" id="5203094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5203101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5203104">return</span>&nbsp;<span class="ident" id="5203111"><a href="/archive/tar/common.go.html#5203014">buf</a></span><span class="op" id="5203114">.</span><span class="ident" id="5203115">String</span><span class="op" id="5203121">(</span><span class="op" id="5203122">)</span><br>
<span class="lineno">305</span><span class="op" id="5203124">}</span>
</div>
</body>
</html>
