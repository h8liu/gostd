<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2324743">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2324798">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2324852">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2324903">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2324979">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2325053">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2325134">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2325205">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2325280">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2325351">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2325410">//</span><br>
<span class="lineno"></span><span class="comment" id="2325413">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2325489">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2325572">//</span><br>
<span class="lineno"></span><span class="comment" id="2325575">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2325643">//</span><br>
<span class="lineno"></span><span class="comment" id="2325646">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2325701">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2325720">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2325739">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2325744">//</span><br>
<span class="lineno"></span><span class="comment" id="2325747">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2325817">//</span><br>
<span class="lineno">25</span><span class="comment" id="2325820">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2325863">//</span><br>
<span class="lineno"></span><span class="comment" id="2325866">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2325934">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2326005">//</span><br>
<span class="lineno">30</span><span class="comment" id="2326008">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2326037">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2326070">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2326089">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2326108">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2326113">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2326171">//</span><br>
<span class="lineno"></span><span class="keyword" id="2326174">package</span>&nbsp;<span class="ident" id="2326182">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2326186">import</span>&nbsp;<span class="op" id="2326193">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2326196">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2326202">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2326212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326215">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2326274">func</span>&nbsp;<span class="op" id="2326279">(</span><span class="ident" id="2326280">f</span>&nbsp;<span class="op" id="2326282">*</span><span class="ident" id="2326283">File</span><span class="op" id="2326287">)</span>&nbsp;<span class="ident" id="2326289">Name</span><span class="op" id="2326293">(</span><span class="op" id="2326294">)</span>&nbsp;<span class="builtintype" id="2326296">string</span>&nbsp;<span class="op" id="2326303">{</span>&nbsp;<span class="keyword" id="2326305">return</span>&nbsp;<span class="ident" id="2326312">f</span><span class="op" id="2326313">.</span><span class="ident" id="2326314">name</span>&nbsp;<span class="op" id="2326319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2326322">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2326398">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2326455">var</span>&nbsp;<span class="op" id="2326459">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326462">Stdin</span>&nbsp;&nbsp;<span class="op" id="2326469">=</span>&nbsp;<span class="ident" id="2326471">NewFile</span><span class="op" id="2326478">(</span><span class="builtintype" id="2326479">uintptr</span><span class="op" id="2326486">(</span><span class="ident" id="2326487">syscall</span><span class="op" id="2326494">.</span><span class="ident" id="2326495">Stdin</span><span class="op" id="2326500">)</span><span class="op" id="2326501">,</span>&nbsp;<span class="string" id="2326503">&#34;/dev/stdin&#34;</span><span class="op" id="2326515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326518">Stdout</span>&nbsp;<span class="op" id="2326525">=</span>&nbsp;<span class="ident" id="2326527">NewFile</span><span class="op" id="2326534">(</span><span class="builtintype" id="2326535">uintptr</span><span class="op" id="2326542">(</span><span class="ident" id="2326543">syscall</span><span class="op" id="2326550">.</span><span class="ident" id="2326551">Stdout</span><span class="op" id="2326557">)</span><span class="op" id="2326558">,</span>&nbsp;<span class="string" id="2326560">&#34;/dev/stdout&#34;</span><span class="op" id="2326573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326576">Stderr</span>&nbsp;<span class="op" id="2326583">=</span>&nbsp;<span class="ident" id="2326585">NewFile</span><span class="op" id="2326592">(</span><span class="builtintype" id="2326593">uintptr</span><span class="op" id="2326600">(</span><span class="ident" id="2326601">syscall</span><span class="op" id="2326608">.</span><span class="ident" id="2326609">Stderr</span><span class="op" id="2326615">)</span><span class="op" id="2326616">,</span>&nbsp;<span class="string" id="2326618">&#34;/dev/stderr&#34;</span><span class="op" id="2326631">)</span><br>
<span class="lineno"></span><span class="op" id="2326633">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2326636">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2326708">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2326749">const</span>&nbsp;<span class="op" id="2326755">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326758">O_RDONLY</span>&nbsp;<span class="builtintype" id="2326767">int</span>&nbsp;<span class="op" id="2326771">=</span>&nbsp;<span class="ident" id="2326773">syscall</span><span class="op" id="2326780">.</span><span class="ident" id="2326781">O_RDONLY</span>&nbsp;<span class="comment" id="2326790">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326819">O_WRONLY</span>&nbsp;<span class="builtintype" id="2326828">int</span>&nbsp;<span class="op" id="2326832">=</span>&nbsp;<span class="ident" id="2326834">syscall</span><span class="op" id="2326841">.</span><span class="ident" id="2326842">O_WRONLY</span>&nbsp;<span class="comment" id="2326851">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326881">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2326890">int</span>&nbsp;<span class="op" id="2326894">=</span>&nbsp;<span class="ident" id="2326896">syscall</span><span class="op" id="2326903">.</span><span class="ident" id="2326904">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2326913">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2326943">O_APPEND</span>&nbsp;<span class="builtintype" id="2326952">int</span>&nbsp;<span class="op" id="2326956">=</span>&nbsp;<span class="ident" id="2326958">syscall</span><span class="op" id="2326965">.</span><span class="ident" id="2326966">O_APPEND</span>&nbsp;<span class="comment" id="2326975">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327017">O_CREATE</span>&nbsp;<span class="builtintype" id="2327026">int</span>&nbsp;<span class="op" id="2327030">=</span>&nbsp;<span class="ident" id="2327032">syscall</span><span class="op" id="2327039">.</span><span class="ident" id="2327040">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2327049">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327087">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2327096">int</span>&nbsp;<span class="op" id="2327100">=</span>&nbsp;<span class="ident" id="2327102">syscall</span><span class="op" id="2327109">.</span><span class="ident" id="2327110">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2327119">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327163">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2327172">int</span>&nbsp;<span class="op" id="2327176">=</span>&nbsp;<span class="ident" id="2327178">syscall</span><span class="op" id="2327185">.</span><span class="ident" id="2327186">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2327195">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327225">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2327234">int</span>&nbsp;<span class="op" id="2327238">=</span>&nbsp;<span class="ident" id="2327240">syscall</span><span class="op" id="2327247">.</span><span class="ident" id="2327248">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2327257">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2327300">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2327303">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2327326">const</span>&nbsp;<span class="op" id="2327332">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327335">SEEK_SET</span>&nbsp;<span class="builtintype" id="2327344">int</span>&nbsp;<span class="op" id="2327348">=</span>&nbsp;<span class="num" id="2327350">0</span>&nbsp;<span class="comment" id="2327352">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327396">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2327405">int</span>&nbsp;<span class="op" id="2327409">=</span>&nbsp;<span class="num" id="2327411">1</span>&nbsp;<span class="comment" id="2327413">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327453">SEEK_END</span>&nbsp;<span class="builtintype" id="2327462">int</span>&nbsp;<span class="op" id="2327466">=</span>&nbsp;<span class="num" id="2327468">2</span>&nbsp;<span class="comment" id="2327470">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2327498">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2327501">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2327566">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2327611">type</span>&nbsp;<span class="ident" id="2327616">LinkError</span>&nbsp;<span class="keyword" id="2327626">struct</span>&nbsp;<span class="op" id="2327633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327636">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2327640">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327648">Old</span>&nbsp;<span class="builtintype" id="2327652">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327660">New</span>&nbsp;<span class="builtintype" id="2327664">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2327672">Err</span>&nbsp;<span class="builtintype" id="2327676">error</span><br>
<span class="lineno"></span><span class="op" id="2327682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2327685">func</span>&nbsp;<span class="op" id="2327690">(</span><span class="ident" id="2327691">e</span>&nbsp;<span class="op" id="2327693">*</span><span class="ident" id="2327694">LinkError</span><span class="op" id="2327703">)</span>&nbsp;<span class="ident" id="2327705">Error</span><span class="op" id="2327710">(</span><span class="op" id="2327711">)</span>&nbsp;<span class="builtintype" id="2327713">string</span>&nbsp;<span class="op" id="2327720">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2327723">return</span>&nbsp;<span class="ident" id="2327730">e</span><span class="op" id="2327731">.</span><span class="ident" id="2327732">Op</span>&nbsp;<span class="op" id="2327735">+</span>&nbsp;<span class="string" id="2327737">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2327741">+</span>&nbsp;<span class="ident" id="2327743">e</span><span class="op" id="2327744">.</span><span class="ident" id="2327745">Old</span>&nbsp;<span class="op" id="2327749">+</span>&nbsp;<span class="string" id="2327751">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2327755">+</span>&nbsp;<span class="ident" id="2327757">e</span><span class="op" id="2327758">.</span><span class="ident" id="2327759">New</span>&nbsp;<span class="op" id="2327763">+</span>&nbsp;<span class="string" id="2327765">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2327770">+</span>&nbsp;<span class="ident" id="2327772">e</span><span class="op" id="2327773">.</span><span class="ident" id="2327774">Err</span><span class="op" id="2327777">.</span><span class="ident" id="2327778">Error</span><span class="op" id="2327783">(</span><span class="op" id="2327784">)</span><br>
<span class="lineno"></span><span class="op" id="2327786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2327789">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2327837">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2327898">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2327957">func</span>&nbsp;<span class="op" id="2327962">(</span><span class="ident" id="2327963">f</span>&nbsp;<span class="op" id="2327965">*</span><span class="ident" id="2327966">File</span><span class="op" id="2327970">)</span>&nbsp;<span class="ident" id="2327972">Read</span><span class="op" id="2327976">(</span><span class="ident" id="2327977">b</span>&nbsp;<span class="op" id="2327979">[</span><span class="op" id="2327980">]</span><span class="builtintype" id="2327981">byte</span><span class="op" id="2327985">)</span>&nbsp;<span class="op" id="2327987">(</span><span class="ident" id="2327988">n</span>&nbsp;<span class="builtintype" id="2327990">int</span><span class="op" id="2327993">,</span>&nbsp;<span class="ident" id="2327995">err</span>&nbsp;<span class="builtintype" id="2327999">error</span><span class="op" id="2328004">)</span>&nbsp;<span class="op" id="2328006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328009">if</span>&nbsp;<span class="ident" id="2328012">f</span>&nbsp;<span class="op" id="2328014">==</span>&nbsp;<span class="ident" id="2328017">nil</span>&nbsp;<span class="op" id="2328021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328025">return</span>&nbsp;<span class="num" id="2328032">0</span><span class="op" id="2328033">,</span>&nbsp;<span class="ident" id="2328035">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328047">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328050">n</span><span class="op" id="2328051">,</span>&nbsp;<span class="ident" id="2328053">e</span>&nbsp;<span class="op" id="2328055">:=</span>&nbsp;<span class="ident" id="2328058">f</span><span class="op" id="2328059">.</span><span class="ident" id="2328060">read</span><span class="op" id="2328064">(</span><span class="ident" id="2328065">b</span><span class="op" id="2328066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328069">if</span>&nbsp;<span class="ident" id="2328072">n</span>&nbsp;<span class="op" id="2328074">&lt;</span>&nbsp;<span class="num" id="2328076">0</span>&nbsp;<span class="op" id="2328078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328082">n</span>&nbsp;<span class="op" id="2328084">=</span>&nbsp;<span class="num" id="2328086">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328092">if</span>&nbsp;<span class="ident" id="2328095">n</span>&nbsp;<span class="op" id="2328097">==</span>&nbsp;<span class="num" id="2328100">0</span>&nbsp;<span class="op" id="2328102">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2328105">len</span><span class="op" id="2328108">(</span><span class="ident" id="2328109">b</span><span class="op" id="2328110">)</span>&nbsp;<span class="op" id="2328112">&gt;</span>&nbsp;<span class="num" id="2328114">0</span>&nbsp;<span class="op" id="2328116">&amp;&amp;</span>&nbsp;<span class="ident" id="2328119">e</span>&nbsp;<span class="op" id="2328121">==</span>&nbsp;<span class="ident" id="2328124">nil</span>&nbsp;<span class="op" id="2328128">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328132">return</span>&nbsp;<span class="num" id="2328139">0</span><span class="op" id="2328140">,</span>&nbsp;<span class="ident" id="2328142">io</span><span class="op" id="2328144">.</span><span class="ident" id="2328145">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328153">if</span>&nbsp;<span class="ident" id="2328156">e</span>&nbsp;<span class="op" id="2328158">!=</span>&nbsp;<span class="ident" id="2328161">nil</span>&nbsp;<span class="op" id="2328165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328169">err</span>&nbsp;<span class="op" id="2328173">=</span>&nbsp;<span class="op" id="2328175">&amp;</span><span class="ident" id="2328176">PathError</span><span class="op" id="2328185">{</span><span class="string" id="2328186">&#34;read&#34;</span><span class="op" id="2328192">,</span>&nbsp;<span class="ident" id="2328194">f</span><span class="op" id="2328195">.</span><span class="ident" id="2328196">name</span><span class="op" id="2328200">,</span>&nbsp;<span class="ident" id="2328202">e</span><span class="op" id="2328203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328206">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328209">return</span>&nbsp;<span class="ident" id="2328216">n</span><span class="op" id="2328217">,</span>&nbsp;<span class="ident" id="2328219">err</span><br>
<span class="lineno"></span><span class="op" id="2328223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2328226">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2328298">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2328360">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2328418">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2328459">func</span>&nbsp;<span class="op" id="2328464">(</span><span class="ident" id="2328465">f</span>&nbsp;<span class="op" id="2328467">*</span><span class="ident" id="2328468">File</span><span class="op" id="2328472">)</span>&nbsp;<span class="ident" id="2328474">ReadAt</span><span class="op" id="2328480">(</span><span class="ident" id="2328481">b</span>&nbsp;<span class="op" id="2328483">[</span><span class="op" id="2328484">]</span><span class="builtintype" id="2328485">byte</span><span class="op" id="2328489">,</span>&nbsp;<span class="ident" id="2328491">off</span>&nbsp;<span class="ident" id="2328495">int64</span><span class="op" id="2328500">)</span>&nbsp;<span class="op" id="2328502">(</span><span class="ident" id="2328503">n</span>&nbsp;<span class="builtintype" id="2328505">int</span><span class="op" id="2328508">,</span>&nbsp;<span class="ident" id="2328510">err</span>&nbsp;<span class="builtintype" id="2328514">error</span><span class="op" id="2328519">)</span>&nbsp;<span class="op" id="2328521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328524">if</span>&nbsp;<span class="ident" id="2328527">f</span>&nbsp;<span class="op" id="2328529">==</span>&nbsp;<span class="ident" id="2328532">nil</span>&nbsp;<span class="op" id="2328536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328540">return</span>&nbsp;<span class="num" id="2328547">0</span><span class="op" id="2328548">,</span>&nbsp;<span class="ident" id="2328550">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328565">for</span>&nbsp;<span class="builtinfunc" id="2328569">len</span><span class="op" id="2328572">(</span><span class="ident" id="2328573">b</span><span class="op" id="2328574">)</span>&nbsp;<span class="op" id="2328576">&gt;</span>&nbsp;<span class="num" id="2328578">0</span>&nbsp;<span class="op" id="2328580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328584">m</span><span class="op" id="2328585">,</span>&nbsp;<span class="ident" id="2328587">e</span>&nbsp;<span class="op" id="2328589">:=</span>&nbsp;<span class="ident" id="2328592">f</span><span class="op" id="2328593">.</span><span class="ident" id="2328594">pread</span><span class="op" id="2328599">(</span><span class="ident" id="2328600">b</span><span class="op" id="2328601">,</span>&nbsp;<span class="ident" id="2328603">off</span><span class="op" id="2328606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328610">if</span>&nbsp;<span class="ident" id="2328613">m</span>&nbsp;<span class="op" id="2328615">==</span>&nbsp;<span class="num" id="2328618">0</span>&nbsp;<span class="op" id="2328620">&amp;&amp;</span>&nbsp;<span class="ident" id="2328623">e</span>&nbsp;<span class="op" id="2328625">==</span>&nbsp;<span class="ident" id="2328628">nil</span>&nbsp;<span class="op" id="2328632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328637">return</span>&nbsp;<span class="ident" id="2328644">n</span><span class="op" id="2328645">,</span>&nbsp;<span class="ident" id="2328647">io</span><span class="op" id="2328649">.</span><span class="ident" id="2328650">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328660">if</span>&nbsp;<span class="ident" id="2328663">e</span>&nbsp;<span class="op" id="2328665">!=</span>&nbsp;<span class="ident" id="2328668">nil</span>&nbsp;<span class="op" id="2328672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328677">err</span>&nbsp;<span class="op" id="2328681">=</span>&nbsp;<span class="op" id="2328683">&amp;</span><span class="ident" id="2328684">PathError</span><span class="op" id="2328693">{</span><span class="string" id="2328694">&#34;read&#34;</span><span class="op" id="2328700">,</span>&nbsp;<span class="ident" id="2328702">f</span><span class="op" id="2328703">.</span><span class="ident" id="2328704">name</span><span class="op" id="2328708">,</span>&nbsp;<span class="ident" id="2328710">e</span><span class="op" id="2328711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328716">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328724">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328728">n</span>&nbsp;<span class="op" id="2328730">+=</span>&nbsp;<span class="ident" id="2328733">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328737">b</span>&nbsp;<span class="op" id="2328739">=</span>&nbsp;<span class="ident" id="2328741">b</span><span class="op" id="2328742">[</span><span class="ident" id="2328743">m</span><span class="op" id="2328744">:</span><span class="op" id="2328745">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2328749">off</span>&nbsp;<span class="op" id="2328753">+=</span>&nbsp;<span class="ident" id="2328756">int64</span><span class="op" id="2328761">(</span><span class="ident" id="2328762">m</span><span class="op" id="2328763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2328766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328769">return</span><br>
<span class="lineno">130</span><span class="op" id="2328776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2328779">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2328821">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2328885">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2328936">func</span>&nbsp;<span class="op" id="2328941">(</span><span class="ident" id="2328942">f</span>&nbsp;<span class="op" id="2328944">*</span><span class="ident" id="2328945">File</span><span class="op" id="2328949">)</span>&nbsp;<span class="ident" id="2328951">Write</span><span class="op" id="2328956">(</span><span class="ident" id="2328957">b</span>&nbsp;<span class="op" id="2328959">[</span><span class="op" id="2328960">]</span><span class="builtintype" id="2328961">byte</span><span class="op" id="2328965">)</span>&nbsp;<span class="op" id="2328967">(</span><span class="ident" id="2328968">n</span>&nbsp;<span class="builtintype" id="2328970">int</span><span class="op" id="2328973">,</span>&nbsp;<span class="ident" id="2328975">err</span>&nbsp;<span class="builtintype" id="2328979">error</span><span class="op" id="2328984">)</span>&nbsp;<span class="op" id="2328986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2328989">if</span>&nbsp;<span class="ident" id="2328992">f</span>&nbsp;<span class="op" id="2328994">==</span>&nbsp;<span class="ident" id="2328997">nil</span>&nbsp;<span class="op" id="2329001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329005">return</span>&nbsp;<span class="num" id="2329012">0</span><span class="op" id="2329013">,</span>&nbsp;<span class="ident" id="2329015">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329030">n</span><span class="op" id="2329031">,</span>&nbsp;<span class="ident" id="2329033">e</span>&nbsp;<span class="op" id="2329035">:=</span>&nbsp;<span class="ident" id="2329038">f</span><span class="op" id="2329039">.</span><span class="ident" id="2329040">write</span><span class="op" id="2329045">(</span><span class="ident" id="2329046">b</span><span class="op" id="2329047">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329050">if</span>&nbsp;<span class="ident" id="2329053">n</span>&nbsp;<span class="op" id="2329055">&lt;</span>&nbsp;<span class="num" id="2329057">0</span>&nbsp;<span class="op" id="2329059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329063">n</span>&nbsp;<span class="op" id="2329065">=</span>&nbsp;<span class="num" id="2329067">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329073">if</span>&nbsp;<span class="ident" id="2329076">n</span>&nbsp;<span class="op" id="2329078">!=</span>&nbsp;<span class="builtinfunc" id="2329081">len</span><span class="op" id="2329084">(</span><span class="ident" id="2329085">b</span><span class="op" id="2329086">)</span>&nbsp;<span class="op" id="2329088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329092">err</span>&nbsp;<span class="op" id="2329096">=</span>&nbsp;<span class="ident" id="2329098">io</span><span class="op" id="2329100">.</span><span class="ident" id="2329101">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329120">epipecheck</span><span class="op" id="2329130">(</span><span class="ident" id="2329131">f</span><span class="op" id="2329132">,</span>&nbsp;<span class="ident" id="2329134">e</span><span class="op" id="2329135">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329139">if</span>&nbsp;<span class="ident" id="2329142">e</span>&nbsp;<span class="op" id="2329144">!=</span>&nbsp;<span class="ident" id="2329147">nil</span>&nbsp;<span class="op" id="2329151">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329155">err</span>&nbsp;<span class="op" id="2329159">=</span>&nbsp;<span class="op" id="2329161">&amp;</span><span class="ident" id="2329162">PathError</span><span class="op" id="2329171">{</span><span class="string" id="2329172">&#34;write&#34;</span><span class="op" id="2329179">,</span>&nbsp;<span class="ident" id="2329181">f</span><span class="op" id="2329182">.</span><span class="ident" id="2329183">name</span><span class="op" id="2329187">,</span>&nbsp;<span class="ident" id="2329189">e</span><span class="op" id="2329190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329196">return</span>&nbsp;<span class="ident" id="2329203">n</span><span class="op" id="2329204">,</span>&nbsp;<span class="ident" id="2329206">err</span><br>
<span class="lineno"></span><span class="op" id="2329210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2329213">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2329285">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2329349">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2329402">func</span>&nbsp;<span class="op" id="2329407">(</span><span class="ident" id="2329408">f</span>&nbsp;<span class="op" id="2329410">*</span><span class="ident" id="2329411">File</span><span class="op" id="2329415">)</span>&nbsp;<span class="ident" id="2329417">WriteAt</span><span class="op" id="2329424">(</span><span class="ident" id="2329425">b</span>&nbsp;<span class="op" id="2329427">[</span><span class="op" id="2329428">]</span><span class="builtintype" id="2329429">byte</span><span class="op" id="2329433">,</span>&nbsp;<span class="ident" id="2329435">off</span>&nbsp;<span class="ident" id="2329439">int64</span><span class="op" id="2329444">)</span>&nbsp;<span class="op" id="2329446">(</span><span class="ident" id="2329447">n</span>&nbsp;<span class="builtintype" id="2329449">int</span><span class="op" id="2329452">,</span>&nbsp;<span class="ident" id="2329454">err</span>&nbsp;<span class="builtintype" id="2329458">error</span><span class="op" id="2329463">)</span>&nbsp;<span class="op" id="2329465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329468">if</span>&nbsp;<span class="ident" id="2329471">f</span>&nbsp;<span class="op" id="2329473">==</span>&nbsp;<span class="ident" id="2329476">nil</span>&nbsp;<span class="op" id="2329480">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329484">return</span>&nbsp;<span class="num" id="2329491">0</span><span class="op" id="2329492">,</span>&nbsp;<span class="ident" id="2329494">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329509">for</span>&nbsp;<span class="builtinfunc" id="2329513">len</span><span class="op" id="2329516">(</span><span class="ident" id="2329517">b</span><span class="op" id="2329518">)</span>&nbsp;<span class="op" id="2329520">&gt;</span>&nbsp;<span class="num" id="2329522">0</span>&nbsp;<span class="op" id="2329524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329528">m</span><span class="op" id="2329529">,</span>&nbsp;<span class="ident" id="2329531">e</span>&nbsp;<span class="op" id="2329533">:=</span>&nbsp;<span class="ident" id="2329536">f</span><span class="op" id="2329537">.</span><span class="ident" id="2329538">pwrite</span><span class="op" id="2329544">(</span><span class="ident" id="2329545">b</span><span class="op" id="2329546">,</span>&nbsp;<span class="ident" id="2329548">off</span><span class="op" id="2329551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329555">if</span>&nbsp;<span class="ident" id="2329558">e</span>&nbsp;<span class="op" id="2329560">!=</span>&nbsp;<span class="ident" id="2329563">nil</span>&nbsp;<span class="op" id="2329567">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329572">err</span>&nbsp;<span class="op" id="2329576">=</span>&nbsp;<span class="op" id="2329578">&amp;</span><span class="ident" id="2329579">PathError</span><span class="op" id="2329588">{</span><span class="string" id="2329589">&#34;write&#34;</span><span class="op" id="2329596">,</span>&nbsp;<span class="ident" id="2329598">f</span><span class="op" id="2329599">.</span><span class="ident" id="2329600">name</span><span class="op" id="2329604">,</span>&nbsp;<span class="ident" id="2329606">e</span><span class="op" id="2329607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329612">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329624">n</span>&nbsp;<span class="op" id="2329626">+=</span>&nbsp;<span class="ident" id="2329629">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329633">b</span>&nbsp;<span class="op" id="2329635">=</span>&nbsp;<span class="ident" id="2329637">b</span><span class="op" id="2329638">[</span><span class="ident" id="2329639">m</span><span class="op" id="2329640">:</span><span class="op" id="2329641">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2329645">off</span>&nbsp;<span class="op" id="2329649">+=</span>&nbsp;<span class="ident" id="2329652">int64</span><span class="op" id="2329657">(</span><span class="ident" id="2329658">m</span><span class="op" id="2329659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2329662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2329665">return</span><br>
<span class="lineno"></span><span class="op" id="2329672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2329675">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2329757">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2329833">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2329901">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2329952">func</span>&nbsp;<span class="op" id="2329957">(</span><span class="ident" id="2329958">f</span>&nbsp;<span class="op" id="2329960">*</span><span class="ident" id="2329961">File</span><span class="op" id="2329965">)</span>&nbsp;<span class="ident" id="2329967">Seek</span><span class="op" id="2329971">(</span><span class="ident" id="2329972">offset</span>&nbsp;<span class="ident" id="2329979">int64</span><span class="op" id="2329984">,</span>&nbsp;<span class="ident" id="2329986">whence</span>&nbsp;<span class="builtintype" id="2329993">int</span><span class="op" id="2329996">)</span>&nbsp;<span class="op" id="2329998">(</span><span class="ident" id="2329999">ret</span>&nbsp;<span class="ident" id="2330003">int64</span><span class="op" id="2330008">,</span>&nbsp;<span class="ident" id="2330010">err</span>&nbsp;<span class="builtintype" id="2330014">error</span><span class="op" id="2330019">)</span>&nbsp;<span class="op" id="2330021">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330024">if</span>&nbsp;<span class="ident" id="2330027">f</span>&nbsp;<span class="op" id="2330029">==</span>&nbsp;<span class="ident" id="2330032">nil</span>&nbsp;<span class="op" id="2330036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330040">return</span>&nbsp;<span class="num" id="2330047">0</span><span class="op" id="2330048">,</span>&nbsp;<span class="ident" id="2330050">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2330065">r</span><span class="op" id="2330066">,</span>&nbsp;<span class="ident" id="2330068">e</span>&nbsp;<span class="op" id="2330070">:=</span>&nbsp;<span class="ident" id="2330073">f</span><span class="op" id="2330074">.</span><span class="ident" id="2330075">seek</span><span class="op" id="2330079">(</span><span class="ident" id="2330080">offset</span><span class="op" id="2330086">,</span>&nbsp;<span class="ident" id="2330088">whence</span><span class="op" id="2330094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330097">if</span>&nbsp;<span class="ident" id="2330100">e</span>&nbsp;<span class="op" id="2330102">==</span>&nbsp;<span class="ident" id="2330105">nil</span>&nbsp;<span class="op" id="2330109">&amp;&amp;</span>&nbsp;<span class="ident" id="2330112">f</span><span class="op" id="2330113">.</span><span class="ident" id="2330114">dirinfo</span>&nbsp;<span class="op" id="2330122">!=</span>&nbsp;<span class="ident" id="2330125">nil</span>&nbsp;<span class="op" id="2330129">&amp;&amp;</span>&nbsp;<span class="ident" id="2330132">r</span>&nbsp;<span class="op" id="2330134">!=</span>&nbsp;<span class="num" id="2330137">0</span>&nbsp;<span class="op" id="2330139">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2330143">e</span>&nbsp;<span class="op" id="2330145">=</span>&nbsp;<span class="ident" id="2330147">syscall</span><span class="op" id="2330154">.</span><span class="ident" id="2330155">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330166">if</span>&nbsp;<span class="ident" id="2330169">e</span>&nbsp;<span class="op" id="2330171">!=</span>&nbsp;<span class="ident" id="2330174">nil</span>&nbsp;<span class="op" id="2330178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330182">return</span>&nbsp;<span class="num" id="2330189">0</span><span class="op" id="2330190">,</span>&nbsp;<span class="op" id="2330192">&amp;</span><span class="ident" id="2330193">PathError</span><span class="op" id="2330202">{</span><span class="string" id="2330203">&#34;seek&#34;</span><span class="op" id="2330209">,</span>&nbsp;<span class="ident" id="2330211">f</span><span class="op" id="2330212">.</span><span class="ident" id="2330213">name</span><span class="op" id="2330217">,</span>&nbsp;<span class="ident" id="2330219">e</span><span class="op" id="2330220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330223">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330226">return</span>&nbsp;<span class="ident" id="2330233">r</span><span class="op" id="2330234">,</span>&nbsp;<span class="ident" id="2330236">nil</span><br>
<span class="lineno"></span><span class="op" id="2330240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330243">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2330321">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2330342">func</span>&nbsp;<span class="op" id="2330347">(</span><span class="ident" id="2330348">f</span>&nbsp;<span class="op" id="2330350">*</span><span class="ident" id="2330351">File</span><span class="op" id="2330355">)</span>&nbsp;<span class="ident" id="2330357">WriteString</span><span class="op" id="2330368">(</span><span class="ident" id="2330369">s</span>&nbsp;<span class="builtintype" id="2330371">string</span><span class="op" id="2330377">)</span>&nbsp;<span class="op" id="2330379">(</span><span class="ident" id="2330380">ret</span>&nbsp;<span class="builtintype" id="2330384">int</span><span class="op" id="2330387">,</span>&nbsp;<span class="ident" id="2330389">err</span>&nbsp;<span class="builtintype" id="2330393">error</span><span class="op" id="2330398">)</span>&nbsp;<span class="op" id="2330400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330403">if</span>&nbsp;<span class="ident" id="2330406">f</span>&nbsp;<span class="op" id="2330408">==</span>&nbsp;<span class="ident" id="2330411">nil</span>&nbsp;<span class="op" id="2330415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330419">return</span>&nbsp;<span class="num" id="2330426">0</span><span class="op" id="2330427">,</span>&nbsp;<span class="ident" id="2330429">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330444">return</span>&nbsp;<span class="ident" id="2330451">f</span><span class="op" id="2330452">.</span><span class="ident" id="2330453">Write</span><span class="op" id="2330458">(</span><span class="op" id="2330459">[</span><span class="op" id="2330460">]</span><span class="builtintype" id="2330461">byte</span><span class="op" id="2330465">(</span><span class="ident" id="2330466">s</span><span class="op" id="2330467">)</span><span class="op" id="2330468">)</span><br>
<span class="lineno">200</span><span class="op" id="2330470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330473">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2330551">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2330607">func</span>&nbsp;<span class="ident" id="2330612">Mkdir</span><span class="op" id="2330617">(</span><span class="ident" id="2330618">name</span>&nbsp;<span class="builtintype" id="2330623">string</span><span class="op" id="2330629">,</span>&nbsp;<span class="ident" id="2330631">perm</span>&nbsp;<span class="ident" id="2330636">FileMode</span><span class="op" id="2330644">)</span>&nbsp;<span class="builtintype" id="2330646">error</span>&nbsp;<span class="op" id="2330652">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2330655">e</span>&nbsp;<span class="op" id="2330657">:=</span>&nbsp;<span class="ident" id="2330660">syscall</span><span class="op" id="2330667">.</span><span class="ident" id="2330668">Mkdir</span><span class="op" id="2330673">(</span><span class="ident" id="2330674">name</span><span class="op" id="2330678">,</span>&nbsp;<span class="ident" id="2330680">syscallMode</span><span class="op" id="2330691">(</span><span class="ident" id="2330692">perm</span><span class="op" id="2330696">)</span><span class="op" id="2330697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330700">if</span>&nbsp;<span class="ident" id="2330703">e</span>&nbsp;<span class="op" id="2330705">!=</span>&nbsp;<span class="ident" id="2330708">nil</span>&nbsp;<span class="op" id="2330712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330716">return</span>&nbsp;<span class="op" id="2330723">&amp;</span><span class="ident" id="2330724">PathError</span><span class="op" id="2330733">{</span><span class="string" id="2330734">&#34;mkdir&#34;</span><span class="op" id="2330741">,</span>&nbsp;<span class="ident" id="2330743">name</span><span class="op" id="2330747">,</span>&nbsp;<span class="ident" id="2330749">e</span><span class="op" id="2330750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2330753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330756">return</span>&nbsp;<span class="ident" id="2330763">nil</span><br>
<span class="lineno">210</span><span class="op" id="2330767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330770">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2330841">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2330897">func</span>&nbsp;<span class="ident" id="2330902">Chdir</span><span class="op" id="2330907">(</span><span class="ident" id="2330908">dir</span>&nbsp;<span class="builtintype" id="2330912">string</span><span class="op" id="2330918">)</span>&nbsp;<span class="builtintype" id="2330920">error</span>&nbsp;<span class="op" id="2330926">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330929">if</span>&nbsp;<span class="ident" id="2330932">e</span>&nbsp;<span class="op" id="2330934">:=</span>&nbsp;<span class="ident" id="2330937">syscall</span><span class="op" id="2330944">.</span><span class="ident" id="2330945">Chdir</span><span class="op" id="2330950">(</span><span class="ident" id="2330951">dir</span><span class="op" id="2330954">)</span><span class="op" id="2330955">;</span>&nbsp;<span class="ident" id="2330957">e</span>&nbsp;<span class="op" id="2330959">!=</span>&nbsp;<span class="ident" id="2330962">nil</span>&nbsp;<span class="op" id="2330966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2330970">return</span>&nbsp;<span class="op" id="2330977">&amp;</span><span class="ident" id="2330978">PathError</span><span class="op" id="2330987">{</span><span class="string" id="2330988">&#34;chdir&#34;</span><span class="op" id="2330995">,</span>&nbsp;<span class="ident" id="2330997">dir</span><span class="op" id="2331000">,</span>&nbsp;<span class="ident" id="2331002">e</span><span class="op" id="2331003">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2331006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331009">return</span>&nbsp;<span class="ident" id="2331016">nil</span><br>
<span class="lineno"></span><span class="op" id="2331020">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2331023">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2331083">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2331113">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2331169">func</span>&nbsp;<span class="op" id="2331174">(</span><span class="ident" id="2331175">f</span>&nbsp;<span class="op" id="2331177">*</span><span class="ident" id="2331178">File</span><span class="op" id="2331182">)</span>&nbsp;<span class="ident" id="2331184">Chdir</span><span class="op" id="2331189">(</span><span class="op" id="2331190">)</span>&nbsp;<span class="builtintype" id="2331192">error</span>&nbsp;<span class="op" id="2331198">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331201">if</span>&nbsp;<span class="ident" id="2331204">f</span>&nbsp;<span class="op" id="2331206">==</span>&nbsp;<span class="ident" id="2331209">nil</span>&nbsp;<span class="op" id="2331213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331217">return</span>&nbsp;<span class="ident" id="2331224">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2331236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331239">if</span>&nbsp;<span class="ident" id="2331242">e</span>&nbsp;<span class="op" id="2331244">:=</span>&nbsp;<span class="ident" id="2331247">syscall</span><span class="op" id="2331254">.</span><span class="ident" id="2331255">Fchdir</span><span class="op" id="2331261">(</span><span class="ident" id="2331262">f</span><span class="op" id="2331263">.</span><span class="ident" id="2331264">fd</span><span class="op" id="2331266">)</span><span class="op" id="2331267">;</span>&nbsp;<span class="ident" id="2331269">e</span>&nbsp;<span class="op" id="2331271">!=</span>&nbsp;<span class="ident" id="2331274">nil</span>&nbsp;<span class="op" id="2331278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331282">return</span>&nbsp;<span class="op" id="2331289">&amp;</span><span class="ident" id="2331290">PathError</span><span class="op" id="2331299">{</span><span class="string" id="2331300">&#34;chdir&#34;</span><span class="op" id="2331307">,</span>&nbsp;<span class="ident" id="2331309">f</span><span class="op" id="2331310">.</span><span class="ident" id="2331311">name</span><span class="op" id="2331315">,</span>&nbsp;<span class="ident" id="2331317">e</span><span class="op" id="2331318">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2331321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331324">return</span>&nbsp;<span class="ident" id="2331331">nil</span><br>
<span class="lineno"></span><span class="op" id="2331335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2331338">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2331407">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2331473">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2331506">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2331562">func</span>&nbsp;<span class="ident" id="2331567">Open</span><span class="op" id="2331571">(</span><span class="ident" id="2331572">name</span>&nbsp;<span class="builtintype" id="2331577">string</span><span class="op" id="2331583">)</span>&nbsp;<span class="op" id="2331585">(</span><span class="ident" id="2331586">file</span>&nbsp;<span class="op" id="2331591">*</span><span class="ident" id="2331592">File</span><span class="op" id="2331596">,</span>&nbsp;<span class="ident" id="2331598">err</span>&nbsp;<span class="builtintype" id="2331602">error</span><span class="op" id="2331607">)</span>&nbsp;<span class="op" id="2331609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331612">return</span>&nbsp;<span class="ident" id="2331619">OpenFile</span><span class="op" id="2331627">(</span><span class="ident" id="2331628">name</span><span class="op" id="2331632">,</span>&nbsp;<span class="ident" id="2331634">O_RDONLY</span><span class="op" id="2331642">,</span>&nbsp;<span class="num" id="2331644">0</span><span class="op" id="2331645">)</span><br>
<span class="lineno">240</span><span class="op" id="2331647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2331650">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2331720">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2331788">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2331857">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2331868">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2331924">func</span>&nbsp;<span class="ident" id="2331929">Create</span><span class="op" id="2331935">(</span><span class="ident" id="2331936">name</span>&nbsp;<span class="builtintype" id="2331941">string</span><span class="op" id="2331947">)</span>&nbsp;<span class="op" id="2331949">(</span><span class="ident" id="2331950">file</span>&nbsp;<span class="op" id="2331955">*</span><span class="ident" id="2331956">File</span><span class="op" id="2331960">,</span>&nbsp;<span class="ident" id="2331962">err</span>&nbsp;<span class="builtintype" id="2331966">error</span><span class="op" id="2331971">)</span>&nbsp;<span class="op" id="2331973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2331976">return</span>&nbsp;<span class="ident" id="2331983">OpenFile</span><span class="op" id="2331991">(</span><span class="ident" id="2331992">name</span><span class="op" id="2331996">,</span>&nbsp;<span class="ident" id="2331998">O_RDWR</span><span class="op" id="2332004">|</span><span class="ident" id="2332005">O_CREATE</span><span class="op" id="2332013">|</span><span class="ident" id="2332014">O_TRUNC</span><span class="op" id="2332021">,</span>&nbsp;<span class="num" id="2332023">0666</span><span class="op" id="2332027">)</span><br>
<span class="lineno"></span><span class="op" id="2332029">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2332032">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2332065">var</span>&nbsp;<span class="ident" id="2332069">lstat</span>&nbsp;<span class="op" id="2332075">=</span>&nbsp;<span class="ident" id="2332077">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2332084">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2332156">func</span>&nbsp;<span class="ident" id="2332161">Rename</span><span class="op" id="2332167">(</span><span class="ident" id="2332168">oldpath</span><span class="op" id="2332175">,</span>&nbsp;<span class="ident" id="2332177">newpath</span>&nbsp;<span class="builtintype" id="2332185">string</span><span class="op" id="2332191">)</span>&nbsp;<span class="builtintype" id="2332193">error</span>&nbsp;<span class="op" id="2332199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2332202">return</span>&nbsp;<span class="ident" id="2332209">rename</span><span class="op" id="2332215">(</span><span class="ident" id="2332216">oldpath</span><span class="op" id="2332223">,</span>&nbsp;<span class="ident" id="2332225">newpath</span><span class="op" id="2332232">)</span><br>
<span class="lineno"></span><span class="op" id="2332234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2332237">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2332309">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2332373">func</span>&nbsp;<span class="ident" id="2332378">fixCount</span><span class="op" id="2332386">(</span><span class="ident" id="2332387">n</span>&nbsp;<span class="builtintype" id="2332389">int</span><span class="op" id="2332392">,</span>&nbsp;<span class="ident" id="2332394">err</span>&nbsp;<span class="builtintype" id="2332398">error</span><span class="op" id="2332403">)</span>&nbsp;<span class="op" id="2332405">(</span><span class="builtintype" id="2332406">int</span><span class="op" id="2332409">,</span>&nbsp;<span class="builtintype" id="2332411">error</span><span class="op" id="2332416">)</span>&nbsp;<span class="op" id="2332418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2332421">if</span>&nbsp;<span class="ident" id="2332424">n</span>&nbsp;<span class="op" id="2332426">&lt;</span>&nbsp;<span class="num" id="2332428">0</span>&nbsp;<span class="op" id="2332430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2332434">n</span>&nbsp;<span class="op" id="2332436">=</span>&nbsp;<span class="num" id="2332438">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2332441">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2332444">return</span>&nbsp;<span class="ident" id="2332451">n</span><span class="op" id="2332452">,</span>&nbsp;<span class="ident" id="2332454">err</span><br>
<span class="lineno"></span><span class="op" id="2332458">}</span>
</div>
</body>
</html>
