<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3538209">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3538265">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3538319">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3538370">package</span>&nbsp;<span class="ident" id="3538378">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538386">import</span>&nbsp;<span class="op" id="3538393">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3538396">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3538402">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3538419">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3538430">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3538438">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3538445">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3538448">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3538472">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3538538">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3538606">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3538632">var</span>&nbsp;<span class="ident" id="3538636">rand</span>&nbsp;<span class="builtintype" id="3538641">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3538648">var</span>&nbsp;<span class="ident" id="3538652">randmu</span>&nbsp;<span class="ident" id="3538659"><a href="/io/ioutil/tempfile.go.html#3538430">sync</a></span><span class="op" id="3538663">.</span><span class="ident" id="3538664">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3538671">func</span>&nbsp;<span class="ident" id="3538676">reseed</span><span class="op" id="3538682">(</span><span class="op" id="3538683">)</span>&nbsp;<span class="builtintype" id="3538685">uint32</span>&nbsp;<span class="op" id="3538692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538695">return</span>&nbsp;<span class="builtintype" id="3538702">uint32</span><span class="op" id="3538708">(</span><span class="ident" id="3538709"><a href="/io/ioutil/tempfile.go.html#3538438">time</a></span><span class="op" id="3538713">.</span><span class="ident" id="3538714">Now</span><span class="op" id="3538717">(</span><span class="op" id="3538718">)</span><span class="op" id="3538719">.</span><span class="ident" id="3538720">UnixNano</span><span class="op" id="3538728">(</span><span class="op" id="3538729">)</span>&nbsp;<span class="op" id="3538731">+</span>&nbsp;<span class="ident" id="3538733">int64</span><span class="op" id="3538738">(</span><span class="ident" id="3538739"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3538741">.</span><span class="ident" id="3538742">Getpid</span><span class="op" id="3538748">(</span><span class="op" id="3538749">)</span><span class="op" id="3538750">)</span><span class="op" id="3538751">)</span><br>
<span class="lineno"></span><span class="op" id="3538753">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3538756">func</span>&nbsp;<span class="ident" id="3538761">nextSuffix</span><span class="op" id="3538771">(</span><span class="op" id="3538772">)</span>&nbsp;<span class="builtintype" id="3538774">string</span>&nbsp;<span class="op" id="3538781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538784"><a href="/io/ioutil/tempfile.go.html#3538652">randmu</a></span><span class="op" id="3538790">.</span><span class="ident" id="3538791">Lock</span><span class="op" id="3538795">(</span><span class="op" id="3538796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538799">r</span>&nbsp;<span class="op" id="3538801">:=</span>&nbsp;<span class="ident" id="3538804"><a href="/io/ioutil/tempfile.go.html#3538636">rand</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538810">if</span>&nbsp;<span class="ident" id="3538813"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span>&nbsp;<span class="op" id="3538815">==</span>&nbsp;<span class="num" id="3538818">0</span>&nbsp;<span class="op" id="3538820">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538824"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span>&nbsp;<span class="op" id="3538826">=</span>&nbsp;<span class="ident" id="3538828"><a href="/io/ioutil/tempfile.go.html#3538676">reseed</a></span><span class="op" id="3538834">(</span><span class="op" id="3538835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3538838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538841"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span>&nbsp;<span class="op" id="3538843">=</span>&nbsp;<span class="ident" id="3538845"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span><span class="op" id="3538846">*</span><span class="num" id="3538847">1664525</span>&nbsp;<span class="op" id="3538855">+</span>&nbsp;<span class="num" id="3538857">1013904223</span>&nbsp;<span class="comment" id="3538868">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538905"><a href="/io/ioutil/tempfile.go.html#3538636">rand</a></span>&nbsp;<span class="op" id="3538910">=</span>&nbsp;<span class="ident" id="3538912"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3538915"><a href="/io/ioutil/tempfile.go.html#3538652">randmu</a></span><span class="op" id="3538921">.</span><span class="ident" id="3538922">Unlock</span><span class="op" id="3538928">(</span><span class="op" id="3538929">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3538932">return</span>&nbsp;<span class="ident" id="3538939"><a href="/io/ioutil/tempfile.go.html#3538419">strconv</a></span><span class="op" id="3538946">.</span><span class="ident" id="3538947">Itoa</span><span class="op" id="3538951">(</span><span class="builtintype" id="3538952">int</span><span class="op" id="3538955">(</span><span class="num" id="3538956">1e9</span>&nbsp;<span class="op" id="3538960">+</span>&nbsp;<span class="ident" id="3538962"><a href="/io/ioutil/tempfile.go.html#3538799">r</a></span><span class="op" id="3538963">%</span><span class="num" id="3538964">1e9</span><span class="op" id="3538967">)</span><span class="op" id="3538968">)</span><span class="op" id="3538969">[</span><span class="num" id="3538970">1</span><span class="op" id="3538971">:</span><span class="op" id="3538972">]</span><br>
<span class="lineno"></span><span class="op" id="3538974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3538977">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3539039">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3539104">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3539156">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3539223">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3539264">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3539317">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3539380">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3539452">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3539497">func</span>&nbsp;<span class="ident" id="3539502">TempFile</span><span class="op" id="3539510">(</span><span class="ident" id="3539511">dir</span><span class="op" id="3539514">,</span>&nbsp;<span class="ident" id="3539516">prefix</span>&nbsp;<span class="builtintype" id="3539523">string</span><span class="op" id="3539529">)</span>&nbsp;<span class="op" id="3539531">(</span><span class="ident" id="3539532">f</span>&nbsp;<span class="op" id="3539534">*</span><span class="ident" id="3539535"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539537">.</span><span class="ident" id="3539538">File</span><span class="op" id="3539542">,</span>&nbsp;<span class="ident" id="3539544">err</span>&nbsp;<span class="builtintype" id="3539548">error</span><span class="op" id="3539553">)</span>&nbsp;<span class="op" id="3539555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539558">if</span>&nbsp;<span class="ident" id="3539561"><a href="/io/ioutil/tempfile.go.html#3539511">dir</a></span>&nbsp;<span class="op" id="3539565">==</span>&nbsp;<span class="string" id="3539568">&#34;&#34;</span>&nbsp;<span class="op" id="3539571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539575"><a href="/io/ioutil/tempfile.go.html#3539511">dir</a></span>&nbsp;<span class="op" id="3539579">=</span>&nbsp;<span class="ident" id="3539581"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539583">.</span><span class="ident" id="3539584">TempDir</span><span class="op" id="3539591">(</span><span class="op" id="3539592">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539599">nconflict</span>&nbsp;<span class="op" id="3539609">:=</span>&nbsp;<span class="num" id="3539612">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539615">for</span>&nbsp;<span class="ident" id="3539619">i</span>&nbsp;<span class="op" id="3539621">:=</span>&nbsp;<span class="num" id="3539624">0</span><span class="op" id="3539625">;</span>&nbsp;<span class="ident" id="3539627"><a href="/io/ioutil/tempfile.go.html#3539619">i</a></span>&nbsp;<span class="op" id="3539629">&lt;</span>&nbsp;<span class="num" id="3539631">10000</span><span class="op" id="3539636">;</span>&nbsp;<span class="ident" id="3539638"><a href="/io/ioutil/tempfile.go.html#3539619">i</a></span><span class="op" id="3539639">++</span>&nbsp;<span class="op" id="3539642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539646">name</span>&nbsp;<span class="op" id="3539651">:=</span>&nbsp;<span class="ident" id="3539654"><a href="/io/ioutil/tempfile.go.html#3538402">filepath</a></span><span class="op" id="3539662">.</span><span class="ident" id="3539663">Join</span><span class="op" id="3539667">(</span><span class="ident" id="3539668"><a href="/io/ioutil/tempfile.go.html#3539511">dir</a></span><span class="op" id="3539671">,</span>&nbsp;<span class="ident" id="3539673"><a href="/io/ioutil/tempfile.go.html#3539516">prefix</a></span><span class="op" id="3539679">+</span><span class="ident" id="3539680"><a href="/io/ioutil/tempfile.go.html#3538761">nextSuffix</a></span><span class="op" id="3539690">(</span><span class="op" id="3539691">)</span><span class="op" id="3539692">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539696"><a href="/io/ioutil/tempfile.go.html#3539532">f</a></span><span class="op" id="3539697">,</span>&nbsp;<span class="ident" id="3539699"><a href="/io/ioutil/tempfile.go.html#3539544">err</a></span>&nbsp;<span class="op" id="3539703">=</span>&nbsp;<span class="ident" id="3539705"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539707">.</span><span class="ident" id="3539708">OpenFile</span><span class="op" id="3539716">(</span><span class="ident" id="3539717"><a href="/io/ioutil/tempfile.go.html#3539646">name</a></span><span class="op" id="3539721">,</span>&nbsp;<span class="ident" id="3539723"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539725">.</span><span class="ident" id="3539726">O_RDWR</span><span class="op" id="3539732">|</span><span class="ident" id="3539733"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539735">.</span><span class="ident" id="3539736">O_CREATE</span><span class="op" id="3539744">|</span><span class="ident" id="3539745"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539747">.</span><span class="ident" id="3539748">O_EXCL</span><span class="op" id="3539754">,</span>&nbsp;<span class="num" id="3539756">0600</span><span class="op" id="3539760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539764">if</span>&nbsp;<span class="ident" id="3539767"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3539769">.</span><span class="ident" id="3539770">IsExist</span><span class="op" id="3539777">(</span><span class="ident" id="3539778"><a href="/io/ioutil/tempfile.go.html#3539544">err</a></span><span class="op" id="3539781">)</span>&nbsp;<span class="op" id="3539783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539788">if</span>&nbsp;<span class="ident" id="3539791"><a href="/io/ioutil/tempfile.go.html#3539599">nconflict</a></span><span class="op" id="3539800">++</span><span class="op" id="3539802">;</span>&nbsp;<span class="ident" id="3539804"><a href="/io/ioutil/tempfile.go.html#3539599">nconflict</a></span>&nbsp;<span class="op" id="3539814">&gt;</span>&nbsp;<span class="num" id="3539816">10</span>&nbsp;<span class="op" id="3539819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3539825"><a href="/io/ioutil/tempfile.go.html#3538636">rand</a></span>&nbsp;<span class="op" id="3539830">=</span>&nbsp;<span class="ident" id="3539832"><a href="/io/ioutil/tempfile.go.html#3538676">reseed</a></span><span class="op" id="3539838">(</span><span class="op" id="3539839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539844">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539849">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539864">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3539871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3539874">return</span><br>
<span class="lineno">65</span><span class="op" id="3539881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3539884">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3539950">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3540015">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3540079">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3540138">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3540190">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3540264">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3540314">func</span>&nbsp;<span class="ident" id="3540319">TempDir</span><span class="op" id="3540326">(</span><span class="ident" id="3540327">dir</span><span class="op" id="3540330">,</span>&nbsp;<span class="ident" id="3540332">prefix</span>&nbsp;<span class="builtintype" id="3540339">string</span><span class="op" id="3540345">)</span>&nbsp;<span class="op" id="3540347">(</span><span class="ident" id="3540348">name</span>&nbsp;<span class="builtintype" id="3540353">string</span><span class="op" id="3540359">,</span>&nbsp;<span class="ident" id="3540361">err</span>&nbsp;<span class="builtintype" id="3540365">error</span><span class="op" id="3540370">)</span>&nbsp;<span class="op" id="3540372">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540375">if</span>&nbsp;<span class="ident" id="3540378"><a href="/io/ioutil/tempfile.go.html#3540327">dir</a></span>&nbsp;<span class="op" id="3540382">==</span>&nbsp;<span class="string" id="3540385">&#34;&#34;</span>&nbsp;<span class="op" id="3540388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540392"><a href="/io/ioutil/tempfile.go.html#3540327">dir</a></span>&nbsp;<span class="op" id="3540396">=</span>&nbsp;<span class="ident" id="3540398"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3540400">.</span><span class="ident" id="3540401">TempDir</span><span class="op" id="3540408">(</span><span class="op" id="3540409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540416">nconflict</span>&nbsp;<span class="op" id="3540426">:=</span>&nbsp;<span class="num" id="3540429">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540432">for</span>&nbsp;<span class="ident" id="3540436">i</span>&nbsp;<span class="op" id="3540438">:=</span>&nbsp;<span class="num" id="3540441">0</span><span class="op" id="3540442">;</span>&nbsp;<span class="ident" id="3540444"><a href="/io/ioutil/tempfile.go.html#3540436">i</a></span>&nbsp;<span class="op" id="3540446">&lt;</span>&nbsp;<span class="num" id="3540448">10000</span><span class="op" id="3540453">;</span>&nbsp;<span class="ident" id="3540455"><a href="/io/ioutil/tempfile.go.html#3540436">i</a></span><span class="op" id="3540456">++</span>&nbsp;<span class="op" id="3540459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540463">try</span>&nbsp;<span class="op" id="3540467">:=</span>&nbsp;<span class="ident" id="3540470"><a href="/io/ioutil/tempfile.go.html#3538402">filepath</a></span><span class="op" id="3540478">.</span><span class="ident" id="3540479">Join</span><span class="op" id="3540483">(</span><span class="ident" id="3540484"><a href="/io/ioutil/tempfile.go.html#3540327">dir</a></span><span class="op" id="3540487">,</span>&nbsp;<span class="ident" id="3540489"><a href="/io/ioutil/tempfile.go.html#3540332">prefix</a></span><span class="op" id="3540495">+</span><span class="ident" id="3540496"><a href="/io/ioutil/tempfile.go.html#3538761">nextSuffix</a></span><span class="op" id="3540506">(</span><span class="op" id="3540507">)</span><span class="op" id="3540508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540512"><a href="/io/ioutil/tempfile.go.html#3540361">err</a></span>&nbsp;<span class="op" id="3540516">=</span>&nbsp;<span class="ident" id="3540518"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3540520">.</span><span class="ident" id="3540521">Mkdir</span><span class="op" id="3540526">(</span><span class="ident" id="3540527"><a href="/io/ioutil/tempfile.go.html#3540463">try</a></span><span class="op" id="3540530">,</span>&nbsp;<span class="num" id="3540532">0700</span><span class="op" id="3540536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540540">if</span>&nbsp;<span class="ident" id="3540543"><a href="/io/ioutil/tempfile.go.html#3538396">os</a></span><span class="op" id="3540545">.</span><span class="ident" id="3540546">IsExist</span><span class="op" id="3540553">(</span><span class="ident" id="3540554"><a href="/io/ioutil/tempfile.go.html#3540361">err</a></span><span class="op" id="3540557">)</span>&nbsp;<span class="op" id="3540559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540564">if</span>&nbsp;<span class="ident" id="3540567"><a href="/io/ioutil/tempfile.go.html#3540416">nconflict</a></span><span class="op" id="3540576">++</span><span class="op" id="3540578">;</span>&nbsp;<span class="ident" id="3540580"><a href="/io/ioutil/tempfile.go.html#3540416">nconflict</a></span>&nbsp;<span class="op" id="3540590">&gt;</span>&nbsp;<span class="num" id="3540592">10</span>&nbsp;<span class="op" id="3540595">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540601"><a href="/io/ioutil/tempfile.go.html#3538636">rand</a></span>&nbsp;<span class="op" id="3540606">=</span>&nbsp;<span class="ident" id="3540608"><a href="/io/ioutil/tempfile.go.html#3538676">reseed</a></span><span class="op" id="3540614">(</span><span class="op" id="3540615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540625">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540640">if</span>&nbsp;<span class="ident" id="3540643"><a href="/io/ioutil/tempfile.go.html#3540361">err</a></span>&nbsp;<span class="op" id="3540647">==</span>&nbsp;<span class="ident" id="3540650">nil</span>&nbsp;<span class="op" id="3540654">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3540659"><a href="/io/ioutil/tempfile.go.html#3540348">name</a></span>&nbsp;<span class="op" id="3540664">=</span>&nbsp;<span class="ident" id="3540666"><a href="/io/ioutil/tempfile.go.html#3540463">try</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540676">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3540683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3540686">return</span><br>
<span class="lineno">95</span><span class="op" id="3540693">}</span>
</div>
</body>
</html>
