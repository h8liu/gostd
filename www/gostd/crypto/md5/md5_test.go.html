<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7548862">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7548917">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7548971">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7549022">package</span>&nbsp;<span class="ident" id="7549030">md5</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7549035">import</span>&nbsp;<span class="op" id="7549042">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7549045">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7549060">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7549067">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7549073">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7549084">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="7549093">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7549096">type</span>&nbsp;<span class="ident" id="7549101">md5Test</span>&nbsp;<span class="keyword" id="7549109">struct</span>&nbsp;<span class="op" id="7549116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549119">out</span>&nbsp;<span class="builtintype" id="7549123">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7549131">in</span>&nbsp;&nbsp;<span class="builtintype" id="7549135">string</span><br>
<span class="lineno"></span><span class="op" id="7549142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7549145">var</span>&nbsp;<span class="ident" id="7549149">golden</span>&nbsp;<span class="op" id="7549156">=</span>&nbsp;<span class="op" id="7549158">[</span><span class="op" id="7549159">]</span><span class="ident" id="7549160">md5Test</span><span class="op" id="7549167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549170">{</span><span class="string" id="7549171">&#34;d41d8cd98f00b204e9800998ecf8427e&#34;</span><span class="op" id="7549205">,</span>&nbsp;<span class="string" id="7549207">&#34;&#34;</span><span class="op" id="7549209">}</span><span class="op" id="7549210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549213">{</span><span class="string" id="7549214">&#34;0cc175b9c0f1b6a831c399e269772661&#34;</span><span class="op" id="7549248">,</span>&nbsp;<span class="string" id="7549250">&#34;a&#34;</span><span class="op" id="7549253">}</span><span class="op" id="7549254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549257">{</span><span class="string" id="7549258">&#34;187ef4436122d1cc2f40dc2b92f0eba0&#34;</span><span class="op" id="7549292">,</span>&nbsp;<span class="string" id="7549294">&#34;ab&#34;</span><span class="op" id="7549298">}</span><span class="op" id="7549299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549302">{</span><span class="string" id="7549303">&#34;900150983cd24fb0d6963f7d28e17f72&#34;</span><span class="op" id="7549337">,</span>&nbsp;<span class="string" id="7549339">&#34;abc&#34;</span><span class="op" id="7549344">}</span><span class="op" id="7549345">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549348">{</span><span class="string" id="7549349">&#34;e2fc714c4727ee9395f324cd2e7f331f&#34;</span><span class="op" id="7549383">,</span>&nbsp;<span class="string" id="7549385">&#34;abcd&#34;</span><span class="op" id="7549391">}</span><span class="op" id="7549392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549395">{</span><span class="string" id="7549396">&#34;ab56b4d92b40713acc5af89985d4b786&#34;</span><span class="op" id="7549430">,</span>&nbsp;<span class="string" id="7549432">&#34;abcde&#34;</span><span class="op" id="7549439">}</span><span class="op" id="7549440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549443">{</span><span class="string" id="7549444">&#34;e80b5017098950fc58aad83c8c14978e&#34;</span><span class="op" id="7549478">,</span>&nbsp;<span class="string" id="7549480">&#34;abcdef&#34;</span><span class="op" id="7549488">}</span><span class="op" id="7549489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549492">{</span><span class="string" id="7549493">&#34;7ac66c0f148de9519b8bd264312c4d64&#34;</span><span class="op" id="7549527">,</span>&nbsp;<span class="string" id="7549529">&#34;abcdefg&#34;</span><span class="op" id="7549538">}</span><span class="op" id="7549539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549542">{</span><span class="string" id="7549543">&#34;e8dc4081b13434b45189a720b77b6818&#34;</span><span class="op" id="7549577">,</span>&nbsp;<span class="string" id="7549579">&#34;abcdefgh&#34;</span><span class="op" id="7549589">}</span><span class="op" id="7549590">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549593">{</span><span class="string" id="7549594">&#34;8aa99b1f439ff71293e95357bac6fd94&#34;</span><span class="op" id="7549628">,</span>&nbsp;<span class="string" id="7549630">&#34;abcdefghi&#34;</span><span class="op" id="7549641">}</span><span class="op" id="7549642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549645">{</span><span class="string" id="7549646">&#34;a925576942e94b2ef57a066101b48876&#34;</span><span class="op" id="7549680">,</span>&nbsp;<span class="string" id="7549682">&#34;abcdefghij&#34;</span><span class="op" id="7549694">}</span><span class="op" id="7549695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549698">{</span><span class="string" id="7549699">&#34;d747fc1719c7eacb84058196cfe56d57&#34;</span><span class="op" id="7549733">,</span>&nbsp;<span class="string" id="7549735">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="7549778">}</span><span class="op" id="7549779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549782">{</span><span class="string" id="7549783">&#34;bff2dcb37ef3a44ba43ab144768ca837&#34;</span><span class="op" id="7549817">,</span>&nbsp;<span class="string" id="7549819">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="7549878">}</span><span class="op" id="7549879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549882">{</span><span class="string" id="7549883">&#34;0441015ecb54a7342d017ed1bcfdbea5&#34;</span><span class="op" id="7549917">,</span>&nbsp;<span class="string" id="7549919">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="7549963">}</span><span class="op" id="7549964">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7549967">{</span><span class="string" id="7549968">&#34;9e3cac8e9e9757a60c3ea391130d3689&#34;</span><span class="op" id="7550002">,</span>&nbsp;<span class="string" id="7550004">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="7550063">}</span><span class="op" id="7550064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550067">{</span><span class="string" id="7550068">&#34;a0f04459b031f916a59a35cc482dc039&#34;</span><span class="op" id="7550102">,</span>&nbsp;<span class="string" id="7550104">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="7550164">}</span><span class="op" id="7550165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550168">{</span><span class="string" id="7550169">&#34;e7a48e0fe884faf31475d2a04b1362cc&#34;</span><span class="op" id="7550203">,</span>&nbsp;<span class="string" id="7550205">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="7550234">}</span><span class="op" id="7550235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550238">{</span><span class="string" id="7550239">&#34;637d2fe925c07c113800509964fb0e06&#34;</span><span class="op" id="7550273">,</span>&nbsp;<span class="string" id="7550275">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="7550344">}</span><span class="op" id="7550345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550348">{</span><span class="string" id="7550349">&#34;834a8d18d5c6562119cf4c7f5086cb71&#34;</span><span class="op" id="7550383">,</span>&nbsp;<span class="string" id="7550385">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="7550444">}</span><span class="op" id="7550445">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550448">{</span><span class="string" id="7550449">&#34;de3a4d2fd6c73ec2db2abad23b444281&#34;</span><span class="op" id="7550483">,</span>&nbsp;<span class="string" id="7550485">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="7550575">}</span><span class="op" id="7550576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550579">{</span><span class="string" id="7550580">&#34;acf203f997e2cf74ea3aff86985aefaf&#34;</span><span class="op" id="7550614">,</span>&nbsp;<span class="string" id="7550616">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="7550693">}</span><span class="op" id="7550694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550697">{</span><span class="string" id="7550698">&#34;e1c1384cb4d2221dfdd7c795a4222c9a&#34;</span><span class="op" id="7550732">,</span>&nbsp;<span class="string" id="7550734">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="7550760">}</span><span class="op" id="7550761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550764">{</span><span class="string" id="7550765">&#34;c90f3ddecc54f34228c063d7525bf644&#34;</span><span class="op" id="7550799">,</span>&nbsp;<span class="string" id="7550801">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="7550852">}</span><span class="op" id="7550853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550856">{</span><span class="string" id="7550857">&#34;cdf7ab6c1fd49bd9933c43f3ea5af185&#34;</span><span class="op" id="7550891">,</span>&nbsp;<span class="string" id="7550893">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="7550967">}</span><span class="op" id="7550968">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7550971">{</span><span class="string" id="7550972">&#34;83bc85234942fc883c063cbd7f0ad5d0&#34;</span><span class="op" id="7551006">,</span>&nbsp;<span class="string" id="7551008">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="7551056">}</span><span class="op" id="7551057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551060">{</span><span class="string" id="7551061">&#34;277cbe255686b48dd7e8f389394d9299&#34;</span><span class="op" id="7551095">,</span>&nbsp;<span class="string" id="7551097">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="7551169">}</span><span class="op" id="7551170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551173">{</span><span class="string" id="7551174">&#34;fd3fb0a7ffb8af16603f3d3af98f8e1f&#34;</span><span class="op" id="7551208">,</span>&nbsp;<span class="string" id="7551210">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="7551280">}</span><span class="op" id="7551281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551284">{</span><span class="string" id="7551285">&#34;469b13a78ebf297ecda64d4723655154&#34;</span><span class="op" id="7551319">,</span>&nbsp;<span class="string" id="7551321">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="7551355">}</span><span class="op" id="7551356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551359">{</span><span class="string" id="7551360">&#34;63eb3a2f466410104731c4b037600110&#34;</span><span class="op" id="7551394">,</span>&nbsp;<span class="string" id="7551396">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="7551486">}</span><span class="op" id="7551487">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551490">{</span><span class="string" id="7551491">&#34;72c2ed7592debca1c90fc0100f931a2f&#34;</span><span class="op" id="7551525">,</span>&nbsp;<span class="string" id="7551527">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="7551661">}</span><span class="op" id="7551662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551665">{</span><span class="string" id="7551666">&#34;132f7619d33b523b1d9e5bd8e0928355&#34;</span><span class="op" id="7551700">,</span>&nbsp;<span class="string" id="7551702">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="7551760">}</span><span class="op" id="7551761">,</span><br>
<span class="lineno"></span><span class="op" id="7551763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7551766">func</span>&nbsp;<span class="ident" id="7551771">TestGolden</span><span class="op" id="7551781">(</span><span class="ident" id="7551782">t</span>&nbsp;<span class="op" id="7551784">*</span><span class="ident" id="7551785">testing</span><span class="op" id="7551792">.</span><span class="ident" id="7551793">T</span><span class="op" id="7551794">)</span>&nbsp;<span class="op" id="7551796">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551799">for</span>&nbsp;<span class="ident" id="7551803">i</span>&nbsp;<span class="op" id="7551805">:=</span>&nbsp;<span class="num" id="7551808">0</span><span class="op" id="7551809">;</span>&nbsp;<span class="ident" id="7551811">i</span>&nbsp;<span class="op" id="7551813">&lt;</span>&nbsp;<span class="builtinfunc" id="7551815">len</span><span class="op" id="7551818">(</span><span class="ident" id="7551819">golden</span><span class="op" id="7551825">)</span><span class="op" id="7551826">;</span>&nbsp;<span class="ident" id="7551828">i</span><span class="op" id="7551829">++</span>&nbsp;<span class="op" id="7551832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551836">g</span>&nbsp;<span class="op" id="7551838">:=</span>&nbsp;<span class="ident" id="7551841">golden</span><span class="op" id="7551847">[</span><span class="ident" id="7551848">i</span><span class="op" id="7551849">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551853">s</span>&nbsp;<span class="op" id="7551855">:=</span>&nbsp;<span class="ident" id="7551858">fmt</span><span class="op" id="7551861">.</span><span class="ident" id="7551862">Sprintf</span><span class="op" id="7551869">(</span><span class="string" id="7551870">&#34;%x&#34;</span><span class="op" id="7551874">,</span>&nbsp;<span class="ident" id="7551876">Sum</span><span class="op" id="7551879">(</span><span class="op" id="7551880">[</span><span class="op" id="7551881">]</span><span class="builtintype" id="7551882">byte</span><span class="op" id="7551886">(</span><span class="ident" id="7551887">g</span><span class="op" id="7551888">.</span><span class="ident" id="7551889">in</span><span class="op" id="7551891">)</span><span class="op" id="7551892">)</span><span class="op" id="7551893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7551897">if</span>&nbsp;<span class="ident" id="7551900">s</span>&nbsp;<span class="op" id="7551902">!=</span>&nbsp;<span class="ident" id="7551905">g</span><span class="op" id="7551906">.</span><span class="ident" id="7551907">out</span>&nbsp;<span class="op" id="7551911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551916">t</span><span class="op" id="7551917">.</span><span class="ident" id="7551918">Fatalf</span><span class="op" id="7551924">(</span><span class="string" id="7551925">&#34;Sum&nbsp;function:&nbsp;md5(%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7551961">,</span>&nbsp;<span class="ident" id="7551963">g</span><span class="op" id="7551964">.</span><span class="ident" id="7551965">in</span><span class="op" id="7551967">,</span>&nbsp;<span class="ident" id="7551969">s</span><span class="op" id="7551970">,</span>&nbsp;<span class="ident" id="7551972">g</span><span class="op" id="7551973">.</span><span class="ident" id="7551974">out</span><span class="op" id="7551977">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7551981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551985">c</span>&nbsp;<span class="op" id="7551987">:=</span>&nbsp;<span class="ident" id="7551990">New</span><span class="op" id="7551993">(</span><span class="op" id="7551994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7551998">buf</span>&nbsp;<span class="op" id="7552002">:=</span>&nbsp;<span class="builtinfunc" id="7552005">make</span><span class="op" id="7552009">(</span><span class="op" id="7552010">[</span><span class="op" id="7552011">]</span><span class="builtintype" id="7552012">byte</span><span class="op" id="7552016">,</span>&nbsp;<span class="builtinfunc" id="7552018">len</span><span class="op" id="7552021">(</span><span class="ident" id="7552022">g</span><span class="op" id="7552023">.</span><span class="ident" id="7552024">in</span><span class="op" id="7552026">)</span><span class="op" id="7552027">+</span><span class="num" id="7552028">4</span><span class="op" id="7552029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552033">for</span>&nbsp;<span class="ident" id="7552037">j</span>&nbsp;<span class="op" id="7552039">:=</span>&nbsp;<span class="num" id="7552042">0</span><span class="op" id="7552043">;</span>&nbsp;<span class="ident" id="7552045">j</span>&nbsp;<span class="op" id="7552047">&lt;</span>&nbsp;<span class="num" id="7552049">3</span><span class="op" id="7552050">+</span><span class="num" id="7552051">4</span><span class="op" id="7552052">;</span>&nbsp;<span class="ident" id="7552054">j</span><span class="op" id="7552055">++</span>&nbsp;<span class="op" id="7552058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552063">if</span>&nbsp;<span class="ident" id="7552066">j</span>&nbsp;<span class="op" id="7552068">&lt;</span>&nbsp;<span class="num" id="7552070">2</span>&nbsp;<span class="op" id="7552072">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552078">io</span><span class="op" id="7552080">.</span><span class="ident" id="7552081">WriteString</span><span class="op" id="7552092">(</span><span class="ident" id="7552093">c</span><span class="op" id="7552094">,</span>&nbsp;<span class="ident" id="7552096">g</span><span class="op" id="7552097">.</span><span class="ident" id="7552098">in</span><span class="op" id="7552100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552105">}</span>&nbsp;<span class="keyword" id="7552107">else</span>&nbsp;<span class="keyword" id="7552112">if</span>&nbsp;<span class="ident" id="7552115">j</span>&nbsp;<span class="op" id="7552117">==</span>&nbsp;<span class="num" id="7552120">2</span>&nbsp;<span class="op" id="7552122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552128">io</span><span class="op" id="7552130">.</span><span class="ident" id="7552131">WriteString</span><span class="op" id="7552142">(</span><span class="ident" id="7552143">c</span><span class="op" id="7552144">,</span>&nbsp;<span class="ident" id="7552146">g</span><span class="op" id="7552147">.</span><span class="ident" id="7552148">in</span><span class="op" id="7552150">[</span><span class="num" id="7552151">0</span><span class="op" id="7552152">:</span><span class="builtinfunc" id="7552153">len</span><span class="op" id="7552156">(</span><span class="ident" id="7552157">g</span><span class="op" id="7552158">.</span><span class="ident" id="7552159">in</span><span class="op" id="7552161">)</span><span class="op" id="7552162">/</span><span class="num" id="7552163">2</span><span class="op" id="7552164">]</span><span class="op" id="7552165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552171">c</span><span class="op" id="7552172">.</span><span class="ident" id="7552173">Sum</span><span class="op" id="7552176">(</span><span class="ident" id="7552177">nil</span><span class="op" id="7552180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552186">io</span><span class="op" id="7552188">.</span><span class="ident" id="7552189">WriteString</span><span class="op" id="7552200">(</span><span class="ident" id="7552201">c</span><span class="op" id="7552202">,</span>&nbsp;<span class="ident" id="7552204">g</span><span class="op" id="7552205">.</span><span class="ident" id="7552206">in</span><span class="op" id="7552208">[</span><span class="builtinfunc" id="7552209">len</span><span class="op" id="7552212">(</span><span class="ident" id="7552213">g</span><span class="op" id="7552214">.</span><span class="ident" id="7552215">in</span><span class="op" id="7552217">)</span><span class="op" id="7552218">/</span><span class="num" id="7552219">2</span><span class="op" id="7552220">:</span><span class="op" id="7552221">]</span><span class="op" id="7552222">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552227">}</span>&nbsp;<span class="keyword" id="7552229">else</span>&nbsp;<span class="keyword" id="7552234">if</span>&nbsp;<span class="ident" id="7552237">j</span>&nbsp;<span class="op" id="7552239">&gt;</span>&nbsp;<span class="num" id="7552241">2</span>&nbsp;<span class="op" id="7552243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7552249">//&nbsp;test&nbsp;unaligned&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552277">buf</span>&nbsp;<span class="op" id="7552281">=</span>&nbsp;<span class="ident" id="7552283">buf</span><span class="op" id="7552286">[</span><span class="num" id="7552287">1</span><span class="op" id="7552288">:</span><span class="op" id="7552289">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7552295">copy</span><span class="op" id="7552299">(</span><span class="ident" id="7552300">buf</span><span class="op" id="7552303">,</span>&nbsp;<span class="ident" id="7552305">g</span><span class="op" id="7552306">.</span><span class="ident" id="7552307">in</span><span class="op" id="7552309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552315">c</span><span class="op" id="7552316">.</span><span class="ident" id="7552317">Write</span><span class="op" id="7552322">(</span><span class="ident" id="7552323">buf</span><span class="op" id="7552326">[</span><span class="op" id="7552327">:</span><span class="builtinfunc" id="7552328">len</span><span class="op" id="7552331">(</span><span class="ident" id="7552332">g</span><span class="op" id="7552333">.</span><span class="ident" id="7552334">in</span><span class="op" id="7552336">)</span><span class="op" id="7552337">]</span><span class="op" id="7552338">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552348">s</span>&nbsp;<span class="op" id="7552350">:=</span>&nbsp;<span class="ident" id="7552353">fmt</span><span class="op" id="7552356">.</span><span class="ident" id="7552357">Sprintf</span><span class="op" id="7552364">(</span><span class="string" id="7552365">&#34;%x&#34;</span><span class="op" id="7552369">,</span>&nbsp;<span class="ident" id="7552371">c</span><span class="op" id="7552372">.</span><span class="ident" id="7552373">Sum</span><span class="op" id="7552376">(</span><span class="ident" id="7552377">nil</span><span class="op" id="7552380">)</span><span class="op" id="7552381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552386">if</span>&nbsp;<span class="ident" id="7552389">s</span>&nbsp;<span class="op" id="7552391">!=</span>&nbsp;<span class="ident" id="7552394">g</span><span class="op" id="7552395">.</span><span class="ident" id="7552396">out</span>&nbsp;<span class="op" id="7552400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552406">t</span><span class="op" id="7552407">.</span><span class="ident" id="7552408">Fatalf</span><span class="op" id="7552414">(</span><span class="string" id="7552415">&#34;md5[%d](%s)&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7552441">,</span>&nbsp;<span class="ident" id="7552443">j</span><span class="op" id="7552444">,</span>&nbsp;<span class="ident" id="7552446">g</span><span class="op" id="7552447">.</span><span class="ident" id="7552448">in</span><span class="op" id="7552450">,</span>&nbsp;<span class="ident" id="7552452">s</span><span class="op" id="7552453">,</span>&nbsp;<span class="ident" id="7552455">g</span><span class="op" id="7552456">.</span><span class="ident" id="7552457">out</span><span class="op" id="7552460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552465">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552470">c</span><span class="op" id="7552471">.</span><span class="ident" id="7552472">Reset</span><span class="op" id="7552477">(</span><span class="op" id="7552478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552485">}</span><br>
<span class="lineno"></span><span class="op" id="7552487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7552490">func</span>&nbsp;<span class="ident" id="7552495">TestLarge</span><span class="op" id="7552504">(</span><span class="ident" id="7552505">t</span>&nbsp;<span class="op" id="7552507">*</span><span class="ident" id="7552508">testing</span><span class="op" id="7552515">.</span><span class="ident" id="7552516">T</span><span class="op" id="7552517">)</span>&nbsp;<span class="op" id="7552519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552522">const</span>&nbsp;<span class="ident" id="7552528">N</span>&nbsp;<span class="op" id="7552530">=</span>&nbsp;<span class="num" id="7552532">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552539">ok</span>&nbsp;<span class="op" id="7552542">:=</span>&nbsp;<span class="string" id="7552545">&#34;2bb571599a4180e1d542f76904adc3df&#34;</span>&nbsp;<span class="comment" id="7552580">//&nbsp;md5sum&nbsp;of&nbsp;&#34;0123456789&#34;&nbsp;*&nbsp;1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552614">block</span>&nbsp;<span class="op" id="7552620">:=</span>&nbsp;<span class="builtinfunc" id="7552623">make</span><span class="op" id="7552627">(</span><span class="op" id="7552628">[</span><span class="op" id="7552629">]</span><span class="builtintype" id="7552630">byte</span><span class="op" id="7552634">,</span>&nbsp;<span class="num" id="7552636">10004</span><span class="op" id="7552641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552644">c</span>&nbsp;<span class="op" id="7552646">:=</span>&nbsp;<span class="ident" id="7552649">New</span><span class="op" id="7552652">(</span><span class="op" id="7552653">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552656">for</span>&nbsp;<span class="ident" id="7552660">offset</span>&nbsp;<span class="op" id="7552667">:=</span>&nbsp;<span class="num" id="7552670">0</span><span class="op" id="7552671">;</span>&nbsp;<span class="ident" id="7552673">offset</span>&nbsp;<span class="op" id="7552680">&lt;</span>&nbsp;<span class="num" id="7552682">4</span><span class="op" id="7552683">;</span>&nbsp;<span class="ident" id="7552685">offset</span><span class="op" id="7552691">++</span>&nbsp;<span class="op" id="7552694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552698">for</span>&nbsp;<span class="ident" id="7552702">i</span>&nbsp;<span class="op" id="7552704">:=</span>&nbsp;<span class="num" id="7552707">0</span><span class="op" id="7552708">;</span>&nbsp;<span class="ident" id="7552710">i</span>&nbsp;<span class="op" id="7552712">&lt;</span>&nbsp;<span class="ident" id="7552714">N</span><span class="op" id="7552715">;</span>&nbsp;<span class="ident" id="7552717">i</span><span class="op" id="7552718">++</span>&nbsp;<span class="op" id="7552721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552726">block</span><span class="op" id="7552731">[</span><span class="ident" id="7552732">offset</span><span class="op" id="7552738">+</span><span class="ident" id="7552739">i</span><span class="op" id="7552740">]</span>&nbsp;<span class="op" id="7552742">=</span>&nbsp;<span class="string" id="7552744">&#39;0&#39;</span>&nbsp;<span class="op" id="7552748">+</span>&nbsp;<span class="builtintype" id="7552750">byte</span><span class="op" id="7552754">(</span><span class="ident" id="7552755">i</span><span class="op" id="7552756">%</span><span class="num" id="7552757">10</span><span class="op" id="7552759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552767">for</span>&nbsp;<span class="ident" id="7552771">blockSize</span>&nbsp;<span class="op" id="7552781">:=</span>&nbsp;<span class="num" id="7552784">10</span><span class="op" id="7552786">;</span>&nbsp;<span class="ident" id="7552788">blockSize</span>&nbsp;<span class="op" id="7552798">&lt;=</span>&nbsp;<span class="ident" id="7552801">N</span><span class="op" id="7552802">;</span>&nbsp;<span class="ident" id="7552804">blockSize</span>&nbsp;<span class="op" id="7552814">*=</span>&nbsp;<span class="num" id="7552817">10</span>&nbsp;<span class="op" id="7552820">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552825">blocks</span>&nbsp;<span class="op" id="7552832">:=</span>&nbsp;<span class="ident" id="7552835">N</span>&nbsp;<span class="op" id="7552837">/</span>&nbsp;<span class="ident" id="7552839">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552852">b</span>&nbsp;<span class="op" id="7552854">:=</span>&nbsp;<span class="ident" id="7552857">block</span><span class="op" id="7552862">[</span><span class="ident" id="7552863">offset</span>&nbsp;<span class="op" id="7552870">:</span>&nbsp;<span class="ident" id="7552872">offset</span><span class="op" id="7552878">+</span><span class="ident" id="7552879">blockSize</span><span class="op" id="7552888">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552893">c</span><span class="op" id="7552894">.</span><span class="ident" id="7552895">Reset</span><span class="op" id="7552900">(</span><span class="op" id="7552901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552906">for</span>&nbsp;<span class="ident" id="7552910">i</span>&nbsp;<span class="op" id="7552912">:=</span>&nbsp;<span class="num" id="7552915">0</span><span class="op" id="7552916">;</span>&nbsp;<span class="ident" id="7552918">i</span>&nbsp;<span class="op" id="7552920">&lt;</span>&nbsp;<span class="ident" id="7552922">blocks</span><span class="op" id="7552928">;</span>&nbsp;<span class="ident" id="7552930">i</span><span class="op" id="7552931">++</span>&nbsp;<span class="op" id="7552934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552940">c</span><span class="op" id="7552941">.</span><span class="ident" id="7552942">Write</span><span class="op" id="7552947">(</span><span class="ident" id="7552948">b</span><span class="op" id="7552949">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7552954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7552959">s</span>&nbsp;<span class="op" id="7552961">:=</span>&nbsp;<span class="ident" id="7552964">fmt</span><span class="op" id="7552967">.</span><span class="ident" id="7552968">Sprintf</span><span class="op" id="7552975">(</span><span class="string" id="7552976">&#34;%x&#34;</span><span class="op" id="7552980">,</span>&nbsp;<span class="ident" id="7552982">c</span><span class="op" id="7552983">.</span><span class="ident" id="7552984">Sum</span><span class="op" id="7552987">(</span><span class="ident" id="7552988">nil</span><span class="op" id="7552991">)</span><span class="op" id="7552992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7552997">if</span>&nbsp;<span class="ident" id="7553000">s</span>&nbsp;<span class="op" id="7553002">!=</span>&nbsp;<span class="ident" id="7553005">ok</span>&nbsp;<span class="op" id="7553008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553014">t</span><span class="op" id="7553015">.</span><span class="ident" id="7553016">Fatalf</span><span class="op" id="7553022">(</span><span class="string" id="7553023">&#34;md5&nbsp;TestLarge&nbsp;offset=%d,&nbsp;blockSize=%d&nbsp;=&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7553075">,</span>&nbsp;<span class="ident" id="7553077">offset</span><span class="op" id="7553083">,</span>&nbsp;<span class="ident" id="7553085">blockSize</span><span class="op" id="7553094">,</span>&nbsp;<span class="ident" id="7553096">s</span><span class="op" id="7553097">,</span>&nbsp;<span class="ident" id="7553099">ok</span><span class="op" id="7553101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553106">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553113">}</span><br>
<span class="lineno"></span><span class="op" id="7553115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7553118">//&nbsp;Tests&nbsp;that&nbsp;blockGeneric&nbsp;(pure&nbsp;Go)&nbsp;and&nbsp;block&nbsp;(in&nbsp;assembly&nbsp;for&nbsp;amd64,&nbsp;386,&nbsp;arm)&nbsp;match.</span><br>
<span class="lineno">110</span><span class="keyword" id="7553206">func</span>&nbsp;<span class="ident" id="7553211">TestBlockGeneric</span><span class="op" id="7553227">(</span><span class="ident" id="7553228">t</span>&nbsp;<span class="op" id="7553230">*</span><span class="ident" id="7553231">testing</span><span class="op" id="7553238">.</span><span class="ident" id="7553239">T</span><span class="op" id="7553240">)</span>&nbsp;<span class="op" id="7553242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553245">gen</span><span class="op" id="7553248">,</span>&nbsp;<span class="ident" id="7553250">asm</span>&nbsp;<span class="op" id="7553254">:=</span>&nbsp;<span class="ident" id="7553257">New</span><span class="op" id="7553260">(</span><span class="op" id="7553261">)</span><span class="op" id="7553262">.</span><span class="op" id="7553263">(</span><span class="op" id="7553264">*</span><span class="ident" id="7553265">digest</span><span class="op" id="7553271">)</span><span class="op" id="7553272">,</span>&nbsp;<span class="ident" id="7553274">New</span><span class="op" id="7553277">(</span><span class="op" id="7553278">)</span><span class="op" id="7553279">.</span><span class="op" id="7553280">(</span><span class="op" id="7553281">*</span><span class="ident" id="7553282">digest</span><span class="op" id="7553288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553291">buf</span>&nbsp;<span class="op" id="7553295">:=</span>&nbsp;<span class="builtinfunc" id="7553298">make</span><span class="op" id="7553302">(</span><span class="op" id="7553303">[</span><span class="op" id="7553304">]</span><span class="builtintype" id="7553305">byte</span><span class="op" id="7553309">,</span>&nbsp;<span class="ident" id="7553311">BlockSize</span><span class="op" id="7553320">*</span><span class="num" id="7553321">20</span><span class="op" id="7553323">)</span>&nbsp;<span class="comment" id="7553325">//&nbsp;arbitrary&nbsp;factor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553346">rand</span><span class="op" id="7553350">.</span><span class="ident" id="7553351">Read</span><span class="op" id="7553355">(</span><span class="ident" id="7553356">buf</span><span class="op" id="7553359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553362">blockGeneric</span><span class="op" id="7553374">(</span><span class="ident" id="7553375">gen</span><span class="op" id="7553378">,</span>&nbsp;<span class="ident" id="7553380">buf</span><span class="op" id="7553383">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553386">block</span><span class="op" id="7553391">(</span><span class="ident" id="7553392">asm</span><span class="op" id="7553395">,</span>&nbsp;<span class="ident" id="7553397">buf</span><span class="op" id="7553400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7553403">if</span>&nbsp;<span class="op" id="7553406">*</span><span class="ident" id="7553407">gen</span>&nbsp;<span class="op" id="7553411">!=</span>&nbsp;<span class="op" id="7553414">*</span><span class="ident" id="7553415">asm</span>&nbsp;<span class="op" id="7553419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553423">t</span><span class="op" id="7553424">.</span><span class="ident" id="7553425">Error</span><span class="op" id="7553430">(</span><span class="string" id="7553431">&#34;block&nbsp;and&nbsp;blockGeneric&nbsp;resulted&nbsp;in&nbsp;different&nbsp;states&#34;</span><span class="op" id="7553484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553487">}</span><br>
<span class="lineno"></span><span class="op" id="7553489">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7553492">var</span>&nbsp;<span class="ident" id="7553496">bench</span>&nbsp;<span class="op" id="7553502">=</span>&nbsp;<span class="ident" id="7553504">New</span><span class="op" id="7553507">(</span><span class="op" id="7553508">)</span><br>
<span class="lineno"></span><span class="keyword" id="7553510">var</span>&nbsp;<span class="ident" id="7553514">buf</span>&nbsp;<span class="op" id="7553518">=</span>&nbsp;<span class="builtinfunc" id="7553520">make</span><span class="op" id="7553524">(</span><span class="op" id="7553525">[</span><span class="op" id="7553526">]</span><span class="builtintype" id="7553527">byte</span><span class="op" id="7553531">,</span>&nbsp;<span class="num" id="7553533">8192</span><span class="op" id="7553537">+</span><span class="num" id="7553538">1</span><span class="op" id="7553539">)</span><br>
<span class="lineno"></span><span class="keyword" id="7553541">var</span>&nbsp;<span class="ident" id="7553545">sum</span>&nbsp;<span class="op" id="7553549">=</span>&nbsp;<span class="builtinfunc" id="7553551">make</span><span class="op" id="7553555">(</span><span class="op" id="7553556">[</span><span class="op" id="7553557">]</span><span class="builtintype" id="7553558">byte</span><span class="op" id="7553562">,</span>&nbsp;<span class="ident" id="7553564">bench</span><span class="op" id="7553569">.</span><span class="ident" id="7553570">Size</span><span class="op" id="7553574">(</span><span class="op" id="7553575">)</span><span class="op" id="7553576">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="7553579">func</span>&nbsp;<span class="ident" id="7553584">benchmarkSize</span><span class="op" id="7553597">(</span><span class="ident" id="7553598">b</span>&nbsp;<span class="op" id="7553600">*</span><span class="ident" id="7553601">testing</span><span class="op" id="7553608">.</span><span class="ident" id="7553609">B</span><span class="op" id="7553610">,</span>&nbsp;<span class="ident" id="7553612">size</span>&nbsp;<span class="builtintype" id="7553617">int</span><span class="op" id="7553620">,</span>&nbsp;<span class="ident" id="7553622">unaligned</span>&nbsp;<span class="builtintype" id="7553632">bool</span><span class="op" id="7553636">)</span>&nbsp;<span class="op" id="7553638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553641">b</span><span class="op" id="7553642">.</span><span class="ident" id="7553643">SetBytes</span><span class="op" id="7553651">(</span><span class="ident" id="7553652">int64</span><span class="op" id="7553657">(</span><span class="ident" id="7553658">size</span><span class="op" id="7553662">)</span><span class="op" id="7553663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553666">buf</span>&nbsp;<span class="op" id="7553670">:=</span>&nbsp;<span class="ident" id="7553673">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7553678">if</span>&nbsp;<span class="ident" id="7553681">unaligned</span>&nbsp;<span class="op" id="7553691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7553695">if</span>&nbsp;<span class="builtintype" id="7553698">uintptr</span><span class="op" id="7553705">(</span><span class="ident" id="7553706">unsafe</span><span class="op" id="7553712">.</span><span class="ident" id="7553713">Pointer</span><span class="op" id="7553720">(</span><span class="op" id="7553721">&amp;</span><span class="ident" id="7553722">buf</span><span class="op" id="7553725">[</span><span class="num" id="7553726">0</span><span class="op" id="7553727">]</span><span class="op" id="7553728">)</span><span class="op" id="7553729">)</span><span class="op" id="7553730">&amp;</span><span class="op" id="7553731">(</span><span class="ident" id="7553732">unsafe</span><span class="op" id="7553738">.</span><span class="ident" id="7553739">Alignof</span><span class="op" id="7553746">(</span><span class="builtintype" id="7553747">uint32</span><span class="op" id="7553753">(</span><span class="num" id="7553754">0</span><span class="op" id="7553755">)</span><span class="op" id="7553756">)</span><span class="op" id="7553757">-</span><span class="num" id="7553758">1</span><span class="op" id="7553759">)</span>&nbsp;<span class="op" id="7553761">==</span>&nbsp;<span class="num" id="7553764">0</span>&nbsp;<span class="op" id="7553766">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553771">buf</span>&nbsp;<span class="op" id="7553775">=</span>&nbsp;<span class="ident" id="7553777">buf</span><span class="op" id="7553780">[</span><span class="num" id="7553781">1</span><span class="op" id="7553782">:</span><span class="op" id="7553783">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553793">b</span><span class="op" id="7553794">.</span><span class="ident" id="7553795">ResetTimer</span><span class="op" id="7553805">(</span><span class="op" id="7553806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7553809">for</span>&nbsp;<span class="ident" id="7553813">i</span>&nbsp;<span class="op" id="7553815">:=</span>&nbsp;<span class="num" id="7553818">0</span><span class="op" id="7553819">;</span>&nbsp;<span class="ident" id="7553821">i</span>&nbsp;<span class="op" id="7553823">&lt;</span>&nbsp;<span class="ident" id="7553825">b</span><span class="op" id="7553826">.</span><span class="ident" id="7553827">N</span><span class="op" id="7553828">;</span>&nbsp;<span class="ident" id="7553830">i</span><span class="op" id="7553831">++</span>&nbsp;<span class="op" id="7553834">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553838">bench</span><span class="op" id="7553843">.</span><span class="ident" id="7553844">Reset</span><span class="op" id="7553849">(</span><span class="op" id="7553850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553854">bench</span><span class="op" id="7553859">.</span><span class="ident" id="7553860">Write</span><span class="op" id="7553865">(</span><span class="ident" id="7553866">buf</span><span class="op" id="7553869">[</span><span class="op" id="7553870">:</span><span class="ident" id="7553871">size</span><span class="op" id="7553875">]</span><span class="op" id="7553876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553880">bench</span><span class="op" id="7553885">.</span><span class="ident" id="7553886">Sum</span><span class="op" id="7553889">(</span><span class="ident" id="7553890">sum</span><span class="op" id="7553893">[</span><span class="op" id="7553894">:</span><span class="num" id="7553895">0</span><span class="op" id="7553896">]</span><span class="op" id="7553897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7553900">}</span><br>
<span class="lineno"></span><span class="op" id="7553902">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7553905">func</span>&nbsp;<span class="ident" id="7553910">BenchmarkHash8Bytes</span><span class="op" id="7553929">(</span><span class="ident" id="7553930">b</span>&nbsp;<span class="op" id="7553932">*</span><span class="ident" id="7553933">testing</span><span class="op" id="7553940">.</span><span class="ident" id="7553941">B</span><span class="op" id="7553942">)</span>&nbsp;<span class="op" id="7553944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7553947">benchmarkSize</span><span class="op" id="7553960">(</span><span class="ident" id="7553961">b</span><span class="op" id="7553962">,</span>&nbsp;<span class="num" id="7553964">8</span><span class="op" id="7553965">,</span>&nbsp;<span class="builtintype" id="7553967">false</span><span class="op" id="7553972">)</span><br>
<span class="lineno"></span><span class="op" id="7553974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="keyword" id="7553977">func</span>&nbsp;<span class="ident" id="7553982">BenchmarkHash1K</span><span class="op" id="7553997">(</span><span class="ident" id="7553998">b</span>&nbsp;<span class="op" id="7554000">*</span><span class="ident" id="7554001">testing</span><span class="op" id="7554008">.</span><span class="ident" id="7554009">B</span><span class="op" id="7554010">)</span>&nbsp;<span class="op" id="7554012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554015">benchmarkSize</span><span class="op" id="7554028">(</span><span class="ident" id="7554029">b</span><span class="op" id="7554030">,</span>&nbsp;<span class="num" id="7554032">1024</span><span class="op" id="7554036">,</span>&nbsp;<span class="builtintype" id="7554038">false</span><span class="op" id="7554043">)</span><br>
<span class="lineno"></span><span class="op" id="7554045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7554048">func</span>&nbsp;<span class="ident" id="7554053">BenchmarkHash8K</span><span class="op" id="7554068">(</span><span class="ident" id="7554069">b</span>&nbsp;<span class="op" id="7554071">*</span><span class="ident" id="7554072">testing</span><span class="op" id="7554079">.</span><span class="ident" id="7554080">B</span><span class="op" id="7554081">)</span>&nbsp;<span class="op" id="7554083">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554086">benchmarkSize</span><span class="op" id="7554099">(</span><span class="ident" id="7554100">b</span><span class="op" id="7554101">,</span>&nbsp;<span class="num" id="7554103">8192</span><span class="op" id="7554107">,</span>&nbsp;<span class="builtintype" id="7554109">false</span><span class="op" id="7554114">)</span><br>
<span class="lineno"></span><span class="op" id="7554116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7554119">func</span>&nbsp;<span class="ident" id="7554124">BenchmarkHash8BytesUnaligned</span><span class="op" id="7554152">(</span><span class="ident" id="7554153">b</span>&nbsp;<span class="op" id="7554155">*</span><span class="ident" id="7554156">testing</span><span class="op" id="7554163">.</span><span class="ident" id="7554164">B</span><span class="op" id="7554165">)</span>&nbsp;<span class="op" id="7554167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554170">benchmarkSize</span><span class="op" id="7554183">(</span><span class="ident" id="7554184">b</span><span class="op" id="7554185">,</span>&nbsp;<span class="num" id="7554187">8</span><span class="op" id="7554188">,</span>&nbsp;<span class="builtintype" id="7554190">true</span><span class="op" id="7554194">)</span><br>
<span class="lineno">155</span><span class="op" id="7554196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7554199">func</span>&nbsp;<span class="ident" id="7554204">BenchmarkHash1KUnaligned</span><span class="op" id="7554228">(</span><span class="ident" id="7554229">b</span>&nbsp;<span class="op" id="7554231">*</span><span class="ident" id="7554232">testing</span><span class="op" id="7554239">.</span><span class="ident" id="7554240">B</span><span class="op" id="7554241">)</span>&nbsp;<span class="op" id="7554243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554246">benchmarkSize</span><span class="op" id="7554259">(</span><span class="ident" id="7554260">b</span><span class="op" id="7554261">,</span>&nbsp;<span class="num" id="7554263">1024</span><span class="op" id="7554267">,</span>&nbsp;<span class="builtintype" id="7554269">true</span><span class="op" id="7554273">)</span><br>
<span class="lineno"></span><span class="op" id="7554275">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="7554278">func</span>&nbsp;<span class="ident" id="7554283">BenchmarkHash8KUnaligned</span><span class="op" id="7554307">(</span><span class="ident" id="7554308">b</span>&nbsp;<span class="op" id="7554310">*</span><span class="ident" id="7554311">testing</span><span class="op" id="7554318">.</span><span class="ident" id="7554319">B</span><span class="op" id="7554320">)</span>&nbsp;<span class="op" id="7554322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7554325">benchmarkSize</span><span class="op" id="7554338">(</span><span class="ident" id="7554339">b</span><span class="op" id="7554340">,</span>&nbsp;<span class="num" id="7554342">8192</span><span class="op" id="7554346">,</span>&nbsp;<span class="builtintype" id="7554348">true</span><span class="op" id="7554352">)</span><br>
<span class="lineno"></span><span class="op" id="7554354">}</span>
</div>
</body>
</html>
