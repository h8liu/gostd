<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html" class="current">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3671140">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3671195">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3671249">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3671300">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3671357">package</span>&nbsp;<span class="ident" id="3671365">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3671373">import</span>&nbsp;<span class="op" id="3671380">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3671383">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3671392">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3671398">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3671404">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3671412">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3671419">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3671422">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3671497">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3671562">func</span>&nbsp;<span class="ident" id="3671567">readAll</span><span class="op" id="3671574">(</span><span class="ident" id="3671575">r</span>&nbsp;<span class="ident" id="3671577">io</span><span class="op" id="3671579">.</span><span class="ident" id="3671580">Reader</span><span class="op" id="3671586">,</span>&nbsp;<span class="ident" id="3671588">capacity</span>&nbsp;<span class="ident" id="3671597">int64</span><span class="op" id="3671602">)</span>&nbsp;<span class="op" id="3671604">(</span><span class="ident" id="3671605">b</span>&nbsp;<span class="op" id="3671607">[</span><span class="op" id="3671608">]</span><span class="builtintype" id="3671609">byte</span><span class="op" id="3671613">,</span>&nbsp;<span class="ident" id="3671615">err</span>&nbsp;<span class="builtintype" id="3671619">error</span><span class="op" id="3671624">)</span>&nbsp;<span class="op" id="3671626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3671629">buf</span>&nbsp;<span class="op" id="3671633">:=</span>&nbsp;<span class="ident" id="3671636">bytes</span><span class="op" id="3671641">.</span><span class="ident" id="3671642">NewBuffer</span><span class="op" id="3671651">(</span><span class="builtinfunc" id="3671652">make</span><span class="op" id="3671656">(</span><span class="op" id="3671657">[</span><span class="op" id="3671658">]</span><span class="builtintype" id="3671659">byte</span><span class="op" id="3671663">,</span>&nbsp;<span class="num" id="3671665">0</span><span class="op" id="3671666">,</span>&nbsp;<span class="ident" id="3671668">capacity</span><span class="op" id="3671676">)</span><span class="op" id="3671677">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3671680">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3671740">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3671794">defer</span>&nbsp;<span class="keyword" id="3671800">func</span><span class="op" id="3671804">(</span><span class="op" id="3671805">)</span>&nbsp;<span class="op" id="3671807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3671811">e</span>&nbsp;<span class="op" id="3671813">:=</span>&nbsp;<span class="builtinfunc" id="3671816">recover</span><span class="op" id="3671823">(</span><span class="op" id="3671824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3671828">if</span>&nbsp;<span class="ident" id="3671831">e</span>&nbsp;<span class="op" id="3671833">==</span>&nbsp;<span class="builtintype" id="3671836">nil</span>&nbsp;<span class="op" id="3671840">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3671845">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3671854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3671858">if</span>&nbsp;<span class="ident" id="3671861">panicErr</span><span class="op" id="3671869">,</span>&nbsp;<span class="ident" id="3671871">ok</span>&nbsp;<span class="op" id="3671874">:=</span>&nbsp;<span class="ident" id="3671877">e</span><span class="op" id="3671878">.</span><span class="op" id="3671879">(</span><span class="builtintype" id="3671880">error</span><span class="op" id="3671885">)</span><span class="op" id="3671886">;</span>&nbsp;<span class="ident" id="3671888">ok</span>&nbsp;<span class="op" id="3671891">&amp;&amp;</span>&nbsp;<span class="ident" id="3671894">panicErr</span>&nbsp;<span class="op" id="3671903">==</span>&nbsp;<span class="ident" id="3671906">bytes</span><span class="op" id="3671911">.</span><span class="ident" id="3671912">ErrTooLarge</span>&nbsp;<span class="op" id="3671924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3671929">err</span>&nbsp;<span class="op" id="3671933">=</span>&nbsp;<span class="ident" id="3671935">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3671946">}</span>&nbsp;<span class="keyword" id="3671948">else</span>&nbsp;<span class="op" id="3671953">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3671958">panic</span><span class="op" id="3671963">(</span><span class="ident" id="3671964">e</span><span class="op" id="3671965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3671969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3671972">}</span><span class="op" id="3671973">(</span><span class="op" id="3671974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3671977">_</span><span class="op" id="3671978">,</span>&nbsp;<span class="ident" id="3671980">err</span>&nbsp;<span class="op" id="3671984">=</span>&nbsp;<span class="ident" id="3671986">buf</span><span class="op" id="3671989">.</span><span class="ident" id="3671990">ReadFrom</span><span class="op" id="3671998">(</span><span class="ident" id="3671999">r</span><span class="op" id="3672000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672003">return</span>&nbsp;<span class="ident" id="3672010">buf</span><span class="op" id="3672013">.</span><span class="ident" id="3672014">Bytes</span><span class="op" id="3672019">(</span><span class="op" id="3672020">)</span><span class="op" id="3672021">,</span>&nbsp;<span class="ident" id="3672023">err</span><br>
<span class="lineno">35</span><span class="op" id="3672027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3672030">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3672106">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3672182">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3672256">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3672287">func</span>&nbsp;<span class="ident" id="3672292">ReadAll</span><span class="op" id="3672299">(</span><span class="ident" id="3672300">r</span>&nbsp;<span class="ident" id="3672302">io</span><span class="op" id="3672304">.</span><span class="ident" id="3672305">Reader</span><span class="op" id="3672311">)</span>&nbsp;<span class="op" id="3672313">(</span><span class="op" id="3672314">[</span><span class="op" id="3672315">]</span><span class="builtintype" id="3672316">byte</span><span class="op" id="3672320">,</span>&nbsp;<span class="builtintype" id="3672322">error</span><span class="op" id="3672327">)</span>&nbsp;<span class="op" id="3672329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672332">return</span>&nbsp;<span class="ident" id="3672339">readAll</span><span class="op" id="3672346">(</span><span class="ident" id="3672347">r</span><span class="op" id="3672348">,</span>&nbsp;<span class="ident" id="3672350">bytes</span><span class="op" id="3672355">.</span><span class="ident" id="3672356">MinRead</span><span class="op" id="3672363">)</span><br>
<span class="lineno"></span><span class="op" id="3672365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3672368">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3672439">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3672513">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3672585">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3672604">func</span>&nbsp;<span class="ident" id="3672609">ReadFile</span><span class="op" id="3672617">(</span><span class="ident" id="3672618">filename</span>&nbsp;<span class="builtintype" id="3672627">string</span><span class="op" id="3672633">)</span>&nbsp;<span class="op" id="3672635">(</span><span class="op" id="3672636">[</span><span class="op" id="3672637">]</span><span class="builtintype" id="3672638">byte</span><span class="op" id="3672642">,</span>&nbsp;<span class="builtintype" id="3672644">error</span><span class="op" id="3672649">)</span>&nbsp;<span class="op" id="3672651">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3672654">f</span><span class="op" id="3672655">,</span>&nbsp;<span class="ident" id="3672657">err</span>&nbsp;<span class="op" id="3672661">:=</span>&nbsp;<span class="ident" id="3672664">os</span><span class="op" id="3672666">.</span><span class="ident" id="3672667">Open</span><span class="op" id="3672671">(</span><span class="ident" id="3672672">filename</span><span class="op" id="3672680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672683">if</span>&nbsp;<span class="ident" id="3672686">err</span>&nbsp;<span class="op" id="3672690">!=</span>&nbsp;<span class="builtintype" id="3672693">nil</span>&nbsp;<span class="op" id="3672697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672701">return</span>&nbsp;<span class="builtintype" id="3672708">nil</span><span class="op" id="3672711">,</span>&nbsp;<span class="ident" id="3672713">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3672718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672721">defer</span>&nbsp;<span class="ident" id="3672727">f</span><span class="op" id="3672728">.</span><span class="ident" id="3672729">Close</span><span class="op" id="3672734">(</span><span class="op" id="3672735">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3672738">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3672821">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672891">var</span>&nbsp;<span class="ident" id="3672895">n</span>&nbsp;<span class="ident" id="3672897">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672905">if</span>&nbsp;<span class="ident" id="3672908">fi</span><span class="op" id="3672910">,</span>&nbsp;<span class="ident" id="3672912">err</span>&nbsp;<span class="op" id="3672916">:=</span>&nbsp;<span class="ident" id="3672919">f</span><span class="op" id="3672920">.</span><span class="ident" id="3672921">Stat</span><span class="op" id="3672925">(</span><span class="op" id="3672926">)</span><span class="op" id="3672927">;</span>&nbsp;<span class="ident" id="3672929">err</span>&nbsp;<span class="op" id="3672933">==</span>&nbsp;<span class="builtintype" id="3672936">nil</span>&nbsp;<span class="op" id="3672940">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3672944">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3672996">if</span>&nbsp;<span class="ident" id="3672999">size</span>&nbsp;<span class="op" id="3673004">:=</span>&nbsp;<span class="ident" id="3673007">fi</span><span class="op" id="3673009">.</span><span class="ident" id="3673010">Size</span><span class="op" id="3673014">(</span><span class="op" id="3673015">)</span><span class="op" id="3673016">;</span>&nbsp;<span class="ident" id="3673018">size</span>&nbsp;<span class="op" id="3673023">&lt;</span>&nbsp;<span class="num" id="3673025">1e9</span>&nbsp;<span class="op" id="3673029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3673034">n</span>&nbsp;<span class="op" id="3673036">=</span>&nbsp;<span class="ident" id="3673038">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3673045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3673048">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3673051">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3673133">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3673216">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3673296">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3673378">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673441">return</span>&nbsp;<span class="ident" id="3673448">readAll</span><span class="op" id="3673455">(</span><span class="ident" id="3673456">f</span><span class="op" id="3673457">,</span>&nbsp;<span class="ident" id="3673459">n</span><span class="op" id="3673460">+</span><span class="ident" id="3673461">bytes</span><span class="op" id="3673466">.</span><span class="ident" id="3673467">MinRead</span><span class="op" id="3673474">)</span><br>
<span class="lineno"></span><span class="op" id="3673476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3673479">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3673533">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3673608">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3673660">func</span>&nbsp;<span class="ident" id="3673665">WriteFile</span><span class="op" id="3673674">(</span><span class="ident" id="3673675">filename</span>&nbsp;<span class="builtintype" id="3673684">string</span><span class="op" id="3673690">,</span>&nbsp;<span class="ident" id="3673692">data</span>&nbsp;<span class="op" id="3673697">[</span><span class="op" id="3673698">]</span><span class="builtintype" id="3673699">byte</span><span class="op" id="3673703">,</span>&nbsp;<span class="ident" id="3673705">perm</span>&nbsp;<span class="ident" id="3673710">os</span><span class="op" id="3673712">.</span><span class="ident" id="3673713">FileMode</span><span class="op" id="3673721">)</span>&nbsp;<span class="builtintype" id="3673723">error</span>&nbsp;<span class="op" id="3673729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3673732">f</span><span class="op" id="3673733">,</span>&nbsp;<span class="ident" id="3673735">err</span>&nbsp;<span class="op" id="3673739">:=</span>&nbsp;<span class="ident" id="3673742">os</span><span class="op" id="3673744">.</span><span class="ident" id="3673745">OpenFile</span><span class="op" id="3673753">(</span><span class="ident" id="3673754">filename</span><span class="op" id="3673762">,</span>&nbsp;<span class="ident" id="3673764">os</span><span class="op" id="3673766">.</span><span class="ident" id="3673767">O_WRONLY</span><span class="op" id="3673775">|</span><span class="ident" id="3673776">os</span><span class="op" id="3673778">.</span><span class="ident" id="3673779">O_CREATE</span><span class="op" id="3673787">|</span><span class="ident" id="3673788">os</span><span class="op" id="3673790">.</span><span class="ident" id="3673791">O_TRUNC</span><span class="op" id="3673798">,</span>&nbsp;<span class="ident" id="3673800">perm</span><span class="op" id="3673804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673807">if</span>&nbsp;<span class="ident" id="3673810">err</span>&nbsp;<span class="op" id="3673814">!=</span>&nbsp;<span class="builtintype" id="3673817">nil</span>&nbsp;<span class="op" id="3673821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673825">return</span>&nbsp;<span class="ident" id="3673832">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3673837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3673840">n</span><span class="op" id="3673841">,</span>&nbsp;<span class="ident" id="3673843">err</span>&nbsp;<span class="op" id="3673847">:=</span>&nbsp;<span class="ident" id="3673850">f</span><span class="op" id="3673851">.</span><span class="ident" id="3673852">Write</span><span class="op" id="3673857">(</span><span class="ident" id="3673858">data</span><span class="op" id="3673862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673865">if</span>&nbsp;<span class="ident" id="3673868">err</span>&nbsp;<span class="op" id="3673872">==</span>&nbsp;<span class="builtintype" id="3673875">nil</span>&nbsp;<span class="op" id="3673879">&amp;&amp;</span>&nbsp;<span class="ident" id="3673882">n</span>&nbsp;<span class="op" id="3673884">&lt;</span>&nbsp;<span class="builtinfunc" id="3673886">len</span><span class="op" id="3673889">(</span><span class="ident" id="3673890">data</span><span class="op" id="3673894">)</span>&nbsp;<span class="op" id="3673896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3673900">err</span>&nbsp;<span class="op" id="3673904">=</span>&nbsp;<span class="ident" id="3673906">io</span><span class="op" id="3673908">.</span><span class="ident" id="3673909">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3673924">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673927">if</span>&nbsp;<span class="ident" id="3673930">err1</span>&nbsp;<span class="op" id="3673935">:=</span>&nbsp;<span class="ident" id="3673938">f</span><span class="op" id="3673939">.</span><span class="ident" id="3673940">Close</span><span class="op" id="3673945">(</span><span class="op" id="3673946">)</span><span class="op" id="3673947">;</span>&nbsp;<span class="ident" id="3673949">err</span>&nbsp;<span class="op" id="3673953">==</span>&nbsp;<span class="builtintype" id="3673956">nil</span>&nbsp;<span class="op" id="3673960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3673964">err</span>&nbsp;<span class="op" id="3673968">=</span>&nbsp;<span class="ident" id="3673970">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3673976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3673979">return</span>&nbsp;<span class="ident" id="3673986">err</span><br>
<span class="lineno"></span><span class="op" id="3673990">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3673993">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3674030">type</span>&nbsp;<span class="ident" id="3674035">byName</span>&nbsp;<span class="op" id="3674042">[</span><span class="op" id="3674043">]</span><span class="ident" id="3674044">os</span><span class="op" id="3674046">.</span><span class="ident" id="3674047">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3674057">func</span>&nbsp;<span class="op" id="3674062">(</span><span class="ident" id="3674063">f</span>&nbsp;<span class="ident" id="3674065">byName</span><span class="op" id="3674071">)</span>&nbsp;<span class="ident" id="3674073">Len</span><span class="op" id="3674076">(</span><span class="op" id="3674077">)</span>&nbsp;<span class="builtintype" id="3674079">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3674093">{</span>&nbsp;<span class="keyword" id="3674095">return</span>&nbsp;<span class="builtinfunc" id="3674102">len</span><span class="op" id="3674105">(</span><span class="ident" id="3674106">f</span><span class="op" id="3674107">)</span>&nbsp;<span class="op" id="3674109">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3674111">func</span>&nbsp;<span class="op" id="3674116">(</span><span class="ident" id="3674117">f</span>&nbsp;<span class="ident" id="3674119">byName</span><span class="op" id="3674125">)</span>&nbsp;<span class="ident" id="3674127">Less</span><span class="op" id="3674131">(</span><span class="ident" id="3674132">i</span><span class="op" id="3674133">,</span>&nbsp;<span class="ident" id="3674135">j</span>&nbsp;<span class="builtintype" id="3674137">int</span><span class="op" id="3674140">)</span>&nbsp;<span class="builtintype" id="3674142">bool</span>&nbsp;<span class="op" id="3674147">{</span>&nbsp;<span class="keyword" id="3674149">return</span>&nbsp;<span class="ident" id="3674156">f</span><span class="op" id="3674157">[</span><span class="ident" id="3674158">i</span><span class="op" id="3674159">]</span><span class="op" id="3674160">.</span><span class="ident" id="3674161">Name</span><span class="op" id="3674165">(</span><span class="op" id="3674166">)</span>&nbsp;<span class="op" id="3674168">&lt;</span>&nbsp;<span class="ident" id="3674170">f</span><span class="op" id="3674171">[</span><span class="ident" id="3674172">j</span><span class="op" id="3674173">]</span><span class="op" id="3674174">.</span><span class="ident" id="3674175">Name</span><span class="op" id="3674179">(</span><span class="op" id="3674180">)</span>&nbsp;<span class="op" id="3674182">}</span><br>
<span class="lineno"></span><span class="keyword" id="3674184">func</span>&nbsp;<span class="op" id="3674189">(</span><span class="ident" id="3674190">f</span>&nbsp;<span class="ident" id="3674192">byName</span><span class="op" id="3674198">)</span>&nbsp;<span class="ident" id="3674200">Swap</span><span class="op" id="3674204">(</span><span class="ident" id="3674205">i</span><span class="op" id="3674206">,</span>&nbsp;<span class="ident" id="3674208">j</span>&nbsp;<span class="builtintype" id="3674210">int</span><span class="op" id="3674213">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3674220">{</span>&nbsp;<span class="ident" id="3674222">f</span><span class="op" id="3674223">[</span><span class="ident" id="3674224">i</span><span class="op" id="3674225">]</span><span class="op" id="3674226">,</span>&nbsp;<span class="ident" id="3674228">f</span><span class="op" id="3674229">[</span><span class="ident" id="3674230">j</span><span class="op" id="3674231">]</span>&nbsp;<span class="op" id="3674233">=</span>&nbsp;<span class="ident" id="3674235">f</span><span class="op" id="3674236">[</span><span class="ident" id="3674237">j</span><span class="op" id="3674238">]</span><span class="op" id="3674239">,</span>&nbsp;<span class="ident" id="3674241">f</span><span class="op" id="3674242">[</span><span class="ident" id="3674243">i</span><span class="op" id="3674244">]</span>&nbsp;<span class="op" id="3674246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3674249">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3674309">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3674348">func</span>&nbsp;<span class="ident" id="3674353">ReadDir</span><span class="op" id="3674360">(</span><span class="ident" id="3674361">dirname</span>&nbsp;<span class="builtintype" id="3674369">string</span><span class="op" id="3674375">)</span>&nbsp;<span class="op" id="3674377">(</span><span class="op" id="3674378">[</span><span class="op" id="3674379">]</span><span class="ident" id="3674380">os</span><span class="op" id="3674382">.</span><span class="ident" id="3674383">FileInfo</span><span class="op" id="3674391">,</span>&nbsp;<span class="builtintype" id="3674393">error</span><span class="op" id="3674398">)</span>&nbsp;<span class="op" id="3674400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3674403">f</span><span class="op" id="3674404">,</span>&nbsp;<span class="ident" id="3674406">err</span>&nbsp;<span class="op" id="3674410">:=</span>&nbsp;<span class="ident" id="3674413">os</span><span class="op" id="3674415">.</span><span class="ident" id="3674416">Open</span><span class="op" id="3674420">(</span><span class="ident" id="3674421">dirname</span><span class="op" id="3674428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674431">if</span>&nbsp;<span class="ident" id="3674434">err</span>&nbsp;<span class="op" id="3674438">!=</span>&nbsp;<span class="builtintype" id="3674441">nil</span>&nbsp;<span class="op" id="3674445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674449">return</span>&nbsp;<span class="builtintype" id="3674456">nil</span><span class="op" id="3674459">,</span>&nbsp;<span class="ident" id="3674461">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3674466">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3674469">list</span><span class="op" id="3674473">,</span>&nbsp;<span class="ident" id="3674475">err</span>&nbsp;<span class="op" id="3674479">:=</span>&nbsp;<span class="ident" id="3674482">f</span><span class="op" id="3674483">.</span><span class="ident" id="3674484">Readdir</span><span class="op" id="3674491">(</span><span class="op" id="3674492">-</span><span class="num" id="3674493">1</span><span class="op" id="3674494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3674497">f</span><span class="op" id="3674498">.</span><span class="ident" id="3674499">Close</span><span class="op" id="3674504">(</span><span class="op" id="3674505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674508">if</span>&nbsp;<span class="ident" id="3674511">err</span>&nbsp;<span class="op" id="3674515">!=</span>&nbsp;<span class="builtintype" id="3674518">nil</span>&nbsp;<span class="op" id="3674522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674526">return</span>&nbsp;<span class="builtintype" id="3674533">nil</span><span class="op" id="3674536">,</span>&nbsp;<span class="ident" id="3674538">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3674543">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3674546">sort</span><span class="op" id="3674550">.</span><span class="ident" id="3674551">Sort</span><span class="op" id="3674555">(</span><span class="ident" id="3674556">byName</span><span class="op" id="3674562">(</span><span class="ident" id="3674563">list</span><span class="op" id="3674567">)</span><span class="op" id="3674568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674571">return</span>&nbsp;<span class="ident" id="3674578">list</span><span class="op" id="3674582">,</span>&nbsp;<span class="builtintype" id="3674584">nil</span><br>
<span class="lineno"></span><span class="op" id="3674588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3674591">type</span>&nbsp;<span class="ident" id="3674596">nopCloser</span>&nbsp;<span class="keyword" id="3674606">struct</span>&nbsp;<span class="op" id="3674613">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3674616">io</span><span class="op" id="3674618">.</span><span class="ident" id="3674619">Reader</span><br>
<span class="lineno"></span><span class="op" id="3674626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3674629">func</span>&nbsp;<span class="op" id="3674634">(</span><span class="ident" id="3674635">nopCloser</span><span class="op" id="3674644">)</span>&nbsp;<span class="ident" id="3674646">Close</span><span class="op" id="3674651">(</span><span class="op" id="3674652">)</span>&nbsp;<span class="builtintype" id="3674654">error</span>&nbsp;<span class="op" id="3674660">{</span>&nbsp;<span class="keyword" id="3674662">return</span>&nbsp;<span class="builtintype" id="3674669">nil</span>&nbsp;<span class="op" id="3674673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3674676">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3674745">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3674771">func</span>&nbsp;<span class="ident" id="3674776">NopCloser</span><span class="op" id="3674785">(</span><span class="ident" id="3674786">r</span>&nbsp;<span class="ident" id="3674788">io</span><span class="op" id="3674790">.</span><span class="ident" id="3674791">Reader</span><span class="op" id="3674797">)</span>&nbsp;<span class="ident" id="3674799">io</span><span class="op" id="3674801">.</span><span class="ident" id="3674802">ReadCloser</span>&nbsp;<span class="op" id="3674813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3674816">return</span>&nbsp;<span class="ident" id="3674823">nopCloser</span><span class="op" id="3674832">{</span><span class="ident" id="3674833">r</span><span class="op" id="3674834">}</span><br>
<span class="lineno"></span><span class="op" id="3674836">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3674839">type</span>&nbsp;<span class="ident" id="3674844">devNull</span>&nbsp;<span class="builtintype" id="3674852">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3674857">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3674923">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3674975">var</span>&nbsp;<span class="ident" id="3674979">_</span>&nbsp;<span class="ident" id="3674981">io</span><span class="op" id="3674983">.</span><span class="ident" id="3674984">ReaderFrom</span>&nbsp;<span class="op" id="3674995">=</span>&nbsp;<span class="ident" id="3674997">devNull</span><span class="op" id="3675004">(</span><span class="num" id="3675005">0</span><span class="op" id="3675006">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3675009">func</span>&nbsp;<span class="op" id="3675014">(</span><span class="ident" id="3675015">devNull</span><span class="op" id="3675022">)</span>&nbsp;<span class="ident" id="3675024">Write</span><span class="op" id="3675029">(</span><span class="ident" id="3675030">p</span>&nbsp;<span class="op" id="3675032">[</span><span class="op" id="3675033">]</span><span class="builtintype" id="3675034">byte</span><span class="op" id="3675038">)</span>&nbsp;<span class="op" id="3675040">(</span><span class="builtintype" id="3675041">int</span><span class="op" id="3675044">,</span>&nbsp;<span class="builtintype" id="3675046">error</span><span class="op" id="3675051">)</span>&nbsp;<span class="op" id="3675053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675056">return</span>&nbsp;<span class="builtinfunc" id="3675063">len</span><span class="op" id="3675066">(</span><span class="ident" id="3675067">p</span><span class="op" id="3675068">)</span><span class="op" id="3675069">,</span>&nbsp;<span class="builtintype" id="3675071">nil</span><br>
<span class="lineno"></span><span class="op" id="3675075">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3675078">func</span>&nbsp;<span class="op" id="3675083">(</span><span class="ident" id="3675084">devNull</span><span class="op" id="3675091">)</span>&nbsp;<span class="ident" id="3675093">WriteString</span><span class="op" id="3675104">(</span><span class="ident" id="3675105">s</span>&nbsp;<span class="builtintype" id="3675107">string</span><span class="op" id="3675113">)</span>&nbsp;<span class="op" id="3675115">(</span><span class="builtintype" id="3675116">int</span><span class="op" id="3675119">,</span>&nbsp;<span class="builtintype" id="3675121">error</span><span class="op" id="3675126">)</span>&nbsp;<span class="op" id="3675128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675131">return</span>&nbsp;<span class="builtinfunc" id="3675138">len</span><span class="op" id="3675141">(</span><span class="ident" id="3675142">s</span><span class="op" id="3675143">)</span><span class="op" id="3675144">,</span>&nbsp;<span class="builtintype" id="3675146">nil</span><br>
<span class="lineno"></span><span class="op" id="3675150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3675153">var</span>&nbsp;<span class="ident" id="3675157">blackHolePool</span>&nbsp;<span class="op" id="3675171">=</span>&nbsp;<span class="ident" id="3675173">sync</span><span class="op" id="3675177">.</span><span class="ident" id="3675178">Pool</span><span class="op" id="3675182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675185">New</span><span class="op" id="3675188">:</span>&nbsp;<span class="keyword" id="3675190">func</span><span class="op" id="3675194">(</span><span class="op" id="3675195">)</span>&nbsp;<span class="keyword" id="3675197">interface</span><span class="op" id="3675206">{</span><span class="op" id="3675207">}</span>&nbsp;<span class="op" id="3675209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675213">b</span>&nbsp;<span class="op" id="3675215">:=</span>&nbsp;<span class="builtinfunc" id="3675218">make</span><span class="op" id="3675222">(</span><span class="op" id="3675223">[</span><span class="op" id="3675224">]</span><span class="builtintype" id="3675225">byte</span><span class="op" id="3675229">,</span>&nbsp;<span class="num" id="3675231">8192</span><span class="op" id="3675235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675239">return</span>&nbsp;<span class="op" id="3675246">&amp;</span><span class="ident" id="3675247">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3675250">}</span><span class="op" id="3675251">,</span><br>
<span class="lineno">145</span><span class="op" id="3675253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3675256">func</span>&nbsp;<span class="op" id="3675261">(</span><span class="ident" id="3675262">devNull</span><span class="op" id="3675269">)</span>&nbsp;<span class="ident" id="3675271">ReadFrom</span><span class="op" id="3675279">(</span><span class="ident" id="3675280">r</span>&nbsp;<span class="ident" id="3675282">io</span><span class="op" id="3675284">.</span><span class="ident" id="3675285">Reader</span><span class="op" id="3675291">)</span>&nbsp;<span class="op" id="3675293">(</span><span class="ident" id="3675294">n</span>&nbsp;<span class="ident" id="3675296">int64</span><span class="op" id="3675301">,</span>&nbsp;<span class="ident" id="3675303">err</span>&nbsp;<span class="builtintype" id="3675307">error</span><span class="op" id="3675312">)</span>&nbsp;<span class="op" id="3675314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675317">bufp</span>&nbsp;<span class="op" id="3675322">:=</span>&nbsp;<span class="ident" id="3675325">blackHolePool</span><span class="op" id="3675338">.</span><span class="ident" id="3675339">Get</span><span class="op" id="3675342">(</span><span class="op" id="3675343">)</span><span class="op" id="3675344">.</span><span class="op" id="3675345">(</span><span class="op" id="3675346">*</span><span class="op" id="3675347">[</span><span class="op" id="3675348">]</span><span class="builtintype" id="3675349">byte</span><span class="op" id="3675353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675356">readSize</span>&nbsp;<span class="op" id="3675365">:=</span>&nbsp;<span class="num" id="3675368">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675371">for</span>&nbsp;<span class="op" id="3675375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675379">readSize</span><span class="op" id="3675387">,</span>&nbsp;<span class="ident" id="3675389">err</span>&nbsp;<span class="op" id="3675393">=</span>&nbsp;<span class="ident" id="3675395">r</span><span class="op" id="3675396">.</span><span class="ident" id="3675397">Read</span><span class="op" id="3675401">(</span><span class="op" id="3675402">*</span><span class="ident" id="3675403">bufp</span><span class="op" id="3675407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675411">n</span>&nbsp;<span class="op" id="3675413">+=</span>&nbsp;<span class="ident" id="3675416">int64</span><span class="op" id="3675421">(</span><span class="ident" id="3675422">readSize</span><span class="op" id="3675430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675434">if</span>&nbsp;<span class="ident" id="3675437">err</span>&nbsp;<span class="op" id="3675441">!=</span>&nbsp;<span class="builtintype" id="3675444">nil</span>&nbsp;<span class="op" id="3675448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3675453">blackHolePool</span><span class="op" id="3675466">.</span><span class="ident" id="3675467">Put</span><span class="op" id="3675470">(</span><span class="ident" id="3675471">bufp</span><span class="op" id="3675475">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675480">if</span>&nbsp;<span class="ident" id="3675483">err</span>&nbsp;<span class="op" id="3675487">==</span>&nbsp;<span class="ident" id="3675490">io</span><span class="op" id="3675492">.</span><span class="ident" id="3675493">EOF</span>&nbsp;<span class="op" id="3675497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675503">return</span>&nbsp;<span class="ident" id="3675510">n</span><span class="op" id="3675511">,</span>&nbsp;<span class="builtintype" id="3675513">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3675520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3675525">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3675534">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3675537">}</span><br>
<span class="lineno"></span><span class="op" id="3675539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3675542">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3675602">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3675629">var</span>&nbsp;<span class="ident" id="3675633">Discard</span>&nbsp;<span class="ident" id="3675641">io</span><span class="op" id="3675643">.</span><span class="ident" id="3675644">Writer</span>&nbsp;<span class="op" id="3675651">=</span>&nbsp;<span class="ident" id="3675653">devNull</span><span class="op" id="3675660">(</span><span class="num" id="3675661">0</span><span class="op" id="3675662">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
