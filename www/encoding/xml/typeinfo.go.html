<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5669493">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5669549">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5669603">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5669654">package</span>&nbsp;<span class="ident" id="5669662">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5669667">import</span>&nbsp;<span class="op" id="5669674">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5669677">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5669684">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5669695">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5669706">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="5669713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5669716">//&nbsp;typeInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;type.</span><br>
<span class="lineno">15</span><span class="keyword" id="5669780">type</span>&nbsp;<span class="ident" id="5669785">typeInfo</span>&nbsp;<span class="keyword" id="5669794">struct</span>&nbsp;<span class="op" id="5669801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669804">xmlname</span>&nbsp;<span class="op" id="5669812">*</span><span class="ident" id="5669813"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669824">fields</span>&nbsp;&nbsp;<span class="op" id="5669832">[</span><span class="op" id="5669833">]</span><span class="ident" id="5669834"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><br>
<span class="lineno"></span><span class="op" id="5669844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5669847">//&nbsp;fieldInfo&nbsp;holds&nbsp;details&nbsp;for&nbsp;the&nbsp;xml&nbsp;representation&nbsp;of&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="5669920">type</span>&nbsp;<span class="ident" id="5669925">fieldInfo</span>&nbsp;<span class="keyword" id="5669935">struct</span>&nbsp;<span class="op" id="5669942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669945">idx</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5669953">[</span><span class="op" id="5669954">]</span><span class="builtintype" id="5669955">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669960">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5669968">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669976">xmlns</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5669984">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5669992">flags</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5670000"><a href="/encoding/xml/typeinfo.go.html#5670037">fieldFlags</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670012">parents</span>&nbsp;<span class="op" id="5670020">[</span><span class="op" id="5670021">]</span><span class="builtintype" id="5670022">string</span><br>
<span class="lineno"></span><span class="op" id="5670029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5670032">type</span>&nbsp;<span class="ident" id="5670037">fieldFlags</span>&nbsp;<span class="builtintype" id="5670048">int</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="5670053">const</span>&nbsp;<span class="op" id="5670059">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670062">fElement</span>&nbsp;<span class="ident" id="5670071"><a href="/encoding/xml/typeinfo.go.html#5670037">fieldFlags</a></span>&nbsp;<span class="op" id="5670082">=</span>&nbsp;<span class="num" id="5670084">1</span>&nbsp;<span class="op" id="5670086">&lt;&lt;</span>&nbsp;<span class="ident" id="5670089">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670095">fAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670102">fCharData</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670113">fInnerXml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670124">fComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670134">fAny</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670141">fOmitEmpty</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670154">fMode</span>&nbsp;<span class="op" id="5670160">=</span>&nbsp;<span class="ident" id="5670162"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span>&nbsp;<span class="op" id="5670171">|</span>&nbsp;<span class="ident" id="5670173"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span>&nbsp;<span class="op" id="5670179">|</span>&nbsp;<span class="ident" id="5670181"><a href="/encoding/xml/typeinfo.go.html#5670102">fCharData</a></span>&nbsp;<span class="op" id="5670191">|</span>&nbsp;<span class="ident" id="5670193"><a href="/encoding/xml/typeinfo.go.html#5670113">fInnerXml</a></span>&nbsp;<span class="op" id="5670203">|</span>&nbsp;<span class="ident" id="5670205"><a href="/encoding/xml/typeinfo.go.html#5670124">fComment</a></span>&nbsp;<span class="op" id="5670214">|</span>&nbsp;<span class="ident" id="5670216"><a href="/encoding/xml/typeinfo.go.html#5670134">fAny</a></span><br>
<span class="lineno"></span><span class="op" id="5670221">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5670224">var</span>&nbsp;<span class="ident" id="5670228">tinfoMap</span>&nbsp;<span class="op" id="5670237">=</span>&nbsp;<span class="builtinfunc" id="5670239">make</span><span class="op" id="5670243">(</span><span class="keyword" id="5670244">map</span><span class="op" id="5670247">[</span><span class="ident" id="5670248"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5670255">.</span><span class="ident" id="5670256">Type</span><span class="op" id="5670260">]</span><span class="op" id="5670261">*</span><span class="ident" id="5670262"><a href="/encoding/xml/typeinfo.go.html#5669785">typeInfo</a></span><span class="op" id="5670270">)</span><br>
<span class="lineno">45</span><span class="keyword" id="5670272">var</span>&nbsp;<span class="ident" id="5670276">tinfoLock</span>&nbsp;<span class="ident" id="5670286"><a href="/encoding/xml/typeinfo.go.html#5669706">sync</a></span><span class="op" id="5670290">.</span><span class="ident" id="5670291">RWMutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5670300">var</span>&nbsp;<span class="ident" id="5670304">nameType</span>&nbsp;<span class="op" id="5670313">=</span>&nbsp;<span class="ident" id="5670315"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5670322">.</span><span class="ident" id="5670323">TypeOf</span><span class="op" id="5670329">(</span><span class="ident" id="5670330"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5670334">{</span><span class="op" id="5670335">}</span><span class="op" id="5670336">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5670339">//&nbsp;getTypeInfo&nbsp;returns&nbsp;the&nbsp;typeInfo&nbsp;structure&nbsp;with&nbsp;details&nbsp;necessary</span><br>
<span class="lineno">50</span><span class="comment" id="5670408">//&nbsp;for&nbsp;marshalling&nbsp;and&nbsp;unmarshalling&nbsp;typ.</span><br>
<span class="lineno"></span><span class="keyword" id="5670450">func</span>&nbsp;<span class="ident" id="5670455">getTypeInfo</span><span class="op" id="5670466">(</span><span class="ident" id="5670467">typ</span>&nbsp;<span class="ident" id="5670471"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5670478">.</span><span class="ident" id="5670479">Type</span><span class="op" id="5670483">)</span>&nbsp;<span class="op" id="5670485">(</span><span class="op" id="5670486">*</span><span class="ident" id="5670487"><a href="/encoding/xml/typeinfo.go.html#5669785">typeInfo</a></span><span class="op" id="5670495">,</span>&nbsp;<span class="builtintype" id="5670497">error</span><span class="op" id="5670502">)</span>&nbsp;<span class="op" id="5670504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670507"><a href="/encoding/xml/typeinfo.go.html#5670276">tinfoLock</a></span><span class="op" id="5670516">.</span><span class="ident" id="5670517">RLock</span><span class="op" id="5670522">(</span><span class="op" id="5670523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670526">tinfo</span><span class="op" id="5670531">,</span>&nbsp;<span class="ident" id="5670533">ok</span>&nbsp;<span class="op" id="5670536">:=</span>&nbsp;<span class="ident" id="5670539"><a href="/encoding/xml/typeinfo.go.html#5670228">tinfoMap</a></span><span class="op" id="5670547">[</span><span class="ident" id="5670548"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5670551">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670554"><a href="/encoding/xml/typeinfo.go.html#5670276">tinfoLock</a></span><span class="op" id="5670563">.</span><span class="ident" id="5670564">RUnlock</span><span class="op" id="5670571">(</span><span class="op" id="5670572">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670575">if</span>&nbsp;<span class="ident" id="5670578"><a href="/encoding/xml/typeinfo.go.html#5670533">ok</a></span>&nbsp;<span class="op" id="5670581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670585">return</span>&nbsp;<span class="ident" id="5670592"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5670597">,</span>&nbsp;<span class="ident" id="5670599">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5670604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670607"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span>&nbsp;<span class="op" id="5670613">=</span>&nbsp;<span class="op" id="5670615">&amp;</span><span class="ident" id="5670616"><a href="/encoding/xml/typeinfo.go.html#5669785">typeInfo</a></span><span class="op" id="5670624">{</span><span class="op" id="5670625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670628">if</span>&nbsp;<span class="ident" id="5670631"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5670634">.</span><span class="ident" id="5670635">Kind</span><span class="op" id="5670639">(</span><span class="op" id="5670640">)</span>&nbsp;<span class="op" id="5670642">==</span>&nbsp;<span class="ident" id="5670645"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5670652">.</span><span class="ident" id="5670653">Struct</span>&nbsp;<span class="op" id="5670660">&amp;&amp;</span>&nbsp;<span class="ident" id="5670663"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span>&nbsp;<span class="op" id="5670667">!=</span>&nbsp;<span class="ident" id="5670670"><a href="/encoding/xml/typeinfo.go.html#5670304">nameType</a></span>&nbsp;<span class="op" id="5670679">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670683">n</span>&nbsp;<span class="op" id="5670685">:=</span>&nbsp;<span class="ident" id="5670688"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5670691">.</span><span class="ident" id="5670692">NumField</span><span class="op" id="5670700">(</span><span class="op" id="5670701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670705">for</span>&nbsp;<span class="ident" id="5670709">i</span>&nbsp;<span class="op" id="5670711">:=</span>&nbsp;<span class="num" id="5670714">0</span><span class="op" id="5670715">;</span>&nbsp;<span class="ident" id="5670717"><a href="/encoding/xml/typeinfo.go.html#5670709">i</a></span>&nbsp;<span class="op" id="5670719">&lt;</span>&nbsp;<span class="ident" id="5670721"><a href="/encoding/xml/typeinfo.go.html#5670683">n</a></span><span class="op" id="5670722">;</span>&nbsp;<span class="ident" id="5670724"><a href="/encoding/xml/typeinfo.go.html#5670709">i</a></span><span class="op" id="5670725">++</span>&nbsp;<span class="op" id="5670728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670733">f</span>&nbsp;<span class="op" id="5670735">:=</span>&nbsp;<span class="ident" id="5670738"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5670741">.</span><span class="ident" id="5670742">Field</span><span class="op" id="5670747">(</span><span class="ident" id="5670748"><a href="/encoding/xml/typeinfo.go.html#5670709">i</a></span><span class="op" id="5670749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670754">if</span>&nbsp;<span class="ident" id="5670757"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5670758">.</span><span class="ident" id="5670759">PkgPath</span>&nbsp;<span class="op" id="5670767">!=</span>&nbsp;<span class="string" id="5670770">&#34;&#34;</span>&nbsp;<span class="op" id="5670773">||</span>&nbsp;<span class="ident" id="5670776"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5670777">.</span><span class="ident" id="5670778">Tag</span><span class="op" id="5670781">.</span><span class="ident" id="5670782">Get</span><span class="op" id="5670785">(</span><span class="string" id="5670786">&#34;xml&#34;</span><span class="op" id="5670791">)</span>&nbsp;<span class="op" id="5670793">==</span>&nbsp;<span class="string" id="5670796">&#34;-&#34;</span>&nbsp;<span class="op" id="5670800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670806">continue</span>&nbsp;<span class="comment" id="5670815">//&nbsp;Private&nbsp;field</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5670835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5670841">//&nbsp;For&nbsp;embedded&nbsp;structs,&nbsp;embed&nbsp;its&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670887">if</span>&nbsp;<span class="ident" id="5670890"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5670891">.</span><span class="ident" id="5670892">Anonymous</span>&nbsp;<span class="op" id="5670902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670908">t</span>&nbsp;<span class="op" id="5670910">:=</span>&nbsp;<span class="ident" id="5670913"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5670914">.</span><span class="ident" id="5670915">Type</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670924">if</span>&nbsp;<span class="ident" id="5670927"><a href="/encoding/xml/typeinfo.go.html#5670908">t</a></span><span class="op" id="5670928">.</span><span class="ident" id="5670929">Kind</span><span class="op" id="5670933">(</span><span class="op" id="5670934">)</span>&nbsp;<span class="op" id="5670936">==</span>&nbsp;<span class="ident" id="5670939"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5670946">.</span><span class="ident" id="5670947">Ptr</span>&nbsp;<span class="op" id="5670951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5670958"><a href="/encoding/xml/typeinfo.go.html#5670908">t</a></span>&nbsp;<span class="op" id="5670960">=</span>&nbsp;<span class="ident" id="5670962"><a href="/encoding/xml/typeinfo.go.html#5670908">t</a></span><span class="op" id="5670963">.</span><span class="ident" id="5670964">Elem</span><span class="op" id="5670968">(</span><span class="op" id="5670969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5670975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5670981">if</span>&nbsp;<span class="ident" id="5670984"><a href="/encoding/xml/typeinfo.go.html#5670908">t</a></span><span class="op" id="5670985">.</span><span class="ident" id="5670986">Kind</span><span class="op" id="5670990">(</span><span class="op" id="5670991">)</span>&nbsp;<span class="op" id="5670993">==</span>&nbsp;<span class="ident" id="5670996"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5671003">.</span><span class="ident" id="5671004">Struct</span>&nbsp;<span class="op" id="5671011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671018">inner</span><span class="op" id="5671023">,</span>&nbsp;<span class="ident" id="5671025">err</span>&nbsp;<span class="op" id="5671029">:=</span>&nbsp;<span class="ident" id="5671032"><a href="/encoding/xml/typeinfo.go.html#5670455">getTypeInfo</a></span><span class="op" id="5671043">(</span><span class="ident" id="5671044"><a href="/encoding/xml/typeinfo.go.html#5670908">t</a></span><span class="op" id="5671045">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671052">if</span>&nbsp;<span class="ident" id="5671055"><a href="/encoding/xml/typeinfo.go.html#5671025">err</a></span>&nbsp;<span class="op" id="5671059">!=</span>&nbsp;<span class="ident" id="5671062">nil</span>&nbsp;<span class="op" id="5671066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671074">return</span>&nbsp;<span class="ident" id="5671081">nil</span><span class="op" id="5671084">,</span>&nbsp;<span class="ident" id="5671086"><a href="/encoding/xml/typeinfo.go.html#5671025">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671102">if</span>&nbsp;<span class="ident" id="5671105"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671110">.</span><span class="ident" id="5671111">xmlname</span>&nbsp;<span class="op" id="5671119">==</span>&nbsp;<span class="ident" id="5671122">nil</span>&nbsp;<span class="op" id="5671126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671134"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671139">.</span><span class="ident" id="5671140">xmlname</span>&nbsp;<span class="op" id="5671148">=</span>&nbsp;<span class="ident" id="5671150"><a href="/encoding/xml/typeinfo.go.html#5671018">inner</a></span><span class="op" id="5671155">.</span><span class="ident" id="5671156">xmlname</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671176">for</span>&nbsp;<span class="ident" id="5671180">_</span><span class="op" id="5671181">,</span>&nbsp;<span class="ident" id="5671183">finfo</span>&nbsp;<span class="op" id="5671189">:=</span>&nbsp;<span class="keyword" id="5671192">range</span>&nbsp;<span class="ident" id="5671198"><a href="/encoding/xml/typeinfo.go.html#5671018">inner</a></span><span class="op" id="5671203">.</span><span class="ident" id="5671204">fields</span>&nbsp;<span class="op" id="5671211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671219"><a href="/encoding/xml/typeinfo.go.html#5671183">finfo</a></span><span class="op" id="5671224">.</span><span class="ident" id="5671225">idx</span>&nbsp;<span class="op" id="5671229">=</span>&nbsp;<span class="builtinfunc" id="5671231">append</span><span class="op" id="5671237">(</span><span class="op" id="5671238">[</span><span class="op" id="5671239">]</span><span class="builtintype" id="5671240">int</span><span class="op" id="5671243">{</span><span class="ident" id="5671244"><a href="/encoding/xml/typeinfo.go.html#5670709">i</a></span><span class="op" id="5671245">}</span><span class="op" id="5671246">,</span>&nbsp;<span class="ident" id="5671248"><a href="/encoding/xml/typeinfo.go.html#5671183">finfo</a></span><span class="op" id="5671253">.</span><span class="ident" id="5671254">idx</span><span class="op" id="5671257">...</span><span class="op" id="5671260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671268">if</span>&nbsp;<span class="ident" id="5671271">err</span>&nbsp;<span class="op" id="5671275">:=</span>&nbsp;<span class="ident" id="5671278"><a href="/encoding/xml/typeinfo.go.html#5676138">addFieldInfo</a></span><span class="op" id="5671290">(</span><span class="ident" id="5671291"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5671294">,</span>&nbsp;<span class="ident" id="5671296"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671301">,</span>&nbsp;<span class="op" id="5671303">&amp;</span><span class="ident" id="5671304"><a href="/encoding/xml/typeinfo.go.html#5671183">finfo</a></span><span class="op" id="5671309">)</span><span class="op" id="5671310">;</span>&nbsp;<span class="ident" id="5671312"><a href="/encoding/xml/typeinfo.go.html#5671271">err</a></span>&nbsp;<span class="op" id="5671316">!=</span>&nbsp;<span class="ident" id="5671319">nil</span>&nbsp;<span class="op" id="5671323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671332">return</span>&nbsp;<span class="ident" id="5671339">nil</span><span class="op" id="5671342">,</span>&nbsp;<span class="ident" id="5671344"><a href="/encoding/xml/typeinfo.go.html#5671271">err</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671368">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671386">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671392">finfo</span><span class="op" id="5671397">,</span>&nbsp;<span class="ident" id="5671399">err</span>&nbsp;<span class="op" id="5671403">:=</span>&nbsp;<span class="ident" id="5671406"><a href="/encoding/xml/typeinfo.go.html#5671847">structFieldInfo</a></span><span class="op" id="5671421">(</span><span class="ident" id="5671422"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5671425">,</span>&nbsp;<span class="op" id="5671427">&amp;</span><span class="ident" id="5671428"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5671429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671434">if</span>&nbsp;<span class="ident" id="5671437"><a href="/encoding/xml/typeinfo.go.html#5671399">err</a></span>&nbsp;<span class="op" id="5671441">!=</span>&nbsp;<span class="ident" id="5671444">nil</span>&nbsp;<span class="op" id="5671448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671454">return</span>&nbsp;<span class="ident" id="5671461">nil</span><span class="op" id="5671464">,</span>&nbsp;<span class="ident" id="5671466"><a href="/encoding/xml/typeinfo.go.html#5671399">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671473">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671479">if</span>&nbsp;<span class="ident" id="5671482"><a href="/encoding/xml/typeinfo.go.html#5670733">f</a></span><span class="op" id="5671483">.</span><span class="ident" id="5671484">Name</span>&nbsp;<span class="op" id="5671489">==</span>&nbsp;<span class="string" id="5671492">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="5671502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671508"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671513">.</span><span class="ident" id="5671514">xmlname</span>&nbsp;<span class="op" id="5671522">=</span>&nbsp;<span class="ident" id="5671524"><a href="/encoding/xml/typeinfo.go.html#5671392">finfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671534">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671546">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5671552">//&nbsp;Add&nbsp;the&nbsp;field&nbsp;if&nbsp;it&nbsp;doesn&#39;t&nbsp;conflict&nbsp;with&nbsp;other&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671614">if</span>&nbsp;<span class="ident" id="5671617">err</span>&nbsp;<span class="op" id="5671621">:=</span>&nbsp;<span class="ident" id="5671624"><a href="/encoding/xml/typeinfo.go.html#5676138">addFieldInfo</a></span><span class="op" id="5671636">(</span><span class="ident" id="5671637"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5671640">,</span>&nbsp;<span class="ident" id="5671642"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671647">,</span>&nbsp;<span class="ident" id="5671649"><a href="/encoding/xml/typeinfo.go.html#5671392">finfo</a></span><span class="op" id="5671654">)</span><span class="op" id="5671655">;</span>&nbsp;<span class="ident" id="5671657"><a href="/encoding/xml/typeinfo.go.html#5671617">err</a></span>&nbsp;<span class="op" id="5671661">!=</span>&nbsp;<span class="ident" id="5671664">nil</span>&nbsp;<span class="op" id="5671668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671674">return</span>&nbsp;<span class="ident" id="5671681">nil</span><span class="op" id="5671684">,</span>&nbsp;<span class="ident" id="5671686"><a href="/encoding/xml/typeinfo.go.html#5671617">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671693">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5671700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671703"><a href="/encoding/xml/typeinfo.go.html#5670276">tinfoLock</a></span><span class="op" id="5671712">.</span><span class="ident" id="5671713">Lock</span><span class="op" id="5671717">(</span><span class="op" id="5671718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671721"><a href="/encoding/xml/typeinfo.go.html#5670228">tinfoMap</a></span><span class="op" id="5671729">[</span><span class="ident" id="5671730"><a href="/encoding/xml/typeinfo.go.html#5670467">typ</a></span><span class="op" id="5671733">]</span>&nbsp;<span class="op" id="5671735">=</span>&nbsp;<span class="ident" id="5671737"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671744"><a href="/encoding/xml/typeinfo.go.html#5670276">tinfoLock</a></span><span class="op" id="5671753">.</span><span class="ident" id="5671754">Unlock</span><span class="op" id="5671760">(</span><span class="op" id="5671761">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5671764">return</span>&nbsp;<span class="ident" id="5671771"><a href="/encoding/xml/typeinfo.go.html#5670526">tinfo</a></span><span class="op" id="5671776">,</span>&nbsp;<span class="ident" id="5671778">nil</span><br>
<span class="lineno"></span><span class="op" id="5671782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5671785">//&nbsp;structFieldInfo&nbsp;builds&nbsp;and&nbsp;returns&nbsp;a&nbsp;fieldInfo&nbsp;for&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="5671842">func</span>&nbsp;<span class="ident" id="5671847">structFieldInfo</span><span class="op" id="5671862">(</span><span class="ident" id="5671863">typ</span>&nbsp;<span class="ident" id="5671867"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5671874">.</span><span class="ident" id="5671875">Type</span><span class="op" id="5671879">,</span>&nbsp;<span class="ident" id="5671881">f</span>&nbsp;<span class="op" id="5671883">*</span><span class="ident" id="5671884"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5671891">.</span><span class="ident" id="5671892">StructField</span><span class="op" id="5671903">)</span>&nbsp;<span class="op" id="5671905">(</span><span class="op" id="5671906">*</span><span class="ident" id="5671907"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5671916">,</span>&nbsp;<span class="builtintype" id="5671918">error</span><span class="op" id="5671923">)</span>&nbsp;<span class="op" id="5671925">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5671928">finfo</span>&nbsp;<span class="op" id="5671934">:=</span>&nbsp;<span class="op" id="5671937">&amp;</span><span class="ident" id="5671938"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5671947">{</span><span class="ident" id="5671948">idx</span><span class="op" id="5671951">:</span>&nbsp;<span class="ident" id="5671953"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5671954">.</span><span class="ident" id="5671955">Index</span><span class="op" id="5671960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5671964">//&nbsp;Split&nbsp;the&nbsp;tag&nbsp;from&nbsp;the&nbsp;xml&nbsp;namespace&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672019">tag</span>&nbsp;<span class="op" id="5672023">:=</span>&nbsp;<span class="ident" id="5672026"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5672027">.</span><span class="ident" id="5672028">Tag</span><span class="op" id="5672031">.</span><span class="ident" id="5672032">Get</span><span class="op" id="5672035">(</span><span class="string" id="5672036">&#34;xml&#34;</span><span class="op" id="5672041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672044">if</span>&nbsp;<span class="ident" id="5672047">i</span>&nbsp;<span class="op" id="5672049">:=</span>&nbsp;<span class="ident" id="5672052"><a href="/encoding/xml/typeinfo.go.html#5669695">strings</a></span><span class="op" id="5672059">.</span><span class="ident" id="5672060">Index</span><span class="op" id="5672065">(</span><span class="ident" id="5672066"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5672069">,</span>&nbsp;<span class="string" id="5672071">&#34;&nbsp;&#34;</span><span class="op" id="5672074">)</span><span class="op" id="5672075">;</span>&nbsp;<span class="ident" id="5672077"><a href="/encoding/xml/typeinfo.go.html#5672047">i</a></span>&nbsp;<span class="op" id="5672079">&gt;=</span>&nbsp;<span class="num" id="5672082">0</span>&nbsp;<span class="op" id="5672084">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672088"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672093">.</span><span class="ident" id="5672094">xmlns</span><span class="op" id="5672099">,</span>&nbsp;<span class="ident" id="5672101"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span>&nbsp;<span class="op" id="5672105">=</span>&nbsp;<span class="ident" id="5672107"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5672110">[</span><span class="op" id="5672111">:</span><span class="ident" id="5672112"><a href="/encoding/xml/typeinfo.go.html#5672047">i</a></span><span class="op" id="5672113">]</span><span class="op" id="5672114">,</span>&nbsp;<span class="ident" id="5672116"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5672119">[</span><span class="ident" id="5672120"><a href="/encoding/xml/typeinfo.go.html#5672047">i</a></span><span class="op" id="5672121">+</span><span class="num" id="5672122">1</span><span class="op" id="5672123">:</span><span class="op" id="5672124">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5672131">//&nbsp;Parse&nbsp;flags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672148">tokens</span>&nbsp;<span class="op" id="5672155">:=</span>&nbsp;<span class="ident" id="5672158"><a href="/encoding/xml/typeinfo.go.html#5669695">strings</a></span><span class="op" id="5672165">.</span><span class="ident" id="5672166">Split</span><span class="op" id="5672171">(</span><span class="ident" id="5672172"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5672175">,</span>&nbsp;<span class="string" id="5672177">&#34;,&#34;</span><span class="op" id="5672180">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672183">if</span>&nbsp;<span class="builtinfunc" id="5672186">len</span><span class="op" id="5672189">(</span><span class="ident" id="5672190"><a href="/encoding/xml/typeinfo.go.html#5672148">tokens</a></span><span class="op" id="5672196">)</span>&nbsp;<span class="op" id="5672198">==</span>&nbsp;<span class="num" id="5672201">1</span>&nbsp;<span class="op" id="5672203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672207"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672212">.</span><span class="ident" id="5672213">flags</span>&nbsp;<span class="op" id="5672219">=</span>&nbsp;<span class="ident" id="5672221"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672231">}</span>&nbsp;<span class="keyword" id="5672233">else</span>&nbsp;<span class="op" id="5672238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672242"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span>&nbsp;<span class="op" id="5672246">=</span>&nbsp;<span class="ident" id="5672248"><a href="/encoding/xml/typeinfo.go.html#5672148">tokens</a></span><span class="op" id="5672254">[</span><span class="num" id="5672255">0</span><span class="op" id="5672256">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672260">for</span>&nbsp;<span class="ident" id="5672264">_</span><span class="op" id="5672265">,</span>&nbsp;<span class="ident" id="5672267">flag</span>&nbsp;<span class="op" id="5672272">:=</span>&nbsp;<span class="keyword" id="5672275">range</span>&nbsp;<span class="ident" id="5672281"><a href="/encoding/xml/typeinfo.go.html#5672148">tokens</a></span><span class="op" id="5672287">[</span><span class="num" id="5672288">1</span><span class="op" id="5672289">:</span><span class="op" id="5672290">]</span>&nbsp;<span class="op" id="5672292">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672297">switch</span>&nbsp;<span class="ident" id="5672304"><a href="/encoding/xml/typeinfo.go.html#5672267">flag</a></span>&nbsp;<span class="op" id="5672309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672314">case</span>&nbsp;<span class="string" id="5672319">&#34;attr&#34;</span><span class="op" id="5672325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672331"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672336">.</span><span class="ident" id="5672337">flags</span>&nbsp;<span class="op" id="5672343">|=</span>&nbsp;<span class="ident" id="5672346"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672355">case</span>&nbsp;<span class="string" id="5672360">&#34;chardata&#34;</span><span class="op" id="5672370">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672376"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672381">.</span><span class="ident" id="5672382">flags</span>&nbsp;<span class="op" id="5672388">|=</span>&nbsp;<span class="ident" id="5672391"><a href="/encoding/xml/typeinfo.go.html#5670102">fCharData</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672404">case</span>&nbsp;<span class="string" id="5672409">&#34;innerxml&#34;</span><span class="op" id="5672419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672425"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672430">.</span><span class="ident" id="5672431">flags</span>&nbsp;<span class="op" id="5672437">|=</span>&nbsp;<span class="ident" id="5672440"><a href="/encoding/xml/typeinfo.go.html#5670113">fInnerXml</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672453">case</span>&nbsp;<span class="string" id="5672458">&#34;comment&#34;</span><span class="op" id="5672467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672473"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672478">.</span><span class="ident" id="5672479">flags</span>&nbsp;<span class="op" id="5672485">|=</span>&nbsp;<span class="ident" id="5672488"><a href="/encoding/xml/typeinfo.go.html#5670124">fComment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672500">case</span>&nbsp;<span class="string" id="5672505">&#34;any&#34;</span><span class="op" id="5672510">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672516"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672521">.</span><span class="ident" id="5672522">flags</span>&nbsp;<span class="op" id="5672528">|=</span>&nbsp;<span class="ident" id="5672531"><a href="/encoding/xml/typeinfo.go.html#5670134">fAny</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672539">case</span>&nbsp;<span class="string" id="5672544">&#34;omitempty&#34;</span><span class="op" id="5672555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672561"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672566">.</span><span class="ident" id="5672567">flags</span>&nbsp;<span class="op" id="5672573">|=</span>&nbsp;<span class="ident" id="5672576"><a href="/encoding/xml/typeinfo.go.html#5670141">fOmitEmpty</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672594">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5672599">//&nbsp;Validate&nbsp;the&nbsp;flags&nbsp;used.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672629">valid</span>&nbsp;<span class="op" id="5672635">:=</span>&nbsp;<span class="ident" id="5672638">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672645">switch</span>&nbsp;<span class="ident" id="5672652">mode</span>&nbsp;<span class="op" id="5672657">:=</span>&nbsp;<span class="ident" id="5672660"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672665">.</span><span class="ident" id="5672666">flags</span>&nbsp;<span class="op" id="5672672">&amp;</span>&nbsp;<span class="ident" id="5672674"><a href="/encoding/xml/typeinfo.go.html#5670154">fMode</a></span><span class="op" id="5672679">;</span>&nbsp;<span class="ident" id="5672681"><a href="/encoding/xml/typeinfo.go.html#5672652">mode</a></span>&nbsp;<span class="op" id="5672686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672690">case</span>&nbsp;<span class="num" id="5672695">0</span><span class="op" id="5672696">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672701"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672706">.</span><span class="ident" id="5672707">flags</span>&nbsp;<span class="op" id="5672713">|=</span>&nbsp;<span class="ident" id="5672716"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672727">case</span>&nbsp;<span class="ident" id="5672732"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span><span class="op" id="5672737">,</span>&nbsp;<span class="ident" id="5672739"><a href="/encoding/xml/typeinfo.go.html#5670102">fCharData</a></span><span class="op" id="5672748">,</span>&nbsp;<span class="ident" id="5672750"><a href="/encoding/xml/typeinfo.go.html#5670113">fInnerXml</a></span><span class="op" id="5672759">,</span>&nbsp;<span class="ident" id="5672761"><a href="/encoding/xml/typeinfo.go.html#5670124">fComment</a></span><span class="op" id="5672769">,</span>&nbsp;<span class="ident" id="5672771"><a href="/encoding/xml/typeinfo.go.html#5670134">fAny</a></span><span class="op" id="5672775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672780">if</span>&nbsp;<span class="ident" id="5672783"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5672784">.</span><span class="ident" id="5672785">Name</span>&nbsp;<span class="op" id="5672790">==</span>&nbsp;<span class="string" id="5672793">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="5672803">||</span>&nbsp;<span class="ident" id="5672806"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span>&nbsp;<span class="op" id="5672810">!=</span>&nbsp;<span class="string" id="5672813">&#34;&#34;</span>&nbsp;<span class="op" id="5672816">&amp;&amp;</span>&nbsp;<span class="ident" id="5672819"><a href="/encoding/xml/typeinfo.go.html#5672652">mode</a></span>&nbsp;<span class="op" id="5672824">!=</span>&nbsp;<span class="ident" id="5672827"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span>&nbsp;<span class="op" id="5672833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672839"><a href="/encoding/xml/typeinfo.go.html#5672629">valid</a></span>&nbsp;<span class="op" id="5672845">=</span>&nbsp;<span class="ident" id="5672847">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672856">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672860">default</span><span class="op" id="5672867">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5672872">//&nbsp;This&nbsp;will&nbsp;also&nbsp;catch&nbsp;multiple&nbsp;modes&nbsp;in&nbsp;a&nbsp;single&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672933"><a href="/encoding/xml/typeinfo.go.html#5672629">valid</a></span>&nbsp;<span class="op" id="5672939">=</span>&nbsp;<span class="ident" id="5672941">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5672949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5672953">if</span>&nbsp;<span class="ident" id="5672956"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672961">.</span><span class="ident" id="5672962">flags</span><span class="op" id="5672967">&amp;</span><span class="ident" id="5672968"><a href="/encoding/xml/typeinfo.go.html#5670154">fMode</a></span>&nbsp;<span class="op" id="5672974">==</span>&nbsp;<span class="ident" id="5672977"><a href="/encoding/xml/typeinfo.go.html#5670134">fAny</a></span>&nbsp;<span class="op" id="5672982">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5672987"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5672992">.</span><span class="ident" id="5672993">flags</span>&nbsp;<span class="op" id="5672999">|=</span>&nbsp;<span class="ident" id="5673002"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673017">if</span>&nbsp;<span class="ident" id="5673020"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673025">.</span><span class="ident" id="5673026">flags</span><span class="op" id="5673031">&amp;</span><span class="ident" id="5673032"><a href="/encoding/xml/typeinfo.go.html#5670141">fOmitEmpty</a></span>&nbsp;<span class="op" id="5673043">!=</span>&nbsp;<span class="num" id="5673046">0</span>&nbsp;<span class="op" id="5673048">&amp;&amp;</span>&nbsp;<span class="ident" id="5673051"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673056">.</span><span class="ident" id="5673057">flags</span><span class="op" id="5673062">&amp;</span><span class="op" id="5673063">(</span><span class="ident" id="5673064"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><span class="op" id="5673072">|</span><span class="ident" id="5673073"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span><span class="op" id="5673078">)</span>&nbsp;<span class="op" id="5673080">==</span>&nbsp;<span class="num" id="5673083">0</span>&nbsp;<span class="op" id="5673085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673090"><a href="/encoding/xml/typeinfo.go.html#5672629">valid</a></span>&nbsp;<span class="op" id="5673096">=</span>&nbsp;<span class="ident" id="5673098">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673106">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673110">if</span>&nbsp;<span class="op" id="5673113">!</span><span class="ident" id="5673114"><a href="/encoding/xml/typeinfo.go.html#5672629">valid</a></span>&nbsp;<span class="op" id="5673120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673125">return</span>&nbsp;<span class="ident" id="5673132">nil</span><span class="op" id="5673135">,</span>&nbsp;<span class="ident" id="5673137"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5673140">.</span><span class="ident" id="5673141">Errorf</span><span class="op" id="5673147">(</span><span class="string" id="5673148">&#34;xml:&nbsp;invalid&nbsp;tag&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="5673193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673199"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673200">.</span><span class="ident" id="5673201">Name</span><span class="op" id="5673205">,</span>&nbsp;<span class="ident" id="5673207"><a href="/encoding/xml/typeinfo.go.html#5671863">typ</a></span><span class="op" id="5673210">,</span>&nbsp;<span class="ident" id="5673212"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673213">.</span><span class="ident" id="5673214">Tag</span><span class="op" id="5673217">.</span><span class="ident" id="5673218">Get</span><span class="op" id="5673221">(</span><span class="string" id="5673222">&#34;xml&#34;</span><span class="op" id="5673227">)</span><span class="op" id="5673228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673235">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673239">//&nbsp;Use&nbsp;of&nbsp;xmlns&nbsp;without&nbsp;a&nbsp;name&nbsp;is&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673287">if</span>&nbsp;<span class="ident" id="5673290"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673295">.</span><span class="ident" id="5673296">xmlns</span>&nbsp;<span class="op" id="5673302">!=</span>&nbsp;<span class="string" id="5673305">&#34;&#34;</span>&nbsp;<span class="op" id="5673308">&amp;&amp;</span>&nbsp;<span class="ident" id="5673311"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span>&nbsp;<span class="op" id="5673315">==</span>&nbsp;<span class="string" id="5673318">&#34;&#34;</span>&nbsp;<span class="op" id="5673321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673325">return</span>&nbsp;<span class="ident" id="5673332">nil</span><span class="op" id="5673335">,</span>&nbsp;<span class="ident" id="5673337"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5673340">.</span><span class="ident" id="5673341">Errorf</span><span class="op" id="5673347">(</span><span class="string" id="5673348">&#34;xml:&nbsp;namespace&nbsp;without&nbsp;name&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s:&nbsp;%q&#34;</span><span class="op" id="5673404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673409"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673410">.</span><span class="ident" id="5673411">Name</span><span class="op" id="5673415">,</span>&nbsp;<span class="ident" id="5673417"><a href="/encoding/xml/typeinfo.go.html#5671863">typ</a></span><span class="op" id="5673420">,</span>&nbsp;<span class="ident" id="5673422"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673423">.</span><span class="ident" id="5673424">Tag</span><span class="op" id="5673427">.</span><span class="ident" id="5673428">Get</span><span class="op" id="5673431">(</span><span class="string" id="5673432">&#34;xml&#34;</span><span class="op" id="5673437">)</span><span class="op" id="5673438">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673445">if</span>&nbsp;<span class="ident" id="5673448"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673449">.</span><span class="ident" id="5673450">Name</span>&nbsp;<span class="op" id="5673455">==</span>&nbsp;<span class="string" id="5673458">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="5673468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673472">//&nbsp;The&nbsp;XMLName&nbsp;field&nbsp;records&nbsp;the&nbsp;XML&nbsp;element&nbsp;name.&nbsp;Don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673531">//&nbsp;process&nbsp;it&nbsp;as&nbsp;usual&nbsp;because&nbsp;its&nbsp;name&nbsp;should&nbsp;default&nbsp;to</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673591">//&nbsp;empty&nbsp;rather&nbsp;than&nbsp;to&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673633"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673638">.</span><span class="ident" id="5673639">name</span>&nbsp;<span class="op" id="5673644">=</span>&nbsp;<span class="ident" id="5673646"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673652">return</span>&nbsp;<span class="ident" id="5673659"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673664">,</span>&nbsp;<span class="ident" id="5673666">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673675">if</span>&nbsp;<span class="ident" id="5673678"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span>&nbsp;<span class="op" id="5673682">==</span>&nbsp;<span class="string" id="5673685">&#34;&#34;</span>&nbsp;<span class="op" id="5673688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673692">//&nbsp;If&nbsp;the&nbsp;name&nbsp;part&nbsp;of&nbsp;the&nbsp;tag&nbsp;is&nbsp;completely&nbsp;empty,&nbsp;get</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673750">//&nbsp;default&nbsp;from&nbsp;XMLName&nbsp;of&nbsp;underlying&nbsp;struct&nbsp;if&nbsp;feasible,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5673810">//&nbsp;or&nbsp;field&nbsp;name&nbsp;otherwise.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673840">if</span>&nbsp;<span class="ident" id="5673843">xmlname</span>&nbsp;<span class="op" id="5673851">:=</span>&nbsp;<span class="ident" id="5673854"><a href="/encoding/xml/typeinfo.go.html#5675129">lookupXMLName</a></span><span class="op" id="5673867">(</span><span class="ident" id="5673868"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673869">.</span><span class="ident" id="5673870">Type</span><span class="op" id="5673874">)</span><span class="op" id="5673875">;</span>&nbsp;<span class="ident" id="5673877"><a href="/encoding/xml/typeinfo.go.html#5673843">xmlname</a></span>&nbsp;<span class="op" id="5673885">!=</span>&nbsp;<span class="ident" id="5673888">nil</span>&nbsp;<span class="op" id="5673892">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673897"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673902">.</span><span class="ident" id="5673903">xmlns</span><span class="op" id="5673908">,</span>&nbsp;<span class="ident" id="5673910"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673915">.</span><span class="ident" id="5673916">name</span>&nbsp;<span class="op" id="5673921">=</span>&nbsp;<span class="ident" id="5673923"><a href="/encoding/xml/typeinfo.go.html#5673843">xmlname</a></span><span class="op" id="5673930">.</span><span class="ident" id="5673931">xmlns</span><span class="op" id="5673936">,</span>&nbsp;<span class="ident" id="5673938"><a href="/encoding/xml/typeinfo.go.html#5673843">xmlname</a></span><span class="op" id="5673945">.</span><span class="ident" id="5673946">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673953">}</span>&nbsp;<span class="keyword" id="5673955">else</span>&nbsp;<span class="op" id="5673960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5673965"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5673970">.</span><span class="ident" id="5673971">name</span>&nbsp;<span class="op" id="5673976">=</span>&nbsp;<span class="ident" id="5673978"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5673979">.</span><span class="ident" id="5673980">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5673987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5673991">return</span>&nbsp;<span class="ident" id="5673998"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674003">,</span>&nbsp;<span class="ident" id="5674005">nil</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5674014">//&nbsp;Prepare&nbsp;field&nbsp;name&nbsp;and&nbsp;parents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674050">parents</span>&nbsp;<span class="op" id="5674058">:=</span>&nbsp;<span class="ident" id="5674061"><a href="/encoding/xml/typeinfo.go.html#5669695">strings</a></span><span class="op" id="5674068">.</span><span class="ident" id="5674069">Split</span><span class="op" id="5674074">(</span><span class="ident" id="5674075"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5674078">,</span>&nbsp;<span class="string" id="5674080">&#34;&gt;&#34;</span><span class="op" id="5674083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674086">if</span>&nbsp;<span class="ident" id="5674089"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674096">[</span><span class="num" id="5674097">0</span><span class="op" id="5674098">]</span>&nbsp;<span class="op" id="5674100">==</span>&nbsp;<span class="string" id="5674103">&#34;&#34;</span>&nbsp;<span class="op" id="5674106">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674110"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674117">[</span><span class="num" id="5674118">0</span><span class="op" id="5674119">]</span>&nbsp;<span class="op" id="5674121">=</span>&nbsp;<span class="ident" id="5674123"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5674124">.</span><span class="ident" id="5674125">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674134">if</span>&nbsp;<span class="ident" id="5674137"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674144">[</span><span class="builtinfunc" id="5674145">len</span><span class="op" id="5674148">(</span><span class="ident" id="5674149"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674156">)</span><span class="op" id="5674157">-</span><span class="num" id="5674158">1</span><span class="op" id="5674159">]</span>&nbsp;<span class="op" id="5674161">==</span>&nbsp;<span class="string" id="5674164">&#34;&#34;</span>&nbsp;<span class="op" id="5674167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674171">return</span>&nbsp;<span class="ident" id="5674178">nil</span><span class="op" id="5674181">,</span>&nbsp;<span class="ident" id="5674183"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5674186">.</span><span class="ident" id="5674187">Errorf</span><span class="op" id="5674193">(</span><span class="string" id="5674194">&#34;xml:&nbsp;trailing&nbsp;&#39;&gt;&#39;&nbsp;in&nbsp;field&nbsp;%s&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5674236">,</span>&nbsp;<span class="ident" id="5674238"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5674239">.</span><span class="ident" id="5674240">Name</span><span class="op" id="5674244">,</span>&nbsp;<span class="ident" id="5674246"><a href="/encoding/xml/typeinfo.go.html#5671863">typ</a></span><span class="op" id="5674249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674252">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674255"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674260">.</span><span class="ident" id="5674261">name</span>&nbsp;<span class="op" id="5674266">=</span>&nbsp;<span class="ident" id="5674268"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674275">[</span><span class="builtinfunc" id="5674276">len</span><span class="op" id="5674279">(</span><span class="ident" id="5674280"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674287">)</span><span class="op" id="5674288">-</span><span class="num" id="5674289">1</span><span class="op" id="5674290">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674293">if</span>&nbsp;<span class="builtinfunc" id="5674296">len</span><span class="op" id="5674299">(</span><span class="ident" id="5674300"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674307">)</span>&nbsp;<span class="op" id="5674309">&gt;</span>&nbsp;<span class="num" id="5674311">1</span>&nbsp;<span class="op" id="5674313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674317">if</span>&nbsp;<span class="op" id="5674320">(</span><span class="ident" id="5674321"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674326">.</span><span class="ident" id="5674327">flags</span>&nbsp;<span class="op" id="5674333">&amp;</span>&nbsp;<span class="ident" id="5674335"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><span class="op" id="5674343">)</span>&nbsp;<span class="op" id="5674345">==</span>&nbsp;<span class="num" id="5674348">0</span>&nbsp;<span class="op" id="5674350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674355">return</span>&nbsp;<span class="ident" id="5674362">nil</span><span class="op" id="5674365">,</span>&nbsp;<span class="ident" id="5674367"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5674370">.</span><span class="ident" id="5674371">Errorf</span><span class="op" id="5674377">(</span><span class="string" id="5674378">&#34;xml:&nbsp;%s&nbsp;chain&nbsp;not&nbsp;valid&nbsp;with&nbsp;%s&nbsp;flag&#34;</span><span class="op" id="5674416">,</span>&nbsp;<span class="ident" id="5674418"><a href="/encoding/xml/typeinfo.go.html#5672019">tag</a></span><span class="op" id="5674421">,</span>&nbsp;<span class="ident" id="5674423"><a href="/encoding/xml/typeinfo.go.html#5669695">strings</a></span><span class="op" id="5674430">.</span><span class="ident" id="5674431">Join</span><span class="op" id="5674435">(</span><span class="ident" id="5674436"><a href="/encoding/xml/typeinfo.go.html#5672148">tokens</a></span><span class="op" id="5674442">[</span><span class="num" id="5674443">1</span><span class="op" id="5674444">:</span><span class="op" id="5674445">]</span><span class="op" id="5674446">,</span>&nbsp;<span class="string" id="5674448">&#34;,&#34;</span><span class="op" id="5674451">)</span><span class="op" id="5674452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674456">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674460"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674465">.</span><span class="ident" id="5674466">parents</span>&nbsp;<span class="op" id="5674474">=</span>&nbsp;<span class="ident" id="5674476"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674483">[</span><span class="op" id="5674484">:</span><span class="builtinfunc" id="5674485">len</span><span class="op" id="5674488">(</span><span class="ident" id="5674489"><a href="/encoding/xml/typeinfo.go.html#5674050">parents</a></span><span class="op" id="5674496">)</span><span class="op" id="5674497">-</span><span class="num" id="5674498">1</span><span class="op" id="5674499">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5674506">//&nbsp;If&nbsp;the&nbsp;field&nbsp;type&nbsp;has&nbsp;an&nbsp;XMLName&nbsp;field,&nbsp;the&nbsp;names&nbsp;must&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5674571">//&nbsp;so&nbsp;that&nbsp;the&nbsp;behavior&nbsp;of&nbsp;both&nbsp;marshalling&nbsp;and&nbsp;unmarshalling</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5674634">//&nbsp;is&nbsp;straightforward&nbsp;and&nbsp;unambiguous.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674674">if</span>&nbsp;<span class="ident" id="5674677"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674682">.</span><span class="ident" id="5674683">flags</span><span class="op" id="5674688">&amp;</span><span class="ident" id="5674689"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span>&nbsp;<span class="op" id="5674698">!=</span>&nbsp;<span class="num" id="5674701">0</span>&nbsp;<span class="op" id="5674703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674707">ftyp</span>&nbsp;<span class="op" id="5674712">:=</span>&nbsp;<span class="ident" id="5674715"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5674716">.</span><span class="ident" id="5674717">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674724">xmlname</span>&nbsp;<span class="op" id="5674732">:=</span>&nbsp;<span class="ident" id="5674735"><a href="/encoding/xml/typeinfo.go.html#5675129">lookupXMLName</a></span><span class="op" id="5674748">(</span><span class="ident" id="5674749"><a href="/encoding/xml/typeinfo.go.html#5674707">ftyp</a></span><span class="op" id="5674753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674757">if</span>&nbsp;<span class="ident" id="5674760"><a href="/encoding/xml/typeinfo.go.html#5674724">xmlname</a></span>&nbsp;<span class="op" id="5674768">!=</span>&nbsp;<span class="ident" id="5674771">nil</span>&nbsp;<span class="op" id="5674775">&amp;&amp;</span>&nbsp;<span class="ident" id="5674778"><a href="/encoding/xml/typeinfo.go.html#5674724">xmlname</a></span><span class="op" id="5674785">.</span><span class="ident" id="5674786">name</span>&nbsp;<span class="op" id="5674791">!=</span>&nbsp;<span class="ident" id="5674794"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674799">.</span><span class="ident" id="5674800">name</span>&nbsp;<span class="op" id="5674805">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674810">return</span>&nbsp;<span class="ident" id="5674817">nil</span><span class="op" id="5674820">,</span>&nbsp;<span class="ident" id="5674822"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5674825">.</span><span class="ident" id="5674826">Errorf</span><span class="op" id="5674832">(</span><span class="string" id="5674833">&#34;xml:&nbsp;name&nbsp;%q&nbsp;in&nbsp;tag&nbsp;of&nbsp;%s.%s&nbsp;conflicts&nbsp;with&nbsp;name&nbsp;%q&nbsp;in&nbsp;%s.XMLName&#34;</span><span class="op" id="5674900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5674906"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674911">.</span><span class="ident" id="5674912">name</span><span class="op" id="5674916">,</span>&nbsp;<span class="ident" id="5674918"><a href="/encoding/xml/typeinfo.go.html#5671863">typ</a></span><span class="op" id="5674921">,</span>&nbsp;<span class="ident" id="5674923"><a href="/encoding/xml/typeinfo.go.html#5671881">f</a></span><span class="op" id="5674924">.</span><span class="ident" id="5674925">Name</span><span class="op" id="5674929">,</span>&nbsp;<span class="ident" id="5674931"><a href="/encoding/xml/typeinfo.go.html#5674724">xmlname</a></span><span class="op" id="5674938">.</span><span class="ident" id="5674939">name</span><span class="op" id="5674943">,</span>&nbsp;<span class="ident" id="5674945"><a href="/encoding/xml/typeinfo.go.html#5674707">ftyp</a></span><span class="op" id="5674949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5674956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5674959">return</span>&nbsp;<span class="ident" id="5674966"><a href="/encoding/xml/typeinfo.go.html#5671928">finfo</a></span><span class="op" id="5674971">,</span>&nbsp;<span class="ident" id="5674973">nil</span><br>
<span class="lineno">225</span><span class="op" id="5674977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5674980">//&nbsp;lookupXMLName&nbsp;returns&nbsp;the&nbsp;fieldInfo&nbsp;for&nbsp;typ&#39;s&nbsp;XMLName&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5675043">//&nbsp;in&nbsp;case&nbsp;it&nbsp;exists&nbsp;and&nbsp;has&nbsp;a&nbsp;valid&nbsp;xml&nbsp;field&nbsp;tag,&nbsp;otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5675105">//&nbsp;it&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno">230</span><span class="keyword" id="5675124">func</span>&nbsp;<span class="ident" id="5675129">lookupXMLName</span><span class="op" id="5675142">(</span><span class="ident" id="5675143">typ</span>&nbsp;<span class="ident" id="5675147"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5675154">.</span><span class="ident" id="5675155">Type</span><span class="op" id="5675159">)</span>&nbsp;<span class="op" id="5675161">(</span><span class="ident" id="5675162">xmlname</span>&nbsp;<span class="op" id="5675170">*</span><span class="ident" id="5675171"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5675180">)</span>&nbsp;<span class="op" id="5675182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675185">for</span>&nbsp;<span class="ident" id="5675189"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675192">.</span><span class="ident" id="5675193">Kind</span><span class="op" id="5675197">(</span><span class="op" id="5675198">)</span>&nbsp;<span class="op" id="5675200">==</span>&nbsp;<span class="ident" id="5675203"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5675210">.</span><span class="ident" id="5675211">Ptr</span>&nbsp;<span class="op" id="5675215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5675219"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span>&nbsp;<span class="op" id="5675223">=</span>&nbsp;<span class="ident" id="5675225"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675228">.</span><span class="ident" id="5675229">Elem</span><span class="op" id="5675233">(</span><span class="op" id="5675234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675240">if</span>&nbsp;<span class="ident" id="5675243"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675246">.</span><span class="ident" id="5675247">Kind</span><span class="op" id="5675251">(</span><span class="op" id="5675252">)</span>&nbsp;<span class="op" id="5675254">!=</span>&nbsp;<span class="ident" id="5675257"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5675264">.</span><span class="ident" id="5675265">Struct</span>&nbsp;<span class="op" id="5675272">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675276">return</span>&nbsp;<span class="ident" id="5675283">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675291">for</span>&nbsp;<span class="ident" id="5675295">i</span><span class="op" id="5675296">,</span>&nbsp;<span class="ident" id="5675298">n</span>&nbsp;<span class="op" id="5675300">:=</span>&nbsp;<span class="num" id="5675303">0</span><span class="op" id="5675304">,</span>&nbsp;<span class="ident" id="5675306"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675309">.</span><span class="ident" id="5675310">NumField</span><span class="op" id="5675318">(</span><span class="op" id="5675319">)</span><span class="op" id="5675320">;</span>&nbsp;<span class="ident" id="5675322"><a href="/encoding/xml/typeinfo.go.html#5675295">i</a></span>&nbsp;<span class="op" id="5675324">&lt;</span>&nbsp;<span class="ident" id="5675326"><a href="/encoding/xml/typeinfo.go.html#5675298">n</a></span><span class="op" id="5675327">;</span>&nbsp;<span class="ident" id="5675329"><a href="/encoding/xml/typeinfo.go.html#5675295">i</a></span><span class="op" id="5675330">++</span>&nbsp;<span class="op" id="5675333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5675337">f</span>&nbsp;<span class="op" id="5675339">:=</span>&nbsp;<span class="ident" id="5675342"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675345">.</span><span class="ident" id="5675346">Field</span><span class="op" id="5675351">(</span><span class="ident" id="5675352"><a href="/encoding/xml/typeinfo.go.html#5675295">i</a></span><span class="op" id="5675353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675357">if</span>&nbsp;<span class="ident" id="5675360"><a href="/encoding/xml/typeinfo.go.html#5675337">f</a></span><span class="op" id="5675361">.</span><span class="ident" id="5675362">Name</span>&nbsp;<span class="op" id="5675367">!=</span>&nbsp;<span class="string" id="5675370">&#34;XMLName&#34;</span>&nbsp;<span class="op" id="5675380">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675385">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5675400">finfo</span><span class="op" id="5675405">,</span>&nbsp;<span class="ident" id="5675407">err</span>&nbsp;<span class="op" id="5675411">:=</span>&nbsp;<span class="ident" id="5675414"><a href="/encoding/xml/typeinfo.go.html#5671847">structFieldInfo</a></span><span class="op" id="5675429">(</span><span class="ident" id="5675430"><a href="/encoding/xml/typeinfo.go.html#5675143">typ</a></span><span class="op" id="5675433">,</span>&nbsp;<span class="op" id="5675435">&amp;</span><span class="ident" id="5675436"><a href="/encoding/xml/typeinfo.go.html#5675337">f</a></span><span class="op" id="5675437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675441">if</span>&nbsp;<span class="ident" id="5675444"><a href="/encoding/xml/typeinfo.go.html#5675400">finfo</a></span><span class="op" id="5675449">.</span><span class="ident" id="5675450">name</span>&nbsp;<span class="op" id="5675455">!=</span>&nbsp;<span class="string" id="5675458">&#34;&#34;</span>&nbsp;<span class="op" id="5675461">&amp;&amp;</span>&nbsp;<span class="ident" id="5675464"><a href="/encoding/xml/typeinfo.go.html#5675407">err</a></span>&nbsp;<span class="op" id="5675468">==</span>&nbsp;<span class="ident" id="5675471">nil</span>&nbsp;<span class="op" id="5675475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675480">return</span>&nbsp;<span class="ident" id="5675487"><a href="/encoding/xml/typeinfo.go.html#5675400">finfo</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5675499">//&nbsp;Also&nbsp;consider&nbsp;errors&nbsp;as&nbsp;a&nbsp;non-existent&nbsp;field&nbsp;tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5675553">//&nbsp;and&nbsp;let&nbsp;getTypeInfo&nbsp;itself&nbsp;report&nbsp;the&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675603">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675610">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675613">return</span>&nbsp;<span class="ident" id="5675620">nil</span><br>
<span class="lineno"></span><span class="op" id="5675624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5675627">func</span>&nbsp;<span class="ident" id="5675632">min</span><span class="op" id="5675635">(</span><span class="ident" id="5675636">a</span><span class="op" id="5675637">,</span>&nbsp;<span class="ident" id="5675639">b</span>&nbsp;<span class="builtintype" id="5675641">int</span><span class="op" id="5675644">)</span>&nbsp;<span class="builtintype" id="5675646">int</span>&nbsp;<span class="op" id="5675650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675653">if</span>&nbsp;<span class="ident" id="5675656"><a href="/encoding/xml/typeinfo.go.html#5675636">a</a></span>&nbsp;<span class="op" id="5675658">&lt;=</span>&nbsp;<span class="ident" id="5675661"><a href="/encoding/xml/typeinfo.go.html#5675639">b</a></span>&nbsp;<span class="op" id="5675663">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675667">return</span>&nbsp;<span class="ident" id="5675674"><a href="/encoding/xml/typeinfo.go.html#5675636">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5675677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5675680">return</span>&nbsp;<span class="ident" id="5675687"><a href="/encoding/xml/typeinfo.go.html#5675639">b</a></span><br>
<span class="lineno"></span><span class="op" id="5675689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="5675692">//&nbsp;addFieldInfo&nbsp;adds&nbsp;finfo&nbsp;to&nbsp;tinfo.fields&nbsp;if&nbsp;there&nbsp;are&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5675751">//&nbsp;conflicts,&nbsp;or&nbsp;if&nbsp;conflicts&nbsp;arise&nbsp;from&nbsp;previous&nbsp;fields&nbsp;that&nbsp;were</span><br>
<span class="lineno"></span><span class="comment" id="5675818">//&nbsp;obtained&nbsp;from&nbsp;deeper&nbsp;embedded&nbsp;structures&nbsp;than&nbsp;finfo.&nbsp;In&nbsp;the&nbsp;latter</span><br>
<span class="lineno"></span><span class="comment" id="5675888">//&nbsp;case,&nbsp;the&nbsp;conflicting&nbsp;entries&nbsp;are&nbsp;dropped.</span><br>
<span class="lineno"></span><span class="comment" id="5675934">//&nbsp;A&nbsp;conflict&nbsp;occurs&nbsp;when&nbsp;the&nbsp;path&nbsp;(parent&nbsp;+&nbsp;name)&nbsp;to&nbsp;a&nbsp;field&nbsp;is</span><br>
<span class="lineno">265</span><span class="comment" id="5675999">//&nbsp;itself&nbsp;a&nbsp;prefix&nbsp;of&nbsp;another&nbsp;path,&nbsp;or&nbsp;when&nbsp;two&nbsp;paths&nbsp;match&nbsp;exactly.</span><br>
<span class="lineno"></span><span class="comment" id="5676068">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;for&nbsp;field&nbsp;paths&nbsp;to&nbsp;share&nbsp;a&nbsp;common,&nbsp;shorter&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="5676133">func</span>&nbsp;<span class="ident" id="5676138">addFieldInfo</span><span class="op" id="5676150">(</span><span class="ident" id="5676151">typ</span>&nbsp;<span class="ident" id="5676155"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5676162">.</span><span class="ident" id="5676163">Type</span><span class="op" id="5676167">,</span>&nbsp;<span class="ident" id="5676169">tinfo</span>&nbsp;<span class="op" id="5676175">*</span><span class="ident" id="5676176"><a href="/encoding/xml/typeinfo.go.html#5669785">typeInfo</a></span><span class="op" id="5676184">,</span>&nbsp;<span class="ident" id="5676186">newf</span>&nbsp;<span class="op" id="5676191">*</span><span class="ident" id="5676192"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5676201">)</span>&nbsp;<span class="builtintype" id="5676203">error</span>&nbsp;<span class="op" id="5676209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676212">var</span>&nbsp;<span class="ident" id="5676216">conflicts</span>&nbsp;<span class="op" id="5676226">[</span><span class="op" id="5676227">]</span><span class="builtintype" id="5676228">int</span><br>
<span class="lineno"></span><span class="ident" id="5676232">Loop</span><span class="op" id="5676236">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5676239">//&nbsp;First,&nbsp;figure&nbsp;all&nbsp;conflicts.&nbsp;Most&nbsp;working&nbsp;code&nbsp;will&nbsp;have&nbsp;none.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676306">for</span>&nbsp;<span class="ident" id="5676310">i</span>&nbsp;<span class="op" id="5676312">:=</span>&nbsp;<span class="keyword" id="5676315">range</span>&nbsp;<span class="ident" id="5676321"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5676326">.</span><span class="ident" id="5676327">fields</span>&nbsp;<span class="op" id="5676334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5676338">oldf</span>&nbsp;<span class="op" id="5676343">:=</span>&nbsp;<span class="op" id="5676346">&amp;</span><span class="ident" id="5676347"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5676352">.</span><span class="ident" id="5676353">fields</span><span class="op" id="5676359">[</span><span class="ident" id="5676360"><a href="/encoding/xml/typeinfo.go.html#5676310">i</a></span><span class="op" id="5676361">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676365">if</span>&nbsp;<span class="ident" id="5676368"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676372">.</span><span class="ident" id="5676373">flags</span><span class="op" id="5676378">&amp;</span><span class="ident" id="5676379"><a href="/encoding/xml/typeinfo.go.html#5670154">fMode</a></span>&nbsp;<span class="op" id="5676385">!=</span>&nbsp;<span class="ident" id="5676388"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676392">.</span><span class="ident" id="5676393">flags</span><span class="op" id="5676398">&amp;</span><span class="ident" id="5676399"><a href="/encoding/xml/typeinfo.go.html#5670154">fMode</a></span>&nbsp;<span class="op" id="5676405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676410">continue</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676425">if</span>&nbsp;<span class="ident" id="5676428"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676432">.</span><span class="ident" id="5676433">xmlns</span>&nbsp;<span class="op" id="5676439">!=</span>&nbsp;<span class="string" id="5676442">&#34;&#34;</span>&nbsp;<span class="op" id="5676445">&amp;&amp;</span>&nbsp;<span class="ident" id="5676448"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676452">.</span><span class="ident" id="5676453">xmlns</span>&nbsp;<span class="op" id="5676459">!=</span>&nbsp;<span class="string" id="5676462">&#34;&#34;</span>&nbsp;<span class="op" id="5676465">&amp;&amp;</span>&nbsp;<span class="ident" id="5676468"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676472">.</span><span class="ident" id="5676473">xmlns</span>&nbsp;<span class="op" id="5676479">!=</span>&nbsp;<span class="ident" id="5676482"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676486">.</span><span class="ident" id="5676487">xmlns</span>&nbsp;<span class="op" id="5676493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676498">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5676513">minl</span>&nbsp;<span class="op" id="5676518">:=</span>&nbsp;<span class="ident" id="5676521"><a href="/encoding/xml/typeinfo.go.html#5675632">min</a></span><span class="op" id="5676524">(</span><span class="builtinfunc" id="5676525">len</span><span class="op" id="5676528">(</span><span class="ident" id="5676529"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676533">.</span><span class="ident" id="5676534">parents</span><span class="op" id="5676541">)</span><span class="op" id="5676542">,</span>&nbsp;<span class="builtinfunc" id="5676544">len</span><span class="op" id="5676547">(</span><span class="ident" id="5676548"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676552">.</span><span class="ident" id="5676553">parents</span><span class="op" id="5676560">)</span><span class="op" id="5676561">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676565">for</span>&nbsp;<span class="ident" id="5676569">p</span>&nbsp;<span class="op" id="5676571">:=</span>&nbsp;<span class="num" id="5676574">0</span><span class="op" id="5676575">;</span>&nbsp;<span class="ident" id="5676577"><a href="/encoding/xml/typeinfo.go.html#5676569">p</a></span>&nbsp;<span class="op" id="5676579">&lt;</span>&nbsp;<span class="ident" id="5676581"><a href="/encoding/xml/typeinfo.go.html#5676513">minl</a></span><span class="op" id="5676585">;</span>&nbsp;<span class="ident" id="5676587"><a href="/encoding/xml/typeinfo.go.html#5676569">p</a></span><span class="op" id="5676588">++</span>&nbsp;<span class="op" id="5676591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676596">if</span>&nbsp;<span class="ident" id="5676599"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676603">.</span><span class="ident" id="5676604">parents</span><span class="op" id="5676611">[</span><span class="ident" id="5676612"><a href="/encoding/xml/typeinfo.go.html#5676569">p</a></span><span class="op" id="5676613">]</span>&nbsp;<span class="op" id="5676615">!=</span>&nbsp;<span class="ident" id="5676618"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676622">.</span><span class="ident" id="5676623">parents</span><span class="op" id="5676630">[</span><span class="ident" id="5676631"><a href="/encoding/xml/typeinfo.go.html#5676569">p</a></span><span class="op" id="5676632">]</span>&nbsp;<span class="op" id="5676634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676640">continue</span>&nbsp;<span class="ident" id="5676649">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676661">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676665">if</span>&nbsp;<span class="builtinfunc" id="5676668">len</span><span class="op" id="5676671">(</span><span class="ident" id="5676672"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676676">.</span><span class="ident" id="5676677">parents</span><span class="op" id="5676684">)</span>&nbsp;<span class="op" id="5676686">&gt;</span>&nbsp;<span class="builtinfunc" id="5676688">len</span><span class="op" id="5676691">(</span><span class="ident" id="5676692"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676696">.</span><span class="ident" id="5676697">parents</span><span class="op" id="5676704">)</span>&nbsp;<span class="op" id="5676706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676711">if</span>&nbsp;<span class="ident" id="5676714"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676718">.</span><span class="ident" id="5676719">parents</span><span class="op" id="5676726">[</span><span class="builtinfunc" id="5676727">len</span><span class="op" id="5676730">(</span><span class="ident" id="5676731"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676735">.</span><span class="ident" id="5676736">parents</span><span class="op" id="5676743">)</span><span class="op" id="5676744">]</span>&nbsp;<span class="op" id="5676746">==</span>&nbsp;<span class="ident" id="5676749"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676753">.</span><span class="ident" id="5676754">name</span>&nbsp;<span class="op" id="5676759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5676765"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5676775">=</span>&nbsp;<span class="builtinfunc" id="5676777">append</span><span class="op" id="5676783">(</span><span class="ident" id="5676784"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span><span class="op" id="5676793">,</span>&nbsp;<span class="ident" id="5676795"><a href="/encoding/xml/typeinfo.go.html#5676310">i</a></span><span class="op" id="5676796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676805">}</span>&nbsp;<span class="keyword" id="5676807">else</span>&nbsp;<span class="keyword" id="5676812">if</span>&nbsp;<span class="builtinfunc" id="5676815">len</span><span class="op" id="5676818">(</span><span class="ident" id="5676819"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676823">.</span><span class="ident" id="5676824">parents</span><span class="op" id="5676831">)</span>&nbsp;<span class="op" id="5676833">&lt;</span>&nbsp;<span class="builtinfunc" id="5676835">len</span><span class="op" id="5676838">(</span><span class="ident" id="5676839"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676843">.</span><span class="ident" id="5676844">parents</span><span class="op" id="5676851">)</span>&nbsp;<span class="op" id="5676853">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676858">if</span>&nbsp;<span class="ident" id="5676861"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676865">.</span><span class="ident" id="5676866">parents</span><span class="op" id="5676873">[</span><span class="builtinfunc" id="5676874">len</span><span class="op" id="5676877">(</span><span class="ident" id="5676878"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676882">.</span><span class="ident" id="5676883">parents</span><span class="op" id="5676890">)</span><span class="op" id="5676891">]</span>&nbsp;<span class="op" id="5676893">==</span>&nbsp;<span class="ident" id="5676896"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676900">.</span><span class="ident" id="5676901">name</span>&nbsp;<span class="op" id="5676906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5676912"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5676922">=</span>&nbsp;<span class="builtinfunc" id="5676924">append</span><span class="op" id="5676930">(</span><span class="ident" id="5676931"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span><span class="op" id="5676940">,</span>&nbsp;<span class="ident" id="5676942"><a href="/encoding/xml/typeinfo.go.html#5676310">i</a></span><span class="op" id="5676943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5676952">}</span>&nbsp;<span class="keyword" id="5676954">else</span>&nbsp;<span class="op" id="5676959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5676964">if</span>&nbsp;<span class="ident" id="5676967"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5676971">.</span><span class="ident" id="5676972">name</span>&nbsp;<span class="op" id="5676977">==</span>&nbsp;<span class="ident" id="5676980"><a href="/encoding/xml/typeinfo.go.html#5676338">oldf</a></span><span class="op" id="5676984">.</span><span class="ident" id="5676985">name</span>&nbsp;<span class="op" id="5676990">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5676996"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5677006">=</span>&nbsp;<span class="builtinfunc" id="5677008">append</span><span class="op" id="5677014">(</span><span class="ident" id="5677015"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span><span class="op" id="5677024">,</span>&nbsp;<span class="ident" id="5677026"><a href="/encoding/xml/typeinfo.go.html#5676310">i</a></span><span class="op" id="5677027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677042">//&nbsp;Without&nbsp;conflicts,&nbsp;add&nbsp;the&nbsp;new&nbsp;field&nbsp;and&nbsp;return.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677095">if</span>&nbsp;<span class="ident" id="5677098"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5677108">==</span>&nbsp;<span class="ident" id="5677111">nil</span>&nbsp;<span class="op" id="5677115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677119"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677124">.</span><span class="ident" id="5677125">fields</span>&nbsp;<span class="op" id="5677132">=</span>&nbsp;<span class="builtinfunc" id="5677134">append</span><span class="op" id="5677140">(</span><span class="ident" id="5677141"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677146">.</span><span class="ident" id="5677147">fields</span><span class="op" id="5677153">,</span>&nbsp;<span class="op" id="5677155">*</span><span class="ident" id="5677156"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5677160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677164">return</span>&nbsp;<span class="ident" id="5677171">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677180">//&nbsp;If&nbsp;any&nbsp;conflict&nbsp;is&nbsp;shallower,&nbsp;ignore&nbsp;the&nbsp;new&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677236">//&nbsp;This&nbsp;matches&nbsp;the&nbsp;Go&nbsp;field&nbsp;resolution&nbsp;on&nbsp;embedding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677291">for</span>&nbsp;<span class="ident" id="5677295">_</span><span class="op" id="5677296">,</span>&nbsp;<span class="ident" id="5677298">i</span>&nbsp;<span class="op" id="5677300">:=</span>&nbsp;<span class="keyword" id="5677303">range</span>&nbsp;<span class="ident" id="5677309"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5677319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677323">if</span>&nbsp;<span class="builtinfunc" id="5677326">len</span><span class="op" id="5677329">(</span><span class="ident" id="5677330"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677335">.</span><span class="ident" id="5677336">fields</span><span class="op" id="5677342">[</span><span class="ident" id="5677343"><a href="/encoding/xml/typeinfo.go.html#5677298">i</a></span><span class="op" id="5677344">]</span><span class="op" id="5677345">.</span><span class="ident" id="5677346">idx</span><span class="op" id="5677349">)</span>&nbsp;<span class="op" id="5677351">&lt;</span>&nbsp;<span class="builtinfunc" id="5677353">len</span><span class="op" id="5677356">(</span><span class="ident" id="5677357"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5677361">.</span><span class="ident" id="5677362">idx</span><span class="op" id="5677365">)</span>&nbsp;<span class="op" id="5677367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677372">return</span>&nbsp;<span class="ident" id="5677379">nil</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677392">//&nbsp;Otherwise,&nbsp;if&nbsp;any&nbsp;of&nbsp;them&nbsp;is&nbsp;at&nbsp;the&nbsp;same&nbsp;depth&nbsp;level,&nbsp;it&#39;s&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677465">for</span>&nbsp;<span class="ident" id="5677469">_</span><span class="op" id="5677470">,</span>&nbsp;<span class="ident" id="5677472">i</span>&nbsp;<span class="op" id="5677474">:=</span>&nbsp;<span class="keyword" id="5677477">range</span>&nbsp;<span class="ident" id="5677483"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span>&nbsp;<span class="op" id="5677493">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677497">oldf</span>&nbsp;<span class="op" id="5677502">:=</span>&nbsp;<span class="op" id="5677505">&amp;</span><span class="ident" id="5677506"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677511">.</span><span class="ident" id="5677512">fields</span><span class="op" id="5677518">[</span><span class="ident" id="5677519"><a href="/encoding/xml/typeinfo.go.html#5677472">i</a></span><span class="op" id="5677520">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677524">if</span>&nbsp;<span class="builtinfunc" id="5677527">len</span><span class="op" id="5677530">(</span><span class="ident" id="5677531"><a href="/encoding/xml/typeinfo.go.html#5677497">oldf</a></span><span class="op" id="5677535">.</span><span class="ident" id="5677536">idx</span><span class="op" id="5677539">)</span>&nbsp;<span class="op" id="5677541">==</span>&nbsp;<span class="builtinfunc" id="5677544">len</span><span class="op" id="5677547">(</span><span class="ident" id="5677548"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5677552">.</span><span class="ident" id="5677553">idx</span><span class="op" id="5677556">)</span>&nbsp;<span class="op" id="5677558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677563">f1</span>&nbsp;<span class="op" id="5677566">:=</span>&nbsp;<span class="ident" id="5677569"><a href="/encoding/xml/typeinfo.go.html#5676151">typ</a></span><span class="op" id="5677572">.</span><span class="ident" id="5677573">FieldByIndex</span><span class="op" id="5677585">(</span><span class="ident" id="5677586"><a href="/encoding/xml/typeinfo.go.html#5677497">oldf</a></span><span class="op" id="5677590">.</span><span class="ident" id="5677591">idx</span><span class="op" id="5677594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677599">f2</span>&nbsp;<span class="op" id="5677602">:=</span>&nbsp;<span class="ident" id="5677605"><a href="/encoding/xml/typeinfo.go.html#5676151">typ</a></span><span class="op" id="5677608">.</span><span class="ident" id="5677609">FieldByIndex</span><span class="op" id="5677621">(</span><span class="ident" id="5677622"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5677626">.</span><span class="ident" id="5677627">idx</span><span class="op" id="5677630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677635">return</span>&nbsp;<span class="op" id="5677642">&amp;</span><span class="ident" id="5677643"><a href="/encoding/xml/typeinfo.go.html#5678219">TagPathError</a></span><span class="op" id="5677655">{</span><span class="ident" id="5677656"><a href="/encoding/xml/typeinfo.go.html#5676151">typ</a></span><span class="op" id="5677659">,</span>&nbsp;<span class="ident" id="5677661"><a href="/encoding/xml/typeinfo.go.html#5677563">f1</a></span><span class="op" id="5677663">.</span><span class="ident" id="5677664">Name</span><span class="op" id="5677668">,</span>&nbsp;<span class="ident" id="5677670"><a href="/encoding/xml/typeinfo.go.html#5677563">f1</a></span><span class="op" id="5677672">.</span><span class="ident" id="5677673">Tag</span><span class="op" id="5677676">.</span><span class="ident" id="5677677">Get</span><span class="op" id="5677680">(</span><span class="string" id="5677681">&#34;xml&#34;</span><span class="op" id="5677686">)</span><span class="op" id="5677687">,</span>&nbsp;<span class="ident" id="5677689"><a href="/encoding/xml/typeinfo.go.html#5677599">f2</a></span><span class="op" id="5677691">.</span><span class="ident" id="5677692">Name</span><span class="op" id="5677696">,</span>&nbsp;<span class="ident" id="5677698"><a href="/encoding/xml/typeinfo.go.html#5677599">f2</a></span><span class="op" id="5677700">.</span><span class="ident" id="5677701">Tag</span><span class="op" id="5677704">.</span><span class="ident" id="5677705">Get</span><span class="op" id="5677708">(</span><span class="string" id="5677709">&#34;xml&#34;</span><span class="op" id="5677714">)</span><span class="op" id="5677715">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5677722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677726">//&nbsp;Otherwise,&nbsp;the&nbsp;new&nbsp;field&nbsp;is&nbsp;shallower,&nbsp;and&nbsp;thus&nbsp;takes&nbsp;precedence,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5677796">//&nbsp;so&nbsp;drop&nbsp;the&nbsp;conflicting&nbsp;fields&nbsp;from&nbsp;tinfo&nbsp;and&nbsp;append&nbsp;the&nbsp;new&nbsp;one.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5677866">for</span>&nbsp;<span class="ident" id="5677870">c</span>&nbsp;<span class="op" id="5677872">:=</span>&nbsp;<span class="builtinfunc" id="5677875">len</span><span class="op" id="5677878">(</span><span class="ident" id="5677879"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span><span class="op" id="5677888">)</span>&nbsp;<span class="op" id="5677890">-</span>&nbsp;<span class="num" id="5677892">1</span><span class="op" id="5677893">;</span>&nbsp;<span class="ident" id="5677895"><a href="/encoding/xml/typeinfo.go.html#5677870">c</a></span>&nbsp;<span class="op" id="5677897">&gt;=</span>&nbsp;<span class="num" id="5677900">0</span><span class="op" id="5677901">;</span>&nbsp;<span class="ident" id="5677903"><a href="/encoding/xml/typeinfo.go.html#5677870">c</a></span><span class="op" id="5677904">--</span>&nbsp;<span class="op" id="5677907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677911">i</span>&nbsp;<span class="op" id="5677913">:=</span>&nbsp;<span class="ident" id="5677916"><a href="/encoding/xml/typeinfo.go.html#5676216">conflicts</a></span><span class="op" id="5677925">[</span><span class="ident" id="5677926"><a href="/encoding/xml/typeinfo.go.html#5677870">c</a></span><span class="op" id="5677927">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5677931">copy</span><span class="op" id="5677935">(</span><span class="ident" id="5677936"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677941">.</span><span class="ident" id="5677942">fields</span><span class="op" id="5677948">[</span><span class="ident" id="5677949"><a href="/encoding/xml/typeinfo.go.html#5677911">i</a></span><span class="op" id="5677950">:</span><span class="op" id="5677951">]</span><span class="op" id="5677952">,</span>&nbsp;<span class="ident" id="5677954"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677959">.</span><span class="ident" id="5677960">fields</span><span class="op" id="5677966">[</span><span class="ident" id="5677967"><a href="/encoding/xml/typeinfo.go.html#5677911">i</a></span><span class="op" id="5677968">+</span><span class="num" id="5677969">1</span><span class="op" id="5677970">:</span><span class="op" id="5677971">]</span><span class="op" id="5677972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5677976"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677981">.</span><span class="ident" id="5677982">fields</span>&nbsp;<span class="op" id="5677989">=</span>&nbsp;<span class="ident" id="5677991"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5677996">.</span><span class="ident" id="5677997">fields</span><span class="op" id="5678003">[</span><span class="op" id="5678004">:</span><span class="builtinfunc" id="5678005">len</span><span class="op" id="5678008">(</span><span class="ident" id="5678009"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5678014">.</span><span class="ident" id="5678015">fields</span><span class="op" id="5678021">)</span><span class="op" id="5678022">-</span><span class="num" id="5678023">1</span><span class="op" id="5678024">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5678027">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678030"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5678035">.</span><span class="ident" id="5678036">fields</span>&nbsp;<span class="op" id="5678043">=</span>&nbsp;<span class="builtinfunc" id="5678045">append</span><span class="op" id="5678051">(</span><span class="ident" id="5678052"><a href="/encoding/xml/typeinfo.go.html#5676169">tinfo</a></span><span class="op" id="5678057">.</span><span class="ident" id="5678058">fields</span><span class="op" id="5678064">,</span>&nbsp;<span class="op" id="5678066">*</span><span class="ident" id="5678067"><a href="/encoding/xml/typeinfo.go.html#5676186">newf</a></span><span class="op" id="5678071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678074">return</span>&nbsp;<span class="ident" id="5678081">nil</span><br>
<span class="lineno"></span><span class="op" id="5678085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5678088">//&nbsp;A&nbsp;TagPathError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process</span><br>
<span class="lineno">335</span><span class="comment" id="5678155">//&nbsp;caused&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;field&nbsp;tags&nbsp;with&nbsp;conflicting&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="5678214">type</span>&nbsp;<span class="ident" id="5678219">TagPathError</span>&nbsp;<span class="keyword" id="5678232">struct</span>&nbsp;<span class="op" id="5678239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678242">Struct</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5678255"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678262">.</span><span class="ident" id="5678263">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678269">Field1</span><span class="op" id="5678275">,</span>&nbsp;<span class="ident" id="5678277">Tag1</span>&nbsp;<span class="builtintype" id="5678282">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678290">Field2</span><span class="op" id="5678296">,</span>&nbsp;<span class="ident" id="5678298">Tag2</span>&nbsp;<span class="builtintype" id="5678303">string</span><br>
<span class="lineno">340</span><span class="op" id="5678310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5678313">func</span>&nbsp;<span class="op" id="5678318">(</span><span class="ident" id="5678319">e</span>&nbsp;<span class="op" id="5678321">*</span><span class="ident" id="5678322"><a href="/encoding/xml/typeinfo.go.html#5678219">TagPathError</a></span><span class="op" id="5678334">)</span>&nbsp;<span class="ident" id="5678336">Error</span><span class="op" id="5678341">(</span><span class="op" id="5678342">)</span>&nbsp;<span class="builtintype" id="5678344">string</span>&nbsp;<span class="op" id="5678351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678354">return</span>&nbsp;<span class="ident" id="5678361"><a href="/encoding/xml/typeinfo.go.html#5669677">fmt</a></span><span class="op" id="5678364">.</span><span class="ident" id="5678365">Sprintf</span><span class="op" id="5678372">(</span><span class="string" id="5678373">&#34;%s&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&nbsp;conflicts&nbsp;with&nbsp;field&nbsp;%q&nbsp;with&nbsp;tag&nbsp;%q&#34;</span><span class="op" id="5678434">,</span>&nbsp;<span class="ident" id="5678436"><a href="/encoding/xml/typeinfo.go.html#5678319">e</a></span><span class="op" id="5678437">.</span><span class="ident" id="5678438">Struct</span><span class="op" id="5678444">,</span>&nbsp;<span class="ident" id="5678446"><a href="/encoding/xml/typeinfo.go.html#5678319">e</a></span><span class="op" id="5678447">.</span><span class="ident" id="5678448">Field1</span><span class="op" id="5678454">,</span>&nbsp;<span class="ident" id="5678456"><a href="/encoding/xml/typeinfo.go.html#5678319">e</a></span><span class="op" id="5678457">.</span><span class="ident" id="5678458">Tag1</span><span class="op" id="5678462">,</span>&nbsp;<span class="ident" id="5678464"><a href="/encoding/xml/typeinfo.go.html#5678319">e</a></span><span class="op" id="5678465">.</span><span class="ident" id="5678466">Field2</span><span class="op" id="5678472">,</span>&nbsp;<span class="ident" id="5678474"><a href="/encoding/xml/typeinfo.go.html#5678319">e</a></span><span class="op" id="5678475">.</span><span class="ident" id="5678476">Tag2</span><span class="op" id="5678480">)</span><br>
<span class="lineno"></span><span class="op" id="5678482">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span><span class="comment" id="5678485">//&nbsp;value&nbsp;returns&nbsp;v&#39;s&nbsp;field&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;finfo.</span><br>
<span class="lineno"></span><span class="comment" id="5678542">//&nbsp;It&#39;s&nbsp;equivalent&nbsp;to&nbsp;v.FieldByIndex(finfo.idx),&nbsp;but&nbsp;initializes</span><br>
<span class="lineno"></span><span class="comment" id="5678607">//&nbsp;and&nbsp;dereferences&nbsp;pointers&nbsp;as&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="5678650">func</span>&nbsp;<span class="op" id="5678655">(</span><span class="ident" id="5678656">finfo</span>&nbsp;<span class="op" id="5678662">*</span><span class="ident" id="5678663"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5678672">)</span>&nbsp;<span class="ident" id="5678674">value</span><span class="op" id="5678679">(</span><span class="ident" id="5678680">v</span>&nbsp;<span class="ident" id="5678682"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678689">.</span><span class="ident" id="5678690">Value</span><span class="op" id="5678695">)</span>&nbsp;<span class="ident" id="5678697"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678704">.</span><span class="ident" id="5678705">Value</span>&nbsp;<span class="op" id="5678711">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678714">for</span>&nbsp;<span class="ident" id="5678718">i</span><span class="op" id="5678719">,</span>&nbsp;<span class="ident" id="5678721">x</span>&nbsp;<span class="op" id="5678723">:=</span>&nbsp;<span class="keyword" id="5678726">range</span>&nbsp;<span class="ident" id="5678732"><a href="/encoding/xml/typeinfo.go.html#5678656">finfo</a></span><span class="op" id="5678737">.</span><span class="ident" id="5678738">idx</span>&nbsp;<span class="op" id="5678742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678746">if</span>&nbsp;<span class="ident" id="5678749"><a href="/encoding/xml/typeinfo.go.html#5678718">i</a></span>&nbsp;<span class="op" id="5678751">&gt;</span>&nbsp;<span class="num" id="5678753">0</span>&nbsp;<span class="op" id="5678755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678760">t</span>&nbsp;<span class="op" id="5678762">:=</span>&nbsp;<span class="ident" id="5678765"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678766">.</span><span class="ident" id="5678767">Type</span><span class="op" id="5678771">(</span><span class="op" id="5678772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678777">if</span>&nbsp;<span class="ident" id="5678780"><a href="/encoding/xml/typeinfo.go.html#5678760">t</a></span><span class="op" id="5678781">.</span><span class="ident" id="5678782">Kind</span><span class="op" id="5678786">(</span><span class="op" id="5678787">)</span>&nbsp;<span class="op" id="5678789">==</span>&nbsp;<span class="ident" id="5678792"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678799">.</span><span class="ident" id="5678800">Ptr</span>&nbsp;<span class="op" id="5678804">&amp;&amp;</span>&nbsp;<span class="ident" id="5678807"><a href="/encoding/xml/typeinfo.go.html#5678760">t</a></span><span class="op" id="5678808">.</span><span class="ident" id="5678809">Elem</span><span class="op" id="5678813">(</span><span class="op" id="5678814">)</span><span class="op" id="5678815">.</span><span class="ident" id="5678816">Kind</span><span class="op" id="5678820">(</span><span class="op" id="5678821">)</span>&nbsp;<span class="op" id="5678823">==</span>&nbsp;<span class="ident" id="5678826"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678833">.</span><span class="ident" id="5678834">Struct</span>&nbsp;<span class="op" id="5678841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678847">if</span>&nbsp;<span class="ident" id="5678850"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678851">.</span><span class="ident" id="5678852">IsNil</span><span class="op" id="5678857">(</span><span class="op" id="5678858">)</span>&nbsp;<span class="op" id="5678860">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678867"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678868">.</span><span class="ident" id="5678869">Set</span><span class="op" id="5678872">(</span><span class="ident" id="5678873"><a href="/encoding/xml/typeinfo.go.html#5669684">reflect</a></span><span class="op" id="5678880">.</span><span class="ident" id="5678881">New</span><span class="op" id="5678884">(</span><span class="ident" id="5678885"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678886">.</span><span class="ident" id="5678887">Type</span><span class="op" id="5678891">(</span><span class="op" id="5678892">)</span><span class="op" id="5678893">.</span><span class="ident" id="5678894">Elem</span><span class="op" id="5678898">(</span><span class="op" id="5678899">)</span><span class="op" id="5678900">)</span><span class="op" id="5678901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5678907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678913"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span>&nbsp;<span class="op" id="5678915">=</span>&nbsp;<span class="ident" id="5678917"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678918">.</span><span class="ident" id="5678919">Elem</span><span class="op" id="5678923">(</span><span class="op" id="5678924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5678929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5678933">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5678937"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span>&nbsp;<span class="op" id="5678939">=</span>&nbsp;<span class="ident" id="5678941"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><span class="op" id="5678942">.</span><span class="ident" id="5678943">Field</span><span class="op" id="5678948">(</span><span class="ident" id="5678949"><a href="/encoding/xml/typeinfo.go.html#5678721">x</a></span><span class="op" id="5678950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5678953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5678956">return</span>&nbsp;<span class="ident" id="5678963"><a href="/encoding/xml/typeinfo.go.html#5678680">v</a></span><br>
<span class="lineno"></span><span class="op" id="5678965">}</span>
</div>
</body>
</html>
