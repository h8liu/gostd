<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/zip</h2>
<ul>
<li><a href="/gostd/archive/zip/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/zip/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/zip/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/zip/register.go.html">register.go</a></li>
<li><a href="/gostd/archive/zip/struct.go.html">struct.go</a></li>
<li><a href="/gostd/archive/zip/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/zip/writer_test.go.html">writer_test.go</a></li>
<li><a href="/gostd/archive/zip/zip_test.go.html">zip_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7687745">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7687800">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7687854">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7687905">package</span>&nbsp;<span class="ident" id="7687913">zip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7687918">import</span>&nbsp;<span class="op" id="7687925">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687928">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687937">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687956">&#34;encoding/hex&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687972">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687978">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687991">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7687997">&#34;path/filepath&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7688014">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7688024">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7688035">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7688046">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7688053">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7688056">type</span>&nbsp;<span class="ident" id="7688061">ZipTest</span>&nbsp;<span class="keyword" id="7688069">struct</span>&nbsp;<span class="op" id="7688076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688079">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7688087">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688095">Source</span>&nbsp;&nbsp;<span class="keyword" id="7688103">func</span><span class="op" id="7688107">(</span><span class="op" id="7688108">)</span>&nbsp;<span class="op" id="7688110">(</span><span class="ident" id="7688111">r</span>&nbsp;<span class="ident" id="7688113">io</span><span class="op" id="7688115">.</span><span class="ident" id="7688116">ReaderAt</span><span class="op" id="7688124">,</span>&nbsp;<span class="ident" id="7688126">size</span>&nbsp;<span class="ident" id="7688131">int64</span><span class="op" id="7688136">)</span>&nbsp;<span class="comment" id="7688138">//&nbsp;if&nbsp;non-nil,&nbsp;used&nbsp;instead&nbsp;of&nbsp;testdata/&lt;Name&gt;&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688191">Comment</span>&nbsp;<span class="builtintype" id="7688199">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688207">File</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7688215">[</span><span class="op" id="7688216">]</span><span class="ident" id="7688217">ZipTestFile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688230">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7688238">error</span>&nbsp;<span class="comment" id="7688244">//&nbsp;the&nbsp;error&nbsp;that&nbsp;Opening&nbsp;this&nbsp;file&nbsp;should&nbsp;return</span><br>
<span class="lineno"></span><span class="op" id="7688294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7688297">type</span>&nbsp;<span class="ident" id="7688302">ZipTestFile</span>&nbsp;<span class="keyword" id="7688314">struct</span>&nbsp;<span class="op" id="7688321">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688324">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7688335">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688343">Content</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7688354">[</span><span class="op" id="7688355">]</span><span class="builtintype" id="7688356">byte</span>&nbsp;<span class="comment" id="7688361">//&nbsp;if&nbsp;blank,&nbsp;will&nbsp;attempt&nbsp;to&nbsp;compare&nbsp;against&nbsp;File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688412">ContentErr</span>&nbsp;<span class="builtintype" id="7688423">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688430">File</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7688441">string</span>&nbsp;<span class="comment" id="7688448">//&nbsp;name&nbsp;of&nbsp;file&nbsp;to&nbsp;compare&nbsp;to&nbsp;(relative&nbsp;to&nbsp;testdata/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688503">Mtime</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7688514">string</span>&nbsp;<span class="comment" id="7688521">//&nbsp;modified&nbsp;time&nbsp;in&nbsp;format&nbsp;&#34;mm-dd-yy&nbsp;hh:mm:ss&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7688569">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7688580">os</span><span class="op" id="7688582">.</span><span class="ident" id="7688583">FileMode</span><br>
<span class="lineno"></span><span class="op" id="7688592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7688595">//&nbsp;Caution:&nbsp;The&nbsp;Mtime&nbsp;values&nbsp;found&nbsp;for&nbsp;the&nbsp;test&nbsp;files&nbsp;should&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="7688670">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;values&nbsp;listed&nbsp;with&nbsp;unzip&nbsp;-l&nbsp;&lt;zipfile&gt;.&nbsp;However,&nbsp;the&nbsp;values</span><br>
<span class="lineno">40</span><span class="comment" id="7688745">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listed&nbsp;by&nbsp;unzip&nbsp;appear&nbsp;to&nbsp;be&nbsp;off&nbsp;by&nbsp;some&nbsp;hours.&nbsp;When&nbsp;creating</span><br>
<span class="lineno"></span><span class="comment" id="7688819">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fresh&nbsp;test&nbsp;files&nbsp;and&nbsp;testing&nbsp;them,&nbsp;this&nbsp;issue&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="comment" id="7688893">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;test&nbsp;files&nbsp;were&nbsp;created&nbsp;in&nbsp;Sydney,&nbsp;so&nbsp;there&nbsp;might&nbsp;be&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="7688969">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zone&nbsp;issue.&nbsp;The&nbsp;time&nbsp;zone&nbsp;information&nbsp;does&nbsp;have&nbsp;to&nbsp;be&nbsp;encoded</span><br>
<span class="lineno"></span><span class="comment" id="7689043">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;somewhere,&nbsp;because&nbsp;otherwise&nbsp;unzip&nbsp;-l&nbsp;could&nbsp;not&nbsp;provide&nbsp;a&nbsp;different</span><br>
<span class="lineno">45</span><span class="comment" id="7689123">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;from&nbsp;what&nbsp;the&nbsp;archive/zip&nbsp;package&nbsp;provides,&nbsp;but&nbsp;there&nbsp;appears</span><br>
<span class="lineno"></span><span class="comment" id="7689202">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;no&nbsp;documentation&nbsp;about&nbsp;this.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7689250">var</span>&nbsp;<span class="ident" id="7689254">tests</span>&nbsp;<span class="op" id="7689260">=</span>&nbsp;<span class="op" id="7689262">[</span><span class="op" id="7689263">]</span><span class="ident" id="7689264">ZipTest</span><span class="op" id="7689271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689274">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689278">Name</span><span class="op" id="7689282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7689287">&#34;test.zip&#34;</span><span class="op" id="7689297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689301">Comment</span><span class="op" id="7689308">:</span>&nbsp;<span class="string" id="7689310">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7689338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689342">File</span><span class="op" id="7689346">:</span>&nbsp;<span class="op" id="7689348">[</span><span class="op" id="7689349">]</span><span class="ident" id="7689350">ZipTestFile</span><span class="op" id="7689361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689372">Name</span><span class="op" id="7689376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7689381">&#34;test.txt&#34;</span><span class="op" id="7689391">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689397">Content</span><span class="op" id="7689404">:</span>&nbsp;<span class="op" id="7689406">[</span><span class="op" id="7689407">]</span><span class="builtintype" id="7689408">byte</span><span class="op" id="7689412">(</span><span class="string" id="7689413">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7689442">)</span><span class="op" id="7689443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689449">Mtime</span><span class="op" id="7689454">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7689458">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7689477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689483">Mode</span><span class="op" id="7689487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7689492">0644</span><span class="op" id="7689496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689501">}</span><span class="op" id="7689502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689507">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689513">Name</span><span class="op" id="7689517">:</span>&nbsp;&nbsp;<span class="string" id="7689520">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7689542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689548">File</span><span class="op" id="7689552">:</span>&nbsp;&nbsp;<span class="string" id="7689555">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7689577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689583">Mtime</span><span class="op" id="7689588">:</span>&nbsp;<span class="string" id="7689590">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7689609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689615">Mode</span><span class="op" id="7689619">:</span>&nbsp;&nbsp;<span class="num" id="7689622">0644</span><span class="op" id="7689626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689631">}</span><span class="op" id="7689632">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689636">}</span><span class="op" id="7689637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689640">}</span><span class="op" id="7689641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689648">Name</span><span class="op" id="7689652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7689657">&#34;test-trailing-junk.zip&#34;</span><span class="op" id="7689681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689685">Comment</span><span class="op" id="7689692">:</span>&nbsp;<span class="string" id="7689694">&#34;This&nbsp;is&nbsp;a&nbsp;zipfile&nbsp;comment.&#34;</span><span class="op" id="7689722">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689726">File</span><span class="op" id="7689730">:</span>&nbsp;<span class="op" id="7689732">[</span><span class="op" id="7689733">]</span><span class="ident" id="7689734">ZipTestFile</span><span class="op" id="7689745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689756">Name</span><span class="op" id="7689760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7689765">&#34;test.txt&#34;</span><span class="op" id="7689775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689781">Content</span><span class="op" id="7689788">:</span>&nbsp;<span class="op" id="7689790">[</span><span class="op" id="7689791">]</span><span class="builtintype" id="7689792">byte</span><span class="op" id="7689796">(</span><span class="string" id="7689797">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;text&nbsp;file.\n&#34;</span><span class="op" id="7689826">)</span><span class="op" id="7689827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689833">Mtime</span><span class="op" id="7689838">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7689842">&#34;09-05-10&nbsp;12:12:02&#34;</span><span class="op" id="7689861">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689867">Mode</span><span class="op" id="7689871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7689876">0644</span><span class="op" id="7689880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689885">}</span><span class="op" id="7689886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7689891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689897">Name</span><span class="op" id="7689901">:</span>&nbsp;&nbsp;<span class="string" id="7689904">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7689926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689932">File</span><span class="op" id="7689936">:</span>&nbsp;&nbsp;<span class="string" id="7689939">&#34;gophercolor16x16.png&#34;</span><span class="op" id="7689961">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689967">Mtime</span><span class="op" id="7689972">:</span>&nbsp;<span class="string" id="7689974">&#34;09-05-10&nbsp;15:52:58&#34;</span><span class="op" id="7689993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7689999">Mode</span><span class="op" id="7690003">:</span>&nbsp;&nbsp;<span class="num" id="7690006">0644</span><span class="op" id="7690010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690015">}</span><span class="op" id="7690016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690020">}</span><span class="op" id="7690021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690024">}</span><span class="op" id="7690025">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690032">Name</span><span class="op" id="7690036">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7690040">&#34;r.zip&#34;</span><span class="op" id="7690047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690051">Source</span><span class="op" id="7690057">:</span>&nbsp;<span class="ident" id="7690059">returnRecursiveZip</span><span class="op" id="7690077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690081">File</span><span class="op" id="7690085">:</span>&nbsp;<span class="op" id="7690087">[</span><span class="op" id="7690088">]</span><span class="ident" id="7690089">ZipTestFile</span><span class="op" id="7690100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690105">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690111">Name</span><span class="op" id="7690115">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7690120">&#34;r/r.zip&#34;</span><span class="op" id="7690129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690135">Content</span><span class="op" id="7690142">:</span>&nbsp;<span class="ident" id="7690144">rZipBytes</span><span class="op" id="7690153">(</span><span class="op" id="7690154">)</span><span class="op" id="7690155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690161">Mtime</span><span class="op" id="7690166">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7690170">&#34;03-04-10&nbsp;00:24:16&#34;</span><span class="op" id="7690189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690195">Mode</span><span class="op" id="7690199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7690204">0666</span><span class="op" id="7690208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690213">}</span><span class="op" id="7690214">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690218">}</span><span class="op" id="7690219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690222">}</span><span class="op" id="7690223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690230">Name</span><span class="op" id="7690234">:</span>&nbsp;<span class="string" id="7690236">&#34;symlink.zip&#34;</span><span class="op" id="7690249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690253">File</span><span class="op" id="7690257">:</span>&nbsp;<span class="op" id="7690259">[</span><span class="op" id="7690260">]</span><span class="ident" id="7690261">ZipTestFile</span><span class="op" id="7690272">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690283">Name</span><span class="op" id="7690287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7690292">&#34;symlink&#34;</span><span class="op" id="7690301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690307">Content</span><span class="op" id="7690314">:</span>&nbsp;<span class="op" id="7690316">[</span><span class="op" id="7690317">]</span><span class="builtintype" id="7690318">byte</span><span class="op" id="7690322">(</span><span class="string" id="7690323">&#34;../target&#34;</span><span class="op" id="7690334">)</span><span class="op" id="7690335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690341">Mode</span><span class="op" id="7690345">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7690350">0777</span>&nbsp;<span class="op" id="7690355">|</span>&nbsp;<span class="ident" id="7690357">os</span><span class="op" id="7690359">.</span><span class="ident" id="7690360">ModeSymlink</span><span class="op" id="7690371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690376">}</span><span class="op" id="7690377">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690381">}</span><span class="op" id="7690382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690385">}</span><span class="op" id="7690386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690393">Name</span><span class="op" id="7690397">:</span>&nbsp;<span class="string" id="7690399">&#34;readme.zip&#34;</span><span class="op" id="7690411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690414">}</span><span class="op" id="7690415">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690422">Name</span><span class="op" id="7690426">:</span>&nbsp;&nbsp;<span class="string" id="7690429">&#34;readme.notzip&#34;</span><span class="op" id="7690444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690448">Error</span><span class="op" id="7690453">:</span>&nbsp;<span class="ident" id="7690455">ErrFormat</span><span class="op" id="7690464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690467">}</span><span class="op" id="7690468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690471">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690475">Name</span><span class="op" id="7690479">:</span>&nbsp;<span class="string" id="7690481">&#34;dd.zip&#34;</span><span class="op" id="7690489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690493">File</span><span class="op" id="7690497">:</span>&nbsp;<span class="op" id="7690499">[</span><span class="op" id="7690500">]</span><span class="ident" id="7690501">ZipTestFile</span><span class="op" id="7690512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690523">Name</span><span class="op" id="7690527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7690532">&#34;filename&#34;</span><span class="op" id="7690542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690548">Content</span><span class="op" id="7690555">:</span>&nbsp;<span class="op" id="7690557">[</span><span class="op" id="7690558">]</span><span class="builtintype" id="7690559">byte</span><span class="op" id="7690563">(</span><span class="string" id="7690564">&#34;This&nbsp;is&nbsp;a&nbsp;test&nbsp;textfile.\n&#34;</span><span class="op" id="7690592">)</span><span class="op" id="7690593">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690599">Mtime</span><span class="op" id="7690604">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7690608">&#34;02-02-11&nbsp;13:06:20&#34;</span><span class="op" id="7690627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690633">Mode</span><span class="op" id="7690637">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7690642">0666</span><span class="op" id="7690646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690651">}</span><span class="op" id="7690652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690656">}</span><span class="op" id="7690657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690660">}</span><span class="op" id="7690661">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7690668">//&nbsp;created&nbsp;in&nbsp;windows&nbsp;XP&nbsp;file&nbsp;manager.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690709">Name</span><span class="op" id="7690713">:</span>&nbsp;<span class="string" id="7690715">&#34;winxp.zip&#34;</span><span class="op" id="7690726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690730">File</span><span class="op" id="7690734">:</span>&nbsp;<span class="ident" id="7690736">crossPlatform</span><span class="op" id="7690749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690752">}</span><span class="op" id="7690753">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7690760">//&nbsp;created&nbsp;by&nbsp;Zip&nbsp;3.0&nbsp;under&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690796">Name</span><span class="op" id="7690800">:</span>&nbsp;<span class="string" id="7690802">&#34;unix.zip&#34;</span><span class="op" id="7690812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690816">File</span><span class="op" id="7690820">:</span>&nbsp;<span class="ident" id="7690822">crossPlatform</span><span class="op" id="7690835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690838">}</span><span class="op" id="7690839">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7690842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7690846">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;before&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7690902">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690958">Name</span><span class="op" id="7690962">:</span>&nbsp;<span class="string" id="7690964">&#34;go-no-datadesc-sig.zip&#34;</span><span class="op" id="7690988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7690992">File</span><span class="op" id="7690996">:</span>&nbsp;<span class="op" id="7690998">[</span><span class="op" id="7690999">]</span><span class="ident" id="7691000">ZipTestFile</span><span class="op" id="7691011">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691022">Name</span><span class="op" id="7691026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691031">&#34;foo.txt&#34;</span><span class="op" id="7691040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691046">Content</span><span class="op" id="7691053">:</span>&nbsp;<span class="op" id="7691055">[</span><span class="op" id="7691056">]</span><span class="builtintype" id="7691057">byte</span><span class="op" id="7691061">(</span><span class="string" id="7691062">&#34;foo\n&#34;</span><span class="op" id="7691069">)</span><span class="op" id="7691070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691076">Mtime</span><span class="op" id="7691081">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7691085">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7691104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691110">Mode</span><span class="op" id="7691114">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691119">0644</span><span class="op" id="7691123">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691128">}</span><span class="op" id="7691129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691140">Name</span><span class="op" id="7691144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691149">&#34;bar.txt&#34;</span><span class="op" id="7691158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691164">Content</span><span class="op" id="7691171">:</span>&nbsp;<span class="op" id="7691173">[</span><span class="op" id="7691174">]</span><span class="builtintype" id="7691175">byte</span><span class="op" id="7691179">(</span><span class="string" id="7691180">&#34;bar\n&#34;</span><span class="op" id="7691187">)</span><span class="op" id="7691188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691194">Mtime</span><span class="op" id="7691199">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7691203">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7691222">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691228">Mode</span><span class="op" id="7691232">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691237">0644</span><span class="op" id="7691241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691246">}</span><span class="op" id="7691247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691251">}</span><span class="op" id="7691252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691255">}</span><span class="op" id="7691256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691259">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7691263">//&nbsp;created&nbsp;by&nbsp;Go,&nbsp;after&nbsp;we&nbsp;wrote&nbsp;the&nbsp;&#34;optional&#34;&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7691318">//&nbsp;descriptor&nbsp;signatures&nbsp;(which&nbsp;are&nbsp;required&nbsp;by&nbsp;OS&nbsp;X)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691374">Name</span><span class="op" id="7691378">:</span>&nbsp;<span class="string" id="7691380">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7691406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691410">File</span><span class="op" id="7691414">:</span>&nbsp;<span class="op" id="7691416">[</span><span class="op" id="7691417">]</span><span class="ident" id="7691418">ZipTestFile</span><span class="op" id="7691429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691434">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691440">Name</span><span class="op" id="7691444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691449">&#34;foo.txt&#34;</span><span class="op" id="7691458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691464">Content</span><span class="op" id="7691471">:</span>&nbsp;<span class="op" id="7691473">[</span><span class="op" id="7691474">]</span><span class="builtintype" id="7691475">byte</span><span class="op" id="7691479">(</span><span class="string" id="7691480">&#34;foo\n&#34;</span><span class="op" id="7691487">)</span><span class="op" id="7691488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691494">Mode</span><span class="op" id="7691498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691503">0666</span><span class="op" id="7691507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691512">}</span><span class="op" id="7691513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691518">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691524">Name</span><span class="op" id="7691528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691533">&#34;bar.txt&#34;</span><span class="op" id="7691542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691548">Content</span><span class="op" id="7691555">:</span>&nbsp;<span class="op" id="7691557">[</span><span class="op" id="7691558">]</span><span class="builtintype" id="7691559">byte</span><span class="op" id="7691563">(</span><span class="string" id="7691564">&#34;bar\n&#34;</span><span class="op" id="7691571">)</span><span class="op" id="7691572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691578">Mode</span><span class="op" id="7691582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691587">0666</span><span class="op" id="7691591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691596">}</span><span class="op" id="7691597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691601">}</span><span class="op" id="7691602">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691605">}</span><span class="op" id="7691606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691613">Name</span><span class="op" id="7691617">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7691621">&#34;Bad-CRC32-in-data-descriptor&#34;</span><span class="op" id="7691651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691655">Source</span><span class="op" id="7691661">:</span>&nbsp;<span class="ident" id="7691663">returnCorruptCRC32Zip</span><span class="op" id="7691684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691688">File</span><span class="op" id="7691692">:</span>&nbsp;<span class="op" id="7691694">[</span><span class="op" id="7691695">]</span><span class="ident" id="7691696">ZipTestFile</span><span class="op" id="7691707">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691718">Name</span><span class="op" id="7691722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691730">&#34;foo.txt&#34;</span><span class="op" id="7691739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691745">Content</span><span class="op" id="7691752">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7691757">[</span><span class="op" id="7691758">]</span><span class="builtintype" id="7691759">byte</span><span class="op" id="7691763">(</span><span class="string" id="7691764">&#34;foo\n&#34;</span><span class="op" id="7691771">)</span><span class="op" id="7691772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691778">Mode</span><span class="op" id="7691782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691790">0666</span><span class="op" id="7691794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691800">ContentErr</span><span class="op" id="7691810">:</span>&nbsp;<span class="ident" id="7691812">ErrChecksum</span><span class="op" id="7691823">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691828">}</span><span class="op" id="7691829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691840">Name</span><span class="op" id="7691844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7691849">&#34;bar.txt&#34;</span><span class="op" id="7691858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691864">Content</span><span class="op" id="7691871">:</span>&nbsp;<span class="op" id="7691873">[</span><span class="op" id="7691874">]</span><span class="builtintype" id="7691875">byte</span><span class="op" id="7691879">(</span><span class="string" id="7691880">&#34;bar\n&#34;</span><span class="op" id="7691887">)</span><span class="op" id="7691888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7691894">Mode</span><span class="op" id="7691898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7691903">0666</span><span class="op" id="7691907">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691912">}</span><span class="op" id="7691913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691917">}</span><span class="op" id="7691918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7691921">}</span><span class="op" id="7691922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7691925">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;accept&nbsp;valid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7691985">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692052">Name</span><span class="op" id="7692056">:</span>&nbsp;<span class="string" id="7692058">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7692082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692086">File</span><span class="op" id="7692090">:</span>&nbsp;<span class="op" id="7692092">[</span><span class="op" id="7692093">]</span><span class="ident" id="7692094">ZipTestFile</span><span class="op" id="7692105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692116">Name</span><span class="op" id="7692120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692125">&#34;foo.txt&#34;</span><span class="op" id="7692134">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692140">Content</span><span class="op" id="7692147">:</span>&nbsp;<span class="op" id="7692149">[</span><span class="op" id="7692150">]</span><span class="builtintype" id="7692151">byte</span><span class="op" id="7692155">(</span><span class="string" id="7692156">&#34;foo\n&#34;</span><span class="op" id="7692163">)</span><span class="op" id="7692164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692170">Mtime</span><span class="op" id="7692175">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7692179">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7692198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692204">Mode</span><span class="op" id="7692208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7692213">0644</span><span class="op" id="7692217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692222">}</span><span class="op" id="7692223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692228">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692234">Name</span><span class="op" id="7692238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692243">&#34;bar.txt&#34;</span><span class="op" id="7692252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692258">Content</span><span class="op" id="7692265">:</span>&nbsp;<span class="op" id="7692267">[</span><span class="op" id="7692268">]</span><span class="builtintype" id="7692269">byte</span><span class="op" id="7692273">(</span><span class="string" id="7692274">&#34;bar\n&#34;</span><span class="op" id="7692281">)</span><span class="op" id="7692282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692288">Mtime</span><span class="op" id="7692293">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7692297">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7692316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692322">Mode</span><span class="op" id="7692326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7692331">0644</span><span class="op" id="7692335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692340">}</span><span class="op" id="7692341">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692345">}</span><span class="op" id="7692346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692349">}</span><span class="op" id="7692350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7692353">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;verify&nbsp;(and&nbsp;reject&nbsp;invalid)&nbsp;crc32s&nbsp;on&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7692415">//&nbsp;with&nbsp;crc32s&nbsp;in&nbsp;their&nbsp;file&nbsp;header&nbsp;(not&nbsp;in&nbsp;data&nbsp;descriptors)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692478">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692482">Name</span><span class="op" id="7692486">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7692490">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7692514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692518">Source</span><span class="op" id="7692524">:</span>&nbsp;<span class="ident" id="7692526">returnCorruptNotStreamedZip</span><span class="op" id="7692553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692557">File</span><span class="op" id="7692561">:</span>&nbsp;<span class="op" id="7692563">[</span><span class="op" id="7692564">]</span><span class="ident" id="7692565">ZipTestFile</span><span class="op" id="7692576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692587">Name</span><span class="op" id="7692591">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692599">&#34;foo.txt&#34;</span><span class="op" id="7692608">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692614">Content</span><span class="op" id="7692621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7692626">[</span><span class="op" id="7692627">]</span><span class="builtintype" id="7692628">byte</span><span class="op" id="7692632">(</span><span class="string" id="7692633">&#34;foo\n&#34;</span><span class="op" id="7692640">)</span><span class="op" id="7692641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692647">Mtime</span><span class="op" id="7692652">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692659">&#34;03-08-12&nbsp;16:59:10&#34;</span><span class="op" id="7692678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692684">Mode</span><span class="op" id="7692688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7692696">0644</span><span class="op" id="7692700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692706">ContentErr</span><span class="op" id="7692716">:</span>&nbsp;<span class="ident" id="7692718">ErrChecksum</span><span class="op" id="7692729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692734">}</span><span class="op" id="7692735">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692746">Name</span><span class="op" id="7692750">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692755">&#34;bar.txt&#34;</span><span class="op" id="7692764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692770">Content</span><span class="op" id="7692777">:</span>&nbsp;<span class="op" id="7692779">[</span><span class="op" id="7692780">]</span><span class="builtintype" id="7692781">byte</span><span class="op" id="7692785">(</span><span class="string" id="7692786">&#34;bar\n&#34;</span><span class="op" id="7692793">)</span><span class="op" id="7692794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692800">Mtime</span><span class="op" id="7692805">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7692809">&#34;03-08-12&nbsp;16:59:12&#34;</span><span class="op" id="7692828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692834">Mode</span><span class="op" id="7692838">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7692843">0644</span><span class="op" id="7692847">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692852">}</span><span class="op" id="7692853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692857">}</span><span class="op" id="7692858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692861">}</span><span class="op" id="7692862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692869">Name</span><span class="op" id="7692873">:</span>&nbsp;<span class="string" id="7692875">&#34;zip64.zip&#34;</span><span class="op" id="7692886">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692890">File</span><span class="op" id="7692894">:</span>&nbsp;<span class="op" id="7692896">[</span><span class="op" id="7692897">]</span><span class="ident" id="7692898">ZipTestFile</span><span class="op" id="7692909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7692914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692920">Name</span><span class="op" id="7692924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7692929">&#34;README&#34;</span><span class="op" id="7692937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7692943">Content</span><span class="op" id="7692950">:</span>&nbsp;<span class="op" id="7692952">[</span><span class="op" id="7692953">]</span><span class="builtintype" id="7692954">byte</span><span class="op" id="7692958">(</span><span class="string" id="7692959">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7692998">)</span><span class="op" id="7692999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693005">Mtime</span><span class="op" id="7693010">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7693014">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7693033">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693039">Mode</span><span class="op" id="7693043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7693048">0644</span><span class="op" id="7693052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693057">}</span><span class="op" id="7693058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693062">}</span><span class="op" id="7693063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693066">}</span><span class="op" id="7693067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7693070">//&nbsp;Another&nbsp;zip64&nbsp;file&nbsp;with&nbsp;different&nbsp;Extras&nbsp;fields.&nbsp;(golang.org/issue/7069)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693151">Name</span><span class="op" id="7693155">:</span>&nbsp;<span class="string" id="7693157">&#34;zip64-2.zip&#34;</span><span class="op" id="7693170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693174">File</span><span class="op" id="7693178">:</span>&nbsp;<span class="op" id="7693180">[</span><span class="op" id="7693181">]</span><span class="ident" id="7693182">ZipTestFile</span><span class="op" id="7693193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693204">Name</span><span class="op" id="7693208">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7693213">&#34;README&#34;</span><span class="op" id="7693221">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693227">Content</span><span class="op" id="7693234">:</span>&nbsp;<span class="op" id="7693236">[</span><span class="op" id="7693237">]</span><span class="builtintype" id="7693238">byte</span><span class="op" id="7693242">(</span><span class="string" id="7693243">&#34;This&nbsp;small&nbsp;file&nbsp;is&nbsp;in&nbsp;ZIP64&nbsp;format.\n&#34;</span><span class="op" id="7693282">)</span><span class="op" id="7693283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693289">Mtime</span><span class="op" id="7693294">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7693298">&#34;08-10-12&nbsp;14:33:32&#34;</span><span class="op" id="7693317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693323">Mode</span><span class="op" id="7693327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7693332">0644</span><span class="op" id="7693336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693341">}</span><span class="op" id="7693342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693346">}</span><span class="op" id="7693347">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693350">}</span><span class="op" id="7693351">,</span><br>
<span class="lineno"></span><span class="op" id="7693353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7693356">var</span>&nbsp;<span class="ident" id="7693360">crossPlatform</span>&nbsp;<span class="op" id="7693374">=</span>&nbsp;<span class="op" id="7693376">[</span><span class="op" id="7693377">]</span><span class="ident" id="7693378">ZipTestFile</span><span class="op" id="7693389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693392">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693396">Name</span><span class="op" id="7693400">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7693405">&#34;hello&#34;</span><span class="op" id="7693412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693416">Content</span><span class="op" id="7693423">:</span>&nbsp;<span class="op" id="7693425">[</span><span class="op" id="7693426">]</span><span class="builtintype" id="7693427">byte</span><span class="op" id="7693431">(</span><span class="string" id="7693432">&#34;world&nbsp;\r\n&#34;</span><span class="op" id="7693444">)</span><span class="op" id="7693445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693449">Mode</span><span class="op" id="7693453">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7693458">0666</span><span class="op" id="7693462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693465">}</span><span class="op" id="7693466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693469">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693473">Name</span><span class="op" id="7693477">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7693482">&#34;dir/bar&#34;</span><span class="op" id="7693491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693495">Content</span><span class="op" id="7693502">:</span>&nbsp;<span class="op" id="7693504">[</span><span class="op" id="7693505">]</span><span class="builtintype" id="7693506">byte</span><span class="op" id="7693510">(</span><span class="string" id="7693511">&#34;foo&nbsp;\r\n&#34;</span><span class="op" id="7693521">)</span><span class="op" id="7693522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693526">Mode</span><span class="op" id="7693530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7693535">0666</span><span class="op" id="7693539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693542">}</span><span class="op" id="7693543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693546">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693550">Name</span><span class="op" id="7693554">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7693559">&#34;dir/empty/&#34;</span><span class="op" id="7693571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693575">Content</span><span class="op" id="7693582">:</span>&nbsp;<span class="op" id="7693584">[</span><span class="op" id="7693585">]</span><span class="builtintype" id="7693586">byte</span><span class="op" id="7693590">{</span><span class="op" id="7693591">}</span><span class="op" id="7693592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693596">Mode</span><span class="op" id="7693600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7693605">os</span><span class="op" id="7693607">.</span><span class="ident" id="7693608">ModeDir</span>&nbsp;<span class="op" id="7693616">|</span>&nbsp;<span class="num" id="7693618">0777</span><span class="op" id="7693622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693625">}</span><span class="op" id="7693626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693629">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693633">Name</span><span class="op" id="7693637">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7693642">&#34;readonly&#34;</span><span class="op" id="7693652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693656">Content</span><span class="op" id="7693663">:</span>&nbsp;<span class="op" id="7693665">[</span><span class="op" id="7693666">]</span><span class="builtintype" id="7693667">byte</span><span class="op" id="7693671">(</span><span class="string" id="7693672">&#34;important&nbsp;\r\n&#34;</span><span class="op" id="7693688">)</span><span class="op" id="7693689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693693">Mode</span><span class="op" id="7693697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7693702">0444</span><span class="op" id="7693706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693709">}</span><span class="op" id="7693710">,</span><br>
<span class="lineno"></span><span class="op" id="7693712">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="keyword" id="7693715">func</span>&nbsp;<span class="ident" id="7693720">TestReader</span><span class="op" id="7693730">(</span><span class="ident" id="7693731">t</span>&nbsp;<span class="op" id="7693733">*</span><span class="ident" id="7693734">testing</span><span class="op" id="7693741">.</span><span class="ident" id="7693742">T</span><span class="op" id="7693743">)</span>&nbsp;<span class="op" id="7693745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7693748">for</span>&nbsp;<span class="ident" id="7693752">_</span><span class="op" id="7693753">,</span>&nbsp;<span class="ident" id="7693755">zt</span>&nbsp;<span class="op" id="7693758">:=</span>&nbsp;<span class="keyword" id="7693761">range</span>&nbsp;<span class="ident" id="7693767">tests</span>&nbsp;<span class="op" id="7693773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693777">readTestZip</span><span class="op" id="7693788">(</span><span class="ident" id="7693789">t</span><span class="op" id="7693790">,</span>&nbsp;<span class="ident" id="7693792">zt</span><span class="op" id="7693794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693797">}</span><br>
<span class="lineno">280</span><span class="op" id="7693799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7693802">func</span>&nbsp;<span class="ident" id="7693807">readTestZip</span><span class="op" id="7693818">(</span><span class="ident" id="7693819">t</span>&nbsp;<span class="op" id="7693821">*</span><span class="ident" id="7693822">testing</span><span class="op" id="7693829">.</span><span class="ident" id="7693830">T</span><span class="op" id="7693831">,</span>&nbsp;<span class="ident" id="7693833">zt</span>&nbsp;<span class="ident" id="7693836">ZipTest</span><span class="op" id="7693843">)</span>&nbsp;<span class="op" id="7693845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7693848">var</span>&nbsp;<span class="ident" id="7693852">z</span>&nbsp;<span class="op" id="7693854">*</span><span class="ident" id="7693855">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7693863">var</span>&nbsp;<span class="ident" id="7693867">err</span>&nbsp;<span class="builtintype" id="7693871">error</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7693878">if</span>&nbsp;<span class="ident" id="7693881">zt</span><span class="op" id="7693883">.</span><span class="ident" id="7693884">Source</span>&nbsp;<span class="op" id="7693891">!=</span>&nbsp;<span class="ident" id="7693894">nil</span>&nbsp;<span class="op" id="7693898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693902">rat</span><span class="op" id="7693905">,</span>&nbsp;<span class="ident" id="7693907">size</span>&nbsp;<span class="op" id="7693912">:=</span>&nbsp;<span class="ident" id="7693915">zt</span><span class="op" id="7693917">.</span><span class="ident" id="7693918">Source</span><span class="op" id="7693924">(</span><span class="op" id="7693925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693929">z</span><span class="op" id="7693930">,</span>&nbsp;<span class="ident" id="7693932">err</span>&nbsp;<span class="op" id="7693936">=</span>&nbsp;<span class="ident" id="7693938">NewReader</span><span class="op" id="7693947">(</span><span class="ident" id="7693948">rat</span><span class="op" id="7693951">,</span>&nbsp;<span class="ident" id="7693953">size</span><span class="op" id="7693957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7693960">}</span>&nbsp;<span class="keyword" id="7693962">else</span>&nbsp;<span class="op" id="7693967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7693971">var</span>&nbsp;<span class="ident" id="7693975">rc</span>&nbsp;<span class="op" id="7693978">*</span><span class="ident" id="7693979">ReadCloser</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7693992">rc</span><span class="op" id="7693994">,</span>&nbsp;<span class="ident" id="7693996">err</span>&nbsp;<span class="op" id="7694000">=</span>&nbsp;<span class="ident" id="7694002">OpenReader</span><span class="op" id="7694012">(</span><span class="ident" id="7694013">filepath</span><span class="op" id="7694021">.</span><span class="ident" id="7694022">Join</span><span class="op" id="7694026">(</span><span class="string" id="7694027">&#34;testdata&#34;</span><span class="op" id="7694037">,</span>&nbsp;<span class="ident" id="7694039">zt</span><span class="op" id="7694041">.</span><span class="ident" id="7694042">Name</span><span class="op" id="7694046">)</span><span class="op" id="7694047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694051">if</span>&nbsp;<span class="ident" id="7694054">err</span>&nbsp;<span class="op" id="7694058">==</span>&nbsp;<span class="ident" id="7694061">nil</span>&nbsp;<span class="op" id="7694065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694070">defer</span>&nbsp;<span class="ident" id="7694076">rc</span><span class="op" id="7694078">.</span><span class="ident" id="7694079">Close</span><span class="op" id="7694084">(</span><span class="op" id="7694085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694090">z</span>&nbsp;<span class="op" id="7694092">=</span>&nbsp;<span class="op" id="7694094">&amp;</span><span class="ident" id="7694095">rc</span><span class="op" id="7694097">.</span><span class="ident" id="7694098">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694107">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694113">if</span>&nbsp;<span class="ident" id="7694116">err</span>&nbsp;<span class="op" id="7694120">!=</span>&nbsp;<span class="ident" id="7694123">zt</span><span class="op" id="7694125">.</span><span class="ident" id="7694126">Error</span>&nbsp;<span class="op" id="7694132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694136">t</span><span class="op" id="7694137">.</span><span class="ident" id="7694138">Errorf</span><span class="op" id="7694144">(</span><span class="string" id="7694145">&#34;%s:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7694168">,</span>&nbsp;<span class="ident" id="7694170">zt</span><span class="op" id="7694172">.</span><span class="ident" id="7694173">Name</span><span class="op" id="7694177">,</span>&nbsp;<span class="ident" id="7694179">err</span><span class="op" id="7694182">,</span>&nbsp;<span class="ident" id="7694184">zt</span><span class="op" id="7694186">.</span><span class="ident" id="7694187">Error</span><span class="op" id="7694192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694196">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694204">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7694208">//&nbsp;bail&nbsp;if&nbsp;file&nbsp;is&nbsp;not&nbsp;zip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694236">if</span>&nbsp;<span class="ident" id="7694239">err</span>&nbsp;<span class="op" id="7694243">==</span>&nbsp;<span class="ident" id="7694246">ErrFormat</span>&nbsp;<span class="op" id="7694256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694260">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694268">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7694272">//&nbsp;bail&nbsp;here&nbsp;if&nbsp;no&nbsp;Files&nbsp;expected&nbsp;to&nbsp;be&nbsp;tested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7694320">//&nbsp;(there&nbsp;may&nbsp;actually&nbsp;be&nbsp;files&nbsp;in&nbsp;the&nbsp;zip,&nbsp;but&nbsp;we&nbsp;don&#39;t&nbsp;care)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694384">if</span>&nbsp;<span class="ident" id="7694387">zt</span><span class="op" id="7694389">.</span><span class="ident" id="7694390">File</span>&nbsp;<span class="op" id="7694395">==</span>&nbsp;<span class="ident" id="7694398">nil</span>&nbsp;<span class="op" id="7694402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694406">return</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694418">if</span>&nbsp;<span class="ident" id="7694421">z</span><span class="op" id="7694422">.</span><span class="ident" id="7694423">Comment</span>&nbsp;<span class="op" id="7694431">!=</span>&nbsp;<span class="ident" id="7694434">zt</span><span class="op" id="7694436">.</span><span class="ident" id="7694437">Comment</span>&nbsp;<span class="op" id="7694445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694449">t</span><span class="op" id="7694450">.</span><span class="ident" id="7694451">Errorf</span><span class="op" id="7694457">(</span><span class="string" id="7694458">&#34;%s:&nbsp;comment=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7694483">,</span>&nbsp;<span class="ident" id="7694485">zt</span><span class="op" id="7694487">.</span><span class="ident" id="7694488">Name</span><span class="op" id="7694492">,</span>&nbsp;<span class="ident" id="7694494">z</span><span class="op" id="7694495">.</span><span class="ident" id="7694496">Comment</span><span class="op" id="7694503">,</span>&nbsp;<span class="ident" id="7694505">zt</span><span class="op" id="7694507">.</span><span class="ident" id="7694508">Comment</span><span class="op" id="7694515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694518">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694521">if</span>&nbsp;<span class="builtinfunc" id="7694524">len</span><span class="op" id="7694527">(</span><span class="ident" id="7694528">z</span><span class="op" id="7694529">.</span><span class="ident" id="7694530">File</span><span class="op" id="7694534">)</span>&nbsp;<span class="op" id="7694536">!=</span>&nbsp;<span class="builtinfunc" id="7694539">len</span><span class="op" id="7694542">(</span><span class="ident" id="7694543">zt</span><span class="op" id="7694545">.</span><span class="ident" id="7694546">File</span><span class="op" id="7694550">)</span>&nbsp;<span class="op" id="7694552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694556">t</span><span class="op" id="7694557">.</span><span class="ident" id="7694558">Fatalf</span><span class="op" id="7694564">(</span><span class="string" id="7694565">&#34;%s:&nbsp;file&nbsp;count=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7694593">,</span>&nbsp;<span class="ident" id="7694595">zt</span><span class="op" id="7694597">.</span><span class="ident" id="7694598">Name</span><span class="op" id="7694602">,</span>&nbsp;<span class="builtinfunc" id="7694604">len</span><span class="op" id="7694607">(</span><span class="ident" id="7694608">z</span><span class="op" id="7694609">.</span><span class="ident" id="7694610">File</span><span class="op" id="7694614">)</span><span class="op" id="7694615">,</span>&nbsp;<span class="builtinfunc" id="7694617">len</span><span class="op" id="7694620">(</span><span class="ident" id="7694621">zt</span><span class="op" id="7694623">.</span><span class="ident" id="7694624">File</span><span class="op" id="7694628">)</span><span class="op" id="7694629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7694636">//&nbsp;test&nbsp;read&nbsp;of&nbsp;each&nbsp;file</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694663">for</span>&nbsp;<span class="ident" id="7694667">i</span><span class="op" id="7694668">,</span>&nbsp;<span class="ident" id="7694670">ft</span>&nbsp;<span class="op" id="7694673">:=</span>&nbsp;<span class="keyword" id="7694676">range</span>&nbsp;<span class="ident" id="7694682">zt</span><span class="op" id="7694684">.</span><span class="ident" id="7694685">File</span>&nbsp;<span class="op" id="7694690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694694">readTestFile</span><span class="op" id="7694706">(</span><span class="ident" id="7694707">t</span><span class="op" id="7694708">,</span>&nbsp;<span class="ident" id="7694710">zt</span><span class="op" id="7694712">,</span>&nbsp;<span class="ident" id="7694714">ft</span><span class="op" id="7694716">,</span>&nbsp;<span class="ident" id="7694718">z</span><span class="op" id="7694719">.</span><span class="ident" id="7694720">File</span><span class="op" id="7694724">[</span><span class="ident" id="7694725">i</span><span class="op" id="7694726">]</span><span class="op" id="7694727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7694734">//&nbsp;test&nbsp;simultaneous&nbsp;reads</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694762">n</span>&nbsp;<span class="op" id="7694764">:=</span>&nbsp;<span class="num" id="7694767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694770">done</span>&nbsp;<span class="op" id="7694775">:=</span>&nbsp;<span class="builtinfunc" id="7694778">make</span><span class="op" id="7694782">(</span><span class="keyword" id="7694783">chan</span>&nbsp;<span class="builtintype" id="7694788">bool</span><span class="op" id="7694792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694795">for</span>&nbsp;<span class="ident" id="7694799">i</span>&nbsp;<span class="op" id="7694801">:=</span>&nbsp;<span class="num" id="7694804">0</span><span class="op" id="7694805">;</span>&nbsp;<span class="ident" id="7694807">i</span>&nbsp;<span class="op" id="7694809">&lt;</span>&nbsp;<span class="num" id="7694811">5</span><span class="op" id="7694812">;</span>&nbsp;<span class="ident" id="7694814">i</span><span class="op" id="7694815">++</span>&nbsp;<span class="op" id="7694818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694822">for</span>&nbsp;<span class="ident" id="7694826">j</span><span class="op" id="7694827">,</span>&nbsp;<span class="ident" id="7694829">ft</span>&nbsp;<span class="op" id="7694832">:=</span>&nbsp;<span class="keyword" id="7694835">range</span>&nbsp;<span class="ident" id="7694841">zt</span><span class="op" id="7694843">.</span><span class="ident" id="7694844">File</span>&nbsp;<span class="op" id="7694849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694854">go</span>&nbsp;<span class="keyword" id="7694857">func</span><span class="op" id="7694861">(</span><span class="ident" id="7694862">j</span>&nbsp;<span class="builtintype" id="7694864">int</span><span class="op" id="7694867">,</span>&nbsp;<span class="ident" id="7694869">ft</span>&nbsp;<span class="ident" id="7694872">ZipTestFile</span><span class="op" id="7694883">)</span>&nbsp;<span class="op" id="7694885">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694891">readTestFile</span><span class="op" id="7694903">(</span><span class="ident" id="7694904">t</span><span class="op" id="7694905">,</span>&nbsp;<span class="ident" id="7694907">zt</span><span class="op" id="7694909">,</span>&nbsp;<span class="ident" id="7694911">ft</span><span class="op" id="7694913">,</span>&nbsp;<span class="ident" id="7694915">z</span><span class="op" id="7694916">.</span><span class="ident" id="7694917">File</span><span class="op" id="7694921">[</span><span class="ident" id="7694922">j</span><span class="op" id="7694923">]</span><span class="op" id="7694924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694930">done</span>&nbsp;<span class="op" id="7694935">&lt;-</span>&nbsp;<span class="builtintype" id="7694938">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694946">}</span><span class="op" id="7694947">(</span><span class="ident" id="7694948">j</span><span class="op" id="7694949">,</span>&nbsp;<span class="ident" id="7694951">ft</span><span class="op" id="7694953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7694958">n</span><span class="op" id="7694959">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694964">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7694970">for</span>&nbsp;<span class="op" id="7694974">;</span>&nbsp;<span class="ident" id="7694976">n</span>&nbsp;<span class="op" id="7694978">&gt;</span>&nbsp;<span class="num" id="7694980">0</span><span class="op" id="7694981">;</span>&nbsp;<span class="ident" id="7694983">n</span><span class="op" id="7694984">--</span>&nbsp;<span class="op" id="7694987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694991">&lt;-</span><span class="ident" id="7694993">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7694999">}</span><br>
<span class="lineno"></span><span class="op" id="7695001">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="7695004">func</span>&nbsp;<span class="ident" id="7695009">readTestFile</span><span class="op" id="7695021">(</span><span class="ident" id="7695022">t</span>&nbsp;<span class="op" id="7695024">*</span><span class="ident" id="7695025">testing</span><span class="op" id="7695032">.</span><span class="ident" id="7695033">T</span><span class="op" id="7695034">,</span>&nbsp;<span class="ident" id="7695036">zt</span>&nbsp;<span class="ident" id="7695039">ZipTest</span><span class="op" id="7695046">,</span>&nbsp;<span class="ident" id="7695048">ft</span>&nbsp;<span class="ident" id="7695051">ZipTestFile</span><span class="op" id="7695062">,</span>&nbsp;<span class="ident" id="7695064">f</span>&nbsp;<span class="op" id="7695066">*</span><span class="ident" id="7695067">File</span><span class="op" id="7695071">)</span>&nbsp;<span class="op" id="7695073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695076">if</span>&nbsp;<span class="ident" id="7695079">f</span><span class="op" id="7695080">.</span><span class="ident" id="7695081">Name</span>&nbsp;<span class="op" id="7695086">!=</span>&nbsp;<span class="ident" id="7695089">ft</span><span class="op" id="7695091">.</span><span class="ident" id="7695092">Name</span>&nbsp;<span class="op" id="7695097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695101">t</span><span class="op" id="7695102">.</span><span class="ident" id="7695103">Errorf</span><span class="op" id="7695109">(</span><span class="string" id="7695110">&#34;%s:&nbsp;name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7695132">,</span>&nbsp;<span class="ident" id="7695134">zt</span><span class="op" id="7695136">.</span><span class="ident" id="7695137">Name</span><span class="op" id="7695141">,</span>&nbsp;<span class="ident" id="7695143">f</span><span class="op" id="7695144">.</span><span class="ident" id="7695145">Name</span><span class="op" id="7695149">,</span>&nbsp;<span class="ident" id="7695151">ft</span><span class="op" id="7695153">.</span><span class="ident" id="7695154">Name</span><span class="op" id="7695158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695161">}</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695165">if</span>&nbsp;<span class="ident" id="7695168">ft</span><span class="op" id="7695170">.</span><span class="ident" id="7695171">Mtime</span>&nbsp;<span class="op" id="7695177">!=</span>&nbsp;<span class="string" id="7695180">&#34;&#34;</span>&nbsp;<span class="op" id="7695183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695187">mtime</span><span class="op" id="7695192">,</span>&nbsp;<span class="ident" id="7695194">err</span>&nbsp;<span class="op" id="7695198">:=</span>&nbsp;<span class="ident" id="7695201">time</span><span class="op" id="7695205">.</span><span class="ident" id="7695206">Parse</span><span class="op" id="7695211">(</span><span class="string" id="7695212">&#34;01-02-06&nbsp;15:04:05&#34;</span><span class="op" id="7695231">,</span>&nbsp;<span class="ident" id="7695233">ft</span><span class="op" id="7695235">.</span><span class="ident" id="7695236">Mtime</span><span class="op" id="7695241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695245">if</span>&nbsp;<span class="ident" id="7695248">err</span>&nbsp;<span class="op" id="7695252">!=</span>&nbsp;<span class="ident" id="7695255">nil</span>&nbsp;<span class="op" id="7695259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695264">t</span><span class="op" id="7695265">.</span><span class="ident" id="7695266">Error</span><span class="op" id="7695271">(</span><span class="ident" id="7695272">err</span><span class="op" id="7695275">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695280">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695293">if</span>&nbsp;<span class="ident" id="7695296">ft</span>&nbsp;<span class="op" id="7695299">:=</span>&nbsp;<span class="ident" id="7695302">f</span><span class="op" id="7695303">.</span><span class="ident" id="7695304">ModTime</span><span class="op" id="7695311">(</span><span class="op" id="7695312">)</span><span class="op" id="7695313">;</span>&nbsp;<span class="op" id="7695315">!</span><span class="ident" id="7695316">ft</span><span class="op" id="7695318">.</span><span class="ident" id="7695319">Equal</span><span class="op" id="7695324">(</span><span class="ident" id="7695325">mtime</span><span class="op" id="7695330">)</span>&nbsp;<span class="op" id="7695332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695337">t</span><span class="op" id="7695338">.</span><span class="ident" id="7695339">Errorf</span><span class="op" id="7695345">(</span><span class="string" id="7695346">&#34;%s:&nbsp;%s:&nbsp;mtime=%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7695373">,</span>&nbsp;<span class="ident" id="7695375">zt</span><span class="op" id="7695377">.</span><span class="ident" id="7695378">Name</span><span class="op" id="7695382">,</span>&nbsp;<span class="ident" id="7695384">f</span><span class="op" id="7695385">.</span><span class="ident" id="7695386">Name</span><span class="op" id="7695390">,</span>&nbsp;<span class="ident" id="7695392">ft</span><span class="op" id="7695394">,</span>&nbsp;<span class="ident" id="7695396">mtime</span><span class="op" id="7695401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695405">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695412">testFileMode</span><span class="op" id="7695424">(</span><span class="ident" id="7695425">t</span><span class="op" id="7695426">,</span>&nbsp;<span class="ident" id="7695428">zt</span><span class="op" id="7695430">.</span><span class="ident" id="7695431">Name</span><span class="op" id="7695435">,</span>&nbsp;<span class="ident" id="7695437">f</span><span class="op" id="7695438">,</span>&nbsp;<span class="ident" id="7695440">ft</span><span class="op" id="7695442">.</span><span class="ident" id="7695443">Mode</span><span class="op" id="7695447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695451">var</span>&nbsp;<span class="ident" id="7695455">b</span>&nbsp;<span class="ident" id="7695457">bytes</span><span class="op" id="7695462">.</span><span class="ident" id="7695463">Buffer</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695471">r</span><span class="op" id="7695472">,</span>&nbsp;<span class="ident" id="7695474">err</span>&nbsp;<span class="op" id="7695478">:=</span>&nbsp;<span class="ident" id="7695481">f</span><span class="op" id="7695482">.</span><span class="ident" id="7695483">Open</span><span class="op" id="7695487">(</span><span class="op" id="7695488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695491">if</span>&nbsp;<span class="ident" id="7695494">err</span>&nbsp;<span class="op" id="7695498">!=</span>&nbsp;<span class="ident" id="7695501">nil</span>&nbsp;<span class="op" id="7695505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695509">t</span><span class="op" id="7695510">.</span><span class="ident" id="7695511">Errorf</span><span class="op" id="7695517">(</span><span class="string" id="7695518">&#34;%s:&nbsp;%v&#34;</span><span class="op" id="7695526">,</span>&nbsp;<span class="ident" id="7695528">zt</span><span class="op" id="7695530">.</span><span class="ident" id="7695531">Name</span><span class="op" id="7695535">,</span>&nbsp;<span class="ident" id="7695537">err</span><span class="op" id="7695540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695552">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695556">_</span><span class="op" id="7695557">,</span>&nbsp;<span class="ident" id="7695559">err</span>&nbsp;<span class="op" id="7695563">=</span>&nbsp;<span class="ident" id="7695565">io</span><span class="op" id="7695567">.</span><span class="ident" id="7695568">Copy</span><span class="op" id="7695572">(</span><span class="op" id="7695573">&amp;</span><span class="ident" id="7695574">b</span><span class="op" id="7695575">,</span>&nbsp;<span class="ident" id="7695577">r</span><span class="op" id="7695578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695581">if</span>&nbsp;<span class="ident" id="7695584">err</span>&nbsp;<span class="op" id="7695588">!=</span>&nbsp;<span class="ident" id="7695591">ft</span><span class="op" id="7695593">.</span><span class="ident" id="7695594">ContentErr</span>&nbsp;<span class="op" id="7695605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695609">t</span><span class="op" id="7695610">.</span><span class="ident" id="7695611">Errorf</span><span class="op" id="7695617">(</span><span class="string" id="7695618">&#34;%s:&nbsp;copying&nbsp;contents:&nbsp;%v&nbsp;(want&nbsp;%v)&#34;</span><span class="op" id="7695654">,</span>&nbsp;<span class="ident" id="7695656">zt</span><span class="op" id="7695658">.</span><span class="ident" id="7695659">Name</span><span class="op" id="7695663">,</span>&nbsp;<span class="ident" id="7695665">err</span><span class="op" id="7695668">,</span>&nbsp;<span class="ident" id="7695670">ft</span><span class="op" id="7695672">.</span><span class="ident" id="7695673">ContentErr</span><span class="op" id="7695683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695686">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695689">if</span>&nbsp;<span class="ident" id="7695692">err</span>&nbsp;<span class="op" id="7695696">!=</span>&nbsp;<span class="ident" id="7695699">nil</span>&nbsp;<span class="op" id="7695703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695707">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695718">r</span><span class="op" id="7695719">.</span><span class="ident" id="7695720">Close</span><span class="op" id="7695725">(</span><span class="op" id="7695726">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695730">size</span>&nbsp;<span class="op" id="7695735">:=</span>&nbsp;<span class="ident" id="7695738">uint64</span><span class="op" id="7695744">(</span><span class="ident" id="7695745">f</span><span class="op" id="7695746">.</span><span class="ident" id="7695747">UncompressedSize</span><span class="op" id="7695763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695766">if</span>&nbsp;<span class="ident" id="7695769">size</span>&nbsp;<span class="op" id="7695774">==</span>&nbsp;<span class="ident" id="7695777">uint32max</span>&nbsp;<span class="op" id="7695787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695791">size</span>&nbsp;<span class="op" id="7695796">=</span>&nbsp;<span class="ident" id="7695798">f</span><span class="op" id="7695799">.</span><span class="ident" id="7695800">UncompressedSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695823">if</span>&nbsp;<span class="ident" id="7695826">g</span>&nbsp;<span class="op" id="7695828">:=</span>&nbsp;<span class="ident" id="7695831">uint64</span><span class="op" id="7695837">(</span><span class="ident" id="7695838">b</span><span class="op" id="7695839">.</span><span class="ident" id="7695840">Len</span><span class="op" id="7695843">(</span><span class="op" id="7695844">)</span><span class="op" id="7695845">)</span><span class="op" id="7695846">;</span>&nbsp;<span class="ident" id="7695848">g</span>&nbsp;<span class="op" id="7695850">!=</span>&nbsp;<span class="ident" id="7695853">size</span>&nbsp;<span class="op" id="7695858">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695862">t</span><span class="op" id="7695863">.</span><span class="ident" id="7695864">Errorf</span><span class="op" id="7695870">(</span><span class="string" id="7695871">&#34;%v:&nbsp;read&nbsp;%v&nbsp;bytes&nbsp;but&nbsp;f.UncompressedSize&nbsp;==&nbsp;%v&#34;</span><span class="op" id="7695919">,</span>&nbsp;<span class="ident" id="7695921">f</span><span class="op" id="7695922">.</span><span class="ident" id="7695923">Name</span><span class="op" id="7695927">,</span>&nbsp;<span class="ident" id="7695929">g</span><span class="op" id="7695930">,</span>&nbsp;<span class="ident" id="7695932">size</span><span class="op" id="7695936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695943">var</span>&nbsp;<span class="ident" id="7695947">c</span>&nbsp;<span class="op" id="7695949">[</span><span class="op" id="7695950">]</span><span class="builtintype" id="7695951">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7695957">if</span>&nbsp;<span class="ident" id="7695960">ft</span><span class="op" id="7695962">.</span><span class="ident" id="7695963">Content</span>&nbsp;<span class="op" id="7695971">!=</span>&nbsp;<span class="ident" id="7695974">nil</span>&nbsp;<span class="op" id="7695978">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7695982">c</span>&nbsp;<span class="op" id="7695984">=</span>&nbsp;<span class="ident" id="7695986">ft</span><span class="op" id="7695988">.</span><span class="ident" id="7695989">Content</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7695998">}</span>&nbsp;<span class="keyword" id="7696000">else</span>&nbsp;<span class="keyword" id="7696005">if</span>&nbsp;<span class="ident" id="7696008">c</span><span class="op" id="7696009">,</span>&nbsp;<span class="ident" id="7696011">err</span>&nbsp;<span class="op" id="7696015">=</span>&nbsp;<span class="ident" id="7696017">ioutil</span><span class="op" id="7696023">.</span><span class="ident" id="7696024">ReadFile</span><span class="op" id="7696032">(</span><span class="string" id="7696033">&#34;testdata/&#34;</span>&nbsp;<span class="op" id="7696045">+</span>&nbsp;<span class="ident" id="7696047">ft</span><span class="op" id="7696049">.</span><span class="ident" id="7696050">File</span><span class="op" id="7696054">)</span><span class="op" id="7696055">;</span>&nbsp;<span class="ident" id="7696057">err</span>&nbsp;<span class="op" id="7696061">!=</span>&nbsp;<span class="ident" id="7696064">nil</span>&nbsp;<span class="op" id="7696068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696072">t</span><span class="op" id="7696073">.</span><span class="ident" id="7696074">Error</span><span class="op" id="7696079">(</span><span class="ident" id="7696080">err</span><span class="op" id="7696083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696087">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696095">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696099">if</span>&nbsp;<span class="ident" id="7696102">b</span><span class="op" id="7696103">.</span><span class="ident" id="7696104">Len</span><span class="op" id="7696107">(</span><span class="op" id="7696108">)</span>&nbsp;<span class="op" id="7696110">!=</span>&nbsp;<span class="builtinfunc" id="7696113">len</span><span class="op" id="7696116">(</span><span class="ident" id="7696117">c</span><span class="op" id="7696118">)</span>&nbsp;<span class="op" id="7696120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696124">t</span><span class="op" id="7696125">.</span><span class="ident" id="7696126">Errorf</span><span class="op" id="7696132">(</span><span class="string" id="7696133">&#34;%s:&nbsp;len=%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7696154">,</span>&nbsp;<span class="ident" id="7696156">f</span><span class="op" id="7696157">.</span><span class="ident" id="7696158">Name</span><span class="op" id="7696162">,</span>&nbsp;<span class="ident" id="7696164">b</span><span class="op" id="7696165">.</span><span class="ident" id="7696166">Len</span><span class="op" id="7696169">(</span><span class="op" id="7696170">)</span><span class="op" id="7696171">,</span>&nbsp;<span class="builtinfunc" id="7696173">len</span><span class="op" id="7696176">(</span><span class="ident" id="7696177">c</span><span class="op" id="7696178">)</span><span class="op" id="7696179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696183">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696191">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696195">for</span>&nbsp;<span class="ident" id="7696199">i</span><span class="op" id="7696200">,</span>&nbsp;<span class="ident" id="7696202">b</span>&nbsp;<span class="op" id="7696204">:=</span>&nbsp;<span class="keyword" id="7696207">range</span>&nbsp;<span class="ident" id="7696213">b</span><span class="op" id="7696214">.</span><span class="ident" id="7696215">Bytes</span><span class="op" id="7696220">(</span><span class="op" id="7696221">)</span>&nbsp;<span class="op" id="7696223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696227">if</span>&nbsp;<span class="ident" id="7696230">b</span>&nbsp;<span class="op" id="7696232">!=</span>&nbsp;<span class="ident" id="7696235">c</span><span class="op" id="7696236">[</span><span class="ident" id="7696237">i</span><span class="op" id="7696238">]</span>&nbsp;<span class="op" id="7696240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696245">t</span><span class="op" id="7696246">.</span><span class="ident" id="7696247">Errorf</span><span class="op" id="7696253">(</span><span class="string" id="7696254">&#34;%s:&nbsp;content[%d]=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7696282">,</span>&nbsp;<span class="ident" id="7696284">f</span><span class="op" id="7696285">.</span><span class="ident" id="7696286">Name</span><span class="op" id="7696290">,</span>&nbsp;<span class="ident" id="7696292">i</span><span class="op" id="7696293">,</span>&nbsp;<span class="ident" id="7696295">b</span><span class="op" id="7696296">,</span>&nbsp;<span class="ident" id="7696298">c</span><span class="op" id="7696299">[</span><span class="ident" id="7696300">i</span><span class="op" id="7696301">]</span><span class="op" id="7696302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696307">return</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696319">}</span><br>
<span class="lineno"></span><span class="op" id="7696321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696324">func</span>&nbsp;<span class="ident" id="7696329">testFileMode</span><span class="op" id="7696341">(</span><span class="ident" id="7696342">t</span>&nbsp;<span class="op" id="7696344">*</span><span class="ident" id="7696345">testing</span><span class="op" id="7696352">.</span><span class="ident" id="7696353">T</span><span class="op" id="7696354">,</span>&nbsp;<span class="ident" id="7696356">zipName</span>&nbsp;<span class="builtintype" id="7696364">string</span><span class="op" id="7696370">,</span>&nbsp;<span class="ident" id="7696372">f</span>&nbsp;<span class="op" id="7696374">*</span><span class="ident" id="7696375">File</span><span class="op" id="7696379">,</span>&nbsp;<span class="ident" id="7696381">want</span>&nbsp;<span class="ident" id="7696386">os</span><span class="op" id="7696388">.</span><span class="ident" id="7696389">FileMode</span><span class="op" id="7696397">)</span>&nbsp;<span class="op" id="7696399">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696402">mode</span>&nbsp;<span class="op" id="7696407">:=</span>&nbsp;<span class="ident" id="7696410">f</span><span class="op" id="7696411">.</span><span class="ident" id="7696412">Mode</span><span class="op" id="7696416">(</span><span class="op" id="7696417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696420">if</span>&nbsp;<span class="ident" id="7696423">want</span>&nbsp;<span class="op" id="7696428">==</span>&nbsp;<span class="num" id="7696431">0</span>&nbsp;<span class="op" id="7696433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696437">t</span><span class="op" id="7696438">.</span><span class="ident" id="7696439">Errorf</span><span class="op" id="7696445">(</span><span class="string" id="7696446">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;none&#34;</span><span class="op" id="7696478">,</span>&nbsp;<span class="ident" id="7696480">zipName</span><span class="op" id="7696487">,</span>&nbsp;<span class="ident" id="7696489">f</span><span class="op" id="7696490">.</span><span class="ident" id="7696491">Name</span><span class="op" id="7696495">,</span>&nbsp;<span class="ident" id="7696497">mode</span><span class="op" id="7696501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696504">}</span>&nbsp;<span class="keyword" id="7696506">else</span>&nbsp;<span class="keyword" id="7696511">if</span>&nbsp;<span class="ident" id="7696514">mode</span>&nbsp;<span class="op" id="7696519">!=</span>&nbsp;<span class="ident" id="7696522">want</span>&nbsp;<span class="op" id="7696527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696531">t</span><span class="op" id="7696532">.</span><span class="ident" id="7696533">Errorf</span><span class="op" id="7696539">(</span><span class="string" id="7696540">&#34;%s:&nbsp;%s&nbsp;mode:&nbsp;want&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7696570">,</span>&nbsp;<span class="ident" id="7696572">zipName</span><span class="op" id="7696579">,</span>&nbsp;<span class="ident" id="7696581">f</span><span class="op" id="7696582">.</span><span class="ident" id="7696583">Name</span><span class="op" id="7696587">,</span>&nbsp;<span class="ident" id="7696589">want</span><span class="op" id="7696593">,</span>&nbsp;<span class="ident" id="7696595">mode</span><span class="op" id="7696599">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696602">}</span><br>
<span class="lineno"></span><span class="op" id="7696604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7696607">func</span>&nbsp;<span class="ident" id="7696612">TestInvalidFiles</span><span class="op" id="7696628">(</span><span class="ident" id="7696629">t</span>&nbsp;<span class="op" id="7696631">*</span><span class="ident" id="7696632">testing</span><span class="op" id="7696639">.</span><span class="ident" id="7696640">T</span><span class="op" id="7696641">)</span>&nbsp;<span class="op" id="7696643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696646">const</span>&nbsp;<span class="ident" id="7696652">size</span>&nbsp;<span class="op" id="7696657">=</span>&nbsp;<span class="num" id="7696659">1024</span>&nbsp;<span class="op" id="7696664">*</span>&nbsp;<span class="num" id="7696666">70</span>&nbsp;<span class="comment" id="7696669">//&nbsp;70kb</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696678">b</span>&nbsp;<span class="op" id="7696680">:=</span>&nbsp;<span class="builtinfunc" id="7696683">make</span><span class="op" id="7696687">(</span><span class="op" id="7696688">[</span><span class="op" id="7696689">]</span><span class="builtintype" id="7696690">byte</span><span class="op" id="7696694">,</span>&nbsp;<span class="ident" id="7696696">size</span><span class="op" id="7696700">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7696704">//&nbsp;zeroes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696715">_</span><span class="op" id="7696716">,</span>&nbsp;<span class="ident" id="7696718">err</span>&nbsp;<span class="op" id="7696722">:=</span>&nbsp;<span class="ident" id="7696725">NewReader</span><span class="op" id="7696734">(</span><span class="ident" id="7696735">bytes</span><span class="op" id="7696740">.</span><span class="ident" id="7696741">NewReader</span><span class="op" id="7696750">(</span><span class="ident" id="7696751">b</span><span class="op" id="7696752">)</span><span class="op" id="7696753">,</span>&nbsp;<span class="ident" id="7696755">size</span><span class="op" id="7696759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696762">if</span>&nbsp;<span class="ident" id="7696765">err</span>&nbsp;<span class="op" id="7696769">!=</span>&nbsp;<span class="ident" id="7696772">ErrFormat</span>&nbsp;<span class="op" id="7696782">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696786">t</span><span class="op" id="7696787">.</span><span class="ident" id="7696788">Errorf</span><span class="op" id="7696794">(</span><span class="string" id="7696795">&#34;zeroes:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7696822">,</span>&nbsp;<span class="ident" id="7696824">err</span><span class="op" id="7696827">,</span>&nbsp;<span class="ident" id="7696829">ErrFormat</span><span class="op" id="7696838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7696841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7696845">//&nbsp;repeated&nbsp;directoryEndSignatures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696881">sig</span>&nbsp;<span class="op" id="7696885">:=</span>&nbsp;<span class="builtinfunc" id="7696888">make</span><span class="op" id="7696892">(</span><span class="op" id="7696893">[</span><span class="op" id="7696894">]</span><span class="builtintype" id="7696895">byte</span><span class="op" id="7696899">,</span>&nbsp;<span class="num" id="7696901">4</span><span class="op" id="7696902">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7696905">binary</span><span class="op" id="7696911">.</span><span class="ident" id="7696912">LittleEndian</span><span class="op" id="7696924">.</span><span class="ident" id="7696925">PutUint32</span><span class="op" id="7696934">(</span><span class="ident" id="7696935">sig</span><span class="op" id="7696938">,</span>&nbsp;<span class="ident" id="7696940">directoryEndSignature</span><span class="op" id="7696961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7696964">for</span>&nbsp;<span class="ident" id="7696968">i</span>&nbsp;<span class="op" id="7696970">:=</span>&nbsp;<span class="num" id="7696973">0</span><span class="op" id="7696974">;</span>&nbsp;<span class="ident" id="7696976">i</span>&nbsp;<span class="op" id="7696978">&lt;</span>&nbsp;<span class="ident" id="7696980">size</span><span class="op" id="7696984">-</span><span class="num" id="7696985">4</span><span class="op" id="7696986">;</span>&nbsp;<span class="ident" id="7696988">i</span>&nbsp;<span class="op" id="7696990">+=</span>&nbsp;<span class="num" id="7696993">4</span>&nbsp;<span class="op" id="7696995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7696999">copy</span><span class="op" id="7697003">(</span><span class="ident" id="7697004">b</span><span class="op" id="7697005">[</span><span class="ident" id="7697006">i</span><span class="op" id="7697007">:</span><span class="ident" id="7697008">i</span><span class="op" id="7697009">+</span><span class="num" id="7697010">4</span><span class="op" id="7697011">]</span><span class="op" id="7697012">,</span>&nbsp;<span class="ident" id="7697014">sig</span><span class="op" id="7697017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697023">_</span><span class="op" id="7697024">,</span>&nbsp;<span class="ident" id="7697026">err</span>&nbsp;<span class="op" id="7697030">=</span>&nbsp;<span class="ident" id="7697032">NewReader</span><span class="op" id="7697041">(</span><span class="ident" id="7697042">bytes</span><span class="op" id="7697047">.</span><span class="ident" id="7697048">NewReader</span><span class="op" id="7697057">(</span><span class="ident" id="7697058">b</span><span class="op" id="7697059">)</span><span class="op" id="7697060">,</span>&nbsp;<span class="ident" id="7697062">size</span><span class="op" id="7697066">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697069">if</span>&nbsp;<span class="ident" id="7697072">err</span>&nbsp;<span class="op" id="7697076">!=</span>&nbsp;<span class="ident" id="7697079">ErrFormat</span>&nbsp;<span class="op" id="7697089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697093">t</span><span class="op" id="7697094">.</span><span class="ident" id="7697095">Errorf</span><span class="op" id="7697101">(</span><span class="string" id="7697102">&#34;sigs:&nbsp;error=%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7697127">,</span>&nbsp;<span class="ident" id="7697129">err</span><span class="op" id="7697132">,</span>&nbsp;<span class="ident" id="7697134">ErrFormat</span><span class="op" id="7697143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697146">}</span><br>
<span class="lineno"></span><span class="op" id="7697148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="7697151">func</span>&nbsp;<span class="ident" id="7697156">messWith</span><span class="op" id="7697164">(</span><span class="ident" id="7697165">fileName</span>&nbsp;<span class="builtintype" id="7697174">string</span><span class="op" id="7697180">,</span>&nbsp;<span class="ident" id="7697182">corrupter</span>&nbsp;<span class="keyword" id="7697192">func</span><span class="op" id="7697196">(</span><span class="ident" id="7697197">b</span>&nbsp;<span class="op" id="7697199">[</span><span class="op" id="7697200">]</span><span class="builtintype" id="7697201">byte</span><span class="op" id="7697205">)</span><span class="op" id="7697206">)</span>&nbsp;<span class="op" id="7697208">(</span><span class="ident" id="7697209">r</span>&nbsp;<span class="ident" id="7697211">io</span><span class="op" id="7697213">.</span><span class="ident" id="7697214">ReaderAt</span><span class="op" id="7697222">,</span>&nbsp;<span class="ident" id="7697224">size</span>&nbsp;<span class="ident" id="7697229">int64</span><span class="op" id="7697234">)</span>&nbsp;<span class="op" id="7697236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697239">data</span><span class="op" id="7697243">,</span>&nbsp;<span class="ident" id="7697245">err</span>&nbsp;<span class="op" id="7697249">:=</span>&nbsp;<span class="ident" id="7697252">ioutil</span><span class="op" id="7697258">.</span><span class="ident" id="7697259">ReadFile</span><span class="op" id="7697267">(</span><span class="ident" id="7697268">filepath</span><span class="op" id="7697276">.</span><span class="ident" id="7697277">Join</span><span class="op" id="7697281">(</span><span class="string" id="7697282">&#34;testdata&#34;</span><span class="op" id="7697292">,</span>&nbsp;<span class="ident" id="7697294">fileName</span><span class="op" id="7697302">)</span><span class="op" id="7697303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697306">if</span>&nbsp;<span class="ident" id="7697309">err</span>&nbsp;<span class="op" id="7697313">!=</span>&nbsp;<span class="ident" id="7697316">nil</span>&nbsp;<span class="op" id="7697320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7697324">panic</span><span class="op" id="7697329">(</span><span class="string" id="7697330">&#34;Error&nbsp;reading&nbsp;&#34;</span>&nbsp;<span class="op" id="7697347">+</span>&nbsp;<span class="ident" id="7697349">fileName</span>&nbsp;<span class="op" id="7697358">+</span>&nbsp;<span class="string" id="7697360">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="7697365">+</span>&nbsp;<span class="ident" id="7697367">err</span><span class="op" id="7697370">.</span><span class="ident" id="7697371">Error</span><span class="op" id="7697376">(</span><span class="op" id="7697377">)</span><span class="op" id="7697378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697381">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697384">corrupter</span><span class="op" id="7697393">(</span><span class="ident" id="7697394">data</span><span class="op" id="7697398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697401">return</span>&nbsp;<span class="ident" id="7697408">bytes</span><span class="op" id="7697413">.</span><span class="ident" id="7697414">NewReader</span><span class="op" id="7697423">(</span><span class="ident" id="7697424">data</span><span class="op" id="7697428">)</span><span class="op" id="7697429">,</span>&nbsp;<span class="ident" id="7697431">int64</span><span class="op" id="7697436">(</span><span class="builtinfunc" id="7697437">len</span><span class="op" id="7697440">(</span><span class="ident" id="7697441">data</span><span class="op" id="7697445">)</span><span class="op" id="7697446">)</span><br>
<span class="lineno"></span><span class="op" id="7697448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7697451">func</span>&nbsp;<span class="ident" id="7697456">returnCorruptCRC32Zip</span><span class="op" id="7697477">(</span><span class="op" id="7697478">)</span>&nbsp;<span class="op" id="7697480">(</span><span class="ident" id="7697481">r</span>&nbsp;<span class="ident" id="7697483">io</span><span class="op" id="7697485">.</span><span class="ident" id="7697486">ReaderAt</span><span class="op" id="7697494">,</span>&nbsp;<span class="ident" id="7697496">size</span>&nbsp;<span class="ident" id="7697501">int64</span><span class="op" id="7697506">)</span>&nbsp;<span class="op" id="7697508">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697511">return</span>&nbsp;<span class="ident" id="7697518">messWith</span><span class="op" id="7697526">(</span><span class="string" id="7697527">&#34;go-with-datadesc-sig.zip&#34;</span><span class="op" id="7697553">,</span>&nbsp;<span class="keyword" id="7697555">func</span><span class="op" id="7697559">(</span><span class="ident" id="7697560">b</span>&nbsp;<span class="op" id="7697562">[</span><span class="op" id="7697563">]</span><span class="builtintype" id="7697564">byte</span><span class="op" id="7697568">)</span>&nbsp;<span class="op" id="7697570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7697574">//&nbsp;Corrupt&nbsp;one&nbsp;of&nbsp;the&nbsp;CRC32s&nbsp;in&nbsp;the&nbsp;data&nbsp;descriptor:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697629">b</span><span class="op" id="7697630">[</span><span class="num" id="7697631">0x2d</span><span class="op" id="7697635">]</span><span class="op" id="7697636">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7697640">}</span><span class="op" id="7697641">)</span><br>
<span class="lineno"></span><span class="op" id="7697643">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7697646">func</span>&nbsp;<span class="ident" id="7697651">returnCorruptNotStreamedZip</span><span class="op" id="7697678">(</span><span class="op" id="7697679">)</span>&nbsp;<span class="op" id="7697681">(</span><span class="ident" id="7697682">r</span>&nbsp;<span class="ident" id="7697684">io</span><span class="op" id="7697686">.</span><span class="ident" id="7697687">ReaderAt</span><span class="op" id="7697695">,</span>&nbsp;<span class="ident" id="7697697">size</span>&nbsp;<span class="ident" id="7697702">int64</span><span class="op" id="7697707">)</span>&nbsp;<span class="op" id="7697709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7697712">return</span>&nbsp;<span class="ident" id="7697719">messWith</span><span class="op" id="7697727">(</span><span class="string" id="7697728">&#34;crc32-not-streamed.zip&#34;</span><span class="op" id="7697752">,</span>&nbsp;<span class="keyword" id="7697754">func</span><span class="op" id="7697758">(</span><span class="ident" id="7697759">b</span>&nbsp;<span class="op" id="7697761">[</span><span class="op" id="7697762">]</span><span class="builtintype" id="7697763">byte</span><span class="op" id="7697767">)</span>&nbsp;<span class="op" id="7697769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7697773">//&nbsp;Corrupt&nbsp;foo.txt&#39;s&nbsp;final&nbsp;crc32&nbsp;byte,&nbsp;in&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7697822">//&nbsp;the&nbsp;file&nbsp;header&nbsp;and&nbsp;TOC.&nbsp;(0x7e&nbsp;-&gt;&nbsp;0x7f)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697867">b</span><span class="op" id="7697868">[</span><span class="num" id="7697869">0x11</span><span class="op" id="7697873">]</span><span class="op" id="7697874">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7697879">b</span><span class="op" id="7697880">[</span><span class="num" id="7697881">0x9d</span><span class="op" id="7697885">]</span><span class="op" id="7697886">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7697892">//&nbsp;TODO(bradfitz):&nbsp;add&nbsp;a&nbsp;new&nbsp;test&nbsp;that&nbsp;only&nbsp;corrupts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7697947">//&nbsp;one&nbsp;of&nbsp;these&nbsp;values,&nbsp;and&nbsp;verify&nbsp;that&nbsp;that&#39;s&nbsp;also&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7698004">//&nbsp;error.&nbsp;Currently,&nbsp;the&nbsp;reader&nbsp;code&nbsp;doesn&#39;t&nbsp;verify&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7698062">//&nbsp;fileheader&nbsp;and&nbsp;TOC&#39;s&nbsp;crc32&nbsp;match&nbsp;if&nbsp;they&#39;re&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7698116">//&nbsp;non-zero&nbsp;and&nbsp;only&nbsp;the&nbsp;second&nbsp;line&nbsp;above,&nbsp;the&nbsp;TOC,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7698171">//&nbsp;is&nbsp;what&nbsp;matters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7698192">}</span><span class="op" id="7698193">)</span><br>
<span class="lineno">465</span><span class="op" id="7698195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7698198">//&nbsp;rZipBytes&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;of&nbsp;a&nbsp;recursive&nbsp;zip&nbsp;file,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="7698262">//&nbsp;putting&nbsp;it&nbsp;on&nbsp;disk&nbsp;and&nbsp;triggering&nbsp;certain&nbsp;virus&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="7698323">func</span>&nbsp;<span class="ident" id="7698328">rZipBytes</span><span class="op" id="7698337">(</span><span class="op" id="7698338">)</span>&nbsp;<span class="op" id="7698340">[</span><span class="op" id="7698341">]</span><span class="builtintype" id="7698342">byte</span>&nbsp;<span class="op" id="7698347">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7698350">s</span>&nbsp;<span class="op" id="7698352">:=</span>&nbsp;<span class="string" id="7698355">`<br>
<span class="lineno"></span>0000000&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4<br>
<span class="lineno"></span>0000010&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f<br>
<span class="lineno"></span>0000020&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00<br>
<span class="lineno"></span>0000030&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00<br>
<span class="lineno">475</span>0000040&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00<br>
<span class="lineno"></span>0000050&nbsp;2f&nbsp;00&nbsp;d0&nbsp;ff&nbsp;00&nbsp;25&nbsp;00&nbsp;da&nbsp;ff&nbsp;50&nbsp;4b&nbsp;03&nbsp;04&nbsp;14&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000060&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8<br>
<span class="lineno"></span>0000070&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a&nbsp;69&nbsp;70&nbsp;00&nbsp;2f<br>
<span class="lineno"></span>0000080&nbsp;00&nbsp;d0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e<br>
<span class="lineno">480</span>0000090&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;14&nbsp;00&nbsp;eb<br>
<span class="lineno"></span>00000a0&nbsp;ff&nbsp;c2&nbsp;54&nbsp;8e&nbsp;57&nbsp;39&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff&nbsp;00&nbsp;05&nbsp;00&nbsp;fa&nbsp;ff<br>
<span class="lineno"></span>00000b0&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42<br>
<span class="lineno"></span>00000c0&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14<br>
<span class="lineno"></span>00000d0&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;14&nbsp;00&nbsp;eb&nbsp;ff&nbsp;42&nbsp;88&nbsp;21<br>
<span class="lineno">485</span>00000e0&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;34&nbsp;00&nbsp;cb<br>
<span class="lineno"></span>00000f0&nbsp;ff&nbsp;42&nbsp;88&nbsp;21&nbsp;c4&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff<br>
<span class="lineno"></span>0000100&nbsp;00&nbsp;34&nbsp;00&nbsp;cb&nbsp;ff&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a<br>
<span class="lineno"></span>0000110&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3<br>
<span class="lineno"></span>0000120&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06&nbsp;06&nbsp;40&nbsp;00&nbsp;06<br>
<span class="lineno">490</span>0000130&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;42&nbsp;e8&nbsp;21&nbsp;5e&nbsp;0f&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000140&nbsp;00&nbsp;ff&nbsp;ff&nbsp;0a&nbsp;f0&nbsp;66&nbsp;64&nbsp;12&nbsp;61&nbsp;c0&nbsp;15&nbsp;dc&nbsp;e8&nbsp;a0&nbsp;48&nbsp;bf<br>
<span class="lineno"></span>0000150&nbsp;48&nbsp;af&nbsp;2a&nbsp;b3&nbsp;20&nbsp;c0&nbsp;9b&nbsp;95&nbsp;0d&nbsp;c4&nbsp;67&nbsp;04&nbsp;42&nbsp;53&nbsp;06&nbsp;06<br>
<span class="lineno"></span>0000160&nbsp;06&nbsp;40&nbsp;00&nbsp;06&nbsp;00&nbsp;f9&nbsp;ff&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;50&nbsp;4b&nbsp;01<br>
<span class="lineno"></span>0000170&nbsp;02&nbsp;14&nbsp;00&nbsp;14&nbsp;00&nbsp;00&nbsp;00&nbsp;08&nbsp;00&nbsp;08&nbsp;03&nbsp;64&nbsp;3c&nbsp;f9&nbsp;f4&nbsp;89<br>
<span class="lineno">495</span>0000180&nbsp;64&nbsp;48&nbsp;01&nbsp;00&nbsp;00&nbsp;b8&nbsp;01&nbsp;00&nbsp;00&nbsp;07&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00<br>
<span class="lineno"></span>0000190&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;72&nbsp;2f&nbsp;72&nbsp;2e&nbsp;7a<br>
<span class="lineno"></span>00001a0&nbsp;69&nbsp;70&nbsp;50&nbsp;4b&nbsp;05&nbsp;06&nbsp;00&nbsp;00&nbsp;00&nbsp;00&nbsp;01&nbsp;00&nbsp;01&nbsp;00&nbsp;35&nbsp;00<br>
<span class="lineno"></span>00001b0&nbsp;00&nbsp;00&nbsp;6d&nbsp;01&nbsp;00&nbsp;00&nbsp;00&nbsp;00`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699903">s</span>&nbsp;<span class="op" id="7699905">=</span>&nbsp;<span class="ident" id="7699907">regexp</span><span class="op" id="7699913">.</span><span class="ident" id="7699914">MustCompile</span><span class="op" id="7699925">(</span><span class="string" id="7699926">`[0-9a-f]{7}`</span><span class="op" id="7699939">)</span><span class="op" id="7699940">.</span><span class="ident" id="7699941">ReplaceAllString</span><span class="op" id="7699957">(</span><span class="ident" id="7699958">s</span><span class="op" id="7699959">,</span>&nbsp;<span class="string" id="7699961">&#34;&#34;</span><span class="op" id="7699963">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7699966">s</span>&nbsp;<span class="op" id="7699968">=</span>&nbsp;<span class="ident" id="7699970">regexp</span><span class="op" id="7699976">.</span><span class="ident" id="7699977">MustCompile</span><span class="op" id="7699988">(</span><span class="string" id="7699989">`\s+`</span><span class="op" id="7699994">)</span><span class="op" id="7699995">.</span><span class="ident" id="7699996">ReplaceAllString</span><span class="op" id="7700012">(</span><span class="ident" id="7700013">s</span><span class="op" id="7700014">,</span>&nbsp;<span class="string" id="7700016">&#34;&#34;</span><span class="op" id="7700018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700021">b</span><span class="op" id="7700022">,</span>&nbsp;<span class="ident" id="7700024">err</span>&nbsp;<span class="op" id="7700028">:=</span>&nbsp;<span class="ident" id="7700031">hex</span><span class="op" id="7700034">.</span><span class="ident" id="7700035">DecodeString</span><span class="op" id="7700047">(</span><span class="ident" id="7700048">s</span><span class="op" id="7700049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700052">if</span>&nbsp;<span class="ident" id="7700055">err</span>&nbsp;<span class="op" id="7700059">!=</span>&nbsp;<span class="ident" id="7700062">nil</span>&nbsp;<span class="op" id="7700066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7700070">panic</span><span class="op" id="7700075">(</span><span class="ident" id="7700076">err</span><span class="op" id="7700079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7700082">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700085">return</span>&nbsp;<span class="ident" id="7700092">b</span><br>
<span class="lineno"></span><span class="op" id="7700094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700097">func</span>&nbsp;<span class="ident" id="7700102">returnRecursiveZip</span><span class="op" id="7700120">(</span><span class="op" id="7700121">)</span>&nbsp;<span class="op" id="7700123">(</span><span class="ident" id="7700124">r</span>&nbsp;<span class="ident" id="7700126">io</span><span class="op" id="7700128">.</span><span class="ident" id="7700129">ReaderAt</span><span class="op" id="7700137">,</span>&nbsp;<span class="ident" id="7700139">size</span>&nbsp;<span class="ident" id="7700144">int64</span><span class="op" id="7700149">)</span>&nbsp;<span class="op" id="7700151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700154">b</span>&nbsp;<span class="op" id="7700156">:=</span>&nbsp;<span class="ident" id="7700159">rZipBytes</span><span class="op" id="7700168">(</span><span class="op" id="7700169">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7700172">return</span>&nbsp;<span class="ident" id="7700179">bytes</span><span class="op" id="7700184">.</span><span class="ident" id="7700185">NewReader</span><span class="op" id="7700194">(</span><span class="ident" id="7700195">b</span><span class="op" id="7700196">)</span><span class="op" id="7700197">,</span>&nbsp;<span class="ident" id="7700199">int64</span><span class="op" id="7700204">(</span><span class="builtinfunc" id="7700205">len</span><span class="op" id="7700208">(</span><span class="ident" id="7700209">b</span><span class="op" id="7700210">)</span><span class="op" id="7700211">)</span><br>
<span class="lineno"></span><span class="op" id="7700213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7700216">func</span>&nbsp;<span class="ident" id="7700221">TestIssue8186</span><span class="op" id="7700234">(</span><span class="ident" id="7700235">t</span>&nbsp;<span class="op" id="7700237">*</span><span class="ident" id="7700238">testing</span><span class="op" id="7700245">.</span><span class="ident" id="7700246">T</span><span class="op" id="7700247">)</span>&nbsp;<span class="op" id="7700249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7700252">//&nbsp;Directory&nbsp;headers&nbsp;&amp;&nbsp;data&nbsp;found&nbsp;in&nbsp;the&nbsp;TOC&nbsp;of&nbsp;a&nbsp;JAR&nbsp;file.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7700313">dirEnts</span>&nbsp;<span class="op" id="7700321">:=</span>&nbsp;<span class="op" id="7700324">[</span><span class="op" id="7700325">]</span><span class="builtintype" id="7700326">string</span><span class="op" id="7700332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700336">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\xaa\x1b\x06\xf0\x81\x02\x00\x00\x81\x02\x00\x00-\x00\x05\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00res/drawable-xhdpi-v4/ic_actionbar_accept.png\xfe\xca\x00\x00\x00&#34;</span><span class="op" id="7700563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700567">&#34;PK\x01\x02\n\x00\n\x00\x00\b\x00\x004\x9d3?\x90K\x89\xc7t\n\x00\x00t\n\x00\x00\x0e\x00\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd1\x02\x00\x00resources.arsc\x00\x00\x00&#34;</span><span class="op" id="7700745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700749">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xff$\x18\xed3\x03\x00\x00\xb4\b\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00t\r\x00\x00AndroidManifest.xml&#34;</span><span class="op" id="7700920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7700924">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\x14\xc5K\xab\x192\x02\x00\xc8\xcd\x04\x00\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xe8\x10\x00\x00classes.dex&#34;</span><span class="op" id="7701092">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701096">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?E\x96\nD\xac\x01\x00\x00P\x03\x00\x00&amp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:C\x02\x00res/layout/actionbar_set_wallpaper.xml&#34;</span><span class="op" id="7701279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701283">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?Ļ\x14\xe3\xd8\x01\x00\x00\xd8\x03\x00\x00&nbsp;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:E\x02\x00res/layout/wallpaper_cropper.xml&#34;</span><span class="op" id="7701465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701469">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?}\xc1\x15\x9eZ\x01\x00\x00!\x02\x00\x00\x14\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00`G\x02\x00META-INF/MANIFEST.MF&#34;</span><span class="op" id="7701639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701643">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xe6\x98Ьo\x01\x00\x00\x84\x02\x00\x00\x10\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfcH\x02\x00META-INF/CERT.SF&#34;</span><span class="op" id="7701812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7701816">&#34;PK\x01\x02\x14\x00\x14\x00\b\b\b\x004\x9d3?\xbfP\x96b\x86\x04\x00\x00\xb2\x06\x00\x00\x11\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa9J\x02\x00META-INF/CERT.RSA&#34;</span><span class="op" id="7701989">,</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7701992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7701995">for</span>&nbsp;<span class="ident" id="7701999">i</span><span class="op" id="7702000">,</span>&nbsp;<span class="ident" id="7702002">s</span>&nbsp;<span class="op" id="7702004">:=</span>&nbsp;<span class="keyword" id="7702007">range</span>&nbsp;<span class="ident" id="7702013">dirEnts</span>&nbsp;<span class="op" id="7702021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7702025">var</span>&nbsp;<span class="ident" id="7702029">f</span>&nbsp;<span class="ident" id="7702031">File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702038">err</span>&nbsp;<span class="op" id="7702042">:=</span>&nbsp;<span class="ident" id="7702045">readDirectoryHeader</span><span class="op" id="7702064">(</span><span class="op" id="7702065">&amp;</span><span class="ident" id="7702066">f</span><span class="op" id="7702067">,</span>&nbsp;<span class="ident" id="7702069">strings</span><span class="op" id="7702076">.</span><span class="ident" id="7702077">NewReader</span><span class="op" id="7702086">(</span><span class="ident" id="7702087">s</span><span class="op" id="7702088">)</span><span class="op" id="7702089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7702093">if</span>&nbsp;<span class="ident" id="7702096">err</span>&nbsp;<span class="op" id="7702100">!=</span>&nbsp;<span class="ident" id="7702103">nil</span>&nbsp;<span class="op" id="7702107">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7702112">t</span><span class="op" id="7702113">.</span><span class="ident" id="7702114">Errorf</span><span class="op" id="7702120">(</span><span class="string" id="7702121">&#34;error&nbsp;reading&nbsp;#%d:&nbsp;%v&#34;</span><span class="op" id="7702144">,</span>&nbsp;<span class="ident" id="7702146">i</span><span class="op" id="7702147">,</span>&nbsp;<span class="ident" id="7702149">err</span><span class="op" id="7702152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7702159">}</span><br>
<span class="lineno"></span><span class="op" id="7702161">}</span>
</div>
</body>
</html>
