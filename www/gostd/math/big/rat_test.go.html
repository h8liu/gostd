<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7585489">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7585544">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7585598">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7585649">package</span>&nbsp;<span class="ident" id="7585657">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7585662">import</span>&nbsp;<span class="op" id="7585669">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585672">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585681">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585697">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585714">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585730">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585737">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585745">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585756">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7585767">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7585777">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7585780">func</span>&nbsp;<span class="ident" id="7585785">TestZeroRat</span><span class="op" id="7585796">(</span><span class="ident" id="7585797">t</span>&nbsp;<span class="op" id="7585799">*</span><span class="ident" id="7585800">testing</span><span class="op" id="7585807">.</span><span class="ident" id="7585808">T</span><span class="op" id="7585809">)</span>&nbsp;<span class="op" id="7585811">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7585814">var</span>&nbsp;<span class="ident" id="7585818">x</span><span class="op" id="7585819">,</span>&nbsp;<span class="ident" id="7585821">y</span><span class="op" id="7585822">,</span>&nbsp;<span class="ident" id="7585824">z</span>&nbsp;<span class="ident" id="7585826">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7585831">y</span><span class="op" id="7585832">.</span><span class="ident" id="7585833">SetFrac64</span><span class="op" id="7585842">(</span><span class="num" id="7585843">0</span><span class="op" id="7585844">,</span>&nbsp;<span class="num" id="7585846">42</span><span class="op" id="7585848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7585852">if</span>&nbsp;<span class="ident" id="7585855">x</span><span class="op" id="7585856">.</span><span class="ident" id="7585857">Cmp</span><span class="op" id="7585860">(</span><span class="op" id="7585861">&amp;</span><span class="ident" id="7585862">y</span><span class="op" id="7585863">)</span>&nbsp;<span class="op" id="7585865">!=</span>&nbsp;<span class="num" id="7585868">0</span>&nbsp;<span class="op" id="7585870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7585874">t</span><span class="op" id="7585875">.</span><span class="ident" id="7585876">Errorf</span><span class="op" id="7585882">(</span><span class="string" id="7585883">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7585922">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7585925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7585929">if</span>&nbsp;<span class="ident" id="7585932">s</span>&nbsp;<span class="op" id="7585934">:=</span>&nbsp;<span class="ident" id="7585937">x</span><span class="op" id="7585938">.</span><span class="ident" id="7585939">String</span><span class="op" id="7585945">(</span><span class="op" id="7585946">)</span><span class="op" id="7585947">;</span>&nbsp;<span class="ident" id="7585949">s</span>&nbsp;<span class="op" id="7585951">!=</span>&nbsp;<span class="string" id="7585954">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7585960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7585964">t</span><span class="op" id="7585965">.</span><span class="ident" id="7585966">Errorf</span><span class="op" id="7585972">(</span><span class="string" id="7585973">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7585995">,</span>&nbsp;<span class="ident" id="7585997">s</span><span class="op" id="7585998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586001">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586005">if</span>&nbsp;<span class="ident" id="7586008">s</span>&nbsp;<span class="op" id="7586010">:=</span>&nbsp;<span class="ident" id="7586013">x</span><span class="op" id="7586014">.</span><span class="ident" id="7586015">RatString</span><span class="op" id="7586024">(</span><span class="op" id="7586025">)</span><span class="op" id="7586026">;</span>&nbsp;<span class="ident" id="7586028">s</span>&nbsp;<span class="op" id="7586030">!=</span>&nbsp;<span class="string" id="7586033">&#34;0&#34;</span>&nbsp;<span class="op" id="7586037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586041">t</span><span class="op" id="7586042">.</span><span class="ident" id="7586043">Errorf</span><span class="op" id="7586049">(</span><span class="string" id="7586050">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7586070">,</span>&nbsp;<span class="ident" id="7586072">s</span><span class="op" id="7586073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586080">z</span><span class="op" id="7586081">.</span><span class="ident" id="7586082">Add</span><span class="op" id="7586085">(</span><span class="op" id="7586086">&amp;</span><span class="ident" id="7586087">x</span><span class="op" id="7586088">,</span>&nbsp;<span class="op" id="7586090">&amp;</span><span class="ident" id="7586091">y</span><span class="op" id="7586092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586095">if</span>&nbsp;<span class="ident" id="7586098">s</span>&nbsp;<span class="op" id="7586100">:=</span>&nbsp;<span class="ident" id="7586103">z</span><span class="op" id="7586104">.</span><span class="ident" id="7586105">RatString</span><span class="op" id="7586114">(</span><span class="op" id="7586115">)</span><span class="op" id="7586116">;</span>&nbsp;<span class="ident" id="7586118">s</span>&nbsp;<span class="op" id="7586120">!=</span>&nbsp;<span class="string" id="7586123">&#34;0&#34;</span>&nbsp;<span class="op" id="7586127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586131">t</span><span class="op" id="7586132">.</span><span class="ident" id="7586133">Errorf</span><span class="op" id="7586139">(</span><span class="string" id="7586140">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7586162">,</span>&nbsp;<span class="ident" id="7586164">s</span><span class="op" id="7586165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586172">z</span><span class="op" id="7586173">.</span><span class="ident" id="7586174">Sub</span><span class="op" id="7586177">(</span><span class="op" id="7586178">&amp;</span><span class="ident" id="7586179">x</span><span class="op" id="7586180">,</span>&nbsp;<span class="op" id="7586182">&amp;</span><span class="ident" id="7586183">y</span><span class="op" id="7586184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586187">if</span>&nbsp;<span class="ident" id="7586190">s</span>&nbsp;<span class="op" id="7586192">:=</span>&nbsp;<span class="ident" id="7586195">z</span><span class="op" id="7586196">.</span><span class="ident" id="7586197">RatString</span><span class="op" id="7586206">(</span><span class="op" id="7586207">)</span><span class="op" id="7586208">;</span>&nbsp;<span class="ident" id="7586210">s</span>&nbsp;<span class="op" id="7586212">!=</span>&nbsp;<span class="string" id="7586215">&#34;0&#34;</span>&nbsp;<span class="op" id="7586219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586223">t</span><span class="op" id="7586224">.</span><span class="ident" id="7586225">Errorf</span><span class="op" id="7586231">(</span><span class="string" id="7586232">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7586254">,</span>&nbsp;<span class="ident" id="7586256">s</span><span class="op" id="7586257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586264">z</span><span class="op" id="7586265">.</span><span class="ident" id="7586266">Mul</span><span class="op" id="7586269">(</span><span class="op" id="7586270">&amp;</span><span class="ident" id="7586271">x</span><span class="op" id="7586272">,</span>&nbsp;<span class="op" id="7586274">&amp;</span><span class="ident" id="7586275">y</span><span class="op" id="7586276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586279">if</span>&nbsp;<span class="ident" id="7586282">s</span>&nbsp;<span class="op" id="7586284">:=</span>&nbsp;<span class="ident" id="7586287">z</span><span class="op" id="7586288">.</span><span class="ident" id="7586289">RatString</span><span class="op" id="7586298">(</span><span class="op" id="7586299">)</span><span class="op" id="7586300">;</span>&nbsp;<span class="ident" id="7586302">s</span>&nbsp;<span class="op" id="7586304">!=</span>&nbsp;<span class="string" id="7586307">&#34;0&#34;</span>&nbsp;<span class="op" id="7586311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586315">t</span><span class="op" id="7586316">.</span><span class="ident" id="7586317">Errorf</span><span class="op" id="7586323">(</span><span class="string" id="7586324">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7586346">,</span>&nbsp;<span class="ident" id="7586348">s</span><span class="op" id="7586349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7586356">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586387">defer</span>&nbsp;<span class="keyword" id="7586393">func</span><span class="op" id="7586397">(</span><span class="op" id="7586398">)</span>&nbsp;<span class="op" id="7586400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7586404">if</span>&nbsp;<span class="ident" id="7586407">s</span>&nbsp;<span class="op" id="7586409">:=</span>&nbsp;<span class="builtinfunc" id="7586412">recover</span><span class="op" id="7586419">(</span><span class="op" id="7586420">)</span><span class="op" id="7586421">;</span>&nbsp;<span class="ident" id="7586423">s</span>&nbsp;<span class="op" id="7586425">==</span>&nbsp;<span class="ident" id="7586428">nil</span>&nbsp;<span class="op" id="7586432">||</span>&nbsp;<span class="ident" id="7586435">s</span><span class="op" id="7586436">.</span><span class="op" id="7586437">(</span><span class="builtintype" id="7586438">string</span><span class="op" id="7586444">)</span>&nbsp;<span class="op" id="7586446">!=</span>&nbsp;<span class="string" id="7586449">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7586468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7586473">panic</span><span class="op" id="7586478">(</span><span class="ident" id="7586479">s</span><span class="op" id="7586480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586484">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586487">}</span><span class="op" id="7586488">(</span><span class="op" id="7586489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586492">z</span><span class="op" id="7586493">.</span><span class="ident" id="7586494">Quo</span><span class="op" id="7586497">(</span><span class="op" id="7586498">&amp;</span><span class="ident" id="7586499">x</span><span class="op" id="7586500">,</span>&nbsp;<span class="op" id="7586502">&amp;</span><span class="ident" id="7586503">y</span><span class="op" id="7586504">)</span><br>
<span class="lineno"></span><span class="op" id="7586506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7586509">var</span>&nbsp;<span class="ident" id="7586513">setStringTests</span>&nbsp;<span class="op" id="7586528">=</span>&nbsp;<span class="op" id="7586530">[</span><span class="op" id="7586531">]</span><span class="keyword" id="7586532">struct</span>&nbsp;<span class="op" id="7586539">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586542">in</span><span class="op" id="7586544">,</span>&nbsp;<span class="ident" id="7586546">out</span>&nbsp;<span class="builtintype" id="7586550">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7586558">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7586566">bool</span><br>
<span class="lineno"></span><span class="op" id="7586571">}</span><span class="op" id="7586572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586575">{</span><span class="string" id="7586576">&#34;0&#34;</span><span class="op" id="7586579">,</span>&nbsp;<span class="string" id="7586581">&#34;0&#34;</span><span class="op" id="7586584">,</span>&nbsp;<span class="builtintype" id="7586586">true</span><span class="op" id="7586590">}</span><span class="op" id="7586591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586594">{</span><span class="string" id="7586595">&#34;-0&#34;</span><span class="op" id="7586599">,</span>&nbsp;<span class="string" id="7586601">&#34;0&#34;</span><span class="op" id="7586604">,</span>&nbsp;<span class="builtintype" id="7586606">true</span><span class="op" id="7586610">}</span><span class="op" id="7586611">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586614">{</span><span class="string" id="7586615">&#34;1&#34;</span><span class="op" id="7586618">,</span>&nbsp;<span class="string" id="7586620">&#34;1&#34;</span><span class="op" id="7586623">,</span>&nbsp;<span class="builtintype" id="7586625">true</span><span class="op" id="7586629">}</span><span class="op" id="7586630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586633">{</span><span class="string" id="7586634">&#34;-1&#34;</span><span class="op" id="7586638">,</span>&nbsp;<span class="string" id="7586640">&#34;-1&#34;</span><span class="op" id="7586644">,</span>&nbsp;<span class="builtintype" id="7586646">true</span><span class="op" id="7586650">}</span><span class="op" id="7586651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586654">{</span><span class="string" id="7586655">&#34;1.&#34;</span><span class="op" id="7586659">,</span>&nbsp;<span class="string" id="7586661">&#34;1&#34;</span><span class="op" id="7586664">,</span>&nbsp;<span class="builtintype" id="7586666">true</span><span class="op" id="7586670">}</span><span class="op" id="7586671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586674">{</span><span class="string" id="7586675">&#34;1e0&#34;</span><span class="op" id="7586680">,</span>&nbsp;<span class="string" id="7586682">&#34;1&#34;</span><span class="op" id="7586685">,</span>&nbsp;<span class="builtintype" id="7586687">true</span><span class="op" id="7586691">}</span><span class="op" id="7586692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586695">{</span><span class="string" id="7586696">&#34;1.e1&#34;</span><span class="op" id="7586702">,</span>&nbsp;<span class="string" id="7586704">&#34;10&#34;</span><span class="op" id="7586708">,</span>&nbsp;<span class="builtintype" id="7586710">true</span><span class="op" id="7586714">}</span><span class="op" id="7586715">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586718">{</span><span class="ident" id="7586719">in</span><span class="op" id="7586721">:</span>&nbsp;<span class="string" id="7586723">&#34;1e&#34;</span><span class="op" id="7586727">,</span>&nbsp;<span class="ident" id="7586729">ok</span><span class="op" id="7586731">:</span>&nbsp;<span class="builtintype" id="7586733">false</span><span class="op" id="7586738">}</span><span class="op" id="7586739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586742">{</span><span class="ident" id="7586743">in</span><span class="op" id="7586745">:</span>&nbsp;<span class="string" id="7586747">&#34;1.e&#34;</span><span class="op" id="7586752">,</span>&nbsp;<span class="ident" id="7586754">ok</span><span class="op" id="7586756">:</span>&nbsp;<span class="builtintype" id="7586758">false</span><span class="op" id="7586763">}</span><span class="op" id="7586764">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586767">{</span><span class="ident" id="7586768">in</span><span class="op" id="7586770">:</span>&nbsp;<span class="string" id="7586772">&#34;1e+14e-5&#34;</span><span class="op" id="7586782">,</span>&nbsp;<span class="ident" id="7586784">ok</span><span class="op" id="7586786">:</span>&nbsp;<span class="builtintype" id="7586788">false</span><span class="op" id="7586793">}</span><span class="op" id="7586794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586797">{</span><span class="ident" id="7586798">in</span><span class="op" id="7586800">:</span>&nbsp;<span class="string" id="7586802">&#34;1e4.5&#34;</span><span class="op" id="7586809">,</span>&nbsp;<span class="ident" id="7586811">ok</span><span class="op" id="7586813">:</span>&nbsp;<span class="builtintype" id="7586815">false</span><span class="op" id="7586820">}</span><span class="op" id="7586821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586824">{</span><span class="ident" id="7586825">in</span><span class="op" id="7586827">:</span>&nbsp;<span class="string" id="7586829">&#34;r&#34;</span><span class="op" id="7586832">,</span>&nbsp;<span class="ident" id="7586834">ok</span><span class="op" id="7586836">:</span>&nbsp;<span class="builtintype" id="7586838">false</span><span class="op" id="7586843">}</span><span class="op" id="7586844">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586847">{</span><span class="ident" id="7586848">in</span><span class="op" id="7586850">:</span>&nbsp;<span class="string" id="7586852">&#34;a/b&#34;</span><span class="op" id="7586857">,</span>&nbsp;<span class="ident" id="7586859">ok</span><span class="op" id="7586861">:</span>&nbsp;<span class="builtintype" id="7586863">false</span><span class="op" id="7586868">}</span><span class="op" id="7586869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586872">{</span><span class="ident" id="7586873">in</span><span class="op" id="7586875">:</span>&nbsp;<span class="string" id="7586877">&#34;a.b&#34;</span><span class="op" id="7586882">,</span>&nbsp;<span class="ident" id="7586884">ok</span><span class="op" id="7586886">:</span>&nbsp;<span class="builtintype" id="7586888">false</span><span class="op" id="7586893">}</span><span class="op" id="7586894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586897">{</span><span class="string" id="7586898">&#34;-0.1&#34;</span><span class="op" id="7586904">,</span>&nbsp;<span class="string" id="7586906">&#34;-1/10&#34;</span><span class="op" id="7586913">,</span>&nbsp;<span class="builtintype" id="7586915">true</span><span class="op" id="7586919">}</span><span class="op" id="7586920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586923">{</span><span class="string" id="7586924">&#34;-.1&#34;</span><span class="op" id="7586929">,</span>&nbsp;<span class="string" id="7586931">&#34;-1/10&#34;</span><span class="op" id="7586938">,</span>&nbsp;<span class="builtintype" id="7586940">true</span><span class="op" id="7586944">}</span><span class="op" id="7586945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586948">{</span><span class="string" id="7586949">&#34;2/4&#34;</span><span class="op" id="7586954">,</span>&nbsp;<span class="string" id="7586956">&#34;1/2&#34;</span><span class="op" id="7586961">,</span>&nbsp;<span class="builtintype" id="7586963">true</span><span class="op" id="7586967">}</span><span class="op" id="7586968">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586971">{</span><span class="string" id="7586972">&#34;.25&#34;</span><span class="op" id="7586977">,</span>&nbsp;<span class="string" id="7586979">&#34;1/4&#34;</span><span class="op" id="7586984">,</span>&nbsp;<span class="builtintype" id="7586986">true</span><span class="op" id="7586990">}</span><span class="op" id="7586991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7586994">{</span><span class="string" id="7586995">&#34;-1/5&#34;</span><span class="op" id="7587001">,</span>&nbsp;<span class="string" id="7587003">&#34;-1/5&#34;</span><span class="op" id="7587009">,</span>&nbsp;<span class="builtintype" id="7587011">true</span><span class="op" id="7587015">}</span><span class="op" id="7587016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587019">{</span><span class="string" id="7587020">&#34;8129567.7690E14&#34;</span><span class="op" id="7587037">,</span>&nbsp;<span class="string" id="7587039">&#34;812956776900000000000&#34;</span><span class="op" id="7587062">,</span>&nbsp;<span class="builtintype" id="7587064">true</span><span class="op" id="7587068">}</span><span class="op" id="7587069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587072">{</span><span class="string" id="7587073">&#34;78189e+4&#34;</span><span class="op" id="7587083">,</span>&nbsp;<span class="string" id="7587085">&#34;781890000&#34;</span><span class="op" id="7587096">,</span>&nbsp;<span class="builtintype" id="7587098">true</span><span class="op" id="7587102">}</span><span class="op" id="7587103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587106">{</span><span class="string" id="7587107">&#34;553019.8935e+8&#34;</span><span class="op" id="7587123">,</span>&nbsp;<span class="string" id="7587125">&#34;55301989350000&#34;</span><span class="op" id="7587141">,</span>&nbsp;<span class="builtintype" id="7587143">true</span><span class="op" id="7587147">}</span><span class="op" id="7587148">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587151">{</span><span class="string" id="7587152">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7587187">,</span>&nbsp;<span class="string" id="7587189">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7587232">,</span>&nbsp;<span class="builtintype" id="7587234">true</span><span class="op" id="7587238">}</span><span class="op" id="7587239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587242">{</span><span class="string" id="7587243">&#34;9877861857500000E-7&#34;</span><span class="op" id="7587264">,</span>&nbsp;<span class="string" id="7587266">&#34;3951144743/4&#34;</span><span class="op" id="7587280">,</span>&nbsp;<span class="builtintype" id="7587282">true</span><span class="op" id="7587286">}</span><span class="op" id="7587287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587290">{</span><span class="string" id="7587291">&#34;2169378.417e-3&#34;</span><span class="op" id="7587307">,</span>&nbsp;<span class="string" id="7587309">&#34;2169378417/1000000&#34;</span><span class="op" id="7587329">,</span>&nbsp;<span class="builtintype" id="7587331">true</span><span class="op" id="7587335">}</span><span class="op" id="7587336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587339">{</span><span class="string" id="7587340">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7587378">,</span>&nbsp;<span class="string" id="7587380">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7587418">,</span>&nbsp;<span class="builtintype" id="7587420">true</span><span class="op" id="7587424">}</span><span class="op" id="7587425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587428">{</span><span class="string" id="7587429">&#34;53/70893980658822810696&#34;</span><span class="op" id="7587454">,</span>&nbsp;<span class="string" id="7587456">&#34;53/70893980658822810696&#34;</span><span class="op" id="7587481">,</span>&nbsp;<span class="builtintype" id="7587483">true</span><span class="op" id="7587487">}</span><span class="op" id="7587488">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587491">{</span><span class="string" id="7587492">&#34;106/141787961317645621392&#34;</span><span class="op" id="7587519">,</span>&nbsp;<span class="string" id="7587521">&#34;53/70893980658822810696&#34;</span><span class="op" id="7587546">,</span>&nbsp;<span class="builtintype" id="7587548">true</span><span class="op" id="7587552">}</span><span class="op" id="7587553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587556">{</span><span class="string" id="7587557">&#34;204211327800791583.81095&#34;</span><span class="op" id="7587583">,</span>&nbsp;<span class="string" id="7587585">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7587615">,</span>&nbsp;<span class="builtintype" id="7587617">true</span><span class="op" id="7587621">}</span><span class="op" id="7587622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587625">{</span><span class="ident" id="7587626">in</span><span class="op" id="7587628">:</span>&nbsp;<span class="string" id="7587630">&#34;1/0&#34;</span><span class="op" id="7587635">,</span>&nbsp;<span class="ident" id="7587637">ok</span><span class="op" id="7587639">:</span>&nbsp;<span class="builtintype" id="7587641">false</span><span class="op" id="7587646">}</span><span class="op" id="7587647">,</span><br>
<span class="lineno"></span><span class="op" id="7587649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7587652">func</span>&nbsp;<span class="ident" id="7587657">TestRatSetString</span><span class="op" id="7587673">(</span><span class="ident" id="7587674">t</span>&nbsp;<span class="op" id="7587676">*</span><span class="ident" id="7587677">testing</span><span class="op" id="7587684">.</span><span class="ident" id="7587685">T</span><span class="op" id="7587686">)</span>&nbsp;<span class="op" id="7587688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7587691">for</span>&nbsp;<span class="ident" id="7587695">i</span><span class="op" id="7587696">,</span>&nbsp;<span class="ident" id="7587698">test</span>&nbsp;<span class="op" id="7587703">:=</span>&nbsp;<span class="keyword" id="7587706">range</span>&nbsp;<span class="ident" id="7587712">setStringTests</span>&nbsp;<span class="op" id="7587727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7587731">x</span><span class="op" id="7587732">,</span>&nbsp;<span class="ident" id="7587734">ok</span>&nbsp;<span class="op" id="7587737">:=</span>&nbsp;<span class="builtinfunc" id="7587740">new</span><span class="op" id="7587743">(</span><span class="ident" id="7587744">Rat</span><span class="op" id="7587747">)</span><span class="op" id="7587748">.</span><span class="ident" id="7587749">SetString</span><span class="op" id="7587758">(</span><span class="ident" id="7587759">test</span><span class="op" id="7587763">.</span><span class="ident" id="7587764">in</span><span class="op" id="7587766">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7587771">if</span>&nbsp;<span class="ident" id="7587774">ok</span>&nbsp;<span class="op" id="7587777">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7587782">if</span>&nbsp;<span class="op" id="7587785">!</span><span class="ident" id="7587786">test</span><span class="op" id="7587790">.</span><span class="ident" id="7587791">ok</span>&nbsp;<span class="op" id="7587794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7587800">t</span><span class="op" id="7587801">.</span><span class="ident" id="7587802">Errorf</span><span class="op" id="7587808">(</span><span class="string" id="7587809">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7587845">,</span>&nbsp;<span class="ident" id="7587847">i</span><span class="op" id="7587848">,</span>&nbsp;<span class="ident" id="7587850">test</span><span class="op" id="7587854">.</span><span class="ident" id="7587855">in</span><span class="op" id="7587857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587862">}</span>&nbsp;<span class="keyword" id="7587864">else</span>&nbsp;<span class="keyword" id="7587869">if</span>&nbsp;<span class="ident" id="7587872">x</span><span class="op" id="7587873">.</span><span class="ident" id="7587874">RatString</span><span class="op" id="7587883">(</span><span class="op" id="7587884">)</span>&nbsp;<span class="op" id="7587886">!=</span>&nbsp;<span class="ident" id="7587889">test</span><span class="op" id="7587893">.</span><span class="ident" id="7587894">out</span>&nbsp;<span class="op" id="7587898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7587904">t</span><span class="op" id="7587905">.</span><span class="ident" id="7587906">Errorf</span><span class="op" id="7587912">(</span><span class="string" id="7587913">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7587947">,</span>&nbsp;<span class="ident" id="7587949">i</span><span class="op" id="7587950">,</span>&nbsp;<span class="ident" id="7587952">test</span><span class="op" id="7587956">.</span><span class="ident" id="7587957">in</span><span class="op" id="7587959">,</span>&nbsp;<span class="ident" id="7587961">x</span><span class="op" id="7587962">.</span><span class="ident" id="7587963">RatString</span><span class="op" id="7587972">(</span><span class="op" id="7587973">)</span><span class="op" id="7587974">,</span>&nbsp;<span class="ident" id="7587976">test</span><span class="op" id="7587980">.</span><span class="ident" id="7587981">out</span><span class="op" id="7587984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587989">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7587993">}</span>&nbsp;<span class="keyword" id="7587995">else</span>&nbsp;<span class="keyword" id="7588000">if</span>&nbsp;<span class="ident" id="7588003">x</span>&nbsp;<span class="op" id="7588005">!=</span>&nbsp;<span class="ident" id="7588008">nil</span>&nbsp;<span class="op" id="7588012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588017">t</span><span class="op" id="7588018">.</span><span class="ident" id="7588019">Errorf</span><span class="op" id="7588025">(</span><span class="string" id="7588026">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7588061">,</span>&nbsp;<span class="ident" id="7588063">i</span><span class="op" id="7588064">,</span>&nbsp;<span class="ident" id="7588066">test</span><span class="op" id="7588070">.</span><span class="ident" id="7588071">in</span><span class="op" id="7588073">,</span>&nbsp;<span class="ident" id="7588075">x</span><span class="op" id="7588076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588083">}</span><br>
<span class="lineno"></span><span class="op" id="7588085">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7588088">func</span>&nbsp;<span class="ident" id="7588093">TestRatScan</span><span class="op" id="7588104">(</span><span class="ident" id="7588105">t</span>&nbsp;<span class="op" id="7588107">*</span><span class="ident" id="7588108">testing</span><span class="op" id="7588115">.</span><span class="ident" id="7588116">T</span><span class="op" id="7588117">)</span>&nbsp;<span class="op" id="7588119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588122">var</span>&nbsp;<span class="ident" id="7588126">buf</span>&nbsp;<span class="ident" id="7588130">bytes</span><span class="op" id="7588135">.</span><span class="ident" id="7588136">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588144">for</span>&nbsp;<span class="ident" id="7588148">i</span><span class="op" id="7588149">,</span>&nbsp;<span class="ident" id="7588151">test</span>&nbsp;<span class="op" id="7588156">:=</span>&nbsp;<span class="keyword" id="7588159">range</span>&nbsp;<span class="ident" id="7588165">setStringTests</span>&nbsp;<span class="op" id="7588180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588184">x</span>&nbsp;<span class="op" id="7588186">:=</span>&nbsp;<span class="builtinfunc" id="7588189">new</span><span class="op" id="7588192">(</span><span class="ident" id="7588193">Rat</span><span class="op" id="7588196">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588200">buf</span><span class="op" id="7588203">.</span><span class="ident" id="7588204">Reset</span><span class="op" id="7588209">(</span><span class="op" id="7588210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588214">buf</span><span class="op" id="7588217">.</span><span class="ident" id="7588218">WriteString</span><span class="op" id="7588229">(</span><span class="ident" id="7588230">test</span><span class="op" id="7588234">.</span><span class="ident" id="7588235">in</span><span class="op" id="7588237">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588242">_</span><span class="op" id="7588243">,</span>&nbsp;<span class="ident" id="7588245">err</span>&nbsp;<span class="op" id="7588249">:=</span>&nbsp;<span class="ident" id="7588252">fmt</span><span class="op" id="7588255">.</span><span class="ident" id="7588256">Fscanf</span><span class="op" id="7588262">(</span><span class="op" id="7588263">&amp;</span><span class="ident" id="7588264">buf</span><span class="op" id="7588267">,</span>&nbsp;<span class="string" id="7588269">&#34;%v&#34;</span><span class="op" id="7588273">,</span>&nbsp;<span class="ident" id="7588275">x</span><span class="op" id="7588276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588280">if</span>&nbsp;<span class="ident" id="7588283">err</span>&nbsp;<span class="op" id="7588287">==</span>&nbsp;<span class="ident" id="7588290">nil</span>&nbsp;<span class="op" id="7588294">!=</span>&nbsp;<span class="ident" id="7588297">test</span><span class="op" id="7588301">.</span><span class="ident" id="7588302">ok</span>&nbsp;<span class="op" id="7588305">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588310">if</span>&nbsp;<span class="ident" id="7588313">test</span><span class="op" id="7588317">.</span><span class="ident" id="7588318">ok</span>&nbsp;<span class="op" id="7588321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588327">t</span><span class="op" id="7588328">.</span><span class="ident" id="7588329">Errorf</span><span class="op" id="7588335">(</span><span class="string" id="7588336">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7588351">,</span>&nbsp;<span class="ident" id="7588353">i</span><span class="op" id="7588354">,</span>&nbsp;<span class="ident" id="7588356">err</span><span class="op" id="7588359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588364">}</span>&nbsp;<span class="keyword" id="7588366">else</span>&nbsp;<span class="op" id="7588371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588377">t</span><span class="op" id="7588378">.</span><span class="ident" id="7588379">Errorf</span><span class="op" id="7588385">(</span><span class="string" id="7588386">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7588406">,</span>&nbsp;<span class="ident" id="7588408">i</span><span class="op" id="7588409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588414">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588419">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588434">if</span>&nbsp;<span class="ident" id="7588437">err</span>&nbsp;<span class="op" id="7588441">==</span>&nbsp;<span class="ident" id="7588444">nil</span>&nbsp;<span class="op" id="7588448">&amp;&amp;</span>&nbsp;<span class="ident" id="7588451">x</span><span class="op" id="7588452">.</span><span class="ident" id="7588453">RatString</span><span class="op" id="7588462">(</span><span class="op" id="7588463">)</span>&nbsp;<span class="op" id="7588465">!=</span>&nbsp;<span class="ident" id="7588468">test</span><span class="op" id="7588472">.</span><span class="ident" id="7588473">out</span>&nbsp;<span class="op" id="7588477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588482">t</span><span class="op" id="7588483">.</span><span class="ident" id="7588484">Errorf</span><span class="op" id="7588490">(</span><span class="string" id="7588491">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7588511">,</span>&nbsp;<span class="ident" id="7588513">i</span><span class="op" id="7588514">,</span>&nbsp;<span class="ident" id="7588516">x</span><span class="op" id="7588517">.</span><span class="ident" id="7588518">RatString</span><span class="op" id="7588527">(</span><span class="op" id="7588528">)</span><span class="op" id="7588529">,</span>&nbsp;<span class="ident" id="7588531">test</span><span class="op" id="7588535">.</span><span class="ident" id="7588536">out</span><span class="op" id="7588539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588543">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588546">}</span><br>
<span class="lineno"></span><span class="op" id="7588548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7588551">var</span>&nbsp;<span class="ident" id="7588555">floatStringTests</span>&nbsp;<span class="op" id="7588572">=</span>&nbsp;<span class="op" id="7588574">[</span><span class="op" id="7588575">]</span><span class="keyword" id="7588576">struct</span>&nbsp;<span class="op" id="7588583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588586">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7588591">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588599">prec</span>&nbsp;<span class="builtintype" id="7588604">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7588609">out</span>&nbsp;&nbsp;<span class="builtintype" id="7588614">string</span><br>
<span class="lineno"></span><span class="op" id="7588621">}</span><span class="op" id="7588622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588625">{</span><span class="string" id="7588626">&#34;0&#34;</span><span class="op" id="7588629">,</span>&nbsp;<span class="num" id="7588631">0</span><span class="op" id="7588632">,</span>&nbsp;<span class="string" id="7588634">&#34;0&#34;</span><span class="op" id="7588637">}</span><span class="op" id="7588638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588641">{</span><span class="string" id="7588642">&#34;0&#34;</span><span class="op" id="7588645">,</span>&nbsp;<span class="num" id="7588647">4</span><span class="op" id="7588648">,</span>&nbsp;<span class="string" id="7588650">&#34;0.0000&#34;</span><span class="op" id="7588658">}</span><span class="op" id="7588659">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588662">{</span><span class="string" id="7588663">&#34;1&#34;</span><span class="op" id="7588666">,</span>&nbsp;<span class="num" id="7588668">0</span><span class="op" id="7588669">,</span>&nbsp;<span class="string" id="7588671">&#34;1&#34;</span><span class="op" id="7588674">}</span><span class="op" id="7588675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588678">{</span><span class="string" id="7588679">&#34;1&#34;</span><span class="op" id="7588682">,</span>&nbsp;<span class="num" id="7588684">2</span><span class="op" id="7588685">,</span>&nbsp;<span class="string" id="7588687">&#34;1.00&#34;</span><span class="op" id="7588693">}</span><span class="op" id="7588694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588697">{</span><span class="string" id="7588698">&#34;-1&#34;</span><span class="op" id="7588702">,</span>&nbsp;<span class="num" id="7588704">0</span><span class="op" id="7588705">,</span>&nbsp;<span class="string" id="7588707">&#34;-1&#34;</span><span class="op" id="7588711">}</span><span class="op" id="7588712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588715">{</span><span class="string" id="7588716">&#34;.25&#34;</span><span class="op" id="7588721">,</span>&nbsp;<span class="num" id="7588723">2</span><span class="op" id="7588724">,</span>&nbsp;<span class="string" id="7588726">&#34;0.25&#34;</span><span class="op" id="7588732">}</span><span class="op" id="7588733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588736">{</span><span class="string" id="7588737">&#34;.25&#34;</span><span class="op" id="7588742">,</span>&nbsp;<span class="num" id="7588744">1</span><span class="op" id="7588745">,</span>&nbsp;<span class="string" id="7588747">&#34;0.3&#34;</span><span class="op" id="7588752">}</span><span class="op" id="7588753">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588756">{</span><span class="string" id="7588757">&#34;.25&#34;</span><span class="op" id="7588762">,</span>&nbsp;<span class="num" id="7588764">3</span><span class="op" id="7588765">,</span>&nbsp;<span class="string" id="7588767">&#34;0.250&#34;</span><span class="op" id="7588774">}</span><span class="op" id="7588775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588778">{</span><span class="string" id="7588779">&#34;-1/3&#34;</span><span class="op" id="7588785">,</span>&nbsp;<span class="num" id="7588787">3</span><span class="op" id="7588788">,</span>&nbsp;<span class="string" id="7588790">&#34;-0.333&#34;</span><span class="op" id="7588798">}</span><span class="op" id="7588799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588802">{</span><span class="string" id="7588803">&#34;-2/3&#34;</span><span class="op" id="7588809">,</span>&nbsp;<span class="num" id="7588811">4</span><span class="op" id="7588812">,</span>&nbsp;<span class="string" id="7588814">&#34;-0.6667&#34;</span><span class="op" id="7588823">}</span><span class="op" id="7588824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588827">{</span><span class="string" id="7588828">&#34;0.96&#34;</span><span class="op" id="7588834">,</span>&nbsp;<span class="num" id="7588836">1</span><span class="op" id="7588837">,</span>&nbsp;<span class="string" id="7588839">&#34;1.0&#34;</span><span class="op" id="7588844">}</span><span class="op" id="7588845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588848">{</span><span class="string" id="7588849">&#34;0.999&#34;</span><span class="op" id="7588856">,</span>&nbsp;<span class="num" id="7588858">2</span><span class="op" id="7588859">,</span>&nbsp;<span class="string" id="7588861">&#34;1.00&#34;</span><span class="op" id="7588867">}</span><span class="op" id="7588868">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588871">{</span><span class="string" id="7588872">&#34;0.9&#34;</span><span class="op" id="7588877">,</span>&nbsp;<span class="num" id="7588879">0</span><span class="op" id="7588880">,</span>&nbsp;<span class="string" id="7588882">&#34;1&#34;</span><span class="op" id="7588885">}</span><span class="op" id="7588886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588889">{</span><span class="string" id="7588890">&#34;.25&#34;</span><span class="op" id="7588895">,</span>&nbsp;<span class="op" id="7588897">-</span><span class="num" id="7588898">1</span><span class="op" id="7588899">,</span>&nbsp;<span class="string" id="7588901">&#34;0&#34;</span><span class="op" id="7588904">}</span><span class="op" id="7588905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7588908">{</span><span class="string" id="7588909">&#34;.55&#34;</span><span class="op" id="7588914">,</span>&nbsp;<span class="op" id="7588916">-</span><span class="num" id="7588917">1</span><span class="op" id="7588918">,</span>&nbsp;<span class="string" id="7588920">&#34;1&#34;</span><span class="op" id="7588923">}</span><span class="op" id="7588924">,</span><br>
<span class="lineno"></span><span class="op" id="7588926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7588929">func</span>&nbsp;<span class="ident" id="7588934">TestFloatString</span><span class="op" id="7588949">(</span><span class="ident" id="7588950">t</span>&nbsp;<span class="op" id="7588952">*</span><span class="ident" id="7588953">testing</span><span class="op" id="7588960">.</span><span class="ident" id="7588961">T</span><span class="op" id="7588962">)</span>&nbsp;<span class="op" id="7588964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7588967">for</span>&nbsp;<span class="ident" id="7588971">i</span><span class="op" id="7588972">,</span>&nbsp;<span class="ident" id="7588974">test</span>&nbsp;<span class="op" id="7588979">:=</span>&nbsp;<span class="keyword" id="7588982">range</span>&nbsp;<span class="ident" id="7588988">floatStringTests</span>&nbsp;<span class="op" id="7589005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589009">x</span><span class="op" id="7589010">,</span>&nbsp;<span class="ident" id="7589012">_</span>&nbsp;<span class="op" id="7589014">:=</span>&nbsp;<span class="builtinfunc" id="7589017">new</span><span class="op" id="7589020">(</span><span class="ident" id="7589021">Rat</span><span class="op" id="7589024">)</span><span class="op" id="7589025">.</span><span class="ident" id="7589026">SetString</span><span class="op" id="7589035">(</span><span class="ident" id="7589036">test</span><span class="op" id="7589040">.</span><span class="ident" id="7589041">in</span><span class="op" id="7589043">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589048">if</span>&nbsp;<span class="ident" id="7589051">x</span><span class="op" id="7589052">.</span><span class="ident" id="7589053">FloatString</span><span class="op" id="7589064">(</span><span class="ident" id="7589065">test</span><span class="op" id="7589069">.</span><span class="ident" id="7589070">prec</span><span class="op" id="7589074">)</span>&nbsp;<span class="op" id="7589076">!=</span>&nbsp;<span class="ident" id="7589079">test</span><span class="op" id="7589083">.</span><span class="ident" id="7589084">out</span>&nbsp;<span class="op" id="7589088">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589093">t</span><span class="op" id="7589094">.</span><span class="ident" id="7589095">Errorf</span><span class="op" id="7589101">(</span><span class="string" id="7589102">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7589122">,</span>&nbsp;<span class="ident" id="7589124">i</span><span class="op" id="7589125">,</span>&nbsp;<span class="ident" id="7589127">x</span><span class="op" id="7589128">.</span><span class="ident" id="7589129">FloatString</span><span class="op" id="7589140">(</span><span class="ident" id="7589141">test</span><span class="op" id="7589145">.</span><span class="ident" id="7589146">prec</span><span class="op" id="7589150">)</span><span class="op" id="7589151">,</span>&nbsp;<span class="ident" id="7589153">test</span><span class="op" id="7589157">.</span><span class="ident" id="7589158">out</span><span class="op" id="7589161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589168">}</span><br>
<span class="lineno"></span><span class="op" id="7589170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7589173">func</span>&nbsp;<span class="ident" id="7589178">TestRatSign</span><span class="op" id="7589189">(</span><span class="ident" id="7589190">t</span>&nbsp;<span class="op" id="7589192">*</span><span class="ident" id="7589193">testing</span><span class="op" id="7589200">.</span><span class="ident" id="7589201">T</span><span class="op" id="7589202">)</span>&nbsp;<span class="op" id="7589204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589207">zero</span>&nbsp;<span class="op" id="7589212">:=</span>&nbsp;<span class="ident" id="7589215">NewRat</span><span class="op" id="7589221">(</span><span class="num" id="7589222">0</span><span class="op" id="7589223">,</span>&nbsp;<span class="num" id="7589225">1</span><span class="op" id="7589226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589229">for</span>&nbsp;<span class="ident" id="7589233">_</span><span class="op" id="7589234">,</span>&nbsp;<span class="ident" id="7589236">a</span>&nbsp;<span class="op" id="7589238">:=</span>&nbsp;<span class="keyword" id="7589241">range</span>&nbsp;<span class="ident" id="7589247">setStringTests</span>&nbsp;<span class="op" id="7589262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589266">x</span><span class="op" id="7589267">,</span>&nbsp;<span class="ident" id="7589269">ok</span>&nbsp;<span class="op" id="7589272">:=</span>&nbsp;<span class="builtinfunc" id="7589275">new</span><span class="op" id="7589278">(</span><span class="ident" id="7589279">Rat</span><span class="op" id="7589282">)</span><span class="op" id="7589283">.</span><span class="ident" id="7589284">SetString</span><span class="op" id="7589293">(</span><span class="ident" id="7589294">a</span><span class="op" id="7589295">.</span><span class="ident" id="7589296">in</span><span class="op" id="7589298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589302">if</span>&nbsp;<span class="op" id="7589305">!</span><span class="ident" id="7589306">ok</span>&nbsp;<span class="op" id="7589309">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589314">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589329">s</span>&nbsp;<span class="op" id="7589331">:=</span>&nbsp;<span class="ident" id="7589334">x</span><span class="op" id="7589335">.</span><span class="ident" id="7589336">Sign</span><span class="op" id="7589340">(</span><span class="op" id="7589341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589345">e</span>&nbsp;<span class="op" id="7589347">:=</span>&nbsp;<span class="ident" id="7589350">x</span><span class="op" id="7589351">.</span><span class="ident" id="7589352">Cmp</span><span class="op" id="7589355">(</span><span class="ident" id="7589356">zero</span><span class="op" id="7589360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589364">if</span>&nbsp;<span class="ident" id="7589367">s</span>&nbsp;<span class="op" id="7589369">!=</span>&nbsp;<span class="ident" id="7589372">e</span>&nbsp;<span class="op" id="7589374">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589379">t</span><span class="op" id="7589380">.</span><span class="ident" id="7589381">Errorf</span><span class="op" id="7589387">(</span><span class="string" id="7589388">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7589416">,</span>&nbsp;<span class="ident" id="7589418">s</span><span class="op" id="7589419">,</span>&nbsp;<span class="ident" id="7589421">e</span><span class="op" id="7589422">,</span>&nbsp;<span class="op" id="7589424">&amp;</span><span class="ident" id="7589425">x</span><span class="op" id="7589426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589433">}</span><br>
<span class="lineno"></span><span class="op" id="7589435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7589438">var</span>&nbsp;<span class="ident" id="7589442">ratCmpTests</span>&nbsp;<span class="op" id="7589454">=</span>&nbsp;<span class="op" id="7589456">[</span><span class="op" id="7589457">]</span><span class="keyword" id="7589458">struct</span>&nbsp;<span class="op" id="7589465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589468">rat1</span><span class="op" id="7589472">,</span>&nbsp;<span class="ident" id="7589474">rat2</span>&nbsp;<span class="builtintype" id="7589479">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589487">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7589498">int</span><br>
<span class="lineno"></span><span class="op" id="7589502">}</span><span class="op" id="7589503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589506">{</span><span class="string" id="7589507">&#34;0&#34;</span><span class="op" id="7589510">,</span>&nbsp;<span class="string" id="7589512">&#34;0/1&#34;</span><span class="op" id="7589517">,</span>&nbsp;<span class="num" id="7589519">0</span><span class="op" id="7589520">}</span><span class="op" id="7589521">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589524">{</span><span class="string" id="7589525">&#34;1/1&#34;</span><span class="op" id="7589530">,</span>&nbsp;<span class="string" id="7589532">&#34;1&#34;</span><span class="op" id="7589535">,</span>&nbsp;<span class="num" id="7589537">0</span><span class="op" id="7589538">}</span><span class="op" id="7589539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589542">{</span><span class="string" id="7589543">&#34;-1&#34;</span><span class="op" id="7589547">,</span>&nbsp;<span class="string" id="7589549">&#34;-2/2&#34;</span><span class="op" id="7589555">,</span>&nbsp;<span class="num" id="7589557">0</span><span class="op" id="7589558">}</span><span class="op" id="7589559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589562">{</span><span class="string" id="7589563">&#34;1&#34;</span><span class="op" id="7589566">,</span>&nbsp;<span class="string" id="7589568">&#34;0&#34;</span><span class="op" id="7589571">,</span>&nbsp;<span class="num" id="7589573">1</span><span class="op" id="7589574">}</span><span class="op" id="7589575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589578">{</span><span class="string" id="7589579">&#34;0/1&#34;</span><span class="op" id="7589584">,</span>&nbsp;<span class="string" id="7589586">&#34;1/1&#34;</span><span class="op" id="7589591">,</span>&nbsp;<span class="op" id="7589593">-</span><span class="num" id="7589594">1</span><span class="op" id="7589595">}</span><span class="op" id="7589596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589599">{</span><span class="string" id="7589600">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7589627">,</span>&nbsp;<span class="string" id="7589629">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7589656">,</span>&nbsp;<span class="op" id="7589658">-</span><span class="num" id="7589659">1</span><span class="op" id="7589660">}</span><span class="op" id="7589661">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589664">{</span><span class="string" id="7589665">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7589698">,</span>&nbsp;<span class="string" id="7589700">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7589733">,</span>&nbsp;<span class="op" id="7589735">-</span><span class="num" id="7589736">1</span><span class="op" id="7589737">}</span><span class="op" id="7589738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589741">{</span><span class="string" id="7589742">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7589779">,</span>&nbsp;<span class="string" id="7589781">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7589817">,</span>&nbsp;<span class="op" id="7589819">-</span><span class="num" id="7589820">1</span><span class="op" id="7589821">}</span><span class="op" id="7589822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7589825">{</span><span class="string" id="7589826">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7589862">,</span>&nbsp;<span class="string" id="7589864">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7589901">,</span>&nbsp;<span class="num" id="7589903">0</span><span class="op" id="7589904">}</span><span class="op" id="7589905">,</span><br>
<span class="lineno"></span><span class="op" id="7589907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7589910">func</span>&nbsp;<span class="ident" id="7589915">TestRatCmp</span><span class="op" id="7589925">(</span><span class="ident" id="7589926">t</span>&nbsp;<span class="op" id="7589928">*</span><span class="ident" id="7589929">testing</span><span class="op" id="7589936">.</span><span class="ident" id="7589937">T</span><span class="op" id="7589938">)</span>&nbsp;<span class="op" id="7589940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7589943">for</span>&nbsp;<span class="ident" id="7589947">i</span><span class="op" id="7589948">,</span>&nbsp;<span class="ident" id="7589950">test</span>&nbsp;<span class="op" id="7589955">:=</span>&nbsp;<span class="keyword" id="7589958">range</span>&nbsp;<span class="ident" id="7589964">ratCmpTests</span>&nbsp;<span class="op" id="7589976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7589980">x</span><span class="op" id="7589981">,</span>&nbsp;<span class="ident" id="7589983">_</span>&nbsp;<span class="op" id="7589985">:=</span>&nbsp;<span class="builtinfunc" id="7589988">new</span><span class="op" id="7589991">(</span><span class="ident" id="7589992">Rat</span><span class="op" id="7589995">)</span><span class="op" id="7589996">.</span><span class="ident" id="7589997">SetString</span><span class="op" id="7590006">(</span><span class="ident" id="7590007">test</span><span class="op" id="7590011">.</span><span class="ident" id="7590012">rat1</span><span class="op" id="7590016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590020">y</span><span class="op" id="7590021">,</span>&nbsp;<span class="ident" id="7590023">_</span>&nbsp;<span class="op" id="7590025">:=</span>&nbsp;<span class="builtinfunc" id="7590028">new</span><span class="op" id="7590031">(</span><span class="ident" id="7590032">Rat</span><span class="op" id="7590035">)</span><span class="op" id="7590036">.</span><span class="ident" id="7590037">SetString</span><span class="op" id="7590046">(</span><span class="ident" id="7590047">test</span><span class="op" id="7590051">.</span><span class="ident" id="7590052">rat2</span><span class="op" id="7590056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590061">out</span>&nbsp;<span class="op" id="7590065">:=</span>&nbsp;<span class="ident" id="7590068">x</span><span class="op" id="7590069">.</span><span class="ident" id="7590070">Cmp</span><span class="op" id="7590073">(</span><span class="ident" id="7590074">y</span><span class="op" id="7590075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590079">if</span>&nbsp;<span class="ident" id="7590082">out</span>&nbsp;<span class="op" id="7590086">!=</span>&nbsp;<span class="ident" id="7590089">test</span><span class="op" id="7590093">.</span><span class="ident" id="7590094">out</span>&nbsp;<span class="op" id="7590098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590103">t</span><span class="op" id="7590104">.</span><span class="ident" id="7590105">Errorf</span><span class="op" id="7590111">(</span><span class="string" id="7590112">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7590139">,</span>&nbsp;<span class="ident" id="7590141">i</span><span class="op" id="7590142">,</span>&nbsp;<span class="ident" id="7590144">out</span><span class="op" id="7590147">,</span>&nbsp;<span class="ident" id="7590149">test</span><span class="op" id="7590153">.</span><span class="ident" id="7590154">out</span><span class="op" id="7590157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590164">}</span><br>
<span class="lineno">205</span><span class="op" id="7590166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7590169">func</span>&nbsp;<span class="ident" id="7590174">TestIsInt</span><span class="op" id="7590183">(</span><span class="ident" id="7590184">t</span>&nbsp;<span class="op" id="7590186">*</span><span class="ident" id="7590187">testing</span><span class="op" id="7590194">.</span><span class="ident" id="7590195">T</span><span class="op" id="7590196">)</span>&nbsp;<span class="op" id="7590198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590201">one</span>&nbsp;<span class="op" id="7590205">:=</span>&nbsp;<span class="ident" id="7590208">NewInt</span><span class="op" id="7590214">(</span><span class="num" id="7590215">1</span><span class="op" id="7590216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590219">for</span>&nbsp;<span class="ident" id="7590223">_</span><span class="op" id="7590224">,</span>&nbsp;<span class="ident" id="7590226">a</span>&nbsp;<span class="op" id="7590228">:=</span>&nbsp;<span class="keyword" id="7590231">range</span>&nbsp;<span class="ident" id="7590237">setStringTests</span>&nbsp;<span class="op" id="7590252">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590256">x</span><span class="op" id="7590257">,</span>&nbsp;<span class="ident" id="7590259">ok</span>&nbsp;<span class="op" id="7590262">:=</span>&nbsp;<span class="builtinfunc" id="7590265">new</span><span class="op" id="7590268">(</span><span class="ident" id="7590269">Rat</span><span class="op" id="7590272">)</span><span class="op" id="7590273">.</span><span class="ident" id="7590274">SetString</span><span class="op" id="7590283">(</span><span class="ident" id="7590284">a</span><span class="op" id="7590285">.</span><span class="ident" id="7590286">in</span><span class="op" id="7590288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590292">if</span>&nbsp;<span class="op" id="7590295">!</span><span class="ident" id="7590296">ok</span>&nbsp;<span class="op" id="7590299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590304">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590319">i</span>&nbsp;<span class="op" id="7590321">:=</span>&nbsp;<span class="ident" id="7590324">x</span><span class="op" id="7590325">.</span><span class="ident" id="7590326">IsInt</span><span class="op" id="7590331">(</span><span class="op" id="7590332">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590336">e</span>&nbsp;<span class="op" id="7590338">:=</span>&nbsp;<span class="ident" id="7590341">x</span><span class="op" id="7590342">.</span><span class="ident" id="7590343">Denom</span><span class="op" id="7590348">(</span><span class="op" id="7590349">)</span><span class="op" id="7590350">.</span><span class="ident" id="7590351">Cmp</span><span class="op" id="7590354">(</span><span class="ident" id="7590355">one</span><span class="op" id="7590358">)</span>&nbsp;<span class="op" id="7590360">==</span>&nbsp;<span class="num" id="7590363">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590367">if</span>&nbsp;<span class="ident" id="7590370">i</span>&nbsp;<span class="op" id="7590372">!=</span>&nbsp;<span class="ident" id="7590375">e</span>&nbsp;<span class="op" id="7590377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590382">t</span><span class="op" id="7590383">.</span><span class="ident" id="7590384">Errorf</span><span class="op" id="7590390">(</span><span class="string" id="7590391">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7590421">,</span>&nbsp;<span class="ident" id="7590423">x</span><span class="op" id="7590424">,</span>&nbsp;<span class="ident" id="7590426">i</span><span class="op" id="7590427">,</span>&nbsp;<span class="ident" id="7590429">e</span><span class="op" id="7590430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590437">}</span><br>
<span class="lineno">220</span><span class="op" id="7590439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7590442">func</span>&nbsp;<span class="ident" id="7590447">TestRatAbs</span><span class="op" id="7590457">(</span><span class="ident" id="7590458">t</span>&nbsp;<span class="op" id="7590460">*</span><span class="ident" id="7590461">testing</span><span class="op" id="7590468">.</span><span class="ident" id="7590469">T</span><span class="op" id="7590470">)</span>&nbsp;<span class="op" id="7590472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590475">zero</span>&nbsp;<span class="op" id="7590480">:=</span>&nbsp;<span class="builtinfunc" id="7590483">new</span><span class="op" id="7590486">(</span><span class="ident" id="7590487">Rat</span><span class="op" id="7590490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590493">for</span>&nbsp;<span class="ident" id="7590497">_</span><span class="op" id="7590498">,</span>&nbsp;<span class="ident" id="7590500">a</span>&nbsp;<span class="op" id="7590502">:=</span>&nbsp;<span class="keyword" id="7590505">range</span>&nbsp;<span class="ident" id="7590511">setStringTests</span>&nbsp;<span class="op" id="7590526">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590530">x</span><span class="op" id="7590531">,</span>&nbsp;<span class="ident" id="7590533">ok</span>&nbsp;<span class="op" id="7590536">:=</span>&nbsp;<span class="builtinfunc" id="7590539">new</span><span class="op" id="7590542">(</span><span class="ident" id="7590543">Rat</span><span class="op" id="7590546">)</span><span class="op" id="7590547">.</span><span class="ident" id="7590548">SetString</span><span class="op" id="7590557">(</span><span class="ident" id="7590558">a</span><span class="op" id="7590559">.</span><span class="ident" id="7590560">in</span><span class="op" id="7590562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590566">if</span>&nbsp;<span class="op" id="7590569">!</span><span class="ident" id="7590570">ok</span>&nbsp;<span class="op" id="7590573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590578">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590593">e</span>&nbsp;<span class="op" id="7590595">:=</span>&nbsp;<span class="builtinfunc" id="7590598">new</span><span class="op" id="7590601">(</span><span class="ident" id="7590602">Rat</span><span class="op" id="7590605">)</span><span class="op" id="7590606">.</span><span class="ident" id="7590607">Set</span><span class="op" id="7590610">(</span><span class="ident" id="7590611">x</span><span class="op" id="7590612">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590616">if</span>&nbsp;<span class="ident" id="7590619">e</span><span class="op" id="7590620">.</span><span class="ident" id="7590621">Cmp</span><span class="op" id="7590624">(</span><span class="ident" id="7590625">zero</span><span class="op" id="7590629">)</span>&nbsp;<span class="op" id="7590631">&lt;</span>&nbsp;<span class="num" id="7590633">0</span>&nbsp;<span class="op" id="7590635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590640">e</span><span class="op" id="7590641">.</span><span class="ident" id="7590642">Sub</span><span class="op" id="7590645">(</span><span class="ident" id="7590646">zero</span><span class="op" id="7590650">,</span>&nbsp;<span class="ident" id="7590652">e</span><span class="op" id="7590653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590661">z</span>&nbsp;<span class="op" id="7590663">:=</span>&nbsp;<span class="builtinfunc" id="7590666">new</span><span class="op" id="7590669">(</span><span class="ident" id="7590670">Rat</span><span class="op" id="7590673">)</span><span class="op" id="7590674">.</span><span class="ident" id="7590675">Abs</span><span class="op" id="7590678">(</span><span class="ident" id="7590679">x</span><span class="op" id="7590680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590684">if</span>&nbsp;<span class="ident" id="7590687">z</span><span class="op" id="7590688">.</span><span class="ident" id="7590689">Cmp</span><span class="op" id="7590692">(</span><span class="ident" id="7590693">e</span><span class="op" id="7590694">)</span>&nbsp;<span class="op" id="7590696">!=</span>&nbsp;<span class="num" id="7590699">0</span>&nbsp;<span class="op" id="7590701">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590706">t</span><span class="op" id="7590707">.</span><span class="ident" id="7590708">Errorf</span><span class="op" id="7590714">(</span><span class="string" id="7590715">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7590742">,</span>&nbsp;<span class="ident" id="7590744">x</span><span class="op" id="7590745">,</span>&nbsp;<span class="ident" id="7590747">z</span><span class="op" id="7590748">,</span>&nbsp;<span class="ident" id="7590750">e</span><span class="op" id="7590751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590758">}</span><br>
<span class="lineno"></span><span class="op" id="7590760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7590763">func</span>&nbsp;<span class="ident" id="7590768">TestRatNeg</span><span class="op" id="7590778">(</span><span class="ident" id="7590779">t</span>&nbsp;<span class="op" id="7590781">*</span><span class="ident" id="7590782">testing</span><span class="op" id="7590789">.</span><span class="ident" id="7590790">T</span><span class="op" id="7590791">)</span>&nbsp;<span class="op" id="7590793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590796">zero</span>&nbsp;<span class="op" id="7590801">:=</span>&nbsp;<span class="builtinfunc" id="7590804">new</span><span class="op" id="7590807">(</span><span class="ident" id="7590808">Rat</span><span class="op" id="7590811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590814">for</span>&nbsp;<span class="ident" id="7590818">_</span><span class="op" id="7590819">,</span>&nbsp;<span class="ident" id="7590821">a</span>&nbsp;<span class="op" id="7590823">:=</span>&nbsp;<span class="keyword" id="7590826">range</span>&nbsp;<span class="ident" id="7590832">setStringTests</span>&nbsp;<span class="op" id="7590847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590851">x</span><span class="op" id="7590852">,</span>&nbsp;<span class="ident" id="7590854">ok</span>&nbsp;<span class="op" id="7590857">:=</span>&nbsp;<span class="builtinfunc" id="7590860">new</span><span class="op" id="7590863">(</span><span class="ident" id="7590864">Rat</span><span class="op" id="7590867">)</span><span class="op" id="7590868">.</span><span class="ident" id="7590869">SetString</span><span class="op" id="7590878">(</span><span class="ident" id="7590879">a</span><span class="op" id="7590880">.</span><span class="ident" id="7590881">in</span><span class="op" id="7590883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590887">if</span>&nbsp;<span class="op" id="7590890">!</span><span class="ident" id="7590891">ok</span>&nbsp;<span class="op" id="7590894">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590899">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7590910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590914">e</span>&nbsp;<span class="op" id="7590916">:=</span>&nbsp;<span class="builtinfunc" id="7590919">new</span><span class="op" id="7590922">(</span><span class="ident" id="7590923">Rat</span><span class="op" id="7590926">)</span><span class="op" id="7590927">.</span><span class="ident" id="7590928">Sub</span><span class="op" id="7590931">(</span><span class="ident" id="7590932">zero</span><span class="op" id="7590936">,</span>&nbsp;<span class="ident" id="7590938">x</span><span class="op" id="7590939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590943">z</span>&nbsp;<span class="op" id="7590945">:=</span>&nbsp;<span class="builtinfunc" id="7590948">new</span><span class="op" id="7590951">(</span><span class="ident" id="7590952">Rat</span><span class="op" id="7590955">)</span><span class="op" id="7590956">.</span><span class="ident" id="7590957">Neg</span><span class="op" id="7590960">(</span><span class="ident" id="7590961">x</span><span class="op" id="7590962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7590966">if</span>&nbsp;<span class="ident" id="7590969">z</span><span class="op" id="7590970">.</span><span class="ident" id="7590971">Cmp</span><span class="op" id="7590974">(</span><span class="ident" id="7590975">e</span><span class="op" id="7590976">)</span>&nbsp;<span class="op" id="7590978">!=</span>&nbsp;<span class="num" id="7590981">0</span>&nbsp;<span class="op" id="7590983">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7590988">t</span><span class="op" id="7590989">.</span><span class="ident" id="7590990">Errorf</span><span class="op" id="7590996">(</span><span class="string" id="7590997">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7591024">,</span>&nbsp;<span class="ident" id="7591026">x</span><span class="op" id="7591027">,</span>&nbsp;<span class="ident" id="7591029">z</span><span class="op" id="7591030">,</span>&nbsp;<span class="ident" id="7591032">e</span><span class="op" id="7591033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591040">}</span><br>
<span class="lineno"></span><span class="op" id="7591042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7591045">func</span>&nbsp;<span class="ident" id="7591050">TestRatInv</span><span class="op" id="7591060">(</span><span class="ident" id="7591061">t</span>&nbsp;<span class="op" id="7591063">*</span><span class="ident" id="7591064">testing</span><span class="op" id="7591071">.</span><span class="ident" id="7591072">T</span><span class="op" id="7591073">)</span>&nbsp;<span class="op" id="7591075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591078">zero</span>&nbsp;<span class="op" id="7591083">:=</span>&nbsp;<span class="builtinfunc" id="7591086">new</span><span class="op" id="7591089">(</span><span class="ident" id="7591090">Rat</span><span class="op" id="7591093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591096">for</span>&nbsp;<span class="ident" id="7591100">_</span><span class="op" id="7591101">,</span>&nbsp;<span class="ident" id="7591103">a</span>&nbsp;<span class="op" id="7591105">:=</span>&nbsp;<span class="keyword" id="7591108">range</span>&nbsp;<span class="ident" id="7591114">setStringTests</span>&nbsp;<span class="op" id="7591129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591133">x</span><span class="op" id="7591134">,</span>&nbsp;<span class="ident" id="7591136">ok</span>&nbsp;<span class="op" id="7591139">:=</span>&nbsp;<span class="builtinfunc" id="7591142">new</span><span class="op" id="7591145">(</span><span class="ident" id="7591146">Rat</span><span class="op" id="7591149">)</span><span class="op" id="7591150">.</span><span class="ident" id="7591151">SetString</span><span class="op" id="7591160">(</span><span class="ident" id="7591161">a</span><span class="op" id="7591162">.</span><span class="ident" id="7591163">in</span><span class="op" id="7591165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591169">if</span>&nbsp;<span class="op" id="7591172">!</span><span class="ident" id="7591173">ok</span>&nbsp;<span class="op" id="7591176">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591181">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591196">if</span>&nbsp;<span class="ident" id="7591199">x</span><span class="op" id="7591200">.</span><span class="ident" id="7591201">Cmp</span><span class="op" id="7591204">(</span><span class="ident" id="7591205">zero</span><span class="op" id="7591209">)</span>&nbsp;<span class="op" id="7591211">==</span>&nbsp;<span class="num" id="7591214">0</span>&nbsp;<span class="op" id="7591216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591221">continue</span>&nbsp;<span class="comment" id="7591230">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591258">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591262">e</span>&nbsp;<span class="op" id="7591264">:=</span>&nbsp;<span class="builtinfunc" id="7591267">new</span><span class="op" id="7591270">(</span><span class="ident" id="7591271">Rat</span><span class="op" id="7591274">)</span><span class="op" id="7591275">.</span><span class="ident" id="7591276">SetFrac</span><span class="op" id="7591283">(</span><span class="ident" id="7591284">x</span><span class="op" id="7591285">.</span><span class="ident" id="7591286">Denom</span><span class="op" id="7591291">(</span><span class="op" id="7591292">)</span><span class="op" id="7591293">,</span>&nbsp;<span class="ident" id="7591295">x</span><span class="op" id="7591296">.</span><span class="ident" id="7591297">Num</span><span class="op" id="7591300">(</span><span class="op" id="7591301">)</span><span class="op" id="7591302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591306">z</span>&nbsp;<span class="op" id="7591308">:=</span>&nbsp;<span class="builtinfunc" id="7591311">new</span><span class="op" id="7591314">(</span><span class="ident" id="7591315">Rat</span><span class="op" id="7591318">)</span><span class="op" id="7591319">.</span><span class="ident" id="7591320">Inv</span><span class="op" id="7591323">(</span><span class="ident" id="7591324">x</span><span class="op" id="7591325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591329">if</span>&nbsp;<span class="ident" id="7591332">z</span><span class="op" id="7591333">.</span><span class="ident" id="7591334">Cmp</span><span class="op" id="7591337">(</span><span class="ident" id="7591338">e</span><span class="op" id="7591339">)</span>&nbsp;<span class="op" id="7591341">!=</span>&nbsp;<span class="num" id="7591344">0</span>&nbsp;<span class="op" id="7591346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591351">t</span><span class="op" id="7591352">.</span><span class="ident" id="7591353">Errorf</span><span class="op" id="7591359">(</span><span class="string" id="7591360">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7591387">,</span>&nbsp;<span class="ident" id="7591389">x</span><span class="op" id="7591390">,</span>&nbsp;<span class="ident" id="7591392">z</span><span class="op" id="7591393">,</span>&nbsp;<span class="ident" id="7591395">e</span><span class="op" id="7591396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591400">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591403">}</span><br>
<span class="lineno"></span><span class="op" id="7591405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591408">type</span>&nbsp;<span class="ident" id="7591413">ratBinFun</span>&nbsp;<span class="keyword" id="7591423">func</span><span class="op" id="7591427">(</span><span class="ident" id="7591428">z</span><span class="op" id="7591429">,</span>&nbsp;<span class="ident" id="7591431">x</span><span class="op" id="7591432">,</span>&nbsp;<span class="ident" id="7591434">y</span>&nbsp;<span class="op" id="7591436">*</span><span class="ident" id="7591437">Rat</span><span class="op" id="7591440">)</span>&nbsp;<span class="op" id="7591442">*</span><span class="ident" id="7591443">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7591447">type</span>&nbsp;<span class="ident" id="7591452">ratBinArg</span>&nbsp;<span class="keyword" id="7591462">struct</span>&nbsp;<span class="op" id="7591469">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591472">x</span><span class="op" id="7591473">,</span>&nbsp;<span class="ident" id="7591475">y</span><span class="op" id="7591476">,</span>&nbsp;<span class="ident" id="7591478">z</span>&nbsp;<span class="builtintype" id="7591480">string</span><br>
<span class="lineno"></span><span class="op" id="7591487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591490">func</span>&nbsp;<span class="ident" id="7591495">testRatBin</span><span class="op" id="7591505">(</span><span class="ident" id="7591506">t</span>&nbsp;<span class="op" id="7591508">*</span><span class="ident" id="7591509">testing</span><span class="op" id="7591516">.</span><span class="ident" id="7591517">T</span><span class="op" id="7591518">,</span>&nbsp;<span class="ident" id="7591520">i</span>&nbsp;<span class="builtintype" id="7591522">int</span><span class="op" id="7591525">,</span>&nbsp;<span class="ident" id="7591527">name</span>&nbsp;<span class="builtintype" id="7591532">string</span><span class="op" id="7591538">,</span>&nbsp;<span class="ident" id="7591540">f</span>&nbsp;<span class="ident" id="7591542">ratBinFun</span><span class="op" id="7591551">,</span>&nbsp;<span class="ident" id="7591553">a</span>&nbsp;<span class="ident" id="7591555">ratBinArg</span><span class="op" id="7591564">)</span>&nbsp;<span class="op" id="7591566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591569">x</span><span class="op" id="7591570">,</span>&nbsp;<span class="ident" id="7591572">_</span>&nbsp;<span class="op" id="7591574">:=</span>&nbsp;<span class="builtinfunc" id="7591577">new</span><span class="op" id="7591580">(</span><span class="ident" id="7591581">Rat</span><span class="op" id="7591584">)</span><span class="op" id="7591585">.</span><span class="ident" id="7591586">SetString</span><span class="op" id="7591595">(</span><span class="ident" id="7591596">a</span><span class="op" id="7591597">.</span><span class="ident" id="7591598">x</span><span class="op" id="7591599">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591602">y</span><span class="op" id="7591603">,</span>&nbsp;<span class="ident" id="7591605">_</span>&nbsp;<span class="op" id="7591607">:=</span>&nbsp;<span class="builtinfunc" id="7591610">new</span><span class="op" id="7591613">(</span><span class="ident" id="7591614">Rat</span><span class="op" id="7591617">)</span><span class="op" id="7591618">.</span><span class="ident" id="7591619">SetString</span><span class="op" id="7591628">(</span><span class="ident" id="7591629">a</span><span class="op" id="7591630">.</span><span class="ident" id="7591631">y</span><span class="op" id="7591632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591635">z</span><span class="op" id="7591636">,</span>&nbsp;<span class="ident" id="7591638">_</span>&nbsp;<span class="op" id="7591640">:=</span>&nbsp;<span class="builtinfunc" id="7591643">new</span><span class="op" id="7591646">(</span><span class="ident" id="7591647">Rat</span><span class="op" id="7591650">)</span><span class="op" id="7591651">.</span><span class="ident" id="7591652">SetString</span><span class="op" id="7591661">(</span><span class="ident" id="7591662">a</span><span class="op" id="7591663">.</span><span class="ident" id="7591664">z</span><span class="op" id="7591665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591668">out</span>&nbsp;<span class="op" id="7591672">:=</span>&nbsp;<span class="ident" id="7591675">f</span><span class="op" id="7591676">(</span><span class="builtinfunc" id="7591677">new</span><span class="op" id="7591680">(</span><span class="ident" id="7591681">Rat</span><span class="op" id="7591684">)</span><span class="op" id="7591685">,</span>&nbsp;<span class="ident" id="7591687">x</span><span class="op" id="7591688">,</span>&nbsp;<span class="ident" id="7591690">y</span><span class="op" id="7591691">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7591695">if</span>&nbsp;<span class="ident" id="7591698">out</span><span class="op" id="7591701">.</span><span class="ident" id="7591702">Cmp</span><span class="op" id="7591705">(</span><span class="ident" id="7591706">z</span><span class="op" id="7591707">)</span>&nbsp;<span class="op" id="7591709">!=</span>&nbsp;<span class="num" id="7591712">0</span>&nbsp;<span class="op" id="7591714">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591718">t</span><span class="op" id="7591719">.</span><span class="ident" id="7591720">Errorf</span><span class="op" id="7591726">(</span><span class="string" id="7591727">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7591750">,</span>&nbsp;<span class="ident" id="7591752">name</span><span class="op" id="7591756">,</span>&nbsp;<span class="ident" id="7591758">i</span><span class="op" id="7591759">,</span>&nbsp;<span class="ident" id="7591761">out</span><span class="op" id="7591764">,</span>&nbsp;<span class="ident" id="7591766">z</span><span class="op" id="7591767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591770">}</span><br>
<span class="lineno"></span><span class="op" id="7591772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7591775">var</span>&nbsp;<span class="ident" id="7591779">ratBinTests</span>&nbsp;<span class="op" id="7591791">=</span>&nbsp;<span class="op" id="7591793">[</span><span class="op" id="7591794">]</span><span class="keyword" id="7591795">struct</span>&nbsp;<span class="op" id="7591802">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591805">x</span><span class="op" id="7591806">,</span>&nbsp;<span class="ident" id="7591808">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7591815">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591823">sum</span><span class="op" id="7591826">,</span>&nbsp;<span class="ident" id="7591828">prod</span>&nbsp;<span class="builtintype" id="7591833">string</span><br>
<span class="lineno"></span><span class="op" id="7591840">}</span><span class="op" id="7591841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591844">{</span><span class="string" id="7591845">&#34;0&#34;</span><span class="op" id="7591848">,</span>&nbsp;<span class="string" id="7591850">&#34;0&#34;</span><span class="op" id="7591853">,</span>&nbsp;<span class="string" id="7591855">&#34;0&#34;</span><span class="op" id="7591858">,</span>&nbsp;<span class="string" id="7591860">&#34;0&#34;</span><span class="op" id="7591863">}</span><span class="op" id="7591864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591867">{</span><span class="string" id="7591868">&#34;0&#34;</span><span class="op" id="7591871">,</span>&nbsp;<span class="string" id="7591873">&#34;1&#34;</span><span class="op" id="7591876">,</span>&nbsp;<span class="string" id="7591878">&#34;1&#34;</span><span class="op" id="7591881">,</span>&nbsp;<span class="string" id="7591883">&#34;0&#34;</span><span class="op" id="7591886">}</span><span class="op" id="7591887">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591890">{</span><span class="string" id="7591891">&#34;-1&#34;</span><span class="op" id="7591895">,</span>&nbsp;<span class="string" id="7591897">&#34;0&#34;</span><span class="op" id="7591900">,</span>&nbsp;<span class="string" id="7591902">&#34;-1&#34;</span><span class="op" id="7591906">,</span>&nbsp;<span class="string" id="7591908">&#34;0&#34;</span><span class="op" id="7591911">}</span><span class="op" id="7591912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591915">{</span><span class="string" id="7591916">&#34;-1&#34;</span><span class="op" id="7591920">,</span>&nbsp;<span class="string" id="7591922">&#34;1&#34;</span><span class="op" id="7591925">,</span>&nbsp;<span class="string" id="7591927">&#34;0&#34;</span><span class="op" id="7591930">,</span>&nbsp;<span class="string" id="7591932">&#34;-1&#34;</span><span class="op" id="7591936">}</span><span class="op" id="7591937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591940">{</span><span class="string" id="7591941">&#34;1&#34;</span><span class="op" id="7591944">,</span>&nbsp;<span class="string" id="7591946">&#34;1&#34;</span><span class="op" id="7591949">,</span>&nbsp;<span class="string" id="7591951">&#34;2&#34;</span><span class="op" id="7591954">,</span>&nbsp;<span class="string" id="7591956">&#34;1&#34;</span><span class="op" id="7591959">}</span><span class="op" id="7591960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591963">{</span><span class="string" id="7591964">&#34;1/2&#34;</span><span class="op" id="7591969">,</span>&nbsp;<span class="string" id="7591971">&#34;1/2&#34;</span><span class="op" id="7591976">,</span>&nbsp;<span class="string" id="7591978">&#34;1&#34;</span><span class="op" id="7591981">,</span>&nbsp;<span class="string" id="7591983">&#34;1/4&#34;</span><span class="op" id="7591988">}</span><span class="op" id="7591989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7591992">{</span><span class="string" id="7591993">&#34;1/4&#34;</span><span class="op" id="7591998">,</span>&nbsp;<span class="string" id="7592000">&#34;1/3&#34;</span><span class="op" id="7592005">,</span>&nbsp;<span class="string" id="7592007">&#34;7/12&#34;</span><span class="op" id="7592013">,</span>&nbsp;<span class="string" id="7592015">&#34;1/12&#34;</span><span class="op" id="7592021">}</span><span class="op" id="7592022">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592025">{</span><span class="string" id="7592026">&#34;2/5&#34;</span><span class="op" id="7592031">,</span>&nbsp;<span class="string" id="7592033">&#34;-14/3&#34;</span><span class="op" id="7592040">,</span>&nbsp;<span class="string" id="7592042">&#34;-64/15&#34;</span><span class="op" id="7592050">,</span>&nbsp;<span class="string" id="7592052">&#34;-28/15&#34;</span><span class="op" id="7592060">}</span><span class="op" id="7592061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592064">{</span><span class="string" id="7592065">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7592092">,</span>&nbsp;<span class="string" id="7592094">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7592122">,</span>&nbsp;<span class="string" id="7592124">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7592190">,</span>&nbsp;<span class="string" id="7592192">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7592242">}</span><span class="op" id="7592243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592246">{</span><span class="string" id="7592247">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7592272">,</span>&nbsp;<span class="string" id="7592274">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7592299">,</span>&nbsp;<span class="string" id="7592301">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7592327">,</span>&nbsp;<span class="string" id="7592329">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7592372">}</span><span class="op" id="7592373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592376">{</span><span class="string" id="7592377">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7592439">,</span>&nbsp;<span class="string" id="7592441">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7592467">,</span>&nbsp;<span class="string" id="7592469">&#34;-27/133467566250814981&#34;</span><span class="op" id="7592493">,</span>&nbsp;<span class="string" id="7592495">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7592578">}</span><span class="op" id="7592579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592582">{</span><span class="string" id="7592583">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7592642">,</span>&nbsp;<span class="string" id="7592644">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7592677">,</span>&nbsp;<span class="string" id="7592679">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7592713">,</span>&nbsp;<span class="string" id="7592715">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7592802">}</span><span class="op" id="7592803">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592806">{</span><span class="string" id="7592807">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7592832">,</span>&nbsp;<span class="string" id="7592834">&#34;5/2848423294177090248&#34;</span><span class="op" id="7592857">,</span>&nbsp;<span class="string" id="7592859">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7592919">,</span>&nbsp;<span class="string" id="7592921">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7592964">}</span><span class="op" id="7592965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7592968">{</span><span class="string" id="7592969">&#34;26946729/330400702820&#34;</span><span class="op" id="7592992">,</span>&nbsp;<span class="string" id="7592994">&#34;41563965/225583428284&#34;</span><span class="op" id="7593017">,</span>&nbsp;<span class="string" id="7593019">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7593063">,</span>&nbsp;<span class="string" id="7593065">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7593106">}</span><span class="op" id="7593107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593110">{</span><span class="string" id="7593111">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7593135">,</span>&nbsp;<span class="string" id="7593137">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7593181">,</span>&nbsp;<span class="string" id="7593183">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7593247">,</span>&nbsp;<span class="string" id="7593249">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7593312">}</span><span class="op" id="7593313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593316">{</span><span class="string" id="7593317">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7593357">,</span>&nbsp;<span class="string" id="7593359">&#34;29/712593081308&#34;</span><span class="op" id="7593376">,</span>&nbsp;<span class="string" id="7593378">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7593441">,</span>&nbsp;<span class="string" id="7593443">&#34;808/45524274987585732633&#34;</span><span class="op" id="7593469">}</span><span class="op" id="7593470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593473">{</span><span class="string" id="7593474">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7593515">,</span>&nbsp;<span class="string" id="7593517">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7593543">,</span>&nbsp;<span class="string" id="7593545">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7593616">,</span>&nbsp;<span class="string" id="7593618">&#34;8967230/3296219033&#34;</span><span class="op" id="7593638">}</span><span class="op" id="7593639">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7593642">{</span><span class="string" id="7593643">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7593690">,</span>&nbsp;<span class="string" id="7593692">&#34;9381566963714/9633539&#34;</span><span class="op" id="7593715">,</span>&nbsp;<span class="string" id="7593717">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7593786">,</span>&nbsp;<span class="string" id="7593788">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7593815">}</span><span class="op" id="7593816">,</span><br>
<span class="lineno"></span><span class="op" id="7593818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7593821">func</span>&nbsp;<span class="ident" id="7593826">TestRatBin</span><span class="op" id="7593836">(</span><span class="ident" id="7593837">t</span>&nbsp;<span class="op" id="7593839">*</span><span class="ident" id="7593840">testing</span><span class="op" id="7593847">.</span><span class="ident" id="7593848">T</span><span class="op" id="7593849">)</span>&nbsp;<span class="op" id="7593851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7593854">for</span>&nbsp;<span class="ident" id="7593858">i</span><span class="op" id="7593859">,</span>&nbsp;<span class="ident" id="7593861">test</span>&nbsp;<span class="op" id="7593866">:=</span>&nbsp;<span class="keyword" id="7593869">range</span>&nbsp;<span class="ident" id="7593875">ratBinTests</span>&nbsp;<span class="op" id="7593887">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593891">arg</span>&nbsp;<span class="op" id="7593895">:=</span>&nbsp;<span class="ident" id="7593898">ratBinArg</span><span class="op" id="7593907">{</span><span class="ident" id="7593908">test</span><span class="op" id="7593912">.</span><span class="ident" id="7593913">x</span><span class="op" id="7593914">,</span>&nbsp;<span class="ident" id="7593916">test</span><span class="op" id="7593920">.</span><span class="ident" id="7593921">y</span><span class="op" id="7593922">,</span>&nbsp;<span class="ident" id="7593924">test</span><span class="op" id="7593928">.</span><span class="ident" id="7593929">sum</span><span class="op" id="7593932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593936">testRatBin</span><span class="op" id="7593946">(</span><span class="ident" id="7593947">t</span><span class="op" id="7593948">,</span>&nbsp;<span class="ident" id="7593950">i</span><span class="op" id="7593951">,</span>&nbsp;<span class="string" id="7593953">&#34;Add&#34;</span><span class="op" id="7593958">,</span>&nbsp;<span class="op" id="7593960">(</span><span class="op" id="7593961">*</span><span class="ident" id="7593962">Rat</span><span class="op" id="7593965">)</span><span class="op" id="7593966">.</span><span class="ident" id="7593967">Add</span><span class="op" id="7593970">,</span>&nbsp;<span class="ident" id="7593972">arg</span><span class="op" id="7593975">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7593980">arg</span>&nbsp;<span class="op" id="7593984">=</span>&nbsp;<span class="ident" id="7593986">ratBinArg</span><span class="op" id="7593995">{</span><span class="ident" id="7593996">test</span><span class="op" id="7594000">.</span><span class="ident" id="7594001">y</span><span class="op" id="7594002">,</span>&nbsp;<span class="ident" id="7594004">test</span><span class="op" id="7594008">.</span><span class="ident" id="7594009">x</span><span class="op" id="7594010">,</span>&nbsp;<span class="ident" id="7594012">test</span><span class="op" id="7594016">.</span><span class="ident" id="7594017">sum</span><span class="op" id="7594020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594024">testRatBin</span><span class="op" id="7594034">(</span><span class="ident" id="7594035">t</span><span class="op" id="7594036">,</span>&nbsp;<span class="ident" id="7594038">i</span><span class="op" id="7594039">,</span>&nbsp;<span class="string" id="7594041">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7594056">,</span>&nbsp;<span class="op" id="7594058">(</span><span class="op" id="7594059">*</span><span class="ident" id="7594060">Rat</span><span class="op" id="7594063">)</span><span class="op" id="7594064">.</span><span class="ident" id="7594065">Add</span><span class="op" id="7594068">,</span>&nbsp;<span class="ident" id="7594070">arg</span><span class="op" id="7594073">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594078">arg</span>&nbsp;<span class="op" id="7594082">=</span>&nbsp;<span class="ident" id="7594084">ratBinArg</span><span class="op" id="7594093">{</span><span class="ident" id="7594094">test</span><span class="op" id="7594098">.</span><span class="ident" id="7594099">sum</span><span class="op" id="7594102">,</span>&nbsp;<span class="ident" id="7594104">test</span><span class="op" id="7594108">.</span><span class="ident" id="7594109">x</span><span class="op" id="7594110">,</span>&nbsp;<span class="ident" id="7594112">test</span><span class="op" id="7594116">.</span><span class="ident" id="7594117">y</span><span class="op" id="7594118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594122">testRatBin</span><span class="op" id="7594132">(</span><span class="ident" id="7594133">t</span><span class="op" id="7594134">,</span>&nbsp;<span class="ident" id="7594136">i</span><span class="op" id="7594137">,</span>&nbsp;<span class="string" id="7594139">&#34;Sub&#34;</span><span class="op" id="7594144">,</span>&nbsp;<span class="op" id="7594146">(</span><span class="op" id="7594147">*</span><span class="ident" id="7594148">Rat</span><span class="op" id="7594151">)</span><span class="op" id="7594152">.</span><span class="ident" id="7594153">Sub</span><span class="op" id="7594156">,</span>&nbsp;<span class="ident" id="7594158">arg</span><span class="op" id="7594161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594166">arg</span>&nbsp;<span class="op" id="7594170">=</span>&nbsp;<span class="ident" id="7594172">ratBinArg</span><span class="op" id="7594181">{</span><span class="ident" id="7594182">test</span><span class="op" id="7594186">.</span><span class="ident" id="7594187">sum</span><span class="op" id="7594190">,</span>&nbsp;<span class="ident" id="7594192">test</span><span class="op" id="7594196">.</span><span class="ident" id="7594197">y</span><span class="op" id="7594198">,</span>&nbsp;<span class="ident" id="7594200">test</span><span class="op" id="7594204">.</span><span class="ident" id="7594205">x</span><span class="op" id="7594206">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594210">testRatBin</span><span class="op" id="7594220">(</span><span class="ident" id="7594221">t</span><span class="op" id="7594222">,</span>&nbsp;<span class="ident" id="7594224">i</span><span class="op" id="7594225">,</span>&nbsp;<span class="string" id="7594227">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7594242">,</span>&nbsp;<span class="op" id="7594244">(</span><span class="op" id="7594245">*</span><span class="ident" id="7594246">Rat</span><span class="op" id="7594249">)</span><span class="op" id="7594250">.</span><span class="ident" id="7594251">Sub</span><span class="op" id="7594254">,</span>&nbsp;<span class="ident" id="7594256">arg</span><span class="op" id="7594259">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594264">arg</span>&nbsp;<span class="op" id="7594268">=</span>&nbsp;<span class="ident" id="7594270">ratBinArg</span><span class="op" id="7594279">{</span><span class="ident" id="7594280">test</span><span class="op" id="7594284">.</span><span class="ident" id="7594285">x</span><span class="op" id="7594286">,</span>&nbsp;<span class="ident" id="7594288">test</span><span class="op" id="7594292">.</span><span class="ident" id="7594293">y</span><span class="op" id="7594294">,</span>&nbsp;<span class="ident" id="7594296">test</span><span class="op" id="7594300">.</span><span class="ident" id="7594301">prod</span><span class="op" id="7594305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594309">testRatBin</span><span class="op" id="7594319">(</span><span class="ident" id="7594320">t</span><span class="op" id="7594321">,</span>&nbsp;<span class="ident" id="7594323">i</span><span class="op" id="7594324">,</span>&nbsp;<span class="string" id="7594326">&#34;Mul&#34;</span><span class="op" id="7594331">,</span>&nbsp;<span class="op" id="7594333">(</span><span class="op" id="7594334">*</span><span class="ident" id="7594335">Rat</span><span class="op" id="7594338">)</span><span class="op" id="7594339">.</span><span class="ident" id="7594340">Mul</span><span class="op" id="7594343">,</span>&nbsp;<span class="ident" id="7594345">arg</span><span class="op" id="7594348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594353">arg</span>&nbsp;<span class="op" id="7594357">=</span>&nbsp;<span class="ident" id="7594359">ratBinArg</span><span class="op" id="7594368">{</span><span class="ident" id="7594369">test</span><span class="op" id="7594373">.</span><span class="ident" id="7594374">y</span><span class="op" id="7594375">,</span>&nbsp;<span class="ident" id="7594377">test</span><span class="op" id="7594381">.</span><span class="ident" id="7594382">x</span><span class="op" id="7594383">,</span>&nbsp;<span class="ident" id="7594385">test</span><span class="op" id="7594389">.</span><span class="ident" id="7594390">prod</span><span class="op" id="7594394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594398">testRatBin</span><span class="op" id="7594408">(</span><span class="ident" id="7594409">t</span><span class="op" id="7594410">,</span>&nbsp;<span class="ident" id="7594412">i</span><span class="op" id="7594413">,</span>&nbsp;<span class="string" id="7594415">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7594430">,</span>&nbsp;<span class="op" id="7594432">(</span><span class="op" id="7594433">*</span><span class="ident" id="7594434">Rat</span><span class="op" id="7594437">)</span><span class="op" id="7594438">.</span><span class="ident" id="7594439">Mul</span><span class="op" id="7594442">,</span>&nbsp;<span class="ident" id="7594444">arg</span><span class="op" id="7594447">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594452">if</span>&nbsp;<span class="ident" id="7594455">test</span><span class="op" id="7594459">.</span><span class="ident" id="7594460">x</span>&nbsp;<span class="op" id="7594462">!=</span>&nbsp;<span class="string" id="7594465">&#34;0&#34;</span>&nbsp;<span class="op" id="7594469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594474">arg</span>&nbsp;<span class="op" id="7594478">=</span>&nbsp;<span class="ident" id="7594480">ratBinArg</span><span class="op" id="7594489">{</span><span class="ident" id="7594490">test</span><span class="op" id="7594494">.</span><span class="ident" id="7594495">prod</span><span class="op" id="7594499">,</span>&nbsp;<span class="ident" id="7594501">test</span><span class="op" id="7594505">.</span><span class="ident" id="7594506">x</span><span class="op" id="7594507">,</span>&nbsp;<span class="ident" id="7594509">test</span><span class="op" id="7594513">.</span><span class="ident" id="7594514">y</span><span class="op" id="7594515">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594520">testRatBin</span><span class="op" id="7594530">(</span><span class="ident" id="7594531">t</span><span class="op" id="7594532">,</span>&nbsp;<span class="ident" id="7594534">i</span><span class="op" id="7594535">,</span>&nbsp;<span class="string" id="7594537">&#34;Quo&#34;</span><span class="op" id="7594542">,</span>&nbsp;<span class="op" id="7594544">(</span><span class="op" id="7594545">*</span><span class="ident" id="7594546">Rat</span><span class="op" id="7594549">)</span><span class="op" id="7594550">.</span><span class="ident" id="7594551">Quo</span><span class="op" id="7594554">,</span>&nbsp;<span class="ident" id="7594556">arg</span><span class="op" id="7594559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594568">if</span>&nbsp;<span class="ident" id="7594571">test</span><span class="op" id="7594575">.</span><span class="ident" id="7594576">y</span>&nbsp;<span class="op" id="7594578">!=</span>&nbsp;<span class="string" id="7594581">&#34;0&#34;</span>&nbsp;<span class="op" id="7594585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594590">arg</span>&nbsp;<span class="op" id="7594594">=</span>&nbsp;<span class="ident" id="7594596">ratBinArg</span><span class="op" id="7594605">{</span><span class="ident" id="7594606">test</span><span class="op" id="7594610">.</span><span class="ident" id="7594611">prod</span><span class="op" id="7594615">,</span>&nbsp;<span class="ident" id="7594617">test</span><span class="op" id="7594621">.</span><span class="ident" id="7594622">y</span><span class="op" id="7594623">,</span>&nbsp;<span class="ident" id="7594625">test</span><span class="op" id="7594629">.</span><span class="ident" id="7594630">x</span><span class="op" id="7594631">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594636">testRatBin</span><span class="op" id="7594646">(</span><span class="ident" id="7594647">t</span><span class="op" id="7594648">,</span>&nbsp;<span class="ident" id="7594650">i</span><span class="op" id="7594651">,</span>&nbsp;<span class="string" id="7594653">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7594668">,</span>&nbsp;<span class="op" id="7594670">(</span><span class="op" id="7594671">*</span><span class="ident" id="7594672">Rat</span><span class="op" id="7594675">)</span><span class="op" id="7594676">.</span><span class="ident" id="7594677">Quo</span><span class="op" id="7594680">,</span>&nbsp;<span class="ident" id="7594682">arg</span><span class="op" id="7594685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594692">}</span><br>
<span class="lineno"></span><span class="op" id="7594694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7594697">func</span>&nbsp;<span class="ident" id="7594702">TestIssue820</span><span class="op" id="7594714">(</span><span class="ident" id="7594715">t</span>&nbsp;<span class="op" id="7594717">*</span><span class="ident" id="7594718">testing</span><span class="op" id="7594725">.</span><span class="ident" id="7594726">T</span><span class="op" id="7594727">)</span>&nbsp;<span class="op" id="7594729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594732">x</span>&nbsp;<span class="op" id="7594734">:=</span>&nbsp;<span class="ident" id="7594737">NewRat</span><span class="op" id="7594743">(</span><span class="num" id="7594744">3</span><span class="op" id="7594745">,</span>&nbsp;<span class="num" id="7594747">1</span><span class="op" id="7594748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594751">y</span>&nbsp;<span class="op" id="7594753">:=</span>&nbsp;<span class="ident" id="7594756">NewRat</span><span class="op" id="7594762">(</span><span class="num" id="7594763">2</span><span class="op" id="7594764">,</span>&nbsp;<span class="num" id="7594766">1</span><span class="op" id="7594767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594770">z</span>&nbsp;<span class="op" id="7594772">:=</span>&nbsp;<span class="ident" id="7594775">y</span><span class="op" id="7594776">.</span><span class="ident" id="7594777">Quo</span><span class="op" id="7594780">(</span><span class="ident" id="7594781">x</span><span class="op" id="7594782">,</span>&nbsp;<span class="ident" id="7594784">y</span><span class="op" id="7594785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594788">q</span>&nbsp;<span class="op" id="7594790">:=</span>&nbsp;<span class="ident" id="7594793">NewRat</span><span class="op" id="7594799">(</span><span class="num" id="7594800">3</span><span class="op" id="7594801">,</span>&nbsp;<span class="num" id="7594803">2</span><span class="op" id="7594804">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594807">if</span>&nbsp;<span class="ident" id="7594810">z</span><span class="op" id="7594811">.</span><span class="ident" id="7594812">Cmp</span><span class="op" id="7594815">(</span><span class="ident" id="7594816">q</span><span class="op" id="7594817">)</span>&nbsp;<span class="op" id="7594819">!=</span>&nbsp;<span class="num" id="7594822">0</span>&nbsp;<span class="op" id="7594824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594828">t</span><span class="op" id="7594829">.</span><span class="ident" id="7594830">Errorf</span><span class="op" id="7594836">(</span><span class="string" id="7594837">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7594853">,</span>&nbsp;<span class="ident" id="7594855">z</span><span class="op" id="7594856">,</span>&nbsp;<span class="ident" id="7594858">q</span><span class="op" id="7594859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594866">y</span>&nbsp;<span class="op" id="7594868">=</span>&nbsp;<span class="ident" id="7594870">NewRat</span><span class="op" id="7594876">(</span><span class="num" id="7594877">3</span><span class="op" id="7594878">,</span>&nbsp;<span class="num" id="7594880">1</span><span class="op" id="7594881">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594884">x</span>&nbsp;<span class="op" id="7594886">=</span>&nbsp;<span class="ident" id="7594888">NewRat</span><span class="op" id="7594894">(</span><span class="num" id="7594895">2</span><span class="op" id="7594896">,</span>&nbsp;<span class="num" id="7594898">1</span><span class="op" id="7594899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594902">z</span>&nbsp;<span class="op" id="7594904">=</span>&nbsp;<span class="ident" id="7594906">y</span><span class="op" id="7594907">.</span><span class="ident" id="7594908">Quo</span><span class="op" id="7594911">(</span><span class="ident" id="7594912">x</span><span class="op" id="7594913">,</span>&nbsp;<span class="ident" id="7594915">y</span><span class="op" id="7594916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594919">q</span>&nbsp;<span class="op" id="7594921">=</span>&nbsp;<span class="ident" id="7594923">NewRat</span><span class="op" id="7594929">(</span><span class="num" id="7594930">2</span><span class="op" id="7594931">,</span>&nbsp;<span class="num" id="7594933">3</span><span class="op" id="7594934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7594937">if</span>&nbsp;<span class="ident" id="7594940">z</span><span class="op" id="7594941">.</span><span class="ident" id="7594942">Cmp</span><span class="op" id="7594945">(</span><span class="ident" id="7594946">q</span><span class="op" id="7594947">)</span>&nbsp;<span class="op" id="7594949">!=</span>&nbsp;<span class="num" id="7594952">0</span>&nbsp;<span class="op" id="7594954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594958">t</span><span class="op" id="7594959">.</span><span class="ident" id="7594960">Errorf</span><span class="op" id="7594966">(</span><span class="string" id="7594967">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7594983">,</span>&nbsp;<span class="ident" id="7594985">z</span><span class="op" id="7594986">,</span>&nbsp;<span class="ident" id="7594988">q</span><span class="op" id="7594989">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7594992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7594996">x</span>&nbsp;<span class="op" id="7594998">=</span>&nbsp;<span class="ident" id="7595000">NewRat</span><span class="op" id="7595006">(</span><span class="num" id="7595007">3</span><span class="op" id="7595008">,</span>&nbsp;<span class="num" id="7595010">1</span><span class="op" id="7595011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595014">z</span>&nbsp;<span class="op" id="7595016">=</span>&nbsp;<span class="ident" id="7595018">x</span><span class="op" id="7595019">.</span><span class="ident" id="7595020">Quo</span><span class="op" id="7595023">(</span><span class="ident" id="7595024">x</span><span class="op" id="7595025">,</span>&nbsp;<span class="ident" id="7595027">x</span><span class="op" id="7595028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595031">q</span>&nbsp;<span class="op" id="7595033">=</span>&nbsp;<span class="ident" id="7595035">NewRat</span><span class="op" id="7595041">(</span><span class="num" id="7595042">3</span><span class="op" id="7595043">,</span>&nbsp;<span class="num" id="7595045">3</span><span class="op" id="7595046">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595049">if</span>&nbsp;<span class="ident" id="7595052">z</span><span class="op" id="7595053">.</span><span class="ident" id="7595054">Cmp</span><span class="op" id="7595057">(</span><span class="ident" id="7595058">q</span><span class="op" id="7595059">)</span>&nbsp;<span class="op" id="7595061">!=</span>&nbsp;<span class="num" id="7595064">0</span>&nbsp;<span class="op" id="7595066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595070">t</span><span class="op" id="7595071">.</span><span class="ident" id="7595072">Errorf</span><span class="op" id="7595078">(</span><span class="string" id="7595079">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7595095">,</span>&nbsp;<span class="ident" id="7595097">z</span><span class="op" id="7595098">,</span>&nbsp;<span class="ident" id="7595100">q</span><span class="op" id="7595101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595104">}</span><br>
<span class="lineno"></span><span class="op" id="7595106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7595109">var</span>&nbsp;<span class="ident" id="7595113">setFrac64Tests</span>&nbsp;<span class="op" id="7595128">=</span>&nbsp;<span class="op" id="7595130">[</span><span class="op" id="7595131">]</span><span class="keyword" id="7595132">struct</span>&nbsp;<span class="op" id="7595139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595142">a</span><span class="op" id="7595143">,</span>&nbsp;<span class="ident" id="7595145">b</span>&nbsp;<span class="ident" id="7595147">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595154">out</span>&nbsp;&nbsp;<span class="builtintype" id="7595159">string</span><br>
<span class="lineno"></span><span class="op" id="7595166">}</span><span class="op" id="7595167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595170">{</span><span class="num" id="7595171">0</span><span class="op" id="7595172">,</span>&nbsp;<span class="num" id="7595174">1</span><span class="op" id="7595175">,</span>&nbsp;<span class="string" id="7595177">&#34;0&#34;</span><span class="op" id="7595180">}</span><span class="op" id="7595181">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595184">{</span><span class="num" id="7595185">0</span><span class="op" id="7595186">,</span>&nbsp;<span class="op" id="7595188">-</span><span class="num" id="7595189">1</span><span class="op" id="7595190">,</span>&nbsp;<span class="string" id="7595192">&#34;0&#34;</span><span class="op" id="7595195">}</span><span class="op" id="7595196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595199">{</span><span class="num" id="7595200">1</span><span class="op" id="7595201">,</span>&nbsp;<span class="num" id="7595203">1</span><span class="op" id="7595204">,</span>&nbsp;<span class="string" id="7595206">&#34;1&#34;</span><span class="op" id="7595209">}</span><span class="op" id="7595210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595213">{</span><span class="op" id="7595214">-</span><span class="num" id="7595215">1</span><span class="op" id="7595216">,</span>&nbsp;<span class="num" id="7595218">1</span><span class="op" id="7595219">,</span>&nbsp;<span class="string" id="7595221">&#34;-1&#34;</span><span class="op" id="7595225">}</span><span class="op" id="7595226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595229">{</span><span class="num" id="7595230">1</span><span class="op" id="7595231">,</span>&nbsp;<span class="op" id="7595233">-</span><span class="num" id="7595234">1</span><span class="op" id="7595235">,</span>&nbsp;<span class="string" id="7595237">&#34;-1&#34;</span><span class="op" id="7595241">}</span><span class="op" id="7595242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595245">{</span><span class="op" id="7595246">-</span><span class="num" id="7595247">1</span><span class="op" id="7595248">,</span>&nbsp;<span class="op" id="7595250">-</span><span class="num" id="7595251">1</span><span class="op" id="7595252">,</span>&nbsp;<span class="string" id="7595254">&#34;1&#34;</span><span class="op" id="7595257">}</span><span class="op" id="7595258">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595261">{</span><span class="op" id="7595262">-</span><span class="num" id="7595263">9223372036854775808</span><span class="op" id="7595282">,</span>&nbsp;<span class="op" id="7595284">-</span><span class="num" id="7595285">9223372036854775808</span><span class="op" id="7595304">,</span>&nbsp;<span class="string" id="7595306">&#34;1&#34;</span><span class="op" id="7595309">}</span><span class="op" id="7595310">,</span><br>
<span class="lineno"></span><span class="op" id="7595312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595315">func</span>&nbsp;<span class="ident" id="7595320">TestRatSetFrac64Rat</span><span class="op" id="7595339">(</span><span class="ident" id="7595340">t</span>&nbsp;<span class="op" id="7595342">*</span><span class="ident" id="7595343">testing</span><span class="op" id="7595350">.</span><span class="ident" id="7595351">T</span><span class="op" id="7595352">)</span>&nbsp;<span class="op" id="7595354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595357">for</span>&nbsp;<span class="ident" id="7595361">i</span><span class="op" id="7595362">,</span>&nbsp;<span class="ident" id="7595364">test</span>&nbsp;<span class="op" id="7595369">:=</span>&nbsp;<span class="keyword" id="7595372">range</span>&nbsp;<span class="ident" id="7595378">setFrac64Tests</span>&nbsp;<span class="op" id="7595393">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595397">x</span>&nbsp;<span class="op" id="7595399">:=</span>&nbsp;<span class="builtinfunc" id="7595402">new</span><span class="op" id="7595405">(</span><span class="ident" id="7595406">Rat</span><span class="op" id="7595409">)</span><span class="op" id="7595410">.</span><span class="ident" id="7595411">SetFrac64</span><span class="op" id="7595420">(</span><span class="ident" id="7595421">test</span><span class="op" id="7595425">.</span><span class="ident" id="7595426">a</span><span class="op" id="7595427">,</span>&nbsp;<span class="ident" id="7595429">test</span><span class="op" id="7595433">.</span><span class="ident" id="7595434">b</span><span class="op" id="7595435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595439">if</span>&nbsp;<span class="ident" id="7595442">x</span><span class="op" id="7595443">.</span><span class="ident" id="7595444">RatString</span><span class="op" id="7595453">(</span><span class="op" id="7595454">)</span>&nbsp;<span class="op" id="7595456">!=</span>&nbsp;<span class="ident" id="7595459">test</span><span class="op" id="7595463">.</span><span class="ident" id="7595464">out</span>&nbsp;<span class="op" id="7595468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595473">t</span><span class="op" id="7595474">.</span><span class="ident" id="7595475">Errorf</span><span class="op" id="7595481">(</span><span class="string" id="7595482">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7595502">,</span>&nbsp;<span class="ident" id="7595504">i</span><span class="op" id="7595505">,</span>&nbsp;<span class="ident" id="7595507">x</span><span class="op" id="7595508">.</span><span class="ident" id="7595509">RatString</span><span class="op" id="7595518">(</span><span class="op" id="7595519">)</span><span class="op" id="7595520">,</span>&nbsp;<span class="ident" id="7595522">test</span><span class="op" id="7595526">.</span><span class="ident" id="7595527">out</span><span class="op" id="7595530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595537">}</span><br>
<span class="lineno">390</span><span class="op" id="7595539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7595542">func</span>&nbsp;<span class="ident" id="7595547">TestRatGobEncoding</span><span class="op" id="7595565">(</span><span class="ident" id="7595566">t</span>&nbsp;<span class="op" id="7595568">*</span><span class="ident" id="7595569">testing</span><span class="op" id="7595576">.</span><span class="ident" id="7595577">T</span><span class="op" id="7595578">)</span>&nbsp;<span class="op" id="7595580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595583">var</span>&nbsp;<span class="ident" id="7595587">medium</span>&nbsp;<span class="ident" id="7595594">bytes</span><span class="op" id="7595599">.</span><span class="ident" id="7595600">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595608">enc</span>&nbsp;<span class="op" id="7595612">:=</span>&nbsp;<span class="ident" id="7595615">gob</span><span class="op" id="7595618">.</span><span class="ident" id="7595619">NewEncoder</span><span class="op" id="7595629">(</span><span class="op" id="7595630">&amp;</span><span class="ident" id="7595631">medium</span><span class="op" id="7595637">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595640">dec</span>&nbsp;<span class="op" id="7595644">:=</span>&nbsp;<span class="ident" id="7595647">gob</span><span class="op" id="7595650">.</span><span class="ident" id="7595651">NewDecoder</span><span class="op" id="7595661">(</span><span class="op" id="7595662">&amp;</span><span class="ident" id="7595663">medium</span><span class="op" id="7595669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595672">for</span>&nbsp;<span class="ident" id="7595676">_</span><span class="op" id="7595677">,</span>&nbsp;<span class="ident" id="7595679">test</span>&nbsp;<span class="op" id="7595684">:=</span>&nbsp;<span class="keyword" id="7595687">range</span>&nbsp;<span class="ident" id="7595693">encodingTests</span>&nbsp;<span class="op" id="7595707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595711">medium</span><span class="op" id="7595717">.</span><span class="ident" id="7595718">Reset</span><span class="op" id="7595723">(</span><span class="op" id="7595724">)</span>&nbsp;<span class="comment" id="7595726">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595785">var</span>&nbsp;<span class="ident" id="7595789">tx</span>&nbsp;<span class="ident" id="7595792">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595798">tx</span><span class="op" id="7595800">.</span><span class="ident" id="7595801">SetString</span><span class="op" id="7595810">(</span><span class="ident" id="7595811">test</span>&nbsp;<span class="op" id="7595816">+</span>&nbsp;<span class="string" id="7595818">&#34;.14159265&#34;</span><span class="op" id="7595829">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595833">if</span>&nbsp;<span class="ident" id="7595836">err</span>&nbsp;<span class="op" id="7595840">:=</span>&nbsp;<span class="ident" id="7595843">enc</span><span class="op" id="7595846">.</span><span class="ident" id="7595847">Encode</span><span class="op" id="7595853">(</span><span class="op" id="7595854">&amp;</span><span class="ident" id="7595855">tx</span><span class="op" id="7595857">)</span><span class="op" id="7595858">;</span>&nbsp;<span class="ident" id="7595860">err</span>&nbsp;<span class="op" id="7595864">!=</span>&nbsp;<span class="ident" id="7595867">nil</span>&nbsp;<span class="op" id="7595871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595876">t</span><span class="op" id="7595877">.</span><span class="ident" id="7595878">Errorf</span><span class="op" id="7595884">(</span><span class="string" id="7595885">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7595912">,</span>&nbsp;<span class="op" id="7595914">&amp;</span><span class="ident" id="7595915">tx</span><span class="op" id="7595917">,</span>&nbsp;<span class="ident" id="7595919">err</span><span class="op" id="7595922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7595926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595930">var</span>&nbsp;<span class="ident" id="7595934">rx</span>&nbsp;<span class="ident" id="7595937">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7595943">if</span>&nbsp;<span class="ident" id="7595946">err</span>&nbsp;<span class="op" id="7595950">:=</span>&nbsp;<span class="ident" id="7595953">dec</span><span class="op" id="7595956">.</span><span class="ident" id="7595957">Decode</span><span class="op" id="7595963">(</span><span class="op" id="7595964">&amp;</span><span class="ident" id="7595965">rx</span><span class="op" id="7595967">)</span><span class="op" id="7595968">;</span>&nbsp;<span class="ident" id="7595970">err</span>&nbsp;<span class="op" id="7595974">!=</span>&nbsp;<span class="ident" id="7595977">nil</span>&nbsp;<span class="op" id="7595981">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7595986">t</span><span class="op" id="7595987">.</span><span class="ident" id="7595988">Errorf</span><span class="op" id="7595994">(</span><span class="string" id="7595995">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7596022">,</span>&nbsp;<span class="op" id="7596024">&amp;</span><span class="ident" id="7596025">tx</span><span class="op" id="7596027">,</span>&nbsp;<span class="ident" id="7596029">err</span><span class="op" id="7596032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596040">if</span>&nbsp;<span class="ident" id="7596043">rx</span><span class="op" id="7596045">.</span><span class="ident" id="7596046">Cmp</span><span class="op" id="7596049">(</span><span class="op" id="7596050">&amp;</span><span class="ident" id="7596051">tx</span><span class="op" id="7596053">)</span>&nbsp;<span class="op" id="7596055">!=</span>&nbsp;<span class="num" id="7596058">0</span>&nbsp;<span class="op" id="7596060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596065">t</span><span class="op" id="7596066">.</span><span class="ident" id="7596067">Errorf</span><span class="op" id="7596073">(</span><span class="string" id="7596074">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7596117">,</span>&nbsp;<span class="op" id="7596119">&amp;</span><span class="ident" id="7596120">tx</span><span class="op" id="7596122">,</span>&nbsp;<span class="op" id="7596124">&amp;</span><span class="ident" id="7596125">rx</span><span class="op" id="7596127">,</span>&nbsp;<span class="op" id="7596129">&amp;</span><span class="ident" id="7596130">tx</span><span class="op" id="7596132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596136">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596139">}</span><br>
<span class="lineno"></span><span class="op" id="7596141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7596144">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7596239">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7596264">func</span>&nbsp;<span class="ident" id="7596269">TestGobEncodingNilRatInSlice</span><span class="op" id="7596297">(</span><span class="ident" id="7596298">t</span>&nbsp;<span class="op" id="7596300">*</span><span class="ident" id="7596301">testing</span><span class="op" id="7596308">.</span><span class="ident" id="7596309">T</span><span class="op" id="7596310">)</span>&nbsp;<span class="op" id="7596312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596315">buf</span>&nbsp;<span class="op" id="7596319">:=</span>&nbsp;<span class="builtinfunc" id="7596322">new</span><span class="op" id="7596325">(</span><span class="ident" id="7596326">bytes</span><span class="op" id="7596331">.</span><span class="ident" id="7596332">Buffer</span><span class="op" id="7596338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596341">enc</span>&nbsp;<span class="op" id="7596345">:=</span>&nbsp;<span class="ident" id="7596348">gob</span><span class="op" id="7596351">.</span><span class="ident" id="7596352">NewEncoder</span><span class="op" id="7596362">(</span><span class="ident" id="7596363">buf</span><span class="op" id="7596366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596369">dec</span>&nbsp;<span class="op" id="7596373">:=</span>&nbsp;<span class="ident" id="7596376">gob</span><span class="op" id="7596379">.</span><span class="ident" id="7596380">NewDecoder</span><span class="op" id="7596390">(</span><span class="ident" id="7596391">buf</span><span class="op" id="7596394">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596398">var</span>&nbsp;<span class="ident" id="7596402">in</span>&nbsp;<span class="op" id="7596405">=</span>&nbsp;<span class="builtinfunc" id="7596407">make</span><span class="op" id="7596411">(</span><span class="op" id="7596412">[</span><span class="op" id="7596413">]</span><span class="op" id="7596414">*</span><span class="ident" id="7596415">Rat</span><span class="op" id="7596418">,</span>&nbsp;<span class="num" id="7596420">1</span><span class="op" id="7596421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596424">err</span>&nbsp;<span class="op" id="7596428">:=</span>&nbsp;<span class="ident" id="7596431">enc</span><span class="op" id="7596434">.</span><span class="ident" id="7596435">Encode</span><span class="op" id="7596441">(</span><span class="op" id="7596442">&amp;</span><span class="ident" id="7596443">in</span><span class="op" id="7596445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596448">if</span>&nbsp;<span class="ident" id="7596451">err</span>&nbsp;<span class="op" id="7596455">!=</span>&nbsp;<span class="ident" id="7596458">nil</span>&nbsp;<span class="op" id="7596462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596466">t</span><span class="op" id="7596467">.</span><span class="ident" id="7596468">Errorf</span><span class="op" id="7596474">(</span><span class="string" id="7596475">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7596498">,</span>&nbsp;<span class="ident" id="7596500">err</span><span class="op" id="7596503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596506">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596509">var</span>&nbsp;<span class="ident" id="7596513">out</span>&nbsp;<span class="op" id="7596517">[</span><span class="op" id="7596518">]</span><span class="op" id="7596519">*</span><span class="ident" id="7596520">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596525">err</span>&nbsp;<span class="op" id="7596529">=</span>&nbsp;<span class="ident" id="7596531">dec</span><span class="op" id="7596534">.</span><span class="ident" id="7596535">Decode</span><span class="op" id="7596541">(</span><span class="op" id="7596542">&amp;</span><span class="ident" id="7596543">out</span><span class="op" id="7596546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596549">if</span>&nbsp;<span class="ident" id="7596552">err</span>&nbsp;<span class="op" id="7596556">!=</span>&nbsp;<span class="ident" id="7596559">nil</span>&nbsp;<span class="op" id="7596563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596567">t</span><span class="op" id="7596568">.</span><span class="ident" id="7596569">Fatalf</span><span class="op" id="7596575">(</span><span class="string" id="7596576">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7596599">,</span>&nbsp;<span class="ident" id="7596601">err</span><span class="op" id="7596604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596607">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596610">if</span>&nbsp;<span class="builtinfunc" id="7596613">len</span><span class="op" id="7596616">(</span><span class="ident" id="7596617">out</span><span class="op" id="7596620">)</span>&nbsp;<span class="op" id="7596622">!=</span>&nbsp;<span class="num" id="7596625">1</span>&nbsp;<span class="op" id="7596627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596631">t</span><span class="op" id="7596632">.</span><span class="ident" id="7596633">Fatalf</span><span class="op" id="7596639">(</span><span class="string" id="7596640">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7596666">,</span>&nbsp;<span class="builtinfunc" id="7596668">len</span><span class="op" id="7596671">(</span><span class="ident" id="7596672">out</span><span class="op" id="7596675">)</span><span class="op" id="7596676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596682">var</span>&nbsp;<span class="ident" id="7596686">zero</span>&nbsp;<span class="ident" id="7596691">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7596696">if</span>&nbsp;<span class="ident" id="7596699">out</span><span class="op" id="7596702">[</span><span class="num" id="7596703">0</span><span class="op" id="7596704">]</span><span class="op" id="7596705">.</span><span class="ident" id="7596706">Cmp</span><span class="op" id="7596709">(</span><span class="op" id="7596710">&amp;</span><span class="ident" id="7596711">zero</span><span class="op" id="7596715">)</span>&nbsp;<span class="op" id="7596717">!=</span>&nbsp;<span class="num" id="7596720">0</span>&nbsp;<span class="op" id="7596722">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7596726">t</span><span class="op" id="7596727">.</span><span class="ident" id="7596728">Errorf</span><span class="op" id="7596734">(</span><span class="string" id="7596735">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7596787">,</span>&nbsp;<span class="ident" id="7596789">out</span><span class="op" id="7596792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7596795">}</span><br>
<span class="lineno"></span><span class="op" id="7596797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7596800">var</span>&nbsp;<span class="ident" id="7596804">ratNums</span>&nbsp;<span class="op" id="7596812">=</span>&nbsp;<span class="op" id="7596814">[</span><span class="op" id="7596815">]</span><span class="builtintype" id="7596816">string</span><span class="op" id="7596822">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596825">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7596903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596906">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7596949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596952">&#34;-141592653589793&#34;</span><span class="op" id="7596970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596973">&#34;-1&#34;</span><span class="op" id="7596977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596980">&#34;0&#34;</span><span class="op" id="7596983">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596986">&#34;1&#34;</span><span class="op" id="7596989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7596992">&#34;141592653589793&#34;</span><span class="op" id="7597009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597012">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7597054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597057">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7597134">,</span><br>
<span class="lineno"></span><span class="op" id="7597136">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7597139">var</span>&nbsp;<span class="ident" id="7597143">ratDenoms</span>&nbsp;<span class="op" id="7597153">=</span>&nbsp;<span class="op" id="7597155">[</span><span class="op" id="7597156">]</span><span class="builtintype" id="7597157">string</span><span class="op" id="7597163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597166">&#34;1&#34;</span><span class="op" id="7597169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597172">&#34;718281828459045&#34;</span><span class="op" id="7597189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597192">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7597234">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7597237">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7597314">,</span><br>
<span class="lineno"></span><span class="op" id="7597316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7597319">func</span>&nbsp;<span class="ident" id="7597324">TestRatJSONEncoding</span><span class="op" id="7597343">(</span><span class="ident" id="7597344">t</span>&nbsp;<span class="op" id="7597346">*</span><span class="ident" id="7597347">testing</span><span class="op" id="7597354">.</span><span class="ident" id="7597355">T</span><span class="op" id="7597356">)</span>&nbsp;<span class="op" id="7597358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597361">for</span>&nbsp;<span class="ident" id="7597365">_</span><span class="op" id="7597366">,</span>&nbsp;<span class="ident" id="7597368">num</span>&nbsp;<span class="op" id="7597372">:=</span>&nbsp;<span class="keyword" id="7597375">range</span>&nbsp;<span class="ident" id="7597381">ratNums</span>&nbsp;<span class="op" id="7597389">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597393">for</span>&nbsp;<span class="ident" id="7597397">_</span><span class="op" id="7597398">,</span>&nbsp;<span class="ident" id="7597400">denom</span>&nbsp;<span class="op" id="7597406">:=</span>&nbsp;<span class="keyword" id="7597409">range</span>&nbsp;<span class="ident" id="7597415">ratDenoms</span>&nbsp;<span class="op" id="7597425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597430">var</span>&nbsp;<span class="ident" id="7597434">tx</span>&nbsp;<span class="ident" id="7597437">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597444">tx</span><span class="op" id="7597446">.</span><span class="ident" id="7597447">SetString</span><span class="op" id="7597456">(</span><span class="ident" id="7597457">num</span>&nbsp;<span class="op" id="7597461">+</span>&nbsp;<span class="string" id="7597463">&#34;/&#34;</span>&nbsp;<span class="op" id="7597467">+</span>&nbsp;<span class="ident" id="7597469">denom</span><span class="op" id="7597474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597479">b</span><span class="op" id="7597480">,</span>&nbsp;<span class="ident" id="7597482">err</span>&nbsp;<span class="op" id="7597486">:=</span>&nbsp;<span class="ident" id="7597489">json</span><span class="op" id="7597493">.</span><span class="ident" id="7597494">Marshal</span><span class="op" id="7597501">(</span><span class="op" id="7597502">&amp;</span><span class="ident" id="7597503">tx</span><span class="op" id="7597505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597510">if</span>&nbsp;<span class="ident" id="7597513">err</span>&nbsp;<span class="op" id="7597517">!=</span>&nbsp;<span class="ident" id="7597520">nil</span>&nbsp;<span class="op" id="7597524">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597530">t</span><span class="op" id="7597531">.</span><span class="ident" id="7597532">Errorf</span><span class="op" id="7597538">(</span><span class="string" id="7597539">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7597568">,</span>&nbsp;<span class="op" id="7597570">&amp;</span><span class="ident" id="7597571">tx</span><span class="op" id="7597573">,</span>&nbsp;<span class="ident" id="7597575">err</span><span class="op" id="7597578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597584">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597601">var</span>&nbsp;<span class="ident" id="7597605">rx</span>&nbsp;<span class="ident" id="7597608">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597615">if</span>&nbsp;<span class="ident" id="7597618">err</span>&nbsp;<span class="op" id="7597622">:=</span>&nbsp;<span class="ident" id="7597625">json</span><span class="op" id="7597629">.</span><span class="ident" id="7597630">Unmarshal</span><span class="op" id="7597639">(</span><span class="ident" id="7597640">b</span><span class="op" id="7597641">,</span>&nbsp;<span class="op" id="7597643">&amp;</span><span class="ident" id="7597644">rx</span><span class="op" id="7597646">)</span><span class="op" id="7597647">;</span>&nbsp;<span class="ident" id="7597649">err</span>&nbsp;<span class="op" id="7597653">!=</span>&nbsp;<span class="ident" id="7597656">nil</span>&nbsp;<span class="op" id="7597660">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597666">t</span><span class="op" id="7597667">.</span><span class="ident" id="7597668">Errorf</span><span class="op" id="7597674">(</span><span class="string" id="7597675">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7597706">,</span>&nbsp;<span class="op" id="7597708">&amp;</span><span class="ident" id="7597709">tx</span><span class="op" id="7597711">,</span>&nbsp;<span class="ident" id="7597713">err</span><span class="op" id="7597716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597722">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597739">if</span>&nbsp;<span class="ident" id="7597742">rx</span><span class="op" id="7597744">.</span><span class="ident" id="7597745">Cmp</span><span class="op" id="7597748">(</span><span class="op" id="7597749">&amp;</span><span class="ident" id="7597750">tx</span><span class="op" id="7597752">)</span>&nbsp;<span class="op" id="7597754">!=</span>&nbsp;<span class="num" id="7597757">0</span>&nbsp;<span class="op" id="7597759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597765">t</span><span class="op" id="7597766">.</span><span class="ident" id="7597767">Errorf</span><span class="op" id="7597773">(</span><span class="string" id="7597774">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7597818">,</span>&nbsp;<span class="op" id="7597820">&amp;</span><span class="ident" id="7597821">tx</span><span class="op" id="7597823">,</span>&nbsp;<span class="op" id="7597825">&amp;</span><span class="ident" id="7597826">rx</span><span class="op" id="7597828">,</span>&nbsp;<span class="op" id="7597830">&amp;</span><span class="ident" id="7597831">tx</span><span class="op" id="7597833">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7597845">}</span><br>
<span class="lineno"></span><span class="op" id="7597847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7597850">func</span>&nbsp;<span class="ident" id="7597855">TestRatXMLEncoding</span><span class="op" id="7597873">(</span><span class="ident" id="7597874">t</span>&nbsp;<span class="op" id="7597876">*</span><span class="ident" id="7597877">testing</span><span class="op" id="7597884">.</span><span class="ident" id="7597885">T</span><span class="op" id="7597886">)</span>&nbsp;<span class="op" id="7597888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597891">for</span>&nbsp;<span class="ident" id="7597895">_</span><span class="op" id="7597896">,</span>&nbsp;<span class="ident" id="7597898">num</span>&nbsp;<span class="op" id="7597902">:=</span>&nbsp;<span class="keyword" id="7597905">range</span>&nbsp;<span class="ident" id="7597911">ratNums</span>&nbsp;<span class="op" id="7597919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597923">for</span>&nbsp;<span class="ident" id="7597927">_</span><span class="op" id="7597928">,</span>&nbsp;<span class="ident" id="7597930">denom</span>&nbsp;<span class="op" id="7597936">:=</span>&nbsp;<span class="keyword" id="7597939">range</span>&nbsp;<span class="ident" id="7597945">ratDenoms</span>&nbsp;<span class="op" id="7597955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7597960">var</span>&nbsp;<span class="ident" id="7597964">tx</span>&nbsp;<span class="ident" id="7597967">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7597974">tx</span><span class="op" id="7597976">.</span><span class="ident" id="7597977">SetString</span><span class="op" id="7597986">(</span><span class="ident" id="7597987">num</span>&nbsp;<span class="op" id="7597991">+</span>&nbsp;<span class="string" id="7597993">&#34;/&#34;</span>&nbsp;<span class="op" id="7597997">+</span>&nbsp;<span class="ident" id="7597999">denom</span><span class="op" id="7598004">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598009">b</span><span class="op" id="7598010">,</span>&nbsp;<span class="ident" id="7598012">err</span>&nbsp;<span class="op" id="7598016">:=</span>&nbsp;<span class="ident" id="7598019">xml</span><span class="op" id="7598022">.</span><span class="ident" id="7598023">Marshal</span><span class="op" id="7598030">(</span><span class="op" id="7598031">&amp;</span><span class="ident" id="7598032">tx</span><span class="op" id="7598034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598039">if</span>&nbsp;<span class="ident" id="7598042">err</span>&nbsp;<span class="op" id="7598046">!=</span>&nbsp;<span class="ident" id="7598049">nil</span>&nbsp;<span class="op" id="7598053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598059">t</span><span class="op" id="7598060">.</span><span class="ident" id="7598061">Errorf</span><span class="op" id="7598067">(</span><span class="string" id="7598068">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7598097">,</span>&nbsp;<span class="op" id="7598099">&amp;</span><span class="ident" id="7598100">tx</span><span class="op" id="7598102">,</span>&nbsp;<span class="ident" id="7598104">err</span><span class="op" id="7598107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598113">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598125">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598130">var</span>&nbsp;<span class="ident" id="7598134">rx</span>&nbsp;<span class="ident" id="7598137">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598144">if</span>&nbsp;<span class="ident" id="7598147">err</span>&nbsp;<span class="op" id="7598151">:=</span>&nbsp;<span class="ident" id="7598154">xml</span><span class="op" id="7598157">.</span><span class="ident" id="7598158">Unmarshal</span><span class="op" id="7598167">(</span><span class="ident" id="7598168">b</span><span class="op" id="7598169">,</span>&nbsp;<span class="op" id="7598171">&amp;</span><span class="ident" id="7598172">rx</span><span class="op" id="7598174">)</span><span class="op" id="7598175">;</span>&nbsp;<span class="ident" id="7598177">err</span>&nbsp;<span class="op" id="7598181">!=</span>&nbsp;<span class="ident" id="7598184">nil</span>&nbsp;<span class="op" id="7598188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598194">t</span><span class="op" id="7598195">.</span><span class="ident" id="7598196">Errorf</span><span class="op" id="7598202">(</span><span class="string" id="7598203">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7598234">,</span>&nbsp;<span class="op" id="7598236">&amp;</span><span class="ident" id="7598237">tx</span><span class="op" id="7598239">,</span>&nbsp;<span class="ident" id="7598241">err</span><span class="op" id="7598244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598250">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598262">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598267">if</span>&nbsp;<span class="ident" id="7598270">rx</span><span class="op" id="7598272">.</span><span class="ident" id="7598273">Cmp</span><span class="op" id="7598276">(</span><span class="op" id="7598277">&amp;</span><span class="ident" id="7598278">tx</span><span class="op" id="7598280">)</span>&nbsp;<span class="op" id="7598282">!=</span>&nbsp;<span class="num" id="7598285">0</span>&nbsp;<span class="op" id="7598287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598293">t</span><span class="op" id="7598294">.</span><span class="ident" id="7598295">Errorf</span><span class="op" id="7598301">(</span><span class="string" id="7598302">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7598345">,</span>&nbsp;<span class="op" id="7598347">&amp;</span><span class="ident" id="7598348">tx</span><span class="op" id="7598350">,</span>&nbsp;<span class="op" id="7598352">&amp;</span><span class="ident" id="7598353">rx</span><span class="op" id="7598355">,</span>&nbsp;<span class="op" id="7598357">&amp;</span><span class="ident" id="7598358">tx</span><span class="op" id="7598360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598372">}</span><br>
<span class="lineno">500</span><span class="op" id="7598374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7598377">func</span>&nbsp;<span class="ident" id="7598382">TestIssue2379</span><span class="op" id="7598395">(</span><span class="ident" id="7598396">t</span>&nbsp;<span class="op" id="7598398">*</span><span class="ident" id="7598399">testing</span><span class="op" id="7598406">.</span><span class="ident" id="7598407">T</span><span class="op" id="7598408">)</span>&nbsp;<span class="op" id="7598410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7598413">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598432">q</span>&nbsp;<span class="op" id="7598434">:=</span>&nbsp;<span class="ident" id="7598437">NewRat</span><span class="op" id="7598443">(</span><span class="num" id="7598444">3</span><span class="op" id="7598445">,</span>&nbsp;<span class="num" id="7598447">2</span><span class="op" id="7598448">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598451">x</span>&nbsp;<span class="op" id="7598453">:=</span>&nbsp;<span class="builtinfunc" id="7598456">new</span><span class="op" id="7598459">(</span><span class="ident" id="7598460">Rat</span><span class="op" id="7598463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598466">x</span><span class="op" id="7598467">.</span><span class="ident" id="7598468">SetFrac</span><span class="op" id="7598475">(</span><span class="ident" id="7598476">NewInt</span><span class="op" id="7598482">(</span><span class="num" id="7598483">3</span><span class="op" id="7598484">)</span><span class="op" id="7598485">,</span>&nbsp;<span class="ident" id="7598487">NewInt</span><span class="op" id="7598493">(</span><span class="num" id="7598494">2</span><span class="op" id="7598495">)</span><span class="op" id="7598496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598499">if</span>&nbsp;<span class="ident" id="7598502">x</span><span class="op" id="7598503">.</span><span class="ident" id="7598504">Cmp</span><span class="op" id="7598507">(</span><span class="ident" id="7598508">q</span><span class="op" id="7598509">)</span>&nbsp;<span class="op" id="7598511">!=</span>&nbsp;<span class="num" id="7598514">0</span>&nbsp;<span class="op" id="7598516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598520">t</span><span class="op" id="7598521">.</span><span class="ident" id="7598522">Errorf</span><span class="op" id="7598528">(</span><span class="string" id="7598529">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7598548">,</span>&nbsp;<span class="ident" id="7598550">x</span><span class="op" id="7598551">,</span>&nbsp;<span class="ident" id="7598553">q</span><span class="op" id="7598554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598557">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7598561">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598590">x</span>&nbsp;<span class="op" id="7598592">=</span>&nbsp;<span class="ident" id="7598594">NewRat</span><span class="op" id="7598600">(</span><span class="num" id="7598601">2</span><span class="op" id="7598602">,</span>&nbsp;<span class="num" id="7598604">3</span><span class="op" id="7598605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598608">x</span><span class="op" id="7598609">.</span><span class="ident" id="7598610">SetFrac</span><span class="op" id="7598617">(</span><span class="ident" id="7598618">NewInt</span><span class="op" id="7598624">(</span><span class="num" id="7598625">3</span><span class="op" id="7598626">)</span><span class="op" id="7598627">,</span>&nbsp;<span class="ident" id="7598629">x</span><span class="op" id="7598630">.</span><span class="ident" id="7598631">Num</span><span class="op" id="7598634">(</span><span class="op" id="7598635">)</span><span class="op" id="7598636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598639">if</span>&nbsp;<span class="ident" id="7598642">x</span><span class="op" id="7598643">.</span><span class="ident" id="7598644">Cmp</span><span class="op" id="7598647">(</span><span class="ident" id="7598648">q</span><span class="op" id="7598649">)</span>&nbsp;<span class="op" id="7598651">!=</span>&nbsp;<span class="num" id="7598654">0</span>&nbsp;<span class="op" id="7598656">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598660">t</span><span class="op" id="7598661">.</span><span class="ident" id="7598662">Errorf</span><span class="op" id="7598668">(</span><span class="string" id="7598669">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7598688">,</span>&nbsp;<span class="ident" id="7598690">x</span><span class="op" id="7598691">,</span>&nbsp;<span class="ident" id="7598693">q</span><span class="op" id="7598694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7598701">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598732">x</span>&nbsp;<span class="op" id="7598734">=</span>&nbsp;<span class="ident" id="7598736">NewRat</span><span class="op" id="7598742">(</span><span class="num" id="7598743">2</span><span class="op" id="7598744">,</span>&nbsp;<span class="num" id="7598746">3</span><span class="op" id="7598747">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598750">x</span><span class="op" id="7598751">.</span><span class="ident" id="7598752">SetFrac</span><span class="op" id="7598759">(</span><span class="ident" id="7598760">x</span><span class="op" id="7598761">.</span><span class="ident" id="7598762">Denom</span><span class="op" id="7598767">(</span><span class="op" id="7598768">)</span><span class="op" id="7598769">,</span>&nbsp;<span class="ident" id="7598771">NewInt</span><span class="op" id="7598777">(</span><span class="num" id="7598778">2</span><span class="op" id="7598779">)</span><span class="op" id="7598780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598783">if</span>&nbsp;<span class="ident" id="7598786">x</span><span class="op" id="7598787">.</span><span class="ident" id="7598788">Cmp</span><span class="op" id="7598791">(</span><span class="ident" id="7598792">q</span><span class="op" id="7598793">)</span>&nbsp;<span class="op" id="7598795">!=</span>&nbsp;<span class="num" id="7598798">0</span>&nbsp;<span class="op" id="7598800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598804">t</span><span class="op" id="7598805">.</span><span class="ident" id="7598806">Errorf</span><span class="op" id="7598812">(</span><span class="string" id="7598813">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7598832">,</span>&nbsp;<span class="ident" id="7598834">x</span><span class="op" id="7598835">,</span>&nbsp;<span class="ident" id="7598837">q</span><span class="op" id="7598838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7598845">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598890">x</span>&nbsp;<span class="op" id="7598892">=</span>&nbsp;<span class="ident" id="7598894">NewRat</span><span class="op" id="7598900">(</span><span class="num" id="7598901">2</span><span class="op" id="7598902">,</span>&nbsp;<span class="num" id="7598904">3</span><span class="op" id="7598905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598908">x</span><span class="op" id="7598909">.</span><span class="ident" id="7598910">SetFrac</span><span class="op" id="7598917">(</span><span class="ident" id="7598918">x</span><span class="op" id="7598919">.</span><span class="ident" id="7598920">Denom</span><span class="op" id="7598925">(</span><span class="op" id="7598926">)</span><span class="op" id="7598927">,</span>&nbsp;<span class="ident" id="7598929">x</span><span class="op" id="7598930">.</span><span class="ident" id="7598931">Num</span><span class="op" id="7598934">(</span><span class="op" id="7598935">)</span><span class="op" id="7598936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7598939">if</span>&nbsp;<span class="ident" id="7598942">x</span><span class="op" id="7598943">.</span><span class="ident" id="7598944">Cmp</span><span class="op" id="7598947">(</span><span class="ident" id="7598948">q</span><span class="op" id="7598949">)</span>&nbsp;<span class="op" id="7598951">!=</span>&nbsp;<span class="num" id="7598954">0</span>&nbsp;<span class="op" id="7598956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7598960">t</span><span class="op" id="7598961">.</span><span class="ident" id="7598962">Errorf</span><span class="op" id="7598968">(</span><span class="string" id="7598969">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7598988">,</span>&nbsp;<span class="ident" id="7598990">x</span><span class="op" id="7598991">,</span>&nbsp;<span class="ident" id="7598993">q</span><span class="op" id="7598994">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7598997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7599001">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599047">q</span>&nbsp;<span class="op" id="7599049">=</span>&nbsp;<span class="ident" id="7599051">NewRat</span><span class="op" id="7599057">(</span><span class="num" id="7599058">1</span><span class="op" id="7599059">,</span>&nbsp;<span class="num" id="7599061">1</span><span class="op" id="7599062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599065">x</span>&nbsp;<span class="op" id="7599067">=</span>&nbsp;<span class="builtinfunc" id="7599069">new</span><span class="op" id="7599072">(</span><span class="ident" id="7599073">Rat</span><span class="op" id="7599076">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599079">n</span>&nbsp;<span class="op" id="7599081">:=</span>&nbsp;<span class="ident" id="7599084">NewInt</span><span class="op" id="7599090">(</span><span class="num" id="7599091">7</span><span class="op" id="7599092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599095">x</span><span class="op" id="7599096">.</span><span class="ident" id="7599097">SetFrac</span><span class="op" id="7599104">(</span><span class="ident" id="7599105">n</span><span class="op" id="7599106">,</span>&nbsp;<span class="ident" id="7599108">n</span><span class="op" id="7599109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599112">if</span>&nbsp;<span class="ident" id="7599115">x</span><span class="op" id="7599116">.</span><span class="ident" id="7599117">Cmp</span><span class="op" id="7599120">(</span><span class="ident" id="7599121">q</span><span class="op" id="7599122">)</span>&nbsp;<span class="op" id="7599124">!=</span>&nbsp;<span class="num" id="7599127">0</span>&nbsp;<span class="op" id="7599129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599133">t</span><span class="op" id="7599134">.</span><span class="ident" id="7599135">Errorf</span><span class="op" id="7599141">(</span><span class="string" id="7599142">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7599161">,</span>&nbsp;<span class="ident" id="7599163">x</span><span class="op" id="7599164">,</span>&nbsp;<span class="ident" id="7599166">q</span><span class="op" id="7599167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599170">}</span><br>
<span class="lineno">540</span><span class="op" id="7599172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7599175">func</span>&nbsp;<span class="ident" id="7599180">TestIssue3521</span><span class="op" id="7599193">(</span><span class="ident" id="7599194">t</span>&nbsp;<span class="op" id="7599196">*</span><span class="ident" id="7599197">testing</span><span class="op" id="7599204">.</span><span class="ident" id="7599205">T</span><span class="op" id="7599206">)</span>&nbsp;<span class="op" id="7599208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599211">a</span>&nbsp;<span class="op" id="7599213">:=</span>&nbsp;<span class="builtinfunc" id="7599216">new</span><span class="op" id="7599219">(</span><span class="ident" id="7599220">Int</span><span class="op" id="7599223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599226">b</span>&nbsp;<span class="op" id="7599228">:=</span>&nbsp;<span class="builtinfunc" id="7599231">new</span><span class="op" id="7599234">(</span><span class="ident" id="7599235">Int</span><span class="op" id="7599238">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599241">a</span><span class="op" id="7599242">.</span><span class="ident" id="7599243">SetString</span><span class="op" id="7599252">(</span><span class="string" id="7599253">&#34;64375784358435883458348587&#34;</span><span class="op" id="7599281">,</span>&nbsp;<span class="num" id="7599283">0</span><span class="op" id="7599284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599287">b</span><span class="op" id="7599288">.</span><span class="ident" id="7599289">SetString</span><span class="op" id="7599298">(</span><span class="string" id="7599299">&#34;4789759874531&#34;</span><span class="op" id="7599314">,</span>&nbsp;<span class="num" id="7599316">0</span><span class="op" id="7599317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7599321">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599366">zero</span>&nbsp;<span class="op" id="7599371">:=</span>&nbsp;<span class="builtinfunc" id="7599374">new</span><span class="op" id="7599377">(</span><span class="ident" id="7599378">Rat</span><span class="op" id="7599381">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599384">one</span>&nbsp;<span class="op" id="7599388">:=</span>&nbsp;<span class="ident" id="7599391">NewInt</span><span class="op" id="7599397">(</span><span class="num" id="7599398">1</span><span class="op" id="7599399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599402">if</span>&nbsp;<span class="ident" id="7599405">zero</span><span class="op" id="7599409">.</span><span class="ident" id="7599410">Denom</span><span class="op" id="7599415">(</span><span class="op" id="7599416">)</span><span class="op" id="7599417">.</span><span class="ident" id="7599418">Cmp</span><span class="op" id="7599421">(</span><span class="ident" id="7599422">one</span><span class="op" id="7599425">)</span>&nbsp;<span class="op" id="7599427">!=</span>&nbsp;<span class="num" id="7599430">0</span>&nbsp;<span class="op" id="7599432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599436">t</span><span class="op" id="7599437">.</span><span class="ident" id="7599438">Errorf</span><span class="op" id="7599444">(</span><span class="string" id="7599445">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7599464">,</span>&nbsp;<span class="ident" id="7599466">zero</span><span class="op" id="7599470">.</span><span class="ident" id="7599471">Denom</span><span class="op" id="7599476">(</span><span class="op" id="7599477">)</span><span class="op" id="7599478">,</span>&nbsp;<span class="ident" id="7599480">one</span><span class="op" id="7599483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7599490">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599551">x</span>&nbsp;<span class="op" id="7599553">:=</span>&nbsp;<span class="builtinfunc" id="7599556">new</span><span class="op" id="7599559">(</span><span class="ident" id="7599560">Rat</span><span class="op" id="7599563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599566">x</span><span class="op" id="7599567">.</span><span class="ident" id="7599568">Denom</span><span class="op" id="7599573">(</span><span class="op" id="7599574">)</span><span class="op" id="7599575">.</span><span class="ident" id="7599576">Set</span><span class="op" id="7599579">(</span><span class="builtinfunc" id="7599580">new</span><span class="op" id="7599583">(</span><span class="ident" id="7599584">Int</span><span class="op" id="7599587">)</span><span class="op" id="7599588">.</span><span class="ident" id="7599589">Neg</span><span class="op" id="7599592">(</span><span class="ident" id="7599593">b</span><span class="op" id="7599594">)</span><span class="op" id="7599595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599598">if</span>&nbsp;<span class="ident" id="7599601">x</span><span class="op" id="7599602">.</span><span class="ident" id="7599603">Cmp</span><span class="op" id="7599606">(</span><span class="ident" id="7599607">zero</span><span class="op" id="7599611">)</span>&nbsp;<span class="op" id="7599613">!=</span>&nbsp;<span class="num" id="7599616">0</span>&nbsp;<span class="op" id="7599618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599622">t</span><span class="op" id="7599623">.</span><span class="ident" id="7599624">Errorf</span><span class="op" id="7599630">(</span><span class="string" id="7599631">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7599651">,</span>&nbsp;<span class="ident" id="7599653">x</span><span class="op" id="7599654">,</span>&nbsp;<span class="ident" id="7599656">zero</span><span class="op" id="7599660">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7599667">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599725">x</span><span class="op" id="7599726">.</span><span class="ident" id="7599727">Num</span><span class="op" id="7599730">(</span><span class="op" id="7599731">)</span><span class="op" id="7599732">.</span><span class="ident" id="7599733">Set</span><span class="op" id="7599736">(</span><span class="ident" id="7599737">a</span><span class="op" id="7599738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599741">qab</span>&nbsp;<span class="op" id="7599745">:=</span>&nbsp;<span class="builtinfunc" id="7599748">new</span><span class="op" id="7599751">(</span><span class="ident" id="7599752">Rat</span><span class="op" id="7599755">)</span><span class="op" id="7599756">.</span><span class="ident" id="7599757">SetFrac</span><span class="op" id="7599764">(</span><span class="ident" id="7599765">a</span><span class="op" id="7599766">,</span>&nbsp;<span class="ident" id="7599768">b</span><span class="op" id="7599769">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599772">if</span>&nbsp;<span class="ident" id="7599775">x</span><span class="op" id="7599776">.</span><span class="ident" id="7599777">Cmp</span><span class="op" id="7599780">(</span><span class="ident" id="7599781">qab</span><span class="op" id="7599784">)</span>&nbsp;<span class="op" id="7599786">!=</span>&nbsp;<span class="num" id="7599789">0</span>&nbsp;<span class="op" id="7599791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599795">t</span><span class="op" id="7599796">.</span><span class="ident" id="7599797">Errorf</span><span class="op" id="7599803">(</span><span class="string" id="7599804">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7599824">,</span>&nbsp;<span class="ident" id="7599826">x</span><span class="op" id="7599827">,</span>&nbsp;<span class="ident" id="7599829">qab</span><span class="op" id="7599832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7599835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7599839">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599909">x</span><span class="op" id="7599910">.</span><span class="ident" id="7599911">SetFrac64</span><span class="op" id="7599920">(</span><span class="num" id="7599921">10</span><span class="op" id="7599923">,</span>&nbsp;<span class="num" id="7599925">2</span><span class="op" id="7599926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599929">x</span><span class="op" id="7599930">.</span><span class="ident" id="7599931">Denom</span><span class="op" id="7599936">(</span><span class="op" id="7599937">)</span><span class="op" id="7599938">.</span><span class="ident" id="7599939">SetInt64</span><span class="op" id="7599947">(</span><span class="num" id="7599948">3</span><span class="op" id="7599949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599952">q53</span>&nbsp;<span class="op" id="7599956">:=</span>&nbsp;<span class="ident" id="7599959">NewRat</span><span class="op" id="7599965">(</span><span class="num" id="7599966">5</span><span class="op" id="7599967">,</span>&nbsp;<span class="num" id="7599969">3</span><span class="op" id="7599970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7599973">if</span>&nbsp;<span class="ident" id="7599976">x</span><span class="op" id="7599977">.</span><span class="ident" id="7599978">Cmp</span><span class="op" id="7599981">(</span><span class="ident" id="7599982">q53</span><span class="op" id="7599985">)</span>&nbsp;<span class="op" id="7599987">!=</span>&nbsp;<span class="num" id="7599990">0</span>&nbsp;<span class="op" id="7599992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7599996">t</span><span class="op" id="7599997">.</span><span class="ident" id="7599998">Errorf</span><span class="op" id="7600004">(</span><span class="string" id="7600005">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7600025">,</span>&nbsp;<span class="ident" id="7600027">x</span><span class="op" id="7600028">,</span>&nbsp;<span class="ident" id="7600030">q53</span><span class="op" id="7600033">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7600040">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600110">x</span>&nbsp;<span class="op" id="7600112">=</span>&nbsp;<span class="ident" id="7600114">NewRat</span><span class="op" id="7600120">(</span><span class="num" id="7600121">10</span><span class="op" id="7600123">,</span>&nbsp;<span class="num" id="7600125">2</span><span class="op" id="7600126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600129">x</span><span class="op" id="7600130">.</span><span class="ident" id="7600131">Denom</span><span class="op" id="7600136">(</span><span class="op" id="7600137">)</span><span class="op" id="7600138">.</span><span class="ident" id="7600139">SetInt64</span><span class="op" id="7600147">(</span><span class="num" id="7600148">3</span><span class="op" id="7600149">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600152">if</span>&nbsp;<span class="ident" id="7600155">x</span><span class="op" id="7600156">.</span><span class="ident" id="7600157">Cmp</span><span class="op" id="7600160">(</span><span class="ident" id="7600161">q53</span><span class="op" id="7600164">)</span>&nbsp;<span class="op" id="7600166">!=</span>&nbsp;<span class="num" id="7600169">0</span>&nbsp;<span class="op" id="7600171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600175">t</span><span class="op" id="7600176">.</span><span class="ident" id="7600177">Errorf</span><span class="op" id="7600183">(</span><span class="string" id="7600184">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7600204">,</span>&nbsp;<span class="ident" id="7600206">x</span><span class="op" id="7600207">,</span>&nbsp;<span class="ident" id="7600209">q53</span><span class="op" id="7600212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7600219">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600286">x</span><span class="op" id="7600287">.</span><span class="ident" id="7600288">SetFrac</span><span class="op" id="7600295">(</span><span class="ident" id="7600296">a</span><span class="op" id="7600297">,</span>&nbsp;<span class="ident" id="7600299">b</span><span class="op" id="7600300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600303">a</span>&nbsp;<span class="op" id="7600305">=</span>&nbsp;<span class="ident" id="7600307">x</span><span class="op" id="7600308">.</span><span class="ident" id="7600309">Num</span><span class="op" id="7600312">(</span><span class="op" id="7600313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600316">b</span>&nbsp;<span class="op" id="7600318">=</span>&nbsp;<span class="ident" id="7600320">x</span><span class="op" id="7600321">.</span><span class="ident" id="7600322">Denom</span><span class="op" id="7600327">(</span><span class="op" id="7600328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600331">a</span><span class="op" id="7600332">.</span><span class="ident" id="7600333">SetInt64</span><span class="op" id="7600341">(</span><span class="num" id="7600342">5</span><span class="op" id="7600343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600346">b</span><span class="op" id="7600347">.</span><span class="ident" id="7600348">SetInt64</span><span class="op" id="7600356">(</span><span class="num" id="7600357">3</span><span class="op" id="7600358">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7600361">if</span>&nbsp;<span class="ident" id="7600364">x</span><span class="op" id="7600365">.</span><span class="ident" id="7600366">Cmp</span><span class="op" id="7600369">(</span><span class="ident" id="7600370">q53</span><span class="op" id="7600373">)</span>&nbsp;<span class="op" id="7600375">!=</span>&nbsp;<span class="num" id="7600378">0</span>&nbsp;<span class="op" id="7600380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7600384">t</span><span class="op" id="7600385">.</span><span class="ident" id="7600386">Errorf</span><span class="op" id="7600392">(</span><span class="string" id="7600393">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7600412">,</span>&nbsp;<span class="ident" id="7600414">x</span><span class="op" id="7600415">,</span>&nbsp;<span class="ident" id="7600417">q53</span><span class="op" id="7600420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7600423">}</span><br>
<span class="lineno"></span><span class="op" id="7600425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7600428">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7600497">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7600569">var</span>&nbsp;<span class="ident" id="7600573">float64inputs</span>&nbsp;<span class="op" id="7600587">=</span>&nbsp;<span class="op" id="7600589">[</span><span class="op" id="7600590">]</span><span class="builtintype" id="7600591">string</span><span class="op" id="7600597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7600600">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7600650">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600720">&#34;5e+125&#34;</span><span class="op" id="7600728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600731">&#34;69e+267&#34;</span><span class="op" id="7600740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600743">&#34;999e-026&#34;</span><span class="op" id="7600753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600756">&#34;7861e-034&#34;</span><span class="op" id="7600767">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600770">&#34;75569e-254&#34;</span><span class="op" id="7600782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600785">&#34;928609e-261&#34;</span><span class="op" id="7600798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600801">&#34;9210917e+080&#34;</span><span class="op" id="7600815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600818">&#34;84863171e+114&#34;</span><span class="op" id="7600833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600836">&#34;653777767e+273&#34;</span><span class="op" id="7600852">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600855">&#34;5232604057e-298&#34;</span><span class="op" id="7600872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600875">&#34;27235667517e-109&#34;</span><span class="op" id="7600893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600896">&#34;653532977297e-123&#34;</span><span class="op" id="7600915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600918">&#34;3142213164987e-294&#34;</span><span class="op" id="7600938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600941">&#34;46202199371337e-072&#34;</span><span class="op" id="7600962">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600965">&#34;231010996856685e-073&#34;</span><span class="op" id="7600987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7600990">&#34;9324754620109615e+212&#34;</span><span class="op" id="7601013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601016">&#34;78459735791271921e+049&#34;</span><span class="op" id="7601040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601043">&#34;272104041512242479e+200&#34;</span><span class="op" id="7601068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601071">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7601097">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601100">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7601127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601130">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7601158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601161">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7601190">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7601194">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601264">&#34;9e-265&#34;</span><span class="op" id="7601272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601275">&#34;85e-037&#34;</span><span class="op" id="7601284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601287">&#34;623e+100&#34;</span><span class="op" id="7601297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601300">&#34;3571e+263&#34;</span><span class="op" id="7601311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601314">&#34;81661e+153&#34;</span><span class="op" id="7601326">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601329">&#34;920657e-023&#34;</span><span class="op" id="7601342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601345">&#34;4603285e-024&#34;</span><span class="op" id="7601359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601362">&#34;87575437e-309&#34;</span><span class="op" id="7601377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601380">&#34;245540327e+122&#34;</span><span class="op" id="7601396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601399">&#34;6138508175e+120&#34;</span><span class="op" id="7601416">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601419">&#34;83356057653e+193&#34;</span><span class="op" id="7601437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601440">&#34;619534293513e+124&#34;</span><span class="op" id="7601459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601462">&#34;2335141086879e+218&#34;</span><span class="op" id="7601482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601485">&#34;36167929443327e-159&#34;</span><span class="op" id="7601506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601509">&#34;609610927149051e-255&#34;</span><span class="op" id="7601531">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601534">&#34;3743626360493413e-165&#34;</span><span class="op" id="7601557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601560">&#34;94080055902682397e-242&#34;</span><span class="op" id="7601584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601587">&#34;899810892172646163e+283&#34;</span><span class="op" id="7601612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601615">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7601641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601644">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7601671">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601674">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7601702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601705">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7601734">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7601738">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601808">&#34;5e-20&#34;</span><span class="op" id="7601815">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601818">&#34;67e+14&#34;</span><span class="op" id="7601826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601829">&#34;985e+15&#34;</span><span class="op" id="7601838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601841">&#34;7693e-42&#34;</span><span class="op" id="7601851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601854">&#34;55895e-16&#34;</span><span class="op" id="7601865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601868">&#34;996622e-44&#34;</span><span class="op" id="7601880">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601883">&#34;7038531e-32&#34;</span><span class="op" id="7601896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601899">&#34;60419369e-46&#34;</span><span class="op" id="7601913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601916">&#34;702990899e-20&#34;</span><span class="op" id="7601931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601934">&#34;6930161142e-48&#34;</span><span class="op" id="7601950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601953">&#34;25933168707e+13&#34;</span><span class="op" id="7601970">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7601973">&#34;596428896559e+20&#34;</span><span class="op" id="7601991">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7601995">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602065">&#34;3e-23&#34;</span><span class="op" id="7602072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602075">&#34;57e+18&#34;</span><span class="op" id="7602083">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602086">&#34;789e-35&#34;</span><span class="op" id="7602095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602098">&#34;2539e-18&#34;</span><span class="op" id="7602108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602111">&#34;76173e+28&#34;</span><span class="op" id="7602122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602125">&#34;887745e-11&#34;</span><span class="op" id="7602137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602140">&#34;5382571e-37&#34;</span><span class="op" id="7602153">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602156">&#34;82381273e-35&#34;</span><span class="op" id="7602170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602173">&#34;750486563e-38&#34;</span><span class="op" id="7602188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602191">&#34;3752432815e-39&#34;</span><span class="op" id="7602207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602210">&#34;75224575729e-45&#34;</span><span class="op" id="7602227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602230">&#34;459926601011e+15&#34;</span><span class="op" id="7602248">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602252">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602304">&#34;0&#34;</span><span class="op" id="7602307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602310">&#34;1&#34;</span><span class="op" id="7602313">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602316">&#34;+1&#34;</span><span class="op" id="7602320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602323">&#34;1e23&#34;</span><span class="op" id="7602329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602332">&#34;1E23&#34;</span><span class="op" id="7602338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602341">&#34;100000000000000000000000&#34;</span><span class="op" id="7602367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602370">&#34;1e-100&#34;</span><span class="op" id="7602378">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602381">&#34;123456700&#34;</span><span class="op" id="7602392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602395">&#34;99999999999999974834176&#34;</span><span class="op" id="7602420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602423">&#34;100000000000000000000001&#34;</span><span class="op" id="7602449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602452">&#34;100000000000000008388608&#34;</span><span class="op" id="7602478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602481">&#34;100000000000000016777215&#34;</span><span class="op" id="7602507">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602510">&#34;100000000000000016777216&#34;</span><span class="op" id="7602536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602539">&#34;-1&#34;</span><span class="op" id="7602543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602546">&#34;-0.1&#34;</span><span class="op" id="7602552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602555">&#34;-0&#34;</span><span class="op" id="7602559">,</span>&nbsp;<span class="comment" id="7602561">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602599">&#34;1e-20&#34;</span><span class="op" id="7602606">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602609">&#34;625e-3&#34;</span><span class="op" id="7602617">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602621">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602641">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7602665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602668">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7602693">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602696">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602725">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7602749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602752">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7602777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602780">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602808">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602830">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7602854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602857">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7602882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602885">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602912">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7602938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602941">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7602968">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7602972">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7602995">&#34;1e308&#34;</span><span class="op" id="7603002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603005">&#34;2e308&#34;</span><span class="op" id="7603012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603015">&#34;1e309&#34;</span><span class="op" id="7603022">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603026">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603044">&#34;1e310&#34;</span><span class="op" id="7603051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603054">&#34;-1e310&#34;</span><span class="op" id="7603062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603065">&#34;1e400&#34;</span><span class="op" id="7603072">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603075">&#34;-1e400&#34;</span><span class="op" id="7603083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603086">&#34;long:1e400000&#34;</span><span class="op" id="7603101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603104">&#34;long:-1e400000&#34;</span><span class="op" id="7603120">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603124">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603141">&#34;1e-305&#34;</span><span class="op" id="7603149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603152">&#34;1e-306&#34;</span><span class="op" id="7603160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603163">&#34;1e-307&#34;</span><span class="op" id="7603171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603174">&#34;1e-308&#34;</span><span class="op" id="7603182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603185">&#34;1e-309&#34;</span><span class="op" id="7603193">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603196">&#34;1e-310&#34;</span><span class="op" id="7603204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603207">&#34;1e-322&#34;</span><span class="op" id="7603215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603218">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603240">&#34;5e-324&#34;</span><span class="op" id="7603248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603251">&#34;4e-324&#34;</span><span class="op" id="7603259">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603262">&#34;3e-324&#34;</span><span class="op" id="7603270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603273">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603287">&#34;2e-324&#34;</span><span class="op" id="7603295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603298">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603316">&#34;1e-350&#34;</span><span class="op" id="7603324">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603327">&#34;long:1e-400000&#34;</span><span class="op" id="7603343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603346">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603374">&#34;-1e-350&#34;</span><span class="op" id="7603383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603386">&#34;long:-1e-400000&#34;</span><span class="op" id="7603403">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603407">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603436">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603495">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603516">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603537">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603568">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603600">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603687">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7603712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603715">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603802">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7603827">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603831">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603905">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7603929">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7603933">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603976">&#34;22.222222222222222&#34;</span><span class="op" id="7603996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7603999">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7604009">+</span>&nbsp;<span class="ident" id="7604011">strings</span><span class="op" id="7604018">.</span><span class="ident" id="7604019">Repeat</span><span class="op" id="7604025">(</span><span class="string" id="7604026">&#34;2&#34;</span><span class="op" id="7604029">,</span>&nbsp;<span class="num" id="7604031">4000</span><span class="op" id="7604035">)</span>&nbsp;<span class="op" id="7604037">+</span>&nbsp;<span class="string" id="7604039">&#34;e+1&#34;</span><span class="op" id="7604044">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604048">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604104">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604130">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7604187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604190">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604228">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7604285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604288">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604319">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7604376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604379">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604445">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7604508">+</span>&nbsp;<span class="ident" id="7604510">strings</span><span class="op" id="7604517">.</span><span class="ident" id="7604518">Repeat</span><span class="op" id="7604524">(</span><span class="string" id="7604525">&#34;0&#34;</span><span class="op" id="7604528">,</span>&nbsp;<span class="num" id="7604530">10000</span><span class="op" id="7604535">)</span>&nbsp;<span class="op" id="7604537">+</span>&nbsp;<span class="string" id="7604539">&#34;1&#34;</span><span class="op" id="7604542">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604546">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604582">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7604630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604633">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604677">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7604725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604728">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604787">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604832">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7604880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604883">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7604951">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7604996">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7605044">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7605048">&#34;1152921504606846975&#34;</span><span class="op" id="7605069">,</span>&nbsp;&nbsp;<span class="comment" id="7605072">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7605088">&#34;-1152921504606846975&#34;</span><span class="op" id="7605110">,</span>&nbsp;<span class="comment" id="7605112">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7605129">&#34;1152921504606846977&#34;</span><span class="op" id="7605150">,</span>&nbsp;&nbsp;<span class="comment" id="7605153">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7605169">&#34;-1152921504606846977&#34;</span><span class="op" id="7605191">,</span>&nbsp;<span class="comment" id="7605193">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7605211">&#34;1/3&#34;</span><span class="op" id="7605216">,</span><br>
<span class="lineno"></span><span class="op" id="7605218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7605221">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7605287">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7605347">func</span>&nbsp;<span class="ident" id="7605352">isFinite</span><span class="op" id="7605360">(</span><span class="ident" id="7605361">f</span>&nbsp;<span class="builtintype" id="7605363">float64</span><span class="op" id="7605370">)</span>&nbsp;<span class="builtintype" id="7605372">bool</span>&nbsp;<span class="op" id="7605377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605380">return</span>&nbsp;<span class="ident" id="7605387">math</span><span class="op" id="7605391">.</span><span class="ident" id="7605392">Abs</span><span class="op" id="7605395">(</span><span class="ident" id="7605396">f</span><span class="op" id="7605397">)</span>&nbsp;<span class="op" id="7605399">&lt;=</span>&nbsp;<span class="ident" id="7605402">math</span><span class="op" id="7605406">.</span><span class="ident" id="7605407">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7605418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7605421">func</span>&nbsp;<span class="ident" id="7605426">TestFloat32SpecialCases</span><span class="op" id="7605449">(</span><span class="ident" id="7605450">t</span>&nbsp;<span class="op" id="7605452">*</span><span class="ident" id="7605453">testing</span><span class="op" id="7605460">.</span><span class="ident" id="7605461">T</span><span class="op" id="7605462">)</span>&nbsp;<span class="op" id="7605464">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605467">for</span>&nbsp;<span class="ident" id="7605471">_</span><span class="op" id="7605472">,</span>&nbsp;<span class="ident" id="7605474">input</span>&nbsp;<span class="op" id="7605480">:=</span>&nbsp;<span class="keyword" id="7605483">range</span>&nbsp;<span class="ident" id="7605489">float64inputs</span>&nbsp;<span class="op" id="7605503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605507">if</span>&nbsp;<span class="ident" id="7605510">strings</span><span class="op" id="7605517">.</span><span class="ident" id="7605518">HasPrefix</span><span class="op" id="7605527">(</span><span class="ident" id="7605528">input</span><span class="op" id="7605533">,</span>&nbsp;<span class="string" id="7605535">&#34;long:&#34;</span><span class="op" id="7605542">)</span>&nbsp;<span class="op" id="7605544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605549">if</span>&nbsp;<span class="ident" id="7605552">testing</span><span class="op" id="7605559">.</span><span class="ident" id="7605560">Short</span><span class="op" id="7605565">(</span><span class="op" id="7605566">)</span>&nbsp;<span class="op" id="7605568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605574">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605586">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605591">input</span>&nbsp;<span class="op" id="7605597">=</span>&nbsp;<span class="ident" id="7605599">input</span><span class="op" id="7605604">[</span><span class="builtinfunc" id="7605605">len</span><span class="op" id="7605608">(</span><span class="string" id="7605609">&#34;long:&#34;</span><span class="op" id="7605616">)</span><span class="op" id="7605617">:</span><span class="op" id="7605618">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605627">r</span><span class="op" id="7605628">,</span>&nbsp;<span class="ident" id="7605630">ok</span>&nbsp;<span class="op" id="7605633">:=</span>&nbsp;<span class="builtinfunc" id="7605636">new</span><span class="op" id="7605639">(</span><span class="ident" id="7605640">Rat</span><span class="op" id="7605643">)</span><span class="op" id="7605644">.</span><span class="ident" id="7605645">SetString</span><span class="op" id="7605654">(</span><span class="ident" id="7605655">input</span><span class="op" id="7605660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605664">if</span>&nbsp;<span class="op" id="7605667">!</span><span class="ident" id="7605668">ok</span>&nbsp;<span class="op" id="7605671">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605676">t</span><span class="op" id="7605677">.</span><span class="ident" id="7605678">Errorf</span><span class="op" id="7605684">(</span><span class="string" id="7605685">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7605711">,</span>&nbsp;<span class="ident" id="7605713">input</span><span class="op" id="7605718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605723">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7605734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605738">f</span><span class="op" id="7605739">,</span>&nbsp;<span class="ident" id="7605741">exact</span>&nbsp;<span class="op" id="7605747">:=</span>&nbsp;<span class="ident" id="7605750">r</span><span class="op" id="7605751">.</span><span class="ident" id="7605752">Float32</span><span class="op" id="7605759">(</span><span class="op" id="7605760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7605765">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7605820">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7605861">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7605923">if</span>&nbsp;<span class="op" id="7605926">!</span><span class="ident" id="7605927">strings</span><span class="op" id="7605934">.</span><span class="ident" id="7605935">Contains</span><span class="op" id="7605943">(</span><span class="ident" id="7605944">input</span><span class="op" id="7605949">,</span>&nbsp;<span class="string" id="7605951">&#34;/&#34;</span><span class="op" id="7605954">)</span>&nbsp;<span class="op" id="7605956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7605961">e64</span><span class="op" id="7605964">,</span>&nbsp;<span class="ident" id="7605966">_</span>&nbsp;<span class="op" id="7605968">:=</span>&nbsp;<span class="ident" id="7605971">strconv</span><span class="op" id="7605978">.</span><span class="ident" id="7605979">ParseFloat</span><span class="op" id="7605989">(</span><span class="ident" id="7605990">input</span><span class="op" id="7605995">,</span>&nbsp;<span class="num" id="7605997">32</span><span class="op" id="7605999">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606004">e</span>&nbsp;<span class="op" id="7606006">:=</span>&nbsp;<span class="builtintype" id="7606009">float32</span><span class="op" id="7606016">(</span><span class="ident" id="7606017">e64</span><span class="op" id="7606020">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606026">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606069">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606119">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606165">switch</span>&nbsp;<span class="op" id="7606172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606177">case</span>&nbsp;<span class="ident" id="7606182">math</span><span class="op" id="7606186">.</span><span class="ident" id="7606187">Float32bits</span><span class="op" id="7606198">(</span><span class="ident" id="7606199">e</span><span class="op" id="7606200">)</span>&nbsp;<span class="op" id="7606202">==</span>&nbsp;<span class="ident" id="7606205">math</span><span class="op" id="7606209">.</span><span class="ident" id="7606210">Float32bits</span><span class="op" id="7606221">(</span><span class="ident" id="7606222">f</span><span class="op" id="7606223">)</span><span class="op" id="7606224">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606230">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606255">case</span>&nbsp;<span class="ident" id="7606260">f</span>&nbsp;<span class="op" id="7606262">==</span>&nbsp;<span class="num" id="7606265">0</span>&nbsp;<span class="op" id="7606267">&amp;&amp;</span>&nbsp;<span class="ident" id="7606270">r</span><span class="op" id="7606271">.</span><span class="ident" id="7606272">Num</span><span class="op" id="7606275">(</span><span class="op" id="7606276">)</span><span class="op" id="7606277">.</span><span class="ident" id="7606278">BitLen</span><span class="op" id="7606284">(</span><span class="op" id="7606285">)</span>&nbsp;<span class="op" id="7606287">==</span>&nbsp;<span class="num" id="7606290">0</span><span class="op" id="7606291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606297">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606352">default</span><span class="op" id="7606359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606365">t</span><span class="op" id="7606366">.</span><span class="ident" id="7606367">Errorf</span><span class="op" id="7606373">(</span><span class="string" id="7606374">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7606434">,</span>&nbsp;<span class="ident" id="7606436">input</span><span class="op" id="7606441">,</span>&nbsp;<span class="ident" id="7606443">e</span><span class="op" id="7606444">,</span>&nbsp;<span class="ident" id="7606446">e</span><span class="op" id="7606447">,</span>&nbsp;<span class="ident" id="7606449">f</span><span class="op" id="7606450">,</span>&nbsp;<span class="ident" id="7606452">f</span><span class="op" id="7606453">,</span>&nbsp;<span class="ident" id="7606455">f</span><span class="op" id="7606456">-</span><span class="ident" id="7606457">e</span><span class="op" id="7606458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606472">if</span>&nbsp;<span class="op" id="7606475">!</span><span class="ident" id="7606476">isFinite</span><span class="op" id="7606484">(</span><span class="builtintype" id="7606485">float64</span><span class="op" id="7606492">(</span><span class="ident" id="7606493">f</span><span class="op" id="7606494">)</span><span class="op" id="7606495">)</span>&nbsp;<span class="op" id="7606497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606518">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606562">if</span>&nbsp;<span class="op" id="7606565">!</span><span class="ident" id="7606566">checkIsBestApprox32</span><span class="op" id="7606585">(</span><span class="ident" id="7606586">t</span><span class="op" id="7606587">,</span>&nbsp;<span class="ident" id="7606589">f</span><span class="op" id="7606590">,</span>&nbsp;<span class="ident" id="7606592">r</span><span class="op" id="7606593">)</span>&nbsp;<span class="op" id="7606595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606600">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606634">t</span><span class="op" id="7606635">.</span><span class="ident" id="7606636">Errorf</span><span class="op" id="7606642">(</span><span class="string" id="7606643">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7606659">,</span>&nbsp;<span class="ident" id="7606661">input</span><span class="op" id="7606666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606675">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606721">checkNonLossyRoundtrip32</span><span class="op" id="7606745">(</span><span class="ident" id="7606746">t</span><span class="op" id="7606747">,</span>&nbsp;<span class="ident" id="7606749">f</span><span class="op" id="7606750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7606755">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7606801">if</span>&nbsp;<span class="ident" id="7606804">wasExact</span>&nbsp;<span class="op" id="7606813">:=</span>&nbsp;<span class="builtinfunc" id="7606816">new</span><span class="op" id="7606819">(</span><span class="ident" id="7606820">Rat</span><span class="op" id="7606823">)</span><span class="op" id="7606824">.</span><span class="ident" id="7606825">SetFloat64</span><span class="op" id="7606835">(</span><span class="builtintype" id="7606836">float64</span><span class="op" id="7606843">(</span><span class="ident" id="7606844">f</span><span class="op" id="7606845">)</span><span class="op" id="7606846">)</span><span class="op" id="7606847">.</span><span class="ident" id="7606848">Cmp</span><span class="op" id="7606851">(</span><span class="ident" id="7606852">r</span><span class="op" id="7606853">)</span>&nbsp;<span class="op" id="7606855">==</span>&nbsp;<span class="num" id="7606858">0</span><span class="op" id="7606859">;</span>&nbsp;<span class="ident" id="7606861">wasExact</span>&nbsp;<span class="op" id="7606870">!=</span>&nbsp;<span class="ident" id="7606873">exact</span>&nbsp;<span class="op" id="7606879">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7606884">t</span><span class="op" id="7606885">.</span><span class="ident" id="7606886">Errorf</span><span class="op" id="7606892">(</span><span class="string" id="7606893">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7606942">,</span>&nbsp;<span class="ident" id="7606944">input</span><span class="op" id="7606949">,</span>&nbsp;<span class="ident" id="7606951">exact</span><span class="op" id="7606956">,</span>&nbsp;<span class="ident" id="7606958">wasExact</span><span class="op" id="7606966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7606973">}</span><br>
<span class="lineno"></span><span class="op" id="7606975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7606978">func</span>&nbsp;<span class="ident" id="7606983">TestFloat64SpecialCases</span><span class="op" id="7607006">(</span><span class="ident" id="7607007">t</span>&nbsp;<span class="op" id="7607009">*</span><span class="ident" id="7607010">testing</span><span class="op" id="7607017">.</span><span class="ident" id="7607018">T</span><span class="op" id="7607019">)</span>&nbsp;<span class="op" id="7607021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607024">for</span>&nbsp;<span class="ident" id="7607028">_</span><span class="op" id="7607029">,</span>&nbsp;<span class="ident" id="7607031">input</span>&nbsp;<span class="op" id="7607037">:=</span>&nbsp;<span class="keyword" id="7607040">range</span>&nbsp;<span class="ident" id="7607046">float64inputs</span>&nbsp;<span class="op" id="7607060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607064">if</span>&nbsp;<span class="ident" id="7607067">strings</span><span class="op" id="7607074">.</span><span class="ident" id="7607075">HasPrefix</span><span class="op" id="7607084">(</span><span class="ident" id="7607085">input</span><span class="op" id="7607090">,</span>&nbsp;<span class="string" id="7607092">&#34;long:&#34;</span><span class="op" id="7607099">)</span>&nbsp;<span class="op" id="7607101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607106">if</span>&nbsp;<span class="ident" id="7607109">testing</span><span class="op" id="7607116">.</span><span class="ident" id="7607117">Short</span><span class="op" id="7607122">(</span><span class="op" id="7607123">)</span>&nbsp;<span class="op" id="7607125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607131">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607148">input</span>&nbsp;<span class="op" id="7607154">=</span>&nbsp;<span class="ident" id="7607156">input</span><span class="op" id="7607161">[</span><span class="builtinfunc" id="7607162">len</span><span class="op" id="7607165">(</span><span class="string" id="7607166">&#34;long:&#34;</span><span class="op" id="7607173">)</span><span class="op" id="7607174">:</span><span class="op" id="7607175">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607184">r</span><span class="op" id="7607185">,</span>&nbsp;<span class="ident" id="7607187">ok</span>&nbsp;<span class="op" id="7607190">:=</span>&nbsp;<span class="builtinfunc" id="7607193">new</span><span class="op" id="7607196">(</span><span class="ident" id="7607197">Rat</span><span class="op" id="7607200">)</span><span class="op" id="7607201">.</span><span class="ident" id="7607202">SetString</span><span class="op" id="7607211">(</span><span class="ident" id="7607212">input</span><span class="op" id="7607217">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607221">if</span>&nbsp;<span class="op" id="7607224">!</span><span class="ident" id="7607225">ok</span>&nbsp;<span class="op" id="7607228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607233">t</span><span class="op" id="7607234">.</span><span class="ident" id="7607235">Errorf</span><span class="op" id="7607241">(</span><span class="string" id="7607242">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7607268">,</span>&nbsp;<span class="ident" id="7607270">input</span><span class="op" id="7607275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607280">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607295">f</span><span class="op" id="7607296">,</span>&nbsp;<span class="ident" id="7607298">exact</span>&nbsp;<span class="op" id="7607304">:=</span>&nbsp;<span class="ident" id="7607307">r</span><span class="op" id="7607308">.</span><span class="ident" id="7607309">Float64</span><span class="op" id="7607316">(</span><span class="op" id="7607317">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607322">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607377">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607418">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607480">if</span>&nbsp;<span class="op" id="7607483">!</span><span class="ident" id="7607484">strings</span><span class="op" id="7607491">.</span><span class="ident" id="7607492">Contains</span><span class="op" id="7607500">(</span><span class="ident" id="7607501">input</span><span class="op" id="7607506">,</span>&nbsp;<span class="string" id="7607508">&#34;/&#34;</span><span class="op" id="7607511">)</span>&nbsp;<span class="op" id="7607513">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607518">e</span><span class="op" id="7607519">,</span>&nbsp;<span class="ident" id="7607521">_</span>&nbsp;<span class="op" id="7607523">:=</span>&nbsp;<span class="ident" id="7607526">strconv</span><span class="op" id="7607533">.</span><span class="ident" id="7607534">ParseFloat</span><span class="op" id="7607544">(</span><span class="ident" id="7607545">input</span><span class="op" id="7607550">,</span>&nbsp;<span class="num" id="7607552">64</span><span class="op" id="7607554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607560">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607603">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607653">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607699">switch</span>&nbsp;<span class="op" id="7607706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607711">case</span>&nbsp;<span class="ident" id="7607716">math</span><span class="op" id="7607720">.</span><span class="ident" id="7607721">Float64bits</span><span class="op" id="7607732">(</span><span class="ident" id="7607733">e</span><span class="op" id="7607734">)</span>&nbsp;<span class="op" id="7607736">==</span>&nbsp;<span class="ident" id="7607739">math</span><span class="op" id="7607743">.</span><span class="ident" id="7607744">Float64bits</span><span class="op" id="7607755">(</span><span class="ident" id="7607756">f</span><span class="op" id="7607757">)</span><span class="op" id="7607758">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607764">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607789">case</span>&nbsp;<span class="ident" id="7607794">f</span>&nbsp;<span class="op" id="7607796">==</span>&nbsp;<span class="num" id="7607799">0</span>&nbsp;<span class="op" id="7607801">&amp;&amp;</span>&nbsp;<span class="ident" id="7607804">r</span><span class="op" id="7607805">.</span><span class="ident" id="7607806">Num</span><span class="op" id="7607809">(</span><span class="op" id="7607810">)</span><span class="op" id="7607811">.</span><span class="ident" id="7607812">BitLen</span><span class="op" id="7607818">(</span><span class="op" id="7607819">)</span>&nbsp;<span class="op" id="7607821">==</span>&nbsp;<span class="num" id="7607824">0</span><span class="op" id="7607825">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7607831">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7607886">default</span><span class="op" id="7607893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7607899">t</span><span class="op" id="7607900">.</span><span class="ident" id="7607901">Errorf</span><span class="op" id="7607907">(</span><span class="string" id="7607908">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7607968">,</span>&nbsp;<span class="ident" id="7607970">input</span><span class="op" id="7607975">,</span>&nbsp;<span class="ident" id="7607977">e</span><span class="op" id="7607978">,</span>&nbsp;<span class="ident" id="7607980">e</span><span class="op" id="7607981">,</span>&nbsp;<span class="ident" id="7607983">f</span><span class="op" id="7607984">,</span>&nbsp;<span class="ident" id="7607986">f</span><span class="op" id="7607987">,</span>&nbsp;<span class="ident" id="7607989">f</span><span class="op" id="7607990">-</span><span class="ident" id="7607991">e</span><span class="op" id="7607992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7607997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608006">if</span>&nbsp;<span class="op" id="7608009">!</span><span class="ident" id="7608010">isFinite</span><span class="op" id="7608018">(</span><span class="ident" id="7608019">f</span><span class="op" id="7608020">)</span>&nbsp;<span class="op" id="7608022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608027">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608043">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608087">if</span>&nbsp;<span class="op" id="7608090">!</span><span class="ident" id="7608091">checkIsBestApprox64</span><span class="op" id="7608110">(</span><span class="ident" id="7608111">t</span><span class="op" id="7608112">,</span>&nbsp;<span class="ident" id="7608114">f</span><span class="op" id="7608115">,</span>&nbsp;<span class="ident" id="7608117">r</span><span class="op" id="7608118">)</span>&nbsp;<span class="op" id="7608120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608125">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608159">t</span><span class="op" id="7608160">.</span><span class="ident" id="7608161">Errorf</span><span class="op" id="7608167">(</span><span class="string" id="7608168">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7608184">,</span>&nbsp;<span class="ident" id="7608186">input</span><span class="op" id="7608191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608200">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608246">checkNonLossyRoundtrip64</span><span class="op" id="7608270">(</span><span class="ident" id="7608271">t</span><span class="op" id="7608272">,</span>&nbsp;<span class="ident" id="7608274">f</span><span class="op" id="7608275">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608280">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608326">if</span>&nbsp;<span class="ident" id="7608329">wasExact</span>&nbsp;<span class="op" id="7608338">:=</span>&nbsp;<span class="builtinfunc" id="7608341">new</span><span class="op" id="7608344">(</span><span class="ident" id="7608345">Rat</span><span class="op" id="7608348">)</span><span class="op" id="7608349">.</span><span class="ident" id="7608350">SetFloat64</span><span class="op" id="7608360">(</span><span class="ident" id="7608361">f</span><span class="op" id="7608362">)</span><span class="op" id="7608363">.</span><span class="ident" id="7608364">Cmp</span><span class="op" id="7608367">(</span><span class="ident" id="7608368">r</span><span class="op" id="7608369">)</span>&nbsp;<span class="op" id="7608371">==</span>&nbsp;<span class="num" id="7608374">0</span><span class="op" id="7608375">;</span>&nbsp;<span class="ident" id="7608377">wasExact</span>&nbsp;<span class="op" id="7608386">!=</span>&nbsp;<span class="ident" id="7608389">exact</span>&nbsp;<span class="op" id="7608395">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608400">t</span><span class="op" id="7608401">.</span><span class="ident" id="7608402">Errorf</span><span class="op" id="7608408">(</span><span class="string" id="7608409">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7608458">,</span>&nbsp;<span class="ident" id="7608460">input</span><span class="op" id="7608465">,</span>&nbsp;<span class="ident" id="7608467">exact</span><span class="op" id="7608472">,</span>&nbsp;<span class="ident" id="7608474">wasExact</span><span class="op" id="7608482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608489">}</span><br>
<span class="lineno"></span><span class="op" id="7608491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7608494">func</span>&nbsp;<span class="ident" id="7608499">TestFloat32Distribution</span><span class="op" id="7608522">(</span><span class="ident" id="7608523">t</span>&nbsp;<span class="op" id="7608525">*</span><span class="ident" id="7608526">testing</span><span class="op" id="7608533">.</span><span class="ident" id="7608534">T</span><span class="op" id="7608535">)</span>&nbsp;<span class="op" id="7608537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608540">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608600">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7608660">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608712">var</span>&nbsp;<span class="ident" id="7608716">add</span>&nbsp;<span class="op" id="7608720">=</span>&nbsp;<span class="op" id="7608722">[</span><span class="op" id="7608723">]</span><span class="ident" id="7608724">int64</span><span class="op" id="7608729">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608733">0</span><span class="op" id="7608734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608738">1</span><span class="op" id="7608739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608743">3</span><span class="op" id="7608744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608748">5</span><span class="op" id="7608749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608753">7</span><span class="op" id="7608754">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608758">9</span><span class="op" id="7608759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7608763">11</span><span class="op" id="7608765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608771">var</span>&nbsp;<span class="ident" id="7608775">winc</span><span class="op" id="7608779">,</span>&nbsp;<span class="ident" id="7608781">einc</span>&nbsp;<span class="op" id="7608786">=</span>&nbsp;<span class="ident" id="7608788">uint64</span><span class="op" id="7608794">(</span><span class="num" id="7608795">1</span><span class="op" id="7608796">)</span><span class="op" id="7608797">,</span>&nbsp;<span class="num" id="7608799">1</span>&nbsp;<span class="comment" id="7608801">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608833">if</span>&nbsp;<span class="ident" id="7608836">testing</span><span class="op" id="7608843">.</span><span class="ident" id="7608844">Short</span><span class="op" id="7608849">(</span><span class="op" id="7608850">)</span>&nbsp;<span class="op" id="7608852">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608856">winc</span><span class="op" id="7608860">,</span>&nbsp;<span class="ident" id="7608862">einc</span>&nbsp;<span class="op" id="7608867">=</span>&nbsp;<span class="num" id="7608869">5</span><span class="op" id="7608870">,</span>&nbsp;<span class="num" id="7608872">15</span>&nbsp;<span class="comment" id="7608875">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7608908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608912">for</span>&nbsp;<span class="ident" id="7608916">_</span><span class="op" id="7608917">,</span>&nbsp;<span class="ident" id="7608919">sign</span>&nbsp;<span class="op" id="7608924">:=</span>&nbsp;<span class="keyword" id="7608927">range</span>&nbsp;<span class="string" id="7608933">&#34;+-&#34;</span>&nbsp;<span class="op" id="7608938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608942">for</span>&nbsp;<span class="ident" id="7608946">_</span><span class="op" id="7608947">,</span>&nbsp;<span class="ident" id="7608949">a</span>&nbsp;<span class="op" id="7608951">:=</span>&nbsp;<span class="keyword" id="7608954">range</span>&nbsp;<span class="ident" id="7608960">add</span>&nbsp;<span class="op" id="7608964">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7608969">for</span>&nbsp;<span class="ident" id="7608973">wid</span>&nbsp;<span class="op" id="7608977">:=</span>&nbsp;<span class="ident" id="7608980">uint64</span><span class="op" id="7608986">(</span><span class="num" id="7608987">0</span><span class="op" id="7608988">)</span><span class="op" id="7608989">;</span>&nbsp;<span class="ident" id="7608991">wid</span>&nbsp;<span class="op" id="7608995">&lt;</span>&nbsp;<span class="num" id="7608997">30</span><span class="op" id="7608999">;</span>&nbsp;<span class="ident" id="7609001">wid</span>&nbsp;<span class="op" id="7609005">+=</span>&nbsp;<span class="ident" id="7609008">winc</span>&nbsp;<span class="op" id="7609013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609019">b</span>&nbsp;<span class="op" id="7609021">:=</span>&nbsp;<span class="num" id="7609024">1</span><span class="op" id="7609025">&lt;&lt;</span><span class="ident" id="7609027">wid</span>&nbsp;<span class="op" id="7609031">+</span>&nbsp;<span class="ident" id="7609033">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609039">if</span>&nbsp;<span class="ident" id="7609042">sign</span>&nbsp;<span class="op" id="7609047">==</span>&nbsp;<span class="string" id="7609050">&#39;-&#39;</span>&nbsp;<span class="op" id="7609054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609061">b</span>&nbsp;<span class="op" id="7609063">=</span>&nbsp;<span class="op" id="7609065">-</span><span class="ident" id="7609066">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609072">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609078">for</span>&nbsp;<span class="ident" id="7609082">exp</span>&nbsp;<span class="op" id="7609086">:=</span>&nbsp;<span class="op" id="7609089">-</span><span class="num" id="7609090">150</span><span class="op" id="7609093">;</span>&nbsp;<span class="ident" id="7609095">exp</span>&nbsp;<span class="op" id="7609099">&lt;</span>&nbsp;<span class="num" id="7609101">150</span><span class="op" id="7609104">;</span>&nbsp;<span class="ident" id="7609106">exp</span>&nbsp;<span class="op" id="7609110">+=</span>&nbsp;<span class="ident" id="7609113">einc</span>&nbsp;<span class="op" id="7609118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609125">num</span><span class="op" id="7609128">,</span>&nbsp;<span class="ident" id="7609130">den</span>&nbsp;<span class="op" id="7609134">:=</span>&nbsp;<span class="ident" id="7609137">NewInt</span><span class="op" id="7609143">(</span><span class="ident" id="7609144">b</span><span class="op" id="7609145">)</span><span class="op" id="7609146">,</span>&nbsp;<span class="ident" id="7609148">NewInt</span><span class="op" id="7609154">(</span><span class="num" id="7609155">1</span><span class="op" id="7609156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609163">if</span>&nbsp;<span class="ident" id="7609166">exp</span>&nbsp;<span class="op" id="7609170">&gt;</span>&nbsp;<span class="num" id="7609172">0</span>&nbsp;<span class="op" id="7609174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609182">num</span><span class="op" id="7609185">.</span><span class="ident" id="7609186">Lsh</span><span class="op" id="7609189">(</span><span class="ident" id="7609190">num</span><span class="op" id="7609193">,</span>&nbsp;<span class="builtintype" id="7609195">uint</span><span class="op" id="7609199">(</span><span class="ident" id="7609200">exp</span><span class="op" id="7609203">)</span><span class="op" id="7609204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609211">}</span>&nbsp;<span class="keyword" id="7609213">else</span>&nbsp;<span class="op" id="7609218">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609226">den</span><span class="op" id="7609229">.</span><span class="ident" id="7609230">Lsh</span><span class="op" id="7609233">(</span><span class="ident" id="7609234">den</span><span class="op" id="7609237">,</span>&nbsp;<span class="builtintype" id="7609239">uint</span><span class="op" id="7609243">(</span><span class="op" id="7609244">-</span><span class="ident" id="7609245">exp</span><span class="op" id="7609248">)</span><span class="op" id="7609249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609263">r</span>&nbsp;<span class="op" id="7609265">:=</span>&nbsp;<span class="builtinfunc" id="7609268">new</span><span class="op" id="7609271">(</span><span class="ident" id="7609272">Rat</span><span class="op" id="7609275">)</span><span class="op" id="7609276">.</span><span class="ident" id="7609277">SetFrac</span><span class="op" id="7609284">(</span><span class="ident" id="7609285">num</span><span class="op" id="7609288">,</span>&nbsp;<span class="ident" id="7609290">den</span><span class="op" id="7609293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609300">f</span><span class="op" id="7609301">,</span>&nbsp;<span class="ident" id="7609303">_</span>&nbsp;<span class="op" id="7609305">:=</span>&nbsp;<span class="ident" id="7609308">r</span><span class="op" id="7609309">.</span><span class="ident" id="7609310">Float32</span><span class="op" id="7609317">(</span><span class="op" id="7609318">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609326">if</span>&nbsp;<span class="op" id="7609329">!</span><span class="ident" id="7609330">checkIsBestApprox32</span><span class="op" id="7609349">(</span><span class="ident" id="7609350">t</span><span class="op" id="7609351">,</span>&nbsp;<span class="ident" id="7609353">f</span><span class="op" id="7609354">,</span>&nbsp;<span class="ident" id="7609356">r</span><span class="op" id="7609357">)</span>&nbsp;<span class="op" id="7609359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7609367">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609404">t</span><span class="op" id="7609405">.</span><span class="ident" id="7609406">Errorf</span><span class="op" id="7609412">(</span><span class="string" id="7609413">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7609476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609485">b</span><span class="op" id="7609486">,</span>&nbsp;<span class="ident" id="7609488">exp</span><span class="op" id="7609491">,</span>&nbsp;<span class="ident" id="7609493">f</span><span class="op" id="7609494">,</span>&nbsp;<span class="ident" id="7609496">f</span><span class="op" id="7609497">,</span>&nbsp;<span class="ident" id="7609499">math</span><span class="op" id="7609503">.</span><span class="ident" id="7609504">Ldexp</span><span class="op" id="7609509">(</span><span class="builtintype" id="7609510">float64</span><span class="op" id="7609517">(</span><span class="ident" id="7609518">b</span><span class="op" id="7609519">)</span><span class="op" id="7609520">,</span>&nbsp;<span class="ident" id="7609522">exp</span><span class="op" id="7609525">)</span><span class="op" id="7609526">,</span>&nbsp;<span class="ident" id="7609528">r</span><span class="op" id="7609529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609536">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609544">checkNonLossyRoundtrip32</span><span class="op" id="7609568">(</span><span class="ident" id="7609569">t</span><span class="op" id="7609570">,</span>&nbsp;<span class="ident" id="7609572">f</span><span class="op" id="7609573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609588">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609591">}</span><br>
<span class="lineno"></span><span class="op" id="7609593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609596">func</span>&nbsp;<span class="ident" id="7609601">TestFloat64Distribution</span><span class="op" id="7609624">(</span><span class="ident" id="7609625">t</span>&nbsp;<span class="op" id="7609627">*</span><span class="ident" id="7609628">testing</span><span class="op" id="7609635">.</span><span class="ident" id="7609636">T</span><span class="op" id="7609637">)</span>&nbsp;<span class="op" id="7609639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7609642">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7609702">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7609762">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609814">var</span>&nbsp;<span class="ident" id="7609818">add</span>&nbsp;<span class="op" id="7609822">=</span>&nbsp;<span class="op" id="7609824">[</span><span class="op" id="7609825">]</span><span class="ident" id="7609826">int64</span><span class="op" id="7609831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609835">0</span><span class="op" id="7609836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609840">1</span><span class="op" id="7609841">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609845">3</span><span class="op" id="7609846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609850">5</span><span class="op" id="7609851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609855">7</span><span class="op" id="7609856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609860">9</span><span class="op" id="7609861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7609865">11</span><span class="op" id="7609867">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609873">var</span>&nbsp;<span class="ident" id="7609877">winc</span><span class="op" id="7609881">,</span>&nbsp;<span class="ident" id="7609883">einc</span>&nbsp;<span class="op" id="7609888">=</span>&nbsp;<span class="ident" id="7609890">uint64</span><span class="op" id="7609896">(</span><span class="num" id="7609897">1</span><span class="op" id="7609898">)</span><span class="op" id="7609899">,</span>&nbsp;<span class="num" id="7609901">1</span>&nbsp;<span class="comment" id="7609903">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609934">if</span>&nbsp;<span class="ident" id="7609937">testing</span><span class="op" id="7609944">.</span><span class="ident" id="7609945">Short</span><span class="op" id="7609950">(</span><span class="op" id="7609951">)</span>&nbsp;<span class="op" id="7609953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609957">winc</span><span class="op" id="7609961">,</span>&nbsp;<span class="ident" id="7609963">einc</span>&nbsp;<span class="op" id="7609968">=</span>&nbsp;<span class="num" id="7609970">10</span><span class="op" id="7609972">,</span>&nbsp;<span class="num" id="7609974">500</span>&nbsp;<span class="comment" id="7609978">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610011">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610015">for</span>&nbsp;<span class="ident" id="7610019">_</span><span class="op" id="7610020">,</span>&nbsp;<span class="ident" id="7610022">sign</span>&nbsp;<span class="op" id="7610027">:=</span>&nbsp;<span class="keyword" id="7610030">range</span>&nbsp;<span class="string" id="7610036">&#34;+-&#34;</span>&nbsp;<span class="op" id="7610041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610045">for</span>&nbsp;<span class="ident" id="7610049">_</span><span class="op" id="7610050">,</span>&nbsp;<span class="ident" id="7610052">a</span>&nbsp;<span class="op" id="7610054">:=</span>&nbsp;<span class="keyword" id="7610057">range</span>&nbsp;<span class="ident" id="7610063">add</span>&nbsp;<span class="op" id="7610067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610072">for</span>&nbsp;<span class="ident" id="7610076">wid</span>&nbsp;<span class="op" id="7610080">:=</span>&nbsp;<span class="ident" id="7610083">uint64</span><span class="op" id="7610089">(</span><span class="num" id="7610090">0</span><span class="op" id="7610091">)</span><span class="op" id="7610092">;</span>&nbsp;<span class="ident" id="7610094">wid</span>&nbsp;<span class="op" id="7610098">&lt;</span>&nbsp;<span class="num" id="7610100">60</span><span class="op" id="7610102">;</span>&nbsp;<span class="ident" id="7610104">wid</span>&nbsp;<span class="op" id="7610108">+=</span>&nbsp;<span class="ident" id="7610111">winc</span>&nbsp;<span class="op" id="7610116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610122">b</span>&nbsp;<span class="op" id="7610124">:=</span>&nbsp;<span class="num" id="7610127">1</span><span class="op" id="7610128">&lt;&lt;</span><span class="ident" id="7610130">wid</span>&nbsp;<span class="op" id="7610134">+</span>&nbsp;<span class="ident" id="7610136">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610142">if</span>&nbsp;<span class="ident" id="7610145">sign</span>&nbsp;<span class="op" id="7610150">==</span>&nbsp;<span class="string" id="7610153">&#39;-&#39;</span>&nbsp;<span class="op" id="7610157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610164">b</span>&nbsp;<span class="op" id="7610166">=</span>&nbsp;<span class="op" id="7610168">-</span><span class="ident" id="7610169">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610181">for</span>&nbsp;<span class="ident" id="7610185">exp</span>&nbsp;<span class="op" id="7610189">:=</span>&nbsp;<span class="op" id="7610192">-</span><span class="num" id="7610193">1100</span><span class="op" id="7610197">;</span>&nbsp;<span class="ident" id="7610199">exp</span>&nbsp;<span class="op" id="7610203">&lt;</span>&nbsp;<span class="num" id="7610205">1100</span><span class="op" id="7610209">;</span>&nbsp;<span class="ident" id="7610211">exp</span>&nbsp;<span class="op" id="7610215">+=</span>&nbsp;<span class="ident" id="7610218">einc</span>&nbsp;<span class="op" id="7610223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610230">num</span><span class="op" id="7610233">,</span>&nbsp;<span class="ident" id="7610235">den</span>&nbsp;<span class="op" id="7610239">:=</span>&nbsp;<span class="ident" id="7610242">NewInt</span><span class="op" id="7610248">(</span><span class="ident" id="7610249">b</span><span class="op" id="7610250">)</span><span class="op" id="7610251">,</span>&nbsp;<span class="ident" id="7610253">NewInt</span><span class="op" id="7610259">(</span><span class="num" id="7610260">1</span><span class="op" id="7610261">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610268">if</span>&nbsp;<span class="ident" id="7610271">exp</span>&nbsp;<span class="op" id="7610275">&gt;</span>&nbsp;<span class="num" id="7610277">0</span>&nbsp;<span class="op" id="7610279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610287">num</span><span class="op" id="7610290">.</span><span class="ident" id="7610291">Lsh</span><span class="op" id="7610294">(</span><span class="ident" id="7610295">num</span><span class="op" id="7610298">,</span>&nbsp;<span class="builtintype" id="7610300">uint</span><span class="op" id="7610304">(</span><span class="ident" id="7610305">exp</span><span class="op" id="7610308">)</span><span class="op" id="7610309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610316">}</span>&nbsp;<span class="keyword" id="7610318">else</span>&nbsp;<span class="op" id="7610323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610331">den</span><span class="op" id="7610334">.</span><span class="ident" id="7610335">Lsh</span><span class="op" id="7610338">(</span><span class="ident" id="7610339">den</span><span class="op" id="7610342">,</span>&nbsp;<span class="builtintype" id="7610344">uint</span><span class="op" id="7610348">(</span><span class="op" id="7610349">-</span><span class="ident" id="7610350">exp</span><span class="op" id="7610353">)</span><span class="op" id="7610354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610361">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610368">r</span>&nbsp;<span class="op" id="7610370">:=</span>&nbsp;<span class="builtinfunc" id="7610373">new</span><span class="op" id="7610376">(</span><span class="ident" id="7610377">Rat</span><span class="op" id="7610380">)</span><span class="op" id="7610381">.</span><span class="ident" id="7610382">SetFrac</span><span class="op" id="7610389">(</span><span class="ident" id="7610390">num</span><span class="op" id="7610393">,</span>&nbsp;<span class="ident" id="7610395">den</span><span class="op" id="7610398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610405">f</span><span class="op" id="7610406">,</span>&nbsp;<span class="ident" id="7610408">_</span>&nbsp;<span class="op" id="7610410">:=</span>&nbsp;<span class="ident" id="7610413">r</span><span class="op" id="7610414">.</span><span class="ident" id="7610415">Float64</span><span class="op" id="7610422">(</span><span class="op" id="7610423">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610431">if</span>&nbsp;<span class="op" id="7610434">!</span><span class="ident" id="7610435">checkIsBestApprox64</span><span class="op" id="7610454">(</span><span class="ident" id="7610455">t</span><span class="op" id="7610456">,</span>&nbsp;<span class="ident" id="7610458">f</span><span class="op" id="7610459">,</span>&nbsp;<span class="ident" id="7610461">r</span><span class="op" id="7610462">)</span>&nbsp;<span class="op" id="7610464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7610472">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610509">t</span><span class="op" id="7610510">.</span><span class="ident" id="7610511">Errorf</span><span class="op" id="7610517">(</span><span class="string" id="7610518">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7610581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610590">b</span><span class="op" id="7610591">,</span>&nbsp;<span class="ident" id="7610593">exp</span><span class="op" id="7610596">,</span>&nbsp;<span class="ident" id="7610598">f</span><span class="op" id="7610599">,</span>&nbsp;<span class="ident" id="7610601">f</span><span class="op" id="7610602">,</span>&nbsp;<span class="ident" id="7610604">math</span><span class="op" id="7610608">.</span><span class="ident" id="7610609">Ldexp</span><span class="op" id="7610614">(</span><span class="builtintype" id="7610615">float64</span><span class="op" id="7610622">(</span><span class="ident" id="7610623">b</span><span class="op" id="7610624">)</span><span class="op" id="7610625">,</span>&nbsp;<span class="ident" id="7610627">exp</span><span class="op" id="7610630">)</span><span class="op" id="7610631">,</span>&nbsp;<span class="ident" id="7610633">r</span><span class="op" id="7610634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610649">checkNonLossyRoundtrip64</span><span class="op" id="7610673">(</span><span class="ident" id="7610674">t</span><span class="op" id="7610675">,</span>&nbsp;<span class="ident" id="7610677">f</span><span class="op" id="7610678">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610696">}</span><br>
<span class="lineno"></span><span class="op" id="7610698">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7610701">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7610773">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7610789">func</span>&nbsp;<span class="ident" id="7610794">TestSetFloat64NonFinite</span><span class="op" id="7610817">(</span><span class="ident" id="7610818">t</span>&nbsp;<span class="op" id="7610820">*</span><span class="ident" id="7610821">testing</span><span class="op" id="7610828">.</span><span class="ident" id="7610829">T</span><span class="op" id="7610830">)</span>&nbsp;<span class="op" id="7610832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610835">for</span>&nbsp;<span class="ident" id="7610839">_</span><span class="op" id="7610840">,</span>&nbsp;<span class="ident" id="7610842">f</span>&nbsp;<span class="op" id="7610844">:=</span>&nbsp;<span class="keyword" id="7610847">range</span>&nbsp;<span class="op" id="7610853">[</span><span class="op" id="7610854">]</span><span class="builtintype" id="7610855">float64</span><span class="op" id="7610862">{</span><span class="ident" id="7610863">math</span><span class="op" id="7610867">.</span><span class="ident" id="7610868">NaN</span><span class="op" id="7610871">(</span><span class="op" id="7610872">)</span><span class="op" id="7610873">,</span>&nbsp;<span class="ident" id="7610875">math</span><span class="op" id="7610879">.</span><span class="ident" id="7610880">Inf</span><span class="op" id="7610883">(</span><span class="op" id="7610884">+</span><span class="num" id="7610885">1</span><span class="op" id="7610886">)</span><span class="op" id="7610887">,</span>&nbsp;<span class="ident" id="7610889">math</span><span class="op" id="7610893">.</span><span class="ident" id="7610894">Inf</span><span class="op" id="7610897">(</span><span class="op" id="7610898">-</span><span class="num" id="7610899">1</span><span class="op" id="7610900">)</span><span class="op" id="7610901">}</span>&nbsp;<span class="op" id="7610903">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610907">var</span>&nbsp;<span class="ident" id="7610911">r</span>&nbsp;<span class="ident" id="7610913">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610919">if</span>&nbsp;<span class="ident" id="7610922">r2</span>&nbsp;<span class="op" id="7610925">:=</span>&nbsp;<span class="ident" id="7610928">r</span><span class="op" id="7610929">.</span><span class="ident" id="7610930">SetFloat64</span><span class="op" id="7610940">(</span><span class="ident" id="7610941">f</span><span class="op" id="7610942">)</span><span class="op" id="7610943">;</span>&nbsp;<span class="ident" id="7610945">r2</span>&nbsp;<span class="op" id="7610948">!=</span>&nbsp;<span class="ident" id="7610951">nil</span>&nbsp;<span class="op" id="7610955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610960">t</span><span class="op" id="7610961">.</span><span class="ident" id="7610962">Errorf</span><span class="op" id="7610968">(</span><span class="string" id="7610969">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7611002">,</span>&nbsp;<span class="ident" id="7611004">f</span><span class="op" id="7611005">,</span>&nbsp;<span class="ident" id="7611007">r2</span><span class="op" id="7611009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611016">}</span><br>
<span class="lineno">1015</span><span class="op" id="7611018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7611021">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7611094">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7611121">func</span>&nbsp;<span class="ident" id="7611126">checkNonLossyRoundtrip32</span><span class="op" id="7611150">(</span><span class="ident" id="7611151">t</span>&nbsp;<span class="op" id="7611153">*</span><span class="ident" id="7611154">testing</span><span class="op" id="7611161">.</span><span class="ident" id="7611162">T</span><span class="op" id="7611163">,</span>&nbsp;<span class="ident" id="7611165">f</span>&nbsp;<span class="builtintype" id="7611167">float32</span><span class="op" id="7611174">)</span>&nbsp;<span class="op" id="7611176">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611179">if</span>&nbsp;<span class="op" id="7611182">!</span><span class="ident" id="7611183">isFinite</span><span class="op" id="7611191">(</span><span class="builtintype" id="7611192">float64</span><span class="op" id="7611199">(</span><span class="ident" id="7611200">f</span><span class="op" id="7611201">)</span><span class="op" id="7611202">)</span>&nbsp;<span class="op" id="7611204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611208">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611219">r</span>&nbsp;<span class="op" id="7611221">:=</span>&nbsp;<span class="builtinfunc" id="7611224">new</span><span class="op" id="7611227">(</span><span class="ident" id="7611228">Rat</span><span class="op" id="7611231">)</span><span class="op" id="7611232">.</span><span class="ident" id="7611233">SetFloat64</span><span class="op" id="7611243">(</span><span class="builtintype" id="7611244">float64</span><span class="op" id="7611251">(</span><span class="ident" id="7611252">f</span><span class="op" id="7611253">)</span><span class="op" id="7611254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611257">if</span>&nbsp;<span class="ident" id="7611260">r</span>&nbsp;<span class="op" id="7611262">==</span>&nbsp;<span class="ident" id="7611265">nil</span>&nbsp;<span class="op" id="7611269">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611273">t</span><span class="op" id="7611274">.</span><span class="ident" id="7611275">Errorf</span><span class="op" id="7611281">(</span><span class="string" id="7611282">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7611323">,</span>&nbsp;<span class="ident" id="7611325">f</span><span class="op" id="7611326">,</span>&nbsp;<span class="ident" id="7611328">f</span><span class="op" id="7611329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611333">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611344">f2</span><span class="op" id="7611346">,</span>&nbsp;<span class="ident" id="7611348">exact</span>&nbsp;<span class="op" id="7611354">:=</span>&nbsp;<span class="ident" id="7611357">r</span><span class="op" id="7611358">.</span><span class="ident" id="7611359">Float32</span><span class="op" id="7611366">(</span><span class="op" id="7611367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611370">if</span>&nbsp;<span class="ident" id="7611373">f</span>&nbsp;<span class="op" id="7611375">!=</span>&nbsp;<span class="ident" id="7611378">f2</span>&nbsp;<span class="op" id="7611381">||</span>&nbsp;<span class="op" id="7611384">!</span><span class="ident" id="7611385">exact</span>&nbsp;<span class="op" id="7611391">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611395">t</span><span class="op" id="7611396">.</span><span class="ident" id="7611397">Errorf</span><span class="op" id="7611403">(</span><span class="string" id="7611404">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7611487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611492">f</span><span class="op" id="7611493">,</span>&nbsp;<span class="ident" id="7611495">f2</span><span class="op" id="7611497">,</span>&nbsp;<span class="ident" id="7611499">f2</span><span class="op" id="7611501">,</span>&nbsp;<span class="ident" id="7611503">exact</span><span class="op" id="7611508">,</span>&nbsp;<span class="ident" id="7611510">f</span><span class="op" id="7611511">,</span>&nbsp;<span class="ident" id="7611513">f</span><span class="op" id="7611514">,</span>&nbsp;<span class="builtintype" id="7611516">true</span><span class="op" id="7611520">,</span>&nbsp;<span class="ident" id="7611522">f2</span><span class="op" id="7611524">-</span><span class="ident" id="7611525">f</span><span class="op" id="7611526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611529">}</span><br>
<span class="lineno"></span><span class="op" id="7611531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7611534">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7611607">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7611634">func</span>&nbsp;<span class="ident" id="7611639">checkNonLossyRoundtrip64</span><span class="op" id="7611663">(</span><span class="ident" id="7611664">t</span>&nbsp;<span class="op" id="7611666">*</span><span class="ident" id="7611667">testing</span><span class="op" id="7611674">.</span><span class="ident" id="7611675">T</span><span class="op" id="7611676">,</span>&nbsp;<span class="ident" id="7611678">f</span>&nbsp;<span class="builtintype" id="7611680">float64</span><span class="op" id="7611687">)</span>&nbsp;<span class="op" id="7611689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611692">if</span>&nbsp;<span class="op" id="7611695">!</span><span class="ident" id="7611696">isFinite</span><span class="op" id="7611704">(</span><span class="ident" id="7611705">f</span><span class="op" id="7611706">)</span>&nbsp;<span class="op" id="7611708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611712">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611723">r</span>&nbsp;<span class="op" id="7611725">:=</span>&nbsp;<span class="builtinfunc" id="7611728">new</span><span class="op" id="7611731">(</span><span class="ident" id="7611732">Rat</span><span class="op" id="7611735">)</span><span class="op" id="7611736">.</span><span class="ident" id="7611737">SetFloat64</span><span class="op" id="7611747">(</span><span class="ident" id="7611748">f</span><span class="op" id="7611749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611752">if</span>&nbsp;<span class="ident" id="7611755">r</span>&nbsp;<span class="op" id="7611757">==</span>&nbsp;<span class="ident" id="7611760">nil</span>&nbsp;<span class="op" id="7611764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611768">t</span><span class="op" id="7611769">.</span><span class="ident" id="7611770">Errorf</span><span class="op" id="7611776">(</span><span class="string" id="7611777">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7611809">,</span>&nbsp;<span class="ident" id="7611811">f</span><span class="op" id="7611812">,</span>&nbsp;<span class="ident" id="7611814">f</span><span class="op" id="7611815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611819">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611830">f2</span><span class="op" id="7611832">,</span>&nbsp;<span class="ident" id="7611834">exact</span>&nbsp;<span class="op" id="7611840">:=</span>&nbsp;<span class="ident" id="7611843">r</span><span class="op" id="7611844">.</span><span class="ident" id="7611845">Float64</span><span class="op" id="7611852">(</span><span class="op" id="7611853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611856">if</span>&nbsp;<span class="ident" id="7611859">f</span>&nbsp;<span class="op" id="7611861">!=</span>&nbsp;<span class="ident" id="7611864">f2</span>&nbsp;<span class="op" id="7611867">||</span>&nbsp;<span class="op" id="7611870">!</span><span class="ident" id="7611871">exact</span>&nbsp;<span class="op" id="7611877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611881">t</span><span class="op" id="7611882">.</span><span class="ident" id="7611883">Errorf</span><span class="op" id="7611889">(</span><span class="string" id="7611890">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7611964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611969">f</span><span class="op" id="7611970">,</span>&nbsp;<span class="ident" id="7611972">f2</span><span class="op" id="7611974">,</span>&nbsp;<span class="ident" id="7611976">f2</span><span class="op" id="7611978">,</span>&nbsp;<span class="ident" id="7611980">exact</span><span class="op" id="7611985">,</span>&nbsp;<span class="ident" id="7611987">f</span><span class="op" id="7611988">,</span>&nbsp;<span class="ident" id="7611990">f</span><span class="op" id="7611991">,</span>&nbsp;<span class="builtintype" id="7611993">true</span><span class="op" id="7611997">,</span>&nbsp;<span class="ident" id="7611999">f2</span><span class="op" id="7612001">-</span><span class="ident" id="7612002">f</span><span class="op" id="7612003">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612006">}</span><br>
<span class="lineno"></span><span class="op" id="7612008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7612011">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7612069">func</span>&nbsp;<span class="ident" id="7612074">delta</span><span class="op" id="7612079">(</span><span class="ident" id="7612080">r</span>&nbsp;<span class="op" id="7612082">*</span><span class="ident" id="7612083">Rat</span><span class="op" id="7612086">,</span>&nbsp;<span class="ident" id="7612088">f</span>&nbsp;<span class="builtintype" id="7612090">float64</span><span class="op" id="7612097">)</span>&nbsp;<span class="op" id="7612099">*</span><span class="ident" id="7612100">Rat</span>&nbsp;<span class="op" id="7612104">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612107">d</span>&nbsp;<span class="op" id="7612109">:=</span>&nbsp;<span class="builtinfunc" id="7612112">new</span><span class="op" id="7612115">(</span><span class="ident" id="7612116">Rat</span><span class="op" id="7612119">)</span><span class="op" id="7612120">.</span><span class="ident" id="7612121">Sub</span><span class="op" id="7612124">(</span><span class="ident" id="7612125">r</span><span class="op" id="7612126">,</span>&nbsp;<span class="builtinfunc" id="7612128">new</span><span class="op" id="7612131">(</span><span class="ident" id="7612132">Rat</span><span class="op" id="7612135">)</span><span class="op" id="7612136">.</span><span class="ident" id="7612137">SetFloat64</span><span class="op" id="7612147">(</span><span class="ident" id="7612148">f</span><span class="op" id="7612149">)</span><span class="op" id="7612150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612153">return</span>&nbsp;<span class="ident" id="7612160">d</span><span class="op" id="7612161">.</span><span class="ident" id="7612162">Abs</span><span class="op" id="7612165">(</span><span class="ident" id="7612166">d</span><span class="op" id="7612167">)</span><br>
<span class="lineno"></span><span class="op" id="7612169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7612172">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7612238">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7612261">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7612289">func</span>&nbsp;<span class="ident" id="7612294">checkIsBestApprox32</span><span class="op" id="7612313">(</span><span class="ident" id="7612314">t</span>&nbsp;<span class="op" id="7612316">*</span><span class="ident" id="7612317">testing</span><span class="op" id="7612324">.</span><span class="ident" id="7612325">T</span><span class="op" id="7612326">,</span>&nbsp;<span class="ident" id="7612328">f</span>&nbsp;<span class="builtintype" id="7612330">float32</span><span class="op" id="7612337">,</span>&nbsp;<span class="ident" id="7612339">r</span>&nbsp;<span class="op" id="7612341">*</span><span class="ident" id="7612342">Rat</span><span class="op" id="7612345">)</span>&nbsp;<span class="builtintype" id="7612347">bool</span>&nbsp;<span class="op" id="7612352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612355">if</span>&nbsp;<span class="ident" id="7612358">math</span><span class="op" id="7612362">.</span><span class="ident" id="7612363">Abs</span><span class="op" id="7612366">(</span><span class="builtintype" id="7612367">float64</span><span class="op" id="7612374">(</span><span class="ident" id="7612375">f</span><span class="op" id="7612376">)</span><span class="op" id="7612377">)</span>&nbsp;<span class="op" id="7612379">&gt;=</span>&nbsp;<span class="ident" id="7612382">math</span><span class="op" id="7612386">.</span><span class="ident" id="7612387">MaxFloat32</span>&nbsp;<span class="op" id="7612398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612402">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612473">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612521">return</span>&nbsp;<span class="builtintype" id="7612528">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612538">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612605">f0</span>&nbsp;<span class="op" id="7612608">:=</span>&nbsp;<span class="ident" id="7612611">math</span><span class="op" id="7612615">.</span><span class="ident" id="7612616">Nextafter32</span><span class="op" id="7612627">(</span><span class="ident" id="7612628">f</span><span class="op" id="7612629">,</span>&nbsp;<span class="builtintype" id="7612631">float32</span><span class="op" id="7612638">(</span><span class="ident" id="7612639">math</span><span class="op" id="7612643">.</span><span class="ident" id="7612644">Inf</span><span class="op" id="7612647">(</span><span class="op" id="7612648">-</span><span class="num" id="7612649">1</span><span class="op" id="7612650">)</span><span class="op" id="7612651">)</span><span class="op" id="7612652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612655">f1</span>&nbsp;<span class="op" id="7612658">:=</span>&nbsp;<span class="ident" id="7612661">math</span><span class="op" id="7612665">.</span><span class="ident" id="7612666">Nextafter32</span><span class="op" id="7612677">(</span><span class="ident" id="7612678">f</span><span class="op" id="7612679">,</span>&nbsp;<span class="builtintype" id="7612681">float32</span><span class="op" id="7612688">(</span><span class="ident" id="7612689">math</span><span class="op" id="7612693">.</span><span class="ident" id="7612694">Inf</span><span class="op" id="7612697">(</span><span class="op" id="7612698">+</span><span class="num" id="7612699">1</span><span class="op" id="7612700">)</span><span class="op" id="7612701">)</span><span class="op" id="7612702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612706">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612771">df</span>&nbsp;<span class="op" id="7612774">:=</span>&nbsp;<span class="ident" id="7612777">delta</span><span class="op" id="7612782">(</span><span class="ident" id="7612783">r</span><span class="op" id="7612784">,</span>&nbsp;<span class="builtintype" id="7612786">float64</span><span class="op" id="7612793">(</span><span class="ident" id="7612794">f</span><span class="op" id="7612795">)</span><span class="op" id="7612796">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612799">df0</span>&nbsp;<span class="op" id="7612803">:=</span>&nbsp;<span class="ident" id="7612806">delta</span><span class="op" id="7612811">(</span><span class="ident" id="7612812">r</span><span class="op" id="7612813">,</span>&nbsp;<span class="builtintype" id="7612815">float64</span><span class="op" id="7612822">(</span><span class="ident" id="7612823">f0</span><span class="op" id="7612825">)</span><span class="op" id="7612826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612829">df1</span>&nbsp;<span class="op" id="7612833">:=</span>&nbsp;<span class="ident" id="7612836">delta</span><span class="op" id="7612841">(</span><span class="ident" id="7612842">r</span><span class="op" id="7612843">,</span>&nbsp;<span class="builtintype" id="7612845">float64</span><span class="op" id="7612852">(</span><span class="ident" id="7612853">f1</span><span class="op" id="7612855">)</span><span class="op" id="7612856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612859">if</span>&nbsp;<span class="ident" id="7612862">df</span><span class="op" id="7612864">.</span><span class="ident" id="7612865">Cmp</span><span class="op" id="7612868">(</span><span class="ident" id="7612869">df0</span><span class="op" id="7612872">)</span>&nbsp;<span class="op" id="7612874">&gt;</span>&nbsp;<span class="num" id="7612876">0</span>&nbsp;<span class="op" id="7612878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7612882">t</span><span class="op" id="7612883">.</span><span class="ident" id="7612884">Errorf</span><span class="op" id="7612890">(</span><span class="string" id="7612891">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7612960">,</span>&nbsp;<span class="ident" id="7612962">r</span><span class="op" id="7612963">,</span>&nbsp;<span class="ident" id="7612965">f</span><span class="op" id="7612966">,</span>&nbsp;<span class="ident" id="7612968">f</span><span class="op" id="7612969">,</span>&nbsp;<span class="ident" id="7612971">f0</span><span class="op" id="7612973">,</span>&nbsp;<span class="ident" id="7612975">f0</span><span class="op" id="7612977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612981">return</span>&nbsp;<span class="builtintype" id="7612988">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7612998">if</span>&nbsp;<span class="ident" id="7613001">df</span><span class="op" id="7613003">.</span><span class="ident" id="7613004">Cmp</span><span class="op" id="7613007">(</span><span class="ident" id="7613008">df1</span><span class="op" id="7613011">)</span>&nbsp;<span class="op" id="7613013">&gt;</span>&nbsp;<span class="num" id="7613015">0</span>&nbsp;<span class="op" id="7613017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613021">t</span><span class="op" id="7613022">.</span><span class="ident" id="7613023">Errorf</span><span class="op" id="7613029">(</span><span class="string" id="7613030">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7613095">,</span>&nbsp;<span class="ident" id="7613097">r</span><span class="op" id="7613098">,</span>&nbsp;<span class="ident" id="7613100">f</span><span class="op" id="7613101">,</span>&nbsp;<span class="ident" id="7613103">f</span><span class="op" id="7613104">,</span>&nbsp;<span class="ident" id="7613106">f1</span><span class="op" id="7613108">,</span>&nbsp;<span class="ident" id="7613110">f1</span><span class="op" id="7613112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613116">return</span>&nbsp;<span class="builtintype" id="7613123">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613130">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613133">if</span>&nbsp;<span class="ident" id="7613136">df</span><span class="op" id="7613138">.</span><span class="ident" id="7613139">Cmp</span><span class="op" id="7613142">(</span><span class="ident" id="7613143">df0</span><span class="op" id="7613146">)</span>&nbsp;<span class="op" id="7613148">==</span>&nbsp;<span class="num" id="7613151">0</span>&nbsp;<span class="op" id="7613153">&amp;&amp;</span>&nbsp;<span class="op" id="7613156">!</span><span class="ident" id="7613157">isEven32</span><span class="op" id="7613165">(</span><span class="ident" id="7613166">f</span><span class="op" id="7613167">)</span>&nbsp;<span class="op" id="7613169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613173">t</span><span class="op" id="7613174">.</span><span class="ident" id="7613175">Errorf</span><span class="op" id="7613181">(</span><span class="string" id="7613182">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7613259">,</span>&nbsp;<span class="ident" id="7613261">r</span><span class="op" id="7613262">,</span>&nbsp;<span class="ident" id="7613264">f</span><span class="op" id="7613265">,</span>&nbsp;<span class="ident" id="7613267">f</span><span class="op" id="7613268">,</span>&nbsp;<span class="ident" id="7613270">f0</span><span class="op" id="7613272">,</span>&nbsp;<span class="ident" id="7613274">f0</span><span class="op" id="7613276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613280">return</span>&nbsp;<span class="builtintype" id="7613287">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613297">if</span>&nbsp;<span class="ident" id="7613300">df</span><span class="op" id="7613302">.</span><span class="ident" id="7613303">Cmp</span><span class="op" id="7613306">(</span><span class="ident" id="7613307">df1</span><span class="op" id="7613310">)</span>&nbsp;<span class="op" id="7613312">==</span>&nbsp;<span class="num" id="7613315">0</span>&nbsp;<span class="op" id="7613317">&amp;&amp;</span>&nbsp;<span class="op" id="7613320">!</span><span class="ident" id="7613321">isEven32</span><span class="op" id="7613329">(</span><span class="ident" id="7613330">f</span><span class="op" id="7613331">)</span>&nbsp;<span class="op" id="7613333">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613337">t</span><span class="op" id="7613338">.</span><span class="ident" id="7613339">Errorf</span><span class="op" id="7613345">(</span><span class="string" id="7613346">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7613423">,</span>&nbsp;<span class="ident" id="7613425">r</span><span class="op" id="7613426">,</span>&nbsp;<span class="ident" id="7613428">f</span><span class="op" id="7613429">,</span>&nbsp;<span class="ident" id="7613431">f</span><span class="op" id="7613432">,</span>&nbsp;<span class="ident" id="7613434">f1</span><span class="op" id="7613436">,</span>&nbsp;<span class="ident" id="7613438">f1</span><span class="op" id="7613440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613444">return</span>&nbsp;<span class="builtintype" id="7613451">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613461">return</span>&nbsp;<span class="builtintype" id="7613468">true</span><br>
<span class="lineno"></span><span class="op" id="7613473">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7613476">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7613542">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7613565">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7613593">func</span>&nbsp;<span class="ident" id="7613598">checkIsBestApprox64</span><span class="op" id="7613617">(</span><span class="ident" id="7613618">t</span>&nbsp;<span class="op" id="7613620">*</span><span class="ident" id="7613621">testing</span><span class="op" id="7613628">.</span><span class="ident" id="7613629">T</span><span class="op" id="7613630">,</span>&nbsp;<span class="ident" id="7613632">f</span>&nbsp;<span class="builtintype" id="7613634">float64</span><span class="op" id="7613641">,</span>&nbsp;<span class="ident" id="7613643">r</span>&nbsp;<span class="op" id="7613645">*</span><span class="ident" id="7613646">Rat</span><span class="op" id="7613649">)</span>&nbsp;<span class="builtintype" id="7613651">bool</span>&nbsp;<span class="op" id="7613656">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613659">if</span>&nbsp;<span class="ident" id="7613662">math</span><span class="op" id="7613666">.</span><span class="ident" id="7613667">Abs</span><span class="op" id="7613670">(</span><span class="ident" id="7613671">f</span><span class="op" id="7613672">)</span>&nbsp;<span class="op" id="7613674">&gt;=</span>&nbsp;<span class="ident" id="7613677">math</span><span class="op" id="7613681">.</span><span class="ident" id="7613682">MaxFloat64</span>&nbsp;<span class="op" id="7613693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613697">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613768">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7613816">return</span>&nbsp;<span class="builtintype" id="7613823">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613829">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613833">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613900">f0</span>&nbsp;<span class="op" id="7613903">:=</span>&nbsp;<span class="ident" id="7613906">math</span><span class="op" id="7613910">.</span><span class="ident" id="7613911">Nextafter</span><span class="op" id="7613920">(</span><span class="ident" id="7613921">f</span><span class="op" id="7613922">,</span>&nbsp;<span class="ident" id="7613924">math</span><span class="op" id="7613928">.</span><span class="ident" id="7613929">Inf</span><span class="op" id="7613932">(</span><span class="op" id="7613933">-</span><span class="num" id="7613934">1</span><span class="op" id="7613935">)</span><span class="op" id="7613936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7613939">f1</span>&nbsp;<span class="op" id="7613942">:=</span>&nbsp;<span class="ident" id="7613945">math</span><span class="op" id="7613949">.</span><span class="ident" id="7613950">Nextafter</span><span class="op" id="7613959">(</span><span class="ident" id="7613960">f</span><span class="op" id="7613961">,</span>&nbsp;<span class="ident" id="7613963">math</span><span class="op" id="7613967">.</span><span class="ident" id="7613968">Inf</span><span class="op" id="7613971">(</span><span class="op" id="7613972">+</span><span class="num" id="7613973">1</span><span class="op" id="7613974">)</span><span class="op" id="7613975">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613979">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614044">df</span>&nbsp;<span class="op" id="7614047">:=</span>&nbsp;<span class="ident" id="7614050">delta</span><span class="op" id="7614055">(</span><span class="ident" id="7614056">r</span><span class="op" id="7614057">,</span>&nbsp;<span class="ident" id="7614059">f</span><span class="op" id="7614060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614063">df0</span>&nbsp;<span class="op" id="7614067">:=</span>&nbsp;<span class="ident" id="7614070">delta</span><span class="op" id="7614075">(</span><span class="ident" id="7614076">r</span><span class="op" id="7614077">,</span>&nbsp;<span class="ident" id="7614079">f0</span><span class="op" id="7614081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614084">df1</span>&nbsp;<span class="op" id="7614088">:=</span>&nbsp;<span class="ident" id="7614091">delta</span><span class="op" id="7614096">(</span><span class="ident" id="7614097">r</span><span class="op" id="7614098">,</span>&nbsp;<span class="ident" id="7614100">f1</span><span class="op" id="7614102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614105">if</span>&nbsp;<span class="ident" id="7614108">df</span><span class="op" id="7614110">.</span><span class="ident" id="7614111">Cmp</span><span class="op" id="7614114">(</span><span class="ident" id="7614115">df0</span><span class="op" id="7614118">)</span>&nbsp;<span class="op" id="7614120">&gt;</span>&nbsp;<span class="num" id="7614122">0</span>&nbsp;<span class="op" id="7614124">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614128">t</span><span class="op" id="7614129">.</span><span class="ident" id="7614130">Errorf</span><span class="op" id="7614136">(</span><span class="string" id="7614137">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7614206">,</span>&nbsp;<span class="ident" id="7614208">r</span><span class="op" id="7614209">,</span>&nbsp;<span class="ident" id="7614211">f</span><span class="op" id="7614212">,</span>&nbsp;<span class="ident" id="7614214">f</span><span class="op" id="7614215">,</span>&nbsp;<span class="ident" id="7614217">f0</span><span class="op" id="7614219">,</span>&nbsp;<span class="ident" id="7614221">f0</span><span class="op" id="7614223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614227">return</span>&nbsp;<span class="builtintype" id="7614234">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614244">if</span>&nbsp;<span class="ident" id="7614247">df</span><span class="op" id="7614249">.</span><span class="ident" id="7614250">Cmp</span><span class="op" id="7614253">(</span><span class="ident" id="7614254">df1</span><span class="op" id="7614257">)</span>&nbsp;<span class="op" id="7614259">&gt;</span>&nbsp;<span class="num" id="7614261">0</span>&nbsp;<span class="op" id="7614263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614267">t</span><span class="op" id="7614268">.</span><span class="ident" id="7614269">Errorf</span><span class="op" id="7614275">(</span><span class="string" id="7614276">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7614341">,</span>&nbsp;<span class="ident" id="7614343">r</span><span class="op" id="7614344">,</span>&nbsp;<span class="ident" id="7614346">f</span><span class="op" id="7614347">,</span>&nbsp;<span class="ident" id="7614349">f</span><span class="op" id="7614350">,</span>&nbsp;<span class="ident" id="7614352">f1</span><span class="op" id="7614354">,</span>&nbsp;<span class="ident" id="7614356">f1</span><span class="op" id="7614358">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614362">return</span>&nbsp;<span class="builtintype" id="7614369">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614379">if</span>&nbsp;<span class="ident" id="7614382">df</span><span class="op" id="7614384">.</span><span class="ident" id="7614385">Cmp</span><span class="op" id="7614388">(</span><span class="ident" id="7614389">df0</span><span class="op" id="7614392">)</span>&nbsp;<span class="op" id="7614394">==</span>&nbsp;<span class="num" id="7614397">0</span>&nbsp;<span class="op" id="7614399">&amp;&amp;</span>&nbsp;<span class="op" id="7614402">!</span><span class="ident" id="7614403">isEven64</span><span class="op" id="7614411">(</span><span class="ident" id="7614412">f</span><span class="op" id="7614413">)</span>&nbsp;<span class="op" id="7614415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614419">t</span><span class="op" id="7614420">.</span><span class="ident" id="7614421">Errorf</span><span class="op" id="7614427">(</span><span class="string" id="7614428">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7614505">,</span>&nbsp;<span class="ident" id="7614507">r</span><span class="op" id="7614508">,</span>&nbsp;<span class="ident" id="7614510">f</span><span class="op" id="7614511">,</span>&nbsp;<span class="ident" id="7614513">f</span><span class="op" id="7614514">,</span>&nbsp;<span class="ident" id="7614516">f0</span><span class="op" id="7614518">,</span>&nbsp;<span class="ident" id="7614520">f0</span><span class="op" id="7614522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614526">return</span>&nbsp;<span class="builtintype" id="7614533">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614543">if</span>&nbsp;<span class="ident" id="7614546">df</span><span class="op" id="7614548">.</span><span class="ident" id="7614549">Cmp</span><span class="op" id="7614552">(</span><span class="ident" id="7614553">df1</span><span class="op" id="7614556">)</span>&nbsp;<span class="op" id="7614558">==</span>&nbsp;<span class="num" id="7614561">0</span>&nbsp;<span class="op" id="7614563">&amp;&amp;</span>&nbsp;<span class="op" id="7614566">!</span><span class="ident" id="7614567">isEven64</span><span class="op" id="7614575">(</span><span class="ident" id="7614576">f</span><span class="op" id="7614577">)</span>&nbsp;<span class="op" id="7614579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614583">t</span><span class="op" id="7614584">.</span><span class="ident" id="7614585">Errorf</span><span class="op" id="7614591">(</span><span class="string" id="7614592">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7614669">,</span>&nbsp;<span class="ident" id="7614671">r</span><span class="op" id="7614672">,</span>&nbsp;<span class="ident" id="7614674">f</span><span class="op" id="7614675">,</span>&nbsp;<span class="ident" id="7614677">f</span><span class="op" id="7614678">,</span>&nbsp;<span class="ident" id="7614680">f1</span><span class="op" id="7614682">,</span>&nbsp;<span class="ident" id="7614684">f1</span><span class="op" id="7614686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614690">return</span>&nbsp;<span class="builtintype" id="7614697">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614704">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7614707">return</span>&nbsp;<span class="builtintype" id="7614714">true</span><br>
<span class="lineno"></span><span class="op" id="7614719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7614722">func</span>&nbsp;<span class="ident" id="7614727">isEven32</span><span class="op" id="7614735">(</span><span class="ident" id="7614736">f</span>&nbsp;<span class="builtintype" id="7614738">float32</span><span class="op" id="7614745">)</span>&nbsp;<span class="builtintype" id="7614747">bool</span>&nbsp;<span class="op" id="7614752">{</span>&nbsp;<span class="keyword" id="7614754">return</span>&nbsp;<span class="ident" id="7614761">math</span><span class="op" id="7614765">.</span><span class="ident" id="7614766">Float32bits</span><span class="op" id="7614777">(</span><span class="ident" id="7614778">f</span><span class="op" id="7614779">)</span><span class="op" id="7614780">&amp;</span><span class="num" id="7614781">1</span>&nbsp;<span class="op" id="7614783">==</span>&nbsp;<span class="num" id="7614786">0</span>&nbsp;<span class="op" id="7614788">}</span><br>
<span class="lineno"></span><span class="keyword" id="7614790">func</span>&nbsp;<span class="ident" id="7614795">isEven64</span><span class="op" id="7614803">(</span><span class="ident" id="7614804">f</span>&nbsp;<span class="builtintype" id="7614806">float64</span><span class="op" id="7614813">)</span>&nbsp;<span class="builtintype" id="7614815">bool</span>&nbsp;<span class="op" id="7614820">{</span>&nbsp;<span class="keyword" id="7614822">return</span>&nbsp;<span class="ident" id="7614829">math</span><span class="op" id="7614833">.</span><span class="ident" id="7614834">Float64bits</span><span class="op" id="7614845">(</span><span class="ident" id="7614846">f</span><span class="op" id="7614847">)</span><span class="op" id="7614848">&amp;</span><span class="num" id="7614849">1</span>&nbsp;<span class="op" id="7614851">==</span>&nbsp;<span class="num" id="7614854">0</span>&nbsp;<span class="op" id="7614856">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7614859">func</span>&nbsp;<span class="ident" id="7614864">TestIsFinite</span><span class="op" id="7614876">(</span><span class="ident" id="7614877">t</span>&nbsp;<span class="op" id="7614879">*</span><span class="ident" id="7614880">testing</span><span class="op" id="7614887">.</span><span class="ident" id="7614888">T</span><span class="op" id="7614889">)</span>&nbsp;<span class="op" id="7614891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614894">finites</span>&nbsp;<span class="op" id="7614902">:=</span>&nbsp;<span class="op" id="7614905">[</span><span class="op" id="7614906">]</span><span class="builtintype" id="7614907">float64</span><span class="op" id="7614914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7614918">1.0</span>&nbsp;<span class="op" id="7614922">/</span>&nbsp;<span class="num" id="7614924">3</span><span class="op" id="7614925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7614929">4891559871276714924261e+222</span><span class="op" id="7614956">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614960">math</span><span class="op" id="7614964">.</span><span class="ident" id="7614965">MaxFloat64</span><span class="op" id="7614975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7614979">math</span><span class="op" id="7614983">.</span><span class="ident" id="7614984">SmallestNonzeroFloat64</span><span class="op" id="7615006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615010">-</span><span class="ident" id="7615011">math</span><span class="op" id="7615015">.</span><span class="ident" id="7615016">MaxFloat64</span><span class="op" id="7615026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615030">-</span><span class="ident" id="7615031">math</span><span class="op" id="7615035">.</span><span class="ident" id="7615036">SmallestNonzeroFloat64</span><span class="op" id="7615058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615061">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615064">for</span>&nbsp;<span class="ident" id="7615068">_</span><span class="op" id="7615069">,</span>&nbsp;<span class="ident" id="7615071">f</span>&nbsp;<span class="op" id="7615073">:=</span>&nbsp;<span class="keyword" id="7615076">range</span>&nbsp;<span class="ident" id="7615082">finites</span>&nbsp;<span class="op" id="7615090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615094">if</span>&nbsp;<span class="op" id="7615097">!</span><span class="ident" id="7615098">isFinite</span><span class="op" id="7615106">(</span><span class="ident" id="7615107">f</span><span class="op" id="7615108">)</span>&nbsp;<span class="op" id="7615110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615115">t</span><span class="op" id="7615116">.</span><span class="ident" id="7615117">Errorf</span><span class="op" id="7615123">(</span><span class="string" id="7615124">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7615144">,</span>&nbsp;<span class="ident" id="7615146">f</span><span class="op" id="7615147">,</span>&nbsp;<span class="ident" id="7615149">f</span><span class="op" id="7615150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615157">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615160">nonfinites</span>&nbsp;<span class="op" id="7615171">:=</span>&nbsp;<span class="op" id="7615174">[</span><span class="op" id="7615175">]</span><span class="builtintype" id="7615176">float64</span><span class="op" id="7615183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615187">math</span><span class="op" id="7615191">.</span><span class="ident" id="7615192">NaN</span><span class="op" id="7615195">(</span><span class="op" id="7615196">)</span><span class="op" id="7615197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615201">math</span><span class="op" id="7615205">.</span><span class="ident" id="7615206">Inf</span><span class="op" id="7615209">(</span><span class="op" id="7615210">-</span><span class="num" id="7615211">1</span><span class="op" id="7615212">)</span><span class="op" id="7615213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615217">math</span><span class="op" id="7615221">.</span><span class="ident" id="7615222">Inf</span><span class="op" id="7615225">(</span><span class="op" id="7615226">+</span><span class="num" id="7615227">1</span><span class="op" id="7615228">)</span><span class="op" id="7615229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615232">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615235">for</span>&nbsp;<span class="ident" id="7615239">_</span><span class="op" id="7615240">,</span>&nbsp;<span class="ident" id="7615242">f</span>&nbsp;<span class="op" id="7615244">:=</span>&nbsp;<span class="keyword" id="7615247">range</span>&nbsp;<span class="ident" id="7615253">nonfinites</span>&nbsp;<span class="op" id="7615264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615268">if</span>&nbsp;<span class="ident" id="7615271">isFinite</span><span class="op" id="7615279">(</span><span class="ident" id="7615280">f</span><span class="op" id="7615281">)</span>&nbsp;<span class="op" id="7615283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615288">t</span><span class="op" id="7615289">.</span><span class="ident" id="7615290">Errorf</span><span class="op" id="7615296">(</span><span class="string" id="7615297">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7615317">,</span>&nbsp;<span class="ident" id="7615319">f</span><span class="op" id="7615320">,</span>&nbsp;<span class="ident" id="7615322">f</span><span class="op" id="7615323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615330">}</span><br>
<span class="lineno">1160</span><span class="op" id="7615332">}</span>
</div>
</body>
</html>
