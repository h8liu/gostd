<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5352868">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5352923">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5352977">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5353028">/*<br>
<span class="lineno"></span>Package&nbsp;zlib&nbsp;implements&nbsp;reading&nbsp;and&nbsp;writing&nbsp;of&nbsp;zlib&nbsp;format&nbsp;compressed&nbsp;data,<br>
<span class="lineno"></span>as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;1950.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>The&nbsp;implementation&nbsp;provides&nbsp;filters&nbsp;that&nbsp;uncompress&nbsp;during&nbsp;reading<br>
<span class="lineno">10</span>and&nbsp;compress&nbsp;during&nbsp;writing.&nbsp;&nbsp;For&nbsp;example,&nbsp;to&nbsp;write&nbsp;compressed&nbsp;data<br>
<span class="lineno"></span>to&nbsp;a&nbsp;buffer:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;b&nbsp;bytes.Buffer<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw&nbsp;:=&nbsp;zlib.NewWriter(&amp;b)<br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbspw.Write([]byte(&#34;hello,&nbsp;world\n&#34;))<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspw.Close()<br>
<span class="lineno"></span><br>
<span class="lineno"></span>and&nbsp;to&nbsp;read&nbsp;that&nbsp;data&nbsp;back:<br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbspr,&nbsp;err&nbsp;:=&nbsp;zlib.NewReader(&amp;b)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspio.Copy(os.Stdout,&nbsp;r)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspr.Close()<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="5353471">package</span>&nbsp;<span class="ident" id="5353479">zlib</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5353485">import</span>&nbsp;<span class="op" id="5353492">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353495">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353504">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353522">&#34;errors&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353532">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353540">&#34;hash/adler32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5353556">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5353561">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="5353564">const</span>&nbsp;<span class="ident" id="5353570">zlibDeflate</span>&nbsp;<span class="op" id="5353582">=</span>&nbsp;<span class="num" id="5353584">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5353587">var</span>&nbsp;<span class="op" id="5353591">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353594">//&nbsp;ErrChecksum&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353675">ErrChecksum</span>&nbsp;<span class="op" id="5353687">=</span>&nbsp;<span class="ident" id="5353689">errors</span><span class="op" id="5353695">.</span><span class="ident" id="5353696">New</span><span class="op" id="5353699">(</span><span class="string" id="5353700">&#34;zlib:&nbsp;invalid&nbsp;checksum&#34;</span><span class="op" id="5353724">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353727">//&nbsp;ErrDictionary&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;dictionary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353812">ErrDictionary</span>&nbsp;<span class="op" id="5353826">=</span>&nbsp;<span class="ident" id="5353828">errors</span><span class="op" id="5353834">.</span><span class="ident" id="5353835">New</span><span class="op" id="5353838">(</span><span class="string" id="5353839">&#34;zlib:&nbsp;invalid&nbsp;dictionary&#34;</span><span class="op" id="5353865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5353868">//&nbsp;ErrHeader&nbsp;is&nbsp;returned&nbsp;when&nbsp;reading&nbsp;ZLIB&nbsp;data&nbsp;that&nbsp;has&nbsp;an&nbsp;invalid&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5353945">ErrHeader</span>&nbsp;<span class="op" id="5353955">=</span>&nbsp;<span class="ident" id="5353957">errors</span><span class="op" id="5353963">.</span><span class="ident" id="5353964">New</span><span class="op" id="5353967">(</span><span class="string" id="5353968">&#34;zlib:&nbsp;invalid&nbsp;header&#34;</span><span class="op" id="5353990">)</span><br>
<span class="lineno"></span><span class="op" id="5353992">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5353995">type</span>&nbsp;<span class="ident" id="5354000">reader</span>&nbsp;<span class="keyword" id="5354007">struct</span>&nbsp;<span class="op" id="5354014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354017">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5354030">flate</span><span class="op" id="5354035">.</span><span class="ident" id="5354036">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354044">decompressor</span>&nbsp;<span class="ident" id="5354057">io</span><span class="op" id="5354059">.</span><span class="ident" id="5354060">ReadCloser</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354072">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5354085">hash</span><span class="op" id="5354089">.</span><span class="ident" id="5354090">Hash32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354098">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5354111">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354118">scratch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5354131">[</span><span class="num" id="5354132">4</span><span class="op" id="5354133">]</span><span class="builtintype" id="5354134">byte</span><br>
<span class="lineno"></span><span class="op" id="5354139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5354142">//&nbsp;Resetter&nbsp;resets&nbsp;a&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;or&nbsp;NewReaderDict&nbsp;to</span><br>
<span class="lineno">55</span><span class="comment" id="5354216">//&nbsp;to&nbsp;switch&nbsp;to&nbsp;a&nbsp;new&nbsp;underlying&nbsp;Reader.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;ReadCloser</span><br>
<span class="lineno"></span><span class="comment" id="5354291">//&nbsp;instead&nbsp;of&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="5354327">type</span>&nbsp;<span class="ident" id="5354332">Resetter</span>&nbsp;<span class="keyword" id="5354341">interface</span>&nbsp;<span class="op" id="5354351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354354">//&nbsp;Reset&nbsp;discards&nbsp;any&nbsp;buffered&nbsp;data&nbsp;and&nbsp;resets&nbsp;the&nbsp;Resetter&nbsp;as&nbsp;if&nbsp;it&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5354428">//&nbsp;newly&nbsp;initialized&nbsp;with&nbsp;the&nbsp;given&nbsp;reader.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5354473">Reset</span><span class="op" id="5354478">(</span><span class="ident" id="5354479">r</span>&nbsp;<span class="ident" id="5354481">io</span><span class="op" id="5354483">.</span><span class="ident" id="5354484">Reader</span><span class="op" id="5354490">,</span>&nbsp;<span class="ident" id="5354492">dict</span>&nbsp;<span class="op" id="5354497">[</span><span class="op" id="5354498">]</span><span class="builtintype" id="5354499">byte</span><span class="op" id="5354503">)</span>&nbsp;<span class="builtintype" id="5354505">error</span><br>
<span class="lineno"></span><span class="op" id="5354511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5354514">//&nbsp;NewReader&nbsp;creates&nbsp;a&nbsp;new&nbsp;ReadCloser.</span><br>
<span class="lineno"></span><span class="comment" id="5354553">//&nbsp;Reads&nbsp;from&nbsp;the&nbsp;returned&nbsp;ReadCloser&nbsp;read&nbsp;and&nbsp;decompress&nbsp;data&nbsp;from&nbsp;r.</span><br>
<span class="lineno">65</span><span class="comment" id="5354624">//&nbsp;The&nbsp;implementation&nbsp;buffers&nbsp;input&nbsp;and&nbsp;may&nbsp;read&nbsp;more&nbsp;data&nbsp;than&nbsp;necessary&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5354706">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;ReadCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="5354786">//</span><br>
<span class="lineno"></span><span class="comment" id="5354789">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReader&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5354855">func</span>&nbsp;<span class="ident" id="5354860">NewReader</span><span class="op" id="5354869">(</span><span class="ident" id="5354870">r</span>&nbsp;<span class="ident" id="5354872">io</span><span class="op" id="5354874">.</span><span class="ident" id="5354875">Reader</span><span class="op" id="5354881">)</span>&nbsp;<span class="op" id="5354883">(</span><span class="ident" id="5354884">io</span><span class="op" id="5354886">.</span><span class="ident" id="5354887">ReadCloser</span><span class="op" id="5354897">,</span>&nbsp;<span class="builtintype" id="5354899">error</span><span class="op" id="5354904">)</span>&nbsp;<span class="op" id="5354906">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5354909">return</span>&nbsp;<span class="ident" id="5354916">NewReaderDict</span><span class="op" id="5354929">(</span><span class="ident" id="5354930">r</span><span class="op" id="5354931">,</span>&nbsp;<span class="ident" id="5354933">nil</span><span class="op" id="5354936">)</span><br>
<span class="lineno"></span><span class="op" id="5354938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5354941">//&nbsp;NewReaderDict&nbsp;is&nbsp;like&nbsp;NewReader&nbsp;but&nbsp;uses&nbsp;a&nbsp;preset&nbsp;dictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5355006">//&nbsp;NewReaderDict&nbsp;ignores&nbsp;the&nbsp;dictionary&nbsp;if&nbsp;the&nbsp;compressed&nbsp;data&nbsp;does&nbsp;not&nbsp;refer&nbsp;to&nbsp;it.</span><br>
<span class="lineno">75</span><span class="comment" id="5355091">//&nbsp;If&nbsp;the&nbsp;compressed&nbsp;data&nbsp;refers&nbsp;to&nbsp;a&nbsp;different&nbsp;dictionary,&nbsp;NewReaderDict&nbsp;returns&nbsp;ErrDictionary.</span><br>
<span class="lineno"></span><span class="comment" id="5355188">//</span><br>
<span class="lineno"></span><span class="comment" id="5355191">//&nbsp;The&nbsp;ReadCloser&nbsp;returned&nbsp;by&nbsp;NewReaderDict&nbsp;also&nbsp;implements&nbsp;Resetter.</span><br>
<span class="lineno"></span><span class="keyword" id="5355261">func</span>&nbsp;<span class="ident" id="5355266">NewReaderDict</span><span class="op" id="5355279">(</span><span class="ident" id="5355280">r</span>&nbsp;<span class="ident" id="5355282">io</span><span class="op" id="5355284">.</span><span class="ident" id="5355285">Reader</span><span class="op" id="5355291">,</span>&nbsp;<span class="ident" id="5355293">dict</span>&nbsp;<span class="op" id="5355298">[</span><span class="op" id="5355299">]</span><span class="builtintype" id="5355300">byte</span><span class="op" id="5355304">)</span>&nbsp;<span class="op" id="5355306">(</span><span class="ident" id="5355307">io</span><span class="op" id="5355309">.</span><span class="ident" id="5355310">ReadCloser</span><span class="op" id="5355320">,</span>&nbsp;<span class="builtintype" id="5355322">error</span><span class="op" id="5355327">)</span>&nbsp;<span class="op" id="5355329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355332">z</span>&nbsp;<span class="op" id="5355334">:=</span>&nbsp;<span class="builtinfunc" id="5355337">new</span><span class="op" id="5355340">(</span><span class="ident" id="5355341">reader</span><span class="op" id="5355347">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355350">err</span>&nbsp;<span class="op" id="5355354">:=</span>&nbsp;<span class="ident" id="5355357">z</span><span class="op" id="5355358">.</span><span class="ident" id="5355359">Reset</span><span class="op" id="5355364">(</span><span class="ident" id="5355365">r</span><span class="op" id="5355366">,</span>&nbsp;<span class="ident" id="5355368">dict</span><span class="op" id="5355372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355375">if</span>&nbsp;<span class="ident" id="5355378">err</span>&nbsp;<span class="op" id="5355382">!=</span>&nbsp;<span class="ident" id="5355385">nil</span>&nbsp;<span class="op" id="5355389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355393">return</span>&nbsp;<span class="ident" id="5355400">nil</span><span class="op" id="5355403">,</span>&nbsp;<span class="ident" id="5355405">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355413">return</span>&nbsp;<span class="ident" id="5355420">z</span><span class="op" id="5355421">,</span>&nbsp;<span class="ident" id="5355423">nil</span><br>
<span class="lineno">85</span><span class="op" id="5355427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5355430">func</span>&nbsp;<span class="op" id="5355435">(</span><span class="ident" id="5355436">z</span>&nbsp;<span class="op" id="5355438">*</span><span class="ident" id="5355439">reader</span><span class="op" id="5355445">)</span>&nbsp;<span class="ident" id="5355447">Read</span><span class="op" id="5355451">(</span><span class="ident" id="5355452">p</span>&nbsp;<span class="op" id="5355454">[</span><span class="op" id="5355455">]</span><span class="builtintype" id="5355456">byte</span><span class="op" id="5355460">)</span>&nbsp;<span class="op" id="5355462">(</span><span class="ident" id="5355463">n</span>&nbsp;<span class="builtintype" id="5355465">int</span><span class="op" id="5355468">,</span>&nbsp;<span class="ident" id="5355470">err</span>&nbsp;<span class="builtintype" id="5355474">error</span><span class="op" id="5355479">)</span>&nbsp;<span class="op" id="5355481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355484">if</span>&nbsp;<span class="ident" id="5355487">z</span><span class="op" id="5355488">.</span><span class="ident" id="5355489">err</span>&nbsp;<span class="op" id="5355493">!=</span>&nbsp;<span class="ident" id="5355496">nil</span>&nbsp;<span class="op" id="5355500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355504">return</span>&nbsp;<span class="num" id="5355511">0</span><span class="op" id="5355512">,</span>&nbsp;<span class="ident" id="5355514">z</span><span class="op" id="5355515">.</span><span class="ident" id="5355516">err</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355524">if</span>&nbsp;<span class="builtinfunc" id="5355527">len</span><span class="op" id="5355530">(</span><span class="ident" id="5355531">p</span><span class="op" id="5355532">)</span>&nbsp;<span class="op" id="5355534">==</span>&nbsp;<span class="num" id="5355537">0</span>&nbsp;<span class="op" id="5355539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355543">return</span>&nbsp;<span class="num" id="5355550">0</span><span class="op" id="5355551">,</span>&nbsp;<span class="ident" id="5355553">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355562">n</span><span class="op" id="5355563">,</span>&nbsp;<span class="ident" id="5355565">err</span>&nbsp;<span class="op" id="5355569">=</span>&nbsp;<span class="ident" id="5355571">z</span><span class="op" id="5355572">.</span><span class="ident" id="5355573">decompressor</span><span class="op" id="5355585">.</span><span class="ident" id="5355586">Read</span><span class="op" id="5355590">(</span><span class="ident" id="5355591">p</span><span class="op" id="5355592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355595">z</span><span class="op" id="5355596">.</span><span class="ident" id="5355597">digest</span><span class="op" id="5355603">.</span><span class="ident" id="5355604">Write</span><span class="op" id="5355609">(</span><span class="ident" id="5355610">p</span><span class="op" id="5355611">[</span><span class="num" id="5355612">0</span><span class="op" id="5355613">:</span><span class="ident" id="5355614">n</span><span class="op" id="5355615">]</span><span class="op" id="5355616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355619">if</span>&nbsp;<span class="ident" id="5355622">n</span>&nbsp;<span class="op" id="5355624">!=</span>&nbsp;<span class="num" id="5355627">0</span>&nbsp;<span class="op" id="5355629">||</span>&nbsp;<span class="ident" id="5355632">err</span>&nbsp;<span class="op" id="5355636">!=</span>&nbsp;<span class="ident" id="5355639">io</span><span class="op" id="5355641">.</span><span class="ident" id="5355642">EOF</span>&nbsp;<span class="op" id="5355646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355650">z</span><span class="op" id="5355651">.</span><span class="ident" id="5355652">err</span>&nbsp;<span class="op" id="5355656">=</span>&nbsp;<span class="ident" id="5355658">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355664">return</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355676">//&nbsp;Finished&nbsp;file;&nbsp;check&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355711">if</span>&nbsp;<span class="ident" id="5355714">_</span><span class="op" id="5355715">,</span>&nbsp;<span class="ident" id="5355717">err</span>&nbsp;<span class="op" id="5355721">:=</span>&nbsp;<span class="ident" id="5355724">io</span><span class="op" id="5355726">.</span><span class="ident" id="5355727">ReadFull</span><span class="op" id="5355735">(</span><span class="ident" id="5355736">z</span><span class="op" id="5355737">.</span><span class="ident" id="5355738">r</span><span class="op" id="5355739">,</span>&nbsp;<span class="ident" id="5355741">z</span><span class="op" id="5355742">.</span><span class="ident" id="5355743">scratch</span><span class="op" id="5355750">[</span><span class="num" id="5355751">0</span><span class="op" id="5355752">:</span><span class="num" id="5355753">4</span><span class="op" id="5355754">]</span><span class="op" id="5355755">)</span><span class="op" id="5355756">;</span>&nbsp;<span class="ident" id="5355758">err</span>&nbsp;<span class="op" id="5355762">!=</span>&nbsp;<span class="ident" id="5355765">nil</span>&nbsp;<span class="op" id="5355769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355773">z</span><span class="op" id="5355774">.</span><span class="ident" id="5355775">err</span>&nbsp;<span class="op" id="5355779">=</span>&nbsp;<span class="ident" id="5355781">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355787">return</span>&nbsp;<span class="num" id="5355794">0</span><span class="op" id="5355795">,</span>&nbsp;<span class="ident" id="5355797">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5355802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5355805">//&nbsp;ZLIB&nbsp;(RFC&nbsp;1950)&nbsp;is&nbsp;big-endian,&nbsp;unlike&nbsp;GZIP&nbsp;(RFC&nbsp;1952).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5355864">checksum</span>&nbsp;<span class="op" id="5355873">:=</span>&nbsp;<span class="builtintype" id="5355876">uint32</span><span class="op" id="5355882">(</span><span class="ident" id="5355883">z</span><span class="op" id="5355884">.</span><span class="ident" id="5355885">scratch</span><span class="op" id="5355892">[</span><span class="num" id="5355893">0</span><span class="op" id="5355894">]</span><span class="op" id="5355895">)</span><span class="op" id="5355896">&lt;&lt;</span><span class="num" id="5355898">24</span>&nbsp;<span class="op" id="5355901">|</span>&nbsp;<span class="builtintype" id="5355903">uint32</span><span class="op" id="5355909">(</span><span class="ident" id="5355910">z</span><span class="op" id="5355911">.</span><span class="ident" id="5355912">scratch</span><span class="op" id="5355919">[</span><span class="num" id="5355920">1</span><span class="op" id="5355921">]</span><span class="op" id="5355922">)</span><span class="op" id="5355923">&lt;&lt;</span><span class="num" id="5355925">16</span>&nbsp;<span class="op" id="5355928">|</span>&nbsp;<span class="builtintype" id="5355930">uint32</span><span class="op" id="5355936">(</span><span class="ident" id="5355937">z</span><span class="op" id="5355938">.</span><span class="ident" id="5355939">scratch</span><span class="op" id="5355946">[</span><span class="num" id="5355947">2</span><span class="op" id="5355948">]</span><span class="op" id="5355949">)</span><span class="op" id="5355950">&lt;&lt;</span><span class="num" id="5355952">8</span>&nbsp;<span class="op" id="5355954">|</span>&nbsp;<span class="builtintype" id="5355956">uint32</span><span class="op" id="5355962">(</span><span class="ident" id="5355963">z</span><span class="op" id="5355964">.</span><span class="ident" id="5355965">scratch</span><span class="op" id="5355972">[</span><span class="num" id="5355973">3</span><span class="op" id="5355974">]</span><span class="op" id="5355975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5355978">if</span>&nbsp;<span class="ident" id="5355981">checksum</span>&nbsp;<span class="op" id="5355990">!=</span>&nbsp;<span class="ident" id="5355993">z</span><span class="op" id="5355994">.</span><span class="ident" id="5355995">digest</span><span class="op" id="5356001">.</span><span class="ident" id="5356002">Sum32</span><span class="op" id="5356007">(</span><span class="op" id="5356008">)</span>&nbsp;<span class="op" id="5356010">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356014">z</span><span class="op" id="5356015">.</span><span class="ident" id="5356016">err</span>&nbsp;<span class="op" id="5356020">=</span>&nbsp;<span class="ident" id="5356022">ErrChecksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356036">return</span>&nbsp;<span class="num" id="5356043">0</span><span class="op" id="5356044">,</span>&nbsp;<span class="ident" id="5356046">z</span><span class="op" id="5356047">.</span><span class="ident" id="5356048">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356056">return</span><br>
<span class="lineno"></span><span class="op" id="5356063">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5356066">//&nbsp;Calling&nbsp;Close&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;wrapped&nbsp;io.Reader&nbsp;originally&nbsp;passed&nbsp;to&nbsp;NewReader.</span><br>
<span class="lineno"></span><span class="keyword" id="5356152">func</span>&nbsp;<span class="op" id="5356157">(</span><span class="ident" id="5356158">z</span>&nbsp;<span class="op" id="5356160">*</span><span class="ident" id="5356161">reader</span><span class="op" id="5356167">)</span>&nbsp;<span class="ident" id="5356169">Close</span><span class="op" id="5356174">(</span><span class="op" id="5356175">)</span>&nbsp;<span class="builtintype" id="5356177">error</span>&nbsp;<span class="op" id="5356183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356186">if</span>&nbsp;<span class="ident" id="5356189">z</span><span class="op" id="5356190">.</span><span class="ident" id="5356191">err</span>&nbsp;<span class="op" id="5356195">!=</span>&nbsp;<span class="ident" id="5356198">nil</span>&nbsp;<span class="op" id="5356202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356206">return</span>&nbsp;<span class="ident" id="5356213">z</span><span class="op" id="5356214">.</span><span class="ident" id="5356215">err</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356223">z</span><span class="op" id="5356224">.</span><span class="ident" id="5356225">err</span>&nbsp;<span class="op" id="5356229">=</span>&nbsp;<span class="ident" id="5356231">z</span><span class="op" id="5356232">.</span><span class="ident" id="5356233">decompressor</span><span class="op" id="5356245">.</span><span class="ident" id="5356246">Close</span><span class="op" id="5356251">(</span><span class="op" id="5356252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356255">return</span>&nbsp;<span class="ident" id="5356262">z</span><span class="op" id="5356263">.</span><span class="ident" id="5356264">err</span><br>
<span class="lineno"></span><span class="op" id="5356268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5356271">func</span>&nbsp;<span class="op" id="5356276">(</span><span class="ident" id="5356277">z</span>&nbsp;<span class="op" id="5356279">*</span><span class="ident" id="5356280">reader</span><span class="op" id="5356286">)</span>&nbsp;<span class="ident" id="5356288">Reset</span><span class="op" id="5356293">(</span><span class="ident" id="5356294">r</span>&nbsp;<span class="ident" id="5356296">io</span><span class="op" id="5356298">.</span><span class="ident" id="5356299">Reader</span><span class="op" id="5356305">,</span>&nbsp;<span class="ident" id="5356307">dict</span>&nbsp;<span class="op" id="5356312">[</span><span class="op" id="5356313">]</span><span class="builtintype" id="5356314">byte</span><span class="op" id="5356318">)</span>&nbsp;<span class="builtintype" id="5356320">error</span>&nbsp;<span class="op" id="5356326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356329">if</span>&nbsp;<span class="ident" id="5356332">fr</span><span class="op" id="5356334">,</span>&nbsp;<span class="ident" id="5356336">ok</span>&nbsp;<span class="op" id="5356339">:=</span>&nbsp;<span class="ident" id="5356342">r</span><span class="op" id="5356343">.</span><span class="op" id="5356344">(</span><span class="ident" id="5356345">flate</span><span class="op" id="5356350">.</span><span class="ident" id="5356351">Reader</span><span class="op" id="5356357">)</span><span class="op" id="5356358">;</span>&nbsp;<span class="ident" id="5356360">ok</span>&nbsp;<span class="op" id="5356363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356367">z</span><span class="op" id="5356368">.</span><span class="ident" id="5356369">r</span>&nbsp;<span class="op" id="5356371">=</span>&nbsp;<span class="ident" id="5356373">fr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356377">}</span>&nbsp;<span class="keyword" id="5356379">else</span>&nbsp;<span class="op" id="5356384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356388">z</span><span class="op" id="5356389">.</span><span class="ident" id="5356390">r</span>&nbsp;<span class="op" id="5356392">=</span>&nbsp;<span class="ident" id="5356394">bufio</span><span class="op" id="5356399">.</span><span class="ident" id="5356400">NewReader</span><span class="op" id="5356409">(</span><span class="ident" id="5356410">r</span><span class="op" id="5356411">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356417">_</span><span class="op" id="5356418">,</span>&nbsp;<span class="ident" id="5356420">err</span>&nbsp;<span class="op" id="5356424">:=</span>&nbsp;<span class="ident" id="5356427">io</span><span class="op" id="5356429">.</span><span class="ident" id="5356430">ReadFull</span><span class="op" id="5356438">(</span><span class="ident" id="5356439">z</span><span class="op" id="5356440">.</span><span class="ident" id="5356441">r</span><span class="op" id="5356442">,</span>&nbsp;<span class="ident" id="5356444">z</span><span class="op" id="5356445">.</span><span class="ident" id="5356446">scratch</span><span class="op" id="5356453">[</span><span class="num" id="5356454">0</span><span class="op" id="5356455">:</span><span class="num" id="5356456">2</span><span class="op" id="5356457">]</span><span class="op" id="5356458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356461">if</span>&nbsp;<span class="ident" id="5356464">err</span>&nbsp;<span class="op" id="5356468">!=</span>&nbsp;<span class="ident" id="5356471">nil</span>&nbsp;<span class="op" id="5356475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356479">return</span>&nbsp;<span class="ident" id="5356486">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356491">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356494">h</span>&nbsp;<span class="op" id="5356496">:=</span>&nbsp;<span class="builtintype" id="5356499">uint</span><span class="op" id="5356503">(</span><span class="ident" id="5356504">z</span><span class="op" id="5356505">.</span><span class="ident" id="5356506">scratch</span><span class="op" id="5356513">[</span><span class="num" id="5356514">0</span><span class="op" id="5356515">]</span><span class="op" id="5356516">)</span><span class="op" id="5356517">&lt;&lt;</span><span class="num" id="5356519">8</span>&nbsp;<span class="op" id="5356521">|</span>&nbsp;<span class="builtintype" id="5356523">uint</span><span class="op" id="5356527">(</span><span class="ident" id="5356528">z</span><span class="op" id="5356529">.</span><span class="ident" id="5356530">scratch</span><span class="op" id="5356537">[</span><span class="num" id="5356538">1</span><span class="op" id="5356539">]</span><span class="op" id="5356540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356543">if</span>&nbsp;<span class="op" id="5356546">(</span><span class="ident" id="5356547">z</span><span class="op" id="5356548">.</span><span class="ident" id="5356549">scratch</span><span class="op" id="5356556">[</span><span class="num" id="5356557">0</span><span class="op" id="5356558">]</span><span class="op" id="5356559">&amp;</span><span class="num" id="5356560">0x0f</span>&nbsp;<span class="op" id="5356565">!=</span>&nbsp;<span class="ident" id="5356568">zlibDeflate</span><span class="op" id="5356579">)</span>&nbsp;<span class="op" id="5356581">||</span>&nbsp;<span class="op" id="5356584">(</span><span class="ident" id="5356585">h</span><span class="op" id="5356586">%</span><span class="num" id="5356587">31</span>&nbsp;<span class="op" id="5356590">!=</span>&nbsp;<span class="num" id="5356593">0</span><span class="op" id="5356594">)</span>&nbsp;<span class="op" id="5356596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356600">return</span>&nbsp;<span class="ident" id="5356607">ErrHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356621">haveDict</span>&nbsp;<span class="op" id="5356630">:=</span>&nbsp;<span class="ident" id="5356633">z</span><span class="op" id="5356634">.</span><span class="ident" id="5356635">scratch</span><span class="op" id="5356642">[</span><span class="num" id="5356643">1</span><span class="op" id="5356644">]</span><span class="op" id="5356645">&amp;</span><span class="num" id="5356646">0x20</span>&nbsp;<span class="op" id="5356651">!=</span>&nbsp;<span class="num" id="5356654">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356657">if</span>&nbsp;<span class="ident" id="5356660">haveDict</span>&nbsp;<span class="op" id="5356669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356673">_</span><span class="op" id="5356674">,</span>&nbsp;<span class="ident" id="5356676">err</span>&nbsp;<span class="op" id="5356680">=</span>&nbsp;<span class="ident" id="5356682">io</span><span class="op" id="5356684">.</span><span class="ident" id="5356685">ReadFull</span><span class="op" id="5356693">(</span><span class="ident" id="5356694">z</span><span class="op" id="5356695">.</span><span class="ident" id="5356696">r</span><span class="op" id="5356697">,</span>&nbsp;<span class="ident" id="5356699">z</span><span class="op" id="5356700">.</span><span class="ident" id="5356701">scratch</span><span class="op" id="5356708">[</span><span class="num" id="5356709">0</span><span class="op" id="5356710">:</span><span class="num" id="5356711">4</span><span class="op" id="5356712">]</span><span class="op" id="5356713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356717">if</span>&nbsp;<span class="ident" id="5356720">err</span>&nbsp;<span class="op" id="5356724">!=</span>&nbsp;<span class="ident" id="5356727">nil</span>&nbsp;<span class="op" id="5356731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356736">return</span>&nbsp;<span class="ident" id="5356743">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356749">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356753">checksum</span>&nbsp;<span class="op" id="5356762">:=</span>&nbsp;<span class="builtintype" id="5356765">uint32</span><span class="op" id="5356771">(</span><span class="ident" id="5356772">z</span><span class="op" id="5356773">.</span><span class="ident" id="5356774">scratch</span><span class="op" id="5356781">[</span><span class="num" id="5356782">0</span><span class="op" id="5356783">]</span><span class="op" id="5356784">)</span><span class="op" id="5356785">&lt;&lt;</span><span class="num" id="5356787">24</span>&nbsp;<span class="op" id="5356790">|</span>&nbsp;<span class="builtintype" id="5356792">uint32</span><span class="op" id="5356798">(</span><span class="ident" id="5356799">z</span><span class="op" id="5356800">.</span><span class="ident" id="5356801">scratch</span><span class="op" id="5356808">[</span><span class="num" id="5356809">1</span><span class="op" id="5356810">]</span><span class="op" id="5356811">)</span><span class="op" id="5356812">&lt;&lt;</span><span class="num" id="5356814">16</span>&nbsp;<span class="op" id="5356817">|</span>&nbsp;<span class="builtintype" id="5356819">uint32</span><span class="op" id="5356825">(</span><span class="ident" id="5356826">z</span><span class="op" id="5356827">.</span><span class="ident" id="5356828">scratch</span><span class="op" id="5356835">[</span><span class="num" id="5356836">2</span><span class="op" id="5356837">]</span><span class="op" id="5356838">)</span><span class="op" id="5356839">&lt;&lt;</span><span class="num" id="5356841">8</span>&nbsp;<span class="op" id="5356843">|</span>&nbsp;<span class="builtintype" id="5356845">uint32</span><span class="op" id="5356851">(</span><span class="ident" id="5356852">z</span><span class="op" id="5356853">.</span><span class="ident" id="5356854">scratch</span><span class="op" id="5356861">[</span><span class="num" id="5356862">3</span><span class="op" id="5356863">]</span><span class="op" id="5356864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356868">if</span>&nbsp;<span class="ident" id="5356871">checksum</span>&nbsp;<span class="op" id="5356880">!=</span>&nbsp;<span class="ident" id="5356883">adler32</span><span class="op" id="5356890">.</span><span class="ident" id="5356891">Checksum</span><span class="op" id="5356899">(</span><span class="ident" id="5356900">dict</span><span class="op" id="5356904">)</span>&nbsp;<span class="op" id="5356906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356911">return</span>&nbsp;<span class="ident" id="5356918">ErrDictionary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5356937">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356940">if</span>&nbsp;<span class="ident" id="5356943">z</span><span class="op" id="5356944">.</span><span class="ident" id="5356945">decompressor</span>&nbsp;<span class="op" id="5356958">==</span>&nbsp;<span class="ident" id="5356961">nil</span>&nbsp;<span class="op" id="5356965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356969">if</span>&nbsp;<span class="ident" id="5356972">haveDict</span>&nbsp;<span class="op" id="5356981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5356986">z</span><span class="op" id="5356987">.</span><span class="ident" id="5356988">decompressor</span>&nbsp;<span class="op" id="5357001">=</span>&nbsp;<span class="ident" id="5357003">flate</span><span class="op" id="5357008">.</span><span class="ident" id="5357009">NewReaderDict</span><span class="op" id="5357022">(</span><span class="ident" id="5357023">z</span><span class="op" id="5357024">.</span><span class="ident" id="5357025">r</span><span class="op" id="5357026">,</span>&nbsp;<span class="ident" id="5357028">dict</span><span class="op" id="5357032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357036">}</span>&nbsp;<span class="keyword" id="5357038">else</span>&nbsp;<span class="op" id="5357043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357048">z</span><span class="op" id="5357049">.</span><span class="ident" id="5357050">decompressor</span>&nbsp;<span class="op" id="5357063">=</span>&nbsp;<span class="ident" id="5357065">flate</span><span class="op" id="5357070">.</span><span class="ident" id="5357071">NewReader</span><span class="op" id="5357080">(</span><span class="ident" id="5357081">z</span><span class="op" id="5357082">.</span><span class="ident" id="5357083">r</span><span class="op" id="5357084">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357091">}</span>&nbsp;<span class="keyword" id="5357093">else</span>&nbsp;<span class="op" id="5357098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357102">z</span><span class="op" id="5357103">.</span><span class="ident" id="5357104">decompressor</span><span class="op" id="5357116">.</span><span class="op" id="5357117">(</span><span class="ident" id="5357118">flate</span><span class="op" id="5357123">.</span><span class="ident" id="5357124">Resetter</span><span class="op" id="5357132">)</span><span class="op" id="5357133">.</span><span class="ident" id="5357134">Reset</span><span class="op" id="5357139">(</span><span class="ident" id="5357140">z</span><span class="op" id="5357141">.</span><span class="ident" id="5357142">r</span><span class="op" id="5357143">,</span>&nbsp;<span class="ident" id="5357145">dict</span><span class="op" id="5357149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5357152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5357155">z</span><span class="op" id="5357156">.</span><span class="ident" id="5357157">digest</span>&nbsp;<span class="op" id="5357164">=</span>&nbsp;<span class="ident" id="5357166">adler32</span><span class="op" id="5357173">.</span><span class="ident" id="5357174">New</span><span class="op" id="5357177">(</span><span class="op" id="5357178">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5357181">return</span>&nbsp;<span class="ident" id="5357188">nil</span><br>
<span class="lineno"></span><span class="op" id="5357192">}</span>
</div>
</body>
</html>
