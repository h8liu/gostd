<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5622489">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5622544">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5622598">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5622649">package</span>&nbsp;<span class="ident" id="5622657">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5622662">import</span>&nbsp;<span class="op" id="5622669">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622672">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622681">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622690">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622702">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622709">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622715">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622726">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5622737">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5622747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5622750">const</span>&nbsp;<span class="op" id="5622756">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5622759">//&nbsp;A&nbsp;generic&nbsp;XML&nbsp;header&nbsp;suitable&nbsp;for&nbsp;use&nbsp;with&nbsp;the&nbsp;output&nbsp;of&nbsp;Marshal.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5622829">//&nbsp;This&nbsp;is&nbsp;not&nbsp;automatically&nbsp;added&nbsp;to&nbsp;any&nbsp;output&nbsp;of&nbsp;this&nbsp;package,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5622896">//&nbsp;it&nbsp;is&nbsp;provided&nbsp;as&nbsp;a&nbsp;convenience.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5622933">Header</span>&nbsp;<span class="op" id="5622940">=</span>&nbsp;<span class="string" id="5622942">`&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;UTF-8&#34;?&gt;`</span>&nbsp;<span class="op" id="5622983">+</span>&nbsp;<span class="string" id="5622985">&#34;\n&#34;</span><br>
<span class="lineno"></span><span class="op" id="5622990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5622993">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5623035">//</span><br>
<span class="lineno"></span><span class="comment" id="5623038">//&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;array&nbsp;or&nbsp;slice&nbsp;by&nbsp;marshalling&nbsp;each&nbsp;of&nbsp;the&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="5623112">//&nbsp;Marshal&nbsp;handles&nbsp;a&nbsp;pointer&nbsp;by&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;points&nbsp;at&nbsp;or,&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5623190">//&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;by&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;interface&nbsp;value&nbsp;by</span><br>
<span class="lineno">30</span><span class="comment" id="5623268">//&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;contains&nbsp;or,&nbsp;if&nbsp;the&nbsp;interface&nbsp;value&nbsp;is&nbsp;nil,&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5623343">//&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;all&nbsp;other&nbsp;data&nbsp;by&nbsp;writing&nbsp;one&nbsp;or&nbsp;more&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="5623422">//&nbsp;elements&nbsp;containing&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="5623455">//</span><br>
<span class="lineno"></span><span class="comment" id="5623458">//&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;XML&nbsp;elements&nbsp;is&nbsp;taken&nbsp;from,&nbsp;in&nbsp;order&nbsp;of&nbsp;preference:</span><br>
<span class="lineno">35</span><span class="comment" id="5623530">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;on&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;if&nbsp;the&nbsp;data&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5623593">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;of&nbsp;type&nbsp;xml.Name</span><br>
<span class="lineno"></span><span class="comment" id="5623650">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="5623711">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="5623773">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;marshalled&nbsp;type</span><br>
<span class="lineno">40</span><span class="comment" id="5623814">//</span><br>
<span class="lineno"></span><span class="comment" id="5623817">//&nbsp;The&nbsp;XML&nbsp;element&nbsp;for&nbsp;a&nbsp;struct&nbsp;contains&nbsp;marshalled&nbsp;elements&nbsp;for&nbsp;each&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5623894">//&nbsp;exported&nbsp;fields&nbsp;of&nbsp;the&nbsp;struct,&nbsp;with&nbsp;these&nbsp;exceptions:</span><br>
<span class="lineno"></span><span class="comment" id="5623951">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;described&nbsp;above,&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="5624008">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">45</span><span class="comment" id="5624050">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;name,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5624114">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5624158">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5624222">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5624262">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,chardata&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;character&nbsp;data,</span><br>
<span class="lineno">50</span><span class="comment" id="5624330">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;as&nbsp;an&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5624362">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,innerxml&#34;&nbsp;is&nbsp;written&nbsp;verbatim,&nbsp;not&nbsp;subject</span><br>
<span class="lineno"></span><span class="comment" id="5624433">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.</span><br>
<span class="lineno"></span><span class="comment" id="5624478">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,comment&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;an&nbsp;XML&nbsp;comment,&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5624549">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.&nbsp;It&nbsp;must&nbsp;not&nbsp;contain</span><br>
<span class="lineno">55</span><span class="comment" id="5624622">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;&#34;--&#34;&nbsp;string&nbsp;within&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5624658">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;a&nbsp;tag&nbsp;including&nbsp;the&nbsp;&#34;omitempty&#34;&nbsp;option&nbsp;is&nbsp;omitted</span><br>
<span class="lineno"></span><span class="comment" id="5624730">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;the&nbsp;field&nbsp;value&nbsp;is&nbsp;empty.&nbsp;The&nbsp;empty&nbsp;values&nbsp;are&nbsp;false,&nbsp;0,&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5624803">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil&nbsp;pointer&nbsp;or&nbsp;interface&nbsp;value,&nbsp;and&nbsp;any&nbsp;array,&nbsp;slice,&nbsp;map,&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="5624874">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;of&nbsp;length&nbsp;zero.</span><br>
<span class="lineno">60</span><span class="comment" id="5624906">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;an&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5624976">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="5625022">//</span><br>
<span class="lineno"></span><span class="comment" id="5625025">//&nbsp;If&nbsp;a&nbsp;field&nbsp;uses&nbsp;a&nbsp;tag&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;then&nbsp;the&nbsp;element&nbsp;c&nbsp;will&nbsp;be&nbsp;nested&nbsp;inside</span><br>
<span class="lineno"></span><span class="comment" id="5625100">//&nbsp;parent&nbsp;elements&nbsp;a&nbsp;and&nbsp;b.&nbsp;&nbsp;Fields&nbsp;that&nbsp;appear&nbsp;next&nbsp;to&nbsp;each&nbsp;other&nbsp;that&nbsp;name</span><br>
<span class="lineno">65</span><span class="comment" id="5625177">//&nbsp;the&nbsp;same&nbsp;parent&nbsp;will&nbsp;be&nbsp;enclosed&nbsp;in&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="5625233">//</span><br>
<span class="lineno"></span><span class="comment" id="5625236">//&nbsp;See&nbsp;MarshalIndent&nbsp;for&nbsp;an&nbsp;example.</span><br>
<span class="lineno"></span><span class="comment" id="5625273">//</span><br>
<span class="lineno"></span><span class="comment" id="5625276">//&nbsp;Marshal&nbsp;will&nbsp;return&nbsp;an&nbsp;error&nbsp;if&nbsp;asked&nbsp;to&nbsp;marshal&nbsp;a&nbsp;channel,&nbsp;function,&nbsp;or&nbsp;map.</span><br>
<span class="lineno">70</span><span class="keyword" id="5625357">func</span>&nbsp;<span class="ident" id="5625362">Marshal</span><span class="op" id="5625369">(</span><span class="ident" id="5625370">v</span>&nbsp;<span class="keyword" id="5625372">interface</span><span class="op" id="5625381">{</span><span class="op" id="5625382">}</span><span class="op" id="5625383">)</span>&nbsp;<span class="op" id="5625385">(</span><span class="op" id="5625386">[</span><span class="op" id="5625387">]</span><span class="builtintype" id="5625388">byte</span><span class="op" id="5625392">,</span>&nbsp;<span class="builtintype" id="5625394">error</span><span class="op" id="5625399">)</span>&nbsp;<span class="op" id="5625401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5625404">var</span>&nbsp;<span class="ident" id="5625408">b</span>&nbsp;<span class="ident" id="5625410"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5625415">.</span><span class="ident" id="5625416">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5625424">if</span>&nbsp;<span class="ident" id="5625427">err</span>&nbsp;<span class="op" id="5625431">:=</span>&nbsp;<span class="ident" id="5625434"><a href="/encoding/xml/marshal.go.html#5627594">NewEncoder</a></span><span class="op" id="5625444">(</span><span class="op" id="5625445">&amp;</span><span class="ident" id="5625446"><a href="/encoding/xml/marshal.go.html#5625408">b</a></span><span class="op" id="5625447">)</span><span class="op" id="5625448">.</span><span class="ident" id="5625449">Encode</span><span class="op" id="5625455">(</span><span class="ident" id="5625456"><a href="/encoding/xml/marshal.go.html#5625370">v</a></span><span class="op" id="5625457">)</span><span class="op" id="5625458">;</span>&nbsp;<span class="ident" id="5625460"><a href="/encoding/xml/marshal.go.html#5625427">err</a></span>&nbsp;<span class="op" id="5625464">!=</span>&nbsp;<span class="ident" id="5625467">nil</span>&nbsp;<span class="op" id="5625471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5625475">return</span>&nbsp;<span class="ident" id="5625482">nil</span><span class="op" id="5625485">,</span>&nbsp;<span class="ident" id="5625487"><a href="/encoding/xml/marshal.go.html#5625427">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5625492">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5625495">return</span>&nbsp;<span class="ident" id="5625502"><a href="/encoding/xml/marshal.go.html#5625408">b</a></span><span class="op" id="5625503">.</span><span class="ident" id="5625504">Bytes</span><span class="op" id="5625509">(</span><span class="op" id="5625510">)</span><span class="op" id="5625511">,</span>&nbsp;<span class="ident" id="5625513">nil</span><br>
<span class="lineno"></span><span class="op" id="5625517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625520">//&nbsp;Marshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="5625590">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno">80</span><span class="comment" id="5625629">//</span><br>
<span class="lineno"></span><span class="comment" id="5625632">//&nbsp;MarshalXML&nbsp;encodes&nbsp;the&nbsp;receiver&nbsp;as&nbsp;zero&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="5625697">//&nbsp;By&nbsp;convention,&nbsp;arrays&nbsp;or&nbsp;slices&nbsp;are&nbsp;typically&nbsp;encoded&nbsp;as&nbsp;a&nbsp;sequence</span><br>
<span class="lineno"></span><span class="comment" id="5625768">//&nbsp;of&nbsp;elements,&nbsp;one&nbsp;per&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="5625799">//&nbsp;Using&nbsp;start&nbsp;as&nbsp;the&nbsp;element&nbsp;tag&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno">85</span><span class="comment" id="5625863">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;XML&nbsp;elements&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="5625929">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5625946">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;construct&nbsp;a&nbsp;separate</span><br>
<span class="lineno"></span><span class="comment" id="5626011">//&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;desired&nbsp;XML&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="5626076">//&nbsp;to&nbsp;encode&nbsp;it&nbsp;using&nbsp;e.EncodeElement.</span><br>
<span class="lineno">90</span><span class="comment" id="5626115">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;e.EncodeToken</span><br>
<span class="lineno"></span><span class="comment" id="5626184">//&nbsp;to&nbsp;generate&nbsp;the&nbsp;XML&nbsp;output&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="5626235">//&nbsp;The&nbsp;sequence&nbsp;of&nbsp;encoded&nbsp;tokens&nbsp;must&nbsp;make&nbsp;up&nbsp;zero&nbsp;or&nbsp;more&nbsp;valid</span><br>
<span class="lineno"></span><span class="comment" id="5626301">//&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="5626318">type</span>&nbsp;<span class="ident" id="5626323">Marshaler</span>&nbsp;<span class="keyword" id="5626333">interface</span>&nbsp;<span class="op" id="5626343">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626346">MarshalXML</span><span class="op" id="5626356">(</span><span class="ident" id="5626357">e</span>&nbsp;<span class="op" id="5626359">*</span><span class="ident" id="5626360"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5626367">,</span>&nbsp;<span class="ident" id="5626369">start</span>&nbsp;<span class="ident" id="5626375"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5626387">)</span>&nbsp;<span class="builtintype" id="5626389">error</span><br>
<span class="lineno"></span><span class="op" id="5626395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5626398">//&nbsp;MarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="5626472">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;attributes.</span><br>
<span class="lineno">100</span><span class="comment" id="5626513">//</span><br>
<span class="lineno"></span><span class="comment" id="5626516">//&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;with&nbsp;the&nbsp;encoded&nbsp;value&nbsp;of&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="5626599">//&nbsp;Using&nbsp;name&nbsp;as&nbsp;the&nbsp;attribute&nbsp;name&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="5626665">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;attribute&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="5626728">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">105</span><span class="comment" id="5626745">//&nbsp;If&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;the&nbsp;zero&nbsp;attribute&nbsp;Attr{},&nbsp;no&nbsp;attribute</span><br>
<span class="lineno"></span><span class="comment" id="5626814">//&nbsp;will&nbsp;be&nbsp;generated&nbsp;in&nbsp;the&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="5626850">//&nbsp;MarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5626908">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="5626943">type</span>&nbsp;<span class="ident" id="5626948">MarshalerAttr</span>&nbsp;<span class="keyword" id="5626962">interface</span>&nbsp;<span class="op" id="5626972">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5626975">MarshalXMLAttr</span><span class="op" id="5626989">(</span><span class="ident" id="5626990">name</span>&nbsp;<span class="ident" id="5626995"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5626999">)</span>&nbsp;<span class="op" id="5627001">(</span><span class="ident" id="5627002"><a href="/encoding/xml/xml.go.html#5680102">Attr</a></span><span class="op" id="5627006">,</span>&nbsp;<span class="builtintype" id="5627008">error</span><span class="op" id="5627013">)</span><br>
<span class="lineno"></span><span class="op" id="5627015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627018">//&nbsp;MarshalIndent&nbsp;works&nbsp;like&nbsp;Marshal,&nbsp;but&nbsp;each&nbsp;XML&nbsp;element&nbsp;begins&nbsp;on&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="5627092">//&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno">115</span><span class="comment" id="5627164">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="5627216">func</span>&nbsp;<span class="ident" id="5627221">MarshalIndent</span><span class="op" id="5627234">(</span><span class="ident" id="5627235">v</span>&nbsp;<span class="keyword" id="5627237">interface</span><span class="op" id="5627246">{</span><span class="op" id="5627247">}</span><span class="op" id="5627248">,</span>&nbsp;<span class="ident" id="5627250">prefix</span><span class="op" id="5627256">,</span>&nbsp;<span class="ident" id="5627258">indent</span>&nbsp;<span class="builtintype" id="5627265">string</span><span class="op" id="5627271">)</span>&nbsp;<span class="op" id="5627273">(</span><span class="op" id="5627274">[</span><span class="op" id="5627275">]</span><span class="builtintype" id="5627276">byte</span><span class="op" id="5627280">,</span>&nbsp;<span class="builtintype" id="5627282">error</span><span class="op" id="5627287">)</span>&nbsp;<span class="op" id="5627289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627292">var</span>&nbsp;<span class="ident" id="5627296">b</span>&nbsp;<span class="ident" id="5627298"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5627303">.</span><span class="ident" id="5627304">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627312">enc</span>&nbsp;<span class="op" id="5627316">:=</span>&nbsp;<span class="ident" id="5627319"><a href="/encoding/xml/marshal.go.html#5627594">NewEncoder</a></span><span class="op" id="5627329">(</span><span class="op" id="5627330">&amp;</span><span class="ident" id="5627331"><a href="/encoding/xml/marshal.go.html#5627296">b</a></span><span class="op" id="5627332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627335"><a href="/encoding/xml/marshal.go.html#5627312">enc</a></span><span class="op" id="5627338">.</span><span class="ident" id="5627339">Indent</span><span class="op" id="5627345">(</span><span class="ident" id="5627346"><a href="/encoding/xml/marshal.go.html#5627250">prefix</a></span><span class="op" id="5627352">,</span>&nbsp;<span class="ident" id="5627354"><a href="/encoding/xml/marshal.go.html#5627258">indent</a></span><span class="op" id="5627360">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627363">if</span>&nbsp;<span class="ident" id="5627366">err</span>&nbsp;<span class="op" id="5627370">:=</span>&nbsp;<span class="ident" id="5627373"><a href="/encoding/xml/marshal.go.html#5627312">enc</a></span><span class="op" id="5627376">.</span><span class="ident" id="5627377">Encode</span><span class="op" id="5627383">(</span><span class="ident" id="5627384"><a href="/encoding/xml/marshal.go.html#5627235">v</a></span><span class="op" id="5627385">)</span><span class="op" id="5627386">;</span>&nbsp;<span class="ident" id="5627388"><a href="/encoding/xml/marshal.go.html#5627366">err</a></span>&nbsp;<span class="op" id="5627392">!=</span>&nbsp;<span class="ident" id="5627395">nil</span>&nbsp;<span class="op" id="5627399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627403">return</span>&nbsp;<span class="ident" id="5627410">nil</span><span class="op" id="5627413">,</span>&nbsp;<span class="ident" id="5627415"><a href="/encoding/xml/marshal.go.html#5627366">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5627420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627423">return</span>&nbsp;<span class="ident" id="5627430"><a href="/encoding/xml/marshal.go.html#5627296">b</a></span><span class="op" id="5627431">.</span><span class="ident" id="5627432">Bytes</span><span class="op" id="5627437">(</span><span class="op" id="5627438">)</span><span class="op" id="5627439">,</span>&nbsp;<span class="ident" id="5627441">nil</span><br>
<span class="lineno"></span><span class="op" id="5627445">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5627448">//&nbsp;An&nbsp;Encoder&nbsp;writes&nbsp;XML&nbsp;data&nbsp;to&nbsp;an&nbsp;output&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="5627499">type</span>&nbsp;<span class="ident" id="5627504">Encoder</span>&nbsp;<span class="keyword" id="5627512">struct</span>&nbsp;<span class="op" id="5627519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627522">p</span>&nbsp;<span class="ident" id="5627524"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><br>
<span class="lineno"></span><span class="op" id="5627532">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5627535">//&nbsp;NewEncoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;encoder&nbsp;that&nbsp;writes&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="5627589">func</span>&nbsp;<span class="ident" id="5627594">NewEncoder</span><span class="op" id="5627604">(</span><span class="ident" id="5627605">w</span>&nbsp;<span class="ident" id="5627607"><a href="/encoding/xml/marshal.go.html#5622709">io</a></span><span class="op" id="5627609">.</span><span class="ident" id="5627610">Writer</span><span class="op" id="5627616">)</span>&nbsp;<span class="op" id="5627618">*</span><span class="ident" id="5627619"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span>&nbsp;<span class="op" id="5627627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627630">e</span>&nbsp;<span class="op" id="5627632">:=</span>&nbsp;<span class="op" id="5627635">&amp;</span><span class="ident" id="5627636"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5627643">{</span><span class="ident" id="5627644"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5627651">{</span><span class="ident" id="5627652">Writer</span><span class="op" id="5627658">:</span>&nbsp;<span class="ident" id="5627660"><a href="/encoding/xml/marshal.go.html#5622672">bufio</a></span><span class="op" id="5627665">.</span><span class="ident" id="5627666">NewWriter</span><span class="op" id="5627675">(</span><span class="ident" id="5627676"><a href="/encoding/xml/marshal.go.html#5627605">w</a></span><span class="op" id="5627677">)</span><span class="op" id="5627678">}</span><span class="op" id="5627679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627682"><a href="/encoding/xml/marshal.go.html#5627630">e</a></span><span class="op" id="5627683">.</span><span class="ident" id="5627684">p</span><span class="op" id="5627685">.</span><span class="ident" id="5627686">encoder</span>&nbsp;<span class="op" id="5627694">=</span>&nbsp;<span class="ident" id="5627696"><a href="/encoding/xml/marshal.go.html#5627630">e</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5627699">return</span>&nbsp;<span class="ident" id="5627706"><a href="/encoding/xml/marshal.go.html#5627630">e</a></span><br>
<span class="lineno"></span><span class="op" id="5627708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627711">//&nbsp;Indent&nbsp;sets&nbsp;the&nbsp;encoder&nbsp;to&nbsp;generate&nbsp;XML&nbsp;in&nbsp;which&nbsp;each&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="5627776">//&nbsp;begins&nbsp;on&nbsp;a&nbsp;new&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by</span><br>
<span class="lineno">140</span><span class="comment" id="5627852">//&nbsp;one&nbsp;or&nbsp;more&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="5627916">func</span>&nbsp;<span class="op" id="5627921">(</span><span class="ident" id="5627922">enc</span>&nbsp;<span class="op" id="5627926">*</span><span class="ident" id="5627927"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5627934">)</span>&nbsp;<span class="ident" id="5627936">Indent</span><span class="op" id="5627942">(</span><span class="ident" id="5627943">prefix</span><span class="op" id="5627949">,</span>&nbsp;<span class="ident" id="5627951">indent</span>&nbsp;<span class="builtintype" id="5627958">string</span><span class="op" id="5627964">)</span>&nbsp;<span class="op" id="5627966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627969"><a href="/encoding/xml/marshal.go.html#5627922">enc</a></span><span class="op" id="5627972">.</span><span class="ident" id="5627973">p</span><span class="op" id="5627974">.</span><span class="ident" id="5627975">prefix</span>&nbsp;<span class="op" id="5627982">=</span>&nbsp;<span class="ident" id="5627984"><a href="/encoding/xml/marshal.go.html#5627943">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5627992"><a href="/encoding/xml/marshal.go.html#5627922">enc</a></span><span class="op" id="5627995">.</span><span class="ident" id="5627996">p</span><span class="op" id="5627997">.</span><span class="ident" id="5627998">indent</span>&nbsp;<span class="op" id="5628005">=</span>&nbsp;<span class="ident" id="5628007"><a href="/encoding/xml/marshal.go.html#5627951">indent</a></span><br>
<span class="lineno"></span><span class="op" id="5628014">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="5628017">//&nbsp;Encode&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5628071">//</span><br>
<span class="lineno"></span><span class="comment" id="5628074">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5628144">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">150</span><span class="comment" id="5628168">//</span><br>
<span class="lineno"></span><span class="comment" id="5628171">//&nbsp;Encode&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="5628211">func</span>&nbsp;<span class="op" id="5628216">(</span><span class="ident" id="5628217">enc</span>&nbsp;<span class="op" id="5628221">*</span><span class="ident" id="5628222"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5628229">)</span>&nbsp;<span class="ident" id="5628231">Encode</span><span class="op" id="5628237">(</span><span class="ident" id="5628238">v</span>&nbsp;<span class="keyword" id="5628240">interface</span><span class="op" id="5628249">{</span><span class="op" id="5628250">}</span><span class="op" id="5628251">)</span>&nbsp;<span class="builtintype" id="5628253">error</span>&nbsp;<span class="op" id="5628259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628262">err</span>&nbsp;<span class="op" id="5628266">:=</span>&nbsp;<span class="ident" id="5628269"><a href="/encoding/xml/marshal.go.html#5628217">enc</a></span><span class="op" id="5628272">.</span><span class="ident" id="5628273">p</span><span class="op" id="5628274">.</span><span class="ident" id="5628275">marshalValue</span><span class="op" id="5628287">(</span><span class="ident" id="5628288"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5628295">.</span><span class="ident" id="5628296">ValueOf</span><span class="op" id="5628303">(</span><span class="ident" id="5628304"><a href="/encoding/xml/marshal.go.html#5628238">v</a></span><span class="op" id="5628305">)</span><span class="op" id="5628306">,</span>&nbsp;<span class="ident" id="5628308">nil</span><span class="op" id="5628311">,</span>&nbsp;<span class="ident" id="5628313">nil</span><span class="op" id="5628316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628319">if</span>&nbsp;<span class="ident" id="5628322"><a href="/encoding/xml/marshal.go.html#5628262">err</a></span>&nbsp;<span class="op" id="5628326">!=</span>&nbsp;<span class="ident" id="5628329">nil</span>&nbsp;<span class="op" id="5628333">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628337">return</span>&nbsp;<span class="ident" id="5628344"><a href="/encoding/xml/marshal.go.html#5628262">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5628349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628352">return</span>&nbsp;<span class="ident" id="5628359"><a href="/encoding/xml/marshal.go.html#5628217">enc</a></span><span class="op" id="5628362">.</span><span class="ident" id="5628363">p</span><span class="op" id="5628364">.</span><span class="ident" id="5628365">Flush</span><span class="op" id="5628370">(</span><span class="op" id="5628371">)</span><br>
<span class="lineno"></span><span class="op" id="5628373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5628376">//&nbsp;EncodeElement&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="5628437">//&nbsp;using&nbsp;start&nbsp;as&nbsp;the&nbsp;outermost&nbsp;tag&nbsp;in&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="5628490">//</span><br>
<span class="lineno"></span><span class="comment" id="5628493">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="5628563">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">165</span><span class="comment" id="5628587">//</span><br>
<span class="lineno"></span><span class="comment" id="5628590">//&nbsp;EncodeElement&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="5628637">func</span>&nbsp;<span class="op" id="5628642">(</span><span class="ident" id="5628643">enc</span>&nbsp;<span class="op" id="5628647">*</span><span class="ident" id="5628648"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5628655">)</span>&nbsp;<span class="ident" id="5628657">EncodeElement</span><span class="op" id="5628670">(</span><span class="ident" id="5628671">v</span>&nbsp;<span class="keyword" id="5628673">interface</span><span class="op" id="5628682">{</span><span class="op" id="5628683">}</span><span class="op" id="5628684">,</span>&nbsp;<span class="ident" id="5628686">start</span>&nbsp;<span class="ident" id="5628692"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5628704">)</span>&nbsp;<span class="builtintype" id="5628706">error</span>&nbsp;<span class="op" id="5628712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628715">err</span>&nbsp;<span class="op" id="5628719">:=</span>&nbsp;<span class="ident" id="5628722"><a href="/encoding/xml/marshal.go.html#5628643">enc</a></span><span class="op" id="5628725">.</span><span class="ident" id="5628726">p</span><span class="op" id="5628727">.</span><span class="ident" id="5628728">marshalValue</span><span class="op" id="5628740">(</span><span class="ident" id="5628741"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5628748">.</span><span class="ident" id="5628749">ValueOf</span><span class="op" id="5628756">(</span><span class="ident" id="5628757"><a href="/encoding/xml/marshal.go.html#5628671">v</a></span><span class="op" id="5628758">)</span><span class="op" id="5628759">,</span>&nbsp;<span class="ident" id="5628761">nil</span><span class="op" id="5628764">,</span>&nbsp;<span class="op" id="5628766">&amp;</span><span class="ident" id="5628767"><a href="/encoding/xml/marshal.go.html#5628686">start</a></span><span class="op" id="5628772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628775">if</span>&nbsp;<span class="ident" id="5628778"><a href="/encoding/xml/marshal.go.html#5628715">err</a></span>&nbsp;<span class="op" id="5628782">!=</span>&nbsp;<span class="ident" id="5628785">nil</span>&nbsp;<span class="op" id="5628789">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628793">return</span>&nbsp;<span class="ident" id="5628800"><a href="/encoding/xml/marshal.go.html#5628715">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5628805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5628808">return</span>&nbsp;<span class="ident" id="5628815"><a href="/encoding/xml/marshal.go.html#5628643">enc</a></span><span class="op" id="5628818">.</span><span class="ident" id="5628819">p</span><span class="op" id="5628820">.</span><span class="ident" id="5628821">Flush</span><span class="op" id="5628826">(</span><span class="op" id="5628827">)</span><br>
<span class="lineno"></span><span class="op" id="5628829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="5628832">var</span>&nbsp;<span class="op" id="5628836">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628839">endComment</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5628852">=</span>&nbsp;<span class="op" id="5628854">[</span><span class="op" id="5628855">]</span><span class="builtintype" id="5628856">byte</span><span class="op" id="5628860">(</span><span class="string" id="5628861">&#34;--&gt;&#34;</span><span class="op" id="5628866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628869">endProcInst</span>&nbsp;&nbsp;<span class="op" id="5628882">=</span>&nbsp;<span class="op" id="5628884">[</span><span class="op" id="5628885">]</span><span class="builtintype" id="5628886">byte</span><span class="op" id="5628890">(</span><span class="string" id="5628891">&#34;?&gt;&#34;</span><span class="op" id="5628895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5628898">endDirective</span>&nbsp;<span class="op" id="5628911">=</span>&nbsp;<span class="op" id="5628913">[</span><span class="op" id="5628914">]</span><span class="builtintype" id="5628915">byte</span><span class="op" id="5628919">(</span><span class="string" id="5628920">&#34;&gt;&#34;</span><span class="op" id="5628923">)</span><br>
<span class="lineno"></span><span class="op" id="5628925">)</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="5628928">//&nbsp;EncodeToken&nbsp;writes&nbsp;the&nbsp;given&nbsp;XML&nbsp;token&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="5628985">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;StartElement&nbsp;and&nbsp;EndElement&nbsp;tokens&nbsp;are&nbsp;not&nbsp;properly&nbsp;matched.</span><br>
<span class="lineno"></span><span class="comment" id="5629072">//</span><br>
<span class="lineno"></span><span class="comment" id="5629075">//&nbsp;EncodeToken&nbsp;does&nbsp;not&nbsp;call&nbsp;Flush,&nbsp;because&nbsp;usually&nbsp;it&nbsp;is&nbsp;part&nbsp;of&nbsp;a&nbsp;larger&nbsp;operation</span><br>
<span class="lineno">185</span><span class="comment" id="5629160">//&nbsp;such&nbsp;as&nbsp;Encode&nbsp;or&nbsp;EncodeElement&nbsp;(or&nbsp;a&nbsp;custom&nbsp;Marshaler&#39;s&nbsp;MarshalXML&nbsp;invoked</span><br>
<span class="lineno"></span><span class="comment" id="5629239">//&nbsp;during&nbsp;those),&nbsp;and&nbsp;those&nbsp;will&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished.</span><br>
<span class="lineno"></span><span class="comment" id="5629298">//&nbsp;Callers&nbsp;that&nbsp;create&nbsp;an&nbsp;Encoder&nbsp;and&nbsp;then&nbsp;invoke&nbsp;EncodeToken&nbsp;directly,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="5629378">//&nbsp;using&nbsp;Encode&nbsp;or&nbsp;EncodeElement,&nbsp;need&nbsp;to&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished&nbsp;to&nbsp;ensure</span><br>
<span class="lineno"></span><span class="comment" id="5629455">//&nbsp;that&nbsp;the&nbsp;XML&nbsp;is&nbsp;written&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">190</span><span class="comment" id="5629508">//</span><br>
<span class="lineno"></span><span class="comment" id="5629511">//&nbsp;EncodeToken&nbsp;allows&nbsp;writing&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;Target&nbsp;set&nbsp;to&nbsp;&#34;xml&#34;&nbsp;only&nbsp;as&nbsp;the&nbsp;first&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="5629601">//&nbsp;in&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="5629619">func</span>&nbsp;<span class="op" id="5629624">(</span><span class="ident" id="5629625">enc</span>&nbsp;<span class="op" id="5629629">*</span><span class="ident" id="5629630"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5629637">)</span>&nbsp;<span class="ident" id="5629639">EncodeToken</span><span class="op" id="5629650">(</span><span class="ident" id="5629651">t</span>&nbsp;<span class="ident" id="5629653"><a href="/encoding/xml/xml.go.html#5680281">Token</a></span><span class="op" id="5629658">)</span>&nbsp;<span class="builtintype" id="5629660">error</span>&nbsp;<span class="op" id="5629666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629669">p</span>&nbsp;<span class="op" id="5629671">:=</span>&nbsp;<span class="op" id="5629674">&amp;</span><span class="ident" id="5629675"><a href="/encoding/xml/marshal.go.html#5629625">enc</a></span><span class="op" id="5629678">.</span><span class="ident" id="5629679">p</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629682">switch</span>&nbsp;<span class="ident" id="5629689">t</span>&nbsp;<span class="op" id="5629691">:=</span>&nbsp;<span class="ident" id="5629694"><a href="/encoding/xml/marshal.go.html#5629651">t</a></span><span class="op" id="5629695">.</span><span class="op" id="5629696">(</span><span class="keyword" id="5629697">type</span><span class="op" id="5629701">)</span>&nbsp;<span class="op" id="5629703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629706">case</span>&nbsp;<span class="ident" id="5629711"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5629723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629727">if</span>&nbsp;<span class="ident" id="5629730">err</span>&nbsp;<span class="op" id="5629734">:=</span>&nbsp;<span class="ident" id="5629737"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5629738">.</span><span class="ident" id="5629739">writeStart</span><span class="op" id="5629749">(</span><span class="op" id="5629750">&amp;</span><span class="ident" id="5629751"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5629752">)</span><span class="op" id="5629753">;</span>&nbsp;<span class="ident" id="5629755"><a href="/encoding/xml/marshal.go.html#5629730">err</a></span>&nbsp;<span class="op" id="5629759">!=</span>&nbsp;<span class="ident" id="5629762">nil</span>&nbsp;<span class="op" id="5629766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629771">return</span>&nbsp;<span class="ident" id="5629778"><a href="/encoding/xml/marshal.go.html#5629730">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629784">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629787">case</span>&nbsp;<span class="ident" id="5629792"><a href="/encoding/xml/xml.go.html#5680709">EndElement</a></span><span class="op" id="5629802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629806">if</span>&nbsp;<span class="ident" id="5629809">err</span>&nbsp;<span class="op" id="5629813">:=</span>&nbsp;<span class="ident" id="5629816"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5629817">.</span><span class="ident" id="5629818">writeEnd</span><span class="op" id="5629826">(</span><span class="ident" id="5629827"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5629828">.</span><span class="ident" id="5629829">Name</span><span class="op" id="5629833">)</span><span class="op" id="5629834">;</span>&nbsp;<span class="ident" id="5629836"><a href="/encoding/xml/marshal.go.html#5629809">err</a></span>&nbsp;<span class="op" id="5629840">!=</span>&nbsp;<span class="ident" id="5629843">nil</span>&nbsp;<span class="op" id="5629847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629852">return</span>&nbsp;<span class="ident" id="5629859"><a href="/encoding/xml/marshal.go.html#5629809">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5629865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629868">case</span>&nbsp;<span class="ident" id="5629873"><a href="/encoding/xml/xml.go.html#5680893">CharData</a></span><span class="op" id="5629881">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5629885"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5629895">(</span><span class="ident" id="5629896"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5629897">,</span>&nbsp;<span class="ident" id="5629899"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5629900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629903">case</span>&nbsp;<span class="ident" id="5629908"><a href="/encoding/xml/xml.go.html#5681200">Comment</a></span><span class="op" id="5629915">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629919">if</span>&nbsp;<span class="ident" id="5629922"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5629927">.</span><span class="ident" id="5629928">Contains</span><span class="op" id="5629936">(</span><span class="ident" id="5629937"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5629938">,</span>&nbsp;<span class="ident" id="5629940"><a href="/encoding/xml/marshal.go.html#5628839">endComment</a></span><span class="op" id="5629950">)</span>&nbsp;<span class="op" id="5629952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5629957">return</span>&nbsp;<span class="ident" id="5629964"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5629967">.</span><span class="ident" id="5629968">Errorf</span><span class="op" id="5629974">(</span><span class="string" id="5629975">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Comment&nbsp;containing&nbsp;--&gt;&nbsp;marker&#34;</span><span class="op" id="5630026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630030">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630034"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630035">.</span><span class="ident" id="5630036">WriteString</span><span class="op" id="5630047">(</span><span class="string" id="5630048">&#34;&lt;!--&#34;</span><span class="op" id="5630054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630058"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630059">.</span><span class="ident" id="5630060">Write</span><span class="op" id="5630065">(</span><span class="ident" id="5630066"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630071"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630072">.</span><span class="ident" id="5630073">WriteString</span><span class="op" id="5630084">(</span><span class="string" id="5630085">&#34;--&gt;&#34;</span><span class="op" id="5630090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630094">return</span>&nbsp;<span class="ident" id="5630101"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630102">.</span><span class="ident" id="5630103">cachedWriteError</span><span class="op" id="5630119">(</span><span class="op" id="5630120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630123">case</span>&nbsp;<span class="ident" id="5630128"><a href="/encoding/xml/xml.go.html#5681369">ProcInst</a></span><span class="op" id="5630136">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5630140">//&nbsp;First&nbsp;token&nbsp;to&nbsp;be&nbsp;encoded&nbsp;which&nbsp;is&nbsp;also&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;target&nbsp;of&nbsp;xml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5630215">//&nbsp;is&nbsp;the&nbsp;xml&nbsp;declaration.&nbsp;&nbsp;The&nbsp;only&nbsp;ProcInst&nbsp;where&nbsp;target&nbsp;of&nbsp;xml&nbsp;is&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630295">if</span>&nbsp;<span class="ident" id="5630298"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630299">.</span><span class="ident" id="5630300">Target</span>&nbsp;<span class="op" id="5630307">==</span>&nbsp;<span class="string" id="5630310">&#34;xml&#34;</span>&nbsp;<span class="op" id="5630316">&amp;&amp;</span>&nbsp;<span class="ident" id="5630319"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630320">.</span><span class="ident" id="5630321">Buffered</span><span class="op" id="5630329">(</span><span class="op" id="5630330">)</span>&nbsp;<span class="op" id="5630332">!=</span>&nbsp;<span class="num" id="5630335">0</span>&nbsp;<span class="op" id="5630337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630342">return</span>&nbsp;<span class="ident" id="5630349"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5630352">.</span><span class="ident" id="5630353">Errorf</span><span class="op" id="5630359">(</span><span class="string" id="5630360">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;xml&nbsp;target&nbsp;only&nbsp;valid&nbsp;for&nbsp;xml&nbsp;declaration,&nbsp;first&nbsp;token&nbsp;encoded&#34;</span><span class="op" id="5630453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630457">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630461">if</span>&nbsp;<span class="op" id="5630464">!</span><span class="ident" id="5630465"><a href="/encoding/xml/xml.go.html#5706363">isNameString</a></span><span class="op" id="5630477">(</span><span class="ident" id="5630478"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630479">.</span><span class="ident" id="5630480">Target</span><span class="op" id="5630486">)</span>&nbsp;<span class="op" id="5630488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630493">return</span>&nbsp;<span class="ident" id="5630500"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5630503">.</span><span class="ident" id="5630504">Errorf</span><span class="op" id="5630510">(</span><span class="string" id="5630511">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;with&nbsp;invalid&nbsp;Target&#34;</span><span class="op" id="5630561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630569">if</span>&nbsp;<span class="ident" id="5630572"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5630577">.</span><span class="ident" id="5630578">Contains</span><span class="op" id="5630586">(</span><span class="ident" id="5630587"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630588">.</span><span class="ident" id="5630589">Inst</span><span class="op" id="5630593">,</span>&nbsp;<span class="ident" id="5630595"><a href="/encoding/xml/marshal.go.html#5628869">endProcInst</a></span><span class="op" id="5630606">)</span>&nbsp;<span class="op" id="5630608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630613">return</span>&nbsp;<span class="ident" id="5630620"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5630623">.</span><span class="ident" id="5630624">Errorf</span><span class="op" id="5630630">(</span><span class="string" id="5630631">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;containing&nbsp;?&gt;&nbsp;marker&#34;</span><span class="op" id="5630682">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630690"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630691">.</span><span class="ident" id="5630692">WriteString</span><span class="op" id="5630703">(</span><span class="string" id="5630704">&#34;&lt;?&#34;</span><span class="op" id="5630708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630712"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630713">.</span><span class="ident" id="5630714">WriteString</span><span class="op" id="5630725">(</span><span class="ident" id="5630726"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630727">.</span><span class="ident" id="5630728">Target</span><span class="op" id="5630734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630738">if</span>&nbsp;<span class="builtinfunc" id="5630741">len</span><span class="op" id="5630744">(</span><span class="ident" id="5630745"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630746">.</span><span class="ident" id="5630747">Inst</span><span class="op" id="5630751">)</span>&nbsp;<span class="op" id="5630753">&gt;</span>&nbsp;<span class="num" id="5630755">0</span>&nbsp;<span class="op" id="5630757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630762"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630763">.</span><span class="ident" id="5630764">WriteByte</span><span class="op" id="5630773">(</span><span class="string" id="5630774">&#39;&nbsp;&#39;</span><span class="op" id="5630777">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630782"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630783">.</span><span class="ident" id="5630784">Write</span><span class="op" id="5630789">(</span><span class="ident" id="5630790"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630791">.</span><span class="ident" id="5630792">Inst</span><span class="op" id="5630796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630804"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630805">.</span><span class="ident" id="5630806">WriteString</span><span class="op" id="5630817">(</span><span class="string" id="5630818">&#34;?&gt;&#34;</span><span class="op" id="5630822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630825">case</span>&nbsp;<span class="ident" id="5630830"><a href="/encoding/xml/xml.go.html#5681615">Directive</a></span><span class="op" id="5630839">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630843">if</span>&nbsp;<span class="ident" id="5630846"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5630851">.</span><span class="ident" id="5630852">Contains</span><span class="op" id="5630860">(</span><span class="ident" id="5630861"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630862">,</span>&nbsp;<span class="ident" id="5630864"><a href="/encoding/xml/marshal.go.html#5628898">endDirective</a></span><span class="op" id="5630876">)</span>&nbsp;<span class="op" id="5630878">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5630883">return</span>&nbsp;<span class="ident" id="5630890"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5630893">.</span><span class="ident" id="5630894">Errorf</span><span class="op" id="5630900">(</span><span class="string" id="5630901">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Directive&nbsp;containing&nbsp;&gt;&nbsp;marker&#34;</span><span class="op" id="5630952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5630956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630960"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630961">.</span><span class="ident" id="5630962">WriteString</span><span class="op" id="5630973">(</span><span class="string" id="5630974">&#34;&lt;!&#34;</span><span class="op" id="5630978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630982"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630983">.</span><span class="ident" id="5630984">Write</span><span class="op" id="5630989">(</span><span class="ident" id="5630990"><a href="/encoding/xml/marshal.go.html#5629689">t</a></span><span class="op" id="5630991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5630995"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5630996">.</span><span class="ident" id="5630997">WriteString</span><span class="op" id="5631008">(</span><span class="string" id="5631009">&#34;&gt;&#34;</span><span class="op" id="5631012">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631018">return</span>&nbsp;<span class="ident" id="5631025"><a href="/encoding/xml/marshal.go.html#5629669">p</a></span><span class="op" id="5631026">.</span><span class="ident" id="5631027">cachedWriteError</span><span class="op" id="5631043">(</span><span class="op" id="5631044">)</span><br>
<span class="lineno"></span><span class="op" id="5631046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5631049">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;buffered&nbsp;XML&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">245</span><span class="comment" id="5631109">//&nbsp;See&nbsp;the&nbsp;EncodeToken&nbsp;documentation&nbsp;for&nbsp;details&nbsp;about&nbsp;when&nbsp;it&nbsp;is&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="5631186">func</span>&nbsp;<span class="op" id="5631191">(</span><span class="ident" id="5631192">enc</span>&nbsp;<span class="op" id="5631196">*</span><span class="ident" id="5631197"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><span class="op" id="5631204">)</span>&nbsp;<span class="ident" id="5631206">Flush</span><span class="op" id="5631211">(</span><span class="op" id="5631212">)</span>&nbsp;<span class="builtintype" id="5631214">error</span>&nbsp;<span class="op" id="5631220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631223">return</span>&nbsp;<span class="ident" id="5631230"><a href="/encoding/xml/marshal.go.html#5631192">enc</a></span><span class="op" id="5631233">.</span><span class="ident" id="5631234">p</span><span class="op" id="5631235">.</span><span class="ident" id="5631236">Flush</span><span class="op" id="5631241">(</span><span class="op" id="5631242">)</span><br>
<span class="lineno"></span><span class="op" id="5631244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="5631247">type</span>&nbsp;<span class="ident" id="5631252">printer</span>&nbsp;<span class="keyword" id="5631260">struct</span>&nbsp;<span class="op" id="5631267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631270">*</span><span class="ident" id="5631271"><a href="/encoding/xml/marshal.go.html#5622672">bufio</a></span><span class="op" id="5631276">.</span><span class="ident" id="5631277">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631285">encoder</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631296">*</span><span class="ident" id="5631297"><a href="/encoding/xml/marshal.go.html#5627504">Encoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631306">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5631317">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631322">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5631333">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631341">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5631352">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631360">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5631371">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631376">indentedIn</span>&nbsp;<span class="builtintype" id="5631387">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631393">putNewline</span>&nbsp;<span class="builtintype" id="5631404">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631410">attrNS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5631421">map</span><span class="op" id="5631424">[</span><span class="builtintype" id="5631425">string</span><span class="op" id="5631431">]</span><span class="builtintype" id="5631432">string</span>&nbsp;<span class="comment" id="5631439">//&nbsp;map&nbsp;prefix&nbsp;-&gt;&nbsp;name&nbsp;space</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631468">attrPrefix</span>&nbsp;<span class="keyword" id="5631479">map</span><span class="op" id="5631482">[</span><span class="builtintype" id="5631483">string</span><span class="op" id="5631489">]</span><span class="builtintype" id="5631490">string</span>&nbsp;<span class="comment" id="5631497">//&nbsp;map&nbsp;name&nbsp;space&nbsp;-&gt;&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631526">prefixes</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5631537">[</span><span class="op" id="5631538">]</span><span class="builtintype" id="5631539">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5631547">tags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5631558">[</span><span class="op" id="5631559">]</span><span class="ident" id="5631560"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><br>
<span class="lineno"></span><span class="op" id="5631565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="5631568">//&nbsp;createAttrPrefix&nbsp;finds&nbsp;the&nbsp;name&nbsp;space&nbsp;prefix&nbsp;attribute&nbsp;to&nbsp;use&nbsp;for&nbsp;the&nbsp;given&nbsp;name&nbsp;space,</span><br>
<span class="lineno"></span><span class="comment" id="5631659">//&nbsp;defining&nbsp;a&nbsp;new&nbsp;prefix&nbsp;if&nbsp;necessary.&nbsp;It&nbsp;returns&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="5631721">func</span>&nbsp;<span class="op" id="5631726">(</span><span class="ident" id="5631727">p</span>&nbsp;<span class="op" id="5631729">*</span><span class="ident" id="5631730"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5631737">)</span>&nbsp;<span class="ident" id="5631739">createAttrPrefix</span><span class="op" id="5631755">(</span><span class="ident" id="5631756">url</span>&nbsp;<span class="builtintype" id="5631760">string</span><span class="op" id="5631766">)</span>&nbsp;<span class="builtintype" id="5631768">string</span>&nbsp;<span class="op" id="5631775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631778">if</span>&nbsp;<span class="ident" id="5631781">prefix</span>&nbsp;<span class="op" id="5631788">:=</span>&nbsp;<span class="ident" id="5631791"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5631792">.</span><span class="ident" id="5631793">attrPrefix</span><span class="op" id="5631803">[</span><span class="ident" id="5631804"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span><span class="op" id="5631807">]</span><span class="op" id="5631808">;</span>&nbsp;<span class="ident" id="5631810"><a href="/encoding/xml/marshal.go.html#5631781">prefix</a></span>&nbsp;<span class="op" id="5631817">!=</span>&nbsp;<span class="string" id="5631820">&#34;&#34;</span>&nbsp;<span class="op" id="5631823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5631827">return</span>&nbsp;<span class="ident" id="5631834"><a href="/encoding/xml/marshal.go.html#5631781">prefix</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5631842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631846">//&nbsp;The&nbsp;&#34;http://www.w3.org/XML/1998/namespace&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;predefined&nbsp;as&nbsp;&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631927">//&nbsp;and&nbsp;must&nbsp;be&nbsp;referred&nbsp;to&nbsp;that&nbsp;way.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5631965">//&nbsp;(The&nbsp;&#34;http://www.w3.org/2000/xmlns/&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;also&nbsp;predefined&nbsp;as&nbsp;&#34;xmlns&#34;,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632048">//&nbsp;but&nbsp;users&nbsp;should&nbsp;not&nbsp;be&nbsp;trying&nbsp;to&nbsp;use&nbsp;that&nbsp;one&nbsp;directly&nbsp;-&nbsp;that&#39;s&nbsp;our&nbsp;job.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632127">if</span>&nbsp;<span class="ident" id="5632130"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span>&nbsp;<span class="op" id="5632134">==</span>&nbsp;<span class="ident" id="5632137"><a href="/encoding/xml/xml.go.html#5686898">xmlURL</a></span>&nbsp;<span class="op" id="5632144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632148">return</span>&nbsp;<span class="string" id="5632155">&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632166">//&nbsp;Need&nbsp;to&nbsp;define&nbsp;a&nbsp;new&nbsp;name&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632203">if</span>&nbsp;<span class="ident" id="5632206"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632207">.</span><span class="ident" id="5632208">attrPrefix</span>&nbsp;<span class="op" id="5632219">==</span>&nbsp;<span class="ident" id="5632222">nil</span>&nbsp;<span class="op" id="5632226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632230"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632231">.</span><span class="ident" id="5632232">attrPrefix</span>&nbsp;<span class="op" id="5632243">=</span>&nbsp;<span class="builtinfunc" id="5632245">make</span><span class="op" id="5632249">(</span><span class="keyword" id="5632250">map</span><span class="op" id="5632253">[</span><span class="builtintype" id="5632254">string</span><span class="op" id="5632260">]</span><span class="builtintype" id="5632261">string</span><span class="op" id="5632267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632271"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632272">.</span><span class="ident" id="5632273">attrNS</span>&nbsp;<span class="op" id="5632280">=</span>&nbsp;<span class="builtinfunc" id="5632282">make</span><span class="op" id="5632286">(</span><span class="keyword" id="5632287">map</span><span class="op" id="5632290">[</span><span class="builtintype" id="5632291">string</span><span class="op" id="5632297">]</span><span class="builtintype" id="5632298">string</span><span class="op" id="5632304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632307">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632311">//&nbsp;Pick&nbsp;a&nbsp;name.&nbsp;We&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;final&nbsp;element&nbsp;of&nbsp;the&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632372">//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;_.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632396">prefix</span>&nbsp;<span class="op" id="5632403">:=</span>&nbsp;<span class="ident" id="5632406"><a href="/encoding/xml/marshal.go.html#5622737">strings</a></span><span class="op" id="5632413">.</span><span class="ident" id="5632414">TrimRight</span><span class="op" id="5632423">(</span><span class="ident" id="5632424"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span><span class="op" id="5632427">,</span>&nbsp;<span class="string" id="5632429">&#34;/&#34;</span><span class="op" id="5632432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632435">if</span>&nbsp;<span class="ident" id="5632438">i</span>&nbsp;<span class="op" id="5632440">:=</span>&nbsp;<span class="ident" id="5632443"><a href="/encoding/xml/marshal.go.html#5622737">strings</a></span><span class="op" id="5632450">.</span><span class="ident" id="5632451">LastIndex</span><span class="op" id="5632460">(</span><span class="ident" id="5632461"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632467">,</span>&nbsp;<span class="string" id="5632469">&#34;/&#34;</span><span class="op" id="5632472">)</span><span class="op" id="5632473">;</span>&nbsp;<span class="ident" id="5632475"><a href="/encoding/xml/marshal.go.html#5632438">i</a></span>&nbsp;<span class="op" id="5632477">&gt;=</span>&nbsp;<span class="num" id="5632480">0</span>&nbsp;<span class="op" id="5632482">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632486"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632493">=</span>&nbsp;<span class="ident" id="5632495"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632501">[</span><span class="ident" id="5632502"><a href="/encoding/xml/marshal.go.html#5632438">i</a></span><span class="op" id="5632503">+</span><span class="num" id="5632504">1</span><span class="op" id="5632505">:</span><span class="op" id="5632506">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632512">if</span>&nbsp;<span class="ident" id="5632515"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632522">==</span>&nbsp;<span class="string" id="5632525">&#34;&#34;</span>&nbsp;<span class="op" id="5632528">||</span>&nbsp;<span class="op" id="5632531">!</span><span class="ident" id="5632532"><a href="/encoding/xml/xml.go.html#5705961">isName</a></span><span class="op" id="5632538">(</span><span class="op" id="5632539">[</span><span class="op" id="5632540">]</span><span class="builtintype" id="5632541">byte</span><span class="op" id="5632545">(</span><span class="ident" id="5632546"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632552">)</span><span class="op" id="5632553">)</span>&nbsp;<span class="op" id="5632555">||</span>&nbsp;<span class="ident" id="5632558"><a href="/encoding/xml/marshal.go.html#5622737">strings</a></span><span class="op" id="5632565">.</span><span class="ident" id="5632566">Contains</span><span class="op" id="5632574">(</span><span class="ident" id="5632575"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632581">,</span>&nbsp;<span class="string" id="5632583">&#34;:&#34;</span><span class="op" id="5632586">)</span>&nbsp;<span class="op" id="5632588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632592"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632599">=</span>&nbsp;<span class="string" id="5632601">&#34;_&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632606">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632609">if</span>&nbsp;<span class="ident" id="5632612"><a href="/encoding/xml/marshal.go.html#5622737">strings</a></span><span class="op" id="5632619">.</span><span class="ident" id="5632620">HasPrefix</span><span class="op" id="5632629">(</span><span class="ident" id="5632630"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632636">,</span>&nbsp;<span class="string" id="5632638">&#34;xml&#34;</span><span class="op" id="5632643">)</span>&nbsp;<span class="op" id="5632645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632649">//&nbsp;xmlanything&nbsp;is&nbsp;reserved.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632679"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632686">=</span>&nbsp;<span class="string" id="5632688">&#34;_&#34;</span>&nbsp;<span class="op" id="5632692">+</span>&nbsp;<span class="ident" id="5632694"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632705">if</span>&nbsp;<span class="ident" id="5632708"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632709">.</span><span class="ident" id="5632710">attrNS</span><span class="op" id="5632716">[</span><span class="ident" id="5632717"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632723">]</span>&nbsp;<span class="op" id="5632725">!=</span>&nbsp;<span class="string" id="5632728">&#34;&#34;</span>&nbsp;<span class="op" id="5632731">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5632735">//&nbsp;Name&nbsp;is&nbsp;taken.&nbsp;Find&nbsp;a&nbsp;better&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632774">for</span>&nbsp;<span class="ident" id="5632778"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632779">.</span><span class="ident" id="5632780">seq</span><span class="op" id="5632783">++</span><span class="op" id="5632785">;</span>&nbsp;<span class="op" id="5632787">;</span>&nbsp;<span class="ident" id="5632789"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632790">.</span><span class="ident" id="5632791">seq</span><span class="op" id="5632794">++</span>&nbsp;<span class="op" id="5632797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632802">if</span>&nbsp;<span class="ident" id="5632805">id</span>&nbsp;<span class="op" id="5632808">:=</span>&nbsp;<span class="ident" id="5632811"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632818">+</span>&nbsp;<span class="string" id="5632820">&#34;_&#34;</span>&nbsp;<span class="op" id="5632824">+</span>&nbsp;<span class="ident" id="5632826"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5632833">.</span><span class="ident" id="5632834">Itoa</span><span class="op" id="5632838">(</span><span class="ident" id="5632839"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632840">.</span><span class="ident" id="5632841">seq</span><span class="op" id="5632844">)</span><span class="op" id="5632845">;</span>&nbsp;<span class="ident" id="5632847"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632848">.</span><span class="ident" id="5632849">attrNS</span><span class="op" id="5632855">[</span><span class="ident" id="5632856"><a href="/encoding/xml/marshal.go.html#5632805">id</a></span><span class="op" id="5632858">]</span>&nbsp;<span class="op" id="5632860">==</span>&nbsp;<span class="string" id="5632863">&#34;&#34;</span>&nbsp;<span class="op" id="5632866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632872"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span>&nbsp;<span class="op" id="5632879">=</span>&nbsp;<span class="ident" id="5632881"><a href="/encoding/xml/marshal.go.html#5632805">id</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5632888">break</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5632904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632908"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632909">.</span><span class="ident" id="5632910">attrPrefix</span><span class="op" id="5632920">[</span><span class="ident" id="5632921"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span><span class="op" id="5632924">]</span>&nbsp;<span class="op" id="5632926">=</span>&nbsp;<span class="ident" id="5632928"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632936"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632937">.</span><span class="ident" id="5632938">attrNS</span><span class="op" id="5632944">[</span><span class="ident" id="5632945"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5632951">]</span>&nbsp;<span class="op" id="5632953">=</span>&nbsp;<span class="ident" id="5632955"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632961"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632962">.</span><span class="ident" id="5632963">WriteString</span><span class="op" id="5632974">(</span><span class="string" id="5632975">`xmlns:`</span><span class="op" id="5632983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5632986"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5632987">.</span><span class="ident" id="5632988">WriteString</span><span class="op" id="5632999">(</span><span class="ident" id="5633000"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5633006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633009"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5633010">.</span><span class="ident" id="5633011">WriteString</span><span class="op" id="5633022">(</span><span class="string" id="5633023">`=&#34;`</span><span class="op" id="5633027">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633030"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5633040">(</span><span class="ident" id="5633041"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5633042">,</span>&nbsp;<span class="op" id="5633044">[</span><span class="op" id="5633045">]</span><span class="builtintype" id="5633046">byte</span><span class="op" id="5633050">(</span><span class="ident" id="5633051"><a href="/encoding/xml/marshal.go.html#5631756">url</a></span><span class="op" id="5633054">)</span><span class="op" id="5633055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633058"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5633059">.</span><span class="ident" id="5633060">WriteString</span><span class="op" id="5633071">(</span><span class="string" id="5633072">`&#34;&nbsp;`</span><span class="op" id="5633076">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633080"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5633081">.</span><span class="ident" id="5633082">prefixes</span>&nbsp;<span class="op" id="5633091">=</span>&nbsp;<span class="builtinfunc" id="5633093">append</span><span class="op" id="5633099">(</span><span class="ident" id="5633100"><a href="/encoding/xml/marshal.go.html#5631727">p</a></span><span class="op" id="5633101">.</span><span class="ident" id="5633102">prefixes</span><span class="op" id="5633110">,</span>&nbsp;<span class="ident" id="5633112"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><span class="op" id="5633118">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5633122">return</span>&nbsp;<span class="ident" id="5633129"><a href="/encoding/xml/marshal.go.html#5632396">prefix</a></span><br>
<span class="lineno"></span><span class="op" id="5633136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5633139">//&nbsp;deleteAttrPrefix&nbsp;removes&nbsp;an&nbsp;attribute&nbsp;name&nbsp;space&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="5633199">func</span>&nbsp;<span class="op" id="5633204">(</span><span class="ident" id="5633205">p</span>&nbsp;<span class="op" id="5633207">*</span><span class="ident" id="5633208"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5633215">)</span>&nbsp;<span class="ident" id="5633217">deleteAttrPrefix</span><span class="op" id="5633233">(</span><span class="ident" id="5633234">prefix</span>&nbsp;<span class="builtintype" id="5633241">string</span><span class="op" id="5633247">)</span>&nbsp;<span class="op" id="5633249">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5633252">delete</span><span class="op" id="5633258">(</span><span class="ident" id="5633259"><a href="/encoding/xml/marshal.go.html#5633205">p</a></span><span class="op" id="5633260">.</span><span class="ident" id="5633261">attrPrefix</span><span class="op" id="5633271">,</span>&nbsp;<span class="ident" id="5633273"><a href="/encoding/xml/marshal.go.html#5633205">p</a></span><span class="op" id="5633274">.</span><span class="ident" id="5633275">attrNS</span><span class="op" id="5633281">[</span><span class="ident" id="5633282"><a href="/encoding/xml/marshal.go.html#5633234">prefix</a></span><span class="op" id="5633288">]</span><span class="op" id="5633289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5633292">delete</span><span class="op" id="5633298">(</span><span class="ident" id="5633299"><a href="/encoding/xml/marshal.go.html#5633205">p</a></span><span class="op" id="5633300">.</span><span class="ident" id="5633301">attrNS</span><span class="op" id="5633307">,</span>&nbsp;<span class="ident" id="5633309"><a href="/encoding/xml/marshal.go.html#5633234">prefix</a></span><span class="op" id="5633315">)</span><br>
<span class="lineno"></span><span class="op" id="5633317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5633320">func</span>&nbsp;<span class="op" id="5633325">(</span><span class="ident" id="5633326">p</span>&nbsp;<span class="op" id="5633328">*</span><span class="ident" id="5633329"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5633336">)</span>&nbsp;<span class="ident" id="5633338">markPrefix</span><span class="op" id="5633348">(</span><span class="op" id="5633349">)</span>&nbsp;<span class="op" id="5633351">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633354"><a href="/encoding/xml/marshal.go.html#5633326">p</a></span><span class="op" id="5633355">.</span><span class="ident" id="5633356">prefixes</span>&nbsp;<span class="op" id="5633365">=</span>&nbsp;<span class="builtinfunc" id="5633367">append</span><span class="op" id="5633373">(</span><span class="ident" id="5633374"><a href="/encoding/xml/marshal.go.html#5633326">p</a></span><span class="op" id="5633375">.</span><span class="ident" id="5633376">prefixes</span><span class="op" id="5633384">,</span>&nbsp;<span class="string" id="5633386">&#34;&#34;</span><span class="op" id="5633388">)</span><br>
<span class="lineno"></span><span class="op" id="5633390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5633393">func</span>&nbsp;<span class="op" id="5633398">(</span><span class="ident" id="5633399">p</span>&nbsp;<span class="op" id="5633401">*</span><span class="ident" id="5633402"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5633409">)</span>&nbsp;<span class="ident" id="5633411">popPrefix</span><span class="op" id="5633420">(</span><span class="op" id="5633421">)</span>&nbsp;<span class="op" id="5633423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5633426">for</span>&nbsp;<span class="builtinfunc" id="5633430">len</span><span class="op" id="5633433">(</span><span class="ident" id="5633434"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633435">.</span><span class="ident" id="5633436">prefixes</span><span class="op" id="5633444">)</span>&nbsp;<span class="op" id="5633446">&gt;</span>&nbsp;<span class="num" id="5633448">0</span>&nbsp;<span class="op" id="5633450">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633454">prefix</span>&nbsp;<span class="op" id="5633461">:=</span>&nbsp;<span class="ident" id="5633464"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633465">.</span><span class="ident" id="5633466">prefixes</span><span class="op" id="5633474">[</span><span class="builtinfunc" id="5633475">len</span><span class="op" id="5633478">(</span><span class="ident" id="5633479"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633480">.</span><span class="ident" id="5633481">prefixes</span><span class="op" id="5633489">)</span><span class="op" id="5633490">-</span><span class="num" id="5633491">1</span><span class="op" id="5633492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633496"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633497">.</span><span class="ident" id="5633498">prefixes</span>&nbsp;<span class="op" id="5633507">=</span>&nbsp;<span class="ident" id="5633509"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633510">.</span><span class="ident" id="5633511">prefixes</span><span class="op" id="5633519">[</span><span class="op" id="5633520">:</span><span class="builtinfunc" id="5633521">len</span><span class="op" id="5633524">(</span><span class="ident" id="5633525"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633526">.</span><span class="ident" id="5633527">prefixes</span><span class="op" id="5633535">)</span><span class="op" id="5633536">-</span><span class="num" id="5633537">1</span><span class="op" id="5633538">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5633542">if</span>&nbsp;<span class="ident" id="5633545"><a href="/encoding/xml/marshal.go.html#5633454">prefix</a></span>&nbsp;<span class="op" id="5633552">==</span>&nbsp;<span class="string" id="5633555">&#34;&#34;</span>&nbsp;<span class="op" id="5633558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5633563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5633571">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633575"><a href="/encoding/xml/marshal.go.html#5633399">p</a></span><span class="op" id="5633576">.</span><span class="ident" id="5633577">deleteAttrPrefix</span><span class="op" id="5633593">(</span><span class="ident" id="5633594"><a href="/encoding/xml/marshal.go.html#5633454">prefix</a></span><span class="op" id="5633600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5633603">}</span><br>
<span class="lineno"></span><span class="op" id="5633605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5633608">var</span>&nbsp;<span class="op" id="5633612">(</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633615">marshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5633633">=</span>&nbsp;<span class="ident" id="5633635"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5633642">.</span><span class="ident" id="5633643">TypeOf</span><span class="op" id="5633649">(</span><span class="op" id="5633650">(</span><span class="op" id="5633651">*</span><span class="ident" id="5633652"><a href="/encoding/xml/marshal.go.html#5626323">Marshaler</a></span><span class="op" id="5633661">)</span><span class="op" id="5633662">(</span><span class="ident" id="5633663">nil</span><span class="op" id="5633666">)</span><span class="op" id="5633667">)</span><span class="op" id="5633668">.</span><span class="ident" id="5633669">Elem</span><span class="op" id="5633673">(</span><span class="op" id="5633674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633677">marshalerAttrType</span>&nbsp;<span class="op" id="5633695">=</span>&nbsp;<span class="ident" id="5633697"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5633704">.</span><span class="ident" id="5633705">TypeOf</span><span class="op" id="5633711">(</span><span class="op" id="5633712">(</span><span class="op" id="5633713">*</span><span class="ident" id="5633714"><a href="/encoding/xml/marshal.go.html#5626948">MarshalerAttr</a></span><span class="op" id="5633727">)</span><span class="op" id="5633728">(</span><span class="ident" id="5633729">nil</span><span class="op" id="5633732">)</span><span class="op" id="5633733">)</span><span class="op" id="5633734">.</span><span class="ident" id="5633735">Elem</span><span class="op" id="5633739">(</span><span class="op" id="5633740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5633743">textMarshalerType</span>&nbsp;<span class="op" id="5633761">=</span>&nbsp;<span class="ident" id="5633763"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5633770">.</span><span class="ident" id="5633771">TypeOf</span><span class="op" id="5633777">(</span><span class="op" id="5633778">(</span><span class="op" id="5633779">*</span><span class="ident" id="5633780"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5633788">.</span><span class="ident" id="5633789">TextMarshaler</span><span class="op" id="5633802">)</span><span class="op" id="5633803">(</span><span class="ident" id="5633804">nil</span><span class="op" id="5633807">)</span><span class="op" id="5633808">)</span><span class="op" id="5633809">.</span><span class="ident" id="5633810">Elem</span><span class="op" id="5633814">(</span><span class="op" id="5633815">)</span><br>
<span class="lineno"></span><span class="op" id="5633817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="comment" id="5633820">//&nbsp;marshalValue&nbsp;writes&nbsp;one&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements&nbsp;representing&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="5633886">//&nbsp;If&nbsp;val&nbsp;was&nbsp;obtained&nbsp;from&nbsp;a&nbsp;struct&nbsp;field,&nbsp;finfo&nbsp;must&nbsp;have&nbsp;its&nbsp;details.</span><br>
<span class="lineno"></span><span class="keyword" id="5633959">func</span>&nbsp;<span class="op" id="5633964">(</span><span class="ident" id="5633965">p</span>&nbsp;<span class="op" id="5633967">*</span><span class="ident" id="5633968"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5633975">)</span>&nbsp;<span class="ident" id="5633977">marshalValue</span><span class="op" id="5633989">(</span><span class="ident" id="5633990">val</span>&nbsp;<span class="ident" id="5633994"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5634001">.</span><span class="ident" id="5634002">Value</span><span class="op" id="5634007">,</span>&nbsp;<span class="ident" id="5634009">finfo</span>&nbsp;<span class="op" id="5634015">*</span><span class="ident" id="5634016"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5634025">,</span>&nbsp;<span class="ident" id="5634027">startTemplate</span>&nbsp;<span class="op" id="5634041">*</span><span class="ident" id="5634042"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5634054">)</span>&nbsp;<span class="builtintype" id="5634056">error</span>&nbsp;<span class="op" id="5634062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634065">if</span>&nbsp;<span class="ident" id="5634068"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span>&nbsp;<span class="op" id="5634082">!=</span>&nbsp;<span class="ident" id="5634085">nil</span>&nbsp;<span class="op" id="5634089">&amp;&amp;</span>&nbsp;<span class="ident" id="5634092"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5634105">.</span><span class="ident" id="5634106">Name</span><span class="op" id="5634110">.</span><span class="ident" id="5634111">Local</span>&nbsp;<span class="op" id="5634117">==</span>&nbsp;<span class="string" id="5634120">&#34;&#34;</span>&nbsp;<span class="op" id="5634123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634127">return</span>&nbsp;<span class="ident" id="5634134"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5634137">.</span><span class="ident" id="5634138">Errorf</span><span class="op" id="5634144">(</span><span class="string" id="5634145">&#34;xml:&nbsp;EncodeElement&nbsp;of&nbsp;StartElement&nbsp;with&nbsp;missing&nbsp;name&#34;</span><span class="op" id="5634199">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634206">if</span>&nbsp;<span class="op" id="5634209">!</span><span class="ident" id="5634210"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634213">.</span><span class="ident" id="5634214">IsValid</span><span class="op" id="5634221">(</span><span class="op" id="5634222">)</span>&nbsp;<span class="op" id="5634224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634228">return</span>&nbsp;<span class="ident" id="5634235">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634240">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634243">if</span>&nbsp;<span class="ident" id="5634246"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span>&nbsp;<span class="op" id="5634252">!=</span>&nbsp;<span class="ident" id="5634255">nil</span>&nbsp;<span class="op" id="5634259">&amp;&amp;</span>&nbsp;<span class="ident" id="5634262"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5634267">.</span><span class="ident" id="5634268">flags</span><span class="op" id="5634273">&amp;</span><span class="ident" id="5634274"><a href="/encoding/xml/typeinfo.go.html#5670141">fOmitEmpty</a></span>&nbsp;<span class="op" id="5634285">!=</span>&nbsp;<span class="num" id="5634288">0</span>&nbsp;<span class="op" id="5634290">&amp;&amp;</span>&nbsp;<span class="ident" id="5634293"><a href="/encoding/xml/marshal.go.html#5648669">isEmptyValue</a></span><span class="op" id="5634305">(</span><span class="ident" id="5634306"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634309">)</span>&nbsp;<span class="op" id="5634311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634315">return</span>&nbsp;<span class="ident" id="5634322">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5634331">//&nbsp;Drill&nbsp;into&nbsp;interfaces&nbsp;and&nbsp;pointers.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5634371">//&nbsp;This&nbsp;can&nbsp;turn&nbsp;into&nbsp;an&nbsp;infinite&nbsp;loop&nbsp;given&nbsp;a&nbsp;cyclic&nbsp;chain,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5634433">//&nbsp;but&nbsp;it&nbsp;matches&nbsp;the&nbsp;Go&nbsp;1&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634471">for</span>&nbsp;<span class="ident" id="5634475"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634478">.</span><span class="ident" id="5634479">Kind</span><span class="op" id="5634483">(</span><span class="op" id="5634484">)</span>&nbsp;<span class="op" id="5634486">==</span>&nbsp;<span class="ident" id="5634489"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5634496">.</span><span class="ident" id="5634497">Interface</span>&nbsp;<span class="op" id="5634507">||</span>&nbsp;<span class="ident" id="5634510"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634513">.</span><span class="ident" id="5634514">Kind</span><span class="op" id="5634518">(</span><span class="op" id="5634519">)</span>&nbsp;<span class="op" id="5634521">==</span>&nbsp;<span class="ident" id="5634524"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5634531">.</span><span class="ident" id="5634532">Ptr</span>&nbsp;<span class="op" id="5634536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634540">if</span>&nbsp;<span class="ident" id="5634543"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634546">.</span><span class="ident" id="5634547">IsNil</span><span class="op" id="5634552">(</span><span class="op" id="5634553">)</span>&nbsp;<span class="op" id="5634555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634560">return</span>&nbsp;<span class="ident" id="5634567">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5634577"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span>&nbsp;<span class="op" id="5634581">=</span>&nbsp;<span class="ident" id="5634583"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634586">.</span><span class="ident" id="5634587">Elem</span><span class="op" id="5634591">(</span><span class="op" id="5634592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5634599">kind</span>&nbsp;<span class="op" id="5634604">:=</span>&nbsp;<span class="ident" id="5634607"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634610">.</span><span class="ident" id="5634611">Kind</span><span class="op" id="5634615">(</span><span class="op" id="5634616">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5634619">typ</span>&nbsp;<span class="op" id="5634623">:=</span>&nbsp;<span class="ident" id="5634626"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634629">.</span><span class="ident" id="5634630">Type</span><span class="op" id="5634634">(</span><span class="op" id="5634635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5634639">//&nbsp;Check&nbsp;for&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634664">if</span>&nbsp;<span class="ident" id="5634667"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634670">.</span><span class="ident" id="5634671">CanInterface</span><span class="op" id="5634683">(</span><span class="op" id="5634684">)</span>&nbsp;<span class="op" id="5634686">&amp;&amp;</span>&nbsp;<span class="ident" id="5634689"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5634692">.</span><span class="ident" id="5634693">Implements</span><span class="op" id="5634703">(</span><span class="ident" id="5634704"><a href="/encoding/xml/marshal.go.html#5633615">marshalerType</a></span><span class="op" id="5634717">)</span>&nbsp;<span class="op" id="5634719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634723">return</span>&nbsp;<span class="ident" id="5634730"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5634731">.</span><span class="ident" id="5634732">marshalInterface</span><span class="op" id="5634748">(</span><span class="ident" id="5634749"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634752">.</span><span class="ident" id="5634753">Interface</span><span class="op" id="5634762">(</span><span class="op" id="5634763">)</span><span class="op" id="5634764">.</span><span class="op" id="5634765">(</span><span class="ident" id="5634766"><a href="/encoding/xml/marshal.go.html#5626323">Marshaler</a></span><span class="op" id="5634775">)</span><span class="op" id="5634776">,</span>&nbsp;<span class="ident" id="5634778"><a href="/encoding/xml/marshal.go.html#5639134">defaultStart</a></span><span class="op" id="5634790">(</span><span class="ident" id="5634791"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5634794">,</span>&nbsp;<span class="ident" id="5634796"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5634801">,</span>&nbsp;<span class="ident" id="5634803"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5634816">)</span><span class="op" id="5634817">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5634820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634823">if</span>&nbsp;<span class="ident" id="5634826"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634829">.</span><span class="ident" id="5634830">CanAddr</span><span class="op" id="5634837">(</span><span class="op" id="5634838">)</span>&nbsp;<span class="op" id="5634840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5634844">pv</span>&nbsp;<span class="op" id="5634847">:=</span>&nbsp;<span class="ident" id="5634850"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5634853">.</span><span class="ident" id="5634854">Addr</span><span class="op" id="5634858">(</span><span class="op" id="5634859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634863">if</span>&nbsp;<span class="ident" id="5634866"><a href="/encoding/xml/marshal.go.html#5634844">pv</a></span><span class="op" id="5634868">.</span><span class="ident" id="5634869">CanInterface</span><span class="op" id="5634881">(</span><span class="op" id="5634882">)</span>&nbsp;<span class="op" id="5634884">&amp;&amp;</span>&nbsp;<span class="ident" id="5634887"><a href="/encoding/xml/marshal.go.html#5634844">pv</a></span><span class="op" id="5634889">.</span><span class="ident" id="5634890">Type</span><span class="op" id="5634894">(</span><span class="op" id="5634895">)</span><span class="op" id="5634896">.</span><span class="ident" id="5634897">Implements</span><span class="op" id="5634907">(</span><span class="ident" id="5634908"><a href="/encoding/xml/marshal.go.html#5633615">marshalerType</a></span><span class="op" id="5634921">)</span>&nbsp;<span class="op" id="5634923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5634928">return</span>&nbsp;<span class="ident" id="5634935"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5634936">.</span><span class="ident" id="5634937">marshalInterface</span><span class="op" id="5634953">(</span><span class="ident" id="5634954"><a href="/encoding/xml/marshal.go.html#5634844">pv</a></span><span class="op" id="5634956">.</span><span class="ident" id="5634957">Interface</span><span class="op" id="5634966">(</span><span class="op" id="5634967">)</span><span class="op" id="5634968">.</span><span class="op" id="5634969">(</span><span class="ident" id="5634970"><a href="/encoding/xml/marshal.go.html#5626323">Marshaler</a></span><span class="op" id="5634979">)</span><span class="op" id="5634980">,</span>&nbsp;<span class="ident" id="5634982"><a href="/encoding/xml/marshal.go.html#5639134">defaultStart</a></span><span class="op" id="5634994">(</span><span class="ident" id="5634995"><a href="/encoding/xml/marshal.go.html#5634844">pv</a></span><span class="op" id="5634997">.</span><span class="ident" id="5634998">Type</span><span class="op" id="5635002">(</span><span class="op" id="5635003">)</span><span class="op" id="5635004">,</span>&nbsp;<span class="ident" id="5635006"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5635011">,</span>&nbsp;<span class="ident" id="5635013"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5635026">)</span><span class="op" id="5635027">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635038">//&nbsp;Check&nbsp;for&nbsp;text&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635068">if</span>&nbsp;<span class="ident" id="5635071"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635074">.</span><span class="ident" id="5635075">CanInterface</span><span class="op" id="5635087">(</span><span class="op" id="5635088">)</span>&nbsp;<span class="op" id="5635090">&amp;&amp;</span>&nbsp;<span class="ident" id="5635093"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5635096">.</span><span class="ident" id="5635097">Implements</span><span class="op" id="5635107">(</span><span class="ident" id="5635108"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5635125">)</span>&nbsp;<span class="op" id="5635127">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635131">return</span>&nbsp;<span class="ident" id="5635138"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5635139">.</span><span class="ident" id="5635140">marshalTextInterface</span><span class="op" id="5635160">(</span><span class="ident" id="5635161"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635164">.</span><span class="ident" id="5635165">Interface</span><span class="op" id="5635174">(</span><span class="op" id="5635175">)</span><span class="op" id="5635176">.</span><span class="op" id="5635177">(</span><span class="ident" id="5635178"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5635186">.</span><span class="ident" id="5635187">TextMarshaler</span><span class="op" id="5635200">)</span><span class="op" id="5635201">,</span>&nbsp;<span class="ident" id="5635203"><a href="/encoding/xml/marshal.go.html#5639134">defaultStart</a></span><span class="op" id="5635215">(</span><span class="ident" id="5635216"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5635219">,</span>&nbsp;<span class="ident" id="5635221"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5635226">,</span>&nbsp;<span class="ident" id="5635228"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5635241">)</span><span class="op" id="5635242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635248">if</span>&nbsp;<span class="ident" id="5635251"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635254">.</span><span class="ident" id="5635255">CanAddr</span><span class="op" id="5635262">(</span><span class="op" id="5635263">)</span>&nbsp;<span class="op" id="5635265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5635269">pv</span>&nbsp;<span class="op" id="5635272">:=</span>&nbsp;<span class="ident" id="5635275"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635278">.</span><span class="ident" id="5635279">Addr</span><span class="op" id="5635283">(</span><span class="op" id="5635284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635288">if</span>&nbsp;<span class="ident" id="5635291"><a href="/encoding/xml/marshal.go.html#5635269">pv</a></span><span class="op" id="5635293">.</span><span class="ident" id="5635294">CanInterface</span><span class="op" id="5635306">(</span><span class="op" id="5635307">)</span>&nbsp;<span class="op" id="5635309">&amp;&amp;</span>&nbsp;<span class="ident" id="5635312"><a href="/encoding/xml/marshal.go.html#5635269">pv</a></span><span class="op" id="5635314">.</span><span class="ident" id="5635315">Type</span><span class="op" id="5635319">(</span><span class="op" id="5635320">)</span><span class="op" id="5635321">.</span><span class="ident" id="5635322">Implements</span><span class="op" id="5635332">(</span><span class="ident" id="5635333"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5635350">)</span>&nbsp;<span class="op" id="5635352">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635357">return</span>&nbsp;<span class="ident" id="5635364"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5635365">.</span><span class="ident" id="5635366">marshalTextInterface</span><span class="op" id="5635386">(</span><span class="ident" id="5635387"><a href="/encoding/xml/marshal.go.html#5635269">pv</a></span><span class="op" id="5635389">.</span><span class="ident" id="5635390">Interface</span><span class="op" id="5635399">(</span><span class="op" id="5635400">)</span><span class="op" id="5635401">.</span><span class="op" id="5635402">(</span><span class="ident" id="5635403"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5635411">.</span><span class="ident" id="5635412">TextMarshaler</span><span class="op" id="5635425">)</span><span class="op" id="5635426">,</span>&nbsp;<span class="ident" id="5635428"><a href="/encoding/xml/marshal.go.html#5639134">defaultStart</a></span><span class="op" id="5635440">(</span><span class="ident" id="5635441"><a href="/encoding/xml/marshal.go.html#5635269">pv</a></span><span class="op" id="5635443">.</span><span class="ident" id="5635444">Type</span><span class="op" id="5635448">(</span><span class="op" id="5635449">)</span><span class="op" id="5635450">,</span>&nbsp;<span class="ident" id="5635452"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5635457">,</span>&nbsp;<span class="ident" id="5635459"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5635472">)</span><span class="op" id="5635473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635484">//&nbsp;Slices&nbsp;and&nbsp;arrays&nbsp;iterate&nbsp;over&nbsp;the&nbsp;elements.&nbsp;They&nbsp;do&nbsp;not&nbsp;have&nbsp;an&nbsp;enclosing&nbsp;tag.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635568">if</span>&nbsp;<span class="op" id="5635571">(</span><span class="ident" id="5635572"><a href="/encoding/xml/marshal.go.html#5634599">kind</a></span>&nbsp;<span class="op" id="5635577">==</span>&nbsp;<span class="ident" id="5635580"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5635587">.</span><span class="ident" id="5635588">Slice</span>&nbsp;<span class="op" id="5635594">||</span>&nbsp;<span class="ident" id="5635597"><a href="/encoding/xml/marshal.go.html#5634599">kind</a></span>&nbsp;<span class="op" id="5635602">==</span>&nbsp;<span class="ident" id="5635605"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5635612">.</span><span class="ident" id="5635613">Array</span><span class="op" id="5635618">)</span>&nbsp;<span class="op" id="5635620">&amp;&amp;</span>&nbsp;<span class="ident" id="5635623"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5635626">.</span><span class="ident" id="5635627">Elem</span><span class="op" id="5635631">(</span><span class="op" id="5635632">)</span><span class="op" id="5635633">.</span><span class="ident" id="5635634">Kind</span><span class="op" id="5635638">(</span><span class="op" id="5635639">)</span>&nbsp;<span class="op" id="5635641">!=</span>&nbsp;<span class="ident" id="5635644"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5635651">.</span><span class="ident" id="5635652">Uint8</span>&nbsp;<span class="op" id="5635658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635662">for</span>&nbsp;<span class="ident" id="5635666">i</span><span class="op" id="5635667">,</span>&nbsp;<span class="ident" id="5635669">n</span>&nbsp;<span class="op" id="5635671">:=</span>&nbsp;<span class="num" id="5635674">0</span><span class="op" id="5635675">,</span>&nbsp;<span class="ident" id="5635677"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635680">.</span><span class="ident" id="5635681">Len</span><span class="op" id="5635684">(</span><span class="op" id="5635685">)</span><span class="op" id="5635686">;</span>&nbsp;<span class="ident" id="5635688"><a href="/encoding/xml/marshal.go.html#5635666">i</a></span>&nbsp;<span class="op" id="5635690">&lt;</span>&nbsp;<span class="ident" id="5635692"><a href="/encoding/xml/marshal.go.html#5635669">n</a></span><span class="op" id="5635693">;</span>&nbsp;<span class="ident" id="5635695"><a href="/encoding/xml/marshal.go.html#5635666">i</a></span><span class="op" id="5635696">++</span>&nbsp;<span class="op" id="5635699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635704">if</span>&nbsp;<span class="ident" id="5635707">err</span>&nbsp;<span class="op" id="5635711">:=</span>&nbsp;<span class="ident" id="5635714"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5635715">.</span><span class="ident" id="5635716">marshalValue</span><span class="op" id="5635728">(</span><span class="ident" id="5635729"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5635732">.</span><span class="ident" id="5635733">Index</span><span class="op" id="5635738">(</span><span class="ident" id="5635739"><a href="/encoding/xml/marshal.go.html#5635666">i</a></span><span class="op" id="5635740">)</span><span class="op" id="5635741">,</span>&nbsp;<span class="ident" id="5635743"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5635748">,</span>&nbsp;<span class="ident" id="5635750"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5635763">)</span><span class="op" id="5635764">;</span>&nbsp;<span class="ident" id="5635766"><a href="/encoding/xml/marshal.go.html#5635707">err</a></span>&nbsp;<span class="op" id="5635770">!=</span>&nbsp;<span class="ident" id="5635773">nil</span>&nbsp;<span class="op" id="5635777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635783">return</span>&nbsp;<span class="ident" id="5635790"><a href="/encoding/xml/marshal.go.html#5635707">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635797">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635805">return</span>&nbsp;<span class="ident" id="5635812">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5635821">tinfo</span><span class="op" id="5635826">,</span>&nbsp;<span class="ident" id="5635828">err</span>&nbsp;<span class="op" id="5635832">:=</span>&nbsp;<span class="ident" id="5635835"><a href="/encoding/xml/typeinfo.go.html#5670455">getTypeInfo</a></span><span class="op" id="5635846">(</span><span class="ident" id="5635847"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5635850">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635853">if</span>&nbsp;<span class="ident" id="5635856"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span>&nbsp;<span class="op" id="5635860">!=</span>&nbsp;<span class="ident" id="5635863">nil</span>&nbsp;<span class="op" id="5635867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5635871">return</span>&nbsp;<span class="ident" id="5635878"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5635883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635887">//&nbsp;Create&nbsp;start&nbsp;element.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635913">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635957">//&nbsp;0.&nbsp;startTemplate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5635978">//&nbsp;1.&nbsp;XMLName&nbsp;field&nbsp;in&nbsp;underlying&nbsp;struct;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5636021">//&nbsp;2.&nbsp;field&nbsp;name/tag&nbsp;in&nbsp;the&nbsp;struct&nbsp;field;&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5636068">//&nbsp;3.&nbsp;type&nbsp;name</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636085">var</span>&nbsp;<span class="ident" id="5636089">start</span>&nbsp;<span class="ident" id="5636095"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636110">if</span>&nbsp;<span class="ident" id="5636113"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span>&nbsp;<span class="op" id="5636127">!=</span>&nbsp;<span class="ident" id="5636130">nil</span>&nbsp;<span class="op" id="5636134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636138"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636143">.</span><span class="ident" id="5636144">Name</span>&nbsp;<span class="op" id="5636149">=</span>&nbsp;<span class="ident" id="5636151"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5636164">.</span><span class="ident" id="5636165">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636172"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636177">.</span><span class="ident" id="5636178">Attr</span>&nbsp;<span class="op" id="5636183">=</span>&nbsp;<span class="builtinfunc" id="5636185">append</span><span class="op" id="5636191">(</span><span class="ident" id="5636192"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636197">.</span><span class="ident" id="5636198">Attr</span><span class="op" id="5636202">,</span>&nbsp;<span class="ident" id="5636204"><a href="/encoding/xml/marshal.go.html#5634027">startTemplate</a></span><span class="op" id="5636217">.</span><span class="ident" id="5636218">Attr</span><span class="op" id="5636222">...</span><span class="op" id="5636225">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636228">}</span>&nbsp;<span class="keyword" id="5636230">else</span>&nbsp;<span class="keyword" id="5636235">if</span>&nbsp;<span class="ident" id="5636238"><a href="/encoding/xml/marshal.go.html#5635821">tinfo</a></span><span class="op" id="5636243">.</span><span class="ident" id="5636244">xmlname</span>&nbsp;<span class="op" id="5636252">!=</span>&nbsp;<span class="ident" id="5636255">nil</span>&nbsp;<span class="op" id="5636259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636263">xmlname</span>&nbsp;<span class="op" id="5636271">:=</span>&nbsp;<span class="ident" id="5636274"><a href="/encoding/xml/marshal.go.html#5635821">tinfo</a></span><span class="op" id="5636279">.</span><span class="ident" id="5636280">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636290">if</span>&nbsp;<span class="ident" id="5636293"><a href="/encoding/xml/marshal.go.html#5636263">xmlname</a></span><span class="op" id="5636300">.</span><span class="ident" id="5636301">name</span>&nbsp;<span class="op" id="5636306">!=</span>&nbsp;<span class="string" id="5636309">&#34;&#34;</span>&nbsp;<span class="op" id="5636312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636317"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636322">.</span><span class="ident" id="5636323">Name</span><span class="op" id="5636327">.</span><span class="ident" id="5636328">Space</span><span class="op" id="5636333">,</span>&nbsp;<span class="ident" id="5636335"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636340">.</span><span class="ident" id="5636341">Name</span><span class="op" id="5636345">.</span><span class="ident" id="5636346">Local</span>&nbsp;<span class="op" id="5636352">=</span>&nbsp;<span class="ident" id="5636354"><a href="/encoding/xml/marshal.go.html#5636263">xmlname</a></span><span class="op" id="5636361">.</span><span class="ident" id="5636362">xmlns</span><span class="op" id="5636367">,</span>&nbsp;<span class="ident" id="5636369"><a href="/encoding/xml/marshal.go.html#5636263">xmlname</a></span><span class="op" id="5636376">.</span><span class="ident" id="5636377">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636384">}</span>&nbsp;<span class="keyword" id="5636386">else</span>&nbsp;<span class="keyword" id="5636391">if</span>&nbsp;<span class="ident" id="5636394">v</span><span class="op" id="5636395">,</span>&nbsp;<span class="ident" id="5636397">ok</span>&nbsp;<span class="op" id="5636400">:=</span>&nbsp;<span class="ident" id="5636403"><a href="/encoding/xml/marshal.go.html#5636263">xmlname</a></span><span class="op" id="5636410">.</span><span class="ident" id="5636411">value</span><span class="op" id="5636416">(</span><span class="ident" id="5636417"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5636420">)</span><span class="op" id="5636421">.</span><span class="ident" id="5636422">Interface</span><span class="op" id="5636431">(</span><span class="op" id="5636432">)</span><span class="op" id="5636433">.</span><span class="op" id="5636434">(</span><span class="ident" id="5636435"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5636439">)</span><span class="op" id="5636440">;</span>&nbsp;<span class="ident" id="5636442"><a href="/encoding/xml/marshal.go.html#5636397">ok</a></span>&nbsp;<span class="op" id="5636445">&amp;&amp;</span>&nbsp;<span class="ident" id="5636448"><a href="/encoding/xml/marshal.go.html#5636394">v</a></span><span class="op" id="5636449">.</span><span class="ident" id="5636450">Local</span>&nbsp;<span class="op" id="5636456">!=</span>&nbsp;<span class="string" id="5636459">&#34;&#34;</span>&nbsp;<span class="op" id="5636462">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636467"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636472">.</span><span class="ident" id="5636473">Name</span>&nbsp;<span class="op" id="5636478">=</span>&nbsp;<span class="ident" id="5636480"><a href="/encoding/xml/marshal.go.html#5636394">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636490">if</span>&nbsp;<span class="ident" id="5636493"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636498">.</span><span class="ident" id="5636499">Name</span><span class="op" id="5636503">.</span><span class="ident" id="5636504">Local</span>&nbsp;<span class="op" id="5636510">==</span>&nbsp;<span class="string" id="5636513">&#34;&#34;</span>&nbsp;<span class="op" id="5636516">&amp;&amp;</span>&nbsp;<span class="ident" id="5636519"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span>&nbsp;<span class="op" id="5636525">!=</span>&nbsp;<span class="ident" id="5636528">nil</span>&nbsp;<span class="op" id="5636532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636536"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636541">.</span><span class="ident" id="5636542">Name</span><span class="op" id="5636546">.</span><span class="ident" id="5636547">Space</span><span class="op" id="5636552">,</span>&nbsp;<span class="ident" id="5636554"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636559">.</span><span class="ident" id="5636560">Name</span><span class="op" id="5636564">.</span><span class="ident" id="5636565">Local</span>&nbsp;<span class="op" id="5636571">=</span>&nbsp;<span class="ident" id="5636573"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5636578">.</span><span class="ident" id="5636579">xmlns</span><span class="op" id="5636584">,</span>&nbsp;<span class="ident" id="5636586"><a href="/encoding/xml/marshal.go.html#5634009">finfo</a></span><span class="op" id="5636591">.</span><span class="ident" id="5636592">name</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636601">if</span>&nbsp;<span class="ident" id="5636604"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636609">.</span><span class="ident" id="5636610">Name</span><span class="op" id="5636614">.</span><span class="ident" id="5636615">Local</span>&nbsp;<span class="op" id="5636621">==</span>&nbsp;<span class="string" id="5636624">&#34;&#34;</span>&nbsp;<span class="op" id="5636627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636631">name</span>&nbsp;<span class="op" id="5636636">:=</span>&nbsp;<span class="ident" id="5636639"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5636642">.</span><span class="ident" id="5636643">Name</span><span class="op" id="5636647">(</span><span class="op" id="5636648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636652">if</span>&nbsp;<span class="ident" id="5636655"><a href="/encoding/xml/marshal.go.html#5636631">name</a></span>&nbsp;<span class="op" id="5636660">==</span>&nbsp;<span class="string" id="5636663">&#34;&#34;</span>&nbsp;<span class="op" id="5636666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636671">return</span>&nbsp;<span class="op" id="5636678">&amp;</span><span class="ident" id="5636679"><a href="/encoding/xml/marshal.go.html#5648509">UnsupportedTypeError</a></span><span class="op" id="5636699">{</span><span class="ident" id="5636700"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5636703">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636711"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5636716">.</span><span class="ident" id="5636717">Name</span><span class="op" id="5636721">.</span><span class="ident" id="5636722">Local</span>&nbsp;<span class="op" id="5636728">=</span>&nbsp;<span class="ident" id="5636730"><a href="/encoding/xml/marshal.go.html#5636631">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5636740">//&nbsp;Attributes</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636755">for</span>&nbsp;<span class="ident" id="5636759">i</span>&nbsp;<span class="op" id="5636761">:=</span>&nbsp;<span class="keyword" id="5636764">range</span>&nbsp;<span class="ident" id="5636770"><a href="/encoding/xml/marshal.go.html#5635821">tinfo</a></span><span class="op" id="5636775">.</span><span class="ident" id="5636776">fields</span>&nbsp;<span class="op" id="5636783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636787">finfo</span>&nbsp;<span class="op" id="5636793">:=</span>&nbsp;<span class="op" id="5636796">&amp;</span><span class="ident" id="5636797"><a href="/encoding/xml/marshal.go.html#5635821">tinfo</a></span><span class="op" id="5636802">.</span><span class="ident" id="5636803">fields</span><span class="op" id="5636809">[</span><span class="ident" id="5636810"><a href="/encoding/xml/marshal.go.html#5636759">i</a></span><span class="op" id="5636811">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636815">if</span>&nbsp;<span class="ident" id="5636818"><a href="/encoding/xml/marshal.go.html#5636787">finfo</a></span><span class="op" id="5636823">.</span><span class="ident" id="5636824">flags</span><span class="op" id="5636829">&amp;</span><span class="ident" id="5636830"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span>&nbsp;<span class="op" id="5636836">==</span>&nbsp;<span class="num" id="5636839">0</span>&nbsp;<span class="op" id="5636841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636846">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5636857">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636861">fv</span>&nbsp;<span class="op" id="5636864">:=</span>&nbsp;<span class="ident" id="5636867"><a href="/encoding/xml/marshal.go.html#5636787">finfo</a></span><span class="op" id="5636872">.</span><span class="ident" id="5636873">value</span><span class="op" id="5636878">(</span><span class="ident" id="5636879"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5636882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5636886">name</span>&nbsp;<span class="op" id="5636891">:=</span>&nbsp;<span class="ident" id="5636894"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5636898">{</span><span class="ident" id="5636899">Space</span><span class="op" id="5636904">:</span>&nbsp;<span class="ident" id="5636906"><a href="/encoding/xml/marshal.go.html#5636787">finfo</a></span><span class="op" id="5636911">.</span><span class="ident" id="5636912">xmlns</span><span class="op" id="5636917">,</span>&nbsp;<span class="ident" id="5636919">Local</span><span class="op" id="5636924">:</span>&nbsp;<span class="ident" id="5636926"><a href="/encoding/xml/marshal.go.html#5636787">finfo</a></span><span class="op" id="5636931">.</span><span class="ident" id="5636932">name</span><span class="op" id="5636936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636941">if</span>&nbsp;<span class="ident" id="5636944"><a href="/encoding/xml/marshal.go.html#5636787">finfo</a></span><span class="op" id="5636949">.</span><span class="ident" id="5636950">flags</span><span class="op" id="5636955">&amp;</span><span class="ident" id="5636956"><a href="/encoding/xml/typeinfo.go.html#5670141">fOmitEmpty</a></span>&nbsp;<span class="op" id="5636967">!=</span>&nbsp;<span class="num" id="5636970">0</span>&nbsp;<span class="op" id="5636972">&amp;&amp;</span>&nbsp;<span class="ident" id="5636975"><a href="/encoding/xml/marshal.go.html#5648669">isEmptyValue</a></span><span class="op" id="5636987">(</span><span class="ident" id="5636988"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5636990">)</span>&nbsp;<span class="op" id="5636992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5636997">continue</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637013">if</span>&nbsp;<span class="ident" id="5637016"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637018">.</span><span class="ident" id="5637019">Kind</span><span class="op" id="5637023">(</span><span class="op" id="5637024">)</span>&nbsp;<span class="op" id="5637026">==</span>&nbsp;<span class="ident" id="5637029"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5637036">.</span><span class="ident" id="5637037">Interface</span>&nbsp;<span class="op" id="5637047">&amp;&amp;</span>&nbsp;<span class="ident" id="5637050"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637052">.</span><span class="ident" id="5637053">IsNil</span><span class="op" id="5637058">(</span><span class="op" id="5637059">)</span>&nbsp;<span class="op" id="5637061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637066">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637077">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637082">if</span>&nbsp;<span class="ident" id="5637085"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637087">.</span><span class="ident" id="5637088">CanInterface</span><span class="op" id="5637100">(</span><span class="op" id="5637101">)</span>&nbsp;<span class="op" id="5637103">&amp;&amp;</span>&nbsp;<span class="ident" id="5637106"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637108">.</span><span class="ident" id="5637109">Type</span><span class="op" id="5637113">(</span><span class="op" id="5637114">)</span><span class="op" id="5637115">.</span><span class="ident" id="5637116">Implements</span><span class="op" id="5637126">(</span><span class="ident" id="5637127"><a href="/encoding/xml/marshal.go.html#5633677">marshalerAttrType</a></span><span class="op" id="5637144">)</span>&nbsp;<span class="op" id="5637146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637151">attr</span><span class="op" id="5637155">,</span>&nbsp;<span class="ident" id="5637157">err</span>&nbsp;<span class="op" id="5637161">:=</span>&nbsp;<span class="ident" id="5637164"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637166">.</span><span class="ident" id="5637167">Interface</span><span class="op" id="5637176">(</span><span class="op" id="5637177">)</span><span class="op" id="5637178">.</span><span class="op" id="5637179">(</span><span class="ident" id="5637180"><a href="/encoding/xml/marshal.go.html#5626948">MarshalerAttr</a></span><span class="op" id="5637193">)</span><span class="op" id="5637194">.</span><span class="ident" id="5637195">MarshalXMLAttr</span><span class="op" id="5637209">(</span><span class="ident" id="5637210"><a href="/encoding/xml/marshal.go.html#5636886">name</a></span><span class="op" id="5637214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637219">if</span>&nbsp;<span class="ident" id="5637222"><a href="/encoding/xml/marshal.go.html#5637157">err</a></span>&nbsp;<span class="op" id="5637226">!=</span>&nbsp;<span class="ident" id="5637229">nil</span>&nbsp;<span class="op" id="5637233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637239">return</span>&nbsp;<span class="ident" id="5637246"><a href="/encoding/xml/marshal.go.html#5637157">err</a></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637258">if</span>&nbsp;<span class="ident" id="5637261"><a href="/encoding/xml/marshal.go.html#5637151">attr</a></span><span class="op" id="5637265">.</span><span class="ident" id="5637266">Name</span><span class="op" id="5637270">.</span><span class="ident" id="5637271">Local</span>&nbsp;<span class="op" id="5637277">!=</span>&nbsp;<span class="string" id="5637280">&#34;&#34;</span>&nbsp;<span class="op" id="5637283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637289"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637294">.</span><span class="ident" id="5637295">Attr</span>&nbsp;<span class="op" id="5637300">=</span>&nbsp;<span class="builtinfunc" id="5637302">append</span><span class="op" id="5637308">(</span><span class="ident" id="5637309"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637314">.</span><span class="ident" id="5637315">Attr</span><span class="op" id="5637319">,</span>&nbsp;<span class="ident" id="5637321"><a href="/encoding/xml/marshal.go.html#5637151">attr</a></span><span class="op" id="5637325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637335">continue</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637351">if</span>&nbsp;<span class="ident" id="5637354"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637356">.</span><span class="ident" id="5637357">CanAddr</span><span class="op" id="5637364">(</span><span class="op" id="5637365">)</span>&nbsp;<span class="op" id="5637367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637372">pv</span>&nbsp;<span class="op" id="5637375">:=</span>&nbsp;<span class="ident" id="5637378"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637380">.</span><span class="ident" id="5637381">Addr</span><span class="op" id="5637385">(</span><span class="op" id="5637386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637391">if</span>&nbsp;<span class="ident" id="5637394"><a href="/encoding/xml/marshal.go.html#5637372">pv</a></span><span class="op" id="5637396">.</span><span class="ident" id="5637397">CanInterface</span><span class="op" id="5637409">(</span><span class="op" id="5637410">)</span>&nbsp;<span class="op" id="5637412">&amp;&amp;</span>&nbsp;<span class="ident" id="5637415"><a href="/encoding/xml/marshal.go.html#5637372">pv</a></span><span class="op" id="5637417">.</span><span class="ident" id="5637418">Type</span><span class="op" id="5637422">(</span><span class="op" id="5637423">)</span><span class="op" id="5637424">.</span><span class="ident" id="5637425">Implements</span><span class="op" id="5637435">(</span><span class="ident" id="5637436"><a href="/encoding/xml/marshal.go.html#5633677">marshalerAttrType</a></span><span class="op" id="5637453">)</span>&nbsp;<span class="op" id="5637455">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637461">attr</span><span class="op" id="5637465">,</span>&nbsp;<span class="ident" id="5637467">err</span>&nbsp;<span class="op" id="5637471">:=</span>&nbsp;<span class="ident" id="5637474"><a href="/encoding/xml/marshal.go.html#5637372">pv</a></span><span class="op" id="5637476">.</span><span class="ident" id="5637477">Interface</span><span class="op" id="5637486">(</span><span class="op" id="5637487">)</span><span class="op" id="5637488">.</span><span class="op" id="5637489">(</span><span class="ident" id="5637490"><a href="/encoding/xml/marshal.go.html#5626948">MarshalerAttr</a></span><span class="op" id="5637503">)</span><span class="op" id="5637504">.</span><span class="ident" id="5637505">MarshalXMLAttr</span><span class="op" id="5637519">(</span><span class="ident" id="5637520"><a href="/encoding/xml/marshal.go.html#5636886">name</a></span><span class="op" id="5637524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637530">if</span>&nbsp;<span class="ident" id="5637533"><a href="/encoding/xml/marshal.go.html#5637467">err</a></span>&nbsp;<span class="op" id="5637537">!=</span>&nbsp;<span class="ident" id="5637540">nil</span>&nbsp;<span class="op" id="5637544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637551">return</span>&nbsp;<span class="ident" id="5637558"><a href="/encoding/xml/marshal.go.html#5637467">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637572">if</span>&nbsp;<span class="ident" id="5637575"><a href="/encoding/xml/marshal.go.html#5637461">attr</a></span><span class="op" id="5637579">.</span><span class="ident" id="5637580">Name</span><span class="op" id="5637584">.</span><span class="ident" id="5637585">Local</span>&nbsp;<span class="op" id="5637591">!=</span>&nbsp;<span class="string" id="5637594">&#34;&#34;</span>&nbsp;<span class="op" id="5637597">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637604"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637609">.</span><span class="ident" id="5637610">Attr</span>&nbsp;<span class="op" id="5637615">=</span>&nbsp;<span class="builtinfunc" id="5637617">append</span><span class="op" id="5637623">(</span><span class="ident" id="5637624"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637629">.</span><span class="ident" id="5637630">Attr</span><span class="op" id="5637634">,</span>&nbsp;<span class="ident" id="5637636"><a href="/encoding/xml/marshal.go.html#5637461">attr</a></span><span class="op" id="5637640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637668">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637673">if</span>&nbsp;<span class="ident" id="5637676"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637678">.</span><span class="ident" id="5637679">CanInterface</span><span class="op" id="5637691">(</span><span class="op" id="5637692">)</span>&nbsp;<span class="op" id="5637694">&amp;&amp;</span>&nbsp;<span class="ident" id="5637697"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637699">.</span><span class="ident" id="5637700">Type</span><span class="op" id="5637704">(</span><span class="op" id="5637705">)</span><span class="op" id="5637706">.</span><span class="ident" id="5637707">Implements</span><span class="op" id="5637717">(</span><span class="ident" id="5637718"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5637735">)</span>&nbsp;<span class="op" id="5637737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637742">text</span><span class="op" id="5637746">,</span>&nbsp;<span class="ident" id="5637748">err</span>&nbsp;<span class="op" id="5637752">:=</span>&nbsp;<span class="ident" id="5637755"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637757">.</span><span class="ident" id="5637758">Interface</span><span class="op" id="5637767">(</span><span class="op" id="5637768">)</span><span class="op" id="5637769">.</span><span class="op" id="5637770">(</span><span class="ident" id="5637771"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5637779">.</span><span class="ident" id="5637780">TextMarshaler</span><span class="op" id="5637793">)</span><span class="op" id="5637794">.</span><span class="ident" id="5637795">MarshalText</span><span class="op" id="5637806">(</span><span class="op" id="5637807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637812">if</span>&nbsp;<span class="ident" id="5637815"><a href="/encoding/xml/marshal.go.html#5637748">err</a></span>&nbsp;<span class="op" id="5637819">!=</span>&nbsp;<span class="ident" id="5637822">nil</span>&nbsp;<span class="op" id="5637826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637832">return</span>&nbsp;<span class="ident" id="5637839"><a href="/encoding/xml/marshal.go.html#5637748">err</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637851"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637856">.</span><span class="ident" id="5637857">Attr</span>&nbsp;<span class="op" id="5637862">=</span>&nbsp;<span class="builtinfunc" id="5637864">append</span><span class="op" id="5637870">(</span><span class="ident" id="5637871"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5637876">.</span><span class="ident" id="5637877">Attr</span><span class="op" id="5637881">,</span>&nbsp;<span class="ident" id="5637883"><a href="/encoding/xml/xml.go.html#5680102">Attr</a></span><span class="op" id="5637887">{</span><span class="ident" id="5637888"><a href="/encoding/xml/marshal.go.html#5636886">name</a></span><span class="op" id="5637892">,</span>&nbsp;<span class="builtintype" id="5637894">string</span><span class="op" id="5637900">(</span><span class="ident" id="5637901"><a href="/encoding/xml/marshal.go.html#5637742">text</a></span><span class="op" id="5637905">)</span><span class="op" id="5637906">}</span><span class="op" id="5637907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637912">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5637923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637928">if</span>&nbsp;<span class="ident" id="5637931"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637933">.</span><span class="ident" id="5637934">CanAddr</span><span class="op" id="5637941">(</span><span class="op" id="5637942">)</span>&nbsp;<span class="op" id="5637944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5637949">pv</span>&nbsp;<span class="op" id="5637952">:=</span>&nbsp;<span class="ident" id="5637955"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5637957">.</span><span class="ident" id="5637958">Addr</span><span class="op" id="5637962">(</span><span class="op" id="5637963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5637968">if</span>&nbsp;<span class="ident" id="5637971"><a href="/encoding/xml/marshal.go.html#5637949">pv</a></span><span class="op" id="5637973">.</span><span class="ident" id="5637974">CanInterface</span><span class="op" id="5637986">(</span><span class="op" id="5637987">)</span>&nbsp;<span class="op" id="5637989">&amp;&amp;</span>&nbsp;<span class="ident" id="5637992"><a href="/encoding/xml/marshal.go.html#5637949">pv</a></span><span class="op" id="5637994">.</span><span class="ident" id="5637995">Type</span><span class="op" id="5637999">(</span><span class="op" id="5638000">)</span><span class="op" id="5638001">.</span><span class="ident" id="5638002">Implements</span><span class="op" id="5638012">(</span><span class="ident" id="5638013"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5638030">)</span>&nbsp;<span class="op" id="5638032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638038">text</span><span class="op" id="5638042">,</span>&nbsp;<span class="ident" id="5638044">err</span>&nbsp;<span class="op" id="5638048">:=</span>&nbsp;<span class="ident" id="5638051"><a href="/encoding/xml/marshal.go.html#5637949">pv</a></span><span class="op" id="5638053">.</span><span class="ident" id="5638054">Interface</span><span class="op" id="5638063">(</span><span class="op" id="5638064">)</span><span class="op" id="5638065">.</span><span class="op" id="5638066">(</span><span class="ident" id="5638067"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5638075">.</span><span class="ident" id="5638076">TextMarshaler</span><span class="op" id="5638089">)</span><span class="op" id="5638090">.</span><span class="ident" id="5638091">MarshalText</span><span class="op" id="5638102">(</span><span class="op" id="5638103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638109">if</span>&nbsp;<span class="ident" id="5638112"><a href="/encoding/xml/marshal.go.html#5638044">err</a></span>&nbsp;<span class="op" id="5638116">!=</span>&nbsp;<span class="ident" id="5638119">nil</span>&nbsp;<span class="op" id="5638123">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638130">return</span>&nbsp;<span class="ident" id="5638137"><a href="/encoding/xml/marshal.go.html#5638044">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638151"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638156">.</span><span class="ident" id="5638157">Attr</span>&nbsp;<span class="op" id="5638162">=</span>&nbsp;<span class="builtinfunc" id="5638164">append</span><span class="op" id="5638170">(</span><span class="ident" id="5638171"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638176">.</span><span class="ident" id="5638177">Attr</span><span class="op" id="5638181">,</span>&nbsp;<span class="ident" id="5638183"><a href="/encoding/xml/xml.go.html#5680102">Attr</a></span><span class="op" id="5638187">{</span><span class="ident" id="5638188"><a href="/encoding/xml/marshal.go.html#5636886">name</a></span><span class="op" id="5638192">,</span>&nbsp;<span class="builtintype" id="5638194">string</span><span class="op" id="5638200">(</span><span class="ident" id="5638201"><a href="/encoding/xml/marshal.go.html#5638038">text</a></span><span class="op" id="5638205">)</span><span class="op" id="5638206">}</span><span class="op" id="5638207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638213">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638225">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5638234">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638290">switch</span>&nbsp;<span class="ident" id="5638297"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5638299">.</span><span class="ident" id="5638300">Kind</span><span class="op" id="5638304">(</span><span class="op" id="5638305">)</span>&nbsp;<span class="op" id="5638307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638311">case</span>&nbsp;<span class="ident" id="5638316"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5638323">.</span><span class="ident" id="5638324">Ptr</span><span class="op" id="5638327">,</span>&nbsp;<span class="ident" id="5638329"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5638336">.</span><span class="ident" id="5638337">Interface</span><span class="op" id="5638346">:</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638351">if</span>&nbsp;<span class="ident" id="5638354"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5638356">.</span><span class="ident" id="5638357">IsNil</span><span class="op" id="5638362">(</span><span class="op" id="5638363">)</span>&nbsp;<span class="op" id="5638365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638371">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638388"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span>&nbsp;<span class="op" id="5638391">=</span>&nbsp;<span class="ident" id="5638393"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5638395">.</span><span class="ident" id="5638396">Elem</span><span class="op" id="5638400">(</span><span class="op" id="5638401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638405">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638410">s</span><span class="op" id="5638411">,</span>&nbsp;<span class="ident" id="5638413">b</span><span class="op" id="5638414">,</span>&nbsp;<span class="ident" id="5638416">err</span>&nbsp;<span class="op" id="5638420">:=</span>&nbsp;<span class="ident" id="5638423"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638424">.</span><span class="ident" id="5638425">marshalSimple</span><span class="op" id="5638438">(</span><span class="ident" id="5638439"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5638441">.</span><span class="ident" id="5638442">Type</span><span class="op" id="5638446">(</span><span class="op" id="5638447">)</span><span class="op" id="5638448">,</span>&nbsp;<span class="ident" id="5638450"><a href="/encoding/xml/marshal.go.html#5636861">fv</a></span><span class="op" id="5638452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638456">if</span>&nbsp;<span class="ident" id="5638459"><a href="/encoding/xml/marshal.go.html#5638416">err</a></span>&nbsp;<span class="op" id="5638463">!=</span>&nbsp;<span class="ident" id="5638466">nil</span>&nbsp;<span class="op" id="5638470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638475">return</span>&nbsp;<span class="ident" id="5638482"><a href="/encoding/xml/marshal.go.html#5638416">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638488">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638492">if</span>&nbsp;<span class="ident" id="5638495"><a href="/encoding/xml/marshal.go.html#5638413">b</a></span>&nbsp;<span class="op" id="5638497">!=</span>&nbsp;<span class="ident" id="5638500">nil</span>&nbsp;<span class="op" id="5638504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638509"><a href="/encoding/xml/marshal.go.html#5638410">s</a></span>&nbsp;<span class="op" id="5638511">=</span>&nbsp;<span class="builtintype" id="5638513">string</span><span class="op" id="5638519">(</span><span class="ident" id="5638520"><a href="/encoding/xml/marshal.go.html#5638413">b</a></span><span class="op" id="5638521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638529"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638534">.</span><span class="ident" id="5638535">Attr</span>&nbsp;<span class="op" id="5638540">=</span>&nbsp;<span class="builtinfunc" id="5638542">append</span><span class="op" id="5638548">(</span><span class="ident" id="5638549"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638554">.</span><span class="ident" id="5638555">Attr</span><span class="op" id="5638559">,</span>&nbsp;<span class="ident" id="5638561"><a href="/encoding/xml/xml.go.html#5680102">Attr</a></span><span class="op" id="5638565">{</span><span class="ident" id="5638566"><a href="/encoding/xml/marshal.go.html#5636886">name</a></span><span class="op" id="5638570">,</span>&nbsp;<span class="ident" id="5638572"><a href="/encoding/xml/marshal.go.html#5638410">s</a></span><span class="op" id="5638573">}</span><span class="op" id="5638574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638577">}</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638581">if</span>&nbsp;<span class="ident" id="5638584">err</span>&nbsp;<span class="op" id="5638588">:=</span>&nbsp;<span class="ident" id="5638591"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638592">.</span><span class="ident" id="5638593">writeStart</span><span class="op" id="5638603">(</span><span class="op" id="5638604">&amp;</span><span class="ident" id="5638605"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638610">)</span><span class="op" id="5638611">;</span>&nbsp;<span class="ident" id="5638613"><a href="/encoding/xml/marshal.go.html#5638584">err</a></span>&nbsp;<span class="op" id="5638617">!=</span>&nbsp;<span class="ident" id="5638620">nil</span>&nbsp;<span class="op" id="5638624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638628">return</span>&nbsp;<span class="ident" id="5638635"><a href="/encoding/xml/marshal.go.html#5638584">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638640">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638644">if</span>&nbsp;<span class="ident" id="5638647"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5638650">.</span><span class="ident" id="5638651">Kind</span><span class="op" id="5638655">(</span><span class="op" id="5638656">)</span>&nbsp;<span class="op" id="5638658">==</span>&nbsp;<span class="ident" id="5638661"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5638668">.</span><span class="ident" id="5638669">Struct</span>&nbsp;<span class="op" id="5638676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638680"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span>&nbsp;<span class="op" id="5638684">=</span>&nbsp;<span class="ident" id="5638686"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638687">.</span><span class="ident" id="5638688">marshalStruct</span><span class="op" id="5638701">(</span><span class="ident" id="5638702"><a href="/encoding/xml/marshal.go.html#5635821">tinfo</a></span><span class="op" id="5638707">,</span>&nbsp;<span class="ident" id="5638709"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5638712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638715">}</span>&nbsp;<span class="keyword" id="5638717">else</span>&nbsp;<span class="op" id="5638722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638726">s</span><span class="op" id="5638727">,</span>&nbsp;<span class="ident" id="5638729">b</span><span class="op" id="5638730">,</span>&nbsp;<span class="ident" id="5638732">err1</span>&nbsp;<span class="op" id="5638737">:=</span>&nbsp;<span class="ident" id="5638740"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638741">.</span><span class="ident" id="5638742">marshalSimple</span><span class="op" id="5638755">(</span><span class="ident" id="5638756"><a href="/encoding/xml/marshal.go.html#5634619">typ</a></span><span class="op" id="5638759">,</span>&nbsp;<span class="ident" id="5638761"><a href="/encoding/xml/marshal.go.html#5633990">val</a></span><span class="op" id="5638764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638768">if</span>&nbsp;<span class="ident" id="5638771"><a href="/encoding/xml/marshal.go.html#5638732">err1</a></span>&nbsp;<span class="op" id="5638776">!=</span>&nbsp;<span class="ident" id="5638779">nil</span>&nbsp;<span class="op" id="5638783">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638788"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span>&nbsp;<span class="op" id="5638792">=</span>&nbsp;<span class="ident" id="5638794"><a href="/encoding/xml/marshal.go.html#5638732">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638801">}</span>&nbsp;<span class="keyword" id="5638803">else</span>&nbsp;<span class="keyword" id="5638808">if</span>&nbsp;<span class="ident" id="5638811"><a href="/encoding/xml/marshal.go.html#5638729">b</a></span>&nbsp;<span class="op" id="5638813">!=</span>&nbsp;<span class="ident" id="5638816">nil</span>&nbsp;<span class="op" id="5638820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638825"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5638835">(</span><span class="ident" id="5638836"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638837">,</span>&nbsp;<span class="ident" id="5638839"><a href="/encoding/xml/marshal.go.html#5638729">b</a></span><span class="op" id="5638840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638844">}</span>&nbsp;<span class="keyword" id="5638846">else</span>&nbsp;<span class="op" id="5638851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5638856"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638857">.</span><span class="ident" id="5638858">EscapeString</span><span class="op" id="5638870">(</span><span class="ident" id="5638871"><a href="/encoding/xml/marshal.go.html#5638726">s</a></span><span class="op" id="5638872">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638882">if</span>&nbsp;<span class="ident" id="5638885"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span>&nbsp;<span class="op" id="5638889">!=</span>&nbsp;<span class="ident" id="5638892">nil</span>&nbsp;<span class="op" id="5638896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638900">return</span>&nbsp;<span class="ident" id="5638907"><a href="/encoding/xml/marshal.go.html#5635828">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638912">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638916">if</span>&nbsp;<span class="ident" id="5638919">err</span>&nbsp;<span class="op" id="5638923">:=</span>&nbsp;<span class="ident" id="5638926"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638927">.</span><span class="ident" id="5638928">writeEnd</span><span class="op" id="5638936">(</span><span class="ident" id="5638937"><a href="/encoding/xml/marshal.go.html#5636089">start</a></span><span class="op" id="5638942">.</span><span class="ident" id="5638943">Name</span><span class="op" id="5638947">)</span><span class="op" id="5638948">;</span>&nbsp;<span class="ident" id="5638950"><a href="/encoding/xml/marshal.go.html#5638919">err</a></span>&nbsp;<span class="op" id="5638954">!=</span>&nbsp;<span class="ident" id="5638957">nil</span>&nbsp;<span class="op" id="5638961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638965">return</span>&nbsp;<span class="ident" id="5638972"><a href="/encoding/xml/marshal.go.html#5638919">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5638977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5638981">return</span>&nbsp;<span class="ident" id="5638988"><a href="/encoding/xml/marshal.go.html#5633965">p</a></span><span class="op" id="5638989">.</span><span class="ident" id="5638990">cachedWriteError</span><span class="op" id="5639006">(</span><span class="op" id="5639007">)</span><br>
<span class="lineno"></span><span class="op" id="5639009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5639012">//&nbsp;defaultStart&nbsp;returns&nbsp;the&nbsp;default&nbsp;start&nbsp;element&nbsp;to&nbsp;use,</span><br>
<span class="lineno"></span><span class="comment" id="5639070">//&nbsp;given&nbsp;the&nbsp;reflect&nbsp;type,&nbsp;field&nbsp;info,&nbsp;and&nbsp;start&nbsp;template.</span><br>
<span class="lineno">555</span><span class="keyword" id="5639129">func</span>&nbsp;<span class="ident" id="5639134">defaultStart</span><span class="op" id="5639146">(</span><span class="ident" id="5639147">typ</span>&nbsp;<span class="ident" id="5639151"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5639158">.</span><span class="ident" id="5639159">Type</span><span class="op" id="5639163">,</span>&nbsp;<span class="ident" id="5639165">finfo</span>&nbsp;<span class="op" id="5639171">*</span><span class="ident" id="5639172"><a href="/encoding/xml/typeinfo.go.html#5669925">fieldInfo</a></span><span class="op" id="5639181">,</span>&nbsp;<span class="ident" id="5639183">startTemplate</span>&nbsp;<span class="op" id="5639197">*</span><span class="ident" id="5639198"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5639210">)</span>&nbsp;<span class="ident" id="5639212"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span>&nbsp;<span class="op" id="5639225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5639228">var</span>&nbsp;<span class="ident" id="5639232">start</span>&nbsp;<span class="ident" id="5639238"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5639252">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is&nbsp;as&nbsp;above,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5639305">//&nbsp;except&nbsp;that&nbsp;we&nbsp;do&nbsp;not&nbsp;look&nbsp;inside&nbsp;structs&nbsp;for&nbsp;the&nbsp;first&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5639372">if</span>&nbsp;<span class="ident" id="5639375"><a href="/encoding/xml/marshal.go.html#5639183">startTemplate</a></span>&nbsp;<span class="op" id="5639389">!=</span>&nbsp;<span class="ident" id="5639392">nil</span>&nbsp;<span class="op" id="5639396">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639400"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639405">.</span><span class="ident" id="5639406">Name</span>&nbsp;<span class="op" id="5639411">=</span>&nbsp;<span class="ident" id="5639413"><a href="/encoding/xml/marshal.go.html#5639183">startTemplate</a></span><span class="op" id="5639426">.</span><span class="ident" id="5639427">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639434"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639439">.</span><span class="ident" id="5639440">Attr</span>&nbsp;<span class="op" id="5639445">=</span>&nbsp;<span class="builtinfunc" id="5639447">append</span><span class="op" id="5639453">(</span><span class="ident" id="5639454"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639459">.</span><span class="ident" id="5639460">Attr</span><span class="op" id="5639464">,</span>&nbsp;<span class="ident" id="5639466"><a href="/encoding/xml/marshal.go.html#5639183">startTemplate</a></span><span class="op" id="5639479">.</span><span class="ident" id="5639480">Attr</span><span class="op" id="5639484">...</span><span class="op" id="5639487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5639490">}</span>&nbsp;<span class="keyword" id="5639492">else</span>&nbsp;<span class="keyword" id="5639497">if</span>&nbsp;<span class="ident" id="5639500"><a href="/encoding/xml/marshal.go.html#5639165">finfo</a></span>&nbsp;<span class="op" id="5639506">!=</span>&nbsp;<span class="ident" id="5639509">nil</span>&nbsp;<span class="op" id="5639513">&amp;&amp;</span>&nbsp;<span class="ident" id="5639516"><a href="/encoding/xml/marshal.go.html#5639165">finfo</a></span><span class="op" id="5639521">.</span><span class="ident" id="5639522">name</span>&nbsp;<span class="op" id="5639527">!=</span>&nbsp;<span class="string" id="5639530">&#34;&#34;</span>&nbsp;<span class="op" id="5639533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639537"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639542">.</span><span class="ident" id="5639543">Name</span><span class="op" id="5639547">.</span><span class="ident" id="5639548">Local</span>&nbsp;<span class="op" id="5639554">=</span>&nbsp;<span class="ident" id="5639556"><a href="/encoding/xml/marshal.go.html#5639165">finfo</a></span><span class="op" id="5639561">.</span><span class="ident" id="5639562">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639569"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639574">.</span><span class="ident" id="5639575">Name</span><span class="op" id="5639579">.</span><span class="ident" id="5639580">Space</span>&nbsp;<span class="op" id="5639586">=</span>&nbsp;<span class="ident" id="5639588"><a href="/encoding/xml/marshal.go.html#5639165">finfo</a></span><span class="op" id="5639593">.</span><span class="ident" id="5639594">xmlns</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5639601">}</span>&nbsp;<span class="keyword" id="5639603">else</span>&nbsp;<span class="keyword" id="5639608">if</span>&nbsp;<span class="ident" id="5639611"><a href="/encoding/xml/marshal.go.html#5639147">typ</a></span><span class="op" id="5639614">.</span><span class="ident" id="5639615">Name</span><span class="op" id="5639619">(</span><span class="op" id="5639620">)</span>&nbsp;<span class="op" id="5639622">!=</span>&nbsp;<span class="string" id="5639625">&#34;&#34;</span>&nbsp;<span class="op" id="5639628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639632"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639637">.</span><span class="ident" id="5639638">Name</span><span class="op" id="5639642">.</span><span class="ident" id="5639643">Local</span>&nbsp;<span class="op" id="5639649">=</span>&nbsp;<span class="ident" id="5639651"><a href="/encoding/xml/marshal.go.html#5639147">typ</a></span><span class="op" id="5639654">.</span><span class="ident" id="5639655">Name</span><span class="op" id="5639659">(</span><span class="op" id="5639660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5639663">}</span>&nbsp;<span class="keyword" id="5639665">else</span>&nbsp;<span class="op" id="5639670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5639674">//&nbsp;Must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;named&nbsp;type,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5639714">//&nbsp;since&nbsp;it&nbsp;has&nbsp;the&nbsp;Marshaler&nbsp;methods.</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5639755"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><span class="op" id="5639760">.</span><span class="ident" id="5639761">Name</span><span class="op" id="5639765">.</span><span class="ident" id="5639766">Local</span>&nbsp;<span class="op" id="5639772">=</span>&nbsp;<span class="ident" id="5639774"><a href="/encoding/xml/marshal.go.html#5639147">typ</a></span><span class="op" id="5639777">.</span><span class="ident" id="5639778">Elem</span><span class="op" id="5639782">(</span><span class="op" id="5639783">)</span><span class="op" id="5639784">.</span><span class="ident" id="5639785">Name</span><span class="op" id="5639789">(</span><span class="op" id="5639790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5639793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5639796">return</span>&nbsp;<span class="ident" id="5639803"><a href="/encoding/xml/marshal.go.html#5639232">start</a></span><br>
<span class="lineno"></span><span class="op" id="5639809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="5639812">//&nbsp;marshalInterface&nbsp;marshals&nbsp;a&nbsp;Marshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5639870">func</span>&nbsp;<span class="op" id="5639875">(</span><span class="ident" id="5639876">p</span>&nbsp;<span class="op" id="5639878">*</span><span class="ident" id="5639879"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5639886">)</span>&nbsp;<span class="ident" id="5639888">marshalInterface</span><span class="op" id="5639904">(</span><span class="ident" id="5639905">val</span>&nbsp;<span class="ident" id="5639909"><a href="/encoding/xml/marshal.go.html#5626323">Marshaler</a></span><span class="op" id="5639918">,</span>&nbsp;<span class="ident" id="5639920">start</span>&nbsp;<span class="ident" id="5639926"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5639938">)</span>&nbsp;<span class="builtintype" id="5639940">error</span>&nbsp;<span class="op" id="5639946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5639949">//&nbsp;Push&nbsp;a&nbsp;marker&nbsp;onto&nbsp;the&nbsp;tag&nbsp;stack&nbsp;so&nbsp;that&nbsp;MarshalXML</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5640005">//&nbsp;cannot&nbsp;close&nbsp;the&nbsp;XML&nbsp;tags&nbsp;that&nbsp;it&nbsp;did&nbsp;not&nbsp;open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640057"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640058">.</span><span class="ident" id="5640059">tags</span>&nbsp;<span class="op" id="5640064">=</span>&nbsp;<span class="builtinfunc" id="5640066">append</span><span class="op" id="5640072">(</span><span class="ident" id="5640073"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640074">.</span><span class="ident" id="5640075">tags</span><span class="op" id="5640079">,</span>&nbsp;<span class="ident" id="5640081"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5640085">{</span><span class="op" id="5640086">}</span><span class="op" id="5640087">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640090">n</span>&nbsp;<span class="op" id="5640092">:=</span>&nbsp;<span class="builtinfunc" id="5640095">len</span><span class="op" id="5640098">(</span><span class="ident" id="5640099"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640100">.</span><span class="ident" id="5640101">tags</span><span class="op" id="5640105">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640109">err</span>&nbsp;<span class="op" id="5640113">:=</span>&nbsp;<span class="ident" id="5640116"><a href="/encoding/xml/marshal.go.html#5639905">val</a></span><span class="op" id="5640119">.</span><span class="ident" id="5640120">MarshalXML</span><span class="op" id="5640130">(</span><span class="ident" id="5640131"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640132">.</span><span class="ident" id="5640133">encoder</span><span class="op" id="5640140">,</span>&nbsp;<span class="ident" id="5640142"><a href="/encoding/xml/marshal.go.html#5639920">start</a></span><span class="op" id="5640147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640150">if</span>&nbsp;<span class="ident" id="5640153"><a href="/encoding/xml/marshal.go.html#5640109">err</a></span>&nbsp;<span class="op" id="5640157">!=</span>&nbsp;<span class="ident" id="5640160">nil</span>&nbsp;<span class="op" id="5640164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640168">return</span>&nbsp;<span class="ident" id="5640175"><a href="/encoding/xml/marshal.go.html#5640109">err</a></span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5640180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5640184">//&nbsp;Make&nbsp;sure&nbsp;MarshalXML&nbsp;closed&nbsp;all&nbsp;its&nbsp;tags.&nbsp;p.tags[n-1]&nbsp;is&nbsp;the&nbsp;mark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640255">if</span>&nbsp;<span class="builtinfunc" id="5640258">len</span><span class="op" id="5640261">(</span><span class="ident" id="5640262"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640263">.</span><span class="ident" id="5640264">tags</span><span class="op" id="5640268">)</span>&nbsp;<span class="op" id="5640270">&gt;</span>&nbsp;<span class="ident" id="5640272"><a href="/encoding/xml/marshal.go.html#5640090">n</a></span>&nbsp;<span class="op" id="5640274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640278">return</span>&nbsp;<span class="ident" id="5640285"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5640288">.</span><span class="ident" id="5640289">Errorf</span><span class="op" id="5640295">(</span><span class="string" id="5640296">&#34;xml:&nbsp;%s.MarshalXML&nbsp;wrote&nbsp;invalid&nbsp;XML:&nbsp;&lt;%s&gt;&nbsp;not&nbsp;closed&#34;</span><span class="op" id="5640351">,</span>&nbsp;<span class="ident" id="5640353"><a href="/encoding/xml/read.go.html#5656273">receiverType</a></span><span class="op" id="5640365">(</span><span class="ident" id="5640366"><a href="/encoding/xml/marshal.go.html#5639905">val</a></span><span class="op" id="5640369">)</span><span class="op" id="5640370">,</span>&nbsp;<span class="ident" id="5640372"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640373">.</span><span class="ident" id="5640374">tags</span><span class="op" id="5640378">[</span><span class="builtinfunc" id="5640379">len</span><span class="op" id="5640382">(</span><span class="ident" id="5640383"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640384">.</span><span class="ident" id="5640385">tags</span><span class="op" id="5640389">)</span><span class="op" id="5640390">-</span><span class="num" id="5640391">1</span><span class="op" id="5640392">]</span><span class="op" id="5640393">.</span><span class="ident" id="5640394">Local</span><span class="op" id="5640399">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5640402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640405"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640406">.</span><span class="ident" id="5640407">tags</span>&nbsp;<span class="op" id="5640412">=</span>&nbsp;<span class="ident" id="5640414"><a href="/encoding/xml/marshal.go.html#5639876">p</a></span><span class="op" id="5640415">.</span><span class="ident" id="5640416">tags</span><span class="op" id="5640420">[</span><span class="op" id="5640421">:</span><span class="ident" id="5640422"><a href="/encoding/xml/marshal.go.html#5640090">n</a></span><span class="op" id="5640423">-</span><span class="num" id="5640424">1</span><span class="op" id="5640425">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640428">return</span>&nbsp;<span class="ident" id="5640435">nil</span><br>
<span class="lineno"></span><span class="op" id="5640439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="5640442">//&nbsp;marshalTextInterface&nbsp;marshals&nbsp;a&nbsp;TextMarshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5640508">func</span>&nbsp;<span class="op" id="5640513">(</span><span class="ident" id="5640514">p</span>&nbsp;<span class="op" id="5640516">*</span><span class="ident" id="5640517"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5640524">)</span>&nbsp;<span class="ident" id="5640526">marshalTextInterface</span><span class="op" id="5640546">(</span><span class="ident" id="5640547">val</span>&nbsp;<span class="ident" id="5640551"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5640559">.</span><span class="ident" id="5640560">TextMarshaler</span><span class="op" id="5640573">,</span>&nbsp;<span class="ident" id="5640575">start</span>&nbsp;<span class="ident" id="5640581"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5640593">)</span>&nbsp;<span class="builtintype" id="5640595">error</span>&nbsp;<span class="op" id="5640601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640604">if</span>&nbsp;<span class="ident" id="5640607">err</span>&nbsp;<span class="op" id="5640611">:=</span>&nbsp;<span class="ident" id="5640614"><a href="/encoding/xml/marshal.go.html#5640514">p</a></span><span class="op" id="5640615">.</span><span class="ident" id="5640616">writeStart</span><span class="op" id="5640626">(</span><span class="op" id="5640627">&amp;</span><span class="ident" id="5640628"><a href="/encoding/xml/marshal.go.html#5640575">start</a></span><span class="op" id="5640633">)</span><span class="op" id="5640634">;</span>&nbsp;<span class="ident" id="5640636"><a href="/encoding/xml/marshal.go.html#5640607">err</a></span>&nbsp;<span class="op" id="5640640">!=</span>&nbsp;<span class="ident" id="5640643">nil</span>&nbsp;<span class="op" id="5640647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640651">return</span>&nbsp;<span class="ident" id="5640658"><a href="/encoding/xml/marshal.go.html#5640607">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5640663">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640666">text</span><span class="op" id="5640670">,</span>&nbsp;<span class="ident" id="5640672">err</span>&nbsp;<span class="op" id="5640676">:=</span>&nbsp;<span class="ident" id="5640679"><a href="/encoding/xml/marshal.go.html#5640547">val</a></span><span class="op" id="5640682">.</span><span class="ident" id="5640683">MarshalText</span><span class="op" id="5640694">(</span><span class="op" id="5640695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640698">if</span>&nbsp;<span class="ident" id="5640701"><a href="/encoding/xml/marshal.go.html#5640672">err</a></span>&nbsp;<span class="op" id="5640705">!=</span>&nbsp;<span class="ident" id="5640708">nil</span>&nbsp;<span class="op" id="5640712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640716">return</span>&nbsp;<span class="ident" id="5640723"><a href="/encoding/xml/marshal.go.html#5640672">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5640728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640731"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5640741">(</span><span class="ident" id="5640742"><a href="/encoding/xml/marshal.go.html#5640514">p</a></span><span class="op" id="5640743">,</span>&nbsp;<span class="ident" id="5640745"><a href="/encoding/xml/marshal.go.html#5640666">text</a></span><span class="op" id="5640749">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640752">return</span>&nbsp;<span class="ident" id="5640759"><a href="/encoding/xml/marshal.go.html#5640514">p</a></span><span class="op" id="5640760">.</span><span class="ident" id="5640761">writeEnd</span><span class="op" id="5640769">(</span><span class="ident" id="5640770"><a href="/encoding/xml/marshal.go.html#5640575">start</a></span><span class="op" id="5640775">.</span><span class="ident" id="5640776">Name</span><span class="op" id="5640780">)</span><br>
<span class="lineno"></span><span class="op" id="5640782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5640785">//&nbsp;writeStart&nbsp;writes&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="5640831">func</span>&nbsp;<span class="op" id="5640836">(</span><span class="ident" id="5640837">p</span>&nbsp;<span class="op" id="5640839">*</span><span class="ident" id="5640840"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5640847">)</span>&nbsp;<span class="ident" id="5640849">writeStart</span><span class="op" id="5640859">(</span><span class="ident" id="5640860">start</span>&nbsp;<span class="op" id="5640866">*</span><span class="ident" id="5640867"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5640879">)</span>&nbsp;<span class="builtintype" id="5640881">error</span>&nbsp;<span class="op" id="5640887">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640890">if</span>&nbsp;<span class="ident" id="5640893"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5640898">.</span><span class="ident" id="5640899">Name</span><span class="op" id="5640903">.</span><span class="ident" id="5640904">Local</span>&nbsp;<span class="op" id="5640910">==</span>&nbsp;<span class="string" id="5640913">&#34;&#34;</span>&nbsp;<span class="op" id="5640916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5640920">return</span>&nbsp;<span class="ident" id="5640927"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5640930">.</span><span class="ident" id="5640931">Errorf</span><span class="op" id="5640937">(</span><span class="string" id="5640938">&#34;xml:&nbsp;start&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="5640967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5640970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5640974"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5640975">.</span><span class="ident" id="5640976">tags</span>&nbsp;<span class="op" id="5640981">=</span>&nbsp;<span class="builtinfunc" id="5640983">append</span><span class="op" id="5640989">(</span><span class="ident" id="5640990"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5640991">.</span><span class="ident" id="5640992">tags</span><span class="op" id="5640996">,</span>&nbsp;<span class="ident" id="5640998"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5641003">.</span><span class="ident" id="5641004">Name</span><span class="op" id="5641008">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641011"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641012">.</span><span class="ident" id="5641013">markPrefix</span><span class="op" id="5641023">(</span><span class="op" id="5641024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641028"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641029">.</span><span class="ident" id="5641030">writeIndent</span><span class="op" id="5641041">(</span><span class="num" id="5641042">1</span><span class="op" id="5641043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641046"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641047">.</span><span class="ident" id="5641048">WriteByte</span><span class="op" id="5641057">(</span><span class="string" id="5641058">&#39;&lt;&#39;</span><span class="op" id="5641061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641064"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641065">.</span><span class="ident" id="5641066">WriteString</span><span class="op" id="5641077">(</span><span class="ident" id="5641078"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5641083">.</span><span class="ident" id="5641084">Name</span><span class="op" id="5641088">.</span><span class="ident" id="5641089">Local</span><span class="op" id="5641094">)</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641098">if</span>&nbsp;<span class="ident" id="5641101"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5641106">.</span><span class="ident" id="5641107">Name</span><span class="op" id="5641111">.</span><span class="ident" id="5641112">Space</span>&nbsp;<span class="op" id="5641118">!=</span>&nbsp;<span class="string" id="5641121">&#34;&#34;</span>&nbsp;<span class="op" id="5641124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641128"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641129">.</span><span class="ident" id="5641130">WriteString</span><span class="op" id="5641141">(</span><span class="string" id="5641142">`&nbsp;xmlns=&#34;`</span><span class="op" id="5641152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641156"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641157">.</span><span class="ident" id="5641158">EscapeString</span><span class="op" id="5641170">(</span><span class="ident" id="5641171"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5641176">.</span><span class="ident" id="5641177">Name</span><span class="op" id="5641181">.</span><span class="ident" id="5641182">Space</span><span class="op" id="5641187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641191"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641192">.</span><span class="ident" id="5641193">WriteByte</span><span class="op" id="5641202">(</span><span class="string" id="5641203">&#39;&#34;&#39;</span><span class="op" id="5641206">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5641213">//&nbsp;Attributes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641228">for</span>&nbsp;<span class="ident" id="5641232">_</span><span class="op" id="5641233">,</span>&nbsp;<span class="ident" id="5641235">attr</span>&nbsp;<span class="op" id="5641240">:=</span>&nbsp;<span class="keyword" id="5641243">range</span>&nbsp;<span class="ident" id="5641249"><a href="/encoding/xml/marshal.go.html#5640860">start</a></span><span class="op" id="5641254">.</span><span class="ident" id="5641255">Attr</span>&nbsp;<span class="op" id="5641260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641264">name</span>&nbsp;<span class="op" id="5641269">:=</span>&nbsp;<span class="ident" id="5641272"><a href="/encoding/xml/marshal.go.html#5641235">attr</a></span><span class="op" id="5641276">.</span><span class="ident" id="5641277">Name</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641284">if</span>&nbsp;<span class="ident" id="5641287"><a href="/encoding/xml/marshal.go.html#5641264">name</a></span><span class="op" id="5641291">.</span><span class="ident" id="5641292">Local</span>&nbsp;<span class="op" id="5641298">==</span>&nbsp;<span class="string" id="5641301">&#34;&#34;</span>&nbsp;<span class="op" id="5641304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641309">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641324"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641325">.</span><span class="ident" id="5641326">WriteByte</span><span class="op" id="5641335">(</span><span class="string" id="5641336">&#39;&nbsp;&#39;</span><span class="op" id="5641339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641343">if</span>&nbsp;<span class="ident" id="5641346"><a href="/encoding/xml/marshal.go.html#5641264">name</a></span><span class="op" id="5641350">.</span><span class="ident" id="5641351">Space</span>&nbsp;<span class="op" id="5641357">!=</span>&nbsp;<span class="string" id="5641360">&#34;&#34;</span>&nbsp;<span class="op" id="5641363">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641368"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641369">.</span><span class="ident" id="5641370">WriteString</span><span class="op" id="5641381">(</span><span class="ident" id="5641382"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641383">.</span><span class="ident" id="5641384">createAttrPrefix</span><span class="op" id="5641400">(</span><span class="ident" id="5641401"><a href="/encoding/xml/marshal.go.html#5641264">name</a></span><span class="op" id="5641405">.</span><span class="ident" id="5641406">Space</span><span class="op" id="5641411">)</span><span class="op" id="5641412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641417"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641418">.</span><span class="ident" id="5641419">WriteByte</span><span class="op" id="5641428">(</span><span class="string" id="5641429">&#39;:&#39;</span><span class="op" id="5641432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641440"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641441">.</span><span class="ident" id="5641442">WriteString</span><span class="op" id="5641453">(</span><span class="ident" id="5641454"><a href="/encoding/xml/marshal.go.html#5641264">name</a></span><span class="op" id="5641458">.</span><span class="ident" id="5641459">Local</span><span class="op" id="5641464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641468"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641469">.</span><span class="ident" id="5641470">WriteString</span><span class="op" id="5641481">(</span><span class="string" id="5641482">`=&#34;`</span><span class="op" id="5641486">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641490"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641491">.</span><span class="ident" id="5641492">EscapeString</span><span class="op" id="5641504">(</span><span class="ident" id="5641505"><a href="/encoding/xml/marshal.go.html#5641235">attr</a></span><span class="op" id="5641509">.</span><span class="ident" id="5641510">Value</span><span class="op" id="5641515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641519"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641520">.</span><span class="ident" id="5641521">WriteByte</span><span class="op" id="5641530">(</span><span class="string" id="5641531">&#39;&#34;&#39;</span><span class="op" id="5641534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5641540"><a href="/encoding/xml/marshal.go.html#5640837">p</a></span><span class="op" id="5641541">.</span><span class="ident" id="5641542">WriteByte</span><span class="op" id="5641551">(</span><span class="string" id="5641552">&#39;&gt;&#39;</span><span class="op" id="5641555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641558">return</span>&nbsp;<span class="ident" id="5641565">nil</span><br>
<span class="lineno">645</span><span class="op" id="5641569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5641572">func</span>&nbsp;<span class="op" id="5641577">(</span><span class="ident" id="5641578">p</span>&nbsp;<span class="op" id="5641580">*</span><span class="ident" id="5641581"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5641588">)</span>&nbsp;<span class="ident" id="5641590">writeEnd</span><span class="op" id="5641598">(</span><span class="ident" id="5641599">name</span>&nbsp;<span class="ident" id="5641604"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5641608">)</span>&nbsp;<span class="builtintype" id="5641610">error</span>&nbsp;<span class="op" id="5641616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641619">if</span>&nbsp;<span class="ident" id="5641622"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5641626">.</span><span class="ident" id="5641627">Local</span>&nbsp;<span class="op" id="5641633">==</span>&nbsp;<span class="string" id="5641636">&#34;&#34;</span>&nbsp;<span class="op" id="5641639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641643">return</span>&nbsp;<span class="ident" id="5641650"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5641653">.</span><span class="ident" id="5641654">Errorf</span><span class="op" id="5641660">(</span><span class="string" id="5641661">&#34;xml:&nbsp;end&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="5641688">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641694">if</span>&nbsp;<span class="builtinfunc" id="5641697">len</span><span class="op" id="5641700">(</span><span class="ident" id="5641701"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5641702">.</span><span class="ident" id="5641703">tags</span><span class="op" id="5641707">)</span>&nbsp;<span class="op" id="5641709">==</span>&nbsp;<span class="num" id="5641712">0</span>&nbsp;<span class="op" id="5641714">||</span>&nbsp;<span class="ident" id="5641717"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5641718">.</span><span class="ident" id="5641719">tags</span><span class="op" id="5641723">[</span><span class="builtinfunc" id="5641724">len</span><span class="op" id="5641727">(</span><span class="ident" id="5641728"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5641729">.</span><span class="ident" id="5641730">tags</span><span class="op" id="5641734">)</span><span class="op" id="5641735">-</span><span class="num" id="5641736">1</span><span class="op" id="5641737">]</span><span class="op" id="5641738">.</span><span class="ident" id="5641739">Local</span>&nbsp;<span class="op" id="5641745">==</span>&nbsp;<span class="string" id="5641748">&#34;&#34;</span>&nbsp;<span class="op" id="5641751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641755">return</span>&nbsp;<span class="ident" id="5641762"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5641765">.</span><span class="ident" id="5641766">Errorf</span><span class="op" id="5641772">(</span><span class="string" id="5641773">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;without&nbsp;start&nbsp;tag&#34;</span><span class="op" id="5641811">,</span>&nbsp;<span class="ident" id="5641813"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5641817">.</span><span class="ident" id="5641818">Local</span><span class="op" id="5641823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5641826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641829">if</span>&nbsp;<span class="ident" id="5641832">top</span>&nbsp;<span class="op" id="5641836">:=</span>&nbsp;<span class="ident" id="5641839"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5641840">.</span><span class="ident" id="5641841">tags</span><span class="op" id="5641845">[</span><span class="builtinfunc" id="5641846">len</span><span class="op" id="5641849">(</span><span class="ident" id="5641850"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5641851">.</span><span class="ident" id="5641852">tags</span><span class="op" id="5641856">)</span><span class="op" id="5641857">-</span><span class="num" id="5641858">1</span><span class="op" id="5641859">]</span><span class="op" id="5641860">;</span>&nbsp;<span class="ident" id="5641862"><a href="/encoding/xml/marshal.go.html#5641832">top</a></span>&nbsp;<span class="op" id="5641866">!=</span>&nbsp;<span class="ident" id="5641869"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span>&nbsp;<span class="op" id="5641874">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641878">if</span>&nbsp;<span class="ident" id="5641881"><a href="/encoding/xml/marshal.go.html#5641832">top</a></span><span class="op" id="5641884">.</span><span class="ident" id="5641885">Local</span>&nbsp;<span class="op" id="5641891">!=</span>&nbsp;<span class="ident" id="5641894"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5641898">.</span><span class="ident" id="5641899">Local</span>&nbsp;<span class="op" id="5641905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5641910">return</span>&nbsp;<span class="ident" id="5641917"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5641920">.</span><span class="ident" id="5641921">Errorf</span><span class="op" id="5641927">(</span><span class="string" id="5641928">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="5641978">,</span>&nbsp;<span class="ident" id="5641980"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5641984">.</span><span class="ident" id="5641985">Local</span><span class="op" id="5641990">,</span>&nbsp;<span class="ident" id="5641992"><a href="/encoding/xml/marshal.go.html#5641832">top</a></span><span class="op" id="5641995">.</span><span class="ident" id="5641996">Local</span><span class="op" id="5642001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5642005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642009">return</span>&nbsp;<span class="ident" id="5642016"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5642019">.</span><span class="ident" id="5642020">Errorf</span><span class="op" id="5642026">(</span><span class="string" id="5642027">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&#34;</span><span class="op" id="5642109">,</span>&nbsp;<span class="ident" id="5642111"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5642115">.</span><span class="ident" id="5642116">Local</span><span class="op" id="5642121">,</span>&nbsp;<span class="ident" id="5642123"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5642127">.</span><span class="ident" id="5642128">Space</span><span class="op" id="5642133">,</span>&nbsp;<span class="ident" id="5642135"><a href="/encoding/xml/marshal.go.html#5641832">top</a></span><span class="op" id="5642138">.</span><span class="ident" id="5642139">Local</span><span class="op" id="5642144">,</span>&nbsp;<span class="ident" id="5642146"><a href="/encoding/xml/marshal.go.html#5641832">top</a></span><span class="op" id="5642149">.</span><span class="ident" id="5642150">Space</span><span class="op" id="5642155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5642158">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642161"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642162">.</span><span class="ident" id="5642163">tags</span>&nbsp;<span class="op" id="5642168">=</span>&nbsp;<span class="ident" id="5642170"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642171">.</span><span class="ident" id="5642172">tags</span><span class="op" id="5642176">[</span><span class="op" id="5642177">:</span><span class="builtinfunc" id="5642178">len</span><span class="op" id="5642181">(</span><span class="ident" id="5642182"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642183">.</span><span class="ident" id="5642184">tags</span><span class="op" id="5642188">)</span><span class="op" id="5642189">-</span><span class="num" id="5642190">1</span><span class="op" id="5642191">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642195"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642196">.</span><span class="ident" id="5642197">writeIndent</span><span class="op" id="5642208">(</span><span class="op" id="5642209">-</span><span class="num" id="5642210">1</span><span class="op" id="5642211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642214"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642215">.</span><span class="ident" id="5642216">WriteByte</span><span class="op" id="5642225">(</span><span class="string" id="5642226">&#39;&lt;&#39;</span><span class="op" id="5642229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642232"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642233">.</span><span class="ident" id="5642234">WriteByte</span><span class="op" id="5642243">(</span><span class="string" id="5642244">&#39;/&#39;</span><span class="op" id="5642247">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642250"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642251">.</span><span class="ident" id="5642252">WriteString</span><span class="op" id="5642263">(</span><span class="ident" id="5642264"><a href="/encoding/xml/marshal.go.html#5641599">name</a></span><span class="op" id="5642268">.</span><span class="ident" id="5642269">Local</span><span class="op" id="5642274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642277"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642278">.</span><span class="ident" id="5642279">WriteByte</span><span class="op" id="5642288">(</span><span class="string" id="5642289">&#39;&gt;&#39;</span><span class="op" id="5642292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5642295"><a href="/encoding/xml/marshal.go.html#5641578">p</a></span><span class="op" id="5642296">.</span><span class="ident" id="5642297">popPrefix</span><span class="op" id="5642306">(</span><span class="op" id="5642307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642310">return</span>&nbsp;<span class="ident" id="5642317">nil</span><br>
<span class="lineno"></span><span class="op" id="5642321">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="5642324">func</span>&nbsp;<span class="op" id="5642329">(</span><span class="ident" id="5642330">p</span>&nbsp;<span class="op" id="5642332">*</span><span class="ident" id="5642333"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5642340">)</span>&nbsp;<span class="ident" id="5642342">marshalSimple</span><span class="op" id="5642355">(</span><span class="ident" id="5642356">typ</span>&nbsp;<span class="ident" id="5642360"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642367">.</span><span class="ident" id="5642368">Type</span><span class="op" id="5642372">,</span>&nbsp;<span class="ident" id="5642374">val</span>&nbsp;<span class="ident" id="5642378"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642385">.</span><span class="ident" id="5642386">Value</span><span class="op" id="5642391">)</span>&nbsp;<span class="op" id="5642393">(</span><span class="builtintype" id="5642394">string</span><span class="op" id="5642400">,</span>&nbsp;<span class="op" id="5642402">[</span><span class="op" id="5642403">]</span><span class="builtintype" id="5642404">byte</span><span class="op" id="5642408">,</span>&nbsp;<span class="builtintype" id="5642410">error</span><span class="op" id="5642415">)</span>&nbsp;<span class="op" id="5642417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642420">switch</span>&nbsp;<span class="ident" id="5642427"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642430">.</span><span class="ident" id="5642431">Kind</span><span class="op" id="5642435">(</span><span class="op" id="5642436">)</span>&nbsp;<span class="op" id="5642438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642441">case</span>&nbsp;<span class="ident" id="5642446"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642453">.</span><span class="ident" id="5642454">Int</span><span class="op" id="5642457">,</span>&nbsp;<span class="ident" id="5642459"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642466">.</span><span class="ident" id="5642467">Int8</span><span class="op" id="5642471">,</span>&nbsp;<span class="ident" id="5642473"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642480">.</span><span class="ident" id="5642481">Int16</span><span class="op" id="5642486">,</span>&nbsp;<span class="ident" id="5642488"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642495">.</span><span class="ident" id="5642496">Int32</span><span class="op" id="5642501">,</span>&nbsp;<span class="ident" id="5642503"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642510">.</span><span class="ident" id="5642511">Int64</span><span class="op" id="5642516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642520">return</span>&nbsp;<span class="ident" id="5642527"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5642534">.</span><span class="ident" id="5642535">FormatInt</span><span class="op" id="5642544">(</span><span class="ident" id="5642545"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642548">.</span><span class="ident" id="5642549">Int</span><span class="op" id="5642552">(</span><span class="op" id="5642553">)</span><span class="op" id="5642554">,</span>&nbsp;<span class="num" id="5642556">10</span><span class="op" id="5642558">)</span><span class="op" id="5642559">,</span>&nbsp;<span class="ident" id="5642561">nil</span><span class="op" id="5642564">,</span>&nbsp;<span class="ident" id="5642566">nil</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642571">case</span>&nbsp;<span class="ident" id="5642576"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642583">.</span><span class="ident" id="5642584">Uint</span><span class="op" id="5642588">,</span>&nbsp;<span class="ident" id="5642590"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642597">.</span><span class="ident" id="5642598">Uint8</span><span class="op" id="5642603">,</span>&nbsp;<span class="ident" id="5642605"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642612">.</span><span class="ident" id="5642613">Uint16</span><span class="op" id="5642619">,</span>&nbsp;<span class="ident" id="5642621"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642628">.</span><span class="ident" id="5642629">Uint32</span><span class="op" id="5642635">,</span>&nbsp;<span class="ident" id="5642637"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642644">.</span><span class="ident" id="5642645">Uint64</span><span class="op" id="5642651">,</span>&nbsp;<span class="ident" id="5642653"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642660">.</span><span class="ident" id="5642661">Uintptr</span><span class="op" id="5642668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642672">return</span>&nbsp;<span class="ident" id="5642679"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5642686">.</span><span class="ident" id="5642687">FormatUint</span><span class="op" id="5642697">(</span><span class="ident" id="5642698"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642701">.</span><span class="ident" id="5642702">Uint</span><span class="op" id="5642706">(</span><span class="op" id="5642707">)</span><span class="op" id="5642708">,</span>&nbsp;<span class="num" id="5642710">10</span><span class="op" id="5642712">)</span><span class="op" id="5642713">,</span>&nbsp;<span class="ident" id="5642715">nil</span><span class="op" id="5642718">,</span>&nbsp;<span class="ident" id="5642720">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642725">case</span>&nbsp;<span class="ident" id="5642730"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642737">.</span><span class="ident" id="5642738">Float32</span><span class="op" id="5642745">,</span>&nbsp;<span class="ident" id="5642747"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642754">.</span><span class="ident" id="5642755">Float64</span><span class="op" id="5642762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642766">return</span>&nbsp;<span class="ident" id="5642773"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5642780">.</span><span class="ident" id="5642781">FormatFloat</span><span class="op" id="5642792">(</span><span class="ident" id="5642793"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642796">.</span><span class="ident" id="5642797">Float</span><span class="op" id="5642802">(</span><span class="op" id="5642803">)</span><span class="op" id="5642804">,</span>&nbsp;<span class="string" id="5642806">&#39;g&#39;</span><span class="op" id="5642809">,</span>&nbsp;<span class="op" id="5642811">-</span><span class="num" id="5642812">1</span><span class="op" id="5642813">,</span>&nbsp;<span class="ident" id="5642815"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642818">.</span><span class="ident" id="5642819">Type</span><span class="op" id="5642823">(</span><span class="op" id="5642824">)</span><span class="op" id="5642825">.</span><span class="ident" id="5642826">Bits</span><span class="op" id="5642830">(</span><span class="op" id="5642831">)</span><span class="op" id="5642832">)</span><span class="op" id="5642833">,</span>&nbsp;<span class="ident" id="5642835">nil</span><span class="op" id="5642838">,</span>&nbsp;<span class="ident" id="5642840">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642845">case</span>&nbsp;<span class="ident" id="5642850"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642857">.</span><span class="ident" id="5642858">String</span><span class="op" id="5642864">:</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642868">return</span>&nbsp;<span class="ident" id="5642875"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642878">.</span><span class="ident" id="5642879">String</span><span class="op" id="5642885">(</span><span class="op" id="5642886">)</span><span class="op" id="5642887">,</span>&nbsp;<span class="ident" id="5642889">nil</span><span class="op" id="5642892">,</span>&nbsp;<span class="ident" id="5642894">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642899">case</span>&nbsp;<span class="ident" id="5642904"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642911">.</span><span class="ident" id="5642912">Bool</span><span class="op" id="5642916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642920">return</span>&nbsp;<span class="ident" id="5642927"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5642934">.</span><span class="ident" id="5642935">FormatBool</span><span class="op" id="5642945">(</span><span class="ident" id="5642946"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5642949">.</span><span class="ident" id="5642950">Bool</span><span class="op" id="5642954">(</span><span class="op" id="5642955">)</span><span class="op" id="5642956">)</span><span class="op" id="5642957">,</span>&nbsp;<span class="ident" id="5642959">nil</span><span class="op" id="5642962">,</span>&nbsp;<span class="ident" id="5642964">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642969">case</span>&nbsp;<span class="ident" id="5642974"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5642981">.</span><span class="ident" id="5642982">Array</span><span class="op" id="5642987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5642991">if</span>&nbsp;<span class="ident" id="5642994"><a href="/encoding/xml/marshal.go.html#5642356">typ</a></span><span class="op" id="5642997">.</span><span class="ident" id="5642998">Elem</span><span class="op" id="5643002">(</span><span class="op" id="5643003">)</span><span class="op" id="5643004">.</span><span class="ident" id="5643005">Kind</span><span class="op" id="5643009">(</span><span class="op" id="5643010">)</span>&nbsp;<span class="op" id="5643012">!=</span>&nbsp;<span class="ident" id="5643015"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643022">.</span><span class="ident" id="5643023">Uint8</span>&nbsp;<span class="op" id="5643029">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643034">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5643046">//&nbsp;[...]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643061">var</span>&nbsp;<span class="ident" id="5643065">bytes</span>&nbsp;<span class="op" id="5643071">[</span><span class="op" id="5643072">]</span><span class="builtintype" id="5643073">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643080">if</span>&nbsp;<span class="ident" id="5643083"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643086">.</span><span class="ident" id="5643087">CanAddr</span><span class="op" id="5643094">(</span><span class="op" id="5643095">)</span>&nbsp;<span class="op" id="5643097">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643102"><a href="/encoding/xml/marshal.go.html#5643065">bytes</a></span>&nbsp;<span class="op" id="5643108">=</span>&nbsp;<span class="ident" id="5643110"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643113">.</span><span class="ident" id="5643114">Slice</span><span class="op" id="5643119">(</span><span class="num" id="5643120">0</span><span class="op" id="5643121">,</span>&nbsp;<span class="ident" id="5643123"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643126">.</span><span class="ident" id="5643127">Len</span><span class="op" id="5643130">(</span><span class="op" id="5643131">)</span><span class="op" id="5643132">)</span><span class="op" id="5643133">.</span><span class="ident" id="5643134">Bytes</span><span class="op" id="5643139">(</span><span class="op" id="5643140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643144">}</span>&nbsp;<span class="keyword" id="5643146">else</span>&nbsp;<span class="op" id="5643151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643156"><a href="/encoding/xml/marshal.go.html#5643065">bytes</a></span>&nbsp;<span class="op" id="5643162">=</span>&nbsp;<span class="builtinfunc" id="5643164">make</span><span class="op" id="5643168">(</span><span class="op" id="5643169">[</span><span class="op" id="5643170">]</span><span class="builtintype" id="5643171">byte</span><span class="op" id="5643175">,</span>&nbsp;<span class="ident" id="5643177"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643180">.</span><span class="ident" id="5643181">Len</span><span class="op" id="5643184">(</span><span class="op" id="5643185">)</span><span class="op" id="5643186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643191"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643198">.</span><span class="ident" id="5643199">Copy</span><span class="op" id="5643203">(</span><span class="ident" id="5643204"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643211">.</span><span class="ident" id="5643212">ValueOf</span><span class="op" id="5643219">(</span><span class="ident" id="5643220"><a href="/encoding/xml/marshal.go.html#5643065">bytes</a></span><span class="op" id="5643225">)</span><span class="op" id="5643226">,</span>&nbsp;<span class="ident" id="5643228"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643235">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643239">return</span>&nbsp;<span class="string" id="5643246">&#34;&#34;</span><span class="op" id="5643248">,</span>&nbsp;<span class="ident" id="5643250"><a href="/encoding/xml/marshal.go.html#5643065">bytes</a></span><span class="op" id="5643255">,</span>&nbsp;<span class="ident" id="5643257">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643262">case</span>&nbsp;<span class="ident" id="5643267"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643274">.</span><span class="ident" id="5643275">Slice</span><span class="op" id="5643280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643284">if</span>&nbsp;<span class="ident" id="5643287"><a href="/encoding/xml/marshal.go.html#5642356">typ</a></span><span class="op" id="5643290">.</span><span class="ident" id="5643291">Elem</span><span class="op" id="5643295">(</span><span class="op" id="5643296">)</span><span class="op" id="5643297">.</span><span class="ident" id="5643298">Kind</span><span class="op" id="5643302">(</span><span class="op" id="5643303">)</span>&nbsp;<span class="op" id="5643305">!=</span>&nbsp;<span class="ident" id="5643308"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643315">.</span><span class="ident" id="5643316">Uint8</span>&nbsp;<span class="op" id="5643322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643327">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643335">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5643339">//&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643351">return</span>&nbsp;<span class="string" id="5643358">&#34;&#34;</span><span class="op" id="5643360">,</span>&nbsp;<span class="ident" id="5643362"><a href="/encoding/xml/marshal.go.html#5642374">val</a></span><span class="op" id="5643365">.</span><span class="ident" id="5643366">Bytes</span><span class="op" id="5643371">(</span><span class="op" id="5643372">)</span><span class="op" id="5643373">,</span>&nbsp;<span class="ident" id="5643375">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643383">return</span>&nbsp;<span class="string" id="5643390">&#34;&#34;</span><span class="op" id="5643392">,</span>&nbsp;<span class="ident" id="5643394">nil</span><span class="op" id="5643397">,</span>&nbsp;<span class="op" id="5643399">&amp;</span><span class="ident" id="5643400"><a href="/encoding/xml/marshal.go.html#5648509">UnsupportedTypeError</a></span><span class="op" id="5643420">{</span><span class="ident" id="5643421"><a href="/encoding/xml/marshal.go.html#5642356">typ</a></span><span class="op" id="5643424">}</span><br>
<span class="lineno"></span><span class="op" id="5643426">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="keyword" id="5643429">var</span>&nbsp;<span class="ident" id="5643433">ddBytes</span>&nbsp;<span class="op" id="5643441">=</span>&nbsp;<span class="op" id="5643443">[</span><span class="op" id="5643444">]</span><span class="builtintype" id="5643445">byte</span><span class="op" id="5643449">(</span><span class="string" id="5643450">&#34;--&#34;</span><span class="op" id="5643454">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5643457">func</span>&nbsp;<span class="op" id="5643462">(</span><span class="ident" id="5643463">p</span>&nbsp;<span class="op" id="5643465">*</span><span class="ident" id="5643466"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5643473">)</span>&nbsp;<span class="ident" id="5643475">marshalStruct</span><span class="op" id="5643488">(</span><span class="ident" id="5643489">tinfo</span>&nbsp;<span class="op" id="5643495">*</span><span class="ident" id="5643496"><a href="/encoding/xml/typeinfo.go.html#5669785">typeInfo</a></span><span class="op" id="5643504">,</span>&nbsp;<span class="ident" id="5643506">val</span>&nbsp;<span class="ident" id="5643510"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643517">.</span><span class="ident" id="5643518">Value</span><span class="op" id="5643523">)</span>&nbsp;<span class="builtintype" id="5643525">error</span>&nbsp;<span class="op" id="5643531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643534">s</span>&nbsp;<span class="op" id="5643536">:=</span>&nbsp;<span class="ident" id="5643539"><a href="/encoding/xml/marshal.go.html#5647450">parentStack</a></span><span class="op" id="5643550">{</span><span class="ident" id="5643551">p</span><span class="op" id="5643552">:</span>&nbsp;<span class="ident" id="5643554"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5643555">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643558">for</span>&nbsp;<span class="ident" id="5643562">i</span>&nbsp;<span class="op" id="5643564">:=</span>&nbsp;<span class="keyword" id="5643567">range</span>&nbsp;<span class="ident" id="5643573"><a href="/encoding/xml/marshal.go.html#5643489">tinfo</a></span><span class="op" id="5643578">.</span><span class="ident" id="5643579">fields</span>&nbsp;<span class="op" id="5643586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643590">finfo</span>&nbsp;<span class="op" id="5643596">:=</span>&nbsp;<span class="op" id="5643599">&amp;</span><span class="ident" id="5643600"><a href="/encoding/xml/marshal.go.html#5643489">tinfo</a></span><span class="op" id="5643605">.</span><span class="ident" id="5643606">fields</span><span class="op" id="5643612">[</span><span class="ident" id="5643613"><a href="/encoding/xml/marshal.go.html#5643562">i</a></span><span class="op" id="5643614">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643618">if</span>&nbsp;<span class="ident" id="5643621"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5643626">.</span><span class="ident" id="5643627">flags</span><span class="op" id="5643632">&amp;</span><span class="ident" id="5643633"><a href="/encoding/xml/typeinfo.go.html#5670095">fAttr</a></span>&nbsp;<span class="op" id="5643639">!=</span>&nbsp;<span class="num" id="5643642">0</span>&nbsp;<span class="op" id="5643644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643649">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643660">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643664">vf</span>&nbsp;<span class="op" id="5643667">:=</span>&nbsp;<span class="ident" id="5643670"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5643675">.</span><span class="ident" id="5643676">value</span><span class="op" id="5643681">(</span><span class="ident" id="5643682"><a href="/encoding/xml/marshal.go.html#5643506">val</a></span><span class="op" id="5643685">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5643690">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643746">switch</span>&nbsp;<span class="ident" id="5643753"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643755">.</span><span class="ident" id="5643756">Kind</span><span class="op" id="5643760">(</span><span class="op" id="5643761">)</span>&nbsp;<span class="op" id="5643763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643767">case</span>&nbsp;<span class="ident" id="5643772"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643779">.</span><span class="ident" id="5643780">Ptr</span><span class="op" id="5643783">,</span>&nbsp;<span class="ident" id="5643785"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5643792">.</span><span class="ident" id="5643793">Interface</span><span class="op" id="5643802">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643807">if</span>&nbsp;<span class="op" id="5643810">!</span><span class="ident" id="5643811"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643813">.</span><span class="ident" id="5643814">IsNil</span><span class="op" id="5643819">(</span><span class="op" id="5643820">)</span>&nbsp;<span class="op" id="5643822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643828"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span>&nbsp;<span class="op" id="5643831">=</span>&nbsp;<span class="ident" id="5643833"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643835">.</span><span class="ident" id="5643836">Elem</span><span class="op" id="5643840">(</span><span class="op" id="5643841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5643850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643855">switch</span>&nbsp;<span class="ident" id="5643862"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5643867">.</span><span class="ident" id="5643868">flags</span>&nbsp;<span class="op" id="5643874">&amp;</span>&nbsp;<span class="ident" id="5643876"><a href="/encoding/xml/typeinfo.go.html#5670154">fMode</a></span>&nbsp;<span class="op" id="5643882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643886">case</span>&nbsp;<span class="ident" id="5643891"><a href="/encoding/xml/typeinfo.go.html#5670102">fCharData</a></span><span class="op" id="5643900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5643905">if</span>&nbsp;<span class="ident" id="5643908"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643910">.</span><span class="ident" id="5643911">CanInterface</span><span class="op" id="5643923">(</span><span class="op" id="5643924">)</span>&nbsp;<span class="op" id="5643926">&amp;&amp;</span>&nbsp;<span class="ident" id="5643929"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643931">.</span><span class="ident" id="5643932">Type</span><span class="op" id="5643936">(</span><span class="op" id="5643937">)</span><span class="op" id="5643938">.</span><span class="ident" id="5643939">Implements</span><span class="op" id="5643949">(</span><span class="ident" id="5643950"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5643967">)</span>&nbsp;<span class="op" id="5643969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5643975">data</span><span class="op" id="5643979">,</span>&nbsp;<span class="ident" id="5643981">err</span>&nbsp;<span class="op" id="5643985">:=</span>&nbsp;<span class="ident" id="5643988"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5643990">.</span><span class="ident" id="5643991">Interface</span><span class="op" id="5644000">(</span><span class="op" id="5644001">)</span><span class="op" id="5644002">.</span><span class="op" id="5644003">(</span><span class="ident" id="5644004"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5644012">.</span><span class="ident" id="5644013">TextMarshaler</span><span class="op" id="5644026">)</span><span class="op" id="5644027">.</span><span class="ident" id="5644028">MarshalText</span><span class="op" id="5644039">(</span><span class="op" id="5644040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644046">if</span>&nbsp;<span class="ident" id="5644049"><a href="/encoding/xml/marshal.go.html#5643981">err</a></span>&nbsp;<span class="op" id="5644053">!=</span>&nbsp;<span class="ident" id="5644056">nil</span>&nbsp;<span class="op" id="5644060">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644067">return</span>&nbsp;<span class="ident" id="5644074"><a href="/encoding/xml/marshal.go.html#5643981">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5644082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644088"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644094">(</span><span class="ident" id="5644095"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644096">,</span>&nbsp;<span class="ident" id="5644098"><a href="/encoding/xml/marshal.go.html#5643975">data</a></span><span class="op" id="5644102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644108">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5644120">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644125">if</span>&nbsp;<span class="ident" id="5644128"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644130">.</span><span class="ident" id="5644131">CanAddr</span><span class="op" id="5644138">(</span><span class="op" id="5644139">)</span>&nbsp;<span class="op" id="5644141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644147">pv</span>&nbsp;<span class="op" id="5644150">:=</span>&nbsp;<span class="ident" id="5644153"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644155">.</span><span class="ident" id="5644156">Addr</span><span class="op" id="5644160">(</span><span class="op" id="5644161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644167">if</span>&nbsp;<span class="ident" id="5644170"><a href="/encoding/xml/marshal.go.html#5644147">pv</a></span><span class="op" id="5644172">.</span><span class="ident" id="5644173">CanInterface</span><span class="op" id="5644185">(</span><span class="op" id="5644186">)</span>&nbsp;<span class="op" id="5644188">&amp;&amp;</span>&nbsp;<span class="ident" id="5644191"><a href="/encoding/xml/marshal.go.html#5644147">pv</a></span><span class="op" id="5644193">.</span><span class="ident" id="5644194">Type</span><span class="op" id="5644198">(</span><span class="op" id="5644199">)</span><span class="op" id="5644200">.</span><span class="ident" id="5644201">Implements</span><span class="op" id="5644211">(</span><span class="ident" id="5644212"><a href="/encoding/xml/marshal.go.html#5633743">textMarshalerType</a></span><span class="op" id="5644229">)</span>&nbsp;<span class="op" id="5644231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644238">data</span><span class="op" id="5644242">,</span>&nbsp;<span class="ident" id="5644244">err</span>&nbsp;<span class="op" id="5644248">:=</span>&nbsp;<span class="ident" id="5644251"><a href="/encoding/xml/marshal.go.html#5644147">pv</a></span><span class="op" id="5644253">.</span><span class="ident" id="5644254">Interface</span><span class="op" id="5644263">(</span><span class="op" id="5644264">)</span><span class="op" id="5644265">.</span><span class="op" id="5644266">(</span><span class="ident" id="5644267"><a href="/encoding/xml/marshal.go.html#5622690">encoding</a></span><span class="op" id="5644275">.</span><span class="ident" id="5644276">TextMarshaler</span><span class="op" id="5644289">)</span><span class="op" id="5644290">.</span><span class="ident" id="5644291">MarshalText</span><span class="op" id="5644302">(</span><span class="op" id="5644303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644310">if</span>&nbsp;<span class="ident" id="5644313"><a href="/encoding/xml/marshal.go.html#5644244">err</a></span>&nbsp;<span class="op" id="5644317">!=</span>&nbsp;<span class="ident" id="5644320">nil</span>&nbsp;<span class="op" id="5644324">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644332">return</span>&nbsp;<span class="ident" id="5644339"><a href="/encoding/xml/marshal.go.html#5644244">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5644348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644355"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644361">(</span><span class="ident" id="5644362"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644363">,</span>&nbsp;<span class="ident" id="5644365"><a href="/encoding/xml/marshal.go.html#5644238">data</a></span><span class="op" id="5644369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644376">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5644389">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5644394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644399">var</span>&nbsp;<span class="ident" id="5644403">scratch</span>&nbsp;<span class="op" id="5644411">[</span><span class="num" id="5644412">64</span><span class="op" id="5644414">]</span><span class="builtintype" id="5644415">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644423">switch</span>&nbsp;<span class="ident" id="5644430"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644432">.</span><span class="ident" id="5644433">Kind</span><span class="op" id="5644437">(</span><span class="op" id="5644438">)</span>&nbsp;<span class="op" id="5644440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644445">case</span>&nbsp;<span class="ident" id="5644450"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644457">.</span><span class="ident" id="5644458">Int</span><span class="op" id="5644461">,</span>&nbsp;<span class="ident" id="5644463"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644470">.</span><span class="ident" id="5644471">Int8</span><span class="op" id="5644475">,</span>&nbsp;<span class="ident" id="5644477"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644484">.</span><span class="ident" id="5644485">Int16</span><span class="op" id="5644490">,</span>&nbsp;<span class="ident" id="5644492"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644499">.</span><span class="ident" id="5644500">Int32</span><span class="op" id="5644505">,</span>&nbsp;<span class="ident" id="5644507"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644514">.</span><span class="ident" id="5644515">Int64</span><span class="op" id="5644520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644526"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644532">(</span><span class="ident" id="5644533"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644534">,</span>&nbsp;<span class="ident" id="5644536"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5644543">.</span><span class="ident" id="5644544">AppendInt</span><span class="op" id="5644553">(</span><span class="ident" id="5644554"><a href="/encoding/xml/marshal.go.html#5644403">scratch</a></span><span class="op" id="5644561">[</span><span class="op" id="5644562">:</span><span class="num" id="5644563">0</span><span class="op" id="5644564">]</span><span class="op" id="5644565">,</span>&nbsp;<span class="ident" id="5644567"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644569">.</span><span class="ident" id="5644570">Int</span><span class="op" id="5644573">(</span><span class="op" id="5644574">)</span><span class="op" id="5644575">,</span>&nbsp;<span class="num" id="5644577">10</span><span class="op" id="5644579">)</span><span class="op" id="5644580">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644585">case</span>&nbsp;<span class="ident" id="5644590"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644597">.</span><span class="ident" id="5644598">Uint</span><span class="op" id="5644602">,</span>&nbsp;<span class="ident" id="5644604"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644611">.</span><span class="ident" id="5644612">Uint8</span><span class="op" id="5644617">,</span>&nbsp;<span class="ident" id="5644619"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644626">.</span><span class="ident" id="5644627">Uint16</span><span class="op" id="5644633">,</span>&nbsp;<span class="ident" id="5644635"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644642">.</span><span class="ident" id="5644643">Uint32</span><span class="op" id="5644649">,</span>&nbsp;<span class="ident" id="5644651"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644658">.</span><span class="ident" id="5644659">Uint64</span><span class="op" id="5644665">,</span>&nbsp;<span class="ident" id="5644667"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644674">.</span><span class="ident" id="5644675">Uintptr</span><span class="op" id="5644682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644688"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644694">(</span><span class="ident" id="5644695"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644696">,</span>&nbsp;<span class="ident" id="5644698"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5644705">.</span><span class="ident" id="5644706">AppendUint</span><span class="op" id="5644716">(</span><span class="ident" id="5644717"><a href="/encoding/xml/marshal.go.html#5644403">scratch</a></span><span class="op" id="5644724">[</span><span class="op" id="5644725">:</span><span class="num" id="5644726">0</span><span class="op" id="5644727">]</span><span class="op" id="5644728">,</span>&nbsp;<span class="ident" id="5644730"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644732">.</span><span class="ident" id="5644733">Uint</span><span class="op" id="5644737">(</span><span class="op" id="5644738">)</span><span class="op" id="5644739">,</span>&nbsp;<span class="num" id="5644741">10</span><span class="op" id="5644743">)</span><span class="op" id="5644744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644749">case</span>&nbsp;<span class="ident" id="5644754"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644761">.</span><span class="ident" id="5644762">Float32</span><span class="op" id="5644769">,</span>&nbsp;<span class="ident" id="5644771"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644778">.</span><span class="ident" id="5644779">Float64</span><span class="op" id="5644786">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644792"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644798">(</span><span class="ident" id="5644799"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644800">,</span>&nbsp;<span class="ident" id="5644802"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5644809">.</span><span class="ident" id="5644810">AppendFloat</span><span class="op" id="5644821">(</span><span class="ident" id="5644822"><a href="/encoding/xml/marshal.go.html#5644403">scratch</a></span><span class="op" id="5644829">[</span><span class="op" id="5644830">:</span><span class="num" id="5644831">0</span><span class="op" id="5644832">]</span><span class="op" id="5644833">,</span>&nbsp;<span class="ident" id="5644835"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644837">.</span><span class="ident" id="5644838">Float</span><span class="op" id="5644843">(</span><span class="op" id="5644844">)</span><span class="op" id="5644845">,</span>&nbsp;<span class="string" id="5644847">&#39;g&#39;</span><span class="op" id="5644850">,</span>&nbsp;<span class="op" id="5644852">-</span><span class="num" id="5644853">1</span><span class="op" id="5644854">,</span>&nbsp;<span class="ident" id="5644856"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644858">.</span><span class="ident" id="5644859">Type</span><span class="op" id="5644863">(</span><span class="op" id="5644864">)</span><span class="op" id="5644865">.</span><span class="ident" id="5644866">Bits</span><span class="op" id="5644870">(</span><span class="op" id="5644871">)</span><span class="op" id="5644872">)</span><span class="op" id="5644873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644878">case</span>&nbsp;<span class="ident" id="5644883"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644890">.</span><span class="ident" id="5644891">Bool</span><span class="op" id="5644895">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5644901"><a href="/encoding/xml/xml.go.html#5722854">Escape</a></span><span class="op" id="5644907">(</span><span class="ident" id="5644908"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5644909">,</span>&nbsp;<span class="ident" id="5644911"><a href="/encoding/xml/marshal.go.html#5622726">strconv</a></span><span class="op" id="5644918">.</span><span class="ident" id="5644919">AppendBool</span><span class="op" id="5644929">(</span><span class="ident" id="5644930"><a href="/encoding/xml/marshal.go.html#5644403">scratch</a></span><span class="op" id="5644937">[</span><span class="op" id="5644938">:</span><span class="num" id="5644939">0</span><span class="op" id="5644940">]</span><span class="op" id="5644941">,</span>&nbsp;<span class="ident" id="5644943"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5644945">.</span><span class="ident" id="5644946">Bool</span><span class="op" id="5644950">(</span><span class="op" id="5644951">)</span><span class="op" id="5644952">)</span><span class="op" id="5644953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644958">case</span>&nbsp;<span class="ident" id="5644963"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5644970">.</span><span class="ident" id="5644971">String</span><span class="op" id="5644977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5644983">if</span>&nbsp;<span class="ident" id="5644986">err</span>&nbsp;<span class="op" id="5644990">:=</span>&nbsp;<span class="ident" id="5644993"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5645003">(</span><span class="ident" id="5645004"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645005">,</span>&nbsp;<span class="op" id="5645007">[</span><span class="op" id="5645008">]</span><span class="builtintype" id="5645009">byte</span><span class="op" id="5645013">(</span><span class="ident" id="5645014"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645016">.</span><span class="ident" id="5645017">String</span><span class="op" id="5645023">(</span><span class="op" id="5645024">)</span><span class="op" id="5645025">)</span><span class="op" id="5645026">)</span><span class="op" id="5645027">;</span>&nbsp;<span class="ident" id="5645029"><a href="/encoding/xml/marshal.go.html#5644986">err</a></span>&nbsp;<span class="op" id="5645033">!=</span>&nbsp;<span class="ident" id="5645036">nil</span>&nbsp;<span class="op" id="5645040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645047">return</span>&nbsp;<span class="ident" id="5645054"><a href="/encoding/xml/marshal.go.html#5644986">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645062">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645067">case</span>&nbsp;<span class="ident" id="5645072"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645079">.</span><span class="ident" id="5645080">Slice</span><span class="op" id="5645085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645091">if</span>&nbsp;<span class="ident" id="5645094">elem</span><span class="op" id="5645098">,</span>&nbsp;<span class="ident" id="5645100">ok</span>&nbsp;<span class="op" id="5645103">:=</span>&nbsp;<span class="ident" id="5645106"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645108">.</span><span class="ident" id="5645109">Interface</span><span class="op" id="5645118">(</span><span class="op" id="5645119">)</span><span class="op" id="5645120">.</span><span class="op" id="5645121">(</span><span class="op" id="5645122">[</span><span class="op" id="5645123">]</span><span class="builtintype" id="5645124">byte</span><span class="op" id="5645128">)</span><span class="op" id="5645129">;</span>&nbsp;<span class="ident" id="5645131"><a href="/encoding/xml/marshal.go.html#5645100">ok</a></span>&nbsp;<span class="op" id="5645134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645141">if</span>&nbsp;<span class="ident" id="5645144">err</span>&nbsp;<span class="op" id="5645148">:=</span>&nbsp;<span class="ident" id="5645151"><a href="/encoding/xml/xml.go.html#5721219">EscapeText</a></span><span class="op" id="5645161">(</span><span class="ident" id="5645162"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645163">,</span>&nbsp;<span class="ident" id="5645165"><a href="/encoding/xml/marshal.go.html#5645094">elem</a></span><span class="op" id="5645169">)</span><span class="op" id="5645170">;</span>&nbsp;<span class="ident" id="5645172"><a href="/encoding/xml/marshal.go.html#5645144">err</a></span>&nbsp;<span class="op" id="5645176">!=</span>&nbsp;<span class="ident" id="5645179">nil</span>&nbsp;<span class="op" id="5645183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645191">return</span>&nbsp;<span class="ident" id="5645198"><a href="/encoding/xml/marshal.go.html#5645144">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645207">}</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645223">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645235">case</span>&nbsp;<span class="ident" id="5645240"><a href="/encoding/xml/typeinfo.go.html#5670124">fComment</a></span><span class="op" id="5645248">:</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645253">k</span>&nbsp;<span class="op" id="5645255">:=</span>&nbsp;<span class="ident" id="5645258"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645260">.</span><span class="ident" id="5645261">Kind</span><span class="op" id="5645265">(</span><span class="op" id="5645266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645271">if</span>&nbsp;<span class="op" id="5645274">!</span><span class="op" id="5645275">(</span><span class="ident" id="5645276"><a href="/encoding/xml/marshal.go.html#5645253">k</a></span>&nbsp;<span class="op" id="5645278">==</span>&nbsp;<span class="ident" id="5645281"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645288">.</span><span class="ident" id="5645289">String</span>&nbsp;<span class="op" id="5645296">||</span>&nbsp;<span class="ident" id="5645299"><a href="/encoding/xml/marshal.go.html#5645253">k</a></span>&nbsp;<span class="op" id="5645301">==</span>&nbsp;<span class="ident" id="5645304"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645311">.</span><span class="ident" id="5645312">Slice</span>&nbsp;<span class="op" id="5645318">&amp;&amp;</span>&nbsp;<span class="ident" id="5645321"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645323">.</span><span class="ident" id="5645324">Type</span><span class="op" id="5645328">(</span><span class="op" id="5645329">)</span><span class="op" id="5645330">.</span><span class="ident" id="5645331">Elem</span><span class="op" id="5645335">(</span><span class="op" id="5645336">)</span><span class="op" id="5645337">.</span><span class="ident" id="5645338">Kind</span><span class="op" id="5645342">(</span><span class="op" id="5645343">)</span>&nbsp;<span class="op" id="5645345">==</span>&nbsp;<span class="ident" id="5645348"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645355">.</span><span class="ident" id="5645356">Uint8</span><span class="op" id="5645361">)</span>&nbsp;<span class="op" id="5645363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645369">return</span>&nbsp;<span class="ident" id="5645376"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5645379">.</span><span class="ident" id="5645380">Errorf</span><span class="op" id="5645386">(</span><span class="string" id="5645387">&#34;xml:&nbsp;bad&nbsp;type&nbsp;for&nbsp;comment&nbsp;field&nbsp;of&nbsp;%s&#34;</span><span class="op" id="5645426">,</span>&nbsp;<span class="ident" id="5645428"><a href="/encoding/xml/marshal.go.html#5643506">val</a></span><span class="op" id="5645431">.</span><span class="ident" id="5645432">Type</span><span class="op" id="5645436">(</span><span class="op" id="5645437">)</span><span class="op" id="5645438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645448">if</span>&nbsp;<span class="ident" id="5645451"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645453">.</span><span class="ident" id="5645454">Len</span><span class="op" id="5645457">(</span><span class="op" id="5645458">)</span>&nbsp;<span class="op" id="5645460">==</span>&nbsp;<span class="num" id="5645463">0</span>&nbsp;<span class="op" id="5645465">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645471">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645488"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645489">.</span><span class="ident" id="5645490">writeIndent</span><span class="op" id="5645501">(</span><span class="num" id="5645502">0</span><span class="op" id="5645503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645508"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645509">.</span><span class="ident" id="5645510">WriteString</span><span class="op" id="5645521">(</span><span class="string" id="5645522">&#34;&lt;!--&#34;</span><span class="op" id="5645528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645533">dashDash</span>&nbsp;<span class="op" id="5645542">:=</span>&nbsp;<span class="ident" id="5645545">false</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645554">dashLast</span>&nbsp;<span class="op" id="5645563">:=</span>&nbsp;<span class="ident" id="5645566">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645575">switch</span>&nbsp;<span class="ident" id="5645582"><a href="/encoding/xml/marshal.go.html#5645253">k</a></span>&nbsp;<span class="op" id="5645584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645589">case</span>&nbsp;<span class="ident" id="5645594"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645601">.</span><span class="ident" id="5645602">String</span><span class="op" id="5645608">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645614">s</span>&nbsp;<span class="op" id="5645616">:=</span>&nbsp;<span class="ident" id="5645619"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645621">.</span><span class="ident" id="5645622">String</span><span class="op" id="5645628">(</span><span class="op" id="5645629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645635"><a href="/encoding/xml/marshal.go.html#5645533">dashDash</a></span>&nbsp;<span class="op" id="5645644">=</span>&nbsp;<span class="ident" id="5645646"><a href="/encoding/xml/marshal.go.html#5622737">strings</a></span><span class="op" id="5645653">.</span><span class="ident" id="5645654">Index</span><span class="op" id="5645659">(</span><span class="ident" id="5645660"><a href="/encoding/xml/marshal.go.html#5645614">s</a></span><span class="op" id="5645661">,</span>&nbsp;<span class="string" id="5645663">&#34;--&#34;</span><span class="op" id="5645667">)</span>&nbsp;<span class="op" id="5645669">&gt;=</span>&nbsp;<span class="num" id="5645672">0</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645678"><a href="/encoding/xml/marshal.go.html#5645554">dashLast</a></span>&nbsp;<span class="op" id="5645687">=</span>&nbsp;<span class="ident" id="5645689"><a href="/encoding/xml/marshal.go.html#5645614">s</a></span><span class="op" id="5645690">[</span><span class="builtinfunc" id="5645691">len</span><span class="op" id="5645694">(</span><span class="ident" id="5645695"><a href="/encoding/xml/marshal.go.html#5645614">s</a></span><span class="op" id="5645696">)</span><span class="op" id="5645697">-</span><span class="num" id="5645698">1</span><span class="op" id="5645699">]</span>&nbsp;<span class="op" id="5645701">==</span>&nbsp;<span class="string" id="5645704">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645712">if</span>&nbsp;<span class="op" id="5645715">!</span><span class="ident" id="5645716"><a href="/encoding/xml/marshal.go.html#5645533">dashDash</a></span>&nbsp;<span class="op" id="5645725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645732"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645733">.</span><span class="ident" id="5645734">WriteString</span><span class="op" id="5645745">(</span><span class="ident" id="5645746"><a href="/encoding/xml/marshal.go.html#5645614">s</a></span><span class="op" id="5645747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645758">case</span>&nbsp;<span class="ident" id="5645763"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5645770">.</span><span class="ident" id="5645771">Slice</span><span class="op" id="5645776">:</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645782">b</span>&nbsp;<span class="op" id="5645784">:=</span>&nbsp;<span class="ident" id="5645787"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5645789">.</span><span class="ident" id="5645790">Bytes</span><span class="op" id="5645795">(</span><span class="op" id="5645796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645802"><a href="/encoding/xml/marshal.go.html#5645533">dashDash</a></span>&nbsp;<span class="op" id="5645811">=</span>&nbsp;<span class="ident" id="5645813"><a href="/encoding/xml/marshal.go.html#5622681">bytes</a></span><span class="op" id="5645818">.</span><span class="ident" id="5645819">Index</span><span class="op" id="5645824">(</span><span class="ident" id="5645825"><a href="/encoding/xml/marshal.go.html#5645782">b</a></span><span class="op" id="5645826">,</span>&nbsp;<span class="ident" id="5645828"><a href="/encoding/xml/marshal.go.html#5643433">ddBytes</a></span><span class="op" id="5645835">)</span>&nbsp;<span class="op" id="5645837">&gt;=</span>&nbsp;<span class="num" id="5645840">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645846"><a href="/encoding/xml/marshal.go.html#5645554">dashLast</a></span>&nbsp;<span class="op" id="5645855">=</span>&nbsp;<span class="ident" id="5645857"><a href="/encoding/xml/marshal.go.html#5645782">b</a></span><span class="op" id="5645858">[</span><span class="builtinfunc" id="5645859">len</span><span class="op" id="5645862">(</span><span class="ident" id="5645863"><a href="/encoding/xml/marshal.go.html#5645782">b</a></span><span class="op" id="5645864">)</span><span class="op" id="5645865">-</span><span class="num" id="5645866">1</span><span class="op" id="5645867">]</span>&nbsp;<span class="op" id="5645869">==</span>&nbsp;<span class="string" id="5645872">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645880">if</span>&nbsp;<span class="op" id="5645883">!</span><span class="ident" id="5645884"><a href="/encoding/xml/marshal.go.html#5645533">dashDash</a></span>&nbsp;<span class="op" id="5645893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5645900"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5645901">.</span><span class="ident" id="5645902">Write</span><span class="op" id="5645907">(</span><span class="ident" id="5645908"><a href="/encoding/xml/marshal.go.html#5645782">b</a></span><span class="op" id="5645909">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645920">default</span><span class="op" id="5645927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5645933">panic</span><span class="op" id="5645938">(</span><span class="string" id="5645939">&#34;can&#39;t&nbsp;happen&#34;</span><span class="op" id="5645953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5645958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645963">if</span>&nbsp;<span class="ident" id="5645966"><a href="/encoding/xml/marshal.go.html#5645533">dashDash</a></span>&nbsp;<span class="op" id="5645975">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5645981">return</span>&nbsp;<span class="ident" id="5645988"><a href="/encoding/xml/marshal.go.html#5622702">fmt</a></span><span class="op" id="5645991">.</span><span class="ident" id="5645992">Errorf</span><span class="op" id="5645998">(</span><span class="string" id="5645999">`xml:&nbsp;comments&nbsp;must&nbsp;not&nbsp;contain&nbsp;&#34;--&#34;`</span><span class="op" id="5646036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646046">if</span>&nbsp;<span class="ident" id="5646049"><a href="/encoding/xml/marshal.go.html#5645554">dashLast</a></span>&nbsp;<span class="op" id="5646058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5646064">//&nbsp;&#34;---&gt;&#34;&nbsp;is&nbsp;invalid&nbsp;grammar.&nbsp;Make&nbsp;it&nbsp;&#34;-&nbsp;--&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646114"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646115">.</span><span class="ident" id="5646116">WriteByte</span><span class="op" id="5646125">(</span><span class="string" id="5646126">&#39;&nbsp;&#39;</span><span class="op" id="5646129">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646139"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646140">.</span><span class="ident" id="5646141">WriteString</span><span class="op" id="5646152">(</span><span class="string" id="5646153">&#34;--&gt;&#34;</span><span class="op" id="5646158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646163">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646175">case</span>&nbsp;<span class="ident" id="5646180"><a href="/encoding/xml/typeinfo.go.html#5670113">fInnerXml</a></span><span class="op" id="5646189">:</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646194">iface</span>&nbsp;<span class="op" id="5646200">:=</span>&nbsp;<span class="ident" id="5646203"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5646205">.</span><span class="ident" id="5646206">Interface</span><span class="op" id="5646215">(</span><span class="op" id="5646216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646221">switch</span>&nbsp;<span class="ident" id="5646228">raw</span>&nbsp;<span class="op" id="5646232">:=</span>&nbsp;<span class="ident" id="5646235"><a href="/encoding/xml/marshal.go.html#5646194">iface</a></span><span class="op" id="5646240">.</span><span class="op" id="5646241">(</span><span class="keyword" id="5646242">type</span><span class="op" id="5646246">)</span>&nbsp;<span class="op" id="5646248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646253">case</span>&nbsp;<span class="op" id="5646258">[</span><span class="op" id="5646259">]</span><span class="builtintype" id="5646260">byte</span><span class="op" id="5646264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646270"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646271">.</span><span class="ident" id="5646272">Write</span><span class="op" id="5646277">(</span><span class="ident" id="5646278"><a href="/encoding/xml/marshal.go.html#5646228">raw</a></span><span class="op" id="5646281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646287">continue</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646299">case</span>&nbsp;<span class="builtintype" id="5646304">string</span><span class="op" id="5646310">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646316"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646317">.</span><span class="ident" id="5646318">WriteString</span><span class="op" id="5646329">(</span><span class="ident" id="5646330"><a href="/encoding/xml/marshal.go.html#5646228">raw</a></span><span class="op" id="5646333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646339">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646356">case</span>&nbsp;<span class="ident" id="5646361"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span><span class="op" id="5646369">,</span>&nbsp;<span class="ident" id="5646371"><a href="/encoding/xml/typeinfo.go.html#5670062">fElement</a></span>&nbsp;<span class="op" id="5646380">|</span>&nbsp;<span class="ident" id="5646382"><a href="/encoding/xml/typeinfo.go.html#5670134">fAny</a></span><span class="op" id="5646386">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646391">if</span>&nbsp;<span class="ident" id="5646394">err</span>&nbsp;<span class="op" id="5646398">:=</span>&nbsp;<span class="ident" id="5646401"><a href="/encoding/xml/marshal.go.html#5643534">s</a></span><span class="op" id="5646402">.</span><span class="ident" id="5646403">trim</span><span class="op" id="5646407">(</span><span class="ident" id="5646408"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5646413">.</span><span class="ident" id="5646414">parents</span><span class="op" id="5646421">)</span><span class="op" id="5646422">;</span>&nbsp;<span class="ident" id="5646424"><a href="/encoding/xml/marshal.go.html#5646394">err</a></span>&nbsp;<span class="op" id="5646428">!=</span>&nbsp;<span class="ident" id="5646431">nil</span>&nbsp;<span class="op" id="5646435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646441">return</span>&nbsp;<span class="ident" id="5646448"><a href="/encoding/xml/marshal.go.html#5646394">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646460">if</span>&nbsp;<span class="builtinfunc" id="5646463">len</span><span class="op" id="5646466">(</span><span class="ident" id="5646467"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5646472">.</span><span class="ident" id="5646473">parents</span><span class="op" id="5646480">)</span>&nbsp;<span class="op" id="5646482">&gt;</span>&nbsp;<span class="builtinfunc" id="5646484">len</span><span class="op" id="5646487">(</span><span class="ident" id="5646488"><a href="/encoding/xml/marshal.go.html#5643534">s</a></span><span class="op" id="5646489">.</span><span class="ident" id="5646490">stack</span><span class="op" id="5646495">)</span>&nbsp;<span class="op" id="5646497">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646503">if</span>&nbsp;<span class="ident" id="5646506"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5646508">.</span><span class="ident" id="5646509">Kind</span><span class="op" id="5646513">(</span><span class="op" id="5646514">)</span>&nbsp;<span class="op" id="5646516">!=</span>&nbsp;<span class="ident" id="5646519"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5646526">.</span><span class="ident" id="5646527">Ptr</span>&nbsp;<span class="op" id="5646531">&amp;&amp;</span>&nbsp;<span class="ident" id="5646534"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5646536">.</span><span class="ident" id="5646537">Kind</span><span class="op" id="5646541">(</span><span class="op" id="5646542">)</span>&nbsp;<span class="op" id="5646544">!=</span>&nbsp;<span class="ident" id="5646547"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5646554">.</span><span class="ident" id="5646555">Interface</span>&nbsp;<span class="op" id="5646565">||</span>&nbsp;<span class="op" id="5646568">!</span><span class="ident" id="5646569"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5646571">.</span><span class="ident" id="5646572">IsNil</span><span class="op" id="5646577">(</span><span class="op" id="5646578">)</span>&nbsp;<span class="op" id="5646580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646587">if</span>&nbsp;<span class="ident" id="5646590">err</span>&nbsp;<span class="op" id="5646594">:=</span>&nbsp;<span class="ident" id="5646597"><a href="/encoding/xml/marshal.go.html#5643534">s</a></span><span class="op" id="5646598">.</span><span class="ident" id="5646599">push</span><span class="op" id="5646603">(</span><span class="ident" id="5646604"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5646609">.</span><span class="ident" id="5646610">parents</span><span class="op" id="5646617">[</span><span class="builtinfunc" id="5646618">len</span><span class="op" id="5646621">(</span><span class="ident" id="5646622"><a href="/encoding/xml/marshal.go.html#5643534">s</a></span><span class="op" id="5646623">.</span><span class="ident" id="5646624">stack</span><span class="op" id="5646629">)</span><span class="op" id="5646630">:</span><span class="op" id="5646631">]</span><span class="op" id="5646632">)</span><span class="op" id="5646633">;</span>&nbsp;<span class="ident" id="5646635"><a href="/encoding/xml/marshal.go.html#5646590">err</a></span>&nbsp;<span class="op" id="5646639">!=</span>&nbsp;<span class="ident" id="5646642">nil</span>&nbsp;<span class="op" id="5646646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646654">return</span>&nbsp;<span class="ident" id="5646661"><a href="/encoding/xml/marshal.go.html#5646590">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646676">}</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646689">if</span>&nbsp;<span class="ident" id="5646692">err</span>&nbsp;<span class="op" id="5646696">:=</span>&nbsp;<span class="ident" id="5646699"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646700">.</span><span class="ident" id="5646701">marshalValue</span><span class="op" id="5646713">(</span><span class="ident" id="5646714"><a href="/encoding/xml/marshal.go.html#5643664">vf</a></span><span class="op" id="5646716">,</span>&nbsp;<span class="ident" id="5646718"><a href="/encoding/xml/marshal.go.html#5643590">finfo</a></span><span class="op" id="5646723">,</span>&nbsp;<span class="ident" id="5646725">nil</span><span class="op" id="5646728">)</span><span class="op" id="5646729">;</span>&nbsp;<span class="ident" id="5646731"><a href="/encoding/xml/marshal.go.html#5646692">err</a></span>&nbsp;<span class="op" id="5646735">!=</span>&nbsp;<span class="ident" id="5646738">nil</span>&nbsp;<span class="op" id="5646742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646747">return</span>&nbsp;<span class="ident" id="5646754"><a href="/encoding/xml/marshal.go.html#5646692">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646760">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5646763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646766"><a href="/encoding/xml/marshal.go.html#5643534">s</a></span><span class="op" id="5646767">.</span><span class="ident" id="5646768">trim</span><span class="op" id="5646772">(</span><span class="ident" id="5646773">nil</span><span class="op" id="5646776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646779">return</span>&nbsp;<span class="ident" id="5646786"><a href="/encoding/xml/marshal.go.html#5643463">p</a></span><span class="op" id="5646787">.</span><span class="ident" id="5646788">cachedWriteError</span><span class="op" id="5646804">(</span><span class="op" id="5646805">)</span><br>
<span class="lineno"></span><span class="op" id="5646807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="5646810">//&nbsp;return&nbsp;the&nbsp;bufio&nbsp;Writer&#39;s&nbsp;cached&nbsp;write&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="5646858">func</span>&nbsp;<span class="op" id="5646863">(</span><span class="ident" id="5646864">p</span>&nbsp;<span class="op" id="5646866">*</span><span class="ident" id="5646867"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5646874">)</span>&nbsp;<span class="ident" id="5646876">cachedWriteError</span><span class="op" id="5646892">(</span><span class="op" id="5646893">)</span>&nbsp;<span class="builtintype" id="5646895">error</span>&nbsp;<span class="op" id="5646901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5646904">_</span><span class="op" id="5646905">,</span>&nbsp;<span class="ident" id="5646907">err</span>&nbsp;<span class="op" id="5646911">:=</span>&nbsp;<span class="ident" id="5646914"><a href="/encoding/xml/marshal.go.html#5646864">p</a></span><span class="op" id="5646915">.</span><span class="ident" id="5646916">Write</span><span class="op" id="5646921">(</span><span class="ident" id="5646922">nil</span><span class="op" id="5646925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646928">return</span>&nbsp;<span class="ident" id="5646935"><a href="/encoding/xml/marshal.go.html#5646907">err</a></span><br>
<span class="lineno"></span><span class="op" id="5646939">}</span><br>
<span class="lineno">845</span><br>
<span class="lineno"></span><span class="keyword" id="5646942">func</span>&nbsp;<span class="op" id="5646947">(</span><span class="ident" id="5646948">p</span>&nbsp;<span class="op" id="5646950">*</span><span class="ident" id="5646951"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><span class="op" id="5646958">)</span>&nbsp;<span class="ident" id="5646960">writeIndent</span><span class="op" id="5646971">(</span><span class="ident" id="5646972">depthDelta</span>&nbsp;<span class="builtintype" id="5646983">int</span><span class="op" id="5646986">)</span>&nbsp;<span class="op" id="5646988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5646991">if</span>&nbsp;<span class="builtinfunc" id="5646994">len</span><span class="op" id="5646997">(</span><span class="ident" id="5646998"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5646999">.</span><span class="ident" id="5647000">prefix</span><span class="op" id="5647006">)</span>&nbsp;<span class="op" id="5647008">==</span>&nbsp;<span class="num" id="5647011">0</span>&nbsp;<span class="op" id="5647013">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5647016">len</span><span class="op" id="5647019">(</span><span class="ident" id="5647020"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647021">.</span><span class="ident" id="5647022">indent</span><span class="op" id="5647028">)</span>&nbsp;<span class="op" id="5647030">==</span>&nbsp;<span class="num" id="5647033">0</span>&nbsp;<span class="op" id="5647035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647039">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647047">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647050">if</span>&nbsp;<span class="ident" id="5647053"><a href="/encoding/xml/marshal.go.html#5646972">depthDelta</a></span>&nbsp;<span class="op" id="5647064">&lt;</span>&nbsp;<span class="num" id="5647066">0</span>&nbsp;<span class="op" id="5647068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647072"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647073">.</span><span class="ident" id="5647074">depth</span><span class="op" id="5647079">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647084">if</span>&nbsp;<span class="ident" id="5647087"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647088">.</span><span class="ident" id="5647089">indentedIn</span>&nbsp;<span class="op" id="5647100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647105"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647106">.</span><span class="ident" id="5647107">indentedIn</span>&nbsp;<span class="op" id="5647118">=</span>&nbsp;<span class="ident" id="5647120">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647129">return</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647142"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647143">.</span><span class="ident" id="5647144">indentedIn</span>&nbsp;<span class="op" id="5647155">=</span>&nbsp;<span class="ident" id="5647157">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647167">if</span>&nbsp;<span class="ident" id="5647170"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647171">.</span><span class="ident" id="5647172">putNewline</span>&nbsp;<span class="op" id="5647183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647187"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647188">.</span><span class="ident" id="5647189">WriteByte</span><span class="op" id="5647198">(</span><span class="string" id="5647199">&#39;\n&#39;</span><span class="op" id="5647203">)</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647206">}</span>&nbsp;<span class="keyword" id="5647208">else</span>&nbsp;<span class="op" id="5647213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647217"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647218">.</span><span class="ident" id="5647219">putNewline</span>&nbsp;<span class="op" id="5647230">=</span>&nbsp;<span class="ident" id="5647232">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647241">if</span>&nbsp;<span class="builtinfunc" id="5647244">len</span><span class="op" id="5647247">(</span><span class="ident" id="5647248"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647249">.</span><span class="ident" id="5647250">prefix</span><span class="op" id="5647256">)</span>&nbsp;<span class="op" id="5647258">&gt;</span>&nbsp;<span class="num" id="5647260">0</span>&nbsp;<span class="op" id="5647262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647266"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647267">.</span><span class="ident" id="5647268">WriteString</span><span class="op" id="5647279">(</span><span class="ident" id="5647280"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647281">.</span><span class="ident" id="5647282">prefix</span><span class="op" id="5647288">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647294">if</span>&nbsp;<span class="builtinfunc" id="5647297">len</span><span class="op" id="5647300">(</span><span class="ident" id="5647301"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647302">.</span><span class="ident" id="5647303">indent</span><span class="op" id="5647309">)</span>&nbsp;<span class="op" id="5647311">&gt;</span>&nbsp;<span class="num" id="5647313">0</span>&nbsp;<span class="op" id="5647315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647319">for</span>&nbsp;<span class="ident" id="5647323">i</span>&nbsp;<span class="op" id="5647325">:=</span>&nbsp;<span class="num" id="5647328">0</span><span class="op" id="5647329">;</span>&nbsp;<span class="ident" id="5647331"><a href="/encoding/xml/marshal.go.html#5647323">i</a></span>&nbsp;<span class="op" id="5647333">&lt;</span>&nbsp;<span class="ident" id="5647335"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647336">.</span><span class="ident" id="5647337">depth</span><span class="op" id="5647342">;</span>&nbsp;<span class="ident" id="5647344"><a href="/encoding/xml/marshal.go.html#5647323">i</a></span><span class="op" id="5647345">++</span>&nbsp;<span class="op" id="5647348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647353"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647354">.</span><span class="ident" id="5647355">WriteString</span><span class="op" id="5647366">(</span><span class="ident" id="5647367"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647368">.</span><span class="ident" id="5647369">indent</span><span class="op" id="5647375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647379">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647385">if</span>&nbsp;<span class="ident" id="5647388"><a href="/encoding/xml/marshal.go.html#5646972">depthDelta</a></span>&nbsp;<span class="op" id="5647399">&gt;</span>&nbsp;<span class="num" id="5647401">0</span>&nbsp;<span class="op" id="5647403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647407"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647408">.</span><span class="ident" id="5647409">depth</span><span class="op" id="5647414">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647419"><a href="/encoding/xml/marshal.go.html#5646948">p</a></span><span class="op" id="5647420">.</span><span class="ident" id="5647421">indentedIn</span>&nbsp;<span class="op" id="5647432">=</span>&nbsp;<span class="ident" id="5647434">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647440">}</span><br>
<span class="lineno">875</span><span class="op" id="5647442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5647445">type</span>&nbsp;<span class="ident" id="5647450">parentStack</span>&nbsp;<span class="keyword" id="5647462">struct</span>&nbsp;<span class="op" id="5647469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647472">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5647478">*</span><span class="ident" id="5647479"><a href="/encoding/xml/marshal.go.html#5631252">printer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647488">stack</span>&nbsp;<span class="op" id="5647494">[</span><span class="op" id="5647495">]</span><span class="builtintype" id="5647496">string</span><br>
<span class="lineno">880</span><span class="op" id="5647503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5647506">//&nbsp;trim&nbsp;updates&nbsp;the&nbsp;XML&nbsp;context&nbsp;to&nbsp;match&nbsp;the&nbsp;longest&nbsp;common&nbsp;prefix&nbsp;of&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="5647586">//&nbsp;and&nbsp;the&nbsp;given&nbsp;parents.&nbsp;&nbsp;A&nbsp;closing&nbsp;tag&nbsp;will&nbsp;be&nbsp;written&nbsp;for&nbsp;every&nbsp;parent</span><br>
<span class="lineno"></span><span class="comment" id="5647660">//&nbsp;popped.&nbsp;&nbsp;Passing&nbsp;a&nbsp;zero&nbsp;slice&nbsp;or&nbsp;nil&nbsp;will&nbsp;close&nbsp;all&nbsp;the&nbsp;elements.</span><br>
<span class="lineno">885</span><span class="keyword" id="5647729">func</span>&nbsp;<span class="op" id="5647734">(</span><span class="ident" id="5647735">s</span>&nbsp;<span class="op" id="5647737">*</span><span class="ident" id="5647738"><a href="/encoding/xml/marshal.go.html#5647450">parentStack</a></span><span class="op" id="5647749">)</span>&nbsp;<span class="ident" id="5647751">trim</span><span class="op" id="5647755">(</span><span class="ident" id="5647756">parents</span>&nbsp;<span class="op" id="5647764">[</span><span class="op" id="5647765">]</span><span class="builtintype" id="5647766">string</span><span class="op" id="5647772">)</span>&nbsp;<span class="builtintype" id="5647774">error</span>&nbsp;<span class="op" id="5647780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5647783">split</span>&nbsp;<span class="op" id="5647789">:=</span>&nbsp;<span class="num" id="5647792">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647795">for</span>&nbsp;<span class="op" id="5647799">;</span>&nbsp;<span class="ident" id="5647801"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span>&nbsp;<span class="op" id="5647807">&lt;</span>&nbsp;<span class="builtinfunc" id="5647809">len</span><span class="op" id="5647812">(</span><span class="ident" id="5647813"><a href="/encoding/xml/marshal.go.html#5647756">parents</a></span><span class="op" id="5647820">)</span>&nbsp;<span class="op" id="5647822">&amp;&amp;</span>&nbsp;<span class="ident" id="5647825"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span>&nbsp;<span class="op" id="5647831">&lt;</span>&nbsp;<span class="builtinfunc" id="5647833">len</span><span class="op" id="5647836">(</span><span class="ident" id="5647837"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5647838">.</span><span class="ident" id="5647839">stack</span><span class="op" id="5647844">)</span><span class="op" id="5647845">;</span>&nbsp;<span class="ident" id="5647847"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span><span class="op" id="5647852">++</span>&nbsp;<span class="op" id="5647855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647859">if</span>&nbsp;<span class="ident" id="5647862"><a href="/encoding/xml/marshal.go.html#5647756">parents</a></span><span class="op" id="5647869">[</span><span class="ident" id="5647870"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span><span class="op" id="5647875">]</span>&nbsp;<span class="op" id="5647877">!=</span>&nbsp;<span class="ident" id="5647880"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5647881">.</span><span class="ident" id="5647882">stack</span><span class="op" id="5647887">[</span><span class="ident" id="5647888"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span><span class="op" id="5647893">]</span>&nbsp;<span class="op" id="5647895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647900">break</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5647911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647914">for</span>&nbsp;<span class="ident" id="5647918">i</span>&nbsp;<span class="op" id="5647920">:=</span>&nbsp;<span class="builtinfunc" id="5647923">len</span><span class="op" id="5647926">(</span><span class="ident" id="5647927"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5647928">.</span><span class="ident" id="5647929">stack</span><span class="op" id="5647934">)</span>&nbsp;<span class="op" id="5647936">-</span>&nbsp;<span class="num" id="5647938">1</span><span class="op" id="5647939">;</span>&nbsp;<span class="ident" id="5647941"><a href="/encoding/xml/marshal.go.html#5647918">i</a></span>&nbsp;<span class="op" id="5647943">&gt;=</span>&nbsp;<span class="ident" id="5647946"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span><span class="op" id="5647951">;</span>&nbsp;<span class="ident" id="5647953"><a href="/encoding/xml/marshal.go.html#5647918">i</a></span><span class="op" id="5647954">--</span>&nbsp;<span class="op" id="5647957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5647961">if</span>&nbsp;<span class="ident" id="5647964">err</span>&nbsp;<span class="op" id="5647968">:=</span>&nbsp;<span class="ident" id="5647971"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5647972">.</span><span class="ident" id="5647973">p</span><span class="op" id="5647974">.</span><span class="ident" id="5647975">writeEnd</span><span class="op" id="5647983">(</span><span class="ident" id="5647984"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5647988">{</span><span class="ident" id="5647989">Local</span><span class="op" id="5647994">:</span>&nbsp;<span class="ident" id="5647996"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5647997">.</span><span class="ident" id="5647998">stack</span><span class="op" id="5648003">[</span><span class="ident" id="5648004"><a href="/encoding/xml/marshal.go.html#5647918">i</a></span><span class="op" id="5648005">]</span><span class="op" id="5648006">}</span><span class="op" id="5648007">)</span><span class="op" id="5648008">;</span>&nbsp;<span class="ident" id="5648010"><a href="/encoding/xml/marshal.go.html#5647964">err</a></span>&nbsp;<span class="op" id="5648014">!=</span>&nbsp;<span class="ident" id="5648017">nil</span>&nbsp;<span class="op" id="5648021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648026">return</span>&nbsp;<span class="ident" id="5648033"><a href="/encoding/xml/marshal.go.html#5647964">err</a></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648045"><a href="/encoding/xml/marshal.go.html#5647735">s</a></span><span class="op" id="5648046">.</span><span class="ident" id="5648047">stack</span>&nbsp;<span class="op" id="5648053">=</span>&nbsp;<span class="ident" id="5648055"><a href="/encoding/xml/marshal.go.html#5647756">parents</a></span><span class="op" id="5648062">[</span><span class="op" id="5648063">:</span><span class="ident" id="5648064"><a href="/encoding/xml/marshal.go.html#5647783">split</a></span><span class="op" id="5648069">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648072">return</span>&nbsp;<span class="ident" id="5648079">nil</span><br>
<span class="lineno"></span><span class="op" id="5648083">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span><span class="comment" id="5648086">//&nbsp;push&nbsp;adds&nbsp;parent&nbsp;elements&nbsp;to&nbsp;the&nbsp;stack&nbsp;and&nbsp;writes&nbsp;open&nbsp;tags.</span><br>
<span class="lineno"></span><span class="keyword" id="5648150">func</span>&nbsp;<span class="op" id="5648155">(</span><span class="ident" id="5648156">s</span>&nbsp;<span class="op" id="5648158">*</span><span class="ident" id="5648159"><a href="/encoding/xml/marshal.go.html#5647450">parentStack</a></span><span class="op" id="5648170">)</span>&nbsp;<span class="ident" id="5648172">push</span><span class="op" id="5648176">(</span><span class="ident" id="5648177">parents</span>&nbsp;<span class="op" id="5648185">[</span><span class="op" id="5648186">]</span><span class="builtintype" id="5648187">string</span><span class="op" id="5648193">)</span>&nbsp;<span class="builtintype" id="5648195">error</span>&nbsp;<span class="op" id="5648201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648204">for</span>&nbsp;<span class="ident" id="5648208">i</span>&nbsp;<span class="op" id="5648210">:=</span>&nbsp;<span class="num" id="5648213">0</span><span class="op" id="5648214">;</span>&nbsp;<span class="ident" id="5648216"><a href="/encoding/xml/marshal.go.html#5648208">i</a></span>&nbsp;<span class="op" id="5648218">&lt;</span>&nbsp;<span class="builtinfunc" id="5648220">len</span><span class="op" id="5648223">(</span><span class="ident" id="5648224"><a href="/encoding/xml/marshal.go.html#5648177">parents</a></span><span class="op" id="5648231">)</span><span class="op" id="5648232">;</span>&nbsp;<span class="ident" id="5648234"><a href="/encoding/xml/marshal.go.html#5648208">i</a></span><span class="op" id="5648235">++</span>&nbsp;<span class="op" id="5648238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648242">if</span>&nbsp;<span class="ident" id="5648245">err</span>&nbsp;<span class="op" id="5648249">:=</span>&nbsp;<span class="ident" id="5648252"><a href="/encoding/xml/marshal.go.html#5648156">s</a></span><span class="op" id="5648253">.</span><span class="ident" id="5648254">p</span><span class="op" id="5648255">.</span><span class="ident" id="5648256">writeStart</span><span class="op" id="5648266">(</span><span class="op" id="5648267">&amp;</span><span class="ident" id="5648268"><a href="/encoding/xml/xml.go.html#5680356">StartElement</a></span><span class="op" id="5648280">{</span><span class="ident" id="5648281">Name</span><span class="op" id="5648285">:</span>&nbsp;<span class="ident" id="5648287"><a href="/encoding/xml/xml.go.html#5679992">Name</a></span><span class="op" id="5648291">{</span><span class="ident" id="5648292">Local</span><span class="op" id="5648297">:</span>&nbsp;<span class="ident" id="5648299"><a href="/encoding/xml/marshal.go.html#5648177">parents</a></span><span class="op" id="5648306">[</span><span class="ident" id="5648307"><a href="/encoding/xml/marshal.go.html#5648208">i</a></span><span class="op" id="5648308">]</span><span class="op" id="5648309">}</span><span class="op" id="5648310">}</span><span class="op" id="5648311">)</span><span class="op" id="5648312">;</span>&nbsp;<span class="ident" id="5648314"><a href="/encoding/xml/marshal.go.html#5648245">err</a></span>&nbsp;<span class="op" id="5648318">!=</span>&nbsp;<span class="ident" id="5648321">nil</span>&nbsp;<span class="op" id="5648325">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648330">return</span>&nbsp;<span class="ident" id="5648337"><a href="/encoding/xml/marshal.go.html#5648245">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5648346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648349"><a href="/encoding/xml/marshal.go.html#5648156">s</a></span><span class="op" id="5648350">.</span><span class="ident" id="5648351">stack</span>&nbsp;<span class="op" id="5648357">=</span>&nbsp;<span class="builtinfunc" id="5648359">append</span><span class="op" id="5648365">(</span><span class="ident" id="5648366"><a href="/encoding/xml/marshal.go.html#5648156">s</a></span><span class="op" id="5648367">.</span><span class="ident" id="5648368">stack</span><span class="op" id="5648373">,</span>&nbsp;<span class="ident" id="5648375"><a href="/encoding/xml/marshal.go.html#5648177">parents</a></span><span class="op" id="5648382">...</span><span class="op" id="5648385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648388">return</span>&nbsp;<span class="ident" id="5648395">nil</span><br>
<span class="lineno">910</span><span class="op" id="5648399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5648402">//&nbsp;A&nbsp;MarshalXMLError&nbsp;is&nbsp;returned&nbsp;when&nbsp;Marshal&nbsp;encounters&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5648466">//&nbsp;that&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;into&nbsp;XML.</span><br>
<span class="lineno"></span><span class="keyword" id="5648504">type</span>&nbsp;<span class="ident" id="5648509">UnsupportedTypeError</span>&nbsp;<span class="keyword" id="5648530">struct</span>&nbsp;<span class="op" id="5648537">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5648540">Type</span>&nbsp;<span class="ident" id="5648545"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648552">.</span><span class="ident" id="5648553">Type</span><br>
<span class="lineno"></span><span class="op" id="5648558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5648561">func</span>&nbsp;<span class="op" id="5648566">(</span><span class="ident" id="5648567">e</span>&nbsp;<span class="op" id="5648569">*</span><span class="ident" id="5648570"><a href="/encoding/xml/marshal.go.html#5648509">UnsupportedTypeError</a></span><span class="op" id="5648590">)</span>&nbsp;<span class="ident" id="5648592">Error</span><span class="op" id="5648597">(</span><span class="op" id="5648598">)</span>&nbsp;<span class="builtintype" id="5648600">string</span>&nbsp;<span class="op" id="5648607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648610">return</span>&nbsp;<span class="string" id="5648617">&#34;xml:&nbsp;unsupported&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="5648643">+</span>&nbsp;<span class="ident" id="5648645"><a href="/encoding/xml/marshal.go.html#5648567">e</a></span><span class="op" id="5648646">.</span><span class="ident" id="5648647">Type</span><span class="op" id="5648651">.</span><span class="ident" id="5648652">String</span><span class="op" id="5648658">(</span><span class="op" id="5648659">)</span><br>
<span class="lineno">920</span><span class="op" id="5648661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5648664">func</span>&nbsp;<span class="ident" id="5648669">isEmptyValue</span><span class="op" id="5648681">(</span><span class="ident" id="5648682">v</span>&nbsp;<span class="ident" id="5648684"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648691">.</span><span class="ident" id="5648692">Value</span><span class="op" id="5648697">)</span>&nbsp;<span class="builtintype" id="5648699">bool</span>&nbsp;<span class="op" id="5648704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648707">switch</span>&nbsp;<span class="ident" id="5648714"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5648715">.</span><span class="ident" id="5648716">Kind</span><span class="op" id="5648720">(</span><span class="op" id="5648721">)</span>&nbsp;<span class="op" id="5648723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648726">case</span>&nbsp;<span class="ident" id="5648731"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648738">.</span><span class="ident" id="5648739">Array</span><span class="op" id="5648744">,</span>&nbsp;<span class="ident" id="5648746"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648753">.</span><span class="ident" id="5648754">Map</span><span class="op" id="5648757">,</span>&nbsp;<span class="ident" id="5648759"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648766">.</span><span class="ident" id="5648767">Slice</span><span class="op" id="5648772">,</span>&nbsp;<span class="ident" id="5648774"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648781">.</span><span class="ident" id="5648782">String</span><span class="op" id="5648788">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648792">return</span>&nbsp;<span class="ident" id="5648799"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5648800">.</span><span class="ident" id="5648801">Len</span><span class="op" id="5648804">(</span><span class="op" id="5648805">)</span>&nbsp;<span class="op" id="5648807">==</span>&nbsp;<span class="num" id="5648810">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648813">case</span>&nbsp;<span class="ident" id="5648818"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648825">.</span><span class="ident" id="5648826">Bool</span><span class="op" id="5648830">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648834">return</span>&nbsp;<span class="op" id="5648841">!</span><span class="ident" id="5648842"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5648843">.</span><span class="ident" id="5648844">Bool</span><span class="op" id="5648848">(</span><span class="op" id="5648849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648852">case</span>&nbsp;<span class="ident" id="5648857"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648864">.</span><span class="ident" id="5648865">Int</span><span class="op" id="5648868">,</span>&nbsp;<span class="ident" id="5648870"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648877">.</span><span class="ident" id="5648878">Int8</span><span class="op" id="5648882">,</span>&nbsp;<span class="ident" id="5648884"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648891">.</span><span class="ident" id="5648892">Int16</span><span class="op" id="5648897">,</span>&nbsp;<span class="ident" id="5648899"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648906">.</span><span class="ident" id="5648907">Int32</span><span class="op" id="5648912">,</span>&nbsp;<span class="ident" id="5648914"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648921">.</span><span class="ident" id="5648922">Int64</span><span class="op" id="5648927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648931">return</span>&nbsp;<span class="ident" id="5648938"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5648939">.</span><span class="ident" id="5648940">Int</span><span class="op" id="5648943">(</span><span class="op" id="5648944">)</span>&nbsp;<span class="op" id="5648946">==</span>&nbsp;<span class="num" id="5648949">0</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5648952">case</span>&nbsp;<span class="ident" id="5648957"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648964">.</span><span class="ident" id="5648965">Uint</span><span class="op" id="5648969">,</span>&nbsp;<span class="ident" id="5648971"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648978">.</span><span class="ident" id="5648979">Uint8</span><span class="op" id="5648984">,</span>&nbsp;<span class="ident" id="5648986"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5648993">.</span><span class="ident" id="5648994">Uint16</span><span class="op" id="5649000">,</span>&nbsp;<span class="ident" id="5649002"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649009">.</span><span class="ident" id="5649010">Uint32</span><span class="op" id="5649016">,</span>&nbsp;<span class="ident" id="5649018"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649025">.</span><span class="ident" id="5649026">Uint64</span><span class="op" id="5649032">,</span>&nbsp;<span class="ident" id="5649034"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649041">.</span><span class="ident" id="5649042">Uintptr</span><span class="op" id="5649049">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649053">return</span>&nbsp;<span class="ident" id="5649060"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5649061">.</span><span class="ident" id="5649062">Uint</span><span class="op" id="5649066">(</span><span class="op" id="5649067">)</span>&nbsp;<span class="op" id="5649069">==</span>&nbsp;<span class="num" id="5649072">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649075">case</span>&nbsp;<span class="ident" id="5649080"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649087">.</span><span class="ident" id="5649088">Float32</span><span class="op" id="5649095">,</span>&nbsp;<span class="ident" id="5649097"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649104">.</span><span class="ident" id="5649105">Float64</span><span class="op" id="5649112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649116">return</span>&nbsp;<span class="ident" id="5649123"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5649124">.</span><span class="ident" id="5649125">Float</span><span class="op" id="5649130">(</span><span class="op" id="5649131">)</span>&nbsp;<span class="op" id="5649133">==</span>&nbsp;<span class="num" id="5649136">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649139">case</span>&nbsp;<span class="ident" id="5649144"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649151">.</span><span class="ident" id="5649152">Interface</span><span class="op" id="5649161">,</span>&nbsp;<span class="ident" id="5649163"><a href="/encoding/xml/marshal.go.html#5622715">reflect</a></span><span class="op" id="5649170">.</span><span class="ident" id="5649171">Ptr</span><span class="op" id="5649174">:</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649178">return</span>&nbsp;<span class="ident" id="5649185"><a href="/encoding/xml/marshal.go.html#5648682">v</a></span><span class="op" id="5649186">.</span><span class="ident" id="5649187">IsNil</span><span class="op" id="5649192">(</span><span class="op" id="5649193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5649196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5649199">return</span>&nbsp;<span class="ident" id="5649206">false</span><br>
<span class="lineno"></span><span class="op" id="5649212">}</span>
</div>
</body>
</html>
