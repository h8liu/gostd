<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/crc32</h2>
<ul>
<li><a href="/gostd/hash/crc32/crc32.go.html">crc32.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_amd64x.go.html">crc32_amd64x.go</a></li>
<li><a href="/gostd/hash/crc32/crc32_test.go.html" class="current">crc32_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8554431">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8554486">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8554540">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8554591">package</span>&nbsp;<span class="ident" id="8554599">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8554606">import</span>&nbsp;<span class="op" id="8554613">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8554616">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8554622">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="8554632">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8554635">type</span>&nbsp;<span class="ident" id="8554640">test</span>&nbsp;<span class="keyword" id="8554645">struct</span>&nbsp;<span class="op" id="8554652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8554655">ieee</span><span class="op" id="8554659">,</span>&nbsp;<span class="ident" id="8554661">castagnoli</span>&nbsp;<span class="builtintype" id="8554672">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8554680">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8554697">string</span><br>
<span class="lineno">15</span><span class="op" id="8554704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8554707">var</span>&nbsp;<span class="ident" id="8554711">golden</span>&nbsp;<span class="op" id="8554718">=</span>&nbsp;<span class="op" id="8554720">[</span><span class="op" id="8554721">]</span><span class="ident" id="8554722">test</span><span class="op" id="8554726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554729">{</span><span class="num" id="8554730">0x0</span><span class="op" id="8554733">,</span>&nbsp;<span class="num" id="8554735">0x0</span><span class="op" id="8554738">,</span>&nbsp;<span class="string" id="8554740">&#34;&#34;</span><span class="op" id="8554742">}</span><span class="op" id="8554743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554746">{</span><span class="num" id="8554747">0xe8b7be43</span><span class="op" id="8554757">,</span>&nbsp;<span class="num" id="8554759">0xc1d04330</span><span class="op" id="8554769">,</span>&nbsp;<span class="string" id="8554771">&#34;a&#34;</span><span class="op" id="8554774">}</span><span class="op" id="8554775">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554778">{</span><span class="num" id="8554779">0x9e83486d</span><span class="op" id="8554789">,</span>&nbsp;<span class="num" id="8554791">0xe2a22936</span><span class="op" id="8554801">,</span>&nbsp;<span class="string" id="8554803">&#34;ab&#34;</span><span class="op" id="8554807">}</span><span class="op" id="8554808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554811">{</span><span class="num" id="8554812">0x352441c2</span><span class="op" id="8554822">,</span>&nbsp;<span class="num" id="8554824">0x364b3fb7</span><span class="op" id="8554834">,</span>&nbsp;<span class="string" id="8554836">&#34;abc&#34;</span><span class="op" id="8554841">}</span><span class="op" id="8554842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554845">{</span><span class="num" id="8554846">0xed82cd11</span><span class="op" id="8554856">,</span>&nbsp;<span class="num" id="8554858">0x92c80a31</span><span class="op" id="8554868">,</span>&nbsp;<span class="string" id="8554870">&#34;abcd&#34;</span><span class="op" id="8554876">}</span><span class="op" id="8554877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554880">{</span><span class="num" id="8554881">0x8587d865</span><span class="op" id="8554891">,</span>&nbsp;<span class="num" id="8554893">0xc450d697</span><span class="op" id="8554903">,</span>&nbsp;<span class="string" id="8554905">&#34;abcde&#34;</span><span class="op" id="8554912">}</span><span class="op" id="8554913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554916">{</span><span class="num" id="8554917">0x4b8e39ef</span><span class="op" id="8554927">,</span>&nbsp;<span class="num" id="8554929">0x53bceff1</span><span class="op" id="8554939">,</span>&nbsp;<span class="string" id="8554941">&#34;abcdef&#34;</span><span class="op" id="8554949">}</span><span class="op" id="8554950">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554953">{</span><span class="num" id="8554954">0x312a6aa6</span><span class="op" id="8554964">,</span>&nbsp;<span class="num" id="8554966">0xe627f441</span><span class="op" id="8554976">,</span>&nbsp;<span class="string" id="8554978">&#34;abcdefg&#34;</span><span class="op" id="8554987">}</span><span class="op" id="8554988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8554991">{</span><span class="num" id="8554992">0xaeef2a50</span><span class="op" id="8555002">,</span>&nbsp;<span class="num" id="8555004">0xa9421b7</span><span class="op" id="8555013">,</span>&nbsp;<span class="string" id="8555015">&#34;abcdefgh&#34;</span><span class="op" id="8555025">}</span><span class="op" id="8555026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555029">{</span><span class="num" id="8555030">0x8da988af</span><span class="op" id="8555040">,</span>&nbsp;<span class="num" id="8555042">0x2ddc99fc</span><span class="op" id="8555052">,</span>&nbsp;<span class="string" id="8555054">&#34;abcdefghi&#34;</span><span class="op" id="8555065">}</span><span class="op" id="8555066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555069">{</span><span class="num" id="8555070">0x3981703a</span><span class="op" id="8555080">,</span>&nbsp;<span class="num" id="8555082">0xe6599437</span><span class="op" id="8555092">,</span>&nbsp;<span class="string" id="8555094">&#34;abcdefghij&#34;</span><span class="op" id="8555106">}</span><span class="op" id="8555107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555110">{</span><span class="num" id="8555111">0x6b9cdfe7</span><span class="op" id="8555121">,</span>&nbsp;<span class="num" id="8555123">0xb2cc01fe</span><span class="op" id="8555133">,</span>&nbsp;<span class="string" id="8555135">&#34;Discard&nbsp;medicine&nbsp;more&nbsp;than&nbsp;two&nbsp;years&nbsp;old.&#34;</span><span class="op" id="8555178">}</span><span class="op" id="8555179">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555182">{</span><span class="num" id="8555183">0xc90ef73f</span><span class="op" id="8555193">,</span>&nbsp;<span class="num" id="8555195">0xe28207f</span><span class="op" id="8555204">,</span>&nbsp;<span class="string" id="8555206">&#34;He&nbsp;who&nbsp;has&nbsp;a&nbsp;shady&nbsp;past&nbsp;knows&nbsp;that&nbsp;nice&nbsp;guys&nbsp;finish&nbsp;last.&#34;</span><span class="op" id="8555265">}</span><span class="op" id="8555266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555269">{</span><span class="num" id="8555270">0xb902341f</span><span class="op" id="8555280">,</span>&nbsp;<span class="num" id="8555282">0xbe93f964</span><span class="op" id="8555292">,</span>&nbsp;<span class="string" id="8555294">&#34;I&nbsp;wouldn&#39;t&nbsp;marry&nbsp;him&nbsp;with&nbsp;a&nbsp;ten&nbsp;foot&nbsp;pole.&#34;</span><span class="op" id="8555338">}</span><span class="op" id="8555339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555342">{</span><span class="num" id="8555343">0x42080e8</span><span class="op" id="8555352">,</span>&nbsp;<span class="num" id="8555354">0x9e3be0c3</span><span class="op" id="8555364">,</span>&nbsp;<span class="string" id="8555366">&#34;Free!&nbsp;Free!/A&nbsp;trip/to&nbsp;Mars/for&nbsp;900/empty&nbsp;jars/Burma&nbsp;Shave&#34;</span><span class="op" id="8555425">}</span><span class="op" id="8555426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555429">{</span><span class="num" id="8555430">0x154c6d11</span><span class="op" id="8555440">,</span>&nbsp;<span class="num" id="8555442">0xf505ef04</span><span class="op" id="8555452">,</span>&nbsp;<span class="string" id="8555454">&#34;The&nbsp;days&nbsp;of&nbsp;the&nbsp;digital&nbsp;watch&nbsp;are&nbsp;numbered.&nbsp;&nbsp;-Tom&nbsp;Stoppard&#34;</span><span class="op" id="8555514">}</span><span class="op" id="8555515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555518">{</span><span class="num" id="8555519">0x4c418325</span><span class="op" id="8555529">,</span>&nbsp;<span class="num" id="8555531">0x85d3dc82</span><span class="op" id="8555541">,</span>&nbsp;<span class="string" id="8555543">&#34;Nepal&nbsp;premier&nbsp;won&#39;t&nbsp;resign.&#34;</span><span class="op" id="8555572">}</span><span class="op" id="8555573">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555576">{</span><span class="num" id="8555577">0x33955150</span><span class="op" id="8555587">,</span>&nbsp;<span class="num" id="8555589">0xc5142380</span><span class="op" id="8555599">,</span>&nbsp;<span class="string" id="8555601">&#34;For&nbsp;every&nbsp;action&nbsp;there&nbsp;is&nbsp;an&nbsp;equal&nbsp;and&nbsp;opposite&nbsp;government&nbsp;program.&#34;</span><span class="op" id="8555670">}</span><span class="op" id="8555671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555674">{</span><span class="num" id="8555675">0x26216a4b</span><span class="op" id="8555685">,</span>&nbsp;<span class="num" id="8555687">0x75eb77dd</span><span class="op" id="8555697">,</span>&nbsp;<span class="string" id="8555699">&#34;His&nbsp;money&nbsp;is&nbsp;twice&nbsp;tainted:&nbsp;&#39;taint&nbsp;yours&nbsp;and&nbsp;&#39;taint&nbsp;mine.&#34;</span><span class="op" id="8555758">}</span><span class="op" id="8555759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555762">{</span><span class="num" id="8555763">0x1abbe45e</span><span class="op" id="8555773">,</span>&nbsp;<span class="num" id="8555775">0x91ebe9f7</span><span class="op" id="8555785">,</span>&nbsp;<span class="string" id="8555787">&#34;There&nbsp;is&nbsp;no&nbsp;reason&nbsp;for&nbsp;any&nbsp;individual&nbsp;to&nbsp;have&nbsp;a&nbsp;computer&nbsp;in&nbsp;their&nbsp;home.&nbsp;-Ken&nbsp;Olsen,&nbsp;1977&#34;</span><span class="op" id="8555877">}</span><span class="op" id="8555878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555881">{</span><span class="num" id="8555882">0xc89a94f7</span><span class="op" id="8555892">,</span>&nbsp;<span class="num" id="8555894">0xf0b1168e</span><span class="op" id="8555904">,</span>&nbsp;<span class="string" id="8555906">&#34;It&#39;s&nbsp;a&nbsp;tiny&nbsp;change&nbsp;to&nbsp;the&nbsp;code&nbsp;and&nbsp;not&nbsp;completely&nbsp;disgusting.&nbsp;-&nbsp;Bob&nbsp;Manchek&#34;</span><span class="op" id="8555983">}</span><span class="op" id="8555984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8555987">{</span><span class="num" id="8555988">0xab3abe14</span><span class="op" id="8555998">,</span>&nbsp;<span class="num" id="8556000">0x572b74e2</span><span class="op" id="8556010">,</span>&nbsp;<span class="string" id="8556012">&#34;size:&nbsp;&nbsp;a.out:&nbsp;&nbsp;bad&nbsp;magic&#34;</span><span class="op" id="8556038">}</span><span class="op" id="8556039">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556042">{</span><span class="num" id="8556043">0xbab102b6</span><span class="op" id="8556053">,</span>&nbsp;<span class="num" id="8556055">0x8a58a6d5</span><span class="op" id="8556065">,</span>&nbsp;<span class="string" id="8556067">&#34;The&nbsp;major&nbsp;problem&nbsp;is&nbsp;with&nbsp;sendmail.&nbsp;&nbsp;-Mark&nbsp;Horton&#34;</span><span class="op" id="8556118">}</span><span class="op" id="8556119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556122">{</span><span class="num" id="8556123">0x999149d7</span><span class="op" id="8556133">,</span>&nbsp;<span class="num" id="8556135">0x9c426c50</span><span class="op" id="8556145">,</span>&nbsp;<span class="string" id="8556147">&#34;Give&nbsp;me&nbsp;a&nbsp;rock,&nbsp;paper&nbsp;and&nbsp;scissors&nbsp;and&nbsp;I&nbsp;will&nbsp;move&nbsp;the&nbsp;world.&nbsp;&nbsp;CCFestoon&#34;</span><span class="op" id="8556221">}</span><span class="op" id="8556222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556225">{</span><span class="num" id="8556226">0x6d52a33c</span><span class="op" id="8556236">,</span>&nbsp;<span class="num" id="8556238">0x735400a4</span><span class="op" id="8556248">,</span>&nbsp;<span class="string" id="8556250">&#34;If&nbsp;the&nbsp;enemy&nbsp;is&nbsp;within&nbsp;range,&nbsp;then&nbsp;so&nbsp;are&nbsp;you.&#34;</span><span class="op" id="8556298">}</span><span class="op" id="8556299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556302">{</span><span class="num" id="8556303">0x90631e8d</span><span class="op" id="8556313">,</span>&nbsp;<span class="num" id="8556315">0xbec49c95</span><span class="op" id="8556325">,</span>&nbsp;<span class="string" id="8556327">&#34;It&#39;s&nbsp;well&nbsp;we&nbsp;cannot&nbsp;hear&nbsp;the&nbsp;screams/That&nbsp;we&nbsp;create&nbsp;in&nbsp;others&#39;&nbsp;dreams.&#34;</span><span class="op" id="8556399">}</span><span class="op" id="8556400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556403">{</span><span class="num" id="8556404">0x78309130</span><span class="op" id="8556414">,</span>&nbsp;<span class="num" id="8556416">0xa95a2079</span><span class="op" id="8556426">,</span>&nbsp;<span class="string" id="8556428">&#34;You&nbsp;remind&nbsp;me&nbsp;of&nbsp;a&nbsp;TV&nbsp;show,&nbsp;but&nbsp;that&#39;s&nbsp;all&nbsp;right:&nbsp;I&nbsp;watch&nbsp;it&nbsp;anyway.&#34;</span><span class="op" id="8556498">}</span><span class="op" id="8556499">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556502">{</span><span class="num" id="8556503">0x7d0a377f</span><span class="op" id="8556513">,</span>&nbsp;<span class="num" id="8556515">0xde2e65c5</span><span class="op" id="8556525">,</span>&nbsp;<span class="string" id="8556527">&#34;C&nbsp;is&nbsp;as&nbsp;portable&nbsp;as&nbsp;Stonehedge!!&#34;</span><span class="op" id="8556561">}</span><span class="op" id="8556562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556565">{</span><span class="num" id="8556566">0x8c79fd79</span><span class="op" id="8556576">,</span>&nbsp;<span class="num" id="8556578">0x297a88ed</span><span class="op" id="8556588">,</span>&nbsp;<span class="string" id="8556590">&#34;Even&nbsp;if&nbsp;I&nbsp;could&nbsp;be&nbsp;Shakespeare,&nbsp;I&nbsp;think&nbsp;I&nbsp;should&nbsp;still&nbsp;choose&nbsp;to&nbsp;be&nbsp;Faraday.&nbsp;-&nbsp;A.&nbsp;Huxley&#34;</span><span class="op" id="8556680">}</span><span class="op" id="8556681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556684">{</span><span class="num" id="8556685">0xa20b7167</span><span class="op" id="8556695">,</span>&nbsp;<span class="num" id="8556697">0x66ed1d8b</span><span class="op" id="8556707">,</span>&nbsp;<span class="string" id="8556709">&#34;The&nbsp;fugacity&nbsp;of&nbsp;a&nbsp;constituent&nbsp;in&nbsp;a&nbsp;mixture&nbsp;of&nbsp;gases&nbsp;at&nbsp;a&nbsp;given&nbsp;temperature&nbsp;is&nbsp;proportional&nbsp;to&nbsp;its&nbsp;mole&nbsp;fraction.&nbsp;&nbsp;Lewis-Randall&nbsp;Rule&#34;</span><span class="op" id="8556843">}</span><span class="op" id="8556844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8556847">{</span><span class="num" id="8556848">0x8e0bb443</span><span class="op" id="8556858">,</span>&nbsp;<span class="num" id="8556860">0xdcded527</span><span class="op" id="8556870">,</span>&nbsp;<span class="string" id="8556872">&#34;How&nbsp;can&nbsp;you&nbsp;write&nbsp;a&nbsp;big&nbsp;system&nbsp;without&nbsp;C++?&nbsp;&nbsp;-Paul&nbsp;Glick&#34;</span><span class="op" id="8556930">}</span><span class="op" id="8556931">,</span><br>
<span class="lineno"></span><span class="op" id="8556933">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="8556936">func</span>&nbsp;<span class="ident" id="8556941">TestGolden</span><span class="op" id="8556951">(</span><span class="ident" id="8556952">t</span>&nbsp;<span class="op" id="8556954">*</span><span class="ident" id="8556955">testing</span><span class="op" id="8556962">.</span><span class="ident" id="8556963">T</span><span class="op" id="8556964">)</span>&nbsp;<span class="op" id="8556966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8556969">castagnoliTab</span>&nbsp;<span class="op" id="8556983">:=</span>&nbsp;<span class="ident" id="8556986">MakeTable</span><span class="op" id="8556995">(</span><span class="ident" id="8556996">Castagnoli</span><span class="op" id="8557006">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557010">for</span>&nbsp;<span class="ident" id="8557014">_</span><span class="op" id="8557015">,</span>&nbsp;<span class="ident" id="8557017">g</span>&nbsp;<span class="op" id="8557019">:=</span>&nbsp;<span class="keyword" id="8557022">range</span>&nbsp;<span class="ident" id="8557028">golden</span>&nbsp;<span class="op" id="8557035">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557039">ieee</span>&nbsp;<span class="op" id="8557044">:=</span>&nbsp;<span class="ident" id="8557047">NewIEEE</span><span class="op" id="8557054">(</span><span class="op" id="8557055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557059">io</span><span class="op" id="8557061">.</span><span class="ident" id="8557062">WriteString</span><span class="op" id="8557073">(</span><span class="ident" id="8557074">ieee</span><span class="op" id="8557078">,</span>&nbsp;<span class="ident" id="8557080">g</span><span class="op" id="8557081">.</span><span class="ident" id="8557082">in</span><span class="op" id="8557084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557088">s</span>&nbsp;<span class="op" id="8557090">:=</span>&nbsp;<span class="ident" id="8557093">ieee</span><span class="op" id="8557097">.</span><span class="ident" id="8557098">Sum32</span><span class="op" id="8557103">(</span><span class="op" id="8557104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557108">if</span>&nbsp;<span class="ident" id="8557111">s</span>&nbsp;<span class="op" id="8557113">!=</span>&nbsp;<span class="ident" id="8557116">g</span><span class="op" id="8557117">.</span><span class="ident" id="8557118">ieee</span>&nbsp;<span class="op" id="8557123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557128">t</span><span class="op" id="8557129">.</span><span class="ident" id="8557130">Errorf</span><span class="op" id="8557136">(</span><span class="string" id="8557137">&#34;IEEE(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8557164">,</span>&nbsp;<span class="ident" id="8557166">g</span><span class="op" id="8557167">.</span><span class="ident" id="8557168">in</span><span class="op" id="8557170">,</span>&nbsp;<span class="ident" id="8557172">s</span><span class="op" id="8557173">,</span>&nbsp;<span class="ident" id="8557175">g</span><span class="op" id="8557176">.</span><span class="ident" id="8557177">ieee</span><span class="op" id="8557181">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557190">castagnoli</span>&nbsp;<span class="op" id="8557201">:=</span>&nbsp;<span class="ident" id="8557204">New</span><span class="op" id="8557207">(</span><span class="ident" id="8557208">castagnoliTab</span><span class="op" id="8557221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557225">io</span><span class="op" id="8557227">.</span><span class="ident" id="8557228">WriteString</span><span class="op" id="8557239">(</span><span class="ident" id="8557240">castagnoli</span><span class="op" id="8557250">,</span>&nbsp;<span class="ident" id="8557252">g</span><span class="op" id="8557253">.</span><span class="ident" id="8557254">in</span><span class="op" id="8557256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557260">s</span>&nbsp;<span class="op" id="8557262">=</span>&nbsp;<span class="ident" id="8557264">castagnoli</span><span class="op" id="8557274">.</span><span class="ident" id="8557275">Sum32</span><span class="op" id="8557280">(</span><span class="op" id="8557281">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557285">if</span>&nbsp;<span class="ident" id="8557288">s</span>&nbsp;<span class="op" id="8557290">!=</span>&nbsp;<span class="ident" id="8557293">g</span><span class="op" id="8557294">.</span><span class="ident" id="8557295">castagnoli</span>&nbsp;<span class="op" id="8557306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557311">t</span><span class="op" id="8557312">.</span><span class="ident" id="8557313">Errorf</span><span class="op" id="8557319">(</span><span class="string" id="8557320">&#34;Castagnoli(%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8557353">,</span>&nbsp;<span class="ident" id="8557355">g</span><span class="op" id="8557356">.</span><span class="ident" id="8557357">in</span><span class="op" id="8557359">,</span>&nbsp;<span class="ident" id="8557361">s</span><span class="op" id="8557362">,</span>&nbsp;<span class="ident" id="8557364">g</span><span class="op" id="8557365">.</span><span class="ident" id="8557366">castagnoli</span><span class="op" id="8557376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557385">if</span>&nbsp;<span class="builtinfunc" id="8557388">len</span><span class="op" id="8557391">(</span><span class="ident" id="8557392">g</span><span class="op" id="8557393">.</span><span class="ident" id="8557394">in</span><span class="op" id="8557396">)</span>&nbsp;<span class="op" id="8557398">&gt;</span>&nbsp;<span class="num" id="8557400">0</span>&nbsp;<span class="op" id="8557402">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8557407">//&nbsp;The&nbsp;SSE4.2&nbsp;implementation&nbsp;of&nbsp;this&nbsp;has&nbsp;code&nbsp;to&nbsp;deal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8557464">//&nbsp;with&nbsp;misaligned&nbsp;data&nbsp;so&nbsp;we&nbsp;ensure&nbsp;that&nbsp;we&nbsp;test&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8557522">//&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557533">castagnoli</span>&nbsp;<span class="op" id="8557544">=</span>&nbsp;<span class="ident" id="8557546">New</span><span class="op" id="8557549">(</span><span class="ident" id="8557550">castagnoliTab</span><span class="op" id="8557563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557568">io</span><span class="op" id="8557570">.</span><span class="ident" id="8557571">WriteString</span><span class="op" id="8557582">(</span><span class="ident" id="8557583">castagnoli</span><span class="op" id="8557593">,</span>&nbsp;<span class="ident" id="8557595">g</span><span class="op" id="8557596">.</span><span class="ident" id="8557597">in</span><span class="op" id="8557599">[</span><span class="op" id="8557600">:</span><span class="num" id="8557601">1</span><span class="op" id="8557602">]</span><span class="op" id="8557603">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557608">io</span><span class="op" id="8557610">.</span><span class="ident" id="8557611">WriteString</span><span class="op" id="8557622">(</span><span class="ident" id="8557623">castagnoli</span><span class="op" id="8557633">,</span>&nbsp;<span class="ident" id="8557635">g</span><span class="op" id="8557636">.</span><span class="ident" id="8557637">in</span><span class="op" id="8557639">[</span><span class="num" id="8557640">1</span><span class="op" id="8557641">:</span><span class="op" id="8557642">]</span><span class="op" id="8557643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557648">s</span>&nbsp;<span class="op" id="8557650">=</span>&nbsp;<span class="ident" id="8557652">castagnoli</span><span class="op" id="8557662">.</span><span class="ident" id="8557663">Sum32</span><span class="op" id="8557668">(</span><span class="op" id="8557669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557674">if</span>&nbsp;<span class="ident" id="8557677">s</span>&nbsp;<span class="op" id="8557679">!=</span>&nbsp;<span class="ident" id="8557682">g</span><span class="op" id="8557683">.</span><span class="ident" id="8557684">castagnoli</span>&nbsp;<span class="op" id="8557695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557701">t</span><span class="op" id="8557702">.</span><span class="ident" id="8557703">Errorf</span><span class="op" id="8557709">(</span><span class="string" id="8557710">&#34;Castagnoli[misaligned](%s)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="8557755">,</span>&nbsp;<span class="ident" id="8557757">g</span><span class="op" id="8557758">.</span><span class="ident" id="8557759">in</span><span class="op" id="8557761">,</span>&nbsp;<span class="ident" id="8557763">s</span><span class="op" id="8557764">,</span>&nbsp;<span class="ident" id="8557766">g</span><span class="op" id="8557767">.</span><span class="ident" id="8557768">castagnoli</span><span class="op" id="8557778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557783">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557790">}</span><br>
<span class="lineno"></span><span class="op" id="8557792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8557795">func</span>&nbsp;<span class="ident" id="8557800">BenchmarkCrc32KB</span><span class="op" id="8557816">(</span><span class="ident" id="8557817">b</span>&nbsp;<span class="op" id="8557819">*</span><span class="ident" id="8557820">testing</span><span class="op" id="8557827">.</span><span class="ident" id="8557828">B</span><span class="op" id="8557829">)</span>&nbsp;<span class="op" id="8557831">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557834">b</span><span class="op" id="8557835">.</span><span class="ident" id="8557836">SetBytes</span><span class="op" id="8557844">(</span><span class="num" id="8557845">1024</span><span class="op" id="8557849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557852">data</span>&nbsp;<span class="op" id="8557857">:=</span>&nbsp;<span class="builtinfunc" id="8557860">make</span><span class="op" id="8557864">(</span><span class="op" id="8557865">[</span><span class="op" id="8557866">]</span><span class="builtintype" id="8557867">byte</span><span class="op" id="8557871">,</span>&nbsp;<span class="num" id="8557873">1024</span><span class="op" id="8557877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557880">for</span>&nbsp;<span class="ident" id="8557884">i</span>&nbsp;<span class="op" id="8557886">:=</span>&nbsp;<span class="keyword" id="8557889">range</span>&nbsp;<span class="ident" id="8557895">data</span>&nbsp;<span class="op" id="8557900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557904">data</span><span class="op" id="8557908">[</span><span class="ident" id="8557909">i</span><span class="op" id="8557910">]</span>&nbsp;<span class="op" id="8557912">=</span>&nbsp;<span class="builtintype" id="8557914">byte</span><span class="op" id="8557918">(</span><span class="ident" id="8557919">i</span><span class="op" id="8557920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8557923">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557926">h</span>&nbsp;<span class="op" id="8557928">:=</span>&nbsp;<span class="ident" id="8557931">NewIEEE</span><span class="op" id="8557938">(</span><span class="op" id="8557939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557942">in</span>&nbsp;<span class="op" id="8557945">:=</span>&nbsp;<span class="builtinfunc" id="8557948">make</span><span class="op" id="8557952">(</span><span class="op" id="8557953">[</span><span class="op" id="8557954">]</span><span class="builtintype" id="8557955">byte</span><span class="op" id="8557959">,</span>&nbsp;<span class="num" id="8557961">0</span><span class="op" id="8557962">,</span>&nbsp;<span class="ident" id="8557964">h</span><span class="op" id="8557965">.</span><span class="ident" id="8557966">Size</span><span class="op" id="8557970">(</span><span class="op" id="8557971">)</span><span class="op" id="8557972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8557976">b</span><span class="op" id="8557977">.</span><span class="ident" id="8557978">ResetTimer</span><span class="op" id="8557988">(</span><span class="op" id="8557989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8557992">for</span>&nbsp;<span class="ident" id="8557996">i</span>&nbsp;<span class="op" id="8557998">:=</span>&nbsp;<span class="num" id="8558001">0</span><span class="op" id="8558002">;</span>&nbsp;<span class="ident" id="8558004">i</span>&nbsp;<span class="op" id="8558006">&lt;</span>&nbsp;<span class="ident" id="8558008">b</span><span class="op" id="8558009">.</span><span class="ident" id="8558010">N</span><span class="op" id="8558011">;</span>&nbsp;<span class="ident" id="8558013">i</span><span class="op" id="8558014">++</span>&nbsp;<span class="op" id="8558017">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8558021">h</span><span class="op" id="8558022">.</span><span class="ident" id="8558023">Reset</span><span class="op" id="8558028">(</span><span class="op" id="8558029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8558033">h</span><span class="op" id="8558034">.</span><span class="ident" id="8558035">Write</span><span class="op" id="8558040">(</span><span class="ident" id="8558041">data</span><span class="op" id="8558045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8558049">h</span><span class="op" id="8558050">.</span><span class="ident" id="8558051">Sum</span><span class="op" id="8558054">(</span><span class="ident" id="8558055">in</span><span class="op" id="8558057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8558060">}</span><br>
<span class="lineno"></span><span class="op" id="8558062">}</span>
</div>
</body>
</html>
