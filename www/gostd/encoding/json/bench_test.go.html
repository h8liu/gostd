<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8149247">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8149303">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8149357">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8149408">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="8149433">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8149487">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="8149537">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="8149586">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="8149621">package</span>&nbsp;<span class="ident" id="8149629">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8149635">import</span>&nbsp;<span class="op" id="8149642">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8149645">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8149654">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8149671">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8149684">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8149690">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8149700">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8149703">type</span>&nbsp;<span class="ident" id="8149708">codeResponse</span>&nbsp;<span class="keyword" id="8149721">struct</span>&nbsp;<span class="op" id="8149728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149731">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8149740">*</span><span class="ident" id="8149741">codeNode</span>&nbsp;<span class="string" id="8149750">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149765">Username</span>&nbsp;<span class="builtintype" id="8149774">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8149784">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8149802">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8149805">type</span>&nbsp;<span class="ident" id="8149810">codeNode</span>&nbsp;<span class="keyword" id="8149819">struct</span>&nbsp;<span class="op" id="8149826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149829">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8149838">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8149850">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149865">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8149874">[</span><span class="op" id="8149875">]</span><span class="op" id="8149876">*</span><span class="ident" id="8149877">codeNode</span>&nbsp;<span class="string" id="8149886">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149901">CLWeight</span>&nbsp;<span class="builtintype" id="8149910">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8149922">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149942">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="8149951">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8149963">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8149981">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8149990">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8150002">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150018">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8150027">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8150039">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150055">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8150064">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8150076">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="8150092">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8150095">var</span>&nbsp;<span class="ident" id="8150099">codeJSON</span>&nbsp;<span class="op" id="8150108">[</span><span class="op" id="8150109">]</span><span class="builtintype" id="8150110">byte</span><br>
<span class="lineno"></span><span class="keyword" id="8150115">var</span>&nbsp;<span class="ident" id="8150119">codeStruct</span>&nbsp;<span class="ident" id="8150130">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8150144">func</span>&nbsp;<span class="ident" id="8150149">codeInit</span><span class="op" id="8150157">(</span><span class="op" id="8150158">)</span>&nbsp;<span class="op" id="8150160">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150163">f</span><span class="op" id="8150164">,</span>&nbsp;<span class="ident" id="8150166">err</span>&nbsp;<span class="op" id="8150170">:=</span>&nbsp;<span class="ident" id="8150173">os</span><span class="op" id="8150175">.</span><span class="ident" id="8150176">Open</span><span class="op" id="8150180">(</span><span class="string" id="8150181">&#34;testdata/code.json.gz&#34;</span><span class="op" id="8150204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150207">if</span>&nbsp;<span class="ident" id="8150210">err</span>&nbsp;<span class="op" id="8150214">!=</span>&nbsp;<span class="ident" id="8150217">nil</span>&nbsp;<span class="op" id="8150221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150225">panic</span><span class="op" id="8150230">(</span><span class="ident" id="8150231">err</span><span class="op" id="8150234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150240">defer</span>&nbsp;<span class="ident" id="8150246">f</span><span class="op" id="8150247">.</span><span class="ident" id="8150248">Close</span><span class="op" id="8150253">(</span><span class="op" id="8150254">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150257">gz</span><span class="op" id="8150259">,</span>&nbsp;<span class="ident" id="8150261">err</span>&nbsp;<span class="op" id="8150265">:=</span>&nbsp;<span class="ident" id="8150268">gzip</span><span class="op" id="8150272">.</span><span class="ident" id="8150273">NewReader</span><span class="op" id="8150282">(</span><span class="ident" id="8150283">f</span><span class="op" id="8150284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150287">if</span>&nbsp;<span class="ident" id="8150290">err</span>&nbsp;<span class="op" id="8150294">!=</span>&nbsp;<span class="ident" id="8150297">nil</span>&nbsp;<span class="op" id="8150301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150305">panic</span><span class="op" id="8150310">(</span><span class="ident" id="8150311">err</span><span class="op" id="8150314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150320">data</span><span class="op" id="8150324">,</span>&nbsp;<span class="ident" id="8150326">err</span>&nbsp;<span class="op" id="8150330">:=</span>&nbsp;<span class="ident" id="8150333">ioutil</span><span class="op" id="8150339">.</span><span class="ident" id="8150340">ReadAll</span><span class="op" id="8150347">(</span><span class="ident" id="8150348">gz</span><span class="op" id="8150350">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150353">if</span>&nbsp;<span class="ident" id="8150356">err</span>&nbsp;<span class="op" id="8150360">!=</span>&nbsp;<span class="ident" id="8150363">nil</span>&nbsp;<span class="op" id="8150367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150371">panic</span><span class="op" id="8150376">(</span><span class="ident" id="8150377">err</span><span class="op" id="8150380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8150387">codeJSON</span>&nbsp;<span class="op" id="8150396">=</span>&nbsp;<span class="ident" id="8150398">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150405">if</span>&nbsp;<span class="ident" id="8150408">err</span>&nbsp;<span class="op" id="8150412">:=</span>&nbsp;<span class="ident" id="8150415">Unmarshal</span><span class="op" id="8150424">(</span><span class="ident" id="8150425">codeJSON</span><span class="op" id="8150433">,</span>&nbsp;<span class="op" id="8150435">&amp;</span><span class="ident" id="8150436">codeStruct</span><span class="op" id="8150446">)</span><span class="op" id="8150447">;</span>&nbsp;<span class="ident" id="8150449">err</span>&nbsp;<span class="op" id="8150453">!=</span>&nbsp;<span class="ident" id="8150456">nil</span>&nbsp;<span class="op" id="8150460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150464">panic</span><span class="op" id="8150469">(</span><span class="string" id="8150470">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8150494">+</span>&nbsp;<span class="ident" id="8150496">err</span><span class="op" id="8150499">.</span><span class="ident" id="8150500">Error</span><span class="op" id="8150505">(</span><span class="op" id="8150506">)</span><span class="op" id="8150507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150514">if</span>&nbsp;<span class="ident" id="8150517">data</span><span class="op" id="8150521">,</span>&nbsp;<span class="ident" id="8150523">err</span>&nbsp;<span class="op" id="8150527">=</span>&nbsp;<span class="ident" id="8150529">Marshal</span><span class="op" id="8150536">(</span><span class="op" id="8150537">&amp;</span><span class="ident" id="8150538">codeStruct</span><span class="op" id="8150548">)</span><span class="op" id="8150549">;</span>&nbsp;<span class="ident" id="8150551">err</span>&nbsp;<span class="op" id="8150555">!=</span>&nbsp;<span class="ident" id="8150558">nil</span>&nbsp;<span class="op" id="8150562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150566">panic</span><span class="op" id="8150571">(</span><span class="string" id="8150572">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="8150594">+</span>&nbsp;<span class="ident" id="8150596">err</span><span class="op" id="8150599">.</span><span class="ident" id="8150600">Error</span><span class="op" id="8150605">(</span><span class="op" id="8150606">)</span><span class="op" id="8150607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150614">if</span>&nbsp;<span class="op" id="8150617">!</span><span class="ident" id="8150618">bytes</span><span class="op" id="8150623">.</span><span class="ident" id="8150624">Equal</span><span class="op" id="8150629">(</span><span class="ident" id="8150630">data</span><span class="op" id="8150634">,</span>&nbsp;<span class="ident" id="8150636">codeJSON</span><span class="op" id="8150644">)</span>&nbsp;<span class="op" id="8150646">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150650">println</span><span class="op" id="8150657">(</span><span class="string" id="8150658">&#34;different&nbsp;lengths&#34;</span><span class="op" id="8150677">,</span>&nbsp;<span class="builtinfunc" id="8150679">len</span><span class="op" id="8150682">(</span><span class="ident" id="8150683">data</span><span class="op" id="8150687">)</span><span class="op" id="8150688">,</span>&nbsp;<span class="builtinfunc" id="8150690">len</span><span class="op" id="8150693">(</span><span class="ident" id="8150694">codeJSON</span><span class="op" id="8150702">)</span><span class="op" id="8150703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150707">for</span>&nbsp;<span class="ident" id="8150711">i</span>&nbsp;<span class="op" id="8150713">:=</span>&nbsp;<span class="num" id="8150716">0</span><span class="op" id="8150717">;</span>&nbsp;<span class="ident" id="8150719">i</span>&nbsp;<span class="op" id="8150721">&lt;</span>&nbsp;<span class="builtinfunc" id="8150723">len</span><span class="op" id="8150726">(</span><span class="ident" id="8150727">data</span><span class="op" id="8150731">)</span>&nbsp;<span class="op" id="8150733">&amp;&amp;</span>&nbsp;<span class="ident" id="8150736">i</span>&nbsp;<span class="op" id="8150738">&lt;</span>&nbsp;<span class="builtinfunc" id="8150740">len</span><span class="op" id="8150743">(</span><span class="ident" id="8150744">codeJSON</span><span class="op" id="8150752">)</span><span class="op" id="8150753">;</span>&nbsp;<span class="ident" id="8150755">i</span><span class="op" id="8150756">++</span>&nbsp;<span class="op" id="8150759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150764">if</span>&nbsp;<span class="ident" id="8150767">data</span><span class="op" id="8150771">[</span><span class="ident" id="8150772">i</span><span class="op" id="8150773">]</span>&nbsp;<span class="op" id="8150775">!=</span>&nbsp;<span class="ident" id="8150778">codeJSON</span><span class="op" id="8150786">[</span><span class="ident" id="8150787">i</span><span class="op" id="8150788">]</span>&nbsp;<span class="op" id="8150790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150796">println</span><span class="op" id="8150803">(</span><span class="string" id="8150804">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="8150833">,</span>&nbsp;<span class="ident" id="8150835">i</span><span class="op" id="8150836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150842">println</span><span class="op" id="8150849">(</span><span class="string" id="8150850">&#34;orig:&nbsp;&#34;</span><span class="op" id="8150858">,</span>&nbsp;<span class="builtintype" id="8150860">string</span><span class="op" id="8150866">(</span><span class="ident" id="8150867">codeJSON</span><span class="op" id="8150875">[</span><span class="ident" id="8150876">i</span><span class="op" id="8150877">-</span><span class="num" id="8150878">10</span><span class="op" id="8150880">:</span><span class="ident" id="8150881">i</span><span class="op" id="8150882">+</span><span class="num" id="8150883">10</span><span class="op" id="8150885">]</span><span class="op" id="8150886">)</span><span class="op" id="8150887">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150893">println</span><span class="op" id="8150900">(</span><span class="string" id="8150901">&#34;new:&nbsp;&#34;</span><span class="op" id="8150908">,</span>&nbsp;<span class="builtintype" id="8150910">string</span><span class="op" id="8150916">(</span><span class="ident" id="8150917">data</span><span class="op" id="8150921">[</span><span class="ident" id="8150922">i</span><span class="op" id="8150923">-</span><span class="num" id="8150924">10</span><span class="op" id="8150926">:</span><span class="ident" id="8150927">i</span><span class="op" id="8150928">+</span><span class="num" id="8150929">10</span><span class="op" id="8150931">]</span><span class="op" id="8150932">)</span><span class="op" id="8150933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8150939">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8150952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8150956">panic</span><span class="op" id="8150961">(</span><span class="string" id="8150962">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="8151002">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151005">}</span><br>
<span class="lineno"></span><span class="op" id="8151007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8151010">func</span>&nbsp;<span class="ident" id="8151015">BenchmarkCodeEncoder</span><span class="op" id="8151035">(</span><span class="ident" id="8151036">b</span>&nbsp;<span class="op" id="8151038">*</span><span class="ident" id="8151039">testing</span><span class="op" id="8151046">.</span><span class="ident" id="8151047">B</span><span class="op" id="8151048">)</span>&nbsp;<span class="op" id="8151050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151053">if</span>&nbsp;<span class="ident" id="8151056">codeJSON</span>&nbsp;<span class="op" id="8151065">==</span>&nbsp;<span class="ident" id="8151068">nil</span>&nbsp;<span class="op" id="8151072">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151076">b</span><span class="op" id="8151077">.</span><span class="ident" id="8151078">StopTimer</span><span class="op" id="8151087">(</span><span class="op" id="8151088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151092">codeInit</span><span class="op" id="8151100">(</span><span class="op" id="8151101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151105">b</span><span class="op" id="8151106">.</span><span class="ident" id="8151107">StartTimer</span><span class="op" id="8151117">(</span><span class="op" id="8151118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151124">enc</span>&nbsp;<span class="op" id="8151128">:=</span>&nbsp;<span class="ident" id="8151131">NewEncoder</span><span class="op" id="8151141">(</span><span class="ident" id="8151142">ioutil</span><span class="op" id="8151148">.</span><span class="ident" id="8151149">Discard</span><span class="op" id="8151156">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151159">for</span>&nbsp;<span class="ident" id="8151163">i</span>&nbsp;<span class="op" id="8151165">:=</span>&nbsp;<span class="num" id="8151168">0</span><span class="op" id="8151169">;</span>&nbsp;<span class="ident" id="8151171">i</span>&nbsp;<span class="op" id="8151173">&lt;</span>&nbsp;<span class="ident" id="8151175">b</span><span class="op" id="8151176">.</span><span class="ident" id="8151177">N</span><span class="op" id="8151178">;</span>&nbsp;<span class="ident" id="8151180">i</span><span class="op" id="8151181">++</span>&nbsp;<span class="op" id="8151184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151188">if</span>&nbsp;<span class="ident" id="8151191">err</span>&nbsp;<span class="op" id="8151195">:=</span>&nbsp;<span class="ident" id="8151198">enc</span><span class="op" id="8151201">.</span><span class="ident" id="8151202">Encode</span><span class="op" id="8151208">(</span><span class="op" id="8151209">&amp;</span><span class="ident" id="8151210">codeStruct</span><span class="op" id="8151220">)</span><span class="op" id="8151221">;</span>&nbsp;<span class="ident" id="8151223">err</span>&nbsp;<span class="op" id="8151227">!=</span>&nbsp;<span class="ident" id="8151230">nil</span>&nbsp;<span class="op" id="8151234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151239">b</span><span class="op" id="8151240">.</span><span class="ident" id="8151241">Fatal</span><span class="op" id="8151246">(</span><span class="string" id="8151247">&#34;Encode:&#34;</span><span class="op" id="8151256">,</span>&nbsp;<span class="ident" id="8151258">err</span><span class="op" id="8151261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151268">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151271">b</span><span class="op" id="8151272">.</span><span class="ident" id="8151273">SetBytes</span><span class="op" id="8151281">(</span><span class="ident" id="8151282">int64</span><span class="op" id="8151287">(</span><span class="builtinfunc" id="8151288">len</span><span class="op" id="8151291">(</span><span class="ident" id="8151292">codeJSON</span><span class="op" id="8151300">)</span><span class="op" id="8151301">)</span><span class="op" id="8151302">)</span><br>
<span class="lineno"></span><span class="op" id="8151304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8151307">func</span>&nbsp;<span class="ident" id="8151312">BenchmarkCodeMarshal</span><span class="op" id="8151332">(</span><span class="ident" id="8151333">b</span>&nbsp;<span class="op" id="8151335">*</span><span class="ident" id="8151336">testing</span><span class="op" id="8151343">.</span><span class="ident" id="8151344">B</span><span class="op" id="8151345">)</span>&nbsp;<span class="op" id="8151347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151350">if</span>&nbsp;<span class="ident" id="8151353">codeJSON</span>&nbsp;<span class="op" id="8151362">==</span>&nbsp;<span class="ident" id="8151365">nil</span>&nbsp;<span class="op" id="8151369">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151373">b</span><span class="op" id="8151374">.</span><span class="ident" id="8151375">StopTimer</span><span class="op" id="8151384">(</span><span class="op" id="8151385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151389">codeInit</span><span class="op" id="8151397">(</span><span class="op" id="8151398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151402">b</span><span class="op" id="8151403">.</span><span class="ident" id="8151404">StartTimer</span><span class="op" id="8151414">(</span><span class="op" id="8151415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151421">for</span>&nbsp;<span class="ident" id="8151425">i</span>&nbsp;<span class="op" id="8151427">:=</span>&nbsp;<span class="num" id="8151430">0</span><span class="op" id="8151431">;</span>&nbsp;<span class="ident" id="8151433">i</span>&nbsp;<span class="op" id="8151435">&lt;</span>&nbsp;<span class="ident" id="8151437">b</span><span class="op" id="8151438">.</span><span class="ident" id="8151439">N</span><span class="op" id="8151440">;</span>&nbsp;<span class="ident" id="8151442">i</span><span class="op" id="8151443">++</span>&nbsp;<span class="op" id="8151446">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151450">if</span>&nbsp;<span class="ident" id="8151453">_</span><span class="op" id="8151454">,</span>&nbsp;<span class="ident" id="8151456">err</span>&nbsp;<span class="op" id="8151460">:=</span>&nbsp;<span class="ident" id="8151463">Marshal</span><span class="op" id="8151470">(</span><span class="op" id="8151471">&amp;</span><span class="ident" id="8151472">codeStruct</span><span class="op" id="8151482">)</span><span class="op" id="8151483">;</span>&nbsp;<span class="ident" id="8151485">err</span>&nbsp;<span class="op" id="8151489">!=</span>&nbsp;<span class="ident" id="8151492">nil</span>&nbsp;<span class="op" id="8151496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151501">b</span><span class="op" id="8151502">.</span><span class="ident" id="8151503">Fatal</span><span class="op" id="8151508">(</span><span class="string" id="8151509">&#34;Marshal:&#34;</span><span class="op" id="8151519">,</span>&nbsp;<span class="ident" id="8151521">err</span><span class="op" id="8151524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151534">b</span><span class="op" id="8151535">.</span><span class="ident" id="8151536">SetBytes</span><span class="op" id="8151544">(</span><span class="ident" id="8151545">int64</span><span class="op" id="8151550">(</span><span class="builtinfunc" id="8151551">len</span><span class="op" id="8151554">(</span><span class="ident" id="8151555">codeJSON</span><span class="op" id="8151563">)</span><span class="op" id="8151564">)</span><span class="op" id="8151565">)</span><br>
<span class="lineno">105</span><span class="op" id="8151567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8151570">func</span>&nbsp;<span class="ident" id="8151575">BenchmarkCodeDecoder</span><span class="op" id="8151595">(</span><span class="ident" id="8151596">b</span>&nbsp;<span class="op" id="8151598">*</span><span class="ident" id="8151599">testing</span><span class="op" id="8151606">.</span><span class="ident" id="8151607">B</span><span class="op" id="8151608">)</span>&nbsp;<span class="op" id="8151610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151613">if</span>&nbsp;<span class="ident" id="8151616">codeJSON</span>&nbsp;<span class="op" id="8151625">==</span>&nbsp;<span class="ident" id="8151628">nil</span>&nbsp;<span class="op" id="8151632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151636">b</span><span class="op" id="8151637">.</span><span class="ident" id="8151638">StopTimer</span><span class="op" id="8151647">(</span><span class="op" id="8151648">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151652">codeInit</span><span class="op" id="8151660">(</span><span class="op" id="8151661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151665">b</span><span class="op" id="8151666">.</span><span class="ident" id="8151667">StartTimer</span><span class="op" id="8151677">(</span><span class="op" id="8151678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151684">var</span>&nbsp;<span class="ident" id="8151688">buf</span>&nbsp;<span class="ident" id="8151692">bytes</span><span class="op" id="8151697">.</span><span class="ident" id="8151698">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151706">dec</span>&nbsp;<span class="op" id="8151710">:=</span>&nbsp;<span class="ident" id="8151713">NewDecoder</span><span class="op" id="8151723">(</span><span class="op" id="8151724">&amp;</span><span class="ident" id="8151725">buf</span><span class="op" id="8151728">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151731">var</span>&nbsp;<span class="ident" id="8151735">r</span>&nbsp;<span class="ident" id="8151737">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151751">for</span>&nbsp;<span class="ident" id="8151755">i</span>&nbsp;<span class="op" id="8151757">:=</span>&nbsp;<span class="num" id="8151760">0</span><span class="op" id="8151761">;</span>&nbsp;<span class="ident" id="8151763">i</span>&nbsp;<span class="op" id="8151765">&lt;</span>&nbsp;<span class="ident" id="8151767">b</span><span class="op" id="8151768">.</span><span class="ident" id="8151769">N</span><span class="op" id="8151770">;</span>&nbsp;<span class="ident" id="8151772">i</span><span class="op" id="8151773">++</span>&nbsp;<span class="op" id="8151776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151780">buf</span><span class="op" id="8151783">.</span><span class="ident" id="8151784">Write</span><span class="op" id="8151789">(</span><span class="ident" id="8151790">codeJSON</span><span class="op" id="8151798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8151802">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151816">buf</span><span class="op" id="8151819">.</span><span class="ident" id="8151820">WriteByte</span><span class="op" id="8151829">(</span><span class="string" id="8151830">&#39;\n&#39;</span><span class="op" id="8151834">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151838">buf</span><span class="op" id="8151841">.</span><span class="ident" id="8151842">WriteByte</span><span class="op" id="8151851">(</span><span class="string" id="8151852">&#39;\n&#39;</span><span class="op" id="8151856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151860">buf</span><span class="op" id="8151863">.</span><span class="ident" id="8151864">WriteByte</span><span class="op" id="8151873">(</span><span class="string" id="8151874">&#39;\n&#39;</span><span class="op" id="8151878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8151882">if</span>&nbsp;<span class="ident" id="8151885">err</span>&nbsp;<span class="op" id="8151889">:=</span>&nbsp;<span class="ident" id="8151892">dec</span><span class="op" id="8151895">.</span><span class="ident" id="8151896">Decode</span><span class="op" id="8151902">(</span><span class="op" id="8151903">&amp;</span><span class="ident" id="8151904">r</span><span class="op" id="8151905">)</span><span class="op" id="8151906">;</span>&nbsp;<span class="ident" id="8151908">err</span>&nbsp;<span class="op" id="8151912">!=</span>&nbsp;<span class="ident" id="8151915">nil</span>&nbsp;<span class="op" id="8151919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151924">b</span><span class="op" id="8151925">.</span><span class="ident" id="8151926">Fatal</span><span class="op" id="8151931">(</span><span class="string" id="8151932">&#34;Decode:&#34;</span><span class="op" id="8151941">,</span>&nbsp;<span class="ident" id="8151943">err</span><span class="op" id="8151946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151950">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8151953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8151956">b</span><span class="op" id="8151957">.</span><span class="ident" id="8151958">SetBytes</span><span class="op" id="8151966">(</span><span class="ident" id="8151967">int64</span><span class="op" id="8151972">(</span><span class="builtinfunc" id="8151973">len</span><span class="op" id="8151976">(</span><span class="ident" id="8151977">codeJSON</span><span class="op" id="8151985">)</span><span class="op" id="8151986">)</span><span class="op" id="8151987">)</span><br>
<span class="lineno"></span><span class="op" id="8151989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8151992">func</span>&nbsp;<span class="ident" id="8151997">BenchmarkCodeUnmarshal</span><span class="op" id="8152019">(</span><span class="ident" id="8152020">b</span>&nbsp;<span class="op" id="8152022">*</span><span class="ident" id="8152023">testing</span><span class="op" id="8152030">.</span><span class="ident" id="8152031">B</span><span class="op" id="8152032">)</span>&nbsp;<span class="op" id="8152034">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152037">if</span>&nbsp;<span class="ident" id="8152040">codeJSON</span>&nbsp;<span class="op" id="8152049">==</span>&nbsp;<span class="ident" id="8152052">nil</span>&nbsp;<span class="op" id="8152056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152060">b</span><span class="op" id="8152061">.</span><span class="ident" id="8152062">StopTimer</span><span class="op" id="8152071">(</span><span class="op" id="8152072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152076">codeInit</span><span class="op" id="8152084">(</span><span class="op" id="8152085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152089">b</span><span class="op" id="8152090">.</span><span class="ident" id="8152091">StartTimer</span><span class="op" id="8152101">(</span><span class="op" id="8152102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152105">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152108">for</span>&nbsp;<span class="ident" id="8152112">i</span>&nbsp;<span class="op" id="8152114">:=</span>&nbsp;<span class="num" id="8152117">0</span><span class="op" id="8152118">;</span>&nbsp;<span class="ident" id="8152120">i</span>&nbsp;<span class="op" id="8152122">&lt;</span>&nbsp;<span class="ident" id="8152124">b</span><span class="op" id="8152125">.</span><span class="ident" id="8152126">N</span><span class="op" id="8152127">;</span>&nbsp;<span class="ident" id="8152129">i</span><span class="op" id="8152130">++</span>&nbsp;<span class="op" id="8152133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152137">var</span>&nbsp;<span class="ident" id="8152141">r</span>&nbsp;<span class="ident" id="8152143">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152158">if</span>&nbsp;<span class="ident" id="8152161">err</span>&nbsp;<span class="op" id="8152165">:=</span>&nbsp;<span class="ident" id="8152168">Unmarshal</span><span class="op" id="8152177">(</span><span class="ident" id="8152178">codeJSON</span><span class="op" id="8152186">,</span>&nbsp;<span class="op" id="8152188">&amp;</span><span class="ident" id="8152189">r</span><span class="op" id="8152190">)</span><span class="op" id="8152191">;</span>&nbsp;<span class="ident" id="8152193">err</span>&nbsp;<span class="op" id="8152197">!=</span>&nbsp;<span class="ident" id="8152200">nil</span>&nbsp;<span class="op" id="8152204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152209">b</span><span class="op" id="8152210">.</span><span class="ident" id="8152211">Fatal</span><span class="op" id="8152216">(</span><span class="string" id="8152217">&#34;Unmmarshal:&#34;</span><span class="op" id="8152230">,</span>&nbsp;<span class="ident" id="8152232">err</span><span class="op" id="8152235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152239">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152245">b</span><span class="op" id="8152246">.</span><span class="ident" id="8152247">SetBytes</span><span class="op" id="8152255">(</span><span class="ident" id="8152256">int64</span><span class="op" id="8152261">(</span><span class="builtinfunc" id="8152262">len</span><span class="op" id="8152265">(</span><span class="ident" id="8152266">codeJSON</span><span class="op" id="8152274">)</span><span class="op" id="8152275">)</span><span class="op" id="8152276">)</span><br>
<span class="lineno"></span><span class="op" id="8152278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8152281">func</span>&nbsp;<span class="ident" id="8152286">BenchmarkCodeUnmarshalReuse</span><span class="op" id="8152313">(</span><span class="ident" id="8152314">b</span>&nbsp;<span class="op" id="8152316">*</span><span class="ident" id="8152317">testing</span><span class="op" id="8152324">.</span><span class="ident" id="8152325">B</span><span class="op" id="8152326">)</span>&nbsp;<span class="op" id="8152328">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152331">if</span>&nbsp;<span class="ident" id="8152334">codeJSON</span>&nbsp;<span class="op" id="8152343">==</span>&nbsp;<span class="ident" id="8152346">nil</span>&nbsp;<span class="op" id="8152350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152354">b</span><span class="op" id="8152355">.</span><span class="ident" id="8152356">StopTimer</span><span class="op" id="8152365">(</span><span class="op" id="8152366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152370">codeInit</span><span class="op" id="8152378">(</span><span class="op" id="8152379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152383">b</span><span class="op" id="8152384">.</span><span class="ident" id="8152385">StartTimer</span><span class="op" id="8152395">(</span><span class="op" id="8152396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152399">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152402">var</span>&nbsp;<span class="ident" id="8152406">r</span>&nbsp;<span class="ident" id="8152408">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152422">for</span>&nbsp;<span class="ident" id="8152426">i</span>&nbsp;<span class="op" id="8152428">:=</span>&nbsp;<span class="num" id="8152431">0</span><span class="op" id="8152432">;</span>&nbsp;<span class="ident" id="8152434">i</span>&nbsp;<span class="op" id="8152436">&lt;</span>&nbsp;<span class="ident" id="8152438">b</span><span class="op" id="8152439">.</span><span class="ident" id="8152440">N</span><span class="op" id="8152441">;</span>&nbsp;<span class="ident" id="8152443">i</span><span class="op" id="8152444">++</span>&nbsp;<span class="op" id="8152447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152451">if</span>&nbsp;<span class="ident" id="8152454">err</span>&nbsp;<span class="op" id="8152458">:=</span>&nbsp;<span class="ident" id="8152461">Unmarshal</span><span class="op" id="8152470">(</span><span class="ident" id="8152471">codeJSON</span><span class="op" id="8152479">,</span>&nbsp;<span class="op" id="8152481">&amp;</span><span class="ident" id="8152482">r</span><span class="op" id="8152483">)</span><span class="op" id="8152484">;</span>&nbsp;<span class="ident" id="8152486">err</span>&nbsp;<span class="op" id="8152490">!=</span>&nbsp;<span class="ident" id="8152493">nil</span>&nbsp;<span class="op" id="8152497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152502">b</span><span class="op" id="8152503">.</span><span class="ident" id="8152504">Fatal</span><span class="op" id="8152509">(</span><span class="string" id="8152510">&#34;Unmmarshal:&#34;</span><span class="op" id="8152523">,</span>&nbsp;<span class="ident" id="8152525">err</span><span class="op" id="8152528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152532">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152535">}</span><br>
<span class="lineno"></span><span class="op" id="8152537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8152540">func</span>&nbsp;<span class="ident" id="8152545">BenchmarkUnmarshalString</span><span class="op" id="8152569">(</span><span class="ident" id="8152570">b</span>&nbsp;<span class="op" id="8152572">*</span><span class="ident" id="8152573">testing</span><span class="op" id="8152580">.</span><span class="ident" id="8152581">B</span><span class="op" id="8152582">)</span>&nbsp;<span class="op" id="8152584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152587">data</span>&nbsp;<span class="op" id="8152592">:=</span>&nbsp;<span class="op" id="8152595">[</span><span class="op" id="8152596">]</span><span class="builtintype" id="8152597">byte</span><span class="op" id="8152601">(</span><span class="string" id="8152602">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="8152618">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152621">var</span>&nbsp;<span class="ident" id="8152625">s</span>&nbsp;<span class="builtintype" id="8152627">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152636">for</span>&nbsp;<span class="ident" id="8152640">i</span>&nbsp;<span class="op" id="8152642">:=</span>&nbsp;<span class="num" id="8152645">0</span><span class="op" id="8152646">;</span>&nbsp;<span class="ident" id="8152648">i</span>&nbsp;<span class="op" id="8152650">&lt;</span>&nbsp;<span class="ident" id="8152652">b</span><span class="op" id="8152653">.</span><span class="ident" id="8152654">N</span><span class="op" id="8152655">;</span>&nbsp;<span class="ident" id="8152657">i</span><span class="op" id="8152658">++</span>&nbsp;<span class="op" id="8152661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152665">if</span>&nbsp;<span class="ident" id="8152668">err</span>&nbsp;<span class="op" id="8152672">:=</span>&nbsp;<span class="ident" id="8152675">Unmarshal</span><span class="op" id="8152684">(</span><span class="ident" id="8152685">data</span><span class="op" id="8152689">,</span>&nbsp;<span class="op" id="8152691">&amp;</span><span class="ident" id="8152692">s</span><span class="op" id="8152693">)</span><span class="op" id="8152694">;</span>&nbsp;<span class="ident" id="8152696">err</span>&nbsp;<span class="op" id="8152700">!=</span>&nbsp;<span class="ident" id="8152703">nil</span>&nbsp;<span class="op" id="8152707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152712">b</span><span class="op" id="8152713">.</span><span class="ident" id="8152714">Fatal</span><span class="op" id="8152719">(</span><span class="string" id="8152720">&#34;Unmarshal:&#34;</span><span class="op" id="8152732">,</span>&nbsp;<span class="ident" id="8152734">err</span><span class="op" id="8152737">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152744">}</span><br>
<span class="lineno"></span><span class="op" id="8152746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8152749">func</span>&nbsp;<span class="ident" id="8152754">BenchmarkUnmarshalFloat64</span><span class="op" id="8152779">(</span><span class="ident" id="8152780">b</span>&nbsp;<span class="op" id="8152782">*</span><span class="ident" id="8152783">testing</span><span class="op" id="8152790">.</span><span class="ident" id="8152791">B</span><span class="op" id="8152792">)</span>&nbsp;<span class="op" id="8152794">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152797">var</span>&nbsp;<span class="ident" id="8152801">f</span>&nbsp;<span class="builtintype" id="8152803">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152812">data</span>&nbsp;<span class="op" id="8152817">:=</span>&nbsp;<span class="op" id="8152820">[</span><span class="op" id="8152821">]</span><span class="builtintype" id="8152822">byte</span><span class="op" id="8152826">(</span><span class="string" id="8152827">`3.14`</span><span class="op" id="8152833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152837">for</span>&nbsp;<span class="ident" id="8152841">i</span>&nbsp;<span class="op" id="8152843">:=</span>&nbsp;<span class="num" id="8152846">0</span><span class="op" id="8152847">;</span>&nbsp;<span class="ident" id="8152849">i</span>&nbsp;<span class="op" id="8152851">&lt;</span>&nbsp;<span class="ident" id="8152853">b</span><span class="op" id="8152854">.</span><span class="ident" id="8152855">N</span><span class="op" id="8152856">;</span>&nbsp;<span class="ident" id="8152858">i</span><span class="op" id="8152859">++</span>&nbsp;<span class="op" id="8152862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152866">if</span>&nbsp;<span class="ident" id="8152869">err</span>&nbsp;<span class="op" id="8152873">:=</span>&nbsp;<span class="ident" id="8152876">Unmarshal</span><span class="op" id="8152885">(</span><span class="ident" id="8152886">data</span><span class="op" id="8152890">,</span>&nbsp;<span class="op" id="8152892">&amp;</span><span class="ident" id="8152893">f</span><span class="op" id="8152894">)</span><span class="op" id="8152895">;</span>&nbsp;<span class="ident" id="8152897">err</span>&nbsp;<span class="op" id="8152901">!=</span>&nbsp;<span class="ident" id="8152904">nil</span>&nbsp;<span class="op" id="8152908">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8152913">b</span><span class="op" id="8152914">.</span><span class="ident" id="8152915">Fatal</span><span class="op" id="8152920">(</span><span class="string" id="8152921">&#34;Unmarshal:&#34;</span><span class="op" id="8152933">,</span>&nbsp;<span class="ident" id="8152935">err</span><span class="op" id="8152938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8152945">}</span><br>
<span class="lineno"></span><span class="op" id="8152947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="8152950">func</span>&nbsp;<span class="ident" id="8152955">BenchmarkUnmarshalInt64</span><span class="op" id="8152978">(</span><span class="ident" id="8152979">b</span>&nbsp;<span class="op" id="8152981">*</span><span class="ident" id="8152982">testing</span><span class="op" id="8152989">.</span><span class="ident" id="8152990">B</span><span class="op" id="8152991">)</span>&nbsp;<span class="op" id="8152993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8152996">var</span>&nbsp;<span class="ident" id="8153000">x</span>&nbsp;<span class="ident" id="8153002">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153009">data</span>&nbsp;<span class="op" id="8153014">:=</span>&nbsp;<span class="op" id="8153017">[</span><span class="op" id="8153018">]</span><span class="builtintype" id="8153019">byte</span><span class="op" id="8153023">(</span><span class="string" id="8153024">`3`</span><span class="op" id="8153027">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153031">for</span>&nbsp;<span class="ident" id="8153035">i</span>&nbsp;<span class="op" id="8153037">:=</span>&nbsp;<span class="num" id="8153040">0</span><span class="op" id="8153041">;</span>&nbsp;<span class="ident" id="8153043">i</span>&nbsp;<span class="op" id="8153045">&lt;</span>&nbsp;<span class="ident" id="8153047">b</span><span class="op" id="8153048">.</span><span class="ident" id="8153049">N</span><span class="op" id="8153050">;</span>&nbsp;<span class="ident" id="8153052">i</span><span class="op" id="8153053">++</span>&nbsp;<span class="op" id="8153056">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8153060">if</span>&nbsp;<span class="ident" id="8153063">err</span>&nbsp;<span class="op" id="8153067">:=</span>&nbsp;<span class="ident" id="8153070">Unmarshal</span><span class="op" id="8153079">(</span><span class="ident" id="8153080">data</span><span class="op" id="8153084">,</span>&nbsp;<span class="op" id="8153086">&amp;</span><span class="ident" id="8153087">x</span><span class="op" id="8153088">)</span><span class="op" id="8153089">;</span>&nbsp;<span class="ident" id="8153091">err</span>&nbsp;<span class="op" id="8153095">!=</span>&nbsp;<span class="ident" id="8153098">nil</span>&nbsp;<span class="op" id="8153102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8153107">b</span><span class="op" id="8153108">.</span><span class="ident" id="8153109">Fatal</span><span class="op" id="8153114">(</span><span class="string" id="8153115">&#34;Unmarshal:&#34;</span><span class="op" id="8153127">,</span>&nbsp;<span class="ident" id="8153129">err</span><span class="op" id="8153132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8153139">}</span><br>
<span class="lineno"></span><span class="op" id="8153141">}</span>
</div>
</body>
</html>
