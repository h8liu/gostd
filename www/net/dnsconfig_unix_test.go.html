<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6796888">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6796943">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6796997">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6797048">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6797113">package</span>&nbsp;<span class="ident" id="6797121">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6797126">import</span>&nbsp;<span class="op" id="6797133">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6797136">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6797147">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6797157">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6797160">var</span>&nbsp;<span class="ident" id="6797164">dnsReadConfigTests</span>&nbsp;<span class="op" id="6797183">=</span>&nbsp;<span class="op" id="6797185">[</span><span class="op" id="6797186">]</span><span class="keyword" id="6797187">struct</span>&nbsp;<span class="op" id="6797194">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797197">name</span>&nbsp;<span class="builtintype" id="6797202">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797210">conf</span>&nbsp;<span class="ident" id="6797215"><a href="/net/dnsconfig_unix.go.html#2543590">dnsConfig</a></span><br>
<span class="lineno"></span><span class="op" id="6797225">}</span><span class="op" id="6797226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797233">name</span><span class="op" id="6797237">:</span>&nbsp;<span class="string" id="6797239">&#34;testdata/resolv.conf&#34;</span><span class="op" id="6797261">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797265">conf</span><span class="op" id="6797269">:</span>&nbsp;<span class="ident" id="6797271"><a href="/net/dnsconfig_unix.go.html#2543590">dnsConfig</a></span><span class="op" id="6797280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797285">servers</span><span class="op" id="6797292">:</span>&nbsp;&nbsp;<span class="op" id="6797295">[</span><span class="op" id="6797296">]</span><span class="builtintype" id="6797297">string</span><span class="op" id="6797303">{</span><span class="string" id="6797304">&#34;8.8.8.8&#34;</span><span class="op" id="6797313">,</span>&nbsp;<span class="string" id="6797315">&#34;2001:4860:4860::8888&#34;</span><span class="op" id="6797337">,</span>&nbsp;<span class="string" id="6797339">&#34;fe80::1%lo0&#34;</span><span class="op" id="6797352">}</span><span class="op" id="6797353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797358">search</span><span class="op" id="6797364">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6797368">[</span><span class="op" id="6797369">]</span><span class="builtintype" id="6797370">string</span><span class="op" id="6797376">{</span><span class="string" id="6797377">&#34;localdomain&#34;</span><span class="op" id="6797390">}</span><span class="op" id="6797391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797396">ndots</span><span class="op" id="6797401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6797406">5</span><span class="op" id="6797407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797412">timeout</span><span class="op" id="6797419">:</span>&nbsp;&nbsp;<span class="num" id="6797422">10</span><span class="op" id="6797424">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797429">attempts</span><span class="op" id="6797437">:</span>&nbsp;<span class="num" id="6797439">3</span><span class="op" id="6797440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797445">rotate</span><span class="op" id="6797451">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6797455">true</span><span class="op" id="6797459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797463">}</span><span class="op" id="6797464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797467">}</span><span class="op" id="6797468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797471">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797475">name</span><span class="op" id="6797479">:</span>&nbsp;<span class="string" id="6797481">&#34;testdata/domain-resolv.conf&#34;</span><span class="op" id="6797510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797514">conf</span><span class="op" id="6797518">:</span>&nbsp;<span class="ident" id="6797520"><a href="/net/dnsconfig_unix.go.html#2543590">dnsConfig</a></span><span class="op" id="6797529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797534">servers</span><span class="op" id="6797541">:</span>&nbsp;&nbsp;<span class="op" id="6797544">[</span><span class="op" id="6797545">]</span><span class="builtintype" id="6797546">string</span><span class="op" id="6797552">{</span><span class="string" id="6797553">&#34;8.8.8.8&#34;</span><span class="op" id="6797562">}</span><span class="op" id="6797563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797568">search</span><span class="op" id="6797574">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6797578">[</span><span class="op" id="6797579">]</span><span class="builtintype" id="6797580">string</span><span class="op" id="6797586">{</span><span class="string" id="6797587">&#34;localdomain&#34;</span><span class="op" id="6797600">}</span><span class="op" id="6797601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797606">ndots</span><span class="op" id="6797611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6797616">1</span><span class="op" id="6797617">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797622">timeout</span><span class="op" id="6797629">:</span>&nbsp;&nbsp;<span class="num" id="6797632">5</span><span class="op" id="6797633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797638">attempts</span><span class="op" id="6797646">:</span>&nbsp;<span class="num" id="6797648">2</span><span class="op" id="6797649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797653">}</span><span class="op" id="6797654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797657">}</span><span class="op" id="6797658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797661">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797665">name</span><span class="op" id="6797669">:</span>&nbsp;<span class="string" id="6797671">&#34;testdata/search-resolv.conf&#34;</span><span class="op" id="6797700">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797704">conf</span><span class="op" id="6797708">:</span>&nbsp;<span class="ident" id="6797710"><a href="/net/dnsconfig_unix.go.html#2543590">dnsConfig</a></span><span class="op" id="6797719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797724">servers</span><span class="op" id="6797731">:</span>&nbsp;&nbsp;<span class="op" id="6797734">[</span><span class="op" id="6797735">]</span><span class="builtintype" id="6797736">string</span><span class="op" id="6797742">{</span><span class="string" id="6797743">&#34;8.8.8.8&#34;</span><span class="op" id="6797752">}</span><span class="op" id="6797753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797758">search</span><span class="op" id="6797764">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6797768">[</span><span class="op" id="6797769">]</span><span class="builtintype" id="6797770">string</span><span class="op" id="6797776">{</span><span class="string" id="6797777">&#34;test&#34;</span><span class="op" id="6797783">,</span>&nbsp;<span class="string" id="6797785">&#34;invalid&#34;</span><span class="op" id="6797794">}</span><span class="op" id="6797795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797800">ndots</span><span class="op" id="6797805">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6797810">1</span><span class="op" id="6797811">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797816">timeout</span><span class="op" id="6797823">:</span>&nbsp;&nbsp;<span class="num" id="6797826">5</span><span class="op" id="6797827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797832">attempts</span><span class="op" id="6797840">:</span>&nbsp;<span class="num" id="6797842">2</span><span class="op" id="6797843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797847">}</span><span class="op" id="6797848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797851">}</span><span class="op" id="6797852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797855">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797859">name</span><span class="op" id="6797863">:</span>&nbsp;<span class="string" id="6797865">&#34;testdata/empty-resolv.conf&#34;</span><span class="op" id="6797893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797897">conf</span><span class="op" id="6797901">:</span>&nbsp;<span class="ident" id="6797903"><a href="/net/dnsconfig_unix.go.html#2543590">dnsConfig</a></span><span class="op" id="6797912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797917">ndots</span><span class="op" id="6797922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6797927">1</span><span class="op" id="6797928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797933">timeout</span><span class="op" id="6797940">:</span>&nbsp;&nbsp;<span class="num" id="6797943">5</span><span class="op" id="6797944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6797949">attempts</span><span class="op" id="6797957">:</span>&nbsp;<span class="num" id="6797959">2</span><span class="op" id="6797960">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797964">}</span><span class="op" id="6797965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6797968">}</span><span class="op" id="6797969">,</span><br>
<span class="lineno"></span><span class="op" id="6797971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6797974">func</span>&nbsp;<span class="ident" id="6797979">TestDNSReadConfig</span><span class="op" id="6797996">(</span><span class="ident" id="6797997">t</span>&nbsp;<span class="op" id="6797999">*</span><span class="ident" id="6798000"><a href="/net/dnsconfig_unix_test.go.html#6797147">testing</a></span><span class="op" id="6798007">.</span><span class="ident" id="6798008">T</span><span class="op" id="6798009">)</span>&nbsp;<span class="op" id="6798011">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798014">for</span>&nbsp;<span class="ident" id="6798018">_</span><span class="op" id="6798019">,</span>&nbsp;<span class="ident" id="6798021">tt</span>&nbsp;<span class="op" id="6798024">:=</span>&nbsp;<span class="keyword" id="6798027">range</span>&nbsp;<span class="ident" id="6798033"><a href="/net/dnsconfig_unix_test.go.html#6797164">dnsReadConfigTests</a></span>&nbsp;<span class="op" id="6798052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798056">conf</span><span class="op" id="6798060">,</span>&nbsp;<span class="ident" id="6798062">err</span>&nbsp;<span class="op" id="6798066">:=</span>&nbsp;<span class="ident" id="6798069"><a href="/net/dnsconfig_unix.go.html#2544106">dnsReadConfig</a></span><span class="op" id="6798082">(</span><span class="ident" id="6798083"><a href="/net/dnsconfig_unix_test.go.html#6798021">tt</a></span><span class="op" id="6798085">.</span><span class="ident" id="6798086">name</span><span class="op" id="6798090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798094">if</span>&nbsp;<span class="ident" id="6798097"><a href="/net/dnsconfig_unix_test.go.html#6798062">err</a></span>&nbsp;<span class="op" id="6798101">!=</span>&nbsp;<span class="ident" id="6798104">nil</span>&nbsp;<span class="op" id="6798108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798113"><a href="/net/dnsconfig_unix_test.go.html#6797997">t</a></span><span class="op" id="6798114">.</span><span class="ident" id="6798115">Fatal</span><span class="op" id="6798120">(</span><span class="ident" id="6798121"><a href="/net/dnsconfig_unix_test.go.html#6798062">err</a></span><span class="op" id="6798124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6798128">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6798132">if</span>&nbsp;<span class="op" id="6798135">!</span><span class="ident" id="6798136"><a href="/net/dnsconfig_unix_test.go.html#6797136">reflect</a></span><span class="op" id="6798143">.</span><span class="ident" id="6798144">DeepEqual</span><span class="op" id="6798153">(</span><span class="ident" id="6798154"><a href="/net/dnsconfig_unix_test.go.html#6798056">conf</a></span><span class="op" id="6798158">,</span>&nbsp;<span class="op" id="6798160">&amp;</span><span class="ident" id="6798161"><a href="/net/dnsconfig_unix_test.go.html#6798021">tt</a></span><span class="op" id="6798163">.</span><span class="ident" id="6798164">conf</span><span class="op" id="6798168">)</span>&nbsp;<span class="op" id="6798170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6798175"><a href="/net/dnsconfig_unix_test.go.html#6797997">t</a></span><span class="op" id="6798176">.</span><span class="ident" id="6798177">Errorf</span><span class="op" id="6798183">(</span><span class="string" id="6798184">&#34;got&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6798201">,</span>&nbsp;<span class="ident" id="6798203"><a href="/net/dnsconfig_unix_test.go.html#6798056">conf</a></span><span class="op" id="6798207">,</span>&nbsp;<span class="op" id="6798209">&amp;</span><span class="ident" id="6798210"><a href="/net/dnsconfig_unix_test.go.html#6798021">tt</a></span><span class="op" id="6798212">.</span><span class="ident" id="6798213">conf</span><span class="op" id="6798217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6798221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6798224">}</span><br>
<span class="lineno"></span><span class="op" id="6798226">}</span>
</div>
</body>
</html>
