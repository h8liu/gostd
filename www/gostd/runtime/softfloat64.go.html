<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html" class="current">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1676237">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1676293">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1676347">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1676398">//&nbsp;Software&nbsp;IEEE754&nbsp;64-bit&nbsp;floating&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="1676441">//&nbsp;Only&nbsp;referred&nbsp;to&nbsp;(and&nbsp;thus&nbsp;linked&nbsp;in)&nbsp;by&nbsp;arm&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="1676494">//&nbsp;and&nbsp;by&nbsp;tests&nbsp;in&nbsp;this&nbsp;directory.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1676530">package</span>&nbsp;<span class="ident" id="1676538">runtime</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1676547">const</span>&nbsp;<span class="op" id="1676553">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676556">mantbits64</span>&nbsp;<span class="builtintype" id="1676567">uint</span>&nbsp;<span class="op" id="1676572">=</span>&nbsp;<span class="num" id="1676574">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676578">expbits64</span>&nbsp;&nbsp;<span class="builtintype" id="1676589">uint</span>&nbsp;<span class="op" id="1676594">=</span>&nbsp;<span class="num" id="1676596">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676600">bias64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1676616">=</span>&nbsp;<span class="op" id="1676618">-</span><span class="num" id="1676619">1</span><span class="op" id="1676620">&lt;&lt;</span><span class="op" id="1676622">(</span><span class="ident" id="1676623">expbits64</span><span class="op" id="1676632">-</span><span class="num" id="1676633">1</span><span class="op" id="1676634">)</span>&nbsp;<span class="op" id="1676636">+</span>&nbsp;<span class="num" id="1676638">1</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676642">nan64</span>&nbsp;<span class="ident" id="1676648">uint64</span>&nbsp;<span class="op" id="1676655">=</span>&nbsp;<span class="op" id="1676657">(</span><span class="num" id="1676658">1</span><span class="op" id="1676659">&lt;&lt;</span><span class="ident" id="1676661">expbits64</span><span class="op" id="1676670">-</span><span class="num" id="1676671">1</span><span class="op" id="1676672">)</span><span class="op" id="1676673">&lt;&lt;</span><span class="ident" id="1676675">mantbits64</span>&nbsp;<span class="op" id="1676686">+</span>&nbsp;<span class="num" id="1676688">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676691">inf64</span>&nbsp;<span class="ident" id="1676697">uint64</span>&nbsp;<span class="op" id="1676704">=</span>&nbsp;<span class="op" id="1676706">(</span><span class="num" id="1676707">1</span><span class="op" id="1676708">&lt;&lt;</span><span class="ident" id="1676710">expbits64</span>&nbsp;<span class="op" id="1676720">-</span>&nbsp;<span class="num" id="1676722">1</span><span class="op" id="1676723">)</span>&nbsp;<span class="op" id="1676725">&lt;&lt;</span>&nbsp;<span class="ident" id="1676728">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676740">neg64</span>&nbsp;<span class="ident" id="1676746">uint64</span>&nbsp;<span class="op" id="1676753">=</span>&nbsp;<span class="num" id="1676755">1</span>&nbsp;<span class="op" id="1676757">&lt;&lt;</span>&nbsp;<span class="op" id="1676760">(</span><span class="ident" id="1676761">expbits64</span>&nbsp;<span class="op" id="1676771">+</span>&nbsp;<span class="ident" id="1676773">mantbits64</span><span class="op" id="1676783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676787">mantbits32</span>&nbsp;<span class="builtintype" id="1676798">uint</span>&nbsp;<span class="op" id="1676803">=</span>&nbsp;<span class="num" id="1676805">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676809">expbits32</span>&nbsp;&nbsp;<span class="builtintype" id="1676820">uint</span>&nbsp;<span class="op" id="1676825">=</span>&nbsp;<span class="num" id="1676827">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676830">bias32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1676846">=</span>&nbsp;<span class="op" id="1676848">-</span><span class="num" id="1676849">1</span><span class="op" id="1676850">&lt;&lt;</span><span class="op" id="1676852">(</span><span class="ident" id="1676853">expbits32</span><span class="op" id="1676862">-</span><span class="num" id="1676863">1</span><span class="op" id="1676864">)</span>&nbsp;<span class="op" id="1676866">+</span>&nbsp;<span class="num" id="1676868">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676872">nan32</span>&nbsp;<span class="builtintype" id="1676878">uint32</span>&nbsp;<span class="op" id="1676885">=</span>&nbsp;<span class="op" id="1676887">(</span><span class="num" id="1676888">1</span><span class="op" id="1676889">&lt;&lt;</span><span class="ident" id="1676891">expbits32</span><span class="op" id="1676900">-</span><span class="num" id="1676901">1</span><span class="op" id="1676902">)</span><span class="op" id="1676903">&lt;&lt;</span><span class="ident" id="1676905">mantbits32</span>&nbsp;<span class="op" id="1676916">+</span>&nbsp;<span class="num" id="1676918">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676921">inf32</span>&nbsp;<span class="builtintype" id="1676927">uint32</span>&nbsp;<span class="op" id="1676934">=</span>&nbsp;<span class="op" id="1676936">(</span><span class="num" id="1676937">1</span><span class="op" id="1676938">&lt;&lt;</span><span class="ident" id="1676940">expbits32</span>&nbsp;<span class="op" id="1676950">-</span>&nbsp;<span class="num" id="1676952">1</span><span class="op" id="1676953">)</span>&nbsp;<span class="op" id="1676955">&lt;&lt;</span>&nbsp;<span class="ident" id="1676958">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676970">neg32</span>&nbsp;<span class="builtintype" id="1676976">uint32</span>&nbsp;<span class="op" id="1676983">=</span>&nbsp;<span class="num" id="1676985">1</span>&nbsp;<span class="op" id="1676987">&lt;&lt;</span>&nbsp;<span class="op" id="1676990">(</span><span class="ident" id="1676991">expbits32</span>&nbsp;<span class="op" id="1677001">+</span>&nbsp;<span class="ident" id="1677003">mantbits32</span><span class="op" id="1677013">)</span><br>
<span class="lineno"></span><span class="op" id="1677015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1677018">func</span>&nbsp;<span class="ident" id="1677023">funpack64</span><span class="op" id="1677032">(</span><span class="ident" id="1677033">f</span>&nbsp;<span class="ident" id="1677035">uint64</span><span class="op" id="1677041">)</span>&nbsp;<span class="op" id="1677043">(</span><span class="ident" id="1677044">sign</span><span class="op" id="1677048">,</span>&nbsp;<span class="ident" id="1677050">mant</span>&nbsp;<span class="ident" id="1677055">uint64</span><span class="op" id="1677061">,</span>&nbsp;<span class="ident" id="1677063">exp</span>&nbsp;<span class="builtintype" id="1677067">int</span><span class="op" id="1677070">,</span>&nbsp;<span class="ident" id="1677072">inf</span><span class="op" id="1677075">,</span>&nbsp;<span class="ident" id="1677077">nan</span>&nbsp;<span class="builtintype" id="1677081">bool</span><span class="op" id="1677085">)</span>&nbsp;<span class="op" id="1677087">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677090">sign</span>&nbsp;<span class="op" id="1677095">=</span>&nbsp;<span class="ident" id="1677097">f</span>&nbsp;<span class="op" id="1677099">&amp;</span>&nbsp;<span class="op" id="1677101">(</span><span class="num" id="1677102">1</span>&nbsp;<span class="op" id="1677104">&lt;&lt;</span>&nbsp;<span class="op" id="1677107">(</span><span class="ident" id="1677108">mantbits64</span>&nbsp;<span class="op" id="1677119">+</span>&nbsp;<span class="ident" id="1677121">expbits64</span><span class="op" id="1677130">)</span><span class="op" id="1677131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677134">mant</span>&nbsp;<span class="op" id="1677139">=</span>&nbsp;<span class="ident" id="1677141">f</span>&nbsp;<span class="op" id="1677143">&amp;</span>&nbsp;<span class="op" id="1677145">(</span><span class="num" id="1677146">1</span><span class="op" id="1677147">&lt;&lt;</span><span class="ident" id="1677149">mantbits64</span>&nbsp;<span class="op" id="1677160">-</span>&nbsp;<span class="num" id="1677162">1</span><span class="op" id="1677163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677166">exp</span>&nbsp;<span class="op" id="1677170">=</span>&nbsp;<span class="builtintype" id="1677172">int</span><span class="op" id="1677175">(</span><span class="ident" id="1677176">f</span><span class="op" id="1677177">&gt;&gt;</span><span class="ident" id="1677179">mantbits64</span><span class="op" id="1677189">)</span>&nbsp;<span class="op" id="1677191">&amp;</span>&nbsp;<span class="op" id="1677193">(</span><span class="num" id="1677194">1</span><span class="op" id="1677195">&lt;&lt;</span><span class="ident" id="1677197">expbits64</span>&nbsp;<span class="op" id="1677207">-</span>&nbsp;<span class="num" id="1677209">1</span><span class="op" id="1677210">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677214">switch</span>&nbsp;<span class="ident" id="1677221">exp</span>&nbsp;<span class="op" id="1677225">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677228">case</span>&nbsp;<span class="num" id="1677233">1</span><span class="op" id="1677234">&lt;&lt;</span><span class="ident" id="1677236">expbits64</span>&nbsp;<span class="op" id="1677246">-</span>&nbsp;<span class="num" id="1677248">1</span><span class="op" id="1677249">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677253">if</span>&nbsp;<span class="ident" id="1677256">mant</span>&nbsp;<span class="op" id="1677261">!=</span>&nbsp;<span class="num" id="1677264">0</span>&nbsp;<span class="op" id="1677266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677271">nan</span>&nbsp;<span class="op" id="1677275">=</span>&nbsp;<span class="builtintype" id="1677277">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677285">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677294">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677298">inf</span>&nbsp;<span class="op" id="1677302">=</span>&nbsp;<span class="builtintype" id="1677304">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677311">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677320">case</span>&nbsp;<span class="num" id="1677325">0</span><span class="op" id="1677326">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1677330">//&nbsp;denormalized</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677348">if</span>&nbsp;<span class="ident" id="1677351">mant</span>&nbsp;<span class="op" id="1677356">!=</span>&nbsp;<span class="num" id="1677359">0</span>&nbsp;<span class="op" id="1677361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677366">exp</span>&nbsp;<span class="op" id="1677370">+=</span>&nbsp;<span class="ident" id="1677373">bias64</span>&nbsp;<span class="op" id="1677380">+</span>&nbsp;<span class="num" id="1677382">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677387">for</span>&nbsp;<span class="ident" id="1677391">mant</span>&nbsp;<span class="op" id="1677396">&lt;</span>&nbsp;<span class="num" id="1677398">1</span><span class="op" id="1677399">&lt;&lt;</span><span class="ident" id="1677401">mantbits64</span>&nbsp;<span class="op" id="1677412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677418">mant</span>&nbsp;<span class="op" id="1677423">&lt;&lt;=</span>&nbsp;<span class="num" id="1677427">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677433">exp</span><span class="op" id="1677436">--</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677450">default</span><span class="op" id="1677457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1677461">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677487">mant</span>&nbsp;<span class="op" id="1677492">|=</span>&nbsp;<span class="num" id="1677495">1</span>&nbsp;<span class="op" id="1677497">&lt;&lt;</span>&nbsp;<span class="ident" id="1677500">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677513">exp</span>&nbsp;<span class="op" id="1677517">+=</span>&nbsp;<span class="ident" id="1677520">bias64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677531">return</span><br>
<span class="lineno"></span><span class="op" id="1677538">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1677541">func</span>&nbsp;<span class="ident" id="1677546">funpack32</span><span class="op" id="1677555">(</span><span class="ident" id="1677556">f</span>&nbsp;<span class="builtintype" id="1677558">uint32</span><span class="op" id="1677564">)</span>&nbsp;<span class="op" id="1677566">(</span><span class="ident" id="1677567">sign</span><span class="op" id="1677571">,</span>&nbsp;<span class="ident" id="1677573">mant</span>&nbsp;<span class="builtintype" id="1677578">uint32</span><span class="op" id="1677584">,</span>&nbsp;<span class="ident" id="1677586">exp</span>&nbsp;<span class="builtintype" id="1677590">int</span><span class="op" id="1677593">,</span>&nbsp;<span class="ident" id="1677595">inf</span><span class="op" id="1677598">,</span>&nbsp;<span class="ident" id="1677600">nan</span>&nbsp;<span class="builtintype" id="1677604">bool</span><span class="op" id="1677608">)</span>&nbsp;<span class="op" id="1677610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677613">sign</span>&nbsp;<span class="op" id="1677618">=</span>&nbsp;<span class="ident" id="1677620">f</span>&nbsp;<span class="op" id="1677622">&amp;</span>&nbsp;<span class="op" id="1677624">(</span><span class="num" id="1677625">1</span>&nbsp;<span class="op" id="1677627">&lt;&lt;</span>&nbsp;<span class="op" id="1677630">(</span><span class="ident" id="1677631">mantbits32</span>&nbsp;<span class="op" id="1677642">+</span>&nbsp;<span class="ident" id="1677644">expbits32</span><span class="op" id="1677653">)</span><span class="op" id="1677654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677657">mant</span>&nbsp;<span class="op" id="1677662">=</span>&nbsp;<span class="ident" id="1677664">f</span>&nbsp;<span class="op" id="1677666">&amp;</span>&nbsp;<span class="op" id="1677668">(</span><span class="num" id="1677669">1</span><span class="op" id="1677670">&lt;&lt;</span><span class="ident" id="1677672">mantbits32</span>&nbsp;<span class="op" id="1677683">-</span>&nbsp;<span class="num" id="1677685">1</span><span class="op" id="1677686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677689">exp</span>&nbsp;<span class="op" id="1677693">=</span>&nbsp;<span class="builtintype" id="1677695">int</span><span class="op" id="1677698">(</span><span class="ident" id="1677699">f</span><span class="op" id="1677700">&gt;&gt;</span><span class="ident" id="1677702">mantbits32</span><span class="op" id="1677712">)</span>&nbsp;<span class="op" id="1677714">&amp;</span>&nbsp;<span class="op" id="1677716">(</span><span class="num" id="1677717">1</span><span class="op" id="1677718">&lt;&lt;</span><span class="ident" id="1677720">expbits32</span>&nbsp;<span class="op" id="1677730">-</span>&nbsp;<span class="num" id="1677732">1</span><span class="op" id="1677733">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677737">switch</span>&nbsp;<span class="ident" id="1677744">exp</span>&nbsp;<span class="op" id="1677748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677751">case</span>&nbsp;<span class="num" id="1677756">1</span><span class="op" id="1677757">&lt;&lt;</span><span class="ident" id="1677759">expbits32</span>&nbsp;<span class="op" id="1677769">-</span>&nbsp;<span class="num" id="1677771">1</span><span class="op" id="1677772">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677776">if</span>&nbsp;<span class="ident" id="1677779">mant</span>&nbsp;<span class="op" id="1677784">!=</span>&nbsp;<span class="num" id="1677787">0</span>&nbsp;<span class="op" id="1677789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677794">nan</span>&nbsp;<span class="op" id="1677798">=</span>&nbsp;<span class="builtintype" id="1677800">true</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677808">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677821">inf</span>&nbsp;<span class="op" id="1677825">=</span>&nbsp;<span class="builtintype" id="1677827">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677834">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677843">case</span>&nbsp;<span class="num" id="1677848">0</span><span class="op" id="1677849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1677853">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677871">if</span>&nbsp;<span class="ident" id="1677874">mant</span>&nbsp;<span class="op" id="1677879">!=</span>&nbsp;<span class="num" id="1677882">0</span>&nbsp;<span class="op" id="1677884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677889">exp</span>&nbsp;<span class="op" id="1677893">+=</span>&nbsp;<span class="ident" id="1677896">bias32</span>&nbsp;<span class="op" id="1677903">+</span>&nbsp;<span class="num" id="1677905">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677910">for</span>&nbsp;<span class="ident" id="1677914">mant</span>&nbsp;<span class="op" id="1677919">&lt;</span>&nbsp;<span class="num" id="1677921">1</span><span class="op" id="1677922">&lt;&lt;</span><span class="ident" id="1677924">mantbits32</span>&nbsp;<span class="op" id="1677935">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677941">mant</span>&nbsp;<span class="op" id="1677946">&lt;&lt;=</span>&nbsp;<span class="num" id="1677950">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1677956">exp</span><span class="op" id="1677959">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1677969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1677973">default</span><span class="op" id="1677980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1677984">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678010">mant</span>&nbsp;<span class="op" id="1678015">|=</span>&nbsp;<span class="num" id="1678018">1</span>&nbsp;<span class="op" id="1678020">&lt;&lt;</span>&nbsp;<span class="ident" id="1678023">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678036">exp</span>&nbsp;<span class="op" id="1678040">+=</span>&nbsp;<span class="ident" id="1678043">bias32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678051">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678054">return</span><br>
<span class="lineno"></span><span class="op" id="1678061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1678064">func</span>&nbsp;<span class="ident" id="1678069">fpack64</span><span class="op" id="1678076">(</span><span class="ident" id="1678077">sign</span><span class="op" id="1678081">,</span>&nbsp;<span class="ident" id="1678083">mant</span>&nbsp;<span class="ident" id="1678088">uint64</span><span class="op" id="1678094">,</span>&nbsp;<span class="ident" id="1678096">exp</span>&nbsp;<span class="builtintype" id="1678100">int</span><span class="op" id="1678103">,</span>&nbsp;<span class="ident" id="1678105">trunc</span>&nbsp;<span class="ident" id="1678111">uint64</span><span class="op" id="1678117">)</span>&nbsp;<span class="ident" id="1678119">uint64</span>&nbsp;<span class="op" id="1678126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678129">mant0</span><span class="op" id="1678134">,</span>&nbsp;<span class="ident" id="1678136">exp0</span><span class="op" id="1678140">,</span>&nbsp;<span class="ident" id="1678142">trunc0</span>&nbsp;<span class="op" id="1678149">:=</span>&nbsp;<span class="ident" id="1678152">mant</span><span class="op" id="1678156">,</span>&nbsp;<span class="ident" id="1678158">exp</span><span class="op" id="1678161">,</span>&nbsp;<span class="ident" id="1678163">trunc</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678170">if</span>&nbsp;<span class="ident" id="1678173">mant</span>&nbsp;<span class="op" id="1678178">==</span>&nbsp;<span class="num" id="1678181">0</span>&nbsp;<span class="op" id="1678183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678187">return</span>&nbsp;<span class="ident" id="1678194">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678203">for</span>&nbsp;<span class="ident" id="1678207">mant</span>&nbsp;<span class="op" id="1678212">&lt;</span>&nbsp;<span class="num" id="1678214">1</span><span class="op" id="1678215">&lt;&lt;</span><span class="ident" id="1678217">mantbits64</span>&nbsp;<span class="op" id="1678228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678232">mant</span>&nbsp;<span class="op" id="1678237">&lt;&lt;=</span>&nbsp;<span class="num" id="1678241">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678245">exp</span><span class="op" id="1678248">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678255">for</span>&nbsp;<span class="ident" id="1678259">mant</span>&nbsp;<span class="op" id="1678264">&gt;=</span>&nbsp;<span class="num" id="1678267">4</span><span class="op" id="1678268">&lt;&lt;</span><span class="ident" id="1678270">mantbits64</span>&nbsp;<span class="op" id="1678281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678285">trunc</span>&nbsp;<span class="op" id="1678291">|=</span>&nbsp;<span class="ident" id="1678294">mant</span>&nbsp;<span class="op" id="1678299">&amp;</span>&nbsp;<span class="num" id="1678301">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678305">mant</span>&nbsp;<span class="op" id="1678310">&gt;&gt;=</span>&nbsp;<span class="num" id="1678314">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678318">exp</span><span class="op" id="1678321">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678328">if</span>&nbsp;<span class="ident" id="1678331">mant</span>&nbsp;<span class="op" id="1678336">&gt;=</span>&nbsp;<span class="num" id="1678339">2</span><span class="op" id="1678340">&lt;&lt;</span><span class="ident" id="1678342">mantbits64</span>&nbsp;<span class="op" id="1678353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678357">if</span>&nbsp;<span class="ident" id="1678360">mant</span><span class="op" id="1678364">&amp;</span><span class="num" id="1678365">1</span>&nbsp;<span class="op" id="1678367">!=</span>&nbsp;<span class="num" id="1678370">0</span>&nbsp;<span class="op" id="1678372">&amp;&amp;</span>&nbsp;<span class="op" id="1678375">(</span><span class="ident" id="1678376">trunc</span>&nbsp;<span class="op" id="1678382">!=</span>&nbsp;<span class="num" id="1678385">0</span>&nbsp;<span class="op" id="1678387">||</span>&nbsp;<span class="ident" id="1678390">mant</span><span class="op" id="1678394">&amp;</span><span class="num" id="1678395">2</span>&nbsp;<span class="op" id="1678397">!=</span>&nbsp;<span class="num" id="1678400">0</span><span class="op" id="1678401">)</span>&nbsp;<span class="op" id="1678403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678408">mant</span><span class="op" id="1678412">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678418">if</span>&nbsp;<span class="ident" id="1678421">mant</span>&nbsp;<span class="op" id="1678426">&gt;=</span>&nbsp;<span class="num" id="1678429">4</span><span class="op" id="1678430">&lt;&lt;</span><span class="ident" id="1678432">mantbits64</span>&nbsp;<span class="op" id="1678443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678449">mant</span>&nbsp;<span class="op" id="1678454">&gt;&gt;=</span>&nbsp;<span class="num" id="1678458">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678464">exp</span><span class="op" id="1678467">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678477">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678481">mant</span>&nbsp;<span class="op" id="1678486">&gt;&gt;=</span>&nbsp;<span class="num" id="1678490">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678494">exp</span><span class="op" id="1678497">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678504">if</span>&nbsp;<span class="ident" id="1678507">exp</span>&nbsp;<span class="op" id="1678511">&gt;=</span>&nbsp;<span class="num" id="1678514">1</span><span class="op" id="1678515">&lt;&lt;</span><span class="ident" id="1678517">expbits64</span><span class="op" id="1678526">-</span><span class="num" id="1678527">1</span><span class="op" id="1678528">+</span><span class="ident" id="1678529">bias64</span>&nbsp;<span class="op" id="1678536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678540">return</span>&nbsp;<span class="ident" id="1678547">sign</span>&nbsp;<span class="op" id="1678552">^</span>&nbsp;<span class="ident" id="1678554">inf64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678564">if</span>&nbsp;<span class="ident" id="1678567">exp</span>&nbsp;<span class="op" id="1678571">&lt;</span>&nbsp;<span class="ident" id="1678573">bias64</span><span class="op" id="1678579">+</span><span class="num" id="1678580">1</span>&nbsp;<span class="op" id="1678582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678586">if</span>&nbsp;<span class="ident" id="1678589">exp</span>&nbsp;<span class="op" id="1678593">&lt;</span>&nbsp;<span class="ident" id="1678595">bias64</span><span class="op" id="1678601">-</span><span class="builtintype" id="1678602">int</span><span class="op" id="1678605">(</span><span class="ident" id="1678606">mantbits64</span><span class="op" id="1678616">)</span>&nbsp;<span class="op" id="1678618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678623">return</span>&nbsp;<span class="ident" id="1678630">sign</span>&nbsp;<span class="op" id="1678635">|</span>&nbsp;<span class="num" id="1678637">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678641">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1678645">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678676">mant</span><span class="op" id="1678680">,</span>&nbsp;<span class="ident" id="1678682">exp</span><span class="op" id="1678685">,</span>&nbsp;<span class="ident" id="1678687">trunc</span>&nbsp;<span class="op" id="1678693">=</span>&nbsp;<span class="ident" id="1678695">mant0</span><span class="op" id="1678700">,</span>&nbsp;<span class="ident" id="1678702">exp0</span><span class="op" id="1678706">,</span>&nbsp;<span class="ident" id="1678708">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678717">for</span>&nbsp;<span class="ident" id="1678721">exp</span>&nbsp;<span class="op" id="1678725">&lt;</span>&nbsp;<span class="ident" id="1678727">bias64</span>&nbsp;<span class="op" id="1678734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678739">trunc</span>&nbsp;<span class="op" id="1678745">|=</span>&nbsp;<span class="ident" id="1678748">mant</span>&nbsp;<span class="op" id="1678753">&amp;</span>&nbsp;<span class="num" id="1678755">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678760">mant</span>&nbsp;<span class="op" id="1678765">&gt;&gt;=</span>&nbsp;<span class="num" id="1678769">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678774">exp</span><span class="op" id="1678777">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678786">if</span>&nbsp;<span class="ident" id="1678789">mant</span><span class="op" id="1678793">&amp;</span><span class="num" id="1678794">1</span>&nbsp;<span class="op" id="1678796">!=</span>&nbsp;<span class="num" id="1678799">0</span>&nbsp;<span class="op" id="1678801">&amp;&amp;</span>&nbsp;<span class="op" id="1678804">(</span><span class="ident" id="1678805">trunc</span>&nbsp;<span class="op" id="1678811">!=</span>&nbsp;<span class="num" id="1678814">0</span>&nbsp;<span class="op" id="1678816">||</span>&nbsp;<span class="ident" id="1678819">mant</span><span class="op" id="1678823">&amp;</span><span class="num" id="1678824">2</span>&nbsp;<span class="op" id="1678826">!=</span>&nbsp;<span class="num" id="1678829">0</span><span class="op" id="1678830">)</span>&nbsp;<span class="op" id="1678832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678837">mant</span><span class="op" id="1678841">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678846">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678850">mant</span>&nbsp;<span class="op" id="1678855">&gt;&gt;=</span>&nbsp;<span class="num" id="1678859">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1678863">exp</span><span class="op" id="1678866">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678871">if</span>&nbsp;<span class="ident" id="1678874">mant</span>&nbsp;<span class="op" id="1678879">&lt;</span>&nbsp;<span class="num" id="1678881">1</span><span class="op" id="1678882">&lt;&lt;</span><span class="ident" id="1678884">mantbits64</span>&nbsp;<span class="op" id="1678895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678900">return</span>&nbsp;<span class="ident" id="1678907">sign</span>&nbsp;<span class="op" id="1678912">|</span>&nbsp;<span class="ident" id="1678914">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678921">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1678924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1678927">return</span>&nbsp;<span class="ident" id="1678934">sign</span>&nbsp;<span class="op" id="1678939">|</span>&nbsp;<span class="ident" id="1678941">uint64</span><span class="op" id="1678947">(</span><span class="ident" id="1678948">exp</span><span class="op" id="1678951">-</span><span class="ident" id="1678952">bias64</span><span class="op" id="1678958">)</span><span class="op" id="1678959">&lt;&lt;</span><span class="ident" id="1678961">mantbits64</span>&nbsp;<span class="op" id="1678972">|</span>&nbsp;<span class="ident" id="1678974">mant</span><span class="op" id="1678978">&amp;</span><span class="op" id="1678979">(</span><span class="num" id="1678980">1</span><span class="op" id="1678981">&lt;&lt;</span><span class="ident" id="1678983">mantbits64</span><span class="op" id="1678993">-</span><span class="num" id="1678994">1</span><span class="op" id="1678995">)</span><br>
<span class="lineno"></span><span class="op" id="1678997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1679000">func</span>&nbsp;<span class="ident" id="1679005">fpack32</span><span class="op" id="1679012">(</span><span class="ident" id="1679013">sign</span><span class="op" id="1679017">,</span>&nbsp;<span class="ident" id="1679019">mant</span>&nbsp;<span class="builtintype" id="1679024">uint32</span><span class="op" id="1679030">,</span>&nbsp;<span class="ident" id="1679032">exp</span>&nbsp;<span class="builtintype" id="1679036">int</span><span class="op" id="1679039">,</span>&nbsp;<span class="ident" id="1679041">trunc</span>&nbsp;<span class="builtintype" id="1679047">uint32</span><span class="op" id="1679053">)</span>&nbsp;<span class="builtintype" id="1679055">uint32</span>&nbsp;<span class="op" id="1679062">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679065">mant0</span><span class="op" id="1679070">,</span>&nbsp;<span class="ident" id="1679072">exp0</span><span class="op" id="1679076">,</span>&nbsp;<span class="ident" id="1679078">trunc0</span>&nbsp;<span class="op" id="1679085">:=</span>&nbsp;<span class="ident" id="1679088">mant</span><span class="op" id="1679092">,</span>&nbsp;<span class="ident" id="1679094">exp</span><span class="op" id="1679097">,</span>&nbsp;<span class="ident" id="1679099">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679106">if</span>&nbsp;<span class="ident" id="1679109">mant</span>&nbsp;<span class="op" id="1679114">==</span>&nbsp;<span class="num" id="1679117">0</span>&nbsp;<span class="op" id="1679119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679123">return</span>&nbsp;<span class="ident" id="1679130">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679139">for</span>&nbsp;<span class="ident" id="1679143">mant</span>&nbsp;<span class="op" id="1679148">&lt;</span>&nbsp;<span class="num" id="1679150">1</span><span class="op" id="1679151">&lt;&lt;</span><span class="ident" id="1679153">mantbits32</span>&nbsp;<span class="op" id="1679164">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679168">mant</span>&nbsp;<span class="op" id="1679173">&lt;&lt;=</span>&nbsp;<span class="num" id="1679177">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679181">exp</span><span class="op" id="1679184">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679191">for</span>&nbsp;<span class="ident" id="1679195">mant</span>&nbsp;<span class="op" id="1679200">&gt;=</span>&nbsp;<span class="num" id="1679203">4</span><span class="op" id="1679204">&lt;&lt;</span><span class="ident" id="1679206">mantbits32</span>&nbsp;<span class="op" id="1679217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679221">trunc</span>&nbsp;<span class="op" id="1679227">|=</span>&nbsp;<span class="ident" id="1679230">mant</span>&nbsp;<span class="op" id="1679235">&amp;</span>&nbsp;<span class="num" id="1679237">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679241">mant</span>&nbsp;<span class="op" id="1679246">&gt;&gt;=</span>&nbsp;<span class="num" id="1679250">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679254">exp</span><span class="op" id="1679257">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679264">if</span>&nbsp;<span class="ident" id="1679267">mant</span>&nbsp;<span class="op" id="1679272">&gt;=</span>&nbsp;<span class="num" id="1679275">2</span><span class="op" id="1679276">&lt;&lt;</span><span class="ident" id="1679278">mantbits32</span>&nbsp;<span class="op" id="1679289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679293">if</span>&nbsp;<span class="ident" id="1679296">mant</span><span class="op" id="1679300">&amp;</span><span class="num" id="1679301">1</span>&nbsp;<span class="op" id="1679303">!=</span>&nbsp;<span class="num" id="1679306">0</span>&nbsp;<span class="op" id="1679308">&amp;&amp;</span>&nbsp;<span class="op" id="1679311">(</span><span class="ident" id="1679312">trunc</span>&nbsp;<span class="op" id="1679318">!=</span>&nbsp;<span class="num" id="1679321">0</span>&nbsp;<span class="op" id="1679323">||</span>&nbsp;<span class="ident" id="1679326">mant</span><span class="op" id="1679330">&amp;</span><span class="num" id="1679331">2</span>&nbsp;<span class="op" id="1679333">!=</span>&nbsp;<span class="num" id="1679336">0</span><span class="op" id="1679337">)</span>&nbsp;<span class="op" id="1679339">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679344">mant</span><span class="op" id="1679348">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679354">if</span>&nbsp;<span class="ident" id="1679357">mant</span>&nbsp;<span class="op" id="1679362">&gt;=</span>&nbsp;<span class="num" id="1679365">4</span><span class="op" id="1679366">&lt;&lt;</span><span class="ident" id="1679368">mantbits32</span>&nbsp;<span class="op" id="1679379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679385">mant</span>&nbsp;<span class="op" id="1679390">&gt;&gt;=</span>&nbsp;<span class="num" id="1679394">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679400">exp</span><span class="op" id="1679403">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679409">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679417">mant</span>&nbsp;<span class="op" id="1679422">&gt;&gt;=</span>&nbsp;<span class="num" id="1679426">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679430">exp</span><span class="op" id="1679433">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679440">if</span>&nbsp;<span class="ident" id="1679443">exp</span>&nbsp;<span class="op" id="1679447">&gt;=</span>&nbsp;<span class="num" id="1679450">1</span><span class="op" id="1679451">&lt;&lt;</span><span class="ident" id="1679453">expbits32</span><span class="op" id="1679462">-</span><span class="num" id="1679463">1</span><span class="op" id="1679464">+</span><span class="ident" id="1679465">bias32</span>&nbsp;<span class="op" id="1679472">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679476">return</span>&nbsp;<span class="ident" id="1679483">sign</span>&nbsp;<span class="op" id="1679488">^</span>&nbsp;<span class="ident" id="1679490">inf32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679500">if</span>&nbsp;<span class="ident" id="1679503">exp</span>&nbsp;<span class="op" id="1679507">&lt;</span>&nbsp;<span class="ident" id="1679509">bias32</span><span class="op" id="1679515">+</span><span class="num" id="1679516">1</span>&nbsp;<span class="op" id="1679518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679522">if</span>&nbsp;<span class="ident" id="1679525">exp</span>&nbsp;<span class="op" id="1679529">&lt;</span>&nbsp;<span class="ident" id="1679531">bias32</span><span class="op" id="1679537">-</span><span class="builtintype" id="1679538">int</span><span class="op" id="1679541">(</span><span class="ident" id="1679542">mantbits32</span><span class="op" id="1679552">)</span>&nbsp;<span class="op" id="1679554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679559">return</span>&nbsp;<span class="ident" id="1679566">sign</span>&nbsp;<span class="op" id="1679571">|</span>&nbsp;<span class="num" id="1679573">0</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1679581">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679612">mant</span><span class="op" id="1679616">,</span>&nbsp;<span class="ident" id="1679618">exp</span><span class="op" id="1679621">,</span>&nbsp;<span class="ident" id="1679623">trunc</span>&nbsp;<span class="op" id="1679629">=</span>&nbsp;<span class="ident" id="1679631">mant0</span><span class="op" id="1679636">,</span>&nbsp;<span class="ident" id="1679638">exp0</span><span class="op" id="1679642">,</span>&nbsp;<span class="ident" id="1679644">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679653">for</span>&nbsp;<span class="ident" id="1679657">exp</span>&nbsp;<span class="op" id="1679661">&lt;</span>&nbsp;<span class="ident" id="1679663">bias32</span>&nbsp;<span class="op" id="1679670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679675">trunc</span>&nbsp;<span class="op" id="1679681">|=</span>&nbsp;<span class="ident" id="1679684">mant</span>&nbsp;<span class="op" id="1679689">&amp;</span>&nbsp;<span class="num" id="1679691">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679696">mant</span>&nbsp;<span class="op" id="1679701">&gt;&gt;=</span>&nbsp;<span class="num" id="1679705">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679710">exp</span><span class="op" id="1679713">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679722">if</span>&nbsp;<span class="ident" id="1679725">mant</span><span class="op" id="1679729">&amp;</span><span class="num" id="1679730">1</span>&nbsp;<span class="op" id="1679732">!=</span>&nbsp;<span class="num" id="1679735">0</span>&nbsp;<span class="op" id="1679737">&amp;&amp;</span>&nbsp;<span class="op" id="1679740">(</span><span class="ident" id="1679741">trunc</span>&nbsp;<span class="op" id="1679747">!=</span>&nbsp;<span class="num" id="1679750">0</span>&nbsp;<span class="op" id="1679752">||</span>&nbsp;<span class="ident" id="1679755">mant</span><span class="op" id="1679759">&amp;</span><span class="num" id="1679760">2</span>&nbsp;<span class="op" id="1679762">!=</span>&nbsp;<span class="num" id="1679765">0</span><span class="op" id="1679766">)</span>&nbsp;<span class="op" id="1679768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679773">mant</span><span class="op" id="1679777">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679786">mant</span>&nbsp;<span class="op" id="1679791">&gt;&gt;=</span>&nbsp;<span class="num" id="1679795">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679799">exp</span><span class="op" id="1679802">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679807">if</span>&nbsp;<span class="ident" id="1679810">mant</span>&nbsp;<span class="op" id="1679815">&lt;</span>&nbsp;<span class="num" id="1679817">1</span><span class="op" id="1679818">&lt;&lt;</span><span class="ident" id="1679820">mantbits32</span>&nbsp;<span class="op" id="1679831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679836">return</span>&nbsp;<span class="ident" id="1679843">sign</span>&nbsp;<span class="op" id="1679848">|</span>&nbsp;<span class="ident" id="1679850">mant</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1679860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1679863">return</span>&nbsp;<span class="ident" id="1679870">sign</span>&nbsp;<span class="op" id="1679875">|</span>&nbsp;<span class="builtintype" id="1679877">uint32</span><span class="op" id="1679883">(</span><span class="ident" id="1679884">exp</span><span class="op" id="1679887">-</span><span class="ident" id="1679888">bias32</span><span class="op" id="1679894">)</span><span class="op" id="1679895">&lt;&lt;</span><span class="ident" id="1679897">mantbits32</span>&nbsp;<span class="op" id="1679908">|</span>&nbsp;<span class="ident" id="1679910">mant</span><span class="op" id="1679914">&amp;</span><span class="op" id="1679915">(</span><span class="num" id="1679916">1</span><span class="op" id="1679917">&lt;&lt;</span><span class="ident" id="1679919">mantbits32</span><span class="op" id="1679929">-</span><span class="num" id="1679930">1</span><span class="op" id="1679931">)</span><br>
<span class="lineno"></span><span class="op" id="1679933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="1679936">func</span>&nbsp;<span class="ident" id="1679941">fadd64</span><span class="op" id="1679947">(</span><span class="ident" id="1679948">f</span><span class="op" id="1679949">,</span>&nbsp;<span class="ident" id="1679951">g</span>&nbsp;<span class="ident" id="1679953">uint64</span><span class="op" id="1679959">)</span>&nbsp;<span class="ident" id="1679961">uint64</span>&nbsp;<span class="op" id="1679968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1679971">fs</span><span class="op" id="1679973">,</span>&nbsp;<span class="ident" id="1679975">fm</span><span class="op" id="1679977">,</span>&nbsp;<span class="ident" id="1679979">fe</span><span class="op" id="1679981">,</span>&nbsp;<span class="ident" id="1679983">fi</span><span class="op" id="1679985">,</span>&nbsp;<span class="ident" id="1679987">fn</span>&nbsp;<span class="op" id="1679990">:=</span>&nbsp;<span class="ident" id="1679993">funpack64</span><span class="op" id="1680002">(</span><span class="ident" id="1680003">f</span><span class="op" id="1680004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680007">gs</span><span class="op" id="1680009">,</span>&nbsp;<span class="ident" id="1680011">gm</span><span class="op" id="1680013">,</span>&nbsp;<span class="ident" id="1680015">ge</span><span class="op" id="1680017">,</span>&nbsp;<span class="ident" id="1680019">gi</span><span class="op" id="1680021">,</span>&nbsp;<span class="ident" id="1680023">gn</span>&nbsp;<span class="op" id="1680026">:=</span>&nbsp;<span class="ident" id="1680029">funpack64</span><span class="op" id="1680038">(</span><span class="ident" id="1680039">g</span><span class="op" id="1680040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1680044">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680063">switch</span>&nbsp;<span class="op" id="1680070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680073">case</span>&nbsp;<span class="ident" id="1680078">fn</span>&nbsp;<span class="op" id="1680081">||</span>&nbsp;<span class="ident" id="1680084">gn</span><span class="op" id="1680086">:</span>&nbsp;<span class="comment" id="1680088">//&nbsp;NaN&nbsp;+&nbsp;x&nbsp;or&nbsp;x&nbsp;+&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680118">return</span>&nbsp;<span class="ident" id="1680125">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680133">case</span>&nbsp;<span class="ident" id="1680138">fi</span>&nbsp;<span class="op" id="1680141">&amp;&amp;</span>&nbsp;<span class="ident" id="1680144">gi</span>&nbsp;<span class="op" id="1680147">&amp;&amp;</span>&nbsp;<span class="ident" id="1680150">fs</span>&nbsp;<span class="op" id="1680153">!=</span>&nbsp;<span class="ident" id="1680156">gs</span><span class="op" id="1680158">:</span>&nbsp;<span class="comment" id="1680160">//&nbsp;+Inf&nbsp;+&nbsp;-Inf&nbsp;or&nbsp;-Inf&nbsp;+&nbsp;+Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680198">return</span>&nbsp;<span class="ident" id="1680205">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680213">case</span>&nbsp;<span class="ident" id="1680218">fi</span><span class="op" id="1680220">:</span>&nbsp;<span class="comment" id="1680222">//&nbsp;Inf&nbsp;+&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680245">return</span>&nbsp;<span class="ident" id="1680252">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680256">case</span>&nbsp;<span class="ident" id="1680261">gi</span><span class="op" id="1680263">:</span>&nbsp;<span class="comment" id="1680265">//&nbsp;f&nbsp;+&nbsp;Inf&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680288">return</span>&nbsp;<span class="ident" id="1680295">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680299">case</span>&nbsp;<span class="ident" id="1680304">fm</span>&nbsp;<span class="op" id="1680307">==</span>&nbsp;<span class="num" id="1680310">0</span>&nbsp;<span class="op" id="1680312">&amp;&amp;</span>&nbsp;<span class="ident" id="1680315">gm</span>&nbsp;<span class="op" id="1680318">==</span>&nbsp;<span class="num" id="1680321">0</span>&nbsp;<span class="op" id="1680323">&amp;&amp;</span>&nbsp;<span class="ident" id="1680326">fs</span>&nbsp;<span class="op" id="1680329">!=</span>&nbsp;<span class="num" id="1680332">0</span>&nbsp;<span class="op" id="1680334">&amp;&amp;</span>&nbsp;<span class="ident" id="1680337">gs</span>&nbsp;<span class="op" id="1680340">!=</span>&nbsp;<span class="num" id="1680343">0</span><span class="op" id="1680344">:</span>&nbsp;<span class="comment" id="1680346">//&nbsp;-0&nbsp;+&nbsp;-0&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680364">return</span>&nbsp;<span class="ident" id="1680371">f</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680375">case</span>&nbsp;<span class="ident" id="1680380">fm</span>&nbsp;<span class="op" id="1680383">==</span>&nbsp;<span class="num" id="1680386">0</span><span class="op" id="1680387">:</span>&nbsp;<span class="comment" id="1680389">//&nbsp;0&nbsp;+&nbsp;g&nbsp;=&nbsp;g&nbsp;but&nbsp;0&nbsp;+&nbsp;-0&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680420">if</span>&nbsp;<span class="ident" id="1680423">gm</span>&nbsp;<span class="op" id="1680426">==</span>&nbsp;<span class="num" id="1680429">0</span>&nbsp;<span class="op" id="1680431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680436">g</span>&nbsp;<span class="op" id="1680438">^=</span>&nbsp;<span class="ident" id="1680441">gs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680446">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680450">return</span>&nbsp;<span class="ident" id="1680457">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680461">case</span>&nbsp;<span class="ident" id="1680466">gm</span>&nbsp;<span class="op" id="1680469">==</span>&nbsp;<span class="num" id="1680472">0</span><span class="op" id="1680473">:</span>&nbsp;<span class="comment" id="1680475">//&nbsp;f&nbsp;+&nbsp;0&nbsp;=&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680490">return</span>&nbsp;<span class="ident" id="1680497">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680505">if</span>&nbsp;<span class="ident" id="1680508">fe</span>&nbsp;<span class="op" id="1680511">&lt;</span>&nbsp;<span class="ident" id="1680513">ge</span>&nbsp;<span class="op" id="1680516">||</span>&nbsp;<span class="ident" id="1680519">fe</span>&nbsp;<span class="op" id="1680522">==</span>&nbsp;<span class="ident" id="1680525">ge</span>&nbsp;<span class="op" id="1680528">&amp;&amp;</span>&nbsp;<span class="ident" id="1680531">fm</span>&nbsp;<span class="op" id="1680534">&lt;</span>&nbsp;<span class="ident" id="1680536">gm</span>&nbsp;<span class="op" id="1680539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680543">f</span><span class="op" id="1680544">,</span>&nbsp;<span class="ident" id="1680546">g</span><span class="op" id="1680547">,</span>&nbsp;<span class="ident" id="1680549">fs</span><span class="op" id="1680551">,</span>&nbsp;<span class="ident" id="1680553">fm</span><span class="op" id="1680555">,</span>&nbsp;<span class="ident" id="1680557">fe</span><span class="op" id="1680559">,</span>&nbsp;<span class="ident" id="1680561">gs</span><span class="op" id="1680563">,</span>&nbsp;<span class="ident" id="1680565">gm</span><span class="op" id="1680567">,</span>&nbsp;<span class="ident" id="1680569">ge</span>&nbsp;<span class="op" id="1680572">=</span>&nbsp;<span class="ident" id="1680574">g</span><span class="op" id="1680575">,</span>&nbsp;<span class="ident" id="1680577">f</span><span class="op" id="1680578">,</span>&nbsp;<span class="ident" id="1680580">gs</span><span class="op" id="1680582">,</span>&nbsp;<span class="ident" id="1680584">gm</span><span class="op" id="1680586">,</span>&nbsp;<span class="ident" id="1680588">ge</span><span class="op" id="1680590">,</span>&nbsp;<span class="ident" id="1680592">fs</span><span class="op" id="1680594">,</span>&nbsp;<span class="ident" id="1680596">fm</span><span class="op" id="1680598">,</span>&nbsp;<span class="ident" id="1680600">fe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680604">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680608">shift</span>&nbsp;<span class="op" id="1680614">:=</span>&nbsp;<span class="builtintype" id="1680617">uint</span><span class="op" id="1680621">(</span><span class="ident" id="1680622">fe</span>&nbsp;<span class="op" id="1680625">-</span>&nbsp;<span class="ident" id="1680627">ge</span><span class="op" id="1680629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680632">fm</span>&nbsp;<span class="op" id="1680635">&lt;&lt;=</span>&nbsp;<span class="num" id="1680639">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680642">gm</span>&nbsp;<span class="op" id="1680645">&lt;&lt;=</span>&nbsp;<span class="num" id="1680649">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680652">trunc</span>&nbsp;<span class="op" id="1680658">:=</span>&nbsp;<span class="ident" id="1680661">gm</span>&nbsp;<span class="op" id="1680664">&amp;</span>&nbsp;<span class="op" id="1680666">(</span><span class="num" id="1680667">1</span><span class="op" id="1680668">&lt;&lt;</span><span class="ident" id="1680670">shift</span>&nbsp;<span class="op" id="1680676">-</span>&nbsp;<span class="num" id="1680678">1</span><span class="op" id="1680679">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680682">gm</span>&nbsp;<span class="op" id="1680685">&gt;&gt;=</span>&nbsp;<span class="ident" id="1680689">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680696">if</span>&nbsp;<span class="ident" id="1680699">fs</span>&nbsp;<span class="op" id="1680702">==</span>&nbsp;<span class="ident" id="1680705">gs</span>&nbsp;<span class="op" id="1680708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680712">fm</span>&nbsp;<span class="op" id="1680715">+=</span>&nbsp;<span class="ident" id="1680718">gm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680722">}</span>&nbsp;<span class="keyword" id="1680724">else</span>&nbsp;<span class="op" id="1680729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680733">fm</span>&nbsp;<span class="op" id="1680736">-=</span>&nbsp;<span class="ident" id="1680739">gm</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680744">if</span>&nbsp;<span class="ident" id="1680747">trunc</span>&nbsp;<span class="op" id="1680753">!=</span>&nbsp;<span class="num" id="1680756">0</span>&nbsp;<span class="op" id="1680758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680763">fm</span><span class="op" id="1680765">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680776">if</span>&nbsp;<span class="ident" id="1680779">fm</span>&nbsp;<span class="op" id="1680782">==</span>&nbsp;<span class="num" id="1680785">0</span>&nbsp;<span class="op" id="1680787">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1680791">fs</span>&nbsp;<span class="op" id="1680794">=</span>&nbsp;<span class="num" id="1680796">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1680799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680802">return</span>&nbsp;<span class="ident" id="1680809">fpack64</span><span class="op" id="1680816">(</span><span class="ident" id="1680817">fs</span><span class="op" id="1680819">,</span>&nbsp;<span class="ident" id="1680821">fm</span><span class="op" id="1680823">,</span>&nbsp;<span class="ident" id="1680825">fe</span><span class="op" id="1680827">-</span><span class="num" id="1680828">2</span><span class="op" id="1680829">,</span>&nbsp;<span class="ident" id="1680831">trunc</span><span class="op" id="1680836">)</span><br>
<span class="lineno"></span><span class="op" id="1680838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="1680841">func</span>&nbsp;<span class="ident" id="1680846">fsub64</span><span class="op" id="1680852">(</span><span class="ident" id="1680853">f</span><span class="op" id="1680854">,</span>&nbsp;<span class="ident" id="1680856">g</span>&nbsp;<span class="ident" id="1680858">uint64</span><span class="op" id="1680864">)</span>&nbsp;<span class="ident" id="1680866">uint64</span>&nbsp;<span class="op" id="1680873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680876">return</span>&nbsp;<span class="ident" id="1680883">fadd64</span><span class="op" id="1680889">(</span><span class="ident" id="1680890">f</span><span class="op" id="1680891">,</span>&nbsp;<span class="ident" id="1680893">fneg64</span><span class="op" id="1680899">(</span><span class="ident" id="1680900">g</span><span class="op" id="1680901">)</span><span class="op" id="1680902">)</span><br>
<span class="lineno"></span><span class="op" id="1680904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1680907">func</span>&nbsp;<span class="ident" id="1680912">fneg64</span><span class="op" id="1680918">(</span><span class="ident" id="1680919">f</span>&nbsp;<span class="ident" id="1680921">uint64</span><span class="op" id="1680927">)</span>&nbsp;<span class="ident" id="1680929">uint64</span>&nbsp;<span class="op" id="1680936">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1680939">return</span>&nbsp;<span class="ident" id="1680946">f</span>&nbsp;<span class="op" id="1680948">^</span>&nbsp;<span class="op" id="1680950">(</span><span class="num" id="1680951">1</span>&nbsp;<span class="op" id="1680953">&lt;&lt;</span>&nbsp;<span class="op" id="1680956">(</span><span class="ident" id="1680957">mantbits64</span>&nbsp;<span class="op" id="1680968">+</span>&nbsp;<span class="ident" id="1680970">expbits64</span><span class="op" id="1680979">)</span><span class="op" id="1680980">)</span><br>
<span class="lineno"></span><span class="op" id="1680982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1680985">func</span>&nbsp;<span class="ident" id="1680990">fmul64</span><span class="op" id="1680996">(</span><span class="ident" id="1680997">f</span><span class="op" id="1680998">,</span>&nbsp;<span class="ident" id="1681000">g</span>&nbsp;<span class="ident" id="1681002">uint64</span><span class="op" id="1681008">)</span>&nbsp;<span class="ident" id="1681010">uint64</span>&nbsp;<span class="op" id="1681017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681020">fs</span><span class="op" id="1681022">,</span>&nbsp;<span class="ident" id="1681024">fm</span><span class="op" id="1681026">,</span>&nbsp;<span class="ident" id="1681028">fe</span><span class="op" id="1681030">,</span>&nbsp;<span class="ident" id="1681032">fi</span><span class="op" id="1681034">,</span>&nbsp;<span class="ident" id="1681036">fn</span>&nbsp;<span class="op" id="1681039">:=</span>&nbsp;<span class="ident" id="1681042">funpack64</span><span class="op" id="1681051">(</span><span class="ident" id="1681052">f</span><span class="op" id="1681053">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681056">gs</span><span class="op" id="1681058">,</span>&nbsp;<span class="ident" id="1681060">gm</span><span class="op" id="1681062">,</span>&nbsp;<span class="ident" id="1681064">ge</span><span class="op" id="1681066">,</span>&nbsp;<span class="ident" id="1681068">gi</span><span class="op" id="1681070">,</span>&nbsp;<span class="ident" id="1681072">gn</span>&nbsp;<span class="op" id="1681075">:=</span>&nbsp;<span class="ident" id="1681078">funpack64</span><span class="op" id="1681087">(</span><span class="ident" id="1681088">g</span><span class="op" id="1681089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1681093">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681112">switch</span>&nbsp;<span class="op" id="1681119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681122">case</span>&nbsp;<span class="ident" id="1681127">fn</span>&nbsp;<span class="op" id="1681130">||</span>&nbsp;<span class="ident" id="1681133">gn</span><span class="op" id="1681135">:</span>&nbsp;<span class="comment" id="1681137">//&nbsp;NaN&nbsp;*&nbsp;g&nbsp;or&nbsp;f&nbsp;*&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681167">return</span>&nbsp;<span class="ident" id="1681174">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681182">case</span>&nbsp;<span class="ident" id="1681187">fi</span>&nbsp;<span class="op" id="1681190">&amp;&amp;</span>&nbsp;<span class="ident" id="1681193">gi</span><span class="op" id="1681195">:</span>&nbsp;<span class="comment" id="1681197">//&nbsp;Inf&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681239">return</span>&nbsp;<span class="ident" id="1681246">f</span>&nbsp;<span class="op" id="1681248">^</span>&nbsp;<span class="ident" id="1681250">gs</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681255">case</span>&nbsp;<span class="ident" id="1681260">fi</span>&nbsp;<span class="op" id="1681263">&amp;&amp;</span>&nbsp;<span class="ident" id="1681266">gm</span>&nbsp;<span class="op" id="1681269">==</span>&nbsp;<span class="num" id="1681272">0</span><span class="op" id="1681273">,</span>&nbsp;<span class="ident" id="1681275">fm</span>&nbsp;<span class="op" id="1681278">==</span>&nbsp;<span class="num" id="1681281">0</span>&nbsp;<span class="op" id="1681283">&amp;&amp;</span>&nbsp;<span class="ident" id="1681286">gi</span><span class="op" id="1681288">:</span>&nbsp;<span class="comment" id="1681290">//&nbsp;0&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;*&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681319">return</span>&nbsp;<span class="ident" id="1681326">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681334">case</span>&nbsp;<span class="ident" id="1681339">fm</span>&nbsp;<span class="op" id="1681342">==</span>&nbsp;<span class="num" id="1681345">0</span><span class="op" id="1681346">:</span>&nbsp;<span class="comment" id="1681348">//&nbsp;0&nbsp;*&nbsp;x&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681384">return</span>&nbsp;<span class="ident" id="1681391">f</span>&nbsp;<span class="op" id="1681393">^</span>&nbsp;<span class="ident" id="1681395">gs</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681400">case</span>&nbsp;<span class="ident" id="1681405">gm</span>&nbsp;<span class="op" id="1681408">==</span>&nbsp;<span class="num" id="1681411">0</span><span class="op" id="1681412">:</span>&nbsp;<span class="comment" id="1681414">//&nbsp;x&nbsp;*&nbsp;0&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681450">return</span>&nbsp;<span class="ident" id="1681457">g</span>&nbsp;<span class="op" id="1681459">^</span>&nbsp;<span class="ident" id="1681461">fs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1681465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1681469">//&nbsp;53-bit&nbsp;*&nbsp;53-bit&nbsp;=&nbsp;107-&nbsp;or&nbsp;108-bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681507">lo</span><span class="op" id="1681509">,</span>&nbsp;<span class="ident" id="1681511">hi</span>&nbsp;<span class="op" id="1681514">:=</span>&nbsp;<span class="ident" id="1681517">mullu</span><span class="op" id="1681522">(</span><span class="ident" id="1681523">fm</span><span class="op" id="1681525">,</span>&nbsp;<span class="ident" id="1681527">gm</span><span class="op" id="1681529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681532">shift</span>&nbsp;<span class="op" id="1681538">:=</span>&nbsp;<span class="ident" id="1681541">mantbits64</span>&nbsp;<span class="op" id="1681552">-</span>&nbsp;<span class="num" id="1681554">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681557">trunc</span>&nbsp;<span class="op" id="1681563">:=</span>&nbsp;<span class="ident" id="1681566">lo</span>&nbsp;<span class="op" id="1681569">&amp;</span>&nbsp;<span class="op" id="1681571">(</span><span class="num" id="1681572">1</span><span class="op" id="1681573">&lt;&lt;</span><span class="ident" id="1681575">shift</span>&nbsp;<span class="op" id="1681581">-</span>&nbsp;<span class="num" id="1681583">1</span><span class="op" id="1681584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681587">mant</span>&nbsp;<span class="op" id="1681592">:=</span>&nbsp;<span class="ident" id="1681595">hi</span><span class="op" id="1681597">&lt;&lt;</span><span class="op" id="1681599">(</span><span class="num" id="1681600">64</span><span class="op" id="1681602">-</span><span class="ident" id="1681603">shift</span><span class="op" id="1681608">)</span>&nbsp;<span class="op" id="1681610">|</span>&nbsp;<span class="ident" id="1681612">lo</span><span class="op" id="1681614">&gt;&gt;</span><span class="ident" id="1681616">shift</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681623">return</span>&nbsp;<span class="ident" id="1681630">fpack64</span><span class="op" id="1681637">(</span><span class="ident" id="1681638">fs</span><span class="op" id="1681640">^</span><span class="ident" id="1681641">gs</span><span class="op" id="1681643">,</span>&nbsp;<span class="ident" id="1681645">mant</span><span class="op" id="1681649">,</span>&nbsp;<span class="ident" id="1681651">fe</span><span class="op" id="1681653">+</span><span class="ident" id="1681654">ge</span><span class="op" id="1681656">-</span><span class="num" id="1681657">1</span><span class="op" id="1681658">,</span>&nbsp;<span class="ident" id="1681660">trunc</span><span class="op" id="1681665">)</span><br>
<span class="lineno"></span><span class="op" id="1681667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1681670">func</span>&nbsp;<span class="ident" id="1681675">fdiv64</span><span class="op" id="1681681">(</span><span class="ident" id="1681682">f</span><span class="op" id="1681683">,</span>&nbsp;<span class="ident" id="1681685">g</span>&nbsp;<span class="ident" id="1681687">uint64</span><span class="op" id="1681693">)</span>&nbsp;<span class="ident" id="1681695">uint64</span>&nbsp;<span class="op" id="1681702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681705">fs</span><span class="op" id="1681707">,</span>&nbsp;<span class="ident" id="1681709">fm</span><span class="op" id="1681711">,</span>&nbsp;<span class="ident" id="1681713">fe</span><span class="op" id="1681715">,</span>&nbsp;<span class="ident" id="1681717">fi</span><span class="op" id="1681719">,</span>&nbsp;<span class="ident" id="1681721">fn</span>&nbsp;<span class="op" id="1681724">:=</span>&nbsp;<span class="ident" id="1681727">funpack64</span><span class="op" id="1681736">(</span><span class="ident" id="1681737">f</span><span class="op" id="1681738">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1681741">gs</span><span class="op" id="1681743">,</span>&nbsp;<span class="ident" id="1681745">gm</span><span class="op" id="1681747">,</span>&nbsp;<span class="ident" id="1681749">ge</span><span class="op" id="1681751">,</span>&nbsp;<span class="ident" id="1681753">gi</span><span class="op" id="1681755">,</span>&nbsp;<span class="ident" id="1681757">gn</span>&nbsp;<span class="op" id="1681760">:=</span>&nbsp;<span class="ident" id="1681763">funpack64</span><span class="op" id="1681772">(</span><span class="ident" id="1681773">g</span><span class="op" id="1681774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1681778">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681797">switch</span>&nbsp;<span class="op" id="1681804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681807">case</span>&nbsp;<span class="ident" id="1681812">fn</span>&nbsp;<span class="op" id="1681815">||</span>&nbsp;<span class="ident" id="1681818">gn</span><span class="op" id="1681820">:</span>&nbsp;<span class="comment" id="1681822">//&nbsp;NaN&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681851">return</span>&nbsp;<span class="ident" id="1681858">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681866">case</span>&nbsp;<span class="ident" id="1681871">fi</span>&nbsp;<span class="op" id="1681874">&amp;&amp;</span>&nbsp;<span class="ident" id="1681877">gi</span><span class="op" id="1681879">:</span>&nbsp;<span class="comment" id="1681881">//&nbsp;Inf&nbsp;/&nbsp;Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681906">return</span>&nbsp;<span class="ident" id="1681913">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681921">case</span>&nbsp;<span class="op" id="1681926">!</span><span class="ident" id="1681927">fi</span>&nbsp;<span class="op" id="1681930">&amp;&amp;</span>&nbsp;<span class="op" id="1681933">!</span><span class="ident" id="1681934">gi</span>&nbsp;<span class="op" id="1681937">&amp;&amp;</span>&nbsp;<span class="ident" id="1681940">fm</span>&nbsp;<span class="op" id="1681943">==</span>&nbsp;<span class="num" id="1681946">0</span>&nbsp;<span class="op" id="1681948">&amp;&amp;</span>&nbsp;<span class="ident" id="1681951">gm</span>&nbsp;<span class="op" id="1681954">==</span>&nbsp;<span class="num" id="1681957">0</span><span class="op" id="1681958">:</span>&nbsp;<span class="comment" id="1681960">//&nbsp;0&nbsp;/&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681977">return</span>&nbsp;<span class="ident" id="1681984">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1681992">case</span>&nbsp;<span class="ident" id="1681997">fi</span><span class="op" id="1681999">,</span>&nbsp;<span class="op" id="1682001">!</span><span class="ident" id="1682002">gi</span>&nbsp;<span class="op" id="1682005">&amp;&amp;</span>&nbsp;<span class="ident" id="1682008">gm</span>&nbsp;<span class="op" id="1682011">==</span>&nbsp;<span class="num" id="1682014">0</span><span class="op" id="1682015">:</span>&nbsp;<span class="comment" id="1682017">//&nbsp;Inf&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;0&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682044">return</span>&nbsp;<span class="ident" id="1682051">fs</span>&nbsp;<span class="op" id="1682054">^</span>&nbsp;<span class="ident" id="1682056">gs</span>&nbsp;<span class="op" id="1682059">^</span>&nbsp;<span class="ident" id="1682061">inf64</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682069">case</span>&nbsp;<span class="ident" id="1682074">gi</span><span class="op" id="1682076">,</span>&nbsp;<span class="ident" id="1682078">fm</span>&nbsp;<span class="op" id="1682081">==</span>&nbsp;<span class="num" id="1682084">0</span><span class="op" id="1682085">:</span>&nbsp;<span class="comment" id="1682087">//&nbsp;f&nbsp;/&nbsp;Inf&nbsp;=&nbsp;0&nbsp;/&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682114">return</span>&nbsp;<span class="ident" id="1682121">fs</span>&nbsp;<span class="op" id="1682124">^</span>&nbsp;<span class="ident" id="1682126">gs</span>&nbsp;<span class="op" id="1682129">^</span>&nbsp;<span class="num" id="1682131">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682137">_</span><span class="op" id="1682138">,</span>&nbsp;<span class="ident" id="1682140">_</span><span class="op" id="1682141">,</span>&nbsp;<span class="ident" id="1682143">_</span><span class="op" id="1682144">,</span>&nbsp;<span class="ident" id="1682146">_</span>&nbsp;<span class="op" id="1682148">=</span>&nbsp;<span class="ident" id="1682150">fi</span><span class="op" id="1682152">,</span>&nbsp;<span class="ident" id="1682154">fn</span><span class="op" id="1682156">,</span>&nbsp;<span class="ident" id="1682158">gi</span><span class="op" id="1682160">,</span>&nbsp;<span class="ident" id="1682162">gn</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1682167">//&nbsp;53-bit&lt;&lt;54&nbsp;/&nbsp;53-bit&nbsp;=&nbsp;53-&nbsp;or&nbsp;54-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682208">shift</span>&nbsp;<span class="op" id="1682214">:=</span>&nbsp;<span class="ident" id="1682217">mantbits64</span>&nbsp;<span class="op" id="1682228">+</span>&nbsp;<span class="num" id="1682230">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682233">q</span><span class="op" id="1682234">,</span>&nbsp;<span class="ident" id="1682236">r</span>&nbsp;<span class="op" id="1682238">:=</span>&nbsp;<span class="ident" id="1682241">divlu</span><span class="op" id="1682246">(</span><span class="ident" id="1682247">fm</span><span class="op" id="1682249">&gt;&gt;</span><span class="op" id="1682251">(</span><span class="num" id="1682252">64</span><span class="op" id="1682254">-</span><span class="ident" id="1682255">shift</span><span class="op" id="1682260">)</span><span class="op" id="1682261">,</span>&nbsp;<span class="ident" id="1682263">fm</span><span class="op" id="1682265">&lt;&lt;</span><span class="ident" id="1682267">shift</span><span class="op" id="1682272">,</span>&nbsp;<span class="ident" id="1682274">gm</span><span class="op" id="1682276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682279">return</span>&nbsp;<span class="ident" id="1682286">fpack64</span><span class="op" id="1682293">(</span><span class="ident" id="1682294">fs</span><span class="op" id="1682296">^</span><span class="ident" id="1682297">gs</span><span class="op" id="1682299">,</span>&nbsp;<span class="ident" id="1682301">q</span><span class="op" id="1682302">,</span>&nbsp;<span class="ident" id="1682304">fe</span><span class="op" id="1682306">-</span><span class="ident" id="1682307">ge</span><span class="op" id="1682309">-</span><span class="num" id="1682310">2</span><span class="op" id="1682311">,</span>&nbsp;<span class="ident" id="1682313">r</span><span class="op" id="1682314">)</span><br>
<span class="lineno">315</span><span class="op" id="1682316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1682319">func</span>&nbsp;<span class="ident" id="1682324">f64to32</span><span class="op" id="1682331">(</span><span class="ident" id="1682332">f</span>&nbsp;<span class="ident" id="1682334">uint64</span><span class="op" id="1682340">)</span>&nbsp;<span class="builtintype" id="1682342">uint32</span>&nbsp;<span class="op" id="1682349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682352">fs</span><span class="op" id="1682354">,</span>&nbsp;<span class="ident" id="1682356">fm</span><span class="op" id="1682358">,</span>&nbsp;<span class="ident" id="1682360">fe</span><span class="op" id="1682362">,</span>&nbsp;<span class="ident" id="1682364">fi</span><span class="op" id="1682366">,</span>&nbsp;<span class="ident" id="1682368">fn</span>&nbsp;<span class="op" id="1682371">:=</span>&nbsp;<span class="ident" id="1682374">funpack64</span><span class="op" id="1682383">(</span><span class="ident" id="1682384">f</span><span class="op" id="1682385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682388">if</span>&nbsp;<span class="ident" id="1682391">fn</span>&nbsp;<span class="op" id="1682394">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682398">return</span>&nbsp;<span class="ident" id="1682405">nan32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682415">fs32</span>&nbsp;<span class="op" id="1682420">:=</span>&nbsp;<span class="builtintype" id="1682423">uint32</span><span class="op" id="1682429">(</span><span class="ident" id="1682430">fs</span>&nbsp;<span class="op" id="1682433">&gt;&gt;</span>&nbsp;<span class="num" id="1682436">32</span><span class="op" id="1682438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682441">if</span>&nbsp;<span class="ident" id="1682444">fi</span>&nbsp;<span class="op" id="1682447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682451">return</span>&nbsp;<span class="ident" id="1682458">fs32</span>&nbsp;<span class="op" id="1682463">^</span>&nbsp;<span class="ident" id="1682465">inf32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682475">const</span>&nbsp;<span class="ident" id="1682481">d</span>&nbsp;<span class="op" id="1682483">=</span>&nbsp;<span class="ident" id="1682485">mantbits64</span>&nbsp;<span class="op" id="1682496">-</span>&nbsp;<span class="ident" id="1682498">mantbits32</span>&nbsp;<span class="op" id="1682509">-</span>&nbsp;<span class="num" id="1682511">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682514">return</span>&nbsp;<span class="ident" id="1682521">fpack32</span><span class="op" id="1682528">(</span><span class="ident" id="1682529">fs32</span><span class="op" id="1682533">,</span>&nbsp;<span class="builtintype" id="1682535">uint32</span><span class="op" id="1682541">(</span><span class="ident" id="1682542">fm</span><span class="op" id="1682544">&gt;&gt;</span><span class="ident" id="1682546">d</span><span class="op" id="1682547">)</span><span class="op" id="1682548">,</span>&nbsp;<span class="ident" id="1682550">fe</span><span class="op" id="1682552">-</span><span class="num" id="1682553">1</span><span class="op" id="1682554">,</span>&nbsp;<span class="builtintype" id="1682556">uint32</span><span class="op" id="1682562">(</span><span class="ident" id="1682563">fm</span><span class="op" id="1682565">&amp;</span><span class="op" id="1682566">(</span><span class="num" id="1682567">1</span><span class="op" id="1682568">&lt;&lt;</span><span class="ident" id="1682570">d</span><span class="op" id="1682571">-</span><span class="num" id="1682572">1</span><span class="op" id="1682573">)</span><span class="op" id="1682574">)</span><span class="op" id="1682575">)</span><br>
<span class="lineno"></span><span class="op" id="1682577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="1682580">func</span>&nbsp;<span class="ident" id="1682585">f32to64</span><span class="op" id="1682592">(</span><span class="ident" id="1682593">f</span>&nbsp;<span class="builtintype" id="1682595">uint32</span><span class="op" id="1682601">)</span>&nbsp;<span class="ident" id="1682603">uint64</span>&nbsp;<span class="op" id="1682610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682613">const</span>&nbsp;<span class="ident" id="1682619">d</span>&nbsp;<span class="op" id="1682621">=</span>&nbsp;<span class="ident" id="1682623">mantbits64</span>&nbsp;<span class="op" id="1682634">-</span>&nbsp;<span class="ident" id="1682636">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682648">fs</span><span class="op" id="1682650">,</span>&nbsp;<span class="ident" id="1682652">fm</span><span class="op" id="1682654">,</span>&nbsp;<span class="ident" id="1682656">fe</span><span class="op" id="1682658">,</span>&nbsp;<span class="ident" id="1682660">fi</span><span class="op" id="1682662">,</span>&nbsp;<span class="ident" id="1682664">fn</span>&nbsp;<span class="op" id="1682667">:=</span>&nbsp;<span class="ident" id="1682670">funpack32</span><span class="op" id="1682679">(</span><span class="ident" id="1682680">f</span><span class="op" id="1682681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682684">if</span>&nbsp;<span class="ident" id="1682687">fn</span>&nbsp;<span class="op" id="1682690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682694">return</span>&nbsp;<span class="ident" id="1682701">nan64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682711">fs64</span>&nbsp;<span class="op" id="1682716">:=</span>&nbsp;<span class="ident" id="1682719">uint64</span><span class="op" id="1682725">(</span><span class="ident" id="1682726">fs</span><span class="op" id="1682728">)</span>&nbsp;<span class="op" id="1682730">&lt;&lt;</span>&nbsp;<span class="num" id="1682733">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682737">if</span>&nbsp;<span class="ident" id="1682740">fi</span>&nbsp;<span class="op" id="1682743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682747">return</span>&nbsp;<span class="ident" id="1682754">fs64</span>&nbsp;<span class="op" id="1682759">^</span>&nbsp;<span class="ident" id="1682761">inf64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1682768">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682771">return</span>&nbsp;<span class="ident" id="1682778">fpack64</span><span class="op" id="1682785">(</span><span class="ident" id="1682786">fs64</span><span class="op" id="1682790">,</span>&nbsp;<span class="ident" id="1682792">uint64</span><span class="op" id="1682798">(</span><span class="ident" id="1682799">fm</span><span class="op" id="1682801">)</span><span class="op" id="1682802">&lt;&lt;</span><span class="ident" id="1682804">d</span><span class="op" id="1682805">,</span>&nbsp;<span class="ident" id="1682807">fe</span><span class="op" id="1682809">,</span>&nbsp;<span class="num" id="1682811">0</span><span class="op" id="1682812">)</span><br>
<span class="lineno"></span><span class="op" id="1682814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1682817">func</span>&nbsp;<span class="ident" id="1682822">fcmp64</span><span class="op" id="1682828">(</span><span class="ident" id="1682829">f</span><span class="op" id="1682830">,</span>&nbsp;<span class="ident" id="1682832">g</span>&nbsp;<span class="ident" id="1682834">uint64</span><span class="op" id="1682840">)</span>&nbsp;<span class="op" id="1682842">(</span><span class="ident" id="1682843">cmp</span>&nbsp;<span class="builtintype" id="1682847">int</span><span class="op" id="1682850">,</span>&nbsp;<span class="ident" id="1682852">isnan</span>&nbsp;<span class="builtintype" id="1682858">bool</span><span class="op" id="1682862">)</span>&nbsp;<span class="op" id="1682864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682867">fs</span><span class="op" id="1682869">,</span>&nbsp;<span class="ident" id="1682871">fm</span><span class="op" id="1682873">,</span>&nbsp;<span class="ident" id="1682875">_</span><span class="op" id="1682876">,</span>&nbsp;<span class="ident" id="1682878">fi</span><span class="op" id="1682880">,</span>&nbsp;<span class="ident" id="1682882">fn</span>&nbsp;<span class="op" id="1682885">:=</span>&nbsp;<span class="ident" id="1682888">funpack64</span><span class="op" id="1682897">(</span><span class="ident" id="1682898">f</span><span class="op" id="1682899">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1682902">gs</span><span class="op" id="1682904">,</span>&nbsp;<span class="ident" id="1682906">gm</span><span class="op" id="1682908">,</span>&nbsp;<span class="ident" id="1682910">_</span><span class="op" id="1682911">,</span>&nbsp;<span class="ident" id="1682913">gi</span><span class="op" id="1682915">,</span>&nbsp;<span class="ident" id="1682917">gn</span>&nbsp;<span class="op" id="1682920">:=</span>&nbsp;<span class="ident" id="1682923">funpack64</span><span class="op" id="1682932">(</span><span class="ident" id="1682933">g</span><span class="op" id="1682934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682938">switch</span>&nbsp;<span class="op" id="1682945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682948">case</span>&nbsp;<span class="ident" id="1682953">fn</span><span class="op" id="1682955">,</span>&nbsp;<span class="ident" id="1682957">gn</span><span class="op" id="1682959">:</span>&nbsp;<span class="comment" id="1682961">//&nbsp;flag&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682975">return</span>&nbsp;<span class="num" id="1682982">0</span><span class="op" id="1682983">,</span>&nbsp;<span class="builtintype" id="1682985">true</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1682992">case</span>&nbsp;<span class="op" id="1682997">!</span><span class="ident" id="1682998">fi</span>&nbsp;<span class="op" id="1683001">&amp;&amp;</span>&nbsp;<span class="op" id="1683004">!</span><span class="ident" id="1683005">gi</span>&nbsp;<span class="op" id="1683008">&amp;&amp;</span>&nbsp;<span class="ident" id="1683011">fm</span>&nbsp;<span class="op" id="1683014">==</span>&nbsp;<span class="num" id="1683017">0</span>&nbsp;<span class="op" id="1683019">&amp;&amp;</span>&nbsp;<span class="ident" id="1683022">gm</span>&nbsp;<span class="op" id="1683025">==</span>&nbsp;<span class="num" id="1683028">0</span><span class="op" id="1683029">:</span>&nbsp;<span class="comment" id="1683031">//&nbsp;0&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683047">return</span>&nbsp;<span class="num" id="1683054">0</span><span class="op" id="1683055">,</span>&nbsp;<span class="builtintype" id="1683057">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683065">case</span>&nbsp;<span class="ident" id="1683070">fs</span>&nbsp;<span class="op" id="1683073">&gt;</span>&nbsp;<span class="ident" id="1683075">gs</span><span class="op" id="1683077">:</span>&nbsp;<span class="comment" id="1683079">//&nbsp;f&nbsp;&lt;&nbsp;0,&nbsp;g&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683097">return</span>&nbsp;<span class="op" id="1683104">-</span><span class="num" id="1683105">1</span><span class="op" id="1683106">,</span>&nbsp;<span class="builtintype" id="1683108">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683116">case</span>&nbsp;<span class="ident" id="1683121">fs</span>&nbsp;<span class="op" id="1683124">&lt;</span>&nbsp;<span class="ident" id="1683126">gs</span><span class="op" id="1683128">:</span>&nbsp;<span class="comment" id="1683130">//&nbsp;f&nbsp;&gt;&nbsp;0,&nbsp;g&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683148">return</span>&nbsp;<span class="op" id="1683155">+</span><span class="num" id="1683156">1</span><span class="op" id="1683157">,</span>&nbsp;<span class="builtintype" id="1683159">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683167">//&nbsp;Same&nbsp;sign,&nbsp;not&nbsp;NaN.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683191">//&nbsp;Can&nbsp;compare&nbsp;encodings&nbsp;directly&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683231">//&nbsp;Reverse&nbsp;for&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683253">case</span>&nbsp;<span class="ident" id="1683258">fs</span>&nbsp;<span class="op" id="1683261">==</span>&nbsp;<span class="num" id="1683264">0</span>&nbsp;<span class="op" id="1683266">&amp;&amp;</span>&nbsp;<span class="ident" id="1683269">f</span>&nbsp;<span class="op" id="1683271">&lt;</span>&nbsp;<span class="ident" id="1683273">g</span><span class="op" id="1683274">,</span>&nbsp;<span class="ident" id="1683276">fs</span>&nbsp;<span class="op" id="1683279">!=</span>&nbsp;<span class="num" id="1683282">0</span>&nbsp;<span class="op" id="1683284">&amp;&amp;</span>&nbsp;<span class="ident" id="1683287">f</span>&nbsp;<span class="op" id="1683289">&gt;</span>&nbsp;<span class="ident" id="1683291">g</span><span class="op" id="1683292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683296">return</span>&nbsp;<span class="op" id="1683303">-</span><span class="num" id="1683304">1</span><span class="op" id="1683305">,</span>&nbsp;<span class="builtintype" id="1683307">false</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683315">case</span>&nbsp;<span class="ident" id="1683320">fs</span>&nbsp;<span class="op" id="1683323">==</span>&nbsp;<span class="num" id="1683326">0</span>&nbsp;<span class="op" id="1683328">&amp;&amp;</span>&nbsp;<span class="ident" id="1683331">f</span>&nbsp;<span class="op" id="1683333">&gt;</span>&nbsp;<span class="ident" id="1683335">g</span><span class="op" id="1683336">,</span>&nbsp;<span class="ident" id="1683338">fs</span>&nbsp;<span class="op" id="1683341">!=</span>&nbsp;<span class="num" id="1683344">0</span>&nbsp;<span class="op" id="1683346">&amp;&amp;</span>&nbsp;<span class="ident" id="1683349">f</span>&nbsp;<span class="op" id="1683351">&lt;</span>&nbsp;<span class="ident" id="1683353">g</span><span class="op" id="1683354">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683358">return</span>&nbsp;<span class="op" id="1683365">+</span><span class="num" id="1683366">1</span><span class="op" id="1683367">,</span>&nbsp;<span class="builtintype" id="1683369">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1683380">//&nbsp;f&nbsp;==&nbsp;g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683391">return</span>&nbsp;<span class="num" id="1683398">0</span><span class="op" id="1683399">,</span>&nbsp;<span class="builtintype" id="1683401">false</span><br>
<span class="lineno"></span><span class="op" id="1683407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1683410">func</span>&nbsp;<span class="ident" id="1683415">f64toint</span><span class="op" id="1683423">(</span><span class="ident" id="1683424">f</span>&nbsp;<span class="ident" id="1683426">uint64</span><span class="op" id="1683432">)</span>&nbsp;<span class="op" id="1683434">(</span><span class="ident" id="1683435">val</span>&nbsp;<span class="ident" id="1683439">int64</span><span class="op" id="1683444">,</span>&nbsp;<span class="ident" id="1683446">ok</span>&nbsp;<span class="builtintype" id="1683449">bool</span><span class="op" id="1683453">)</span>&nbsp;<span class="op" id="1683455">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683458">fs</span><span class="op" id="1683460">,</span>&nbsp;<span class="ident" id="1683462">fm</span><span class="op" id="1683464">,</span>&nbsp;<span class="ident" id="1683466">fe</span><span class="op" id="1683468">,</span>&nbsp;<span class="ident" id="1683470">fi</span><span class="op" id="1683472">,</span>&nbsp;<span class="ident" id="1683474">fn</span>&nbsp;<span class="op" id="1683477">:=</span>&nbsp;<span class="ident" id="1683480">funpack64</span><span class="op" id="1683489">(</span><span class="ident" id="1683490">f</span><span class="op" id="1683491">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683495">switch</span>&nbsp;<span class="op" id="1683502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683505">case</span>&nbsp;<span class="ident" id="1683510">fi</span><span class="op" id="1683512">,</span>&nbsp;<span class="ident" id="1683514">fn</span><span class="op" id="1683516">:</span>&nbsp;<span class="comment" id="1683518">//&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683527">return</span>&nbsp;<span class="num" id="1683534">0</span><span class="op" id="1683535">,</span>&nbsp;<span class="builtintype" id="1683537">false</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683545">case</span>&nbsp;<span class="ident" id="1683550">fe</span>&nbsp;<span class="op" id="1683553">&lt;</span>&nbsp;<span class="op" id="1683555">-</span><span class="num" id="1683556">1</span><span class="op" id="1683557">:</span>&nbsp;<span class="comment" id="1683559">//&nbsp;f&nbsp;&lt;&nbsp;0.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683572">return</span>&nbsp;<span class="num" id="1683579">0</span><span class="op" id="1683580">,</span>&nbsp;<span class="builtintype" id="1683582">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683590">case</span>&nbsp;<span class="ident" id="1683595">fe</span>&nbsp;<span class="op" id="1683598">&gt;</span>&nbsp;<span class="num" id="1683600">63</span><span class="op" id="1683602">:</span>&nbsp;<span class="comment" id="1683604">//&nbsp;f&nbsp;&gt;=&nbsp;2^63</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683619">if</span>&nbsp;<span class="ident" id="1683622">fs</span>&nbsp;<span class="op" id="1683625">!=</span>&nbsp;<span class="num" id="1683628">0</span>&nbsp;<span class="op" id="1683630">&amp;&amp;</span>&nbsp;<span class="ident" id="1683633">fm</span>&nbsp;<span class="op" id="1683636">==</span>&nbsp;<span class="num" id="1683639">0</span>&nbsp;<span class="op" id="1683641">{</span>&nbsp;<span class="comment" id="1683643">//&nbsp;f&nbsp;==&nbsp;-2^63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683660">return</span>&nbsp;<span class="op" id="1683667">-</span><span class="num" id="1683668">1</span>&nbsp;<span class="op" id="1683670">&lt;&lt;</span>&nbsp;<span class="num" id="1683673">63</span><span class="op" id="1683675">,</span>&nbsp;<span class="builtintype" id="1683677">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683688">if</span>&nbsp;<span class="ident" id="1683691">fs</span>&nbsp;<span class="op" id="1683694">!=</span>&nbsp;<span class="num" id="1683697">0</span>&nbsp;<span class="op" id="1683699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683704">return</span>&nbsp;<span class="num" id="1683711">0</span><span class="op" id="1683712">,</span>&nbsp;<span class="builtintype" id="1683714">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683726">return</span>&nbsp;<span class="num" id="1683733">0</span><span class="op" id="1683734">,</span>&nbsp;<span class="builtintype" id="1683736">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683747">for</span>&nbsp;<span class="ident" id="1683751">fe</span>&nbsp;<span class="op" id="1683754">&gt;</span>&nbsp;<span class="builtintype" id="1683756">int</span><span class="op" id="1683759">(</span><span class="ident" id="1683760">mantbits64</span><span class="op" id="1683770">)</span>&nbsp;<span class="op" id="1683772">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683776">fe</span><span class="op" id="1683778">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683783">fm</span>&nbsp;<span class="op" id="1683786">&lt;&lt;=</span>&nbsp;<span class="num" id="1683790">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683796">for</span>&nbsp;<span class="ident" id="1683800">fe</span>&nbsp;<span class="op" id="1683803">&lt;</span>&nbsp;<span class="builtintype" id="1683805">int</span><span class="op" id="1683808">(</span><span class="ident" id="1683809">mantbits64</span><span class="op" id="1683819">)</span>&nbsp;<span class="op" id="1683821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683825">fe</span><span class="op" id="1683827">++</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683832">fm</span>&nbsp;<span class="op" id="1683835">&gt;&gt;=</span>&nbsp;<span class="num" id="1683839">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683845">val</span>&nbsp;<span class="op" id="1683849">=</span>&nbsp;<span class="ident" id="1683851">int64</span><span class="op" id="1683856">(</span><span class="ident" id="1683857">fm</span><span class="op" id="1683859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683862">if</span>&nbsp;<span class="ident" id="1683865">fs</span>&nbsp;<span class="op" id="1683868">!=</span>&nbsp;<span class="num" id="1683871">0</span>&nbsp;<span class="op" id="1683873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683877">val</span>&nbsp;<span class="op" id="1683881">=</span>&nbsp;<span class="op" id="1683883">-</span><span class="ident" id="1683884">val</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1683889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1683892">return</span>&nbsp;<span class="ident" id="1683899">val</span><span class="op" id="1683902">,</span>&nbsp;<span class="builtintype" id="1683904">true</span><br>
<span class="lineno"></span><span class="op" id="1683909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1683912">func</span>&nbsp;<span class="ident" id="1683917">fintto64</span><span class="op" id="1683925">(</span><span class="ident" id="1683926">val</span>&nbsp;<span class="ident" id="1683930">int64</span><span class="op" id="1683935">)</span>&nbsp;<span class="op" id="1683937">(</span><span class="ident" id="1683938">f</span>&nbsp;<span class="ident" id="1683940">uint64</span><span class="op" id="1683946">)</span>&nbsp;<span class="op" id="1683948">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683951">fs</span>&nbsp;<span class="op" id="1683954">:=</span>&nbsp;<span class="ident" id="1683957">uint64</span><span class="op" id="1683963">(</span><span class="ident" id="1683964">val</span><span class="op" id="1683967">)</span>&nbsp;<span class="op" id="1683969">&amp;</span>&nbsp;<span class="op" id="1683971">(</span><span class="num" id="1683972">1</span>&nbsp;<span class="op" id="1683974">&lt;&lt;</span>&nbsp;<span class="num" id="1683977">63</span><span class="op" id="1683979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1683982">mant</span>&nbsp;<span class="op" id="1683987">:=</span>&nbsp;<span class="ident" id="1683990">uint64</span><span class="op" id="1683996">(</span><span class="ident" id="1683997">val</span><span class="op" id="1684000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684003">if</span>&nbsp;<span class="ident" id="1684006">fs</span>&nbsp;<span class="op" id="1684009">!=</span>&nbsp;<span class="num" id="1684012">0</span>&nbsp;<span class="op" id="1684014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684018">mant</span>&nbsp;<span class="op" id="1684023">=</span>&nbsp;<span class="op" id="1684025">-</span><span class="ident" id="1684026">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684032">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684035">return</span>&nbsp;<span class="ident" id="1684042">fpack64</span><span class="op" id="1684049">(</span><span class="ident" id="1684050">fs</span><span class="op" id="1684052">,</span>&nbsp;<span class="ident" id="1684054">mant</span><span class="op" id="1684058">,</span>&nbsp;<span class="builtintype" id="1684060">int</span><span class="op" id="1684063">(</span><span class="ident" id="1684064">mantbits64</span><span class="op" id="1684074">)</span><span class="op" id="1684075">,</span>&nbsp;<span class="num" id="1684077">0</span><span class="op" id="1684078">)</span><br>
<span class="lineno"></span><span class="op" id="1684080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1684083">//&nbsp;64x64&nbsp;-&gt;&nbsp;128&nbsp;multiply.</span><br>
<span class="lineno"></span><span class="comment" id="1684109">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight.</span><br>
<span class="lineno">420</span><span class="keyword" id="1684143">func</span>&nbsp;<span class="ident" id="1684148">mullu</span><span class="op" id="1684153">(</span><span class="ident" id="1684154">u</span><span class="op" id="1684155">,</span>&nbsp;<span class="ident" id="1684157">v</span>&nbsp;<span class="ident" id="1684159">uint64</span><span class="op" id="1684165">)</span>&nbsp;<span class="op" id="1684167">(</span><span class="ident" id="1684168">lo</span><span class="op" id="1684170">,</span>&nbsp;<span class="ident" id="1684172">hi</span>&nbsp;<span class="ident" id="1684175">uint64</span><span class="op" id="1684181">)</span>&nbsp;<span class="op" id="1684183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684186">const</span>&nbsp;<span class="op" id="1684192">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684196">s</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684201">=</span>&nbsp;<span class="num" id="1684203">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684208">mask</span>&nbsp;<span class="op" id="1684213">=</span>&nbsp;<span class="num" id="1684215">1</span><span class="op" id="1684216">&lt;&lt;</span><span class="ident" id="1684218">s</span>&nbsp;<span class="op" id="1684220">-</span>&nbsp;<span class="num" id="1684222">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684225">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684228">u0</span>&nbsp;<span class="op" id="1684231">:=</span>&nbsp;<span class="ident" id="1684234">u</span>&nbsp;<span class="op" id="1684236">&amp;</span>&nbsp;<span class="ident" id="1684238">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684244">u1</span>&nbsp;<span class="op" id="1684247">:=</span>&nbsp;<span class="ident" id="1684250">u</span>&nbsp;<span class="op" id="1684252">&gt;&gt;</span>&nbsp;<span class="ident" id="1684255">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684258">v0</span>&nbsp;<span class="op" id="1684261">:=</span>&nbsp;<span class="ident" id="1684264">v</span>&nbsp;<span class="op" id="1684266">&amp;</span>&nbsp;<span class="ident" id="1684268">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684274">v1</span>&nbsp;<span class="op" id="1684277">:=</span>&nbsp;<span class="ident" id="1684280">v</span>&nbsp;<span class="op" id="1684282">&gt;&gt;</span>&nbsp;<span class="ident" id="1684285">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684288">w0</span>&nbsp;<span class="op" id="1684291">:=</span>&nbsp;<span class="ident" id="1684294">u0</span>&nbsp;<span class="op" id="1684297">*</span>&nbsp;<span class="ident" id="1684299">v0</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684303">t</span>&nbsp;<span class="op" id="1684305">:=</span>&nbsp;<span class="ident" id="1684308">u1</span><span class="op" id="1684310">*</span><span class="ident" id="1684311">v0</span>&nbsp;<span class="op" id="1684314">+</span>&nbsp;<span class="ident" id="1684316">w0</span><span class="op" id="1684318">&gt;&gt;</span><span class="ident" id="1684320">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684323">w1</span>&nbsp;<span class="op" id="1684326">:=</span>&nbsp;<span class="ident" id="1684329">t</span>&nbsp;<span class="op" id="1684331">&amp;</span>&nbsp;<span class="ident" id="1684333">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684339">w2</span>&nbsp;<span class="op" id="1684342">:=</span>&nbsp;<span class="ident" id="1684345">t</span>&nbsp;<span class="op" id="1684347">&gt;&gt;</span>&nbsp;<span class="ident" id="1684350">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684353">w1</span>&nbsp;<span class="op" id="1684356">+=</span>&nbsp;<span class="ident" id="1684359">u0</span>&nbsp;<span class="op" id="1684362">*</span>&nbsp;<span class="ident" id="1684364">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684368">return</span>&nbsp;<span class="ident" id="1684375">u</span>&nbsp;<span class="op" id="1684377">*</span>&nbsp;<span class="ident" id="1684379">v</span><span class="op" id="1684380">,</span>&nbsp;<span class="ident" id="1684382">u1</span><span class="op" id="1684384">*</span><span class="ident" id="1684385">v1</span>&nbsp;<span class="op" id="1684388">+</span>&nbsp;<span class="ident" id="1684390">w2</span>&nbsp;<span class="op" id="1684393">+</span>&nbsp;<span class="ident" id="1684395">w1</span><span class="op" id="1684397">&gt;&gt;</span><span class="ident" id="1684399">s</span><br>
<span class="lineno">435</span><span class="op" id="1684401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1684404">//&nbsp;128/64&nbsp;-&gt;&nbsp;64&nbsp;quotient,&nbsp;64&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1684444">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight</span><br>
<span class="lineno"></span><span class="keyword" id="1684477">func</span>&nbsp;<span class="ident" id="1684482">divlu</span><span class="op" id="1684487">(</span><span class="ident" id="1684488">u1</span><span class="op" id="1684490">,</span>&nbsp;<span class="ident" id="1684492">u0</span><span class="op" id="1684494">,</span>&nbsp;<span class="ident" id="1684496">v</span>&nbsp;<span class="ident" id="1684498">uint64</span><span class="op" id="1684504">)</span>&nbsp;<span class="op" id="1684506">(</span><span class="ident" id="1684507">q</span><span class="op" id="1684508">,</span>&nbsp;<span class="ident" id="1684510">r</span>&nbsp;<span class="ident" id="1684512">uint64</span><span class="op" id="1684518">)</span>&nbsp;<span class="op" id="1684520">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684523">const</span>&nbsp;<span class="ident" id="1684529">b</span>&nbsp;<span class="op" id="1684531">=</span>&nbsp;<span class="num" id="1684533">1</span>&nbsp;<span class="op" id="1684535">&lt;&lt;</span>&nbsp;<span class="num" id="1684538">32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684543">if</span>&nbsp;<span class="ident" id="1684546">u1</span>&nbsp;<span class="op" id="1684549">&gt;=</span>&nbsp;<span class="ident" id="1684552">v</span>&nbsp;<span class="op" id="1684554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684558">return</span>&nbsp;<span class="num" id="1684565">1</span><span class="op" id="1684566">&lt;&lt;</span><span class="num" id="1684568">64</span>&nbsp;<span class="op" id="1684571">-</span>&nbsp;<span class="num" id="1684573">1</span><span class="op" id="1684574">,</span>&nbsp;<span class="num" id="1684576">1</span><span class="op" id="1684577">&lt;&lt;</span><span class="num" id="1684579">64</span>&nbsp;<span class="op" id="1684582">-</span>&nbsp;<span class="num" id="1684584">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684587">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1684591">//&nbsp;s&nbsp;=&nbsp;nlz(v);&nbsp;v&nbsp;&lt;&lt;=&nbsp;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684615">s</span>&nbsp;<span class="op" id="1684617">:=</span>&nbsp;<span class="builtintype" id="1684620">uint</span><span class="op" id="1684624">(</span><span class="num" id="1684625">0</span><span class="op" id="1684626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684629">for</span>&nbsp;<span class="ident" id="1684633">v</span><span class="op" id="1684634">&amp;</span><span class="op" id="1684635">(</span><span class="num" id="1684636">1</span><span class="op" id="1684637">&lt;&lt;</span><span class="num" id="1684639">63</span><span class="op" id="1684641">)</span>&nbsp;<span class="op" id="1684643">==</span>&nbsp;<span class="num" id="1684646">0</span>&nbsp;<span class="op" id="1684648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684652">s</span><span class="op" id="1684653">++</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684658">v</span>&nbsp;<span class="op" id="1684660">&lt;&lt;=</span>&nbsp;<span class="num" id="1684664">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684671">vn1</span>&nbsp;<span class="op" id="1684675">:=</span>&nbsp;<span class="ident" id="1684678">v</span>&nbsp;<span class="op" id="1684680">&gt;&gt;</span>&nbsp;<span class="num" id="1684683">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684687">vn0</span>&nbsp;<span class="op" id="1684691">:=</span>&nbsp;<span class="ident" id="1684694">v</span>&nbsp;<span class="op" id="1684696">&amp;</span>&nbsp;<span class="op" id="1684698">(</span><span class="num" id="1684699">1</span><span class="op" id="1684700">&lt;&lt;</span><span class="num" id="1684702">32</span>&nbsp;<span class="op" id="1684705">-</span>&nbsp;<span class="num" id="1684707">1</span><span class="op" id="1684708">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684711">un32</span>&nbsp;<span class="op" id="1684716">:=</span>&nbsp;<span class="ident" id="1684719">u1</span><span class="op" id="1684721">&lt;&lt;</span><span class="ident" id="1684723">s</span>&nbsp;<span class="op" id="1684725">|</span>&nbsp;<span class="ident" id="1684727">u0</span><span class="op" id="1684729">&gt;&gt;</span><span class="op" id="1684731">(</span><span class="num" id="1684732">64</span><span class="op" id="1684734">-</span><span class="ident" id="1684735">s</span><span class="op" id="1684736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684739">un10</span>&nbsp;<span class="op" id="1684744">:=</span>&nbsp;<span class="ident" id="1684747">u0</span>&nbsp;<span class="op" id="1684750">&lt;&lt;</span>&nbsp;<span class="ident" id="1684753">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684756">un1</span>&nbsp;<span class="op" id="1684760">:=</span>&nbsp;<span class="ident" id="1684763">un10</span>&nbsp;<span class="op" id="1684768">&gt;&gt;</span>&nbsp;<span class="num" id="1684771">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684775">un0</span>&nbsp;<span class="op" id="1684779">:=</span>&nbsp;<span class="ident" id="1684782">un10</span>&nbsp;<span class="op" id="1684787">&amp;</span>&nbsp;<span class="op" id="1684789">(</span><span class="num" id="1684790">1</span><span class="op" id="1684791">&lt;&lt;</span><span class="num" id="1684793">32</span>&nbsp;<span class="op" id="1684796">-</span>&nbsp;<span class="num" id="1684798">1</span><span class="op" id="1684799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684802">q1</span>&nbsp;<span class="op" id="1684805">:=</span>&nbsp;<span class="ident" id="1684808">un32</span>&nbsp;<span class="op" id="1684813">/</span>&nbsp;<span class="ident" id="1684815">vn1</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684820">rhat</span>&nbsp;<span class="op" id="1684825">:=</span>&nbsp;<span class="ident" id="1684828">un32</span>&nbsp;<span class="op" id="1684833">-</span>&nbsp;<span class="ident" id="1684835">q1</span><span class="op" id="1684837">*</span><span class="ident" id="1684838">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1684843">again1</span><span class="op" id="1684849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684852">if</span>&nbsp;<span class="ident" id="1684855">q1</span>&nbsp;<span class="op" id="1684858">&gt;=</span>&nbsp;<span class="ident" id="1684861">b</span>&nbsp;<span class="op" id="1684863">||</span>&nbsp;<span class="ident" id="1684866">q1</span><span class="op" id="1684868">*</span><span class="ident" id="1684869">vn0</span>&nbsp;<span class="op" id="1684873">&gt;</span>&nbsp;<span class="ident" id="1684875">b</span><span class="op" id="1684876">*</span><span class="ident" id="1684877">rhat</span><span class="op" id="1684881">+</span><span class="ident" id="1684882">un1</span>&nbsp;<span class="op" id="1684886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684890">q1</span><span class="op" id="1684892">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684897">rhat</span>&nbsp;<span class="op" id="1684902">+=</span>&nbsp;<span class="ident" id="1684905">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684911">if</span>&nbsp;<span class="ident" id="1684914">rhat</span>&nbsp;<span class="op" id="1684919">&lt;</span>&nbsp;<span class="ident" id="1684921">b</span>&nbsp;<span class="op" id="1684923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1684928">goto</span>&nbsp;<span class="ident" id="1684933">again1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1684945">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684949">un21</span>&nbsp;<span class="op" id="1684954">:=</span>&nbsp;<span class="ident" id="1684957">un32</span><span class="op" id="1684961">*</span><span class="ident" id="1684962">b</span>&nbsp;<span class="op" id="1684964">+</span>&nbsp;<span class="ident" id="1684966">un1</span>&nbsp;<span class="op" id="1684970">-</span>&nbsp;<span class="ident" id="1684972">q1</span><span class="op" id="1684974">*</span><span class="ident" id="1684975">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684978">q0</span>&nbsp;<span class="op" id="1684981">:=</span>&nbsp;<span class="ident" id="1684984">un21</span>&nbsp;<span class="op" id="1684989">/</span>&nbsp;<span class="ident" id="1684991">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1684996">rhat</span>&nbsp;<span class="op" id="1685001">=</span>&nbsp;<span class="ident" id="1685003">un21</span>&nbsp;<span class="op" id="1685008">-</span>&nbsp;<span class="ident" id="1685010">q0</span><span class="op" id="1685012">*</span><span class="ident" id="1685013">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="ident" id="1685018">again2</span><span class="op" id="1685024">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685027">if</span>&nbsp;<span class="ident" id="1685030">q0</span>&nbsp;<span class="op" id="1685033">&gt;=</span>&nbsp;<span class="ident" id="1685036">b</span>&nbsp;<span class="op" id="1685038">||</span>&nbsp;<span class="ident" id="1685041">q0</span><span class="op" id="1685043">*</span><span class="ident" id="1685044">vn0</span>&nbsp;<span class="op" id="1685048">&gt;</span>&nbsp;<span class="ident" id="1685050">b</span><span class="op" id="1685051">*</span><span class="ident" id="1685052">rhat</span><span class="op" id="1685056">+</span><span class="ident" id="1685057">un0</span>&nbsp;<span class="op" id="1685061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685065">q0</span><span class="op" id="1685067">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1685072">rhat</span>&nbsp;<span class="op" id="1685077">+=</span>&nbsp;<span class="ident" id="1685080">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685086">if</span>&nbsp;<span class="ident" id="1685089">rhat</span>&nbsp;<span class="op" id="1685094">&lt;</span>&nbsp;<span class="ident" id="1685096">b</span>&nbsp;<span class="op" id="1685098">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685103">goto</span>&nbsp;<span class="ident" id="1685108">again2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1685124">return</span>&nbsp;<span class="ident" id="1685131">q1</span><span class="op" id="1685133">*</span><span class="ident" id="1685134">b</span>&nbsp;<span class="op" id="1685136">+</span>&nbsp;<span class="ident" id="1685138">q0</span><span class="op" id="1685140">,</span>&nbsp;<span class="op" id="1685142">(</span><span class="ident" id="1685143">un21</span><span class="op" id="1685147">*</span><span class="ident" id="1685148">b</span>&nbsp;<span class="op" id="1685150">+</span>&nbsp;<span class="ident" id="1685152">un0</span>&nbsp;<span class="op" id="1685156">-</span>&nbsp;<span class="ident" id="1685158">q0</span><span class="op" id="1685160">*</span><span class="ident" id="1685161">v</span><span class="op" id="1685162">)</span>&nbsp;<span class="op" id="1685164">&gt;&gt;</span>&nbsp;<span class="ident" id="1685167">s</span><br>
<span class="lineno">485</span><span class="op" id="1685169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1685172">//&nbsp;callable&nbsp;from&nbsp;C</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1685192">func</span>&nbsp;<span class="ident" id="1685197">fadd64c</span><span class="op" id="1685204">(</span><span class="ident" id="1685205">f</span><span class="op" id="1685206">,</span>&nbsp;<span class="ident" id="1685208">g</span>&nbsp;<span class="ident" id="1685210">uint64</span><span class="op" id="1685216">,</span>&nbsp;<span class="ident" id="1685218">ret</span>&nbsp;<span class="op" id="1685222">*</span><span class="ident" id="1685223">uint64</span><span class="op" id="1685229">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685242">{</span>&nbsp;<span class="op" id="1685244">*</span><span class="ident" id="1685245">ret</span>&nbsp;<span class="op" id="1685249">=</span>&nbsp;<span class="ident" id="1685251">fadd64</span><span class="op" id="1685257">(</span><span class="ident" id="1685258">f</span><span class="op" id="1685259">,</span>&nbsp;<span class="ident" id="1685261">g</span><span class="op" id="1685262">)</span>&nbsp;<span class="op" id="1685264">}</span><br>
<span class="lineno">490</span><span class="keyword" id="1685266">func</span>&nbsp;<span class="ident" id="1685271">fsub64c</span><span class="op" id="1685278">(</span><span class="ident" id="1685279">f</span><span class="op" id="1685280">,</span>&nbsp;<span class="ident" id="1685282">g</span>&nbsp;<span class="ident" id="1685284">uint64</span><span class="op" id="1685290">,</span>&nbsp;<span class="ident" id="1685292">ret</span>&nbsp;<span class="op" id="1685296">*</span><span class="ident" id="1685297">uint64</span><span class="op" id="1685303">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685316">{</span>&nbsp;<span class="op" id="1685318">*</span><span class="ident" id="1685319">ret</span>&nbsp;<span class="op" id="1685323">=</span>&nbsp;<span class="ident" id="1685325">fsub64</span><span class="op" id="1685331">(</span><span class="ident" id="1685332">f</span><span class="op" id="1685333">,</span>&nbsp;<span class="ident" id="1685335">g</span><span class="op" id="1685336">)</span>&nbsp;<span class="op" id="1685338">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685340">func</span>&nbsp;<span class="ident" id="1685345">fmul64c</span><span class="op" id="1685352">(</span><span class="ident" id="1685353">f</span><span class="op" id="1685354">,</span>&nbsp;<span class="ident" id="1685356">g</span>&nbsp;<span class="ident" id="1685358">uint64</span><span class="op" id="1685364">,</span>&nbsp;<span class="ident" id="1685366">ret</span>&nbsp;<span class="op" id="1685370">*</span><span class="ident" id="1685371">uint64</span><span class="op" id="1685377">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685390">{</span>&nbsp;<span class="op" id="1685392">*</span><span class="ident" id="1685393">ret</span>&nbsp;<span class="op" id="1685397">=</span>&nbsp;<span class="ident" id="1685399">fmul64</span><span class="op" id="1685405">(</span><span class="ident" id="1685406">f</span><span class="op" id="1685407">,</span>&nbsp;<span class="ident" id="1685409">g</span><span class="op" id="1685410">)</span>&nbsp;<span class="op" id="1685412">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685414">func</span>&nbsp;<span class="ident" id="1685419">fdiv64c</span><span class="op" id="1685426">(</span><span class="ident" id="1685427">f</span><span class="op" id="1685428">,</span>&nbsp;<span class="ident" id="1685430">g</span>&nbsp;<span class="ident" id="1685432">uint64</span><span class="op" id="1685438">,</span>&nbsp;<span class="ident" id="1685440">ret</span>&nbsp;<span class="op" id="1685444">*</span><span class="ident" id="1685445">uint64</span><span class="op" id="1685451">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685464">{</span>&nbsp;<span class="op" id="1685466">*</span><span class="ident" id="1685467">ret</span>&nbsp;<span class="op" id="1685471">=</span>&nbsp;<span class="ident" id="1685473">fdiv64</span><span class="op" id="1685479">(</span><span class="ident" id="1685480">f</span><span class="op" id="1685481">,</span>&nbsp;<span class="ident" id="1685483">g</span><span class="op" id="1685484">)</span>&nbsp;<span class="op" id="1685486">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685488">func</span>&nbsp;<span class="ident" id="1685493">fneg64c</span><span class="op" id="1685500">(</span><span class="ident" id="1685501">f</span>&nbsp;<span class="ident" id="1685503">uint64</span><span class="op" id="1685509">,</span>&nbsp;<span class="ident" id="1685511">ret</span>&nbsp;<span class="op" id="1685515">*</span><span class="ident" id="1685516">uint64</span><span class="op" id="1685522">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685538">{</span>&nbsp;<span class="op" id="1685540">*</span><span class="ident" id="1685541">ret</span>&nbsp;<span class="op" id="1685545">=</span>&nbsp;<span class="ident" id="1685547">fneg64</span><span class="op" id="1685553">(</span><span class="ident" id="1685554">f</span><span class="op" id="1685555">)</span>&nbsp;<span class="op" id="1685557">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685559">func</span>&nbsp;<span class="ident" id="1685564">f32to64c</span><span class="op" id="1685572">(</span><span class="ident" id="1685573">f</span>&nbsp;<span class="builtintype" id="1685575">uint32</span><span class="op" id="1685581">,</span>&nbsp;<span class="ident" id="1685583">ret</span>&nbsp;<span class="op" id="1685587">*</span><span class="ident" id="1685588">uint64</span><span class="op" id="1685594">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685609">{</span>&nbsp;<span class="op" id="1685611">*</span><span class="ident" id="1685612">ret</span>&nbsp;<span class="op" id="1685616">=</span>&nbsp;<span class="ident" id="1685618">f32to64</span><span class="op" id="1685625">(</span><span class="ident" id="1685626">f</span><span class="op" id="1685627">)</span>&nbsp;<span class="op" id="1685629">}</span><br>
<span class="lineno">495</span><span class="keyword" id="1685631">func</span>&nbsp;<span class="ident" id="1685636">f64to32c</span><span class="op" id="1685644">(</span><span class="ident" id="1685645">f</span>&nbsp;<span class="ident" id="1685647">uint64</span><span class="op" id="1685653">,</span>&nbsp;<span class="ident" id="1685655">ret</span>&nbsp;<span class="op" id="1685659">*</span><span class="builtintype" id="1685660">uint32</span><span class="op" id="1685666">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685681">{</span>&nbsp;<span class="op" id="1685683">*</span><span class="ident" id="1685684">ret</span>&nbsp;<span class="op" id="1685688">=</span>&nbsp;<span class="ident" id="1685690">f64to32</span><span class="op" id="1685697">(</span><span class="ident" id="1685698">f</span><span class="op" id="1685699">)</span>&nbsp;<span class="op" id="1685701">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685703">func</span>&nbsp;<span class="ident" id="1685708">fcmp64c</span><span class="op" id="1685715">(</span><span class="ident" id="1685716">f</span><span class="op" id="1685717">,</span>&nbsp;<span class="ident" id="1685719">g</span>&nbsp;<span class="ident" id="1685721">uint64</span><span class="op" id="1685727">,</span>&nbsp;<span class="ident" id="1685729">ret</span>&nbsp;<span class="op" id="1685733">*</span><span class="builtintype" id="1685734">int</span><span class="op" id="1685737">,</span>&nbsp;<span class="ident" id="1685739">retnan</span>&nbsp;<span class="op" id="1685746">*</span><span class="builtintype" id="1685747">bool</span><span class="op" id="1685751">)</span>&nbsp;<span class="op" id="1685753">{</span>&nbsp;<span class="op" id="1685755">*</span><span class="ident" id="1685756">ret</span><span class="op" id="1685759">,</span>&nbsp;<span class="op" id="1685761">*</span><span class="ident" id="1685762">retnan</span>&nbsp;<span class="op" id="1685769">=</span>&nbsp;<span class="ident" id="1685771">fcmp64</span><span class="op" id="1685777">(</span><span class="ident" id="1685778">f</span><span class="op" id="1685779">,</span>&nbsp;<span class="ident" id="1685781">g</span><span class="op" id="1685782">)</span>&nbsp;<span class="op" id="1685784">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685786">func</span>&nbsp;<span class="ident" id="1685791">fintto64c</span><span class="op" id="1685800">(</span><span class="ident" id="1685801">val</span>&nbsp;<span class="ident" id="1685805">int64</span><span class="op" id="1685810">,</span>&nbsp;<span class="ident" id="1685812">ret</span>&nbsp;<span class="op" id="1685816">*</span><span class="ident" id="1685817">uint64</span><span class="op" id="1685823">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1685836">{</span>&nbsp;<span class="op" id="1685838">*</span><span class="ident" id="1685839">ret</span>&nbsp;<span class="op" id="1685843">=</span>&nbsp;<span class="ident" id="1685845">fintto64</span><span class="op" id="1685853">(</span><span class="ident" id="1685854">val</span><span class="op" id="1685857">)</span>&nbsp;<span class="op" id="1685859">}</span><br>
<span class="lineno"></span><span class="keyword" id="1685861">func</span>&nbsp;<span class="ident" id="1685866">f64tointc</span><span class="op" id="1685875">(</span><span class="ident" id="1685876">f</span>&nbsp;<span class="ident" id="1685878">uint64</span><span class="op" id="1685884">,</span>&nbsp;<span class="ident" id="1685886">ret</span>&nbsp;<span class="op" id="1685890">*</span><span class="ident" id="1685891">int64</span><span class="op" id="1685896">,</span>&nbsp;<span class="ident" id="1685898">retok</span>&nbsp;<span class="op" id="1685904">*</span><span class="builtintype" id="1685905">bool</span><span class="op" id="1685909">)</span>&nbsp;<span class="op" id="1685911">{</span>&nbsp;<span class="op" id="1685913">*</span><span class="ident" id="1685914">ret</span><span class="op" id="1685917">,</span>&nbsp;<span class="op" id="1685919">*</span><span class="ident" id="1685920">retok</span>&nbsp;<span class="op" id="1685926">=</span>&nbsp;<span class="ident" id="1685928">f64toint</span><span class="op" id="1685936">(</span><span class="ident" id="1685937">f</span><span class="op" id="1685938">)</span>&nbsp;<span class="op" id="1685940">}</span>
</div>
</body>
</html>
