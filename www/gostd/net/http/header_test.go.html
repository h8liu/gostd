<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8499192">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8499248">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8499302">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8499353">package</span>&nbsp;<span class="ident" id="8499361">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8499367">import</span>&nbsp;<span class="op" id="8499374">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499377">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499386">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499397">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499408">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8499415">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8499418">var</span>&nbsp;<span class="ident" id="8499422">headerWriteTests</span>&nbsp;<span class="op" id="8499439">=</span>&nbsp;<span class="op" id="8499441">[</span><span class="op" id="8499442">]</span><span class="keyword" id="8499443">struct</span>&nbsp;<span class="op" id="8499450">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499453">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8499462">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499470">exclude</span>&nbsp;&nbsp;<span class="keyword" id="8499479">map</span><span class="op" id="8499482">[</span><span class="builtintype" id="8499483">string</span><span class="op" id="8499489">]</span><span class="builtintype" id="8499490">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499496">expected</span>&nbsp;<span class="builtintype" id="8499505">string</span><br>
<span class="lineno"></span><span class="op" id="8499512">}</span><span class="op" id="8499513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499516">{</span><span class="ident" id="8499517">Header</span><span class="op" id="8499523">{</span><span class="op" id="8499524">}</span><span class="op" id="8499525">,</span>&nbsp;<span class="ident" id="8499527">nil</span><span class="op" id="8499530">,</span>&nbsp;<span class="string" id="8499532">&#34;&#34;</span><span class="op" id="8499534">}</span><span class="op" id="8499535">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499542">Header</span><span class="op" id="8499548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499553">&#34;Content-Type&#34;</span><span class="op" id="8499567">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8499571">{</span><span class="string" id="8499572">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="8499598">}</span><span class="op" id="8499599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499604">&#34;Content-Length&#34;</span><span class="op" id="8499620">:</span>&nbsp;<span class="op" id="8499622">{</span><span class="string" id="8499623">&#34;0&#34;</span><span class="op" id="8499626">}</span><span class="op" id="8499627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499631">}</span><span class="op" id="8499632">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499636">nil</span><span class="op" id="8499639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499643">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="8499708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499711">}</span><span class="op" id="8499712">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499719">Header</span><span class="op" id="8499725">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499730">&#34;Content-Length&#34;</span><span class="op" id="8499746">:</span>&nbsp;<span class="op" id="8499748">{</span><span class="string" id="8499749">&#34;0&#34;</span><span class="op" id="8499752">,</span>&nbsp;<span class="string" id="8499754">&#34;1&#34;</span><span class="op" id="8499757">,</span>&nbsp;<span class="string" id="8499759">&#34;2&#34;</span><span class="op" id="8499762">}</span><span class="op" id="8499763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499767">}</span><span class="op" id="8499768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499772">nil</span><span class="op" id="8499775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499779">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="8499844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499847">}</span><span class="op" id="8499848">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8499855">Header</span><span class="op" id="8499861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499866">&#34;Expires&#34;</span><span class="op" id="8499875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8499886">{</span><span class="string" id="8499887">&#34;-1&#34;</span><span class="op" id="8499891">}</span><span class="op" id="8499892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499897">&#34;Content-Length&#34;</span><span class="op" id="8499913">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8499917">{</span><span class="string" id="8499918">&#34;0&#34;</span><span class="op" id="8499921">}</span><span class="op" id="8499922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8499927">&#34;Content-Encoding&#34;</span><span class="op" id="8499945">:</span>&nbsp;<span class="op" id="8499947">{</span><span class="string" id="8499948">&#34;gzip&#34;</span><span class="op" id="8499954">}</span><span class="op" id="8499955">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8499959">}</span><span class="op" id="8499960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8499964">map</span><span class="op" id="8499967">[</span><span class="builtintype" id="8499968">string</span><span class="op" id="8499974">]</span><span class="builtintype" id="8499975">bool</span><span class="op" id="8499979">{</span><span class="string" id="8499980">&#34;Content-Length&#34;</span><span class="op" id="8499996">:</span>&nbsp;<span class="builtintype" id="8499998">true</span><span class="op" id="8500002">}</span><span class="op" id="8500003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500007">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8500050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500053">}</span><span class="op" id="8500054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500057">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500061">Header</span><span class="op" id="8500067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500072">&#34;Expires&#34;</span><span class="op" id="8500081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8500092">{</span><span class="string" id="8500093">&#34;-1&#34;</span><span class="op" id="8500097">}</span><span class="op" id="8500098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500103">&#34;Content-Length&#34;</span><span class="op" id="8500119">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8500123">{</span><span class="string" id="8500124">&#34;0&#34;</span><span class="op" id="8500127">,</span>&nbsp;<span class="string" id="8500129">&#34;1&#34;</span><span class="op" id="8500132">,</span>&nbsp;<span class="string" id="8500134">&#34;2&#34;</span><span class="op" id="8500137">}</span><span class="op" id="8500138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500143">&#34;Content-Encoding&#34;</span><span class="op" id="8500161">:</span>&nbsp;<span class="op" id="8500163">{</span><span class="string" id="8500164">&#34;gzip&#34;</span><span class="op" id="8500170">}</span><span class="op" id="8500171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500175">}</span><span class="op" id="8500176">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500180">map</span><span class="op" id="8500183">[</span><span class="builtintype" id="8500184">string</span><span class="op" id="8500190">]</span><span class="builtintype" id="8500191">bool</span><span class="op" id="8500195">{</span><span class="string" id="8500196">&#34;Content-Length&#34;</span><span class="op" id="8500212">:</span>&nbsp;<span class="builtintype" id="8500214">true</span><span class="op" id="8500218">}</span><span class="op" id="8500219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500223">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="8500266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500269">}</span><span class="op" id="8500270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500277">Header</span><span class="op" id="8500283">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500288">&#34;Expires&#34;</span><span class="op" id="8500297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8500308">{</span><span class="string" id="8500309">&#34;-1&#34;</span><span class="op" id="8500313">}</span><span class="op" id="8500314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500319">&#34;Content-Length&#34;</span><span class="op" id="8500335">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8500339">{</span><span class="string" id="8500340">&#34;0&#34;</span><span class="op" id="8500343">}</span><span class="op" id="8500344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500349">&#34;Content-Encoding&#34;</span><span class="op" id="8500367">:</span>&nbsp;<span class="op" id="8500369">{</span><span class="string" id="8500370">&#34;gzip&#34;</span><span class="op" id="8500376">}</span><span class="op" id="8500377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500381">}</span><span class="op" id="8500382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500386">map</span><span class="op" id="8500389">[</span><span class="builtintype" id="8500390">string</span><span class="op" id="8500396">]</span><span class="builtintype" id="8500397">bool</span><span class="op" id="8500401">{</span><span class="string" id="8500402">&#34;Content-Length&#34;</span><span class="op" id="8500418">:</span>&nbsp;<span class="builtintype" id="8500420">true</span><span class="op" id="8500424">,</span>&nbsp;<span class="string" id="8500426">&#34;Expires&#34;</span><span class="op" id="8500435">:</span>&nbsp;<span class="builtintype" id="8500437">true</span><span class="op" id="8500441">,</span>&nbsp;<span class="string" id="8500443">&#34;Content-Encoding&#34;</span><span class="op" id="8500461">:</span>&nbsp;<span class="builtintype" id="8500463">true</span><span class="op" id="8500467">}</span><span class="op" id="8500468">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500472">&#34;&#34;</span><span class="op" id="8500474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500477">}</span><span class="op" id="8500478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500485">Header</span><span class="op" id="8500491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500496">&#34;Nil&#34;</span><span class="op" id="8500501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8500512">nil</span><span class="op" id="8500515">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500520">&#34;Empty&#34;</span><span class="op" id="8500527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8500536">{</span><span class="op" id="8500537">}</span><span class="op" id="8500538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500543">&#34;Blank&#34;</span><span class="op" id="8500550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8500559">{</span><span class="string" id="8500560">&#34;&#34;</span><span class="op" id="8500562">}</span><span class="op" id="8500563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500568">&#34;Double-Blank&#34;</span><span class="op" id="8500582">:</span>&nbsp;<span class="op" id="8500584">{</span><span class="string" id="8500585">&#34;&#34;</span><span class="op" id="8500587">,</span>&nbsp;<span class="string" id="8500589">&#34;&#34;</span><span class="op" id="8500591">}</span><span class="op" id="8500592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500596">}</span><span class="op" id="8500597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500601">nil</span><span class="op" id="8500604">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500608">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="8500657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500660">}</span><span class="op" id="8500661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8500664">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8500738">Header</span><span class="op" id="8500744">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500749">&#34;k1&#34;</span><span class="op" id="8500753">:</span>&nbsp;<span class="op" id="8500755">{</span><span class="string" id="8500756">&#34;1a&#34;</span><span class="op" id="8500760">,</span>&nbsp;<span class="string" id="8500762">&#34;1b&#34;</span><span class="op" id="8500766">}</span><span class="op" id="8500767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500772">&#34;k2&#34;</span><span class="op" id="8500776">:</span>&nbsp;<span class="op" id="8500778">{</span><span class="string" id="8500779">&#34;2a&#34;</span><span class="op" id="8500783">,</span>&nbsp;<span class="string" id="8500785">&#34;2b&#34;</span><span class="op" id="8500789">}</span><span class="op" id="8500790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500795">&#34;k3&#34;</span><span class="op" id="8500799">:</span>&nbsp;<span class="op" id="8500801">{</span><span class="string" id="8500802">&#34;3a&#34;</span><span class="op" id="8500806">,</span>&nbsp;<span class="string" id="8500808">&#34;3b&#34;</span><span class="op" id="8500812">}</span><span class="op" id="8500813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500818">&#34;k4&#34;</span><span class="op" id="8500822">:</span>&nbsp;<span class="op" id="8500824">{</span><span class="string" id="8500825">&#34;4a&#34;</span><span class="op" id="8500829">,</span>&nbsp;<span class="string" id="8500831">&#34;4b&#34;</span><span class="op" id="8500835">}</span><span class="op" id="8500836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500841">&#34;k5&#34;</span><span class="op" id="8500845">:</span>&nbsp;<span class="op" id="8500847">{</span><span class="string" id="8500848">&#34;5a&#34;</span><span class="op" id="8500852">,</span>&nbsp;<span class="string" id="8500854">&#34;5b&#34;</span><span class="op" id="8500858">}</span><span class="op" id="8500859">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500864">&#34;k6&#34;</span><span class="op" id="8500868">:</span>&nbsp;<span class="op" id="8500870">{</span><span class="string" id="8500871">&#34;6a&#34;</span><span class="op" id="8500875">,</span>&nbsp;<span class="string" id="8500877">&#34;6b&#34;</span><span class="op" id="8500881">}</span><span class="op" id="8500882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500887">&#34;k7&#34;</span><span class="op" id="8500891">:</span>&nbsp;<span class="op" id="8500893">{</span><span class="string" id="8500894">&#34;7a&#34;</span><span class="op" id="8500898">,</span>&nbsp;<span class="string" id="8500900">&#34;7b&#34;</span><span class="op" id="8500904">}</span><span class="op" id="8500905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500910">&#34;k8&#34;</span><span class="op" id="8500914">:</span>&nbsp;<span class="op" id="8500916">{</span><span class="string" id="8500917">&#34;8a&#34;</span><span class="op" id="8500921">,</span>&nbsp;<span class="string" id="8500923">&#34;8b&#34;</span><span class="op" id="8500927">}</span><span class="op" id="8500928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500933">&#34;k9&#34;</span><span class="op" id="8500937">:</span>&nbsp;<span class="op" id="8500939">{</span><span class="string" id="8500940">&#34;9a&#34;</span><span class="op" id="8500944">,</span>&nbsp;<span class="string" id="8500946">&#34;9b&#34;</span><span class="op" id="8500950">}</span><span class="op" id="8500951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8500955">}</span><span class="op" id="8500956">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8500960">map</span><span class="op" id="8500963">[</span><span class="builtintype" id="8500964">string</span><span class="op" id="8500970">]</span><span class="builtintype" id="8500971">bool</span><span class="op" id="8500975">{</span><span class="string" id="8500976">&#34;k5&#34;</span><span class="op" id="8500980">:</span>&nbsp;<span class="builtintype" id="8500982">true</span><span class="op" id="8500986">}</span><span class="op" id="8500987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8500991">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="8501054">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8501059">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="8501102">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8501107">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="8501169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501172">}</span><span class="op" id="8501173">,</span><br>
<span class="lineno">90</span><span class="op" id="8501175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501178">func</span>&nbsp;<span class="ident" id="8501183">TestHeaderWrite</span><span class="op" id="8501198">(</span><span class="ident" id="8501199">t</span>&nbsp;<span class="op" id="8501201">*</span><span class="ident" id="8501202">testing</span><span class="op" id="8501209">.</span><span class="ident" id="8501210">T</span><span class="op" id="8501211">)</span>&nbsp;<span class="op" id="8501213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501216">var</span>&nbsp;<span class="ident" id="8501220">buf</span>&nbsp;<span class="ident" id="8501224">bytes</span><span class="op" id="8501229">.</span><span class="ident" id="8501230">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501238">for</span>&nbsp;<span class="ident" id="8501242">i</span><span class="op" id="8501243">,</span>&nbsp;<span class="ident" id="8501245">test</span>&nbsp;<span class="op" id="8501250">:=</span>&nbsp;<span class="keyword" id="8501253">range</span>&nbsp;<span class="ident" id="8501259">headerWriteTests</span>&nbsp;<span class="op" id="8501276">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501280">test</span><span class="op" id="8501284">.</span><span class="ident" id="8501285">h</span><span class="op" id="8501286">.</span><span class="ident" id="8501287">WriteSubset</span><span class="op" id="8501298">(</span><span class="op" id="8501299">&amp;</span><span class="ident" id="8501300">buf</span><span class="op" id="8501303">,</span>&nbsp;<span class="ident" id="8501305">test</span><span class="op" id="8501309">.</span><span class="ident" id="8501310">exclude</span><span class="op" id="8501317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501321">if</span>&nbsp;<span class="ident" id="8501324">buf</span><span class="op" id="8501327">.</span><span class="ident" id="8501328">String</span><span class="op" id="8501334">(</span><span class="op" id="8501335">)</span>&nbsp;<span class="op" id="8501337">!=</span>&nbsp;<span class="ident" id="8501340">test</span><span class="op" id="8501344">.</span><span class="ident" id="8501345">expected</span>&nbsp;<span class="op" id="8501354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501359">t</span><span class="op" id="8501360">.</span><span class="ident" id="8501361">Errorf</span><span class="op" id="8501367">(</span><span class="string" id="8501368">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="8501394">,</span>&nbsp;<span class="ident" id="8501396">i</span><span class="op" id="8501397">,</span>&nbsp;<span class="ident" id="8501399">buf</span><span class="op" id="8501402">.</span><span class="ident" id="8501403">String</span><span class="op" id="8501409">(</span><span class="op" id="8501410">)</span><span class="op" id="8501411">,</span>&nbsp;<span class="ident" id="8501413">test</span><span class="op" id="8501417">.</span><span class="ident" id="8501418">expected</span><span class="op" id="8501426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501434">buf</span><span class="op" id="8501437">.</span><span class="ident" id="8501438">Reset</span><span class="op" id="8501443">(</span><span class="op" id="8501444">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501447">}</span><br>
<span class="lineno"></span><span class="op" id="8501449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501452">var</span>&nbsp;<span class="ident" id="8501456">parseTimeTests</span>&nbsp;<span class="op" id="8501471">=</span>&nbsp;<span class="op" id="8501473">[</span><span class="op" id="8501474">]</span><span class="keyword" id="8501475">struct</span>&nbsp;<span class="op" id="8501482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501485">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8501489">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501497">err</span>&nbsp;<span class="builtintype" id="8501501">bool</span><br>
<span class="lineno"></span><span class="op" id="8501506">}</span><span class="op" id="8501507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501510">{</span><span class="ident" id="8501511">Header</span><span class="op" id="8501517">{</span><span class="string" id="8501518">&#34;Date&#34;</span><span class="op" id="8501524">:</span>&nbsp;<span class="op" id="8501526">{</span><span class="string" id="8501527">&#34;&#34;</span><span class="op" id="8501529">}</span><span class="op" id="8501530">}</span><span class="op" id="8501531">,</span>&nbsp;<span class="builtintype" id="8501533">true</span><span class="op" id="8501537">}</span><span class="op" id="8501538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501541">{</span><span class="ident" id="8501542">Header</span><span class="op" id="8501548">{</span><span class="string" id="8501549">&#34;Date&#34;</span><span class="op" id="8501555">:</span>&nbsp;<span class="op" id="8501557">{</span><span class="string" id="8501558">&#34;invalid&#34;</span><span class="op" id="8501567">}</span><span class="op" id="8501568">}</span><span class="op" id="8501569">,</span>&nbsp;<span class="builtintype" id="8501571">true</span><span class="op" id="8501575">}</span><span class="op" id="8501576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501579">{</span><span class="ident" id="8501580">Header</span><span class="op" id="8501586">{</span><span class="string" id="8501587">&#34;Date&#34;</span><span class="op" id="8501593">:</span>&nbsp;<span class="op" id="8501595">{</span><span class="string" id="8501596">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="8501623">}</span><span class="op" id="8501624">}</span><span class="op" id="8501625">,</span>&nbsp;<span class="builtintype" id="8501627">true</span><span class="op" id="8501631">}</span><span class="op" id="8501632">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501635">{</span><span class="ident" id="8501636">Header</span><span class="op" id="8501642">{</span><span class="string" id="8501643">&#34;Date&#34;</span><span class="op" id="8501649">:</span>&nbsp;<span class="op" id="8501651">{</span><span class="string" id="8501652">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8501683">}</span><span class="op" id="8501684">}</span><span class="op" id="8501685">,</span>&nbsp;<span class="builtintype" id="8501687">false</span><span class="op" id="8501692">}</span><span class="op" id="8501693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501696">{</span><span class="ident" id="8501697">Header</span><span class="op" id="8501703">{</span><span class="string" id="8501704">&#34;Date&#34;</span><span class="op" id="8501710">:</span>&nbsp;<span class="op" id="8501712">{</span><span class="string" id="8501713">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="8501745">}</span><span class="op" id="8501746">}</span><span class="op" id="8501747">,</span>&nbsp;<span class="builtintype" id="8501749">false</span><span class="op" id="8501754">}</span><span class="op" id="8501755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501758">{</span><span class="ident" id="8501759">Header</span><span class="op" id="8501765">{</span><span class="string" id="8501766">&#34;Date&#34;</span><span class="op" id="8501772">:</span>&nbsp;<span class="op" id="8501774">{</span><span class="string" id="8501775">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="8501801">}</span><span class="op" id="8501802">}</span><span class="op" id="8501803">,</span>&nbsp;<span class="builtintype" id="8501805">false</span><span class="op" id="8501810">}</span><span class="op" id="8501811">,</span><br>
<span class="lineno"></span><span class="op" id="8501813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="8501816">func</span>&nbsp;<span class="ident" id="8501821">TestParseTime</span><span class="op" id="8501834">(</span><span class="ident" id="8501835">t</span>&nbsp;<span class="op" id="8501837">*</span><span class="ident" id="8501838">testing</span><span class="op" id="8501845">.</span><span class="ident" id="8501846">T</span><span class="op" id="8501847">)</span>&nbsp;<span class="op" id="8501849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501852">expect</span>&nbsp;<span class="op" id="8501859">:=</span>&nbsp;<span class="ident" id="8501862">time</span><span class="op" id="8501866">.</span><span class="ident" id="8501867">Date</span><span class="op" id="8501871">(</span><span class="num" id="8501872">1994</span><span class="op" id="8501876">,</span>&nbsp;<span class="num" id="8501878">11</span><span class="op" id="8501880">,</span>&nbsp;<span class="num" id="8501882">6</span><span class="op" id="8501883">,</span>&nbsp;<span class="num" id="8501885">8</span><span class="op" id="8501886">,</span>&nbsp;<span class="num" id="8501888">49</span><span class="op" id="8501890">,</span>&nbsp;<span class="num" id="8501892">37</span><span class="op" id="8501894">,</span>&nbsp;<span class="num" id="8501896">0</span><span class="op" id="8501897">,</span>&nbsp;<span class="ident" id="8501899">time</span><span class="op" id="8501903">.</span><span class="ident" id="8501904">UTC</span><span class="op" id="8501907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501910">for</span>&nbsp;<span class="ident" id="8501914">i</span><span class="op" id="8501915">,</span>&nbsp;<span class="ident" id="8501917">test</span>&nbsp;<span class="op" id="8501922">:=</span>&nbsp;<span class="keyword" id="8501925">range</span>&nbsp;<span class="ident" id="8501931">parseTimeTests</span>&nbsp;<span class="op" id="8501946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501950">d</span><span class="op" id="8501951">,</span>&nbsp;<span class="ident" id="8501953">err</span>&nbsp;<span class="op" id="8501957">:=</span>&nbsp;<span class="ident" id="8501960">ParseTime</span><span class="op" id="8501969">(</span><span class="ident" id="8501970">test</span><span class="op" id="8501974">.</span><span class="ident" id="8501975">h</span><span class="op" id="8501976">.</span><span class="ident" id="8501977">Get</span><span class="op" id="8501980">(</span><span class="string" id="8501981">&#34;Date&#34;</span><span class="op" id="8501987">)</span><span class="op" id="8501988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501992">if</span>&nbsp;<span class="ident" id="8501995">err</span>&nbsp;<span class="op" id="8501999">!=</span>&nbsp;<span class="ident" id="8502002">nil</span>&nbsp;<span class="op" id="8502006">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502011">if</span>&nbsp;<span class="op" id="8502014">!</span><span class="ident" id="8502015">test</span><span class="op" id="8502019">.</span><span class="ident" id="8502020">err</span>&nbsp;<span class="op" id="8502024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502030">t</span><span class="op" id="8502031">.</span><span class="ident" id="8502032">Errorf</span><span class="op" id="8502038">(</span><span class="string" id="8502039">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="8502059">,</span>&nbsp;<span class="ident" id="8502061">i</span><span class="op" id="8502062">,</span>&nbsp;<span class="ident" id="8502064">err</span><span class="op" id="8502067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502077">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502088">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502092">if</span>&nbsp;<span class="ident" id="8502095">test</span><span class="op" id="8502099">.</span><span class="ident" id="8502100">err</span>&nbsp;<span class="op" id="8502104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502109">t</span><span class="op" id="8502110">.</span><span class="ident" id="8502111">Errorf</span><span class="op" id="8502117">(</span><span class="string" id="8502118">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="8502138">,</span>&nbsp;<span class="ident" id="8502140">i</span><span class="op" id="8502141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502146">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502161">if</span>&nbsp;<span class="op" id="8502164">!</span><span class="ident" id="8502165">expect</span><span class="op" id="8502171">.</span><span class="ident" id="8502172">Equal</span><span class="op" id="8502177">(</span><span class="ident" id="8502178">d</span><span class="op" id="8502179">)</span>&nbsp;<span class="op" id="8502181">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502186">t</span><span class="op" id="8502187">.</span><span class="ident" id="8502188">Errorf</span><span class="op" id="8502194">(</span><span class="string" id="8502195">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8502221">,</span>&nbsp;<span class="ident" id="8502223">i</span><span class="op" id="8502224">,</span>&nbsp;<span class="ident" id="8502226">d</span><span class="op" id="8502227">,</span>&nbsp;<span class="ident" id="8502229">expect</span><span class="op" id="8502235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502242">}</span><br>
<span class="lineno"></span><span class="op" id="8502244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8502247">type</span>&nbsp;<span class="ident" id="8502252">hasTokenTest</span>&nbsp;<span class="keyword" id="8502265">struct</span>&nbsp;<span class="op" id="8502272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502275">header</span>&nbsp;<span class="builtintype" id="8502282">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502290">token</span>&nbsp;&nbsp;<span class="builtintype" id="8502297">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502305">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8502312">bool</span><br>
<span class="lineno"></span><span class="op" id="8502317">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8502320">var</span>&nbsp;<span class="ident" id="8502324">hasTokenTests</span>&nbsp;<span class="op" id="8502338">=</span>&nbsp;<span class="op" id="8502340">[</span><span class="op" id="8502341">]</span><span class="ident" id="8502342">hasTokenTest</span><span class="op" id="8502354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502357">{</span><span class="string" id="8502358">&#34;&#34;</span><span class="op" id="8502360">,</span>&nbsp;<span class="string" id="8502362">&#34;&#34;</span><span class="op" id="8502364">,</span>&nbsp;<span class="builtintype" id="8502366">false</span><span class="op" id="8502371">}</span><span class="op" id="8502372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502375">{</span><span class="string" id="8502376">&#34;&#34;</span><span class="op" id="8502378">,</span>&nbsp;<span class="string" id="8502380">&#34;foo&#34;</span><span class="op" id="8502385">,</span>&nbsp;<span class="builtintype" id="8502387">false</span><span class="op" id="8502392">}</span><span class="op" id="8502393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502396">{</span><span class="string" id="8502397">&#34;foo&#34;</span><span class="op" id="8502402">,</span>&nbsp;<span class="string" id="8502404">&#34;foo&#34;</span><span class="op" id="8502409">,</span>&nbsp;<span class="builtintype" id="8502411">true</span><span class="op" id="8502415">}</span><span class="op" id="8502416">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502419">{</span><span class="string" id="8502420">&#34;foo&nbsp;&#34;</span><span class="op" id="8502426">,</span>&nbsp;<span class="string" id="8502428">&#34;foo&#34;</span><span class="op" id="8502433">,</span>&nbsp;<span class="builtintype" id="8502435">true</span><span class="op" id="8502439">}</span><span class="op" id="8502440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502443">{</span><span class="string" id="8502444">&#34;&nbsp;foo&#34;</span><span class="op" id="8502450">,</span>&nbsp;<span class="string" id="8502452">&#34;foo&#34;</span><span class="op" id="8502457">,</span>&nbsp;<span class="builtintype" id="8502459">true</span><span class="op" id="8502463">}</span><span class="op" id="8502464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502467">{</span><span class="string" id="8502468">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="8502475">,</span>&nbsp;<span class="string" id="8502477">&#34;foo&#34;</span><span class="op" id="8502482">,</span>&nbsp;<span class="builtintype" id="8502484">true</span><span class="op" id="8502488">}</span><span class="op" id="8502489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502492">{</span><span class="string" id="8502493">&#34;foo,bar&#34;</span><span class="op" id="8502502">,</span>&nbsp;<span class="string" id="8502504">&#34;foo&#34;</span><span class="op" id="8502509">,</span>&nbsp;<span class="builtintype" id="8502511">true</span><span class="op" id="8502515">}</span><span class="op" id="8502516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502519">{</span><span class="string" id="8502520">&#34;bar,foo&#34;</span><span class="op" id="8502529">,</span>&nbsp;<span class="string" id="8502531">&#34;foo&#34;</span><span class="op" id="8502536">,</span>&nbsp;<span class="builtintype" id="8502538">true</span><span class="op" id="8502542">}</span><span class="op" id="8502543">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502546">{</span><span class="string" id="8502547">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="8502557">,</span>&nbsp;<span class="string" id="8502559">&#34;foo&#34;</span><span class="op" id="8502564">,</span>&nbsp;<span class="builtintype" id="8502566">true</span><span class="op" id="8502570">}</span><span class="op" id="8502571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502574">{</span><span class="string" id="8502575">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8502589">,</span>&nbsp;<span class="string" id="8502591">&#34;foo&#34;</span><span class="op" id="8502596">,</span>&nbsp;<span class="builtintype" id="8502598">true</span><span class="op" id="8502602">}</span><span class="op" id="8502603">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502606">{</span><span class="string" id="8502607">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="8502621">,</span>&nbsp;<span class="string" id="8502623">&#34;foo&#34;</span><span class="op" id="8502628">,</span>&nbsp;<span class="builtintype" id="8502630">true</span><span class="op" id="8502634">}</span><span class="op" id="8502635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502638">{</span><span class="string" id="8502639">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="8502653">,</span>&nbsp;<span class="string" id="8502655">&#34;foo&#34;</span><span class="op" id="8502660">,</span>&nbsp;<span class="builtintype" id="8502662">true</span><span class="op" id="8502666">}</span><span class="op" id="8502667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502670">{</span><span class="string" id="8502671">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="8502686">,</span>&nbsp;<span class="string" id="8502688">&#34;foo&#34;</span><span class="op" id="8502693">,</span>&nbsp;<span class="builtintype" id="8502695">true</span><span class="op" id="8502699">}</span><span class="op" id="8502700">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502703">{</span><span class="string" id="8502704">&#34;FOO&#34;</span><span class="op" id="8502709">,</span>&nbsp;<span class="string" id="8502711">&#34;foo&#34;</span><span class="op" id="8502716">,</span>&nbsp;<span class="builtintype" id="8502718">true</span><span class="op" id="8502722">}</span><span class="op" id="8502723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502726">{</span><span class="string" id="8502727">&#34;FOO&nbsp;&#34;</span><span class="op" id="8502733">,</span>&nbsp;<span class="string" id="8502735">&#34;foo&#34;</span><span class="op" id="8502740">,</span>&nbsp;<span class="builtintype" id="8502742">true</span><span class="op" id="8502746">}</span><span class="op" id="8502747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502750">{</span><span class="string" id="8502751">&#34;&nbsp;FOO&#34;</span><span class="op" id="8502757">,</span>&nbsp;<span class="string" id="8502759">&#34;foo&#34;</span><span class="op" id="8502764">,</span>&nbsp;<span class="builtintype" id="8502766">true</span><span class="op" id="8502770">}</span><span class="op" id="8502771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502774">{</span><span class="string" id="8502775">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8502782">,</span>&nbsp;<span class="string" id="8502784">&#34;foo&#34;</span><span class="op" id="8502789">,</span>&nbsp;<span class="builtintype" id="8502791">true</span><span class="op" id="8502795">}</span><span class="op" id="8502796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502799">{</span><span class="string" id="8502800">&#34;FOO,BAR&#34;</span><span class="op" id="8502809">,</span>&nbsp;<span class="string" id="8502811">&#34;foo&#34;</span><span class="op" id="8502816">,</span>&nbsp;<span class="builtintype" id="8502818">true</span><span class="op" id="8502822">}</span><span class="op" id="8502823">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502826">{</span><span class="string" id="8502827">&#34;BAR,FOO&#34;</span><span class="op" id="8502836">,</span>&nbsp;<span class="string" id="8502838">&#34;foo&#34;</span><span class="op" id="8502843">,</span>&nbsp;<span class="builtintype" id="8502845">true</span><span class="op" id="8502849">}</span><span class="op" id="8502850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502853">{</span><span class="string" id="8502854">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="8502864">,</span>&nbsp;<span class="string" id="8502866">&#34;foo&#34;</span><span class="op" id="8502871">,</span>&nbsp;<span class="builtintype" id="8502873">true</span><span class="op" id="8502877">}</span><span class="op" id="8502878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502881">{</span><span class="string" id="8502882">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="8502896">,</span>&nbsp;<span class="string" id="8502898">&#34;foo&#34;</span><span class="op" id="8502903">,</span>&nbsp;<span class="builtintype" id="8502905">true</span><span class="op" id="8502909">}</span><span class="op" id="8502910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502913">{</span><span class="string" id="8502914">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="8502928">,</span>&nbsp;<span class="string" id="8502930">&#34;foo&#34;</span><span class="op" id="8502935">,</span>&nbsp;<span class="builtintype" id="8502937">true</span><span class="op" id="8502941">}</span><span class="op" id="8502942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502945">{</span><span class="string" id="8502946">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="8502960">,</span>&nbsp;<span class="string" id="8502962">&#34;foo&#34;</span><span class="op" id="8502967">,</span>&nbsp;<span class="builtintype" id="8502969">true</span><span class="op" id="8502973">}</span><span class="op" id="8502974">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502977">{</span><span class="string" id="8502978">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="8502993">,</span>&nbsp;<span class="string" id="8502995">&#34;foo&#34;</span><span class="op" id="8503000">,</span>&nbsp;<span class="builtintype" id="8503002">true</span><span class="op" id="8503006">}</span><span class="op" id="8503007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503010">{</span><span class="string" id="8503011">&#34;foobar&#34;</span><span class="op" id="8503019">,</span>&nbsp;<span class="string" id="8503021">&#34;foo&#34;</span><span class="op" id="8503026">,</span>&nbsp;<span class="builtintype" id="8503028">false</span><span class="op" id="8503033">}</span><span class="op" id="8503034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503037">{</span><span class="string" id="8503038">&#34;barfoo&nbsp;&#34;</span><span class="op" id="8503047">,</span>&nbsp;<span class="string" id="8503049">&#34;foo&#34;</span><span class="op" id="8503054">,</span>&nbsp;<span class="builtintype" id="8503056">false</span><span class="op" id="8503061">}</span><span class="op" id="8503062">,</span><br>
<span class="lineno"></span><span class="op" id="8503064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8503067">func</span>&nbsp;<span class="ident" id="8503072">TestHasToken</span><span class="op" id="8503084">(</span><span class="ident" id="8503085">t</span>&nbsp;<span class="op" id="8503087">*</span><span class="ident" id="8503088">testing</span><span class="op" id="8503095">.</span><span class="ident" id="8503096">T</span><span class="op" id="8503097">)</span>&nbsp;<span class="op" id="8503099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503102">for</span>&nbsp;<span class="ident" id="8503106">_</span><span class="op" id="8503107">,</span>&nbsp;<span class="ident" id="8503109">tt</span>&nbsp;<span class="op" id="8503112">:=</span>&nbsp;<span class="keyword" id="8503115">range</span>&nbsp;<span class="ident" id="8503121">hasTokenTests</span>&nbsp;<span class="op" id="8503135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503139">if</span>&nbsp;<span class="ident" id="8503142">hasToken</span><span class="op" id="8503150">(</span><span class="ident" id="8503151">tt</span><span class="op" id="8503153">.</span><span class="ident" id="8503154">header</span><span class="op" id="8503160">,</span>&nbsp;<span class="ident" id="8503162">tt</span><span class="op" id="8503164">.</span><span class="ident" id="8503165">token</span><span class="op" id="8503170">)</span>&nbsp;<span class="op" id="8503172">!=</span>&nbsp;<span class="ident" id="8503175">tt</span><span class="op" id="8503177">.</span><span class="ident" id="8503178">want</span>&nbsp;<span class="op" id="8503183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503188">t</span><span class="op" id="8503189">.</span><span class="ident" id="8503190">Errorf</span><span class="op" id="8503196">(</span><span class="string" id="8503197">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8503229">,</span>&nbsp;<span class="ident" id="8503231">tt</span><span class="op" id="8503233">.</span><span class="ident" id="8503234">header</span><span class="op" id="8503240">,</span>&nbsp;<span class="ident" id="8503242">tt</span><span class="op" id="8503244">.</span><span class="ident" id="8503245">token</span><span class="op" id="8503250">,</span>&nbsp;<span class="op" id="8503252">!</span><span class="ident" id="8503253">tt</span><span class="op" id="8503255">.</span><span class="ident" id="8503256">want</span><span class="op" id="8503260">,</span>&nbsp;<span class="ident" id="8503262">tt</span><span class="op" id="8503264">.</span><span class="ident" id="8503265">want</span><span class="op" id="8503269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503273">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503276">}</span><br>
<span class="lineno"></span><span class="op" id="8503278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8503281">var</span>&nbsp;<span class="ident" id="8503285">testHeader</span>&nbsp;<span class="op" id="8503296">=</span>&nbsp;<span class="ident" id="8503298">Header</span><span class="op" id="8503304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8503307">&#34;Content-Length&#34;</span><span class="op" id="8503323">:</span>&nbsp;<span class="op" id="8503325">{</span><span class="string" id="8503326">&#34;123&#34;</span><span class="op" id="8503331">}</span><span class="op" id="8503332">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8503335">&#34;Content-Type&#34;</span><span class="op" id="8503349">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8503353">{</span><span class="string" id="8503354">&#34;text/plain&#34;</span><span class="op" id="8503366">}</span><span class="op" id="8503367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8503370">&#34;Date&#34;</span><span class="op" id="8503376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8503388">{</span><span class="string" id="8503389">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="8503415">}</span><span class="op" id="8503416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8503419">&#34;Server&#34;</span><span class="op" id="8503427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8503437">{</span><span class="ident" id="8503438">DefaultUserAgent</span><span class="op" id="8503454">}</span><span class="op" id="8503455">,</span><br>
<span class="lineno"></span><span class="op" id="8503457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="8503460">var</span>&nbsp;<span class="ident" id="8503464">buf</span>&nbsp;<span class="ident" id="8503468">bytes</span><span class="op" id="8503473">.</span><span class="ident" id="8503474">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8503482">func</span>&nbsp;<span class="ident" id="8503487">BenchmarkHeaderWriteSubset</span><span class="op" id="8503513">(</span><span class="ident" id="8503514">b</span>&nbsp;<span class="op" id="8503516">*</span><span class="ident" id="8503517">testing</span><span class="op" id="8503524">.</span><span class="ident" id="8503525">B</span><span class="op" id="8503526">)</span>&nbsp;<span class="op" id="8503528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503531">b</span><span class="op" id="8503532">.</span><span class="ident" id="8503533">ReportAllocs</span><span class="op" id="8503545">(</span><span class="op" id="8503546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503549">for</span>&nbsp;<span class="ident" id="8503553">i</span>&nbsp;<span class="op" id="8503555">:=</span>&nbsp;<span class="num" id="8503558">0</span><span class="op" id="8503559">;</span>&nbsp;<span class="ident" id="8503561">i</span>&nbsp;<span class="op" id="8503563">&lt;</span>&nbsp;<span class="ident" id="8503565">b</span><span class="op" id="8503566">.</span><span class="ident" id="8503567">N</span><span class="op" id="8503568">;</span>&nbsp;<span class="ident" id="8503570">i</span><span class="op" id="8503571">++</span>&nbsp;<span class="op" id="8503574">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503578">buf</span><span class="op" id="8503581">.</span><span class="ident" id="8503582">Reset</span><span class="op" id="8503587">(</span><span class="op" id="8503588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503592">testHeader</span><span class="op" id="8503602">.</span><span class="ident" id="8503603">WriteSubset</span><span class="op" id="8503614">(</span><span class="op" id="8503615">&amp;</span><span class="ident" id="8503616">buf</span><span class="op" id="8503619">,</span>&nbsp;<span class="ident" id="8503621">nil</span><span class="op" id="8503624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503627">}</span><br>
<span class="lineno"></span><span class="op" id="8503629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="8503632">func</span>&nbsp;<span class="ident" id="8503637">TestHeaderWriteSubsetAllocs</span><span class="op" id="8503664">(</span><span class="ident" id="8503665">t</span>&nbsp;<span class="op" id="8503667">*</span><span class="ident" id="8503668">testing</span><span class="op" id="8503675">.</span><span class="ident" id="8503676">T</span><span class="op" id="8503677">)</span>&nbsp;<span class="op" id="8503679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503682">if</span>&nbsp;<span class="ident" id="8503685">testing</span><span class="op" id="8503692">.</span><span class="ident" id="8503693">Short</span><span class="op" id="8503698">(</span><span class="op" id="8503699">)</span>&nbsp;<span class="op" id="8503701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503705">t</span><span class="op" id="8503706">.</span><span class="ident" id="8503707">Skip</span><span class="op" id="8503711">(</span><span class="string" id="8503712">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="8503747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503753">if</span>&nbsp;<span class="ident" id="8503756">raceEnabled</span>&nbsp;<span class="op" id="8503768">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503772">t</span><span class="op" id="8503773">.</span><span class="ident" id="8503774">Skip</span><span class="op" id="8503778">(</span><span class="string" id="8503779">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="8503814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503820">if</span>&nbsp;<span class="ident" id="8503823">runtime</span><span class="op" id="8503830">.</span><span class="ident" id="8503831">GOMAXPROCS</span><span class="op" id="8503841">(</span><span class="num" id="8503842">0</span><span class="op" id="8503843">)</span>&nbsp;<span class="op" id="8503845">&gt;</span>&nbsp;<span class="num" id="8503847">1</span>&nbsp;<span class="op" id="8503849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503853">t</span><span class="op" id="8503854">.</span><span class="ident" id="8503855">Skip</span><span class="op" id="8503859">(</span><span class="string" id="8503860">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="8503884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503887">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503890">n</span>&nbsp;<span class="op" id="8503892">:=</span>&nbsp;<span class="ident" id="8503895">testing</span><span class="op" id="8503902">.</span><span class="ident" id="8503903">AllocsPerRun</span><span class="op" id="8503915">(</span><span class="num" id="8503916">100</span><span class="op" id="8503919">,</span>&nbsp;<span class="keyword" id="8503921">func</span><span class="op" id="8503925">(</span><span class="op" id="8503926">)</span>&nbsp;<span class="op" id="8503928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503932">buf</span><span class="op" id="8503935">.</span><span class="ident" id="8503936">Reset</span><span class="op" id="8503941">(</span><span class="op" id="8503942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503946">testHeader</span><span class="op" id="8503956">.</span><span class="ident" id="8503957">WriteSubset</span><span class="op" id="8503968">(</span><span class="op" id="8503969">&amp;</span><span class="ident" id="8503970">buf</span><span class="op" id="8503973">,</span>&nbsp;<span class="ident" id="8503975">nil</span><span class="op" id="8503978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503981">}</span><span class="op" id="8503982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503985">if</span>&nbsp;<span class="ident" id="8503988">n</span>&nbsp;<span class="op" id="8503990">&gt;</span>&nbsp;<span class="num" id="8503992">0</span>&nbsp;<span class="op" id="8503994">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503998">t</span><span class="op" id="8503999">.</span><span class="ident" id="8504000">Errorf</span><span class="op" id="8504006">(</span><span class="string" id="8504007">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="8504028">,</span>&nbsp;<span class="ident" id="8504030">n</span><span class="op" id="8504031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504034">}</span><br>
<span class="lineno"></span><span class="op" id="8504036">}</span>
</div>
</body>
</html>
