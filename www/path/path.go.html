<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4090227">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4090282">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4090336">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4090387">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="4090464">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="4090474">package</span>&nbsp;<span class="ident" id="4090482">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4090488">import</span>&nbsp;<span class="op" id="4090495">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4090498">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4090508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090511">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="4090561">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="4090619">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="4090685">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4090742">type</span>&nbsp;<span class="ident" id="4090747">lazybuf</span>&nbsp;<span class="keyword" id="4090755">struct</span>&nbsp;<span class="op" id="4090762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090765">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4090769">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090777">buf</span>&nbsp;<span class="op" id="4090781">[</span><span class="op" id="4090782">]</span><span class="builtintype" id="4090783">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090789">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4090793">int</span><br>
<span class="lineno"></span><span class="op" id="4090797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4090800">func</span>&nbsp;<span class="op" id="4090805">(</span><span class="ident" id="4090806">b</span>&nbsp;<span class="op" id="4090808">*</span><span class="ident" id="4090809"><a href="/path/path.go.html#4090747">lazybuf</a></span><span class="op" id="4090816">)</span>&nbsp;<span class="ident" id="4090818">index</span><span class="op" id="4090823">(</span><span class="ident" id="4090824">i</span>&nbsp;<span class="builtintype" id="4090826">int</span><span class="op" id="4090829">)</span>&nbsp;<span class="builtintype" id="4090831">byte</span>&nbsp;<span class="op" id="4090836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090839">if</span>&nbsp;<span class="ident" id="4090842"><a href="/path/path.go.html#4090806">b</a></span><span class="op" id="4090843">.</span><span class="ident" id="4090844">buf</span>&nbsp;<span class="op" id="4090848">!=</span>&nbsp;<span class="ident" id="4090851">nil</span>&nbsp;<span class="op" id="4090855">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090859">return</span>&nbsp;<span class="ident" id="4090866"><a href="/path/path.go.html#4090806">b</a></span><span class="op" id="4090867">.</span><span class="ident" id="4090868">buf</span><span class="op" id="4090871">[</span><span class="ident" id="4090872"><a href="/path/path.go.html#4090824">i</a></span><span class="op" id="4090873">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4090876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090879">return</span>&nbsp;<span class="ident" id="4090886"><a href="/path/path.go.html#4090806">b</a></span><span class="op" id="4090887">.</span><span class="ident" id="4090888">s</span><span class="op" id="4090889">[</span><span class="ident" id="4090890"><a href="/path/path.go.html#4090824">i</a></span><span class="op" id="4090891">]</span><br>
<span class="lineno"></span><span class="op" id="4090893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="4090896">func</span>&nbsp;<span class="op" id="4090901">(</span><span class="ident" id="4090902">b</span>&nbsp;<span class="op" id="4090904">*</span><span class="ident" id="4090905"><a href="/path/path.go.html#4090747">lazybuf</a></span><span class="op" id="4090912">)</span>&nbsp;<span class="builtinfunc" id="4090914">append</span><span class="op" id="4090920">(</span><span class="ident" id="4090921">c</span>&nbsp;<span class="builtintype" id="4090923">byte</span><span class="op" id="4090927">)</span>&nbsp;<span class="op" id="4090929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090932">if</span>&nbsp;<span class="ident" id="4090935"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090936">.</span><span class="ident" id="4090937">buf</span>&nbsp;<span class="op" id="4090941">==</span>&nbsp;<span class="ident" id="4090944">nil</span>&nbsp;<span class="op" id="4090948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4090952">if</span>&nbsp;<span class="ident" id="4090955"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090956">.</span><span class="ident" id="4090957">w</span>&nbsp;<span class="op" id="4090959">&lt;</span>&nbsp;<span class="builtinfunc" id="4090961">len</span><span class="op" id="4090964">(</span><span class="ident" id="4090965"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090966">.</span><span class="ident" id="4090967">s</span><span class="op" id="4090968">)</span>&nbsp;<span class="op" id="4090970">&amp;&amp;</span>&nbsp;<span class="ident" id="4090973"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090974">.</span><span class="ident" id="4090975">s</span><span class="op" id="4090976">[</span><span class="ident" id="4090977"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090978">.</span><span class="ident" id="4090979">w</span><span class="op" id="4090980">]</span>&nbsp;<span class="op" id="4090982">==</span>&nbsp;<span class="ident" id="4090985"><a href="/path/path.go.html#4090921">c</a></span>&nbsp;<span class="op" id="4090987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4090992"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4090993">.</span><span class="ident" id="4090994">w</span><span class="op" id="4090995">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091001">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091014"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091015">.</span><span class="ident" id="4091016">buf</span>&nbsp;<span class="op" id="4091020">=</span>&nbsp;<span class="builtinfunc" id="4091022">make</span><span class="op" id="4091026">(</span><span class="op" id="4091027">[</span><span class="op" id="4091028">]</span><span class="builtintype" id="4091029">byte</span><span class="op" id="4091033">,</span>&nbsp;<span class="builtinfunc" id="4091035">len</span><span class="op" id="4091038">(</span><span class="ident" id="4091039"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091040">.</span><span class="ident" id="4091041">s</span><span class="op" id="4091042">)</span><span class="op" id="4091043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4091047">copy</span><span class="op" id="4091051">(</span><span class="ident" id="4091052"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091053">.</span><span class="ident" id="4091054">buf</span><span class="op" id="4091057">,</span>&nbsp;<span class="ident" id="4091059"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091060">.</span><span class="ident" id="4091061">s</span><span class="op" id="4091062">[</span><span class="op" id="4091063">:</span><span class="ident" id="4091064"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091065">.</span><span class="ident" id="4091066">w</span><span class="op" id="4091067">]</span><span class="op" id="4091068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091074"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091075">.</span><span class="ident" id="4091076">buf</span><span class="op" id="4091079">[</span><span class="ident" id="4091080"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091081">.</span><span class="ident" id="4091082">w</span><span class="op" id="4091083">]</span>&nbsp;<span class="op" id="4091085">=</span>&nbsp;<span class="ident" id="4091087"><a href="/path/path.go.html#4090921">c</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4091090"><a href="/path/path.go.html#4090902">b</a></span><span class="op" id="4091091">.</span><span class="ident" id="4091092">w</span><span class="op" id="4091093">++</span><br>
<span class="lineno"></span><span class="op" id="4091096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4091099">func</span>&nbsp;<span class="op" id="4091104">(</span><span class="ident" id="4091105">b</span>&nbsp;<span class="op" id="4091107">*</span><span class="ident" id="4091108"><a href="/path/path.go.html#4090747">lazybuf</a></span><span class="op" id="4091115">)</span>&nbsp;<span class="builtintype" id="4091117">string</span><span class="op" id="4091123">(</span><span class="op" id="4091124">)</span>&nbsp;<span class="builtintype" id="4091126">string</span>&nbsp;<span class="op" id="4091133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091136">if</span>&nbsp;<span class="ident" id="4091139"><a href="/path/path.go.html#4091105">b</a></span><span class="op" id="4091140">.</span><span class="ident" id="4091141">buf</span>&nbsp;<span class="op" id="4091145">==</span>&nbsp;<span class="ident" id="4091148">nil</span>&nbsp;<span class="op" id="4091152">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091156">return</span>&nbsp;<span class="ident" id="4091163"><a href="/path/path.go.html#4091105">b</a></span><span class="op" id="4091164">.</span><span class="ident" id="4091165">s</span><span class="op" id="4091166">[</span><span class="op" id="4091167">:</span><span class="ident" id="4091168"><a href="/path/path.go.html#4091105">b</a></span><span class="op" id="4091169">.</span><span class="ident" id="4091170">w</span><span class="op" id="4091171">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4091174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4091177">return</span>&nbsp;<span class="builtintype" id="4091184">string</span><span class="op" id="4091190">(</span><span class="ident" id="4091191"><a href="/path/path.go.html#4091105">b</a></span><span class="op" id="4091192">.</span><span class="ident" id="4091193">buf</span><span class="op" id="4091196">[</span><span class="op" id="4091197">:</span><span class="ident" id="4091198"><a href="/path/path.go.html#4091105">b</a></span><span class="op" id="4091199">.</span><span class="ident" id="4091200">w</span><span class="op" id="4091201">]</span><span class="op" id="4091202">)</span><br>
<span class="lineno"></span><span class="op" id="4091204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4091207">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="4091266">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="4091331">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="4091387">//</span><br>
<span class="lineno"></span><span class="comment" id="4091390">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="4091442">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="4091508">//&nbsp;&nbsp;&nbsp;&nbsp3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="4091579">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="4091633">//&nbsp;&nbsp;&nbsp;&nbsp4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="4091687">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="4091751">//</span><br>
<span class="lineno"></span><span class="comment" id="4091754">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4091819">//</span><br>
<span class="lineno"></span><span class="comment" id="4091822">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="4091881">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="4091908">//</span><br>
<span class="lineno"></span><span class="comment" id="4091911">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="4091967">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="4091995">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="4092047">func</span>&nbsp;<span class="ident" id="4092052">Clean</span><span class="op" id="4092057">(</span><span class="ident" id="4092058">path</span>&nbsp;<span class="builtintype" id="4092063">string</span><span class="op" id="4092069">)</span>&nbsp;<span class="builtintype" id="4092071">string</span>&nbsp;<span class="op" id="4092078">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092081">if</span>&nbsp;<span class="ident" id="4092084"><a href="/path/path.go.html#4092058">path</a></span>&nbsp;<span class="op" id="4092089">==</span>&nbsp;<span class="string" id="4092092">&#34;&#34;</span>&nbsp;<span class="op" id="4092095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092099">return</span>&nbsp;<span class="string" id="4092106">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092115">rooted</span>&nbsp;<span class="op" id="4092122">:=</span>&nbsp;<span class="ident" id="4092125"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092129">[</span><span class="num" id="4092130">0</span><span class="op" id="4092131">]</span>&nbsp;<span class="op" id="4092133">==</span>&nbsp;<span class="string" id="4092136">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092141">n</span>&nbsp;<span class="op" id="4092143">:=</span>&nbsp;<span class="builtinfunc" id="4092146">len</span><span class="op" id="4092149">(</span><span class="ident" id="4092150"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092154">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092158">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092174">//&nbsp;&nbsp;&nbsp;&nbspreading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092233">//&nbsp;&nbsp;&nbsp;&nbspwriting&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092287">//&nbsp;&nbsp;&nbsp;&nbspdotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092349">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspit&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092414">out</span>&nbsp;<span class="op" id="4092418">:=</span>&nbsp;<span class="ident" id="4092421"><a href="/path/path.go.html#4090747">lazybuf</a></span><span class="op" id="4092428">{</span><span class="ident" id="4092429">s</span><span class="op" id="4092430">:</span>&nbsp;<span class="ident" id="4092432"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092439">r</span><span class="op" id="4092440">,</span>&nbsp;<span class="ident" id="4092442">dotdot</span>&nbsp;<span class="op" id="4092449">:=</span>&nbsp;<span class="num" id="4092452">0</span><span class="op" id="4092453">,</span>&nbsp;<span class="num" id="4092455">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092458">if</span>&nbsp;<span class="ident" id="4092461"><a href="/path/path.go.html#4092115">rooted</a></span>&nbsp;<span class="op" id="4092468">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092472"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092475">.</span><span class="builtinfunc" id="4092476">append</span><span class="op" id="4092482">(</span><span class="string" id="4092483">&#39;/&#39;</span><span class="op" id="4092486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092490"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092491">,</span>&nbsp;<span class="ident" id="4092493"><a href="/path/path.go.html#4092442">dotdot</a></span>&nbsp;<span class="op" id="4092500">=</span>&nbsp;<span class="num" id="4092502">1</span><span class="op" id="4092503">,</span>&nbsp;<span class="num" id="4092505">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092512">for</span>&nbsp;<span class="ident" id="4092516"><a href="/path/path.go.html#4092439">r</a></span>&nbsp;<span class="op" id="4092518">&lt;</span>&nbsp;<span class="ident" id="4092520"><a href="/path/path.go.html#4092141">n</a></span>&nbsp;<span class="op" id="4092522">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092526">switch</span>&nbsp;<span class="op" id="4092533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092537">case</span>&nbsp;<span class="ident" id="4092542"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092546">[</span><span class="ident" id="4092547"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092548">]</span>&nbsp;<span class="op" id="4092550">==</span>&nbsp;<span class="string" id="4092553">&#39;/&#39;</span><span class="op" id="4092556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092561">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092586"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092587">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092592">case</span>&nbsp;<span class="ident" id="4092597"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092601">[</span><span class="ident" id="4092602"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092603">]</span>&nbsp;<span class="op" id="4092605">==</span>&nbsp;<span class="string" id="4092608">&#39;.&#39;</span>&nbsp;<span class="op" id="4092612">&amp;&amp;</span>&nbsp;<span class="op" id="4092615">(</span><span class="ident" id="4092616"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092617">+</span><span class="num" id="4092618">1</span>&nbsp;<span class="op" id="4092620">==</span>&nbsp;<span class="ident" id="4092623"><a href="/path/path.go.html#4092141">n</a></span>&nbsp;<span class="op" id="4092625">||</span>&nbsp;<span class="ident" id="4092628"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092632">[</span><span class="ident" id="4092633"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092634">+</span><span class="num" id="4092635">1</span><span class="op" id="4092636">]</span>&nbsp;<span class="op" id="4092638">==</span>&nbsp;<span class="string" id="4092641">&#39;/&#39;</span><span class="op" id="4092644">)</span><span class="op" id="4092645">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092650">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092666"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092667">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092672">case</span>&nbsp;<span class="ident" id="4092677"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092681">[</span><span class="ident" id="4092682"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092683">]</span>&nbsp;<span class="op" id="4092685">==</span>&nbsp;<span class="string" id="4092688">&#39;.&#39;</span>&nbsp;<span class="op" id="4092692">&amp;&amp;</span>&nbsp;<span class="ident" id="4092695"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092699">[</span><span class="ident" id="4092700"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092701">+</span><span class="num" id="4092702">1</span><span class="op" id="4092703">]</span>&nbsp;<span class="op" id="4092705">==</span>&nbsp;<span class="string" id="4092708">&#39;.&#39;</span>&nbsp;<span class="op" id="4092712">&amp;&amp;</span>&nbsp;<span class="op" id="4092715">(</span><span class="ident" id="4092716"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092717">+</span><span class="num" id="4092718">2</span>&nbsp;<span class="op" id="4092720">==</span>&nbsp;<span class="ident" id="4092723"><a href="/path/path.go.html#4092141">n</a></span>&nbsp;<span class="op" id="4092725">||</span>&nbsp;<span class="ident" id="4092728"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4092732">[</span><span class="ident" id="4092733"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4092734">+</span><span class="num" id="4092735">2</span><span class="op" id="4092736">]</span>&nbsp;<span class="op" id="4092738">==</span>&nbsp;<span class="string" id="4092741">&#39;/&#39;</span><span class="op" id="4092744">)</span><span class="op" id="4092745">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092750">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092785"><a href="/path/path.go.html#4092439">r</a></span>&nbsp;<span class="op" id="4092787">+=</span>&nbsp;<span class="num" id="4092790">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092795">switch</span>&nbsp;<span class="op" id="4092802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092807">case</span>&nbsp;<span class="ident" id="4092812"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092815">.</span><span class="ident" id="4092816">w</span>&nbsp;<span class="op" id="4092818">&gt;</span>&nbsp;<span class="ident" id="4092820"><a href="/path/path.go.html#4092442">dotdot</a></span><span class="op" id="4092826">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092832">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092853"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092856">.</span><span class="ident" id="4092857">w</span><span class="op" id="4092858">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092865">for</span>&nbsp;<span class="ident" id="4092869"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092872">.</span><span class="ident" id="4092873">w</span>&nbsp;<span class="op" id="4092875">&gt;</span>&nbsp;<span class="ident" id="4092877"><a href="/path/path.go.html#4092442">dotdot</a></span>&nbsp;<span class="op" id="4092884">&amp;&amp;</span>&nbsp;<span class="ident" id="4092887"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092890">.</span><span class="ident" id="4092891">index</span><span class="op" id="4092896">(</span><span class="ident" id="4092897"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092900">.</span><span class="ident" id="4092901">w</span><span class="op" id="4092902">)</span>&nbsp;<span class="op" id="4092904">!=</span>&nbsp;<span class="string" id="4092907">&#39;/&#39;</span>&nbsp;<span class="op" id="4092911">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4092918"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4092921">.</span><span class="ident" id="4092922">w</span><span class="op" id="4092923">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4092930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4092935">case</span>&nbsp;<span class="op" id="4092940">!</span><span class="ident" id="4092941"><a href="/path/path.go.html#4092115">rooted</a></span><span class="op" id="4092947">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4092953">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093016">if</span>&nbsp;<span class="ident" id="4093019"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093022">.</span><span class="ident" id="4093023">w</span>&nbsp;<span class="op" id="4093025">&gt;</span>&nbsp;<span class="num" id="4093027">0</span>&nbsp;<span class="op" id="4093029">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093036"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093039">.</span><span class="builtinfunc" id="4093040">append</span><span class="op" id="4093046">(</span><span class="string" id="4093047">&#39;/&#39;</span><span class="op" id="4093050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093062"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093065">.</span><span class="builtinfunc" id="4093066">append</span><span class="op" id="4093072">(</span><span class="string" id="4093073">&#39;.&#39;</span><span class="op" id="4093076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093082"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093085">.</span><span class="builtinfunc" id="4093086">append</span><span class="op" id="4093092">(</span><span class="string" id="4093093">&#39;.&#39;</span><span class="op" id="4093096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093102"><a href="/path/path.go.html#4092442">dotdot</a></span>&nbsp;<span class="op" id="4093109">=</span>&nbsp;<span class="ident" id="4093111"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093114">.</span><span class="ident" id="4093115">w</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093124">default</span><span class="op" id="4093131">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093136">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093161">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093187">if</span>&nbsp;<span class="ident" id="4093190"><a href="/path/path.go.html#4092115">rooted</a></span>&nbsp;<span class="op" id="4093197">&amp;&amp;</span>&nbsp;<span class="ident" id="4093200"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093203">.</span><span class="ident" id="4093204">w</span>&nbsp;<span class="op" id="4093206">!=</span>&nbsp;<span class="num" id="4093209">1</span>&nbsp;<span class="op" id="4093211">||</span>&nbsp;<span class="op" id="4093214">!</span><span class="ident" id="4093215"><a href="/path/path.go.html#4092115">rooted</a></span>&nbsp;<span class="op" id="4093222">&amp;&amp;</span>&nbsp;<span class="ident" id="4093225"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093228">.</span><span class="ident" id="4093229">w</span>&nbsp;<span class="op" id="4093231">!=</span>&nbsp;<span class="num" id="4093234">0</span>&nbsp;<span class="op" id="4093236">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093242"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093245">.</span><span class="builtinfunc" id="4093246">append</span><span class="op" id="4093252">(</span><span class="string" id="4093253">&#39;/&#39;</span><span class="op" id="4093256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093266">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093285">for</span>&nbsp;<span class="op" id="4093289">;</span>&nbsp;<span class="ident" id="4093291"><a href="/path/path.go.html#4092439">r</a></span>&nbsp;<span class="op" id="4093293">&lt;</span>&nbsp;<span class="ident" id="4093295"><a href="/path/path.go.html#4092141">n</a></span>&nbsp;<span class="op" id="4093297">&amp;&amp;</span>&nbsp;<span class="ident" id="4093300"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4093304">[</span><span class="ident" id="4093305"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4093306">]</span>&nbsp;<span class="op" id="4093308">!=</span>&nbsp;<span class="string" id="4093311">&#39;/&#39;</span><span class="op" id="4093314">;</span>&nbsp;<span class="ident" id="4093316"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4093317">++</span>&nbsp;<span class="op" id="4093320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093326"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093329">.</span><span class="builtinfunc" id="4093330">append</span><span class="op" id="4093336">(</span><span class="ident" id="4093337"><a href="/path/path.go.html#4092058">path</a></span><span class="op" id="4093341">[</span><span class="ident" id="4093342"><a href="/path/path.go.html#4092439">r</a></span><span class="op" id="4093343">]</span><span class="op" id="4093344">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4093360">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093391">if</span>&nbsp;<span class="ident" id="4093394"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093397">.</span><span class="ident" id="4093398">w</span>&nbsp;<span class="op" id="4093400">==</span>&nbsp;<span class="num" id="4093403">0</span>&nbsp;<span class="op" id="4093405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093409">return</span>&nbsp;<span class="string" id="4093416">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4093421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093425">return</span>&nbsp;<span class="ident" id="4093432"><a href="/path/path.go.html#4092414">out</a></span><span class="op" id="4093435">.</span><span class="builtintype" id="4093436">string</span><span class="op" id="4093442">(</span><span class="op" id="4093443">)</span><br>
<span class="lineno">135</span><span class="op" id="4093445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4093448">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="4093508">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="4093567">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="4093628">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="4093649">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="4093712">func</span>&nbsp;<span class="ident" id="4093717">Split</span><span class="op" id="4093722">(</span><span class="ident" id="4093723">path</span>&nbsp;<span class="builtintype" id="4093728">string</span><span class="op" id="4093734">)</span>&nbsp;<span class="op" id="4093736">(</span><span class="ident" id="4093737">dir</span><span class="op" id="4093740">,</span>&nbsp;<span class="ident" id="4093742">file</span>&nbsp;<span class="builtintype" id="4093747">string</span><span class="op" id="4093753">)</span>&nbsp;<span class="op" id="4093755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4093758">i</span>&nbsp;<span class="op" id="4093760">:=</span>&nbsp;<span class="ident" id="4093763"><a href="/path/path.go.html#4090498">strings</a></span><span class="op" id="4093770">.</span><span class="ident" id="4093771">LastIndex</span><span class="op" id="4093780">(</span><span class="ident" id="4093781"><a href="/path/path.go.html#4093723">path</a></span><span class="op" id="4093785">,</span>&nbsp;<span class="string" id="4093787">&#34;/&#34;</span><span class="op" id="4093790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4093793">return</span>&nbsp;<span class="ident" id="4093800"><a href="/path/path.go.html#4093723">path</a></span><span class="op" id="4093804">[</span><span class="op" id="4093805">:</span><span class="ident" id="4093806"><a href="/path/path.go.html#4093758">i</a></span><span class="op" id="4093807">+</span><span class="num" id="4093808">1</span><span class="op" id="4093809">]</span><span class="op" id="4093810">,</span>&nbsp;<span class="ident" id="4093812"><a href="/path/path.go.html#4093723">path</a></span><span class="op" id="4093816">[</span><span class="ident" id="4093817"><a href="/path/path.go.html#4093758">i</a></span><span class="op" id="4093818">+</span><span class="num" id="4093819">1</span><span class="op" id="4093820">:</span><span class="op" id="4093821">]</span><br>
<span class="lineno">145</span><span class="op" id="4093823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4093826">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4093897">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="4093969">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="4094003">func</span>&nbsp;<span class="ident" id="4094008">Join</span><span class="op" id="4094012">(</span><span class="ident" id="4094013">elem</span>&nbsp;<span class="op" id="4094018">...</span><span class="builtintype" id="4094021">string</span><span class="op" id="4094027">)</span>&nbsp;<span class="builtintype" id="4094029">string</span>&nbsp;<span class="op" id="4094036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094039">for</span>&nbsp;<span class="ident" id="4094043">i</span><span class="op" id="4094044">,</span>&nbsp;<span class="ident" id="4094046">e</span>&nbsp;<span class="op" id="4094048">:=</span>&nbsp;<span class="keyword" id="4094051">range</span>&nbsp;<span class="ident" id="4094057"><a href="/path/path.go.html#4094013">elem</a></span>&nbsp;<span class="op" id="4094062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094066">if</span>&nbsp;<span class="ident" id="4094069"><a href="/path/path.go.html#4094046">e</a></span>&nbsp;<span class="op" id="4094071">!=</span>&nbsp;<span class="string" id="4094074">&#34;&#34;</span>&nbsp;<span class="op" id="4094077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094082">return</span>&nbsp;<span class="ident" id="4094089"><a href="/path/path.go.html#4092052">Clean</a></span><span class="op" id="4094094">(</span><span class="ident" id="4094095"><a href="/path/path.go.html#4090498">strings</a></span><span class="op" id="4094102">.</span><span class="ident" id="4094103">Join</span><span class="op" id="4094107">(</span><span class="ident" id="4094108"><a href="/path/path.go.html#4094013">elem</a></span><span class="op" id="4094112">[</span><span class="ident" id="4094113"><a href="/path/path.go.html#4094043">i</a></span><span class="op" id="4094114">:</span><span class="op" id="4094115">]</span><span class="op" id="4094116">,</span>&nbsp;<span class="string" id="4094118">&#34;/&#34;</span><span class="op" id="4094121">)</span><span class="op" id="4094122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094126">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094132">return</span>&nbsp;<span class="string" id="4094139">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4094142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4094145">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="4094198">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="4094256">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="4094305">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="4094340">func</span>&nbsp;<span class="ident" id="4094345">Ext</span><span class="op" id="4094348">(</span><span class="ident" id="4094349">path</span>&nbsp;<span class="builtintype" id="4094354">string</span><span class="op" id="4094360">)</span>&nbsp;<span class="builtintype" id="4094362">string</span>&nbsp;<span class="op" id="4094369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094372">for</span>&nbsp;<span class="ident" id="4094376">i</span>&nbsp;<span class="op" id="4094378">:=</span>&nbsp;<span class="builtinfunc" id="4094381">len</span><span class="op" id="4094384">(</span><span class="ident" id="4094385"><a href="/path/path.go.html#4094349">path</a></span><span class="op" id="4094389">)</span>&nbsp;<span class="op" id="4094391">-</span>&nbsp;<span class="num" id="4094393">1</span><span class="op" id="4094394">;</span>&nbsp;<span class="ident" id="4094396"><a href="/path/path.go.html#4094376">i</a></span>&nbsp;<span class="op" id="4094398">&gt;=</span>&nbsp;<span class="num" id="4094401">0</span>&nbsp;<span class="op" id="4094403">&amp;&amp;</span>&nbsp;<span class="ident" id="4094406"><a href="/path/path.go.html#4094349">path</a></span><span class="op" id="4094410">[</span><span class="ident" id="4094411"><a href="/path/path.go.html#4094376">i</a></span><span class="op" id="4094412">]</span>&nbsp;<span class="op" id="4094414">!=</span>&nbsp;<span class="string" id="4094417">&#39;/&#39;</span><span class="op" id="4094420">;</span>&nbsp;<span class="ident" id="4094422"><a href="/path/path.go.html#4094376">i</a></span><span class="op" id="4094423">--</span>&nbsp;<span class="op" id="4094426">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094430">if</span>&nbsp;<span class="ident" id="4094433"><a href="/path/path.go.html#4094349">path</a></span><span class="op" id="4094437">[</span><span class="ident" id="4094438"><a href="/path/path.go.html#4094376">i</a></span><span class="op" id="4094439">]</span>&nbsp;<span class="op" id="4094441">==</span>&nbsp;<span class="string" id="4094444">&#39;.&#39;</span>&nbsp;<span class="op" id="4094448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094453">return</span>&nbsp;<span class="ident" id="4094460"><a href="/path/path.go.html#4094349">path</a></span><span class="op" id="4094464">[</span><span class="ident" id="4094465"><a href="/path/path.go.html#4094376">i</a></span><span class="op" id="4094466">:</span><span class="op" id="4094467">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094477">return</span>&nbsp;<span class="string" id="4094484">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="4094487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4094490">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="4094532">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="4094600">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="4094643">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4094706">func</span>&nbsp;<span class="ident" id="4094711">Base</span><span class="op" id="4094715">(</span><span class="ident" id="4094716">path</span>&nbsp;<span class="builtintype" id="4094721">string</span><span class="op" id="4094727">)</span>&nbsp;<span class="builtintype" id="4094729">string</span>&nbsp;<span class="op" id="4094736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094739">if</span>&nbsp;<span class="ident" id="4094742"><a href="/path/path.go.html#4094716">path</a></span>&nbsp;<span class="op" id="4094747">==</span>&nbsp;<span class="string" id="4094750">&#34;&#34;</span>&nbsp;<span class="op" id="4094753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094757">return</span>&nbsp;<span class="string" id="4094764">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094769">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4094772">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094800">for</span>&nbsp;<span class="builtinfunc" id="4094804">len</span><span class="op" id="4094807">(</span><span class="ident" id="4094808"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094812">)</span>&nbsp;<span class="op" id="4094814">&gt;</span>&nbsp;<span class="num" id="4094816">0</span>&nbsp;<span class="op" id="4094818">&amp;&amp;</span>&nbsp;<span class="ident" id="4094821"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094825">[</span><span class="builtinfunc" id="4094826">len</span><span class="op" id="4094829">(</span><span class="ident" id="4094830"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094834">)</span><span class="op" id="4094835">-</span><span class="num" id="4094836">1</span><span class="op" id="4094837">]</span>&nbsp;<span class="op" id="4094839">==</span>&nbsp;<span class="string" id="4094842">&#39;/&#39;</span>&nbsp;<span class="op" id="4094846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094850"><a href="/path/path.go.html#4094716">path</a></span>&nbsp;<span class="op" id="4094855">=</span>&nbsp;<span class="ident" id="4094857"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094861">[</span><span class="num" id="4094862">0</span>&nbsp;<span class="op" id="4094864">:</span>&nbsp;<span class="builtinfunc" id="4094866">len</span><span class="op" id="4094869">(</span><span class="ident" id="4094870"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094874">)</span><span class="op" id="4094875">-</span><span class="num" id="4094876">1</span><span class="op" id="4094877">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4094883">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4094909">if</span>&nbsp;<span class="ident" id="4094912">i</span>&nbsp;<span class="op" id="4094914">:=</span>&nbsp;<span class="ident" id="4094917"><a href="/path/path.go.html#4090498">strings</a></span><span class="op" id="4094924">.</span><span class="ident" id="4094925">LastIndex</span><span class="op" id="4094934">(</span><span class="ident" id="4094935"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094939">,</span>&nbsp;<span class="string" id="4094941">&#34;/&#34;</span><span class="op" id="4094944">)</span><span class="op" id="4094945">;</span>&nbsp;<span class="ident" id="4094947"><a href="/path/path.go.html#4094912">i</a></span>&nbsp;<span class="op" id="4094949">&gt;=</span>&nbsp;<span class="num" id="4094952">0</span>&nbsp;<span class="op" id="4094954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4094958"><a href="/path/path.go.html#4094716">path</a></span>&nbsp;<span class="op" id="4094963">=</span>&nbsp;<span class="ident" id="4094965"><a href="/path/path.go.html#4094716">path</a></span><span class="op" id="4094969">[</span><span class="ident" id="4094970"><a href="/path/path.go.html#4094912">i</a></span><span class="op" id="4094971">+</span><span class="num" id="4094972">1</span><span class="op" id="4094973">:</span><span class="op" id="4094974">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4094977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4094980">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4095019">if</span>&nbsp;<span class="ident" id="4095022"><a href="/path/path.go.html#4094716">path</a></span>&nbsp;<span class="op" id="4095027">==</span>&nbsp;<span class="string" id="4095030">&#34;&#34;</span>&nbsp;<span class="op" id="4095033">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4095037">return</span>&nbsp;<span class="string" id="4095044">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4095049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4095052">return</span>&nbsp;<span class="ident" id="4095059"><a href="/path/path.go.html#4094716">path</a></span><br>
<span class="lineno"></span><span class="op" id="4095064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4095067">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="4095114">func</span>&nbsp;<span class="ident" id="4095119">IsAbs</span><span class="op" id="4095124">(</span><span class="ident" id="4095125">path</span>&nbsp;<span class="builtintype" id="4095130">string</span><span class="op" id="4095136">)</span>&nbsp;<span class="builtintype" id="4095138">bool</span>&nbsp;<span class="op" id="4095143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4095146">return</span>&nbsp;<span class="builtinfunc" id="4095153">len</span><span class="op" id="4095156">(</span><span class="ident" id="4095157"><a href="/path/path.go.html#4095125">path</a></span><span class="op" id="4095161">)</span>&nbsp;<span class="op" id="4095163">&gt;</span>&nbsp;<span class="num" id="4095165">0</span>&nbsp;<span class="op" id="4095167">&amp;&amp;</span>&nbsp;<span class="ident" id="4095170"><a href="/path/path.go.html#4095125">path</a></span><span class="op" id="4095174">[</span><span class="num" id="4095175">0</span><span class="op" id="4095176">]</span>&nbsp;<span class="op" id="4095178">==</span>&nbsp;<span class="string" id="4095181">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="4095185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4095188">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="4095269">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="4095351">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="4095375">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4095417">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="4095494">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4095576">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="4095586">func</span>&nbsp;<span class="ident" id="4095591">Dir</span><span class="op" id="4095594">(</span><span class="ident" id="4095595">path</span>&nbsp;<span class="builtintype" id="4095600">string</span><span class="op" id="4095606">)</span>&nbsp;<span class="builtintype" id="4095608">string</span>&nbsp;<span class="op" id="4095615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4095618">dir</span><span class="op" id="4095621">,</span>&nbsp;<span class="ident" id="4095623">_</span>&nbsp;<span class="op" id="4095625">:=</span>&nbsp;<span class="ident" id="4095628"><a href="/path/path.go.html#4093717">Split</a></span><span class="op" id="4095633">(</span><span class="ident" id="4095634"><a href="/path/path.go.html#4095595">path</a></span><span class="op" id="4095638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4095641">return</span>&nbsp;<span class="ident" id="4095648"><a href="/path/path.go.html#4092052">Clean</a></span><span class="op" id="4095653">(</span><span class="ident" id="4095654"><a href="/path/path.go.html#4095618">dir</a></span><span class="op" id="4095657">)</span><br>
<span class="lineno">210</span><span class="op" id="4095659">}</span>
</div>
</body>
</html>
