<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1483859">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1483915">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1483969">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1484020">package</span>&nbsp;<span class="ident" id="1484028">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1484033">import</span>&nbsp;<span class="op" id="1484040">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1484043">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1484049">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1484055">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="1484065">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1484068">//&nbsp;maxSendfileSize&nbsp;is&nbsp;the&nbsp;largest&nbsp;chunk&nbsp;size&nbsp;we&nbsp;ask&nbsp;the&nbsp;kernel&nbsp;to&nbsp;copy</span><br>
<span class="lineno"></span><span class="comment" id="1484139">//&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">15</span><span class="keyword" id="1484153">const</span>&nbsp;<span class="ident" id="1484159">maxSendfileSize</span>&nbsp;<span class="builtintype" id="1484175">int</span>&nbsp;<span class="op" id="1484179">=</span>&nbsp;<span class="num" id="1484181">4</span>&nbsp;<span class="op" id="1484183">&lt;&lt;</span>&nbsp;<span class="num" id="1484186">20</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1484190">//&nbsp;sendFile&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;r&nbsp;to&nbsp;c&nbsp;using&nbsp;the&nbsp;sendfile</span><br>
<span class="lineno"></span><span class="comment" id="1484251">//&nbsp;system&nbsp;call&nbsp;to&nbsp;minimize&nbsp;copies.</span><br>
<span class="lineno"></span><span class="comment" id="1484286">//</span><br>
<span class="lineno">20</span><span class="comment" id="1484289">//&nbsp;if&nbsp;handled&nbsp;==&nbsp;true,&nbsp;sendFile&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;copied&nbsp;and&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="1484364">//&nbsp;non-EOF&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1484382">//</span><br>
<span class="lineno"></span><span class="comment" id="1484385">//&nbsp;if&nbsp;handled&nbsp;==&nbsp;false,&nbsp;sendFile&nbsp;performed&nbsp;no&nbsp;work.</span><br>
<span class="lineno"></span><span class="keyword" id="1484437">func</span>&nbsp;<span class="ident" id="1484442">sendFile</span><span class="op" id="1484450">(</span><span class="ident" id="1484451">c</span>&nbsp;<span class="op" id="1484453">*</span><span class="ident" id="1484454"><a href="/net/fd_unix.go.html#1388279">netFD</a></span><span class="op" id="1484459">,</span>&nbsp;<span class="ident" id="1484461">r</span>&nbsp;<span class="ident" id="1484463"><a href="/net/sendfile_linux.go.html#1484043">io</a></span><span class="op" id="1484465">.</span><span class="ident" id="1484466">Reader</span><span class="op" id="1484472">)</span>&nbsp;<span class="op" id="1484474">(</span><span class="ident" id="1484475">written</span>&nbsp;<span class="ident" id="1484483">int64</span><span class="op" id="1484488">,</span>&nbsp;<span class="ident" id="1484490">err</span>&nbsp;<span class="builtintype" id="1484494">error</span><span class="op" id="1484499">,</span>&nbsp;<span class="ident" id="1484501">handled</span>&nbsp;<span class="builtintype" id="1484509">bool</span><span class="op" id="1484513">)</span>&nbsp;<span class="op" id="1484515">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484518">var</span>&nbsp;<span class="ident" id="1484522">remain</span>&nbsp;<span class="ident" id="1484529">int64</span>&nbsp;<span class="op" id="1484535">=</span>&nbsp;<span class="num" id="1484537">1</span>&nbsp;<span class="op" id="1484539">&lt;&lt;</span>&nbsp;<span class="num" id="1484542">62</span>&nbsp;<span class="comment" id="1484545">//&nbsp;by&nbsp;default,&nbsp;copy&nbsp;until&nbsp;EOF</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484577">lr</span><span class="op" id="1484579">,</span>&nbsp;<span class="ident" id="1484581">ok</span>&nbsp;<span class="op" id="1484584">:=</span>&nbsp;<span class="ident" id="1484587"><a href="/net/sendfile_linux.go.html#1484461">r</a></span><span class="op" id="1484588">.</span><span class="op" id="1484589">(</span><span class="op" id="1484590">*</span><span class="ident" id="1484591"><a href="/net/sendfile_linux.go.html#1484043">io</a></span><span class="op" id="1484593">.</span><span class="ident" id="1484594">LimitedReader</span><span class="op" id="1484607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484610">if</span>&nbsp;<span class="ident" id="1484613"><a href="/net/sendfile_linux.go.html#1484581">ok</a></span>&nbsp;<span class="op" id="1484616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484620"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span><span class="op" id="1484626">,</span>&nbsp;<span class="ident" id="1484628"><a href="/net/sendfile_linux.go.html#1484461">r</a></span>&nbsp;<span class="op" id="1484630">=</span>&nbsp;<span class="ident" id="1484632"><a href="/net/sendfile_linux.go.html#1484577">lr</a></span><span class="op" id="1484634">.</span><span class="ident" id="1484635">N</span><span class="op" id="1484636">,</span>&nbsp;<span class="ident" id="1484638"><a href="/net/sendfile_linux.go.html#1484577">lr</a></span><span class="op" id="1484640">.</span><span class="ident" id="1484641">R</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484645">if</span>&nbsp;<span class="ident" id="1484648"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span>&nbsp;<span class="op" id="1484655">&lt;=</span>&nbsp;<span class="num" id="1484658">0</span>&nbsp;<span class="op" id="1484660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484665">return</span>&nbsp;<span class="num" id="1484672">0</span><span class="op" id="1484673">,</span>&nbsp;<span class="ident" id="1484675">nil</span><span class="op" id="1484678">,</span>&nbsp;<span class="builtintype" id="1484680">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1484687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1484690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484693">f</span><span class="op" id="1484694">,</span>&nbsp;<span class="ident" id="1484696"><a href="/net/sendfile_linux.go.html#1484581">ok</a></span>&nbsp;<span class="op" id="1484699">:=</span>&nbsp;<span class="ident" id="1484702"><a href="/net/sendfile_linux.go.html#1484461">r</a></span><span class="op" id="1484703">.</span><span class="op" id="1484704">(</span><span class="op" id="1484705">*</span><span class="ident" id="1484706"><a href="/net/sendfile_linux.go.html#1484049">os</a></span><span class="op" id="1484708">.</span><span class="ident" id="1484709">File</span><span class="op" id="1484713">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484716">if</span>&nbsp;<span class="op" id="1484719">!</span><span class="ident" id="1484720"><a href="/net/sendfile_linux.go.html#1484581">ok</a></span>&nbsp;<span class="op" id="1484723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484727">return</span>&nbsp;<span class="num" id="1484734">0</span><span class="op" id="1484735">,</span>&nbsp;<span class="ident" id="1484737">nil</span><span class="op" id="1484740">,</span>&nbsp;<span class="builtintype" id="1484742">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1484749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484753">if</span>&nbsp;<span class="ident" id="1484756">err</span>&nbsp;<span class="op" id="1484760">:=</span>&nbsp;<span class="ident" id="1484763"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1484764">.</span><span class="ident" id="1484765">writeLock</span><span class="op" id="1484774">(</span><span class="op" id="1484775">)</span><span class="op" id="1484776">;</span>&nbsp;<span class="ident" id="1484778"><a href="/net/sendfile_linux.go.html#1484756">err</a></span>&nbsp;<span class="op" id="1484782">!=</span>&nbsp;<span class="ident" id="1484785">nil</span>&nbsp;<span class="op" id="1484789">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484793">return</span>&nbsp;<span class="num" id="1484800">0</span><span class="op" id="1484801">,</span>&nbsp;<span class="ident" id="1484803"><a href="/net/sendfile_linux.go.html#1484756">err</a></span><span class="op" id="1484806">,</span>&nbsp;<span class="builtintype" id="1484808">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1484814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484817">defer</span>&nbsp;<span class="ident" id="1484823"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1484824">.</span><span class="ident" id="1484825">writeUnlock</span><span class="op" id="1484836">(</span><span class="op" id="1484837">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484841">dst</span>&nbsp;<span class="op" id="1484845">:=</span>&nbsp;<span class="ident" id="1484848"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1484849">.</span><span class="ident" id="1484850">sysfd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484857">src</span>&nbsp;<span class="op" id="1484861">:=</span>&nbsp;<span class="builtintype" id="1484864">int</span><span class="op" id="1484867">(</span><span class="ident" id="1484868"><a href="/net/sendfile_linux.go.html#1484693">f</a></span><span class="op" id="1484869">.</span><span class="ident" id="1484870">Fd</span><span class="op" id="1484872">(</span><span class="op" id="1484873">)</span><span class="op" id="1484874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484877">for</span>&nbsp;<span class="ident" id="1484881"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span>&nbsp;<span class="op" id="1484888">&gt;</span>&nbsp;<span class="num" id="1484890">0</span>&nbsp;<span class="op" id="1484892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484896">n</span>&nbsp;<span class="op" id="1484898">:=</span>&nbsp;<span class="ident" id="1484901"><a href="/net/sendfile_linux.go.html#1484159">maxSendfileSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1484919">if</span>&nbsp;<span class="ident" id="1484922">int64</span><span class="op" id="1484927">(</span><span class="ident" id="1484928"><a href="/net/sendfile_linux.go.html#1484896">n</a></span><span class="op" id="1484929">)</span>&nbsp;<span class="op" id="1484931">&gt;</span>&nbsp;<span class="ident" id="1484933"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span>&nbsp;<span class="op" id="1484940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484945"><a href="/net/sendfile_linux.go.html#1484896">n</a></span>&nbsp;<span class="op" id="1484947">=</span>&nbsp;<span class="builtintype" id="1484949">int</span><span class="op" id="1484952">(</span><span class="ident" id="1484953"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span><span class="op" id="1484959">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1484963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1484967"><a href="/net/sendfile_linux.go.html#1484896">n</a></span><span class="op" id="1484968">,</span>&nbsp;<span class="ident" id="1484970">err1</span>&nbsp;<span class="op" id="1484975">:=</span>&nbsp;<span class="ident" id="1484978"><a href="/net/sendfile_linux.go.html#1484055">syscall</a></span><span class="op" id="1484985">.</span><span class="ident" id="1484986">Sendfile</span><span class="op" id="1484994">(</span><span class="ident" id="1484995"><a href="/net/sendfile_linux.go.html#1484841">dst</a></span><span class="op" id="1484998">,</span>&nbsp;<span class="ident" id="1485000"><a href="/net/sendfile_linux.go.html#1484857">src</a></span><span class="op" id="1485003">,</span>&nbsp;<span class="ident" id="1485005">nil</span><span class="op" id="1485008">,</span>&nbsp;<span class="ident" id="1485010"><a href="/net/sendfile_linux.go.html#1484896">n</a></span><span class="op" id="1485011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485015">if</span>&nbsp;<span class="ident" id="1485018"><a href="/net/sendfile_linux.go.html#1484896">n</a></span>&nbsp;<span class="op" id="1485020">&gt;</span>&nbsp;<span class="num" id="1485022">0</span>&nbsp;<span class="op" id="1485024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1485029"><a href="/net/sendfile_linux.go.html#1484475">written</a></span>&nbsp;<span class="op" id="1485037">+=</span>&nbsp;<span class="ident" id="1485040">int64</span><span class="op" id="1485045">(</span><span class="ident" id="1485046"><a href="/net/sendfile_linux.go.html#1484896">n</a></span><span class="op" id="1485047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1485052"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span>&nbsp;<span class="op" id="1485059">-=</span>&nbsp;<span class="ident" id="1485062">int64</span><span class="op" id="1485067">(</span><span class="ident" id="1485068"><a href="/net/sendfile_linux.go.html#1484896">n</a></span><span class="op" id="1485069">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485077">if</span>&nbsp;<span class="ident" id="1485080"><a href="/net/sendfile_linux.go.html#1484896">n</a></span>&nbsp;<span class="op" id="1485082">==</span>&nbsp;<span class="num" id="1485085">0</span>&nbsp;<span class="op" id="1485087">&amp;&amp;</span>&nbsp;<span class="ident" id="1485090"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span>&nbsp;<span class="op" id="1485095">==</span>&nbsp;<span class="ident" id="1485098">nil</span>&nbsp;<span class="op" id="1485102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485107">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485119">if</span>&nbsp;<span class="ident" id="1485122"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span>&nbsp;<span class="op" id="1485127">==</span>&nbsp;<span class="ident" id="1485130"><a href="/net/sendfile_linux.go.html#1484055">syscall</a></span><span class="op" id="1485137">.</span><span class="ident" id="1485138">EAGAIN</span>&nbsp;<span class="op" id="1485145">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485150">if</span>&nbsp;<span class="ident" id="1485153"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span>&nbsp;<span class="op" id="1485158">=</span>&nbsp;<span class="ident" id="1485160"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1485161">.</span><span class="ident" id="1485162">pd</span><span class="op" id="1485164">.</span><span class="ident" id="1485165">WaitWrite</span><span class="op" id="1485174">(</span><span class="op" id="1485175">)</span><span class="op" id="1485176">;</span>&nbsp;<span class="ident" id="1485178"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span>&nbsp;<span class="op" id="1485183">==</span>&nbsp;<span class="ident" id="1485186">nil</span>&nbsp;<span class="op" id="1485190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485196">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485216">if</span>&nbsp;<span class="ident" id="1485219"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span>&nbsp;<span class="op" id="1485224">!=</span>&nbsp;<span class="ident" id="1485227">nil</span>&nbsp;<span class="op" id="1485231">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1485236">//&nbsp;This&nbsp;includes&nbsp;syscall.ENOSYS&nbsp;(no&nbsp;kernel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1485282">//&nbsp;support)&nbsp;and&nbsp;syscall.EINVAL&nbsp;(fd&nbsp;types&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1485332">//&nbsp;don&#39;t&nbsp;implement&nbsp;sendfile&nbsp;together)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1485373"><a href="/net/sendfile_linux.go.html#1484490">err</a></span>&nbsp;<span class="op" id="1485377">=</span>&nbsp;<span class="op" id="1485379">&amp;</span><span class="ident" id="1485380"><a href="/net/net.go.html#1472480">OpError</a></span><span class="op" id="1485387">{</span><span class="string" id="1485388">&#34;sendfile&#34;</span><span class="op" id="1485398">,</span>&nbsp;<span class="ident" id="1485400"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1485401">.</span><span class="ident" id="1485402">net</span><span class="op" id="1485405">,</span>&nbsp;<span class="ident" id="1485407"><a href="/net/sendfile_linux.go.html#1484451">c</a></span><span class="op" id="1485408">.</span><span class="ident" id="1485409">raddr</span><span class="op" id="1485414">,</span>&nbsp;<span class="ident" id="1485416"><a href="/net/sendfile_linux.go.html#1484970">err1</a></span><span class="op" id="1485420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485425">break</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485439">if</span>&nbsp;<span class="ident" id="1485442"><a href="/net/sendfile_linux.go.html#1484577">lr</a></span>&nbsp;<span class="op" id="1485445">!=</span>&nbsp;<span class="ident" id="1485448">nil</span>&nbsp;<span class="op" id="1485452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1485456"><a href="/net/sendfile_linux.go.html#1484577">lr</a></span><span class="op" id="1485458">.</span><span class="ident" id="1485459">N</span>&nbsp;<span class="op" id="1485461">=</span>&nbsp;<span class="ident" id="1485463"><a href="/net/sendfile_linux.go.html#1484522">remain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1485471">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1485474">return</span>&nbsp;<span class="ident" id="1485481"><a href="/net/sendfile_linux.go.html#1484475">written</a></span><span class="op" id="1485488">,</span>&nbsp;<span class="ident" id="1485490"><a href="/net/sendfile_linux.go.html#1484490">err</a></span><span class="op" id="1485493">,</span>&nbsp;<span class="ident" id="1485495"><a href="/net/sendfile_linux.go.html#1484475">written</a></span>&nbsp;<span class="op" id="1485503">&gt;</span>&nbsp;<span class="num" id="1485505">0</span><br>
<span class="lineno"></span><span class="op" id="1485507">}</span>
</div>
</body>
</html>
