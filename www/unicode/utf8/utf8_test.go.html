<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1318603">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1318658">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1318712">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1318763">package</span>&nbsp;<span class="ident" id="1318771">utf8_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1318782">import</span>&nbsp;<span class="op" id="1318789">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1318792">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1318801">&#34;testing&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1318812">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1318823">.</span>&nbsp;<span class="string" id="1318825">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1318840">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1318843">//&nbsp;Validate&nbsp;the&nbsp;constants&nbsp;redefined&nbsp;from&nbsp;unicode.</span><br>
<span class="lineno">15</span><span class="keyword" id="1318893">func</span>&nbsp;<span class="ident" id="1318898">init</span><span class="op" id="1318902">(</span><span class="op" id="1318903">)</span>&nbsp;<span class="op" id="1318905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1318908">if</span>&nbsp;<span class="ident" id="1318911"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span>&nbsp;<span class="op" id="1318919">!=</span>&nbsp;<span class="ident" id="1318922"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1318929">.</span><span class="ident" id="1318930">MaxRune</span>&nbsp;<span class="op" id="1318938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1318942">panic</span><span class="op" id="1318947">(</span><span class="string" id="1318948">&#34;utf8.MaxRune&nbsp;is&nbsp;wrong&#34;</span><span class="op" id="1318971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1318974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1318977">if</span>&nbsp;<span class="ident" id="1318980"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1318990">!=</span>&nbsp;<span class="ident" id="1318993"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1319000">.</span><span class="ident" id="1319001">ReplacementChar</span>&nbsp;<span class="op" id="1319017">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1319021">panic</span><span class="op" id="1319026">(</span><span class="string" id="1319027">&#34;utf8.RuneError&nbsp;is&nbsp;wrong&#34;</span><span class="op" id="1319052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319055">}</span><br>
<span class="lineno"></span><span class="op" id="1319057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1319060">//&nbsp;Validate&nbsp;the&nbsp;constants&nbsp;redefined&nbsp;from&nbsp;unicode.</span><br>
<span class="lineno">25</span><span class="keyword" id="1319110">func</span>&nbsp;<span class="ident" id="1319115">TestConstants</span><span class="op" id="1319128">(</span><span class="ident" id="1319129">t</span>&nbsp;<span class="op" id="1319131">*</span><span class="ident" id="1319132"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1319139">.</span><span class="ident" id="1319140">T</span><span class="op" id="1319141">)</span>&nbsp;<span class="op" id="1319143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1319146">if</span>&nbsp;<span class="ident" id="1319149"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span>&nbsp;<span class="op" id="1319157">!=</span>&nbsp;<span class="ident" id="1319160"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1319167">.</span><span class="ident" id="1319168">MaxRune</span>&nbsp;<span class="op" id="1319176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1319180"><a href="/unicode/utf8/utf8_test.go.html#1319129">t</a></span><span class="op" id="1319181">.</span><span class="ident" id="1319182">Errorf</span><span class="op" id="1319188">(</span><span class="string" id="1319189">&#34;utf8.MaxRune&nbsp;is&nbsp;wrong:&nbsp;%x&nbsp;should&nbsp;be&nbsp;%x&#34;</span><span class="op" id="1319229">,</span>&nbsp;<span class="ident" id="1319231"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span><span class="op" id="1319238">,</span>&nbsp;<span class="ident" id="1319240"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1319247">.</span><span class="ident" id="1319248">MaxRune</span><span class="op" id="1319255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1319261">if</span>&nbsp;<span class="ident" id="1319264"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1319274">!=</span>&nbsp;<span class="ident" id="1319277"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1319284">.</span><span class="ident" id="1319285">ReplacementChar</span>&nbsp;<span class="op" id="1319301">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1319305"><a href="/unicode/utf8/utf8_test.go.html#1319129">t</a></span><span class="op" id="1319306">.</span><span class="ident" id="1319307">Errorf</span><span class="op" id="1319313">(</span><span class="string" id="1319314">&#34;utf8.RuneError&nbsp;is&nbsp;wrong:&nbsp;%x&nbsp;should&nbsp;be&nbsp;%x&#34;</span><span class="op" id="1319356">,</span>&nbsp;<span class="ident" id="1319358"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1319367">,</span>&nbsp;<span class="ident" id="1319369"><a href="/unicode/utf8/utf8_test.go.html#1318812">unicode</a></span><span class="op" id="1319376">.</span><span class="ident" id="1319377">ReplacementChar</span><span class="op" id="1319392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319395">}</span><br>
<span class="lineno"></span><span class="op" id="1319397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1319400">type</span>&nbsp;<span class="ident" id="1319405">Utf8Map</span>&nbsp;<span class="keyword" id="1319413">struct</span>&nbsp;<span class="op" id="1319420">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1319423">r</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1319427">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1319433">str</span>&nbsp;<span class="builtintype" id="1319437">string</span><br>
<span class="lineno"></span><span class="op" id="1319444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1319447">var</span>&nbsp;<span class="ident" id="1319451">utf8map</span>&nbsp;<span class="op" id="1319459">=</span>&nbsp;<span class="op" id="1319461">[</span><span class="op" id="1319462">]</span><span class="ident" id="1319463"><a href="/unicode/utf8/utf8_test.go.html#1319405">Utf8Map</a></span><span class="op" id="1319470">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319473">{</span><span class="num" id="1319474">0x0000</span><span class="op" id="1319480">,</span>&nbsp;<span class="string" id="1319482">&#34;\x00&#34;</span><span class="op" id="1319488">}</span><span class="op" id="1319489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319492">{</span><span class="num" id="1319493">0x0001</span><span class="op" id="1319499">,</span>&nbsp;<span class="string" id="1319501">&#34;\x01&#34;</span><span class="op" id="1319507">}</span><span class="op" id="1319508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319511">{</span><span class="num" id="1319512">0x007e</span><span class="op" id="1319518">,</span>&nbsp;<span class="string" id="1319520">&#34;\x7e&#34;</span><span class="op" id="1319526">}</span><span class="op" id="1319527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319530">{</span><span class="num" id="1319531">0x007f</span><span class="op" id="1319537">,</span>&nbsp;<span class="string" id="1319539">&#34;\x7f&#34;</span><span class="op" id="1319545">}</span><span class="op" id="1319546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319549">{</span><span class="num" id="1319550">0x0080</span><span class="op" id="1319556">,</span>&nbsp;<span class="string" id="1319558">&#34;\xc2\x80&#34;</span><span class="op" id="1319568">}</span><span class="op" id="1319569">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319572">{</span><span class="num" id="1319573">0x0081</span><span class="op" id="1319579">,</span>&nbsp;<span class="string" id="1319581">&#34;\xc2\x81&#34;</span><span class="op" id="1319591">}</span><span class="op" id="1319592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319595">{</span><span class="num" id="1319596">0x00bf</span><span class="op" id="1319602">,</span>&nbsp;<span class="string" id="1319604">&#34;\xc2\xbf&#34;</span><span class="op" id="1319614">}</span><span class="op" id="1319615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319618">{</span><span class="num" id="1319619">0x00c0</span><span class="op" id="1319625">,</span>&nbsp;<span class="string" id="1319627">&#34;\xc3\x80&#34;</span><span class="op" id="1319637">}</span><span class="op" id="1319638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319641">{</span><span class="num" id="1319642">0x00c1</span><span class="op" id="1319648">,</span>&nbsp;<span class="string" id="1319650">&#34;\xc3\x81&#34;</span><span class="op" id="1319660">}</span><span class="op" id="1319661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319664">{</span><span class="num" id="1319665">0x00c8</span><span class="op" id="1319671">,</span>&nbsp;<span class="string" id="1319673">&#34;\xc3\x88&#34;</span><span class="op" id="1319683">}</span><span class="op" id="1319684">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319687">{</span><span class="num" id="1319688">0x00d0</span><span class="op" id="1319694">,</span>&nbsp;<span class="string" id="1319696">&#34;\xc3\x90&#34;</span><span class="op" id="1319706">}</span><span class="op" id="1319707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319710">{</span><span class="num" id="1319711">0x00e0</span><span class="op" id="1319717">,</span>&nbsp;<span class="string" id="1319719">&#34;\xc3\xa0&#34;</span><span class="op" id="1319729">}</span><span class="op" id="1319730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319733">{</span><span class="num" id="1319734">0x00f0</span><span class="op" id="1319740">,</span>&nbsp;<span class="string" id="1319742">&#34;\xc3\xb0&#34;</span><span class="op" id="1319752">}</span><span class="op" id="1319753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319756">{</span><span class="num" id="1319757">0x00f8</span><span class="op" id="1319763">,</span>&nbsp;<span class="string" id="1319765">&#34;\xc3\xb8&#34;</span><span class="op" id="1319775">}</span><span class="op" id="1319776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319779">{</span><span class="num" id="1319780">0x00ff</span><span class="op" id="1319786">,</span>&nbsp;<span class="string" id="1319788">&#34;\xc3\xbf&#34;</span><span class="op" id="1319798">}</span><span class="op" id="1319799">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319802">{</span><span class="num" id="1319803">0x0100</span><span class="op" id="1319809">,</span>&nbsp;<span class="string" id="1319811">&#34;\xc4\x80&#34;</span><span class="op" id="1319821">}</span><span class="op" id="1319822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319825">{</span><span class="num" id="1319826">0x07ff</span><span class="op" id="1319832">,</span>&nbsp;<span class="string" id="1319834">&#34;\xdf\xbf&#34;</span><span class="op" id="1319844">}</span><span class="op" id="1319845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319848">{</span><span class="num" id="1319849">0x0800</span><span class="op" id="1319855">,</span>&nbsp;<span class="string" id="1319857">&#34;\xe0\xa0\x80&#34;</span><span class="op" id="1319871">}</span><span class="op" id="1319872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319875">{</span><span class="num" id="1319876">0x0801</span><span class="op" id="1319882">,</span>&nbsp;<span class="string" id="1319884">&#34;\xe0\xa0\x81&#34;</span><span class="op" id="1319898">}</span><span class="op" id="1319899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319902">{</span><span class="num" id="1319903">0xd7ff</span><span class="op" id="1319909">,</span>&nbsp;<span class="string" id="1319911">&#34;\xed\x9f\xbf&#34;</span><span class="op" id="1319925">}</span><span class="op" id="1319926">,</span>&nbsp;<span class="comment" id="1319928">//&nbsp;last&nbsp;code&nbsp;point&nbsp;before&nbsp;surrogate&nbsp;half.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1319971">{</span><span class="num" id="1319972">0xe000</span><span class="op" id="1319978">,</span>&nbsp;<span class="string" id="1319980">&#34;\xee\x80\x80&#34;</span><span class="op" id="1319994">}</span><span class="op" id="1319995">,</span>&nbsp;<span class="comment" id="1319997">//&nbsp;first&nbsp;code&nbsp;point&nbsp;after&nbsp;surrogate&nbsp;half.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320040">{</span><span class="num" id="1320041">0xfffe</span><span class="op" id="1320047">,</span>&nbsp;<span class="string" id="1320049">&#34;\xef\xbf\xbe&#34;</span><span class="op" id="1320063">}</span><span class="op" id="1320064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320067">{</span><span class="num" id="1320068">0xffff</span><span class="op" id="1320074">,</span>&nbsp;<span class="string" id="1320076">&#34;\xef\xbf\xbf&#34;</span><span class="op" id="1320090">}</span><span class="op" id="1320091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320094">{</span><span class="num" id="1320095">0x10000</span><span class="op" id="1320102">,</span>&nbsp;<span class="string" id="1320104">&#34;\xf0\x90\x80\x80&#34;</span><span class="op" id="1320122">}</span><span class="op" id="1320123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320126">{</span><span class="num" id="1320127">0x10001</span><span class="op" id="1320134">,</span>&nbsp;<span class="string" id="1320136">&#34;\xf0\x90\x80\x81&#34;</span><span class="op" id="1320154">}</span><span class="op" id="1320155">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320158">{</span><span class="num" id="1320159">0x10fffe</span><span class="op" id="1320167">,</span>&nbsp;<span class="string" id="1320169">&#34;\xf4\x8f\xbf\xbe&#34;</span><span class="op" id="1320187">}</span><span class="op" id="1320188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320191">{</span><span class="num" id="1320192">0x10ffff</span><span class="op" id="1320200">,</span>&nbsp;<span class="string" id="1320202">&#34;\xf4\x8f\xbf\xbf&#34;</span><span class="op" id="1320220">}</span><span class="op" id="1320221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320224">{</span><span class="num" id="1320225">0xFFFD</span><span class="op" id="1320231">,</span>&nbsp;<span class="string" id="1320233">&#34;\xef\xbf\xbd&#34;</span><span class="op" id="1320247">}</span><span class="op" id="1320248">,</span><br>
<span class="lineno"></span><span class="op" id="1320250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="1320253">var</span>&nbsp;<span class="ident" id="1320257">surrogateMap</span>&nbsp;<span class="op" id="1320270">=</span>&nbsp;<span class="op" id="1320272">[</span><span class="op" id="1320273">]</span><span class="ident" id="1320274"><a href="/unicode/utf8/utf8_test.go.html#1319405">Utf8Map</a></span><span class="op" id="1320281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320284">{</span><span class="num" id="1320285">0xd800</span><span class="op" id="1320291">,</span>&nbsp;<span class="string" id="1320293">&#34;\xed\xa0\x80&#34;</span><span class="op" id="1320307">}</span><span class="op" id="1320308">,</span>&nbsp;<span class="comment" id="1320310">//&nbsp;surrogate&nbsp;min&nbsp;decodes&nbsp;to&nbsp;(RuneError,&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320354">{</span><span class="num" id="1320355">0xdfff</span><span class="op" id="1320361">,</span>&nbsp;<span class="string" id="1320363">&#34;\xed\xbf\xbf&#34;</span><span class="op" id="1320377">}</span><span class="op" id="1320378">,</span>&nbsp;<span class="comment" id="1320380">//&nbsp;surrogate&nbsp;max&nbsp;decodes&nbsp;to&nbsp;(RuneError,&nbsp;1)</span><br>
<span class="lineno"></span><span class="op" id="1320423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="1320426">var</span>&nbsp;<span class="ident" id="1320430">testStrings</span>&nbsp;<span class="op" id="1320442">=</span>&nbsp;<span class="op" id="1320444">[</span><span class="op" id="1320445">]</span><span class="builtintype" id="1320446">string</span><span class="op" id="1320452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320455">&#34;&#34;</span><span class="op" id="1320457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320460">&#34;abcd&#34;</span><span class="op" id="1320466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320469">&#34;☺☻☹&#34;</span><span class="op" id="1320480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320483">&#34;日a本b語ç日ð本Ê語þ日¥本¼語i日©&#34;</span><span class="op" id="1320532">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320535">&#34;日a本b語ç日ð本Ê語þ日¥本¼語i日©日a本b語ç日ð本Ê語þ日¥本¼語i日©日a本b語ç日ð本Ê語þ日¥本¼語i日©&#34;</span><span class="op" id="1320678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1320681">&#34;\x80\x80\x80\x80&#34;</span><span class="op" id="1320699">,</span><br>
<span class="lineno"></span><span class="op" id="1320701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1320704">func</span>&nbsp;<span class="ident" id="1320709">TestFullRune</span><span class="op" id="1320721">(</span><span class="ident" id="1320722">t</span>&nbsp;<span class="op" id="1320724">*</span><span class="ident" id="1320725"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1320732">.</span><span class="ident" id="1320733">T</span><span class="op" id="1320734">)</span>&nbsp;<span class="op" id="1320736">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1320739">for</span>&nbsp;<span class="ident" id="1320743">_</span><span class="op" id="1320744">,</span>&nbsp;<span class="ident" id="1320746">m</span>&nbsp;<span class="op" id="1320748">:=</span>&nbsp;<span class="keyword" id="1320751">range</span>&nbsp;<span class="ident" id="1320757"><a href="/unicode/utf8/utf8_test.go.html#1319451">utf8map</a></span>&nbsp;<span class="op" id="1320765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1320769">b</span>&nbsp;<span class="op" id="1320771">:=</span>&nbsp;<span class="op" id="1320774">[</span><span class="op" id="1320775">]</span><span class="builtintype" id="1320776">byte</span><span class="op" id="1320780">(</span><span class="ident" id="1320781"><a href="/unicode/utf8/utf8_test.go.html#1320746">m</a></span><span class="op" id="1320782">.</span><span class="ident" id="1320783">str</span><span class="op" id="1320786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1320790">if</span>&nbsp;<span class="op" id="1320793">!</span><span class="ident" id="1320794"><a href="/unicode/utf8/utf8.go.html#1642314">FullRune</a></span><span class="op" id="1320802">(</span><span class="ident" id="1320803"><a href="/unicode/utf8/utf8_test.go.html#1320769">b</a></span><span class="op" id="1320804">)</span>&nbsp;<span class="op" id="1320806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1320811"><a href="/unicode/utf8/utf8_test.go.html#1320722">t</a></span><span class="op" id="1320812">.</span><span class="ident" id="1320813">Errorf</span><span class="op" id="1320819">(</span><span class="string" id="1320820">&#34;FullRune(%q)&nbsp;(%U)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="1320858">,</span>&nbsp;<span class="ident" id="1320860"><a href="/unicode/utf8/utf8_test.go.html#1320769">b</a></span><span class="op" id="1320861">,</span>&nbsp;<span class="ident" id="1320863"><a href="/unicode/utf8/utf8_test.go.html#1320746">m</a></span><span class="op" id="1320864">.</span><span class="ident" id="1320865">r</span><span class="op" id="1320866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320870">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1320874">s</span>&nbsp;<span class="op" id="1320876">:=</span>&nbsp;<span class="ident" id="1320879"><a href="/unicode/utf8/utf8_test.go.html#1320746">m</a></span><span class="op" id="1320880">.</span><span class="ident" id="1320881">str</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1320887">if</span>&nbsp;<span class="op" id="1320890">!</span><span class="ident" id="1320891"><a href="/unicode/utf8/utf8.go.html#1642465">FullRuneInString</a></span><span class="op" id="1320907">(</span><span class="ident" id="1320908"><a href="/unicode/utf8/utf8_test.go.html#1320874">s</a></span><span class="op" id="1320909">)</span>&nbsp;<span class="op" id="1320911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1320916"><a href="/unicode/utf8/utf8_test.go.html#1320722">t</a></span><span class="op" id="1320917">.</span><span class="ident" id="1320918">Errorf</span><span class="op" id="1320924">(</span><span class="string" id="1320925">&#34;FullRuneInString(%q)&nbsp;(%U)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="1320971">,</span>&nbsp;<span class="ident" id="1320973"><a href="/unicode/utf8/utf8_test.go.html#1320874">s</a></span><span class="op" id="1320974">,</span>&nbsp;<span class="ident" id="1320976"><a href="/unicode/utf8/utf8_test.go.html#1320746">m</a></span><span class="op" id="1320977">.</span><span class="ident" id="1320978">r</span><span class="op" id="1320979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1320983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1320987">b1</span>&nbsp;<span class="op" id="1320990">:=</span>&nbsp;<span class="ident" id="1320993"><a href="/unicode/utf8/utf8_test.go.html#1320769">b</a></span><span class="op" id="1320994">[</span><span class="num" id="1320995">0</span>&nbsp;<span class="op" id="1320997">:</span>&nbsp;<span class="builtinfunc" id="1320999">len</span><span class="op" id="1321002">(</span><span class="ident" id="1321003"><a href="/unicode/utf8/utf8_test.go.html#1320769">b</a></span><span class="op" id="1321004">)</span><span class="op" id="1321005">-</span><span class="num" id="1321006">1</span><span class="op" id="1321007">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321011">if</span>&nbsp;<span class="ident" id="1321014"><a href="/unicode/utf8/utf8.go.html#1642314">FullRune</a></span><span class="op" id="1321022">(</span><span class="ident" id="1321023"><a href="/unicode/utf8/utf8_test.go.html#1320987">b1</a></span><span class="op" id="1321025">)</span>&nbsp;<span class="op" id="1321027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321032"><a href="/unicode/utf8/utf8_test.go.html#1320722">t</a></span><span class="op" id="1321033">.</span><span class="ident" id="1321034">Errorf</span><span class="op" id="1321040">(</span><span class="string" id="1321041">&#34;FullRune(%q)&nbsp;=&nbsp;true,&nbsp;want&nbsp;false&#34;</span><span class="op" id="1321074">,</span>&nbsp;<span class="ident" id="1321076"><a href="/unicode/utf8/utf8_test.go.html#1320987">b1</a></span><span class="op" id="1321078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321086">s1</span>&nbsp;<span class="op" id="1321089">:=</span>&nbsp;<span class="builtintype" id="1321092">string</span><span class="op" id="1321098">(</span><span class="ident" id="1321099"><a href="/unicode/utf8/utf8_test.go.html#1320987">b1</a></span><span class="op" id="1321101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321105">if</span>&nbsp;<span class="ident" id="1321108"><a href="/unicode/utf8/utf8.go.html#1642465">FullRuneInString</a></span><span class="op" id="1321124">(</span><span class="ident" id="1321125"><a href="/unicode/utf8/utf8_test.go.html#1321086">s1</a></span><span class="op" id="1321127">)</span>&nbsp;<span class="op" id="1321129">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321134"><a href="/unicode/utf8/utf8_test.go.html#1320722">t</a></span><span class="op" id="1321135">.</span><span class="ident" id="1321136">Errorf</span><span class="op" id="1321142">(</span><span class="string" id="1321143">&#34;FullRune(%q)&nbsp;=&nbsp;true,&nbsp;want&nbsp;false&#34;</span><span class="op" id="1321176">,</span>&nbsp;<span class="ident" id="1321178"><a href="/unicode/utf8/utf8_test.go.html#1321086">s1</a></span><span class="op" id="1321180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321187">}</span><br>
<span class="lineno"></span><span class="op" id="1321189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="1321192">func</span>&nbsp;<span class="ident" id="1321197">TestEncodeRune</span><span class="op" id="1321211">(</span><span class="ident" id="1321212">t</span>&nbsp;<span class="op" id="1321214">*</span><span class="ident" id="1321215"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1321222">.</span><span class="ident" id="1321223">T</span><span class="op" id="1321224">)</span>&nbsp;<span class="op" id="1321226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321229">for</span>&nbsp;<span class="ident" id="1321233">_</span><span class="op" id="1321234">,</span>&nbsp;<span class="ident" id="1321236">m</span>&nbsp;<span class="op" id="1321238">:=</span>&nbsp;<span class="keyword" id="1321241">range</span>&nbsp;<span class="ident" id="1321247"><a href="/unicode/utf8/utf8_test.go.html#1319451">utf8map</a></span>&nbsp;<span class="op" id="1321255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321259">b</span>&nbsp;<span class="op" id="1321261">:=</span>&nbsp;<span class="op" id="1321264">[</span><span class="op" id="1321265">]</span><span class="builtintype" id="1321266">byte</span><span class="op" id="1321270">(</span><span class="ident" id="1321271"><a href="/unicode/utf8/utf8_test.go.html#1321236">m</a></span><span class="op" id="1321272">.</span><span class="ident" id="1321273">str</span><span class="op" id="1321276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321280">var</span>&nbsp;<span class="ident" id="1321284">buf</span>&nbsp;<span class="op" id="1321288">[</span><span class="num" id="1321289">10</span><span class="op" id="1321291">]</span><span class="builtintype" id="1321292">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321299">n</span>&nbsp;<span class="op" id="1321301">:=</span>&nbsp;<span class="ident" id="1321304"><a href="/unicode/utf8/utf8.go.html#1646217">EncodeRune</a></span><span class="op" id="1321314">(</span><span class="ident" id="1321315"><a href="/unicode/utf8/utf8_test.go.html#1321284">buf</a></span><span class="op" id="1321318">[</span><span class="num" id="1321319">0</span><span class="op" id="1321320">:</span><span class="op" id="1321321">]</span><span class="op" id="1321322">,</span>&nbsp;<span class="ident" id="1321324"><a href="/unicode/utf8/utf8_test.go.html#1321236">m</a></span><span class="op" id="1321325">.</span><span class="ident" id="1321326">r</span><span class="op" id="1321327">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321331">b1</span>&nbsp;<span class="op" id="1321334">:=</span>&nbsp;<span class="ident" id="1321337"><a href="/unicode/utf8/utf8_test.go.html#1321284">buf</a></span><span class="op" id="1321340">[</span><span class="num" id="1321341">0</span><span class="op" id="1321342">:</span><span class="ident" id="1321343"><a href="/unicode/utf8/utf8_test.go.html#1321299">n</a></span><span class="op" id="1321344">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321348">if</span>&nbsp;<span class="op" id="1321351">!</span><span class="ident" id="1321352"><a href="/unicode/utf8/utf8_test.go.html#1318792">bytes</a></span><span class="op" id="1321357">.</span><span class="ident" id="1321358">Equal</span><span class="op" id="1321363">(</span><span class="ident" id="1321364"><a href="/unicode/utf8/utf8_test.go.html#1321259">b</a></span><span class="op" id="1321365">,</span>&nbsp;<span class="ident" id="1321367"><a href="/unicode/utf8/utf8_test.go.html#1321331">b1</a></span><span class="op" id="1321369">)</span>&nbsp;<span class="op" id="1321371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321376"><a href="/unicode/utf8/utf8_test.go.html#1321212">t</a></span><span class="op" id="1321377">.</span><span class="ident" id="1321378">Errorf</span><span class="op" id="1321384">(</span><span class="string" id="1321385">&#34;EncodeRune(%#04x)&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="1321417">,</span>&nbsp;<span class="ident" id="1321419"><a href="/unicode/utf8/utf8_test.go.html#1321236">m</a></span><span class="op" id="1321420">.</span><span class="ident" id="1321421">r</span><span class="op" id="1321422">,</span>&nbsp;<span class="ident" id="1321424"><a href="/unicode/utf8/utf8_test.go.html#1321331">b1</a></span><span class="op" id="1321426">,</span>&nbsp;<span class="ident" id="1321428"><a href="/unicode/utf8/utf8_test.go.html#1321259">b</a></span><span class="op" id="1321429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321436">}</span><br>
<span class="lineno">115</span><span class="op" id="1321438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1321441">func</span>&nbsp;<span class="ident" id="1321446">TestDecodeRune</span><span class="op" id="1321460">(</span><span class="ident" id="1321461">t</span>&nbsp;<span class="op" id="1321463">*</span><span class="ident" id="1321464"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1321471">.</span><span class="ident" id="1321472">T</span><span class="op" id="1321473">)</span>&nbsp;<span class="op" id="1321475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321478">for</span>&nbsp;<span class="ident" id="1321482">_</span><span class="op" id="1321483">,</span>&nbsp;<span class="ident" id="1321485">m</span>&nbsp;<span class="op" id="1321487">:=</span>&nbsp;<span class="keyword" id="1321490">range</span>&nbsp;<span class="ident" id="1321496"><a href="/unicode/utf8/utf8_test.go.html#1319451">utf8map</a></span>&nbsp;<span class="op" id="1321504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321508">b</span>&nbsp;<span class="op" id="1321510">:=</span>&nbsp;<span class="op" id="1321513">[</span><span class="op" id="1321514">]</span><span class="builtintype" id="1321515">byte</span><span class="op" id="1321519">(</span><span class="ident" id="1321520"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321521">.</span><span class="ident" id="1321522">str</span><span class="op" id="1321525">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321529">r</span><span class="op" id="1321530">,</span>&nbsp;<span class="ident" id="1321532">size</span>&nbsp;<span class="op" id="1321537">:=</span>&nbsp;<span class="ident" id="1321540"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1321550">(</span><span class="ident" id="1321551"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321556">if</span>&nbsp;<span class="ident" id="1321559"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1321561">!=</span>&nbsp;<span class="ident" id="1321564"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321565">.</span><span class="ident" id="1321566">r</span>&nbsp;<span class="op" id="1321568">||</span>&nbsp;<span class="ident" id="1321571"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1321576">!=</span>&nbsp;<span class="builtinfunc" id="1321579">len</span><span class="op" id="1321582">(</span><span class="ident" id="1321583"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321584">)</span>&nbsp;<span class="op" id="1321586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321591"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1321592">.</span><span class="ident" id="1321593">Errorf</span><span class="op" id="1321599">(</span><span class="string" id="1321600">&#34;DecodeRune(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1321643">,</span>&nbsp;<span class="ident" id="1321645"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321646">,</span>&nbsp;<span class="ident" id="1321648"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1321649">,</span>&nbsp;<span class="ident" id="1321651"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1321655">,</span>&nbsp;<span class="ident" id="1321657"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321658">.</span><span class="ident" id="1321659">r</span><span class="op" id="1321660">,</span>&nbsp;<span class="builtinfunc" id="1321662">len</span><span class="op" id="1321665">(</span><span class="ident" id="1321666"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321667">)</span><span class="op" id="1321668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321676">s</span>&nbsp;<span class="op" id="1321678">:=</span>&nbsp;<span class="ident" id="1321681"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321682">.</span><span class="ident" id="1321683">str</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321689"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1321690">,</span>&nbsp;<span class="ident" id="1321692"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1321697">=</span>&nbsp;<span class="ident" id="1321699"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1321717">(</span><span class="ident" id="1321718"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1321719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321723">if</span>&nbsp;<span class="ident" id="1321726"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1321728">!=</span>&nbsp;<span class="ident" id="1321731"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321732">.</span><span class="ident" id="1321733">r</span>&nbsp;<span class="op" id="1321735">||</span>&nbsp;<span class="ident" id="1321738"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1321743">!=</span>&nbsp;<span class="builtinfunc" id="1321746">len</span><span class="op" id="1321749">(</span><span class="ident" id="1321750"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321751">)</span>&nbsp;<span class="op" id="1321753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321758"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1321759">.</span><span class="ident" id="1321760">Errorf</span><span class="op" id="1321766">(</span><span class="string" id="1321767">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1321818">,</span>&nbsp;<span class="ident" id="1321820"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1321821">,</span>&nbsp;<span class="ident" id="1321823"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1321824">,</span>&nbsp;<span class="ident" id="1321826"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1321830">,</span>&nbsp;<span class="ident" id="1321832"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321833">.</span><span class="ident" id="1321834">r</span><span class="op" id="1321835">,</span>&nbsp;<span class="builtinfunc" id="1321837">len</span><span class="op" id="1321840">(</span><span class="ident" id="1321841"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321842">)</span><span class="op" id="1321843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1321847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1321852">//&nbsp;there&#39;s&nbsp;an&nbsp;extra&nbsp;byte&nbsp;that&nbsp;bytes&nbsp;left&nbsp;behind&nbsp;-&nbsp;make&nbsp;sure&nbsp;trailing&nbsp;byte&nbsp;works</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1321934"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1321935">,</span>&nbsp;<span class="ident" id="1321937"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1321942">=</span>&nbsp;<span class="ident" id="1321944"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1321954">(</span><span class="ident" id="1321955"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321956">[</span><span class="num" id="1321957">0</span><span class="op" id="1321958">:</span><span class="builtinfunc" id="1321959">cap</span><span class="op" id="1321962">(</span><span class="ident" id="1321963"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321964">)</span><span class="op" id="1321965">]</span><span class="op" id="1321966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1321970">if</span>&nbsp;<span class="ident" id="1321973"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1321975">!=</span>&nbsp;<span class="ident" id="1321978"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1321979">.</span><span class="ident" id="1321980">r</span>&nbsp;<span class="op" id="1321982">||</span>&nbsp;<span class="ident" id="1321985"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1321990">!=</span>&nbsp;<span class="builtinfunc" id="1321993">len</span><span class="op" id="1321996">(</span><span class="ident" id="1321997"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1321998">)</span>&nbsp;<span class="op" id="1322000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322005"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1322006">.</span><span class="ident" id="1322007">Errorf</span><span class="op" id="1322013">(</span><span class="string" id="1322014">&#34;DecodeRune(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1322057">,</span>&nbsp;<span class="ident" id="1322059"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322060">,</span>&nbsp;<span class="ident" id="1322062"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322063">,</span>&nbsp;<span class="ident" id="1322065"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1322069">,</span>&nbsp;<span class="ident" id="1322071"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322072">.</span><span class="ident" id="1322073">r</span><span class="op" id="1322074">,</span>&nbsp;<span class="builtinfunc" id="1322076">len</span><span class="op" id="1322079">(</span><span class="ident" id="1322080"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322081">)</span><span class="op" id="1322082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322086">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322090"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span>&nbsp;<span class="op" id="1322092">=</span>&nbsp;<span class="ident" id="1322094"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322095">.</span><span class="ident" id="1322096">str</span>&nbsp;<span class="op" id="1322100">+</span>&nbsp;<span class="string" id="1322102">&#34;\x00&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322111"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322112">,</span>&nbsp;<span class="ident" id="1322114"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322119">=</span>&nbsp;<span class="ident" id="1322121"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1322139">(</span><span class="ident" id="1322140"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1322141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322145">if</span>&nbsp;<span class="ident" id="1322148"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1322150">!=</span>&nbsp;<span class="ident" id="1322153"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322154">.</span><span class="ident" id="1322155">r</span>&nbsp;<span class="op" id="1322157">||</span>&nbsp;<span class="ident" id="1322160"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322165">!=</span>&nbsp;<span class="builtinfunc" id="1322168">len</span><span class="op" id="1322171">(</span><span class="ident" id="1322172"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322173">)</span>&nbsp;<span class="op" id="1322175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322180"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1322181">.</span><span class="ident" id="1322182">Errorf</span><span class="op" id="1322188">(</span><span class="string" id="1322189">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1322240">,</span>&nbsp;<span class="ident" id="1322242"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1322243">,</span>&nbsp;<span class="ident" id="1322245"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322246">,</span>&nbsp;<span class="ident" id="1322248"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1322252">,</span>&nbsp;<span class="ident" id="1322254"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322255">.</span><span class="ident" id="1322256">r</span><span class="op" id="1322257">,</span>&nbsp;<span class="builtinfunc" id="1322259">len</span><span class="op" id="1322262">(</span><span class="ident" id="1322263"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322264">)</span><span class="op" id="1322265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322269">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1322274">//&nbsp;make&nbsp;sure&nbsp;missing&nbsp;bytes&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322308">wantsize</span>&nbsp;<span class="op" id="1322317">:=</span>&nbsp;<span class="num" id="1322320">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322324">if</span>&nbsp;<span class="ident" id="1322327"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span>&nbsp;<span class="op" id="1322336">&gt;=</span>&nbsp;<span class="builtinfunc" id="1322339">len</span><span class="op" id="1322342">(</span><span class="ident" id="1322343"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322344">)</span>&nbsp;<span class="op" id="1322346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322351"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span>&nbsp;<span class="op" id="1322360">=</span>&nbsp;<span class="num" id="1322362">0</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322370"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322371">,</span>&nbsp;<span class="ident" id="1322373"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322378">=</span>&nbsp;<span class="ident" id="1322380"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1322390">(</span><span class="ident" id="1322391"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322392">[</span><span class="num" id="1322393">0</span>&nbsp;<span class="op" id="1322395">:</span>&nbsp;<span class="builtinfunc" id="1322397">len</span><span class="op" id="1322400">(</span><span class="ident" id="1322401"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322402">)</span><span class="op" id="1322403">-</span><span class="num" id="1322404">1</span><span class="op" id="1322405">]</span><span class="op" id="1322406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322410">if</span>&nbsp;<span class="ident" id="1322413"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1322415">!=</span>&nbsp;<span class="ident" id="1322418"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1322428">||</span>&nbsp;<span class="ident" id="1322431"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322436">!=</span>&nbsp;<span class="ident" id="1322439"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span>&nbsp;<span class="op" id="1322448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322453"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1322454">.</span><span class="ident" id="1322455">Errorf</span><span class="op" id="1322461">(</span><span class="string" id="1322462">&#34;DecodeRune(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1322505">,</span>&nbsp;<span class="ident" id="1322507"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322508">[</span><span class="num" id="1322509">0</span><span class="op" id="1322510">:</span><span class="builtinfunc" id="1322511">len</span><span class="op" id="1322514">(</span><span class="ident" id="1322515"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322516">)</span><span class="op" id="1322517">-</span><span class="num" id="1322518">1</span><span class="op" id="1322519">]</span><span class="op" id="1322520">,</span>&nbsp;<span class="ident" id="1322522"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322523">,</span>&nbsp;<span class="ident" id="1322525"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1322529">,</span>&nbsp;<span class="ident" id="1322531"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1322540">,</span>&nbsp;<span class="ident" id="1322542"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span><span class="op" id="1322550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322554">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322558"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span>&nbsp;<span class="op" id="1322560">=</span>&nbsp;<span class="ident" id="1322562"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322563">.</span><span class="ident" id="1322564">str</span><span class="op" id="1322567">[</span><span class="num" id="1322568">0</span>&nbsp;<span class="op" id="1322570">:</span>&nbsp;<span class="builtinfunc" id="1322572">len</span><span class="op" id="1322575">(</span><span class="ident" id="1322576"><a href="/unicode/utf8/utf8_test.go.html#1321485">m</a></span><span class="op" id="1322577">.</span><span class="ident" id="1322578">str</span><span class="op" id="1322581">)</span><span class="op" id="1322582">-</span><span class="num" id="1322583">1</span><span class="op" id="1322584">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322588"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322589">,</span>&nbsp;<span class="ident" id="1322591"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322596">=</span>&nbsp;<span class="ident" id="1322598"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1322616">(</span><span class="ident" id="1322617"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1322618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322622">if</span>&nbsp;<span class="ident" id="1322625"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1322627">!=</span>&nbsp;<span class="ident" id="1322630"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1322640">||</span>&nbsp;<span class="ident" id="1322643"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322648">!=</span>&nbsp;<span class="ident" id="1322651"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span>&nbsp;<span class="op" id="1322660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322665"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1322666">.</span><span class="ident" id="1322667">Errorf</span><span class="op" id="1322673">(</span><span class="string" id="1322674">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1322725">,</span>&nbsp;<span class="ident" id="1322727"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1322728">,</span>&nbsp;<span class="ident" id="1322730"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322731">,</span>&nbsp;<span class="ident" id="1322733"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1322737">,</span>&nbsp;<span class="ident" id="1322739"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1322748">,</span>&nbsp;<span class="ident" id="1322750"><a href="/unicode/utf8/utf8_test.go.html#1322308">wantsize</a></span><span class="op" id="1322758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322762">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1322767">//&nbsp;make&nbsp;sure&nbsp;bad&nbsp;sequences&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322801">if</span>&nbsp;<span class="builtinfunc" id="1322804">len</span><span class="op" id="1322807">(</span><span class="ident" id="1322808"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322809">)</span>&nbsp;<span class="op" id="1322811">==</span>&nbsp;<span class="num" id="1322814">1</span>&nbsp;<span class="op" id="1322816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322821"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322822">[</span><span class="num" id="1322823">0</span><span class="op" id="1322824">]</span>&nbsp;<span class="op" id="1322826">=</span>&nbsp;<span class="num" id="1322828">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322835">}</span>&nbsp;<span class="keyword" id="1322837">else</span>&nbsp;<span class="op" id="1322842">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322847"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322848">[</span><span class="builtinfunc" id="1322849">len</span><span class="op" id="1322852">(</span><span class="ident" id="1322853"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322854">)</span><span class="op" id="1322855">-</span><span class="num" id="1322856">1</span><span class="op" id="1322857">]</span>&nbsp;<span class="op" id="1322859">=</span>&nbsp;<span class="num" id="1322861">0x7F</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1322868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322872"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322873">,</span>&nbsp;<span class="ident" id="1322875"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322880">=</span>&nbsp;<span class="ident" id="1322882"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1322892">(</span><span class="ident" id="1322893"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1322898">if</span>&nbsp;<span class="ident" id="1322901"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1322903">!=</span>&nbsp;<span class="ident" id="1322906"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1322916">||</span>&nbsp;<span class="ident" id="1322919"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1322924">!=</span>&nbsp;<span class="num" id="1322927">1</span>&nbsp;<span class="op" id="1322929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1322934"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1322935">.</span><span class="ident" id="1322936">Errorf</span><span class="op" id="1322942">(</span><span class="string" id="1322943">&#34;DecodeRune(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1322986">,</span>&nbsp;<span class="ident" id="1322988"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1322989">,</span>&nbsp;<span class="ident" id="1322991"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1322992">,</span>&nbsp;<span class="ident" id="1322994"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1322998">,</span>&nbsp;<span class="ident" id="1323000"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1323009">,</span>&nbsp;<span class="num" id="1323011">1</span><span class="op" id="1323012">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323020"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span>&nbsp;<span class="op" id="1323022">=</span>&nbsp;<span class="builtintype" id="1323024">string</span><span class="op" id="1323030">(</span><span class="ident" id="1323031"><a href="/unicode/utf8/utf8_test.go.html#1321508">b</a></span><span class="op" id="1323032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323036"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1323037">,</span>&nbsp;<span class="ident" id="1323039"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1323044">=</span>&nbsp;<span class="ident" id="1323046"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1323064">(</span><span class="ident" id="1323065"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1323066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323070">if</span>&nbsp;<span class="ident" id="1323073"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span>&nbsp;<span class="op" id="1323075">!=</span>&nbsp;<span class="ident" id="1323078"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1323088">||</span>&nbsp;<span class="ident" id="1323091"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span>&nbsp;<span class="op" id="1323096">!=</span>&nbsp;<span class="num" id="1323099">1</span>&nbsp;<span class="op" id="1323101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323106"><a href="/unicode/utf8/utf8_test.go.html#1321461">t</a></span><span class="op" id="1323107">.</span><span class="ident" id="1323108">Errorf</span><span class="op" id="1323114">(</span><span class="string" id="1323115">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%#04x,&nbsp;%d&nbsp;want&nbsp;%#04x,&nbsp;%d&#34;</span><span class="op" id="1323166">,</span>&nbsp;<span class="ident" id="1323168"><a href="/unicode/utf8/utf8_test.go.html#1321676">s</a></span><span class="op" id="1323169">,</span>&nbsp;<span class="ident" id="1323171"><a href="/unicode/utf8/utf8_test.go.html#1321529">r</a></span><span class="op" id="1323172">,</span>&nbsp;<span class="ident" id="1323174"><a href="/unicode/utf8/utf8_test.go.html#1321532">size</a></span><span class="op" id="1323178">,</span>&nbsp;<span class="ident" id="1323180"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1323189">,</span>&nbsp;<span class="num" id="1323191">1</span><span class="op" id="1323192">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323200">}</span><br>
<span class="lineno"></span><span class="op" id="1323202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="1323205">func</span>&nbsp;<span class="ident" id="1323210">TestDecodeSurrogateRune</span><span class="op" id="1323233">(</span><span class="ident" id="1323234">t</span>&nbsp;<span class="op" id="1323236">*</span><span class="ident" id="1323237"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1323244">.</span><span class="ident" id="1323245">T</span><span class="op" id="1323246">)</span>&nbsp;<span class="op" id="1323248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323251">for</span>&nbsp;<span class="ident" id="1323255">_</span><span class="op" id="1323256">,</span>&nbsp;<span class="ident" id="1323258">m</span>&nbsp;<span class="op" id="1323260">:=</span>&nbsp;<span class="keyword" id="1323263">range</span>&nbsp;<span class="ident" id="1323269"><a href="/unicode/utf8/utf8_test.go.html#1320257">surrogateMap</a></span>&nbsp;<span class="op" id="1323282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323286">b</span>&nbsp;<span class="op" id="1323288">:=</span>&nbsp;<span class="op" id="1323291">[</span><span class="op" id="1323292">]</span><span class="builtintype" id="1323293">byte</span><span class="op" id="1323297">(</span><span class="ident" id="1323298"><a href="/unicode/utf8/utf8_test.go.html#1323258">m</a></span><span class="op" id="1323299">.</span><span class="ident" id="1323300">str</span><span class="op" id="1323303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323307">r</span><span class="op" id="1323308">,</span>&nbsp;<span class="ident" id="1323310">size</span>&nbsp;<span class="op" id="1323315">:=</span>&nbsp;<span class="ident" id="1323318"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1323328">(</span><span class="ident" id="1323329"><a href="/unicode/utf8/utf8_test.go.html#1323286">b</a></span><span class="op" id="1323330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323334">if</span>&nbsp;<span class="ident" id="1323337"><a href="/unicode/utf8/utf8_test.go.html#1323307">r</a></span>&nbsp;<span class="op" id="1323339">!=</span>&nbsp;<span class="ident" id="1323342"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1323352">||</span>&nbsp;<span class="ident" id="1323355"><a href="/unicode/utf8/utf8_test.go.html#1323310">size</a></span>&nbsp;<span class="op" id="1323360">!=</span>&nbsp;<span class="num" id="1323363">1</span>&nbsp;<span class="op" id="1323365">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323370"><a href="/unicode/utf8/utf8_test.go.html#1323234">t</a></span><span class="op" id="1323371">.</span><span class="ident" id="1323372">Errorf</span><span class="op" id="1323378">(</span><span class="string" id="1323379">&#34;DecodeRune(%q)&nbsp;=&nbsp;%x,&nbsp;%d&nbsp;want&nbsp;%x,&nbsp;%d&#34;</span><span class="op" id="1323416">,</span>&nbsp;<span class="ident" id="1323418"><a href="/unicode/utf8/utf8_test.go.html#1323286">b</a></span><span class="op" id="1323419">,</span>&nbsp;<span class="ident" id="1323421"><a href="/unicode/utf8/utf8_test.go.html#1323307">r</a></span><span class="op" id="1323422">,</span>&nbsp;<span class="ident" id="1323424"><a href="/unicode/utf8/utf8_test.go.html#1323310">size</a></span><span class="op" id="1323428">,</span>&nbsp;<span class="ident" id="1323430"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1323439">,</span>&nbsp;<span class="num" id="1323441">1</span><span class="op" id="1323442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323450">s</span>&nbsp;<span class="op" id="1323452">:=</span>&nbsp;<span class="ident" id="1323455"><a href="/unicode/utf8/utf8_test.go.html#1323258">m</a></span><span class="op" id="1323456">.</span><span class="ident" id="1323457">str</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323463"><a href="/unicode/utf8/utf8_test.go.html#1323307">r</a></span><span class="op" id="1323464">,</span>&nbsp;<span class="ident" id="1323466"><a href="/unicode/utf8/utf8_test.go.html#1323310">size</a></span>&nbsp;<span class="op" id="1323471">=</span>&nbsp;<span class="ident" id="1323473"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1323491">(</span><span class="ident" id="1323492"><a href="/unicode/utf8/utf8_test.go.html#1323450">s</a></span><span class="op" id="1323493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323497">if</span>&nbsp;<span class="ident" id="1323500"><a href="/unicode/utf8/utf8_test.go.html#1323307">r</a></span>&nbsp;<span class="op" id="1323502">!=</span>&nbsp;<span class="ident" id="1323505"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span>&nbsp;<span class="op" id="1323515">||</span>&nbsp;<span class="ident" id="1323518"><a href="/unicode/utf8/utf8_test.go.html#1323310">size</a></span>&nbsp;<span class="op" id="1323523">!=</span>&nbsp;<span class="num" id="1323526">1</span>&nbsp;<span class="op" id="1323528">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323533"><a href="/unicode/utf8/utf8_test.go.html#1323234">t</a></span><span class="op" id="1323534">.</span><span class="ident" id="1323535">Errorf</span><span class="op" id="1323541">(</span><span class="string" id="1323542">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%x,&nbsp;%d&nbsp;want&nbsp;%x,&nbsp;%d&#34;</span><span class="op" id="1323587">,</span>&nbsp;<span class="ident" id="1323589"><a href="/unicode/utf8/utf8_test.go.html#1323286">b</a></span><span class="op" id="1323590">,</span>&nbsp;<span class="ident" id="1323592"><a href="/unicode/utf8/utf8_test.go.html#1323307">r</a></span><span class="op" id="1323593">,</span>&nbsp;<span class="ident" id="1323595"><a href="/unicode/utf8/utf8_test.go.html#1323310">size</a></span><span class="op" id="1323599">,</span>&nbsp;<span class="ident" id="1323601"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1323610">,</span>&nbsp;<span class="num" id="1323612">1</span><span class="op" id="1323613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323620">}</span><br>
<span class="lineno"></span><span class="op" id="1323622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="1323625">//&nbsp;Check&nbsp;that&nbsp;DecodeRune&nbsp;and&nbsp;DecodeLastRune&nbsp;correspond&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1323683">//&nbsp;the&nbsp;equivalent&nbsp;range&nbsp;loop.</span><br>
<span class="lineno"></span><span class="keyword" id="1323713">func</span>&nbsp;<span class="ident" id="1323718">TestSequencing</span><span class="op" id="1323732">(</span><span class="ident" id="1323733">t</span>&nbsp;<span class="op" id="1323735">*</span><span class="ident" id="1323736"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1323743">.</span><span class="ident" id="1323744">T</span><span class="op" id="1323745">)</span>&nbsp;<span class="op" id="1323747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323750">for</span>&nbsp;<span class="ident" id="1323754">_</span><span class="op" id="1323755">,</span>&nbsp;<span class="ident" id="1323757">ts</span>&nbsp;<span class="op" id="1323760">:=</span>&nbsp;<span class="keyword" id="1323763">range</span>&nbsp;<span class="ident" id="1323769"><a href="/unicode/utf8/utf8_test.go.html#1320430">testStrings</a></span>&nbsp;<span class="op" id="1323781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323785">for</span>&nbsp;<span class="ident" id="1323789">_</span><span class="op" id="1323790">,</span>&nbsp;<span class="ident" id="1323792">m</span>&nbsp;<span class="op" id="1323794">:=</span>&nbsp;<span class="keyword" id="1323797">range</span>&nbsp;<span class="ident" id="1323803"><a href="/unicode/utf8/utf8_test.go.html#1319451">utf8map</a></span>&nbsp;<span class="op" id="1323811">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1323816">for</span>&nbsp;<span class="ident" id="1323820">_</span><span class="op" id="1323821">,</span>&nbsp;<span class="ident" id="1323823">s</span>&nbsp;<span class="op" id="1323825">:=</span>&nbsp;<span class="keyword" id="1323828">range</span>&nbsp;<span class="op" id="1323834">[</span><span class="op" id="1323835">]</span><span class="builtintype" id="1323836">string</span><span class="op" id="1323842">{</span><span class="ident" id="1323843"><a href="/unicode/utf8/utf8_test.go.html#1323757">ts</a></span>&nbsp;<span class="op" id="1323846">+</span>&nbsp;<span class="ident" id="1323848"><a href="/unicode/utf8/utf8_test.go.html#1323792">m</a></span><span class="op" id="1323849">.</span><span class="ident" id="1323850">str</span><span class="op" id="1323853">,</span>&nbsp;<span class="ident" id="1323855"><a href="/unicode/utf8/utf8_test.go.html#1323792">m</a></span><span class="op" id="1323856">.</span><span class="ident" id="1323857">str</span>&nbsp;<span class="op" id="1323861">+</span>&nbsp;<span class="ident" id="1323863"><a href="/unicode/utf8/utf8_test.go.html#1323757">ts</a></span><span class="op" id="1323865">,</span>&nbsp;<span class="ident" id="1323867"><a href="/unicode/utf8/utf8_test.go.html#1323757">ts</a></span>&nbsp;<span class="op" id="1323870">+</span>&nbsp;<span class="ident" id="1323872"><a href="/unicode/utf8/utf8_test.go.html#1323792">m</a></span><span class="op" id="1323873">.</span><span class="ident" id="1323874">str</span>&nbsp;<span class="op" id="1323878">+</span>&nbsp;<span class="ident" id="1323880"><a href="/unicode/utf8/utf8_test.go.html#1323757">ts</a></span><span class="op" id="1323882">}</span>&nbsp;<span class="op" id="1323884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1323890"><a href="/unicode/utf8/utf8_test.go.html#1324498">testSequence</a></span><span class="op" id="1323902">(</span><span class="ident" id="1323903"><a href="/unicode/utf8/utf8_test.go.html#1323733">t</a></span><span class="op" id="1323904">,</span>&nbsp;<span class="ident" id="1323906"><a href="/unicode/utf8/utf8_test.go.html#1323823">s</a></span><span class="op" id="1323907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1323919">}</span><br>
<span class="lineno">200</span><span class="op" id="1323921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1323924">//&nbsp;Check&nbsp;that&nbsp;a&nbsp;range&nbsp;loop&nbsp;and&nbsp;a&nbsp;[]int&nbsp;conversion&nbsp;visit&nbsp;the&nbsp;same&nbsp;runes.</span><br>
<span class="lineno"></span><span class="comment" id="1323996">//&nbsp;Not&nbsp;really&nbsp;a&nbsp;test&nbsp;of&nbsp;this&nbsp;package,&nbsp;but&nbsp;the&nbsp;assumption&nbsp;is&nbsp;used&nbsp;here&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1324070">//&nbsp;it&#39;s&nbsp;good&nbsp;to&nbsp;verify</span><br>
<span class="lineno">205</span><span class="keyword" id="1324093">func</span>&nbsp;<span class="ident" id="1324098">TestIntConversion</span><span class="op" id="1324115">(</span><span class="ident" id="1324116">t</span>&nbsp;<span class="op" id="1324118">*</span><span class="ident" id="1324119"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1324126">.</span><span class="ident" id="1324127">T</span><span class="op" id="1324128">)</span>&nbsp;<span class="op" id="1324130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324133">for</span>&nbsp;<span class="ident" id="1324137">_</span><span class="op" id="1324138">,</span>&nbsp;<span class="ident" id="1324140">ts</span>&nbsp;<span class="op" id="1324143">:=</span>&nbsp;<span class="keyword" id="1324146">range</span>&nbsp;<span class="ident" id="1324152"><a href="/unicode/utf8/utf8_test.go.html#1320430">testStrings</a></span>&nbsp;<span class="op" id="1324164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324168">runes</span>&nbsp;<span class="op" id="1324174">:=</span>&nbsp;<span class="op" id="1324177">[</span><span class="op" id="1324178">]</span><span class="builtintype" id="1324179">rune</span><span class="op" id="1324183">(</span><span class="ident" id="1324184"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span><span class="op" id="1324186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324190">if</span>&nbsp;<span class="ident" id="1324193"><a href="/unicode/utf8/utf8.go.html#1647223">RuneCountInString</a></span><span class="op" id="1324210">(</span><span class="ident" id="1324211"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span><span class="op" id="1324213">)</span>&nbsp;<span class="op" id="1324215">!=</span>&nbsp;<span class="builtinfunc" id="1324218">len</span><span class="op" id="1324221">(</span><span class="ident" id="1324222"><a href="/unicode/utf8/utf8_test.go.html#1324168">runes</a></span><span class="op" id="1324227">)</span>&nbsp;<span class="op" id="1324229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324234"><a href="/unicode/utf8/utf8_test.go.html#1324116">t</a></span><span class="op" id="1324235">.</span><span class="ident" id="1324236">Errorf</span><span class="op" id="1324242">(</span><span class="string" id="1324243">&#34;%q:&nbsp;expected&nbsp;%d&nbsp;runes;&nbsp;got&nbsp;%d&#34;</span><span class="op" id="1324274">,</span>&nbsp;<span class="ident" id="1324276"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span><span class="op" id="1324278">,</span>&nbsp;<span class="builtinfunc" id="1324280">len</span><span class="op" id="1324283">(</span><span class="ident" id="1324284"><a href="/unicode/utf8/utf8_test.go.html#1324168">runes</a></span><span class="op" id="1324289">)</span><span class="op" id="1324290">,</span>&nbsp;<span class="ident" id="1324292"><a href="/unicode/utf8/utf8.go.html#1647223">RuneCountInString</a></span><span class="op" id="1324309">(</span><span class="ident" id="1324310"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span><span class="op" id="1324312">)</span><span class="op" id="1324313">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324318">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324330">i</span>&nbsp;<span class="op" id="1324332">:=</span>&nbsp;<span class="num" id="1324335">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324339">for</span>&nbsp;<span class="ident" id="1324343">_</span><span class="op" id="1324344">,</span>&nbsp;<span class="ident" id="1324346">r</span>&nbsp;<span class="op" id="1324348">:=</span>&nbsp;<span class="keyword" id="1324351">range</span>&nbsp;<span class="ident" id="1324357"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span>&nbsp;<span class="op" id="1324360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324365">if</span>&nbsp;<span class="ident" id="1324368"><a href="/unicode/utf8/utf8_test.go.html#1324346">r</a></span>&nbsp;<span class="op" id="1324370">!=</span>&nbsp;<span class="ident" id="1324373"><a href="/unicode/utf8/utf8_test.go.html#1324168">runes</a></span><span class="op" id="1324378">[</span><span class="ident" id="1324379"><a href="/unicode/utf8/utf8_test.go.html#1324330">i</a></span><span class="op" id="1324380">]</span>&nbsp;<span class="op" id="1324382">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324388"><a href="/unicode/utf8/utf8_test.go.html#1324116">t</a></span><span class="op" id="1324389">.</span><span class="ident" id="1324390">Errorf</span><span class="op" id="1324396">(</span><span class="string" id="1324397">&#34;%q[%d]:&nbsp;expected&nbsp;%c&nbsp;(%U);&nbsp;got&nbsp;%c&nbsp;(%U)&#34;</span><span class="op" id="1324436">,</span>&nbsp;<span class="ident" id="1324438"><a href="/unicode/utf8/utf8_test.go.html#1324140">ts</a></span><span class="op" id="1324440">,</span>&nbsp;<span class="ident" id="1324442"><a href="/unicode/utf8/utf8_test.go.html#1324330">i</a></span><span class="op" id="1324443">,</span>&nbsp;<span class="ident" id="1324445"><a href="/unicode/utf8/utf8_test.go.html#1324168">runes</a></span><span class="op" id="1324450">[</span><span class="ident" id="1324451"><a href="/unicode/utf8/utf8_test.go.html#1324330">i</a></span><span class="op" id="1324452">]</span><span class="op" id="1324453">,</span>&nbsp;<span class="ident" id="1324455"><a href="/unicode/utf8/utf8_test.go.html#1324168">runes</a></span><span class="op" id="1324460">[</span><span class="ident" id="1324461"><a href="/unicode/utf8/utf8_test.go.html#1324330">i</a></span><span class="op" id="1324462">]</span><span class="op" id="1324463">,</span>&nbsp;<span class="ident" id="1324465"><a href="/unicode/utf8/utf8_test.go.html#1324346">r</a></span><span class="op" id="1324466">,</span>&nbsp;<span class="ident" id="1324468"><a href="/unicode/utf8/utf8_test.go.html#1324346">r</a></span><span class="op" id="1324469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324479"><a href="/unicode/utf8/utf8_test.go.html#1324330">i</a></span><span class="op" id="1324480">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324488">}</span><br>
<span class="lineno">220</span><span class="op" id="1324490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1324493">func</span>&nbsp;<span class="ident" id="1324498">testSequence</span><span class="op" id="1324510">(</span><span class="ident" id="1324511">t</span>&nbsp;<span class="op" id="1324513">*</span><span class="ident" id="1324514"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1324521">.</span><span class="ident" id="1324522">T</span><span class="op" id="1324523">,</span>&nbsp;<span class="ident" id="1324525">s</span>&nbsp;<span class="builtintype" id="1324527">string</span><span class="op" id="1324533">)</span>&nbsp;<span class="op" id="1324535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324538">type</span>&nbsp;<span class="ident" id="1324543">info</span>&nbsp;<span class="keyword" id="1324548">struct</span>&nbsp;<span class="op" id="1324555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324559">index</span>&nbsp;<span class="builtintype" id="1324565">int</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324571">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1324577">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324586">index</span>&nbsp;<span class="op" id="1324592">:=</span>&nbsp;<span class="builtinfunc" id="1324595">make</span><span class="op" id="1324599">(</span><span class="op" id="1324600">[</span><span class="op" id="1324601">]</span><span class="ident" id="1324602"><a href="/unicode/utf8/utf8_test.go.html#1324543">info</a></span><span class="op" id="1324606">,</span>&nbsp;<span class="builtinfunc" id="1324608">len</span><span class="op" id="1324611">(</span><span class="ident" id="1324612"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1324613">)</span><span class="op" id="1324614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324617">b</span>&nbsp;<span class="op" id="1324619">:=</span>&nbsp;<span class="op" id="1324622">[</span><span class="op" id="1324623">]</span><span class="builtintype" id="1324624">byte</span><span class="op" id="1324628">(</span><span class="ident" id="1324629"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1324630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324633">si</span>&nbsp;<span class="op" id="1324636">:=</span>&nbsp;<span class="num" id="1324639">0</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324642">j</span>&nbsp;<span class="op" id="1324644">:=</span>&nbsp;<span class="num" id="1324647">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324650">for</span>&nbsp;<span class="ident" id="1324654">i</span><span class="op" id="1324655">,</span>&nbsp;<span class="ident" id="1324657">r</span>&nbsp;<span class="op" id="1324659">:=</span>&nbsp;<span class="keyword" id="1324662">range</span>&nbsp;<span class="ident" id="1324668"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span>&nbsp;<span class="op" id="1324670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324674">if</span>&nbsp;<span class="ident" id="1324677"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1324680">!=</span>&nbsp;<span class="ident" id="1324683"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span>&nbsp;<span class="op" id="1324685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324690"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1324691">.</span><span class="ident" id="1324692">Errorf</span><span class="op" id="1324698">(</span><span class="string" id="1324699">&#34;Sequence(%q)&nbsp;mismatched&nbsp;index&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1324742">,</span>&nbsp;<span class="ident" id="1324744"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1324745">,</span>&nbsp;<span class="ident" id="1324747"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1324749">,</span>&nbsp;<span class="ident" id="1324751"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1324752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324757">return</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324770"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1324775">[</span><span class="ident" id="1324776"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1324777">]</span>&nbsp;<span class="op" id="1324779">=</span>&nbsp;<span class="ident" id="1324781"><a href="/unicode/utf8/utf8_test.go.html#1324543">info</a></span><span class="op" id="1324785">{</span><span class="ident" id="1324786"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1324787">,</span>&nbsp;<span class="ident" id="1324789"><a href="/unicode/utf8/utf8_test.go.html#1324657">r</a></span><span class="op" id="1324790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324794"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1324795">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324800">r1</span><span class="op" id="1324802">,</span>&nbsp;<span class="ident" id="1324804">size1</span>&nbsp;<span class="op" id="1324810">:=</span>&nbsp;<span class="ident" id="1324813"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1324823">(</span><span class="ident" id="1324824"><a href="/unicode/utf8/utf8_test.go.html#1324617">b</a></span><span class="op" id="1324825">[</span><span class="ident" id="1324826"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1324827">:</span><span class="op" id="1324828">]</span><span class="op" id="1324829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324833">if</span>&nbsp;<span class="ident" id="1324836"><a href="/unicode/utf8/utf8_test.go.html#1324657">r</a></span>&nbsp;<span class="op" id="1324838">!=</span>&nbsp;<span class="ident" id="1324841"><a href="/unicode/utf8/utf8_test.go.html#1324800">r1</a></span>&nbsp;<span class="op" id="1324844">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324849"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1324850">.</span><span class="ident" id="1324851">Errorf</span><span class="op" id="1324857">(</span><span class="string" id="1324858">&#34;DecodeRune(%q)&nbsp;=&nbsp;%#04x,&nbsp;want&nbsp;%#04x&#34;</span><span class="op" id="1324894">,</span>&nbsp;<span class="ident" id="1324896"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1324897">[</span><span class="ident" id="1324898"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1324899">:</span><span class="op" id="1324900">]</span><span class="op" id="1324901">,</span>&nbsp;<span class="ident" id="1324903"><a href="/unicode/utf8/utf8_test.go.html#1324800">r1</a></span><span class="op" id="1324905">,</span>&nbsp;<span class="ident" id="1324907"><a href="/unicode/utf8/utf8_test.go.html#1324657">r</a></span><span class="op" id="1324908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324913">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1324922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324926">r2</span><span class="op" id="1324928">,</span>&nbsp;<span class="ident" id="1324930">size2</span>&nbsp;<span class="op" id="1324936">:=</span>&nbsp;<span class="ident" id="1324939"><a href="/unicode/utf8/utf8.go.html#1643538">DecodeRuneInString</a></span><span class="op" id="1324957">(</span><span class="ident" id="1324958"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1324959">[</span><span class="ident" id="1324960"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1324961">:</span><span class="op" id="1324962">]</span><span class="op" id="1324963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1324967">if</span>&nbsp;<span class="ident" id="1324970"><a href="/unicode/utf8/utf8_test.go.html#1324657">r</a></span>&nbsp;<span class="op" id="1324972">!=</span>&nbsp;<span class="ident" id="1324975"><a href="/unicode/utf8/utf8_test.go.html#1324926">r2</a></span>&nbsp;<span class="op" id="1324978">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1324983"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1324984">.</span><span class="ident" id="1324985">Errorf</span><span class="op" id="1324991">(</span><span class="string" id="1324992">&#34;DecodeRuneInString(%q)&nbsp;=&nbsp;%#04x,&nbsp;want&nbsp;%#04x&#34;</span><span class="op" id="1325036">,</span>&nbsp;<span class="ident" id="1325038"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325039">[</span><span class="ident" id="1325040"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1325041">:</span><span class="op" id="1325042">]</span><span class="op" id="1325043">,</span>&nbsp;<span class="ident" id="1325045"><a href="/unicode/utf8/utf8_test.go.html#1324926">r2</a></span><span class="op" id="1325047">,</span>&nbsp;<span class="ident" id="1325049"><a href="/unicode/utf8/utf8_test.go.html#1324657">r</a></span><span class="op" id="1325050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325055">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325068">if</span>&nbsp;<span class="ident" id="1325071"><a href="/unicode/utf8/utf8_test.go.html#1324804">size1</a></span>&nbsp;<span class="op" id="1325077">!=</span>&nbsp;<span class="ident" id="1325080"><a href="/unicode/utf8/utf8_test.go.html#1324930">size2</a></span>&nbsp;<span class="op" id="1325086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325091"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325092">.</span><span class="ident" id="1325093">Errorf</span><span class="op" id="1325099">(</span><span class="string" id="1325100">&#34;DecodeRune/DecodeRuneInString(%q)&nbsp;size&nbsp;mismatch&nbsp;%d/%d&#34;</span><span class="op" id="1325155">,</span>&nbsp;<span class="ident" id="1325157"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325158">[</span><span class="ident" id="1325159"><a href="/unicode/utf8/utf8_test.go.html#1324654">i</a></span><span class="op" id="1325160">:</span><span class="op" id="1325161">]</span><span class="op" id="1325162">,</span>&nbsp;<span class="ident" id="1325164"><a href="/unicode/utf8/utf8_test.go.html#1324804">size1</a></span><span class="op" id="1325169">,</span>&nbsp;<span class="ident" id="1325171"><a href="/unicode/utf8/utf8_test.go.html#1324930">size2</a></span><span class="op" id="1325176">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325181">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325194"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325197">+=</span>&nbsp;<span class="ident" id="1325200"><a href="/unicode/utf8/utf8_test.go.html#1324804">size1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325210"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325211">--</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325215">for</span>&nbsp;<span class="ident" id="1325219"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325222">=</span>&nbsp;<span class="builtinfunc" id="1325224">len</span><span class="op" id="1325227">(</span><span class="ident" id="1325228"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325229">)</span><span class="op" id="1325230">;</span>&nbsp;<span class="ident" id="1325232"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325235">&gt;</span>&nbsp;<span class="num" id="1325237">0</span><span class="op" id="1325238">;</span>&nbsp;<span class="op" id="1325240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325244">r1</span><span class="op" id="1325246">,</span>&nbsp;<span class="ident" id="1325248">size1</span>&nbsp;<span class="op" id="1325254">:=</span>&nbsp;<span class="ident" id="1325257"><a href="/unicode/utf8/utf8.go.html#1644105">DecodeLastRune</a></span><span class="op" id="1325271">(</span><span class="ident" id="1325272"><a href="/unicode/utf8/utf8_test.go.html#1324617">b</a></span><span class="op" id="1325273">[</span><span class="num" id="1325274">0</span><span class="op" id="1325275">:</span><span class="ident" id="1325276"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325278">]</span><span class="op" id="1325279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325283">r2</span><span class="op" id="1325285">,</span>&nbsp;<span class="ident" id="1325287">size2</span>&nbsp;<span class="op" id="1325293">:=</span>&nbsp;<span class="ident" id="1325296"><a href="/unicode/utf8/utf8.go.html#1645101">DecodeLastRuneInString</a></span><span class="op" id="1325318">(</span><span class="ident" id="1325319"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325320">[</span><span class="num" id="1325321">0</span><span class="op" id="1325322">:</span><span class="ident" id="1325323"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325325">]</span><span class="op" id="1325326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325330">if</span>&nbsp;<span class="ident" id="1325333"><a href="/unicode/utf8/utf8_test.go.html#1325248">size1</a></span>&nbsp;<span class="op" id="1325339">!=</span>&nbsp;<span class="ident" id="1325342"><a href="/unicode/utf8/utf8_test.go.html#1325287">size2</a></span>&nbsp;<span class="op" id="1325348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325353"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325354">.</span><span class="ident" id="1325355">Errorf</span><span class="op" id="1325361">(</span><span class="string" id="1325362">&#34;DecodeLastRune/DecodeLastRuneInString(%q,&nbsp;%d)&nbsp;size&nbsp;mismatch&nbsp;%d/%d&#34;</span><span class="op" id="1325429">,</span>&nbsp;<span class="ident" id="1325431"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325432">,</span>&nbsp;<span class="ident" id="1325434"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325436">,</span>&nbsp;<span class="ident" id="1325438"><a href="/unicode/utf8/utf8_test.go.html#1325248">size1</a></span><span class="op" id="1325443">,</span>&nbsp;<span class="ident" id="1325445"><a href="/unicode/utf8/utf8_test.go.html#1325287">size2</a></span><span class="op" id="1325450">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325455">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325468">if</span>&nbsp;<span class="ident" id="1325471"><a href="/unicode/utf8/utf8_test.go.html#1325244">r1</a></span>&nbsp;<span class="op" id="1325474">!=</span>&nbsp;<span class="ident" id="1325477"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325482">[</span><span class="ident" id="1325483"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325484">]</span><span class="op" id="1325485">.</span><span class="ident" id="1325486">r</span>&nbsp;<span class="op" id="1325488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325493"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325494">.</span><span class="ident" id="1325495">Errorf</span><span class="op" id="1325501">(</span><span class="string" id="1325502">&#34;DecodeLastRune(%q,&nbsp;%d)&nbsp;=&nbsp;%#04x,&nbsp;want&nbsp;%#04x&#34;</span><span class="op" id="1325546">,</span>&nbsp;<span class="ident" id="1325548"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325549">,</span>&nbsp;<span class="ident" id="1325551"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325553">,</span>&nbsp;<span class="ident" id="1325555"><a href="/unicode/utf8/utf8_test.go.html#1325244">r1</a></span><span class="op" id="1325557">,</span>&nbsp;<span class="ident" id="1325559"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325564">[</span><span class="ident" id="1325565"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325566">]</span><span class="op" id="1325567">.</span><span class="ident" id="1325568">r</span><span class="op" id="1325569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325574">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325587">if</span>&nbsp;<span class="ident" id="1325590"><a href="/unicode/utf8/utf8_test.go.html#1325283">r2</a></span>&nbsp;<span class="op" id="1325593">!=</span>&nbsp;<span class="ident" id="1325596"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325601">[</span><span class="ident" id="1325602"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325603">]</span><span class="op" id="1325604">.</span><span class="ident" id="1325605">r</span>&nbsp;<span class="op" id="1325607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325612"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325613">.</span><span class="ident" id="1325614">Errorf</span><span class="op" id="1325620">(</span><span class="string" id="1325621">&#34;DecodeLastRuneInString(%q,&nbsp;%d)&nbsp;=&nbsp;%#04x,&nbsp;want&nbsp;%#04x&#34;</span><span class="op" id="1325673">,</span>&nbsp;<span class="ident" id="1325675"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325676">,</span>&nbsp;<span class="ident" id="1325678"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325680">,</span>&nbsp;<span class="ident" id="1325682"><a href="/unicode/utf8/utf8_test.go.html#1325283">r2</a></span><span class="op" id="1325684">,</span>&nbsp;<span class="ident" id="1325686"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325691">[</span><span class="ident" id="1325692"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325693">]</span><span class="op" id="1325694">.</span><span class="ident" id="1325695">r</span><span class="op" id="1325696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325701">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325710">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325714"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325717">-=</span>&nbsp;<span class="ident" id="1325720"><a href="/unicode/utf8/utf8_test.go.html#1325248">size1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325728">if</span>&nbsp;<span class="ident" id="1325731"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325734">!=</span>&nbsp;<span class="ident" id="1325737"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325742">[</span><span class="ident" id="1325743"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325744">]</span><span class="op" id="1325745">.</span><span class="ident" id="1325746">index</span>&nbsp;<span class="op" id="1325752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325757"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325758">.</span><span class="ident" id="1325759">Errorf</span><span class="op" id="1325765">(</span><span class="string" id="1325766">&#34;DecodeLastRune(%q)&nbsp;index&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1325816">,</span>&nbsp;<span class="ident" id="1325818"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325819">,</span>&nbsp;<span class="ident" id="1325821"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325823">,</span>&nbsp;<span class="ident" id="1325825"><a href="/unicode/utf8/utf8_test.go.html#1324586">index</a></span><span class="op" id="1325830">[</span><span class="ident" id="1325831"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325832">]</span><span class="op" id="1325833">.</span><span class="ident" id="1325834">index</span><span class="op" id="1325839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325844">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325853">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325857"><a href="/unicode/utf8/utf8_test.go.html#1324642">j</a></span><span class="op" id="1325858">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1325865">if</span>&nbsp;<span class="ident" id="1325868"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span>&nbsp;<span class="op" id="1325871">!=</span>&nbsp;<span class="num" id="1325874">0</span>&nbsp;<span class="op" id="1325876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1325880"><a href="/unicode/utf8/utf8_test.go.html#1324511">t</a></span><span class="op" id="1325881">.</span><span class="ident" id="1325882">Errorf</span><span class="op" id="1325888">(</span><span class="string" id="1325889">&#34;DecodeLastRune(%q)&nbsp;finished&nbsp;at&nbsp;%d,&nbsp;not&nbsp;0&#34;</span><span class="op" id="1325931">,</span>&nbsp;<span class="ident" id="1325933"><a href="/unicode/utf8/utf8_test.go.html#1324525">s</a></span><span class="op" id="1325934">,</span>&nbsp;<span class="ident" id="1325936"><a href="/unicode/utf8/utf8_test.go.html#1324633">si</a></span><span class="op" id="1325938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1325941">}</span><br>
<span class="lineno">280</span><span class="op" id="1325943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1325946">//&nbsp;Check&nbsp;that&nbsp;negative&nbsp;runes&nbsp;encode&nbsp;as&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="keyword" id="1325993">func</span>&nbsp;<span class="ident" id="1325998">TestNegativeRune</span><span class="op" id="1326014">(</span><span class="ident" id="1326015">t</span>&nbsp;<span class="op" id="1326017">*</span><span class="ident" id="1326018"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1326025">.</span><span class="ident" id="1326026">T</span><span class="op" id="1326027">)</span>&nbsp;<span class="op" id="1326029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326032">errorbuf</span>&nbsp;<span class="op" id="1326041">:=</span>&nbsp;<span class="builtinfunc" id="1326044">make</span><span class="op" id="1326048">(</span><span class="op" id="1326049">[</span><span class="op" id="1326050">]</span><span class="builtintype" id="1326051">byte</span><span class="op" id="1326055">,</span>&nbsp;<span class="ident" id="1326057"><a href="/unicode/utf8/utf8.go.html#1638727">UTFMax</a></span><span class="op" id="1326063">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326066"><a href="/unicode/utf8/utf8_test.go.html#1326032">errorbuf</a></span>&nbsp;<span class="op" id="1326075">=</span>&nbsp;<span class="ident" id="1326077"><a href="/unicode/utf8/utf8_test.go.html#1326032">errorbuf</a></span><span class="op" id="1326085">[</span><span class="num" id="1326086">0</span><span class="op" id="1326087">:</span><span class="ident" id="1326088"><a href="/unicode/utf8/utf8.go.html#1646217">EncodeRune</a></span><span class="op" id="1326098">(</span><span class="ident" id="1326099"><a href="/unicode/utf8/utf8_test.go.html#1326032">errorbuf</a></span><span class="op" id="1326107">,</span>&nbsp;<span class="ident" id="1326109"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1326118">)</span><span class="op" id="1326119">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326122">buf</span>&nbsp;<span class="op" id="1326126">:=</span>&nbsp;<span class="builtinfunc" id="1326129">make</span><span class="op" id="1326133">(</span><span class="op" id="1326134">[</span><span class="op" id="1326135">]</span><span class="builtintype" id="1326136">byte</span><span class="op" id="1326140">,</span>&nbsp;<span class="ident" id="1326142"><a href="/unicode/utf8/utf8.go.html#1638727">UTFMax</a></span><span class="op" id="1326148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326151"><a href="/unicode/utf8/utf8_test.go.html#1326122">buf</a></span>&nbsp;<span class="op" id="1326155">=</span>&nbsp;<span class="ident" id="1326157"><a href="/unicode/utf8/utf8_test.go.html#1326122">buf</a></span><span class="op" id="1326160">[</span><span class="num" id="1326161">0</span><span class="op" id="1326162">:</span><span class="ident" id="1326163"><a href="/unicode/utf8/utf8.go.html#1646217">EncodeRune</a></span><span class="op" id="1326173">(</span><span class="ident" id="1326174"><a href="/unicode/utf8/utf8_test.go.html#1326122">buf</a></span><span class="op" id="1326177">,</span>&nbsp;<span class="op" id="1326179">-</span><span class="num" id="1326180">1</span><span class="op" id="1326181">)</span><span class="op" id="1326182">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1326185">if</span>&nbsp;<span class="op" id="1326188">!</span><span class="ident" id="1326189"><a href="/unicode/utf8/utf8_test.go.html#1318792">bytes</a></span><span class="op" id="1326194">.</span><span class="ident" id="1326195">Equal</span><span class="op" id="1326200">(</span><span class="ident" id="1326201"><a href="/unicode/utf8/utf8_test.go.html#1326122">buf</a></span><span class="op" id="1326204">,</span>&nbsp;<span class="ident" id="1326206"><a href="/unicode/utf8/utf8_test.go.html#1326032">errorbuf</a></span><span class="op" id="1326214">)</span>&nbsp;<span class="op" id="1326216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326220"><a href="/unicode/utf8/utf8_test.go.html#1326015">t</a></span><span class="op" id="1326221">.</span><span class="ident" id="1326222">Errorf</span><span class="op" id="1326228">(</span><span class="string" id="1326229">&#34;incorrect&nbsp;encoding&nbsp;[%&nbsp;x]&nbsp;for&nbsp;-1;&nbsp;expected&nbsp;[%&nbsp;x]&#34;</span><span class="op" id="1326278">,</span>&nbsp;<span class="ident" id="1326280"><a href="/unicode/utf8/utf8_test.go.html#1326122">buf</a></span><span class="op" id="1326283">,</span>&nbsp;<span class="ident" id="1326285"><a href="/unicode/utf8/utf8_test.go.html#1326032">errorbuf</a></span><span class="op" id="1326293">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326296">}</span><br>
<span class="lineno"></span><span class="op" id="1326298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1326301">type</span>&nbsp;<span class="ident" id="1326306">RuneCountTest</span>&nbsp;<span class="keyword" id="1326320">struct</span>&nbsp;<span class="op" id="1326327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326330">in</span>&nbsp;&nbsp;<span class="builtintype" id="1326334">string</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326342">out</span>&nbsp;<span class="builtintype" id="1326346">int</span><br>
<span class="lineno"></span><span class="op" id="1326350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1326353">var</span>&nbsp;<span class="ident" id="1326357">runecounttests</span>&nbsp;<span class="op" id="1326372">=</span>&nbsp;<span class="op" id="1326374">[</span><span class="op" id="1326375">]</span><span class="ident" id="1326376"><a href="/unicode/utf8/utf8_test.go.html#1326306">RuneCountTest</a></span><span class="op" id="1326389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326392">{</span><span class="string" id="1326393">&#34;abcd&#34;</span><span class="op" id="1326399">,</span>&nbsp;<span class="num" id="1326401">4</span><span class="op" id="1326402">}</span><span class="op" id="1326403">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326406">{</span><span class="string" id="1326407">&#34;☺☻☹&#34;</span><span class="op" id="1326418">,</span>&nbsp;<span class="num" id="1326420">3</span><span class="op" id="1326421">}</span><span class="op" id="1326422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326425">{</span><span class="string" id="1326426">&#34;1,2,3,4&#34;</span><span class="op" id="1326435">,</span>&nbsp;<span class="num" id="1326437">7</span><span class="op" id="1326438">}</span><span class="op" id="1326439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326442">{</span><span class="string" id="1326443">&#34;\xe2\x00&#34;</span><span class="op" id="1326453">,</span>&nbsp;<span class="num" id="1326455">2</span><span class="op" id="1326456">}</span><span class="op" id="1326457">,</span><br>
<span class="lineno"></span><span class="op" id="1326459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="1326462">func</span>&nbsp;<span class="ident" id="1326467">TestRuneCount</span><span class="op" id="1326480">(</span><span class="ident" id="1326481">t</span>&nbsp;<span class="op" id="1326483">*</span><span class="ident" id="1326484"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1326491">.</span><span class="ident" id="1326492">T</span><span class="op" id="1326493">)</span>&nbsp;<span class="op" id="1326495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1326498">for</span>&nbsp;<span class="ident" id="1326502">_</span><span class="op" id="1326503">,</span>&nbsp;<span class="ident" id="1326505">tt</span>&nbsp;<span class="op" id="1326508">:=</span>&nbsp;<span class="keyword" id="1326511">range</span>&nbsp;<span class="ident" id="1326517"><a href="/unicode/utf8/utf8_test.go.html#1326357">runecounttests</a></span>&nbsp;<span class="op" id="1326532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1326536">if</span>&nbsp;<span class="ident" id="1326539">out</span>&nbsp;<span class="op" id="1326543">:=</span>&nbsp;<span class="ident" id="1326546"><a href="/unicode/utf8/utf8.go.html#1647223">RuneCountInString</a></span><span class="op" id="1326563">(</span><span class="ident" id="1326564"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326566">.</span><span class="ident" id="1326567">in</span><span class="op" id="1326569">)</span><span class="op" id="1326570">;</span>&nbsp;<span class="ident" id="1326572"><a href="/unicode/utf8/utf8_test.go.html#1326539">out</a></span>&nbsp;<span class="op" id="1326576">!=</span>&nbsp;<span class="ident" id="1326579"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326581">.</span><span class="ident" id="1326582">out</span>&nbsp;<span class="op" id="1326586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326591"><a href="/unicode/utf8/utf8_test.go.html#1326481">t</a></span><span class="op" id="1326592">.</span><span class="ident" id="1326593">Errorf</span><span class="op" id="1326599">(</span><span class="string" id="1326600">&#34;RuneCountInString(%q)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1326637">,</span>&nbsp;<span class="ident" id="1326639"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326641">.</span><span class="ident" id="1326642">in</span><span class="op" id="1326644">,</span>&nbsp;<span class="ident" id="1326646"><a href="/unicode/utf8/utf8_test.go.html#1326539">out</a></span><span class="op" id="1326649">,</span>&nbsp;<span class="ident" id="1326651"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326653">.</span><span class="ident" id="1326654">out</span><span class="op" id="1326657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326661">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1326665">if</span>&nbsp;<span class="ident" id="1326668">out</span>&nbsp;<span class="op" id="1326672">:=</span>&nbsp;<span class="ident" id="1326675"><a href="/unicode/utf8/utf8.go.html#1646971">RuneCount</a></span><span class="op" id="1326684">(</span><span class="op" id="1326685">[</span><span class="op" id="1326686">]</span><span class="builtintype" id="1326687">byte</span><span class="op" id="1326691">(</span><span class="ident" id="1326692"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326694">.</span><span class="ident" id="1326695">in</span><span class="op" id="1326697">)</span><span class="op" id="1326698">)</span><span class="op" id="1326699">;</span>&nbsp;<span class="ident" id="1326701"><a href="/unicode/utf8/utf8_test.go.html#1326668">out</a></span>&nbsp;<span class="op" id="1326705">!=</span>&nbsp;<span class="ident" id="1326708"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326710">.</span><span class="ident" id="1326711">out</span>&nbsp;<span class="op" id="1326715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326720"><a href="/unicode/utf8/utf8_test.go.html#1326481">t</a></span><span class="op" id="1326721">.</span><span class="ident" id="1326722">Errorf</span><span class="op" id="1326728">(</span><span class="string" id="1326729">&#34;RuneCount(%q)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1326758">,</span>&nbsp;<span class="ident" id="1326760"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326762">.</span><span class="ident" id="1326763">in</span><span class="op" id="1326765">,</span>&nbsp;<span class="ident" id="1326767"><a href="/unicode/utf8/utf8_test.go.html#1326668">out</a></span><span class="op" id="1326770">,</span>&nbsp;<span class="ident" id="1326772"><a href="/unicode/utf8/utf8_test.go.html#1326505">tt</a></span><span class="op" id="1326774">.</span><span class="ident" id="1326775">out</span><span class="op" id="1326778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326785">}</span><br>
<span class="lineno"></span><span class="op" id="1326787">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="1326790">type</span>&nbsp;<span class="ident" id="1326795">RuneLenTest</span>&nbsp;<span class="keyword" id="1326807">struct</span>&nbsp;<span class="op" id="1326814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326817">r</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1326822">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1326828">size</span>&nbsp;<span class="builtintype" id="1326833">int</span><br>
<span class="lineno"></span><span class="op" id="1326837">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="1326840">var</span>&nbsp;<span class="ident" id="1326844">runelentests</span>&nbsp;<span class="op" id="1326857">=</span>&nbsp;<span class="op" id="1326859">[</span><span class="op" id="1326860">]</span><span class="ident" id="1326861"><a href="/unicode/utf8/utf8_test.go.html#1326795">RuneLenTest</a></span><span class="op" id="1326872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326875">{</span><span class="num" id="1326876">0</span><span class="op" id="1326877">,</span>&nbsp;<span class="num" id="1326879">1</span><span class="op" id="1326880">}</span><span class="op" id="1326881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326884">{</span><span class="string" id="1326885">&#39;e&#39;</span><span class="op" id="1326888">,</span>&nbsp;<span class="num" id="1326890">1</span><span class="op" id="1326891">}</span><span class="op" id="1326892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326895">{</span><span class="string" id="1326896">&#39;é&#39;</span><span class="op" id="1326900">,</span>&nbsp;<span class="num" id="1326902">2</span><span class="op" id="1326903">}</span><span class="op" id="1326904">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326907">{</span><span class="string" id="1326908">&#39;☺&#39;</span><span class="op" id="1326913">,</span>&nbsp;<span class="num" id="1326915">3</span><span class="op" id="1326916">}</span><span class="op" id="1326917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326920">{</span><span class="ident" id="1326921"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1326930">,</span>&nbsp;<span class="num" id="1326932">3</span><span class="op" id="1326933">}</span><span class="op" id="1326934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326937">{</span><span class="ident" id="1326938"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span><span class="op" id="1326945">,</span>&nbsp;<span class="num" id="1326947">4</span><span class="op" id="1326948">}</span><span class="op" id="1326949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326952">{</span><span class="num" id="1326953">0xD800</span><span class="op" id="1326959">,</span>&nbsp;<span class="op" id="1326961">-</span><span class="num" id="1326962">1</span><span class="op" id="1326963">}</span><span class="op" id="1326964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326967">{</span><span class="num" id="1326968">0xDFFF</span><span class="op" id="1326974">,</span>&nbsp;<span class="op" id="1326976">-</span><span class="num" id="1326977">1</span><span class="op" id="1326978">}</span><span class="op" id="1326979">,</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1326982">{</span><span class="ident" id="1326983"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span>&nbsp;<span class="op" id="1326991">+</span>&nbsp;<span class="num" id="1326993">1</span><span class="op" id="1326994">,</span>&nbsp;<span class="op" id="1326996">-</span><span class="num" id="1326997">1</span><span class="op" id="1326998">}</span><span class="op" id="1326999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327002">{</span><span class="op" id="1327003">-</span><span class="num" id="1327004">1</span><span class="op" id="1327005">,</span>&nbsp;<span class="op" id="1327007">-</span><span class="num" id="1327008">1</span><span class="op" id="1327009">}</span><span class="op" id="1327010">,</span><br>
<span class="lineno"></span><span class="op" id="1327012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1327015">func</span>&nbsp;<span class="ident" id="1327020">TestRuneLen</span><span class="op" id="1327031">(</span><span class="ident" id="1327032">t</span>&nbsp;<span class="op" id="1327034">*</span><span class="ident" id="1327035"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1327042">.</span><span class="ident" id="1327043">T</span><span class="op" id="1327044">)</span>&nbsp;<span class="op" id="1327046">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1327049">for</span>&nbsp;<span class="ident" id="1327053">_</span><span class="op" id="1327054">,</span>&nbsp;<span class="ident" id="1327056">tt</span>&nbsp;<span class="op" id="1327059">:=</span>&nbsp;<span class="keyword" id="1327062">range</span>&nbsp;<span class="ident" id="1327068"><a href="/unicode/utf8/utf8_test.go.html#1326844">runelentests</a></span>&nbsp;<span class="op" id="1327081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1327085">if</span>&nbsp;<span class="ident" id="1327088">size</span>&nbsp;<span class="op" id="1327093">:=</span>&nbsp;<span class="ident" id="1327096"><a href="/unicode/utf8/utf8.go.html#1645821">RuneLen</a></span><span class="op" id="1327103">(</span><span class="ident" id="1327104"><a href="/unicode/utf8/utf8_test.go.html#1327056">tt</a></span><span class="op" id="1327106">.</span><span class="ident" id="1327107">r</span><span class="op" id="1327108">)</span><span class="op" id="1327109">;</span>&nbsp;<span class="ident" id="1327111"><a href="/unicode/utf8/utf8_test.go.html#1327088">size</a></span>&nbsp;<span class="op" id="1327116">!=</span>&nbsp;<span class="ident" id="1327119"><a href="/unicode/utf8/utf8_test.go.html#1327056">tt</a></span><span class="op" id="1327121">.</span><span class="ident" id="1327122">size</span>&nbsp;<span class="op" id="1327127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1327132"><a href="/unicode/utf8/utf8_test.go.html#1327032">t</a></span><span class="op" id="1327133">.</span><span class="ident" id="1327134">Errorf</span><span class="op" id="1327140">(</span><span class="string" id="1327141">&#34;RuneLen(%#U)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1327169">,</span>&nbsp;<span class="ident" id="1327171"><a href="/unicode/utf8/utf8_test.go.html#1327056">tt</a></span><span class="op" id="1327173">.</span><span class="ident" id="1327174">r</span><span class="op" id="1327175">,</span>&nbsp;<span class="ident" id="1327177"><a href="/unicode/utf8/utf8_test.go.html#1327088">size</a></span><span class="op" id="1327181">,</span>&nbsp;<span class="ident" id="1327183"><a href="/unicode/utf8/utf8_test.go.html#1327056">tt</a></span><span class="op" id="1327185">.</span><span class="ident" id="1327186">size</span><span class="op" id="1327190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327197">}</span><br>
<span class="lineno">340</span><span class="op" id="1327199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1327202">type</span>&nbsp;<span class="ident" id="1327207">ValidTest</span>&nbsp;<span class="keyword" id="1327217">struct</span>&nbsp;<span class="op" id="1327224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1327227">in</span>&nbsp;&nbsp;<span class="builtintype" id="1327231">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1327239">out</span>&nbsp;<span class="builtintype" id="1327243">bool</span><br>
<span class="lineno">345</span><span class="op" id="1327248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1327251">var</span>&nbsp;<span class="ident" id="1327255">validTests</span>&nbsp;<span class="op" id="1327266">=</span>&nbsp;<span class="op" id="1327268">[</span><span class="op" id="1327269">]</span><span class="ident" id="1327270"><a href="/unicode/utf8/utf8_test.go.html#1327207">ValidTest</a></span><span class="op" id="1327279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327282">{</span><span class="string" id="1327283">&#34;&#34;</span><span class="op" id="1327285">,</span>&nbsp;<span class="ident" id="1327287">true</span><span class="op" id="1327291">}</span><span class="op" id="1327292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327295">{</span><span class="string" id="1327296">&#34;a&#34;</span><span class="op" id="1327299">,</span>&nbsp;<span class="ident" id="1327301">true</span><span class="op" id="1327305">}</span><span class="op" id="1327306">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327309">{</span><span class="string" id="1327310">&#34;abc&#34;</span><span class="op" id="1327315">,</span>&nbsp;<span class="ident" id="1327317">true</span><span class="op" id="1327321">}</span><span class="op" id="1327322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327325">{</span><span class="string" id="1327326">&#34;Ж&#34;</span><span class="op" id="1327330">,</span>&nbsp;<span class="ident" id="1327332">true</span><span class="op" id="1327336">}</span><span class="op" id="1327337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327340">{</span><span class="string" id="1327341">&#34;ЖЖ&#34;</span><span class="op" id="1327347">,</span>&nbsp;<span class="ident" id="1327349">true</span><span class="op" id="1327353">}</span><span class="op" id="1327354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327357">{</span><span class="string" id="1327358">&#34;брэд-ЛГТМ&#34;</span><span class="op" id="1327377">,</span>&nbsp;<span class="ident" id="1327379">true</span><span class="op" id="1327383">}</span><span class="op" id="1327384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327387">{</span><span class="string" id="1327388">&#34;☺☻☹&#34;</span><span class="op" id="1327399">,</span>&nbsp;<span class="ident" id="1327401">true</span><span class="op" id="1327405">}</span><span class="op" id="1327406">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327409">{</span><span class="builtintype" id="1327410">string</span><span class="op" id="1327416">(</span><span class="op" id="1327417">[</span><span class="op" id="1327418">]</span><span class="builtintype" id="1327419">byte</span><span class="op" id="1327423">{</span><span class="num" id="1327424">66</span><span class="op" id="1327426">,</span>&nbsp;<span class="num" id="1327428">250</span><span class="op" id="1327431">}</span><span class="op" id="1327432">)</span><span class="op" id="1327433">,</span>&nbsp;<span class="ident" id="1327435">false</span><span class="op" id="1327440">}</span><span class="op" id="1327441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327444">{</span><span class="builtintype" id="1327445">string</span><span class="op" id="1327451">(</span><span class="op" id="1327452">[</span><span class="op" id="1327453">]</span><span class="builtintype" id="1327454">byte</span><span class="op" id="1327458">{</span><span class="num" id="1327459">66</span><span class="op" id="1327461">,</span>&nbsp;<span class="num" id="1327463">250</span><span class="op" id="1327466">,</span>&nbsp;<span class="num" id="1327468">67</span><span class="op" id="1327470">}</span><span class="op" id="1327471">)</span><span class="op" id="1327472">,</span>&nbsp;<span class="ident" id="1327474">false</span><span class="op" id="1327479">}</span><span class="op" id="1327480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327483">{</span><span class="string" id="1327484">&#34;a\uFFFDb&#34;</span><span class="op" id="1327494">,</span>&nbsp;<span class="ident" id="1327496">true</span><span class="op" id="1327500">}</span><span class="op" id="1327501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327504">{</span><span class="builtintype" id="1327505">string</span><span class="op" id="1327511">(</span><span class="string" id="1327512">&#34;\xF4\x8F\xBF\xBF&#34;</span><span class="op" id="1327530">)</span><span class="op" id="1327531">,</span>&nbsp;<span class="ident" id="1327533">true</span><span class="op" id="1327537">}</span><span class="op" id="1327538">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327545">//&nbsp;U+10FFFF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327558">{</span><span class="builtintype" id="1327559">string</span><span class="op" id="1327565">(</span><span class="string" id="1327566">&#34;\xF4\x90\x80\x80&#34;</span><span class="op" id="1327584">)</span><span class="op" id="1327585">,</span>&nbsp;<span class="ident" id="1327587">false</span><span class="op" id="1327592">}</span><span class="op" id="1327593">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327599">//&nbsp;U+10FFFF+1;&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327628">{</span><span class="builtintype" id="1327629">string</span><span class="op" id="1327635">(</span><span class="string" id="1327636">&#34;\xF7\xBF\xBF\xBF&#34;</span><span class="op" id="1327654">)</span><span class="op" id="1327655">,</span>&nbsp;<span class="ident" id="1327657">false</span><span class="op" id="1327662">}</span><span class="op" id="1327663">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327669">//&nbsp;0x1FFFFF;&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327696">{</span><span class="builtintype" id="1327697">string</span><span class="op" id="1327703">(</span><span class="string" id="1327704">&#34;\xFB\xBF\xBF\xBF\xBF&#34;</span><span class="op" id="1327726">)</span><span class="op" id="1327727">,</span>&nbsp;<span class="ident" id="1327729">false</span><span class="op" id="1327734">}</span><span class="op" id="1327735">,</span>&nbsp;<span class="comment" id="1327737">//&nbsp;0x3FFFFFF;&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327765">{</span><span class="builtintype" id="1327766">string</span><span class="op" id="1327772">(</span><span class="string" id="1327773">&#34;\xc0\x80&#34;</span><span class="op" id="1327783">)</span><span class="op" id="1327784">,</span>&nbsp;<span class="ident" id="1327786">false</span><span class="op" id="1327791">}</span><span class="op" id="1327792">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327806">//&nbsp;U+0000&nbsp;encoded&nbsp;in&nbsp;two&nbsp;bytes:&nbsp;incorrect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327849">{</span><span class="builtintype" id="1327850">string</span><span class="op" id="1327856">(</span><span class="string" id="1327857">&#34;\xed\xa0\x80&#34;</span><span class="op" id="1327871">)</span><span class="op" id="1327872">,</span>&nbsp;<span class="ident" id="1327874">false</span><span class="op" id="1327879">}</span><span class="op" id="1327880">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327890">//&nbsp;U+D800&nbsp;high&nbsp;surrogate&nbsp;(sic)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1327922">{</span><span class="builtintype" id="1327923">string</span><span class="op" id="1327929">(</span><span class="string" id="1327930">&#34;\xed\xbf\xbf&#34;</span><span class="op" id="1327944">)</span><span class="op" id="1327945">,</span>&nbsp;<span class="ident" id="1327947">false</span><span class="op" id="1327952">}</span><span class="op" id="1327953">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1327963">//&nbsp;U+DFFF&nbsp;low&nbsp;surrogate&nbsp;(sic)</span><br>
<span class="lineno">365</span><span class="op" id="1327993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1327996">func</span>&nbsp;<span class="ident" id="1328001">TestValid</span><span class="op" id="1328010">(</span><span class="ident" id="1328011">t</span>&nbsp;<span class="op" id="1328013">*</span><span class="ident" id="1328014"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1328021">.</span><span class="ident" id="1328022">T</span><span class="op" id="1328023">)</span>&nbsp;<span class="op" id="1328025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328028">for</span>&nbsp;<span class="ident" id="1328032">_</span><span class="op" id="1328033">,</span>&nbsp;<span class="ident" id="1328035">tt</span>&nbsp;<span class="op" id="1328038">:=</span>&nbsp;<span class="keyword" id="1328041">range</span>&nbsp;<span class="ident" id="1328047"><a href="/unicode/utf8/utf8_test.go.html#1327255">validTests</a></span>&nbsp;<span class="op" id="1328058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328062">if</span>&nbsp;<span class="ident" id="1328065"><a href="/unicode/utf8/utf8.go.html#1647588">Valid</a></span><span class="op" id="1328070">(</span><span class="op" id="1328071">[</span><span class="op" id="1328072">]</span><span class="builtintype" id="1328073">byte</span><span class="op" id="1328077">(</span><span class="ident" id="1328078"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328080">.</span><span class="ident" id="1328081">in</span><span class="op" id="1328083">)</span><span class="op" id="1328084">)</span>&nbsp;<span class="op" id="1328086">!=</span>&nbsp;<span class="ident" id="1328089"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328091">.</span><span class="ident" id="1328092">out</span>&nbsp;<span class="op" id="1328096">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328101"><a href="/unicode/utf8/utf8_test.go.html#1328011">t</a></span><span class="op" id="1328102">.</span><span class="ident" id="1328103">Errorf</span><span class="op" id="1328109">(</span><span class="string" id="1328110">&#34;Valid(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="1328135">,</span>&nbsp;<span class="ident" id="1328137"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328139">.</span><span class="ident" id="1328140">in</span><span class="op" id="1328142">,</span>&nbsp;<span class="op" id="1328144">!</span><span class="ident" id="1328145"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328147">.</span><span class="ident" id="1328148">out</span><span class="op" id="1328151">,</span>&nbsp;<span class="ident" id="1328153"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328155">.</span><span class="ident" id="1328156">out</span><span class="op" id="1328159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328167">if</span>&nbsp;<span class="ident" id="1328170"><a href="/unicode/utf8/utf8.go.html#1647988">ValidString</a></span><span class="op" id="1328181">(</span><span class="ident" id="1328182"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328184">.</span><span class="ident" id="1328185">in</span><span class="op" id="1328187">)</span>&nbsp;<span class="op" id="1328189">!=</span>&nbsp;<span class="ident" id="1328192"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328194">.</span><span class="ident" id="1328195">out</span>&nbsp;<span class="op" id="1328199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328204"><a href="/unicode/utf8/utf8_test.go.html#1328011">t</a></span><span class="op" id="1328205">.</span><span class="ident" id="1328206">Errorf</span><span class="op" id="1328212">(</span><span class="string" id="1328213">&#34;ValidString(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="1328244">,</span>&nbsp;<span class="ident" id="1328246"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328248">.</span><span class="ident" id="1328249">in</span><span class="op" id="1328251">,</span>&nbsp;<span class="op" id="1328253">!</span><span class="ident" id="1328254"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328256">.</span><span class="ident" id="1328257">out</span><span class="op" id="1328260">,</span>&nbsp;<span class="ident" id="1328262"><a href="/unicode/utf8/utf8_test.go.html#1328035">tt</a></span><span class="op" id="1328264">.</span><span class="ident" id="1328265">out</span><span class="op" id="1328268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328272">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328275">}</span><br>
<span class="lineno"></span><span class="op" id="1328277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1328280">type</span>&nbsp;<span class="ident" id="1328285">ValidRuneTest</span>&nbsp;<span class="keyword" id="1328299">struct</span>&nbsp;<span class="op" id="1328306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328309">r</span>&nbsp;&nbsp;<span class="builtintype" id="1328312">rune</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328318">ok</span>&nbsp;<span class="builtintype" id="1328321">bool</span><br>
<span class="lineno"></span><span class="op" id="1328326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1328329">var</span>&nbsp;<span class="ident" id="1328333">validrunetests</span>&nbsp;<span class="op" id="1328348">=</span>&nbsp;<span class="op" id="1328350">[</span><span class="op" id="1328351">]</span><span class="ident" id="1328352"><a href="/unicode/utf8/utf8_test.go.html#1328285">ValidRuneTest</a></span><span class="op" id="1328365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328368">{</span><span class="num" id="1328369">0</span><span class="op" id="1328370">,</span>&nbsp;<span class="ident" id="1328372">true</span><span class="op" id="1328376">}</span><span class="op" id="1328377">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328380">{</span><span class="string" id="1328381">&#39;e&#39;</span><span class="op" id="1328384">,</span>&nbsp;<span class="ident" id="1328386">true</span><span class="op" id="1328390">}</span><span class="op" id="1328391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328394">{</span><span class="string" id="1328395">&#39;é&#39;</span><span class="op" id="1328399">,</span>&nbsp;<span class="ident" id="1328401">true</span><span class="op" id="1328405">}</span><span class="op" id="1328406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328409">{</span><span class="string" id="1328410">&#39;☺&#39;</span><span class="op" id="1328415">,</span>&nbsp;<span class="ident" id="1328417">true</span><span class="op" id="1328421">}</span><span class="op" id="1328422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328425">{</span><span class="ident" id="1328426"><a href="/unicode/utf8/utf8.go.html#1638480">RuneError</a></span><span class="op" id="1328435">,</span>&nbsp;<span class="ident" id="1328437">true</span><span class="op" id="1328441">}</span><span class="op" id="1328442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328445">{</span><span class="ident" id="1328446"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span><span class="op" id="1328453">,</span>&nbsp;<span class="ident" id="1328455">true</span><span class="op" id="1328459">}</span><span class="op" id="1328460">,</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328463">{</span><span class="num" id="1328464">0xD7FF</span><span class="op" id="1328470">,</span>&nbsp;<span class="ident" id="1328472">true</span><span class="op" id="1328476">}</span><span class="op" id="1328477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328480">{</span><span class="num" id="1328481">0xD800</span><span class="op" id="1328487">,</span>&nbsp;<span class="ident" id="1328489">false</span><span class="op" id="1328494">}</span><span class="op" id="1328495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328498">{</span><span class="num" id="1328499">0xDFFF</span><span class="op" id="1328505">,</span>&nbsp;<span class="ident" id="1328507">false</span><span class="op" id="1328512">}</span><span class="op" id="1328513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328516">{</span><span class="num" id="1328517">0xE000</span><span class="op" id="1328523">,</span>&nbsp;<span class="ident" id="1328525">true</span><span class="op" id="1328529">}</span><span class="op" id="1328530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328533">{</span><span class="ident" id="1328534"><a href="/unicode/utf8/utf8.go.html#1638664">MaxRune</a></span>&nbsp;<span class="op" id="1328542">+</span>&nbsp;<span class="num" id="1328544">1</span><span class="op" id="1328545">,</span>&nbsp;<span class="ident" id="1328547">false</span><span class="op" id="1328552">}</span><span class="op" id="1328553">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328556">{</span><span class="op" id="1328557">-</span><span class="num" id="1328558">1</span><span class="op" id="1328559">,</span>&nbsp;<span class="ident" id="1328561">false</span><span class="op" id="1328566">}</span><span class="op" id="1328567">,</span><br>
<span class="lineno"></span><span class="op" id="1328569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1328572">func</span>&nbsp;<span class="ident" id="1328577">TestValidRune</span><span class="op" id="1328590">(</span><span class="ident" id="1328591">t</span>&nbsp;<span class="op" id="1328593">*</span><span class="ident" id="1328594"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1328601">.</span><span class="ident" id="1328602">T</span><span class="op" id="1328603">)</span>&nbsp;<span class="op" id="1328605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328608">for</span>&nbsp;<span class="ident" id="1328612">_</span><span class="op" id="1328613">,</span>&nbsp;<span class="ident" id="1328615">tt</span>&nbsp;<span class="op" id="1328618">:=</span>&nbsp;<span class="keyword" id="1328621">range</span>&nbsp;<span class="ident" id="1328627"><a href="/unicode/utf8/utf8_test.go.html#1328333">validrunetests</a></span>&nbsp;<span class="op" id="1328642">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328646">if</span>&nbsp;<span class="ident" id="1328649">ok</span>&nbsp;<span class="op" id="1328652">:=</span>&nbsp;<span class="ident" id="1328655"><a href="/unicode/utf8/utf8.go.html#1648484">ValidRune</a></span><span class="op" id="1328664">(</span><span class="ident" id="1328665"><a href="/unicode/utf8/utf8_test.go.html#1328615">tt</a></span><span class="op" id="1328667">.</span><span class="ident" id="1328668">r</span><span class="op" id="1328669">)</span><span class="op" id="1328670">;</span>&nbsp;<span class="ident" id="1328672"><a href="/unicode/utf8/utf8_test.go.html#1328649">ok</a></span>&nbsp;<span class="op" id="1328675">!=</span>&nbsp;<span class="ident" id="1328678"><a href="/unicode/utf8/utf8_test.go.html#1328615">tt</a></span><span class="op" id="1328680">.</span><span class="ident" id="1328681">ok</span>&nbsp;<span class="op" id="1328684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328689"><a href="/unicode/utf8/utf8_test.go.html#1328591">t</a></span><span class="op" id="1328690">.</span><span class="ident" id="1328691">Errorf</span><span class="op" id="1328697">(</span><span class="string" id="1328698">&#34;ValidRune(%#U)&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="1328728">,</span>&nbsp;<span class="ident" id="1328730"><a href="/unicode/utf8/utf8_test.go.html#1328615">tt</a></span><span class="op" id="1328732">.</span><span class="ident" id="1328733">r</span><span class="op" id="1328734">,</span>&nbsp;<span class="ident" id="1328736"><a href="/unicode/utf8/utf8_test.go.html#1328649">ok</a></span><span class="op" id="1328738">,</span>&nbsp;<span class="ident" id="1328740"><a href="/unicode/utf8/utf8_test.go.html#1328615">tt</a></span><span class="op" id="1328742">.</span><span class="ident" id="1328743">ok</span><span class="op" id="1328745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328752">}</span><br>
<span class="lineno"></span><span class="op" id="1328754">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="keyword" id="1328757">func</span>&nbsp;<span class="ident" id="1328762">BenchmarkRuneCountTenASCIIChars</span><span class="op" id="1328793">(</span><span class="ident" id="1328794">b</span>&nbsp;<span class="op" id="1328796">*</span><span class="ident" id="1328797"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1328804">.</span><span class="ident" id="1328805">B</span><span class="op" id="1328806">)</span>&nbsp;<span class="op" id="1328808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328811">for</span>&nbsp;<span class="ident" id="1328815">i</span>&nbsp;<span class="op" id="1328817">:=</span>&nbsp;<span class="num" id="1328820">0</span><span class="op" id="1328821">;</span>&nbsp;<span class="ident" id="1328823"><a href="/unicode/utf8/utf8_test.go.html#1328815">i</a></span>&nbsp;<span class="op" id="1328825">&lt;</span>&nbsp;<span class="ident" id="1328827"><a href="/unicode/utf8/utf8_test.go.html#1328794">b</a></span><span class="op" id="1328828">.</span><span class="ident" id="1328829">N</span><span class="op" id="1328830">;</span>&nbsp;<span class="ident" id="1328832"><a href="/unicode/utf8/utf8_test.go.html#1328815">i</a></span><span class="op" id="1328833">++</span>&nbsp;<span class="op" id="1328836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328840"><a href="/unicode/utf8/utf8.go.html#1647223">RuneCountInString</a></span><span class="op" id="1328857">(</span><span class="string" id="1328858">&#34;0123456789&#34;</span><span class="op" id="1328870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1328873">}</span><br>
<span class="lineno">410</span><span class="op" id="1328875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1328878">func</span>&nbsp;<span class="ident" id="1328883">BenchmarkRuneCountTenJapaneseChars</span><span class="op" id="1328917">(</span><span class="ident" id="1328918">b</span>&nbsp;<span class="op" id="1328920">*</span><span class="ident" id="1328921"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1328928">.</span><span class="ident" id="1328929">B</span><span class="op" id="1328930">)</span>&nbsp;<span class="op" id="1328932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1328935">for</span>&nbsp;<span class="ident" id="1328939">i</span>&nbsp;<span class="op" id="1328941">:=</span>&nbsp;<span class="num" id="1328944">0</span><span class="op" id="1328945">;</span>&nbsp;<span class="ident" id="1328947"><a href="/unicode/utf8/utf8_test.go.html#1328939">i</a></span>&nbsp;<span class="op" id="1328949">&lt;</span>&nbsp;<span class="ident" id="1328951"><a href="/unicode/utf8/utf8_test.go.html#1328918">b</a></span><span class="op" id="1328952">.</span><span class="ident" id="1328953">N</span><span class="op" id="1328954">;</span>&nbsp;<span class="ident" id="1328956"><a href="/unicode/utf8/utf8_test.go.html#1328939">i</a></span><span class="op" id="1328957">++</span>&nbsp;<span class="op" id="1328960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1328964"><a href="/unicode/utf8/utf8.go.html#1647223">RuneCountInString</a></span><span class="op" id="1328981">(</span><span class="string" id="1328982">&#34;日本語日本語日本語日&#34;</span><span class="op" id="1329014">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1329017">}</span><br>
<span class="lineno"></span><span class="op" id="1329019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1329022">func</span>&nbsp;<span class="ident" id="1329027">BenchmarkEncodeASCIIRune</span><span class="op" id="1329051">(</span><span class="ident" id="1329052">b</span>&nbsp;<span class="op" id="1329054">*</span><span class="ident" id="1329055"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1329062">.</span><span class="ident" id="1329063">B</span><span class="op" id="1329064">)</span>&nbsp;<span class="op" id="1329066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329069">buf</span>&nbsp;<span class="op" id="1329073">:=</span>&nbsp;<span class="builtinfunc" id="1329076">make</span><span class="op" id="1329080">(</span><span class="op" id="1329081">[</span><span class="op" id="1329082">]</span><span class="builtintype" id="1329083">byte</span><span class="op" id="1329087">,</span>&nbsp;<span class="ident" id="1329089"><a href="/unicode/utf8/utf8.go.html#1638727">UTFMax</a></span><span class="op" id="1329095">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1329098">for</span>&nbsp;<span class="ident" id="1329102">i</span>&nbsp;<span class="op" id="1329104">:=</span>&nbsp;<span class="num" id="1329107">0</span><span class="op" id="1329108">;</span>&nbsp;<span class="ident" id="1329110"><a href="/unicode/utf8/utf8_test.go.html#1329102">i</a></span>&nbsp;<span class="op" id="1329112">&lt;</span>&nbsp;<span class="ident" id="1329114"><a href="/unicode/utf8/utf8_test.go.html#1329052">b</a></span><span class="op" id="1329115">.</span><span class="ident" id="1329116">N</span><span class="op" id="1329117">;</span>&nbsp;<span class="ident" id="1329119"><a href="/unicode/utf8/utf8_test.go.html#1329102">i</a></span><span class="op" id="1329120">++</span>&nbsp;<span class="op" id="1329123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329127"><a href="/unicode/utf8/utf8.go.html#1646217">EncodeRune</a></span><span class="op" id="1329137">(</span><span class="ident" id="1329138"><a href="/unicode/utf8/utf8_test.go.html#1329069">buf</a></span><span class="op" id="1329141">,</span>&nbsp;<span class="string" id="1329143">&#39;a&#39;</span><span class="op" id="1329146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1329149">}</span><br>
<span class="lineno"></span><span class="op" id="1329151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span><span class="keyword" id="1329154">func</span>&nbsp;<span class="ident" id="1329159">BenchmarkEncodeJapaneseRune</span><span class="op" id="1329186">(</span><span class="ident" id="1329187">b</span>&nbsp;<span class="op" id="1329189">*</span><span class="ident" id="1329190"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1329197">.</span><span class="ident" id="1329198">B</span><span class="op" id="1329199">)</span>&nbsp;<span class="op" id="1329201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329204">buf</span>&nbsp;<span class="op" id="1329208">:=</span>&nbsp;<span class="builtinfunc" id="1329211">make</span><span class="op" id="1329215">(</span><span class="op" id="1329216">[</span><span class="op" id="1329217">]</span><span class="builtintype" id="1329218">byte</span><span class="op" id="1329222">,</span>&nbsp;<span class="ident" id="1329224"><a href="/unicode/utf8/utf8.go.html#1638727">UTFMax</a></span><span class="op" id="1329230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1329233">for</span>&nbsp;<span class="ident" id="1329237">i</span>&nbsp;<span class="op" id="1329239">:=</span>&nbsp;<span class="num" id="1329242">0</span><span class="op" id="1329243">;</span>&nbsp;<span class="ident" id="1329245"><a href="/unicode/utf8/utf8_test.go.html#1329237">i</a></span>&nbsp;<span class="op" id="1329247">&lt;</span>&nbsp;<span class="ident" id="1329249"><a href="/unicode/utf8/utf8_test.go.html#1329187">b</a></span><span class="op" id="1329250">.</span><span class="ident" id="1329251">N</span><span class="op" id="1329252">;</span>&nbsp;<span class="ident" id="1329254"><a href="/unicode/utf8/utf8_test.go.html#1329237">i</a></span><span class="op" id="1329255">++</span>&nbsp;<span class="op" id="1329258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329262"><a href="/unicode/utf8/utf8.go.html#1646217">EncodeRune</a></span><span class="op" id="1329272">(</span><span class="ident" id="1329273"><a href="/unicode/utf8/utf8_test.go.html#1329204">buf</a></span><span class="op" id="1329276">,</span>&nbsp;<span class="string" id="1329278">&#39;本&#39;</span><span class="op" id="1329283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1329286">}</span><br>
<span class="lineno">430</span><span class="op" id="1329288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1329291">func</span>&nbsp;<span class="ident" id="1329296">BenchmarkDecodeASCIIRune</span><span class="op" id="1329320">(</span><span class="ident" id="1329321">b</span>&nbsp;<span class="op" id="1329323">*</span><span class="ident" id="1329324"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1329331">.</span><span class="ident" id="1329332">B</span><span class="op" id="1329333">)</span>&nbsp;<span class="op" id="1329335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329338">a</span>&nbsp;<span class="op" id="1329340">:=</span>&nbsp;<span class="op" id="1329343">[</span><span class="op" id="1329344">]</span><span class="builtintype" id="1329345">byte</span><span class="op" id="1329349">{</span><span class="string" id="1329350">&#39;a&#39;</span><span class="op" id="1329353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1329356">for</span>&nbsp;<span class="ident" id="1329360">i</span>&nbsp;<span class="op" id="1329362">:=</span>&nbsp;<span class="num" id="1329365">0</span><span class="op" id="1329366">;</span>&nbsp;<span class="ident" id="1329368"><a href="/unicode/utf8/utf8_test.go.html#1329360">i</a></span>&nbsp;<span class="op" id="1329370">&lt;</span>&nbsp;<span class="ident" id="1329372"><a href="/unicode/utf8/utf8_test.go.html#1329321">b</a></span><span class="op" id="1329373">.</span><span class="ident" id="1329374">N</span><span class="op" id="1329375">;</span>&nbsp;<span class="ident" id="1329377"><a href="/unicode/utf8/utf8_test.go.html#1329360">i</a></span><span class="op" id="1329378">++</span>&nbsp;<span class="op" id="1329381">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329385"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1329395">(</span><span class="ident" id="1329396"><a href="/unicode/utf8/utf8_test.go.html#1329338">a</a></span><span class="op" id="1329397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1329400">}</span><br>
<span class="lineno"></span><span class="op" id="1329402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1329405">func</span>&nbsp;<span class="ident" id="1329410">BenchmarkDecodeJapaneseRune</span><span class="op" id="1329437">(</span><span class="ident" id="1329438">b</span>&nbsp;<span class="op" id="1329440">*</span><span class="ident" id="1329441"><a href="/unicode/utf8/utf8_test.go.html#1318801">testing</a></span><span class="op" id="1329448">.</span><span class="ident" id="1329449">B</span><span class="op" id="1329450">)</span>&nbsp;<span class="op" id="1329452">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329455">nihon</span>&nbsp;<span class="op" id="1329461">:=</span>&nbsp;<span class="op" id="1329464">[</span><span class="op" id="1329465">]</span><span class="builtintype" id="1329466">byte</span><span class="op" id="1329470">(</span><span class="string" id="1329471">&#34;本&#34;</span><span class="op" id="1329476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1329479">for</span>&nbsp;<span class="ident" id="1329483">i</span>&nbsp;<span class="op" id="1329485">:=</span>&nbsp;<span class="num" id="1329488">0</span><span class="op" id="1329489">;</span>&nbsp;<span class="ident" id="1329491"><a href="/unicode/utf8/utf8_test.go.html#1329483">i</a></span>&nbsp;<span class="op" id="1329493">&lt;</span>&nbsp;<span class="ident" id="1329495"><a href="/unicode/utf8/utf8_test.go.html#1329438">b</a></span><span class="op" id="1329496">.</span><span class="ident" id="1329497">N</span><span class="op" id="1329498">;</span>&nbsp;<span class="ident" id="1329500"><a href="/unicode/utf8/utf8_test.go.html#1329483">i</a></span><span class="op" id="1329501">++</span>&nbsp;<span class="op" id="1329504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1329508"><a href="/unicode/utf8/utf8.go.html#1643022">DecodeRune</a></span><span class="op" id="1329518">(</span><span class="ident" id="1329519"><a href="/unicode/utf8/utf8_test.go.html#1329455">nihon</a></span><span class="op" id="1329524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1329527">}</span><br>
<span class="lineno"></span><span class="op" id="1329529">}</span>
</div>
</body>
</html>
